"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkej2_vue_samples"] = self["webpackChunkej2_vue_samples"] || []).push([["chunk-vendors-node_modules_syncfusion_ej2-pivotview_src_common_calculatedfield_calculated-field_js-e-e4945cfb"],{

/***/ "./node_modules/@syncfusion/ej2-pivotview/src/common/calculatedfield/calculated-field.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/@syncfusion/ej2-pivotview/src/common/calculatedfield/calculated-field.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CalculatedField: () => (/* binding */ CalculatedField)\n/* harmony export */ });\n/* harmony import */ var _syncfusion_ej2_popups__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @syncfusion/ej2-popups */ \"./node_modules/@syncfusion/ej2-popups/index.js\");\n/* harmony import */ var _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @syncfusion/ej2-base */ \"./node_modules/@syncfusion/ej2-base/index.js\");\n/* harmony import */ var _syncfusion_ej2_buttons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @syncfusion/ej2-buttons */ \"./node_modules/@syncfusion/ej2-buttons/index.js\");\n/* harmony import */ var _syncfusion_ej2_inputs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @syncfusion/ej2-inputs */ \"./node_modules/@syncfusion/ej2-inputs/index.js\");\n/* harmony import */ var _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/base/css-constant */ \"./node_modules/@syncfusion/ej2-pivotview/src/common/base/css-constant.js\");\n/* harmony import */ var _syncfusion_ej2_navigations__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @syncfusion/ej2-navigations */ \"./node_modules/@syncfusion/ej2-navigations/index.js\");\n/* harmony import */ var _common_base_constant__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../common/base/constant */ \"./node_modules/@syncfusion/ej2-pivotview/src/common/base/constant.js\");\n/* harmony import */ var _syncfusion_ej2_dropdowns__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @syncfusion/ej2-dropdowns */ \"./node_modules/@syncfusion/ej2-dropdowns/index.js\");\n/* harmony import */ var _base_util__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../base/util */ \"./node_modules/@syncfusion/ej2-pivotview/src/base/util.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Module to render Calculated Field Dialog\n */\nvar COUNT = 'Count';\nvar AVG = 'Avg';\nvar MEDIAN = 'Median';\nvar MIN = 'Min';\nvar MAX = 'Max';\nvar SUM = 'Sum';\nvar DISTINCTCOUNT = 'DistinctCount';\nvar PRODUCT = 'Product';\nvar STDEV = 'SampleStDev';\nvar STDEVP = 'PopulationStDev';\nvar VAR = 'SampleVar';\nvar VARP = 'PopulationVar';\nvar CALC = 'CalculatedField';\nvar AGRTYPE = 'AggregateType';\n/** @hidden */\nvar CalculatedField = /** @class */ (function () {\n    /**\n     * Constructor for calculatedfield module.\n     *\n     * @param {PivotView | PivotFieldList} parent - It represent the parent.\n     */\n    function CalculatedField(parent) {\n        /** @hidden */\n        this.isFormula = false;\n        /** @hidden */\n        this.isRequireUpdate = false;\n        this.formatTypes = ['Standard', 'Currency', 'Percent', 'Custom', 'None'];\n        this.parent = parent;\n        this.existingReport = null;\n        this.parent.calculatedFieldModule = this;\n        this.removeEventListener();\n        this.addEventListener();\n        this.parentID = this.parent.element.id;\n        this.treeObj = null;\n        this.droppable = null;\n        this.newFields = null;\n        this.isFieldExist = true;\n        this.formulaText = null;\n        this.fieldText = null;\n        this.formatText = null;\n        this.formatType = null;\n        this.fieldType = null;\n        this.parentHierarchy = null;\n        this.isEdit = false;\n        this.currentFieldName = null;\n    }\n    /**\n     * To get module name.\n     *\n     * @returns {string} - It returns the Module name.\n     */\n    CalculatedField.prototype.getModuleName = function () {\n        return 'calculatedField';\n    };\n    CalculatedField.prototype.keyActionHandler = function (e) {\n        var node = e.currentTarget.querySelector('.e-node-focus');\n        if (node) {\n            switch (e.action) {\n                case 'moveRight':\n                case 'shiftE':\n                    if (this.parent.dataType === 'pivot') {\n                        this.displayMenu(node);\n                    }\n                    break;\n                case 'delete':\n                    if (node.tagName === 'LI' && !node.querySelector('.e-list-icon.e-format') && !node.querySelector('.e-list-icon').classList.contains('.e-icons') && (node.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.GRID_REMOVE) &&\n                        node.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.GRID_REMOVE).classList.contains('e-list-icon'))) {\n                        this.createConfirmDialog(this.parent.localeObj.getConstant('alert'), this.parent.localeObj.getConstant('removeCalculatedField'), {}, true, node);\n                    }\n                    break;\n                case 'enter':\n                    {\n                        var field = node.getAttribute('data-field');\n                        var dialog = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'calculateddialog', document), _syncfusion_ej2_popups__WEBPACK_IMPORTED_MODULE_0__.Dialog);\n                        var type = node.getAttribute('data-type');\n                        var dropField = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'droppable', dialog.element);\n                        if (this.parent.dataType === 'pivot') {\n                            if (dropField.value === '') {\n                                if (type === CALC) {\n                                    dropField.value = node.getAttribute('data-uid');\n                                }\n                                else {\n                                    dropField.value = '\"' + type + '(' + field + ')' + '\"';\n                                }\n                            }\n                            else if (dropField.value !== '') {\n                                if (type === CALC) {\n                                    dropField.value = dropField.value + node.getAttribute('data-uid');\n                                }\n                                else {\n                                    dropField.value = dropField.value + '\"' + type + '(' + field + ')' + '\"';\n                                }\n                            }\n                        }\n                        else {\n                            if (this.parent.olapEngineModule && this.parent.olapEngineModule.fieldList[field] &&\n                                this.parent.olapEngineModule.fieldList[field].isCalculatedField) {\n                                field = this.parent.olapEngineModule.fieldList[field].tag;\n                            }\n                            if (dropField.value === '') {\n                                dropField.value = field;\n                            }\n                            else if (dropField.value !== '') {\n                                dropField.value = dropField.value + field;\n                            }\n                        }\n                    }\n                    break;\n            }\n        }\n    };\n    /**\n     * Trigger while click treeview icon.\n     *\n     * @param  {NodeClickEventArgs} e - Click event argument.\n     * @returns {void}\n     */\n    CalculatedField.prototype.fieldClickHandler = function (e) {\n        var node = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.closest)(e.event.target, 'li');\n        if (e.event.target.classList.contains(_common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.FORMAT) ||\n            e.event.target.classList.contains(_common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDIT) ||\n            e.event.target.classList.contains(_common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDITED) ||\n            e.event.target.classList.contains(_common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.GRID_REMOVE)) {\n            if (!this.parent.isAdaptive) {\n                this.displayMenu(node, e.node, e.event.target);\n            }\n            else if (this.parent.dataType === 'olap' && this.parent.isAdaptive) {\n                if (node.tagName === 'LI' && node.querySelector('.e-list-edit-icon').classList.contains(_common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDIT) && e.event.target.classList.contains(_common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDIT)) {\n                    this.isEdit = true;\n                    this.currentFieldName = node.getAttribute('data-field');\n                    this.fieldText = node.getAttribute('data-caption');\n                    this.formulaText = node.getAttribute('data-formula');\n                    this.formatType = node.getAttribute('data-formatString');\n                    this.formatText = this.formatType === 'Custom' ? node.getAttribute('data-customformatstring') : null;\n                    this.fieldType = node.getAttribute('data-membertype');\n                    this.parentHierarchy = this.fieldType === 'Dimension' ? node.getAttribute('data-hierarchy') : null;\n                    (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.addClass)([node.querySelector('.e-list-edit-icon')], _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDITED);\n                    (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.removeClass)([node.querySelector('.e-list-edit-icon')], _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDIT);\n                    this.renderMobileLayout(this.parent.dialogRenderer.adaptiveElement);\n                }\n                else if (node.tagName === 'LI' && node.querySelector('.e-list-edit-icon').classList.contains(_common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDITED) && e.event.target.classList.contains(_common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDITED)) {\n                    this.isEdit = false;\n                    this.fieldText = this.formatText = this.formulaText = this.currentFieldName = null;\n                    this.parentHierarchy = this.fieldType = this.formatType = null;\n                    (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.addClass)([node.querySelector('.e-list-edit-icon')], _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDIT);\n                    (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.removeClass)([node.querySelector('.e-list-edit-icon')], _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDITED);\n                }\n                else if (node.tagName === 'LI' && node.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.GRID_REMOVE).classList.contains('e-icons') && e.event.target.classList.contains(_common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.GRID_REMOVE)) {\n                    this.createConfirmDialog(this.parent.localeObj.getConstant('alert'), this.parent.localeObj.getConstant('removeCalculatedField'), {}, true, e.node);\n                }\n            }\n        }\n    };\n    /**\n     * Trigger while click treeview icon.\n     *\n     * @param  {AccordionClickArgs} e - Click event argument.\n     * @returns {void}\n     */\n    CalculatedField.prototype.accordionClickHandler = function (e) {\n        if (e.item && e.item.iconCss.indexOf('e-list-icon') !== -1 &&\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.closest)(e.originalEvent.target, '.e-acrdn-header-icon')) {\n            var node = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.closest)(e.originalEvent.target, '.e-acrdn-header').querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALCCHECK);\n            var fieldName = node.getAttribute('data-field');\n            var captionName = node.getAttribute('data-caption');\n            var formatObj = _base_util__WEBPACK_IMPORTED_MODULE_8__.PivotUtil.getFieldByName(fieldName, this.parent.dataSourceSettings.formatSettings);\n            var optionElement = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.closest)(e.originalEvent.target, '.e-acrdn-header-icon');\n            if (formatObj) {\n                var pivotFormat = this.getFormat(formatObj.format);\n                var formatString = (pivotFormat ? this.formatTypes.indexOf(pivotFormat) > -1 ?\n                    formatObj.format : 'Custom' : 'None');\n                this.formatType = formatString;\n            }\n            if (optionElement.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDIT) && e.originalEvent.target.classList.contains(_common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDIT)) {\n                this.isEdit = true;\n                this.currentFieldName = fieldName;\n                this.fieldText = captionName ? captionName : fieldName;\n                this.formulaText = this.parent.engineModule.fieldList[fieldName].formula;\n                this.formatText = formatObj ? formatObj.format : '';\n                (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.addClass)([optionElement.querySelector('.e-list-icon')], _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDITED);\n                (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.removeClass)([optionElement.querySelector('.e-list-icon')], _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDIT);\n                this.renderMobileLayout(this.parent.dialogRenderer.adaptiveElement);\n            }\n            else if (optionElement.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDITED) &&\n                e.originalEvent.target.classList.contains(_common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDITED)) {\n                this.isEdit = false;\n                this.fieldText = this.formatText = this.formulaText = this.currentFieldName = null;\n                (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.addClass)([optionElement.querySelector('.e-list-icon')], _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDIT);\n                (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.removeClass)([optionElement.querySelector('.e-list-icon')], _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDITED);\n            }\n            else if (optionElement.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.GRID_REMOVE) &&\n                e.originalEvent.target.classList.contains(_common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.GRID_REMOVE)) {\n                this.createConfirmDialog(this.parent.localeObj.getConstant('alert'), this.parent.localeObj.getConstant('removeCalculatedField'), {}, true, node);\n            }\n        }\n    };\n    CalculatedField.prototype.accordionCreated = function () {\n        var accordion = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'accordDiv', document), _syncfusion_ej2_navigations__WEBPACK_IMPORTED_MODULE_5__.Accordion);\n        var allElement = accordion.element.querySelectorAll('.e-acrdn-item');\n        for (var i = 0; i < allElement.length; i++) {\n            if (allElement[i].querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDIT) || allElement[i].querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDITED)) {\n                var element = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('span', {\n                    className: 'e-list-icon ' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.GRID_REMOVE + ' e-icons'\n                });\n                (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.append)([element], allElement[i].querySelector('.e-acrdn-header-icon'));\n                (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.addClass)([allElement[i]], _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.SELECT_CLASS);\n            }\n        }\n    };\n    CalculatedField.prototype.clearFormula = function () {\n        if (this.treeObj && this.treeObj.element.querySelector('li')) {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.removeClass)(this.treeObj.element.querySelectorAll('li'), 'e-active');\n            this.displayMenu(this.treeObj.element.querySelector('li'));\n        }\n    };\n    /**\n     * To display context menu.\n     *\n     * @param  {HTMLElement} node - It contains the value of node.\n     * @param  {HTMLElement} treeNode - It contains the value of tree Node.\n     * @param  {HTMLElement} target - It represent the target.\n     * @returns {void}\n     */\n    CalculatedField.prototype.displayMenu = function (node, treeNode, target) {\n        var edit = target ? target.classList.contains(_common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDIT) : true;\n        var edited = target ? target.classList.contains(_common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDITED) : true;\n        var dialog = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'calculateddialog', document), _syncfusion_ej2_popups__WEBPACK_IMPORTED_MODULE_0__.Dialog);\n        var inputObj = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'ddlelement', document), _syncfusion_ej2_inputs__WEBPACK_IMPORTED_MODULE_3__.MaskedTextBox);\n        try {\n            if (this.parent.dataType === 'pivot' && node.querySelector('.e-list-icon.e-format') &&\n                node.querySelector('.e-list-icon.e-format').classList.contains(_common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.ICON) &&\n                !node.querySelector('.e-list-icon').classList.contains(_common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDITED) &&\n                !node.querySelector('.e-list-icon').classList.contains(_common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.GRID_REMOVE) &&\n                !node.querySelector('.e-list-icon').classList.contains(_common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDIT) && node.tagName === 'LI') {\n                var menuObj = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'CalcContextmenu', document) ?\n                    (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'CalcContextmenu', document), _syncfusion_ej2_navigations__WEBPACK_IMPORTED_MODULE_5__.ContextMenu) : null;\n                if (menuObj && !menuObj.isDestroyed) {\n                    menuObj.destroy();\n                }\n                this.curMenu = node.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.LIST_TEXT_CLASS);\n                this.openContextMenu(node);\n            }\n            else if (node.tagName === 'LI' && (node.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDIT) &&\n                node.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDIT).classList.contains('e-list-icon') && edit ||\n                (this.parent.dataType === 'olap' && node.getAttribute('data-type') === CALC && node.classList.contains('e-active') && ((target && !target.classList.contains(_common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.GRID_REMOVE)) || !target)))) {\n                this.isEdit = true;\n                var fieldName = node.getAttribute('data-field');\n                var caption = node.getAttribute('data-caption');\n                this.currentFieldName = fieldName;\n                inputObj.value = caption;\n                inputObj.dataBind();\n                var formatString = node.getAttribute('data-formatString');\n                var dialogElement = dialog.element;\n                var ddlFormatTypes = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'Format_Div', dialogElement), _syncfusion_ej2_dropdowns__WEBPACK_IMPORTED_MODULE_7__.DropDownList);\n                var customFormat = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'Custom_Format_Element', dialogElement), _syncfusion_ej2_inputs__WEBPACK_IMPORTED_MODULE_3__.MaskedTextBox);\n                var customFormatString = node.getAttribute('data-customformatstring');\n                if (this.parent.dataType === 'olap') {\n                    var memberType = node.getAttribute('data-membertype');\n                    var parentHierarchy = node.getAttribute('data-hierarchy');\n                    var expression = node.getAttribute('data-formula');\n                    var fieldTitle = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + '_' + 'FieldNameTitle', dialogElement);\n                    var memberTypeDrop = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'Member_Type_Div', dialogElement), _syncfusion_ej2_dropdowns__WEBPACK_IMPORTED_MODULE_7__.DropDownList);\n                    var hierarchyDrop = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'Hierarchy_List_Div', dialogElement), _syncfusion_ej2_dropdowns__WEBPACK_IMPORTED_MODULE_7__.DropDownList);\n                    fieldTitle.innerText = this.parent.localeObj.getConstant('caption');\n                    (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'droppable', document).value = expression;\n                    memberTypeDrop.readonly = true;\n                    memberTypeDrop.value = memberType;\n                    memberTypeDrop.dataBind();\n                    if (memberType === 'Dimension') {\n                        hierarchyDrop.value = parentHierarchy;\n                    }\n                }\n                else {\n                    (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.addClass)(this.treeObj.element.querySelectorAll('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDITED), _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDIT);\n                    (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.removeClass)(this.treeObj.element.querySelectorAll('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDITED), _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDITED);\n                    (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.addClass)([node.querySelector('.e-list-icon')], _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDITED);\n                    (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.removeClass)([node.querySelector('.e-list-icon')], _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDIT);\n                    node.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDITED).setAttribute('title', this.parent.localeObj.getConstant('clearCalculatedField'));\n                    (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'droppable', document).value = node.getAttribute('data-uid');\n                }\n                if (formatString !== '') {\n                    ddlFormatTypes.value = formatString;\n                    ddlFormatTypes.dataBind();\n                }\n                customFormat.value = customFormatString;\n                customFormat.dataBind();\n            }\n            else if (node.tagName === 'LI' && (node.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDITED) &&\n                node.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDITED).classList.contains('e-list-icon') && edited ||\n                (this.parent.dataType === 'olap' && !node.classList.contains('e-active')))) {\n                this.isEdit = false;\n                inputObj.value = '';\n                inputObj.dataBind();\n                var dialogElement = dialog.element;\n                var customFormat = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'Custom_Format_Element', dialogElement), _syncfusion_ej2_inputs__WEBPACK_IMPORTED_MODULE_3__.MaskedTextBox);\n                customFormat.value = '';\n                customFormat.dataBind();\n                if (this.parent.dataType === 'olap') {\n                    var hierarchyDrop = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'Hierarchy_List_Div', dialogElement), _syncfusion_ej2_dropdowns__WEBPACK_IMPORTED_MODULE_7__.DropDownList);\n                    var ddlFormatTypes = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'Format_Div', dialogElement), _syncfusion_ej2_dropdowns__WEBPACK_IMPORTED_MODULE_7__.DropDownList);\n                    var memberTypeDrop = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'Member_Type_Div', dialogElement), _syncfusion_ej2_dropdowns__WEBPACK_IMPORTED_MODULE_7__.DropDownList);\n                    var fieldTitle = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + '_' + 'FieldNameTitle', dialogElement);\n                    fieldTitle.innerText = this.parent.localeObj.getConstant('fieldTitle');\n                    hierarchyDrop.index = 0;\n                    hierarchyDrop.dataBind();\n                    ddlFormatTypes.index = 0;\n                    ddlFormatTypes.dataBind();\n                    memberTypeDrop.index = 0;\n                    memberTypeDrop.readonly = false;\n                    memberTypeDrop.dataBind();\n                }\n                else {\n                    (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.addClass)(this.treeObj.element.querySelectorAll('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDITED), _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDIT);\n                    (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.removeClass)(this.treeObj.element.querySelectorAll('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDITED), _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDITED);\n                    node.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDIT).setAttribute('title', this.parent.localeObj.getConstant('edit'));\n                }\n                (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'droppable', document).value = '';\n            }\n            else if (node.tagName === 'LI' && (node.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.GRID_REMOVE) &&\n                node.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.GRID_REMOVE).classList.contains('e-list-icon')) && !edit && !edited) {\n                this.parent.actionObj.actionName = _common_base_constant__WEBPACK_IMPORTED_MODULE_6__.removeField;\n                if (this.parent.actionBeginMethod()) {\n                    return;\n                }\n                var dropField = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'droppable', document);\n                var field = {\n                    name: this.isEdit ? this.currentFieldName : inputObj.value,\n                    caption: inputObj.value,\n                    formula: dropField.value\n                };\n                this.createConfirmDialog(this.parent.localeObj.getConstant('alert'), this.parent.localeObj.getConstant('removeCalculatedField'), field, true, treeNode);\n            }\n        }\n        catch (execption) {\n            this.parent.actionFailureMethod(execption);\n        }\n    };\n    CalculatedField.prototype.removeCalcField = function (node) {\n        var dataSourceSettings = this.parent.dataSourceSettings;\n        var fieldName = node.getAttribute('data-field');\n        var calcfields = dataSourceSettings.calculatedFieldSettings;\n        var engineModule;\n        if (this.parent.dataType === 'pivot') {\n            if (!this.parent.isAdaptive) {\n                this.treeObj.removeNodes([node]);\n            }\n            else {\n                var index = parseInt(node.getAttribute('id').split(this.parentID + '_')[1], 10);\n                if (typeof index === 'number') {\n                    var accordion = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'accordDiv', document), _syncfusion_ej2_navigations__WEBPACK_IMPORTED_MODULE_5__.Accordion);\n                    accordion.hideItem(index);\n                }\n            }\n        }\n        for (var i = 0; i < calcfields.length; i++) {\n            if (calcfields[i] && calcfields[i].name === fieldName) {\n                calcfields.splice(i, 1);\n                break;\n            }\n        }\n        if (this.parent.dataType === 'olap') {\n            engineModule = this.parent.olapEngineModule;\n            var fields_1 = engineModule.fieldListData ?\n                engineModule.fieldListData : [];\n            for (var _i = 0, _a = Object.keys(fields_1); _i < _a.length; _i++) {\n                var item = _a[_i];\n                if (fields_1[parseInt(item, 10)].name === fieldName) {\n                    var index = parseInt(item, 10);\n                    if (typeof (index) === 'number') {\n                        fields_1.splice(index, 1);\n                        break;\n                    }\n                }\n            }\n            var parentID = this.treeObj.getNode(node).parentID;\n            this.treeObj.removeNodes([node]);\n            if (calcfields.length <= 0) {\n                this.treeObj.removeNodes([parentID]);\n            }\n        }\n        else {\n            engineModule = this.parent.engineModule;\n        }\n        if (engineModule.fields) {\n            for (var i = 0; i < engineModule.fields.length; i++) {\n                if (engineModule.fields[i] === fieldName) {\n                    engineModule.fields.splice(i, 1);\n                    break;\n                }\n            }\n        }\n        if (engineModule.savedFieldList && engineModule.savedFieldList[fieldName]) {\n            delete engineModule.savedFieldList[fieldName];\n        }\n        if (engineModule.fieldList && engineModule.fieldList[fieldName]) {\n            delete engineModule.fieldList[fieldName];\n        }\n        var formatFields = dataSourceSettings.formatSettings;\n        for (var i = 0; i < formatFields.length; i++) {\n            if (formatFields[i] && formatFields[i].name === fieldName) {\n                formatFields.splice(i, 1);\n                break;\n            }\n        }\n        var fields = [dataSourceSettings.values, dataSourceSettings.rows, dataSourceSettings.columns, dataSourceSettings.filters];\n        for (var i = 0, n = fields.length; i < n; i++) {\n            for (var j = 0, length_1 = fields[i].length; j < length_1; j++) {\n                if (fields[i][j].name === fieldName) {\n                    fields[i].splice(j, 1);\n                    break;\n                }\n            }\n        }\n        if (this.isEdit && this.currentFieldName === fieldName) {\n            var inputObj = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'ddlelement', document), _syncfusion_ej2_inputs__WEBPACK_IMPORTED_MODULE_3__.MaskedTextBox);\n            this.isEdit = false;\n            inputObj.value = '';\n            this.currentFieldName = this.formatText = this.fieldText = this.formatType = null;\n            this.formulaText = this.fieldType = this.parentHierarchy = null;\n        }\n        if ((!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.isNullOrUndefined)(this.parent.isDeferLayoutUpdate) &&\n            !this.parent.isDeferLayoutUpdate) || (this.parent.pivotGridModule &&\n            !this.parent.pivotGridModule.pivotDeferLayoutUpdate) || this.parent.getModuleName() !== 'pivotfieldlist') {\n            this.parent.updateDataSource();\n        }\n        this.closeErrorDialog();\n    };\n    /**\n     * To set position for context menu.\n     *\n     * @param {HTMLElement} node - It contains the value of node.\n     * @returns {void}\n     */\n    CalculatedField.prototype.openContextMenu = function (node) {\n        var _this = this;\n        var fieldName = node.getAttribute('data-field');\n        var type = this.parent.engineModule.fieldList[fieldName].type !== 'number' ? 'string' : 'number';\n        var validSummaryTypes = (type === 'string' ? this.getValidSummaryType().slice(0, 2) : this.getValidSummaryType());\n        var eventArgs = {\n            cancel: false, fieldName: fieldName,\n            aggregateTypes: this.getMenuItems(type).slice()\n        };\n        var control = this.parent.getModuleName() === 'pivotfieldlist' && this.parent.isPopupView ?\n            this.parent.pivotGridModule : this.parent;\n        control.trigger(_common_base_constant__WEBPACK_IMPORTED_MODULE_6__.aggregateMenuOpen, eventArgs, function (observedArgs) {\n            if (!observedArgs.cancel) {\n                var duplicateTypes = [];\n                var items = [];\n                for (var _i = 0, _a = observedArgs.aggregateTypes; _i < _a.length; _i++) {\n                    var option = _a[_i];\n                    if (validSummaryTypes.indexOf(option) > -1 && duplicateTypes.indexOf(option) === -1) {\n                        duplicateTypes.push(option);\n                        items.push({\n                            id: _this.parent.element.id + 'Calc_' + option,\n                            text: _this.parent.localeObj.getConstant(option)\n                        });\n                    }\n                }\n                _this.createMenu(items, node);\n                var pos = node.getBoundingClientRect();\n                var offset = window.scrollY || document.documentElement.scrollTop;\n                var menuObj = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + _this.parentID + 'CalcContextmenu', document), _syncfusion_ej2_navigations__WEBPACK_IMPORTED_MODULE_5__.ContextMenu);\n                if (_this.parent.enableRtl) {\n                    menuObj.open(pos.top + offset, pos.left - 100);\n                }\n                else {\n                    menuObj.open(pos.top + offset, pos.left + 150);\n                }\n            }\n        });\n    };\n    /**\n     * Triggers while select menu.\n     *\n     * @param  {MenuEventArgs} menu - It represent the menu.\n     * @returns {void}\n     */\n    CalculatedField.prototype.selectContextMenu = function (menu) {\n        if (menu.element.textContent !== null) {\n            var field = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.closest)(this.curMenu, '.e-list-item').getAttribute('data-caption');\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.closest)(this.curMenu, '.e-list-item').setAttribute('data-type', menu.element.id.split('_').pop());\n            this.curMenu.textContent = field + ' (' + menu.element.textContent + ')';\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.addClass)([this.curMenu.parentElement.parentElement], ['e-node-focus', 'e-hover']);\n            this.curMenu.parentElement.parentElement.setAttribute('tabindex', '0');\n            this.curMenu.parentElement.parentElement.focus();\n        }\n    };\n    /**\n     * To create context menu.\n     *\n     * @param {MenuItemModel[]} menuItems - It represent the menuItems.\n     * @param {HTMLElement} node - It represent the node data.\n     * @returns {void}\n     */\n    CalculatedField.prototype.createMenu = function (menuItems, node) {\n        var _this = this;\n        var menuOptions = {\n            cssClass: this.parentID + 'calculatedmenu' + (this.parent.cssClass ? (' ' + this.parent.cssClass) : ''),\n            items: menuItems,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            // beforeOpen: this.beforeMenuOpen.bind(this),\n            select: this.selectContextMenu.bind(this),\n            onClose: function () {\n                _this.treeObj.element.focus();\n                (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.addClass)([node], ['e-hover', 'e-node-focus']);\n            }\n        };\n        var contextMenu;\n        if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'CalcContextmenu', document)) {\n            contextMenu = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'CalcContextmenu', document);\n        }\n        else {\n            contextMenu = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('ul', {\n                id: this.parentID + 'CalcContextmenu'\n            });\n        }\n        var dialog = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'calculateddialog', document), _syncfusion_ej2_popups__WEBPACK_IMPORTED_MODULE_0__.Dialog);\n        dialog.element.appendChild(contextMenu);\n        var menuObj = new _syncfusion_ej2_navigations__WEBPACK_IMPORTED_MODULE_5__.ContextMenu(menuOptions);\n        menuObj.isStringTemplate = true;\n        menuObj.appendTo(contextMenu);\n    };\n    /**\n     * Triggers while click OK button.\n     *\n     * @returns {void}\n     */\n    CalculatedField.prototype.applyFormula = function () {\n        var _this = this;\n        var currentObj = this;\n        var isExist = false;\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.removeClass)([document.getElementById(this.parentID + 'ddlelement')], _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.EMPTY_FIELD);\n        var inputObj = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'ddlelement', document), _syncfusion_ej2_inputs__WEBPACK_IMPORTED_MODULE_3__.MaskedTextBox);\n        this.newFields =\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.extend)([], this.parent.dataSourceSettings.calculatedFieldSettings, null, true);\n        var eventArgs = {\n            fieldName: this.isEdit ? this.currentFieldName : inputObj.value,\n            calculatedField: this.getCalculatedFieldInfo(),\n            calculatedFieldSettings: _base_util__WEBPACK_IMPORTED_MODULE_8__.PivotUtil.cloneCalculatedFieldSettings(this.parent.dataSourceSettings.calculatedFieldSettings),\n            cancel: false\n        };\n        var control = this.parent.getModuleName() === 'pivotfieldlist' &&\n            this.parent.isPopupView ? this.parent.pivotGridModule : this.parent;\n        control.trigger(_common_base_constant__WEBPACK_IMPORTED_MODULE_6__.calculatedFieldCreate, eventArgs, function (observedArgs) {\n            if (!observedArgs.cancel) {\n                var calcInfo = observedArgs.calculatedField;\n                if (!_this.isEdit) {\n                    if (currentObj.parent.dataType === 'olap') {\n                        var field = calcInfo.name;\n                        if (currentObj.parent.olapEngineModule.fieldList[field] &&\n                            currentObj.parent.olapEngineModule.fieldList[field].type !== 'CalculatedField') {\n                            isExist = true;\n                        }\n                    }\n                    else {\n                        for (var _i = 0, _a = Object.keys(currentObj.parent.engineModule.fieldList); _i < _a.length; _i++) {\n                            var key = _a[_i];\n                            if (calcInfo.name && calcInfo.name === key &&\n                                currentObj.parent.engineModule.fieldList[key].aggregateType !== 'CalculatedField') {\n                                isExist = true;\n                            }\n                        }\n                    }\n                }\n                if (isExist) {\n                    currentObj.parent.pivotCommon.errorDialog.createErrorDialog(currentObj.parent.localeObj.getConstant('error'), currentObj.parent.localeObj.getConstant('fieldExist'));\n                    return;\n                }\n                _this.existingReport = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.extend)({}, _this.parent.dataSourceSettings, null, true);\n                var report = _this.parent.dataSourceSettings;\n                if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.isNullOrUndefined)(calcInfo.name) && calcInfo.name !== '' &&\n                    !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.isNullOrUndefined)(calcInfo.caption) && calcInfo.caption !== '' && calcInfo.formula && calcInfo.formula !== '') {\n                    var field = void 0;\n                    if (_this.parent.dataType === 'olap') {\n                        field = {\n                            name: calcInfo.name,\n                            formula: calcInfo.formula,\n                            formatString: calcInfo.formatString\n                        };\n                        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.isNullOrUndefined)(calcInfo.hierarchyUniqueName)) {\n                            field.hierarchyUniqueName = calcInfo.hierarchyUniqueName;\n                        }\n                        _this.isFieldExist = false;\n                        if (!_this.isEdit) {\n                            for (var i = 0; i < report.calculatedFieldSettings.length; i++) {\n                                if (report.calculatedFieldSettings[i].name === field.name) {\n                                    _this.createConfirmDialog(currentObj.parent.localeObj.getConstant('alert'), currentObj.parent.localeObj.getConstant('confirmText'), calcInfo);\n                                    return;\n                                }\n                            }\n                        }\n                        else {\n                            for (var i = 0; i < report.calculatedFieldSettings.length; i++) {\n                                if (report.calculatedFieldSettings[i].name === field.name && _this.isEdit) {\n                                    report.calculatedFieldSettings[i].hierarchyUniqueName = calcInfo.hierarchyUniqueName;\n                                    _this.parent.olapEngineModule.fieldList[field.name].caption = calcInfo.caption;\n                                    report.calculatedFieldSettings[i].formatString = field.formatString;\n                                    report.calculatedFieldSettings[i].formula = field.formula;\n                                    field = report.calculatedFieldSettings[i];\n                                    _this.updateFormatSettings(report, field.name, calcInfo.formatString);\n                                    _this.parent.olapEngineModule.getFormattedFields(report.formatSettings);\n                                    if (_this.parent.olapEngineModule.formatFields[field.name]) {\n                                        if (_this.parent.olapEngineModule.formatFields[field.name].format) {\n                                            _this.parent.olapEngineModule.formatFields[field.name].format =\n                                                _this.getFormat(field.formatString);\n                                        }\n                                        else {\n                                            delete _this.parent.olapEngineModule.formatFields[field.name];\n                                        }\n                                    }\n                                    _this.isFieldExist = true;\n                                    break;\n                                }\n                            }\n                            var axisFields = [report.rows, report.columns, report.values, report.filters];\n                            var isFieldExist = false;\n                            for (var _b = 0, axisFields_1 = axisFields; _b < axisFields_1.length; _b++) {\n                                var fields = axisFields_1[_b];\n                                for (var _c = 0, fields_2 = fields; _c < fields_2.length; _c++) {\n                                    var item = fields_2[_c];\n                                    if (item.isCalculatedField && field.name !== null &&\n                                        item.name === field.name && _this.isEdit) {\n                                        item.caption = calcInfo.caption;\n                                        _this.isFieldExist = true;\n                                        isFieldExist = true;\n                                        break;\n                                    }\n                                }\n                                if (isFieldExist) {\n                                    break;\n                                }\n                            }\n                        }\n                        if (!_this.isFieldExist) {\n                            report.calculatedFieldSettings.push(field);\n                            _this.updateFormatSettings(report, field.name, calcInfo.formatString);\n                            _this.parent.olapEngineModule.getFormattedFields(report.formatSettings);\n                            if (_this.parent.olapEngineModule.formatFields[field.name]) {\n                                if (_this.parent.olapEngineModule.formatFields[field.name].format) {\n                                    _this.parent.olapEngineModule.formatFields[field.name].format = _this.getFormat(field.formatString);\n                                }\n                                else {\n                                    delete _this.parent.olapEngineModule.formatFields[field.name];\n                                }\n                            }\n                        }\n                        _this.parent.lastCalcFieldInfo = field;\n                    }\n                    else {\n                        field = {\n                            name: calcInfo.name,\n                            caption: calcInfo.caption,\n                            type: 'CalculatedField'\n                        };\n                        var cField = {\n                            name: calcInfo.name,\n                            formula: calcInfo.formula\n                        };\n                        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.isNullOrUndefined)(calcInfo.formatString)) {\n                            cField.formatString = calcInfo.formatString;\n                        }\n                        _this.isFieldExist = true;\n                        if (!_this.isEdit) {\n                            for (var i = 0; i < report.values.length; i++) {\n                                if (report.values[i].type === CALC && report.values[i].name === field.name) {\n                                    for (var j = 0; j < report.calculatedFieldSettings.length; j++) {\n                                        if (report.calculatedFieldSettings[j].name === field.name) {\n                                            _this.createConfirmDialog(currentObj.parent.localeObj.getConstant('alert'), currentObj.parent.localeObj.getConstant('confirmText'), calcInfo);\n                                            return;\n                                        }\n                                    }\n                                    _this.isFieldExist = false;\n                                }\n                            }\n                        }\n                        else {\n                            for (var i = 0; i < report.values.length; i++) {\n                                if (report.values[i].type === CALC && field.name !== null &&\n                                    report.values[i].name === field.name && _this.isEdit) {\n                                    for (var j = 0; j < report.calculatedFieldSettings.length; j++) {\n                                        if (report.calculatedFieldSettings[j].name === field.name) {\n                                            report.values.splice(i, 1);\n                                            report.values.splice(i, 0, field);\n                                            _this.currentFormula = report.calculatedFieldSettings[j].formula;\n                                            report.calculatedFieldSettings.splice(j, 1);\n                                            report.calculatedFieldSettings.splice(j, 0, cField);\n                                            _this.updateFormatSettings(report, field.name, calcInfo.formatString);\n                                            _this.isFieldExist = false;\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                        if (_this.isFieldExist) {\n                            report.values.push(field);\n                            report.calculatedFieldSettings.push(cField);\n                            _this.updateFormatSettings(report, field.name, calcInfo.formatString);\n                        }\n                        _this.parent.lastCalcFieldInfo = cField;\n                    }\n                    _this.addFormula(report, field.name);\n                }\n                else {\n                    if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.isNullOrUndefined)(calcInfo.name) || calcInfo.name === '' ||\n                        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.isNullOrUndefined)(calcInfo.caption) || calcInfo.caption === '') {\n                        var inputObj_1 = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + _this.parentID + 'ddlelement', document), _syncfusion_ej2_inputs__WEBPACK_IMPORTED_MODULE_3__.MaskedTextBox);\n                        inputObj_1.value = '';\n                        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.addClass)([document.getElementById(_this.parentID + 'ddlelement')], _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.EMPTY_FIELD);\n                        document.getElementById(_this.parentID + 'ddlelement').focus();\n                    }\n                    else {\n                        _this.parent.pivotCommon.errorDialog.createErrorDialog(_this.parent.localeObj.getConstant('error'), _this.parent.localeObj.getConstant('invalidFormula'));\n                    }\n                }\n            }\n            else {\n                _this.endDialog();\n                _this.parent.lastCalcFieldInfo = {};\n                _this.isFormula = false;\n            }\n        });\n    };\n    CalculatedField.prototype.getCalculatedFieldInfo = function () {\n        var element = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'calculateddialog', document);\n        var dialog = element ? (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)(element, _syncfusion_ej2_popups__WEBPACK_IMPORTED_MODULE_0__.Dialog) : undefined;\n        var inputObj = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'ddlelement', document), _syncfusion_ej2_inputs__WEBPACK_IMPORTED_MODULE_3__.MaskedTextBox);\n        var dropField = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'droppable', document);\n        var dialogElement = this.parent.isAdaptive ?\n            this.parent.dialogRenderer.adaptiveElement.element : dialog.element;\n        var customFormat = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'Custom_Format_Element', dialogElement), _syncfusion_ej2_inputs__WEBPACK_IMPORTED_MODULE_3__.MaskedTextBox);\n        var field = {\n            name: this.isEdit ? this.currentFieldName : inputObj.value,\n            caption: inputObj.value,\n            formula: dropField.value\n        };\n        var ddlFormatTypes = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'Format_Div', dialogElement), _syncfusion_ej2_dropdowns__WEBPACK_IMPORTED_MODULE_7__.DropDownList);\n        field.formatString = (ddlFormatTypes.value === 'Custom' ? customFormat.value : (ddlFormatTypes.value === 'None' ? null : ddlFormatTypes.value));\n        if (this.parent.dataType === 'olap') {\n            var memberTypeDrop = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'Member_Type_Div', dialogElement), _syncfusion_ej2_dropdowns__WEBPACK_IMPORTED_MODULE_7__.DropDownList);\n            var hierarchyDrop = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'Hierarchy_List_Div', dialogElement), _syncfusion_ej2_dropdowns__WEBPACK_IMPORTED_MODULE_7__.DropDownList);\n            if (memberTypeDrop.value === 'Dimension') {\n                field.hierarchyUniqueName = hierarchyDrop.value;\n            }\n        }\n        return field;\n    };\n    CalculatedField.prototype.updateFormatSettings = function (report, fieldName, formatString) {\n        var newFormat = { name: fieldName, format: formatString, useGrouping: true };\n        var isFormatExist = false;\n        for (var i = 0; i < report.formatSettings.length; i++) {\n            if (report.formatSettings[i].name === fieldName) {\n                if (formatString === 'undefined' || formatString === undefined || formatString === '') {\n                    report.formatSettings.splice(i, 1);\n                    isFormatExist = true;\n                    break;\n                }\n                else {\n                    var formatObj = report.formatSettings[i].properties ?\n                        report.formatSettings[i].properties : report.formatSettings[i];\n                    formatObj.format = formatString;\n                    report.formatSettings.splice(i, 1, formatObj);\n                    isFormatExist = true;\n                    break;\n                }\n            }\n        }\n        if (!isFormatExist && formatString !== '' && !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.isNullOrUndefined)(formatString)) {\n            report.formatSettings.push(newFormat);\n        }\n    };\n    CalculatedField.prototype.addFormula = function (report, field) {\n        this.isFormula = true;\n        this.field = field;\n        this.parent.setProperties({ dataSourceSettings: report }, true);\n        if (this.parent.getModuleName() === 'pivotfieldlist' && (this.parent.isDeferLayoutUpdate ||\n            (this.parent.pivotGridModule && this.parent.pivotGridModule.pivotDeferLayoutUpdate))) {\n            this.parent.isRequiredUpdate = false;\n        }\n        try {\n            var actionInfo = {\n                calculatedFieldInfo: this.parent.lastCalcFieldInfo\n            };\n            this.parent.actionObj.actionInfo = actionInfo;\n            var actionName = (this.parent.actionObj.actionName === _common_base_constant__WEBPACK_IMPORTED_MODULE_6__.editCalculatedField) ?\n                _common_base_constant__WEBPACK_IMPORTED_MODULE_6__.calculatedFieldEdited : _common_base_constant__WEBPACK_IMPORTED_MODULE_6__.calculatedFieldApplied;\n            this.parent.actionObj.actionName = actionName;\n            this.parent.updateDataSource(false);\n            var pivot = (this.parent.getModuleName() === 'pivotfieldlist' && this.parent.pivotGridModule) ?\n                this.parent.pivotGridModule : this.parent;\n            if (pivot && pivot.dataSourceSettings.mode !== 'Server') {\n                this.endDialog();\n            }\n            else {\n                this.isRequireUpdate = true;\n            }\n            if (this.parent.getModuleName() === 'pivotfieldlist' &&\n                this.parent.renderMode === 'Fixed' && this.parent.isDeferLayoutUpdate) {\n                this.parent.pivotChange = true;\n            }\n        }\n        catch (exception) {\n            this.showError();\n        }\n    };\n    /**\n     *\n     * @returns {void}\n     * @hidden */\n    CalculatedField.prototype.endDialog = function () {\n        this.isEdit = false;\n        var element = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'calculateddialog', document);\n        var dialog = element ? (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)(element, _syncfusion_ej2_popups__WEBPACK_IMPORTED_MODULE_0__.Dialog) : undefined;\n        if (dialog) {\n            dialog.close();\n        }\n        else {\n            var inputObj = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'ddlelement', document), _syncfusion_ej2_inputs__WEBPACK_IMPORTED_MODULE_3__.MaskedTextBox);\n            inputObj.value = '';\n            this.currentFieldName = this.formatText = this.fieldText = this.formatType = null;\n            this.formulaText = this.fieldType = this.parentHierarchy = null;\n            var dialogElement = this.parent.isAdaptive ?\n                this.parent.dialogRenderer.parentElement : dialog.element;\n            this.parent.dialogRenderer.parentElement.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALCINPUT).value = '';\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'droppable', this.parent.dialogRenderer.parentElement).value = '';\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'Custom_Format_Element', this.parent.dialogRenderer.parentElement).value = '';\n            if (this.parent.dataType === 'olap') {\n                var memberTypeDrop = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'Member_Type_Div', dialogElement), _syncfusion_ej2_dropdowns__WEBPACK_IMPORTED_MODULE_7__.DropDownList);\n                var hierarchyDrop = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'Hierarchy_List_Div', dialogElement), _syncfusion_ej2_dropdowns__WEBPACK_IMPORTED_MODULE_7__.DropDownList);\n                memberTypeDrop.index = 0;\n                memberTypeDrop.readonly = false;\n                memberTypeDrop.dataBind();\n                hierarchyDrop.index = 0;\n                hierarchyDrop.enabled = false;\n                hierarchyDrop.dataBind();\n            }\n            var customFormat = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'Custom_Format_Element', dialogElement), _syncfusion_ej2_inputs__WEBPACK_IMPORTED_MODULE_3__.MaskedTextBox);\n            var ddlFormatTypes = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'Format_Div', dialogElement), _syncfusion_ej2_dropdowns__WEBPACK_IMPORTED_MODULE_7__.DropDownList);\n            ddlFormatTypes.index = this.parent.dataType === 'olap' ? 0 : 4;\n            ddlFormatTypes.dataBind();\n            customFormat.enabled = false;\n            customFormat.dataBind();\n        }\n    };\n    /**\n     *\n     * @returns {void}\n     * @hidden */\n    CalculatedField.prototype.showError = function () {\n        if (this.parent.engineModule.fieldList[this.field]) {\n            delete this.parent.engineModule.fieldList[this.field];\n        }\n        this.parent.pivotCommon.errorDialog.createErrorDialog(this.parent.localeObj.getConstant('error'), this.parent.localeObj.getConstant('invalidFormula'));\n        this.parent.setProperties({ dataSourceSettings: this.existingReport }, true);\n        if (this.isEdit) {\n            var calcFields = this.parent.dataSourceSettings.calculatedFieldSettings;\n            for (var i = 0; calcFields && i < calcFields.length; i++) {\n                if (calcFields[i].name === this.field) {\n                    calcFields[i].formula = this.currentFormula;\n                    break;\n                }\n            }\n        }\n        else if (this.parent.engineModule.fields) {\n            for (var i = 0; i < this.parent.engineModule.fields.length; i++) {\n                if (this.parent.engineModule.fields[i] === this.field) {\n                    this.parent.engineModule.fields.splice(i, 1);\n                    break;\n                }\n            }\n        }\n        this.parent.lastCalcFieldInfo = {};\n        this.parent.updateDataSource(false);\n        this.isFormula = false;\n    };\n    /**\n     * To get treeview data\n     *\n     * @param  {PivotView | PivotFieldList} parent - It represent the parent.\n     * @returns {any} - Field List Data.\n     */\n    CalculatedField.prototype.getFieldListData = function (parent) {\n        var fields = [];\n        if (this.parent.dataType === 'olap') {\n            fields =\n                _base_util__WEBPACK_IMPORTED_MODULE_8__.PivotUtil.getClonedData(parent.olapEngineModule.fieldListData ?\n                    parent.olapEngineModule.fieldListData : []);\n            for (var _i = 0, _a = fields; _i < _a.length; _i++) {\n                var item = _a[_i];\n                if (item.spriteCssClass &&\n                    (item.spriteCssClass.indexOf('e-attributeCDB-icon') > -1 ||\n                        item.spriteCssClass.indexOf('e-level-members') > -1)) {\n                    item.hasChildren = true;\n                }\n                else if (item.spriteCssClass &&\n                    (item.spriteCssClass.indexOf('e-namedSetCDB-icon') > -1)) {\n                    item.hasChildren = false;\n                }\n                else if (item.spriteCssClass &&\n                    (item.spriteCssClass.indexOf('e-calcMemberGroupCDB') > -1)) {\n                    item.expanded = this.isEdit;\n                }\n            }\n        }\n        else {\n            for (var _b = 0, _c = (parent.engineModule.fieldList ? Object.keys(parent.engineModule.fieldList) : []); _b < _c.length; _b++) {\n                var key = _c[_b];\n                var type = null;\n                var typeVal = null;\n                var field = parent.engineModule.fieldList[key];\n                if ((field.type !== 'number' || parent.engineModule.fieldList[key].type === 'include' || parent.engineModule.fieldList[key].type === 'exclude') && field.aggregateType !== 'DistinctCount') {\n                    typeVal = COUNT;\n                }\n                else {\n                    typeVal = field.aggregateType !== undefined ?\n                        (field.aggregateType) : SUM;\n                }\n                type = this.parent.localeObj.getConstant(typeVal);\n                fields.push({\n                    index: field.index,\n                    name: (this.parent.enableHtmlSanitizer ?\n                        _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.SanitizeHtmlHelper.sanitize(field.caption) : field.caption) + ' (' + type + ')',\n                    type: typeVal,\n                    icon: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.FORMAT + ' ' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.ICON,\n                    formula: (this.parent.enableHtmlSanitizer ?\n                        _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.SanitizeHtmlHelper.sanitize(field.formula) : field.formula),\n                    field: (this.parent.enableHtmlSanitizer ?\n                        _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.SanitizeHtmlHelper.sanitize(key) : key),\n                    caption: this.parent.enableHtmlSanitizer ?\n                        _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.SanitizeHtmlHelper.sanitize(field.caption ? field.caption : key) : field.caption ? field.caption : key\n                });\n            }\n        }\n        return fields;\n    };\n    /**\n     * Trigger while drop node in formula field.\n     *\n     * @param {DragAndDropEventArgs} args - It contains the value of args.\n     * @returns {void}\n     */\n    CalculatedField.prototype.fieldDropped = function (args) {\n        args.cancel = true;\n        var dialog = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'calculateddialog', document), _syncfusion_ej2_popups__WEBPACK_IMPORTED_MODULE_0__.Dialog);\n        var dropField = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'droppable', dialog.element);\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.removeClass)([dropField], 'e-copy-drop');\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.removeClass)([args.draggedNode.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.LIST_TEXT_CLASS)], _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.SELECTED_NODE_CLASS);\n        var field = args.draggedNode.getAttribute('data-field');\n        if (this.parent.dataType === 'olap') {\n            if (this.parent.olapEngineModule.fieldList[field] &&\n                this.parent.olapEngineModule.fieldList[field].isCalculatedField) {\n                field = this.parent.olapEngineModule.fieldList[field].tag;\n            }\n            if (args.target.id === this.parentID + 'droppable' && dropField.value === '') {\n                dropField.value = field;\n                dropField.focus();\n            }\n            else if (args.target.id === (this.parentID + 'droppable') && dropField.value !== '') {\n                var currentValue = dropField.value;\n                var cursorPos = dropField.selectionStart;\n                var textAfterText = currentValue.substring(cursorPos, currentValue.length);\n                var textBeforeText = currentValue.substring(0, cursorPos);\n                var textCovered = textBeforeText + field;\n                dropField.value = textBeforeText + field + textAfterText;\n                dropField.focus();\n                dropField.setSelectionRange(textCovered.length, textCovered.length);\n            }\n            else {\n                args.cancel = true;\n            }\n        }\n        else {\n            var type = args.draggedNode.getAttribute('data-type');\n            if (args.target.id === this.parentID + 'droppable' && dropField.value === '') {\n                if (type === CALC) {\n                    dropField.value = args.draggedNodeData.id.toString();\n                }\n                else {\n                    dropField.value = '\"' + type + '(' + field + ')' + '\"';\n                }\n                dropField.focus();\n            }\n            else if (args.target.id === (this.parentID + 'droppable') && dropField.value !== '') {\n                var textCovered = void 0;\n                var cursorPos = dropField.selectionStart;\n                var currentValue = dropField.value;\n                var textBeforeText = currentValue.substring(0, cursorPos);\n                var textAfterText = currentValue.substring(cursorPos, currentValue.length);\n                if (type === CALC) {\n                    textCovered = textBeforeText + args.draggedNodeData.id.toString();\n                    dropField.value = textBeforeText + args.draggedNodeData.id.toString() + textAfterText;\n                }\n                else {\n                    textCovered = textBeforeText + '\"' + type + '(' + field + ')' + '\"';\n                    dropField.value = textBeforeText + '\"' + type + '(' + field + ')' + '\"' + textAfterText;\n                }\n                dropField.focus();\n                dropField.setSelectionRange(textCovered.length, textCovered.length);\n            }\n            else {\n                args.cancel = true;\n            }\n        }\n    };\n    /**\n     * To create dialog.\n     *\n     * @returns {void}\n     */\n    CalculatedField.prototype.createDialog = function () {\n        var _this = this;\n        if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'calculateddialog', document) !== null) {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.remove)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'calculateddialog', document));\n            while (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.isNullOrUndefined)(document.querySelector('.' + this.parentID + 'calculatedmenu'))) {\n                (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.remove)(document.querySelector('.' + this.parentID + 'calculatedmenu'));\n            }\n        }\n        var calculatedFieldElement = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', {\n            id: this.parentID + 'calculateddialog',\n            className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALCDIALOG + ' ' + (this.parent.dataType === 'olap' ? _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.OLAP_CALCDIALOG : '')\n        });\n        this.parent.element.appendChild(calculatedFieldElement);\n        var calcButtons = [\n            {\n                click: this.applyFormula.bind(this),\n                isFlat: false,\n                buttonModel: {\n                    content: this.parent.localeObj.getConstant('ok'),\n                    isPrimary: true,\n                    cssClass: this.parent.cssClass\n                }\n            },\n            {\n                click: this.cancelClick.bind(this),\n                isFlat: false,\n                buttonModel: {\n                    content: this.parent.localeObj.getConstant('cancel'),\n                    cssClass: this.parent.cssClass\n                }\n            }\n        ];\n        if (this.parent.dataType === 'olap') {\n            var clearButton = {\n                click: this.clearFormula.bind(this),\n                isFlat: false,\n                buttonModel: {\n                    cssClass: 'e-calc-clear-btn' + (this.parent.cssClass ? (' ' + this.parent.cssClass) : ''),\n                    content: this.parent.localeObj.getConstant('clear')\n                }\n            };\n            calcButtons.splice(0, 0, clearButton);\n        }\n        var dialog = new _syncfusion_ej2_popups__WEBPACK_IMPORTED_MODULE_0__.Dialog({\n            allowDragging: true,\n            position: { X: 'center', Y: 'center' },\n            buttons: calcButtons,\n            close: this.closeDialog.bind(this),\n            beforeOpen: this.beforeOpen.bind(this),\n            open: function () {\n                if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + _this.parentID + 'ddlelement', dialog.element)) {\n                    (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + _this.parentID + 'ddlelement', dialog.element).focus();\n                }\n            },\n            animationSettings: { effect: 'Zoom' },\n            width: '25%',\n            isModal: true,\n            closeOnEscape: true,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n            showCloseIcon: true,\n            header: this.parent.localeObj.getConstant('createCalculatedField'),\n            target: document.body,\n            cssClass: this.parent.cssClass\n        });\n        dialog.isStringTemplate = true;\n        dialog.appendTo(calculatedFieldElement);\n    };\n    CalculatedField.prototype.cancelClick = function () {\n        var dialog = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'calculateddialog', document), _syncfusion_ej2_popups__WEBPACK_IMPORTED_MODULE_0__.Dialog);\n        dialog.close();\n        this.isEdit = false;\n    };\n    CalculatedField.prototype.beforeOpen = function () {\n        var dialog = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'calculateddialog', document), _syncfusion_ej2_popups__WEBPACK_IMPORTED_MODULE_0__.Dialog);\n        // dialog.element.querySelector('.e-dlg-header').innerText = this.parent.localeObj.getConstant('createCalculatedField');\n        dialog.element.querySelector('.e-dlg-header').setAttribute('title', this.parent.localeObj.getConstant('createCalculatedField'));\n    };\n    CalculatedField.prototype.closeDialog = function () {\n        if (this.parent.getModuleName() === 'pivotfieldlist') {\n            this.parent.axisFieldModule.render();\n            if (this.parent.renderMode !== 'Fixed') {\n                (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.addClass)([this.parent.element.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.TOGGLE_FIELD_LIST_CLASS)], _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.ICON_HIDDEN);\n                this.parent.dialogRenderer.fieldListDialog.show();\n            }\n        }\n        this.destroy();\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.isNullOrUndefined)(document.getElementById(this.parentID + 'calculateddialog'))) {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.remove)(document.getElementById(this.parentID + 'calculateddialog'));\n        }\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.isNullOrUndefined)(document.querySelector('.' + this.parentID + 'calculatedmenu'))) {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.remove)(document.querySelector('.' + this.parentID + 'calculatedmenu'));\n        }\n        var timeOut = ((this.parent.getModuleName() === 'pivotview') ||\n            ((this.parent.getModuleName() === 'pivotfieldlist') &&\n                this.parent.renderMode === 'Fixed')) ? 0 : 500;\n        if (this.buttonCall) {\n            this.buttonCall = false;\n            setTimeout(this.setFocus.bind(this), timeOut);\n        }\n    };\n    CalculatedField.prototype.setFocus = function () {\n        var parentElement;\n        if (this.parent.getModuleName() === 'pivotview' && this.parent.element) {\n            parentElement = this.parent.element;\n        }\n        else if (document.getElementById(this.parent.element.id + '_Container')) {\n            parentElement = document.getElementById(this.parent.element.id + '_Container');\n        }\n        if (parentElement) {\n            var pivotButtons = [].slice.call(parentElement.querySelectorAll('.e-pivot-button'));\n            for (var _i = 0, pivotButtons_1 = pivotButtons; _i < pivotButtons_1.length; _i++) {\n                var item = pivotButtons_1[_i];\n                if (item.getAttribute('data-uid') === this.currentFieldName) {\n                    item.focus();\n                    break;\n                }\n            }\n        }\n    };\n    /**\n     * To render dialog elements.\n     *\n     * @returns {void}\n     */\n    CalculatedField.prototype.renderDialogElements = function () {\n        var outerDiv = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', {\n            id: this.parentID + 'outerDiv',\n            className: (this.parent.dataType === 'olap' ? _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.OLAP_CALCOUTERDIV + ' ' : '') + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALCOUTERDIV\n        });\n        var olapFieldTreeDiv = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { id: this.parentID + 'Olap_Tree_Div', className: 'e-olap-field-tree-div' });\n        var pivotCalcDiv = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { id: this.parentID + 'Pivot_Calc_Div', className: 'e-pivot-calculated-div' });\n        if (this.parent.getModuleName() === 'pivotfieldlist' && this.parent.\n            dialogRenderer.parentElement.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.FORMULA) !== null && this.parent.isAdaptive) {\n            var accordDiv = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { id: this.parentID + 'accordDiv', className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALCACCORD });\n            outerDiv.appendChild(accordDiv);\n            var buttonDiv = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { id: this.parentID + 'buttonDiv', className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALCBUTTONDIV });\n            var addBtn = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('button', {\n                id: this.parentID + 'addBtn',\n                className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALCADDBTN, attrs: { 'type': 'button' }\n            });\n            addBtn.innerText = this.parent.localeObj.getConstant('add');\n            var cancelBtn = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('button', {\n                id: this.parentID + 'cancelBtn',\n                className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALCCANCELBTN, attrs: { 'type': 'button' }\n            });\n            cancelBtn.innerText = this.parent.localeObj.getConstant('cancel');\n            buttonDiv.appendChild(cancelBtn);\n            buttonDiv.appendChild(addBtn);\n            outerDiv.appendChild(buttonDiv);\n        }\n        else {\n            if (!this.parent.isAdaptive && this.parent.dataType === 'olap') {\n                var formulaTitle = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', {\n                    className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.PIVOT_FIELD_TITLE_CLASS, id: this.parentID + '_' + 'FieldNameTitle'\n                });\n                formulaTitle.innerText = this.parent.localeObj.getConstant('fieldTitle');\n                pivotCalcDiv.appendChild(formulaTitle);\n            }\n            var inputDiv = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { id: this.parentID + 'innerDiv', className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALCINPUTDIV });\n            var inputObj = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('input', {\n                id: this.parentID + 'ddlelement',\n                attrs: { 'type': 'text' },\n                className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALCINPUT\n            });\n            inputDiv.appendChild(inputObj);\n            if (this.parent.dataType === 'olap' && !this.parent.isAdaptive) {\n                pivotCalcDiv.appendChild(inputDiv);\n            }\n            else {\n                outerDiv.appendChild(inputDiv);\n            }\n            var wrapDiv = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { id: this.parentID + 'control_container', className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.TREEVIEWOUTER });\n            if (!this.parent.isAdaptive) {\n                var fieldTitle = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', {\n                    className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.PIVOT_ALL_FIELD_TITLE_CLASS\n                });\n                fieldTitle.innerText = (this.parent.dataType === 'olap' ? this.parent.localeObj.getConstant('allFields') :\n                    this.parent.localeObj.getConstant('formulaField'));\n                if (this.parent.dataType === 'olap') {\n                    var headerWrapperDiv = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.PIVOT_ALL_FIELD_TITLE_CLASS + '-container' });\n                    headerWrapperDiv.appendChild(fieldTitle);\n                    var spanElement = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('span', {\n                        attrs: {\n                            'tabindex': '0',\n                            'aria-disabled': 'false',\n                            'aria-label': this.parent.localeObj.getConstant('fieldTooltip'),\n                            'role': 'button'\n                        },\n                        className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.ICON + ' ' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_INFO\n                    });\n                    headerWrapperDiv.appendChild(spanElement);\n                    var tooltip = new _syncfusion_ej2_popups__WEBPACK_IMPORTED_MODULE_0__.Tooltip({\n                        content: this.parent.localeObj.getConstant('fieldTooltip'),\n                        position: (this.parent.enableRtl ? 'RightCenter' : 'LeftCenter'),\n                        target: '.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_INFO,\n                        offsetY: (this.parent.enableRtl ? -10 : -10),\n                        locale: this.parent.locale,\n                        enableRtl: this.parent.enableRtl,\n                        enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n                        width: 220,\n                        cssClass: this.parent.cssClass\n                    });\n                    tooltip.appendTo(headerWrapperDiv);\n                    wrapDiv.appendChild(headerWrapperDiv);\n                }\n                else {\n                    outerDiv.appendChild(fieldTitle);\n                }\n            }\n            var treeOuterDiv = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.TREEVIEW + '-outer-div' });\n            wrapDiv.appendChild(treeOuterDiv);\n            var treeElement = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { id: this.parentID + 'tree', className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.TREEVIEW });\n            treeOuterDiv.appendChild(treeElement);\n            if (this.parent.dataType === 'olap' && !this.parent.isAdaptive) {\n                olapFieldTreeDiv.appendChild(wrapDiv);\n            }\n            else {\n                outerDiv.appendChild(wrapDiv);\n            }\n            if (!this.parent.isAdaptive) {\n                var formulaTitle = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', {\n                    className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.PIVOT_FORMULA_TITLE_CLASS\n                });\n                formulaTitle.innerText = (this.parent.dataType === 'olap' ? this.parent.localeObj.getConstant('expressionField') :\n                    this.parent.localeObj.getConstant('formula'));\n                if (this.parent.dataType === 'olap') {\n                    pivotCalcDiv.appendChild(formulaTitle);\n                }\n                else {\n                    outerDiv.appendChild(formulaTitle);\n                }\n            }\n            var dropDiv = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('textarea', {\n                id: this.parentID + 'droppable',\n                className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.FORMULA + ' e-control e-textbox e-input',\n                attrs: {\n                    'placeholder': this.parent.isAdaptive ? this.parent.localeObj.getConstant('dropTextMobile') :\n                        (this.parent.dataType === 'olap' ? this.parent.localeObj.getConstant('olapDropText') :\n                            this.parent.localeObj.getConstant('dropText'))\n                }\n            });\n            if (this.parent.dataType === 'olap' && !this.parent.isAdaptive) {\n                pivotCalcDiv.appendChild(dropDiv);\n            }\n            else {\n                outerDiv.appendChild(dropDiv);\n            }\n            if (this.parent.isAdaptive) {\n                var buttonDiv = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { id: this.parentID + 'buttonDiv', className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALCBUTTONDIV });\n                var okBtn = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('button', {\n                    id: this.parentID + 'okBtn',\n                    className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALCOKBTN, attrs: { 'type': 'button' }\n                });\n                okBtn.innerText = this.parent.localeObj.getConstant('apply');\n                buttonDiv.appendChild(okBtn);\n                outerDiv.appendChild(buttonDiv);\n            }\n            if (this.parent.dataType === 'olap') {\n                if (!this.parent.isAdaptive) {\n                    var memberTypeTitle = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', {\n                        className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.OLAP_MEMBER_TITLE_CLASS\n                    });\n                    memberTypeTitle.innerText = this.parent.localeObj.getConstant('memberType');\n                    pivotCalcDiv.appendChild(memberTypeTitle);\n                }\n                var memberTypeDrop = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { id: this.parentID + 'Member_Type_Div', className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_MEMBER_TYPE_DIV });\n                if (this.parent.isAdaptive) {\n                    outerDiv.appendChild(memberTypeDrop);\n                }\n                else {\n                    pivotCalcDiv.appendChild(memberTypeDrop);\n                    var hierarchyTitle = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', {\n                        className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.OLAP_HIERARCHY_TITLE_CLASS\n                    });\n                    hierarchyTitle.innerText = this.parent.localeObj.getConstant('selectedHierarchy');\n                    pivotCalcDiv.appendChild(hierarchyTitle);\n                }\n                var hierarchyDrop = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', {\n                    id: this.parentID + 'Hierarchy_List_Div', className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_HIERARCHY_LIST_DIV\n                });\n                if (this.parent.isAdaptive) {\n                    outerDiv.appendChild(hierarchyDrop);\n                }\n                else {\n                    pivotCalcDiv.appendChild(hierarchyDrop);\n                }\n            }\n            if (!this.parent.isAdaptive) {\n                var formatTitle = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', {\n                    className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.PIVOT_FORMAT_TITLE_CLASS\n                });\n                formatTitle.innerText = this.parent.localeObj.getConstant('formatString');\n                pivotCalcDiv.appendChild(formatTitle);\n            }\n            var ddlFormatTypes = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', {\n                id: this.parentID + 'Format_Div', className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_FORMAT_TYPE_DIV\n            });\n            if (this.parent.isAdaptive) {\n                outerDiv.appendChild(ddlFormatTypes);\n            }\n            else {\n                pivotCalcDiv.appendChild(ddlFormatTypes);\n            }\n            var customFormatDiv = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', {\n                id: this.parentID + 'custom_Format_Div',\n                className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.PIVOT_CALC_CUSTOM_FORMAT_INPUTDIV\n            });\n            var customFormatObj = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('input', {\n                id: this.parentID + 'Custom_Format_Element',\n                attrs: { 'type': 'text' },\n                className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_FORMAT_INPUT\n            });\n            customFormatDiv.appendChild(customFormatObj);\n            pivotCalcDiv.appendChild(customFormatDiv);\n            if (this.parent.isAdaptive) {\n                outerDiv.appendChild(customFormatDiv);\n            }\n            else {\n                pivotCalcDiv.appendChild(customFormatDiv);\n            }\n            if (this.parent.getModuleName() === 'pivotfieldlist' && this.parent.\n                dialogRenderer.parentElement.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.FORMULA) === null && this.parent.isAdaptive) {\n                var okBtn = outerDiv.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALCOKBTN);\n                outerDiv.appendChild(okBtn);\n            }\n            else {\n                if (this.parent.dataType === 'olap') {\n                    outerDiv.appendChild(olapFieldTreeDiv);\n                }\n                outerDiv.appendChild(pivotCalcDiv);\n            }\n        }\n        return outerDiv;\n    };\n    /**\n     * To create calculated field adaptive layout.\n     *\n     * @param {boolean} isEdit - It contains the value of isEdit\n     * @returns {void}\n     */\n    CalculatedField.prototype.renderAdaptiveLayout = function (isEdit) {\n        var dialogElement = this.parent.dialogRenderer.adaptiveElement;\n        if (isEdit) {\n            if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'droppable', dialogElement.element)) {\n                var inputObj = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'ddlelement', document), _syncfusion_ej2_inputs__WEBPACK_IMPORTED_MODULE_3__.MaskedTextBox);\n                this.formulaText = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'droppable', document).value;\n                this.fieldText = inputObj.value;\n            }\n            if (dialogElement.element.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_MEMBER_TYPE_DIV)) {\n                var memberTypeDrop = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'Member_Type_Div', dialogElement.element), _syncfusion_ej2_dropdowns__WEBPACK_IMPORTED_MODULE_7__.DropDownList);\n                this.fieldType = memberTypeDrop.value;\n            }\n            if (dialogElement.element.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_HIERARCHY_LIST_DIV)) {\n                var hierarchyDrop = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'Hierarchy_List_Div', dialogElement.element), _syncfusion_ej2_dropdowns__WEBPACK_IMPORTED_MODULE_7__.DropDownList);\n                this.parentHierarchy = this.fieldType === 'Dimension' ? hierarchyDrop.value : null;\n            }\n            if (dialogElement.element.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_FORMAT_TYPE_DIV)) {\n                var ddlFormatTypes = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'Format_Div', dialogElement.element), _syncfusion_ej2_dropdowns__WEBPACK_IMPORTED_MODULE_7__.DropDownList);\n                this.formatType = ddlFormatTypes.value;\n            }\n            if (dialogElement.element.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_FORMAT_INPUT)) {\n                var customFormat = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'Custom_Format_Element', dialogElement.element), _syncfusion_ej2_inputs__WEBPACK_IMPORTED_MODULE_3__.MaskedTextBox);\n                this.formatText = (this.parent.dataType === 'olap' ? this.formatType : this.getFormat(this.formatType)) === 'Custom' ? customFormat.value : null;\n            }\n        }\n        else {\n            this.currentFieldName = this.formulaText = this.fieldText = this.formatText = null;\n            this.fieldType = this.formatType = this.parentHierarchy = null;\n        }\n        this.renderMobileLayout(dialogElement);\n    };\n    /**\n     * To update calculated field info in adaptive layout.\n     *\n     * @param {boolean} isEdit - isEdit.\n     * @param {string} fieldName - fieldName.\n     * @returns {void}\n     * @hidden\n     */\n    CalculatedField.prototype.updateAdaptiveCalculatedField = function (isEdit, fieldName) {\n        var dialogElement = this.parent.dialogRenderer.adaptiveElement.element;\n        this.isEdit = isEdit;\n        var calcInfo = (isEdit ? (this.parent.dataType === 'pivot' ?\n            this.parent.engineModule.fieldList[fieldName] : this.parent.olapEngineModule.fieldList[fieldName]) :\n            {\n                id: null, caption: null, formula: null, fieldType: 'Measure',\n                formatString: (this.parent.dataType === 'pivot' ? null : 'Standard'), parentHierarchy: null\n            });\n        this.currentFieldName = calcInfo.id;\n        var inputObj = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'ddlelement', document), _syncfusion_ej2_inputs__WEBPACK_IMPORTED_MODULE_3__.MaskedTextBox);\n        if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'droppable', document)) {\n            this.formulaText = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'droppable', document).value = calcInfo.formula;\n            this.fieldText = inputObj.value = calcInfo.caption;\n            inputObj.dataBind();\n        }\n        if (dialogElement.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_MEMBER_TYPE_DIV)) {\n            var memberTypeDrop = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'Member_Type_Div', dialogElement), _syncfusion_ej2_dropdowns__WEBPACK_IMPORTED_MODULE_7__.DropDownList);\n            this.fieldType = memberTypeDrop.value = calcInfo.fieldType;\n            memberTypeDrop.readonly = isEdit ? true : false;\n            memberTypeDrop.dataBind();\n        }\n        if (dialogElement.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_HIERARCHY_LIST_DIV)) {\n            var hierarchyDrop = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'Hierarchy_List_Div', dialogElement), _syncfusion_ej2_dropdowns__WEBPACK_IMPORTED_MODULE_7__.DropDownList);\n            if (this.fieldType === 'Dimension') {\n                this.parentHierarchy = hierarchyDrop.value = calcInfo.parentHierarchy;\n            }\n            else {\n                this.parentHierarchy = null;\n                hierarchyDrop.index = 0;\n            }\n            hierarchyDrop.dataBind();\n        }\n        if (dialogElement.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_FORMAT_TYPE_DIV)) {\n            var ddlFormatTypes = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'Format_Div', dialogElement), _syncfusion_ej2_dropdowns__WEBPACK_IMPORTED_MODULE_7__.DropDownList);\n            this.formatType = ddlFormatTypes.value = (this.formatTypes.indexOf(calcInfo.formatString) > -1 ? calcInfo.formatString : 'Custom');\n        }\n        if (dialogElement.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_FORMAT_INPUT)) {\n            var customFormat = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'Custom_Format_Element', dialogElement), _syncfusion_ej2_inputs__WEBPACK_IMPORTED_MODULE_3__.MaskedTextBox);\n            var formatObj = _base_util__WEBPACK_IMPORTED_MODULE_8__.PivotUtil.getFieldByName(fieldName, this.parent.dataSourceSettings.formatSettings);\n            if (this.parent.dataType === 'pivot') {\n                this.formatText = customFormat.value = formatObj ? formatObj.format : null;\n            }\n            else {\n                this.formatText = customFormat.value = (this.formatType === 'Custom' ? calcInfo.formatString : null);\n            }\n            customFormat.dataBind();\n        }\n    };\n    /**\n     * To create treeview.\n     *\n     * @returns {void}\n     */\n    CalculatedField.prototype.createDropElements = function () {\n        var _this = this;\n        var dialog = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'calculateddialog', document) ? (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'calculateddialog', document), _syncfusion_ej2_popups__WEBPACK_IMPORTED_MODULE_0__.Dialog) : null;\n        var dialogElement = (this.parent.isAdaptive ?\n            this.parent.dialogRenderer.parentElement : dialog.element);\n        var fData = [];\n        var fieldData = [];\n        for (var _i = 0, _a = this.formatTypes; _i < _a.length; _i++) {\n            var format = _a[_i];\n            fData.push({ value: (this.parent.dataType === 'pivot' ? this.getFormat(format) : format), text: this.parent.localeObj.getConstant(format) });\n        }\n        if (this.parent.dataType === 'olap') {\n            var mData = [];\n            var memberTypeData = ['Measure', 'Dimension'];\n            for (var _b = 0, memberTypeData_1 = memberTypeData; _b < memberTypeData_1.length; _b++) {\n                var type = memberTypeData_1[_b];\n                mData.push({ value: type, text: this.parent.localeObj.getConstant(type) });\n            }\n            var fields = _base_util__WEBPACK_IMPORTED_MODULE_8__.PivotUtil.getClonedData(this.parent.olapEngineModule.fieldListData);\n            for (var _c = 0, _d = fields; _c < _d.length; _c++) {\n                var item = _d[_c];\n                if (item.spriteCssClass &&\n                    (item.spriteCssClass.indexOf('e-attributeCDB-icon') > -1 ||\n                        item.spriteCssClass.indexOf('e-hierarchyCDB-icon') > -1)) {\n                    fieldData.push({ value: item.id, text: item.caption });\n                }\n            }\n            var memberTypeObj = new _syncfusion_ej2_dropdowns__WEBPACK_IMPORTED_MODULE_7__.DropDownList({\n                dataSource: mData, enableRtl: this.parent.enableRtl, locale: this.parent.locale,\n                fields: { value: 'value', text: 'text' },\n                value: this.fieldType !== null ? this.fieldType : mData[0].value,\n                readonly: this.isEdit,\n                cssClass: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.MEMBER_OPTIONS_CLASS + (this.parent.cssClass ? (' ' + this.parent.cssClass) : ''), width: '100%',\n                change: function (args) {\n                    hierarchyListObj_1.enabled = args.value === 'Dimension' ? true : false;\n                    _this.fieldType = args.value;\n                    _this.formulaText = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + _this.parentID + 'droppable', document).value;\n                    hierarchyListObj_1.dataBind();\n                }\n            });\n            memberTypeObj.isStringTemplate = true;\n            memberTypeObj.appendTo((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'Member_Type_Div', dialogElement));\n            var hierarchyListObj_1 = new _syncfusion_ej2_dropdowns__WEBPACK_IMPORTED_MODULE_7__.DropDownList({\n                dataSource: fieldData, enableRtl: this.parent.enableRtl, locale: this.parent.locale,\n                allowFiltering: true,\n                enabled: memberTypeObj.value === 'Dimension' ? true : false,\n                filterBarPlaceholder: this.parent.localeObj.getConstant('example') + ' ' + fieldData[0].text.toString(),\n                fields: { value: 'value', text: 'text' },\n                value: this.parentHierarchy !== null && memberTypeObj.value === 'Dimension' ?\n                    this.parentHierarchy : fieldData[0].value,\n                cssClass: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.MEMBER_OPTIONS_CLASS + (this.parent.cssClass ? (' ' + this.parent.cssClass) : ''), width: '100%',\n                change: function (args) {\n                    _this.parentHierarchy = args.value;\n                    _this.formulaText = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + _this.parentID + 'droppable', document).value;\n                }\n            });\n            hierarchyListObj_1.isStringTemplate = true;\n            hierarchyListObj_1.appendTo((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'Hierarchy_List_Div', dialogElement));\n        }\n        var formatStringObj = new _syncfusion_ej2_dropdowns__WEBPACK_IMPORTED_MODULE_7__.DropDownList({\n            dataSource: fData, enableRtl: this.parent.enableRtl, locale: this.parent.locale,\n            fields: { value: 'value', text: 'text' },\n            value: this.parent.isAdaptive && this.formatType !== null ? this.formatType\n                : this.parent.dataType === 'olap' ? fData[0].value : fData[4].value,\n            cssClass: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.MEMBER_OPTIONS_CLASS + (this.parent.cssClass ? (' ' + this.parent.cssClass) : ''), width: '100%',\n            change: function (args) {\n                customerFormatObj.enabled = args.value === 'Custom' ? true : false;\n                _this.formatType = args.value;\n                _this.formulaText = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + _this.parentID + 'droppable', document).value;\n                customerFormatObj.dataBind();\n            }\n        });\n        formatStringObj.isStringTemplate = true;\n        formatStringObj.appendTo((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'Format_Div', dialogElement));\n        var customerFormatObj = new _syncfusion_ej2_inputs__WEBPACK_IMPORTED_MODULE_3__.MaskedTextBox({\n            placeholder: this.parent.localeObj.getConstant('customFormat'),\n            locale: this.parent.locale, enableRtl: this.parent.enableRtl,\n            value: this.formatText !== null && formatStringObj.value === 'Custom' ? this.formatText : null,\n            enabled: formatStringObj.value === 'Custom' ? true : false,\n            change: function (args) {\n                _this.formatText = args.value;\n                _this.formulaText = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + _this.parentID + 'droppable', document).value;\n            },\n            cssClass: this.parent.cssClass\n        });\n        customerFormatObj.isStringTemplate = true;\n        customerFormatObj.appendTo((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'Custom_Format_Element', dialogElement));\n    };\n    CalculatedField.prototype.getFormat = function (pivotFormat) {\n        var format = pivotFormat;\n        if (this.parent.dataType !== 'olap') {\n            switch (format) {\n                case 'Standard':\n                    format = 'N';\n                    break;\n                case 'Currency':\n                    format = 'C';\n                    break;\n                case 'Percent':\n                    format = 'P';\n                    break;\n                case 'N':\n                    format = 'Standard';\n                    break;\n                case 'C':\n                    format = 'Currency';\n                    break;\n                case 'P':\n                    format = 'Percent';\n                    break;\n            }\n        }\n        else {\n            switch (format) {\n                case 'Standard':\n                    format = 'N';\n                    break;\n                case 'Currency':\n                    format = 'C';\n                    break;\n                case 'Percent':\n                    format = 'P';\n                    break;\n            }\n        }\n        return format;\n    };\n    /**\n     * To create treeview.\n     *\n     * @returns {void}\n     */\n    CalculatedField.prototype.createTreeView = function () {\n        var _this = this;\n        var dialog = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'calculateddialog', document) ? (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'calculateddialog', document), _syncfusion_ej2_popups__WEBPACK_IMPORTED_MODULE_0__.Dialog) : null;\n        var dialogElement = (this.parent.isAdaptive ?\n            this.parent.dialogRenderer.parentElement : dialog.element);\n        if (this.parent.dataType === 'olap') {\n            this.treeObj = new _syncfusion_ej2_navigations__WEBPACK_IMPORTED_MODULE_5__.TreeView({\n                fields: { dataSource: this.getFieldListData(this.parent), id: 'id', text: 'caption', parentID: 'pid', iconCss: 'spriteCssClass' },\n                allowDragAndDrop: true,\n                enableRtl: this.parent.enableRtl,\n                enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n                locale: this.parent.locale,\n                nodeDragStart: this.dragStart.bind(this),\n                nodeDragging: function (e) {\n                    if (e.event.target && e.event.target.classList.contains(_common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.FORMULA)) {\n                        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.removeClass)([e.clonedNode], _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.NO_DRAG_CLASS);\n                        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.addClass)([e.event.target], 'e-copy-drop');\n                    }\n                    else {\n                        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.addClass)([e.clonedNode], _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.NO_DRAG_CLASS);\n                        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.removeClass)([e.event.target], 'e-copy-drop');\n                        e.dropIndicator = 'e-no-drop';\n                        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.addClass)([e.clonedNode.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.ICON)], 'e-icon-expandable');\n                        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.removeClass)([e.clonedNode.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.ICON)], 'e-list-icon');\n                    }\n                },\n                nodeClicked: this.fieldClickHandler.bind(this),\n                nodeSelected: function (args) {\n                    if (args.node.getAttribute('data-type') === CALC) {\n                        _this.displayMenu(args.node);\n                    }\n                    else {\n                        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.removeClass)([args.node], 'e-active');\n                        args.cancel = true;\n                    }\n                },\n                nodeDragStop: this.fieldDropped.bind(this),\n                drawNode: this.drawTreeNode.bind(this),\n                nodeExpanding: this.updateNodeIcon.bind(this),\n                nodeCollapsed: this.updateNodeIcon.bind(this),\n                sortOrder: 'None',\n                cssClass: this.parent.cssClass\n            });\n        }\n        else {\n            this.treeObj = new _syncfusion_ej2_navigations__WEBPACK_IMPORTED_MODULE_5__.TreeView({\n                fields: { dataSource: this.getFieldListData(this.parent), id: 'formula', text: 'name', iconCss: 'icon' },\n                allowDragAndDrop: true,\n                enableRtl: this.parent.enableRtl,\n                enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n                locale: this.parent.locale,\n                cssClass: this.parent.cssClass,\n                nodeCollapsing: this.nodeCollapsing.bind(this),\n                nodeDragStart: this.dragStart.bind(this),\n                nodeClicked: this.fieldClickHandler.bind(this),\n                nodeDragStop: this.fieldDropped.bind(this),\n                drawNode: this.drawTreeNode.bind(this),\n                keyPress: function (args) {\n                    if (args.event.keyCode === 39) {\n                        args.cancel = true;\n                    }\n                },\n                sortOrder: 'Ascending'\n            });\n        }\n        this.treeObj.isStringTemplate = true;\n        this.treeObj.appendTo((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'tree', dialogElement));\n    };\n    CalculatedField.prototype.updateNodeIcon = function (args) {\n        if (args.node && args.node.querySelector('.e-list-icon') &&\n            args.node.querySelector('.e-icon-expandable.e-process') &&\n            (args.node.querySelector('.e-list-icon').className.indexOf('e-folderCDB-icon') > -1)) {\n            var node = args.node.querySelector('.e-list-icon');\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.removeClass)([node], 'e-folderCDB-icon');\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.addClass)([node], 'e-folderCDB-open-icon');\n        }\n        else if (args.node && args.node.querySelector('.e-list-icon') &&\n            args.node.querySelector('.e-icon-expandable') &&\n            (args.node.querySelector('.e-list-icon').className.indexOf('e-folderCDB-open-icon') > -1)) {\n            var node = args.node.querySelector('.e-list-icon');\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.removeClass)([node], 'e-folderCDB-open-icon');\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.addClass)([node], 'e-folderCDB-icon');\n        }\n        else {\n            var curTreeData = this.treeObj.fields.dataSource;\n            var fieldListData = curTreeData;\n            var childNodes = [];\n            for (var _i = 0, fieldListData_1 = fieldListData; _i < fieldListData_1.length; _i++) {\n                var item = fieldListData_1[_i];\n                if (item.pid === args.nodeData.id.toString()) {\n                    childNodes.push(item);\n                }\n            }\n            if (childNodes.length === 0) {\n                this.parent.olapEngineModule.calcChildMembers = [];\n                this.parent.olapEngineModule.getCalcChildMembers(this.parent.dataSourceSettings, args.nodeData.id.toString());\n                childNodes = this.parent.olapEngineModule.calcChildMembers;\n                this.parent.olapEngineModule.calcChildMembers = [];\n                for (var _a = 0, childNodes_1 = childNodes; _a < childNodes_1.length; _a++) {\n                    var node = childNodes_1[_a];\n                    node.pid = args.nodeData.id.toString();\n                    node.hasChildren = false;\n                    node.spriteCssClass = 'e-level-members';\n                    node.caption = (node.caption === '' ? this.parent.localeObj.getConstant('blank') : node.caption);\n                    curTreeData.push(node);\n                }\n                this.treeObj.addNodes(childNodes, args.node);\n            }\n            else {\n                return;\n            }\n        }\n    };\n    CalculatedField.prototype.nodeCollapsing = function (args) {\n        args.cancel = true;\n    };\n    CalculatedField.prototype.dragStart = function (args) {\n        var isDrag = false;\n        var dragItem = args.clonedNode;\n        if (dragItem && ((this.parent.dataType === 'olap' &&\n            (dragItem.querySelector('.e-calc-dimension-icon,.e-calc-measure-icon,.e-measure-icon') ||\n                dragItem.querySelector('.e-attributeCDB-icon,.e-hierarchyCDB-icon') ||\n                dragItem.querySelector('.e-level-members,.e-namedSetCDB-icon'))) || (this.parent.dataType === 'pivot' &&\n            args.event.target.classList.contains(_common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.DRAG_CLASS)))) {\n            isDrag = true;\n        }\n        if (isDrag) {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.addClass)([args.draggedNode.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.LIST_TEXT_CLASS)], _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.SELECTED_NODE_CLASS);\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.addClass)([dragItem], _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.PIVOTCALC);\n            var dialog = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'calculateddialog', document), _syncfusion_ej2_popups__WEBPACK_IMPORTED_MODULE_0__.Dialog);\n            dragItem.style.zIndex = (dialog.zIndex + 1).toString();\n            dragItem.style.display = 'inline';\n        }\n        else {\n            args.cancel = true;\n        }\n    };\n    /**\n     * Trigger before treeview text append.\n     *\n     * @param {DrawNodeEventArgs} args - args.\n     * @returns {void}\n     */\n    CalculatedField.prototype.drawTreeNode = function (args) {\n        if (this.parent.dataType === 'olap') {\n            if (args.node.querySelector('.e-measure-icon')) {\n                args.node.querySelector('.e-list-icon').style.display = 'none';\n            }\n            var field = args.nodeData;\n            args.node.setAttribute('data-field', field.id);\n            args.node.setAttribute('data-caption', field.caption);\n            var liTextElement = args.node.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.TEXT_CONTENT_CLASS);\n            if (args.nodeData && args.nodeData.type === CALC &&\n                liTextElement && args.node.querySelector('.e-list-icon.e-calc-member')) {\n                args.node.setAttribute('data-type', field.type);\n                args.node.setAttribute('data-membertype', field.fieldType);\n                args.node.setAttribute('data-hierarchy', field.parentHierarchy ? field.parentHierarchy : '');\n                args.node.setAttribute('data-formula', field.formula);\n                var formatString = (field.formatString ? this.formatTypes.indexOf(field.formatString) > -1 ?\n                    field.formatString : 'Custom' : 'None');\n                args.node.setAttribute('data-formatString', formatString);\n                args.node.setAttribute('data-customformatstring', (formatString === 'Custom' ? field.formatString : ''));\n                var removeElement = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('span', {\n                    className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.GRID_REMOVE + ' e-icons e-list-icon'\n                });\n                liTextElement.classList.add('e-calcfieldmember');\n                if (this.parent.isAdaptive) {\n                    var editElement = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('span', {\n                        className: 'e-list-edit-icon' + (this.isEdit && this.currentFieldName === field.id ?\n                            ' e-edited ' : ' e-edit ') + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.ICON\n                    });\n                    var editWrapper = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { className: 'e-list-header-icon' });\n                    editWrapper.appendChild(editElement);\n                    editWrapper.appendChild(removeElement);\n                    liTextElement.appendChild(editWrapper);\n                }\n                else {\n                    liTextElement.appendChild(removeElement);\n                }\n            }\n            if (this.parent.isAdaptive) {\n                var liTextElement_1 = args.node.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.TEXT_CONTENT_CLASS);\n                if (args.node && args.node.querySelector('.e-list-icon') && liTextElement_1) {\n                    var liIconElement = args.node.querySelector('.e-list-icon');\n                    liTextElement_1.insertBefore(liIconElement, args.node.querySelector('.e-list-text'));\n                }\n                if (args.node && args.node.querySelector('.e-calcMemberGroupCDB,.e-measureGroupCDB-icon,.e-folderCDB-icon')) {\n                    args.node.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CHECKBOX_CONTAINER).style.display = 'none';\n                }\n                if (args.node && args.node.querySelector('.e-level-members')) {\n                    args.node.querySelector('.e-list-icon').style.display = 'none';\n                }\n            }\n            if (args.node.querySelector('.e-calc-dimension-icon,.e-calc-measure-icon,.e-measure-icon') ||\n                args.node.querySelector('.e-attributeCDB-icon,.e-hierarchyCDB-icon') ||\n                args.node.querySelector('.e-level-members,.e-namedSetCDB-icon')) {\n                (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.addClass)([args.node], _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.BUTTON_DRAGGABLE);\n            }\n        }\n        else {\n            var field = args.nodeData.field;\n            args.node.setAttribute('data-field', field);\n            args.node.setAttribute('data-caption', args.nodeData.caption);\n            args.node.setAttribute('data-type', args.nodeData.type);\n            var formatObj = _base_util__WEBPACK_IMPORTED_MODULE_8__.PivotUtil.getFieldByName(field, this.parent.dataSourceSettings.formatSettings);\n            args.node.setAttribute('data-formatString', formatObj ? formatObj.format : '');\n            if (formatObj) {\n                var pivotFormat = this.getFormat(formatObj.format);\n                var formatString = (pivotFormat ? this.formatTypes.indexOf(pivotFormat) > -1 ?\n                    formatObj.format : 'Custom' : 'None');\n                args.node.setAttribute('data-customformatstring', (formatString === 'Custom' ? pivotFormat : ''));\n                args.node.setAttribute('data-formatString', formatObj ? formatString : '');\n            }\n            var dragElement = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('span', {\n                attrs: { 'tabindex': '-1', 'aria-disabled': 'false', 'title': this.parent.localeObj.getConstant('dragField') },\n                className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.ICON + ' e-drag'\n            });\n            var spaceElement = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', {\n                className: ' e-iconspace'\n            });\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.prepend)([dragElement], args.node.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.TEXT_CONTENT_CLASS));\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.append)([spaceElement, args.node.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.FORMAT)], args.node.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.TEXT_CONTENT_CLASS));\n            if (this.getMenuItems(this.parent.engineModule.fieldList[field].type).length <= 0) {\n                (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.removeClass)([args.node.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.FORMAT)], _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.ICON);\n            }\n            else {\n                args.node.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.FORMAT).setAttribute('title', this.parent.localeObj.getConstant('format'));\n            }\n            if (this.parent.engineModule.fieldList[field].aggregateType === CALC) {\n                args.node.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.FORMAT).setAttribute('title', this.parent.localeObj.getConstant('remove'));\n                (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.addClass)([args.node.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.FORMAT)], _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.GRID_REMOVE);\n                (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.addClass)([args.node.querySelector('.' + 'e-iconspace')], [_common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDIT, _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.ICON, 'e-list-icon']);\n                args.node.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDIT).setAttribute('title', this.parent.localeObj.getConstant('edit'));\n                args.node.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDIT).setAttribute('aria-disabled', 'false');\n                args.node.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALC_EDIT).setAttribute('tabindex', '-1');\n                (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.removeClass)([args.node.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.FORMAT)], _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.FORMAT);\n                (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.removeClass)([args.node.querySelector('.e-iconspace')], 'e-iconspace');\n            }\n        }\n    };\n    /**\n     * To create radio buttons.\n     *\n     * @param {string} key - key.\n     * @returns {HTMLElement} - createTypeContainer\n     */\n    CalculatedField.prototype.createTypeContainer = function (key) {\n        var wrapDiv = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { id: this.parentID + 'control_container', className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.TREEVIEWOUTER });\n        var type = this.getMenuItems(this.parent.engineModule.fieldList[key].type);\n        for (var i = 0; i < type.length; i++) {\n            var input = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('input', {\n                id: this.parentID + 'radio' + key + type[i],\n                attrs: { 'type': 'radio', 'data-ftxt': key, 'data-value': type[i] },\n                className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALCRADIO\n            });\n            wrapDiv.appendChild(input);\n        }\n        return wrapDiv;\n    };\n    CalculatedField.prototype.getMenuItems = function (fieldType, summaryType) {\n        var menuItems = !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.isNullOrUndefined)(summaryType) ? summaryType : this.parent.aggregateTypes;\n        var type = [];\n        var menuTypes = this.getValidSummaryType();\n        for (var i = 0; i < menuItems.length; i++) {\n            if ((menuTypes.indexOf(menuItems[i]) > -1) && (type.indexOf(menuItems[i]) < 0)) {\n                if (((menuItems[i] === COUNT || menuItems[i] === DISTINCTCOUNT) && fieldType !== 'number')\n                    || (fieldType === 'number')) {\n                    type.push(menuItems[i]);\n                }\n            }\n        }\n        return type;\n    };\n    CalculatedField.prototype.getValidSummaryType = function () {\n        return [COUNT, DISTINCTCOUNT,\n            SUM, AVG, MEDIAN,\n            MIN, MAX, PRODUCT,\n            STDEV, STDEVP,\n            VAR, VARP];\n    };\n    /**\n     * To get Accordion Data.\n     *\n     * @param  {PivotView | PivotFieldList} parent - parent.\n     * @returns {AccordionItemModel[]} - Accordion Data.\n     */\n    CalculatedField.prototype.getAccordionData = function (parent) {\n        var data = [];\n        var keys = Object.keys(parent.engineModule.fieldList);\n        for (var index = 0, i = keys.length; index < i; index++) {\n            var key = keys[index];\n            data.push({\n                header: '<input id=' + this.parentID + '_' + index + ' class=' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALCCHECK + ' type=\"checkbox\" data-field=' +\n                    key + ' data-caption=\"' + this.parent.engineModule.fieldList[key].caption + '\" data-type=' +\n                    this.parent.engineModule.fieldList[key].type + '/>',\n                content: (this.parent.engineModule.fieldList[key].aggregateType === CALC ||\n                    (this.getMenuItems(this.parent.engineModule.fieldList[key].type).length < 1)) ? '' :\n                    this.createTypeContainer(key).outerHTML,\n                iconCss: this.parent.engineModule.fieldList[key].aggregateType === CALC ? 'e-list-icon' + ' ' +\n                    (this.isEdit && this.currentFieldName === key ? 'e-edited' : 'e-edit') : ''\n            });\n        }\n        return data;\n    };\n    /**\n     * To render mobile layout.\n     *\n     * @param {Tab} tabObj - tabObj\n     * @returns {void}\n     */\n    CalculatedField.prototype.renderMobileLayout = function (tabObj) {\n        var _this = this;\n        tabObj.items[4].content = this.renderDialogElements().outerHTML;\n        tabObj.dataBind();\n        var dialog = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'calculateddialog', document) ? (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'calculateddialog', document), _syncfusion_ej2_popups__WEBPACK_IMPORTED_MODULE_0__.Dialog) : null;\n        var dialogElement = (this.parent.isAdaptive ?\n            this.parent.dialogRenderer.parentElement : dialog.element);\n        if (this.parent.isAdaptive && this.parent.\n            dialogRenderer.parentElement.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.FORMULA) !== null) {\n            this.createDropElements();\n        }\n        var cancelBtn = new _syncfusion_ej2_buttons__WEBPACK_IMPORTED_MODULE_2__.Button({\n            cssClass: this.parent.cssClass, locale: this.parent.locale, enableRtl: this.parent.enableRtl,\n            enableHtmlSanitizer: this.parent.enableHtmlSanitizer\n        });\n        cancelBtn.isStringTemplate = true;\n        cancelBtn.appendTo((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'cancelBtn', dialogElement));\n        if (cancelBtn.element) {\n            cancelBtn.element.onclick = this.cancelBtnClick.bind(this);\n        }\n        if (this.parent.\n            dialogRenderer.parentElement.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.FORMULA) !== null && this.parent.isAdaptive) {\n            var okBtn = new _syncfusion_ej2_buttons__WEBPACK_IMPORTED_MODULE_2__.Button({\n                cssClass: this.parent.cssClass, isPrimary: true, locale: this.parent.locale, enableRtl: this.parent.enableRtl,\n                enableHtmlSanitizer: this.parent.enableHtmlSanitizer\n            });\n            okBtn.isStringTemplate = true;\n            okBtn.appendTo((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'okBtn', dialogElement));\n            var inputObj = new _syncfusion_ej2_inputs__WEBPACK_IMPORTED_MODULE_3__.MaskedTextBox({\n                placeholder: this.parent.localeObj.getConstant('fieldName'),\n                locale: this.parent.locale, enableRtl: this.parent.enableRtl,\n                change: function (args) {\n                    _this.fieldText = args.value;\n                    _this.formulaText = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + _this.parentID + 'droppable', document).value;\n                },\n                cssClass: this.parent.cssClass\n            });\n            inputObj.isStringTemplate = true;\n            inputObj.appendTo((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'ddlelement', dialogElement));\n            if (this.formulaText !== null && (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'droppable', this.parent.dialogRenderer.parentElement) !== null) {\n                var drop = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'droppable', this.parent.dialogRenderer.parentElement);\n                drop.value = this.formulaText;\n            }\n            if (this.fieldText !== null && this.parent.\n                dialogRenderer.parentElement.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALCINPUT) !== null) {\n                this.parent.\n                    dialogRenderer.parentElement.querySelector('.' + _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CALCINPUT).value = this.fieldText;\n                inputObj.value = this.fieldText;\n            }\n            if (okBtn.element) {\n                okBtn.element.onclick = this.applyFormula.bind(this);\n            }\n        }\n        else if (this.parent.isAdaptive) {\n            var addBtn = new _syncfusion_ej2_buttons__WEBPACK_IMPORTED_MODULE_2__.Button({\n                cssClass: this.parent.cssClass, isPrimary: true, locale: this.parent.locale, enableRtl: this.parent.enableRtl,\n                enableHtmlSanitizer: this.parent.enableHtmlSanitizer\n            });\n            addBtn.isStringTemplate = true;\n            addBtn.appendTo((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'addBtn', dialogElement));\n            if (this.parent.dataType === 'olap') {\n                this.treeObj = new _syncfusion_ej2_navigations__WEBPACK_IMPORTED_MODULE_5__.TreeView({\n                    fields: { dataSource: this.getFieldListData(this.parent), id: 'id', text: 'caption', parentID: 'pid', iconCss: 'spriteCssClass' },\n                    showCheckBox: true,\n                    autoCheck: false,\n                    sortOrder: 'None',\n                    enableRtl: this.parent.enableRtl,\n                    locale: this.parent.locale,\n                    enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n                    nodeClicked: this.fieldClickHandler.bind(this),\n                    drawNode: this.drawTreeNode.bind(this),\n                    nodeExpanding: this.updateNodeIcon.bind(this),\n                    nodeCollapsed: this.updateNodeIcon.bind(this),\n                    nodeSelected: function (args) {\n                        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.removeClass)([args.node], 'e-active');\n                        args.cancel = true;\n                    },\n                    cssClass: this.parent.cssClass\n                });\n                this.treeObj.isStringTemplate = true;\n                this.treeObj.appendTo((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'accordDiv', dialogElement));\n            }\n            else {\n                var accordion = new _syncfusion_ej2_navigations__WEBPACK_IMPORTED_MODULE_5__.Accordion({\n                    items: this.getAccordionData(this.parent),\n                    enableRtl: this.parent.enableRtl,\n                    locale: this.parent.locale,\n                    enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n                    expanding: this.accordionExpand.bind(this),\n                    clicked: this.accordionClickHandler.bind(this),\n                    created: this.accordionCreated.bind(this)\n                });\n                accordion.isStringTemplate = true;\n                accordion.appendTo((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'accordDiv', dialogElement));\n                this.updateType();\n            }\n            if (addBtn.element) {\n                addBtn.element.onclick = this.addBtnClick.bind(this);\n            }\n        }\n    };\n    CalculatedField.prototype.accordionExpand = function (args) {\n        if (args.element.querySelectorAll('.e-radio-wrapper').length === 0) {\n            var keys = Object.keys(this.parent.engineModule.fieldList);\n            for (var index = 0, i = keys.length; index < i; index++) {\n                var key = keys[index];\n                var type = this.parent.engineModule.fieldList[key].type !== 'number' ? [COUNT, DISTINCTCOUNT] :\n                    [SUM, COUNT, AVG, MEDIAN, MIN, MAX, DISTINCTCOUNT, PRODUCT, STDEV, STDEVP, VAR, VARP];\n                var radiobutton = void 0;\n                if (key === args.element.querySelector('[data-field').getAttribute('data-field')) {\n                    for (var i_1 = 0; i_1 < type.length; i_1++) {\n                        radiobutton = new _syncfusion_ej2_buttons__WEBPACK_IMPORTED_MODULE_2__.RadioButton({\n                            label: this.parent.localeObj.getConstant(type[i_1]),\n                            name: AGRTYPE + key,\n                            checked: args.element.querySelector('[data-type').getAttribute('data-type') === type[i_1],\n                            change: this.onChange.bind(this),\n                            locale: this.parent.locale, enableRtl: this.parent.enableRtl,\n                            enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n                            cssClass: this.parent.cssClass\n                        });\n                        radiobutton.isStringTemplate = true;\n                        radiobutton.appendTo((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'radio' + key + type[i_1], args.element));\n                    }\n                }\n            }\n        }\n    };\n    CalculatedField.prototype.onChange = function (args) {\n        var type = args.event.target.parentElement.querySelector('.e-label')\n            .innerText;\n        var field = args.event.target.closest('.e-acrdn-item').\n            querySelector('[data-field').getAttribute('data-caption');\n        args.event.target.\n            closest('.e-acrdn-item').querySelector('.e-label').\n            innerText = field + ' (' + type + ')';\n        args.event.target.closest('.e-acrdn-item').\n            querySelector('[data-type').setAttribute('data-type', args.event.target.getAttribute('data-value'));\n    };\n    CalculatedField.prototype.updateType = function () {\n        var keys = Object.keys(this.parent.engineModule.fieldList);\n        var dialog = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'calculateddialog', document) ? (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'calculateddialog', document), _syncfusion_ej2_popups__WEBPACK_IMPORTED_MODULE_0__.Dialog) : null;\n        var dialogElement = (this.parent.isAdaptive ?\n            this.parent.dialogRenderer.parentElement : dialog.element);\n        for (var index = 0, i = keys.length; index < i; index++) {\n            var key = keys[index];\n            var type = null;\n            if ((this.parent.engineModule.fieldList[key].type !== 'number' ||\n                this.parent.engineModule.fieldList[key].type === 'include' ||\n                this.parent.engineModule.fieldList[key].type === 'exclude') &&\n                (this.parent.engineModule.fieldList[key].aggregateType !== 'DistinctCount')) {\n                type = COUNT;\n            }\n            else {\n                type = this.parent.engineModule.fieldList[key].aggregateType !== undefined ?\n                    this.parent.engineModule.fieldList[key].aggregateType : SUM;\n            }\n            var checkbox = new _syncfusion_ej2_buttons__WEBPACK_IMPORTED_MODULE_2__.CheckBox({\n                label: this.parent.engineModule.fieldList[key].caption + ' (' + this.parent.localeObj.getConstant(type) + ')',\n                locale: this.parent.locale, enableRtl: this.parent.enableRtl, enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n                cssClass: this.parent.cssClass\n            });\n            checkbox.isStringTemplate = true;\n            checkbox.appendTo((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + '_' + index, dialogElement));\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + '_' + index, dialogElement).setAttribute('data-field', key);\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + '_' + index, dialogElement).setAttribute('data-type', type);\n        }\n    };\n    /**\n     * Trigger while click cancel button.\n     *\n     * @returns {void}\n     */\n    CalculatedField.prototype.cancelBtnClick = function () {\n        this.renderMobileLayout(this.parent.dialogRenderer.adaptiveElement);\n    };\n    /**\n     * Trigger while click add button.\n     *\n     * @returns {void}\n     */\n    CalculatedField.prototype.addBtnClick = function () {\n        var fieldText = '';\n        var field = null;\n        var type = null;\n        if (this.parent.dataType === 'pivot') {\n            var node = document.querySelectorAll('.e-accordion .e-check');\n            for (var i = 0; i < node.length; i++) {\n                field = node[i].parentElement.querySelector('[data-field]').getAttribute('data-field');\n                type = node[i].parentElement.querySelector('[data-field]').getAttribute('data-type');\n                if (type.indexOf(CALC) === -1) {\n                    fieldText = fieldText + ('\"' + type + '(' + field + ')' + '\"');\n                }\n                else {\n                    for (var j = 0; j < this.parent.dataSourceSettings.calculatedFieldSettings.length; j++) {\n                        if (this.parent.dataSourceSettings.calculatedFieldSettings[j].name === field) {\n                            fieldText = fieldText + this.parent.dataSourceSettings.calculatedFieldSettings[j].formula;\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            var nodes = this.treeObj.getAllCheckedNodes();\n            var olapEngine = this.parent.olapEngineModule;\n            for (var _i = 0, nodes_1 = nodes; _i < nodes_1.length; _i++) {\n                var item = nodes_1[_i];\n                fieldText = fieldText + (olapEngine.fieldList[item] &&\n                    olapEngine.fieldList[item].type === CALC ? olapEngine.fieldList[item].tag : item);\n            }\n        }\n        this.formulaText = this.formulaText !== null ? (this.formulaText + fieldText) : fieldText;\n        this.renderMobileLayout(this.parent.dialogRenderer.adaptiveElement);\n    };\n    /**\n     * To create calculated field dialog elements.\n     *\n     * @param {any} args - It contains the args value.\n     * @param {boolean} args.edit - It contains the value of edit under args.\n     * @param {string} args.fieldName - It contains the value of fieldName under args.\n     * @returns {void}\n     * @hidden\n     */\n    CalculatedField.prototype.createCalculatedFieldDialog = function (args) {\n        if (this.parent.isAdaptive && this.parent.getModuleName() === 'pivotfieldlist') {\n            this.renderAdaptiveLayout(args && args.edit !== undefined ? args.edit : true);\n            this.isEdit = (args && args.edit !== undefined ? args.edit : this.isEdit);\n        }\n        else if (!this.parent.isAdaptive) {\n            this.isEdit = (args && args.edit !== undefined ? args.edit : false);\n            this.renderDialogLayout();\n            if (args && args.edit) {\n                var target = this.treeObj.element.querySelector('li[data-field=\"' + args.fieldName + '\"]');\n                if (target) {\n                    (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.addClass)([target], ['e-active', 'e-node-focus']);\n                    target.setAttribute('aria-selected', 'true');\n                    target.id = this.treeObj.element.id + '_active';\n                    if (this.parent.dataType === 'pivot') {\n                        var e = { event: { target: target.querySelector('.e-list-icon.e-edit.e-icons') } };\n                        this.fieldClickHandler(e);\n                    }\n                    else {\n                        this.displayMenu(target);\n                    }\n                }\n            }\n            var dialog = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'calculateddialog', document), _syncfusion_ej2_popups__WEBPACK_IMPORTED_MODULE_0__.Dialog);\n            dialog.element.style.top = parseInt(dialog.element.style.top, 10) < 0 ? '0px' : dialog.element.style.top;\n        }\n    };\n    /**\n     * To create calculated field desktop layout.\n     *\n     * @returns {void}\n     */\n    CalculatedField.prototype.renderDialogLayout = function () {\n        this.newFields =\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.extend)([], this.parent.dataSourceSettings.calculatedFieldSettings, null, true);\n        this.createDialog();\n        var dialog = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'calculateddialog', document), _syncfusion_ej2_popups__WEBPACK_IMPORTED_MODULE_0__.Dialog);\n        dialog.content = this.renderDialogElements();\n        dialog.refresh();\n        var inputObj = new _syncfusion_ej2_inputs__WEBPACK_IMPORTED_MODULE_3__.MaskedTextBox({\n            placeholder: this.parent.localeObj.getConstant('fieldName'),\n            locale: this.parent.locale, enableRtl: this.parent.enableRtl,\n            cssClass: this.parent.cssClass\n        });\n        inputObj.isStringTemplate = true;\n        inputObj.appendTo((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'ddlelement', dialog.element));\n        this.createDropElements();\n        this.createTreeView();\n        this.droppable = new _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.Droppable((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'droppable', dialog.element));\n        this.keyboardEvents = new _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.KeyboardEvents(dialog.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: { moveRight: 'rightarrow', enter: 'enter', shiftE: 'shift+E', delete: 'delete' },\n            eventName: 'keydown'\n        });\n    };\n    CalculatedField.prototype.createConfirmDialog = function (title, description, calcInfo, isRemove, node) {\n        var errorDialog = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', {\n            id: this.parentID + '_CalculatedFieldErrorDialog',\n            className: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.ERROR_DIALOG_CLASS\n        });\n        this.parent.element.appendChild(errorDialog);\n        var confirmPopUp = new _syncfusion_ej2_popups__WEBPACK_IMPORTED_MODULE_0__.Dialog({\n            animationSettings: { effect: 'Fade' },\n            allowDragging: false,\n            showCloseIcon: true,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n            width: 'auto',\n            height: 'auto',\n            position: { X: 'center', Y: 'center' },\n            buttons: [\n                {\n                    click: isRemove ? this.removeCalcField.bind(this, node) : this.replaceFormula.bind(this, calcInfo),\n                    isFlat: false,\n                    buttonModel: {\n                        cssClass: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.OK_BUTTON_CLASS + (this.parent.cssClass ? (' ' + this.parent.cssClass) : ''),\n                        content: isRemove ? this.parent.localeObj.getConstant('yes') : this.parent.localeObj.getConstant('ok'), isPrimary: true\n                    }\n                },\n                {\n                    click: this.closeErrorDialog.bind(this),\n                    isFlat: false,\n                    buttonModel: {\n                        cssClass: _common_base_css_constant__WEBPACK_IMPORTED_MODULE_4__.CANCEL_BUTTON_CLASS + (this.parent.cssClass ? (' ' + this.parent.cssClass) : ''),\n                        content: isRemove ? this.parent.localeObj.getConstant('no') : this.parent.localeObj.getConstant('cancel')\n                    }\n                }\n            ],\n            header: title,\n            content: description,\n            isModal: true,\n            visible: true,\n            closeOnEscape: true,\n            target: document.body,\n            cssClass: this.parent.cssClass,\n            close: this.removeErrorDialog.bind(this)\n        });\n        confirmPopUp.isStringTemplate = true;\n        confirmPopUp.appendTo(errorDialog);\n        // confirmPopUp.element.querySelector('.e-dlg-header').innerText = title;\n    };\n    CalculatedField.prototype.replaceFormula = function (calcInfo) {\n        var report = this.parent.dataSourceSettings;\n        if (this.parent.dataType === 'olap') {\n            for (var j = 0; j < report.calculatedFieldSettings.length; j++) {\n                if (report.calculatedFieldSettings[j].name === calcInfo.name) {\n                    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.isNullOrUndefined)(calcInfo.hierarchyUniqueName)) {\n                        report.calculatedFieldSettings[j].hierarchyUniqueName = calcInfo.hierarchyUniqueName;\n                    }\n                    report.calculatedFieldSettings[j].formatString = calcInfo.formatString;\n                    report.calculatedFieldSettings[j].formula = calcInfo.formula;\n                    this.parent.lastCalcFieldInfo = report.calculatedFieldSettings[j];\n                    break;\n                }\n            }\n        }\n        else {\n            for (var i = 0; i < report.values.length; i++) {\n                if (report.values[i].type === CALC && report.values[i].name === calcInfo.name) {\n                    for (var j = 0; j < report.calculatedFieldSettings.length; j++) {\n                        if (report.calculatedFieldSettings[j].name === calcInfo.name) {\n                            report.calculatedFieldSettings[j].formula = calcInfo.formula;\n                            this.parent.lastCalcFieldInfo =\n                                report.calculatedFieldSettings[j].properties ?\n                                    report.calculatedFieldSettings[j].properties :\n                                    report.calculatedFieldSettings[j];\n                            this.updateFormatSettings(report, calcInfo.name, calcInfo.formatString);\n                        }\n                    }\n                }\n            }\n        }\n        this.addFormula(report, calcInfo.name);\n        this.removeErrorDialog();\n    };\n    CalculatedField.prototype.removeErrorDialog = function () {\n        var element = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + '_CalculatedFieldErrorDialog', document);\n        var confirmPopUp = element ? (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)(element, _syncfusion_ej2_popups__WEBPACK_IMPORTED_MODULE_0__.Dialog) : null;\n        if (confirmPopUp && !confirmPopUp.isDestroyed) {\n            confirmPopUp.destroy();\n        }\n        if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + '_CalculatedFieldErrorDialog', document) !== null) {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.remove)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + '_CalculatedFieldErrorDialog', document));\n        }\n    };\n    CalculatedField.prototype.closeErrorDialog = function () {\n        var confirmPopUp = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + '_CalculatedFieldErrorDialog', document), _syncfusion_ej2_popups__WEBPACK_IMPORTED_MODULE_0__.Dialog);\n        confirmPopUp.close();\n    };\n    /**\n     * To add event listener.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    CalculatedField.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(_common_base_constant__WEBPACK_IMPORTED_MODULE_6__.initCalculatedField, this.createCalculatedFieldDialog, this);\n    };\n    /**\n     * To remove event listener.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    CalculatedField.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(_common_base_constant__WEBPACK_IMPORTED_MODULE_6__.initCalculatedField, this.createCalculatedFieldDialog);\n    };\n    /**\n     * To destroy the calculated field dialog\n     *\n     * @returns {void}\n     * @hidden\n     */\n    CalculatedField.prototype.destroy = function () {\n        if (this.treeObj && !this.treeObj.isDestroyed) {\n            this.treeObj.destroy();\n        }\n        if (this.treeObj) {\n            this.treeObj = null;\n        }\n        if (this.newFields) {\n            this.newFields = null;\n        }\n        if (this.curMenu) {\n            this.curMenu = null;\n        }\n        if (this.droppable) {\n            this.droppable = null;\n        }\n        if (this.keyboardEvents) {\n            this.keyboardEvents = null;\n        }\n        var element = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'ddlelement', document);\n        if (element) { /* inputObj */\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)(element, _syncfusion_ej2_inputs__WEBPACK_IMPORTED_MODULE_3__.MaskedTextBox).destroy();\n        }\n        element = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'calculateddialog', document);\n        if (element) { /* dialog */\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)(element, _syncfusion_ej2_popups__WEBPACK_IMPORTED_MODULE_0__.Dialog).destroy();\n        }\n        element = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'CalcContextmenu', document);\n        if (element) { /* menuObj */\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)(element, _syncfusion_ej2_navigations__WEBPACK_IMPORTED_MODULE_5__.ContextMenu).destroy();\n        }\n        element = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + 'accordDiv', document);\n        if (element) { /* accordion */\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)(element, _syncfusion_ej2_navigations__WEBPACK_IMPORTED_MODULE_5__.Accordion).destroy();\n        }\n        element = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.select)('#' + this.parentID + '_CalculatedFieldErrorDialog', document);\n        if (element) { /* confirmPopUp */\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_1__.getInstance)(element, _syncfusion_ej2_popups__WEBPACK_IMPORTED_MODULE_0__.Dialog).destroy();\n        }\n    };\n    return CalculatedField;\n}());\n\n\n\n//# sourceURL=webpack://ej2-vue-samples/./node_modules/@syncfusion/ej2-pivotview/src/common/calculatedfield/calculated-field.js?");

/***/ })

}]);