{"index.html":"<html><head><link href=\"https://cdn.syncfusion.com/ej2/28.1.33/{{theme}}.css\" rel=\"stylesheet\">\n\n    <link href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" rel=\"stylesheet\">\n\n    <style>\n            body{\n                touch-action:none;\n            }\n            .control-section{\n                margin-top:100px;\n            }\n        </style></head><body><div class=\"stackblitz-container {{theme}}\">\n<div class=\"col-lg-12 control-section e-img-editor-sample\">\n    <div class=\"customToolbar\"> \n        <div class=\"header\">\n            <div class=\"header-details\">\n                <div class=\"header-name\">Image Editor</div>\n            </div>\n        </div>\n        <div class=\"image-preview-container\" id=\"imagePreviewContainer\">\n            <img src=\"//npmci.syncfusion.com/development/demos/src/image-editor/images/bridge.jpg\" id=\"previewImgContainer\" class=\"preview-img-container\" alt=\"previewImage\">\n            <br>\n            <div class=\"button-container\" id=\"button-container\">\n                <button id=\"edit\" class=\"custom-button\"></button>\n            </div>\n        </div>\n        <div class=\"image-editor-container\" id=\"image-editor-container\" style=\"display: none;\">\n            <div id=\"top-toolbarArea\">\n                    <div id=\"top-toolbar\"></div>\n            </div>\n            <div id=\"imageEditor\"></div>\n            <div id=\"bottom-toolbarArea\">\n                <div id=\"bottom-toolbar\"></div>\n                <div id=\"filter-toolbar\"></div>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\n\n<style>\n    .customToolbar .e-image-editor {\n        margin: 0 auto;\n    }\n        \n    .e-img-editor-sample {\n        height: 80vh;\n        width: 100%;\n    }\n\n    .customToolbar {\n        height: 100%;\n    }\n\n    .customToolbar .button-container {\n        display: flex;\n        left: calc(50% - 26px);\n        position: absolute;\n        bottom: 20px;\n    }\n\n    .customToolbar .image-preview-container {\n        height: calc(100% - 40px);\n        text-align: center;\n        position: relative;\n    }\n\n    .customToolbar .preview-img-container {\n        max-width: 100%;\n        max-height: 100%;\n        padding: 20px;\n        margin: 0 auto;\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n    }\n\n    .customToolbar .image-editor-container {\n        height: calc(100% - 40px);\n        position: relative;\n    }\n\n    .customToolbar .image-editor-container .e-image-editor {\n        height: 100% !important;\n    }\n\n    .customToolbar #top-toolbarArea {\n        position: absolute;\n        top: 20px;\n        z-index: 1;\n    }\n\n    .customToolbar #top-toolbar {\n        border-radius: 8px;\n    }\n\n    .customToolbar #bottom-toolbarArea {\n        position: absolute;\n        bottom: 70px;\n        z-index: 1;\n        width: 100% !important;\n    }\n\n    .customToolbar #bottom-toolbar {\n        position: absolute;\n        border-radius: 8px;\n    }\n\n    .customToolbar #filter-toolbar {\n        height: 130px !important;\n        display: none;\n        top: 50px;\n    }\n\n    .button-container button:hover, .message button:hover{\n        color: #fff;\n        cursor: pointer;\n    }\n\n    .custom-button { \n        padding: 8px; \n        margin: 10px; \n        background: #6750a4 !important; \n        color: #fff; \n        border: none; \n        cursor: pointer; \n    }\n\n    .control-wrapper {\n        height: 100%;\n        border: 1px solid #D9D9D9;\n        border-radius: 10px;\n    }\n\n    .customToolbar .e-toolbar .e-toolbar-items .e-dropdown-btn .e-caret-hide {\n        display: none !important; /* stylelint-disable-line declaration-no-important */\n    }\n\n    .customToolbar .e-dropdown-btn,\n    .customToolbar .e-dropdown-btn.e-btn {\n        box-shadow: none;\n        background-color: rgba(184, 184, 184, 0.9584);\n        background: inherit;\n    }\n\n    .customToolbar .e-toolbar .e-toolbar-items .e-dropdown-btn:hover {\n        background: rgba(0, 0, 0, 0.12);\n        box-shadow: none;\n        color: rgba(0, 0, 0, 0.87);\n    }\n    .customToolbar .e-toolbar .e-toolbar-items .e-dropdown-btn:focus {\n        background: rgba(0, 0, 0, 0.18);\n        box-shadow: none;\n        color: rgba(0, 0, 0, 0.87);\n    }\n    .customToolbar .e-toolbar .e-toolbar-items .e-dropdown-btn:active {\n        background: rgba(184, 184, 184, 0.9584);\n        box-shadow: none;\n        color: rgba(0, 0, 0, 0.87);\n    }\n    .customToolbar .e-toolbar .e-toolbar-items .e-colorpicker-wrapper.e-shape-fill-color .e-split-btn-wrapper .e-split-btn .e-selected-color,\n    .customToolbar .e-image-editor .e-toolbar .e-toolbar-items .e-colorpicker-wrapper.e-shape-stroke-color .e-split-btn-wrapper .e-split-btn .e-selected-color,\n    .customToolbar .e-image-editor .e-toolbar .e-toolbar-items .e-colorpicker-wrapper.e-text-stroke-color .e-split-btn-wrapper .e-split-btn .e-selected-color,\n    .customToolbar .e-image-editor .e-toolbar .e-toolbar-items .e-colorpicker-wrapper.e-pen-stroke-color .e-split-btn-wrapper .e-split-btn .e-selected-color {\n        background: none;\n        border-bottom-style: solid;\n        border-bottom-width: 3px;\n        width: 14px;\n        margin: 0 2px;\n        border-bottom-color: #000;\n    }\n    .customToolbar .e-toolbar .e-toolbar-items .e-colorpicker-wrapper.e-shape-fill-color .e-split-btn-wrapper .e-split-btn .e-selected-color .e-split-preview,\n    .customToolbar .e-image-editor .e-toolbar .e-toolbar-items .e-colorpicker-wrapper.e-shape-stroke-color .e-split-btn-wrapper .e-split-btn .e-selected-color .e-split-preview,\n    .customToolbar .e-image-editor .e-toolbar .e-toolbar-items .e-colorpicker-wrapper.e-text-stroke-color .e-split-btn-wrapper .e-split-btn .e-selected-color .e-split-preview,\n    .customToolbar .e-image-editor .e-toolbar .e-toolbar-items .e-colorpicker-wrapper.e-pen-stroke-color .e-split-btn-wrapper .e-split-btn .e-selected-color .e-split-preview {\n        display: none;\n    }\n\n    .customToolbar .e-nocolor-item {\n        background: transparent url(\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNnB4IiBoZWlnaHQ9IjZweCIgdmlld0JveD0iMCAwIDYgNiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNTAgKDU0OTgzKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5Hcm91cCA5PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Ikdyb3VwLTkiPgogICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLTExIiBmaWxsPSIjRTBFMEUwIiB4PSIwIiB5PSIwIiB3aWR0aD0iMyIgaGVpZ2h0PSIzIj48L3JlY3Q+CiAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMTEtQ29weS0yIiBmaWxsPSIjRkZGRkZGIiB4PSIwIiB5PSIzIiB3aWR0aD0iMyIgaGVpZ2h0PSIzIj48L3JlY3Q+CiAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMTEtQ29weSIgZmlsbD0iI0ZGRkZGRiIgeD0iMyIgeT0iMCIgd2lkdGg9IjMiIGhlaWdodD0iMyI+PC9yZWN0PgogICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLTExLUNvcHktMyIgZmlsbD0iI0UwRTBFMCIgeD0iMyIgeT0iMyIgd2lkdGg9IjMiIGhlaWdodD0iMyI+PC9yZWN0PgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+\") !important; /* stylelint-disable-line declaration-no-important */\n        background-size: 8px !important; /* stylelint-disable-line declaration-no-important */\n    }\n\n    .customToolbar .e-bigger .e-toolbar .e-toolbar-items .e-btn-icon.e-dropdownbtn-preview,\n    .customToolbar .e-bigger .e-toolbar .e-toolbar-items .e-btn-icon.e-dropdownbtn-preview {\n        margin-top: -3px !important; /* stylelint-disable-line declaration-no-important */\n        margin-left: -1px;\n    }\n\n    .customToolbar .e-toolbar .e-toolbar-items .e-btn-icon.e-dropdownbtn-preview {\n        height: 18px;\n        width: 18px;\n        margin-top: -4px !important; /* stylelint-disable-line declaration-no-important */\n        margin-left: -1px;\n    }\n\n    .customToolbar .e-fill.e-template .e-caret::before {\n        content: \"\\e783\";\n    }\n\n    .customToolbar .e-stroke.e-template .e-caret::before,\n    .customToolbar .e-frame-stroke.e-template .e-caret::before,\n    .customToolbar .e-pen-stroke-color.e-template .e-caret::before {\n        content: \"\\e739\";\n    }\n\n    .customToolbar .e-folder-open {\n        border: none !important;\n        font-size: 18px !important;\n    }\n\n    .customToolbar .e-btn .e-btn-icon.e-icon-left {\n        margin-left: 0px !important;\n    }\n\n    .customToolbar .e-dropdown-popup ul #calibri {\n        font-family: 'Calibri';\n    }\n\n    #edit {\n        background-color: #6750a4 !important;\n    }\n\n    .header {\n        max-width: 100%;\n        background-color: #6750a4;\n        padding: 10px; \n        border-radius: 10px 10px 0 0;  \n        word-wrap: break-word; \n        align-items: center; \n    }\n\n    .header-name {\n        color: #fff;\n    }\n\n    .customToolbar .e-free-pen::before {\n        content: \"\\e7db\";\n    }\n\n    .fluent .customToolbar .e-dropdown-btn, .e-dropdown-btn.e-btn,\n    .fluent .customToolbar .e-toolbar .e-toolbar-item .e-tbar-btn:hover,\n    .fluent .customToolbar .e-toolbar .e-toolbar-item .e-tbar-btn:focus,\n    .fluent-dark .customToolbar .e-dropdown-btn, .e-dropdown-btn.e-btn,\n    .fluent-dark .customToolbar .e-toolbar .e-toolbar-item .e-tbar-btn:hover,\n    .fluent-dark .customToolbar .e-toolbar .e-toolbar-item .e-tbar-btn:focus {\n        border: none !important;\n    }\n    \n    .fluent-dark .customToolbar #edit,\n    .tailwind-dark .customToolbar #edit,\n    .material-dark .customToolbar #edit,\n    .material3-dark .customToolbar #edit,\n    .bootstrap-dark .customToolbar #edit {\n        color: #fff;\n    }\n    \n    .fluent-dark .customToolbar .e-toolbar .e-toolbar-items .e-dropdown-btn:focus,\n    .fluent-dark .customToolbar .e-toolbar .e-toolbar-items .e-dropdown-btn:hover,\n    .fluent-dark .customToolbar .e-toolbar .e-toolbar-items .e-dropdown-btn {\n        color: rgb(161, 159, 157);\n    }\n    \n    .material .customToolbar #edit,\n    .material-dark .customToolbar #edit {\n        text-transform: capitalize;\n    }\n    \n    .fluent .customToolbar .e-toolbar .e-toolbar-item .e-tbar-btn:focus,\n    .fluent-dark .customToolbar .e-toolbar .e-toolbar-item .e-tbar-btn:focus {\n        box-shadow: none !important;\n    }\n    \n    .bootstrap5 .customToolbar .e-toolbar-item.e-template .e-dropdown-btn {\n        color: #6c757d !important;\n    }\n    \n    .bootstrap4 .customToolbar .e-toolbar-item.e-template .e-dropdown-btn {\n        color: rgb(73, 80, 87) !important;\n    }\n    \n    .bootstrap5-dark .customToolbar .e-toolbar-item.e-template .e-dropdown-btn:hover,\n    .bootstrap5-dark .customToolbar .e-toolbar-item.e-template .e-dropdown-btn:focus,\n    .material3-dark .customToolbar .e-toolbar-item.e-template .e-dropdown-btn:hover,\n    .material3-dark .customToolbar .e-toolbar-item.e-template .e-dropdown-btn:focus,\n    .tailwind-dark .customToolbar .e-toolbar-item.e-template .e-dropdown-btn:hover,\n    .tailwind-dark .customToolbar .e-toolbar-item.e-template .e-dropdown-btn:focus,\n    .highcontrast .customToolbar .e-toolbar-item.e-template .e-dropdown-btn:hover,\n    .highcontrast .customToolbar .e-toolbar-item.e-template .e-dropdown-btn:focus {\n        color: #fff !important;\n    }\n    \n    .highcontrast .customToolbar .e-free-pen::before {\n        content: \"\\e739\";\n    }\n    \n    .highcontrast .customToolbar .e-toolbar-item.e-template .e-dropdown-btn.e-btn.e-active {\n        color: #fff !important;\n    }\n    \n    .material .customToolbar .e-free-pen::before,\n    .material-dark .customToolbar .e-free-pen::before,\n    .fabric .customToolbar .e-free-pen::before,\n    .fabric-dark .customToolbar .e-free-pen::before {\n        content: \"\\e737\";\n    }\n    \n    .bootstrap .customToolbar .e-free-pen::before,\n    .bootstrap-dark .customToolbar .e-free-pen::before {\n        content: \"\\e767\";\n    }\n    \n    .bootstrap4 .customToolbar .e-free-pen::before {\n        content: \"\\e756\";\n    }\n    \n    .bootstrap5 .customToolbar .e-fill.e-template .e-caret::before,\n    .bootstrap-dark .customToolbar .e-fill.e-template .e-caret::before,\n    .bootstrap5 .customToolbar .e-stroke.e-template .e-caret::before,\n    .bootstrap-dark .customToolbar .e-stroke.e-template .e-caret::before,\n    .bootstrap5 .customToolbar .e-text-font-color.e-template .e-caret::before,\n    .bootstrap-dark .customToolbar .e-text-font-color.e-template .e-caret::before {\n        font-size: 14px;\n    }\n    \n    .material .customToolbar .e-fill.e-template .e-caret::before,\n    .material-dark .customToolbar .e-fill.e-template .e-caret::before,\n    .fabric .customToolbar .e-fill.e-template .e-caret::before,\n    .fabric-dark .customToolbar .e-fill.e-template .e-caret::before,\n    .bootstrap .customToolbar .e-fill.e-template .e-caret::before,\n    .bootstrap-dark .customToolbar .e-fill.e-template .e-caret::before,\n    .highcontrast .customToolbar .e-fill.e-template .e-caret::before {\n        content: \"\\e35c\" !important;\n        font-size: 14px;\n    }\n    \n    .material .customToolbar .e-stroke.e-template .e-caret::before,\n    .material-dark .customToolbar .e-stroke.e-template .e-caret::before,\n    .material .customToolbar .e-text-font-color.e-template .e-caret::before,\n    .material-dark .customToolbar .e-text-font-color.e-template .e-caret::before {\n        content: \"\\ec15\";\n        font-size: 14px;\n    }\n    \n    .fabric .customToolbar .e-stroke.e-template .e-caret::before,\n    .fabric-dark .customToolbar .e-stroke.e-template .e-caret::before,\n    .fabric .customToolbar .e-text-font-color.e-template .e-caret::before,\n    .fabric-dark .customToolbar .e-text-font-color.e-template .e-caret::before {\n        content: \"\\ebee\";\n        font-size: 14px;\n    }\n    \n    .bootstrap .customToolbar .e-stroke.e-template .e-caret::before,\n    .bootstrap-dark .customToolbar .e-stroke.e-template .e-caret::before,\n    .bootstrap .customToolbar .e-text-font-color.e-template .e-caret::before,\n    .bootstrap-dark .customToolbar .e-text-font-color.e-template .e-caret::before {\n        content: \"\\ebc6\" !important;\n        font-size: 14px !important;\n    }\n    \n    .highcontrast .customToolbar .e-stroke.e-template .e-caret::before,\n    .highcontrast .customToolbar .e-text-font-color.e-template .e-caret::before {\n        content: \"\\eb6e\" !important;\n        font-size: 14px !important;\n    }\n\n    .customToolbar .e-image-editor {\n        border: none !important;\n    }\n\n    .fluent2-dark .customToolbar .e-toolbar .e-toolbar-items .e-tbar-pos .e-toolbar-center,\n    .fluent2 .customToolbar .e-toolbar .e-toolbar-items.e-tbar-pos .e-toolbar-center {\n        margin: 0 auto !important; /* stylelint-disable-line declaration-no-important */\n    }\n\n    .fluent2 .customToolbar .e-toolbar {\n        border: 1px solid #80808054 !important;\n    }\n\n    .fluent2-dark .customToolbar .e-toolbar {\n        border: 1px solid #ffffff30 !important;\n    }\n\n    .fluent2 .customToolbar #top-toolbar .e-toolbar-center,\n    .fluent2 .customToolbar #bottom-toolbar .e-toolbar-center,\n    .fluent2-dark .customToolbar #top-toolbar .e-toolbar-center,\n    .fluent2-dark .customToolbar #bottom-toolbar .e-toolbar-center{\n        margin: 0 auto !important;\n    }\n\n    .fluent2-dark .customToolbar #bottom-toolbar {\n\t    border: none !important;\n    }\n\n    .fluent2 .customToolbar #bottom-toolbar {\n\t    border: none !important;\n    }\n</style>\n\n</div></body></html>","package.json":"{\n  \"@syncfusion/ej2-base\": \"*\",\n  \"markdown-spellcheck\": \"^1.3.1\",\n  \"@syncfusion/ej2-buttons\": \"*\",\n  \"@syncfusion/ej2-dropdowns\": \"*\",\n  \"@syncfusion/ej2-inputs\": \"*\",\n  \"@syncfusion/ej2-navigations\": \"*\",\n  \"@syncfusion/ej2-popups\": \"*\",\n  \"@syncfusion/ej2-splitbuttons\": \"*\",\n  \"@syncfusion/ej2-image-editor\": \"*\",\n  \"@syncfusion/ej2-icons\": \"*\",\n  \"@syncfusion/ej2-data\": \"*\",\n  \"@syncfusion/ej2-lists\": \"*\",\n  \"@syncfusion/ej2/base\": \"*\",\n  \"@types/crossroads\": \"0.0.28\",\n  \"@types/signals\": \"0.0.16\",\n  \"@types/moment-timezone\": \"^0.5.3\",\n  \"@types/hasher\": \"0.0.27\",\n  \"fuse.js\": \"^3.2.0\",\n  \"marked\": \"5.1.2\",\n  \"codemirror\": \"^5.37.0\",\n  \"crossroads\": \"^0.12.2\",\n  \"@types/marked\": \"5.0.1\",\n  \"@types/codemirror\": \"0.0.56\",\n  \"@types/es6-promise\": \"0.0.28\",\n  \"hasher\": \"^1.2.0\",\n  \"moment-timezone\": \"^0.5.14\"\n}","index.ts":"{{ripple}}\nimport { Fab } from '@syncfusion/ej2-buttons';\nimport { ImageEditor, ImageFilterOption, ShapeChangeEventArgs, ShapeSettings, ShapeType } from '@syncfusion/ej2-image-editor'\nimport { Browser, EventHandler, getComponent, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { ColorPicker, ColorPickerEventArgs, ColorPickerMode, Dimension } from '@syncfusion/ej2-inputs';\nimport { ItemModel, MenuEventArgs, OpenCloseMenuEventArgs, Toolbar, ClickEventArgs as ToolbarClickEventArgs } from '@syncfusion/ej2-navigations';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { ItemModel as DropDownButtonItemModel } from '@syncfusion/ej2-splitbuttons';\nimport { extend } from '@syncfusion/ej2/base';\n\n\n/**\n * Default image editor sample\n */\n// tslint:disable-next-line\n\n    \n    const image: HTMLImageElement = document.getElementById('previewImgContainer') as HTMLImageElement;\n    if (Browser.isDevice && image) {\n        image.src = '//npmci.syncfusion.com/development/demos/src/image-editor/images/flower.png';\n    }\n    let currentToolbar: string = 'main';\n    let activeObjIndex: string;\n    let tempShapeSettings: ShapeSettings;\n    let isShapeCustomizing: boolean = false;\n    let isTextEditing: boolean = false;\n    let isShapeSelected: boolean = false;\n    let filter: ImageFilterOption = ImageFilterOption.Default;\n    let imageData: ImageData;\n    const presetColors: { [key: string]: string[]; } = {\n        'custom': ['#ffffff', '#000000', '#e91e63', '#9c27b0', '#673ab7', '#2196f3', '#03a9f4', '#00bcd4',\n        '#009688', '#8bc34a', '#cddc39', '#ffeb3b']\n    };\n    const toolbars: any = ['filter', 'rectangle', 'ellipse', 'line', 'text', 'edittext', 'freehanddraw'];\n    EventHandler.add(document, 'keydown', keyDownEventHandler, this);\n    EventHandler.add(document.getElementById('image-editor-container'), 'dblclick', doubleClickEvent, this);\n\n    let button: Fab = new Fab({\n        iconCss: 'e-icons e-edit',\n        position: 'BottomRight',\n        target: '.image-preview-container',\n        isPrimary: true,\n        content: 'Edit Image'\n    });\n    button.appendTo('#edit');\n    button.element.setAttribute('title', 'Edit');\n\n    let imageEditorObj: ImageEditor;\n    imageEditorObj = new ImageEditor({\n        theme: 'Material',\n        toolbar: [],\n        showQuickAccessToolbar: false,\n        shapeChanging: (args: ShapeChangeEventArgs) => {\n            if (args.action === 'select') {\n                isShapeSelected = true;\n                updateToolbar(args, true);\n            } else if (args.action === 'insert') {\n                activeObjIndex = args.currentShapeSettings.id;\n                tempShapeSettings = args.currentShapeSettings;\n            }\n        },\n        shapeChange: (args: ShapeChangeEventArgs) => {\n            if (args.action === 'apply' && !isShapeCustomizing && !isShapeSelected) {\n                isTextEditing = false;\n                setTimeout(function() {\n                    refreshToolbar('main');\n                }, 1);\n            }\n        },\n        click: () => {\n            if (toolbars.indexOf(currentToolbar) !== -1) {\n                refreshToolbar('main');\n            }\n        },\n        fileOpened: () => {\n            imageData = imageEditorObj.getImageData();\n        },\n        zoomSettings: {minZoomFactor: 0.1, maxZoomFactor: 50}\n    });\n    imageEditorObj.appendTo('#imageEditor');\n\n    let toolbarObj: Toolbar = new Toolbar({\n        items: [\n            {\n                id: 'cancel', prefixIcon: 'e-icons e-close', tooltipText: 'Cancel', align: 'Center' },\n            {\n                id: 'undo', prefixIcon: 'e-icons e-undo', tooltipText: 'Undo', align: 'Center', disabled: true },\n            {\n                id: 'redo', prefixIcon: 'e-icons e-redo', tooltipText: 'Redo', align: 'Center', disabled: true },\n            {\n                id: 'ok', prefixIcon: 'e-icons e-save', tooltipText: 'Save', align: 'Center' },\n        ],\n        clicked: toolbarClicked.bind(this),\n        created: () => {\n            const toolbarArea: HTMLElement = document.getElementById('top-toolbar');\n            toolbarArea.style.left = (toolbarArea.parentElement.parentElement.clientWidth / 2) - (toolbarArea.clientWidth / 2) + 'px';\n        }\n    });\n    toolbarObj.appendTo('#top-toolbar');\n\n    toolbarObj = new Toolbar({\n        items: [\n            {\n                id: 'cropAndTransform', prefixIcon: 'e-icons e-crop', tooltipText: 'Crop and Transform', align: 'Center' },\n            {\n                id: 'back', prefixIcon: 'e-icons e-arrow-left', tooltipText: 'Back', align: 'Center', visible: false },\n            {\n                id: 'rotateLeft', prefixIcon: 'e-icons e-transform-left', tooltipText: 'Rotate Left', align: 'Center', visible: false },\n            {\n                id: 'rotateRight', prefixIcon: 'e-icons e-transform-right', tooltipText: 'Rotate Right', align: 'Center', visible: false },\n            {\n                id: 'addText', prefixIcon: 'e-icons e-text-annotation', tooltipText: 'Text', align: 'Center' },\n            {\n                id: 'fontColor', cssClass: 'top-icon e-text-fontColor', tooltipText: 'Font Color', align: 'Center', visible: false,\n                type: 'Input', template: '<button id=\"' + 'imageEditor_fontColorBtn\"></button>' },\n            {\n                id: 'shapes', prefixIcon: 'e-icons e-shapes', tooltipText: 'Annotations', align: 'Center',\n                template: '<button id=\"' + 'imageEditor_annotationButton\"></button>' },\n            {\n                id: 'fillColor', prefixIcon: 'e-icons e-copy', cssClass: 'top-icon e-fill', tooltipText: 'Fill Color', align: 'Center', visible: false,\n                type: 'Input', template: '<button id=\"' + 'imageEditor_fillColorBtn\"></button>' },\n            {\n                id: 'strokeColor', prefixIcon: 'e-icons e-copy', cssClass: 'top-icon e-stroke', tooltipText: 'Stroke Color', align: 'Center', visible: false,\n                type: 'Input', template: '<button id=\"' + 'imageEditor_borderColorBtn\"></button>' },\n            {\n                id: 'penStrokeColor', prefixIcon: 'e-icons e-copy', cssClass: 'top-icon e-pen-stroke-color',\n                tooltipText: 'Stroke Color', align: 'Center', visible: false,\n                type: 'Input', template: '<button id=\"' + 'imageEditor_penColorBtn\"></button>' },\n            {\n                id: 'remove', prefixIcon: 'e-icons e-trash', tooltipText: 'Remove', align: 'Center', visible: false, disabled: false },\n            {\n                id: 'editText', prefixIcon: 'e-icons e-annotation-edit', cssClass: 'top-icon e-annotation-edit',\n                tooltipText: 'Edit Text', align: 'Center', visible: false, disabled: false },\n            {\n                id: 'addPen', prefixIcon: 'e-icons e-free-pen', tooltipText: 'Pen', align: 'Center' },\n            {\n                id: 'filters', prefixIcon: 'e-icons e-filters', tooltipText: 'Filters', align: 'Center' }\n        ],\n        created: () => {\n            renderAnnotationBtn(); createFontColor();\n            createShapeColor(); createPenColor();\n            const toolbarArea: HTMLElement = document.getElementById('bottom-toolbar');\n            toolbarArea.style.left = (toolbarArea.parentElement.parentElement.clientWidth / 2) - (toolbarArea.clientWidth / 2) + 'px';\n        },\n        clicked: toolbarClicked.bind(this)\n    });\n    toolbarObj.appendTo('#bottom-toolbar');\n\n    document.getElementById('edit').onclick = function() {\n        document.getElementById('imagePreviewContainer').style.display = 'none';\n        document.getElementById('image-editor-container').style.display = 'block';\n        imageEditorObj.open((document.getElementById('previewImgContainer') as HTMLImageElement).src);\n        let toolbarArea: HTMLElement = document.getElementById('top-toolbar');\n        toolbarArea.style.left = (toolbarArea.parentElement.parentElement.clientWidth / 2) - (toolbarArea.clientWidth / 2) + 'px';\n        toolbarArea = document.getElementById('bottom-toolbar');\n        toolbarArea.style.left = (toolbarArea.parentElement.parentElement.clientWidth / 2) - (toolbarArea.clientWidth / 2) + 'px';\n        refreshToolbar('main');\n    };\n\n\n    function toolbarClicked(args: ToolbarClickEventArgs): void {\n        const item: string = args.item.id.toLowerCase();\n        const dimension: Dimension = imageEditorObj.getImageDimension();\n        let imageData: ImageData; let canvas: HTMLCanvasElement;\n        switch (item) {\n        case 'back':\n            apply();\n            refreshToolbar('main');\n            break;\n        case 'cancel':\n            isTextEditing = false;\n            if (currentToolbar === 'main') {\n                document.getElementById('image-editor-container').style.display = 'none';\n                (document.getElementById('imagePreviewContainer') as HTMLElement).style.display = 'block';\n                imageEditorObj.reset();\n            } else {\n                if ((isShapeCustomizing || isShapeSelected) && tempShapeSettings && tempShapeSettings.id) {\n                    imageEditorObj.updateShape(tempShapeSettings);\n                }\n                imageEditorObj.clearSelection(true);\n                refreshToolbar('main');\n            }\n            break;\n        case 'undo':\n            if (currentToolbar === 'pen') {\n                imageEditorObj.freeHandDraw(false);\n            }\n            isTextEditing = false;\n            imageEditorObj.undo();\n            refreshToolbar('main');\n            break;\n        case 'redo':\n            if (currentToolbar === 'pen') {\n                imageEditorObj.freeHandDraw(false);\n            }\n            isTextEditing = false;\n            imageEditorObj.redo();\n            refreshToolbar('main');\n            break;\n        case 'ok':\n            isTextEditing = false;\n            if (currentToolbar === 'main') {\n                imageData = imageEditorObj.getImageData();\n                canvas = document.createElement('canvas');\n                canvas.width = imageData.width; canvas.height = imageData.height;\n                canvas.getContext('2d').putImageData(imageData, 0, 0);\n                (document.getElementById('previewImgContainer') as HTMLImageElement).src = canvas.toDataURL();\n                imageEditorObj.open(imageData);\n                document.getElementById('image-editor-container').style.display = 'none';\n                (document.getElementById('imagePreviewContainer') as HTMLElement).style.display = 'block';\n            } else {\n                apply();\n                refreshToolbar('main');\n            }\n            break;\n        case 'cropandtransform':\n            imageEditorObj.select('custom');\n            refreshToolbar('crop');\n            break;\n        case 'rotateleft':\n            imageEditorObj.rotate(-90);\n            break;\n        case 'rotateright':\n            imageEditorObj.rotate(90);\n            break;\n        case 'addtext':\n            imageEditorObj.drawText(dimension.x + (dimension.width / 2) - 65, dimension.y + (dimension.height / 2) - 15, 'Add Text',\n                                    'Arial', 30, false, false, '#fff', true);\n            isShapeSelected = true;\n            refreshToolbar('text');\n            break;\n        case 'remove':\n            if (isNullOrUndefined(activeObjIndex) && tempShapeSettings && tempShapeSettings.id) {\n                activeObjIndex = tempShapeSettings.id;\n            }\n            if (isTextEditing) {\n                tempShapeSettings = imageEditorObj.getShapeSetting(activeObjIndex);\n                activeObjIndex = tempShapeSettings.id;\n            }\n            imageEditorObj.deleteShape(activeObjIndex);\n            refreshToolbar('main');\n            break;\n        case 'edittext':\n            isTextEditing = true;\n            imageEditorObj.enableTextEditing();\n            refreshToolbar('edittext');\n            break;\n        case 'addpen':\n            imageEditorObj.freeHandDraw(true);\n            refreshToolbar('pen');\n            break;\n        case 'filters':\n            refreshToolbar('filter');\n            break;\n        }\n    }\n\n    function refreshToolbar(type: string, isEvent?: boolean): void {\n        const toolbar: Toolbar = getComponent('bottom-toolbar', 'toolbar') as Toolbar;\n        let items: string[] = []; let filterToolbar: Toolbar; let itemModel: ItemModel[];\n        const dimension: Dimension = imageEditorObj.getImageDimension();\n        document.getElementById('filter-toolbar').style.display = 'none'; currentToolbar = type;\n        switch (type) {\n        case 'main':\n            items = ['cropAndTransform', 'addText', 'shapes', 'addPen', 'filters'];\n            break;\n        case 'crop':\n            items = ['rotateLeft', 'rotateRight'];\n            break;\n        case 'text':\n        case 'edittext':\n            items = ['back', 'fontColor', 'remove', 'editText'];\n            break;\n        case 'rectangle':\n            items = ['back', 'fillColor', 'strokeColor', 'remove'];\n            if (!isEvent) {\n                imageEditorObj.drawRectangle(dimension.x + (dimension.width / 2) - 100, dimension.y + (dimension.height / 2) - 50,\n                                            200, 100, 2, '#fff', null, null, true);\n                isShapeSelected = true;\n            }\n            break;\n        case 'ellipse':\n            items = ['back', 'fillColor', 'strokeColor', 'remove'];\n            if (!isEvent) {\n                imageEditorObj.drawEllipse(dimension.x + (dimension.width / 2) - 100, dimension.y + (dimension.height / 2) - 50,\n                                        100, 50, 2, '#fff', null, null, true);\n                isShapeSelected = true;\n            }\n            break;\n        case 'line':\n            items = ['back', 'strokeColor', 'remove'];\n            if (!isEvent) {\n                imageEditorObj.drawLine(dimension.x + (dimension.width / 2) - 200, dimension.y + (dimension.height / 2) - 100,\n                                        dimension.x + (dimension.width / 2) + 200, dimension.y + (dimension.height / 2) + 100, 2, '#fff', true);\n                isShapeSelected = true;\n            }\n            break;\n        case 'pen':\n        case 'freehanddraw':\n            items = ['back', 'penStrokeColor', 'remove'];\n            break;\n        case 'filter':\n            document.getElementById('filter-toolbar').style.display = 'block';\n            itemModel = [\n                {\n                    id: 'default', tooltipText: 'Default', align: 'Center',\n                    template: '<div class=\"filter-wrapper\" style=\"box-sizing: content-box;\"><canvas id=' + 'imageEditor_defaultCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + 'Default' + '</span></div></div>' },\n                {\n                    id: 'chrome', tooltipText: 'Chrome', align: 'Center',\n                    template: '<div class=\"filter-wrapper\" style=\"box-sizing: content-box;\"><canvas id=' + 'imageEditor_chromeCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + 'Chrome' + '</span></div></div>' },\n                {\n                    id: 'cold', tooltipText: 'Cold', align: 'Center',\n                    template: '<div class=\"filter-wrapper\" style=\"box-sizing: content-box;\"><canvas id=' + 'imageEditor_coldCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + 'Cold' + '</span></div></div>' },\n                {\n                    id: 'warm', tooltipText: 'Warm', align: 'Center',\n                    template: '<div class=\"filter-wrapper\" style=\"box-sizing: content-box;\"><canvas id=' + 'imageEditor_warmCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + 'Warm' + '</span></div></div>' },\n                {\n                    id: 'grayscale', tooltipText: 'Grayscale', align: 'Center',\n                    template: '<div class=\"filter-wrapper\" style=\"box-sizing: content-box;\"><canvas id=' + 'imageEditor_grayscaleCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + 'Grayscale' + '</span></div></div>' },\n                {\n                    id: 'sepia', tooltipText: 'Sepia', align: 'Center',\n                    template: '<div class=\"filter-wrapper\" style=\"box-sizing: content-box;\"><canvas id=' + 'imageEditor_sepiaCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + 'Sepia' + '</span></div></div>' },\n                {\n                    id: 'invert', tooltipText: 'Invert', align: 'Center',\n                    template: '<div class=\"filter-wrapper\" style=\"box-sizing: content-box;\"><canvas id=' + 'imageEditor_invertCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + 'Invert' + '</span></div></div>' }\n            ];\n            if (document.querySelector('#' + 'filter-toolbar').classList.contains('e-control')) {\n                createCanvasFilter();\n            } else {\n                filterToolbar = new Toolbar({\n                    width: '100%',\n                    items: itemModel,\n                    clicked: (args: ToolbarClickEventArgs) => {\n                        filterImage(args.item.id as ImageFilterOption);\n                    },\n                    created: () => {\n                        createCanvasFilter();\n                        filterToolbar.refreshOverflow();\n                    }\n                });\n                filterToolbar.appendTo('#filter-toolbar');\n            }\n            items = ['default', 'chrome', 'cold', 'warm', 'grayscale', 'sepia', 'invert'];\n            break;\n        }\n        for (let i: number = 0; i < toolbar.items.length; i++) {\n            if (items.indexOf(toolbar.items[i as number].id) !== -1) {\n                toolbar.items[i as number].visible = true;\n                if (toolbar.items[i as number].id.toLowerCase() === 'edittext') {\n                    if (type === 'edittext') {\n                        toolbar.items[i as number].disabled = true;\n                        setTimeout(function() {\n                            (document.querySelector('.e-textarea') as HTMLInputElement).focus();\n                        }, 1);\n                    } else {\n                        toolbar.items[i].disabled = false;\n                    }\n                }\n            } else {\n                toolbar.items[i as number].visible = false;\n            }\n            if (toolbar.items[i as number].id === 'remove') {\n                if (type === 'pen') {\n                    toolbar.items[i as number].disabled = true;\n                } else {\n                    toolbar.items[i as number].disabled = false;\n                }\n            }\n        }\n        const enableUndo: boolean = imageEditorObj.canUndo();\n        const enableRedo: boolean = imageEditorObj.canRedo();\n        const topToolbar: Toolbar = getComponent('top-toolbar', 'toolbar') as Toolbar;\n        for (let i: number = 0; i < topToolbar.items.length; i++) {\n            if (topToolbar.items[i as number].id === 'undo') {\n                topToolbar.items[i as number].disabled = !enableUndo;\n            } else if (topToolbar.items[i as number].id === 'redo') {\n                topToolbar.items[i as number].disabled = !enableRedo;\n            } else if (topToolbar.items[i as number].id === 'ok') {\n                if (currentToolbar === 'main') {\n                    topToolbar.items[i as number].visible = true;\n                    topToolbar.items[i as number].tooltipText = 'Save';\n                    topToolbar.items[i as number].prefixIcon = 'e-icons e-save';\n                } else if (currentToolbar === 'crop' || currentToolbar === 'filter') {\n                    topToolbar.items[i as number].visible = true;\n                    topToolbar.items[i as number].tooltipText = 'Apply';\n                    topToolbar.items[i as number].prefixIcon = 'e-icons e-check-tick';\n                } else {\n                    topToolbar.items[i as number].visible = false;\n                }\n            \n            } else if (topToolbar.items[i as number].id === 'cancel') {\n                if (currentToolbar === 'main' || currentToolbar === 'crop') {\n                    topToolbar.items[i as number].visible = true;\n                } else {\n                    topToolbar.items[i as number].visible = false;\n                }\n            }\n        }\n        setTimeout(() => {\n            let toolbarArea: HTMLElement = document.getElementById('bottom-toolbar');\n            toolbarArea.style.left = (toolbarArea.parentElement.parentElement.clientWidth / 2) - (toolbarArea.clientWidth / 2) + 'px';\n            toolbarArea = document.getElementById('top-toolbar');\n            toolbarArea.style.left = (toolbarArea.parentElement.parentElement.clientWidth / 2) - (toolbarArea.clientWidth / 2) + 'px';\n        }, 1);\n    }\n\n    function updateToolbar(args: ShapeChangeEventArgs, isEvent?: boolean): void {\n        const type: string = args.currentShapeSettings.type.toLowerCase();\n        refreshToolbar(type, isEvent);\n        if (isEvent) {\n            tempShapeSettings = args.currentShapeSettings;\n            activeObjIndex = tempShapeSettings.id;\n        }\n        setTimeout(() => {\n            const selFillElem: HTMLElement = document.querySelector('.e-fill.e-template .e-dropdownbtn-preview') as HTMLElement;\n            const selStrokeElem: HTMLElement = document.querySelector('.e-stroke.e-template .e-dropdownbtn-preview') as HTMLElement;\n            const selTextStrokeElem: HTMLElement = document.querySelector('#imageEditor_fontColorBtn .e-dropdownbtn-preview') as HTMLElement;\n            const selPenStrokeElem: HTMLElement = document.querySelector('.e-pen-stroke-color.e-template .e-dropdownbtn-preview') as HTMLElement;\n            if (selFillElem && (type === 'rectangle' || type === 'ellipse')) {\n                if (args.currentShapeSettings.fillColor === '') {\n                    selFillElem.classList.add('e-nocolor-item');\n                } else {\n                    selFillElem.classList.remove('e-nocolor-item');\n                    selFillElem.style.background = args.currentShapeSettings.fillColor;\n                }\n                if (document.querySelector('#' + 'imageEditor_shapeFill')) {\n                    (getComponent('imageEditor_shapeFill', 'colorpicker') as ColorPicker).value = args.currentShapeSettings.fillColor;\n                }\n            }\n            if (selStrokeElem && (type === 'rectangle' || type === 'ellipse' || type === 'line')) {\n                selStrokeElem.style.background = args.currentShapeSettings.strokeColor;\n                if (document.querySelector('#' + 'imageEditor_shapeStroke')) {\n                    (getComponent('imageEditor_shapeStroke', 'colorpicker') as ColorPicker).value = args.currentShapeSettings.strokeColor;\n                }\n            }\n            if (selTextStrokeElem && type === 'text') {\n                selTextStrokeElem.style.background = args.currentShapeSettings.color;\n                if (document.querySelector('#' + 'imageEditor_textFont')) {\n                    (getComponent('imageEditor_textFont', 'colorpicker') as ColorPicker).value = args.currentShapeSettings.color;\n                }\n            }\n            if (selPenStrokeElem && type === 'freehanddraw') {\n                selPenStrokeElem.style.background = args.currentShapeSettings.strokeColor;\n                if (document.querySelector('#' + 'imageEditor_penStroke')) {\n                    (getComponent('imageEditor_penStroke', 'colorpicker') as ColorPicker).value = args.currentShapeSettings.strokeColor;\n                }\n            }\n        }, 10);\n    }\n\n    function toPascalCase(text: string): string {\n        return text.charAt(0).toUpperCase() + text.slice(1);\n    }\n\n    function filterImage(type: ImageFilterOption): void {\n        imageEditorObj.applyImageFilter(type);\n        filter = type;\n    }\n\n    function renderDropDownButton(id: string, items: DropDownButtonItemModel[], iconCss: string, cssClass: string,\n                                popup: boolean): void {\n        iconCss = iconCss === '' ? '' : 'e-icons ' + iconCss;\n        const drpDownBtn: DropDownButton = new DropDownButton({ items: items, iconCss: iconCss, cssClass: cssClass,\n            createPopupOnClick: popup,\n            open: (args: OpenCloseMenuEventArgs) => {\n                if (Browser.isDevice) {\n                    args.element.parentElement.style.top = drpDownBtn.element.getBoundingClientRect().top - args.element.parentElement.offsetHeight + 'px';\n                }\n            },\n            select: (args: MenuEventArgs) => {\n                refreshToolbar(args.item.id);\n            }\n        });\n        drpDownBtn.appendTo('#' + id);\n    }\n\n    function renderColorPicker(type: string, id: string, value: string, cssClass: string,\n                            noColor: boolean, mode: ColorPickerMode, inline: boolean, showButtons: boolean,\n                            target: string, iconCss: string, ddbCssClass: string, ddbId: string, dropdownPreview: string, colors: {[key: string]: string[];}): void {\n        const colorpicker: ColorPicker = new ColorPicker({\n            modeSwitcher: false, noColor: noColor, value: value, inline: inline,\n            showButtons: showButtons, mode: mode, cssClass: cssClass,\n            presetColors: colors,\n            columns: 4,\n            change: (args: ColorPickerEventArgs): void => {\n                isShapeCustomizing = true;\n                if (type === 'pen-color') {\n                    if (tempShapeSettings && tempShapeSettings.id && tempShapeSettings.id.split('_')[0] === 'pen') {\n                        const shapeSetting: ShapeSettings = {id: tempShapeSettings.id, type: ShapeType.FreehandDraw,\n                            startX: tempShapeSettings.startX, startY: tempShapeSettings.startY,\n                            strokeColor: args.currentValue.hex, strokeWidth: tempShapeSettings.strokeWidth,\n                            opacity: tempShapeSettings.opacity, points: tempShapeSettings.points };\n                        imageEditorObj.updateShape(shapeSetting, true);\n                        tempShapeSettings.strokeColor = args.currentValue.hex;\n                        isShapeSelected = true;\n                    } else {\n                        const shapeSetting: ShapeSettings = {id: null, type: ShapeType.FreehandDraw, startX: null, startY: null,\n                            strokeColor: args.currentValue.hex};\n                        imageEditorObj.updateShape(shapeSetting);\n                    }\n                } else {\n                    const shapeSetting: ShapeSettings = imageEditorObj.getShapeSetting(activeObjIndex);\n                    if (type === 'font-color') {\n                        shapeSetting.color = args.value;\n                    } else if (type === 'shape-fill') {\n                        shapeSetting.fillColor = args.value;\n                    } else if (type === 'shape-stroke') {\n                        shapeSetting.strokeColor = args.value;\n                    }\n                    tempShapeSettings = shapeSetting;\n                    imageEditorObj.updateShape(shapeSetting, true);\n                    isShapeSelected = true;\n                    if (isTextEditing) {\n                        imageEditorObj.enableTextEditing();\n                    }\n                }\n                isShapeCustomizing = false;\n                if (type === 'shape-fill') {\n                    if (args.currentValue.rgba === '') {\n                        (dropdownBtn.element.children[0] as HTMLElement).classList.add('e-nocolor-item');\n                    } else {\n                        (dropdownBtn.element.children[0] as HTMLElement).classList.remove('e-nocolor-item');\n                        (dropdownBtn.element.children[0] as HTMLElement).style.backgroundColor = args.currentValue.rgba;\n                    }\n                } else {\n                    (dropdownBtn.element.children[0] as HTMLElement).style.backgroundColor = args.currentValue.rgba;\n                }\n                dropdownBtn.toggle();\n            },\n            beforeClose: (): void => {\n                dropdownBtn.toggle();\n            }\n        }, '#' + id);\n        const dropdownBtn: DropDownButton = new DropDownButton({\n            open: (args: OpenCloseMenuEventArgs) => {\n                const parenElem: HTMLElement = args.element.parentElement;\n                if (Browser.isDevice) {\n                    parenElem.style.top = dropdownBtn.element.getBoundingClientRect().top -\n                    parenElem.offsetHeight + 'px';\n                    parenElem.style.left = args.element.parentElement.offsetLeft + 'px';\n                }\n            },\n            target: target,\n            iconCss: iconCss,\n            cssClass: ddbCssClass\n        }, '#' + ddbId);\n        colorpicker.inline = true;\n        colorpicker.value = colorpicker.getValue(colorpicker.value, 'rgba');\n        if (type === 'shape-fill') {\n            (document.querySelector(dropdownPreview) as HTMLElement).classList.add('e-nocolor-item');\n        } else {\n            (document.querySelector(dropdownPreview) as HTMLElement).style.background = colorpicker.value;\n        }\n    }\n\n    function renderAnnotationBtn(): void {\n        const items: DropDownButtonItemModel[] = [\n            { text: 'Rectangle', id: 'rectangle', iconCss: 'e-icons e-rectangle' },\n            { text: 'Ellipse', id: 'ellipse', iconCss: 'e-icons e-circle' },\n            { text: 'Line', id: 'line', iconCss: 'e-icons e-line' }\n        ];\n        renderDropDownButton('imageEditor' + '_annotationButton', items, 'e-shapes', 'e-image-popup', false);\n    }\n\n    function createFontColor(): void {\n        document.querySelector('.e-template.e-text-fontColor').appendChild(imageEditorObj.createElement('input', {\n            id: 'imageEditor_textFont'\n        }));\n        renderColorPicker('font-color', 'imageEditor_textFont', tempShapeSettings && tempShapeSettings.color != null ? tempShapeSettings.color : '#fff', 'e-text-font-color', false, 'Palette', true, false, '.e-text-font-color',\n                        'e-dropdownbtn-preview', 'e-ie-ddb-popup', 'imageEditor_fontColorBtn', '.e-text-fontColor.e-template .e-dropdownbtn-preview', presetColors);\n    }\n\n    function createShapeColor(): void {\n        const parent: ImageEditor = imageEditorObj; const id: string = 'imageEditor';\n        document.querySelector('.e-template.e-fill').appendChild(parent.createElement('input', {\n            id: id + '_shapeFill'\n        }));\n        const colors: {[key: string]: string[]} = extend({}, presetColors, {}, true) as {[key: string]: string[]};\n        colors['custom'][0] = '';\n        document.querySelector('.e-template.e-stroke').appendChild(parent.createElement('input', {\n            id: id + '_shapeStroke'\n        }));\n        renderColorPicker('shape-fill', 'imageEditor_shapeFill', '', 'e-shape-fill-color', true, 'Palette', true, false, '.e-shape-fill-color',\n                        'e-dropdownbtn-preview', 'e-ie-ddb-popup', 'imageEditor_fillColorBtn', '.e-fill.e-template .e-dropdownbtn-preview', colors);\n        renderColorPicker('shape-stroke', 'imageEditor_shapeStroke', '#fff', 'e-shape-stroke-color', false, 'Palette', true, false, '.e-shape-stroke-color',\n                        'e-dropdownbtn-preview', 'e-ie-ddb-popup', 'imageEditor_borderColorBtn', '.e-stroke.e-template .e-dropdownbtn-preview', presetColors);\n    }\n\n    function createPenColor(): void {\n        const parent: ImageEditor = imageEditorObj; const id: string = 'imageEditor';\n        document.querySelector('.e-template.e-pen-stroke-color').appendChild(parent.createElement('input', {\n            id: id + '_pen_stroke'\n        }));\n        renderColorPicker('pen-color', 'imageEditor_pen_stroke', '#fff', 'e-pen-color', false, 'Palette', true, false, '.e-pen-color',\n                        'e-dropdownbtn-preview', 'e-ie-ddb-popup', 'imageEditor_penColorBtn', '.e-pen-stroke-color.e-template .e-dropdownbtn-preview', presetColors);\n    }\n\n    function createCanvasFilter(): void {\n        const inMemoryCanvas: HTMLCanvasElement = document.createElement('canvas');\n        const inMemoryContext: CanvasRenderingContext2D = inMemoryCanvas.getContext('2d');\n        inMemoryCanvas.width = imageData.width; inMemoryCanvas.height = imageData.height;\n        inMemoryContext.putImageData(imageData, 0, 0);\n        updateFilterCanvas('_defaultCanvas', 'default', inMemoryCanvas);\n        updateFilterCanvas('_chromeCanvas', 'chrome', inMemoryCanvas);\n        updateFilterCanvas('_coldCanvas', 'cold', inMemoryCanvas);\n        updateFilterCanvas('_warmCanvas', 'warm', inMemoryCanvas);\n        updateFilterCanvas('_grayscaleCanvas', 'grayscale', inMemoryCanvas);\n        updateFilterCanvas('_sepiaCanvas', 'sepia', inMemoryCanvas);\n        updateFilterCanvas('_invertCanvas', 'invert', inMemoryCanvas);\n    }\n\n    function updateFilterCanvas(selector: string, type: string, inMemoryCanvas: HTMLCanvasElement): void {\n        const filter: HTMLCanvasElement = document.querySelector('#imageEditor' + selector);\n        if (filter) {\n            let ctx: CanvasRenderingContext2D = filter.getContext('2d');\n            ctx = filter.getContext('2d');\n            filter.style.width = '100px'; filter.style.height = '100px';\n            ctx.filter = imageEditorObj.getImageFilter(toPascalCase(type) as ImageFilterOption) as string;\n            ctx.drawImage(inMemoryCanvas, 0, 0, 300, 150);\n        }\n    }\n\n    function keyDownEventHandler(e: KeyboardEvent): void {\n        if (e.ctrlKey && (e.key === '+' || e.key === '-')) {\n            e.preventDefault();\n        }\n        switch (e.key) {\n        case (e.ctrlKey && 's'):\n            imageEditorObj.export();\n            break;\n        case (e.ctrlKey && 'z'):\n            isTextEditing = false;\n            refreshToolbar('main');\n            break;\n        case (e.ctrlKey && 'y'):\n            isTextEditing = false;\n            refreshToolbar('main');\n            break;\n        case 'Delete':\n            if (isNullOrUndefined(activeObjIndex) && tempShapeSettings && tempShapeSettings.id) {\n                activeObjIndex = tempShapeSettings.id;\n            }\n            if (activeObjIndex) {imageEditorObj.deleteShape(activeObjIndex); }\n            refreshToolbar('main');\n            break;\n        case 'Escape':\n            if (currentToolbar === 'crop') {\n                imageEditorObj.clearSelection(true);\n                refreshToolbar('main');\n            }\n            break;\n        case 'Enter':\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            if (!(e.target as any).closest('.e-textarea')) {\n                apply();\n                refreshToolbar('main');\n            }\n            break;\n        }\n    }\n\n    function doubleClickEvent(e: MouseEvent & TouchEvent): void {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (e.type === 'dblclick' && (e.target as any).closest('.e-textarea')) {\n            isTextEditing = true;\n        }\n    }\n\n    function apply(): void {\n        if (currentToolbar === 'crop') {\n            imageEditorObj.crop();\n        } else if (currentToolbar === 'pen') {\n            if (activeObjIndex && activeObjIndex.split('_')[0] === 'pen') {\n                tempShapeSettings = imageEditorObj.getShapeSetting(activeObjIndex);\n            } else {\n                const shapeSettings: ShapeSettings[] = imageEditorObj.getShapeSettings();\n                if (shapeSettings.length > 0) {\n                    tempShapeSettings = shapeSettings[shapeSettings.length - 1].id.split('_')[0] === 'pen' ? shapeSettings[shapeSettings.length - 1] : null;\n                    if (tempShapeSettings) {\n                        imageEditorObj.selectShape(tempShapeSettings.id);\n                    } else {\n                        imageEditorObj.freeHandDraw(false);\n                    }\n                } else {\n                    imageEditorObj.freeHandDraw(false);\n                    return;\n                }\n            }\n            if (tempShapeSettings) {\n                imageEditorObj.updateShape(tempShapeSettings);\n            }\n        } else if (currentToolbar === 'freehanddraw' && tempShapeSettings) {\n            imageEditorObj.updateShape(tempShapeSettings);\n        } else if (currentToolbar !== 'filter' && activeObjIndex) {\n            tempShapeSettings = imageEditorObj.getShapeSetting(activeObjIndex);\n            imageEditorObj.updateShape(tempShapeSettings);\n        }\n        tempShapeSettings = null; activeObjIndex = null;\n    }\n\n"}