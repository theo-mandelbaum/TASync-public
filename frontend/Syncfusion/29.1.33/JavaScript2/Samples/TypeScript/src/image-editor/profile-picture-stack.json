{"index.html":"<html><head><link href=\"https://cdn.syncfusion.com/ej2/28.1.33/{{theme}}.css\" rel=\"stylesheet\">\n\n    <link href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" rel=\"stylesheet\">\n\n    <style>\n            body{\n                touch-action:none;\n            }\n            .control-section{\n                margin-top:100px;\n            }\n        </style></head><body><div class=\"stackblitz-container {{theme}}\">\n<div class=\"col-lg-12 control-section e-img-editor-sample\">\n    <div class=\"e-profile e-hide\">\n        <div class=\"e-custom-wrapper\">\n            <canvas id=\"img-canvas\" style=\"max-width: 200px; max-height: 200px;\"></canvas>\n            <img alt=\"img\" id=\"custom-img\" crossorigin=\"anonymous\" src=\"//npmci.syncfusion.com/development/demos/src/image-editor/images/profile.png\" style=\"display: none;\">\n            <input type=\"file\" id=\"img-upload\" style=\"display:none\" accept=\"image/*\">\n\t\t\t<span id=\"custom-edit\" class=\"e-custom-edit\" contenteditable=\"false\">\n\t\t\t\t<span class=\"e-custom-icon sb-icons\" contenteditable=\"false\"></span>\n\t\t\t</span>\n        </div>\n    </div>\n</div>\n<div id=\"profile-dialog\">\n    <div id=\"image-editor\"></div>\n</div>\n\n\n\n\n<style>\n    .e-img-editor-sample,\n\t.e-img-editor-sample .control-wrapper {\n\t\tposition: relative;\n\t}\n\n    .e-profile {\n        width: 200px;\n        height: 200px;\n        position: absolute;\n        left: 50%;\n        -webkit-transform: translate(-50%, 30%);\n        transform: translate(-50%, 30%);\n        border-radius: 50%;\n    }\n\n    .e-custom-wrapper {\n        position: relative;\n    }\n\n    .e-custom-edit {\n        position: absolute;\n        width: 36px;\n        height: 36px;\n        border-radius: 50%;\n        background-color: blue;\n        top: calc(100% - 54px);\n        left: calc(100% - 47px);\n    }\n\n    .e-custom-icon::before {\n        content: '\\e911';\n        font-size: 28px;\n        color: white;\n        left: 5px;\n        top: 4px;\n\tline-height: initial;\n        position: absolute;\n    }\n\t\n\t.tailwind .e-custom-icon::before,\n\t.tailwind-dark .e-custom-icon::before {\n    \ttop: 6px;\n\t}\n\n    #custom-edit:hover {\n        cursor: pointer;\n    }\n\n    canvas#img-canvas {\n        border-radius: 50%;\n        border: 4px solid darkgrey;\n    }\n\n    .e-img-custom-open {\n        float: left;\n\t\tmargin-left: 0 !important;\n    }\n\n    .e-img-custom-reset {\n        float: left;\n    }\n\t\n\t.e-bigger #profile-dialog .e-dlg-header {\n\t\tfont-size: 18px !important;\n\t}\n\t\n\t.e-img-editor-sample {\n        min-height: 450px;\n    }\n\t\n    .highcontrast .e-custom-img-btn,\n    .fabric .e-custom-img-btn,\n    .fabric-dark .e-custom-img-btn {\n        padding: 2px 10px !important;\n    }\n\n    .e-bigger .e-custom-img-btn {\n        font-size: 14px !important;\n        padding: 6px 10px !important;\n    }\n\n    .e-bigger.highcontrast .e-custom-img-btn,\n    .e-bigger.fabric .e-custom-img-btn,\n    .e-bigger.fabric-dark .e-custom-img-btn,\n    .e-bigger.material .e-custom-img-btn,\n    .e-bigger.material-dark .e-custom-img-btn {\n        padding: 3px 10px !important;\n    }\n    .e-bigger.bootstrap .e-custom-img-btn,\n    .e-bigger.bootstrap-dark .e-custom-img-btn {\n        padding: 1px 10px !important;\n    }\n    .e-img-editor-sample .e-hide {\n\tdisplay: none;\n    }\n    .material3 .e-custom-img-btn,\n    .material3-dark .e-custom-img-btn,\n    .e-bigger.material3 .e-custom-img-btn,\n    .e-bigger.material3-dark .e-custom-img-btn\n    { \n     \tmargin-left: 3px !important;\n    }\n</style>\n\n</div></body></html>","package.json":"{\n  \"@syncfusion/ej2-base\": \"*\",\n  \"@syncfusion/ej2-buttons\": \"*\",\n  \"@syncfusion/ej2-dropdowns\": \"*\",\n  \"@syncfusion/ej2-inputs\": \"*\",\n  \"@syncfusion/ej2-navigations\": \"*\",\n  \"@syncfusion/ej2-popups\": \"*\",\n  \"@syncfusion/ej2-splitbuttons\": \"*\",\n  \"markdown-spellcheck\": \"^1.3.1\",\n  \"@syncfusion/ej2-image-editor\": \"*\",\n  \"@syncfusion/ej2-icons\": \"*\",\n  \"@types/crossroads\": \"0.0.28\",\n  \"@types/signals\": \"0.0.16\",\n  \"@types/moment-timezone\": \"^0.5.3\",\n  \"@types/hasher\": \"0.0.27\",\n  \"fuse.js\": \"^3.2.0\",\n  \"marked\": \"5.1.2\",\n  \"codemirror\": \"^5.37.0\",\n  \"crossroads\": \"^0.12.2\",\n  \"@types/marked\": \"5.0.1\",\n  \"@types/codemirror\": \"0.0.56\",\n  \"@types/es6-promise\": \"0.0.28\",\n  \"hasher\": \"^1.2.0\",\n  \"moment-timezone\": \"^0.5.14\"\n}","index.ts":"{{ripple}}import { ImageEditor } from '@syncfusion/ej2-image-editor';\r\nimport { Dialog } from '@syncfusion/ej2-popups';\r\nimport { getComponent, createElement } from '@syncfusion/ej2-base';\r\n\r\n\r\n/**\r\n * Profile picture sample\r\n */\r\n// tslint:disable-next-line\r\n\r\n    \r\n    const img: HTMLImageElement = document.querySelector('#custom-img');\r\n    let imgSrc: string = '';\r\n    img.onload = function() {\r\n\tif (imgSrc === '') {\r\n           const canvas: HTMLCanvasElement = document.querySelector('#img-canvas');\r\n           const ctx: CanvasRenderingContext2D = canvas.getContext('2d');\r\n           canvas.width = img.width < img.height ? img.width : img.height; canvas.height = canvas.width;\r\n           ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n\t   document.querySelector('.e-profile').classList.remove('e-hide');\r\n\t}\r\n    }\r\n\r\n    const dialogObj: Dialog = new Dialog({\r\n        header: 'Edit Profile Image',\r\n        animationSettings: { effect: 'None' },\r\n        showCloseIcon: true,\r\n        target: '.control-section',\r\n        width: '340px',\r\n\t\theight: '400px',\r\n\t\tposition: {X: 'center', Y: 'center'},\r\n        visible: false,\r\n        close: () => {\r\n            const imageEditor: ImageEditor = getComponent(document.getElementById('image-editor'), 'image-editor') as ImageEditor;\r\n            imageEditor.destroy();\r\n            document.getElementById('image-editor').className = '';\r\n        },\r\n        open: () => {\r\n            const imageEditor: ImageEditor = new ImageEditor({\r\n                fileOpened: () => {\r\n                    const imageEditor: ImageEditor = getComponent(document.getElementById('image-editor'), 'image-editor') as ImageEditor;\r\n                    imageEditor.select('circle');\r\n                },\r\n                created: () => {\r\n                    const imageEditor: ImageEditor = getComponent(document.getElementById('image-editor'), 'image-editor') as ImageEditor;\r\n                    if (imageEditor.theme && window.location.href.split('#')[1]) {\r\n                        imageEditor.theme = window.location.href.split('#')[1].split('/')[1];\r\n                    }\r\n                },\r\n                toolbar: []\r\n            });\r\n\t    imageEditor.appendTo('#image-editor');\r\n        },\r\n        buttons: [\r\n        {\r\n            click: () => {\r\n                document.getElementById('img-upload').click();\r\n            },\r\n            buttonModel: { content: 'Open', isPrimary: false, cssClass: 'e-custom-img-btn e-img-custom-open' }\r\n        },\r\n        {\r\n            click: () => {\r\n                const imageEditor: ImageEditor = getComponent(document.getElementById('image-editor'), 'image-editor') as ImageEditor;\r\n                imageEditor.reset();\r\n            },\r\n            buttonModel: { content: 'Reset', isPrimary: false, cssClass: 'e-custom-img-btn e-img-custom-reset' }\r\n        },\r\n        {\r\n            click: () => {\r\n                const imageEditor: ImageEditor = getComponent(document.getElementById('image-editor'), 'image-editor') as ImageEditor;\r\n                imageEditor.rotate(-90);\r\n            },\r\n            buttonModel: { content: 'Rotate', isPrimary: false, cssClass: 'e-custom-img-btn e-img-custom-rotate' }\r\n        },\r\n        {\r\n            click: () => {\r\n                const imageEditor: ImageEditor = getComponent(document.getElementById('image-editor'), 'image-editor') as ImageEditor;\r\n                imageEditor.crop();\r\n                const croppedData: ImageData = imageEditor.getImageData();\r\n                const canvas: HTMLCanvasElement = document.querySelector('#img-canvas');\r\n                const ctx: CanvasRenderingContext2D = canvas.getContext('2d');\r\n                const parentDiv: HTMLElement = document.querySelector('.e-profile');\r\n                const tempCanvas: HTMLCanvasElement = parentDiv.appendChild(createElement('canvas') as HTMLCanvasElement);\r\n                const tempContext: CanvasRenderingContext2D = tempCanvas.getContext('2d');\r\n                tempCanvas.width = croppedData.width; tempCanvas.height = croppedData.height;\r\n                tempContext.putImageData(croppedData, 0, 0);\r\n                ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n                ctx.drawImage(tempCanvas, 0, 0, canvas.width, canvas.height);\r\n                tempCanvas.remove();\r\n                parentDiv.style.borderRadius = '100%'; canvas.style.backgroundColor = '#fff';\r\n                dialogObj.hide();\r\n\t\tif (imgSrc !== '') {\r\n\t\t   const img: HTMLImageElement = document.querySelector('#custom-img');\r\n                   img.src = imgSrc;\r\n\t\t}\r\n            },\r\n            buttonModel: { content: 'Apply', isPrimary: true, cssClass: 'e-custom-img-btn e-img-custom-apply' }\r\n        }]\r\n    });\r\n\r\n    dialogObj.appendTo('#profile-dialog');\r\n\r\n    document.getElementById('custom-edit').onclick = (): void => {\r\n        dialogObj.show();\r\n        const imageEditor: ImageEditor = getComponent(document.getElementById('image-editor'), 'image-editor') as ImageEditor;\r\n        const img: HTMLImageElement = document.querySelector('#custom-img');\r\n        imageEditor.open(img.src);\r\n    };\r\n\r\n    document.getElementById('img-upload').onchange = (args: any): void => {\r\n        const URL = window.URL; const url = URL.createObjectURL((args.target as any).files[0]);\r\n        const imageEditor: ImageEditor = getComponent(document.getElementById('image-editor'), 'image-editor');\r\n        imageEditor.open(url.toString());\r\n        (document.getElementById('img-upload') as HTMLInputElement).value = null;\r\n\timgSrc = url.toString();\r\n    };\r\n\t\r\n    var imageHide = document.getElementsByClassName('sb-desktop-wrapper')[0] as HTMLElement;\r\n    if (imageHide) {\r\n        (document.getElementsByClassName('sb-desktop-wrapper')[0] as HTMLElement).onclick = function (args) {\r\n            const target: HTMLElement = args.target as HTMLElement;\r\n            if (target.className.indexOf('e-img-editor-sample') > -1 || target.className.indexOf('sb-content') > -1) {\r\n                dialogObj.hide();\r\n            }\r\n        \r\n    }\r\n\t\r\n}\r\n\r\n"}