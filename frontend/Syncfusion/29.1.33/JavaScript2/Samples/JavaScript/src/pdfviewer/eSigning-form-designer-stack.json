{"index.html":"<html><head><script src=\"https://cdn.syncfusion.com/ej2/28.1.33/dist/ej2.min.js\" type=\"text/javascript\"></script>\n    <link href=\"https://cdn.syncfusion.com/ej2/28.1.33/{{theme}}.css\" rel=\"stylesheet\">\n\n    <link href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" rel=\"stylesheet\">\n\n    <style>\n            body{\n                touch-action:none;\n            }\n            .control-section{\n                margin-top:100px;\n            }\n        </style></head><body><div class=\"stackblitz-container {{theme}}\">\n<div>\n  <div class=\"e-pv-e-sign-control control-section\">\n    <div class=\"content-wrapper\">\n      <div id=\"e-pv-e-sign-toolbar_template\">\n      </div>\n      <div id=\"e-pv-e-sign-layout\" style=\"position: relative;\">\n        <div id=\"e-pv-e-sign-defaultSidebar_user\">\n          <div class=\"content-wrapper\" style=\"margin: 9px;\">\n            <div style=\"font-weight: 500; font-size: 16px; width: 43px; height: 24px; margin: 15px 10px 5px;\">\n              Fields\n            </div>\n            <div id=\"e-pv-e-sign-user-field\" style=\"width: 190px; right: 4px;\">\n              <div class=\"e-pv-e-sign-user-dropdown\" style=\"width: 190px;\"> <input id=\"userMenu\" width=\"190px\">\n              </div>\n            </div>\n            <div style=\"display: flex;\">\n              <button class=\"e-pv-e-sign-form-field-property\" id=\"Signature\">\n                <i class=\"e-icons e-signature\"></i>\n                <span style=\"font-size: 11px; margin-top: 6px;\">Signature</span>\n              </button>\n              <button class=\"e-pv-e-sign-form-field-property\" id=\"initialBtn\">\n                <i class=\"e-icons e-font-name\"></i>\n                <span style=\"font-size: 11px; margin-top: 6px;\">Initial</span>\n              </button>\n            </div>\n            <div style=\"display: flex;\">\n              <button class=\"e-pv-e-sign-form-field-property\" id=\"textBoxBtn\">\n                <i class=\"e-icons e-text-form\"></i>\n                <span style=\"font-size: 11px; margin-top: 6px;\">Textbox</span>\n              </button>\n              <button class=\"e-pv-e-sign-form-field-property\" id=\"passwordBtn\">\n                <i class=\"e-icons e-password\"></i>\n                <span style=\"font-size: 11px; margin-top: 6px;\">Password</span>\n              </button>\n            </div>\n            <div style=\"display: flex;\">\n              <button class=\"e-pv-e-sign-form-field-property\" id=\"checkBoxBtn\">\n                <i class=\"e-icons e-check-box\"></i>\n                <span style=\"font-size: 11px; margin-top: 6px;\">Checkbox</span>\n              </button>\n              <button class=\"e-pv-e-sign-form-field-property\" id=\"radioBtn\">\n                <i class=\"e-icons e-radio-button\"></i>\n                <span style=\"font-size: 11px; margin-top: 6px;\">Radio</span>\n              </button>\n            </div>\n            <div style=\"display: flex;\">\n              <button class=\"e-pv-e-sign-form-field-property\" id=\"dropDownBtn\">\n                <i class=\"e-icons e-drop-down\"></i>\n                <span style=\"font-size: 11px; margin-top: 6px;\">Dropdown</span>\n              </button>\n              <button class=\"e-pv-e-sign-form-field-property\" id=\"listBoxBtn\">\n                <i class=\"e-icons e-list-unordered\"></i>\n                <span style=\"font-size: 11px; margin-top: 6px;\">List</span>\n              </button>\n            </div>\n          </div>\n        </div>\n        <div id=\"e-pv-e-sign-pdfViewer-div\">\n          <div id=\"pdfViewer\" style=\"display: block\"></div>\n        </div>\n        <div id=\"e-pv-e-sign-toolbar_template-mob\"></div>\n      </div>\n    </div>\n  </div>\n</div>\n</div>\n\n\n<style>\n  .e-pv-e-sign-control {\n    font-family: Roboto;\n    font-size: 14px;\n    font-style: normal;\n    font-weight: 400;\n    letter-spacing: 0.24px;\n    padding-top: 20px;\n    margin-top: 0px !important;\n  }\n\n  .e-pv-e-sign-form-field-property {\n    width: 72px !important;\n    height: 72px !important;\n    margin: 9px;\n    border: 1px solid #C4C7C5!important;\n    border-radius: 8px;\n    display: grid;\n    font-size: 12px !important;\n    place-content: center;\n  }\n\n  #e-pv-e-sign-user-field {\n    color: #222933;\n    font-family: Heebo, open sans, 'sans-serif', -apple-system,\n      BlinkMacSystemFont;\n    display: flex;\n    position: relative;\n    padding-bottom: 3px;\n    margin: 5px 0px 20px;\n    border-radius: 4px;\n    border: 1px solid #C4C7C5;\n    z-index: 1000;\n  }\n\n  #e-pv-e-sign-user-field .e-input-group .e-input-group-icon:last-child {\n    margin-left: -16px !important;\n    padding: 0;\n    margin-bottom: 5px;\n  }\n\n  .e-pv-e-sign-user-dropdown> :first-child {\n    border: none !important;\n  }\n\n  .e-pv-e-sign-user-dropdown .e-input-group:not(.e-float-icon-left):not(.e-float-input).e-input-focus::before,\n  .e-pv-e-sign-user-dropdown .e-input-group:not(.e-float-icon-left):not(.e-float-input).e-input-focus::after {\n    width: 0px !important;\n  }\n\n  .e-pv-e-sign-empImage {\n    width: 32px;\n    height: 32px;\n    margin-top: 7px;\n    margin-left: 4px;\n    border-radius: 50%;\n  }\n\n  #e-pv-e-sign-defaultSidebar_user {\n    height: 638px;\n    position: absolute;\n    box-shadow: 0px 2px 3px 1px rgba(0, 0, 0, 0.15), 0px 1px 2px 0px rgba(0, 0, 0, 0.30);\n  }\n\n  #e-pv-e-sign-toolbar_template,\n  #e-pv-e-sign-toolbar_template-mob {\n    z-index: 1001;\n    width: 100% !important;\n    height: 48px !important;\n    box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15), 0px 1px 2px 0px rgba(0, 0, 0, 0.30);\n  }\n\n  #e-pv-e-sign-toolbar_template-mob {\n    z-index: 1 !important;\n  }\n\n  #e-pv-e-sign-download {\n    width: 115px;\n    height: 32px;\n    min-height: 0;\n    flex-shrink: 0;\n    border-radius: 16px;\n    border: 1px solid var(--Color-variables-outline, #79747E);\n  }\n\n  #e-pv-e-sign-toolbar_template.e-toolbar .e-toolbar-items .e-toolbar-left .e-toolbar-item:first-child {\n    margin-left: 0px !important;\n    padding: 0px !important;\n  }\n\n  #e-pv-e-sign-toolbar_template-mob .e-toolbar-items\n  {\n    width: 100%;\n    justify-content: space-between;\n  }\n</style></body></html>","index.js":"{{ripple}}/* jshint esversion: 6 */\nvar currentUser = 'andrew@mycompany.com';\nvar currentFieldType;\nvar zoomFactor;\nvar defaultZoomFactor = false;\nvar userColor = '#eff7ef';\nvar isDropped = false;\nvar defaultFieldWidth = 200;\nvar defaultFieldHeight = 24;\nvar checkBoxFieldSize = 20;\nvar radioFieldSize = 20;\nvar SignatureFieldSize = 66;\nvar ListFieldSize = 66;\nvar isMobile = ej.base.Browser.isDevice;\n\n  var viewer = new ej.pdfviewer.PdfViewer({\n    documentPath:\n      'https://cdn.syncfusion.com/content/PDFViewer/Fill+and+Sign.pdf',\n    resourceUrl: 'https://cdn.syncfusion.com/ej2/27.2.2/dist/ej2-pdfviewer-lib',\n    documentLoad: documentLoaded,\n    pageClick: pageClick\n  });\n\n  viewer.enableFormFieldsValidation = true;\n  viewer.showNotificationDialog = false;\n  viewer.enableToolbar = false;\n  viewer.enableNavigationToolbar = false;\n  viewer.enableAnnotationToolbar = false;\n  viewer.downloadFileName = 'eSign_designMode.pdf';\n  viewer.appendTo('#pdfViewer');\n\n  var toolbarObj = new ej.navigations.Toolbar({\n    cssClass: 'template',\n    items: [\n      {\n        type: 'Input',\n        align: 'Left',\n        template:\n          \"<div id='e-pv-e-sign-user-field-mob' style='width: 200px;'><div class='e-pv-e-sign-user-dropdown' style='width: 200px;'> <input id='userMenuMob' width='200px'></input></div></div>\",\n      },\n      {\n        prefixIcon: 'e-icons e-download',\n        text: 'Download',\n        align: 'Right',\n        tooltipText: 'Save',\n        id: 'e-pv-e-sign-download',\n        click: downloadClicked.bind(this)\n      },\n    ],\n  });\n  toolbarObj.appendTo('#e-pv-e-sign-toolbar_template');\n\n  var toolbarObjMob = new ej.navigations.Toolbar({\n    cssClass: 'template',\n    overflowMode: 'Scrollable',\n    items: [\n      { id: 'signature', prefixIcon: 'e-icons e-signature', click: signature.bind(this)},\n      { id: 'initial', prefixIcon: 'e-icons e-font-name', click: initial.bind(this)},\n      { id: 'textBox', prefixIcon: 'e-icons e-text-form', click: textBox.bind(this)},\n      { id: 'password', prefixIcon: 'e-icons e-password', click: password.bind(this)},\n      { id: 'checkBox', prefixIcon: 'e-icons e-check-box', click: checkBox.bind(this)},\n      { id: 'radioButton', prefixIcon: 'e-icons e-radio-button', click: radiobutton.bind(this)},\n      { id: 'dropDown', prefixIcon: 'e-icons e-drop-down', click: dropDown.bind(this)},\n      { id: 'listBox', prefixIcon: 'e-icons e-list-unordered', click: listBox.bind(this)}\n    ],\n  });\n\n  toolbarObjMob.appendTo('#e-pv-e-sign-toolbar_template-mob');\n\n  var userDetails = [\n    {\n      Name: 'Andrew Fuller',\n      Eimg: 'profile1',\n      Mail: 'andrew@mycompany.com',\n      fieldIds: [],\n    },\n    {\n      Name: 'Anne Dodsworth',\n      Eimg: 'profile2',\n      Mail: 'anne@mycompany.com',\n      fieldIds: [],\n    },\n  ];\n\n  function getBorderColor(email) {\n    return email === 'andrew@mycompany.com' ? 'red' : 'green';\n  }\n\n  var listObj = new ej.dropdowns.DropDownList({\n    dataSource: userDetails,\n    fields: { text: 'Mail', value: 'Eimg', fieldIds: 'fieldIds' },\n    index: 0,\n    itemTemplate: function (data) {\n      return '<div style=\"display:flex;\">' +\n        '<img class=\"e-pv-e-sign-empImage\" style=\"border: 1px solid ' + getBorderColor(data.Mail) + ';\" src=\"//npmci.syncfusion.com/development/demos/src/pdfviewer/images/employees/' + data.Eimg + '.png\" alt=\"employee\" />' +\n        '<div>' +\n        '<div class=\"ename\" style=\"font-size:13px;height:18px;\">' + data.Name + '</div>' +\n        '<div class=\"mail\" style=\"font-size:10px;\">' + data.Mail + '</div>' +\n        '</div>' +\n        '</div>';\n    },\n    valueTemplate: function (data) {\n      return '<div style=\"display:flex;\">' +\n        '<img class=\"value\" style=\"border: 1px solid ' + getBorderColor(data.Mail) + '; margin: 3px 0px 0px 5px; border-radius:50%;\" src=\"//npmci.syncfusion.com/development/demos/src/pdfviewer/images/employees/' + data.Eimg + '.png\" height=\"32px\" width=\"32px\" alt=\"employee\" />' +\n        '<div style=\"margin-top: 3px;\">' +\n        '<div class=\"name\" style=\"font-size:13px;margin-left: 12px;\">' + data.Name + '</div>' +\n        '<div class=\"mail\" style=\"font-size:10px;margin-left: 12px;\">' + data.Mail + '</div>' +\n        '</div>' +\n        '</div>';\n    }\n  });\n  listObj.appendTo('#userMenu');\n\n  var listObjMob = new ej.dropdowns.DropDownList({\n    dataSource: userDetails,\n    fields: { text: 'Mail', value: 'Eimg', fieldIds: 'fieldIds' },\n    index: 0,\n    itemTemplate: function (data) {\n      return '<div style=\"display:flex;\">' +\n        '<img class=\"e-pv-e-sign-empImage\" style=\"border: 1px solid ' + getBorderColor(data.Mail) + ';\" src=\"//npmci.syncfusion.com/development/demos/src/pdfviewer/images/employees/' + data.Eimg + '.png\" alt=\"employee\" />' +\n        '<div>' +\n        '<div class=\"ename\" style=\"font-size:13px;height:18px;\">' + data.Name + '</div>' +\n        '<div class=\"mail\" style=\"font-size:10px;\">' + data.Mail + '</div>' +\n        '</div>' +\n        '</div>';\n    },\n    valueTemplate: function (data) {\n      return '<div style=\"display:flex;\">' +\n        '<img class=\"value\" style=\"border: 1px solid ' + getBorderColor(data.Mail) + '; margin: 3px 0px 0px 5px; border-radius:50%;\" src=\"//npmci.syncfusion.com/development/demos/src/pdfviewer/images/employees/' + data.Eimg + '.png\" height=\"32px\" width=\"32px\" alt=\"employee\" />' +\n        '<div style=\"margin-top: 3px;\">' +\n        '<div class=\"name\" style=\"font-size:13px;margin-left: 12px;\">' + data.Name + '</div>' +\n        '<div class=\"mail\" style=\"font-size:10px;margin-left: 12px;\">' + data.Mail + '</div>' +\n        '</div>' +\n        '</div>';\n    }\n  });\n  listObjMob.appendTo('#userMenuMob');\n\n  var sideObj = new ej.navigations.Sidebar({\n    width: \"200px\",\n    enableGestures: false\n  });\n  sideObj.appendTo(\"#e-pv-e-sign-defaultSidebar_user\");\n\n  const layout = document.getElementById('e-pv-e-sign-layout');\n  const dropdown = document.getElementById('e-pv-e-sign-user-field-mob');\n  const sidebar = document.getElementById('e-pv-e-sign-defaultSidebar_user');\n  const viewerDiv = document.getElementById('e-pv-e-sign-pdfViewer-div');\n  const downloadElement = document.getElementById(\"e-pv-e-sign-download\");\n  const toolbarElementMob = document.getElementById(\"e-pv-e-sign-toolbar_template-mob\");\n  if (isMobile) {\n    layout.style.display = 'block';\n    dropdown.style.display = 'block';\n    toolbarElementMob.style.display = 'block';\n    sidebar.style.display = 'none';\n    viewerDiv.style.width = '100%';\n    downloadElement.style.border = 'none';\n    downloadElement.style.width = '40px';\n    downloadElement.removeChild(downloadElement.lastChild);\n  } else {\n    layout.style.display = 'flex';\n    dropdown.style.display = 'none';\n    toolbarElementMob.style.display = 'none';\n    sidebar.style.display = 'block';\n    viewerDiv.style.width = 'calc(100% - 200px)';\n    downloadElement.style.width = '115px';\n    downloadElement.style.width = '1px solid #C4C7C5';\n  }\n\n  var textboxBtn = new ej.buttons.Button({ cssClass: 'e-outline' });\n  textboxBtn.appendTo('#textBoxBtn');\n\n  var passwordBtn = new ej.buttons.Button({ cssClass: 'e-outline' });\n  passwordBtn.appendTo('#passwordBtn');\n\n  var checkboxBtn = new ej.buttons.Button({ cssClass: 'e-outline' });\n  checkboxBtn.appendTo('#checkBoxBtn');\n\n  var radioButton = new ej.buttons.Button({ cssClass: 'e-outline' });\n  radioButton.appendTo('#radioBtn');\n\n  var dropDownBtn = new ej.buttons.Button({ cssClass: 'e-outline' });\n  dropDownBtn.appendTo('#dropDownBtn');\n\n  var listBoxBtn = new ej.buttons.Button({ cssClass: 'e-outline' });\n  listBoxBtn.appendTo('#listBoxBtn');\n\n  var signatureBtn = new ej.buttons.Button({ cssClass: 'e-outline' });\n  signatureBtn.appendTo('#Signature');\n\n  var initialBtn = new ej.buttons.Button({ cssClass: 'e-outline' });\n  initialBtn.appendTo('#initialBtn');\n\n  listObj.change = function (args) {\n    currentUser = args.itemData.Mail;\n  };\n\n  listObjMob.change = function (args) {\n    currentUser = args.itemData.Mail;\n  };\n\n  function documentLoaded() {\n    if(isMobile){\n      viewer.height = \"500px\";\n    }else{\n      viewer.height = \"640px\";\n    }\n    viewer.designerMode = true;\n    viewer.magnification.fitToPage();\n    defaultZoomFactor = true;\n    initializeDraggable(textboxBtn.element, 'Textbox');\n    initializeDraggable(signatureBtn.element, 'SignatureField');\n    initializeDraggable(passwordBtn.element, 'Password');\n    initializeDraggable(checkboxBtn.element, 'CheckBox');\n    initializeDraggable(radioButton.element, 'RadioButton');\n    initializeDraggable(dropDownBtn.element, 'DropDown');\n    initializeDraggable(listBoxBtn.element, 'ListBox');\n    initializeDraggable(initialBtn.element, 'InitialField');\n    defaultZoomFactor = false;\n  }\n\n  function initializeDraggable(element, fieldType) {\n    var cloneElement;\n    new ej.base.Draggable(element, {\n      helper: (e) => {\n        if(e.sender.type == \"mousemove\"){\n        cloneElement = document.createElement('div');\n        zoomFactor = viewer.viewerBase.getZoomFactor();\n        cloneElement = document.createElement('div');\n        cloneElement.style.width = (defaultFieldWidth * zoomFactor) + 'px';\n        cloneElement.style.height = (defaultFieldHeight * zoomFactor) + 'px';\n        cloneElement.style.borderRadius = '0';\n        cloneElement.style.opacity = '0.5';\n        switch (fieldType) {\n          case 'SignatureField':\n          case 'InitialField':\n            cloneElement.style.height = (SignatureFieldSize * zoomFactor) + 'px';\n            break;\n          case 'CheckBox':\n            cloneElement.style.height = (checkBoxFieldSize * zoomFactor) + 'px';\n            cloneElement.style.width = (checkBoxFieldSize * zoomFactor) + 'px';\n            break;\n          case 'RadioButton':\n            cloneElement.style.height = (radioFieldSize * zoomFactor) + 'px';\n            cloneElement.style.width = (radioFieldSize * zoomFactor) + 'px';\n            cloneElement.style.borderRadius = '50%';\n            break;\n          case 'ListBox':\n            cloneElement.style.height = (ListFieldSize * zoomFactor) + 'px';\n            break;\n        }\n        cloneElement.style.backgroundColor = this.currentUser === 'andrew@mycompany.com' ? '#ffefef' : '#eff7ef';\n        cloneElement.style.zIndex = '10001';\n        cloneElement.style.position = 'absolute';\n        cloneElement.style.pointerEvents = 'none';\n        document.body.appendChild(cloneElement);\n        return cloneElement;\n      }else{\n        return null;\n      }\n      },\n      dragStart: (e) => {\n        currentFieldType = fieldType;\n        isDropped = true;\n        getCursorAtPosition(fieldType);\n      },\n      dragStop: (e) => {\n        if (e.helper && e.helper.parentNode) {\n          e.helper.parentNode.removeChild(e.helper);\n        }\n        isDropped = false;\n      },\n      clone: true,\n      cursorAt: getCursorAtPosition(fieldType),\n      enableTailMode: true,\n    });\n  }\n\n  function getCursorAtPosition(fieldType) {\n    if (defaultZoomFactor) {\n      zoomFactor = 1;\n    } else {\n      zoomFactor = viewer.viewerBase.getZoomFactor();\n    }\n    var left, top;\n    var scaledWidth = defaultFieldWidth * zoomFactor;\n    var scaledHeight = defaultFieldHeight * zoomFactor;\n\n    switch (fieldType) {\n      case 'CheckBox':\n      case 'RadioButton':\n        scaledWidth = checkBoxFieldSize * zoomFactor;\n        scaledHeight = checkBoxFieldSize * zoomFactor;\n        left = 0;\n        top = (checkBoxFieldSize / 2) * zoomFactor - (scaledHeight / 2);\n        break;\n      case 'ListBox':\n        scaledHeight = ListFieldSize * zoomFactor;\n        left = 90;\n        top = (ListFieldSize / 2) * zoomFactor - (scaledHeight / 2);\n        break;\n      case 'SignatureField':\n      case 'InitialField':\n        scaledHeight = SignatureFieldSize * zoomFactor;\n        left = 90;\n        top = (SignatureFieldSize / 2) * zoomFactor - (scaledHeight / 2);\n        break;\n      default:\n        scaledHeight = defaultFieldHeight * zoomFactor;\n        left = 90;\n        top = (defaultFieldHeight / 2) * zoomFactor - (scaledHeight / 2);\n        break;\n    }\n\n    left = left / zoomFactor - (scaledWidth / 2);\n    return { left: left, top: top };\n  }\n\n  function pageClick(args) {\n    if (isDropped) {\n      isDropped = false;\n      var width = defaultFieldWidth;\n      var height = defaultFieldHeight;\n      switch (currentFieldType) {\n        case 'Textbox':\n          height = defaultFieldHeight;\n          break;\n        case 'SignatureField':\n        case 'InitialField':\n          height = SignatureFieldSize;\n          break;\n        case 'Password':\n          break;\n        case 'CheckBox':\n        case 'RadioButton':\n          width = checkBoxFieldSize;\n          height = checkBoxFieldSize;\n          break;\n        case 'ListBox':\n          height = ListFieldSize;\n          break;\n      }\n      viewer.formDesignerModule.addFormField(currentFieldType, { bounds: { X: args.x, Y: args.y, Width: width, Height: height }});\n    }\n  }\n\n  document.getElementById(\"textBoxBtn\").onclick = function (e){\n    if (e.sourceCapabilities.firesTouchEvents)\n    viewer.formDesignerModule.setFormFieldMode('Textbox');\n  };\n  \n  document.getElementById(\"passwordBtn\").onclick = function(e){\n    if (e.sourceCapabilities.firesTouchEvents)\n    viewer.formDesignerModule.setFormFieldMode('Password');\n  };\n  \n  document.getElementById(\"checkBoxBtn\").onclick = function(e){\n    if (e.sourceCapabilities.firesTouchEvents)\n    viewer.formDesignerModule.setFormFieldMode('CheckBox');\n  };\n  \n  document.getElementById(\"radioBtn\").onclick = function(e){\n    if (e.sourceCapabilities.firesTouchEvents)\n    viewer.formDesignerModule.setFormFieldMode('RadioButton');\n  };\n  \n  document.getElementById(\"dropDownBtn\").onclick = function(e){\n    if (e.sourceCapabilities.firesTouchEvents)\n    viewer.formDesignerModule.setFormFieldMode('DropDown');\n  };\n  \n  document.getElementById(\"listBoxBtn\").onclick = function(e){\n    if (e.sourceCapabilities.firesTouchEvents)\n    viewer.formDesignerModule.setFormFieldMode('ListBox');\n  };\n  \n  document.getElementById(\"Signature\").onclick = function(e){\n    if (e.sourceCapabilities.firesTouchEvents)\n    viewer.formDesignerModule.setFormFieldMode('SignatureField');\n  };\n  \n  document.getElementById(\"initialBtn\").onclick = function(e){\n    if (e.sourceCapabilities.firesTouchEvents)\n    viewer.formDesignerModule.setFormFieldMode('InitialField');\n  };\n\n  function textBox(e) {\n    if (e.originalEvent.sourceCapabilities.firesTouchEvents)\n    viewer.formDesignerModule.setFormFieldMode('Textbox');\n  }\n\n  function password(e) {\n    if (e.originalEvent.sourceCapabilities.firesTouchEvents)\n    viewer.formDesignerModule.setFormFieldMode('Password');\n  }\n\n  function checkBox(e) {\n    if (e.originalEvent.sourceCapabilities.firesTouchEvents)\n    viewer.formDesignerModule.setFormFieldMode('CheckBox');\n  }\n\n  function radiobutton(e) {\n    if (e.originalEvent.sourceCapabilities.firesTouchEvents)\n    viewer.formDesignerModule.setFormFieldMode('RadioButton');\n  }\n\n  function dropDown(e) {\n    if (e.originalEvent.sourceCapabilities.firesTouchEvents)\n    viewer.formDesignerModule.setFormFieldMode('DropDown');\n  }\n\n  function listBox(e) {\n    if (e.originalEvent.sourceCapabilities.firesTouchEvents)\n    viewer.formDesignerModule.setFormFieldMode('ListBox');\n  }\n\n  function signature(e) {\n    if (e.originalEvent.sourceCapabilities.firesTouchEvents)\n    viewer.formDesignerModule.setFormFieldMode('SignatureField');\n  }\n\n  function initial(e) {\n    if (e.originalEvent.sourceCapabilities.firesTouchEvents)\n    viewer.formDesignerModule.setFormFieldMode('InitialField');\n  }\n\n  function downloadClicked(args) {\n    viewer.download();\n  }\n\n  viewer.formFieldAdd = function (args) {\n    userColor = currentUser === 'andrew@mycompany.com' ? '#ffefef' : '#eff7ef';\n    if (currentUser === 'andrew@mycompany.com') {\n      viewer.formDesigner.updateFormField(\n        viewer.retrieveFormFields()[viewer.formFieldCollections.length - 1],\n        { backgroundColor: userColor, customData: { author: 'andrew' } }\n      );\n    } else {\n      viewer.formDesigner.updateFormField(\n        viewer.retrieveFormFields()[viewer.formFieldCollections.length - 1],\n        { backgroundColor: userColor, customData: { author: 'anne' } }\n      );\n    }\n\n    var currentUserDetails = userDetails.filter(function (userDetail) {\n      return userDetail.Mail === currentUser;\n    })[0];\n\n    var currentFormField = viewer.formFieldCollections.filter(function (formField) {\n      return formField.id === args.field.id;\n    })[0];\n    currentUserDetails.fieldIds.push(currentFormField);\n  };\n\n"}