var Sy=Object.defineProperty,Ty=Object.defineProperties;var wy=Object.getOwnPropertyDescriptors;var Uu=Object.getOwnPropertySymbols;var Dy=Object.prototype.hasOwnProperty,xy=Object.prototype.propertyIsEnumerable;var Yu=(o,t,e)=>t in o?Sy(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,ur=(o,t)=>{for(var e in t||={})Dy.call(t,e)&&Yu(o,e,t[e]);if(Uu)for(var e of Uu(t))xy.call(t,e)&&Yu(o,e,t[e]);return o},Fr=(o,t)=>Ty(o,wy(t));var _u=null;var nl=1,Vu=Symbol("SIGNAL");function Re(o){let t=_u;return _u=o,t}var Qu={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ay(o){if(!(al(o)&&!o.dirty)&&!(!o.dirty&&o.lastCleanEpoch===nl)){if(!o.producerMustRecompute(o)&&!sl(o)){o.dirty=!1,o.lastCleanEpoch=nl;return}o.producerRecomputeValue(o),o.dirty=!1,o.lastCleanEpoch=nl}}function Wu(o){return o&&(o.nextProducerIndex=0),Re(o)}function Xu(o,t){if(Re(t),!(!o||o.producerNode===void 0||o.producerIndexOfThis===void 0||o.producerLastReadVersion===void 0)){if(al(o))for(let e=o.nextProducerIndex;e<o.producerNode.length;e++)ol(o.producerNode[e],o.producerIndexOfThis[e]);for(;o.producerNode.length>o.nextProducerIndex;)o.producerNode.pop(),o.producerLastReadVersion.pop(),o.producerIndexOfThis.pop()}}function sl(o){mo(o);for(let t=0;t<o.producerNode.length;t++){let e=o.producerNode[t],i=o.producerLastReadVersion[t];if(i!==e.version||(Ay(e),i!==e.version))return!0}return!1}function qu(o){if(mo(o),al(o))for(let t=0;t<o.producerNode.length;t++)ol(o.producerNode[t],o.producerIndexOfThis[t]);o.producerNode.length=o.producerLastReadVersion.length=o.producerIndexOfThis.length=0,o.liveConsumerNode&&(o.liveConsumerNode.length=o.liveConsumerIndexOfThis.length=0)}function ol(o,t){if(Ey(o),mo(o),o.liveConsumerNode.length===1)for(let i=0;i<o.producerNode.length;i++)ol(o.producerNode[i],o.producerIndexOfThis[i]);let e=o.liveConsumerNode.length-1;if(o.liveConsumerNode[t]=o.liveConsumerNode[e],o.liveConsumerIndexOfThis[t]=o.liveConsumerIndexOfThis[e],o.liveConsumerNode.length--,o.liveConsumerIndexOfThis.length--,t<o.liveConsumerNode.length){let i=o.liveConsumerIndexOfThis[t],r=o.liveConsumerNode[t];mo(r),r.producerIndexOfThis[i]=t}}function al(o){return o.consumerIsAlwaysLive||(o?.liveConsumerNode?.length??0)>0}function mo(o){o.producerNode??=[],o.producerIndexOfThis??=[],o.producerLastReadVersion??=[]}function Ey(o){o.liveConsumerNode??=[],o.liveConsumerIndexOfThis??=[]}function Oy(){throw new Error}var Ny=Oy;function Gu(o){Ny=o}function Bt(o){return typeof o=="function"}function yo(o){let e=o(i=>{Error.call(i),i.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Co=yo(o=>function(e){o(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function ss(o,t){if(o){let e=o.indexOf(t);0<=e&&o.splice(e,1)}}var Ht=class o{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let n of e)n.remove(this);else e.remove(this);let{initialTeardown:i}=this;if(Bt(i))try{i()}catch(n){t=n instanceof Co?n.errors:[n]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let n of r)try{Zu(n)}catch(s){t=t??[],s instanceof Co?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Co(t)}}add(t){var e;if(t&&t!==this)if(this.closed)Zu(t);else{if(t instanceof o){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&ss(e,t)}remove(t){let{_finalizers:e}=this;e&&ss(e,t),t instanceof o&&t._removeParent(this)}};Ht.EMPTY=(()=>{let o=new Ht;return o.closed=!0,o})();var ll=Ht.EMPTY;function bo(o){return o instanceof Ht||o&&"closed"in o&&Bt(o.remove)&&Bt(o.add)&&Bt(o.unsubscribe)}function Zu(o){Bt(o)?o():o.unsubscribe()}var ni={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var dn={setTimeout(o,t,...e){let{delegate:i}=dn;return i?.setTimeout?i.setTimeout(o,t,...e):setTimeout(o,t,...e)},clearTimeout(o){let{delegate:t}=dn;return(t?.clearTimeout||clearTimeout)(o)},delegate:void 0};function $u(o){dn.setTimeout(()=>{let{onUnhandledError:t}=ni;if(t)t(o);else throw o})}function hl(){}var Ju=cl("C",void 0,void 0);function Ku(o){return cl("E",void 0,o)}function ep(o){return cl("N",o,void 0)}function cl(o,t,e){return{kind:o,value:t,error:e}}var Br=null;function fn(o){if(ni.useDeprecatedSynchronousErrorHandling){let t=!Br;if(t&&(Br={errorThrown:!1,error:null}),o(),t){let{errorThrown:e,error:i}=Br;if(Br=null,e)throw i}}else o()}function tp(o){ni.useDeprecatedSynchronousErrorHandling&&Br&&(Br.errorThrown=!0,Br.error=o)}var Hr=class extends Ht{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,bo(t)&&t.add(this)):this.destination=Py}static create(t,e,i){return new gn(t,e,i)}next(t){this.isStopped?pl(ep(t),this):this._next(t)}error(t){this.isStopped?pl(Ku(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?pl(Ju,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},jy=Function.prototype.bind;function ul(o,t){return jy.call(o,t)}var dl=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(i){Mo(i)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(i){Mo(i)}else Mo(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Mo(e)}}},gn=class extends Hr{constructor(t,e,i){super();let r;if(Bt(t)||!t)r={next:t??void 0,error:e??void 0,complete:i??void 0};else{let n;this&&ni.useDeprecatedNextContext?(n=Object.create(t),n.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&ul(t.next,n),error:t.error&&ul(t.error,n),complete:t.complete&&ul(t.complete,n)}):r=t}this.destination=new dl(r)}};function Mo(o){ni.useDeprecatedSynchronousErrorHandling?tp(o):$u(o)}function Ly(o){throw o}function pl(o,t){let{onStoppedNotification:e}=ni;e&&dn.setTimeout(()=>e(o,t))}var Py={closed:!0,next:hl,error:Ly,complete:hl};var ip=typeof Symbol=="function"&&Symbol.observable||"@@observable";function rp(o){return o}function np(o){return o.length===0?rp:o.length===1?o[0]:function(e){return o.reduce((i,r)=>r(i),e)}}var fl=(()=>{class o{constructor(e){e&&(this._subscribe=e)}lift(e){let i=new o;return i.source=this,i.operator=e,i}subscribe(e,i,r){let n=zy(e)?e:new gn(e,i,r);return fn(()=>{let{operator:s,source:a}=this;n.add(s?s.call(n,a):a?this._subscribe(n):this._trySubscribe(n))}),n}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return i=sp(i),new i((r,n)=>{let s=new gn({next:a=>{try{e(a)}catch(l){n(l),s.unsubscribe()}},error:n,complete:r});this.subscribe(s)})}_subscribe(e){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(e)}[ip](){return this}pipe(...e){return np(e)(this)}toPromise(e){return e=sp(e),new e((i,r)=>{let n;this.subscribe(s=>n=s,s=>r(s),()=>i(n))})}}return o.create=t=>new o(t),o})();function sp(o){var t;return(t=o??ni.Promise)!==null&&t!==void 0?t:Promise}function ky(o){return o&&Bt(o.next)&&Bt(o.error)&&Bt(o.complete)}function zy(o){return o&&o instanceof Hr||ky(o)&&bo(o)}function Ry(o){return Bt(o?.lift)}function op(o){return t=>{if(Ry(t))return t.lift(function(e){try{return o(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ap(o,t,e,i,r){return new gl(o,t,e,i,r)}var gl=class extends Hr{constructor(t,e,i,r,n,s){super(t),this.onFinalize=n,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};var lp=yo(o=>function(){o(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var pr=(()=>{class o extends fl{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let i=new Io(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new lp}next(e){fn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(e)}})}error(e){fn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){fn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:i,isStopped:r,observers:n}=this;return i||r?ll:(this.currentObservers=null,n.push(e),new Ht(()=>{this.currentObservers=null,ss(n,e)}))}_checkFinalizedStatuses(e){let{hasError:i,thrownError:r,isStopped:n}=this;i?e.error(r):n&&e.complete()}asObservable(){let e=new fl;return e.source=this,e}}return o.create=(t,e)=>new Io(t,e),o})(),Io=class extends pr{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.next)===null||i===void 0||i.call(e,t)}error(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.error)===null||i===void 0||i.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,i;return(i=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&i!==void 0?i:ll}};var os=class extends pr{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};function Ni(o,t,e,i){var r=arguments.length,n=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,e,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,e,n):s(t,e))||n);return r>3&&n&&Object.defineProperty(t,e,n),n}function vl(o,t){return op((e,i)=>{let r=0;e.subscribe(ap(i,n=>{i.next(o.call(t,n,r++))}))})}var Be=class extends Error{constructor(t,e){super(ah(t,e)),this.code=t}};function ah(o,t){return`${`NG0${Math.abs(o)}`}${t?": "+t:""}`}function lh(o){return{toString:o}.toString()}var as=globalThis;function Ze(o){for(let t in o)if(o[t]===Ze)return t;throw Error("Could not find renamed property on target object.")}function Fy(o,t){for(let e in t)t.hasOwnProperty(e)&&!o.hasOwnProperty(e)&&(o[e]=t[e])}function hi(o){if(typeof o=="string")return o;if(Array.isArray(o))return"["+o.map(hi).join(", ")+"]";if(o==null)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;let t=o.toString();if(t==null)return""+t;let e=t.indexOf(`
`);return e===-1?t:t.substring(0,e)}function hp(o,t){return o==null||o===""?t===null?"":t:t==null||t===""?o:o+" "+t}var By=Ze({__forward_ref__:Ze});function _p(o){return o.__forward_ref__=_p,o.toString=function(){return hi(this())},o}function oi(o){return Hy(o)?o():o}function Hy(o){return typeof o=="function"&&o.hasOwnProperty(By)&&o.__forward_ref__===_p}function Ct(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Gr(o){return{providers:o.providers||[],imports:o.imports||[]}}function hh(o){return cp(o,Vp)||cp(o,Qp)}function cp(o,t){return o.hasOwnProperty(t)?o[t]:null}function Uy(o){let t=o&&(o[Vp]||o[Qp]);return t||null}function up(o){return o&&(o.hasOwnProperty(pp)||o.hasOwnProperty(Yy))?o[pp]:null}var Vp=Ze({\u0275prov:Ze}),pp=Ze({\u0275inj:Ze}),Qp=Ze({ngInjectableDef:Ze}),Yy=Ze({ngInjectorDef:Ze}),tt=class{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=Ct({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Wp(o){return o&&!!o.\u0275providers}var _y=Ze({\u0275cmp:Ze}),Vy=Ze({\u0275dir:Ze}),Qy=Ze({\u0275pipe:Ze});var dp=Ze({\u0275fac:Ze}),ls=Ze({__NG_ELEMENT_ID__:Ze}),fp=Ze({__NG_ENV_ID__:Ze});function Wy(o){return typeof o=="string"?o:o==null?"":String(o)}function Xy(o){return typeof o=="function"?o.name||o.toString():typeof o=="object"&&o!=null&&typeof o.type=="function"?o.type.name||o.type.toString():Wy(o)}function qy(o,t){let e=t?`. Dependency path: ${t.join(" > ")} > ${o}`:"";throw new Be(-200,o)}function ch(o,t){throw new Be(-201,!1)}var je=function(o){return o[o.Default=0]="Default",o[o.Host=1]="Host",o[o.Self=2]="Self",o[o.SkipSelf=4]="SkipSelf",o[o.Optional=8]="Optional",o}(je||{}),xl;function Xp(){return xl}function ji(o){let t=xl;return xl=o,t}function qp(o,t,e){let i=hh(o);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(e&je.Optional)return null;if(t!==void 0)return t;ch(o,"Injector")}var Gy={},hs=Gy,Zy="__NG_DI_FLAG__",Oo="ngTempTokenPath",$y="ngTokenPath",Jy=/\n/gm,Ky="\u0275",gp="__source",bn;function eC(){return bn}function vn(o){let t=bn;return bn=o,t}function tC(o,t=je.Default){if(bn===void 0)throw new Be(-203,!1);return bn===null?qp(o,void 0,t):bn.get(o,t&je.Optional?null:void 0,t)}function Ve(o,t=je.Default){return(Xp()||tC)(oi(o),t)}function It(o,t=je.Default){return Ve(o,Qo(t))}function Qo(o){return typeof o>"u"||typeof o=="number"?o:0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)}function Al(o){let t=[];for(let e=0;e<o.length;e++){let i=oi(o[e]);if(Array.isArray(i)){if(i.length===0)throw new Be(900,!1);let r,n=je.Default;for(let s=0;s<i.length;s++){let a=i[s],l=iC(a);typeof l=="number"?l===-1?r=a.token:n|=l:r=a}t.push(Ve(r,n))}else t.push(Ve(i))}return t}function iC(o){return o[Zy]}function rC(o,t,e,i){let r=o[Oo];throw t[gp]&&r.unshift(t[gp]),o.message=nC(`
`+o.message,r,e,i),o[$y]=r,o[Oo]=null,o}function nC(o,t,e,i=null){o=o&&o.charAt(0)===`
`&&o.charAt(1)==Ky?o.slice(2):o;let r=hi(t);if(Array.isArray(t))r=t.map(hi).join(" -> ");else if(typeof t=="object"){let n=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];n.push(s+":"+(typeof a=="string"?JSON.stringify(a):hi(a)))}r=`{${n.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${o.replace(Jy,`
  `)}`}function cs(o,t){let e=o.hasOwnProperty(dp);return e?o[dp]:null}function sC(o,t,e){if(o.length!==t.length)return!1;for(let i=0;i<o.length;i++){let r=o[i],n=t[i];if(e&&(r=e(r),n=e(n)),n!==r)return!1}return!0}function oC(o){return o.flat(Number.POSITIVE_INFINITY)}function uh(o,t){o.forEach(e=>Array.isArray(e)?uh(e,t):t(e))}function Gp(o,t,e){t>=o.length?o.push(e):o.splice(t,0,e)}function No(o,t){return t>=o.length-1?o.pop():o.splice(t,1)[0]}function aC(o,t){let e=[];for(let i=0;i<o;i++)e.push(t);return e}var In={},ai=[],us=new tt(""),Zp=new tt("",-1),$p=new tt(""),jo=class{get(t,e=hs){if(e===hs){let i=new Error(`NullInjectorError: No provider for ${hi(t)}!`);throw i.name="NullInjectorError",i}return e}},Jp=function(o){return o[o.OnPush=0]="OnPush",o[o.Default=1]="Default",o}(Jp||{}),ki=function(o){return o[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",o}(ki||{}),_r=function(o){return o[o.None=0]="None",o[o.SignalBased=1]="SignalBased",o[o.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",o}(_r||{});function lC(o,t,e){let i=o.length;for(;;){let r=o.indexOf(t,e);if(r===-1)return r;if(r===0||o.charCodeAt(r-1)<=32){let n=t.length;if(r+n===i||o.charCodeAt(r+n)<=32)return r}e=r+1}}function El(o,t,e){let i=0;for(;i<e.length;){let r=e[i];if(typeof r=="number"){if(r!==0)break;i++;let n=e[i++],s=e[i++],a=e[i++];o.setAttribute(t,s,a,n)}else{let n=r,s=e[++i];cC(n)?o.setProperty(t,n,s):o.setAttribute(t,n,s),i++}}return i}function hC(o){return o===3||o===4||o===6}function cC(o){return o.charCodeAt(0)===64}function ps(o,t){if(!(t===null||t.length===0))if(o===null||o.length===0)o=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){let r=t[i];typeof r=="number"?e=r:e===0||(e===-1||e===2?vp(o,e,r,null,t[++i]):vp(o,e,r,null,null))}}return o}function vp(o,t,e,i,r){let n=0,s=o.length;if(t===-1)s=-1;else for(;n<o.length;){let a=o[n++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=n-1;break}}}for(;n<o.length;){let a=o[n];if(typeof a=="number")break;if(a===e){if(i===null){r!==null&&(o[n+1]=r);return}else if(i===o[n+1]){o[n+2]=r;return}}n++,i!==null&&n++,r!==null&&n++}s!==-1&&(o.splice(s,0,t),n=s+1),o.splice(n++,0,e),i!==null&&o.splice(n++,0,i),r!==null&&o.splice(n++,0,r)}var Kp="ng-template";function uC(o,t,e,i){let r=0;if(i){for(;r<t.length&&typeof t[r]=="string";r+=2)if(t[r]==="class"&&lC(t[r+1].toLowerCase(),e,0)!==-1)return!0}else if(ph(o))return!1;if(r=t.indexOf(1,r),r>-1){let n;for(;++r<t.length&&typeof(n=t[r])=="string";)if(n.toLowerCase()===e)return!0}return!1}function ph(o){return o.type===4&&o.value!==Kp}function pC(o,t,e){let i=o.type===4&&!e?Kp:o.value;return t===i}function dC(o,t,e){let i=4,r=o.attrs,n=r!==null?vC(r):0,s=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!s&&!si(i)&&!si(l))return!1;if(s&&si(l))continue;s=!1,i=l|i&1;continue}if(!s)if(i&4){if(i=2|i&1,l!==""&&!pC(o,l,e)||l===""&&t.length===1){if(si(i))return!1;s=!0}}else if(i&8){if(r===null||!uC(o,r,l,e)){if(si(i))return!1;s=!0}}else{let h=t[++a],c=fC(l,r,ph(o),e);if(c===-1){if(si(i))return!1;s=!0;continue}if(h!==""){let u;if(c>n?u="":u=r[c+1].toLowerCase(),i&2&&h!==u){if(si(i))return!1;s=!0}}}}return si(i)||s}function si(o){return(o&1)===0}function fC(o,t,e,i){if(t===null)return-1;let r=0;if(i||!e){let n=!1;for(;r<t.length;){let s=t[r];if(s===o)return r;if(s===3||s===6)n=!0;else if(s===1||s===2){let a=t[++r];for(;typeof a=="string";)a=t[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=n?1:2}return-1}else return mC(t,o)}function ed(o,t,e=!1){for(let i=0;i<t.length;i++)if(dC(o,t[i],e))return!0;return!1}function gC(o){let t=o.attrs;if(t!=null){let e=t.indexOf(5);if(!(e&1))return t[e+1]}return null}function vC(o){for(let t=0;t<o.length;t++){let e=o[t];if(hC(e))return t}return o.length}function mC(o,t){let e=o.indexOf(4);if(e>-1)for(e++;e<o.length;){let i=o[e];if(typeof i=="number")return-1;if(i===t)return e;e++}return-1}function yC(o,t){e:for(let e=0;e<t.length;e++){let i=t[e];if(o.length===i.length){for(let r=0;r<o.length;r++)if(o[r]!==i[r])continue e;return!0}}return!1}function mp(o,t){return o?":not("+t.trim()+")":t}function CC(o){let t=o[0],e=1,i=2,r="",n=!1;for(;e<o.length;){let s=o[e];if(typeof s=="string")if(i&2){let a=o[++e];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!si(s)&&(t+=mp(n,r),r=""),i=s,n=n||!si(i);e++}return r!==""&&(t+=mp(n,r)),t}function bC(o){return o.map(CC).join(",")}function MC(o){let t=[],e=[],i=1,r=2;for(;i<o.length;){let n=o[i];if(typeof n=="string")r===2?n!==""&&t.push(n,o[++i]):r===8&&e.push(n);else{if(!si(r))break;r=n}i++}return{attrs:t,classes:e}}function Gi(o){return lh(()=>{let t=rd(o),e=Fr(ur({},t),{decls:o.decls,vars:o.vars,template:o.template,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,onPush:o.changeDetection===Jp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&o.dependencies||null,getStandaloneInjector:null,signals:o.signals??!1,data:o.data||{},encapsulation:o.encapsulation||ki.Emulated,styles:o.styles||ai,_:null,schemas:o.schemas||null,tView:null,id:""});nd(e);let i=o.dependencies;return e.directiveDefs=Cp(i,!1),e.pipeDefs=Cp(i,!0),e.id=wC(e),e})}function IC(o){return Sn(o)||td(o)}function SC(o){return o!==null}function Zr(o){return lh(()=>({type:o.type,bootstrap:o.bootstrap||ai,declarations:o.declarations||ai,imports:o.imports||ai,exports:o.exports||ai,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function yp(o,t){if(o==null)return In;let e={};for(let i in o)if(o.hasOwnProperty(i)){let r=o[i],n,s,a=_r.None;Array.isArray(r)?(a=r[0],n=r[1],s=r[2]??n):(n=r,s=r),t?(e[n]=a!==_r.None?[i,a]:i,t[n]=s):e[n]=i}return e}function Wo(o){return lh(()=>{let t=rd(o);return nd(t),t})}function Sn(o){return o[_y]||null}function td(o){return o[Vy]||null}function id(o){return o[Qy]||null}function TC(o){let t=Sn(o)||td(o)||id(o);return t!==null?t.standalone:!1}function rd(o){let t={};return{type:o.type,providersResolver:null,factory:null,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:o.inputs||In,exportAs:o.exportAs||null,standalone:o.standalone===!0,signals:o.signals===!0,selectors:o.selectors||ai,viewQuery:o.viewQuery||null,features:o.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:yp(o.inputs,t),outputs:yp(o.outputs),debugInfo:null}}function nd(o){o.features?.forEach(t=>t(o))}function Cp(o,t){if(!o)return null;let e=t?id:IC;return()=>(typeof o=="function"?o():o).map(i=>e(i)).filter(SC)}function wC(o){let t=0,e=[o.selectors,o.ngContentSelectors,o.hostVars,o.hostAttrs,o.consts,o.vars,o.decls,o.encapsulation,o.standalone,o.signals,o.exportAs,JSON.stringify(o.inputs),JSON.stringify(o.outputs),Object.getOwnPropertyNames(o.type.prototype),!!o.contentQueries,!!o.viewQuery].join("|");for(let r of e)t=Math.imul(31,t)+r.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function sd(o){return{\u0275providers:o}}function DC(...o){return{\u0275providers:od(!0,o),\u0275fromNgModule:!0}}function od(o,...t){let e=[],i=new Set,r,n=s=>{e.push(s)};return uh(t,s=>{let a=s;Ol(a,n,[],i)&&(r||=[],r.push(a))}),r!==void 0&&ad(r,n),e}function ad(o,t){for(let e=0;e<o.length;e++){let{ngModule:i,providers:r}=o[e];dh(r,n=>{t(n,i)})}}function Ol(o,t,e,i){if(o=oi(o),!o)return!1;let r=null,n=up(o),s=!n&&Sn(o);if(!n&&!s){let l=o.ngModule;if(n=up(l),n)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=o}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let h of l)Ol(h,t,e,i)}}else if(n){if(n.imports!=null&&!a){i.add(r);let h;try{uh(n.imports,c=>{Ol(c,t,e,i)&&(h||=[],h.push(c))})}finally{}h!==void 0&&ad(h,t)}if(!a){let h=cs(r)||(()=>new r);t({provide:r,useFactory:h,deps:ai},r),t({provide:$p,useValue:r,multi:!0},r),t({provide:us,useValue:()=>Ve(r),multi:!0},r)}let l=n.providers;if(l!=null&&!a){let h=o;dh(l,c=>{t(c,h)})}}else return!1;return r!==o&&o.providers!==void 0}function dh(o,t){for(let e of o)Wp(e)&&(e=e.\u0275providers),Array.isArray(e)?dh(e,t):t(e)}var xC=Ze({provide:String,useValue:Ze});function ld(o){return o!==null&&typeof o=="object"&&xC in o}function AC(o){return!!(o&&o.useExisting)}function EC(o){return!!(o&&o.useFactory)}function Nl(o){return typeof o=="function"}var Xo=new tt(""),To={},OC={},ml;function fh(){return ml===void 0&&(ml=new jo),ml}var fr=class{},Lo=class extends fr{get destroyed(){return this._destroyed}constructor(t,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ll(t,s=>this.processProvider(s)),this.records.set(Zp,mn(void 0,this)),r.has("environment")&&this.records.set(fr,mn(void 0,this));let n=this.records.get(Xo);n!=null&&typeof n.value=="string"&&this.scopes.add(n.value),this.injectorDefTypes=new Set(this.get($p,ai,je.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=Re(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of e)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Re(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let e=vn(this),i=ji(void 0),r;try{return t()}finally{vn(e),ji(i)}}get(t,e=hs,i=je.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(fp))return t[fp](this);i=Qo(i);let r,n=vn(this),s=ji(void 0);try{if(!(i&je.SkipSelf)){let l=this.records.get(t);if(l===void 0){let h=zC(t)&&hh(t);h&&this.injectableDefInScope(h)?l=mn(jl(t),To):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l)}let a=i&je.Self?fh():this.parent;return e=i&je.Optional&&e===hs?null:e,a.get(t,e)}catch(a){if(a.name==="NullInjectorError"){if((a[Oo]=a[Oo]||[]).unshift(hi(t)),n)throw a;return rC(a,t,"R3InjectorError",this.source)}else throw a}finally{ji(s),vn(n)}}resolveInjectorInitializers(){let t=Re(null),e=vn(this),i=ji(void 0),r;try{let n=this.get(us,ai,je.Self);for(let s of n)s()}finally{vn(e),ji(i),Re(t)}}toString(){let t=[],e=this.records;for(let i of e.keys())t.push(hi(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Be(205,!1)}processProvider(t){t=oi(t);let e=Nl(t)?t:oi(t&&t.provide),i=jC(t);if(!Nl(t)&&t.multi===!0){let r=this.records.get(e);r||(r=mn(void 0,To,!0),r.factory=()=>Al(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,i)}hydrate(t,e){let i=Re(null);try{return e.value===To&&(e.value=OC,e.value=e.factory()),typeof e.value=="object"&&e.value&&kC(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{Re(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=oi(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function jl(o){let t=hh(o),e=t!==null?t.factory:cs(o);if(e!==null)return e;if(o instanceof tt)throw new Be(204,!1);if(o instanceof Function)return NC(o);throw new Be(204,!1)}function NC(o){if(o.length>0)throw new Be(204,!1);let e=Uy(o);return e!==null?()=>e.factory(o):()=>new o}function jC(o){if(ld(o))return mn(void 0,o.useValue);{let t=LC(o);return mn(t,To)}}function LC(o,t,e){let i;if(Nl(o)){let r=oi(o);return cs(r)||jl(r)}else if(ld(o))i=()=>oi(o.useValue);else if(EC(o))i=()=>o.useFactory(...Al(o.deps||[]));else if(AC(o))i=()=>Ve(oi(o.useExisting));else{let r=oi(o&&(o.useClass||o.provide));if(PC(o))i=()=>new r(...Al(o.deps));else return cs(r)||jl(r)}return i}function mn(o,t,e=!1){return{factory:o,value:t,multi:e?[]:void 0}}function PC(o){return!!o.deps}function kC(o){return o!==null&&typeof o=="object"&&typeof o.ngOnDestroy=="function"}function zC(o){return typeof o=="function"||typeof o=="object"&&o instanceof tt}function Ll(o,t){for(let e of o)Array.isArray(e)?Ll(e,t):e&&Wp(e)?Ll(e.\u0275providers,t):t(e)}function RC(){return Xp()!==void 0||eC()!=null}function FC(o){return typeof o=="function"}var Zi=0,Ee=1,Me=2,wt=3,ci=4,Xt=5,ds=6,fs=7,ui=8,Tn=9,zi=10,zt=11,gs=12,bp=13,An=14,Ri=15,Is=16,yn=17,Qi=18,qo=19,hd=20,dr=21,yl=22,Vr=23,Wi=25,cd=1;var Qr=7,Po=8,wn=9,Wt=10,gh=function(o){return o[o.None=0]="None",o[o.HasTransplantedViews=2]="HasTransplantedViews",o}(gh||{});function Ur(o){return Array.isArray(o)&&typeof o[cd]=="object"}function $i(o){return Array.isArray(o)&&o[cd]===!0}function ud(o){return(o.flags&4)!==0}function vh(o){return o.componentOffset>-1}function mh(o){return(o.flags&1)===1}function Wr(o){return!!o.template}function BC(o){return(o[Me]&512)!==0}var Pl=class{constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}};function pd(o,t,e,i){t!==null?t.applyValueToInputSignal(t,i):o[e]=i}function dd(){return fd}function fd(o){return o.type.prototype.ngOnChanges&&(o.setInput=UC),HC}dd.ngInherit=!0;function HC(){let o=vd(this),t=o?.current;if(t){let e=o.previous;if(e===In)o.previous=t;else for(let i in t)e[i]=t[i];o.current=null,this.ngOnChanges(t)}}function UC(o,t,e,i,r){let n=this.declaredInputs[i],s=vd(o)||YC(o,{previous:In,current:null}),a=s.current||(s.current={}),l=s.previous,h=l[n];a[n]=new Pl(h&&h.currentValue,e,l===In),pd(o,t,r,e)}var gd="__ngSimpleChanges__";function vd(o){return o[gd]||null}function YC(o,t){return o[gd]=t}var Mp=null;var Li=function(o,t,e){Mp?.(o,t,e)},_C="svg",VC="math",QC=!1;function WC(){return QC}function Xi(o){for(;Array.isArray(o);)o=o[Zi];return o}function pi(o,t){return Xi(t[o.index])}function md(o,t){return o.data[t]}function $r(o,t){let e=t[o];return Ur(e)?e:e[Zi]}function XC(o){return(o[Me]&4)===4}function yh(o){return(o[Me]&128)===128}function qC(o){return $i(o[wt])}function ko(o,t){return t==null?null:o[t]}function yd(o){o[yn]=0}function GC(o){o[Me]&1024||(o[Me]|=1024,yh(o)&&vs(o))}function ZC(o,t){for(;o>0;)t=t[An],o--;return t}function Ch(o){return!!(o[Me]&9216||o[Vr]?.dirty)}function kl(o){o[zi].changeDetectionScheduler?.notify(1),Ch(o)?vs(o):o[Me]&64&&(WC()?(o[Me]|=1024,vs(o)):o[zi].changeDetectionScheduler?.notify())}function vs(o){o[zi].changeDetectionScheduler?.notify();let t=ms(o);for(;t!==null&&!(t[Me]&8192||(t[Me]|=8192,!yh(t)));)t=ms(t)}function Cd(o,t){if((o[Me]&256)===256)throw new Be(911,!1);o[dr]===null&&(o[dr]=[]),o[dr].push(t)}function $C(o,t){if(o[dr]===null)return;let e=o[dr].indexOf(t);e!==-1&&o[dr].splice(e,1)}function ms(o){let t=o[wt];return $i(t)?t[wt]:t}var Le={lFrame:Ad(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function JC(){return Le.lFrame.elementDepthCount}function KC(){Le.lFrame.elementDepthCount++}function eb(){Le.lFrame.elementDepthCount--}function bd(){return Le.bindingsEnabled}function Md(){return Le.skipHydrationRootTNode!==null}function tb(o){return Le.skipHydrationRootTNode===o}function ib(){Le.skipHydrationRootTNode=null}function at(){return Le.lFrame.lView}function di(){return Le.lFrame.tView}function gr(o){return Le.lFrame.contextLView=o,o[ui]}function vr(o){return Le.lFrame.contextLView=null,o}function fi(){let o=Id();for(;o!==null&&o.type===64;)o=o.parent;return o}function Id(){return Le.lFrame.currentTNode}function rb(){let o=Le.lFrame,t=o.currentTNode;return o.isParent?t:t.parent}function Ss(o,t){let e=Le.lFrame;e.currentTNode=o,e.isParent=t}function Sd(){return Le.lFrame.isParent}function Td(){Le.lFrame.isParent=!1}function nb(o){return Le.lFrame.bindingIndex=o}function sb(){return Le.lFrame.bindingIndex++}function ob(){return Le.lFrame.inI18n}function ab(o,t){let e=Le.lFrame;e.bindingIndex=e.bindingRootIndex=o,zl(t)}function lb(){return Le.lFrame.currentDirectiveIndex}function zl(o){Le.lFrame.currentDirectiveIndex=o}function wd(){return Le.lFrame.currentQueryIndex}function bh(o){Le.lFrame.currentQueryIndex=o}function hb(o){let t=o[Ee];return t.type===2?t.declTNode:t.type===1?o[Xt]:null}function Dd(o,t,e){if(e&je.SkipSelf){let r=t,n=o;for(;r=r.parent,r===null&&!(e&je.Host);)if(r=hb(n),r===null||(n=n[An],r.type&10))break;if(r===null)return!1;t=r,o=n}let i=Le.lFrame=xd();return i.currentTNode=t,i.lView=o,!0}function Mh(o){let t=xd(),e=o[Ee];Le.lFrame=t,t.currentTNode=e.firstChild,t.lView=o,t.tView=e,t.contextLView=o,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function xd(){let o=Le.lFrame,t=o===null?null:o.child;return t===null?Ad(o):t}function Ad(o){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return o!==null&&(o.child=t),t}function Ed(){let o=Le.lFrame;return Le.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}var Od=Ed;function Ih(){let o=Ed();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function cb(o){return(Le.lFrame.contextLView=ZC(o,Le.lFrame.contextLView))[ui]}function Nd(){return Le.lFrame.selectedIndex}function Xr(o){Le.lFrame.selectedIndex=o}function ub(){let o=Le.lFrame;return md(o.tView,o.selectedIndex)}function pb(){return Le.lFrame.currentNamespace}var jd=!0;function Sh(){return jd}function Th(o){jd=o}function db(o,t,e){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:n}=t.type.prototype;if(i){let s=fd(t);(e.preOrderHooks??=[]).push(o,s),(e.preOrderCheckHooks??=[]).push(o,s)}r&&(e.preOrderHooks??=[]).push(0-o,r),n&&((e.preOrderHooks??=[]).push(o,n),(e.preOrderCheckHooks??=[]).push(o,n))}function wh(o,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){let n=o.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:h,ngOnDestroy:c}=n;s&&(o.contentHooks??=[]).push(-e,s),a&&((o.contentHooks??=[]).push(e,a),(o.contentCheckHooks??=[]).push(e,a)),l&&(o.viewHooks??=[]).push(-e,l),h&&((o.viewHooks??=[]).push(e,h),(o.viewCheckHooks??=[]).push(e,h)),c!=null&&(o.destroyHooks??=[]).push(e,c)}}function wo(o,t,e){Ld(o,t,3,e)}function Do(o,t,e,i){(o[Me]&3)===e&&Ld(o,t,e,i)}function Cl(o,t){let e=o[Me];(e&3)===t&&(e&=16383,e+=1,o[Me]=e)}function Ld(o,t,e,i){let r=i!==void 0?o[yn]&65535:0,n=i??-1,s=t.length-1,a=0;for(let l=r;l<s;l++)if(typeof t[l+1]=="number"){if(a=t[l],i!=null&&a>=i)break}else t[l]<0&&(o[yn]+=65536),(a<n||n==-1)&&(fb(o,e,t,l),o[yn]=(o[yn]&4294901760)+l+2),l++}function Ip(o,t){Li(4,o,t);let e=Re(null);try{t.call(o)}finally{Re(e),Li(5,o,t)}}function fb(o,t,e,i){let r=e[i]<0,n=e[i+1],s=r?-e[i]:e[i],a=o[s];r?o[Me]>>14<o[yn]>>16&&(o[Me]&3)===t&&(o[Me]+=16384,Ip(a,n)):Ip(a,n)}var Mn=-1,ys=class{constructor(t,e,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}};function gb(o){return o instanceof ys}function vb(o){return(o.flags&8)!==0}function mb(o){return(o.flags&16)!==0}function Pd(o){return o!==Mn}function zo(o){return o&32767}function yb(o){return o>>16}function Ro(o,t){let e=yb(o),i=t;for(;e>0;)i=i[An],e--;return i}var Rl=!0;function Sp(o){let t=Rl;return Rl=o,t}var Cb=256,kd=Cb-1,zd=5,bb=0,Pi={};function Mb(o,t,e){let i;typeof e=="string"?i=e.charCodeAt(0)||0:e.hasOwnProperty(ls)&&(i=e[ls]),i==null&&(i=e[ls]=bb++);let r=i&kd,n=1<<r;t.data[o+(r>>zd)]|=n}function Rd(o,t){let e=Fd(o,t);if(e!==-1)return e;let i=t[Ee];i.firstCreatePass&&(o.injectorIndex=t.length,bl(i.data,o),bl(t,null),bl(i.blueprint,null));let r=Dh(o,t),n=o.injectorIndex;if(Pd(r)){let s=zo(r),a=Ro(r,t),l=a[Ee].data;for(let h=0;h<8;h++)t[n+h]=a[s+h]|l[s+h]}return t[n+8]=r,n}function bl(o,t){o.push(0,0,0,0,0,0,0,0,t)}function Fd(o,t){return o.injectorIndex===-1||o.parent&&o.parent.injectorIndex===o.injectorIndex||t[o.injectorIndex+8]===null?-1:o.injectorIndex}function Dh(o,t){if(o.parent&&o.parent.injectorIndex!==-1)return o.parent.injectorIndex;let e=0,i=null,r=t;for(;r!==null;){if(i=_d(r),i===null)return Mn;if(e++,r=r[An],i.injectorIndex!==-1)return i.injectorIndex|e<<16}return Mn}function Ib(o,t,e){Mb(o,t,e)}function Bd(o,t,e){if(e&je.Optional||o!==void 0)return o;ch(t,"NodeInjector")}function Hd(o,t,e,i){if(e&je.Optional&&i===void 0&&(i=null),!(e&(je.Self|je.Host))){let r=o[Tn],n=ji(void 0);try{return r?r.get(t,i,e&je.Optional):qp(t,i,e&je.Optional)}finally{ji(n)}}return Bd(i,t,e)}function Ud(o,t,e,i=je.Default,r){if(o!==null){if(t[Me]&2048&&!(i&je.Self)){let s=Db(o,t,e,i,Pi);if(s!==Pi)return s}let n=Yd(o,t,e,i,Pi);if(n!==Pi)return n}return Hd(t,e,i,r)}function Yd(o,t,e,i,r){let n=Tb(e);if(typeof n=="function"){if(!Dd(t,o,i))return i&je.Host?Bd(r,e,i):Hd(t,e,i,r);try{let s;if(s=n(i),s==null&&!(i&je.Optional))ch(e);else return s}finally{Od()}}else if(typeof n=="number"){let s=null,a=Fd(o,t),l=Mn,h=i&je.Host?t[Ri][Xt]:null;for((a===-1||i&je.SkipSelf)&&(l=a===-1?Dh(o,t):t[a+8],l===Mn||!wp(i,!1)?a=-1:(s=t[Ee],a=zo(l),t=Ro(l,t)));a!==-1;){let c=t[Ee];if(Tp(n,a,c.data)){let u=Sb(a,t,e,s,i,h);if(u!==Pi)return u}l=t[a+8],l!==Mn&&wp(i,t[Ee].data[a+8]===h)&&Tp(n,a,t)?(s=c,a=zo(l),t=Ro(l,t)):a=-1}}return r}function Sb(o,t,e,i,r,n){let s=t[Ee],a=s.data[o+8],l=i==null?vh(a)&&Rl:i!=s&&(a.type&3)!==0,h=r&je.Host&&n===a,c=xo(a,s,e,l,h);return c!==null?Dn(t,s,c,a):Pi}function xo(o,t,e,i,r){let n=o.providerIndexes,s=t.data,a=n&1048575,l=o.directiveStart,h=o.directiveEnd,c=n>>20,u=i?a:a+c,p=r?a+c:h;for(let f=u;f<p;f++){let g=s[f];if(f<l&&e===g||f>=l&&g.type===e)return f}if(r){let f=s[l];if(f&&Wr(f)&&f.type===e)return l}return null}function Dn(o,t,e,i){let r=o[e],n=t.data;if(gb(r)){let s=r;s.resolving&&qy(Xy(n[e]));let a=Sp(s.canSeeViewProviders);s.resolving=!0;let l,h=s.injectImpl?ji(s.injectImpl):null,c=Dd(o,i,je.Default);try{r=o[e]=s.factory(void 0,n,o,i),t.firstCreatePass&&e>=i.directiveStart&&db(e,n[e],t)}finally{h!==null&&ji(h),Sp(a),s.resolving=!1,Od()}}return r}function Tb(o){if(typeof o=="string")return o.charCodeAt(0)||0;let t=o.hasOwnProperty(ls)?o[ls]:void 0;return typeof t=="number"?t>=0?t&kd:wb:t}function Tp(o,t,e){let i=1<<o;return!!(e[t+(o>>zd)]&i)}function wp(o,t){return!(o&je.Self)&&!(o&je.Host&&t)}var Yr=class{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return Ud(this._tNode,this._lView,t,Qo(i),e)}};function wb(){return new Yr(fi(),at())}function Db(o,t,e,i,r){let n=o,s=t;for(;n!==null&&s!==null&&s[Me]&2048&&!(s[Me]&512);){let a=Yd(n,s,e,i|je.Self,Pi);if(a!==Pi)return a;let l=n.parent;if(!l){let h=s[hd];if(h){let c=h.get(e,Pi,i);if(c!==Pi)return c}l=_d(s),s=s[An]}n=l}return r}function _d(o){let t=o[Ee],e=t.type;return e===2?t.declTNode:e===1?o[Xt]:null}function Dp(o,t=null,e=null,i){let r=xb(o,t,e,i);return r.resolveInjectorInitializers(),r}function xb(o,t=null,e=null,i,r=new Set){let n=[e||ai,DC(o)];return i=i||(typeof o=="object"?void 0:hi(o)),new Lo(n,t||fh(),i||null,r)}var mr=(()=>{class o{static{this.THROW_IF_NOT_FOUND=hs}static{this.NULL=new jo}static create(e,i){if(Array.isArray(e))return Dp({name:""},i,e,"");{let r=e.name??"";return Dp({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=Ct({token:o,providedIn:"any",factory:()=>Ve(Zp)})}static{this.__NG_ELEMENT_ID__=-1}}return o})();var Ab="ngOriginalError";function Ml(o){return o[Ab]}var qi=class{constructor(){this._console=console}handleError(t){let e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&Ml(t);for(;e&&Ml(e);)e=Ml(e);return e||null}},Vd=new tt("",{providedIn:"root",factory:()=>It(qi).handleError.bind(void 0)}),Qd=(()=>{class o{static{this.__NG_ELEMENT_ID__=Eb}static{this.__NG_ENV_ID__=e=>e}}return o})(),Fl=class extends Qd{constructor(t){super(),this._lView=t}onDestroy(t){return Cd(this._lView,t),()=>$C(this._lView,t)}};function Eb(){return new Fl(at())}function Ob(){return En(fi(),at())}function En(o,t){return new gi(pi(o,t))}var gi=(()=>{class o{constructor(e){this.nativeElement=e}static{this.__NG_ELEMENT_ID__=Ob}}return o})();function Nb(o){return o instanceof gi?o.nativeElement:o}var Bl=class extends pr{constructor(t=!1){super(),this.destroyRef=void 0,this.__isAsync=t,RC()&&(this.destroyRef=It(Qd,{optional:!0})??void 0)}emit(t){let e=Re(null);try{super.next(t)}finally{Re(e)}}subscribe(t,e,i){let r=t,n=e||(()=>null),s=i;if(t&&typeof t=="object"){let l=t;r=l.next?.bind(l),n=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(n=Il(n),r&&(r=Il(r)),s&&(s=Il(s)));let a=super.subscribe({next:r,error:n,complete:s});return t instanceof Ht&&t.add(a),a}};function Il(o){return t=>{setTimeout(o,void 0,t)}}var li=Bl;function jb(){return this._results[Symbol.iterator]()}var Hl=class o{get changes(){return this._changes??=new li}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let e=o.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=jb)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let i=oC(t);(this._changesDetected=!sC(this._results,i,e))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function Wd(o){return(o.flags&128)===128}var Xd=new Map,Lb=0;function Pb(){return Lb++}function kb(o){Xd.set(o[qo],o)}function zb(o){Xd.delete(o[qo])}var xp="__ngContext__";function qr(o,t){Ur(t)?(o[xp]=t[qo],kb(t)):o[xp]=t}function qd(o){return Zd(o[gs])}function Gd(o){return Zd(o[ci])}function Zd(o){for(;o!==null&&!$i(o);)o=o[ci];return o}var Ul;function $d(o){Ul=o}function Rb(){if(Ul!==void 0)return Ul;if(typeof document<"u")return document;throw new Be(210,!1)}var xh=new tt("",{providedIn:"root",factory:()=>Fb}),Fb="ng",Ah=new tt(""),On=new tt("",{providedIn:"platform",factory:()=>"unknown"});var Eh=new tt("",{providedIn:"root",factory:()=>Rb().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Bb="h",Hb="b";var Ub=()=>null;function Oh(o,t,e=!1){return Ub(o,t,e)}var Jd=!1,Yb=new tt("",{providedIn:"root",factory:()=>Jd});var Jr=function(o){return o[o.Important=1]="Important",o[o.DashCase=2]="DashCase",o}(Jr||{}),_b;function Nh(o,t){return _b(o,t)}function Cn(o,t,e,i,r){if(i!=null){let n,s=!1;$i(i)?n=i:Ur(i)&&(s=!0,i=i[Zi]);let a=Xi(i);o===0&&e!==null?r==null?sf(t,e,a):Fo(t,e,a,r||null,!0):o===1&&e!==null?Fo(t,e,a,r||null,!0):o===2?rM(t,a,s):o===3&&t.destroyNode(a),n!=null&&sM(t,o,n,e,r)}}function Vb(o,t){return o.createText(t)}function Kd(o,t,e){return o.createElement(t,e)}function Qb(o,t){ef(o,t),t[Zi]=null,t[Xt]=null}function Wb(o,t,e,i,r,n){i[Zi]=r,i[Xt]=t,Go(o,i,e,1,r,n)}function ef(o,t){t[zi].changeDetectionScheduler?.notify(1),Go(o,t,t[zt],2,null,null)}function Xb(o){let t=o[gs];if(!t)return Sl(o[Ee],o);for(;t;){let e=null;if(Ur(t))e=t[gs];else{let i=t[Wt];i&&(e=i)}if(!e){for(;t&&!t[ci]&&t!==o;)Ur(t)&&Sl(t[Ee],t),t=t[wt];t===null&&(t=o),Ur(t)&&Sl(t[Ee],t),e=t&&t[ci]}t=e}}function qb(o,t,e,i){let r=Wt+i,n=e.length;i>0&&(e[r-1][ci]=t),i<n-Wt?(t[ci]=e[r],Gp(e,Wt+i,t)):(e.push(t),t[ci]=null),t[wt]=e;let s=t[Is];s!==null&&e!==s&&Gb(s,t);let a=t[Qi];a!==null&&a.insertView(o),kl(t),t[Me]|=128}function Gb(o,t){let e=o[wn],r=t[wt][wt][Ri];t[Ri]!==r&&(o[Me]|=gh.HasTransplantedViews),e===null?o[wn]=[t]:e.push(t)}function tf(o,t){let e=o[wn],i=e.indexOf(t);e.splice(i,1)}function Yl(o,t){if(o.length<=Wt)return;let e=Wt+t,i=o[e];if(i){let r=i[Is];r!==null&&r!==o&&tf(r,i),t>0&&(o[e-1][ci]=i[ci]);let n=No(o,Wt+t);Qb(i[Ee],i);let s=n[Qi];s!==null&&s.detachView(n[Ee]),i[wt]=null,i[ci]=null,i[Me]&=-129}return i}function rf(o,t){if(!(t[Me]&256)){let e=t[zt];e.destroyNode&&Go(o,t,e,3,null,null),Xb(t)}}function Sl(o,t){if(t[Me]&256)return;let e=Re(null);try{t[Me]&=-129,t[Me]|=256,t[Vr]&&qu(t[Vr]),$b(o,t),Zb(o,t),t[Ee].type===1&&t[zt].destroy();let i=t[Is];if(i!==null&&$i(t[wt])){i!==t[wt]&&tf(i,t);let r=t[Qi];r!==null&&r.detachView(o)}zb(t)}finally{Re(e)}}function Zb(o,t){let e=o.cleanup,i=t[fs];if(e!==null)for(let n=0;n<e.length-1;n+=2)if(typeof e[n]=="string"){let s=e[n+3];s>=0?i[s]():i[-s].unsubscribe(),n+=2}else{let s=i[e[n+1]];e[n].call(s)}i!==null&&(t[fs]=null);let r=t[dr];if(r!==null){t[dr]=null;for(let n=0;n<r.length;n++){let s=r[n];s()}}}function $b(o,t){let e;if(o!=null&&(e=o.destroyHooks)!=null)for(let i=0;i<e.length;i+=2){let r=t[e[i]];if(!(r instanceof ys)){let n=e[i+1];if(Array.isArray(n))for(let s=0;s<n.length;s+=2){let a=r[n[s]],l=n[s+1];Li(4,a,l);try{l.call(a)}finally{Li(5,a,l)}}else{Li(4,r,n);try{n.call(r)}finally{Li(5,r,n)}}}}}function nf(o,t,e){return Jb(o,t.parent,e)}function Jb(o,t,e){let i=t;for(;i!==null&&i.type&40;)t=i,i=t.parent;if(i===null)return e[Zi];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:n}=o.data[i.directiveStart+r];if(n===ki.None||n===ki.Emulated)return null}return pi(i,e)}}function Fo(o,t,e,i,r){o.insertBefore(t,e,i,r)}function sf(o,t,e){o.appendChild(t,e)}function Ap(o,t,e,i,r){i!==null?Fo(o,t,e,i,r):sf(o,t,e)}function Kb(o,t,e,i){o.removeChild(t,e,i)}function jh(o,t){return o.parentNode(t)}function eM(o,t){return o.nextSibling(t)}function of(o,t,e){return iM(o,t,e)}function tM(o,t,e){return o.type&40?pi(o,e):null}var iM=tM,Ep;function Lh(o,t,e,i){let r=nf(o,i,t),n=t[zt],s=i.parent||t[Xt],a=of(s,i,t);if(r!=null)if(Array.isArray(e))for(let l=0;l<e.length;l++)Ap(n,r,e[l],a,!1);else Ap(n,r,e,a,!1);Ep!==void 0&&Ep(n,i,t,e,r)}function Ao(o,t){if(t!==null){let e=t.type;if(e&3)return pi(t,o);if(e&4)return _l(-1,o[t.index]);if(e&8){let i=t.child;if(i!==null)return Ao(o,i);{let r=o[t.index];return $i(r)?_l(-1,r):Xi(r)}}else{if(e&32)return Nh(t,o)()||Xi(o[t.index]);{let i=af(o,t);if(i!==null){if(Array.isArray(i))return i[0];let r=ms(o[Ri]);return Ao(r,i)}else return Ao(o,t.next)}}}return null}function af(o,t){if(t!==null){let i=o[Ri][Xt],r=t.projection;return i.projection[r]}return null}function _l(o,t){let e=Wt+o+1;if(e<t.length){let i=t[e],r=i[Ee].firstChild;if(r!==null)return Ao(i,r)}return t[Qr]}function rM(o,t,e){let i=jh(o,t);i&&Kb(o,i,t,e)}function Ph(o,t,e,i,r,n,s){for(;e!=null;){let a=i[e.index],l=e.type;if(s&&t===0&&(a&&qr(Xi(a),i),e.flags|=2),(e.flags&32)!==32)if(l&8)Ph(o,t,e.child,i,r,n,!1),Cn(t,o,r,a,n);else if(l&32){let h=Nh(e,i),c;for(;c=h();)Cn(t,o,r,c,n);Cn(t,o,r,a,n)}else l&16?lf(o,t,i,e,r,n):Cn(t,o,r,a,n);e=s?e.projectionNext:e.next}}function Go(o,t,e,i,r,n){Ph(e,i,o.firstChild,t,r,n,!1)}function nM(o,t,e){let i=t[zt],r=nf(o,e,t),n=e.parent||t[Xt],s=of(n,e,t);lf(i,0,t,e,r,s)}function lf(o,t,e,i,r,n){let s=e[Ri],l=s[Xt].projection[i.projection];if(Array.isArray(l))for(let h=0;h<l.length;h++){let c=l[h];Cn(t,o,r,c,n)}else{let h=l,c=s[wt];Wd(i)&&(h.flags|=128),Ph(o,t,h,c,r,n,!0)}}function sM(o,t,e,i,r){let n=e[Qr],s=Xi(e);n!==s&&Cn(t,o,i,n,r);for(let a=Wt;a<e.length;a++){let l=e[a];Go(l[Ee],l,o,t,i,n)}}function oM(o,t,e){o.setAttribute(t,"style",e)}function hf(o,t,e){e===""?o.removeAttribute(t,"class"):o.setAttribute(t,"class",e)}function cf(o,t,e){let{mergedAttrs:i,classes:r,styles:n}=e;i!==null&&El(o,t,i),r!==null&&hf(o,t,r),n!==null&&oM(o,t,n)}var uf={};function pf(o=1){df(di(),at(),Nd()+o,!1)}function df(o,t,e,i){if(!i)if((t[Me]&3)===3){let n=o.preOrderCheckHooks;n!==null&&wo(t,n,e)}else{let n=o.preOrderHooks;n!==null&&Do(t,n,0,e)}Xr(e)}function Dt(o,t=je.Default){let e=at();if(e===null)return Ve(o,t);let i=fi();return Ud(i,e,oi(o),t)}function ff(o,t,e,i,r,n){let s=Re(null);try{let a=null;r&_r.SignalBased&&(a=t[i][Vu]),a!==null&&a.transformFn!==void 0&&(n=a.transformFn(n)),r&_r.HasDecoratorInputTransform&&(n=o.inputTransforms[i].call(t,n)),o.setInput!==null?o.setInput(t,a,n,e,i):pd(t,a,i,n)}finally{Re(s)}}function aM(o,t){let e=o.hostBindingOpCodes;if(e!==null)try{for(let i=0;i<e.length;i++){let r=e[i];if(r<0)Xr(~r);else{let n=r,s=e[++i],a=e[++i];ab(s,n);let l=t[n];a(2,l)}}}finally{Xr(-1)}}function Zo(o,t,e,i,r,n,s,a,l,h,c){let u=t.blueprint.slice();return u[Zi]=r,u[Me]=i|4|128|8|64,(h!==null||o&&o[Me]&2048)&&(u[Me]|=2048),yd(u),u[wt]=u[An]=o,u[ui]=e,u[zi]=s||o&&o[zi],u[zt]=a||o&&o[zt],u[Tn]=l||o&&o[Tn]||null,u[Xt]=n,u[qo]=Pb(),u[ds]=c,u[hd]=h,u[Ri]=t.type==2?o[Ri]:u,u}function Ts(o,t,e,i,r){let n=o.data[t];if(n===null)n=lM(o,t,e,i,r),ob()&&(n.flags|=32);else if(n.type&64){n.type=e,n.value=i,n.attrs=r;let s=rb();n.injectorIndex=s===null?-1:s.injectorIndex}return Ss(n,!0),n}function lM(o,t,e,i,r){let n=Id(),s=Sd(),a=s?n:n&&n.parent,l=o.data[t]=fM(o,a,e,t,i,r);return o.firstChild===null&&(o.firstChild=l),n!==null&&(s?n.child==null&&l.parent!==null&&(n.child=l):n.next===null&&(n.next=l,l.prev=n)),l}function gf(o,t,e,i){if(e===0)return-1;let r=t.length;for(let n=0;n<e;n++)t.push(i),o.blueprint.push(i),o.data.push(null);return r}function vf(o,t,e,i,r){let n=Nd(),s=i&2;try{Xr(-1),s&&t.length>Wi&&df(o,t,Wi,!1),Li(s?2:0,r),e(i,r)}finally{Xr(n),Li(s?3:1,r)}}function mf(o,t,e){if(ud(t)){let i=Re(null);try{let r=t.directiveStart,n=t.directiveEnd;for(let s=r;s<n;s++){let a=o.data[s];if(a.contentQueries){let l=e[s];a.contentQueries(1,l,s)}}}finally{Re(i)}}}function yf(o,t,e){bd()&&(MM(o,t,e,pi(e,t)),(e.flags&64)===64&&Sf(o,t,e))}function Cf(o,t,e=pi){let i=t.localNames;if(i!==null){let r=t.index+1;for(let n=0;n<i.length;n+=2){let s=i[n+1],a=s===-1?e(t,o):o[s];o[r++]=a}}}function bf(o){let t=o.tView;return t===null||t.incompleteFirstPass?o.tView=kh(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts,o.id):t}function kh(o,t,e,i,r,n,s,a,l,h,c){let u=Wi+i,p=u+r,f=hM(u,p),g=typeof h=="function"?h():h;return f[Ee]={type:o,blueprint:f,template:e,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof n=="function"?n():n,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:g,incompleteFirstPass:!1,ssrId:c}}function hM(o,t){let e=[];for(let i=0;i<t;i++)e.push(i<o?null:uf);return e}function cM(o,t,e,i){let n=i.get(Yb,Jd)||e===ki.ShadowDom,s=o.selectRootElement(t,n);return uM(s),s}function uM(o){pM(o)}var pM=()=>null;function dM(o,t,e,i){let r=Df(t);r.push(e),o.firstCreatePass&&xf(o).push(i,r.length-1)}function fM(o,t,e,i,r,n){let s=t?t.injectorIndex:-1,a=0;return Md()&&(a|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:n,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Op(o,t,e,i,r){for(let n in t){if(!t.hasOwnProperty(n))continue;let s=t[n];if(s===void 0)continue;i??={};let a,l=_r.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let h=n;if(r!==null){if(!r.hasOwnProperty(n))continue;h=r[n]}o===0?Np(i,e,h,a,l):Np(i,e,h,a)}return i}function Np(o,t,e,i,r){let n;o.hasOwnProperty(e)?(n=o[e]).push(t,i):n=o[e]=[t,i],r!==void 0&&n.push(r)}function gM(o,t,e){let i=t.directiveStart,r=t.directiveEnd,n=o.data,s=t.attrs,a=[],l=null,h=null;for(let c=i;c<r;c++){let u=n[c],p=e?e.get(u):null,f=p?p.inputs:null,g=p?p.outputs:null;l=Op(0,u.inputs,c,l,f),h=Op(1,u.outputs,c,h,g);let v=l!==null&&s!==null&&!ph(t)?OM(l,c,s):null;a.push(v)}l!==null&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=h}function vM(o){return o==="class"?"className":o==="for"?"htmlFor":o==="formaction"?"formAction":o==="innerHtml"?"innerHTML":o==="readonly"?"readOnly":o==="tabindex"?"tabIndex":o}function mM(o,t,e,i,r,n,s,a){let l=pi(t,e),h=t.inputs,c;!a&&h!=null&&(c=h[i])?(zh(o,e,c,i,r),vh(t)&&yM(e,t.index)):t.type&3?(i=vM(i),r=s!=null?s(r,t.value||"",i):r,n.setProperty(l,i,r)):t.type&12}function yM(o,t){let e=$r(t,o);e[Me]&16||(e[Me]|=64)}function Mf(o,t,e,i){if(bd()){let r=i===null?null:{"":-1},n=SM(o,e),s,a;n===null?s=a=null:[s,a]=n,s!==null&&If(o,t,e,s,r,a),r&&TM(e,i,r)}e.mergedAttrs=ps(e.mergedAttrs,e.attrs)}function If(o,t,e,i,r,n){for(let h=0;h<i.length;h++)Ib(Rd(e,t),o,i[h].type);DM(e,o.data.length,i.length);for(let h=0;h<i.length;h++){let c=i[h];c.providersResolver&&c.providersResolver(c)}let s=!1,a=!1,l=gf(o,t,i.length,null);for(let h=0;h<i.length;h++){let c=i[h];e.mergedAttrs=ps(e.mergedAttrs,c.hostAttrs),xM(o,e,t,l,c),wM(l,c,r),c.contentQueries!==null&&(e.flags|=4),(c.hostBindings!==null||c.hostAttrs!==null||c.hostVars!==0)&&(e.flags|=64);let u=c.type.prototype;!s&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((o.preOrderHooks??=[]).push(e.index),s=!0),!a&&(u.ngOnChanges||u.ngDoCheck)&&((o.preOrderCheckHooks??=[]).push(e.index),a=!0),l++}gM(o,e,n)}function CM(o,t,e,i,r){let n=r.hostBindings;if(n){let s=o.hostBindingOpCodes;s===null&&(s=o.hostBindingOpCodes=[]);let a=~t.index;bM(s)!=a&&s.push(a),s.push(e,i,n)}}function bM(o){let t=o.length;for(;t>0;){let e=o[--t];if(typeof e=="number"&&e<0)return e}return 0}function MM(o,t,e,i){let r=e.directiveStart,n=e.directiveEnd;vh(e)&&AM(t,e,o.data[r+e.componentOffset]),o.firstCreatePass||Rd(e,t),qr(i,t);let s=e.initialInputs;for(let a=r;a<n;a++){let l=o.data[a],h=Dn(t,o,a,e);if(qr(h,t),s!==null&&EM(t,a-r,h,l,e,s),Wr(l)){let c=$r(e.index,t);c[ui]=Dn(t,o,a,e)}}}function Sf(o,t,e){let i=e.directiveStart,r=e.directiveEnd,n=e.index,s=lb();try{Xr(n);for(let a=i;a<r;a++){let l=o.data[a],h=t[a];zl(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&IM(l,h)}}finally{Xr(-1),zl(s)}}function IM(o,t){o.hostBindings!==null&&o.hostBindings(1,t)}function SM(o,t){let e=o.directiveRegistry,i=null,r=null;if(e)for(let n=0;n<e.length;n++){let s=e[n];if(ed(t,s.selectors,!1))if(i||(i=[]),Wr(s))if(s.findHostDirectiveDefs!==null){let a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s);let l=a.length;Vl(o,t,l)}else i.unshift(s),Vl(o,t,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return i===null?null:[i,r]}function Vl(o,t,e){t.componentOffset=e,(o.components??=[]).push(t.index)}function TM(o,t,e){if(t){let i=o.localNames=[];for(let r=0;r<t.length;r+=2){let n=e[t[r+1]];if(n==null)throw new Be(-301,!1);i.push(t[r],n)}}}function wM(o,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=o;Wr(t)&&(e[""]=o)}}function DM(o,t,e){o.flags|=1,o.directiveStart=t,o.directiveEnd=t+e,o.providerIndexes=t}function xM(o,t,e,i,r){o.data[i]=r;let n=r.factory||(r.factory=cs(r.type,!0)),s=new ys(n,Wr(r),Dt);o.blueprint[i]=s,e[i]=s,CM(o,t,i,gf(o,e,r.hostVars,uf),r)}function AM(o,t,e){let i=pi(t,o),r=bf(e),n=o[zi].rendererFactory,s=16;e.signals?s=4096:e.onPush&&(s=64);let a=$o(o,Zo(o,r,null,s,i,t,null,n.createRenderer(i,e),null,null,null));o[t.index]=a}function EM(o,t,e,i,r,n){let s=n[t];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],h=s[a++],c=s[a++],u=s[a++];ff(i,e,l,h,c,u)}}function OM(o,t,e){let i=null,r=0;for(;r<e.length;){let n=e[r];if(n===0){r+=4;continue}else if(n===5){r+=2;continue}if(typeof n=="number")break;if(o.hasOwnProperty(n)){i===null&&(i=[]);let s=o[n];for(let a=0;a<s.length;a+=3)if(s[a]===t){i.push(n,s[a+1],s[a+2],e[r+1]);break}}r+=2}return i}function Tf(o,t,e,i){return[o,!0,0,t,null,i,null,e,null,null]}function wf(o,t){let e=o.contentQueries;if(e!==null){let i=Re(null);try{for(let r=0;r<e.length;r+=2){let n=e[r],s=e[r+1];if(s!==-1){let a=o.data[s];bh(n),a.contentQueries(2,t[s],s)}}}finally{Re(i)}}}function $o(o,t){return o[gs]?o[bp][ci]=t:o[gs]=t,o[bp]=t,t}function Ql(o,t,e){bh(0);let i=Re(null);try{t(o,e)}finally{Re(i)}}function Df(o){return o[fs]||(o[fs]=[])}function xf(o){return o.cleanup||(o.cleanup=[])}function Af(o,t){let e=o[Tn],i=e?e.get(qi,null):null;i&&i.handleError(t)}function zh(o,t,e,i,r){for(let n=0;n<e.length;){let s=e[n++],a=e[n++],l=e[n++],h=t[s],c=o.data[s];ff(c,h,i,a,l,r)}}function NM(o,t){let e=$r(t,o),i=e[Ee];jM(i,e);let r=e[Zi];r!==null&&e[ds]===null&&(e[ds]=Oh(r,e[Tn])),Rh(i,e,e[ui])}function jM(o,t){for(let e=t.length;e<o.blueprint.length;e++)t.push(o.blueprint[e])}function Rh(o,t,e){Mh(t);try{let i=o.viewQuery;i!==null&&Ql(1,i,e);let r=o.template;r!==null&&vf(o,t,r,1,e),o.firstCreatePass&&(o.firstCreatePass=!1),t[Qi]?.finishViewCreation(o),o.staticContentQueries&&wf(o,t),o.staticViewQueries&&Ql(2,o.viewQuery,e);let n=o.components;n!==null&&LM(t,n)}catch(i){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),i}finally{t[Me]&=-5,Ih()}}function LM(o,t){for(let e=0;e<t.length;e++)NM(o,t[e])}function PM(o,t,e,i){let r=Re(null);try{let n=t.tView,a=o[Me]&4096?4096:16,l=Zo(o,n,e,a,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),h=o[t.index];l[Is]=h;let c=o[Qi];return c!==null&&(l[Qi]=c.createEmbeddedView(n)),Rh(n,l,e),l}finally{Re(r)}}function jp(o,t){return!t||t.firstChild===null||Wd(o)}function kM(o,t,e,i=!0){let r=t[Ee];if(qb(r,t,o,e),i){let s=_l(e,o),a=t[zt],l=jh(a,o[Qr]);l!==null&&Wb(r,o[Xt],a,t,l,s)}let n=t[ds];n!==null&&n.firstChild!==null&&(n.firstChild=null)}function Bo(o,t,e,i,r=!1){for(;e!==null;){let n=t[e.index];n!==null&&i.push(Xi(n)),$i(n)&&zM(n,i);let s=e.type;if(s&8)Bo(o,t,e.child,i);else if(s&32){let a=Nh(e,t),l;for(;l=a();)i.push(l)}else if(s&16){let a=af(t,e);if(Array.isArray(a))i.push(...a);else{let l=ms(t[Ri]);Bo(l[Ee],l,a,i,!0)}}e=r?e.projectionNext:e.next}return i}function zM(o,t){for(let e=Wt;e<o.length;e++){let i=o[e],r=i[Ee].firstChild;r!==null&&Bo(i[Ee],i,r,t)}o[Qr]!==o[Zi]&&t.push(o[Qr])}var Ef=[];function RM(o){return o[Vr]??FM(o)}function FM(o){let t=Ef.pop()??Object.create(HM);return t.lView=o,t}function BM(o){o.lView[Vr]!==o&&(o.lView=null,Ef.push(o))}var HM=Fr(ur({},Qu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:o=>{vs(o.lView)},consumerOnSignalRead(){this.lView[Vr]=this}}),Of=100;function Nf(o,t=!0,e=0){let i=o[zi],r=i.rendererFactory,n=!1;n||r.begin?.();try{UM(o,e)}catch(s){throw t&&Af(o,s),s}finally{n||(r.end?.(),i.inlineEffectRunner?.flush())}}function UM(o,t){Wl(o,t);let e=0;for(;Ch(o);){if(e===Of)throw new Be(103,!1);e++,Wl(o,1)}}function YM(o,t,e,i){let r=t[Me];if((r&256)===256)return;let n=!1;!n&&t[zi].inlineEffectRunner?.flush(),Mh(t);let s=null,a=null;!n&&_M(o)&&(a=RM(t),s=Wu(a));try{yd(t),nb(o.bindingStartIndex),e!==null&&vf(o,t,e,2,i);let l=(r&3)===3;if(!n)if(l){let u=o.preOrderCheckHooks;u!==null&&wo(t,u,null)}else{let u=o.preOrderHooks;u!==null&&Do(t,u,0,null),Cl(t,0)}if(VM(t),jf(t,0),o.contentQueries!==null&&wf(o,t),!n)if(l){let u=o.contentCheckHooks;u!==null&&wo(t,u)}else{let u=o.contentHooks;u!==null&&Do(t,u,1),Cl(t,1)}aM(o,t);let h=o.components;h!==null&&Pf(t,h,0);let c=o.viewQuery;if(c!==null&&Ql(2,c,i),!n)if(l){let u=o.viewCheckHooks;u!==null&&wo(t,u)}else{let u=o.viewHooks;u!==null&&Do(t,u,2),Cl(t,2)}if(o.firstUpdatePass===!0&&(o.firstUpdatePass=!1),t[yl]){for(let u of t[yl])u();t[yl]=null}n||(t[Me]&=-73)}catch(l){throw vs(t),l}finally{a!==null&&(Xu(a,s),BM(a)),Ih()}}function _M(o){return o.type!==2}function jf(o,t){for(let e=qd(o);e!==null;e=Gd(e))for(let i=Wt;i<e.length;i++){let r=e[i];Lf(r,t)}}function VM(o){for(let t=qd(o);t!==null;t=Gd(t)){if(!(t[Me]&gh.HasTransplantedViews))continue;let e=t[wn];for(let i=0;i<e.length;i++){let r=e[i],n=r[wt];GC(r)}}}function QM(o,t,e){let i=$r(t,o);Lf(i,e)}function Lf(o,t){yh(o)&&Wl(o,t)}function Wl(o,t){let i=o[Ee],r=o[Me],n=o[Vr],s=!!(t===0&&r&16);if(s||=!!(r&64&&t===0),s||=!!(r&1024),s||=!!(n?.dirty&&sl(n)),n&&(n.dirty=!1),o[Me]&=-9217,s)YM(i,o,i.template,o[ui]);else if(r&8192){jf(o,1);let a=i.components;a!==null&&Pf(o,a,1)}}function Pf(o,t,e){for(let i=0;i<t.length;i++)QM(o,t[i],e)}function Fh(o){for(o[zi].changeDetectionScheduler?.notify();o;){o[Me]|=64;let t=ms(o);if(BC(o)&&!t)return o;o=t}return null}var Cs=class{get rootNodes(){let t=this._lView,e=t[Ee];return Bo(e,t,e.firstChild,[])}constructor(t,e,i=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ui]}set context(t){this._lView[ui]=t}get destroyed(){return(this._lView[Me]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[wt];if($i(t)){let e=t[Po],i=e?e.indexOf(this):-1;i>-1&&(Yl(t,i),No(e,i))}this._attachedToViewContainer=!1}rf(this._lView[Ee],this._lView)}onDestroy(t){Cd(this._lView,t)}markForCheck(){Fh(this._cdRefInjectingView||this._lView)}detach(){this._lView[Me]&=-129}reattach(){kl(this._lView),this._lView[Me]|=128}detectChanges(){this._lView[Me]|=1024,Nf(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Be(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,ef(this._lView[Ee],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Be(902,!1);this._appRef=t,kl(this._lView)}},bs=(()=>{class o{static{this.__NG_ELEMENT_ID__=qM}}return o})(),WM=bs,XM=class extends WM{constructor(t,e,i){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,i){let r=PM(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:i});return new Cs(r)}};function qM(){return Jo(fi(),at())}function Jo(o,t){return o.type&4?new XM(t,o,En(o,t)):null}var $A=new RegExp(`^(\\d+)*(${Hb}|${Bb})*(.*)`);var GM=()=>null;function Lp(o,t){return GM(o,t)}var Xl=class{},ql=class{},Ho=class{};function ZM(o){let t=Error(`No component factory found for ${hi(o)}.`);return t[$M]=o,t}var $M="ngComponent";var Gl=class{resolveComponentFactory(t){throw ZM(t)}},Bh=(()=>{class o{static{this.NULL=new Gl}}return o})(),Ms=class{},Kr=(()=>{class o{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>JM()}}return o})();function JM(){let o=at(),t=fi(),e=$r(t.index,o);return(Ur(e)?e:o)[zt]}var KM=(()=>{class o{static{this.\u0275prov=Ct({token:o,providedIn:"root",factory:()=>null})}}return o})(),Tl={};var Pp=new Set;function kf(o){Pp.has(o)||(Pp.add(o),performance?.mark?.("mark_feature_usage",{detail:{feature:o}}))}function kp(...o){}function e0(){let o=typeof as.requestAnimationFrame=="function",t=as[o?"requestAnimationFrame":"setTimeout"],e=as[o?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&e){let i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i);let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}var Nt=class o{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new li(!1),this.onMicrotaskEmpty=new li(!1),this.onStable=new li(!1),this.onError=new li(!1),typeof Zone>"u")throw new Be(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&e,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=e0().nativeRequestAnimationFrame,r0(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!o.isInAngularZone())throw new Be(909,!1)}static assertNotInAngularZone(){if(o.isInAngularZone())throw new Be(909,!1)}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,r){let n=this._inner,s=n.scheduleEventTask("NgZoneEvent: "+r,t,t0,kp,kp);try{return n.runTask(s,e,i)}finally{n.cancelTask(s)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}},t0={};function Hh(o){if(o._nesting==0&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function i0(o){o.isCheckStableRunning||o.lastRequestAnimationFrameId!==-1||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(as,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,Zl(o),o.isCheckStableRunning=!0,Hh(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),Zl(o))}function r0(o){let t=()=>{i0(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,r,n,s,a)=>{if(n0(a))return e.invokeTask(r,n,s,a);try{return zp(o),e.invokeTask(r,n,s,a)}finally{(o.shouldCoalesceEventChangeDetection&&n.type==="eventTask"||o.shouldCoalesceRunChangeDetection)&&t(),Rp(o)}},onInvoke:(e,i,r,n,s,a,l)=>{try{return zp(o),e.invoke(r,n,s,a,l)}finally{o.shouldCoalesceRunChangeDetection&&t(),Rp(o)}},onHasTask:(e,i,r,n)=>{e.hasTask(r,n),i===r&&(n.change=="microTask"?(o._hasPendingMicrotasks=n.microTask,Zl(o),Hh(o)):n.change=="macroTask"&&(o.hasPendingMacrotasks=n.macroTask))},onHandleError:(e,i,r,n)=>(e.handleError(r,n),o.runOutsideAngular(()=>o.onError.emit(n)),!1)})}function Zl(o){o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&o.lastRequestAnimationFrameId!==-1?o.hasPendingMicrotasks=!0:o.hasPendingMicrotasks=!1}function zp(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function Rp(o){o._nesting--,Hh(o)}function n0(o){return!Array.isArray(o)||o.length!==1?!1:o[0].data?.__ignore_ng_zone__===!0}var zf=(()=>{class o{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let e=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of e)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=Ct({token:o,providedIn:"root",factory:()=>new o})}}return o})();function $l(o,t,e){let i=e?o.styles:null,r=e?o.classes:null,n=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")n=a;else if(n==1)r=hp(r,a);else if(n==2){let l=a,h=t[++s];i=hp(i,l+": "+h+";")}}e?o.styles=i:o.stylesWithoutHost=i,e?o.classes=r:o.classesWithoutHost=r}var Jl=class extends Bh{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=Sn(t);return new Uo(e,this.ngModule)}};function Fp(o){let t=[];for(let e in o){if(!o.hasOwnProperty(e))continue;let i=o[e];i!==void 0&&t.push({propName:Array.isArray(i)?i[0]:i,templateName:e})}return t}function s0(o){let t=o.toLowerCase();return t==="svg"?_C:t==="math"?VC:null}var Kl=class{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,i){i=Qo(i);let r=this.injector.get(t,Tl,i);return r!==Tl||e===Tl?r:this.parentInjector.get(t,e,i)}},Uo=class extends Ho{get inputs(){let t=this.componentDef,e=t.inputTransforms,i=Fp(t.inputs);if(e!==null)for(let r of i)e.hasOwnProperty(r.propName)&&(r.transform=e[r.propName]);return i}get outputs(){return Fp(this.componentDef.outputs)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=bC(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,i,r){let n=Re(null);try{r=r||this.ngModule;let s=r instanceof fr?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Kl(t,s):t,l=a.get(Ms,null);if(l===null)throw new Be(407,!1);let h=a.get(KM,null),c=a.get(zf,null),u=a.get(Xl,null),p={rendererFactory:l,sanitizer:h,inlineEffectRunner:null,afterRenderEventManager:c,changeDetectionScheduler:u},f=l.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",v=i?cM(f,i,this.componentDef.encapsulation,a):Kd(f,g,s0(g)),y=512;this.componentDef.signals?y|=4096:this.componentDef.onPush||(y|=16);let C=null;v!==null&&(C=Oh(v,a,!0));let b=kh(0,null,null,1,0,null,null,null,null,null,null),M=Zo(null,b,null,y,null,null,p,f,a,null,C);Mh(M);let S,N;try{let x=this.componentDef,A,U=null;x.findHostDirectiveDefs?(A=[],U=new Map,x.findHostDirectiveDefs(x,A,U),A.push(x)):A=[x];let z=o0(M,v),J=a0(z,v,x,A,M,p,f);N=md(b,Wi),v&&c0(f,x,v,i),e!==void 0&&u0(N,this.ngContentSelectors,e),S=h0(J,x,A,U,M,[p0]),Rh(b,M,null)}finally{Ih()}return new eh(this.componentType,S,En(N,M),M,N)}finally{Re(n)}}},eh=class extends ql{constructor(t,e,i,r,n){super(),this.location=i,this._rootLView=r,this._tNode=n,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new Cs(r,void 0,!1),this.componentType=t}setInput(t,e){let i=this._tNode.inputs,r;if(i!==null&&(r=i[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let n=this._rootLView;zh(n[Ee],n,r,t,e),this.previousInputValues.set(t,e);let s=$r(this._tNode.index,n);Fh(s)}}get injector(){return new Yr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function o0(o,t){let e=o[Ee],i=Wi;return o[i]=t,Ts(e,i,2,"#host",null)}function a0(o,t,e,i,r,n,s){let a=r[Ee];l0(i,o,t,s);let l=null;t!==null&&(l=Oh(t,r[Tn]));let h=n.rendererFactory.createRenderer(t,e),c=16;e.signals?c=4096:e.onPush&&(c=64);let u=Zo(r,bf(e),null,c,r[o.index],o,n,h,null,null,l);return a.firstCreatePass&&Vl(a,o,i.length-1),$o(r,u),r[o.index]=u}function l0(o,t,e,i){for(let r of o)t.mergedAttrs=ps(t.mergedAttrs,r.hostAttrs);t.mergedAttrs!==null&&($l(t,t.mergedAttrs,!0),e!==null&&cf(i,e,t))}function h0(o,t,e,i,r,n){let s=fi(),a=r[Ee],l=pi(s,r);If(a,r,s,e,null,i);for(let c=0;c<e.length;c++){let u=s.directiveStart+c,p=Dn(r,a,u,s);qr(p,r)}Sf(a,r,s),l&&qr(l,r);let h=Dn(r,a,s.directiveStart+s.componentOffset,s);if(o[ui]=r[ui]=h,n!==null)for(let c of n)c(h,t);return mf(a,s,r),h}function c0(o,t,e,i){if(i)El(o,e,["ng-version","17.3.12"]);else{let{attrs:r,classes:n}=MC(t.selectors[0]);r&&El(o,e,r),n&&n.length>0&&hf(o,e,n.join(" "))}}function u0(o,t,e){let i=o.projection=[];for(let r=0;r<t.length;r++){let n=e[r];i.push(n!=null?Array.from(n):null)}}function p0(){let o=fi();wh(at()[Ee],o)}var Fi=(()=>{class o{static{this.__NG_ELEMENT_ID__=d0}}return o})();function d0(){let o=fi();return Ff(o,at())}var f0=Fi,Rf=class extends f0{constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return En(this._hostTNode,this._hostLView)}get injector(){return new Yr(this._hostTNode,this._hostLView)}get parentInjector(){let t=Dh(this._hostTNode,this._hostLView);if(Pd(t)){let e=Ro(t,this._hostLView),i=zo(t),r=e[Ee].data[i+8];return new Yr(r,e)}else return new Yr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=Bp(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-Wt}createEmbeddedView(t,e,i){let r,n;typeof i=="number"?r=i:i!=null&&(r=i.index,n=i.injector);let s=Lp(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},n,s);return this.insertImpl(a,r,jp(this._hostTNode,s)),a}createComponent(t,e,i,r,n){let s=t&&!FC(t),a;if(s)a=e;else{let g=e||{};a=g.index,i=g.injector,r=g.projectableNodes,n=g.environmentInjector||g.ngModuleRef}let l=s?t:new Uo(Sn(t)),h=i||this.parentInjector;if(!n&&l.ngModule==null){let v=(s?h:this.parentInjector).get(fr,null);v&&(n=v)}let c=Sn(l.componentType??{}),u=Lp(this._lContainer,c?.id??null),p=u?.firstChild??null,f=l.create(h,r,p,n);return this.insertImpl(f.hostView,a,jp(this._hostTNode,u)),f}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,i){let r=t._lView;if(qC(r)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=r[wt],h=new Rf(l,l[Xt],l[wt]);h.detach(h.indexOf(t))}}let n=this._adjustIndex(e),s=this._lContainer;return kM(s,r,n,i),t.attachToViewContainerRef(),Gp(wl(s),n,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=Bp(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),i=Yl(this._lContainer,e);i&&(No(wl(this._lContainer),e),rf(i[Ee],i))}detach(t){let e=this._adjustIndex(t,-1),i=Yl(this._lContainer,e);return i&&No(wl(this._lContainer),e)!=null?new Cs(i):null}_adjustIndex(t,e=0){return t??this.length+e}};function Bp(o){return o[Po]}function wl(o){return o[Po]||(o[Po]=[])}function Ff(o,t){let e,i=t[o.index];return $i(i)?e=i:(e=Tf(i,t,null,o),t[o.index]=e,$o(t,e)),v0(e,t,o,i),new Rf(e,o,t)}function g0(o,t){let e=o[zt],i=e.createComment(""),r=pi(t,o),n=jh(e,r);return Fo(e,n,i,eM(e,r),!1),i}var v0=C0,m0=()=>!1;function y0(o,t,e){return m0(o,t,e)}function C0(o,t,e,i){if(o[Qr])return;let r;e.type&8?r=Xi(i):r=g0(t,e),o[Qr]=r}var th=class o{constructor(t){this.queryList=t,this.matches=null}clone(){return new o(this.queryList)}setDirty(){this.queryList.setDirty()}},ih=class o{constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let i=t.contentQueries!==null?t.contentQueries[0]:e.length,r=[];for(let n=0;n<i;n++){let s=e.getByIndex(n),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new o(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)Uh(t,e).matches!==null&&this.queries[e].setDirty()}},Yo=class{constructor(t,e,i=null){this.flags=e,this.read=i,typeof t=="string"?this.predicate=x0(t):this.predicate=t}},rh=class o{constructor(t=[]){this.queries=t}elementStart(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let i=0;i<this.length;i++){let r=e!==null?e.length:0,n=this.getByIndex(i).embeddedTView(t,r);n&&(n.indexInDeclarationView=i,e!==null?e.push(n):e=[n])}return e!==null?new o(e):null}template(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},nh=class o{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new o(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,i=t.parent;for(;i!==null&&i.type&8&&i.index!==e;)i=i.parent;return e===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let n=i[r];this.matchTNodeWithReadOption(t,e,b0(e,n)),this.matchTNodeWithReadOption(t,e,xo(e,t,n,!1,!1))}else i===bs?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,xo(e,t,i,!1,!1))}matchTNodeWithReadOption(t,e,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===gi||r===Fi||r===bs&&e.type&4)this.addMatch(e.index,-2);else{let n=xo(e,t,r,!1,!1);n!==null&&this.addMatch(e.index,n)}else this.addMatch(e.index,i)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function b0(o,t){let e=o.localNames;if(e!==null){for(let i=0;i<e.length;i+=2)if(e[i]===t)return e[i+1]}return null}function M0(o,t){return o.type&11?En(o,t):o.type&4?Jo(o,t):null}function I0(o,t,e,i){return e===-1?M0(t,o):e===-2?S0(o,t,i):Dn(o,o[Ee],e,t)}function S0(o,t,e){if(e===gi)return En(t,o);if(e===bs)return Jo(t,o);if(e===Fi)return Ff(t,o)}function Bf(o,t,e,i){let r=t[Qi].queries[i];if(r.matches===null){let n=o.data,s=e.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let h=s[l];if(h<0)a.push(null);else{let c=n[h];a.push(I0(t,c,s[l+1],e.metadata.read))}}r.matches=a}return r.matches}function sh(o,t,e,i){let r=o.queries.getByIndex(e),n=r.matches;if(n!==null){let s=Bf(o,t,r,e);for(let a=0;a<n.length;a+=2){let l=n[a];if(l>0)i.push(s[a/2]);else{let h=n[a+1],c=t[-l];for(let u=Wt;u<c.length;u++){let p=c[u];p[Is]===p[wt]&&sh(p[Ee],p,h,i)}if(c[wn]!==null){let u=c[wn];for(let p=0;p<u.length;p++){let f=u[p];sh(f[Ee],f,h,i)}}}}}return i}function T0(o,t){return o[Qi].queries[t].queryList}function Hf(o,t,e){let i=new Hl((e&4)===4);return dM(o,t,i,i.destroy),(t[Qi]??=new ih).queries.push(new th(i))-1}function w0(o,t,e){let i=di();return i.firstCreatePass&&(Uf(i,new Yo(o,t,e),-1),(t&2)===2&&(i.staticViewQueries=!0)),Hf(i,at(),t)}function D0(o,t,e,i){let r=di();if(r.firstCreatePass){let n=fi();Uf(r,new Yo(t,e,i),n.index),A0(r,o),(e&2)===2&&(r.staticContentQueries=!0)}return Hf(r,at(),e)}function x0(o){return o.split(",").map(t=>t.trim())}function Uf(o,t,e){o.queries===null&&(o.queries=new rh),o.queries.track(new nh(t,e))}function A0(o,t){let e=o.contentQueries||(o.contentQueries=[]),i=e.length?e[e.length-1]:-1;t!==i&&e.push(o.queries.length-1,t)}function Uh(o,t){return o.queries.getByIndex(t)}function E0(o,t){let e=o[Ee],i=Uh(e,t);return i.crossesNgTemplate?sh(e,o,t,[]):Bf(e,o,i,t)}function O0(o){return Object.getPrototypeOf(o.prototype).constructor}function yr(o){let t=O0(o.type),e=!0,i=[o];for(;t;){let r;if(Wr(o))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Be(903,!1);r=t.\u0275dir}if(r){if(e){i.push(r);let s=o;s.inputs=So(o.inputs),s.inputTransforms=So(o.inputTransforms),s.declaredInputs=So(o.declaredInputs),s.outputs=So(o.outputs);let a=r.hostBindings;a&&k0(o,a);let l=r.viewQuery,h=r.contentQueries;if(l&&L0(o,l),h&&P0(o,h),N0(o,r),Fy(o.outputs,r.outputs),Wr(r)&&r.data.animation){let c=o.data;c.animation=(c.animation||[]).concat(r.data.animation)}}let n=r.features;if(n)for(let s=0;s<n.length;s++){let a=n[s];a&&a.ngInherit&&a(o),a===yr&&(e=!1)}}t=Object.getPrototypeOf(t)}j0(i)}function N0(o,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||o.inputs.hasOwnProperty(e))continue;let i=t.inputs[e];if(i!==void 0&&(o.inputs[e]=i,o.declaredInputs[e]=t.declaredInputs[e],t.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!t.inputTransforms.hasOwnProperty(r))continue;o.inputTransforms??={},o.inputTransforms[r]=t.inputTransforms[r]}}}function j0(o){let t=0,e=null;for(let i=o.length-1;i>=0;i--){let r=o[i];r.hostVars=t+=r.hostVars,r.hostAttrs=ps(r.hostAttrs,e=ps(e,r.hostAttrs))}}function So(o){return o===In?{}:o===ai?[]:o}function L0(o,t){let e=o.viewQuery;e?o.viewQuery=(i,r)=>{t(i,r),e(i,r)}:o.viewQuery=t}function P0(o,t){let e=o.contentQueries;e?o.contentQueries=(i,r,n)=>{t(i,r,n),e(i,r,n)}:o.contentQueries=t}function k0(o,t){let e=o.hostBindings;e?o.hostBindings=(i,r)=>{t(i,r),e(i,r)}:o.hostBindings=t}var xn=class{};var _o=class extends xn{constructor(t){super(),this.componentFactoryResolver=new Jl(this),this.instance=null;let e=new Lo([...t.providers,{provide:xn,useValue:this},{provide:Bh,useValue:this.componentFactoryResolver}],t.parent||fh(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function z0(o,t,e=null){return new _o({providers:o,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var Yf=(()=>{class o{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new os(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275prov=Ct({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function R0(o,t,e){let i=o[t];return Object.is(i,e)?!1:(o[t]=e,!0)}function F0(o){return(o.flags&32)===32}function B0(o,t,e,i,r,n,s,a,l){let h=t.consts,c=Ts(t,o,4,s||null,ko(h,a));Mf(t,e,c,ko(h,l)),wh(t,c);let u=c.tView=kh(2,c,i,r,n,t.directiveRegistry,t.pipeRegistry,null,t.schemas,h,null);return t.queries!==null&&(t.queries.template(t,c),u.queries=t.queries.embeddedTView(c)),c}function Yh(o,t,e,i,r,n,s,a){let l=at(),h=di(),c=o+Wi,u=h.firstCreatePass?B0(c,h,l,t,e,i,r,n,s):h.data[c];Ss(u,!1);let p=H0(h,l,u,o);Sh()&&Lh(h,l,p,u),qr(p,l);let f=Tf(p,l,p,u);return l[c]=f,$o(l,f),y0(f,u,l),mh(u)&&yf(h,l,u),s!=null&&Cf(l,u,a),Yh}var H0=U0;function U0(o,t,e,i){return Th(!0),t[zt].createComment("")}function Ko(o,t,e){let i=at(),r=sb();if(R0(i,r,t)){let n=di(),s=ub();mM(n,s,i,o,t,i[zt],e,!1)}return Ko}function Hp(o,t,e,i,r){let n=t.inputs,s=r?"class":"style";zh(o,e,n[s],s,i)}function Y0(o,t,e,i,r,n){let s=t.consts,a=ko(s,r),l=Ts(t,o,2,i,a);return Mf(t,e,l,ko(s,n)),l.attrs!==null&&$l(l,l.attrs,!1),l.mergedAttrs!==null&&$l(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function gt(o,t,e,i){let r=at(),n=di(),s=Wi+o,a=r[zt],l=n.firstCreatePass?Y0(s,n,r,t,e,i):n.data[s],h=_0(n,r,l,a,t,o);r[s]=h;let c=mh(l);return Ss(l,!0),cf(a,h,l),!F0(l)&&Sh()&&Lh(n,r,h,l),JC()===0&&qr(h,r),KC(),c&&(yf(n,r,l),mf(n,l,r)),i!==null&&Cf(r,l),gt}function ht(){let o=fi();Sd()?Td():(o=o.parent,Ss(o,!1));let t=o;tb(t)&&ib(),eb();let e=di();return e.firstCreatePass&&(wh(e,o),ud(o)&&e.queries.elementEnd(o)),t.classesWithoutHost!=null&&vb(t)&&Hp(e,t,at(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&mb(t)&&Hp(e,t,at(),t.stylesWithoutHost,!1),ht}function ea(o,t,e,i){return gt(o,t,e,i),ht(),ea}var _0=(o,t,e,i,r,n)=>(Th(!0),Kd(i,r,pb()));function _h(){return at()}var Vo="en-US";var V0=Vo;function Q0(o){typeof o=="string"&&(V0=o.toLowerCase().replace(/_/g,"-"))}function en(o,t,e,i){let r=at(),n=di(),s=fi();return X0(n,r,r[zt],s,o,t,i),en}function W0(o,t,e,i){let r=o.cleanup;if(r!=null)for(let n=0;n<r.length-1;n+=2){let s=r[n];if(s===e&&r[n+1]===i){let a=t[fs],l=r[n+2];return a.length>l?a[l]:null}typeof s=="string"&&(n+=2)}return null}function X0(o,t,e,i,r,n,s){let a=mh(i),h=o.firstCreatePass&&xf(o),c=t[ui],u=Df(t),p=!0;if(i.type&3||s){let v=pi(i,t),y=s?s(v):v,C=u.length,b=s?S=>s(Xi(S[i.index])):i.index,M=null;if(!s&&a&&(M=W0(o,t,r,i.index)),M!==null){let S=M.__ngLastListenerFn__||M;S.__ngNextListenerFn__=n,M.__ngLastListenerFn__=n,p=!1}else{n=Yp(i,t,c,n,!1);let S=e.listen(y,r,n);u.push(n,S),h&&h.push(r,b,C,C+1)}}else n=Yp(i,t,c,n,!1);let f=i.outputs,g;if(p&&f!==null&&(g=f[r])){let v=g.length;if(v)for(let y=0;y<v;y+=2){let C=g[y],b=g[y+1],N=t[C][b].subscribe(n),x=u.length;u.push(n,N),h&&h.push(r,i.index,x,-(x+1))}}}function Up(o,t,e,i){let r=Re(null);try{return Li(6,t,e),e(i)!==!1}catch(n){return Af(o,n),!1}finally{Li(7,t,e),Re(r)}}function Yp(o,t,e,i,r){return function n(s){if(s===Function)return i;let a=o.componentOffset>-1?$r(o.index,t):t;Fh(a);let l=Up(t,e,i,s),h=n.__ngNextListenerFn__;for(;h;)l=Up(t,e,h,s)&&l,h=h.__ngNextListenerFn__;return r&&l===!1&&s.preventDefault(),l}}function ta(o=1){return cb(o)}function q0(o,t){let e=null,i=gC(o);for(let r=0;r<t.length;r++){let n=t[r];if(n==="*"){e=r;continue}if(i===null?ed(o,n,!0):yC(i,n))return r}return e}function ws(o){let t=at()[Ri][Xt];if(!t.projection){let e=o?o.length:1,i=t.projection=aC(e,null),r=i.slice(),n=t.child;for(;n!==null;){let s=o?q0(n,o):0;s!==null&&(r[s]?r[s].projectionNext=n:i[s]=n,r[s]=n),n=n.next}}}function Ds(o,t=0,e){let i=at(),r=di(),n=Ts(r,Wi+o,16,null,e||null);n.projection===null&&(n.projection=t),Td(),(!i[ds]||Md())&&(n.flags&32)!==32&&nM(r,i,n)}function Ji(o,t,e,i){D0(o,t,e,i)}function Vh(o,t,e){w0(o,t,e)}function $t(o){let t=at(),e=di(),i=wd();bh(i+1);let r=Uh(e,i);if(o.dirty&&XC(t)===((r.metadata.flags&2)===2)){if(r.matches===null)o.reset([]);else{let n=E0(t,i);o.reset(n,Nb),o.notifyOnChanges()}return!0}return!1}function Jt(){return T0(at(),wd())}function Ut(o,t=""){let e=at(),i=di(),r=o+Wi,n=i.firstCreatePass?Ts(i,r,1,t,null):i.data[r],s=G0(i,e,n,t,o);e[r]=s,Sh()&&Lh(i,e,s,n),Ss(n,!1)}var G0=(o,t,e,i,r)=>(Th(!0),Vb(t[zt],i));var Z0=(()=>{class o{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let i=od(!1,e.type),r=i.length>0?z0([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Ct({token:o,providedIn:"environment",factory:()=>new o(Ve(fr))})}}return o})();function ia(o){kf("NgStandalone"),o.getStandaloneInjector=t=>t.get(Z0).getOrCreateStandaloneInjector(o)}function _f(o,t){return Jo(o,t)}var Vf=new tt("");function Qh(o){return!!o&&typeof o.then=="function"}function Qf(o){return!!o&&typeof o.subscribe=="function"}var $0=new tt(""),Wf=(()=>{class o{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i}),this.appInits=It($0,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let e=[];for(let r of this.appInits){let n=r();if(Qh(n))e.push(n);else if(Qf(n)){let s=new Promise((a,l)=>{n.subscribe({complete:a,error:l})});e.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),e.length===0&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275prov=Ct({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),J0=new tt("");function K0(){Gu(()=>{throw new Be(600,!1)})}function eI(o){return o.isBoundToModule}function tI(o,t,e){try{let i=e();return Qh(i)?i.catch(r=>{throw t.runOutsideAngular(()=>o.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>o.handleError(i)),i}}var Wh=(()=>{class o{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=It(Vd),this.afterRenderEffectManager=It(zf),this.externalTestViews=new Set,this.beforeRender=new pr,this.afterTick=new pr,this.componentTypes=[],this.components=[],this.isStable=It(Yf).hasPendingTasks.pipe(vl(e=>!e)),this._injector=It(fr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,i){let r=e instanceof Ho;if(!this._injector.get(Wf).done){let p=!r&&TC(e),f=!1;throw new Be(405,f)}let s;r?s=e:s=this._injector.get(Bh).resolveComponentFactory(e),this.componentTypes.push(s.componentType);let a=eI(s)?void 0:this._injector.get(xn),l=i||s.selector,h=s.create(mr.NULL,[],l,a),c=h.location.nativeElement,u=h.injector.get(Vf,null);return u?.registerApplication(c),h.onDestroy(()=>{this.detachView(h.hostView),Dl(this.components,h),u?.unregisterApplication(c)}),this._loadComponent(h),h}tick(){this._tick(!0)}_tick(e){if(this._runningTick)throw new Be(101,!1);let i=Re(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(e)}catch(r){this.internalErrorHandler(r)}finally{this.afterTick.next(),this._runningTick=!1,Re(i)}}detectChangesInAttachedViews(e){let i=0,r=this.afterRenderEffectManager;for(;;){if(i===Of)throw new Be(103,!1);if(e){let n=i===0;this.beforeRender.next(n);for(let{_lView:s,notifyErrorHandler:a}of this._views)iI(s,n,a)}if(i++,r.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:n})=>oh(n))&&(r.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:n})=>oh(n))))break}}attachView(e){let i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){let i=e;Dl(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);let i=this._injector.get(J0,[]);[...this._bootstrapListeners,...i].forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Dl(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new Be(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275prov=Ct({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function Dl(o,t){let e=o.indexOf(t);e>-1&&o.splice(e,1)}function iI(o,t,e){!t&&!oh(o)||rI(o,e,t)}function oh(o){return Ch(o)}function rI(o,t,e){let i;e?(i=0,o[Me]|=1024):o[Me]&64?i=0:i=1,Nf(o,t,i)}var nI=(()=>{class o{constructor(){this.zone=It(Nt),this.applicationRef=It(Wh)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275prov=Ct({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function sI(o){return[{provide:Nt,useFactory:o},{provide:us,multi:!0,useFactory:()=>{let t=It(nI,{optional:!0});return()=>t.initialize()}},{provide:us,multi:!0,useFactory:()=>{let t=It(hI);return()=>{t.initialize()}}},{provide:Vd,useFactory:oI}]}function oI(){let o=It(Nt),t=It(qi);return e=>o.runOutsideAngular(()=>t.handleError(e))}function aI(o){let t=sI(()=>new Nt(lI(o)));return sd([[],t])}function lI(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:o?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:o?.runCoalescing??!1}}var hI=(()=>{class o{constructor(){this.subscription=new Ht,this.initialized=!1,this.zone=It(Nt),this.pendingTasks=It(Yf)}initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Nt.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Nt.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275prov=Ct({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function cI(){return typeof $localize<"u"&&$localize.locale||Vo}var Xh=new tt("",{providedIn:"root",factory:()=>It(Xh,je.Optional|je.SkipSelf)||cI()});var Xf=new tt("");var Eo=null;function uI(o=[],t){return mr.create({name:t,providers:[{provide:Xo,useValue:"platform"},{provide:Xf,useValue:new Set([()=>Eo=null])},...o]})}function pI(o=[]){if(Eo)return Eo;let t=uI(o);return Eo=t,K0(),dI(t),t}function dI(o){o.get(Ah,null)?.forEach(e=>e())}function qf(o){try{let{rootComponent:t,appProviders:e,platformProviders:i}=o,r=pI(i),n=[aI(),...e||[]],a=new _o({providers:n,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(Nt);return l.run(()=>{a.resolveInjectorInitializers();let h=a.get(qi,null),c;l.runOutsideAngular(()=>{c=l.onError.subscribe({next:f=>{h.handleError(f)}})});let u=()=>a.destroy(),p=r.get(Xf);return p.add(u),a.onDestroy(()=>{c.unsubscribe(),p.delete(u)}),tI(h,l,()=>{let f=a.get(Wf);return f.runInitializers(),f.donePromise.then(()=>{let g=a.get(Xh,Vo);Q0(g||Vo);let v=a.get(Wh);return t!==void 0&&v.bootstrap(t),v})})})}catch(t){return Promise.reject(t)}}var Gf=null;function qh(){return Gf}function Zf(o){Gf??=o}var ra=class{};var Cr=new tt("");function $f(o,t){t=encodeURIComponent(t);for(let e of o.split(";")){let i=e.indexOf("="),[r,n]=i==-1?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(n)}return null}var xs=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275mod=Zr({type:o})}static{this.\u0275inj=Gr({})}}return o})(),Jf="browser",mI="server";function Gh(o){return o===mI}var na=class{};var Jh=class extends ra{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Kh=class o extends Jh{static makeCurrent(){Zf(new o)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=CI();return e==null?null:bI(e)}resetBaseElement(){As=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return $f(document.cookie,t)}},As=null;function CI(){return As=As||document.querySelector("base"),As?As.getAttribute("href"):null}function bI(o){return new URL(o,document.baseURI).pathname}var MI=(()=>{class o{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275prov=Ct({token:o,factory:o.\u0275fac})}}return o})(),ec=new tt(""),ig=(()=>{class o{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(n=>n.supports(e)),!i)throw new Be(5101,!1);return this._eventNameToPlugin.set(e,i),i}static{this.\u0275fac=function(i){return new(i||o)(Ve(ec),Ve(Nt))}}static{this.\u0275prov=Ct({token:o,factory:o.\u0275fac})}}return o})(),sa=class{constructor(t){this._doc=t}},Zh="ng-app-id",rg=(()=>{class o{constructor(e,i,r,n={}){this.doc=e,this.appId=i,this.nonce=r,this.platformId=n,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Gh(n),this.resetHostNodes()}addStyles(e){for(let i of e)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(e){for(let i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(let i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(let i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){let i=this.styleRef;i.get(e)?.elements?.forEach(r=>r.remove()),i.delete(e)}collectServerRenderedStyles(){let e=this.doc.head?.querySelectorAll(`style[${Zh}="${this.appId}"]`);if(e?.length){let i=new Map;return e.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(e,i){let r=this.styleRef;if(r.has(e)){let n=r.get(e);return n.usage+=i,n.usage}return r.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){let r=this.styleNodesInDOM,n=r?.get(i);if(n?.parentNode===e)return r.delete(i),n.removeAttribute(Zh),n;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(Zh,this.appId),e.appendChild(s),s}}addStyleToHost(e,i){let r=this.getStyleElement(e,i),n=this.styleRef,s=n.get(i)?.elements;s?s.push(r):n.set(i,{elements:[r],usage:1})}resetHostNodes(){let e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||o)(Ve(Cr),Ve(xh),Ve(Eh,8),Ve(On))}}static{this.\u0275prov=Ct({token:o,factory:o.\u0275fac})}}return o})(),$h={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ic=/%COMP%/g,ng="%COMP%",II=`_nghost-${ng}`,SI=`_ngcontent-${ng}`,TI=!0,wI=new tt("",{providedIn:"root",factory:()=>TI});function DI(o){return SI.replace(ic,o)}function xI(o){return II.replace(ic,o)}function sg(o,t){return t.map(e=>e.replace(ic,o))}var Kf=(()=>{class o{constructor(e,i,r,n,s,a,l,h=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=n,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=Gh(a),this.defaultRenderer=new Es(e,s,l,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===ki.ShadowDom&&(i=Fr(ur({},i),{encapsulation:ki.Emulated}));let r=this.getOrCreateRenderer(e,i);return r instanceof oa?r.applyToHost(e):r instanceof Os&&r.applyStyles(),r}getOrCreateRenderer(e,i){let r=this.rendererByCompId,n=r.get(i.id);if(!n){let s=this.doc,a=this.ngZone,l=this.eventManager,h=this.sharedStylesHost,c=this.removeStylesOnCompDestroy,u=this.platformIsServer;switch(i.encapsulation){case ki.Emulated:n=new oa(l,h,i,this.appId,c,s,a,u);break;case ki.ShadowDom:return new tc(l,h,e,i,s,a,this.nonce,u);default:n=new Os(l,h,i,c,s,a,u);break}r.set(i.id,n)}return n}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||o)(Ve(ig),Ve(rg),Ve(xh),Ve(wI),Ve(Cr),Ve(On),Ve(Nt),Ve(Eh))}}static{this.\u0275prov=Ct({token:o,factory:o.\u0275fac})}}return o})(),Es=class{constructor(t,e,i,r){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS($h[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(eg(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(eg(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new Be(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let n=$h[r];n?t.setAttributeNS(n,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=$h[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(Jr.DashCase|Jr.Important)?t.style.setProperty(e,i,r&Jr.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&Jr.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i){if(typeof t=="string"&&(t=qh().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function eg(o){return o.tagName==="TEMPLATE"&&o.content!==void 0}var tc=class extends Es{constructor(t,e,i,r,n,s,a,l){super(t,n,s,l),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=sg(r.id,r.styles);for(let c of h){let u=document.createElement("style");a&&u.setAttribute("nonce",a),u.textContent=c,this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Os=class extends Es{constructor(t,e,i,r,n,s,a,l){super(t,n,s,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=l?sg(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},oa=class extends Os{constructor(t,e,i,r,n,s,a,l){let h=r+"-"+i.id;super(t,e,i,n,s,a,l,h),this.contentAttr=DI(h),this.hostAttr=xI(h)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}},AI=(()=>{class o extends sa{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||o)(Ve(Cr))}}static{this.\u0275prov=Ct({token:o,factory:o.\u0275fac})}}return o})(),tg=["alt","control","meta","shift"],EI={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},OI={alt:o=>o.altKey,control:o=>o.ctrlKey,meta:o=>o.metaKey,shift:o=>o.shiftKey},NI=(()=>{class o extends sa{constructor(e){super(e)}supports(e){return o.parseEventName(e)!=null}addEventListener(e,i,r){let n=o.parseEventName(i),s=o.eventCallback(n.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>qh().onAndCancel(e,n.domEventName,s))}static parseEventName(e){let i=e.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let n=o._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),tg.forEach(h=>{let c=i.indexOf(h);c>-1&&(i.splice(c,1),s+=h+".")}),s+=n,i.length!=0||n.length===0)return null;let l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(e,i){let r=EI[e.key]||e.key,n="";return i.indexOf("code.")>-1&&(r=e.code,n="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),tg.forEach(s=>{if(s!==r){let a=OI[s];a(e)&&(n+=s+".")}}),n+=r,n===i)}static eventCallback(e,i,r){return n=>{o.matchEventFullKeyCode(n,e)&&r.runGuarded(()=>i(n))}}static _normalizeKey(e){return e==="esc"?"escape":e}static{this.\u0275fac=function(i){return new(i||o)(Ve(Cr))}}static{this.\u0275prov=Ct({token:o,factory:o.\u0275fac})}}return o})();function og(o,t){return qf(ur({rootComponent:o},jI(t)))}function jI(o){return{appProviders:[...RI,...o?.providers??[]],platformProviders:zI}}function LI(){Kh.makeCurrent()}function PI(){return new qi}function kI(){return $d(document),document}var zI=[{provide:On,useValue:Jf},{provide:Ah,useValue:LI,multi:!0},{provide:Cr,useFactory:kI,deps:[]}];var RI=[{provide:Xo,useValue:"root"},{provide:qi,useFactory:PI,deps:[]},{provide:ec,useClass:AI,multi:!0,deps:[Cr,Nt,On]},{provide:ec,useClass:NI,multi:!0,deps:[Cr]},Kf,rg,ig,{provide:Ms,useExisting:Kf},{provide:na,useClass:MI,deps:[]},[]];var ag={providers:[]};var lg="ej2_instances",FI=0,BI=!1;function ca(o,t){var e=t;return e.unshift(void 0),new(Function.prototype.bind.apply(o,e))}function HI(o){var t,e=new Uint16Array(5),i=window.msCrypto||window.crypto;i.getRandomValues(e);var r="ej2"+_I(e),n=function(s){s.source===window&&typeof s.data=="string"&&s.data.length<=32&&s.data===r&&(o(),t())};return window.addEventListener("message",n,!1),window.postMessage(r,"*"),t=function(){window.removeEventListener("message",n),o=n=r=void 0}}function Y(o,t){for(var e=t,i=o.replace(/\[/g,".").replace(/\]/g,"").split("."),r=0;r<i.length&&!de(e);r++)e=e[i[parseInt(r.toString(),10)]];return e}function ve(o,t,e){var i=o.replace(/\[/g,".").replace(/\]/g,"").split("."),r=e||{},n=r,s,a=i.length,l;for(s=0;s<a;s++)l=i[parseInt(s.toString(),10)],s+1===a?n[""+l]=t===void 0?{}:t:d(n[""+l])&&(n[""+l]={}),n=n[""+l];return r}function ua(o,t){delete o[""+t]}var jn=typeof window<"u"?window:{};function ir(o){var t={};return!d(o)&&o.constructor===t.constructor}function Rt(o,t){if(!d(t))for(var e=o,i=t,r=Object.keys(t),n="deepMerge",s=0,a=r;s<a.length;s++){var l=a[s];!d(e[""+n])&&e[""+n].indexOf(l)!==-1&&(ir(i[""+l])||Array.isArray(i[""+l]))?m(e[""+l],e[""+l],i[""+l],!0):e[""+l]=i[""+l]}}function m(o,t,e,i){var r=o&&typeof o=="object"?o:{},n=arguments.length,s=[o,t,e,i];i&&(n=n-1);for(var a=function(h){if(!s[parseInt(h.toString(),10)])return"continue";var c=s[parseInt(h.toString(),10)];Object.keys(c).forEach(function(u){var p=r[""+u],f=c[""+u],g,v=Array.isArray(f)&&Array.isArray(p)&&f.length!==p.length,y=he()?!(p instanceof Event)&&!v:!0;i&&y&&(ir(f)||Array.isArray(f))?ir(f)?(g=p||{},Array.isArray(g)&&Object.prototype.hasOwnProperty.call(g,"isComplexArray")?m(g,{},f,i):r[""+u]=m(g,{},f,i)):(g=he()?p&&Object.keys(f).length:p||[],r[""+u]=m([],g,f,g&&g.length||f&&f.length)):r[""+u]=f})},l=1;l<n;l++)a(l);return r}function d(o){return o==null}function de(o){return typeof o>"u"}function Je(o){return o+"_"+FI++}function UI(o,t){var e;return function(){for(var i=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var s=function(){return e=null,o.apply(i,r)};clearTimeout(e),e=setTimeout(s,t)}}function gc(o,t){var e=o;return e===t?!0:e===document||!e?!1:gc(e.parentNode,t)}function Ns(o){try{throw new Error(o)}catch(t){throw new Error(t.message+`
`+t.stack)}}function le(o){var t=o+"";return t.match(/auto|cm|mm|in|px|pt|pc|%|em|ex|ch|rem|vw|vh|vmin|vmax/)?t:t+"px"}function he(){return BI}function Bi(o,t){var e=typeof o=="string"?document.querySelector(o):o;if(e[""+lg])for(var i=0,r=e[""+lg];i<r.length;i++){var n=r[i];if(n instanceof t)return n}return null}function YI(){if(!(typeof window>"u")){var o=new Uint16Array(5),t=window.msCrypto||window.crypto;return t.getRandomValues(o)}}function _I(o){for(var t="",e=0;e<5;e++)t+=(e?",":"")+o[parseInt(e.toString(),10)];return t}var VI={latn:{_digits:"0123456789",_type:"numeric"}},hg={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"\u221E",nan:"NaN",exponential:"E"},cg=[0,1,2,3,4,5,6,7,8,9],$e=function(){function o(){}return o.getMainObject=function(t,e){var i=he()?e:"main."+e;return Y(i,t)},o.getNumberingSystem=function(t){return Y("supplemental.numberingSystems",t)||this.numberingSystems},o.reverseObject=function(t,e){for(var i=e||Object.keys(t),r={},n=0,s=i;n<s.length;n++){var a=s[n];Object.prototype.hasOwnProperty.call(r,t[""+a])||(r[t[""+a]]=a)}return r},o.getSymbolRegex=function(t){var e=t.map(function(r){return r.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}).join("|"),i=RegExp;return new i(e,"g")},o.getSymbolMatch=function(t){for(var e=Object.keys(hg),i={},r=0,n=e;r<n.length;r++){var s=n[r];i[t[""+s]]=hg[""+s]}return i},o.constructRegex=function(t){for(var e=t.length,i="",r=0;r<e;r++)r!==e-1?i+=t[parseInt(r.toString(),10)]+"|":i+=t[parseInt(r.toString(),10)];return i},o.convertValueParts=function(t,e,i){return t.replace(e,function(r){return i[""+r]})},o.getDefaultNumberingSystem=function(t){var e={};return e.obj=Y("numbers",t),e.nSystem=Y("defaultNumberingSystem",e.obj),e},o.getCurrentNumericOptions=function(t,e,i,r){var n={},s=this.getDefaultNumberingSystem(t);if(!de(s.nSystem)||r){var a=r?Y("obj.mapperDigits",s):Y(s.nSystem+"._digits",e);if(!de(a)){n.numericPair=this.reverseObject(a,cg);var l=RegExp;n.numberParseRegex=new l(this.constructRegex(a),"g"),n.numericRegex="["+a[0]+"-"+a[9]+"]",i&&(n.numericRegex=a[0]+"-"+a[9],n.symbolNumberSystem=Y(r?"numberSymbols":"symbols-numberSystem-"+s.nSystem,s.obj),n.symbolMatch=this.getSymbolMatch(n.symbolNumberSystem),n.numberSystem=s.nSystem)}}return n},o.getNumberMapper=function(t,e,i){var r={mapper:{}},n=this.getDefaultNumberingSystem(t);if(!de(n.nSystem)){r.numberSystem=n.nSystem,r.numberSymbols=Y("symbols-numberSystem-"+n.nSystem,n.obj),r.timeSeparator=Y("timeSeparator",r.numberSymbols);var s=Y(n.nSystem+"._digits",e);if(!de(s))for(var a=0,l=cg;a<l.length;a++){var h=l[a];r.mapper[parseInt(h.toString(),10)]=s[parseInt(h.toString(),10)]}}return r},o.nPair="numericPair",o.nRegex="numericRegex",o.numberingSystems=VI,o}(),QI={DJF:"Fdj",ERN:"Nfk",ETB:"Br",NAD:"$",ZAR:"R",XAF:"FCFA",GHS:"GH\u20B5",XDR:"XDR",AED:"\u062F.\u0625.",BHD:"\u062F.\u0628.",DZD:"\u062F.\u062C.",EGP:"\u062C.\u0645.",ILS:"\u20AA",IQD:"\u062F.\u0639.",JOD:"\u062F.\u0627.",KMF:"CF",KWD:"\u062F.\u0643.",LBP:"\u0644.\u0644.",LYD:"\u062F.\u0644.",MAD:"\u062F.\u0645.",MRU:"\u0623.\u0645.",OMR:"\u0631.\u0639.",QAR:"\u0631.\u0642.",SAR:"\u0631.\u0633.",SDG:"\u062C.\u0633.",SOS:"S",SSP:"\xA3",SYP:"\u0644.\u0633.",TND:"\u062F.\u062A.",YER:"\u0631.\u064A.",CLP:"$",INR:"\u20B9",TZS:"TSh",EUR:"\u20AC",AZN:"\u20BC",RUB:"\u20BD",BYN:"Br",ZMW:"K",BGN:"\u043B\u0432.",NGN:"\u20A6",XOF:"CFA",BDT:"\u09F3",CNY:"\xA5",BAM:"\u041A\u041C",UGX:"USh",USD:"$",CZK:"K\u010D",GBP:"\xA3",DKK:"kr.",KES:"Ksh",CHF:"CHF",MVR:"\u0783.",BTN:"Nu.",XCD:"EC$",AUD:"$",BBD:"$",BIF:"FBu",BMD:"$",BSD:"$",BWP:"P",BZD:"$",CAD:"$",NZD:"$",FJD:"$",FKP:"\xA3",GIP:"\xA3",GMD:"D",GYD:"$",HKD:"$",IDR:"Rp",JMD:"$",KYD:"$",LRD:"$",MGA:"Ar",MOP:"MOP$",MUR:"Rs",MWK:"MK",MYR:"RM",PGK:"K",PHP:"\u20B1",PKR:"Rs",RWF:"RF",SBD:"$",SCR:"SR",SEK:"kr",SGD:"$",SHP:"\xA3",SLL:"Le",ANG:"NAf.",SZL:"E",TOP:"T$",TTD:"$",VUV:"VT",WST:"WS$",ARS:"$",BOB:"Bs",BRL:"R$",COP:"$",CRC:"\u20A1",CUP:"$",DOP:"$",GTQ:"Q",HNL:"L",MXN:"$",NIO:"C$",PAB:"B/.",PEN:"S/",PYG:"\u20B2",UYU:"$",VES:"Bs.S",IRR:"\u0631\u064A\u0627\u0644",GNF:"FG",CDF:"FC",HTG:"G",XPF:"FCFP",HRK:"kn",HUF:"Ft",AMD:"\u058F",ISK:"kr",JPY:"\xA5",GEL:"\u20BE",CVE:"\u200B",KZT:"\u20B8",KHR:"\u17DB",KPW:"\u20A9",KRW:"\u20A9",KGS:"\u0441\u043E\u043C",AOA:"Kz",LAK:"\u20AD",MZN:"MTn",MKD:"\u0434\u0435\u043D",MNT:"\u20AE",BND:"$",MMK:"K",NOK:"kr",NPR:"\u0930\u0941",AWG:"Afl.",SRD:"$",PLN:"z\u0142",AFN:"\u060B",STN:"Db",MDL:"L",RON:"lei",UAH:"\u20B4",LKR:"\u0DBB\u0DD4.",ALL:"Lek\xEB",RSD:"\u0434\u0438\u043D.",TJS:"\u0441\u043C\u043D",THB:"\u0E3F",TMT:"m.",TRY:"\u20BA",UZS:"\u0441\u045E\u043C",VND:"\u20AB",TWD:"NT$"};function WI(o){return Y(o||"",QI)}var vc="USD",Pg=null,kg=null;function XI(o){Pg=o}function qI(o){kg=o}var ug=RegExp,pg={"en-US":{d:"M/d/y",D:"EEEE, MMMM d, y",f:"EEEE, MMMM d, y h:mm a",F:"EEEE, MMMM d, y h:mm:s a",g:"M/d/y h:mm a",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:m:s tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",U:"dddd, MMMM d, yyyy h:mm:ss tt",y:"MMMM yyyy",Y:"MMMM yyyy"}},pe;(function(o){o.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,o.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*[0# ]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,o.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;var t=/[0-9]/g;o.defaultCurrency="$";var e=["infinity","nan","group","decimal"],i=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,r={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};o.dateConverterMapper=/dddd|ddd/ig;var n="sun";o.islamicRegex=/^islamic/;var s={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};o.formatRegex=new ug("(^[ncpae]{1})([0-1]?[0-9]|20)?$","i"),o.currencyFormatRegex=new ug("(^[ca]{1})([0-1]?[0-9]|20)?$","i"),o.curWithoutNumberRegex=/(c|a)$/ig;var a={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};o.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,o.basicPatterns=["short","medium","long","full"],o.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhu\u02BBl-Q.",12:"Dhu\u02BBl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabi\u02BB I",4:"Rabi\u02BB II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Sha\u02BBban",9:"Ramadan",10:"Shawwal",11:"Dhu\u02BBl-Qi\u02BBdah",12:"Dhu\u02BBl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"\u20AC","symbol-alt-narrow":"\u20AC"},GBP:{displayName:"British Pound","symbol-alt-narrow":"\xA3"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"\xD7",perMille:"\u2030",infinity:"\u221E",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"\xA4#,##0.00",accounting:"\xA4#,##0.00;(\xA4#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},o.blazorDefaultObject={numbers:{mapper:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},mapperDigits:"0123456789",numberSymbols:{decimal:".",group:",",plusSign:"+",minusSign:"-",percentSign:"%",nan:"NaN",timeSeparator:":",infinity:"\u221E"},timeSeparator:":",currencySymbol:"$",currencypData:{nlead:"$",nend:"",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentpData:{nlead:"",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentnData:{nlead:"-",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},currencynData:{nlead:"($",nend:")",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalnData:{nlead:"-",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalpData:{nlead:"",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2}},dates:{dayPeriods:{am:"AM",pm:"PM"},dateSeperator:"/",days:{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}},months:{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},eras:{1:"AD"}}},o.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},o.month="months",o.days="days",o.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"};function l(E,L,P,j,k){var F,X=P||"date";if(k)F=p({skeleton:E},k).format||p({skeleton:"d"},"en-US").format;else{if(o.basicPatterns.indexOf(E)!==-1){if(F=Y(X+"Formats."+E,L),X==="dateTime"){var re=Y("dateFormats."+E,L),q=Y("timeFormats."+E,L);F=F.replace("{1}",re).replace("{0}",q)}}else F=Y("dateTimeFormats.availableFormats."+E,L);de(F)&&E==="yMd"&&(F="M/d/y")}return F}o.getResultantPattern=l;function h(E,L,P,j){var k={},F=P||"gregorian";if(k.parserObject=$e.getMainObject(E,L)||(he()?o.blazorDefaultObject:o.defaultObject),j)k.numericObject=Y("numbers",k.parserObject);else{var X=he()?"dates":"dates.calendars."+F;k.dateObject=Y(X,k.parserObject)}return k}o.getDependables=h;function c(E,L,P,j){return Y(E+"Formats-numberSystem-"+L+(j?".accounting":".standard"),P)||(j?Y(E+"Formats-numberSystem-"+L+".standard",P):"")}o.getSymbolPattern=c;function u(E){var L=E.match(o.dateConverterMapper);if(L&&he()){var P=L[0].length===3?"EEE":"EEEE";return E.replace(o.dateConverterMapper,P)}return E}o.ConvertDateToWeekFormat=u;function p(E,L){var P=E.format||E.skeleton,j=Y((L||"en-US")+"."+P,pg);return j||(j=Y("en-US."+P,pg)),j&&(j=u(j),E.format=j.replace(/tt/,"a")),E}o.compareBlazorDateFormats=p;function f(E){var L=E.match(o.formatRegex),P={},j=L[1].toUpperCase();return P.isAccount=j==="A",P.type=o.patternMatcher[""+j],E.length>1&&(P.fractionDigits=parseInt(L[2],10)),P}o.getProperNumericSkeleton=f;function g(E,L,P,j){var k=j?{}:{nlead:"",nend:""},F=E.match(o.customRegex);if(F){j||(k.nlead=v(F[1],P),k.nend=v(F[10],P),k.groupPattern=F[4]);var X=F[7];if(X&&L){var re=X.match(t);d(re)?k.minimumFraction=0:k.minimumFraction=re.length,k.maximumFraction=X.length-1}}return k}o.getFormatData=g;function v(E,L){return E?(E=E.replace(o.defaultCurrency,L),L===""?E.trim():E):""}o.changeCurrencySymbol=v;function y(E,L,P,j){var k=P?"."+P:".symbol",F=j?"$":Y("currencies."+L+k,E)||Y("currencies."+L+".symbol-alt-narrow",E)||"$";return F}o.getCurrencySymbol=y;function C(E,L,P){for(var j={},k=E.split(";"),F=["pData","nData","zeroData"],X=0;X<k.length;X++)j[""+F[parseInt(X.toString(),10)]]=b(k[parseInt(X.toString(),10)],L,P);return d(j.nData)&&(j.nData=m({},j.pData),j.nData.nlead=d(L)?"-"+j.nData.nlead:L.minusSymbol+j.nData.nlead),j}o.customFormat=C;function b(E,L,P){var j={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},k=E.match(o.customRegex);if(d(k)||k[5]===""&&E!=="N/A")return j.type=void 0,j;j.nlead=k[1],j.nend=k[10];var F=k[6],X=!!F.match(/ $/g),re=F.replace(/ $/g,"").indexOf(" ")!==-1;j.useGrouping=F.indexOf(",")!==-1||re,F=F.replace(/,/g,""),F=/\s$/.test(F)?F.replace(/ /g,""):F;var q=k[7];if(F.indexOf("0")!==-1&&(j.minimumIntegerDigits=F.length-F.indexOf("0")),d(q)||(j.minimumFractionDigits=q.lastIndexOf("0"),j.maximumFractionDigits=q.lastIndexOf("#"),j.minimumFractionDigits===-1&&(j.minimumFractionDigits=0),(j.maximumFractionDigits===-1||j.maximumFractionDigits<j.minimumFractionDigits)&&(j.maximumFractionDigits=j.minimumFractionDigits)),d(L)?m(j,M([j.nlead,j.nend],"%","%")):(L.isCustomFormat=!0,m(j,M([j.nlead,j.nend],"$",L.currencySymbol)),j.isCurrency||m(j,M([j.nlead,j.nend],"%",L.percentSymbol))),!d(P)){var ie=c(j.type,L.numberMapper.numberSystem,P,!1);j.useGrouping&&(j.groupSeparator=re?" ":L.numberMapper.numberSymbols[e[2]],j.groupData=Pg.getGroupingDetails(ie.split(";")[0])),j.nlead=j.nlead.replace(/'/g,""),j.nend=X?" "+j.nend.replace(/'/g,""):j.nend.replace(/'/g,"")}return j}o.customNumberFormat=b;function M(E,L,P){for(var j={nlead:E[0],nend:E[1]},k=0;k<2;k++){var F=E[parseInt(k.toString(),10)],X=F.indexOf(L);if(X!==-1&&(X<F.indexOf("'")||X>F.lastIndexOf("'"))){j[""+a[parseInt(k.toString(),10)]]=F.substr(0,X)+P+F.substr(X+1),j[""+a[""+L]]=!0,j.type=j.isCurrency?"currency":"percent";break}}return j}o.isCurrencyPercent=M;function S(E){var L=(Y("dateFormats.short",E)||"").match(/[dM]([^dM])[dM]/i);return L?L[1]:"/"}o.getDateSeparator=S;function N(E,L,P,j){var k=h(P,E,L.calendar);he()&&(L=p(L,E));var F=L.format||l(L.skeleton,k.dateObject,L.type);if(j){if(F=F.replace(i,function(se){return r[""+se]}),F.indexOf("z")!==-1){var X=F.match(/z/g).length,re=void 0,q={timeZone:{}};q.numMapper=$e.getNumberMapper(k.parserObject,$e.getNumberingSystem(P)),q.timeZone=Y("dates.timeZoneNames",k.parserObject);var ie=new Date,ue=ie.getTimezoneOffset(),fe=X<4?"+H;-H":q.timeZone.hourFormat;fe=fe.replace(/:/g,q.numMapper.timeSeparator),ue===0?re=q.timeZone.gmtZeroFormat:(re=kg.getTimeZoneValue(ue,fe),re=q.timeZone.gmtFormat.replace(/\{0\}/,re)),F=F.replace(/[z]+/,'"'+re+'"')}F=F.replace(/ $/,"")}return F}o.getActualDateTimeFormat=N;function x(E,L){if(E.indexOf(",")!==-1){var P=E.split(",");E=P[0]+Y("numberMapper.numberSymbols.group",L)+P[1].replace(".",Y("numberMapper.numberSymbols.decimal",L))}else E=E.replace(".",Y("numberMapper.numberSymbols.decimal",L));return E}o.processSymbol=x;function A(E,L,P,j){var k=h(P,E,"",!0),F={custom:!0},X=k.numericObject,re,q={},ie=(L.format||"").match(o.currencyFormatRegex),ue=o.formatRegex.test(L.format)?f(L.format||"N"):{},fe={};if(ie){fe.numberMapper=he()?m({},k.numericObject):$e.getNumberMapper(k.parserObject,$e.getNumberingSystem(P),!0);var se=he()?Y("currencySymbol",k.numericObject):y(k.numericObject,L.currency||vc,L.altSymbol),Oe=c("currency",fe.numberMapper.numberSystem,k.numericObject,/a/i.test(L.format));Oe=Oe.replace(/\u00A4/g,se);var qe=Oe.split(";");q.hasNegativePattern=he()?!0:qe.length>1,q.nData=he()?Y(ue.type+"nData",X):g(qe[1]||"-"+qe[0],!0,se),q.pData=he()?Y(ue.type+"pData",X):g(qe[0],!1,se),!ie[2]&&!L.minimumFractionDigits&&!L.maximumFractionDigits&&(re=g(Oe.split(";")[0],!0,"",!0).minimumFraction)}var De;if(o.formatRegex.test(L.format)||!L.format){if(m(F,f(L.format||"N")),F.custom=!1,De="###0",F.fractionDigits||L.minimumFractionDigits||L.maximumFractionDigits||re){var pt=0;F.fractionDigits&&(L.minimumFractionDigits=L.maximumFractionDigits=F.fractionDigits),De=U(De,re||F.fractionDigits||L.minimumFractionDigits||pt,L.maximumFractionDigits||pt)}if(L.minimumIntegerDigits&&(De=z(De,L.minimumIntegerDigits)),L.useGrouping&&(De=J(De)),F.type==="currency"||F.type&&he()){he()&&F.type!=="currency"&&(q.pData=Y(F.type+"pData",X),q.nData=Y(F.type+"nData",X));var Mt=De;De=q.pData.nlead+Mt+q.pData.nend,(q.hasNegativePattern||he())&&(De+=";"+q.nData.nlead+Mt+q.nData.nend)}F.type==="percent"&&!he()&&(De+=" %")}else De=L.format.replace(/'/g,'"');return Object.keys(fe).length>0&&(De=j?De:x(De,fe)),De}o.getActualNumberFormat=A;function U(E,L,P){E+=".";for(var j=0;j<L;j++)E+="0";if(L<P)for(var k=P-L,F=0;F<k;F++)E+="#";return E}o.fractionDigitsPattern=U;function z(E,L){for(var P=E.split("."),j="",k=0;k<L;k++)j+="0";return P[1]?j+"."+P[1]:j}o.minimumIntegerPattern=z;function J(E){var L=E.split("."),P=L[0],j=3-P.length%3,k=j&&j===1?"#":j===2?"##":"";P=k+P,E="";for(var F=P.length-1;F>0;F=F-3)E=","+P[F-2]+P[F-1]+P[parseInt(F.toString(),10)]+E;return E=E.slice(1),L[1]?E+"."+L[1]:E}o.groupingPattern=J;function R(E,L){var P=n,j=Y("supplemental.weekData.firstDay",L),k=E;return/en-/.test(k)&&(k=k.slice(3)),k=k.slice(0,2).toUpperCase()+k.substr(2),j&&(P=j[""+k]||j[k.slice(0,2)]||n),s[""+P]}o.getWeekData=R;function _(E,L,P){var j=WI(P);if(L!==j)for(var k=0,F=E;k<F.length;k++){var X=F[k];X.nend=X.nend.replace(L,j),X.nlead=X.nlead.replace(L,j)}}o.replaceBlazorCurrency=_;function B(E,L){var P=new Date(E.getFullYear(),0,1),j=P.getDay(),k;j=j>=0?j:j+7;var F=Math.floor((E.getTime()-P.getTime()-(E.getTimezoneOffset()-P.getTimezoneOffset())*6e4)/864e5)+1;if(j<4){if(k=Math.floor((F+j-L-1)/7)+1,k>52){var X=new Date(E.getFullYear()+1,0,1),re=X.getDay();re=re>=0?re:re+7,k=re<4?1:53}}else k=Math.floor((F+j-L-1)/7);return k}o.getWeekOfYear=B})(pe||(pe={}));var dg=/^(.*?):[ \t]*([^\r\n]*)$/gm,fg="GET",Fn=function(){function o(t,e,i,r){this.mode=!0,this.emitError=!0,this.options={},typeof t=="string"?(this.url=t,this.type=e?e.toUpperCase():fg,this.mode=d(i)?!0:i):typeof t=="object"&&(this.options=t,Rt(this,this.options)),this.type=this.type?this.type.toUpperCase():fg,this.contentType=this.contentType!==void 0?this.contentType:r}return o.prototype.send=function(t){var e=this;this.data=d(t)?this.data:t;var i={cancel:!1,httpRequest:null},r=new Promise(function(n,s){e.httpRequest=new XMLHttpRequest,e.httpRequest.onreadystatechange=function(){e.stateChange(n,s)},d(e.onLoad)||(e.httpRequest.onload=e.onLoad),d(e.onProgress)||(e.httpRequest.onprogress=e.onProgress),d(e.onAbort)||(e.httpRequest.onabort=e.onAbort),d(e.onError)||(e.httpRequest.onerror=e.onError),d(e.onUploadProgress)||(e.httpRequest.upload.onprogress=e.onUploadProgress),e.httpRequest.open(e.type,e.url,e.mode),!d(e.data)&&e.contentType!==null&&e.httpRequest.setRequestHeader("Content-Type",e.contentType||"application/json; charset=utf-8"),e.beforeSend&&(i.httpRequest=e.httpRequest,e.beforeSend(i)),i.cancel||e.httpRequest.send(d(e.data)?null:e.data)});return r},o.prototype.successHandler=function(t){return this.onSuccess&&this.onSuccess(t,this),t},o.prototype.failureHandler=function(t){return this.onFailure&&this.onFailure(this.httpRequest),t},o.prototype.stateChange=function(t,e){var i=this.httpRequest.responseText;if(this.dataType&&this.dataType.toLowerCase()==="json")if(i==="")i=void 0;else try{i=JSON.parse(i)}catch{}this.httpRequest.readyState===4&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||this.httpRequest.status===304?t(this.successHandler(i)):this.emitError?e(new Error(this.failureHandler(this.httpRequest.statusText))):t())},o.prototype.getResponseHeader=function(t){for(var e={},i=dg.exec(this.httpRequest.getAllResponseHeaders());i;)e[i[1].toLowerCase()]=i[2],i=dg.exec(this.httpRequest.getAllResponseHeaders());var r=e[t.toLowerCase()];return d(r)?null:r},o}(),pa=function(){function o(t,e,i){this.type="GET",this.emitError=!0,typeof t=="string"?(this.url=t,this.type=d(e)?this.type:e.toUpperCase(),this.contentType=i):ir(t)&&Object.keys(t).length>0&&Rt(this,t),this.contentType=d(this.contentType)?"application/json; charset=utf-8":this.contentType}return o.prototype.send=function(t){var e=this,i={"application/json":"json","multipart/form-data":"formData","application/octet-stream":"blob","application/x-www-form-urlencoded":"formData"};try{d(this.fetchRequest)&&this.type==="GET"?this.fetchRequest=new Request(this.url,{method:this.type}):d(this.fetchRequest)&&(this.data=d(t)?this.data:t,this.fetchRequest=new Request(this.url,{method:this.type,headers:{"Content-Type":this.contentType},body:this.data}));var r={cancel:!1,fetchRequest:this.fetchRequest};return this.triggerEvent(this.beforeSend,r),r.cancel?null:(this.fetchResponse=fetch(this.fetchRequest),this.fetchResponse.then(function(n){if(e.triggerEvent(e.onLoad,n),!n.ok)throw n;for(var s="text",a=0,l=Object.keys(i);a<l.length;a++){var h=l[a];n.headers.get("Content-Type")&&n.headers.get("Content-Type").indexOf(h)!==-1&&(s=i[h])}return n[s]()}).then(function(n){return e.triggerEvent(e.onSuccess,n,e),n}).catch(function(n){var s={};return e.emitError&&(e.triggerEvent(e.onFailure,n),s=Promise.reject(n)),s}))}catch(n){return n}},o.prototype.triggerEvent=function(t,e,i){!d(t)&&typeof t=="function"&&t(e,i)},o}(),GI=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,ZI=/msie|trident/i,$I=/Trident\/7\./,JI=/(ipad|iphone|ipod touch)/i,KI=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,eS=/android/i,tS=/trident|windows phone|edge/i,iS=/(version)[ /]([\w.]+)/i,rc={OPERA:/(opera|opr)(?:.*version|)[ /]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ /]([\w.]+)/i,CHROME:/(chrome|crios)[ /]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ /]([\w.]+)/i,SAFARI:/(safari)[ /]([\w.]+)/i,WEBKIT:/(webkit)[ /]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};typeof window<"u"&&(window.browserDetails=window.browserDetails||{});var D=function(){function o(){}return o.extractBrowserDetail=function(){for(var t={culture:{}},e=Object.keys(rc),i=[],r=0,n=e;r<n.length;r++){var s=n[r];if(i=o.userAgent.match(rc[""+s]),i){if(t.name=i[1].toLowerCase()==="opr"?"opera":i[1].toLowerCase(),t.name=i[1].toLowerCase()==="crios"?"chrome":t.name,t.version=i[2],t.culture.name=t.culture.language=navigator.language,o.userAgent.match($I)){t.name="msie";break}var a=o.userAgent.match(iS);t.name==="safari"&&a&&(t.version=a[2]);break}}return t},o.getEvent=function(t){var e={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return o.isPointer?e[""+t].isPointer:o.isTouch?e[""+t].isTouch+(o.isDevice?"":" "+e[""+t].isDevice):e[""+t].isDevice},o.getTouchStartEvent=function(){return o.getEvent("start")},o.getTouchEndEvent=function(){return o.getEvent("end")},o.getTouchMoveEvent=function(){return o.getEvent("move")},o.getTouchCancelEvent=function(){return o.getEvent("cancel")},o.isSafari=function(){return o.isDevice&&o.isIos&&o.isTouch&&typeof window<"u"&&window.navigator.userAgent.toLowerCase().indexOf("iphone")===-1&&window.navigator.userAgent.toLowerCase().indexOf("safari")>-1},o.getValue=function(t,e){var i=typeof window<"u"?window.browserDetails:{};return typeof navigator<"u"&&navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1&&o.isTouch===!0&&!rc.CHROME.test(navigator.userAgent)&&(i.isIos=!0,i.isDevice=!0,i.isTouch=!0,i.isPointer=!0,i.isPointer="pointerEnabled"in window.navigator),typeof window<"u"&&window.Capacitor&&window.Capacitor.getPlatform()==="ios"&&(i.isPointer=!1),typeof i[""+t]>"u"?i[""+t]=e.test(o.userAgent):i[""+t]},Object.defineProperty(o,"userAgent",{get:function(){return o.uA},set:function(t){o.uA=t,window.browserDetails={}},enumerable:!0,configurable:!0}),Object.defineProperty(o,"info",{get:function(){return de(window.browserDetails.info)?window.browserDetails.info=o.extractBrowserDetail():window.browserDetails.info},enumerable:!0,configurable:!0}),Object.defineProperty(o,"isIE",{get:function(){return o.getValue("isIE",ZI)},enumerable:!0,configurable:!0}),Object.defineProperty(o,"isTouch",{get:function(){return de(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window.navigator||window&&window.navigator&&window.navigator.maxTouchPoints>0||"ontouchstart"in window:window.browserDetails.isTouch},enumerable:!0,configurable:!0}),Object.defineProperty(o,"isPointer",{get:function(){return de(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer},enumerable:!0,configurable:!0}),Object.defineProperty(o,"isMSPointer",{get:function(){return de(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer},enumerable:!0,configurable:!0}),Object.defineProperty(o,"isDevice",{get:function(){return o.getValue("isDevice",GI)},enumerable:!0,configurable:!0}),Object.defineProperty(o,"isIos",{get:function(){return o.getValue("isIos",JI)},enumerable:!0,configurable:!0}),Object.defineProperty(o,"isIos7",{get:function(){return o.getValue("isIos7",KI)},enumerable:!0,configurable:!0}),Object.defineProperty(o,"isAndroid",{get:function(){return o.getValue("isAndroid",eS)},enumerable:!0,configurable:!0}),Object.defineProperty(o,"isWebView",{get:function(){return de(window.browserDetails.isWebView)&&(window.browserDetails.isWebView=!(de(window.cordova)&&de(window.PhoneGap)&&de(window.phonegap)&&window.forge!=="object")),window.browserDetails.isWebView},enumerable:!0,configurable:!0}),Object.defineProperty(o,"isWindows",{get:function(){return o.getValue("isWindows",tS)},enumerable:!0,configurable:!0}),Object.defineProperty(o,"touchStartEvent",{get:function(){return de(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=o.getTouchStartEvent():window.browserDetails.touchStartEvent},enumerable:!0,configurable:!0}),Object.defineProperty(o,"touchMoveEvent",{get:function(){return de(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=o.getTouchMoveEvent():window.browserDetails.touchMoveEvent},enumerable:!0,configurable:!0}),Object.defineProperty(o,"touchEndEvent",{get:function(){return de(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=o.getTouchEndEvent():window.browserDetails.touchEndEvent},enumerable:!0,configurable:!0}),Object.defineProperty(o,"touchCancelEvent",{get:function(){return de(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=o.getTouchCancelEvent():window.browserDetails.touchCancelEvent},enumerable:!0,configurable:!0}),o.uA=typeof navigator<"u"?navigator.userAgent:"",o}(),I=function(){function o(){}return o.addOrGetEventData=function(t){return"__eventList"in t?t.__eventList.events:(t.__eventList={},t.__eventList.events=[])},o.add=function(t,e,i,r,n){var s=o.addOrGetEventData(t),a;n?a=UI(i,n):a=i,r&&(a=a.bind(r));for(var l=e.split(" "),h=0;h<l.length;h++)s.push({name:l[parseInt(h.toString(),10)],listener:i,debounce:a}),D.isIE?t.addEventListener(l[parseInt(h.toString(),10)],a):t.addEventListener(l[parseInt(h.toString(),10)],a,{passive:!1});return a},o.remove=function(t,e,i){for(var r=o.addOrGetEventData(t),n=e.split(" "),s=function(l){var h=-1,c;r&&r.length!==0&&r.some(function(u,p){return u.name===n[parseInt(l.toString(),10)]&&u.listener===i?(h=p,c=u.debounce,!0):!1}),h!==-1&&r.splice(h,1),c&&t.removeEventListener(n[parseInt(l.toString(),10)],c)},a=0;a<n.length;a++)s(a)},o.clearEvents=function(t){for(var e=o.addOrGetEventData(t),i=m([],void 0,e),r=0;r<i.length;r++){var n=i[parseInt(r.toString(),10)];t.removeEventListener(n.name,n.debounce),e.shift()}},o.trigger=function(t,e,i){for(var r=o.addOrGetEventData(t),n=0,s=r;n<s.length;n++){var a=s[n];a.name===e&&a.debounce.call(this,i)}},o}();var rS=/^svg|^path|^g/;function xe(o,t){var e=rS.test(o)?document.createElementNS("http://www.w3.org/2000/svg",o):document.createElement(o);return typeof t>"u"||(e.innerHTML=t.innerHTML?t.innerHTML:"",t.className!==void 0&&(e.className=t.className),t.id!==void 0&&(e.id=t.id),t.styles!==void 0&&(e.style.cssText=t.styles),t.attrs!==void 0&&ye(e,t.attrs)),e}function Z(o,t){for(var e=zg(t),i=RegExp,r=0,n=o;r<n.length;r++)for(var s=n[r],a=0,l=e;a<l.length;a++){var h=l[a];if(ir(s)){var c=Y("attributes.className",s);d(c)?ve("attributes.className",h,s):new i("\\b"+h+"\\b","i").test(c)||ve("attributes.className",c+" "+h,s)}else s.classList.contains(h)||s.classList.add(h)}return o}function ee(o,t){for(var e=zg(t),i=0,r=o;i<r.length;i++){var n=r[i],s=ir(n),a=s?Y("attributes.className",n):n.className!=="";if(a)for(var l=0,h=e;l<h.length;l++){var c=h[l];if(s){var u=Y("attributes.className",n),p=u.split(" "),f=p.indexOf(c);f!==-1&&p.splice(f,1),ve("attributes.className",p.join(" "),n)}else n.classList.remove(c)}}return o}function zg(o){var t=[];return typeof o=="string"?t.push(o):t=o,t}function jt(o){var t=o;return t.style.visibility===""&&t.offsetWidth>0}function vi(o,t,e){for(var i=document.createDocumentFragment(),r=0,n=o;r<n.length;r++){var s=n[r];i.appendChild(s)}return t.insertBefore(i,t.firstElementChild),e&&Rg(t),o}function He(o,t,e){var i=document.createDocumentFragment();if(o instanceof NodeList)for(;o.length>0;)i.appendChild(o[0]);else for(var r=0,n=o;r<n.length;r++){var s=n[r];i.appendChild(s)}return t.appendChild(i),e&&Rg(t),o}function Rg(o){var t=o.querySelectorAll("script");t.forEach(function(e){var i=document.createElement("script");i.text=e.innerHTML,document.head.appendChild(i),K(i)})}function K(o){var t=o.parentNode;if(t)return t.removeChild(o)}function ct(o){var t=o.parentNode;I.clearEvents(o),t.removeChild(o)}function ye(o,t){for(var e=Object.keys(t),i=o,r=0,n=e;r<n.length;r++){var s=n[r];if(ir(i)){var a=s;s==="tabindex"&&(a="tabIndex"),i.attributes[""+a]=t[""+s]}else i.setAttribute(s,t[""+s])}return i}function ae(o,t,e){return t===void 0&&(t=document),o=Fg(o),t.querySelector(o)}function Se(o,t,e){t===void 0&&(t=document),o=Fg(o);var i=t.querySelectorAll(o);return i}function Fg(o){var t=/(!|"|\$|%|&|'|\(|\)|\*|\/|:|;|<|=|\?|@|\]|\^|`|{|}|\||\+|~)/g;if(o.match(/#[0-9]/g)||o.match(t)){for(var e=o.split(","),i=0;i<e.length;i++){for(var r=e[parseInt(i.toString(),10)].split(" "),n=0;n<r.length;n++)if(r[parseInt(n.toString(),10)].indexOf("#")>-1&&!r[parseInt(n.toString(),10)].match(/\[.*\]/)){var s=r[parseInt(n.toString(),10)].split("#");if(s[1].match(/^\d/)||s[1].match(t)){var a=r[parseInt(n.toString(),10)].split(".");a[0]=a[0].replace(/#/,"[id='")+"']",r[parseInt(n.toString(),10)]=a.join(".")}}e[parseInt(i.toString(),10)]=r.join(" ")}return e.join(",")}return o}function ge(o,t){var e=o;if(typeof e.closest=="function")return e.closest(t);for(;e&&e.nodeType===1;){if(Bg(e,t))return e;e=e.parentNode}return null}function Ce(o,t){t!==void 0&&Object.keys(t).forEach(function(e){o.style[""+e]=t[""+e]})}function St(o,t,e){Z([o],t),ee([o],e)}function Bg(o,t){var e=o.matches||o.msMatchesSelector||o.webkitMatchesSelector;return e?e.call(o,t):[].indexOf.call(document.querySelectorAll(t),o)!==-1}var Rn=function(){function o(t){this.ranArray=[],this.boundedEvents={},!d(t)&&(this.context=t)}return o.prototype.on=function(t,e,i,r){if(!d(e)){var n=i||this.context;if(this.notExist(t)){this.boundedEvents[""+t]=[{handler:e,context:n,id:r}];return}d(r)?this.isHandlerPresent(this.boundedEvents[""+t],e)||this.boundedEvents[""+t].push({handler:e,context:n}):this.ranArray.indexOf(r)===-1&&(this.ranArray.push(r),this.boundedEvents[""+t].push({handler:e,context:n,id:r}))}},o.prototype.off=function(t,e,i){if(!this.notExist(t)){var r=Y(t,this.boundedEvents);if(e){for(var n=0;n<r.length;n++)if(i){if(r[parseInt(n.toString(),10)].id===i){r.splice(n,1);var s=this.ranArray.indexOf(i);s!==-1&&this.ranArray.splice(s,1);break}}else if(e===r[parseInt(n.toString(),10)].handler){r.splice(n,1);break}}else delete this.boundedEvents[""+t]}},o.prototype.notify=function(t,e,i,r){if(this.notExist(t)){i&&i.call(this,e);return}e&&(e.name=t);var n="Blazor",s=Y(t,this.boundedEvents).slice(0);if(window[""+n])return this.blazorCallback(s,e,i,r,0);for(var a=0,l=s;a<l.length;a++){var h=l[a];h.handler.call(h.context,e)}i&&i.call(this,e)},o.prototype.blazorCallback=function(t,e,i,r,n){var s=this,a=n===t.length-1;if(n<t.length){var l=t[parseInt(n.toString(),10)],h=l.handler.call(l.context,e);if(h&&typeof h.then=="function"){if(!i)return h;h.then(function(c){if(c=typeof c=="string"&&s.isJson(c)?JSON.parse(c,s.dateReviver):c,m(e,e,c,!0),i&&a)i.call(l.context,e);else return s.blazorCallback(t,e,i,r,n+1)}).catch(function(c){r&&r.call(l.context,typeof c=="string"&&s.isJson(c)?JSON.parse(c,s.dateReviver):c)})}else if(i&&a)i.call(l.context,e);else return this.blazorCallback(t,e,i,r,n+1)}},o.prototype.dateReviver=function(t,e){var i=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/;return he&&typeof e=="string"&&e.match(i)!==null?new Date(e):e},o.prototype.isJson=function(t){try{JSON.parse(t)}catch{return!1}return!0},o.prototype.destroy=function(){this.boundedEvents=this.context=void 0},o.prototype.offIntlEvents=function(){var t=this.boundedEvents.notifyExternalChange;if(t){for(var e=0;e<t.length;e++){var i=t[parseInt(e.toString(),10)].context;i&&i.detectFunction&&i.randomId&&i.isReactMock&&(this.off("notifyExternalChange",i.detectFunction,i.randomId),e--)}this.boundedEvents.notifyExternalChange.length||delete this.boundedEvents.notifyExternalChange}},o.prototype.notExist=function(t){return Object.prototype.hasOwnProperty.call(this.boundedEvents,t)===!1||this.boundedEvents[""+t].length<=0},o.prototype.isHandlerPresent=function(t,e){for(var i=0,r=t;i<r.length;i++){var n=r[i];if(n.handler===e)return!0}return!1},o}(),nS=new RegExp("]"),br=function(){function o(t,e){this.isRendered=!1,this.isComplexArraySetter=!1,this.isServerRendered=!1,this.allowServerDataBinding=!0,this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.bulkChanges={},this.refreshing=!1,this.ignoreCollectionWatch=!1,this.finalUpdate=function(){},this.childChangedProperties={},this.modelObserver=new Rn(this),de(e)||(typeof e=="string"?this.element=document.querySelector(e):this.element=e,d(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),de(t)||this.setProperties(t,!0),this.isDestroyed=!1}return o.prototype.setProperties=function(t,e){var i=this.isProtectedOnChange;this.isProtectedOnChange=!!e,Rt(this,t),e!==!0?(Rt(this.changedProperties,t),this.dataBind()):he()&&this.isRendered&&this.serverDataBind(t),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=i},o.callChildDataBind=function(t,e){for(var i=Object.keys(t),r=0,n=i;r<n.length;r++){var s=n[r];if(e[""+s]instanceof Array)for(var a=0,l=e[""+s];a<l.length;a++){var h=l[a];h.dataBind!==void 0&&h.dataBind()}else e[""+s].dataBind()}},o.prototype.clearChanges=function(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}},o.prototype.dataBind=function(){if(o.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){var t=this.isProtectedOnChange,e=this.changedProperties,i=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(e,i),this.isProtectedOnChange=t}},o.prototype.serverDataBind=function(t){if(he()){t=t||{},m(this.bulkChanges,{},t,!0);var e="sfBlazor";this.allowServerDataBinding&&window[""+e].updateModel&&(window[""+e].updateModel(this),this.bulkChanges={})}},o.prototype.saveChanges=function(t,e,i){if(he()){var r={};r[""+t]=e,this.serverDataBind(r)}this.isProtectedOnChange||(this.oldProperties[""+t]=i,this.changedProperties[""+t]=e,this.finalUpdate(),this.finalUpdate=HI(this.dataBind.bind(this)))},o.prototype.addEventListener=function(t,e){this.modelObserver.on(t,e)},o.prototype.removeEventListener=function(t,e){this.modelObserver.off(t,e)},o.prototype.trigger=function(t,e,i,r){var n=this;if(this.isDestroyed!==!0){var s=this.isProtectedOnChange;this.isProtectedOnChange=!1;var a=this.modelObserver.notify(t,e,i,r);if(nS.test(t)){var l=Y(t,this);if(l){var h="Blazor";if(window[""+h]){var c=l.call(this,e);c&&typeof c.then=="function"?i?c.then(function(u){i&&(u=typeof u=="string"&&n.modelObserver.isJson(u)?JSON.parse(u):u,i.call(n,u))}).catch(function(u){r&&(u=typeof u=="string"&&n.modelObserver.isJson(u)?JSON.parse(u):u,r.call(n,u))}):a=c:i&&i.call(this,e)}else l.call(this,e),i&&i.call(this,e)}else i&&i.call(this,e)}return this.isProtectedOnChange=s,a}},o.prototype.addInstance=function(){var t="e-"+this.getModuleName().toLowerCase();Z([this.element],["e-lib",t]),d(this.element.ej2_instances)?ve("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)},o.prototype.destroy=function(){var t=this;this.element.ej2_instances=this.element.ej2_instances?this.element.ej2_instances.filter(function(e){return nc?nc(e)!==nc(t):e!==t}):[],ee([this.element],["e-"+this.getModuleName()]),this.element.ej2_instances.length===0&&ee([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0},o}();function $(o,t){var e,i,r=typeof o=="string"?document.getElementById(o):o;for(i=0;i<r.ej2_instances.length;i++)if(e=r.ej2_instances[parseInt(i.toString(),10)],typeof t=="string"){var n=e.getModuleName();if(t===n)return e}else if(e instanceof t)return e}var nc;function Hg(o,t,e,i){return(!Object.prototype.hasOwnProperty.call(o.properties,t)||!(o.properties[""+t]instanceof i))&&(o.properties[""+t]=ca(i,[o,t,e])),o.properties[""+t]}function hc(o,t,e,i,r,n){for(var s=[],a=e?e.length:0,l=0;l<a;l++){var h=i;if(n&&(h=i(e[parseInt(l.toString(),10)],o)),r){var c=ca(h,[o,t,{},!0]);c.setProperties(e[parseInt(l.toString(),10)],!0),s.push(c)}else s.push(ca(h,[o,t,e[parseInt(l.toString(),10)],!1]))}return s}function Ug(o,t){return function(){return Object.prototype.hasOwnProperty.call(this.properties,t)||(this.properties[""+t]=o),this.properties[""+t]}}function sS(o,t){return function(e){if(this.properties[""+t]!==e){var i=Object.prototype.hasOwnProperty.call(this.properties,t)?this.properties[""+t]:o;this.saveChanges(t,e,i),this.properties[""+t]=e}}}function oS(o,t,e){return function(){return Hg(this,t,o,e)}}function aS(o,t,e){return function(i){Hg(this,t,o,e).setProperties(i)}}function lS(o,t,e){return function(){var i=this;if(!Object.prototype.hasOwnProperty.call(this.properties,t)){var r=hc(this,t,o,e,!1);this.properties[""+t]=r}var n=this.controlParent!==void 0&&this.controlParent.ignoreCollectionWatch||this.ignoreCollectionWatch;return!Object.prototype.hasOwnProperty.call(this.properties[""+t],"push")&&!n&&["push","pop"].forEach(function(s){var a={value:cS(s,t,e,i.properties[""+t]).bind(i),configurable:!0};Object.defineProperty(i.properties[""+t],s,a)}),Object.prototype.hasOwnProperty.call(this.properties[""+t],"isComplexArray")||Object.defineProperty(this.properties[""+t],"isComplexArray",{value:!0}),this.properties[""+t]}}function hS(o,t,e){return function(i){this.isComplexArraySetter=!0;var r=hc(this,t,o,e,!1),n=hc(this,t,i,e,!0);this.isComplexArraySetter=!1,this.saveChanges(t,n,r),this.properties[""+t]=n}}function cS(o,t,e,i){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var s=this.propName?this.getParentKey()+"."+t+"-":t+"-";switch(o){case"push":for(var a=0;a<r.length;a++){var l=r[parseInt(a.toString(),10)];Array.prototype[""+o].apply(i,[l]);var h=gg(s+(i.length-1),l,!this.controlParent,o);this.serverDataBind(h,r[parseInt(a.toString(),10)],!1,o)}break;case"pop":{Array.prototype[""+o].apply(i);var h=gg(s+i.length,null,!this.controlParent,o);this.serverDataBind(h,{ejsAction:"pop"},!1,o);break}}return i}}function gg(o,t,e,i){var r=o;if(e&&(r={},r[""+o]=t,t&&typeof t=="object")){var n="ejsAction";r[""+o][""+n]=i}return r}function w(o){return function(t,e){var i={set:sS(o,e),get:Ug(o,e),enumerable:!0,configurable:!0};Object.defineProperty(t,e,i),da(t,e,"prop",o)}}function it(o,t){return function(e,i){var r={set:aS(o,i,t),get:oS(o,i,t),enumerable:!0,configurable:!0};Object.defineProperty(e,i,r),da(e,i,"complexProp",o,t)}}function mi(o,t){return function(e,i){var r={set:hS(o,i,t),get:lS(o,i,t),enumerable:!0,configurable:!0};Object.defineProperty(e,i,r),da(e,i,"colProp",o,t)}}function Q(){return function(o,t){var e={set:function(i){var r=this.properties[""+t];if(r!==i){var n=Yg(this,t);de(r)===!1&&n.context.removeEventListener(n.prefix,r),n.context.addEventListener(n.prefix,i),this.properties[""+t]=i}},get:Ug(void 0,t),enumerable:!0,configurable:!0};Object.defineProperty(o,t,e),da(o,t,"event")}}function Qe(o){}function da(o,t,e,i,r){de(o.propList)&&(o.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),o.propList[e+"s"].push({propertyName:t,defaultValue:i,type:r}),o.propList[e+"Names"].push(t)}function Yg(o,t){if(Object.prototype.hasOwnProperty.call(o,"parentObj")===!1)return{context:o,prefix:t};var e=Y("propName",o);return e&&(t=e+"-"+t),Yg(Y("parentObj",o),t)}var uS=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(t,e)};return function(t,e){o(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ki=function(o,t,e,i){var r=arguments.length,n=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,e,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,e,n):s(t,e))||n);return r>3&&n&&Object.defineProperty(t,e,n),n},Gt=function(o){uS(t,o);function t(i){var r=o.call(this,i,void 0)||this;return r.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"},r}e=t,t.prototype.animate=function(i,r){r=r||{};var n=this.getModel(r);if(typeof i=="string")for(var s=Array.prototype.slice.call(Se(i,document)),a=0,l=s;a<l.length;a++){var h=l[a];n.element=h,e.delayAnimation(n)}else n.element=i,e.delayAnimation(n)},t.stop=function(i,r){i.style.animation="",i.removeAttribute("e-animate");var n=i.getAttribute("e-animation-id");if(n){var s=parseInt(n,10);cancelAnimationFrame(s),i.removeAttribute("e-animation-id")}r&&r.end&&r.end.call(this,r)},t.delayAnimation=function(i){qt==="Disable"||qt===Vg.Disable?(i.begin&&i.begin.call(this,i),i.end&&i.end.call(this,i)):i.delay?setTimeout(function(){e.applyAnimation(i)},i.delay):e.applyAnimation(i)},t.applyAnimation=function(i){var r=this;i.timeStamp=0;var n=0,s=0,a=0,l=i.duration;i.element.setAttribute("e-animate","true");var h=function(c){try{if(c){a=a===0?c:a,i.timeStamp=c+i.timeStamp-a,a=c,!n&&i.begin&&i.begin.call(r,i),n=n+1;var u=i.timeStamp/n;i.timeStamp<l&&i.timeStamp+u<l&&i.element.getAttribute("e-animate")?(i.element.style.animation=i.name+" "+i.duration+"ms "+i.timingFunction,i.progress&&i.progress.call(r,i),requestAnimationFrame(h)):(cancelAnimationFrame(s),i.element.removeAttribute("e-animation-id"),i.element.removeAttribute("e-animate"),i.element.style.animation="",i.end&&i.end.call(r,i))}else s=requestAnimationFrame(h),i.element.setAttribute("e-animation-id",s.toString())}catch(p){cancelAnimationFrame(s),i.element.removeAttribute("e-animation-id"),i.fail&&i.fail.call(r,p)}};h()},t.prototype.getModel=function(i){return{name:i.name||this.name,delay:i.delay||this.delay,duration:i.duration!==void 0?i.duration:this.duration,begin:i.begin||this.begin,end:i.end||this.end,fail:i.fail||this.fail,progress:i.progress||this.progress,timingFunction:this.easing[i.timingFunction]?this.easing[i.timingFunction]:i.timingFunction||this.easing[this.timingFunction]}},t.prototype.onPropertyChanged=function(i,r){},t.prototype.getModuleName=function(){return"animation"},t.prototype.destroy=function(){};var e;return Ki([w("FadeIn")],t.prototype,"name",void 0),Ki([w(400)],t.prototype,"duration",void 0),Ki([w("ease")],t.prototype,"timingFunction",void 0),Ki([w(0)],t.prototype,"delay",void 0),Ki([Q()],t.prototype,"progress",void 0),Ki([Q()],t.prototype,"begin",void 0),Ki([Q()],t.prototype,"end",void 0),Ki([Q()],t.prototype,"fail",void 0),t=e=Ki([Qe],t),t}(br);function rr(o,t,e){var i=pS(t);return i.rippleFlag===!1||i.rippleFlag===void 0&&!Bn?function(){}:(o.setAttribute("data-ripple","true"),I.add(o,"mousedown",vg,{parent:o,rippleOptions:i}),I.add(o,"mouseup",mg,{parent:o,rippleOptions:i,done:e}),I.add(o,"mouseleave",zn,{parent:o,rippleOptions:i}),D.isPointer&&I.add(o,"transitionend",zn,{parent:o,rippleOptions:i}),function(){o.removeAttribute("data-ripple"),I.remove(o,"mousedown",vg),I.remove(o,"mouseup",mg),I.remove(o,"mouseleave",zn),I.remove(o,"transitionend",zn)})}function pS(o){var t={selector:o&&o.selector?o.selector:null,ignore:o&&o.ignore?o.ignore:null,rippleFlag:o&&o.rippleFlag,isCenterRipple:o&&o.isCenterRipple,duration:o&&o.duration?o.duration:350};return t}function vg(o){var t=o.target,e=this.rippleOptions.selector,i=e?ge(t,e):t;if(!(!i||this.rippleOptions&&ge(t,this.rippleOptions.ignore))){var r=i.getBoundingClientRect(),n=o.pageX-document.body.scrollLeft,s=o.pageY-(!document.body.scrollTop&&document.documentElement?document.documentElement.scrollTop:document.body.scrollTop),a=Math.max(Math.abs(n-r.left),Math.abs(n-r.right)),l=Math.max(Math.abs(s-r.top),Math.abs(s-r.bottom)),h=Math.sqrt(a*a+l*l),c=h*2+"px",u=n-r.left-h,p=s-r.top-h;this.rippleOptions&&this.rippleOptions.isCenterRipple&&(u=0,p=0,c="100%"),i.classList.add("e-ripple");var f=this.rippleOptions.duration.toString(),g="width: "+c+";height: "+c+";left: "+u+"px;top: "+p+"px;transition-duration: "+f+"ms;",v=xe("div",{className:"e-ripple-element",styles:g});i.appendChild(v),window.getComputedStyle(v).getPropertyValue("opacity"),v.style.transform="scale(1)",i!==this.parent&&I.add(i,"mouseleave",zn,{parent:this.parent,rippleOptions:this.rippleOptions})}}function mg(o){_g(o,this)}function zn(o){_g(o,this)}function _g(o,t){var e=t.rippleOptions.duration,i=o.target,r=t.rippleOptions.selector,n=r?ge(i,r):i;if(!(!n||n&&n.className.indexOf("e-ripple")===-1)){var s=Se(".e-ripple-element",n),a=s[s.length-1];a&&(a.style.opacity="0.5"),t.parent!==n&&I.remove(n,"mouseleave",zn),setTimeout(function(){a&&a.parentNode&&a.parentNode.removeChild(a),n.getElementsByClassName("e-ripple-element").length||n.classList.remove("e-ripple"),t.done&&t.done(o)},e)}}var Bn=!1;var qt;var Vg=function(o){return o.Default="Default",o.Enable="Enable",o.Disable="Disable",o}(Vg||{}),dS="Module",fS=function(){function o(t){this.loadedModules=[],this.parent=t}return o.prototype.inject=function(t,e){var i=t.length;if(i===0){this.clean();return}this.loadedModules.length&&this.clearUnusedModule(t);for(var r=0;r<i;r++)for(var n=t[parseInt(r.toString(),10)],s=0,a=e;s<a.length;s++){var l=a[s],h=n.member;if(l&&l.prototype.getModuleName()===n.member&&!this.isModuleLoaded(h)){var c=ca(l,n.args),u=this.getMemberName(h);n.isProperty?ve(u,l,this.parent):ve(u,c,this.parent);var p=n;p.member=u,this.loadedModules.push(p)}}},o.prototype.clean=function(){for(var t=0,e=this.loadedModules;t<e.length;t++){var i=e[t];i.isProperty||Y(i.member,this.parent).destroy()}this.loadedModules=[]},o.prototype.getNonInjectedModules=function(t){var e=this;return t.filter(function(i){return!e.isModuleLoaded(i.member)})},o.prototype.clearUnusedModule=function(t){for(var e=this,i=t.map(function(l){return e.getMemberName(l.member)}),r=this.loadedModules.filter(function(l){return i.indexOf(l.member)===-1}),n=0,s=r;n<s.length;n++){var a=s[n];a.isProperty||Y(a.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(a),1),ua(this.parent,a.member)}},o.prototype.getMemberName=function(t){return t[0].toLowerCase()+t.substring(1)+dS},o.prototype.isModuleLoaded=function(t){for(var e=0,i=this.loadedModules;e<i.length;e++){var r=i[e];if(r.member===this.getMemberName(t))return!0}return!1},o}(),Ue=function(){function o(t,e,i,r){this.isComplexArraySetter=!1,this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=function(){},this.callChildDataBind=Y("callChildDataBind",br),this.parentObj=t,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=e,this.isParentArray=r,this.setProperties(i,!0)}return o.prototype.updateChange=function(t,e){t===!0?this.parentObj.childChangedProperties[""+e]=t:delete this.parentObj.childChangedProperties[""+e],this.parentObj.updateChange&&this.parentObj.updateChange(t,this.parentObj.propName)},o.prototype.updateTimeOut=function(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{var t=setTimeout(this.parentObj.dataBind.bind(this.parentObj)),e=function(){clearTimeout(t)};this.finalUpdate=e}},o.prototype.clearChanges=function(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}},o.prototype.setProperties=function(t,e){e===!0?(Rt(this,t),this.updateChange(!1,this.propName),this.clearChanges()):Rt(this,t)},o.prototype.dataBind=function(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){var t=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(ve(this.propName+"."+t,this.changedProperties,this.parentObj.changedProperties),ve(this.propName+"."+t,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()},o.prototype.saveChanges=function(t,e,i,r){this.controlParent.isProtectedOnChange||(r||this.serverDataBind(t,e,!0),this.oldProperties[""+t]=i,this.changedProperties[""+t]=e,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())},o.prototype.serverDataBind=function(t,e,i,r){if(he()&&!this.parentObj.isComplexArraySetter){var n,s={},a=i?this.getParentKey(!0)+"."+t:t;if(a.indexOf(".")!==-1){var l=a.split(".");n=s;for(var h=0;h<l.length;h++){var c=h===l.length-1;n[l[parseInt(h.toString(),10)]]=c?e:{},n=c?n:n[l[parseInt(h.toString(),10)]]}}else s[""+a]={},n=s[""+a],s[""+a][""+t]=e;if(this.isParentArray){var u="ejsAction";n[""+u]=r||"none"}this.controlParent.serverDataBind(s)}},o.prototype.getParentKey=function(t){var e="",i=this.propName;if(this.isParentArray){e=this.parentObj[this.propName].indexOf(this);var r=this.parentObj[this.propName].length;r=t?r:r>0?r-1:0,e=e!==-1?"-"+e:"-"+r,i=i+e}return this.controlParent!==this.parentObj&&(i=this.parentObj.getParentKey()+"."+this.propName+e),i},o}(),js;(function(o){var t=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990];function e(r){var n=r.getDate(),s=r.getMonth(),a=r.getFullYear(),l=s+1,h=a;l<3&&(h-=1,l+=12);var c=Math.floor(h/100),u=c-Math.floor(c/4)-2,p=Math.floor(365.25*(h+4716))+Math.floor(30.6001*(l+1))+n-u-1524;c=Math.floor((p-186721625e-2)/36524.25),u=c-Math.floor(c/4)+1;var f=p+u+1524,g=Math.floor((f-122.1)/365.25),v=Math.floor(365.25*g),y=Math.floor((f-v)/30.6001);n=f-v-Math.floor(30.6001*y),s=Math.floor((f-v)/20.6001),s>13&&(g+=1,s-=12),s-=1,a=g-4716;var C=p-24e5,b=10631/30,M=p-1948084,S=Math.floor(M/10631);M=M-10631*S;var N=Math.floor((M-.1335)/b),x=30*S+N;M=M-Math.floor(N*b+.1335);var A=Math.floor((M+28.5001)/29.5);A===13&&(A=12);for(var U=M-Math.floor(29.5001*A-29),z=0;z<t.length&&!(t[parseInt(z.toString(),10)]>C);z++);var J=z+16260,R=Math.floor((J-1)/12),_=R+1,B=J-12*R,E=C-t[z-1]+1;return(E+"").length>2&&(E=U,B=A,_=x),{year:_,month:B,date:E}}o.getHijriDate=e;function i(r,n,s){var a=r,l=n,h=s,c=a-1,u=c*12+1+(l-1),p=u-16260,f=h+t[p-1]-1,g=f+24e5,v=Math.floor(g+.5),y=Math.floor((v-186721625e-2)/36524.25);y=v+1+y-Math.floor(y/4);var C=y+1524,b=Math.floor((C-122.1)/365.25),M=Math.floor(365.25*b),S=Math.floor((C-M)/30.6001),N=C-M-Math.floor(S*30.6001),x=S-(S>13.5?13:1),A=b-(x>2.5?4716:4715);return A<=0&&x--,new Date(A+"/"+x+"/"+N)}o.toGregorian=i})(js||(js={}));var gS=/\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi,yg="stand-alone",vS=["sun","mon","tue","wed","thu","fri","sat"],Cg={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate",f:"getMilliseconds"},mS={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era",f:"milliseconds"},yS="timeSeparator",Qg=function(){function o(){}return o.dateFormat=function(t,e,i){var r=this,n=pe.getDependables(i,t,e.calendar),s=Y("parserObject.numbers",n),a=n.dateObject,l={isIslamic:pe.islamicRegex.test(e.calendar)};l.firstDayOfWeek=pe.getWeekData(t,i),he()&&e.isServerRendered&&(e=pe.compareBlazorDateFormats(e,t));var h=e.format||pe.getResultantPattern(e.skeleton,n.dateObject,e.type,!1,he()?t:"");if(l.dateSeperator=he()?Y("dateSeperator",a):pe.getDateSeparator(n.dateObject),de(h))Ns("Format options or type given must be invalid");else{h=pe.ConvertDateToWeekFormat(h),he()&&(h=h.replace(/tt/,"a")),l.pattern=h,l.numMapper=he()?m({},s):$e.getNumberMapper(n.parserObject,$e.getNumberingSystem(i));for(var c=h.match(gS)||[],u=0,p=c;u<p.length;u++){var f=p[u],g=f.length,v=f[0];switch(v==="K"&&(v="h"),v){case"E":case"c":he()?l.weekday=Y("days."+pe.monthIndex[""+g],a):l.weekday=n.dateObject[""+pe.days][""+yg][pe.monthIndex[""+g]];break;case"M":case"L":he()?l.month=Y("months."+pe.monthIndex[""+g],a):l.month=n.dateObject[""+pe.month][""+yg][pe.monthIndex[""+g]];break;case"a":l.designator=he()?Y("dayPeriods",a):Y("dayPeriods.format.wide",a);break;case"G":{var y=g<=3?"eraAbbr":g===4?"eraNames":"eraNarrow";l.era=he()?Y("eras",a):Y("eras."+y,n.dateObject);break}case"z":l.timeZone=Y("dates.timeZoneNames",n.parserObject);break}}}return function(C){return isNaN(C.getDate())?null:r.intDateFormatter(C,l)}},o.intDateFormatter=function(t,e){for(var i=e.pattern,r="",n=i.match(pe.dateParseRegex),s=this.getCurrentDateValue(t,e.isIslamic),a=0,l=n;a<l.length;a++){var h=l[a],c=h.length,u=h[0];u==="K"&&(u="h");var p=void 0,f="",g=void 0,v=void 0,y="";switch(u){case"M":case"L":p=s.month,c>2?r+=e.month[""+p]:g=!0;break;case"E":case"c":r+=e.weekday[""+vS[t.getDay()]];break;case"H":case"h":case"m":case"s":case"d":case"f":if(g=!0,u==="d")p=s.date;else if(u==="f"){g=!1,v=!0,f=t[""+Cg[""+u]]().toString(),f=f.substring(0,c);var C=f.length;if(c!==C){if(c>3)continue;for(var b=0;b<c-C;b++)f="0"+f.toString()}y+=f}else p=t[""+Cg[""+u]]();u==="h"&&(p=p%12||12);break;case"y":v=!0,y+=s.year,c===2&&(y=y.substr(y.length-2));break;case"a":{var M=t.getHours()<12?"am":"pm";r+=e.designator[""+M];break}case"G":{var S=t.getFullYear()<0?0:1,N=e.era[""+S];d(N)&&(N=e.era[S?0:1]),r+=N||"";break}case"'":r+=h==="''"?"'":h.replace(/'/g,"");break;case"z":{var x=t.getTimezoneOffset(),A=c<4?"+H;-H":e.timeZone.hourFormat;A=A.replace(/:/g,e.numMapper.timeSeparator),x===0?r+=e.timeZone.gmtZeroFormat:(v=!0,y=this.getTimeZoneValue(x,A)),y=e.timeZone.gmtFormat.replace(/\{0\}/,y);break}case":":r+=e.numMapper.numberSymbols[""+yS];break;case"/":r+=e.dateSeperator;break;case"W":g=!0,p=pe.getWeekOfYear(t,e.firstDayOfWeek);break;default:r+=h}g&&(v=!0,y=this.checkTwodigitNumber(p,c)),v&&(r+=$e.convertValueParts(y,pe.latnParseRegex,e.numMapper.mapper))}return r},o.getCurrentDateValue=function(t,e){return e?js.getHijriDate(t):{year:t.getFullYear(),month:t.getMonth()+1,date:t.getDate()}},o.checkTwodigitNumber=function(t,e){var i=t+"";return e===2&&i.length!==2?"0"+i:i},o.getTimeZoneValue=function(t,e){var i=this,r=e.split(";"),n=r[t>0?1:0],s=Math.abs(t);return n=n.replace(/HH?|mm/g,function(a){var l=a.length,h=a.indexOf("H")!==-1;return i.checkTwodigitNumber(Math.floor(h?s/60:s%60),l)})},o}();qI(Qg);var bg={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},CS="percentSign",bS="minusSign",Ln=["infinity","nan","group","decimal","exponential"],Wg=function(){function o(){}return o.numberFormatter=function(t,e,i){var r=this,n=m({},e),s={},a={},l,h=pe.getDependables(i,t,"",!0),c=h.numericObject;a.numberMapper=he()?m({},c):$e.getNumberMapper(h.parserObject,$e.getNumberingSystem(i),!0),a.currencySymbol=he()?Y("currencySymbol",c):pe.getCurrencySymbol(h.numericObject,n.currency||vc,e.altSymbol,e.ignoreCurrency),a.percentSymbol=he()?Y("numberSymbols.percentSign",c):a.numberMapper.numberSymbols[""+CS],a.minusSymbol=he()?Y("numberSymbols.minusSign",c):a.numberMapper.numberSymbols[""+bS];var u=a.numberMapper.numberSymbols;if(e.format&&!pe.formatRegex.test(e.format))s=pe.customFormat(e.format,a,h.numericObject),!de(n.useGrouping)&&n.useGrouping&&(n.useGrouping=s.pData.useGrouping);else{if(m(n,pe.getProperNumericSkeleton(e.format||"N")),n.isCurrency=n.type==="currency",n.isPercent=n.type==="percent",he()||(l=pe.getSymbolPattern(n.type,a.numberMapper.numberSystem,h.numericObject,n.isAccount)),n.groupOne=this.checkValueRange(n.maximumSignificantDigits,n.minimumSignificantDigits,!0),this.checkValueRange(n.maximumFractionDigits,n.minimumFractionDigits,!1,!0),de(n.fractionDigits)||(n.minimumFractionDigits=n.maximumFractionDigits=n.fractionDigits),de(n.useGrouping)&&(n.useGrouping=!0),n.isCurrency&&!he()&&(l=l.replace(/\u00A4/g,pe.defaultCurrency)),he())s.nData=m({},{},Y(n.type+"nData",c)),s.pData=m({},{},Y(n.type+"pData",c)),n.type==="currency"&&e.currency&&pe.replaceBlazorCurrency([s.pData,s.nData],a.currencySymbol,e.currency);else{var p=l.split(";");s.nData=pe.getFormatData(p[1]||"-"+p[0],!0,a.currencySymbol),s.pData=pe.getFormatData(p[0],!1,a.currencySymbol),n.useGrouping&&(n.groupSeparator=u[Ln[2]],n.groupData=this.getGroupingDetails(p[0]))}var f=de(n.minimumFractionDigits);if(f&&(n.minimumFractionDigits=s.nData.minimumFraction),de(n.maximumFractionDigits)){var g=s.nData.maximumFraction;n.maximumFractionDigits=de(g)&&n.isPercent?0:g}var v=n.minimumFractionDigits,y=n.maximumFractionDigits;!de(v)&&!de(y)&&v>y&&(n.maximumFractionDigits=v)}return m(s.nData,n),m(s.pData,n),function(C){return isNaN(C)?u[Ln[1]]:isFinite(C)?r.intNumberFormatter(C,s,a,e):u[Ln[0]]}},o.getGroupingDetails=function(t){var e={},i=t.match(pe.negativeDataRegex);if(i&&i[4]){var r=i[4],n=r.lastIndexOf(",");if(n!==-1){var s=r.split(".")[0];e.primary=s.length-n-1;var a=r.lastIndexOf(",",n-1);a!==-1&&(e.secondary=n-1-a)}}return e},o.checkValueRange=function(t,e,i,r){var n=r?"f":"s",s=0,a=bg["l"+n],l=bg["m"+n];if(de(t)||(this.checkRange(t,a,r),s++),de(e)||(this.checkRange(e,l,r),s++),s===2)if(t<e)Ns(l+"specified must be less than the"+a);else return!0;else i&&s===1&&Ns("Both"+l+"and"+l+"must be present");return!1},o.checkRange=function(t,e,i){var r=i?[0,20]:[1,21];(t<r[0]||t>r[1])&&Ns(e+"value must be within the range"+r[0]+"to"+r[1])},o.intNumberFormatter=function(t,e,i,r){var n;if(!de(e.nData.type)){t<0?(t=t*-1,n=e.nData):t===0?n=e.zeroData||e.pData:n=e.pData;var s="";if(n.isPercent&&(t=t*100),n.groupOne)s=this.processSignificantDigits(t,n.minimumSignificantDigits,n.maximumSignificantDigits);else if(s=this.processFraction(t,n.minimumFractionDigits,n.maximumFractionDigits,r),n.minimumIntegerDigits&&(s=this.processMinimumIntegers(s,n.minimumIntegerDigits)),i.isCustomFormat&&n.minimumFractionDigits<n.maximumFractionDigits&&/\d+\.\d+/.test(s)){for(var a=s.split("."),l=a[1],h=l.length,c=h-1;c>=0&&(l[parseInt(c.toString(),10)]==="0"&&c>=n.minimumFractionDigits);c--)l=l.slice(0,c);s=a[0]+"."+l}return n.type==="scientific"&&(s=t.toExponential(n.maximumFractionDigits),s=s.replace("e",i.numberMapper.numberSymbols[Ln[4]])),s=s.replace(".",i.numberMapper.numberSymbols[Ln[3]]),s=n.format==="#,###,,;(#,###,,)"?this.customPivotFormat(parseInt(s,10)):s,n.useGrouping&&(s=this.groupNumbers(s,n.groupData.primary,n.groupSeparator||",",i.numberMapper.numberSymbols[Ln[3]]||".",n.groupData.secondary)),s=$e.convertValueParts(s,pe.latnParseRegex,i.numberMapper.mapper),n.nlead==="N/A"?n.nlead:s==="0"&&r&&r.format==="0"?s+n.nend:n.nlead+s+n.nend}},o.processSignificantDigits=function(t,e,i){var r=t+"",n,s=r.length;return s<e?t.toPrecision(e):(r=t.toPrecision(i),n=+r,n+"")},o.groupNumbers=function(t,e,i,r,n){for(var s=!d(n)&&n!==0,a=t.split(r),l=a[0],h=l.length,c="";h>e;)c=l.slice(h-e,h)+(c.length?i+c:""),h-=e,s&&(e=n,s=!1);return a[0]=l.slice(0,h)+(c.length?i:"")+c,a.join(r)},o.processFraction=function(t,e,i,r){var n=(t+"").split(".")[1],s=n?n.length:0;if(e&&s<e){var a="";if(s===0)a=t.toFixed(e);else{a+=t;for(var l=0;l<e-s;l++)a+="0";return a}return t.toFixed(e)}else if(!d(i)&&(s>i||i===0))return t.toFixed(i);var h=t+"";return h[0]==="0"&&r&&r.format==="###.00"&&(h=h.slice(1)),h},o.processMinimumIntegers=function(t,e){var i=t.split("."),r=i[0],n=r.length;if(n<e){for(var s=0;s<e-n;s++)r="0"+r;i[0]=r}return i.join(".")},o.customPivotFormat=function(t){if(t>=5e5){t/=1e6;var e=t.toString().split("."),i=e[0],r=e[1];return r&&+r.substring(0,1)>=5?Math.ceil(t).toString():Math.floor(t).toString()}return""},o}();XI(Wg);var Mg="stand-alone",MS=/^[0-9]*$/,Ig={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth",milliseconds:"setMilliseconds"},IS="months",SS=function(){function o(){}return o.dateParser=function(t,e,i){var r=this,n=pe.getDependables(i,t,e.calendar),s=$e.getCurrentNumericOptions(n.parserObject,$e.getNumberingSystem(i),!1,he()),a={};he()&&e.isServerRendered&&(e=pe.compareBlazorDateFormats(e,t));var l=e.format||pe.getResultantPattern(e.skeleton,n.dateObject,e.type,!1,he()?t:""),h="",c;if(de(l))Ns("Format options or type given must be invalid");else{l=pe.ConvertDateToWeekFormat(l),a={isIslamic:pe.islamicRegex.test(e.calendar),pattern:l,evalposition:{},culture:t};for(var u=l.match(pe.dateParseRegex)||[],p=u.length,f=0,g=0,v=!1,y=s.numericRegex,C=he()?n.parserObject.numbers:$e.getNumberMapper(n.parserObject,$e.getNumberingSystem(i)),b=0;b<p;b++){var M=u[parseInt(b.toString(),10)],S=M.length,N=M[0]==="K"?"h":M[0],x=void 0,A=void 0,U=mS[""+N],z=S===2?"":"?";switch(v&&(f=g,v=!1),N){case"E":case"c":{var J=void 0;he()?J=Y("days."+pe.monthIndex[""+S],n.dateObject):J=n.dateObject[""+pe.days][""+Mg][pe.monthIndex[""+S]];var R=$e.reverseObject(J);h+="("+Object.keys(R).join("|")+")";break}case"M":case"L":case"d":case"m":case"s":case"h":case"H":case"f":if(A=!0,(N==="M"||N==="L")&&S>2){var _=void 0;he()?_=Y("months."+pe.monthIndex[""+S],n.dateObject):_=n.dateObject[""+IS][""+Mg][pe.monthIndex[""+S]],a[""+U]=$e.reverseObject(_),h+="("+Object.keys(a[""+U]).join("|")+")"}else if(N==="f"){if(S>3)continue;x=!0,h+="("+y+y+"?"+y+"?)"}else x=!0,h+="("+y+y+z+")";N==="h"&&(a.hour12=!0);break;case"W":{var B=S===1?"?":"";h+="("+y+B+y+")";break}case"y":A=x=!0,S===2?h+="("+y+y+")":h+="("+y+"{"+S+",})";break;case"a":{A=!0;var E=he()?Y("dayPeriods",n.dateObject):Y("dayPeriods.format.wide",n.dateObject);a[""+U]=$e.reverseObject(E),h+="("+Object.keys(a[""+U]).join("|")+")";break}case"G":{A=!0;var L=S<=3?"eraAbbr":S===4?"eraNames":"eraNarrow";a[""+U]=$e.reverseObject(he()?Y("eras",n.dateObject):Y("eras."+L,n.dateObject)),h+="("+Object.keys(a[""+U]).join("|")+"?)";break}case"z":{var P=new Date().getTimezoneOffset();A=P!==0,a[""+U]=Y("dates.timeZoneNames",n.parserObject);var j=a[""+U];c=S<4;var k=c?"+H;-H":j.hourFormat;k=k.replace(/:/g,C.timeSeparator),h+="("+this.parseTimeZoneRegx(k,j,y)+")?",v=!0,g=c?6:12;break}case"'":{var F=M.replace(/'/g,"");h+="("+F+")?";break}default:h+="([\\D])";break}if(A&&(a.evalposition[""+U]={isNumber:x,pos:b+1+f,hourOnly:c}),b===p-1&&!d(h)){var X=RegExp;a.parserRegex=new X("^"+h+"$","i")}}}return function(re){var q=r.internalDateParse(re,a,s);if(d(q)||!Object.keys(q).length)return null;if(a.isIslamic){var ie={},ue=q.year,fe=q.day,se=q.month,Oe=ue?ue+"":"",qe=Oe.length===2;(!ue||!se||!fe||qe)&&(ie=js.getHijriDate(new Date)),qe&&(ue=parseInt((ie.year+"").slice(0,2)+Oe,10));var De=js.toGregorian(ue||ie.year,se||ie.month,fe||ie.date);q.year=De.getFullYear(),q.month=De.getMonth()+1,q.day=De.getDate()}return r.getDateObject(q)}},o.getDateObject=function(t,e){var i=e||new Date;i.setMilliseconds(0);var r=["hour","minute","second","milliseconds","month","day"],n=t.year,s=t.designator,a=t.timeZone;if(!de(n)){var l=(n+"").length;if(l<=2){var h=Math.floor(i.getFullYear()/100)*100;n+=h}i.setFullYear(n)}for(var c=0,u=r;c<u.length;c++){var p=u[c],f=t[""+p];if(de(f)&&p==="day"&&i.setDate(1),!de(f))if(p==="month"){if(f-=1,f<0||f>11)return new Date("invalid");var g=i.getDate();i.setDate(1),i[Ig[""+p]](f);var v=new Date(i.getFullYear(),f+1,0).getDate();i.setDate(g<v?g:v)}else{if(p==="day"){var y=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();if(f<1||f>y)return null}i[""+Ig[""+p]](f)}}if(!de(s)){var C=i.getHours();s==="pm"?i.setHours(C+(C===12?0:12)):C===12&&i.setHours(0)}if(!de(a)){var b=a-i.getTimezoneOffset();b!==0&&i.setMinutes(i.getMinutes()+b)}return i},o.internalDateParse=function(t,e,i){var r=t.match(e.parserRegex),n={hour:0,minute:0,second:0};if(d(r))return null;for(var s=Object.keys(e.evalposition),a=0,l=s;a<l.length;a++){var h=l[a],c=e.evalposition[""+h],u=r[c.pos];if(c.isNumber)n[""+h]=this.internalNumberParser(u,i);else if(h==="timeZone"&&!de(u)){var p=c.pos,f=void 0,g=r[p+1],v=!de(g);c.hourOnly?f=this.getZoneValue(v,g,r[p+4],i)*60:(f=this.getZoneValue(v,g,r[p+7],i)*60,f+=this.getZoneValue(v,r[p+4],r[p+10],i)),d(f)||(n[""+h]=f)}else{var y=["en-US","en-MH","en-MP"];u=h==="month"&&!e.isIslamic&&(e.culture==="en"||e.culture==="en-GB"||e.culture==="en-US")?u[0].toUpperCase()+u.substring(1).toLowerCase():u,u=h!=="month"&&h==="designator"&&e.culture&&e.culture.indexOf("en-")!==-1&&y.indexOf(e.culture)===-1?u.toLowerCase():u,n[""+h]=e[""+h][""+u]}}return e.hour12&&(n.hour12=!0),n},o.internalNumberParser=function(t,e){return t=$e.convertValueParts(t,e.numberParseRegex,e.numericPair),MS.test(t)?+t:null},o.parseTimeZoneRegx=function(t,e,i){var r=e.gmtFormat,n,s="("+i+")("+i+")";n=t.replace("+","\\+"),t.indexOf("HH")!==-1?n=n.replace(/HH|mm/g,"("+s+")"):n=n.replace(/H|m/g,"("+s+"?)");var a=n.split(";").map(function(l){return r.replace("{0}",l)});return n=a.join("|")+"|"+e.gmtZeroFormat,n},o.getZoneValue=function(t,e,i,r){var n=t?e:i;if(!n)return 0;var s=this.internalNumberParser(n,r);return t?-s:s},o}(),TS=RegExp,wS=new TS("^([^0-9]*)(([0-9,]*[0-9]+)(.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$"),DS=/,/g,xS=["minusSign","infinity"],AS=function(){function o(){}return o.numberParser=function(t,e,i){var r=this,n=pe.getDependables(i,t,"",!0),s={custom:!0};pe.formatRegex.test(e.format)||!e.format?(m(s,pe.getProperNumericSkeleton(e.format||"N")),s.custom=!1,s.fractionDigits||e.maximumFractionDigits&&(s.maximumFractionDigits=e.maximumFractionDigits)):m(s,pe.customFormat(e.format,null,null));var a=Y("numbers",n.parserObject),l=$e.getCurrentNumericOptions(n.parserObject,$e.getNumberingSystem(i),!0,he());s.symbolRegex=$e.getSymbolRegex(Object.keys(l.symbolMatch)),s.infinity=l.symbolNumberSystem[xS[1]];var h;if(he())s.nData=m({},{},Y(s.type+"nData",a)),s.pData=m({},{},Y(s.type+"pData",a)),s.type==="currency"&&e.currency&&pe.replaceBlazorCurrency([s.pData,s.nData],Y("currencySymbol",a),e.currency);else if(h=pe.getSymbolPattern(s.type,l.numberSystem,n.numericObject,s.isAccount),h){h=h.replace(/\u00A4/g,pe.defaultCurrency);var c=h.split(";");s.nData=pe.getFormatData(c[1]||"-"+c[0],!0,""),s.pData=pe.getFormatData(c[0],!0,"")}return function(u){return r.getParsedNumber(u,s,l)}},o.getParsedNumber=function(t,e,i){var r,n,s,a,l,h;if(t.indexOf(e.infinity)!==-1)return 1/0;t=$e.convertValueParts(t,e.symbolRegex,i.symbolMatch),t=$e.convertValueParts(t,i.numberParseRegex,i.numericPair),t=t.indexOf("-")!==-1?t.replace("-.","-0."):t,t.indexOf(".")===0&&(t="0"+t);var c=t.match(wS);if(d(c))return NaN;a=c[1],s=c[2];var u=c[5];return l=c[6],r=e.custom?a===e.nData.nlead&&l===e.nData.nend:a.indexOf(e.nData.nlead)!==-1&&l.indexOf(e.nData.nend)!==-1,n=r?e.nData.isPercent:e.pData.isPercent,s=s.replace(DS,""),u&&(s+=u),h=+s,(e.type==="percent"||n)&&(h=h/100),(e.custom||e.fractionDigits)&&(h=parseFloat(h.toFixed(e.custom?r?e.nData.maximumFractionDigits:e.pData.maximumFractionDigits:e.fractionDigits))),e.maximumFractionDigits&&(h=this.convertMaxFracDigits(s,e,h,r)),r&&(h*=-1),h},o.convertMaxFracDigits=function(t,e,i,r){var n=t.split(".");return n[1]&&n[1].length>e.maximumFractionDigits&&(i=+i.toFixed(e.custom?r?e.nData.maximumFractionDigits:e.pData.maximumFractionDigits:e.maximumFractionDigits)),i},o}(),cc=new Rn,ES=!1,tr={},mc="en-US",Sg=["numericObject","dateObject"],Ls=function(){function o(t){t&&(this.culture=t)}return o.prototype.getDateFormat=function(t){return Qg.dateFormat(this.getCulture(),t||{type:"date",skeleton:"short"},tr)},o.prototype.getNumberFormat=function(t){return t&&!t.currency&&(t.currency=vc),he()&&t&&!t.format&&(t.minimumFractionDigits=0),Wg.numberFormatter(this.getCulture(),t||{},tr)},o.prototype.getDateParser=function(t){return SS.dateParser(this.getCulture(),t||{skeleton:"short",type:"date"},tr)},o.prototype.getNumberParser=function(t){return he()&&t&&!t.format&&(t.minimumFractionDigits=0),AS.numberParser(this.getCulture(),t||{format:"N"},tr)},o.prototype.formatNumber=function(t,e){return this.getNumberFormat(e)(t)},o.prototype.formatDate=function(t,e){return this.getDateFormat(e)(t)},o.prototype.parseDate=function(t,e){return this.getDateParser(e)(t)},o.prototype.parseNumber=function(t,e){return this.getNumberParser(e)(t)},o.prototype.getDatePattern=function(t,e){return pe.getActualDateTimeFormat(this.getCulture(),t,tr,e)},o.prototype.getNumberPattern=function(t,e){return pe.getActualNumberFormat(this.getCulture(),t,tr,e)},o.prototype.getFirstDayOfWeek=function(){return pe.getWeekData(this.getCulture(),tr)},o.prototype.getCulture=function(){return this.culture||mc},o}();function Hn(o,t){var e=pe.getDependables(tr,o,"",!0)[Sg[0]],i=pe.getDependables(tr,o,"")[Sg[1]],r=Y("defaultNumberingSystem",e),n=he()?Y("numberSymbols",e):Y("symbols-numberSystem-"+r,e),s=pe.getSymbolPattern(t||"decimal",r,e,!1);return m(n,pe.getFormatData(s,!0,"",!0),{dateSeparator:pe.getDateSeparator(i)})}var OS=["grid","pivotview","treegrid","spreadsheet","rangeNavigator","DocumentEditor","listbox","inplaceeditor","PdfViewer","richtexteditor","DashboardLayout","chart","stockChart","circulargauge","diagram","heatmap","lineargauge","maps","slider","smithchart","barcode","sparkline","treemap","bulletChart","kanban","daterangepicker","schedule","gantt","signature","query-builder","drop-down-tree","carousel","filemanager","uploader","accordion","tab","treeview"],Tg=[115,121,110,99,102,117,115,105,111,110,46,105,115,76,105,99,86,97,108,105,100,97,116,101,100],uc,Xg=function(){function o(t){this.isValidated=!1,this.isLicensed=!0,this.version="29",this.platform=/JavaScript|ASPNET|ASPNETCORE|ASPNETMVC|FileFormats|essentialstudio/i,this.errors={noLicense:"<span>This application was built using a trial version of Syncfusion<sup>\xAE</sup> Essential Studio<sup>\xAE</sup>. To remove the license validation message permanently, a valid license key must be included.</span>",trailExpired:"<span>This application was built using a trial version of Syncfusion<sup>\xAE</sup> Essential Studio<sup>\xAE</sup>. To remove the license validation message permanently, a valid license key must be included.</span>",versionMismatched:"<span>The included Syncfusion<sup>\xAE</sup> license key is invalid.</span>",platformMismatched:"<span>The included Syncfusion<sup>\xAE</sup> license key is invalid.</span>",invalidKey:"<span>The included Syncfusion<sup>\xAE</sup> license key is invalid.</span>"},this.minVersion=null,this.manager=function(){var e=null;function i(n){e=n}function r(){return e}return{setKey:i,getKey:r}}(),this.npxManager=function(){var e="npxKeyReplace";function i(){return e}return{getKey:i}}(),this.manager.setKey(t)}return o.prototype.validate=function(){var t=[115,121,110,99,102,117,115,105,111,110,46,108,105,99,101,110,115,101,67,111,110,116,101,110,116],e=[115,121,110,99,102,117,115,105,111,110,46,99,108,97,105,109,65,99,99,111,117,110,116,85,82,76];if(!this.isValidated&&jn&&!Y(aa(Tg),jn)&&!Y("Blazor",jn)){var i=void 0,r=void 0;if(this.manager&&this.manager.getKey()||this.npxManager&&this.npxManager.getKey()!=="npxKeyReplace"){var n=this.getInfoFromKey();if(n&&n.length)for(var s=0,a=n;s<a.length;s++){var l=a[s];if(!this.platform.test(l.platform)||l.invalidPlatform)i=this.errors.platformMismatched;else if(l.minVersion>=l.lastValue&&l.minVersion!==l.lastValue||l.lastValue<parseInt(this.version,10)?(i=this.errors.versionMismatched,i=i.replace("##LicenseVersion",l.version),i=i.replace("##Requireversion",this.version+".x")):(l.lastValue==null||isNaN(l.lastValue))&&(i=this.errors.versionMismatched,i=i.replace("##LicenseVersion",l.version),i=i.replace("##Requireversion",this.version+".x")),l.expiryDate){var h=new Date(l.expiryDate),c=new Date;if(h!==c&&h<c)i=this.errors.trailExpired;else break}}else i=this.errors.invalidKey}else{var u=Y(aa(t),jn);r=Y(aa(e),jn),u&&u!==""?i=u:i=this.errors.noLicense}if(i&&typeof document<"u"&&!d(document)){uc=r&&r!==""?r:"https://www.syncfusion.com/account/claim-license-key?pl=SmF2YVNjcmlwdA==&vs=Mjk=&utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information";var p=xe("div",{innerHTML:`<img src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzE5OV80KSI+CjxwYXRoIGQ9Ik0xMiAyMUMxNi45NzA2IDIxIDIxIDE2Ljk3MDYgMjEgMTJDMjEgNy4wMjk0NCAxNi45NzA2IDMgMTIgM0M3LjAyOTQ0IDMgMyA3LjAyOTQ0IDMgMTJDMyAxNi45NzA2IDcuMDI5NDQgMjEgMTIgMjFaIiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBmaWxsPSIjNjE2MDYzIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS44MTI1IDlDMTIuNDMzOCA5IDEyLjkzNzUgOC40OTYzMiAxMi45Mzc1IDcuODc1QzEyLjkzNzUgNy4yNTM2OCAxMi40MzM4IDYuNzUgMTEuODEyNSA2Ljc1QzExLjE5MTIgNi43NSAxMC42ODc1IDcuMjUzNjggMTAuNjg3NSA3Ljg3NUMxMC42ODc1IDguNDk2MzIgMTEuMTkxMiA5IDExLjgxMjUgOVoiIGZpbGw9IiM3MzczNzMiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xOTlfNCI+CjxyZWN0IHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K' style="top: 6px;
                    position: absolute;
                    left: 16px;
                    width: 24px;
                    height: 24px;"/>`+i+' <a style="text-decoration: none;color: #0D6EFD;font-weight: 500;" href='+uc+">Claim your free account</a>"});p.setAttribute("style",`position: fixed;
                top: 10px;
                left: 10px;
                right: 10px;
                font-size: 14px;
                background: #EEF2FF;
                color: #222222;
                z-index: 999999999;
                text-align: left;
                border: 1px solid #EEEEEE;
                padding: 10px 11px 10px 50px;
                border-radius: 8px;
                font-family: Helvetica Neue, Helvetica, Arial;`),document.body.appendChild(p),this.isLicensed=!1}this.isValidated=!0,ve(aa(Tg),this.isValidated,jn)}return this.isLicensed},o.prototype.getDecryptedData=function(t){try{return atob(t)}catch{return""}},o.prototype.getInfoFromKey=function(){try{var t="",e=[5439488,7929856,5111808,6488064,4587520,7667712,5439488,6881280,5177344,7208960,4194304,4456448,6619136,7733248,5242880,7077888,6356992,7602176,4587520,7274496,7471104,7143424],i=[],r=[],n=!1,s=!1;this.manager.getKey()?t=this.manager.getKey():(s=!0,t=this.npxManager.getKey().split("npxKeyReplace")[1]);for(var a=t.split(";"),l=0,h=a;l<h.length;l++){var c=h[l],u=this.getDecryptedData(c);if(u){var p=0,f="";if(s){for(var y=u[u.length-1],C=[],g=0;g<u.length;g++)C[parseInt(g.toString(),10)]=u[parseInt(g.toString(),10)].charCodeAt(0)-y.charCodeAt(0);for(var g=0;g<C.length;g++)f+=String.fromCharCode(C[parseInt(g.toString(),10)])}else for(var g=0;g<u.length;g++,p++){p===e.length&&(p=0);var v=u.charCodeAt(g);f+=String.fromCharCode(v^e[parseInt(p.toString(),10)]>>16)}if(this.platform.test(f)){if(i=f.split(";"),n=!1,i.length>3){var b=parseInt(i[1].split(".")[0],10),M=parseInt(i[4],10);r.push({platform:i[0],version:i[1],expiryDate:i[2],lastValue:M,minVersion:b})}}else f&&f.split(";").length>3&&(n=!0)}}return n&&!r.length?[{invalidPlatform:n}]:r.length?r:null}catch{return null}},o}(),qg=new Xg;function aa(o){for(var t="",e=0,i=o;e<i.length;e++){var r=i[e];t+=String.fromCharCode(r)}return t}function NS(o){qg=new Xg(o)}var jS=function(o){return o&&NS(o),qg.validate()};var LS=function(){var o=`
    <div style="
    position: fixed;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 99999;
    ">
        <div style="
    background: #FFFFFF;
    height: 455px;
    width: 840px;
    font-family: Helvetica Neue, Helvetica, Arial;
    color: #000000;
    box-shadow: 0px 4.8px 14.4px rgb(0 0 0 / 18%), 0px 25.6px 57.6px rgb(0 0 0 / 22%);
    display: block;
    margin: 8% auto;
    border-radius: 20px;
    ">
            <div style="
    position: absolute;
width: 838px;
height: 62px;
background-color: #F9F9F9;
border: 1px solid #EEEEEE;
border-top-left-radius: 20px;
border-top-right-radius: 20px;
">
                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQ2IiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMTQ2IDMyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNNDAuNTk2NSAxNS4wMDc4SDMyLjQyNUMzMS41NTU3IDE1LjAwNzggMzAuOTAzNyAxNS4xODEyIDMwLjUxMjUgMTUuNDg0NkMzMC4xMjEzIDE1LjgzMTQgMjkuOTA0IDE2LjMwODIgMjkuOTA0IDE3LjA0NTFDMjkuOTA0IDE3LjYwODYgMzAuMDc3OCAxOC4wNDIxIDMwLjQyNTYgMTguMzAyMkMzMC43NzMzIDE4LjYwNTYgMzEuMjk0OSAxOC43MzU2IDMxLjk5MDMgMTguNzM1NkgzNi4zMzY5QzM4LjExODkgMTguNzM1NiAzOS40MjI5IDE5LjA4MjQgNDAuMTYxOCAxOS43MzI2QzQwLjk0NDIgMjAuNDI2MiA0MS4yOTE5IDIxLjU1MzIgNDEuMjkxOSAyMy4xMTM3QzQxLjI5MTkgMjQuNzE3NiA0MC44NTcyIDI1Ljg4OCAzOS45ODc5IDI2LjY2ODJDMzkuMTE4NiAyNy40MDUxIDM3LjcyNzcgMjcuNzk1MyAzNS44NTg3IDI3Ljc5NTNIMjcuMDc4N1YyNS4wMjFIMzUuMzM3MkMzNi4yOTM0IDI1LjAyMSAzNi45NDU0IDI0Ljg5MSAzNy4zMzY2IDI0LjYzMDlDMzcuNzI3NyAyNC4zNzA4IDM3LjkwMTYgMjMuODk0IDM3LjkwMTYgMjMuMjg3MUMzNy45MDE2IDIyLjYzNjkgMzcuNzI3NyAyMi4xNjAxIDM3LjM4IDIxLjlDMzcuMDMyMyAyMS42Mzk5IDM2LjQyMzggMjEuNDY2NSAzNS41NTQ1IDIxLjQ2NjVIMzEuNjQyNkMyOS44NjA1IDIxLjQ2NjUgMjguNTEzMSAyMS4xMTk4IDI3LjY4NzMgMjAuMzgyOEMyNi44NjE0IDE5LjY0NTkgMjYuNDI2OCAxOC41MTg5IDI2LjQyNjggMTcuMDAxN0MyNi40MjY4IDE1LjM1NDUgMjYuODYxNCAxNC4xNDA4IDI3LjczMDcgMTMuMzYwNkMyOC42IDEyLjU4MDMgMjkuOTkwOSAxMi4yMzM1IDMxLjkwMzQgMTIuMjMzNUg0MC41OTY1VjE1LjAwNzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik00OC4wNzI3IDI1LjI4MTFINTAuNTA2OFYxNi4zOTQ5SDUzLjU0OTNWMjcuNTM1MkM1My41NDkzIDI5LjA1MjQgNTMuMjAxNiAzMC4xNzk0IDUyLjUwNjIgMzAuOTE2M0M1MS44MTA3IDMxLjY1MzIgNTAuNzI0MSAzMiA0OS4yNDYzIDMySDQzLjMzNVYyOS42NTkySDQ4LjcyNDdDNDkuMjg5NyAyOS42NTkyIDQ5Ljc2NzkgMjkuNTI5MiA1MC4wNzIxIDI5LjIyNThDNTAuMzc2NCAyOC45NjU3IDUwLjU1MDIgMjguNTMyMiA1MC41NTAyIDI4LjAxMlYyNy44Mzg2SDQ3Ljg5ODlDNDYuMjAzNyAyNy44Mzg2IDQ0Ljk0MzIgMjcuNDkxOSA0NC4yNDc4IDI2Ljg0MTZDNDMuNTA4OSAyNi4xNDgxIDQzLjE2MTEgMjUuMDY0NCA0My4xNjExIDIzLjQ2MDVWMTYuMzk0OUg0Ni4xNjAyVjIzLjIwMDVDNDYuMTYwMiAyNC4wNjc0IDQ2LjI5MDYgMjQuNjMwOSA0Ni41NTE0IDI0Ljg5MUM0Ni43MjUzIDI1LjE1MTEgNDcuMjQ2OSAyNS4yODExIDQ4LjA3MjcgMjUuMjgxMVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTU1Ljg5NjUgMTYuMzk0OUg2MS41OTA0QzYzLjMyOTEgMTYuMzk0OSA2NC41NDYxIDE2LjY5ODMgNjUuMjg1IDE3LjM0ODVDNjYuMDIzOSAxNy45OTg4IDY2LjM3MTYgMTkuMDgyNCA2Ni4zNzE2IDIwLjU1NjNWMjcuNzk1M0g2My4zMjkxVjIwLjk0NjRDNjMuMzI5MSAyMC4wNzk0IDYzLjE5ODcgMTkuNTE1OSA2Mi45Mzc5IDE5LjI5OTJDNjIuNjc3MSAxOS4wMzkxIDYyLjE1NTUgMTguOTA5MSA2MS4zMjk3IDE4LjkwOTFINTguODk1NlYyNy44Mzg2SDU1Ljg1M1YxNi4zOTQ5SDU1Ljg5NjVaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03NC45MzQyIDI1LjM2NzhINzguMTUwNlYyNy43OTUySDc0LjAyMTRDNzIuOTc4MiAyNy43OTUyIDcyLjEwODkgMjcuNjY1MiA3MS40NTcgMjcuNDkxOEM3MC44MDUgMjcuMjc1IDcwLjE5NjUgMjYuOTI4MyA2OS43MTgzIDI2LjQ1MTRDNjkuMTk2OCAyNS45MzEzIDY4Ljc2MjEgMjUuMjgxMSA2OC40NTc4IDI0LjU0NDJDNjguMTUzNiAyMy44MDcyIDY4LjAyMzIgMjIuOTgzNiA2OC4wMjMyIDIyLjE2QzY4LjAyMzIgMjEuMjkzMSA2OC4xNTM2IDIwLjQ2OTUgNjguNDU3OCAxOS42ODkyQzY4Ljc2MjEgMTguOTA5IDY5LjE1MzMgMTguMzAyMSA2OS43MTgzIDE3Ljc4MTlDNzAuMjM5OSAxNy4zMDUxIDcwLjgwNSAxNi45NTgzIDcxLjUwMDQgMTYuNzQxNkM3Mi4xOTU5IDE2LjUyNDkgNzMuMDIxNyAxNi40MzgyIDc0LjA2NDkgMTYuNDM4Mkg3OC4xOTQxVjE4LjkwOUg3NC45MzQyQzczLjQ5OTggMTguOTA5IDcyLjU0MzYgMTkuMTY5MSA3MS45Nzg1IDE5LjY0NTlDNzEuNDU2OSAyMC4xMjI3IDcxLjE1MjcgMjAuOTg5NyA3MS4xNTI3IDIyLjIwMzRDNzEuMTUyNyAyMi44OTY5IDcxLjI4MzEgMjMuNDYwNSA3MS41MDA0IDIzLjkzNzNDNzEuNzE3NyAyNC40MTQxIDcyLjA2NTUgMjQuNzYwOSA3Mi41MDAxIDI1LjA2NDNDNzIuNzE3NCAyNS4xOTQ0IDcyLjk3ODIgMjUuMjgxMSA3My4yODI1IDI1LjM2NzhDNzMuNjMwMiAyNS4zMjQ0IDc0LjE1MTggMjUuMzY3OCA3NC45MzQyIDI1LjM2NzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik04MC44NDU2IDE4LjY0ODlINzguNjcyNFYxNi4zNTE1SDgwLjg0NTZWMTUuMTgxMUM4MC44NDU2IDE0LjAxMDggODEuMDYzIDEzLjIzMDUgODEuNDk3NiAxMi44NDA0QzgxLjkzMjMgMTIuNDUwMyA4Mi43NTgxIDEyLjIzMzUgODMuOTc1MSAxMi4yMzM1SDg2Ljg0MzhWMTQuNDAwOUg4NS40MDk1Qzg0Ljg4NzkgMTQuNDAwOSA4NC41NDAyIDE0LjQ4NzYgODQuMzIyOSAxNC42NjFDODQuMTA1NSAxNC44MzQ0IDgzLjk3NTEgMTUuMDk0NSA4My45NzUxIDE1LjQ0MTJWMTYuMzUxNUg4Ni44NDM4VjE4LjY0ODlIODMuOTc1MVYyNy43OTUzSDgwLjg0NTZWMTguNjQ4OVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTk4LjQwNTYgMjcuNzk1M0g5Mi43MTE2QzkxLjAxNjUgMjcuNzk1MyA4OS44NDI5IDI3LjQ0ODUgODkuMDYwNSAyNi43OTgzQzg4LjMyMTYgMjYuMTQ4MSA4Ny45MzA0IDI1LjA2NDQgODcuOTMwNCAyMy41OTA2VjE2LjM5NDlIOTAuOTI5NVYyMy40MTcyQzkwLjkyOTUgMjQuMTk3NCA5MS4wNTk5IDI0LjY3NDMgOTEuMzIwNyAyNC45MzQ0QzkxLjU4MTUgMjUuMTk0NCA5Mi4xMDMxIDI1LjMyNDUgOTIuOTI4OSAyNS4zMjQ1SDk1LjM2M1YxNi4zOTQ5SDk4LjQwNTZWMjcuNzk1M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTEwMC42MjIgMjUuNDExMkgxMDcuMDExQzEwNy41NzcgMjUuNDExMiAxMDguMDExIDI1LjMyNDUgMTA4LjI3MiAyNS4xNTExQzEwOC41MzMgMjQuOTc3NyAxMDguNjYzIDI0LjY3NDMgMTA4LjY2MyAyNC4zMjc1QzEwOC42NjMgMjMuOTM3NCAxMDguNTMzIDIzLjY3NzMgMTA4LjI3MiAyMy40NjA1QzEwOC4wMTEgMjMuMjg3MSAxMDcuNTc3IDIzLjIwMDUgMTA3LjA1NSAyMy4yMDA1SDEwNC40NDdDMTAyLjg4MiAyMy4yMDA1IDEwMS44MzkgMjIuOTgzNyAxMDEuMzE4IDIyLjUwNjlDMTAwLjc1MiAyMi4wMzAxIDEwMC40OTIgMjEuMjA2NSAxMDAuNDkyIDE5Ljk5MjdDMTAwLjQ5MiAxOC43NzkgMTAwLjgzOSAxNy44Njg3IDEwMS40OTEgMTcuMjYxOEMxMDIuMTQzIDE2LjY5ODMgMTAzLjE4NyAxNi4zOTQ5IDEwNC41MzQgMTYuMzk0OUgxMTEuMDU0VjE4Ljc3OUgxMDUuNzA4QzEwNC44MzggMTguNzc5IDEwNC4yNzMgMTguODY1NyAxMDQuMDEyIDE4Ljk5NTdDMTAzLjc1MiAxOS4xNjkxIDEwMy42MjEgMTkuNDI5MiAxMDMuNjIxIDE5LjgxOTRDMTAzLjYyMSAyMC4xNjYxIDEwMy43NTIgMjAuNDI2MiAxMDMuOTY5IDIwLjU5OTZDMTA0LjE4NiAyMC43NzMgMTA0LjU3NyAyMC44NTk3IDEwNS4wNTYgMjAuODU5N0gxMDcuNzk0QzEwOS4wNTQgMjAuODU5NyAxMTAuMDExIDIxLjE2MzEgMTEwLjY2MyAyMS43MjY2QzExMS4zMTUgMjIuMjkwMiAxMTEuNjYyIDIzLjE1NzEgMTExLjY2MiAyNC4yNDA4QzExMS42NjIgMjUuMjgxMSAxMTEuMzU4IDI2LjE0ODEgMTEwLjc5MyAyNi43OTgzQzExMC4yMjggMjcuNDQ4NSAxMDkuNDQ2IDI3Ljc5NTMgMTA4LjUzMyAyNy43OTUzSDEwMC43MDlWMjUuNDExMkgxMDAuNjIyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTE2LjU3NCAxNS4wOTQ0SDExMy40MDFWMTIuMjc2OUgxMTYuNTc0VjE1LjA5NDRaTTExNi41NzQgMjcuNzk1M0gxMTMuNDAxVjE2LjM5NDlIMTE2LjU3NFYyNy43OTUzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMwLjMwOSAyMi4xMTY3QzEzMC4zMDkgMjMuODkzOSAxMjkuNzQ0IDI1LjMyNDQgMTI4LjY1NyAyNi40MDgxQzEyNy41NzEgMjcuNDkxOCAxMjYuMDkzIDI4LjAxMiAxMjQuMjI0IDI4LjAxMkMxMjIuMzU1IDI4LjAxMiAxMjAuODc3IDI3LjQ5MTggMTE5Ljc5IDI2LjQwODFDMTE4LjcwNCAyNS4zMjQ0IDExOC4xMzkgMjMuODkzOSAxMTguMTM5IDIyLjExNjdDMTE4LjEzOSAyMC4zMzk0IDExOC43MDQgMTguOTA5IDExOS43OSAxNy44MjUzQzEyMC44NzcgMTYuNzQxNiAxMjIuMzk4IDE2LjIyMTQgMTI0LjIyNCAxNi4yMjE0QzEyNi4wNDkgMTYuMjIxNCAxMjcuNTI3IDE2Ljc0MTYgMTI4LjY1NyAxNy44MjUzQzEyOS43NDQgMTguODY1NiAxMzAuMzA5IDIwLjI5NjEgMTMwLjMwOSAyMi4xMTY3Wk0xMjEuMjY4IDIyLjExNjdDMTIxLjI2OCAyMy4yMDA0IDEyMS41MjkgMjQuMDY3MyAxMjIuMDUxIDI0LjY3NDJDMTIyLjU3MiAyNS4yODExIDEyMy4yNjggMjUuNTg0NSAxMjQuMTggMjUuNTg0NUMxMjUuMDkzIDI1LjU4NDUgMTI1Ljc4OSAyNS4yODExIDEyNi4zMSAyNC42NzQyQzEyNi44MzIgMjQuMDY3MyAxMjcuMDkzIDIzLjIwMDQgMTI3LjA5MyAyMi4xMTY3QzEyNy4wOTMgMjEuMDMzIDEyNi44MzIgMjAuMTY2MSAxMjYuMzEgMTkuNjAyNUMxMjUuNzg5IDE4Ljk5NTcgMTI1LjA5MyAxOC42OTIyIDEyNC4xMzcgMTguNjkyMkMxMjMuMjI0IDE4LjY5MjIgMTIyLjUyOSAxOC45OTU3IDEyMi4wMDcgMTkuNjAyNUMxMjEuNTI5IDIwLjE2NjEgMTIxLjI2OCAyMS4wMzMgMTIxLjI2OCAyMi4xMTY3WiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMxLjc4NyAxNi4zOTQ5SDEzNy40ODFDMTM5LjIxOSAxNi4zOTQ5IDE0MC40MzYgMTYuNjk4MyAxNDEuMTc1IDE3LjM0ODVDMTQxLjkxNCAxNy45OTg4IDE0Mi4yNjIgMTkuMDgyNCAxNDIuMjYyIDIwLjU1NjNWMjcuNzk1M0gxMzkuMjE5VjIwLjk0NjRDMTM5LjIxOSAyMC4wNzk0IDEzOS4wODkgMTkuNTE1OSAxMzguODI4IDE5LjI5OTJDMTM4LjU2NyAxOS4wMzkxIDEzOC4wNDYgMTguOTA5MSAxMzcuMjIgMTguOTA5MUgxMzQuNzg2VjI3LjgzODZIMTMxLjc0M1YxNi4zOTQ5SDEzMS43ODdaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDMuNzM3NDNIMFYxMC44NDY0SDcuMTI4MzFWMy43Mzc0M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTIzLjI1MTMgLTIuMTU3MjVlLTA1TDE4LjU1MTMgNS41MTY4NUwyNC4wODMxIDEwLjIwNDFMMjguNzgzMSA0LjY4NzI1TDIzLjI1MTMgLTIuMTU3MjVlLTA1WiIgZmlsbD0iI0ZGODYwMCIvPgo8cGF0aCBkPSJNMTUuNjA0MSAzLjczNzQzSDguNDc1ODNWMTAuODQ2NEgxNS42MDQxVjMuNzM3NDNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDEyLjE5MDJIMFYxOS4yOTkySDcuMTI4MzFWMTIuMTkwMloiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMTIuMTkwMkg4LjQ3NTgzVjE5LjI5OTJIMTUuNjA0MVYxMi4xOTAyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMDc5NyAxMi4xOTAySDE2Ljk1MTRWMTkuMjk5MkgyNC4wNzk3VjEyLjE5MDJaIiBmaWxsPSIjRkY4NjAwIi8+CjxwYXRoIGQ9Ik03LjEyODMxIDIwLjY4NjNIMFYyNy43OTUzSDcuMTI4MzFWMjAuNjg2M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMjAuNjg2M0g4LjQ3NTgzVjI3Ljc5NTNIMTUuNjA0MVYyMC42ODYzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMTIzMiAyMC42ODYzSDE2Ljk5NDlWMjcuNzk1M0gyNC4xMjMyVjIwLjY4NjNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik0xNDYgMTUuODMxM0MxNDYgMTYuODcxNyAxNDUuMTc0IDE3LjY5NTMgMTQ0LjEzMSAxNy42OTUzQzE0My4wODggMTcuNjk1MyAxNDIuMjYyIDE2Ljg3MTcgMTQyLjI2MiAxNS44MzEzQzE0Mi4yNjIgMTQuNzkxIDE0My4wODggMTQuMDEwNyAxNDQuMTMxIDE0LjAxMDdDMTQ1LjEzMSAxMy45Njc0IDE0NiAxNC43OTEgMTQ2IDE1LjgzMTNaTTE0Mi45NTcgMTQuNzkxQzE0Mi42OTcgMTUuMDUxMSAxNDIuNTY2IDE1LjQ0MTIgMTQyLjU2NiAxNS44MzEzQzE0Mi41NjYgMTYuNjk4MyAxNDMuMjYyIDE3LjM5MTggMTQ0LjEzMSAxNy4zOTE4QzE0NSAxNy4zOTE4IDE0NS42OTYgMTYuNjk4MyAxNDUuNjk2IDE1LjgzMTNDMTQ1LjY5NiAxNS4wMDc3IDE0NSAxNC4yNzA4IDE0NC4xNzQgMTQuMjcwOEMxNDMuNjUzIDE0LjI3MDggMTQzLjI2MiAxNC40NDQyIDE0Mi45NTcgMTQuNzkxWk0xNDQuODcgMTYuOTE1SDE0NC40NzlMMTQzLjkxNCAxNi4wOTE0VjE2LjkxNUgxNDMuNjA5VjE0Ljc0NzZIMTQzLjk1N0MxNDQuNDM1IDE0Ljc0NzYgMTQ0LjY1MyAxNC45NjQ0IDE0NC42NTMgMTUuMzU0NUMxNDQuNjUzIDE1LjY1NzkgMTQ0LjQ3OSAxNS44NzQ3IDE0NC4xNzQgMTUuOTYxNEwxNDQuODcgMTYuOTE1Wk0xNDQuMDQ0IDE1LjY1NzlDMTQ0LjI2MSAxNS42NTc5IDE0NC4zOTIgMTUuNTI3OSAxNDQuMzkyIDE1LjM1NDVDMTQ0LjM5MiAxNS4xMzc4IDE0NC4yNjEgMTUuMDUxMSAxNDQuMDAxIDE1LjA1MTFIMTQzLjkxNFYxNS42NTc5SDE0NC4wNDRaIiBmaWxsPSIjMzU0M0E4Ii8+Cjwvc3ZnPgo=" style="
    text-align: left;
    width: 146px;
    position: absolute;
    top: 14px;
    left: 31px;
">
            </div>
            <div style="
    position: relative;
    top: 80px;
    left: 32px;
    font-size: 20px;
    text-align: left;
    font-weight: 700;
    letter-spacing: 0.02em;
    font-style: normal;
    line-height: 125%;
    ">Claim your FREE account and get a key in less than a minute</div>
            <ul style="
        font-size: 15px;
        font-weight: 400;
        color: #333333;
        letter-spacing: 0.01em;
        position: relative;
        left: 32px;
        top: 88px;
        line-height: 180%;
        ">
                <li><span>Access to a 30-day free trial of any of our products.</span></li>
                <li><span>Access to 24x5 support by developers via the <a href="https://support.syncfusion.com/create?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information" style="text-decoration: none;
                color: #0D6EFD;
                font-weight: 500;">support tickets</a>, <a href="https://www.syncfusion.com/forums?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information" style="text-decoration: none;
                color: #0D6EFD;
                font-weight: 500;">forum</a>, <a href="https://www.syncfusion.com/feedback?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information
                " style="text-decoration: none;
                color: #0D6EFD;
                font-weight: 500;">feature &amp; feedback page</a> and chat.</span></li>
                <li><span>200+ <a href="https://www.syncfusion.com/succinctly-free-ebooks?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information" style="text-decoration: none;
                color: #0D6EFD;
                font-weight: 500;">ebooks </a>on the latest technologies, industry trends, and research topics.</span>
                </li>
                <li><span>Largest collection of over 7500 flat and wireframe icons for free with Syncfusion<sup>\xAE</sup> <a href="https://www.syncfusion.com/downloads/metrostudio?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information
                " style="text-decoration: none;
                color: #0D6EFD;
                font-weight: 500;">Metro Studio.</a></span></li>
                <li><span>Free and unlimited access to Syncfusion<sup>\xAE</sup> technical <a href="https://www.syncfusion.com/blogs/?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information
                " style="text-decoration: none;
                color: #0D6EFD;
                font-weight: 500;">blogs</a> and <a href="https://www.syncfusion.com/resources/techportal/whitepapers?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information" style="text-decoration: none;
                color: #0D6EFD;
                font-weight: 500;">whitepapers.</a></span></li>
            </ul>
            <div style="
            font-size: 18px;
            font-weight: 700;
            position: relative;
            line-height: 125%;
            letter-spacing: 0.02em;
            top: 90px;
            left: 32px;
    ">Syncfusion is trusted by 29,000+ businesses worldwide</div>
            <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjIyMzAiIGhlaWdodD0iMTU2Ij4KPHBhdGggZD0iTTAgMCBDMTAuMjAxNTE3OTEgOC44MjE1MTgwNSAxNi4yMjU4NjAxNyAxOS4zODQ1MTIyMiAxNy4yODEyNSAzMi45NzI2NTYyNSBDMTcuNDE3OTUwMTYgNDUuOTc2MjU4NTUgMTMuMTkyNTE4MDQgNTcuNjM2ODk1NzMgNC4yNDYwOTM3NSA2Ny4xMzI4MTI1IEMtNS44MzQzNzk4NyA3Ni42NDQzNzA1IC0xNi43MjM2MTUyMyA4MC40NzU4MTc3IC0zMC40MTAxNTYyNSA4MC4yMjI2NTYyNSBDLTQzLjEyNjA0NDAyIDc5LjI2MTgzMzU2IC01NC4yMDMwOTQ1MyA3My40MDM0NzMyNCAtNjIuNzE4NzUgNjMuOTcyNjU2MjUgQy03MS4xNDgwNjkyNSA1MS44OTg2NTk5MiAtNzMuMTk0NzM3MSA0MC4zOTM3NzYxNCAtNzEuNzE4NzUgMjUuOTcyNjU2MjUgQy02OS4wOTkxNjQzNyAxNC41NTg3NDc0NCAtNjIuMzc0NTczNzggNC42NDI1NDI1NiAtNTIuNzE4NzUgLTIuMDI3MzQzNzUgQy0zNS45MDE4NDE2MSAtMTEuOTUyMDc2NTcgLTE1Ljg5MjUyMDU5IC0xMi4xNTE1ODYzNiAwIDAgWiAiIGZpbGw9IiMwODY4NDIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzODguNzE4NzUsNDIuMDI3MzQzNzUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzcuMzY3MjM5MTYgNC4wNDIzMjQxMSAxMS4xMDI1Mzc1MyAxMS4zOTA0MDEzMyAxNCAxOSBDMTQuMzg5NjU4MjYgMjAuOTg5NzkzMzQgMTQuNzQwMDUyODkgMjIuOTg5MTQ0ODEgMTUgMjUgQzE1LjY2IDI1IDE2LjMyIDI1IDE3IDI1IEMxNy4xMDA1NDY4NyAyNC4xNDQwNjI1IDE3LjIwMTA5Mzc1IDIzLjI4ODEyNSAxNy4zMDQ2ODc1IDIyLjQwNjI1IEMxOC45MTc0Mjc1NSAxNC41MDU2MzU4IDIzLjYwODM5NDI3IDUuNzcxNDMyNzMgMzAuMTc5Njg3NSAwLjg5NDUzMTI1IEMzMy43MzEzMzY1NCAtMC44NTA4MDcwMSAzNi4wNzI1NTM3NiAtMC42MjM0MDQxNyA0MCAwIEM0Ny43ODg2NDkxMyAzLjU4Mjc3ODYgNTEuMzQ3MDc2MTEgMTAuOTI1MDE3NDYgNTQuMzUyNzgzMiAxOC41ODg4NjcxOSBDNjAuNjYxMjYyNjMgMzUuNzMzMjUxOTkgNjMuMjM3ODY0ODggNTQuNDE0MDMxNTkgNjMuMDYyNSA3Mi42MjUgQzYzLjA1Nzk4ODI4IDczLjUzMzc4OTA2IDYzLjA1MzQ3NjU2IDc0LjQ0MjU3ODEyIDYzLjA0ODgyODEyIDc1LjM3ODkwNjI1IEM2My4wMzcyMTIwMiA3Ny41ODU5NjY5NSA2My4wMTkyODQ1MyA3OS43OTI5OTI5OSA2MyA4MiBDNTkuMDQgODIgNTUuMDggODIgNTEgODIgQzUwLjkzMDA2ODM2IDgwLjkwMzQ5MTIxIDUwLjg2MDEzNjcyIDc5LjgwNjk4MjQyIDUwLjc4ODA4NTk0IDc4LjY3NzI0NjA5IEM1MC4zMzA4MzIxNSA0MS45ODYzMDU3MyA1MC4zMzA4MzIxNSA0MS45ODYzMDU3MyAzOSA4IEMzOC4wMSA3LjY3IDM3LjAyIDcuMzQgMzYgNyBDMjUuMTQyMTkxNjggMTYuMjQ0MTIxMzEgMjQuODI2NDcwMzkgMzguNDA3NTg2NzUgMjMuNjgzNTkzNzUgNTEuNjcyMzYzMjggQzIzLjA0MTM0NzcxIDU5Ljc3NjY1NDY5IDIyLjUwMDE0OTM2IDY3Ljg4NTgxMjE3IDIyIDc2IEMxOC4wNCA3NiAxNC4wOCA3NiAxMCA3NiBDOS44OTUxMDI1NCA3NC40NzU4NDQ3MyA5Ljg5NTEwMjU0IDc0LjQ3NTg0NDczIDkuNzg4MDg1OTQgNzIuOTIwODk4NDQgQzkuMjg4Njk2MTIgMzkuNjQwNjkzMTMgOS4yODg2OTYxMiAzOS42NDA2OTMxMyAtMSA5IEMtMy4wMzU2NDA0IDcuNzQxNDM2NTkgLTMuMDM1NjQwNCA3Ljc0MTQzNjU5IC01IDcgQy0xNS44NDgzODY5NyAxNi40OTIzMzg2IC0xNi4wNTg3MjYyNSA0MC4yNTk3NTY0MSAtMTcgNTQgQy0xNy40NzQyMTEwMiA2My4zMjgyOTc4NCAtMTcuNzQ3NjYxNTkgNzIuNjYzNDc4NzQgLTE4IDgyIEMtMjIuMjkgODIgLTI2LjU4IDgyIC0zMSA4MiBDLTMxLjg5MjU5MjA1IDU1LjgxNzI5OTc3IC0yOS45NTA2NDQ2MiAyMi44Mzc1NTI0MSAtMTIgMiBDLTguNDczMzg5NDMgLTAuNjQ0OTU3OTMgLTQuMjE5NTgzOTggLTAuOTU4OTk2MzYgMCAwIFogIiBmaWxsPSIjRkZDQzAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4MjgsMzcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzUuODg3MjkwNzMgMS40NDk4NTUxOCA5LjE2NjM4NTEzIDEuMjgxNTYyNTYgMTQuNzUgLTAuODM5ODQzNzUgQzIwLjM1Nzc0OTYyIC0yLjU0NjE0OTE0IDI1LjU0MDY3MjkyIC0xLjM4Mjk1NTEgMzAuNjI1IDEuMjUgQzMyLjkzNzM1MDYzIDMuMjczMzA2OCAzNC4xMDM0MzU0MiA0LjU3NzExOTE4IDM1LjEyNSA3LjQzNzUgQzM0LjM0MTI1IDguMTggMzMuNTU3NSA4LjkyMjUgMzIuNzUgOS42ODc1IEMyOS4xMTkwMTcwMyAxMy40OTEzODY5MiAyOC4yMzgzODk0NyAxNS4wMzE0NzA1OCAyNy44MTI1IDIwLjMxMjUgQzI3Ljk2MDg4MjA0IDI1LjAxNzA4MzQ0IDI5LjE5MzUzOTM2IDI4LjU3NDg0NDU4IDMyLjY2MDE1NjI1IDMxLjkxNzk2ODc1IEMzNC4xMDgzOTEwMSAzMy4xNDAyMzc4IDM1LjYxMjk3ODE1IDM0LjI5NTA4MzQ5IDM3LjEyNSAzNS40Mzc1IEMzNi4wNzAxOTM1MiA0Mi40Njk1NDMyIDMyLjAzNjA5MDQ5IDQ3Ljk3MzE5OTEgMjcuNzUgNTMuNSBDMjQuMjczODU5MzcgNTYuMDY1NzIyODUgMjEuNDA5Njc2NTkgNTYuNjI0MTU5MTggMTcuMTI1IDU2LjQzNzUgQzE1LjExMjc3OTUzIDU1LjgwODY4MTEgMTMuMTEyMjMyNjggNTUuMTQxMzExNTcgMTEuMTI1IDU0LjQzNzUgQzcuMTMyMjAwNjEgNTQuMDEwODUwMDcgMy44Njk5NzIwNCA1NC4xNzkwNDAzMSAwLjA2MjUgNTUuNSBDLTMuNzQ1OTgyNzYgNTYuNzE1NDczMjIgLTYuMDIwMDcxMDYgNTYuNDcwMDcwMjUgLTkuODc1IDU1LjQzNzUgQy0xNy44OTY4MjA0OCA1MC4zNjI0NzA3MiAtMjMuMjI0ODkxNjcgNDAuMjQ1NjM5MjYgLTI1LjQzMzU5Mzc1IDMxLjEzMjgxMjUgQy0yNi42OTE4Nzk2IDIzLjQ0OTQ3NDE1IC0yNy4zMTA4Njc4MiAxNC4yMDI1NjkzMiAtMjIuODc1IDcuNDM3NSBDLTE5LjE4NzExNTEzIDMuMTY0NjQwMjkgLTE0Ljk1ODc1MDk1IC0wLjQ2NDczMTYxIC05LjI2NTYyNSAtMS41NzQyMTg3NSBDLTYuMDIyMDAxNTYgLTEuNTU4MzE4NjQgLTMuMTQ1MDkxMDYgLTAuNzc5NDY1MjEgMCAwIFogIiBmaWxsPSIjMDAwMDAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMjIuODc1LDU1LjU2MjUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzYuOTk4NjY1NzYgNi41NjU2MTQ1OCAxMy4yMzU0MjQ3IDEzLjIxNDc1OTU1IDE0LjE3OTY4NzUgMjMuMTg3NSBDMTMuOTYxMTk2MzQgMjguMjczOTc0MSAxMi4yNTY2NDk1NCAzMi4wNjY5ODMyNiA5LjAzNTE1NjI1IDM1Ljk3NjU2MjUgQzAuNTMzMzg4MDQgNDMuNTgzNDA3NzQgLTguOTc3NTY4MjUgNDUuMDAzODkwNjcgLTE5Ljg1NTQ2ODc1IDQ0Ljg5ODQzNzUgQy0yMS4xODA5NDcyNyA0NC44OTE2Njk5MiAtMjEuMTgwOTQ3MjcgNDQuODkxNjY5OTIgLTIyLjUzMzIwMzEyIDQ0Ljg4NDc2NTYyIEMtMjQuNzAzMTU0MzQgNDQuODczMDM2MTYgLTI2Ljg3MzA3MDQ3IDQ0Ljg1NTEwMjQ1IC0yOS4wNDI5Njg3NSA0NC44MzU5Mzc1IEMtMjkuMzcyOTY4NzUgNDUuNDk1OTM3NSAtMjkuNzAyOTY4NzUgNDYuMTU1OTM3NSAtMzAuMDQyOTY4NzUgNDYuODM1OTM3NSBDLTMyLjQxNzk2ODc1IDQ2Ljk2MDkzNzUgLTMyLjQxNzk2ODc1IDQ2Ljk2MDkzNzUgLTM1LjA0Mjk2ODc1IDQ2LjgzNTkzNzUgQy0zNy4wNDI5Njg3NSA0NC44MzU5Mzc1IC0zNy4wNDI5Njg3NSA0NC44MzU5Mzc1IC0zNy40MTQwNjI1IDQyLjM1NTQ2ODc1IEMtMzcuNzgyMzI5OTcgMzkuNzMzNjQ1MzEgLTM3Ljc4MjMyOTk3IDM5LjczMzY0NTMxIC0zOS44MjgxMjUgMzguNTM1MTU2MjUgQy00MC41Nzk2NDg0NCAzOC4yMDEyODkwNiAtNDEuMzMxMTcxODcgMzcuODY3NDIxODcgLTQyLjEwNTQ2ODc1IDM3LjUyMzQzNzUgQy00Ny4zNTI0NjU4MyAzNC44NTM3NjUzOCAtNTEuNDU1NzUyNzEgMzEuNTMwNDMxOTUgLTU1LjA0Mjk2ODc1IDI2LjgzNTkzNzUgQy01Ni4wNDI5Njg3NSAyMy4zMzU5Mzc1IC01Ni4wNDI5Njg3NSAyMy4zMzU5Mzc1IC01Ni4wNDI5Njg3NSAyMC44MzU5Mzc1IEMtNTEuMzM2NTk3OTUgMTYuMTI5NTY2NyAtNDUuMzAzOTE4MTcgMTQuNTc0NTc2MzMgLTM5LjA0Mjk2ODc1IDEyLjgzNTkzNzUgQy0zOC4zODI5Njg3NSAxMi44MzU5Mzc1IC0zNy43MjI5Njg3NSAxMi44MzU5Mzc1IC0zNy4wNDI5Njg3NSAxMi44MzU5Mzc1IEMtMzYuOTIxNzk2ODggMTEuOTA5MTAxNTYgLTM2LjgwMDYyNSAxMC45ODIyNjU2MiAtMzYuNjc1NzgxMjUgMTAuMDI3MzQzNzUgQy0zNi41MDgyMDMxMyA4LjgyOTgwNDY5IC0zNi4zNDA2MjUgNy42MzIyNjU2MyAtMzYuMTY3OTY4NzUgNi4zOTg0Mzc1IEMtMzYuMDA1NTQ2ODggNS4yMDM0NzY1NiAtMzUuODQzMTI1IDQuMDA4NTE1NjMgLTM1LjY3NTc4MTI1IDIuNzc3MzQzNzUgQy0zNS40NjY5NTMxMyAxLjgwNjY3OTY5IC0zNS4yNTgxMjUgMC44MzYwMTU2MyAtMzUuMDQyOTY4NzUgLTAuMTY0MDYyNSBDLTM0LjM4Mjk2ODc1IC0wLjQ5NDA2MjUgLTMzLjcyMjk2ODc1IC0wLjgyNDA2MjUgLTMzLjA0Mjk2ODc1IC0xLjE2NDA2MjUgQy0zMC4wNzc2OTExNyAxLjI4MTI3NiAtMjkuNDg3MTQ2NjEgMy4yODE5NjA5NyAtMjguODU1NDY4NzUgNy4wMjM0Mzc1IEMtMjguNjk2OTE0MDYgNy45MjQ0OTIxOSAtMjguNTM4MzU5MzggOC44MjU1NDY4OCAtMjguMzc1IDkuNzUzOTA2MjUgQy0yOC4yNjU0Mjk2OSAxMC40NDA5NzY1NiAtMjguMTU1ODU5MzcgMTEuMTI4MDQ2ODcgLTI4LjA0Mjk2ODc1IDExLjgzNTkzNzUgQy0yNy4xMjUxNTYyNSAxMS45MzM5MDYyNSAtMjYuMjA3MzQzNzUgMTIuMDMxODc1IC0yNS4yNjE3MTg3NSAxMi4xMzI4MTI1IEMtMTguMDQ1MDgyNTkgMTMuMDEyMTUwNTIgLTEyLjIzNzYzMDI1IDEzLjk0OTA5MTA3IC02LjA0Mjk2ODc1IDE3LjgzNTkzNzUgQy00LjY2MTcxODU3IDIwLjU5ODQzNzg2IC00Ljg1MjE3NTY5IDIyLjc4MzI0ODQ5IC01LjA0Mjk2ODc1IDI1LjgzNTkzNzUgQy03LjA0Mjk2ODc1IDI3LjgzNTkzNzUgLTcuMDQyOTY4NzUgMjcuODM1OTM3NSAtMTAuNjY3OTY4NzUgMjcuOTYwOTM3NSBDLTExLjc4MTcxODc1IDI3LjkxOTY4NzUgLTEyLjg5NTQ2ODc1IDI3Ljg3ODQzNzUgLTE0LjA0Mjk2ODc1IDI3LjgzNTkzNzUgQy0xMy4zODI5Njg3NSAyNi41MTU5Mzc1IC0xMi43MjI5Njg3NSAyNS4xOTU5Mzc1IC0xMi4wNDI5Njg3NSAyMy44MzU5Mzc1IEMtMTUuNzk1MjI3MTUgMjIuMTc5MDk2MTMgLTE5LjMwNjQ5OTM2IDIxLjMzMzg1NTg3IC0yMy4zNTU0Njg3NSAyMC43MTA5Mzc1IEMtMjUuMjMyMzQzNzUgMjAuNDIyMTg3NSAtMjcuMTA5MjE4NzUgMjAuMTMzNDM3NSAtMjkuMDQyOTY4NzUgMTkuODM1OTM3NSBDLTI4LjU0Nzk2ODc1IDI4LjI1MDkzNzUgLTI4LjU0Nzk2ODc1IDI4LjI1MDkzNzUgLTI4LjA0Mjk2ODc1IDM2LjgzNTkzNzUgQy0xMi4wNjE3Nzk5MSAzNy4zODI2NDE3MiAtMTIuMDYxNzc5OTEgMzcuMzgyNjQxNzIgMi4wODIwMzEyNSAzMC42NDg0Mzc1IEM0Ljc2MDcwNTQxIDI2LjYzMDQyNjI2IDQuNzc1MjY3NDcgMjMuNTI1MDYwNDMgMy45NTcwMzEyNSAxOC44MzU5Mzc1IEMxLjAxMTM1NTYzIDguNTI2MDcyODEgLTguODY3NTEyMiAyLjM4NDg3MDU4IC0xNy43MzQzNzUgLTIuNTYyNSBDLTMxLjY3NjMzMzk0IC05LjMxMTI2NDA3IC00NS42NDMxNzQyMiAtMTEuNTY4NzI4NjMgLTYxLjA0Mjk2ODc1IC0xMS4xNjQwNjI1IEMtNjEuMDQyOTY4NzUgLTEwLjE3NDA2MjUgLTYxLjA0Mjk2ODc1IC05LjE4NDA2MjUgLTYxLjA0Mjk2ODc1IC04LjE2NDA2MjUgQy02My4wMjI5Njg3NSAtOC4xNjQwNjI1IC02NS4wMDI5Njg3NSAtOC4xNjQwNjI1IC02Ny4wNDI5Njg3NSAtOC4xNjQwNjI1IEMtNjcuNzkyOTY4NzUgLTkuOTE0MDYyNSAtNjcuNzkyOTY4NzUgLTkuOTE0MDYyNSAtNjguMDQyOTY4NzUgLTEyLjE2NDA2MjUgQy02NS45Njg1NDMxOCAtMTUuNTIyNjU2MjggLTYzLjQ3ODY1NTM5IC0xNi41NTA0NzkzNSAtNTkuNzkyOTY4NzUgLTE3LjQ3NjU2MjUgQy0zOS4xODA0NTMyNSAtMjAuODM2MzExNzIgLTE1Ljg1MjQ2NDU2IC0xMy4zOTczMDI3NCAwIDAgWiBNLTQ3LjM1NTQ2ODc1IDIwLjgzNTkzNzUgQy00OC4yMzg0NzY1NiAyMS4wMjE1NjI1IC00OS4xMjE0ODQzOCAyMS4yMDcxODc1IC01MC4wMzEyNSAyMS4zOTg0Mzc1IEMtNTAuNjk1MTE3MTkgMjEuNTQyODEyNSAtNTEuMzU4OTg0MzcgMjEuNjg3MTg3NSAtNTIuMDQyOTY4NzUgMjEuODM1OTM3NSBDLTUyLjUwMDI0MDQ0IDI1LjcyNDc4Mzk5IC01Mi41MDAyNDA0NCAyNS43MjQ3ODM5OSAtNTAuNTAzOTA2MjUgMjcuNDY4NzUgQy00Ni40NjI2MDg1IDMwLjM1OTcxNTgxIC00Mi45NDE1MjEwNyAzMi42MTEyOTk0MiAtMzguMDQyOTY4NzUgMzMuODM1OTM3NSBDLTM2LjcwMzk1MDgzIDMyLjcyNDY3MDkxIC0zNi43MDM5NTA4MyAzMi43MjQ2NzA5MSAtMzYuOTQ1MzEyNSAyOS44OTQ1MzEyNSBDLTM2Ljk1NjkxNDA2IDI4LjY5OTU3MDMxIC0zNi45Njg1MTU2MyAyNy41MDQ2MDkzOCAtMzYuOTgwNDY4NzUgMjYuMjczNDM3NSBDLTM2Ljk4OTQ5MjE5IDI1LjA3NTg5ODQ0IC0zNi45OTg1MTU2MiAyMy44NzgzNTkzOCAtMzcuMDA3ODEyNSAyMi42NDQ1MzEyNSBDLTM3LjAxOTQxNDA2IDIxLjcxNzY5NTMxIC0zNy4wMzEwMTU2MyAyMC43OTA4NTkzNyAtMzcuMDQyOTY4NzUgMTkuODM1OTM3NSBDLTQwLjYzODE2MTY3IDE5LjczMjI5MjMgLTQzLjg0MDg2MTA3IDIwLjA4NjE1NDUzIC00Ny4zNTU0Njg3NSAyMC44MzU5Mzc1IFogIiBmaWxsPSIjMjIxRTIwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1NTEuMDQyOTY4NzUsNTguMTY0MDYyNSkiLz4KPHBhdGggZD0iTTAgMCBDMy4zIDAgNi42IDAgMTAgMCBDMTMuOTk1NTQ4MTcgOC40NTIxMjExMyAxNi45NDE0Njg4MSAxNy4xNzE5NjY3OSAyMCAyNiBDMjAuMzMgMTcuNDIgMjAuNjYgOC44NCAyMSAwIEMyNC42MyAwIDI4LjI2IDAgMzIgMCBDMzIgMTguNDggMzIgMzYuOTYgMzIgNTYgQzI4IDU3IDI4IDU3IDIwIDU3IEMxNy4zNiA0OS40MSAxNC43MiA0MS44MiAxMiAzNCBDMTEuNjcgNDIuMjUgMTEuMzQgNTAuNSAxMSA1OSBDNS41NTUgNTkuNDk1IDUuNTU1IDU5LjQ5NSAwIDYwIEMwIDQwLjIgMCAyMC40IDAgMCBaICIgZmlsbD0iI0Q4MUYyNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTk1LDUyKSIvPgo8cGF0aCBkPSJNMCAwIEMxLjE3MDQ2ODc1IDAuMDI3MDcwMzEgMi4zNDA5Mzc1IDAuMDU0MTQwNjMgMy41NDY4NzUgMC4wODIwMzEyNSBDNC40Mzg5MDYyNSAwLjExNjgzNTk0IDUuMzMwOTM3NSAwLjE1MTY0MDYyIDYuMjUgMC4xODc1IEM3LjUzODE4NzMxIDYuMjE4NDU0OTcgOC44MTk3NDQ4OSAxMi4yNTA3NjY0NyAxMC4wOTUyMTQ4NCAxOC4yODQ0MjM4MyBDMTAuNTI5OTIzMzUgMjAuMzM2MjQxNDggMTAuOTY2NDMxOTEgMjIuMzg3Njc4NjMgMTEuNDA0Nzg1MTYgMjQuNDM4NzIwNyBDMTIuMDM1MDI5NTggMjcuMzg5MTUwNjYgMTIuNjU4NzU5NzQgMzAuMzQwODk0MzcgMTMuMjgxMjUgMzMuMjkyOTY4NzUgQzEzLjQ3ODExNDAxIDM0LjIwNzczNDgzIDEzLjY3NDk3ODAzIDM1LjEyMjUwMDkyIDEzLjg3NzgwNzYyIDM2LjA2NDk4NzE4IEMxNC4wNTc5OTQzOCAzNi45MjU1MDE4NiAxNC4yMzgxODExNSAzNy43ODYwMTY1NCAxNC40MjM4MjgxMiAzOC42NzI2MDc0MiBDMTQuNTgzNzEyMTYgMzkuNDI1Mzk0NzQgMTQuNzQzNTk2MTkgNDAuMTc4MTgyMDcgMTQuOTA4MzI1MiA0MC45NTM3ODExMyBDMTUuMjUgNDMuMTg3NSAxNS4yNSA0My4xODc1IDE1LjI1IDQ4LjE4NzUgQzExLjI5IDQ4LjE4NzUgNy4zMyA0OC4xODc1IDMuMjUgNDguMTg3NSBDMi45MiA0NS44Nzc1IDIuNTkgNDMuNTY3NSAyLjI1IDQxLjE4NzUgQy0yLjcgNDEuNTE3NSAtNy42NSA0MS44NDc1IC0xMi43NSA0Mi4xODc1IEMtMTMuNDEgNDQuMTY3NSAtMTQuMDcgNDYuMTQ3NSAtMTQuNzUgNDguMTg3NSBDLTE5LjM3IDQ4LjE4NzUgLTIzLjk5IDQ4LjE4NzUgLTI4Ljc1IDQ4LjE4NzUgQy0yNi44MDgzMTEyNiA0Mi4yMDY0MzQ4NSAtMjQuNzAyMzE0NTggMzYuMzU1OTk3NzMgLTIyLjMxNjQwNjI1IDMwLjUzOTA2MjUgQy0yMS45OTcxOTcxMSAyOS43NTk4NTQ0MyAtMjEuNjc3OTg3OTggMjguOTgwNjQ2MzYgLTIxLjM0OTEwNTgzIDI4LjE3NzgyNTkzIEMtMjAuNjc5NDY4MTMgMjYuNTQ4NjI2IC0yMC4wMDc5ODYzNCAyNC45MjAxODI4OSAtMTkuMzM0NzE2OCAyMy4yOTI0ODA0NyBDLTE4LjY0OTcxMDY3IDIxLjYzMDYwMDMgLTE3Ljk3MDA3MDg4IDE5Ljk2NjQ5ODY1IC0xNy4yOTU2NTQzIDE4LjMwMDI5Mjk3IEMtMTYuMzEzOTk1MTggMTUuODc1MDE3NSAtMTUuMzE3MDg2OTUgMTMuNDU2NTQxMzggLTE0LjMxNjQwNjI1IDExLjAzOTA2MjUgQy0xNC4wMTgzNTU4NyAxMC4yOTUzMjM3OSAtMTMuNzIwMzA1NDggOS41NTE1ODUwOCAtMTMuNDEzMjIzMjcgOC43ODUzMDg4NCBDLTEwLjMyNjYxNzczIDEuNDMzOTIzMTMgLTcuOTE5NDc2MjUgLTAuMjM3NTg0MjkgMCAwIFogTS0zLjc1IDE1LjE4NzUgQy01LjQgMjAuMTM3NSAtNy4wNSAyNS4wODc1IC04Ljc1IDMwLjE4NzUgQy02LjExIDMwLjE4NzUgLTMuNDcgMzAuMTg3NSAtMC43NSAzMC4xODc1IEMtMS40MDM0OTYzMyAyMi42MzcxMTU3OCAtMS40MDM0OTYzMyAyMi42MzcxMTU3OCAtMi43NSAxNS4xODc1IEMtMy4wOCAxNS4xODc1IC0zLjQxIDE1LjE4NzUgLTMuNzUgMTUuMTg3NSBaICIgZmlsbD0iIzIzNDM5QSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTcwLjc1LDUzLjgxMjUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzIuNzg5Mjg3NzggMi4zMDgzNzYwOSAzLjc1MTc2ODg4IDQuMjY1OTI4MzQgNC4yNzM0Mzc1IDcuOTEwMTU2MjUgQzQuNjM2ODE4NzQgMTUuNjExMDQzMzQgMS45NDAyMDM5IDIxLjI4NjM5NDY0IC0yLjc5Njg3NSAyNy4yNjk1MzEyNSBDLTkuMDAxNDUwMzQgMzMuOTU4MDYzNDcgLTE1LjA5NjEwOTIxIDM3LjE0MTAyMzg5IC0yNC4yNSAzNy41IEMtMjguMDQyMTE1NTYgMzcuMzY0OTExOTEgLTI5Ljc2NDgxODA0IDM3LjEzMTcwMTkgLTMzLjEyNSAzNS4yNSBDLTM2LjYxNDUyNjY5IDMxLjA2MjU2Nzk3IC0zNy40NTgyNTE2IDI3Ljc5OTc2MzM3IC0zNy4zMDg1OTM3NSAyMi40Mjk2ODc1IEMtMzYuMzE4MDI0MjMgMTQuNjMwNTE5ODYgLTMxLjc1MTQwMDU4IDguMTU2MDQwNzUgLTI2IDMgQy0xNy42OTY1MDc2NiAtMi42NTI1NDYzMSAtOS4yMjAwNTQ5MyAtNS42NTc3NjA5OCAwIDAgWiAiIGZpbGw9IiMwNjg4MkYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIwNDUsNzkpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuNzQ5ODUzMjUgLTAuMDg3MTc0NyA3LjQ5OTQ0NTU1IC0wLjE0MDQ1MDAzIDExLjI1IC0wLjE4NzUgQzEyLjMxMzQ3NjU2IC0wLjIxMjYzNjcyIDEzLjM3Njk1MzEyIC0wLjIzNzc3MzQ0IDE0LjQ3MjY1NjI1IC0wLjI2MzY3MTg4IEMxNS40OTc0NjA5NCAtMC4yNzMzMzk4NCAxNi41MjIyNjU2MyAtMC4yODMwMDc4MSAxNy41NzgxMjUgLTAuMjkyOTY4NzUgQzE4LjUyMDc1MTk1IC0wLjMwODY3OTIgMTkuNDYzMzc4OTEgLTAuMzI0Mzg5NjUgMjAuNDM0NTcwMzEgLTAuMzQwNTc2MTcgQzIzLjU2MjEwMzM5IDAuMDc0NjIyNTkgMjQuODI1NjM1MDMgMC43MTY2NzQ2NSAyNyAzIEMyNy45MTMwODU5NCA1LjYzNTQ5ODA1IDI3LjkxMzA4NTk0IDUuNjM1NDk4MDUgMjguNDg0Mzc1IDguNzYxNzE4NzUgQzI4LjgwMzQxNzk3IDEwLjQzOTExMTMzIDI4LjgwMzQxNzk3IDEwLjQzOTExMTMzIDI5LjEyODkwNjI1IDEyLjE1MDM5MDYyIEMyOS4zMzM4NjcxOSAxMy4zMTc2MzY3MiAyOS41Mzg4MjgxMiAxNC40ODQ4ODI4MSAyOS43NSAxNS42ODc1IEMyOS45NzA0Mjk2OSAxNi44NjYzNDc2NiAzMC4xOTA4NTkzOCAxOC4wNDUxOTUzMSAzMC40MTc5Njg3NSAxOS4yNTk3NjU2MiBDMzAuOTYwMTAyNjQgMjIuMTcwNzg4OTEgMzEuNDg2NzY4MjIgMjUuMDgzNzY2MzEgMzIgMjggQzM1LjA3NTc1MDg3IDIxLjMyMzQ4NDU3IDM4LjA0NTYyMTcyIDE0LjYyMjgwNzQ2IDQwLjgxMjUgNy44MTI1IEM0MS4xMjM4MDg1OSA3LjA1MTMwODU5IDQxLjQzNTExNzE5IDYuMjkwMTE3MTkgNDEuNzU1ODU5MzggNS41MDU4NTkzOCBDNDIuNTA1ODE1MTcgMy42NzEzNTIxMyA0My4yNTMxOTk4MiAxLjgzNTc5NDExIDQ0IDAgQzQ4LjI5IDAgNTIuNTggMCA1NyAwIEM1NS44NzQ5NzQ1OCA2Ljc1MDE1MjU0IDU1Ljg3NDk3NDU4IDYuNzUwMTUyNTQgNTQuMzQxNzk2ODggMTAuMzIxMjg5MDYgQzU0LjAwNDc0NzMxIDExLjExNTIxMDU3IDUzLjY2NzY5Nzc1IDExLjkwOTEzMjA4IDUzLjMyMDQzNDU3IDEyLjcyNzExMTgyIEM1Mi45NTY4Nzg2NiAxMy41NjQ4MjExNyA1Mi41OTMzMjI3NSAxNC40MDI1MzA1MiA1Mi4yMTg3NSAxNS4yNjU2MjUgQzUxLjg0NTIwMzg2IDE2LjE0MDIzMzc2IDUxLjQ3MTY1NzcxIDE3LjAxNDg0MjUzIDUxLjA4Njc5MTk5IDE3LjkxNTk1NDU5IEM0OS44OTczNDQ2IDIwLjY5NjY1Mjc4IDQ4LjY5ODc0NTQ1IDIzLjQ3MzI5OTM5IDQ3LjUgMjYuMjUgQzQ2LjY5MzQyMDAxIDI4LjEzMjU1OTY1IDQ1Ljg4NzQyNDAyIDMwLjAxNTM2OTYzIDQ1LjA4MjAzMTI1IDMxLjg5ODQzNzUgQzQzLjYxMDkxMDIyIDM1LjMzMjU2NDA1IDQyLjEzODAzMjE4IDM4Ljc2NTkwNDg3IDQwLjY1ODIwMzEyIDQyLjE5NjI4OTA2IEM0MC4zNjE0MzY3NyA0Mi44ODQzNDYzMSA0MC4wNjQ2NzA0MSA0My41NzI0MDM1NiAzOS43NTg5MTExMyA0NC4yODEzMTEwNCBDMzkuMjA1MDIxMiA0NS41MzU2OTMxMSAzOC42MTMyMzIxNyA0Ni43NzM1MzU2NyAzOCA0OCBDMzMuMzggNDggMjguNzYgNDggMjQgNDggQzIzLjcxODAxNzU4IDQ2Ljg2OTgxNDQ1IDIzLjQzNjAzNTE2IDQ1LjczOTYyODkxIDIzLjE0NTUwNzgxIDQ0LjU3NTE5NTMxIEMyMi4wOTM1MjM1MyA0MC4zNzQ2MTE1MyAyMS4wMjMxNzA3NiAzNi4xNzg4ODk2NSAxOS45NDcyNjU2MiAzMS45ODQzNzUgQzE5LjQ4NDU3MjAzIDMwLjE2OTg5MDMxIDE5LjAyNjgzOTQ1IDI4LjM1NDEzMjkyIDE4LjU3NDIxODc1IDI2LjUzNzEwOTM4IEMxNy45MjE5MzU4OSAyMy45MjIyNTYxNiAxNy4yNTE4MjE4MSAyMS4zMTI1MzE3MyAxNi41NzgxMjUgMTguNzAzMTI1IEMxNi4yODA5ODYwMiAxNy40ODcyODcyOSAxNi4yODA5ODYwMiAxNy40ODcyODcyOSAxNS45Nzc4NDQyNCAxNi4yNDY4ODcyMSBDMTQuODEwMjA5MzQgMTEuODA0OTMzNDYgMTMuNzk5Njc2MzYgOC44OTA1NzQxMSAxMCA2IEM3LjQ0MzcyNDc1IDQuODk3OTA2NjcgNy40NDM3MjQ3NSA0Ljg5NzkwNjY3IDQuNzUgNC4yNSBDMy44NTc5Njg3NSA0LjAwNzY1NjI1IDIuOTY1OTM3NSAzLjc2NTMxMjUgMi4wNDY4NzUgMy41MTU2MjUgQzEuMzcxNDA2MjUgMy4zNDU0Njg3NSAwLjY5NTkzNzUgMy4xNzUzMTI1IDAgMyBDMCAyLjAxIDAgMS4wMiAwIDAgWiAiIGZpbGw9IiMyMTI5NjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM2LDU0KSIvPgo8cGF0aCBkPSJNMCAwIEMzLjYzIDAgNy4yNiAwIDExIDAgQzE1IDkuNjI1IDE1IDkuNjI1IDE1IDEzIEMxNS42NiAxMyAxNi4zMiAxMyAxNyAxMyBDMTcuMTkzMzU5MzggMTIuMzk2NzE4NzUgMTcuMzg2NzE4NzUgMTEuNzkzNDM3NSAxNy41ODU5Mzc1IDExLjE3MTg3NSBDMTcuODQ2MzI4MTIgMTAuMzcyNjU2MjUgMTguMTA2NzE4NzUgOS41NzM0Mzc1IDE4LjM3NSA4Ljc1IEMxOC43NTc4NTE1NiA3LjU2NjY0MDYyIDE4Ljc1Nzg1MTU2IDcuNTY2NjQwNjIgMTkuMTQ4NDM3NSA2LjM1OTM3NSBDMjAgNCAyMCA0IDIyIDAgQzI1LjYzIDAgMjkuMjYgMCAzMyAwIEMzMS42MTIzNzc3OCA0LjQ4OTM2NjAxIDMwLjA5OTAyNzU4IDguODM1MTMyMDUgMjguMjA3MDMxMjUgMTMuMTM2NzE4NzUgQzI3LjcyNjY1NDA1IDE0LjI0Mjg1NTIyIDI3LjcyNjY1NDA1IDE0LjI0Mjg1NTIyIDI3LjIzNjU3MjI3IDE1LjM3MTMzNzg5IEMyNi41ODgzNzkzNiAxNi44NTIwMjc5OSAyNS45MjY0NjI4MyAxOC4zMjY4MDAwNiAyNS4yNDk3NTU4NiAxOS43OTQ2Nzc3MyBDMjEuMjM0Nzg2MTQgMjkuMDI3NTEyNzMgMjUuMDc1MDY3NzkgMzYuMzYzMTg5NTkgMjguNTYyNSA0NS4yNSBDMjkuNDAxNTk1MTQgNDcuMzk5MzA1OTEgMzAuMjM2NDQwNzggNDkuNTUwMjc3MTYgMzEuMDY2NDA2MjUgNTEuNzAzMTI1IEMzMS40MzcwOTIyOSA1Mi42NDgzMzAwOCAzMS44MDc3NzgzMiA1My41OTM1MzUxNiAzMi4xODk2OTcyNyA1NC41NjczODI4MSBDMzMgNTcgMzMgNTcgMzMgNjAgQzMxLjU2MTYzMjQ5IDU5Ljg4NTQxMzA3IDMwLjEyNDI5MDM0IDU5Ljc1NzkwODg0IDI4LjY4NzUgNTkuNjI1IEMyNy44ODY5OTIxOSA1OS41NTUzOTA2MyAyNy4wODY0ODQzOCA1OS40ODU3ODEyNSAyNi4yNjE3MTg3NSA1OS40MTQwNjI1IEMyNCA1OSAyNCA1OSAyMSA1NyBDMTkuNjEzMjgxMjUgNTMuOTYwOTM3NSAxOS42MTMyODEyNSA1My45NjA5Mzc1IDE4LjMxMjUgNTAuMzc1IEMxNy44NzU1MDc4MSA0OS4xODY0ODQzNyAxNy40Mzg1MTU2MyA0Ny45OTc5Njg3NSAxNi45ODgyODEyNSA0Ni43NzM0Mzc1IEMxNi42NjIxNDg0NCA0NS44NTgyMDMxMyAxNi4zMzYwMTU2MyA0NC45NDI5Njg3NSAxNiA0NCBDMTQuMjExNzgyMjYgNDYuNjgyMzI2NjEgMTIuNzk4NTczOTYgNDkuMzAyODg5NjEgMTEuMzc1IDUyLjE4NzUgQzEwLjkyODk4NDM4IDUzLjA4ODU1NDY5IDEwLjQ4Mjk2ODc1IDUzLjk4OTYwOTM4IDEwLjAyMzQzNzUgNTQuOTE3OTY4NzUgQzkuNjg1NzAzMTIgNTUuNjA1MDM5MDYgOS4zNDc5Njg3NSA1Ni4yOTIxMDkzNyA5IDU3IEM1LjcgNTYuNjcgMi40IDU2LjM0IC0xIDU2IEMtMC4zOTQ5ODQ5MyA0OS4xNzY3NzQ1NCAyLjkyNjY1MjAyIDQzLjQ2Njc3Nzg3IDUuOTM3NSAzNy40MzE2NDA2MiBDOC40NDU2MTQ0IDMyLjE0NzgyNjM3IDkuNzA2Nzk0NDIgMjguODM0MjUxNjYgOCAyMyBDNi43NTQ5MDE0NiAxOS41MzQxMTc5NSA1LjM3Mjc0NjExIDE2LjE0MTA0NzgxIDMuOTM3NSAxMi43NSBDMy4xOTE5Mjc4NyAxMC45NzU5MjA2OSAyLjQ1MDgyOTQ5IDkuMTk5OTUyNjcgMS43MTQ4NDM3NSA3LjQyMTg3NSBDMS4zODYwNTIyNSA2LjY0NDI0ODA1IDEuMDU3MjYwNzQgNS44NjY2MjEwOSAwLjcxODUwNTg2IDUuMDY1NDI5NjkgQzAgMyAwIDMgMCAwIFogIiBmaWxsPSIjRDgxRTI1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTgzLDUyKSIvPgo8cGF0aCBkPSJNMCAwIEMtMC42NiAzLjYzIC0xLjMyIDcuMjYgLTIgMTEgQy0yLjgyNSAxMC44MzUgLTMuNjUgMTAuNjcgLTQuNSAxMC41IEMtMTEuNDA5NDk0MjQgOS40MzI1NTU0MyAtMTEuNDA5NDk0MjQgOS40MzI1NTU0MyAtMTggMTEgQy0xNy45MDQ4MDU0NiAxMi44OTU3NjM2NiAtMTcuOTA0ODA1NDYgMTIuODk1NzYzNjYgLTE3IDE1IEMtMTQuNTcyODYxMyAxNi44NzM4MTgyMSAtMTQuNTcyODYxMyAxNi44NzM4MTgyMSAtMTEuNjI1IDE4LjUgQy03LjkzODczNzE5IDIwLjYzOTc4MzE2IC01LjIyOTM2OTIyIDIyLjMxNTc1MDIyIC0zIDI2IEMtMS41MDg4MTc1MSAzMS42NDUxOTA4NSAtMi4xNzg0MTgzNiAzNC45MjExNTMwNiAtNSA0MCBDLTkuMzQ2NDcyNTcgNDUuMTQ3MTM4NTcgLTEzLjQ5MjA4MjkgNDcuMDc2ODA4NDEgLTIwLjEyNSA0Ny43NSBDLTI1Ljk4NTQzMDQyIDQ4LjIyMDQyOTExIC0zMS4zMDM1NDk3NiA0Ny4zMzMyMTE3NiAtMzcgNDYgQy0zOC4wOTg5ODcwMiA0Mi43MDMwMzg5NSAtMzcuODcxMjQ0NDQgNDEuNTk1MDUwOTcgLTM3LjA2MjUgMzguMzEyNSBDLTM2Ljg2Nzg1MTU2IDM3LjUwNDI1NzgxIC0zNi42NzMyMDMxMyAzNi42OTYwMTU2MyAtMzYuNDcyNjU2MjUgMzUuODYzMjgxMjUgQy0zNi4zMTY2Nzk2OSAzNS4yNDgzOTg0NCAtMzYuMTYwNzAzMTIgMzQuNjMzNTE1NjMgLTM2IDM0IEMtMzQuODQ1IDM0LjMzIC0zMy42OSAzNC42NiAtMzIuNSAzNSBDLTI4LjE4MjA3NzU3IDM2LjA3MzcyODQ5IC0yNC40NDM3NDM0NCAzNi4zMDEyNzA3NCAtMjAgMzYgQy0xOS4wMSAzNS4zNCAtMTguMDIgMzQuNjggLTE3IDM0IEMtMTcuMTc4MjU1OTkgMzIuMDY3MDg1MjEgLTE3LjE3ODI1NTk5IDMyLjA2NzA4NTIxIC0xOCAzMCBDLTE5LjkwMzM3ODEzIDI4LjYwODcxNTU2IC0xOS45MDMzNzgxMyAyOC42MDg3MTU1NiAtMjIuMjUgMjcuNTYyNSBDLTMxLjA3MTA4MzE3IDIyLjkxMzE3MTEzIC0zMS4wNzEwODMxNyAyMi45MTMxNzExMyAtMzIuNjYwMTU2MjUgMTcuOTI5Njg3NSBDLTMzLjUwOTcyNjg3IDEzLjA2MzIxNTAxIC0zMy4wODExMzgwMSA5LjYxMDg4NDM3IC0zMC4yOTI5Njg3NSA1LjUgQy0yMi4zNjg4Mzc3IC0zLjY5Mjk0OTYyIC0xMC42NjIyMzUzMyAtMi42NjU1NTg4MyAwIDAgWiAiIGZpbGw9IiMyMjM5ODUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE0Niw1NSkiLz4KPHBhdGggZD0iTTAgMCBDNC4yNTM4MDEzOCAxLjUxOTIxNDc4IDUuODUwNjA1NjkgNC4xMzEwOTAyNCA4IDggQzEwLjIxNjIxNjM0IDE0LjEzODE3MjIyIDExLjE3ODUwNDM3IDIwLjIzMzA3NjcgOC41NjI1IDI2LjM3NSBDNyAyOSA3IDI5IDYgMzAgQzMuNjM2NzE4NzUgMzAuMjk2ODc1IDMuNjM2NzE4NzUgMzAuMjk2ODc1IDEgMzAgQy0wLjczMDQ2ODc1IDI4LjM5MDYyNSAtMC43MzA0Njg3NSAyOC4zOTA2MjUgLTIuMTg3NSAyNi4yNSBDLTIuOTIwMzMyMDMgMjUuMjA1ODU5MzggLTIuOTIwMzMyMDMgMjUuMjA1ODU5MzggLTMuNjY3OTY4NzUgMjQuMTQwNjI1IEMtNC45MTMwODMwNCAyMi4xMzk2Nzg4OCAtNS45ODkwNDQ2MiAyMC4xMjczMTg0MyAtNyAxOCBDLTcuMTk5MTYwMTYgMTkuMjY0NTcwMzEgLTcuMTk5MTYwMTYgMTkuMjY0NTcwMzEgLTcuNDAyMzQzNzUgMjAuNTU0Njg3NSBDLTcuNTc4OTQ1MzEgMjEuNjUwMzkwNjIgLTcuNzU1NTQ2ODggMjIuNzQ2MDkzNzUgLTcuOTM3NSAyMy44NzUgQy04LjExMTUyMzQ0IDI0Ljk2NTU0Njg4IC04LjI4NTU0Njg4IDI2LjA1NjA5Mzc1IC04LjQ2NDg0Mzc1IDI3LjE3OTY4NzUgQy05IDMwIC05IDMwIC0xMCAzMiBDLTExLjg3NSAzMS43NSAtMTEuODc1IDMxLjc1IC0xNCAzMSBDLTE1LjI1IDI4LjkzNzUgLTE1LjI1IDI4LjkzNzUgLTE2IDI3IEMtMTYuNDMzMTI1IDI3LjQ3NDM3NSAtMTYuODY2MjUgMjcuOTQ4NzUgLTE3LjMxMjUgMjguNDM3NSBDLTIxLjI2ODUzMTg1IDMyLjEwMDQ5MjQ1IC0yNi43NTQ4NDI1IDMxLjMyNjM3NjY4IC0zMS44MjAzMTI1IDMxLjI4MTI1IEMtMzYuMjA3MDY0MDkgMzAuODkzMjMyNjYgLTM3LjkwMzMwOTI4IDMwLjA5NjY5MDcyIC00MSAyNyBDLTQyLjU2MjUgMjQuNSAtNDIuNTYyNSAyNC41IC00MyAyMiBDLTQxLjYyNSAxOS42ODc1IC00MS42MjUgMTkuNjg3NSAtNDAgMTggQy00MS4zMiAxNy4wMSAtNDIuNjQgMTYuMDIgLTQ0IDE1IEMtNDQgMTEuNzUgLTQ0IDExLjc1IC00MyA4IEMtMzcuODIzNzMwOTQgMy44MDUyMDc0OSAtMzIuMDE2MTEwNTQgMy40NTA1OTcyMiAtMjUuNjI1IDMuNjg3NSBDLTI0LjgxOTMzNTk0IDMuNjk3MTY3OTcgLTI0LjAxMzY3MTg4IDMuNzA2ODM1OTQgLTIzLjE4MzU5Mzc1IDMuNzE2Nzk2ODggQy0xNy4zNDEzMjczMSAzLjgyOTMzNjM1IC0xNy4zNDEzMjczMSAzLjgyOTMzNjM1IC0xNSA1IEMtMTUuMzEyNSA2LjkzNzUgLTE1LjMxMjUgNi45Mzc1IC0xNiA5IEMtMjAuMjg5NzAxMzQgMTAuNDI5OTAwNDUgLTI0LjU3MTM0MzI0IDEwLjQzODEyMTc2IC0yOS4wNjY0MDYyNSAxMC43MTg3NSBDLTMxLjkzMTY1NzQ2IDEwLjgxNTkwNjYxIC0zMS45MzE2NTc0NiAxMC44MTU5MDY2MSAtMzQgMTIgQy0zMy4wMzU3ODEyNSAxMi4xMDk1NzAzMSAtMzIuMDcxNTYyNSAxMi4yMTkxNDA2MiAtMzEuMDc4MTI1IDEyLjMzMjAzMTI1IEMtMjkuODE0ODQzNzUgMTIuNDkwNTg1OTQgLTI4LjU1MTU2MjUgMTIuNjQ5MTQwNjMgLTI3LjI1IDEyLjgxMjUgQy0yNS4zNzA1NDY4NyAxMy4wMzg3MzA0NyAtMjUuMzcwNTQ2ODcgMTMuMDM4NzMwNDcgLTIzLjQ1MzEyNSAxMy4yNjk1MzEyNSBDLTIwLjA1NDQ1OTUzIDEzLjk4ODQ3OTcxIC0xOC40MjUxMDM5MSAxNC41NjkwMDk5MSAtMTYgMTcgQy0xNS42NyAxNy45OSAtMTUuMzQgMTguOTggLTE1IDIwIEMtMTQuODc4ODI4MTMgMTkuMzI0NTMxMjUgLTE0Ljc1NzY1NjI1IDE4LjY0OTA2MjUgLTE0LjYzMjgxMjUgMTcuOTUzMTI1IEMtMTQuNDY1MjM0MzggMTcuMDYxMDkzNzUgLTE0LjI5NzY1NjI1IDE2LjE2OTA2MjUgLTE0LjEyNSAxNS4yNSBDLTEzLjk2MjU3ODEzIDE0LjM2ODI4MTI1IC0xMy44MDAxNTYyNSAxMy40ODY1NjI1IC0xMy42MzI4MTI1IDEyLjU3ODEyNSBDLTEzLjAzMjAzNzM2IDEwLjEzMDUyMjU2IC0xMi4yMjAwMjg4MyA4LjE5NDAwMTQzIC0xMSA2IEMtOC43Njk1MzEyNSA2LjEyMTA5Mzc1IC04Ljc2OTUzMTI1IDYuMTIxMDkzNzUgLTYgNyBDLTMuNzYxNzE4NzUgOS43MjI2NTYyNSAtMy43NjE3MTg3NSA5LjcyMjY1NjI1IC0xLjY4NzUgMTMuMDYyNSBDLTAuOTkwMTE3MTkgMTQuMTY3MjI2NTYgLTAuMjkyNzM0MzggMTUuMjcxOTUzMTIgMC40MjU3ODEyNSAxNi40MTAxNTYyNSBDMS4yMDUwMTk1MyAxNy42OTIxMjg5MSAxLjIwNTAxOTUzIDE3LjY5MjEyODkxIDIgMTkgQzEuODAwODM5ODQgMTcuODA1MDM5MDYgMS44MDA4Mzk4NCAxNy44MDUwMzkwNiAxLjU5NzY1NjI1IDE2LjU4NTkzNzUgQzEuMDY1MTA0MTcgMTMuMzkwNjI1IDAuNTMyNTUyMDggMTAuMTk1MzEyNSAwIDcgQy0wLjIwNzUzOTA2IDUuODk5MTQwNjMgLTAuNDE1MDc4MTMgNC43OTgyODEyNSAtMC42Mjg5MDYyNSAzLjY2NDA2MjUgQy0wLjc1MTM2NzE5IDIuNzg0OTIxODcgLTAuODczODI4MTMgMS45MDU3ODEyNSAtMSAxIEMtMC42NyAwLjY3IC0wLjM0IDAuMzQgMCAwIFogTS0yOCAxOCBDLTI2LjE4Nzc3NDY2IDIwLjA2MjQ5OTQgLTI2LjE4Nzc3NDY2IDIwLjA2MjQ5OTQgLTI0IDIyIEMtMjMuMDEgMjIgLTIyLjAyIDIyIC0yMSAyMiBDLTIxLjMzIDIxLjAxIC0yMS42NiAyMC4wMiAtMjIgMTkgQy0yNC45NyAxOC41MDUgLTI0Ljk3IDE4LjUwNSAtMjggMTggWiBNLTM5IDIyIEMtMzkgMjIuNjYgLTM5IDIzLjMyIC0zOSAyNCBDLTM2LjAzIDI0LjMzIC0zMy4wNiAyNC42NiAtMzAgMjUgQy0zMi4zNTk2ODc0NCAyMi45MDI1MDAwNSAtMzMuNTQ2MTY5OTQgMjIuMDMwOTQyOTYgLTM2Ljc1IDIxLjgxMjUgQy0zNy40OTI1IDIxLjg3NDM3NSAtMzguMjM1IDIxLjkzNjI1IC0zOSAyMiBaICIgZmlsbD0iIzIyMUUyMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjIwLDY3KSIvPgo8cGF0aCBkPSJNMCAwIEMyLjA1NDY4NzUgLTAuMTk5MjE4NzUgMi4wNTQ2ODc1IC0wLjE5OTIxODc1IDUuODY3MTg3NSAwLjM2MzI4MTI1IEM4LjI4Mjg5NDcyIDIuNDI4NzM2NjggMTAuMDk2NDE2NDkgNC43MzM5NTQ2IDExLjg2NzE4NzUgNy4zNjMyODEyNSBDMTIuMTQ5NDkyMTkgNi44NDYzNjcxOSAxMi40MzE3OTY4NyA2LjMyOTQ1MzEzIDEyLjcyMjY1NjI1IDUuNzk2ODc1IEMxNC4yNzE2ODgxMyAzLjQ3NTU5ODQ4IDE1LjU3MTg3NDIgMS45NzEyNTAyOCAxNy44NjcxODc1IDAuMzYzMjgxMjUgQzI2LjQ3NDM3MzUgLTAuNzg0MzQzNTUgMzQuOTQxNzAyNzcgMi4yOTMwNDg0MyA0Mi44NjcxODc1IDUuMzYzMjgxMjUgQzQxLjE2MTc1MzAxIDkuMTA0MjM0MzIgMzkuMjkzODYwOCAxMS4wMjMxMTQxMiAzNS44NjcxODc1IDEzLjM2MzI4MTI1IEMzNC44NzcxODc1IDEzLjM2MzI4MTI1IDMzLjg4NzE4NzUgMTMuMzYzMjgxMjUgMzIuODY3MTg3NSAxMy4zNjMyODEyNSBDMzIuMjA3MTg3NSAxMi4zNzMyODEyNSAzMS41NDcxODc1IDExLjM4MzI4MTI1IDMwLjg2NzE4NzUgMTAuMzYzMjgxMjUgQzI4LjY3MjY0MDY5IDkuNzgzMzQ0MjYgMjguNjcyNjQwNjkgOS43ODMzNDQyNiAyNi4yNDIxODc1IDkuNjc1NzgxMjUgQzI1LjQyNDkyMTg4IDkuNjEwMDM5MDYgMjQuNjA3NjU2MjUgOS41NDQyOTY4OCAyMy43NjU2MjUgOS40NzY1NjI1IEMyMi44MjU4OTg0NCA5LjQyMDQ4ODI4IDIyLjgyNTg5ODQ0IDkuNDIwNDg4MjggMjEuODY3MTg3NSA5LjM2MzI4MTI1IEMyMS43NTg4NzYwNCA5Ljk5OTk5MjUyIDIxLjY1MDU2NDU4IDEwLjYzNjcwMzggMjEuNTM4OTcwOTUgMTEuMjkyNzA5MzUgQzIwLjQxMzg1NTQzIDE3Ljg5NjI5MTI1IDE5LjI3NjQ4MDM1IDI0LjQ5NzY3NjE0IDE4LjEzMTgzNTk0IDMxLjA5NzkwMDM5IEMxNy43MDU4MDczNiAzMy41NjQxNTA1NiAxNy4yODI5NDkwNyAzNi4wMzA5NTA1MSAxNi44NjMyODEyNSAzOC40OTgyOTEwMiBDMTYuMjYwODYwODcgNDIuMDM2ODAwMzYgMTUuNjQ3MjEwNTMgNDUuNTczMjAwOSAxNS4wMzEyNSA0OS4xMDkzNzUgQzE0Ljg0NDcwODU2IDUwLjIxOTc3NjQ2IDE0LjY1ODE2NzExIDUxLjMzMDE3NzkyIDE0LjQ2NTk3MjkgNTIuNDc0MjI3OTEgQzE0LjI4NTkzNzE5IDUzLjQ5NTIxMDcyIDE0LjEwNTkwMTQ5IDU0LjUxNjE5MzU0IDEzLjkyMDQxMDE2IDU1LjU2ODExNTIzIEMxMy42ODcyNDU5NCA1Ni45MjM3OTg2IDEzLjY4NzI0NTk0IDU2LjkyMzc5ODYgMTMuNDQ5MzcxMzQgNTguMzA2ODY5NTEgQzEzLjI1NzI1MDY3IDU4Ljk4NTQ4NTM4IDEzLjA2NTEzIDU5LjY2NDEwMTI2IDEyLjg2NzE4NzUgNjAuMzYzMjgxMjUgQzExLjg3NzE4NzUgNjAuODU4MjgxMjUgMTEuODc3MTg3NSA2MC44NTgyODEyNSAxMC44NjcxODc1IDYxLjM2MzI4MTI1IEM5LjU4MDQ1Mjg0IDU0LjQ1OTA5MjQzIDguMjk5Mjc3MDIgNDcuNTUzODg4ODYgNy4wMjE5NzI2NiA0MC42NDc5NDkyMiBDNi41ODY3MzE3NyAzOC4yOTg0Mjc0MSA2LjE1MDIxNTc5IDM1Ljk0OTE0MTQ1IDUuNzEyNDAyMzQgMzMuNjAwMDk3NjYgQzUuMDgzNTYyMzcgMzAuMjI0ODk1MzcgNC40NTkzMDI5NCAyNi44NDg4NzMzNSAzLjgzNTkzNzUgMjMuNDcyNjU2MjUgQzMuNTQwNjQxNDggMjEuODk1OTAxMTggMy41NDA2NDE0OCAyMS44OTU5MDExOCAzLjIzOTM3OTg4IDIwLjI4NzI5MjQ4IEMzLjA1OTE5MzEyIDE5LjMwNjU3Nzc2IDIuODc5MDA2MzUgMTguMzI1ODYzMDQgMi42OTMzNTkzOCAxNy4zMTU0Mjk2OSBDMi41MzM0NzUzNCAxNi40NTM4MzI0IDIuMzczNTkxMzEgMTUuNTkyMjM1MTEgMi4yMDg4NjIzIDE0LjcwNDUyODgxIEMxLjg2NzE4NzUgMTIuMzYzMjgxMjUgMS44NjcxODc1IDEyLjM2MzI4MTI1IDEuODY3MTg3NSA4LjM2MzI4MTI1IEMtMS43NjI4MTI1IDkuMDIzMjgxMjUgLTUuMzkyODEyNSA5LjY4MzI4MTI1IC05LjEzMjgxMjUgMTAuMzYzMjgxMjUgQy05LjQ2MjgxMjUgMTEuMzUzMjgxMjUgLTkuNzkyODEyNSAxMi4zNDMyODEyNSAtMTAuMTMyODEyNSAxMy4zNjMyODEyNSBDLTE1LjA4OTc3ODMxIDEyLjEyNDAzOTggLTE3LjI0OTM5NzE2IDEwLjU3NzUwMzY3IC0yMC4xMzI4MTI1IDYuMzYzMjgxMjUgQy0xMy40NzU0Nzc3IDMuMTIxMTc0OTQgLTcuMjY2ODA3MzkgMS4yMzc3NTI5MSAwIDAgWiAiIGZpbGw9IiNFODIwMjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE3NzUuMTMyODEyNSwzNS42MzY3MTg3NSkiLz4KPHBhdGggZD0iTTAgMCBDOC41OCAwIDE3LjE2IDAgMjYgMCBDMjYgMy4zIDI2IDYuNiAyNiAxMCBDMjAuNzIgMTAgMTUuNDQgMTAgMTAgMTAgQzEwIDEzLjYzIDEwIDE3LjI2IDEwIDIxIEMxMy45NiAyMSAxNy45MiAyMSAyMiAyMSBDMjIgMjQuMyAyMiAyNy42IDIyIDMxIEMxOC4wNCAzMSAxNC4wOCAzMSAxMCAzMSBDMTAgMzUuMjkgMTAgMzkuNTggMTAgNDQgQzE3LjkyIDQzLjUwNSAxNy45MiA0My41MDUgMjYgNDMgQzI2IDQ2LjMgMjYgNDkuNiAyNiA1MyBDMjIuODY0NjI0MDIgNTQuMDQ1MTI1MzMgMjAuMjI4NTQ5MDIgNTQuMzE1Mzc3MTMgMTYuOTM3NSA1NC41NjI1IEMxNS44NzQwMjM0NCA1NC42NDYyODkwNiAxNC44MTA1NDY4OCA1NC43MzAwNzgxMyAxMy43MTQ4NDM3NSA1NC44MTY0MDYyNSBDOS4xNDgzOTI5NSA1NS4wNDIwODc4NCA0LjU3MjAyNDE4IDU1IDAgNTUgQzAgMzYuODUgMCAxOC43IDAgMCBaICIgZmlsbD0iI0Q4MUUyNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAzNSw1MikiLz4KPHBhdGggZD0iTTAgMCBDMS45MTAxNTYyNSAwLjgyMDMxMjUgMS45MTAxNTYyNSAwLjgyMDMxMjUgNC41MzUxNTYyNSAyLjMyMDMxMjUgQzQuNTM1MTU2MjUgNC45NjAzMTI1IDQuNTM1MTU2MjUgNy42MDAzMTI1IDQuNTM1MTU2MjUgMTAuMzIwMzEyNSBDMS43NzIzOTQ0OCA5Ljc5NzYyNzg0IC0wLjc5MDkzMTM1IDkuMjExNjE2NjMgLTMuNDY0ODQzNzUgOC4zMjAzMTI1IEMtNS4wMjYwMjgwMyA4LjI1MjkwMzg1IC02LjU4OTg2ODk1IDguMjM1MTY3OTQgLTguMTUyMzQzNzUgOC4yNTc4MTI1IEMtOC45NjA1ODU5NCA4LjI2NjgzNTk0IC05Ljc2ODgyODEzIDguMjc1ODU5MzcgLTEwLjYwMTU2MjUgOC4yODUxNTYyNSBDLTExLjIxNjQ0NTMxIDguMjk2NzU3ODEgLTExLjgzMTMyODEzIDguMzA4MzU5MzggLTEyLjQ2NDg0Mzc1IDguMzIwMzEyNSBDLTEyLjc5NDg0Mzc1IDkuMzEwMzEyNSAtMTMuMTI0ODQzNzUgMTAuMzAwMzEyNSAtMTMuNDY0ODQzNzUgMTEuMzIwMzEyNSBDLTEyLjU4NDQxNDA2IDExLjcwNzAzMTI1IC0xMS43MDM5ODQzNyAxMi4wOTM3NSAtMTAuNzk2ODc1IDEyLjQ5MjE4NzUgQy05LjYzNTQyOTY5IDEzLjAxMjk2ODc1IC04LjQ3Mzk4NDM4IDEzLjUzMzc1IC03LjI3NzM0Mzc1IDE0LjA3MDMxMjUgQy01LjU1NDUxMTcyIDE0LjgzNjAxNTYzIC01LjU1NDUxMTcyIDE0LjgzNjAxNTYzIC0zLjc5Njg3NSAxNS42MTcxODc1IEMwLjI0MTM3MzEyIDE3LjY4MTI4NjE5IDMuNTY0NTg1NyAxOS42ODc5ODkzIDUuOTEwMTU2MjUgMjMuNjMyODEyNSBDNi45OTYzOTk0NiAyOC4zMDM2NTgzIDYuMzE4NTczOSAzMS44ODQwNDY4MSA0LjAzNTE1NjI1IDM2LjA3MDMxMjUgQy0wLjE5NDIwMDc5IDM5Ljg3NjczMzg0IC00LjYxMjE4MDA4IDQxLjI1NzA5NTU4IC0xMC4yODUxNTYyNSA0MS4zODI4MTI1IEMtMTUuNjc4ODQ0MzEgNDEuMDMwMDkxNzUgLTE5Ljg2NjQ0MTQ4IDQwLjE3ODc3ODc4IC0yNC40NjQ4NDM3NSAzNy4zMjAzMTI1IEMtMjQuNDY0ODQzNzUgMzQuMDIwMzEyNSAtMjQuNDY0ODQzNzUgMzAuNzIwMzEyNSAtMjQuNDY0ODQzNzUgMjcuMzIwMzEyNSBDLTIzLjE2NTQ2ODc1IDI3Ljk4MDMxMjUgLTIxLjg2NjA5Mzc1IDI4LjY0MDMxMjUgLTIwLjUyNzM0Mzc1IDI5LjMyMDMxMjUgQy0xNS41OTQwNTE2OSAzMS41NDQyMDkyNCAtMTEuODI1MTI2MDMgMzEuNjYwNjQ3ODggLTYuNDY0ODQzNzUgMzEuMzIwMzEyNSBDLTYuNDY0ODQzNzUgMzAuMDAwMzEyNSAtNi40NjQ4NDM3NSAyOC42ODAzMTI1IC02LjQ2NDg0Mzc1IDI3LjMyMDMxMjUgQy03LjQxNzQ2MDk0IDI2Ljk1Njc5Njg3IC04LjM3MDA3ODEyIDI2LjU5MzI4MTI1IC05LjM1MTU2MjUgMjYuMjE4NzUgQy0yMi40OTU3MTQwNSAyMS4wMzAxNzczIC0yMi40OTU3MTQwNSAyMS4wMzAxNzczIC0yNS40NjQ4NDM3NSAxNS4zMjAzMTI1IEMtMjYuMjE3MDIwNTkgMTEuNDI4OTQ4NjQgLTI1LjgyMjM5NTM5IDguMjE0MTkxNTkgLTI0LjMzOTg0Mzc1IDQuNTA3ODEyNSBDLTE4LjQ5MTUxODczIC0yLjMxNTIzMzM1IC04LjEzNzk4MzIgLTIuMjQ0MDcxNDQgMCAwIFogIiBmaWxsPSIjMDA4NDI5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxOTY5LjQ2NDg0Mzc1LDQwLjY3OTY4NzUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzguOTEgMCAxNy44MiAwIDI3IDAgQzI3IDMuMyAyNyA2LjYgMjcgMTAgQzIxLjM5IDEwIDE1Ljc4IDEwIDEwIDEwIEMxMCAxMy42MyAxMCAxNy4yNiAxMCAyMSBDMTQuMjkgMjEgMTguNTggMjEgMjMgMjEgQzIzIDI0LjMgMjMgMjcuNiAyMyAzMSBDMTguNzEgMzEgMTQuNDIgMzEgMTAgMzEgQzEwIDM3LjkzIDEwIDQ0Ljg2IDEwIDUyIEM2LjcgNTIgMy40IDUyIDAgNTIgQzAgMzQuODQgMCAxNy42OCAwIDAgWiAiIGZpbGw9IiNEODFFMjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExMDEsNTIpIi8+CjxwYXRoIGQ9Ik0wIDAgQzIuOTcgMCA1Ljk0IDAgOSAwIEM5IDEzLjUzIDkgMjcuMDYgOSA0MSBDNS4zNyA0MSAxLjc0IDQxIC0yIDQxIEMtMy4yMTY4NzUgNDEuMjQ3NSAtNC40MzM3NSA0MS40OTUgLTUuNjg3NSA0MS43NSBDLTEwLjMxMDAyNjQxIDQyLjA5ODg2OTkyIC0xMy4zMDg5OTE4NSA0MC43MzUwMDM3OSAtMTcgMzggQy0yMC42ODY4MTg5NSAzMy4xNjEwNTAxMyAtMjAuNjk0NzYzNjEgMjcuODUzMTQ1NTEgLTIwIDIyIEMtMTguNzI2MDcyMzggMTguMzEyMzE0NzcgLTE3Ljc0NDY5MDYyIDE2LjU4MzY3NjQzIC0xNC42ODc1IDE0LjE4NzUgQy05LjYzMTE5NDU5IDExLjk1MzMxODU0IC02LjQ1NjIyNjA3IDExLjkwODc1NDc5IC0xIDEzIEMtMC42NyA4LjcxIC0wLjM0IDQuNDIgMCAwIFogTS05LjQzNzUgMjEuMDYyNSBDLTExLjI1OTI1OTU5IDI0LjQ4NzQwODAyIC0xMS42MzY3NDE4MyAyNi4xNzk1NDkgLTExIDMwIEMtOS40NTY2NDk3MSAzMi45NTA0NzU1MyAtOS40NTY2NDk3MSAzMi45NTA0NzU1MyAtNyAzNSBDLTQuNDE0MTc4NzIgMzUuNTg0MDIxMzMgLTQuNDE0MTc4NzIgMzUuNTg0MDIxMzMgLTIgMzUgQzAuMzI4NjYyMjkgMzMuMTExNTM4MTcgMC4zMjg2NjIyOSAzMy4xMTE1MzgxNyAwLjE5NTMxMjUgMjkuOTYwOTM3NSBDMC4xNzIxMDkzOCAyOC43Nzc1NzgxMiAwLjE0ODkwNjI1IDI3LjU5NDIxODc1IDAuMTI1IDI2LjM3NSBDMC4xMDY5NTMxMyAyNS4xODY0ODQzNyAwLjA4ODkwNjI1IDIzLjk5Nzk2ODc1IDAuMDcwMzEyNSAyMi43NzM0Mzc1IEMwLjA0NzEwOTM4IDIxLjg1ODIwMzEzIDAuMDIzOTA2MjUgMjAuOTQyOTY4NzUgMCAyMCBDLTUuMTAxNDUzNyAxOC41Nzg2MzU2MiAtNS4xMDE0NTM3IDE4LjU3ODYzNTYyIC05LjQzNzUgMjEuMDYyNSBaICIgZmlsbD0iIzAwODQyOSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjEzMSw0MCkiLz4KPHBhdGggZD0iTTAgMCBDOS45IDAgMTkuOCAwIDMwIDAgQzMwIDMuMyAzMCA2LjYgMzAgMTAgQzI2LjcgMTAgMjMuNCAxMCAyMCAxMCBDMjAgMjMuODYgMjAgMzcuNzIgMjAgNTIgQzE1LjA1IDUyLjQ5NSAxNS4wNSA1Mi40OTUgMTAgNTMgQzEwIDM4LjgxIDEwIDI0LjYyIDEwIDEwIEM2LjcgMTAgMy40IDEwIDAgMTAgQzAgNi43IDAgMy40IDAgMCBaICIgZmlsbD0iI0Q4MUUyNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTA2Niw1MikiLz4KPHBhdGggZD0iTTAgMCBDLTAuNDgxMTQ5MSA1Ljc3Mzc4OTI1IC0yLjE4NDY3MTgxIDkuOTU4NTk4MzYgLTUgMTUgQy00LjMxOTM3NSAxNC4yOTg3NSAtMy42Mzg3NSAxMy41OTc1IC0yLjkzNzUgMTIuODc1IEMtMS45NjMyMDUxNCAxMS45MTE3MTQxMyAtMC45ODM1MTk0NiAxMC45NTM4NjU2MSAwIDEwIEMwLjU1NDI5Njg3IDkuNDYxMTcxODggMS4xMDg1OTM3NSA4LjkyMjM0Mzc1IDEuNjc5Njg3NSA4LjM2NzE4NzUgQzUuMjUwOTM2OCA1LjA4MTYzODE0IDcuODk2NjgzMzIgMi44ODQwMTU1MyAxMyAzIEMxNS4wMDY0OTYwNyA0LjUzNjM3NTAxIDE1Ljg3Mzg5MDQ5IDUuNTg4MTQ4NyAxNi42MTcxODc1IDguMDE1NjI1IEMxNy4yNTE1NjExIDEzLjUxMzUyOTUzIDE2Ljg0OTMwMTA3IDE3LjA2MTIxMTQ3IDE0IDIyIEMxMS4wNTUwNzk0MyAyNS40MDk5MDgwMyA4LjEyMTcwMjE1IDI4LjEzNTQyMDQ2IDQgMzAgQzEuNjY3MTQ1MiAzMC4wNDcyNTM5OSAtMC42NjcyNDM5MyAzMC4wNTE4OTk3MyAtMyAzMCBDLTMuMjY1NTQ2ODggMzEuMDczNzg5MDYgLTMuNTMxMDkzNzUgMzIuMTQ3NTc4MTIgLTMuODA0Njg3NSAzMy4yNTM5MDYyNSBDLTQuMTYxMzk0MjEgMzQuNjkwMTIwMSAtNC41MTgxNjg2NiAzNi4xMjYzMTcxMiAtNC44NzUgMzcuNTYyNSBDLTUuMDQ5MDIzNDQgMzguMjY2OTcyNjYgLTUuMjIzMDQ2ODggMzguOTcxNDQ1MzEgLTUuNDAyMzQzNzUgMzkuNjk3MjY1NjIgQy02LjUxMjk0ODE1IDQ0LjE2MDI0OTk4IC03LjcxMjAxMjE2IDQ4LjU4NDg3MDUyIC05IDUzIEMtMTMuODc1IDUxLjI1IC0xMy44NzUgNTEuMjUgLTE1IDQ5IEMtMTUuODA3NzM2NjkgNDEuNjExMTk1NTcgLTE0LjQ0MzM4Mzc0IDM1LjkyMzE3NjkzIC0xMS44NzEwOTM3NSAyOS4wNDI5Njg3NSBDLTEwLjkzNjk5MDk5IDI1Ljc3OTg5MjMxIC0xMC44OTM4OTA4MiAyMy4yNTE1MDY5MSAtMTEuMDYyNSAxOS44NzUgQy0xMS4zNDcwMDEzMyAxMi4zOTk0ODI0MiAtOC41MjkxMDMxNSA3LjAzNDkyMzc4IC0zLjgxMjUgMS4zNzUgQy0yIDAgLTIgMCAwIDAgWiBNMTAgMTAgQzcuOTU1NDM5NDEgMTIuMTcyNjQ2NTUgNy45NTU0Mzk0MSAxMi4xNzI2NDY1NSA1Ljg3NSAxNC44NzUgQzUuMTUwNTQ2ODggMTUuNzc5OTIxODcgNC40MjYwOTM3NSAxNi42ODQ4NDM3NSAzLjY3OTY4NzUgMTcuNjE3MTg3NSBDMS44MDc5NDc2NiAxOS43ODY1NTgxMSAxLjgwNzk0NzY2IDE5Ljc4NjU1ODExIDIgMjIgQzYuMDE1MzA1MDUgMjEuMDg3NDMwNjcgNy43MTEyODI3NSAyMC4zNDk0OTk4MyAxMC4zNzUgMTcuMTI1IEMxMi4zMDc1Njg0OSAxMy45OTU1NjM5MiAxMi4zMDc1Njg0OSAxMy45OTU1NjM5MiAxMiAxMCBDMTEuMzQgMTAgMTAuNjggMTAgMTAgMTAgWiAiIGZpbGw9IiMyMjFFMjAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDY2NSw3MCkiLz4KPHBhdGggZD0iTTAgMCBDMy4zIDAgNi42IDAgMTAgMCBDMTAgMTQuMTkgMTAgMjguMzggMTAgNDMgQzEzLjk2IDQzIDE3LjkyIDQzIDIyIDQzIEMyMy4zMiA0My4zMyAyNC42NCA0My42NiAyNiA0NCBDMjYgNDcuMyAyNiA1MC42IDI2IDU0IEMxMy4xMyA1My41MDUgMTMuMTMgNTMuNTA1IDAgNTMgQzAgMzUuNTEgMCAxOC4wMiAwIDAgWiAiIGZpbGw9IiNEODFFMjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExMzMsNTIpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuMyAwIDYuNiAwIDEwIDAgQzEwLjMzIDQuNjIgMTAuNjYgOS4yNCAxMSAxNCBDMTIuNTQ2ODc1IDEzLjQ0MzEyNSAxMi41NDY4NzUgMTMuNDQzMTI1IDE0LjEyNSAxMi44NzUgQzE4LjM5OTA1MzgzIDExLjkwOTg5MTA3IDIwLjEwMjI4MDU4IDEyLjEzOTcyNDgyIDI0IDE0IEMyNS45NTA0Njk0MiAxNS42MTQxODE1OSAyNi44NzAxODY5MyAxNi43NDAzNzM4NiAyOCAxOSBDMjguMDcxODE4MjEgMjEuNzE3NjAxMDggMjguMDkyOTk1MDYgMjQuNDA4NTkzODggMjguMDYyNSAyNy4xMjUgQzI4LjA1Nzk4ODI4IDI3Ljg3OTEwMTU2IDI4LjA1MzQ3NjU2IDI4LjYzMzIwMzEyIDI4LjA0ODgyODEyIDI5LjQxMDE1NjI1IEMyOC4wMzcwMzQ5OSAzMS4yNzM0NzEyNyAyOC4wMTkwOTk0MiAzMy4xMzY3NDU1NSAyOCAzNSBDMjMuNTQ1IDM1LjQ5NSAyMy41NDUgMzUuNDk1IDE5IDM2IEMxOC45Mzk0MTQwNiAzNS4wODQ3NjU2MyAxOC44Nzg4MjgxMiAzNC4xNjk1MzEyNSAxOC44MTY0MDYyNSAzMy4yMjY1NjI1IEMxOC43MzI2MTcxOSAzMi4wMzgwNDY4NyAxOC42NDg4MjgxMiAzMC44NDk1MzEyNSAxOC41NjI1IDI5LjYyNSBDMTguNDgxMjg5MDYgMjguNDQxNjQwNjMgMTguNDAwMDc4MTIgMjcuMjU4MjgxMjUgMTguMzE2NDA2MjUgMjYuMDM5MDYyNSBDMTguMTg5MTUwNjQgMjMuMDg0ODEwOTkgMTguMTg5MTUwNjQgMjMuMDg0ODEwOTkgMTcgMjEgQzE1LjMzMzg4MDk1IDIwLjk1NzI3OSAxMy42NjYxNzExNSAyMC45NTkzNjE2OCAxMiAyMSBDMTAuNDUwNDk3MzIgMjIuNTQ5NTAyNjggMTAuNzgzNDQ4MDcgMjQuMDk5OTA1OTQgMTAuNjgzNTkzNzUgMjYuMjUzOTA2MjUgQzEwLjY0MTY5OTIyIDI3LjEwNzkxMDE2IDEwLjU5OTgwNDY5IDI3Ljk2MTkxNDA2IDEwLjU1NjY0MDYyIDI4Ljg0MTc5Njg4IEMxMC41MTczMjQyMiAyOS43Mzk2Mjg5MSAxMC40NzgwMDc4MSAzMC42Mzc0NjA5NCAxMC40Mzc1IDMxLjU2MjUgQzEwLjM5NDMxNjQxIDMyLjQ2NDE5OTIyIDEwLjM1MTEzMjgxIDMzLjM2NTg5ODQ0IDEwLjMwNjY0MDYyIDM0LjI5NDkyMTg4IEMxMC4yMDAyMjAxNiAzNi41Mjk3NTE1NiAxMC4wOTk1NzUxOSAzOC43NjQ4NTQ4NiAxMCA0MSBDNi43IDQxIDMuNCA0MSAwIDQxIEMwIDI3LjQ3IDAgMTMuOTQgMCAwIFogIiBmaWxsPSIjMDA4NDI5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDA1LDQwKSIvPgo8cGF0aCBkPSJNMCAwIEM0LjI5IDAgOC41OCAwIDEzIDAgQzkuOTk1NDE0NiAxNi4wODQxMjA5OCA2Ljc1MDQyOTQ2IDMyLjA3MjY0NDI3IDMgNDggQy0xLjI5IDQ4IC01LjU4IDQ4IC0xMCA0OCBDLTkuMzUyMDc5OTYgNDIuMjQzMTY0OTggLTguMzkyNDE1OTEgMzYuNjQxMDIxMyAtNy4xODc1IDMwLjk3NjU2MjUgQy03LjAxMzcxODI2IDMwLjE0OTE3NTcyIC02LjgzOTkzNjUyIDI5LjMyMTc4ODk0IC02LjY2MDg4ODY3IDI4LjQ2OTMyOTgzIEMtNi4yOTYwMjY4NiAyNi43MzYyMTU3NCAtNS45Mjk1NTA3IDI1LjAwMzQ0MDc3IC01LjU2MTUyMzQ0IDIzLjI3MDk5NjA5IEMtNC45OTczNjgxOSAyMC42MTI1OTg0NyAtNC40Mzk3NTU1NCAxNy45NTI4ODU2NSAtMy44ODI4MTI1IDE1LjI5Mjk2ODc1IEMtMy41MjY0Mjg0MSAxMy42MDQwODUwMSAtMy4xNjk2NzA5OSAxMS45MTUyOCAtMi44MTI1IDEwLjIyNjU2MjUgQy0yLjY0NTgwODExIDkuNDMwNzc3ODkgLTIuNDc5MTE2MjEgOC42MzQ5OTMyOSAtMi4zMDczNzMwNSA3LjgxNTA5Mzk5IEMtMS4xMTUxOTMxMyAyLjIzMDM4NjI2IC0xLjExNTE5MzEzIDIuMjMwMzg2MjYgMCAwIFogIiBmaWxsPSIjMjIzMTc1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5OCw1NCkiLz4KPHBhdGggZD0iTTAgMCBDMCAzIDAgMyAtMSA1IEMtMS4yMTM3NzcyMSAxMC42MDcwMzIxMyAtMS4yMTM3NzcyMSAxMC42MDcwMzIxMyAwIDE2IEMwLjc1NDE0MjM1IDIyLjQ5MDU2OTM3IC0wLjI2NzY1MDE5IDI1LjU4MjA3Mjg1IC00IDMxIEMtMy45Mjc0OTIxNCAzNC41NTI4ODQ5NCAtMy4zMTc3NDE2NCAzNi40OTE2MTMzNyAtMS40Mzc1IDM5LjUgQzAuNDMyMjMyNTQgNDIuNzUxNzA4NzYgMC40OTI4MjA0OCA0NC4yNjg2NDQ5NCAwIDQ4IEMtMS4xNzkwNDA1IDUxLjQwNDQxNTYzIC0yLjU0MTk2MzU0IDU0LjcwNjM5OTc4IC00IDU4IEMtMTMuMDQyMzMyOTIgNTUuOTEzMzA3NzkgLTE5LjIzMTExMzk5IDQ5LjIyNDI2NTc5IC0yNC42ODc1IDQyLjExMzI4MTI1IEMtMjUuOTc2NzY1MDIgNDAuMDM3NDExMDkgLTI2LjU2ODUwMjU3IDM4LjM4OTQxNzA0IC0yNyAzNiBDLTIyLjM3NSAzMyAtMjIuMzc1IDMzIC0xOSAzMyBDLTE5IDMzLjk5IC0xOSAzNC45OCAtMTkgMzYgQy0xNi4wMjk4MjMwNiAzNS4zNzE4OTgyNyAtMTYuMDI5ODIzMDYgMzUuMzcxODk4MjcgLTEzIDM0IEMtMTEuODAxNjE3OTEgMzEuNjcxNDU1MzcgLTExLjgwMTYxNzkxIDMxLjY3MTQ1NTM3IC0xMSAyOSBDLTEwLjMyMzI0MjE5IDI4LjI5NDg4MjgxIC05LjY0NjQ4NDM4IDI3LjU4OTc2NTYyIC04Ljk0OTIxODc1IDI2Ljg2MzI4MTI1IEMtNi4yODY2NTkzNyAyMi45NTIxNDY5MyAtNi42NDc5NDA5OCAyMC4wOTMyNzg3OCAtNi45Mzc1IDE1LjUgQy03LjQ2Nzc4NzQgNi4zMzQ3MzQyNSAtNy40Njc3ODc0IDYuMzM0NzM0MjUgLTQgMiBDLTEuODEyNSAwLjY4NzUgLTEuODEyNSAwLjY4NzUgMCAwIFogIiBmaWxsPSIjMTg3MjRFIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzQ4LDYwKSIvPgo8cGF0aCBkPSJNMCAwIEM0LjIyNzM1OTE0IDUuMDI2MTMzNCA0LjM0Mzc1IDYuNjc1NjQ0OTEgNC4zNDM3NSAxMy41OTc2NTYyNSBDLTEuOTI2MjUgMTMuNTk3NjU2MjUgLTguMTk2MjUgMTMuNTk3NjU2MjUgLTE0LjY1NjI1IDEzLjU5NzY1NjI1IEMtMTIuMzAwNDg3NzkgMTguNzcwMzg3NjYgLTEyLjMwMDQ4Nzc5IDE4Ljc3MDM4NzY2IC04LjUzMTI1IDE5LjU5NzY1NjI1IEMtMy43NTI5OTc1NyAxOS41OTc2NTYyNSAtMC4wNTEzNDIxNSAxOC4zNjE2NzI4MyA0LjM0Mzc1IDE2LjU5NzY1NjI1IEM0LjY1NjI1IDE5LjQxMDE1NjI1IDQuNjU2MjUgMTkuNDEwMTU2MjUgNC4zNDM3NSAyMi41OTc2NTYyNSBDMC45MDEyMjIwNSAyNS45MjU0MzMyNyAtMy40MTQ1NjU0OCAyNi4zMjk5Njg0IC04LjAyMzQzNzUgMjYuNjYwMTU2MjUgQy0xMy42ODcyNjY0IDI2LjUyNTcwMzM0IC0xOC4xMzQxNTE4MiAyNS4xMTk3NTQ0MyAtMjIuMTU2MjUgMjEuMDk3NjU2MjUgQy0yNC43NzM1ODM1MyAxNi43MzU0MzM3IC0yNS4zMTY1NTAzOCAxMi41OTU3NjMyOCAtMjQuNjU2MjUgNy41OTc2NTYyNSBDLTIzLjI5NDg1NjcgMy44NjEyMjM1NSAtMjEuNDAxMzMxNDIgMS4xNzA3OTU4IC0xOC4yMTg3NSAtMS4yNzczNDM3NSBDLTEyLjMxODQ0Njg5IC0zLjg2NzcyMDcyIC01LjI1NTA1Mjk0IC00LjQ0OTQ0MzQxIDAgMCBaIE0tMTMuNjU2MjUgNC41OTc2NTYyNSBDLTEzLjk4NjI1IDUuOTE3NjU2MjUgLTE0LjMxNjI1IDcuMjM3NjU2MjUgLTE0LjY1NjI1IDguNTk3NjU2MjUgQy0xMS4wMjYyNSA4LjU5NzY1NjI1IC03LjM5NjI1IDguNTk3NjU2MjUgLTMuNjU2MjUgOC41OTc2NTYyNSBDLTQuOTgzMjM1NTkgMy42NzQ2NDYzMyAtNC45ODMyMzU1OSAzLjY3NDY0NjMzIC03LjUzMTI1IDIuNjYwMTU2MjUgQy0xMC4yMTA5NzMzNSAyLjU4MTM0MDg2IC0xMS40ODU2NTkxNSAzLjAyNTg0OTA4IC0xMy42NTYyNSA0LjU5NzY1NjI1IFogIiBmaWxsPSIjMDA4NDI5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDkxLjY1NjI1LDU1LjQwMjM0Mzc1KSIvPgo8cGF0aCBkPSJNMCAwIEMzLjUyMDkwNTk1IDQuNTExMTYwNzUgMyA2LjQxMTcwNDg5IDMgMTIuNTYyNSBDLTMuMjcgMTIuNTYyNSAtOS41NCAxMi41NjI1IC0xNiAxMi41NjI1IEMtMTMuNjQ0MjM3NzkgMTcuNzM1MjMxNDEgLTEzLjY0NDIzNzc5IDE3LjczNTIzMTQxIC05Ljg3NSAxOC41NjI1IEMtNS4wOTY3NDc1NyAxOC41NjI1IC0xLjM5NTA5MjE1IDE3LjMyNjUxNjU4IDMgMTUuNTYyNSBDMy4zMTI1IDE4LjM3NSAzLjMxMjUgMTguMzc1IDMgMjEuNTYyNSBDLTAuNDQyNTI3OTUgMjQuODkwMjc3MDIgLTQuNzU4MzE1NDggMjUuMjk0ODEyMTUgLTkuMzY3MTg3NSAyNS42MjUgQy0xNS4wMzEwMTY0IDI1LjQ5MDU0NzA5IC0xOS40Nzc5MDE4MiAyNC4wODQ1OTgxOCAtMjMuNSAyMC4wNjI1IEMtMjYuMTE3MzMzNTMgMTUuNzAwMjc3NDUgLTI2LjY2MDMwMDM4IDExLjU2MDYwNzAzIC0yNiA2LjU2MjUgQy0yNC42Mzg2MDY3IDIuODI2MDY3MyAtMjIuNzQ1MDgxNDIgMC4xMzU2Mzk1NSAtMTkuNTYyNSAtMi4zMTI1IEMtMTIuNjA1NTU1NjYgLTUuMzY2NzY4MjUgLTUuOTgyNDU3MiAtNC44NjA3NDY0OCAwIDAgWiBNLTE1IDMuNTYyNSBDLTE1LjMzIDQuODgyNSAtMTUuNjYgNi4yMDI1IC0xNiA3LjU2MjUgQy0xMi4zNyA3LjU2MjUgLTguNzQgNy41NjI1IC01IDcuNTYyNSBDLTYuMzI2OTg1NTkgMi42Mzk0OTAwOCAtNi4zMjY5ODU1OSAyLjYzOTQ5MDA4IC04Ljg3NSAxLjYyNSBDLTExLjU1NDcyMzM1IDEuNTQ2MTg0NjEgLTEyLjgyOTQwOTE1IDEuOTkwNjkyODMgLTE1IDMuNTYyNSBaICIgZmlsbD0iIzAwODQyOSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjE2OSw1Ni40Mzc1KSIvPgo8cGF0aCBkPSJNMCAwIEMzLjMgMCA2LjYgMCAxMCAwIEMxMCAxOC4xNSAxMCAzNi4zIDEwIDU1IEM3LjAzIDU1IDQuMDYgNTUgMSA1NSBDMCA1NCAwIDU0IC0wLjEyMDI1NDUyIDUxLjgyOTY5NjY2IEMtMC4xMTgwMzM5MSA1MC44NzI2MTMwNyAtMC4xMTU4MTMyOSA0OS45MTU1Mjk0OCAtMC4xMTM1MjUzOSA0OC45Mjk0NDMzNiBDLTAuMTEzNDQ5ODYgNDcuODQ4Mzk4MjggLTAuMTEzMzc0MzMgNDYuNzY3MzUzMjEgLTAuMTEzMjk2NTEgNDUuNjUzNTQ5MTkgQy0wLjEwODEzNTIyIDQ0LjQ3NzUyNjQgLTAuMTAyOTczOTQgNDMuMzAxNTAzNiAtMC4wOTc2NTYyNSA0Mi4wODk4NDM3NSBDLTAuMDk2MjQxMyA0MC44OTI2NzIyNyAtMC4wOTQ4MjYzNSAzOS42OTU1MDA3OSAtMC4wOTMzNjg1MyAzOC40NjIwNTEzOSBDLTAuMDg3NzQ5NzkgMzQuNjIwNTA5MzQgLTAuMDc1MTk0MTEgMzAuNzc5MDI0NTcgLTAuMDYyNSAyNi45Mzc1IEMtMC4wNTc0ODc0MSAyNC4zNDA0OTU2MyAtMC4wNTI5MjQwOSAyMS43NDM0OTAzNSAtMC4wNDg4MjgxMiAxOS4xNDY0ODQzOCBDLTAuMDM3Nzc0MjcgMTIuNzY0MzAwNjggLTAuMDIwNDk3MDggNi4zODIxNjAwNyAwIDAgWiAiIGZpbGw9IiNEODFGMjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExNjYsNTIpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuMyAwIDYuNiAwIDEwIDAgQzEwIDAuNjYgMTAgMS4zMiAxMCAyIEMxMC45OSAxLjM0IDExLjk4IDAuNjggMTMgMCBDMTYuMzkyMTAyODcgLTAuNTQ2MTg2MDYgMTkuNjA2NTQzNSAtMC41MzU4MDg5MiAyMyAwIEMyNi42MTk5NTgyMSAyLjY1OTU2MTEzIDI4LjIwNjgzODE3IDQuNjQ4NDIzNTEgMjkgOSBDMjkuMDc4MTg2MzYgMTAuNTEzOTU2OTYgMjkuMTA3ODk5MDkgMTIuMDMwOTM1MDcgMjkuMDk3NjU2MjUgMTMuNTQ2ODc1IEMyOS4wOTQ0MzM1OSAxNC4zOTEyMTA5NCAyOS4wOTEyMTA5NCAxNS4yMzU1NDY4NyAyOS4wODc4OTA2MiAxNi4xMDU0Njg3NSBDMjkuMDc5NTExNzIgMTYuOTc4MTY0MDYgMjkuMDcxMTMyODEgMTcuODUwODU5MzcgMjkuMDYyNSAxOC43NSBDMjkuMDU3OTg4MjggMTkuNjM4MTY0MDYgMjkuMDUzNDc2NTYgMjAuNTI2MzI4MTIgMjkuMDQ4ODI4MTIgMjEuNDQxNDA2MjUgQzI5LjAzNzA3NDIyIDIzLjYyNzYzMzE2IDI5LjAxOTEzOTY2IDI1LjgxMzgyNTI4IDI5IDI4IEMyNS43IDI4IDIyLjQgMjggMTkgMjggQzE4LjUwNSAxOC4xIDE4LjUwNSAxOC4xIDE4IDggQzE2LjY4IDcuNjcgMTUuMzYgNy4zNCAxNCA3IEMxMy4wMSA3LjY2IDEyLjAyIDguMzIgMTEgOSBDMTAuNDE0MDczNjYgMTIuMTE2MTA1NTQgMTAuNDE0MDczNjYgMTIuMTE2MTA1NTQgMTAuMzEyNSAxNS42MjUgQzEwLjI0Njc1NzgxIDE2LjgxMzUxNTYzIDEwLjE4MTAxNTYzIDE4LjAwMjAzMTI1IDEwLjExMzI4MTI1IDE5LjIyNjU2MjUgQzEwLjA3NTg5ODQ0IDIwLjE0MTc5Njg3IDEwLjAzODUxNTYyIDIxLjA1NzAzMTI1IDEwIDIyIEM2LjcgMjEuNjcgMy40IDIxLjM0IDAgMjEgQzAgMTQuMDcgMCA3LjE0IDAgMCBaICIgZmlsbD0iIzAwODQyOSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjAzNiw1MykiLz4KPHBhdGggZD0iTTAgMCBDNy44MjQzNDA1OCAtMC4xMTcwMzA3NCA3LjgyNDM0MDU4IC0wLjExNzAzMDc0IDEwLjQ4ODI4MTI1IDIuNDE0MDYyNSBDMTIuNzg3NDM3MTMgNi4yMDk3NTk4NSAxMy43NDA2OTg2IDkuNTU1ODA4MzkgMTMgMTQgQzExLjk1MTAwNjYgMTUuNzE2NTM0NjYgMTAuOTAxMjc3MjcgMTcuNDMyNzI1OTggOS44MzIwMzEyNSAxOS4xMzY3MTg3NSBDOC4yODEzNDc3OCAyMi42MDkzNzYxMSA5LjE2NDUxNTkyIDI1LjM1OTY3NjUzIDEwIDI5IEMxMC4zNTA2MjUgMjkuNzAxMjUgMTAuNzAxMjUgMzAuNDAyNSAxMS4wNjI1IDMxLjEyNSBDMTIuMzk2NjM0OTIgMzMuNzkzMjY5ODUgMTIuMTk1NTczOTMgMzYuMDY2MzkwOTggMTIgMzkgQzExIDQwIDExIDQwIDguMTI4OTA2MjUgNDAuMTMyODEyNSBDNi45NTE5OTIxOSA0MC4xMzAyMzQzOCA1Ljc3NTA3ODEyIDQwLjEyNzY1NjI1IDQuNTYyNSA0MC4xMjUgQzMuMzg4MTY0MDYgNDAuMTI3NTc4MTIgMi4yMTM4MjgxMiA0MC4xMzAxNTYyNSAxLjAwMzkwNjI1IDQwLjEzMjgxMjUgQy0yIDQwIC0yIDQwIC00IDM5IEMtMy4yNDgxNzUxOCAzMS40ODE3NTE4MiAtMy4yNDgxNzUxOCAzMS40ODE3NTE4MiAtMS45Mzc1IDI4LjkzNzUgQy0wLjQzNzQ4NjY0IDI1LjgzNzQ3MjM5IC0wLjY0OTM5MDYgMjMuMzg5MjI0MiAtMSAyMCBDLTIuMzE0MzE2OTUgMTcuOTg3NDUyMTggLTMuNjQ3MjE4ODUgMTUuOTg2ODk3MzEgLTUgMTQgQy01Ljg1NTE0NzQgOS42MjkyNDY2MSAtNC43NjA4MzQzNiA3LjI4MzU1ODE3IC0yLjUgMy42MjUgQy0xLjY3OTQ5NTggMi40MDc5MTg3NiAtMC44NTAyODE2NCAxLjE5NjQ2NzczIDAgMCBaICIgZmlsbD0iI0ZBRkJGQiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM1Nyw4MikiLz4KPHBhdGggZD0iTTAgMCBDMy45MDkzODcwMyAzLjczOTQxMzY4IDMuOTA5Mzg3MDMgMy43Mzk0MTM2OCA0LjEzMjgxMjUgNi44NDc2NTYyNSBDNC4xMzAyMzQzOCA3LjU3ODU1NDY5IDQuMTI3NjU2MjUgOC4zMDk0NTMxMyA0LjEyNSA5LjA2MjUgQzQuMTIzNzEwOTQgOS44NjU1ODU5NCA0LjEyMjQyMTg4IDEwLjY2ODY3MTg4IDQuMTIxMDkzNzUgMTEuNDk2MDkzNzUgQzQuMDAyNzk5MjggMTMuOTQyMTE4MSAzLjYyMDk4NDQgMTYuMjE4MTI5NDkgMy4xODc1IDE4LjYyNSBDMi43MDMyNTg3MiAyMi4yNzU5MjQ0MiAzLjIxMzk4MTIzIDIzLjg4MzIwMTQgNS40Mzc1IDI2LjgxMjUgQzUuOTEwNTg1OTQgMjcuMzM0NTcwMzEgNi4zODM2NzE4NyAyNy44NTY2NDA2MiA2Ljg3MTA5Mzc1IDI4LjM5NDUzMTI1IEM4IDMwIDggMzAgOCAzNCBDOC42NiAzNCA5LjMyIDM0IDEwIDM0IEM3Ljk4MzAzMjM0IDI5LjA1NjczNDA2IDcuOTgzMDMyMzQgMjkuMDU2NzM0MDYgNS4yNSAyNC41IEMzLjUwMjExMTMyIDIxLjAwNDIyMjYzIDQuMzAxODA1ODYgMTguODA4MzMxNjUgNSAxNSBDNS4yMjA5MzE1MSAxMC40OTc1NjgxMyA1LjIzOTU1NzQ5IDYuMzU4MTI2NzUgNCAyIEM3LjQ0NTAwNjYgNC45MzU2NjQyMyA3LjU3NDgyNDY0IDcuMjU3NDQyOTQgNy45Njg3NSAxMS41OTc2NTYyNSBDNy45OTg4MzUyIDEzLjkxMDQ1NTggNy43MDc4ODYzOCAxNS44NjYzODczNSA3LjI1IDE4LjEyNSBDNi45ODQxMjA2MSAyMi4yNDYxMzA1MyA3LjEwOTg0MDQyIDIyLjY4NTU3NDIyIDkuNDM3NSAyNS43NSBDOS45MTA1ODU5NCAyNi4yODEwOTM3NSAxMC4zODM2NzE4NyAyNi44MTIxODc1IDEwLjg3MTA5Mzc1IDI3LjM1OTM3NSBDMTIgMjkgMTIgMjkgMTIgMzMgQzE0LjMxIDMzLjY2IDE2LjYyIDM0LjMyIDE5IDM1IEMxOSAzNS45OSAxOSAzNi45OCAxOSAzOCBDMTkuNjM5Mzc1IDM4LjI4ODc1IDIwLjI3ODc1IDM4LjU3NzUgMjAuOTM3NSAzOC44NzUgQzIzIDQwIDIzIDQwIDI0IDQyIEMxOS4yNDAwNTc5OSA0OC4wNjgxMzc5OSAxMy45MjU3ODgzNiA1My40MjgxMzM2MyA3IDU3IEM0IDU2IDQgNTYgMi43OTY4NzUgNTMuOTI1NzgxMjUgQy0wLjc2MDI4NTczIDQ1LjA0NjE1MjQyIC0wLjc2MDI4NTczIDQ1LjA0NjE1MjQyIDEgNDAgQzEuNTE1NjI1IDM5LjE3NSAyLjAzMTI1IDM4LjM1IDIuNTYyNSAzNy41IEM0LjM4NzAyNzU2IDM0LjMyNjkwODU4IDQuNTE2NDQxMTggMzIuNjE1MDg4MjUgNCAyOSBDMy4zNCAyOC4wMzA2MjUgMi42OCAyNy4wNjEyNSAyIDI2LjA2MjUgQy0wLjQxMDU3NzgyIDIyLjM3MTMwMjcyIC0wLjQwODMyNzU1IDIwLjMyODI3MTk5IDAgMTYgQzAuMzMgMTUuMDEgMC42NiAxNC4wMiAxIDEzIEMxLjA5MjQ3MzgxIDExLjUyMzEzODg5IDEuMTI5OTkwNzEgMTAuMDQyMjQ0OTkgMS4xMjUgOC41NjI1IEMxLjEyODg2NzE5IDcuNDE5NzQ2MDkgMS4xMjg4NjcxOSA3LjQxOTc0NjA5IDEuMTMyODEyNSA2LjI1MzkwNjI1IEMxLjAwMjc2MDE1IDQuMDQ2ODQxNDEgMC42MDg1NjE5OSAyLjEyMDMwNzI0IDAgMCBaICIgZmlsbD0iIzI5N0Q1QiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM3NCw2MSkiLz4KPHBhdGggZD0iTTAgMCBDMCAyLjY0IDAgNS4yOCAwIDggQy0wLjk5IDcuNjcgLTEuOTggNy4zNCAtMyA3IEMtNi41NTg4MDA1MSA2LjYyNjg5OTk1IC05LjgyNzU4NTIyIDYuMzQwNTE2NjkgLTEzIDguMTI1IEMtMTQuNDYyMjEyMTcgMTAuODY2NjQ3ODEgLTE0LjMxODMzNzMzIDEyLjk0Mzk2MTYyIC0xNCAxNiBDLTEyLjMyMDg1NTg1IDE5LjIyNTQwMTU2IC0xMi4zMjA4NTU4NSAxOS4yMjU0MDE1NiAtOS4zMTI1IDE5Ljc1IEMtNS43MDcwOTgyNCAyMC4wMjIxMDU3OSAtMi41NTAxMDA2NiAxOS42MzkwMTgxMiAxIDE5IEMxIDIxLjMxIDEgMjMuNjIgMSAyNiBDLTYuMzQ1MjM2NzIgMjguMjcwMzQ1ODkgLTEyLjM4MTY4ODY4IDI4Ljg3NjE2MTQyIC0xOS4zNzUgMjUuMjUgQy0yMi44MjkzNDgyMSAyMi4yODkxMzAxIC0yNC42OTA4NzcyNCAyMC4yNzgzNDkyMiAtMjUuMzE2NDA2MjUgMTUuNjY3OTY4NzUgQy0yNS41ODIxMzY1MiA5Ljk1MDQ4MTkxIC0yNC45Njg0NzE1MiA2LjM5NzQ5NTQ3IC0yMSAyIEMtMTQuMTcwMDE0MTEgLTMuMjEyMzU3NjUgLTcuODE4OTkzNjcgLTEuODY5NzU5MzYgMCAwIFogIiBmaWxsPSIjMDA4NDI5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDAyLDU0KSIvPgo8cGF0aCBkPSJNMCAwIEMzIDMuMTkwMzcxOTkgMyAzLjE5MDM3MTk5IDMgNiBDLTAuMDkyNjI3NjcgNy41NDYzMTM4NCAtMy4zNjcwODkxIDcuMzkwNjA3MTYgLTYuNzg1MTU2MjUgNy42MjEwOTM3NSBDLTcuODgxNTAzOTEgNy44MDg2NTIzNCAtNy44ODE1MDM5MSA3LjgwODY1MjM0IC05IDggQy05LjMzIDguNjYgLTkuNjYgOS4zMiAtMTAgMTAgQy03LjY5IDEwLjMzIC01LjM4IDEwLjY2IC0zIDExIEMtMi40Mzc1IDEyLjkzNzUgLTIuNDM3NSAxMi45Mzc1IC0yIDE1IEMtMyAxNiAtMyAxNiAtNS4yODUxNTYyNSAxNi4wOTc2NTYyNSBDLTYuNjU5OTQxNDEgMTYuMDgwMjUzOTEgLTYuNjU5OTQxNDEgMTYuMDgwMjUzOTEgLTguMDYyNSAxNi4wNjI1IEMtOC45ODE2MDE1NiAxNi4wNTM0NzY1NiAtOS45MDA3MDMxMiAxNi4wNDQ0NTMxMyAtMTAuODQ3NjU2MjUgMTYuMDM1MTU2MjUgQy0xMS41NTc5Mjk2OSAxNi4wMjM1NTQ2OSAtMTIuMjY4MjAzMTMgMTYuMDExOTUzMTMgLTEzIDE2IEMtMTMuMzMgMTcuNjUgLTEzLjY2IDE5LjMgLTE0IDIxIEMtMTIuNzYyNSAyMC42NDkzNzUgLTExLjUyNSAyMC4yOTg3NSAtMTAuMjUgMTkuOTM3NSBDLTcuMDk2NzA4IDE5LjA0NDA2NzI3IC01LjEzMjI1ODM2IDE4Ljk5MTE4NzA2IC0yIDIwIEMtMS42NyAyMS4zMiAtMS4zNCAyMi42NCAtMSAyNCBDLTcuMDgzMDUwMzggMjguMTkwNTQ1ODIgLTExLjYyMjE1Nzc3IDI5Ljk3NTQ2ODkgLTE5IDI5IEMtMjEuMDYyNSAyNy4zNzUgLTIxLjA2MjUgMjcuMzc1IC0yMiAyNSBDLTIyLjU2NDA4OTkgMjAuMDM2MDA4OTIgLTIxLjQ2ODAwNjg0IDE1LjcxMzA3NDU4IC0yMCAxMSBDLTE4LjM3NSA5IC0xOC4zNzUgOSAtMTcgOCBDLTE3LjQ5NSA3LjU2Njg3NSAtMTcuOTkgNy4xMzM3NSAtMTguNSA2LjY4NzUgQy0yMCA1IC0yMCA1IC0yMCAyIEMtNi4wODE1NDUwNiAtMS4zMTY3MzgyIC02LjA4MTU0NTA2IC0xLjMxNjczODIgMCAwIFogIiBmaWxsPSIjMjIxRTIwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2NTIsNzEpIi8+CjxwYXRoIGQ9Ik0wIDAgQzIgMiAyIDIgMi4zMTI1IDUuMTg3NSBDMS45Njk4MjgxOCA5LjM2ODA5NjIyIDAuNjY2NjA4NjQgMTIuMTgwNjg4NTMgLTEgMTYgQy0xLjU4NzYzMjQ0IDIwLjExMzQyNzEgLTEuMzMwNDM1NTggMjEuNTA0MzQ2NjQgMSAyNSBDMy4zMzQ1ODYzNSAyOC41MDE4Nzk1MyAzLjY3MjYwNzI3IDI5Ljg4MDI4MDQ3IDMgMzQgQzEuOTUxMDA2NiAzNS43MTY1MzQ2NiAwLjkwMTI3NzI3IDM3LjQzMjcyNTk4IC0wLjE2Nzk2ODc1IDM5LjEzNjcxODc1IEMtMS43MTg2NTIyMiA0Mi42MDkzNzYxMSAtMC44MzU0ODQwOCA0NS4zNTk2NzY1MyAwIDQ5IEMwLjM1MDYyNSA0OS43MDEyNSAwLjcwMTI1IDUwLjQwMjUgMS4wNjI1IDUxLjEyNSBDMi4zODM4NTAwOCA1My43Njc3MDAxNyAyLjEzMjA5ODM3IDU2LjA5MzgzNTkxIDIgNTkgQzEuMDEgNTkgMC4wMiA1OSAtMSA1OSBDLTEuMjg4NzUgNTcuNzgzMTI1IC0xLjU3NzUgNTYuNTY2MjUgLTEuODc1IDU1LjMxMjUgQy0yLjQ4MDE5MTExIDUyLjgzMDc4MTA3IC0zLjEwNzk3MDM0IDUwLjc2NzAxMTM3IC00LjE4NzUgNDguNDM3NSBDLTUuMzQyMzE4NDQgNDQuOTczMDQ0NjggLTQuODE4NjU2ODYgNDIuNTI2NTIxODcgLTQgMzkgQy0zLjIyNjU2MjUgMzcuNzMxNTYyNSAtMy4yMjY1NjI1IDM3LjczMTU2MjUgLTIuNDM3NSAzNi40Mzc1IEMtMC42MTEwNTMyMSAzMy4zNDA0ODE1MiAtMC41NTY2MDA4MSAzMS41NDcxOTM1MyAtMSAyOCBDLTIuNDI2MjE2ODQgMjUuMjg4NzM2MTYgLTIuNDI2MjE2ODQgMjUuMjg4NzM2MTYgLTQgMjMgQy00IDIyLjM0IC00IDIxLjY4IC00IDIxIEMtNi45NyAyMSAtOS45NCAyMSAtMTMgMjEgQy0xNi44OTY3Nzg1MSAyNy4wMDIyMTQ0NSAtMTYuODk2Nzc4NTEgMjcuMDAyMjE0NDUgLTE3IDM0IEMtMTYuMzQgMzQuOTY5Mzc1IC0xNS42OCAzNS45Mzg3NSAtMTUgMzYuOTM3NSBDLTEyLjUzNTY0NjkzIDQwLjcxMTA0MDY0IC0xMi40NTUwODUxNiA0Mi41NjI4MzYyOCAtMTMgNDcgQy0xMy45MzU3ODk5NSA0OS4zNTk4MTgxMyAtMTQuOTMzNDc4MDggNTEuNjk2MzEyNjQgLTE2IDU0IEMtMTYuNjkxNDA1MjIgNTYuNzc4ODg2MTMgLTE2LjY5MTQwNTIyIDU2Ljc3ODg4NjEzIC0xNyA1OSBDLTE3Ljk5IDU5IC0xOC45OCA1OSAtMjAgNTkgQy0yMC4yNTgxMzMwMiA1NS4zODYxMzc3NCAtMjAuMTY4MTU2NjcgNTMuMzI5MzA2OCAtMTguNSA1MC4wNjI1IEMtMTYuNjczNDE0OTMgNDYuMzMzMjIyMTUgLTE2LjQ4NjE3MTMzIDQ0LjExMDYyOTM5IC0xNyA0MCBDLTE4LjMxNDMxNjk1IDM3Ljk4NzQ1MjE4IC0xOS42NDcyMTg4NSAzNS45ODY4OTczMSAtMjEgMzQgQy0yMS41IDMxIC0yMS41IDMxIC0yMSAyOCBDLTIwLjMxOTM3NSAyNy4wNzE4NzUgLTE5LjYzODc1IDI2LjE0Mzc1IC0xOC45Mzc1IDI1LjE4NzUgQy0xNi4yOTQzMTIzNCAyMC44MzkwMjk5NyAtMTYuODYxMjA4MTUgMTcuODI0MTczMzMgLTE4IDEzIEMtMTguNjU5OTY3OSAxMS4zMzA2Njk0MiAtMTkuMzI1NTg4NjkgOS42NjM1NDc5IC0yMCA4IEMtMjAuMTI1IDQuNjg3NSAtMjAuMTI1IDQuNjg3NSAtMjAgMiBDLTE5LjM0IDIgLTE4LjY4IDIgLTE4IDIgQy0xOCAyLjY2IC0xOCAzLjMyIC0xOCA0IEMtMTYuNjggNCAtMTUuMzYgNCAtMTQgNCBDLTE0IDQuNjYgLTE0IDUuMzIgLTE0IDYgQy0xNC45OSA2IC0xNS45OCA2IC0xNyA2IEMtMTUuOTcwMjgxNCAxMS4yMzU1MDE3NyAtMTUuOTcwMjgxNCAxMS4yMzU1MDE3NyAtMTMuNzUgMTYgQy0xMC45NzQxNDAxOSAxNy41ODYyMDU2MSAtOS4xMjcxMzUyNSAxNy41MTA1NTI2OSAtNiAxNyBDLTIuMzk2ODM5NzggMTMuNjg4OTg3OTEgLTEuNDQ3Mjk0NzYgMTAuODA4NDE4NyAtMSA2IEMtMy4zMSA2LjMzIC01LjYyIDYuNjYgLTggNyBDLTguMDQyNzIxIDUuMzMzODgwOTUgLTguMDQwNjM4MzIgMy42NjYxNzExNSAtOCAyIEMtNS45NTQ0Nzk1OCAtMC4wNDU1MjA0MiAtMi43Mjk0MTkxNCAwLjIzOTQyMjczIDAgMCBaICIgZmlsbD0iIzIyNzg1NSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM3MCw2MikiLz4KPHBhdGggZD0iTTAgMCBDMC45NDg3NSAwLjY2IDEuODk3NSAxLjMyIDIuODc1IDIgQzMuMzAxNTM3MjcgNi4zNTA2ODAxOCAzLjQ1MjcyODcyIDguMjkzODg3MTIgMC42MjUgMTEuNzUgQy0wLjI4MjUgMTIuNDkyNSAtMS4xOSAxMy4yMzUgLTIuMTI1IDE0IEMtMi43MDYzNjcxOSAxNC41MTY5MTQwNiAtMy4yODc3MzQzOCAxNS4wMzM4MjgxMiAtMy44ODY3MTg3NSAxNS41NjY0MDYyNSBDLTYuNzk2MjA2MzYgMTcuNDI5OTAwMDYgLTkuMjc0ODQ0NzUgMTcuNzMzMjU1NzkgLTEyLjY4NzUgMTguMTg3NSBDLTEzLjgyMzE2NDA2IDE4LjM0NjA1NDY5IC0xNC45NTg4MjgxMiAxOC41MDQ2MDkzOCAtMTYuMTI4OTA2MjUgMTguNjY3OTY4NzUgQy0xOS4xMjUgMTkgLTE5LjEyNSAxOSAtMjIuMTI1IDE5IEMtMjMuOTMxNDYxMTggMTUuMzg3MDc3NjQgLTI1LjEyNSAxMi45OTMwMDYgLTI1LjEyNSA4LjkzNzUgQy0yMy41NjkwNzIyNyA0LjM2Njk2MjI5IC0yMS4wMzM3Mjg5IDEuMTk5NzcyNDUgLTE2LjkzNzUgLTEuMzc1IEMtMTEuMDE1MDAyNTMgLTIuNjkxMTEwNTUgLTUuMzkzODE5MTMgLTMuMDkxNTc5MjYgMCAwIFogTS0xOC4xMjUgNSBDLTE4Ljc4NSA2LjMyIC0xOS40NDUgNy42NCAtMjAuMTI1IDkgQy0xOC44MDUgNy42OCAtMTcuNDg1IDYuMzYgLTE2LjEyNSA1IEMtMTYuNzg1IDUgLTE3LjQ0NSA1IC0xOC4xMjUgNSBaIE0tMTIuMTI1IDkgQy0xMy45NTgwMDkwOSAxMS4xMDU3NTY0MyAtMTMuOTU4MDA5MDkgMTEuMTA1NzU2NDMgLTE1LjEyNSAxMyBDLTkuMzI4NzM4OTMgMTIuNjAwMjU3ODYgLTUuNzEwMjc1MzcgMTEuODk3NDg0MDcgLTEuMTI1IDggQy0xLjEyNSA3LjAxIC0xLjEyNSA2LjAyIC0xLjEyNSA1IEMtNS45NTc3NzI2OCA0LjQzMTQzODUxIC04LjM2ODA4Njg2IDYuMDU5ODA3MTEgLTEyLjEyNSA5IFogIiBmaWxsPSIjMjIxRTIwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1ODUuMTI1LDQ5KSIvPgo8cGF0aCBkPSJNMCAwIEMyLjk3IDAgNS45NCAwIDkgMCBDOS4zMyAxLjMyIDkuNjYgMi42NCAxMCA0IEMxMC41MTU2MjUgMy4zNCAxMS4wMzEyNSAyLjY4IDExLjU2MjUgMiBDMTQuODI2NDEzMTkgLTAuNjc4MDgyNjIgMTYuODgzOTk1MjUgLTAuMzgxMTExNTUgMjEgMCBDMjEuNjYgMC4zMyAyMi4zMiAwLjY2IDIzIDEgQzIyLjY3IDMuNjQgMjIuMzQgNi4yOCAyMiA5IEMxOSAxMCAxOSAxMCAxNy4wNjI1IDkuMzEyNSBDMTYuMzgxODc1IDkuMjA5Mzc1IDE1LjcwMTI1IDkuMTA2MjUgMTUgOSBDMTEuNjQ5OTE3OTUgMTEuNzc1NzgyMjcgMTAuMTM2Mzk1ODYgMTMuNjg5OTI2MiA5LjY4MzU5Mzc1IDE4LjAzOTA2MjUgQzkuNjAyMzgyODEgMTkuMjIyNDIxODcgOS41MjExNzE4OCAyMC40MDU3ODEyNSA5LjQzNzUgMjEuNjI1IEM5LjM1MzcxMDk0IDIyLjgxMzUxNTYzIDkuMjY5OTIxODcgMjQuMDAyMDMxMjUgOS4xODM1OTM3NSAyNS4yMjY1NjI1IEM5LjEyMzAwNzgxIDI2LjE0MTc5Njg3IDkuMDYyNDIxODcgMjcuMDU3MDMxMjUgOSAyOCBDNi4wMyAyOCAzLjA2IDI4IDAgMjggQzAgMTguNzYgMCA5LjUyIDAgMCBaICIgZmlsbD0iIzAwODQyOSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjE3Niw1MykiLz4KPHBhdGggZD0iTTAgMCBDMC40OTUgMS40ODUgMC40OTUgMS40ODUgMSAzIEMwLjAxIDMuOTkgLTAuOTggNC45OCAtMiA2IEMtMi43MjcwMzEyNSA1LjczNDQ1MzEzIC0zLjQ1NDA2MjUgNS40Njg5MDYyNSAtNC4yMDMxMjUgNS4xOTUzMTI1IEMtMjUuMTQ4Njk1MTMgLTIuMTYyNDkwMzQgLTQ1LjE2MzM2MjQ5IC0xLjA2MjQxOCAtNjYgNiBDLTY2LjMzIDQuMzUgLTY2LjY2IDIuNyAtNjcgMSBDLTQ4Ljc3Mzk1ODUzIC05LjkzNTYyNDg4IC0xOC43MTE0Nzg5MyAtOC4zODU4NDYyMiAwIDAgWiAiIGZpbGw9IiNFODIwMjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE4MjAsMzUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuNjYgMCAxLjMyIDAgMiAwIEMyLjMzIDEuNjUgMi42NiAzLjMgMyA1IEM0LjY1IDUgNi4zIDUgOCA1IEM3LjAxIDYuNDg1IDcuMDEgNi40ODUgNiA4IEM1LjgzMjg2NDMxIDEwLjYyNTMxNTI0IDUuODMyODY0MzEgMTAuNjI1MzE1MjQgNiAxMyBDNi45MDc1IDEyLjQ4NDM3NSA3LjgxNSAxMS45Njg3NSA4Ljc1IDExLjQzNzUgQzEyIDEwIDEyIDEwIDE0LjM3NSAxMC4zMTI1IEMxNC45MTEyNSAxMC41MzkzNzUgMTUuNDQ3NSAxMC43NjYyNSAxNiAxMSBDMTUuNjcgMTIuMzIgMTUuMzQgMTMuNjQgMTUgMTUgQzE2Ljk4IDE0LjY3IDE4Ljk2IDE0LjM0IDIxIDE0IEMxOS42OCAxNi42NCAxOC4zNiAxOS4yOCAxNyAyMiBDMTYuMjM4MTY0MDYgMjEuNzgzNDM3NSAxNS40NzYzMjgxMyAyMS41NjY4NzUgMTQuNjkxNDA2MjUgMjEuMzQzNzUgQzMuNTQ5MjExNDUgMTguMzM5MTEzMiAtMy45OTQ5NjA1MyAxOC41NDQyMTE5MSAtMTUgMjIgQy0xNi4zMiAxOS4zNiAtMTcuNjQgMTYuNzIgLTE5IDE0IEMtMTYuNjkgMTQuMzMgLTE0LjM4IDE0LjY2IC0xMiAxNSBDLTEyLjY2IDEzLjM1IC0xMy4zMiAxMS43IC0xNCAxMCBDLTEwLjI4MTExNzYxIDEwLjUwNzEyMDMzIC03LjI2NTQ1NzYxIDExLjExNjA4MjE1IC00IDEzIEMtMy43OTkxMzU1NyA5LjI4NDAwODA5IC0zLjg0ODA1NjMgOC4yMjc5MTU1NSAtNiA1IEMtNC4zNSA1IC0yLjcgNSAtMSA1IEMtMC42NyAzLjM1IC0wLjM0IDEuNyAwIDAgWiAiIGZpbGw9IiNGM0Y4RjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNjAsMzcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzEuNzQyMTY3OTcgMC4wNTQxNDA2MyAxLjc0MjE2Nzk3IDAuMDU0MTQwNjMgMy41MTk1MzEyNSAwLjEwOTM3NSBDNC4zOTk5NjA5NCAwLjE1NTc4MTI1IDUuMjgwMzkwNjMgMC4yMDIxODc1IDYuMTg3NSAwLjI1IEM1Ljg1NzUgMS45IDUuNTI3NSAzLjU1IDUuMTg3NSA1LjI1IEMzLjIwNzUgNS41OCAxLjIyNzUgNS45MSAtMC44MTI1IDYuMjUgQy0xLjA1MDMzMjAzIDcuMzU0MDgyMDMgLTEuMDUwMzMyMDMgNy4zNTQwODIwMyAtMS4yOTI5Njg3NSA4LjQ4MDQ2ODc1IEMtMi43NDE2MTc3NyAxNC41MzkxODMxOCAtMy44MTM2MDk0MSAxOC40MDQ2OTk1NSAtOC44MTI1IDIyLjI1IEMtMTEuNTc3MDIwMzMgMjMuNjMyMjYwMTYgLTEzLjg1ODYzNjMgMjMuMzQ1MjUzODcgLTE2LjkzNzUgMjMuMzEyNSBDLTE4LjAzMzIwMzEyIDIzLjMwMzQ3NjU2IC0xOS4xMjg5MDYyNSAyMy4yOTQ0NTMxMyAtMjAuMjU3ODEyNSAyMy4yODUxNTYyNSBDLTIxLjUyMjM4MjgxIDIzLjI2Nzc1MzkxIC0yMS41MjIzODI4MSAyMy4yNjc3NTM5MSAtMjIuODEyNSAyMy4yNSBDLTIyLjQ4MjUgMjEuNiAtMjIuMTUyNSAxOS45NSAtMjEuODEyNSAxOC4yNSBDLTE5LjgzMjUgMTcuOTIgLTE3Ljg1MjUgMTcuNTkgLTE1LjgxMjUgMTcuMjUgQy0xNS41ODE3NTc4MSAxNi4zNTc5Njg3NSAtMTUuMzUxMDE1NjIgMTUuNDY1OTM3NSAtMTUuMTEzMjgxMjUgMTQuNTQ2ODc1IEMtMTQuNzg3MTQ4NDQgMTMuMzc2NDA2MjUgLTE0LjQ2MTAxNTYzIDEyLjIwNTkzNzUgLTE0LjEyNSAxMSBDLTEzLjgxMTc1NzgxIDkuODM5ODQzNzUgLTEzLjQ5ODUxNTYyIDguNjc5Njg3NSAtMTMuMTc1NzgxMjUgNy40ODQzNzUgQy0xMC40NDExMzY5OSAwLjk5NjQ1MTA5IC02Ljc2ODAwODc1IC0wLjI3MzQ1NDkgMCAwIFogIiBmaWxsPSIjRjVGOUY2IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDM2LjgxMjUsODQuNzUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzIuOTcgMCA1Ljk0IDAgOSAwIEM5IDkuMjQgOSAxOC40OCA5IDI4IEM2LjAzIDI4IDMuMDYgMjggMCAyOCBDMCAxOC43NiAwIDkuNTIgMCAwIFogIiBmaWxsPSIjMDA4NDJBIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDk5LDUzKSIvPgo8cGF0aCBkPSJNMCAwIEM0LjgwODE5NTIyIDAuMDEzNzU3MzUgNC44MDgxOTUyMiAwLjAxMzc1NzM1IDcuODEyNSAyLjg3NSBDOC40OTMxMjUgNC4xMTI1IDguNDkzMTI1IDQuMTEyNSA5LjE4NzUgNS4zNzUgQzYuODc3NSA1LjcwNSA0LjU2NzUgNi4wMzUgMi4xODc1IDYuMzc1IEMxLjg1NzUgOC4wMjUgMS41Mjc1IDkuNjc1IDEuMTg3NSAxMS4zNzUgQzQuNjUyNSAxMC44OCA0LjY1MjUgMTAuODggOC4xODc1IDEwLjM3NSBDOC42ODA5ODE3NSAxNC41MjAyNDY3MSA4LjMyNjA0MzA3IDE2LjE1NDk2MSA2LjA2MjUgMTkuNzUgQzMuMTg3NSAyMi4zNzUgMy4xODc1IDIyLjM3NSAwLjE4NzUgMjMuMTI1IEMtNC4xMzU1MDE1OSAyMi4wNDQyNDk2IC01LjQ3Mjc4ODMxIDIwLjA5MTAxMjY4IC03LjgxMjUgMTYuMzc1IEMtOC4xMjUgMTMgLTguMTI1IDEzIC03LjgxMjUgMTAuMzc1IEMtNS41MDI1IDEwLjM3NSAtMy4xOTI1IDEwLjM3NSAtMC44MTI1IDEwLjM3NSBDLTEuMTQyNSA5LjA1NSAtMS40NzI1IDcuNzM1IC0xLjgxMjUgNi4zNzUgQy00Ljc4MjUgNS44OCAtNC43ODI1IDUuODggLTcuODEyNSA1LjM3NSBDLTUuNjI4MjEwMTUgMC44NjA4MDA5NyAtNS4wOTkzMDg2NyAwLjE5NDExNzE3IDAgMCBaICIgZmlsbD0iI0U1RUZFQiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM2MC44MTI1LDU3LjYyNSkiLz4KPHBhdGggZD0iTTAgMCBDMTUuNTEgMCAzMS4wMiAwIDQ3IDAgQzQ3IDEuNjUgNDcgMy4zIDQ3IDUgQzMxLjQ5IDUgMTUuOTggNSAwIDUgQzAgMy4zNSAwIDEuNyAwIDAgWiAiIGZpbGw9IiMxRTcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1OTUsNzIpIi8+CjxwYXRoIGQ9Ik0wIDAgQzQuNjIgMCA5LjI0IDAgMTQgMCBDMTQgMS4zMiAxNCAyLjY0IDE0IDQgQzEwLjcgNCA3LjQgNCA0IDQgQzQgNS45OCA0IDcuOTYgNCAxMCBDNy4zIDEwIDEwLjYgMTAgMTQgMTAgQzE0IDExLjMyIDE0IDEyLjY0IDE0IDE0IEMxMC43IDE0IDcuNCAxNCA0IDE0IEM0IDE1Ljk4IDQgMTcuOTYgNCAyMCBDNy4zIDIwIDEwLjYgMjAgMTQgMjAgQzE0LjMzIDIxLjMyIDE0LjY2IDIyLjY0IDE1IDI0IEMxMC4wNSAyNCA1LjEgMjQgMCAyNCBDMCAxNi4wOCAwIDguMTYgMCAwIFogIiBmaWxsPSIjMDA4NDI5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDU2LDg1KSIvPgo8cGF0aCBkPSJNMCAwIEMxNC41MiAwIDI5LjA0IDAgNDQgMCBDNDMuMzQgMS42NSA0Mi42OCAzLjMgNDIgNSBDMjguMTQgNSAxNC4yOCA1IDAgNSBDMCAzLjM1IDAgMS43IDAgMCBaICIgZmlsbD0iIzFFNzBDMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU0MSw5NCkiLz4KPHBhdGggZD0iTTAgMCBDMTMuODYgMCAyNy43MiAwIDQyIDAgQzQyLjY2IDEuNjUgNDMuMzIgMy4zIDQ0IDUgQzI5LjQ4IDUgMTQuOTYgNSAwIDUgQzAgMy4zNSAwIDEuNyAwIDAgWiAiIGZpbGw9IiMxRTcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1NDEsNTcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzEuOTUxOTMyMjEgNS44NTU3OTY2MyAzLjYyOTIyNzk1IDE1LjU1OTg2NzYxIDAuOTE0MDYyNSAyMS4yOTI5Njg3NSBDMC40NDc0MjE4NyAyMS44MzU2NjQwNiAtMC4wMTkyMTg3NSAyMi4zNzgzNTkzOCAtMC41IDIyLjkzNzUgQy0zLjIyMjkwNTM0IDI1LjY1Mjg1NDI2IC0zLjIyMjkwNTM0IDI1LjY1Mjg1NDI2IC0zLjExMzI4MTI1IDI4LjQwNjI1IEMtMi44NDc1MjI1NiAzMC42NDI3NjQ2OSAtMi41MDI2MTIyNCAzMi44MDU0MjU3OCAtMiAzNSBDLTYuNjI1IDM4IC02LjYyNSAzOCAtMTAgMzggQy0xMC4zMyAzOS4zMiAtMTAuNjYgNDAuNjQgLTExIDQyIEMtMTIuMzIgNDIgLTEzLjY0IDQyIC0xNSA0MiBDLTE2LjcwMzEyNSA0MC4xMDE1NjI1IC0xNi43MDMxMjUgNDAuMTAxNTYyNSAtMTguMjUgMzcuNjI1IEMtMTguNzcwNzgxMjUgMzYuODEyODkwNjIgLTE5LjI5MTU2MjUgMzYuMDAwNzgxMjUgLTE5LjgyODEyNSAzNS4xNjQwNjI1IEMtMjEgMzMgLTIxIDMzIC0yMSAzMSBDLTE4LjA5NDUxMTE4IDI4Ljk1ODMwNTE1IC0xNi41OTg1Nzk1NCAyOCAtMTMgMjggQy0xMyAyOC45OSAtMTMgMjkuOTggLTEzIDMxIEMtMTAuMDI5ODIzMDYgMzAuMzcxODk4MjcgLTEwLjAyOTgyMzA2IDMwLjM3MTg5ODI3IC03IDI5IEMtNS44MDE2MTc5MSAyNi42NzE0NTUzNyAtNS44MDE2MTc5MSAyNi42NzE0NTUzNyAtNSAyNCBDLTQuMzI1ODIwMzEgMjMuMjk4NzUgLTMuNjUxNjQwNjMgMjIuNTk3NSAtMi45NTcwMzEyNSAyMS44NzUgQy0wLjI3MTkxNzk2IDE3LjkzMDQwMjQ0IC0wLjU4MDIxNDc2IDE0Ljk1NDI2NzczIC0wLjgxMjUgMTAuMzEyNSBDLTEuMDkwOTg5MDUgMi4xODE5NzgxMSAtMS4wOTA5ODkwNSAyLjE4MTk3ODExIDAgMCBaICIgZmlsbD0iI0VCRjNFRiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM0Miw2NSkiLz4KPHBhdGggZD0iTTAgMCBDLTAuNDAyODE3NzEgNS44NDA4NTY3NCAtMS4xMTI3NzkgOS4zNzczNTg4MSAtNSAxNCBDLTguMjkwNzY2NiAxNi43MTg0NTkzNyAtMTAuMDk2NDA4NjQgMTcuOTMzMDY3MzEgLTE0LjM3NSAxOC4yNSBDLTE1LjI0MTI1IDE4LjE2NzUgLTE2LjEwNzUgMTguMDg1IC0xNyAxOCBDLTE2LjY2ODA5NTE4IDExLjY5MzgwODQyIC0xNS41MDUxNjQ5NyA3LjU2NTU1NTkzIC0xMSAzIEMtNy4yMTg5MzIxOCAwLjU1ODA2MDM3IC00LjQ5MzYzOTc2IC0wLjM5NjQ5NzYzIDAgMCBaICIgZmlsbD0iIzAwMDAwMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQ1LDM3KSIvPgo8cGF0aCBkPSJNMCAwIEM0Ljc1MDUzNTExIC0wLjA3NDM1MjIyIDkuNTAwNzI4ODcgLTAuMTI4Njk2OTEgMTQuMjUxNzA4OTggLTAuMTY0Nzk0OTIgQzE1Ljg2NjY3Nzg5IC0wLjE3OTg0ODc2IDE3LjQ4MTYwNjEzIC0wLjIwMDI5NjQ4IDE5LjA5NjQzNTU1IC0wLjIyNjMxODM2IEMyMS40MjI0NjU1NSAtMC4yNjI4NTI4NiAyMy43NDc5NTM0MSAtMC4yNzk3NjAxNSAyNi4wNzQyMTg3NSAtMC4yOTI5Njg3NSBDMjcuMTUxMDcxODUgLTAuMzE2MTk0NTMgMjcuMTUxMDcxODUgLTAuMzE2MTk0NTMgMjguMjQ5Njc5NTcgLTAuMzM5ODg5NTMgQzMyLjY1ODMwNTk5IC0wLjM0MTM1Nzg4IDM1LjUyNjI3Nzc5IDAuMjE1ODYwOTQgMzkgMyBDMzkgMy42NiAzOSA0LjMyIDM5IDUgQzI2LjEzIDUgMTMuMjYgNSAwIDUgQzAgMy4zNSAwIDEuNyAwIDAgWiAiIGZpbGw9IiMxRTcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1NDEsNTApIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuNjYgMCAxLjMyIDAgMiAwIEM1LjE4NDE5OTU5IDMuNzk2NTQ1NjcgNS4zODczNDU0OCA3LjExNjc2MjIgNS4yMzgyODEyNSAxMS44NjMyODEyNSBDNC45NDYwNDkxMyAxNC40ODM3ODg5NyA0LjA0MjM4MTk1IDE2LjU4OTQ5MTczIDMgMTkgQzIuNDgyMDk2ODIgMjMuMDU2OTA4MjUgMi42OTk5NDI5NCAyNC41NDk5MTQ0MSA1IDI4IEM3LjMzNDU4NjM1IDMxLjUwMTg3OTUzIDcuNjcyNjA3MjcgMzIuODgwMjgwNDcgNyAzNyBDNi4zNDg5OTE3IDM4LjE2Njk1MjY0IDUuNjU4MzE0NjEgMzkuMzEyMzI1OTggNC45Mzc1IDQwLjQzNzUgQzMuMTY4MTQxMTcgNDMuMjg2MDQyMjIgMi45OTk2OTkxNiA0My45ODI4NTIyOSAzLjA2MjUgNDcuNTYyNSBDNC4wMDI5NTg2MSA1MS4wMTA4NDgyMyA1LjM3ODg4Njc3IDUzLjgyODI1NjcyIDcgNTcgQzcgNTguMzIgNyA1OS42NCA3IDYxIEM1LjAyIDYxLjQ5NSA1LjAyIDYxLjQ5NSAzIDYyIEMyLjcxMTI1IDYwLjc4MzEyNSAyLjQyMjUgNTkuNTY2MjUgMi4xMjUgNTguMzEyNSBDMS41MTk4MDg4OSA1NS44MzA3ODEwNyAwLjg5MjAyOTY2IDUzLjc2NzAxMTM3IC0wLjE4NzUgNTEuNDM3NSBDLTEuMzQyMzE4NDQgNDcuOTczMDQ0NjggLTAuODE4NjU2ODYgNDUuNTI2NTIxODcgMCA0MiBDMC43NzM0Mzc1IDQwLjczMTU2MjUgMC43NzM0Mzc1IDQwLjczMTU2MjUgMS41NjI1IDM5LjQzNzUgQzMuNDExMzY2MjEgMzYuMzAyNDY1OTkgMy41MTMyNzU5MiAzNC41OTI5MzE0MSAzIDMxIEMyLjM0IDMwLjAxIDEuNjggMjkuMDIgMSAyOCBDLTEuMzMwNDM1NTggMjQuNTA0MzQ2NjQgLTEuNTg3NjMyNDQgMjMuMTEzNDI3MSAtMSAxOSBDLTAuNTA1IDE3Ljg2NTYyNSAtMC4wMSAxNi43MzEyNSAwLjUgMTUuNTYyNSBDMi41NDM3NjAwOCAxMC43MDg1Njk4MSAyLjY5NzAxMDU0IDcuMDQ3NDY4NDUgMSAyLjA2MjUgQzAuNjcgMS4zODE4NzUgMC4zNCAwLjcwMTI1IDAgMCBaICIgZmlsbD0iI0U5RjFFRSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM2OSw1OSkiLz4KPHBhdGggZD0iTTAgMCBDMS4zMiAwLjMzIDIuNjQgMC42NiA0IDEgQzUuMTU2NjQ3MzcgNi40ODI2OTA2OSA1LjExNDE2MjU1IDExLjgwMzM5Mjc0IDUuMDYyNSAxNy4zNzUgQzUuMDU3OTg4MjggMTguMzAxODM1OTQgNS4wNTM0NzY1NiAxOS4yMjg2NzE4OCA1LjA0ODgyODEyIDIwLjE4MzU5Mzc1IEM1LjAzNzExNTc0IDIyLjQ1NTc5NzA5IDUuMDIwNzEzNzIgMjQuNzI3ODYzODggNSAyNyBDMy4zNSAyNy4zMyAxLjcgMjcuNjYgMCAyOCBDLTIuNjA1MTM5NTkgMjQuMDkyMjkwNjIgLTIuMjkzNjc1NjUgMjAuNzc3NzA5MjEgLTIuMjUgMTYuMjUgQy0yLjI1NzczNDM4IDE1LjQ2MzY3MTg4IC0yLjI2NTQ2ODc1IDE0LjY3NzM0Mzc1IC0yLjI3MzQzNzUgMTMuODY3MTg3NSBDLTIuMjU2ODM4MzYgOC44NzA4NDc1NSAtMS41OTU2NjE5NSA0LjczNjMyOTkxIDAgMCBaICIgZmlsbD0iIzIyMUUyMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTY5LDcxKSIvPgo8cGF0aCBkPSJNMCAwIEMxLjY3NTQyOTc2IDAuMjg2MDQ4OTggMy4zNDM4NTM0MyAwLjYxNzgxMjMzIDUgMSBDNi4wNjgwODM3NCA3LjI3NDk5MTk3IDcuMDQzNjc4MzkgMTMuODY4OTY0ODMgNSAyMCBDNC40NDQ5NTIwOSAyNS44ODM1MDc4OCA1Ljc0ODA2MTcyIDI4LjIyMzcxNTY1IDkgMzMgQzkuNjgyNDU2MDcgMzcuMDA5NDI5NCA5LjA2MjU0MzA2IDM5LjEyMDM1OTYxIDYuOTM3NSA0Mi40Mzc1IEM1LjE4NzQ3ODQxIDQ1LjI2MTExNjM5IDQuOTk5MzU1NTggNDUuOTYzOTEyNyA1LjA2MjUgNDkuNSBDNi4wNjQxNTYzNSA1My4yMzk1MTcwMiA3LjQxMDgyMDg0IDU2LjQ3NjE2Nzk1IDkgNjAgQzkgNjAuNjYgOSA2MS4zMiA5IDYyIEM4LjAxIDYyIDcuMDIgNjIgNiA2MiBDNS4xMjcyMDEzOCA2MC4xMzM2MDAxOSA0LjI3NzQ4OTczIDU4LjI1NjM5Mzg5IDMuNDM3NSA1Ni4zNzUgQzIuOTYxODM1OTQgNTUuMzMwODU5MzggMi40ODYxNzE4OCA1NC4yODY3MTg3NSAxLjk5NjA5Mzc1IDUzLjIxMDkzNzUgQzAuODc4NDcyMzMgNDkuNjA4MjUxOTcgMS4wMTg2Mjk2NiA0Ny42MDg1ODA1MSAyIDQ0IEMyLjUxNTYyNSA0My4xNzUgMy4wMzEyNSA0Mi4zNSAzLjU2MjUgNDEuNSBDNS4zODcwMjc1NiAzOC4zMjY5MDg1OCA1LjUxNjQ0MTE4IDM2LjYxNTA4ODI1IDUgMzMgQzQuMzE5Mzc1IDMyLjA3MTg3NSAzLjYzODc1IDMxLjE0Mzc1IDIuOTM3NSAzMC4xODc1IEMwLjMyMzM1MDI2IDI1Ljg4NjgwMjA0IDAuODgyMTgxNzcgMjIuNzc3MDAxIDIgMTggQzIuMzMgMTcuMzQgMi42NiAxNi42OCAzIDE2IEMzLjQxNzQwMjY4IDExLjA1OTExNzE1IDMuNDg3NDY4NzMgNi40MjIxNjY2NCAxIDIgQzAuMzQgMS42NyAtMC4zMiAxLjM0IC0xIDEgQy0wLjY3IDAuNjcgLTAuMzQgMC4zNCAwIDAgWiAiIGZpbGw9IiMxRDc1NTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNzAsNTcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuMzMgMC42NiAwLjY2IDEuMzIgMSAyIEMwLjY3IDIuNjYgMC4zNCAzLjMyIDAgNCBDMC4wMjM3OTA0IDYuMzExMDc4NzggMC4wMjM3OTA0IDYuMzExMDc4NzggMC4zMTI1IDguODc1IEMwLjM5MTEzMjgxIDkuNzM4NjcxODcgMC40Njk3NjU2MyAxMC42MDIzNDM3NSAwLjU1MDc4MTI1IDExLjQ5MjE4NzUgQzEuMDAzMjA3MjQgMTQuMDE3OTA0NzUgMS44MTI2MDgzMyAxNS43NDgyMTM0IDMgMTggQzMuNzA0NDkyODkgMjMuNDAxMTEyMTcgMS45Mjk0NDIzOSAyNS42MDU4MzY0MiAtMSAzMCBDLTEuNjc4NzgwNTkgMzQuMDcyNjgzNTYgLTEuMzQxNzI0MDYgMzUuNDk4MDkyNzkgMSAzOC45Mzc1IEMzLjQ1MjU5MTI5IDQyLjY5MzAzMDQxIDMuNTUxNTQyOTEgNDQuNTg3NjU2NyAzIDQ5IEMyLjA2NTUzNDY1IDUxLjAzMTQ0NjQxIDEuMDY3NzUyMjQgNTMuMDM1MzM1ODcgMCA1NSBDLTAuNjk5MDc0MTQgNTcuNzM1NzI1ODUgLTAuNjk5MDc0MTQgNTcuNzM1NzI1ODUgLTEgNjAgQy0yLjMyIDU5LjY3IC0zLjY0IDU5LjM0IC01IDU5IEMtNC41MjI2OTE2MiA1Ny41NDEwNTc0IC00LjA0MzA4OTU4IDU2LjA4Mjg2NTA0IC0zLjU2MjUgNTQuNjI1IEMtMy4xNjIyNDYwOSA1My40MDY4MzU5NCAtMy4xNjIyNDYwOSA1My40MDY4MzU5NCAtMi43NTM5MDYyNSA1Mi4xNjQwNjI1IEMtMiA1MCAtMiA1MCAtMSA0OCBDLTAuNTQzMTA3NzYgNDQuMDcwNzI2NzUgLTAuOTU5NzA3MDkgNDEuNzM5NDU4MTMgLTMgMzguNDM3NSBDLTUuNzU4MjkzODQgMzMuNjk2NjgyNDYgLTUuNzU4MjkzODQgMzMuNjk2NjgyNDYgLTUgMzAgQy00LjM0IDI5LjA1MTI1IC0zLjY4IDI4LjEwMjUgLTMgMjcuMTI1IEMtMC41ODgzOTUzIDIzLjM1Njg2NzY2IC0wLjUyMDEwNzIzIDIxLjM5OTAxNzAyIC0xIDE3IEMtMS4zMyAxNi4xOTU2MjUgLTEuNjYgMTUuMzkxMjUgLTIgMTQuNTYyNSBDLTMuNDY1MDU4MjkgMTAuODA4Mjg4MTIgLTMuMzIwMjAxNTkgOC4wMzQ1NDAwMiAtMyA0IEMtMS41IDEuNSAtMS41IDEuNSAwIDAgWiAiIGZpbGw9IiNGMUY2RjQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNTEsNjApIi8+CjxwYXRoIGQ9Ik0wIDAgQzMgMSAzIDEgNSA0IEM1IDQuOTkgNSA1Ljk4IDUgNyBDNS42NiA2LjY3IDYuMzIgNi4zNCA3IDYgQzguNTQwMjM5OTYgNS45MzA0OTQ1OSAxMC4wODMzNDk4OCA1LjkxNTQ3NjQzIDExLjYyNSA1LjkzNzUgQzEyLjg1MDg5ODQ0IDUuOTUxMDM1MTYgMTIuODUwODk4NDQgNS45NTEwMzUxNiAxNC4xMDE1NjI1IDUuOTY0ODQzNzUgQzE1LjA0MTI4OTA2IDUuOTgyMjQ2MDkgMTUuMDQxMjg5MDYgNS45ODIyNDYwOSAxNiA2IEMxNS4yMzY4NzUgNi43NDI1IDE0LjQ3Mzc1IDcuNDg1IDEzLjY4NzUgOC4yNSBDMTEuMDU1OTU5NzIgMTAuNzU4MDE3NDUgMTEuMDU1OTU5NzIgMTAuNzU4MDE3NDUgOS42NTIzNDM3NSAxMy4wOTc2NTYyNSBDNy41MTM0ODk4OSAxNS41NjAxMTkyIDYuMDYwMDUxNDUgMTUuNzE4NTYzODUgMi44NzUgMTYuMTg3NSBDLTAuMzYzMTQzNTQgMTYuNDU4MzM3OTMgLTAuMzYzMTQzNTQgMTYuNDU4MzM3OTMgLTMgMTggQy00LjY2NjE3MTE1IDE4LjA0MDYzODMyIC02LjMzMzg4MDk1IDE4LjA0MjcyMSAtOCAxOCBDLTcuMjU5NDMzNTkgMTYuOTMwNzIyNjYgLTcuMjU5NDMzNTkgMTYuOTMwNzIyNjYgLTYuNTAzOTA2MjUgMTUuODM5ODQzNzUgQy0xLjU0NzYwNyA4LjUwMTAxOTAzIC0xLjU0NzYwNyA4LjUwMTAxOTAzIDAgMCBaICIgZmlsbD0iI0VGRjVGMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTMyNiw1NSkiLz4KPHBhdGggZD0iTTAgMCBDMS44NzUgMS4xMjUgMS44NzUgMS4xMjUgMyAzIEMzLjY4NzUgNi4xODc1IDMuNjg3NSA2LjE4NzUgNCA5IEMwLjM3IDkgLTMuMjYgOSAtNyA5IEMtNi4wMSA5Ljk5IC01LjAyIDEwLjk4IC00IDEyIEMtMC4zNTQ1ODE1NSAxMS43NjUyMjgwMSAtMC4zNTQ1ODE1NSAxMS43NjUyMjgwMSAzIDExIEMyLjY3IDEyLjY1IDIuMzQgMTQuMyAyIDE2IEMtNC4yNDE1OTc5NyAxNy4zNDYyMjcwMSAtNC4yNDE1OTc5NyAxNy4zNDYyMjcwMSAtNy44NzUgMTUuNjg3NSBDLTEwIDE0IC0xMCAxNCAtMTEgMTIgQy0xMS41NzE0Mjg1NyA0LjkxNDI4NTcxIC0xMS41NzE0Mjg1NyA0LjkxNDI4NTcxIC05LjQzNzUgMS41IEMtNi4wODk2NTY1MSAtMC41NjAyMTEzOCAtMy44NTk4NTc1MyAtMC40OTEyNTQ1OSAwIDAgWiBNLTUgMyBDLTUuOTkgNC40ODUgLTUuOTkgNC40ODUgLTcgNiBDLTQuNjkgNiAtMi4zOCA2IDAgNiBDLTAuNjYgNS4wMSAtMS4zMiA0LjAyIC0yIDMgQy0yLjk5IDMgLTMuOTggMyAtNSAzIFogIiBmaWxsPSIjMDA4NDI5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMTAwLDkzKSIvPgo8cGF0aCBkPSJNMCAwIEMxMC44OSAwIDIxLjc4IDAgMzMgMCBDMzIuNjcgMS4zMiAzMi4zNCAyLjY0IDMyIDQgQzI5LjA3ODAyMzEgNS40NjA5ODg0NSAyNi41MDEwNjUyNSA1LjExMTM0OTAxIDIzLjI0MjE4NzUgNS4wOTc2NTYyNSBDMjIuMjQ3NjEwMzIgNS4wOTU1MzM4MyAyMi4yNDc2MTAzMiA1LjA5NTUzMzgzIDIxLjIzMjk0MDY3IDUuMDkzMzY4NTMgQzE5LjExMzU4MTM3IDUuMDg3NzY3NTQgMTYuOTk0MzI3NDEgNS4wNzUyMTUgMTQuODc1IDUuMDYyNSBDMTMuNDM4ODAzNjEgNS4wNTc0ODUxMiAxMi4wMDI2MDU1NiA1LjA1MjkyMjE5IDEwLjU2NjQwNjI1IDUuMDQ4ODI4MTIgQzcuMDQ0MjM2NTUgNS4wMzc3OTc4MiAzLjUyMjEyODU1IDUuMDIwNTMyNTkgMCA1IEMwIDMuMzUgMCAxLjcgMCAwIFogIiBmaWxsPSIjMUU3MEMwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNTQ5LDcyKSIvPgo8cGF0aCBkPSJNMCAwIEM0LjIxNzQ5MjE5IC0wLjA3NDE5MTM0IDguNDM0NjM4MTEgLTAuMTI4NjIwNCAxMi42NTI1ODc4OSAtMC4xNjQ3OTQ5MiBDMTQuMDg3MjI1NTIgLTAuMTc5ODc1ODkgMTUuNTIxODE3MDggLTAuMjAwMzQzOCAxNi45NTYyOTg4MyAtMC4yMjYzMTgzNiBDMTkuMDE5MTU4NTkgLTAuMjYyNzM0MzcgMjEuMDgxNDA4NTggLTAuMjc5NzMyNDMgMjMuMTQ0NTMxMjUgLTAuMjkyOTY4NzUgQzI1LjAwNjIxOTQ4IC0wLjMxNjUzNDQyIDI1LjAwNjIxOTQ4IC0wLjMxNjUzNDQyIDI2LjkwNTUxNzU4IC0wLjM0MDU3NjE3IEMzMCAwIDMwIDAgMzEuOTI4NDY2OCAxLjM5MzMxMDU1IEMzMyAzIDMzIDMgMzMgNSBDMjIuMTEgNSAxMS4yMiA1IDAgNSBDMCAzLjM1IDAgMS43IDAgMCBaICIgZmlsbD0iIzFGNzBDMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU0OSw3OSkiLz4KPHBhdGggZD0iTTAgMCBDMC42NiAwIDEuMzIgMCAyIDAgQzIuMDg2MzY3MTkgMC41Njg0NzY1NiAyLjE3MjczNDM3IDEuMTM2OTUzMTIgMi4yNjE3MTg3NSAxLjcyMjY1NjI1IEMzLjM1MjcwNTM2IDcuNzE4MDc4MSA1LjI4MTQzMTU2IDExLjIwNTAwMzg1IDkgMTYgQzkgMTYuNjYgOSAxNy4zMiA5IDE4IEM4LjI3NTU0Njg3IDE3Ljg0NjYwMTU2IDcuNTUxMDkzNzUgMTcuNjkzMjAzMTIgNi44MDQ2ODc1IDE3LjUzNTE1NjI1IEM0LjA3MzM2NjA3IDE2Ljk3MzE0OTc3IDQuMDczMzY2MDcgMTYuOTczMTQ5NzcgMS41NzAzMTI1IDE2Ljc0NjA5Mzc1IEMtNC45MDkwNjM1OCAxNS45Mjg0MDg5MSAtNy44MDY5NTYzOCAxMy44OTExMzYyMyAtMTEuODIwMzEyNSA4Ljc3NzM0Mzc1IEMtMTMgNyAtMTMgNyAtMTMgNiBDLTYuMzc1IDUuODc1IC02LjM3NSA1Ljg3NSAtMyA3IEMtMi44NzYyNSA2LjQwMTg3NSAtMi43NTI1IDUuODAzNzUgLTIuNjI1IDUuMTg3NSBDLTIgMyAtMiAzIDAgMCBaICIgZmlsbD0iI0YyRjdGNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM5NCw1NSkiLz4KPHBhdGggZD0iTTAgMCBDMSAyIDEgMiAwLjkzNzUgNS44MTI1IEMwLjg3OTY0ODA4IDkuMzg2NDYzMTggMS42NDA2MzE3NyAxMS42ODY1Mzk5NCAzIDE1IEMzLjQ3NzIyODgxIDE5LjM3NDU5NzM5IDMuNDk4NjQwNDQgMjEuMjg5ODE1MTMgMC45Mzc1IDI0LjkzNzUgQy0xLjA1MTY1MDY5IDI4LjA4MTY0MTQxIC0xLjI4MzkwMDM2IDI4LjY1NDU4MTU5IC0wLjkzNzUgMzIuMTI1IEMtMC4wNDE1OTEyMiAzNS44MjgwODk2MSAwLjc4Mzk2MDg3IDM3LjEwOTUxNDE4IDMgNDAgQzMuNjQwNzA0NzggNDQuOTEyMDY5OTQgMi4yODAwNjUxNiA0Ny43MTM0Nzc1IDAgNTIgQy0wLjY5OTA3NDE0IDU0LjczNTcyNTg1IC0wLjY5OTA3NDE0IDU0LjczNTcyNTg1IC0xIDU3IEMtMS45OSA1NyAtMi45OCA1NyAtNCA1NyBDLTMuMjQ3ODEzNDEgNTAuNDgxMDQ5NTYgLTMuMjQ3ODEzNDEgNTAuNDgxMDQ5NTYgLTEuOTM3NSA0Ny45Mzc1IEMtMC41NTU0NjYzNyA0NS4wODEyOTcxNyAtMC42Mjk3ODY4MiA0My4xNDY4MTIgLTEgNDAgQy0xLjkyMzQ0MjExIDM4LjIzNzkyNDggLTEuOTIzNDQyMTEgMzguMjM3OTI0OCAtMy4wNjI1IDM2LjUgQy00LjcyOTM3MDExIDMzLjgyMjM2ODIyIC01LjAwMjU5OTI2IDMzLjEzMjU2MjEgLTQuOTM3NSAyOS44MTI1IEMtNCAyNyAtNCAyNyAtMi40Mzc1IDI1LjE4NzUgQy0wLjE2NjczOTU4IDIxLjczMTk5NTAyIC0wLjYxNDU0MzE5IDE4LjAyNTA1ODY1IC0xIDE0IEMtMS4zMyAxMy4wMSAtMS42NiAxMi4wMiAtMiAxMSBDLTIuMTY3OTY4NzUgOS4wNjI1IC0yLjE2Nzk2ODc1IDkuMDYyNSAtMi4xODc1IDcgQy0yLjIwMTY3OTY5IDYuMzE5Mzc1IC0yLjIxNTg1OTM4IDUuNjM4NzUgLTIuMjMwNDY4NzUgNC45Mzc1IEMtMiAzIC0yIDMgMCAwIFogIiBmaWxsPSIjMTQ3MDRCIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzQ4LDYyKSIvPgo8cGF0aCBkPSJNMCAwIEMxMi44NyAwIDI1Ljc0IDAgMzkgMCBDMzUuMDM1MDk2OTkgMy45NjQ5MDMwMSAzNS4wMzUwOTY5OSAzLjk2NDkwMzAxIDMwLjY1MTg1NTQ3IDQuMTEzNTI1MzkgQzI5LjIyMzYyMzAzIDQuMTEzMzY2ODggMjcuNzk1Mzg0NTggNC4xMDc3MDczNSAyNi4zNjcxODc1IDQuMDk3NjU2MjUgQzI1LjIzOTQzNDA1IDQuMDk1NTMzODMgMjUuMjM5NDM0MDUgNC4wOTU1MzM4MyAyNC4wODg4OTc3MSA0LjA5MzM2ODUzIEMyMS42ODQyMjQ5IDQuMDg3NzY0NjUgMTkuMjc5NjQ0NzMgNC4wNzUyMTE1NyAxNi44NzUgNC4wNjI1IEMxNS4yNDYwOTUwOSA0LjA1NzQ4NTUgMTMuNjE3MTg4NzMgNC4wNTI5MjI1IDExLjk4ODI4MTI1IDQuMDQ4ODI4MTIgQzcuOTkyMTUxNzMgNC4wMzc3OTM5NyAzLjk5NjA5MTU4IDQuMDIwNTI2NzkgMCA0IEMwIDIuNjggMCAxLjM2IDAgMCBaICIgZmlsbD0iIzFGNzBDMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU0MSwxMDIpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuNDQ1MDA2NiAyLjkzNTY2NDIzIDMuNTc0ODI0NjQgNS4yNTc0NDI5NCAzLjk2ODc1IDkuNTk3NjU2MjUgQzMuOTk4ODM1MiAxMS45MTA0NTU4IDMuNzA3ODg2MzggMTMuODY2Mzg3MzUgMy4yNSAxNi4xMjUgQzIuOTg0MTIwNjEgMjAuMjQ2MTMwNTMgMy4xMDk4NDA0MiAyMC42ODU1NzQyMiA1LjQzNzUgMjMuNzUgQzUuOTEwNTg1OTQgMjQuMjgxMDkzNzUgNi4zODM2NzE4NyAyNC44MTIxODc1IDYuODcxMDkzNzUgMjUuMzU5Mzc1IEM4IDI3IDggMjcgOCAzMSBDMTAuMzEgMzEuNjYgMTIuNjIgMzIuMzIgMTUgMzMgQzE1IDMzLjk5IDE1IDM0Ljk4IDE1IDM2IEMxNi4zMiAzNi42NiAxNy42NCAzNy4zMiAxOSAzOCBDMTkgMzguOTkgMTkgMzkuOTggMTkgNDEgQzE3LjkxNzE4NzUgNDAuNDc0MDYyNSAxNy45MTcxODc1IDQwLjQ3NDA2MjUgMTYuODEyNSAzOS45Mzc1IEMxNC4wNzY4ODc3IDM4Ljc1NjQ4MjEyIDE0LjA3Njg4NzcgMzguNzU2NDgyMTIgMTEuNSAzOS41NjI1IEM5IDQwIDkgNDAgNi4xODc1IDM4LjU2MjUgQzUuNDY1NjI1IDM4LjA0Njg3NSA0Ljc0Mzc1IDM3LjUzMTI1IDQgMzcgQzQuMTk1MjkyOTcgMzYuMTY0Njg3NSA0LjE5NTI5Mjk3IDM2LjE2NDY4NzUgNC4zOTQ1MzEyNSAzNS4zMTI1IEM1LjMwMzg2MTMxIDMwLjQ2NzI5MzAxIDUuMzAzODYxMzEgMzAuNDY3MjkzMDEgMy45MTc5Njg3NSAyNS44NjcxODc1IEMyLjk3NDUwMDc2IDI0LjU0MTY1Mzk2IDIuMDI5MTkzNjQgMjMuMjE3NDI3NDggMS4wODIwMzEyNSAyMS44OTQ1MzEyNSBDLTAuNjgwNTA5NzQgMTguODA4NDkzNzggMC4yMzQyODE5NyAxNi4zNTczNzkwNyAxIDEzIEMxLjA4MjI5MTcgMTEuNDM5MTEyMjkgMS4xMjI0NDU5OSA5Ljg3NTU1MzM3IDEuMTI1IDguMzEyNSBDMS4xMjg4NjcxOSA3LjIyMzg4NjcyIDEuMTI4ODY3MTkgNy4yMjM4ODY3MiAxLjEzMjgxMjUgNi4xMTMyODEyNSBDMC45OTc4MDczMiAzLjk2NTExMDU5IDAuNTg3NzI5NCAyLjA2NjM4MTk1IDAgMCBaICIgZmlsbD0iI0VGRjVGMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM3OCw2MykiLz4KPHBhdGggZD0iTTAgMCBDOS4yNCAwIDE4LjQ4IDAgMjggMCBDMjggMS42NSAyOCAzLjMgMjggNSBDMTguNzYgNSA5LjUyIDUgMCA1IEMwIDMuMzUgMCAxLjcgMCAwIFogIiBmaWxsPSIjMUU3MEMxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNTEwLDk0KSIvPgo8cGF0aCBkPSJNMCAwIEM5LjI0IDAgMTguNDggMCAyOCAwIEMyOCAxLjY1IDI4IDMuMyAyOCA1IEMxOC43NiA1IDkuNTIgNSAwIDUgQzAgMy4zNSAwIDEuNyAwIDAgWiAiIGZpbGw9IiMxRTcwQzEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1MTAsNTcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzkuMjQgMCAxOC40OCAwIDI4IDAgQzI4IDEuNjUgMjggMy4zIDI4IDUgQzE4Ljc2IDUgOS41MiA1IDAgNSBDMCAzLjM1IDAgMS43IDAgMCBaICIgZmlsbD0iIzFGNzBDMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTUxMCw1MCkiLz4KPHBhdGggZD0iTTAgMCBDMCAzIDAgMyAtMSA1IEMtMS4yMTM3NzcyMSAxMC42MDcwMzIxMyAtMS4yMTM3NzcyMSAxMC42MDcwMzIxMyAwIDE2IEMwLjc1NDE0MjM1IDIyLjQ5MDU2OTM3IC0wLjI2NzY1MDE5IDI1LjU4MjA3Mjg1IC00IDMxIEMtMy45Mjc0OTIxNCAzNC41NTI4ODQ5NCAtMy4zMTc3NDE2NCAzNi40OTE2MTMzNyAtMS40Mzc1IDM5LjUgQzAuNDMyMjMyNTQgNDIuNzUxNzA4NzYgMC40OTI4MjA0OCA0NC4yNjg2NDQ5NCAwIDQ4IEMtMS4xNzkwNDA1IDUxLjQwNDQxNTYzIC0yLjU0MTk2MzU0IDU0LjcwNjM5OTc4IC00IDU4IEMtNC45OSA1Ny42NyAtNS45OCA1Ny4zNCAtNyA1NyBDLTYuNTc1MjcyMSA1NC40NTE2MzI2IC02LjE4NjYwNjY3IDUyLjM0MDI4Mjc1IC00LjkzNzUgNTAuMDYyNSBDLTMuNjI5MDkzODEgNDcuMTg0MDA2MzkgLTMuNjg2MTgxNDMgNDUuMTM4MTg1NzMgLTQgNDIgQy00LjQ5NSA0MS4wMSAtNC45OSA0MC4wMiAtNS41IDM5IEMtNy4yMTc0NTA3IDM1LjU2NTA5ODYgLTcuNTUyMzU3MzMgMzMuNzg3NTkzMTMgLTcgMzAgQy01Ljk4MjkyOTY5IDI4LjY2Nzc1MzkxIC01Ljk4MjkyOTY5IDI4LjY2Nzc1MzkxIC00Ljk0NTMxMjUgMjcuMzA4NTkzNzUgQy0yLjU3NzgwMDU3IDIzLjI4MTkyMTg1IC0yLjgyMDAzNjc0IDIwLjUwMjM1NDg2IC0zLjQzNzUgMTYuMDYyNSBDLTQuMjQwNTQ3MzkgMTAuMDc2NjY0NDYgLTMuNzgyNzc2OTMgNi4zMjc0MTg5MSAtMSAxIEMtMC42NyAwLjY3IC0wLjM0IDAuMzQgMCAwIFogIiBmaWxsPSIjRTRFRUVBIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzQ4LDYwKSIvPgo8cGF0aCBkPSJNMCAwIEMzLjkwOTM4NzAzIDMuNzM5NDEzNjggMy45MDkzODcwMyAzLjczOTQxMzY4IDQuMTMyODEyNSA2Ljg0NzY1NjI1IEM0LjEzMDIzNDM4IDcuNTc4NTU0NjkgNC4xMjc2NTYyNSA4LjMwOTQ1MzEzIDQuMTI1IDkuMDYyNSBDNC4xMjI0MjE4OCA5Ljg2MzAwNzgxIDQuMTE5ODQzNzUgMTAuNjYzNTE1NjMgNC4xMTcxODc1IDExLjQ4ODI4MTI1IEM0LjAwMTcwMTk1IDEzLjk2MzUyMTY0IDMuNjUxMDI0NzkgMTYuMzA3MDIyNDggMy4yNSAxOC43NSBDMi43NjIwMjY5NSAyMi40MjA4OTQxOCAyLjc2MjAyNjk1IDIyLjQyMDg5NDE4IDQuOTM3NSAyNS41NjI1IEM1Ljk1ODQzNzUgMjYuNzY5MDYyNSA1Ljk1ODQzNzUgMjYuNzY5MDYyNSA3IDI4IEM4LjA0NzU1MTk0IDMzLjMxNDE0MzcgNi44NDIyMzI0NCAzNi40OTk3OTg2MyA0IDQxIEMzLjM3MDk3MDM5IDQ1LjkyNzM5ODU3IDQuNzQ3ODkzNDUgNDguNjgzNDYyNDQgNyA1MyBDNyA1NC4zMiA3IDU1LjY0IDcgNTcgQzQgNTYgNCA1NiAyLjc5Njg3NSA1My45MjU3ODEyNSBDLTAuNzYwMjg1NzMgNDUuMDQ2MTUyNDIgLTAuNzYwMjg1NzMgNDUuMDQ2MTUyNDIgMSA0MCBDMS41MTU2MjUgMzkuMTc1IDIuMDMxMjUgMzguMzUgMi41NjI1IDM3LjUgQzQuMzg3MDI3NTYgMzQuMzI2OTA4NTggNC41MTY0NDExOCAzMi42MTUwODgyNSA0IDI5IEMzLjM0IDI4LjAzMDYyNSAyLjY4IDI3LjA2MTI1IDIgMjYuMDYyNSBDLTAuNDEwNTc3ODIgMjIuMzcxMzAyNzIgLTAuNDA4MzI3NTUgMjAuMzI4MjcxOTkgMCAxNiBDMC4zMyAxNS4wMSAwLjY2IDE0LjAyIDEgMTMgQzEuMDkyNDczODEgMTEuNTIzMTM4ODkgMS4xMjk5OTA3MSAxMC4wNDIyNDQ5OSAxLjEyNSA4LjU2MjUgQzEuMTI4ODY3MTkgNy40MTk3NDYwOSAxLjEyODg2NzE5IDcuNDE5NzQ2MDkgMS4xMzI4MTI1IDYuMjUzOTA2MjUgQzEuMDAyNzYwMTUgNC4wNDY4NDE0MSAwLjYwODU2MTk5IDIuMTIwMzA3MjQgMCAwIFogIiBmaWxsPSIjRTZGMEVDIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzc0LDYxKSIvPgo8cGF0aCBkPSJNMCAwIEM4LjI1IDAgMTYuNSAwIDI1IDAgQzI1LjY2IDEuNjUgMjYuMzIgMy4zIDI3IDUgQzE4LjA5IDUgOS4xOCA1IDAgNSBDMCAzLjM1IDAgMS43IDAgMCBaICIgZmlsbD0iIzFFNzBDMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU4Nyw1NykiLz4KPHBhdGggZD0iTTAgMCBDOC4yNSAwIDE2LjUgMCAyNSAwIEMyNSAxLjY1IDI1IDMuMyAyNSA1IEMxNi40MiA1IDcuODQgNSAtMSA1IEMtMC42NyAzLjM1IC0wLjM0IDEuNyAwIDAgWiAiIGZpbGw9IiMxRTcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2MjQsNTcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuNjYgMCAxLjMyIDAgMiAwIEMyLjMzIDEuNjUgMi42NiAzLjMgMyA1IEM0LjY1IDUgNi4zIDUgOCA1IEM3LjAxIDYuNDg1IDcuMDEgNi40ODUgNiA4IEM1LjgzMjg2NDMxIDEwLjYyNTMxNTI0IDUuODMyODY0MzEgMTAuNjI1MzE1MjQgNiAxMyBDNi42NiAxMy4zMyA3LjMyIDEzLjY2IDggMTQgQzcuMzQgMTQgNi42OCAxNCA2IDE0IEM2IDE0LjY2IDYgMTUuMzIgNiAxNiBDMi43IDE2IC0wLjYgMTYgLTQgMTYgQy00IDE1LjM0IC00IDE0LjY4IC00IDE0IEMtNC42NiAxMy42NyAtNS4zMiAxMy4zNCAtNiAxMyBDLTUuMzQgMTMgLTQuNjggMTMgLTQgMTMgQy0zLjc5OTEzNTU3IDkuMjg0MDA4MDkgLTMuODQ4MDU2MyA4LjIyNzkxNTU1IC02IDUgQy00LjM1IDUgLTIuNyA1IC0xIDUgQy0wLjY3IDMuMzUgLTAuMzQgMS43IDAgMCBaICIgZmlsbD0iI0Q4RTdFMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM2MCwzNykiLz4KPHBhdGggZD0iTTAgMCBDMCAxLjY1IDAgMy4zIDAgNSBDLTAuNzYzMTI1IDQuNzczMTI1IC0xLjUyNjI1IDQuNTQ2MjUgLTIuMzEyNSA0LjMxMjUgQy0zLjE5OTM3NSA0LjIwOTM3NSAtNC4wODYyNSA0LjEwNjI1IC01IDQgQy02LjgzNTQ3OTkgNS4zMzM3ODU3NSAtNi44MzU0Nzk5IDUuMzMzNzg1NzUgLTggNyBDLTcuMzQgOC42NSAtNi42OCAxMC4zIC02IDEyIEMtMy42OSAxMiAtMS4zOCAxMiAxIDEyIEMxIDEzLjMyIDEgMTQuNjQgMSAxNiBDLTUuMjAwODE5NjcgMTcuMzM3NDMxNjkgLTUuMjAwODE5NjcgMTcuMzM3NDMxNjkgLTguODEyNSAxNS44MTI1IEMtMTEuMTQwMzY2MTcgMTMuODgzNjk2NiAtMTIuMTcyMjU2MTEgMTIuODk3MTAzNjEgLTEzIDEwIEMtMTIuODU1NzAyNCA2LjUzNjg1NzUgLTEyLjM0NTYyNDk3IDQuNTI1MzQ5OTYgLTEwLjQzNzUgMS42MjUgQy02Ljg1NzUyODY3IC0wLjc2MTY0NzU1IC00LjI0ODUyOTc0IC0wLjI4MzIzNTMyIDAgMCBaICIgZmlsbD0iIzAwODQyOSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjE5Miw5MykiLz4KPHBhdGggZD0iTTAgMCBDMCAwLjk5IDAgMS45OCAwIDMgQzEuNjUgMyAzLjMgMyA1IDMgQzUgNC4zMiA1IDUuNjQgNSA3IEMzLjM1IDcgMS43IDcgMCA3IEMwIDkuOTcgMCAxMi45NCAwIDE2IEMxLjY1IDE1LjY3IDMuMyAxNS4zNCA1IDE1IEM1IDE2LjMyIDUgMTcuNjQgNSAxOSBDMS43MTMwMzc2NyAxOS43OTk1MzEzOCAwLjI4OTc2ODA4IDIwLjA5NjU4OTM2IC0zIDE5IEMtNC4yNjIzNzczMSAxNi40NzUyNDUzOCAtNC4wOTg1NjQwNCAxNC42ODc5OTUzNCAtNC4wNjI1IDExLjg3NSBDLTQuMDUzNDc2NTYgMTAuOTY0OTIxODggLTQuMDQ0NDUzMTMgMTAuMDU0ODQzNzUgLTQuMDM1MTU2MjUgOS4xMTcxODc1IEMtNC4wMjM1NTQ2OSA4LjQxODUxNTYyIC00LjAxMTk1MzEzIDcuNzE5ODQzNzUgLTQgNyBDLTQuOTkgNyAtNS45OCA3IC03IDcgQy0zLjg2MjA2ODk3IDAgLTMuODYyMDY4OTcgMCAwIDAgWiAiIGZpbGw9IiMwMDg0MjkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIxMzcsOTApIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuMzMgMS42NSAwLjY2IDMuMyAxIDUgQzAuMDUxMjUgNC43OTM3NSAtMC44OTc1IDQuNTg3NSAtMS44NzUgNC4zNzUgQy0zLjQyMTg3NSA0LjE4OTM3NSAtMy40MjE4NzUgNC4xODkzNzUgLTUgNCBDLTcuMzQ5NzM4MTggNS44OTc1NTE0NCAtNy4zNDk3MzgxOCA1Ljg5NzU1MTQ0IC03LjEyNSA5LjEyNSBDLTcuMDYzMTI1IDEwLjU0ODEyNSAtNy4wNjMxMjUgMTAuNTQ4MTI1IC03IDEyIEMtNC4zNiAxMiAtMS43MiAxMiAxIDEyIEMxIDEzLjMyIDEgMTQuNjQgMSAxNiBDLTUuMzI5OTc5ODggMTcuMjE3MzAzODIgLTUuMzI5OTc5ODggMTcuMjE3MzAzODIgLTguMzEyNSAxNi4yNSBDLTEwIDE1IC0xMCAxNSAtMTIgMTIgQy0xMi40NDUwNTU3NiA3Ljk5NDQ5ODEzIC0xMi4zNDMxOTE2NyA1LjY3MjA4MzY5IC0xMC41IDIuMDYyNSBDLTYuODg4MjI0MDkgLTAuOTE3MjE1MTMgLTQuNTg5MTk0MjEgLTAuMzgyNDMyODUgMCAwIFogIiBmaWxsPSIjMDA4NDI5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMTIyLDkzKSIvPgo8cGF0aCBkPSJNMCAwIEM3LjU5IDAgMTUuMTggMCAyMyAwIEMyMy4zMyAxLjY1IDIzLjY2IDMuMyAyNCA1IEMxNi4wOCA1IDguMTYgNSAwIDUgQzAgMy4zNSAwIDEuNyAwIDAgWiAiIGZpbGw9IiMxRjcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1ODcsNTApIi8+CjxwYXRoIGQ9Ik0wIDAgQzcuMjYgMCAxNC41MiAwIDIyIDAgQzIyIDEuNjUgMjIgMy4zIDIyIDUgQzE0LjQxIDUgNi44MiA1IC0xIDUgQy0wLjY3IDMuMzUgLTAuMzQgMS43IDAgMCBaICIgZmlsbD0iIzFGNzBDMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTYyNyw1MCkiLz4KPHBhdGggZD0iTTAgMCBDMy45NiAwIDcuOTIgMCAxMiAwIEMxMiAzLjY2NjY2NjY3IDEyIDcuMzMzMzMzMzMgMTIgMTEgQzguMDQgMTEgNC4wOCAxMSAwIDExIEMwIDcuMzMzMzMzMzMgMCAzLjY2NjY2NjY3IDAgMCBaICIgZmlsbD0iI0U4MjAyNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTc4MiwxMTYpIi8+CjxwYXRoIGQ9Ik0wIDAgQzkuMjQgMCAxOC40OCAwIDI4IDAgQzI4IDEuMzIgMjggMi42NCAyOCA0IEMxOC43NiA0IDkuNTIgNCAwIDQgQzAgMi42OCAwIDEuMzYgMCAwIFogIiBmaWxsPSIjMUU3MEMwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNTEwLDEwMikiLz4KPHBhdGggZD0iTTAgMCBDMCAxLjY1IDAgMy4zIDAgNSBDLTAuNTU1NTg1OTQgNC41MTQwMjM0NCAtMS4xMTExNzE4OCA0LjAyODA0Njg4IC0xLjY4MzU5Mzc1IDMuNTI3MzQzNzUgQy00LjM3OTY1MzUgMS43NDk2NzE5NyAtNS44NjQwNjM4NiAxLjU2NzMyNDE5IC05LjA2MjUgMS41NjI1IEMtOS45MTk3MjY1NiAxLjU0MzE2NDA2IC0xMC43NzY5NTMxMyAxLjUyMzgyODEzIC0xMS42NjAxNTYyNSAxLjUwMzkwNjI1IEMtMTQuMTc3NTgwNDEgMS43OTY0NDEzNyAtMTQuMTc3NTgwNDEgMS43OTY0NDEzNyAtMTUuODA4NTkzNzUgNC4wMjczNDM3NSBDLTE2LjM5ODMzOTg0IDUuMDAzODA4NTkgLTE2LjM5ODMzOTg0IDUuMDAzODA4NTkgLTE3IDYgQy0xNS4wMiA2IC0xMy4wNCA2IC0xMSA2IEMtMTAuNjcgNy42NSAtMTAuMzQgOS4zIC0xMCAxMSBDLTExLjMyIDExIC0xMi42NCAxMSAtMTQgMTEgQy0xNCAxMC4zNCAtMTQgOS42OCAtMTQgOSBDLTE1LjMyIDkgLTE2LjY0IDkgLTE4IDkgQy0xOC4zMyA3LjM1IC0xOC42NiA1LjcgLTE5IDQgQy0xOS42NiA0LjY2IC0yMC4zMiA1LjMyIC0yMSA2IEMtMjEgNC4wMiAtMjEgMi4wNCAtMjEgMCBDLTEzLjk3OTM2NDY0IC0yLjM5MDAwMzUzIC02Ljg1MjIxNDU0IC0zLjUzNjYyNjg2IDAgMCBaICIgZmlsbD0iIzE5NzM0RiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM3MCw1NykiLz4KPHBhdGggZD0iTTAgMCBDNi45MyAwIDEzLjg2IDAgMjEgMCBDMjEgMS42NSAyMSAzLjMgMjEgNSBDMTQuMDcgNSA3LjE0IDUgMCA1IEMwIDMuMzUgMCAxLjcgMCAwIFogIiBmaWxsPSIjMUU3MEMwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjI5LDk0KSIvPgo8cGF0aCBkPSJNMCAwIEMwIDAuOTkgMCAxLjk4IDAgMyBDLTAuOTkgMyAtMS45OCAzIC0zIDMgQy0zIDMuNjYgLTMgNC4zMiAtMyA1IEMtMi4wMSA1LjMzIC0xLjAyIDUuNjYgMCA2IEMwIDcuMzIgMCA4LjY0IDAgMTAgQy02LjYyNSAxMi44NzUgLTYuNjI1IDEyLjg3NSAtMTAgMTQgQy0xMS4xOTI4NzQxMSAxMC4xMjMxNTkxMyAtMTIgNy4wODM3ODA3NyAtMTIgMyBDLTEwLjc1MzM2NjY5IDIuNDkxNjY0MDkgLTkuNTAyNTA2MTMgMS45OTM2ODg1NSAtOC4yNSAxLjUgQy03LjU1MzkwNjI1IDEuMjIxNTYyNSAtNi44NTc4MTI1IDAuOTQzMTI1IC02LjE0MDYyNSAwLjY1NjI1IEMtNCAwIC00IDAgMCAwIFogIiBmaWxsPSIjMUM3NTUxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzI5LDgwKSIvPgo8cGF0aCBkPSJNMCAwIEM2LjYgMCAxMy4yIDAgMjAgMCBDMjAgMS42NSAyMCAzLjMgMjAgNSBDMTMuNCA1IDYuOCA1IDAgNSBDMCAzLjM1IDAgMS43IDAgMCBaICIgZmlsbD0iIzFFNzBDMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU4Nyw5NCkiLz4KPHBhdGggZD0iTTAgMCBDMS4zMiAwIDIuNjQgMCA0IDAgQzQgNy45MiA0IDE1Ljg0IDQgMjQgQzIuNjggMjQgMS4zNiAyNCAwIDI0IEMwIDE2LjA4IDAgOC4xNiAwIDAgWiAiIGZpbGw9IiMwMDg0MjkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIwNzcsODUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzEuNjA4NzUgLTAuMDIwNjI1IDMuMjE3NSAtMC4wNDEyNSA0Ljg3NSAtMC4wNjI1IEM1Ljc3OTkyMTg4IC0wLjA3NDEwMTU2IDYuNjg0ODQzNzUgLTAuMDg1NzAzMTIgNy42MTcxODc1IC0wLjA5NzY1NjI1IEMxMCAwIDEwIDAgMTIgMSBDMTEuMzQgMi4zMiAxMC42OCAzLjY0IDEwIDUgQzguMzUgNSA2LjcgNSA1IDUgQzQuNjcgOC42MyA0LjM0IDEyLjI2IDQgMTYgQzIuNjggMTYgMS4zNiAxNiAwIDE2IEMwIDEwLjcyIDAgNS40NCAwIDAgWiAiIGZpbGw9IiMwMDg0MjkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIxNDksOTMpIi8+CjxwYXRoIGQ9Ik0wIDAgQzYuMjcgMCAxMi41NCAwIDE5IDAgQzE4LjY3IDEuNjUgMTguMzQgMy4zIDE4IDUgQzEyLjM5IDUgNi43OCA1IDEgNSBDMC42NyAzLjM1IDAuMzQgMS43IDAgMCBaICIgZmlsbD0iIzFGNzBDMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTYwOSw3OSkiLz4KPHBhdGggZD0iTTAgMCBDNi45MyAwIDEzLjg2IDAgMjEgMCBDMjEgMS4zMiAyMSAyLjY0IDIxIDQgQzEzLjc0IDQgNi40OCA0IC0xIDQgQy0wLjY3IDIuNjggLTAuMzQgMS4zNiAwIDAgWiAiIGZpbGw9IiMxRTcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2MjEsNjUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuODEyNSAyLjE4NzUgMC44MTI1IDIuMTg3NSAxIDUgQy0xLjEyNSA3Ljg3NSAtMS4xMjUgNy44NzUgLTQgMTAgQy02LjgxMjUgOS44MTI1IC02LjgxMjUgOS44MTI1IC05IDkgQy05Ljc1IDYuNzUgLTkuNzUgNi43NSAtMTAgNCBDLTcuMTk2NDEzNTIgLTAuMTQ5MzA3OTkgLTQuODI5NDYzOCAtMC40MzkwNDIxNiAwIDAgWiAiIGZpbGw9IiMwMDg0MjkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIxMDgsNDApIi8+CjxwYXRoIGQ9Ik0wIDAgQzYuOTMgMCAxMy44NiAwIDIxIDAgQzIxIDEuMzIgMjEgMi42NCAyMSA0IEMxNC4wNyA0IDcuMTQgNCAwIDQgQzAgMi42OCAwIDEuMzYgMCAwIFogIiBmaWxsPSIjMUU3MEMwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjI5LDEwMikiLz4KPHBhdGggZD0iTTAgMCBDNi42IDAgMTMuMiAwIDIwIDAgQzIwLjMzIDEuMzIgMjAuNjYgMi42NCAyMSA0IEMxNC4wNyA0IDcuMTQgNCAwIDQgQzAgMi42OCAwIDEuMzYgMCAwIFogIiBmaWxsPSIjMUU3MEMwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNTk1LDY1KSIvPgo8cGF0aCBkPSJNMCAwIEM2LjYgMCAxMy4yIDAgMjAgMCBDMjAgMS4zMiAyMCAyLjY0IDIwIDQgQzEzLjQgNCA2LjggNCAwIDQgQzAgMi42OCAwIDEuMzYgMCAwIFogIiBmaWxsPSIjMUU3MEMxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNTg3LDEwMikiLz4KPHBhdGggZD0iTTAgMCBDMC4zMyAwLjY2IDAuNjYgMS4zMiAxIDIgQzAuNjcgMi42NiAwLjM0IDMuMzIgMCA0IEMwLjAyMzc5MDQgNi4zMTEwNzg3OCAwLjAyMzc5MDQgNi4zMTEwNzg3OCAwLjMxMjUgOC44NzUgQzAuMzkxMTMyODEgOS43Mzg2NzE4NyAwLjQ2OTc2NTYzIDEwLjYwMjM0Mzc1IDAuNTUwNzgxMjUgMTEuNDkyMTg3NSBDMS4wMDMyMDcyNCAxNC4wMTc5MDQ3NSAxLjgxMjYwODMzIDE1Ljc0ODIxMzQgMyAxOCBDMy42ODc1MDI5NCAyMy4yNzA4NTU4NiAyLjE2OTQxODg1IDI1Ljg0MDEzNzc1IC0xIDMwIEMtMS42NiAyOS42NyAtMi4zMiAyOS4zNCAtMyAyOSBDLTIuNTA1IDI3Ljk3OTA2MjUgLTIuNTA1IDI3Ljk3OTA2MjUgLTIgMjYuOTM3NSBDLTAuNTQwNjAwMTQgMjIuNjUwNTEyOSAtMC4yNjA1MDE3MyAxOC44MDI1MjcwNCAtMiAxNC41NjI1IEMtMy40NjUwNTgyOSAxMC44MDgyODgxMiAtMy4zMjAyMDE1OSA4LjAzNDU0MDAyIC0zIDQgQy0xLjUgMS41IC0xLjUgMS41IDAgMCBaICIgZmlsbD0iI0U1RUZFQiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM1MSw2MCkiLz4KPHBhdGggZD0iTTAgMCBDMC4zMyAwIDAuNjYgMCAxIDAgQzAuOTg4Mzk4NDQgMC43NTAyMzQzNyAwLjk3Njc5Njg3IDEuNTAwNDY4NzUgMC45NjQ4NDM3NSAyLjI3MzQzNzUgQzAuOTE5NjU0NTMgNy4zOTkxODY2NiAwLjk4NDI4NjYxIDEyLjMwMTE4MTk1IDEuNzUgMTcuMzc1IEMyLjE5NjY0NjM5IDIxLjE0NzM1MTI3IDIuMTA3NDI3NTkgMjEuODEwMjExMjYgMC4xMjUgMjUuMzEyNSBDLTAuOTI2ODc1IDI2LjY0MjgxMjUgLTAuOTI2ODc1IDI2LjY0MjgxMjUgLTIgMjggQy0yLjc4MjE1NTg4IDMwLjcyODI1MDQgLTIuNzgyMTU1ODggMzAuNzI4MjUwNCAtMyAzMyBDLTMuOTkgMzMgLTQuOTggMzMgLTYgMzMgQy01LjY2Mzk0OTIgMjkuMzg3NDUzODUgLTUuNDU0NzA0MzIgMjcuNDg1NTg5OSAtMi45Mjk2ODc1IDI0Ljc4OTA2MjUgQy0wLjM4MTE3MzczIDIxLjEwNTU4MzA5IC0wLjgyNDUyNDMzIDE4LjI5NzIzMDcyIC0xLjM3NSAxNC4wNjI1IEMtMS45OTMyNTI0NiA4Ljg4OTQ2NTc5IC0yLjA0NDM3NzU4IDQuOTExMTE3NTYgMCAwIFogIiBmaWxsPSIjMkE3RDVDIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzQ0LDYyKSIvPgo8cGF0aCBkPSJNMCAwIEMzLjE2MTE1Nzc2IDEuMzY5ODM1MDMgMy45OTI3MDkyIDEuOTg5MDYzOCA2IDUgQzYuNTMwNzQ3NDEgMTAuNTE5NzczMDggNS4zMDE0OTUxMSAxNC4wMjg3NzA1NSAzIDE5IEMyLjMwODU5NDc4IDIxLjc3ODg4NjEzIDIuMzA4NTk0NzggMjEuNzc4ODg2MTMgMiAyNCBDMS4wMSAyNCAwLjAyIDI0IC0xIDI0IEMtMS4yNTgxMzMwMiAyMC4zODYxMzc3NCAtMS4xNjgxNTY2NyAxOC4zMjkzMDY4IDAuNSAxNS4wNjI1IEMyLjczMzE5NzQyIDEwLjUwMzA1NTI2IDIuNjIzNDM0NjEgNi44MzEzMzkxNiAxIDIuMDYyNSBDMC42NyAxLjM4MTg3NSAwLjM0IDAuNzAxMjUgMCAwIFogIiBmaWxsPSIjMTc3MjREIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzUxLDk3KSIvPgo8cGF0aCBkPSJNMCAwIEMwLjMzIDAuOTkgMC42NiAxLjk4IDEgMyBDMC41MDUgMy45MDc1IDAuMDEgNC44MTUgLTAuNSA1Ljc1IEMtMi4zNzE1ODI0MSA5LjgwNTA5NTIzIC0yLjA1NTkwNDQyIDExLjcwMDk2MDU3IC0xIDE2IEMtMC4wODA4Mzc4IDE4LjM3NzMwOTU2IDAuOTUxMzM0NzMgMjAuNjc0Njk4NzUgMiAyMyBDMiAyMy42NiAyIDI0LjMyIDIgMjUgQzEuMDEgMjUgMC4wMiAyNSAtMSAyNSBDLTEuODcyNzk4NjIgMjMuMTMzNjAwMTkgLTIuNzIyNTEwMjcgMjEuMjU2MzkzODkgLTMuNTYyNSAxOS4zNzUgQy00LjI3NTk5NjA5IDE3LjgwODc4OTA2IC00LjI3NTk5NjA5IDE3LjgwODc4OTA2IC01LjAwMzkwNjI1IDE2LjIxMDkzNzUgQy02LjEzMjU2NzY4IDEyLjU3MjY2NDE5IC02LjAzOTIzNjQyIDEwLjYzNzMyNzQ1IC01IDcgQy0zLjU1NDMxMTQ1IDQuNDMwOTQwMzUgLTEuODIzMDY5ODYgMi4zMzcyNjkwNSAwIDAgWiAiIGZpbGw9IiMxMzZGNEEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNzcsOTQpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuNjYgMCAxLjMyIDAgMiAwIEM1LjE4NDE5OTU5IDMuNzk2NTQ1NjcgNS4zODczNDU0OCA3LjExNjc2MjIgNS4yMzgyODEyNSAxMS44NjMyODEyNSBDNC45NDYwNDkxMyAxNC40ODM3ODg5NyA0LjA0MjM4MTk1IDE2LjU4OTQ5MTczIDMgMTkgQzIuNzkzNDQ5MzQgMjIuNDQyNTEwOTcgMi45MDYxNjA2OSAyNC43MTg0ODIwOCA0IDI4IEMyLjA2MjUgMjcuNjI1IDIuMDYyNSAyNy42MjUgMCAyNyBDLTEuNDIxNTEzNDUgMjQuMTU2OTczMDkgLTEuMjM5MjI2MDYgMjIuMTY5NzQ1MjggLTEgMTkgQy0wLjUwNSAxNy44NjU2MjUgLTAuMDEgMTYuNzMxMjUgMC41IDE1LjU2MjUgQzIuNTQzNzYwMDggMTAuNzA4NTY5ODEgMi42OTcwMTA1NCA3LjA0NzQ2ODQ1IDEgMi4wNjI1IEMwLjY3IDEuMzgxODc1IDAuMzQgMC43MDEyNSAwIDAgWiAiIGZpbGw9IiNEREVBRTUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNjksNTkpIi8+CjxwYXRoIGQ9Ik0wIDAgQzIgMiAyIDIgMi4yNSA1LjMxMjUgQzIuMDE4NjM0NTIgOC43MjUxNDA4NCAxLjQ3NjUyODggMTAuOTU0NjU5MzUgMCAxNCBDLTAuNjYgMTMuMzQgLTEuMzIgMTIuNjggLTIgMTIgQy0xLjYyNSA4Ljg3NSAtMS42MjUgOC44NzUgLTEgNiBDLTMuMzEgNi4zMyAtNS42MiA2LjY2IC04IDcgQy04LjA0MjcyMSA1LjMzMzg4MDk1IC04LjA0MDYzODMyIDMuNjY2MTcxMTUgLTggMiBDLTUuOTU0NDc5NTggLTAuMDQ1NTIwNDIgLTIuNzI5NDE5MTQgMC4yMzk0MjI3MyAwIDAgWiAiIGZpbGw9IiMwQzZCNDUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNzAsNjIpIi8+CjxwYXRoIGQ9Ik0wIDAgQzQuMjkgMCA4LjU4IDAgMTMgMCBDMTMgMS42NSAxMyAzLjMgMTMgNSBDOC43MSA1IDQuNDIgNSAwIDUgQzAgMy4zNSAwIDEuNyAwIDAgWiAiIGZpbGw9IiMxRTcwQzEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2MjksNzkpIi8+CjxwYXRoIGQ9Ik0wIDAgQzEuMzIgMCAyLjY0IDAgNCAwIEM0IDUuMjggNCAxMC41NiA0IDE2IEMyLjY4IDE2IDEuMzYgMTYgMCAxNiBDMCAxMC43MiAwIDUuNDQgMCAwIFogIiBmaWxsPSIjMDA4NDI5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMTY5LDkzKSIvPgo8cGF0aCBkPSJNMCAwIEM0LjI5IDAgOC41OCAwIDEzIDAgQzEyLjY3IDAuOTkgMTIuMzQgMS45OCAxMiAzIEMxMC42OCAzIDkuMzYgMyA4IDMgQzggNS42NCA4IDguMjggOCAxMSBDNy4wMSAxMSA2LjAyIDExIDUgMTEgQzUgOC4zNiA1IDUuNzIgNSAzIEMzLjM1IDIuNjcgMS43IDIuMzQgMCAyIEMwIDEuMzQgMCAwLjY4IDAgMCBaICIgZmlsbD0iI0U4MjAyNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTc0OSwxMTYpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuOTYgMCA3LjkyIDAgMTIgMCBDMTIgMS42NSAxMiAzLjMgMTIgNSBDOC4wNCA1IDQuMDggNSAwIDUgQzAgMy4zNSAwIDEuNyAwIDAgWiAiIGZpbGw9IiMxRTcwQzEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1OTUsNzkpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuOTYgMCA3LjkyIDAgMTIgMCBDMTIgMS42NSAxMiAzLjMgMTIgNSBDOC4wNCA1IDQuMDggNSAwIDUgQzAgMy4zNSAwIDEuNyAwIDAgWiAiIGZpbGw9IiMxRTcwQzEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1MTgsNzkpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuOTYgMCA3LjkyIDAgMTIgMCBDMTIgMS42NSAxMiAzLjMgMTIgNSBDOC4wNCA1IDQuMDggNSAwIDUgQzAgMy4zNSAwIDEuNyAwIDAgWiAiIGZpbGw9IiMxRjcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1MTgsNzIpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuOTkgMCAxLjk4IDAgMyAwIEMzIDIuNjQgMyA1LjI4IDMgOCBDNS42NCA4IDguMjggOCAxMSA4IEMxMC42NyA4Ljk5IDEwLjM0IDkuOTggMTAgMTEgQzYuNyAxMSAzLjQgMTEgMCAxMSBDMCA3LjM3IDAgMy43NCAwIDAgWiAiIGZpbGw9IiNFODIwMjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE3OTgsMTE2KSIvPgo8cGF0aCBkPSJNMCAwIEMwLjEyMTE3MTg4IDAuNjAzMjgxMjUgMC4yNDIzNDM3NSAxLjIwNjU2MjUgMC4zNjcxODc1IDEuODI4MTI1IEMwLjUzNDc2NTYzIDIuNjI3MzQzNzUgMC43MDIzNDM3NSAzLjQyNjU2MjUgMC44NzUgNC4yNSBDMS4wMzc0MjE4OCA1LjAzODkwNjI1IDEuMTk5ODQzNzUgNS44Mjc4MTI1IDEuMzY3MTg3NSA2LjY0MDYyNSBDMS45MTcxMzYxNyA5LjAxNDkwNDM4IDEuOTE3MTM2MTcgOS4wMTQ5MDQzOCAzLjA2MjUgMTEuMDkzNzUgQzQuMzcxMjUzNjQgMTMuNzU0ODgyNCA0LjEzMjY4NDUxIDE2LjA4MDk0MDc2IDQgMTkgQzMuMDEgMTkgMi4wMiAxOSAxIDE5IEMwLjcxMTI1IDE3Ljc4MzEyNSAwLjQyMjUgMTYuNTY2MjUgMC4xMjUgMTUuMzEyNSBDLTAuNDgzNjM3NyAxMi44NDMxNjk5MSAtMS4xMzkxMzY4MSAxMC42Njc2MTc2MyAtMi4xMjUgOC4zMTI1IEMtMy4xMDE2MzIyIDUuNzMxNDAwNjMgLTMuMTU2Mzg1NjggMy43MzY3NDk0NSAtMyAxIEMtMSAwIC0xIDAgMCAwIFogIiBmaWxsPSIjMEU2QzQ3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzY4LDEwMikiLz4KPHBhdGggZD0iTTAgMCBDNC45NSAwIDkuOSAwIDE1IDAgQzE0LjM0IDEuMzIgMTMuNjggMi42NCAxMyA0IEM5LjA0IDQgNS4wOCA0IDEgNCBDMC42NyAyLjY4IDAuMzQgMS4zNiAwIDAgWiAiIGZpbGw9IiMxRTcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2MTEsODcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuNjI1NDM5MjIgMC41MTc5MTk4OSA3LjI1MDczNjc2IDEuMDM2Mzk3MjcgMTAuODc1IDEuNTYyNSBDMTIuOTMwODIyNzEgMS44NzcxMDUwMiAxMi45MzA4MjI3MSAxLjg3NzEwNTAyIDE1IDIgQzE1IDMuNjUgMTUgNS4zIDE1IDcgQzkuNTQ1MjA4MTUgNi40MzE3OTI1MiA1LjA4OTQwNzQ0IDUuMDUzNjIwNTUgMCAzIEMwIDIuMDEgMCAxLjAyIDAgMCBaICIgZmlsbD0iI0VFRjRGMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM5MSw3MykiLz4KPHBhdGggZD0iTTAgMCBDMy42MyAwIDcuMjYgMCAxMSAwIEMxMSAyLjMxIDExIDQuNjIgMTEgNyBDMTAuMzQgNyA5LjY4IDcgOSA3IEM5IDUuNjggOSA0LjM2IDkgMyBDNy4wMiAzIDUuMDQgMyAzIDMgQzIuNjcgNC4zMiAyLjM0IDUuNjQgMiA3IEMxLjM0IDcgMC42OCA3IDAgNyBDMCA0LjY5IDAgMi4zOCAwIDAgWiAiIGZpbGw9IiNFODIwMjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE4MTMsMTIwKSIvPgo8cGF0aCBkPSJNMCAwIEM0LjI5IDAgOC41OCAwIDEzIDAgQzEzIDEuMzIgMTMgMi42NCAxMyA0IEM4LjcxIDQgNC40MiA0IDAgNCBDMCAyLjY4IDAgMS4zNiAwIDAgWiAiIGZpbGw9IiMxRjcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2MjksODcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuOTYgMCA3LjkyIDAgMTIgMCBDMTIuMzMgMS4zMiAxMi42NiAyLjY0IDEzIDQgQzguNzEgNCA0LjQyIDQgMCA0IEMwIDIuNjggMCAxLjM2IDAgMCBaICIgZmlsbD0iIzFFNzBDMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU3Miw4NykiLz4KPHBhdGggZD0iTTAgMCBDMy40NDQ0NzI5OSAyLjkzNTIwOTUxIDMuNTc3ODc2MSA1LjI1NjU4Mjc0IDMuOTY0ODQzNzUgOS41OTc2NTYyNSBDMy45OTg0NTQwNiAxMS44OTQzNjEgMy43Mzc5MTUwOSAxMy44NzUxMjQzMyAzLjMxMjUgMTYuMTI1IEMyLjkwNDY5NjM3IDIxLjE4MTc2NSA0LjE4MDYwNDkgMjIuODk5MDYxNjcgNyAyNyBDNi4zNCAyNy4zMyA1LjY4IDI3LjY2IDUgMjggQy0wLjA2ODA5Mzg0IDIxLjI0ODM4NzEgLTAuMDY4MDkzODQgMjEuMjQ4Mzg3MSAwLjE4NzUgMTYuNTYyNSBDMC40NTU2MjUgMTUuMzg2ODc1IDAuNzIzNzUgMTQuMjExMjUgMSAxMyBDMS4wODIyOTE3IDExLjQzOTExMjI5IDEuMTIyNDQ1OTkgOS44NzU1NTMzNyAxLjEyNSA4LjMxMjUgQzEuMTI4ODY3MTkgNy4yMjM4ODY3MiAxLjEyODg2NzE5IDcuMjIzODg2NzIgMS4xMzI4MTI1IDYuMTEzMjgxMjUgQzAuOTk3ODA3MzIgMy45NjUxMTA1OSAwLjU4NzcyOTQgMi4wNjYzODE5NSAwIDAgWiAiIGZpbGw9IiNEMEUyREIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNzgsNjMpIi8+CjxwYXRoIGQ9Ik0wIDAgQzQuMjkgMCA4LjU4IDAgMTMgMCBDMTIuNjcgMS4zMiAxMi4zNCAyLjY0IDEyIDQgQzguMDQgNCA0LjA4IDQgMCA0IEMwIDIuNjggMCAxLjM2IDAgMCBaICIgZmlsbD0iIzFFNzBDMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU3Miw2NSkiLz4KPHBhdGggZD0iTTAgMCBDMCAwLjk5IDAgMS45OCAwIDMgQy0xLjU3OTY3ODA3IDMuNjc1MjgyMjMgLTMuMTYzOTE5MDMgNC4zMzk4OTY5NCAtNC43NSA1IEMtNi4wNzI1NzgxMyA1LjU1Njg3NSAtNi4wNzI1NzgxMyA1LjU1Njg3NSAtNy40MjE4NzUgNi4xMjUgQy0xMCA3IC0xMCA3IC0xNCA3IEMtMTQgNS42OCAtMTQgNC4zNiAtMTQgMyBDLTQuNTg5OTc3MjIgLTAuNDQ0MTkxMzQgLTQuNTg5OTc3MjIgLTAuNDQ0MTkxMzQgMCAwIFogIiBmaWxsPSIjRUZGNUYzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzMxLDczKSIvPgo8cGF0aCBkPSJNMCAwIEMzLjk2IDAgNy45MiAwIDEyIDAgQzEyIDEuMzIgMTIgMi42NCAxMiA0IEM4LjA0IDQgNC4wOCA0IDAgNCBDMCAyLjY4IDAgMS4zNiAwIDAgWiAiIGZpbGw9IiMxRTcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1OTUsODcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuOTYgMCA3LjkyIDAgMTIgMCBDMTIgMS4zMiAxMiAyLjY0IDEyIDQgQzguMDQgNCA0LjA4IDQgMCA0IEMwIDIuNjggMCAxLjM2IDAgMCBaICIgZmlsbD0iIzFFNzBDMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU0OSw4NykiLz4KPHBhdGggZD0iTTAgMCBDMy45NiAwIDcuOTIgMCAxMiAwIEMxMiAxLjMyIDEyIDIuNjQgMTIgNCBDOC4wNCA0IDQuMDggNCAwIDQgQzAgMi42OCAwIDEuMzYgMCAwIFogIiBmaWxsPSIjMUU3MEMwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNTE4LDg3KSIvPgo8cGF0aCBkPSJNMCAwIEMzLjk2IDAgNy45MiAwIDEyIDAgQzEyIDEuMzIgMTIgMi42NCAxMiA0IEM4LjA0IDQgNC4wOCA0IDAgNCBDMCAyLjY4IDAgMS4zNiAwIDAgWiAiIGZpbGw9IiMxRTcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1NDksNjUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuOTYgMCA3LjkyIDAgMTIgMCBDMTIgMS4zMiAxMiAyLjY0IDEyIDQgQzguMDQgNCA0LjA4IDQgMCA0IEMwIDIuNjggMCAxLjM2IDAgMCBaICIgZmlsbD0iIzFFNzBDMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTUxOCw2NSkiLz4KPHBhdGggZD0iTTAgMCBDMy4zNzQ2MjcxNSAwLjU0NzIzNjgzIDUuMDgyMzUgMS4wNTQ5IDggMyBDNy4zNCA0Ljk4IDYuNjggNi45NiA2IDkgQzQgOCAyIDcgMCA2IEMwIDQuMDIgMCAyLjA0IDAgMCBaICIgZmlsbD0iIzFENzY1MiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM5Myw5MykiLz4KPHBhdGggZD0iTTAgMCBDMCAzIDAgMyAtMSA1IEMtMS4yMTM3NzcyMSAxMC42MDcwMzIxMyAtMS4yMTM3NzcyMSAxMC42MDcwMzIxMyAwIDE2IEMwLjEyNzgxNzg2IDE4LjY3Mzk0OTY0IDAuMDQzOTE4NzEgMjEuMzIwOTU4NTcgMCAyNCBDLTAuNjYgMjQgLTEuMzIgMjQgLTIgMjQgQy0zLjcyNzI5MzA0IDE3LjI5MDY3OTkxIC00Ljc4MjM1NDYyIDEwLjgxODQwMzYgLTMgNCBDLTEuNDQ5MjE4NzUgMS43MTA5Mzc1IC0xLjQ0OTIxODc1IDEuNzEwOTM3NSAwIDAgWiAiIGZpbGw9IiNEOUU4RTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNDgsNjApIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuMzMgMCAwLjY2IDAgMSAwIEMxIDEuNjUgMSAzLjMgMSA1IEMxLjg4Njg3NSA0LjY5MDYyNSAyLjc3Mzc1IDQuMzgxMjUgMy42ODc1IDQuMDYyNSBDOS4xNjA2NzE0NiAyLjMwNjk1NDQ0IDkuMTYwNjcxNDYgMi4zMDY5NTQ0NCAxMiAyIEMxMi45OSAyLjY2IDEzLjk4IDMuMzIgMTUgNCBDMTQuNjcgNC42NiAxNC4zNCA1LjMyIDE0IDYgQzExLjY4MDI1NzY2IDYuNDE3NTUzNjIgOS4zNDIxNDIwNyA2LjczNTU2NDYgNyA3IEM1LjA1MDkzNzUgNy4yNzg0Mzc1IDUuMDUwOTM3NSA3LjI3ODQzNzUgMy4wNjI1IDcuNTYyNSBDMi4wNTE4NzUgNy43MDY4NzUgMS4wNDEyNSA3Ljg1MTI1IDAgOCBDMCA1LjM2IDAgMi43MiAwIDAgWiAiIGZpbGw9IiMxODcyNEUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzMTcsNjgpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuMzMzMzMzMzMgMCA2LjY2NjY2NjY3IDAgMTAgMCBDMTAgMS45OCAxMCAzLjk2IDEwIDYgQzcuMzYgNiA0LjcyIDYgMiA2IEMyIDQuNjggMiAzLjM2IDIgMiBDMS4zNCAyIDAuNjggMiAwIDIgQzAgMS4zNCAwIDAuNjggMCAwIFogIiBmaWxsPSIjMDA2NDNDIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzg1LDExNykiLz4KPHBhdGggZD0iTTAgMCBDMi45NyAwIDUuOTQgMCA5IDAgQzguNjcgMS42NSA4LjM0IDMuMyA4IDUgQzUuNjkgNSAzLjM4IDUgMSA1IEMwLjY3IDMuMzUgMC4zNCAxLjcgMCAwIFogIiBmaWxsPSIjMUU3MEMxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjE0LDk0KSIvPgo8cGF0aCBkPSJNMCAwIEMwIDAuOTkgMCAxLjk4IDAgMyBDLTMuNjMgNC4zMiAtNy4yNiA1LjY0IC0xMSA3IEMtMTEuMzMgNS42OCAtMTEuNjYgNC4zNiAtMTIgMyBDLTEwLjc1MzM2NjY5IDIuNDkxNjY0MDkgLTkuNTAyNTA2MTMgMS45OTM2ODg1NSAtOC4yNSAxLjUgQy03LjU1MzkwNjI1IDEuMjIxNTYyNSAtNi44NTc4MTI1IDAuOTQzMTI1IC02LjE0MDYyNSAwLjY1NjI1IEMtNCAwIC00IDAgMCAwIFogIiBmaWxsPSIjRUZGNUYyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzI5LDgwKSIvPgo8cGF0aCBkPSJNMCAwIEMxLjA3MDc3Mzc1IDMuMjEyMzIxMjUgMSA1LjYzOTM3ODA3IDEgOSBDMS4zMyA5Ljk5IDEuNjYgMTAuOTggMiAxMiBDMS4wMSAxMiAwLjAyIDEyIC0xIDEyIEMtMS4zMyAxMC4zNSAtMS42NiA4LjcgLTIgNyBDLTMuOTggNyAtNS45NiA3IC04IDcgQy03LjIzNjg3NSA2LjQwMTg3NSAtNi40NzM3NSA1LjgwMzc1IC01LjY4NzUgNS4xODc1IEMtMy42NTE2NDI1IDMuNTMwNDA2NjggLTEuODAyMTcyMSAxLjg5NzAyMzI2IDAgMCBaICIgZmlsbD0iIzBENkI0NSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM2OCw3NSkiLz4KPHBhdGggZD0iTTAgMCBDMS4yMDE1NzEzMSAzLjYwNDcxMzkzIDEuNTQ5ODEzNDggNy4xMTUwMzA4OCAxLjg3NSAxMC44NzUgQzEuOTYwMDc4MTMgMTEuNTgyNjk1MzEgMi4wNDUxNTYyNSAxMi4yOTAzOTA2MyAyLjEzMjgxMjUgMTMuMDE5NTMxMjUgQzIuNDc2OTI2MjggMTcuMjE5MjgzNTEgMi4yMzk3Mzc5MiAxOC43MTA2NjExMyAtMC40OTIxODc1IDIyLjAwNzgxMjUgQy0xLjMxOTc2NTYyIDIyLjY2NTIzNDM3IC0yLjE0NzM0Mzc1IDIzLjMyMjY1NjI1IC0zIDI0IEMtMi4xMjUgMjAuMTI1IC0yLjEyNSAyMC4xMjUgLTEgMTkgQy0wLjkzOTY4OTYzIDE1LjM4NTE0NzQyIC0wLjk4MDA1NDkzIDExLjc4NDEzNTc2IC0xLjAzOTA2MjUgOC4xNjk5MjE4OCBDLTEuMTAwMTMzMTUgMi4yMDAyNjYyOSAtMS4xMDAxMzMxNSAyLjIwMDI2NjI5IDAgMCBaICIgZmlsbD0iI0RERUFFNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM0Miw2NSkiLz4KPHBhdGggZD0iTTAgMCBDMSAyIDEgMiAwLjkzNzUgNS42ODc1IEMwLjg2OTQ3NzA3IDkuODIxNzgyMyAxLjY5NjU0Mzg5IDEzLjA4OTYzMTY4IDMgMTcgQzIuMzQgMTcgMS42OCAxNyAxIDE3IEMwLjY3IDE4LjMyIDAuMzQgMTkuNjQgMCAyMSBDLTEuMzk3NzM2NjEgMTQuOTA5ODYxOSAtMi40MzkxOTg3NCA5LjI1ODU4MjExIC0yIDMgQy0xLjM0IDIuMDEgLTAuNjggMS4wMiAwIDAgWiAiIGZpbGw9IiMyMTc4NTUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNDgsNjIpIi8+CjxwYXRoIGQ9Ik0wIDAgQzQuMTk0Njk1NzEgMC41OTkyNDIyNCA4LjAwOTk5ODM0IDEuNTc0OTk5NDEgMTIgMyBDMTIgMy45OSAxMiA0Ljk4IDEyIDYgQzcuNjgyMjU0MiA1LjQ5MjAyOTkxIDMuOTY2OTc4ODYgNC44MDMxNzIyMSAwIDMgQzAgMi4wMSAwIDEuMDIgMCAwIFogIiBmaWxsPSIjRTdGMEVDIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzkzLDgwKSIvPgo8cGF0aCBkPSJNMCAwIEMxLjY3NTQyOTc2IDAuMjg2MDQ4OTggMy4zNDM4NTM0MyAwLjYxNzgxMjMzIDUgMSBDNS44NDY4MTEzMyA2LjA4MDg2Nzk2IDYuMDkwMzgwOTkgMTAuODQ4MjgzNzcgNiAxNiBDNS4zNCAxNiA0LjY4IDE2IDQgMTYgQzMuOTUxMDE1NjMgMTUuNDA4MzIwMzEgMy45MDIwMzEyNSAxNC44MTY2NDA2MyAzLjg1MTU2MjUgMTQuMjA3MDMxMjUgQzMuMjYxOTU4IDcuODg5NzQ5MDkgMy4yNjE5NTggNy44ODk3NDkwOSAxIDIgQzAuMzQgMS42NyAtMC4zMiAxLjM0IC0xIDEgQy0wLjY3IDAuNjcgLTAuMzQgMC4zNCAwIDAgWiAiIGZpbGw9IiMxNzcyNEUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNzAsNTcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuNjA4ODEzMSAwLjgzNTA2MTE3IDMuNjA4ODEzMSAwLjgzNTA2MTE3IDUuODEyNSAtMC41IEM1LjgxMjUgMS4xNSA1LjgxMjUgMi44IDUuODEyNSA0LjUgQzMuNDc5MTY2NjcgNC4xNjY2NjY2NyAxLjE0NTgzMzMzIDMuODMzMzMzMzMgLTEuMTg3NSAzLjUgQy0yLjQ2NjI1IDMuMzU1NjI1IC0zLjc0NSAzLjIxMTI1IC01LjA2MjUgMy4wNjI1IEMtNi4wOTM3NSAyLjg3Njg3NSAtNy4xMjUgMi42OTEyNSAtOC4xODc1IDIuNSBDLTguNTE3NSAxLjg0IC04Ljg0NzUgMS4xOCAtOS4xODc1IDAuNSBDLTUuOTIyMjU5MDcgLTAuNDE4MzQ5MDEgLTMuMzE1NTMyMDkgLTAuNDc3MDk4NDIgMCAwIFogIiBmaWxsPSIjMUI3NDUxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzk5LjE4NzUsNzEuNSkiLz4KPHBhdGggZD0iTTAgMCBDMi45NyAwIDUuOTQgMCA5IDAgQzguNjcgMS4zMiA4LjM0IDIuNjQgOCA0IEM1LjAzIDQgMi4wNiA0IC0xIDQgQy0wLjY3IDIuNjggLTAuMzQgMS4zNiAwIDAgWiAiIGZpbGw9IiNEQ0VERTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIwNDAsOTIpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuOTYgMCA3LjkyIDAgMTIgMCBDMTEuNjcgMC45OSAxMS4zNCAxLjk4IDExIDMgQzcuNyAzIDQuNCAzIDEgMyBDMC42NyAyLjAxIDAuMzQgMS4wMiAwIDAgWiAiIGZpbGw9IiNFNzIwMjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE3NjYsMTIwKSIvPgo8cGF0aCBkPSJNMCAwIEMzLjk2IDAgNy45MiAwIDEyIDAgQzExLjY3IDAuOTkgMTEuMzQgMS45OCAxMSAzIEM3LjcgMyA0LjQgMyAxIDMgQzAuNjcgMi4wMSAwLjM0IDEuMDIgMCAwIFogIiBmaWxsPSIjRTkyMDI2IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNzY2LDExNikiLz4KPHBhdGggZD0iTTAgMCBDOS40MTAwMjI3OCAtMC4zNjkwMjA1IDkuNDEwMDIyNzggLTAuMzY5MDIwNSAxNCAyIEMxNCAzLjY1IDE0IDUuMyAxNCA3IEMxMy41MDUgNi41MjU2MjUgMTMuMDEgNi4wNTEyNSAxMi41IDUuNTYyNSBDOS45MzI3MzUyOSAzLjk1Nzk1OTU1IDguODAwMzY5MDkgMy43NDk5ODYwOSA1Ljg3NSAzLjUgQzQuNTk2MjUgMy4zMzUgMy4zMTc1IDMuMTcgMiAzIEMxLjM0IDIuMDEgMC42OCAxLjAyIDAgMCBaICIgZmlsbD0iIzNEODk2QiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM1Niw1NSkiLz4KPHBhdGggZD0iTTAgMCBDMC4yODQ4ODI4MSAwLjU3NDkyMTg4IDAuNTY5NzY1NjIgMS4xNDk4NDM3NSAwLjg2MzI4MTI1IDEuNzQyMTg3NSBDMS41OTM5MzI5NyAzLjE5MzQ0NzYyIDIuMzQwMTUwNTEgNC42MzcwMzEgMy4xMDU0Njg3NSA2LjA3MDMxMjUgQzMuNDYyNTM5MDYgNi43NDgzNTkzOCAzLjgxOTYwOTM4IDcuNDI2NDA2MjUgNC4xODc1IDguMTI1IEM0LjU1MjMwNDY5IDguODA4MjAzMTMgNC45MTcxMDkzOCA5LjQ5MTQwNjI1IDUuMjkyOTY4NzUgMTAuMTk1MzEyNSBDNS41MjYyODkwNiAxMC43OTA4NTkzNyA1Ljc1OTYwOTM4IDExLjM4NjQwNjI1IDYgMTIgQzUuNjcgMTIuNjYgNS4zNCAxMy4zMiA1IDE0IEM0LjM0IDE0IDMuNjggMTQgMyAxNCBDLTEuMDc4Nzc0NjIgNS45NjQ5ODkwNiAtMS4wNzg3NzQ2MiA1Ljk2NDk4OTA2IC0wLjc1IDEuOTM3NSBDLTAuNTAyNSAxLjI5ODEyNSAtMC4yNTUgMC42NTg3NSAwIDAgWiAiIGZpbGw9IiMwQzZCNDUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNzgsMTAzKSIvPgo8cGF0aCBkPSJNMCAwIEMzLjk2IDAgNy45MiAwIDEyIDAgQzExLjAxIDEuNDg1IDExLjAxIDEuNDg1IDEwIDMgQzguMTI1IDMuMzI4MTI1IDguMTI1IDMuMzI4MTI1IDYgMy4yNSBDNS4yOTg3NSAzLjIzNDUzMTI1IDQuNTk3NSAzLjIxOTA2MjUgMy44NzUgMy4yMDMxMjUgQzIgMyAyIDMgMCAyIEMwIDEuMzQgMCAwLjY4IDAgMCBaICIgZmlsbD0iI0U4MjAyNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTc2NiwxMjQpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuNjMgMCA3LjI2IDAgMTEgMCBDMTAuNjcgMC45OSAxMC4zNCAxLjk4IDEwIDMgQzcuMDMgMyA0LjA2IDMgMSAzIEMwLjY3IDIuMDEgMC4zNCAxLjAyIDAgMCBaICIgZmlsbD0iI0U4MjAyNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTgxMywxMTYpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuNDk1IDAuMzkxODc1IDAuOTkgMC43ODM3NSAxLjUgMS4xODc1IEMwLjE2NjY2NjY3IDEuODU0MTY2NjcgLTEuMTY2NjY2NjcgMi41MjA4MzMzMyAtMi41IDMuMTg3NSBDLTMuNDkgMy43NDQzNzUgLTMuNDkgMy43NDQzNzUgLTQuNSA0LjMxMjUgQy02LjUgNS4xODc1IC02LjUgNS4xODc1IC0xMC41IDUuMTg3NSBDLTEwLjUgNC4xOTc1IC0xMC41IDMuMjA3NSAtMTAuNSAyLjE4NzUgQy0zLjI4Nzc0NjE3IC0xLjA2ODUxNzUxIC0zLjI4Nzc0NjE3IC0xLjA2ODUxNzUxIDAgMCBaICIgZmlsbD0iIzEyNkY0QSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTMyNy41LDc3LjgxMjUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzIuNjQgMCA1LjI4IDAgOCAwIEM3LjY3IDEuMzIgNy4zNCAyLjY0IDcgNCBDNC42OSA0IDIuMzggNCAwIDQgQzAgMi42OCAwIDEuMzYgMCAwIFogIiBmaWxsPSIjRDdFQkRFIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDA5LDk2KSIvPgo8cGF0aCBkPSJNMCAwIEMzLjU1NzgwMTk2IDAuNjA5OTA4OTEgNi42ODI4NTg5IDEuNTc4MzY4MSAxMCAzIEM5LjY3IDMuOTkgOS4zNCA0Ljk4IDkgNiBDNS44NTI2MjgxOCA1LjMwMDU4NDA0IDIuOTc0MTExMjQgNC4yMzkyMTMwMiAwIDMgQzAgMi4wMSAwIDEuMDIgMCAwIFogIiBmaWxsPSIjREZFQkU2IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzk0LDg3KSIvPgo8cGF0aCBkPSJNMCAwIEMtMSAzIC0xIDMgLTIuODQ3NjU2MjUgNC4xNjc5Njg3NSBDLTMuNTc4NTU0NjkgNC41MDQ0MTQwNiAtNC4zMDk0NTMxMiA0Ljg0MDg1OTM3IC01LjA2MjUgNS4xODc1IEMtNS43OTU5NzY1NiA1LjUzMTY3OTY5IC02LjUyOTQ1MzEyIDUuODc1ODU5MzggLTcuMjg1MTU2MjUgNi4yMzA0Njg3NSBDLTguMTM0MDAzOTEgNi42MTEzODY3MiAtOC4xMzQwMDM5MSA2LjYxMTM4NjcyIC05IDcgQy05LjMzIDUuNjggLTkuNjYgNC4zNiAtMTAgMyBDLTYuMjcwMzQ4NjEgMC45NjU2NDQ2OSAtNC4zMzA5NDk1OCAwIDAgMCBaICIgZmlsbD0iI0U4RjFFRCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTMyOCw4NykiLz4KPHBhdGggZD0iTTAgMCBDMi4zOTI3MzIzNSAzLjU4OTA5ODUzIDMuMTUzMTA5ODYgNS4yNjMxMzQ3OCAzLjE4NzUgOS41IEMzLjIwMTY3OTY5IDEwLjI5NDA2MjUgMy4yMTU4NTkzOCAxMS4wODgxMjUgMy4yMzA0Njg3NSAxMS45MDYyNSBDMyAxNCAzIDE0IDEgMTYgQy0wLjE1NzAzOTggMTIuNTI4ODgwNTkgLTAuMDMzOTY0ODkgOS43NzM2ODM0NiAwLjA2MjUgNi4xNTYyNSBDMC4wOTg0MjE3OSAzLjgxNDI1MTIzIDAuMDk4NDIxNzkgMy44MTQyNTEyMyAtMSAxIEMtMC42NyAwLjY3IC0wLjM0IDAuMzQgMCAwIFogIiBmaWxsPSIjMjI3OTU2IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzc3LDYyKSIvPgo8cGF0aCBkPSJNMCAwIEMwLjY2IDAuMzMgMS4zMiAwLjY2IDIgMSBDMS4zNCAzLjk3IDAuNjggNi45NCAwIDEwIEMtMC45OSA5LjY3IC0xLjk4IDkuMzQgLTMgOSBDLTIuNDQyNzEwODcgNS42NTYyNjUyNSAtMS42NDgyNjExMSAyLjk2Njg3MDAxIDAgMCBaICIgZmlsbD0iI0RDRUFFNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM0NCwxMDgpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuMjcyODY2ODIgMi43ODE5MzY4IDQuOTY0Mjc2OTcgNi4yNzk1NDA2NyA3IDEwIEM2LjAxIDEwLjMzIDUuMDIgMTAuNjYgNCAxMSBDMy4zMjU5MTY5MiA5LjczMzA4NDkzIDIuNjYwOTk1MDMgOC40NjEyOTI1MSAyIDcuMTg3NSBDMS42Mjg3NSA2LjQ3OTgwNDY5IDEuMjU3NSA1Ljc3MjEwOTM3IDAuODc1IDUuMDQyOTY4NzUgQzAgMyAwIDMgMCAwIFogIiBmaWxsPSIjRDVFNURGIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzc5LDEwNCkiLz4KPHBhdGggZD0iTTAgMCBDMi42NCAwIDUuMjggMCA4IDAgQzcuMzQgMS4zMiA2LjY4IDIuNjQgNiA0IEMzLjAzIDMuNTA1IDMuMDMgMy41MDUgMCAzIEMwIDIuMDEgMCAxLjAyIDAgMCBaICIgZmlsbD0iI0ZDRkRGQyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjAzOCw5OSkiLz4KPHBhdGggZD0iTTAgMCBDMCAwLjk5IDAgMS45OCAwIDMgQy0zLjQ2NSA0LjQ4NSAtMy40NjUgNC40ODUgLTcgNiBDLTcuMzMgNS4wMSAtNy42NiA0LjAyIC04IDMgQy0zLjM3NSAwIC0zLjM3NSAwIDAgMCBaICIgZmlsbD0iI0Q2RTZERiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTMyOSw5MykiLz4KPHBhdGggZD0iTTAgMCBDLTAuNzUgNy43NSAtMC43NSA3Ljc1IC0zIDEwIEMtNC40NzgzMjI2IDcuMDQzMzU0ODEgLTQuMDYwMzI3ODMgNC4yNTc3MDI2MyAtNCAxIEMtMiAwIC0yIDAgMCAwIFogIiBmaWxsPSIjMkM3RTVEIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzcyLDY2KSIvPgo8cGF0aCBkPSJNMCAwIEMwLjkzMDQ1OTMzIDIuNTUxNDQ4MjQgMS4wODU2NDA5MSAzLjc0MDA2NDc4IDAuMjIyNjU2MjUgNi4zNTkzNzUgQy0wLjE2MDE5NTMxIDcuMTQ4MjgxMjUgLTAuNTQzMDQ2ODggNy45MzcxODc1IC0wLjkzNzUgOC43NSBDLTEuNTA3OTEwMTYgOS45NDg4MjgxMyAtMS41MDc5MTAxNiA5Ljk0ODgyODEzIC0yLjA4OTg0Mzc1IDExLjE3MTg3NSBDLTIuMzkwMTk1MzEgMTEuNzc1MTU2MjUgLTIuNjkwNTQ2ODggMTIuMzc4NDM3NSAtMyAxMyBDLTMuNjYgMTIuNjcgLTQuMzIgMTIuMzQgLTUgMTIgQy00LjQ2MjMxMTI4IDguMTI4NjQxMiAtMy40MjI1MjcgNi4wMjgxNTg3NSAtMSAzIEMtMC42NyAyLjAxIC0wLjM0IDEuMDIgMCAwIFogIiBmaWxsPSIjRENFOUU0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzQyLDEwMykiLz4KPHBhdGggZD0iTTAgMCBDMC45OSAwLjMzIDEuOTggMC42NiAzIDEgQzIuNTQ2MjUgMS43NDI1IDIuMDkyNSAyLjQ4NSAxLjYyNSAzLjI1IEMwLjMxMzU5MjA0IDUuNDY5MzA1NzggLTAuODgyODA4MDMgNy42Nzk2NzgyMiAtMiAxMCBDLTMuMDYzNTE2NzUgNi42MTYwODMwNyAtMy4yMTQ0Mjk4MiA1LjQxOTUzNjYgLTEuNTYyNSAyLjE4NzUgQy0xLjA0Njg3NSAxLjQ2NTYyNSAtMC41MzEyNSAwLjc0Mzc1IDAgMCBaICIgZmlsbD0iI0RCRTlFMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM3OCw5NikiLz4KPHBhdGggZD0iTTAgMCBDMCAwLjk5IDAgMS45OCAwIDMgQy0yLjUgNC42ODc1IC0yLjUgNC42ODc1IC01IDYgQy01LjY2IDUuMDEgLTYuMzIgNC4wMiAtNyAzIEMtMy4zNzUgMCAtMy4zNzUgMCAwIDAgWiAiIGZpbGw9IiMwRDZDNDYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzMjksOTYpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuNjYgMCAxLjMyIDAgMiAwIEMyIDAuNjYgMiAxLjMyIDIgMiBDMy4zMiAyIDQuNjQgMiA2IDIgQzYgMi42NiA2IDMuMzIgNiA0IEM0LjY4IDQgMy4zNiA0IDIgNCBDMS42NyA1LjMyIDEuMzQgNi42NCAxIDggQy0wLjM1NDM5NjY4IDUuMjkxMjA2NjUgLTAuMDY1MDE0NTEgMi45OTA2NjczMiAwIDAgWiAiIGZpbGw9IiMxOTczNEYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNTAsNjQpIi8+CjxwYXRoIGQ9Ik0wIDAgQzEuMzIgMC42NiAyLjY0IDEuMzIgNCAyIEM0IDIuOTkgNCAzLjk4IDQgNSBDMSA1IDEgNSAtMC42ODc1IDMuNSBDLTEuMTIwNjI1IDMuMDA1IC0xLjU1Mzc1IDIuNTEgLTIgMiBDLTEuMzQgMS4zNCAtMC42OCAwLjY4IDAgMCBaICIgZmlsbD0iIzE1NzI0QyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM5MiwxMDEpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuOTkgMC4zMyAxLjk4IDAuNjYgMyAxIEMyLjM0IDMuOTcgMS42OCA2Ljk0IDEgMTAgQzAuMDEgOS4wMSAtMC45OCA4LjAyIC0yIDcgQy0xLjM0IDQuNjkgLTAuNjggMi4zOCAwIDAgWiAiIGZpbGw9IiMyOTdENUIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNzMsNzMpIi8+CjxwYXRoIGQ9Ik0wIDAgQzIgMC42NjY2NjY2NyA0IDEuMzMzMzMzMzMgNiAyIEM1LjY3IDIuNjYgNS4zNCAzLjMyIDUgNCBDMi4zNTEzOTU3MyA0LjU5MzU1NjE0IC0wLjI5MTk3MzIyIDQuNzQyMDkyNjkgLTMgNSBDLTIuNjI1IDMuMDYyNSAtMi42MjUgMy4wNjI1IC0yIDEgQy0xLjM0IDAuNjcgLTAuNjggMC4zNCAwIDAgWiAiIGZpbGw9IiMzMzgzNjMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzMjYsNzApIi8+CjxwYXRoIGQ9Ik0wIDAgQzIuMzEgMCA0LjYyIDAgNyAwIEM3IDEuMzIgNyAyLjY0IDcgNCBDNS42OCA0IDQuMzYgNCAzIDQgQzMgMy4zNCAzIDIuNjggMyAyIEMyLjAxIDIgMS4wMiAyIDAgMiBDMCAxLjM0IDAgMC42OCAwIDAgWiAiIGZpbGw9IiM2N0EyOEEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNTMsNjQpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuOTkgMCAxLjk4IDAgMyAwIEMyLjY4NzUgMS44NzUgMi42ODc1IDEuODc1IDIgNCBDMS4wMSA0LjY2IDAuMDIgNS4zMiAtMSA2IEMtMS42MjUgNC4xMjUgLTEuNjI1IDQuMTI1IC0yIDIgQy0xLjM0IDEuMzQgLTAuNjggMC42OCAwIDAgWiAiIGZpbGw9IiMxNDcwNEIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzMjgsMTAxKSIvPgo8cGF0aCBkPSJNMCAwIEM0Ljc1IDEuODc1IDQuNzUgMS44NzUgNyAzIEM2LjY3IDMuOTkgNi4zNCA0Ljk4IDYgNiBDMy45NjE2NjU3NiA0LjcyNjA0MTEgMS45NjE0Nzg3NCAzLjM4OTM4MDc3IDAgMiBDMCAxLjM0IDAgMC42OCAwIDAgWiAiIGZpbGw9IiNFOEYxRUUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzOTQsOTMpIi8+CjxwYXRoIGQ9Ik0wIDAgQzEuOTggMCAzLjk2IDAgNiAwIEM2IDAuOTkgNiAxLjk4IDYgMyBDMy42OSAzIDEuMzggMyAtMSAzIEMtMC42NyAyLjAxIC0wLjM0IDEuMDIgMCAwIFogIiBmaWxsPSIjRjhGQkY5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDEyLDkwKSIvPgo8cGF0aCBkPSJNMCAwIEMwLjMzIDEuMzIgMC42NiAyLjY0IDEgNCBDMS42NiA0IDIuMzIgNCAzIDQgQzMuNjYgNS42NSA0LjMyIDcuMyA1IDkgQzMuMDYyNSA4LjYyNSAzLjA2MjUgOC42MjUgMSA4IEMtMC4zNTQzOTY2OCA1LjI5MTIwNjY1IC0wLjA2NTAxNDUxIDIuOTkwNjY3MzIgMCAwIFogIiBmaWxsPSIjRDRFNERFIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzY4LDc4KSIvPgo8cGF0aCBkPSJNMCAwIEMwLjk5IDAuMzMgMS45OCAwLjY2IDMgMSBDMi4zNCAzLjMxIDEuNjggNS42MiAxIDggQzAuMzQgOCAtMC4zMiA4IC0xIDggQy0xLjEyNSAyLjI1IC0xLjEyNSAyLjI1IDAgMCBaICIgZmlsbD0iI0VGRjVGMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM3MCw3NCkiLz4KPHBhdGggZD0iTTAgMCBDMi4wMDcyMDkyMyAwLjI4Njc0NDE4IDQuMDA4NTk0NCAwLjYxODY2NzAxIDYgMSBDNiAxLjY2IDYgMi4zMiA2IDMgQzQuMzUgMyAyLjcgMyAxIDMgQzEgMy45OSAxIDQuOTggMSA2IEMwLjM0IDYgLTAuMzIgNiAtMSA2IEMtMS4wNDI3MjEgNC4zMzM4ODA5NSAtMS4wNDA2MzgzMiAyLjY2NjE3MTE1IC0xIDEgQy0wLjY3IDAuNjcgLTAuMzQgMC4zNCAwIDAgWiAiIGZpbGw9IiM3MkE5OTMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNjMsNjMpIi8+CjxwYXRoIGQ9Ik0wIDAgQzEuOTM3NSAwLjY4NzUgMS45Mzc1IDAuNjg3NSA0IDIgQzQuNzUgNC42MjUgNC43NSA0LjYyNSA1IDcgQzQuMzQgNyAzLjY4IDcgMyA3IEMwIDIuNjE1Mzg0NjIgMCAyLjYxNTM4NDYyIDAgMCBaICIgZmlsbD0iIzBDNkI0NSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM1MSw5NykiLz4KPHBhdGggZD0iTTAgMCBDMS4zMiAwIDIuNjQgMCA0IDAgQzQgMC45OSA0IDEuOTggNCAzIEMyLjAyIDMuNjYgMC4wNCA0LjMyIC0yIDUgQy0xLjM0IDMuMzUgLTAuNjggMS43IDAgMCBaICIgZmlsbD0iI0U2RjBFQyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTMyNSw4MCkiLz4KPHBhdGggZD0iTTAgMCBDMS4zMiAwIDIuNjQgMCA0IDAgQzMuNjcgMS4zMiAzLjM0IDIuNjQgMyA0IEMyLjAxIDQgMS4wMiA0IDAgNCBDMCAyLjY4IDAgMS4zNiAwIDAgWiAiIGZpbGw9IiMwMDg0MjgiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIxNjksODcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuOTkgMCAxLjk4IDAgMyAwIEMyLjM0IDEuMzIgMS42OCAyLjY0IDEgNCBDMC42NyAyLjY4IDAuMzQgMS4zNiAwIDAgWiAiIGZpbGw9IiMxRTcwQzEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2MTcsMTAyKSIvPgo8L3N2Zz4K" style="
            width: 742.5px;
            position: relative;
            top: 107px;
            left: 32px;
            ">
            <a href=`+uc+` style="
        float: left;
        border-radius: 56px;
        background: #0D6EFD;
        padding-top: 8px;
        width: 280px;
        height: 38px;
        text-align: center;
        position: relative;
        top: 127px;
        left: 274px;
        font-size: 16px;
        color: white;
        text-decoration: none;
        letter-spacing: 0.02em;
    ">Claim your FREE account</a>
            <div style="
    font-size: 14px;
    position: relative;
    top: 180px;
    left: 19px;
    letter-spacing: 0.02em;
    font-weight: 500;
    line-height: 125%;
">have a Syncfusion<sup>\xAE</sup> account? <a href="https://www.syncfusion.com/account/login?ReturnUrl=/account/login" style="text-decoration: none;
color: #0D6EFD;
font-weight: 500;">Sign In</a></div>
        </div>
    </div>`;if(typeof document<"u"&&!d(document)){var t=xe("div",{innerHTML:o});document.body.appendChild(t)}},PS=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(t,e)};return function(t,e){o(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),la=function(o,t,e,i){var r=arguments.length,n=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,e,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,e,n):s(t,e))||n);return r>3&&n&&Object.defineProperty(t,e,n),n},pc=0,sc,wg=0,oc=0,Dg=!0,xg=!1,ac=!1;var dt=function(o){PS(t,o);function t(e,i){var r=o.call(this,e,i)||this;return r.randomId=YI(),r.isStringTemplate=!1,r.needsID=!1,r.isReactHybrid=!1,r.isAngular=!1,r.isReact=!1,r.isVue=!1,d(r.enableRtl)&&r.setProperties({enableRtl:ES},!0),d(r.locale)&&r.setProperties({locale:mc},!0),r.moduleLoader=new fS(r),r.localObserver=new Rn(r),cc.on("notifyExternalChange",r.detectFunction,r,r.randomId),typeof window<"u"&&typeof document<"u"&&!jS()&&OS.indexOf(r.getModuleName())!==-1&&(oc=oc+1,oc>5&&(Dg=!1)),de(i)||r.appendTo(),r}return t.prototype.requiredModules=function(){return[]},t.prototype.destroy=function(){this.isDestroyed||(this.enablePersistence&&(this.setPersistData(),this.detachUnloadEvent()),this.localObserver.destroy(),!this.refreshing&&(ee([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),o.prototype.destroy.call(this),this.moduleLoader.clean(),cc.off("notifyExternalChange",this.detectFunction,this.randomId)))},t.prototype.refresh=function(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new Rn(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1},t.prototype.accessMount=function(){this.mount&&!this.isReactHybrid&&this.mount()},t.prototype.getRootElement=function(){return this.isReactHybrid?this.actualElement:this.element},t.prototype.getLocalData=function(){var e=this.getModuleName()+this.element.id;return ac?window.localStorage.getItem(e+this.ej2StatePersistenceVersion):window.localStorage.getItem(e)},t.prototype.attachUnloadEvent=function(){this.handleUnload=this.handleUnload.bind(this),window.addEventListener("pagehide",this.handleUnload)},t.prototype.handleUnload=function(){this.setPersistData()},t.prototype.detachUnloadEvent=function(){window.removeEventListener("pagehide",this.handleUnload)},t.prototype.appendTo=function(e){if(!d(e)&&typeof e=="string"?this.element=ae(e,document):d(e)||(this.element=e),!d(this.element)){var i="e-"+this.getModuleName().toLowerCase();Z([this.element],["e-control",i]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),this.attachUnloadEvent());var r=Y("ej2_instances",this.element);(!r||r.indexOf(this)===-1)&&o.prototype.addInstance.call(this),this.preRender(),this.injectModules();var n={schedule:"all",diagram:"all",PdfViewer:"all",grid:["logger"],richtexteditor:["link","table","image","audio","video","formatPainter","emojiPicker","pasteCleanup","htmlEditor","toolbar","importExport"],treegrid:["filter"],gantt:["tooltip"],chart:["Export","Zoom"],accumulationchart:["Export"],"query-builder":"all"},s=this.getModuleName();if(this.requiredModules&&(!n[""+s]||n[""+s]!=="all"))for(var a=this.requiredModules(),l=0,h=this.moduleLoader.getNonInjectedModules(a);l<h.length;l++){var c=h[l],u=c.name?c.name:c.member;if(!(n[""+s]&&n[""+s].indexOf(c.member)!==-1)){var p=s.charAt(0).toUpperCase()+s.slice(1);console.warn('[WARNING] :: Module "'+u+'" is not available in '+p+" component! You either misspelled the module name or forgot to load it.")}}!Dg&&!xg&&(LS(),xg=!0),this.render(),this.mount?this.accessMount():this.trigger("created")}},t.prototype.renderComplete=function(e){if(he()){var i="sfBlazor";window[""+i].renderComplete(this.element,e)}this.isRendered=!0},t.prototype.dataBind=function(){this.injectModules(),o.prototype.dataBind.call(this)},t.prototype.on=function(e,i,r){if(typeof e=="string")this.localObserver.on(e,i,r);else for(var n=0,s=e;n<s.length;n++){var a=s[n];this.localObserver.on(a.event,a.handler,a.context)}},t.prototype.off=function(e,i){if(typeof e=="string")this.localObserver.off(e,i);else for(var r=0,n=e;r<n.length;r++){var s=n[r];this.localObserver.off(s.event,s.handler)}},t.prototype.notify=function(e,i){this.isDestroyed!==!0&&this.localObserver.notify(e,i)},t.prototype.getInjectedModules=function(){return this.injectedModules},t.Inject=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(var r=0;r<e.length;r++)this.prototype.injectedModules.indexOf(e[parseInt(r.toString(),10)])===-1&&this.prototype.injectedModules.push(e[parseInt(r.toString(),10)])},t.prototype.createElement=function(e,i,r){return xe(e,i)},t.prototype.triggerStateChange=function(e,i){this.isReactHybrid&&(this.setState(),this.currentContext={calls:e,args:i})},t.prototype.injectModules=function(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)},t.prototype.detectFunction=function(e){var i=Object.keys(e);i.length&&(this[i[0]]=e[i[0]])},t.prototype.mergePersistData=function(){var e;ac?e=window.localStorage.getItem(this.getModuleName()+this.element.id+this.ej2StatePersistenceVersion):e=window.localStorage.getItem(this.getModuleName()+this.element.id),d(e)||e===""||this.setProperties(JSON.parse(e),!0)},t.prototype.setPersistData=function(){this.isDestroyed||(ac?window.localStorage.setItem(this.getModuleName()+this.element.id+this.ej2StatePersistenceVersion,this.getPersistData()):window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData()))},t.prototype.renderReactTemplates=function(e){d(e)||e()},t.prototype.clearTemplate=function(e,i){},t.prototype.getUniqueID=function(e){return this.isHistoryChanged()&&(pc=0),sc=this.pageID(location.href),wg=history.length,e+"_"+sc+"_"+pc++},t.prototype.pageID=function(e){var i=0;if(e.length===0)return i;for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);i=(i<<5)-i+n,i=i&i}return Math.abs(i)},t.prototype.isHistoryChanged=function(){return sc!==this.pageID(location.href)||wg!==history.length},t.prototype.addOnPersist=function(e){for(var i=this,r={},n=0,s=e;n<s.length;n++){var a=s[n],l=Y(a,this);de(l)||ve(a,this.getActualProperties(l),r)}return JSON.stringify(r,function(h,c){return i.getActualProperties(c)})},t.prototype.getActualProperties=function(e){return e instanceof Ue?Y("properties",e):e},t.prototype.ignoreOnPersist=function(e){return JSON.stringify(this.iterateJsonProperties(this.properties,e))},t.prototype.iterateJsonProperties=function(e,i){for(var r={},n=function(c){if(i.indexOf(c)===-1){var u=e[""+c];if(typeof u=="object"&&!(u instanceof Array)){var p=i.filter(function(f){var g=RegExp;return new g(c+".").test(f)}).map(function(f){return f.replace(c+".","")});r[""+c]=s.iterateJsonProperties(s.getActualProperties(u),p)}else r[""+c]=u}},s=this,a=0,l=Object.keys(e);a<l.length;a++){var h=l[a];n(h)}return r},la([w(!1)],t.prototype,"enablePersistence",void 0),la([w()],t.prototype,"enableRtl",void 0),la([w()],t.prototype,"locale",void 0),t=la([Qe],t),t}(br);(function(){typeof window<"u"&&window.addEventListener("popstate",function(){pc=0})})();var Gg=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(t,e)};return function(t,e){o(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),_e=function(o,t,e,i){var r=arguments.length,n=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,e,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,e,n):s(t,e))||n);return r>3&&n&&Object.defineProperty(t,e,n),n},kS={left:0,top:0,bottom:0,right:0},lc={isDragged:!1},zS=function(o){Gg(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return _e([w(0)],t.prototype,"left",void 0),_e([w(0)],t.prototype,"top",void 0),t}(Ue),Ps=function(o){Gg(t,o);function t(i,r){var n=o.call(this,r,i)||this;return n.dragLimit=e.getDefaultPosition(),n.borderWidth=e.getDefaultPosition(),n.padding=e.getDefaultPosition(),n.diffX=0,n.prevLeft=0,n.prevTop=0,n.dragProcessStarted=!1,n.eleTop=0,n.tapHoldTimer=0,n.externalInitialize=!1,n.diffY=0,n.parentScrollX=0,n.parentScrollY=0,n.droppables={},n.bind(),n}e=t,t.prototype.bind=function(){this.toggleEvents(),D.isIE&&Z([this.element],"e-block-touch"),this.droppables[this.scope]={}},t.getDefaultPosition=function(){return m({},kS)},t.prototype.toggleEvents=function(i){var r;de(this.handle)||(r=ae(this.handle,this.element));var n=this.enableTapHold&&D.isDevice&&D.isTouch?this.mobileInitialize:this.initialize;i?I.remove(r||this.element,D.isSafari()?"touchstart":D.touchStartEvent,n):I.add(r||this.element,D.isSafari()?"touchstart":D.touchStartEvent,n,this)},t.prototype.mobileInitialize=function(i){var r=this,n=i.currentTarget;this.tapHoldTimer=setTimeout(function(){r.externalInitialize=!0,r.removeTapholdTimer(),r.initialize(i,n)},this.tapHoldThreshold),I.add(document,D.isSafari()?"touchmove":D.touchMoveEvent,this.removeTapholdTimer,this),I.add(document,D.isSafari()?"touchend":D.touchEndEvent,this.removeTapholdTimer,this)},t.prototype.removeTapholdTimer=function(){clearTimeout(this.tapHoldTimer),I.remove(document,D.isSafari()?"touchmove":D.touchMoveEvent,this.removeTapholdTimer),I.remove(document,D.isSafari()?"touchend":D.touchEndEvent,this.removeTapholdTimer)},t.prototype.getScrollableParent=function(i,r){var n={vertical:"scrollHeight",horizontal:"scrollWidth"},s={vertical:"clientHeight",horizontal:"clientWidth"};return d(i)?null:i[n[""+r]]>i[s[""+r]]?(r==="vertical"?i.scrollTop>0:i.scrollLeft>0)?(r==="vertical"?(this.parentScrollY=this.parentScrollY+(this.parentScrollY===0?i.scrollTop:i.scrollTop-this.parentScrollY),this.tempScrollHeight=i.scrollHeight):(this.parentScrollX=this.parentScrollX+(this.parentScrollX===0?i.scrollLeft:i.scrollLeft-this.parentScrollX),this.tempScrollWidth=i.scrollWidth),d(i)?i:this.getScrollableParent(i.parentNode,r)):this.getScrollableParent(i.parentNode,r):this.getScrollableParent(i.parentNode,r)},t.prototype.getScrollableValues=function(){this.parentScrollX=0,this.parentScrollY=0;var i=this.element.classList.contains("e-dialog")&&this.element.classList.contains("e-dlg-modal"),r=this.getScrollableParent(this.element.parentNode,"vertical"),n=this.getScrollableParent(this.element.parentNode,"horizontal")},t.prototype.initialize=function(i,r){if(this.currentStateTarget=i.target,!this.isDragStarted()){if(this.isDragStarted(!0),this.externalInitialize=!1,this.target=i.currentTarget||r,this.dragProcessStarted=!1,this.abort){var n=this.abort;typeof n=="string"&&(n=[n]);for(var s=0;s<n.length;s++)if(!d(ge(i.target,n[parseInt(s.toString(),10)]))){this.isDragStarted()&&this.isDragStarted(!0);return}}this.preventDefault&&!de(i.changedTouches)&&i.type!=="touchstart"&&i.preventDefault(),this.element.setAttribute("aria-grabbed","true");var a=this.getCoordinates(i);if(this.initialPosition={x:a.pageX,y:a.pageY},!this.clone){var l=this.element.getBoundingClientRect();this.getScrollableValues(),i.clientX===i.pageX&&(this.parentScrollX=0),i.clientY===i.pageY&&(this.parentScrollY=0),this.relativeXPosition=a.pageX-(l.left+this.parentScrollX),this.relativeYPosition=a.pageY-(l.top+this.parentScrollY)}this.externalInitialize?this.intDragStart(i):(I.add(document,D.isSafari()?"touchmove":D.touchMoveEvent,this.intDragStart,this),I.add(document,D.isSafari()?"touchend":D.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),i.type!=="touchstart"&&this.isPreventSelect&&document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,I.trigger(document.documentElement,D.isSafari()?"touchstart":D.touchStartEvent,i)}},t.prototype.intDragStart=function(i){this.removeTapholdTimer();var r=!de(i.changedTouches);if(!(r&&i.changedTouches.length!==1)){var n=this.getCoordinates(i),s,a=getComputedStyle(this.element);this.margin={left:parseInt(a.marginLeft,10),top:parseInt(a.marginTop,10),right:parseInt(a.marginRight,10),bottom:parseInt(a.marginBottom,10)};var l=this.element;if(this.clone&&this.dragTarget){var h=ge(i.target,this.dragTarget);d(h)||(l=h)}this.isReplaceDragEle&&(l=this.currentStateCheck(i.target,l)),this.offset=this.calculateParentPosition(l),this.position=this.getMousePosition(i,this.isDragScroll);var c=this.initialPosition.x-n.pageX,u=this.initialPosition.y-n.pageY,p=Math.sqrt(c*c+u*u);if(p>=this.distance||this.externalInitialize){var f=this.getHelperElement(i);if(!f||d(f))return;r&&i.preventDefault();var g=this.helperElement=f;if(this.parentClientRect=this.calculateParentPosition(g.offsetParent),this.dragStart){var v=this.getProperTargetElement(i),y={event:i,element:l,target:v,bindEvents:he()?this.bindDragEvents.bind(this):null,dragElement:g};this.trigger("dragStart",y)}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),s={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top),this.getScrollableValues();var C=getComputedStyle(l),b=parseFloat(C.marginTop);this.clone&&b!==0&&(s.top+=b),this.eleTop=isNaN(parseFloat(C.top))?0:parseFloat(C.top)-this.offset.top,this.enableScrollHandler&&!this.clone&&(s.top-=this.parentScrollY,s.left-=this.parentScrollX);var M=this.getProcessedPositionValue({top:s.top-this.diffY+"px",left:s.left-this.diffX+"px"});this.dragArea&&typeof this.dragArea!="string"&&this.dragArea.classList.contains("e-kanban-content")&&this.dragArea.style.position==="relative"&&(s.top+=this.dragArea.scrollTop),this.dragElePosition={top:s.top,left:s.left},Ce(g,this.getDragPosition({position:"absolute",left:M.left,top:M.top})),I.remove(document,D.isSafari()?"touchmove":D.touchMoveEvent,this.intDragStart),I.remove(document,D.isSafari()?"touchend":D.touchEndEvent,this.intDestroy),he()||this.bindDragEvents(g)}}},t.prototype.bindDragEvents=function(i){jt(i)?(I.add(document,D.isSafari()?"touchmove":D.touchMoveEvent,this.intDrag,this),I.add(document,D.isSafari()?"touchend":D.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,i)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))},t.prototype.elementInViewport=function(i){for(this.top=i.offsetTop,this.left=i.offsetLeft,this.width=i.offsetWidth,this.height=i.offsetHeight;i.offsetParent;)i=i.offsetParent,this.top+=i.offsetTop,this.left+=i.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth},t.prototype.getProcessedPositionValue=function(i){return this.queryPositionInfo?this.queryPositionInfo(i):i},t.prototype.calculateParentPosition=function(i){if(d(i))return{left:0,top:0};var r=i.getBoundingClientRect(),n=getComputedStyle(i);return{left:r.left+window.pageXOffset-parseInt(n.marginLeft,10),top:r.top+window.pageYOffset-parseInt(n.marginTop,10)}},t.prototype.intDrag=function(i){if(!(!de(i.changedTouches)&&i.changedTouches.length!==1)){this.clone&&i.changedTouches&&D.isDevice&&D.isTouch&&i.preventDefault();var r,n;this.position=this.getMousePosition(i,this.isDragScroll);var s=this.getDocumentWidthHeight("Height");s<this.position.top&&(this.position.top=s);var a=this.getDocumentWidthHeight("Width");if(a<this.position.left&&(this.position.left=a),this.drag){var l=this.getProperTargetElement(i);this.trigger("drag",{event:i,element:this.element,target:l})}var h=this.checkTargetElement(i);if(h.target&&h.instance){var c=!0;this.hoverObject&&(this.hoverObject.instance!==h.instance?this.triggerOutFunction(i,h):c=!1),c&&(h.instance.dragData[this.scope]=this.droppables[this.scope],h.instance.intOver(i,h.target),this.hoverObject=h)}else this.hoverObject&&this.triggerOutFunction(i,h);var u=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);var p=this.parentClientRect.left,f=this.parentClientRect.top,g=this.getCoordinates(i),v=g.pageX,y=g.pageY,C=this.position.left-this.diffX,b=this.position.top-this.diffY,M=getComputedStyle(u);if(this.dragArea){if(this.enableAutoScroll&&this.setDragArea(),this.pageX!==v||this.skipDistanceCheck){var S=u.offsetWidth+(parseFloat(M.marginLeft)+parseFloat(M.marginRight));this.dragLimit.left>C&&C>0?r=this.dragLimit.left:this.dragLimit.right+window.pageXOffset<C+S&&C>0?r=C-(C-this.dragLimit.right)+window.pageXOffset-S:r=C<0?this.dragLimit.left:C}if(this.pageY!==y||this.skipDistanceCheck){var N=u.offsetHeight+(parseFloat(M.marginTop)+parseFloat(M.marginBottom));this.dragLimit.top>b&&b>0?n=this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<b+N&&b>0?n=b-(b-this.dragLimit.bottom)+window.pageYOffset-N:n=b<0?this.dragLimit.top:b}}else r=C,n=b;var x=f+this.borderWidth.top,A=p+this.borderWidth.left;this.dragProcessStarted&&(d(n)&&(n=this.prevTop),d(r)&&(r=this.prevLeft));var U,z;if(this.helperElement.classList.contains("e-treeview"))this.dragArea?(this.dragLimit.top=this.clone?this.dragLimit.top:0,U=n-x<0?this.dragLimit.top:n-this.borderWidth.top,z=r-A<0?this.dragLimit.left:r-this.borderWidth.left):(U=n-this.borderWidth.top,z=r-this.borderWidth.left);else if(this.dragArea){var J=this.helperElement.classList.contains("e-dialog");this.dragLimit.top=this.clone?this.dragLimit.top:0,U=n-x<0?this.dragLimit.top:n-x,z=r-A<0?J?r-(A-this.borderWidth.left):this.dragElePosition.left:r-A}else U=n-x,z=r-A;var R=parseFloat(getComputedStyle(this.element).marginTop);if(R>0&&(this.clone&&(U+=R,b<0&&(R+b>=0?U=R+b:U-=R),this.dragArea&&(U=this.dragLimit.bottom<U?this.dragLimit.bottom:U)),n-x<0))if(b+R+(u.offsetHeight-x)>=0){var _=this.dragLimit.top+b-x;_+R+x<0?U-=R+x:U=_}else U-=R+x;if(this.dragArea&&this.helperElement.classList.contains("e-treeview")){var N=u.offsetHeight+(parseFloat(M.marginTop)+parseFloat(M.marginBottom));U=U+N>this.dragLimit.bottom?this.dragLimit.bottom-N:U}this.enableScrollHandler&&!this.clone&&(U-=this.parentScrollY,z-=this.parentScrollX),this.dragArea&&typeof this.dragArea!="string"&&this.dragArea.classList.contains("e-kanban-content")&&this.dragArea.style.position==="relative"&&(U+=this.dragArea.scrollTop);var B=this.getProcessedPositionValue({top:U+"px",left:z+"px"});this.isPreventScroll&&(B=this.getProcessedPositionValue({top:this.position.top-this.parentClientRect.top-2+"px",left:this.position.left-this.parentClientRect.left-2+"px"})),Ce(u,this.getDragPosition(B)),!this.elementInViewport(u)&&this.enableAutoScroll&&!this.helperElement.classList.contains("e-treeview")&&this.helperElement.scrollIntoView();var E=document.querySelectorAll(":hover");if(this.enableAutoScroll&&this.helperElement.classList.contains("e-treeview")){E.length===0&&(E=this.getPathElements(i));var L=this.getScrollParent(E,!1);this.elementInViewport(this.helperElement)?this.getScrollPosition(L,U):this.elementInViewport(this.helperElement)||(E=[].slice.call(document.querySelectorAll(":hover")),E.length===0&&(E=this.getPathElements(i)),L=this.getScrollParent(E,!0),this.getScrollPosition(L,U))}this.dragProcessStarted=!0,this.prevLeft=r,this.prevTop=n,this.position.left=r,this.position.top=n,this.pageX=v,this.pageY=y}},t.prototype.getScrollParent=function(i,r){for(var n=r?i.reverse():i,s,a=n.length-1;a>=0;a--)if(s=window.getComputedStyle(n[parseInt(a.toString(),10)])["overflow-y"],(s==="auto"||s==="scroll")&&n[parseInt(a.toString(),10)].scrollHeight>n[parseInt(a.toString(),10)].clientHeight)return n[parseInt(a.toString(),10)];if(s=window.getComputedStyle(document.scrollingElement)["overflow-y"],s==="visible")return document.scrollingElement.style.overflow="auto",document.scrollingElement},t.prototype.getScrollPosition=function(i,r){if(i&&i===document.scrollingElement)i.clientHeight+document.scrollingElement.scrollTop-this.helperElement.clientHeight<r&&i.getBoundingClientRect().height+this.parentClientRect.top>r?i.scrollTop+=this.helperElement.clientHeight:i.scrollTop>r-this.helperElement.clientHeight&&(i.scrollTop-=this.helperElement.clientHeight);else if(i&&i!==document.scrollingElement){var n=document.scrollingElement.scrollTop,s=this.helperElement.clientHeight;i.clientHeight+i.getBoundingClientRect().top-s+n<r?i.scrollTop+=this.helperElement.clientHeight:i.getBoundingClientRect().top>r-s-n&&(i.scrollTop-=this.helperElement.clientHeight)}},t.prototype.getPathElements=function(i){var r=i.clientX>0?i.clientX:0,n=i.clientY>0?i.clientY:0;return document.elementsFromPoint(r,n)},t.prototype.triggerOutFunction=function(i,r){this.hoverObject.instance.intOut(i,r.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null},t.prototype.getDragPosition=function(i){var r=m({},i);return this.axis&&(this.axis==="x"?delete r.top:this.axis==="y"&&delete r.left),r},t.prototype.getDocumentWidthHeight=function(i){var r=document.body,n=document.documentElement,s=Math.max(r["scroll"+i],n["scroll"+i],r["offset"+i],n["offset"+i],n["client"+i]);return s},t.prototype.intDragStop=function(i){if(this.dragProcessStarted=!1,!(!de(i.changedTouches)&&i.changedTouches.length!==1)){var r=["touchend","pointerup","mouseup"];if(r.indexOf(i.type)!==-1){if(this.dragStop){var n=this.getProperTargetElement(i);this.trigger("dragStop",{event:i,element:this.element,target:n,helper:this.helperElement})}this.intDestroy(i)}else this.element.setAttribute("aria-grabbed","false");var s=this.checkTargetElement(i);s.target&&s.instance&&(s.instance.dragStopCalled=!0,s.instance.dragData[this.scope]=this.droppables[this.scope],s.instance.intDrop(i,s.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}},t.prototype.intDestroy=function(i){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),I.remove(document,D.isSafari()?"touchmove":D.touchMoveEvent,this.intDragStart),I.remove(document,D.isSafari()?"touchend":D.touchEndEvent,this.intDragStop),I.remove(document,D.isSafari()?"touchend":D.touchEndEvent,this.intDestroy),I.remove(document,D.isSafari()?"touchmove":D.touchMoveEvent,this.intDrag),this.isDragStarted()&&this.isDragStarted(!0)},t.prototype.onPropertyChanged=function(i,r){},t.prototype.getModuleName=function(){return"draggable"},t.prototype.isDragStarted=function(i){return i&&(lc.isDragged=!lc.isDragged),lc.isDragged},t.prototype.setDragArea=function(){var i,r,n=0,s=0,a,l=typeof this.dragArea;if(l==="string"?a=ae(this.dragArea):a=this.dragArea,a){var h=a.getBoundingClientRect();i=a.scrollWidth?a.scrollWidth:h.right-h.left,r=a.scrollHeight?this.dragArea&&!d(this.helperElement)&&this.helperElement.classList.contains("e-treeview")?a.clientHeight:a.scrollHeight:h.bottom-h.top;for(var c=["Top","Left","Bottom","Right"],u=getComputedStyle(a),p=0;p<c.length;p++){var f=c[parseInt(p.toString(),10)],g=u["border"+f+"Width"],v=u["padding"+f],y=f.toLowerCase();this.borderWidth[""+y]=isNaN(parseFloat(g))?0:parseFloat(g),this.padding[""+y]=isNaN(parseFloat(v))?0:parseFloat(v)}this.dragArea&&!d(this.helperElement)&&this.helperElement.classList.contains("e-treeview")?n=h.top+document.scrollingElement.scrollTop:n=h.top,s=h.left,this.dragLimit.left=s+this.borderWidth.left+this.padding.left,this.dragLimit.top=a.offsetTop+this.borderWidth.top+this.padding.top,this.dragLimit.right=s+i-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=n+r-(this.borderWidth.bottom+this.padding.bottom)}},t.prototype.getProperTargetElement=function(i){var r=this.getCoordinates(i),n,s=this.helperElement.style.pointerEvents||"",a=i.type.indexOf("pointer")!==-1&&D.info.name==="safari"&&parseInt(D.info.version,10)>12;return gc(i.target,this.helperElement)||i.type.indexOf("touch")!==-1||a?(this.helperElement.style.pointerEvents="none",n=document.elementFromPoint(r.clientX,r.clientY),this.helperElement.style.pointerEvents=s):n=i.target,n},t.prototype.currentStateCheck=function(i,r){var n;return!d(this.currentStateTarget)&&this.currentStateTarget!==i?n=this.currentStateTarget:n=d(r)?i:r,n},t.prototype.getMousePosition=function(i,r){var n=i.srcElement!==void 0?i.srcElement:i.target,s=this.getCoordinates(i),a,l,h=d(n.offsetParent);if(r?(a=this.clone?s.pageX:s.pageX+(h?0:n.offsetParent.scrollLeft)-this.relativeXPosition,l=this.clone?s.pageY:s.pageY+(h?0:n.offsetParent.scrollTop)-this.relativeYPosition):(a=this.clone?s.pageX:s.pageX+window.pageXOffset-this.relativeXPosition,l=this.clone?s.pageY:s.pageY+window.pageYOffset-this.relativeYPosition),document.scrollingElement&&!r&&!this.clone){var c=document.scrollingElement,u=c.scrollHeight>0&&c.scrollHeight>c.clientHeight&&c.scrollTop>0,p=c.scrollWidth>0&&c.scrollWidth>c.clientWidth&&c.scrollLeft>0;a=p?a-c.scrollLeft:a,l=u?l-c.scrollTop:l}return{left:a-(this.margin.left+this.cursorAt.left),top:l-(this.margin.top+this.cursorAt.top)}},t.prototype.getCoordinates=function(i){return i.type.indexOf("touch")>-1?i.changedTouches[0]:i},t.prototype.getHelperElement=function(i){var r;return this.clone?this.helper?r=this.helper({sender:i,element:this.target,currentTargetElement:this.currentStateTarget}):(r=xe("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(r)):r=this.element,r},t.prototype.setGlobalDroppables=function(i,r,n){this.droppables[this.scope]=i?null:{draggable:r,helper:n,draggedElement:this.element}},t.prototype.checkTargetElement=function(i){var r=this.getProperTargetElement(i),n=this.getDropInstance(r);if(!n&&r&&!d(r.parentNode)){var s=ge(r.parentNode,".e-droppable")||r.parentElement;s&&(n=this.getDropInstance(s))}return{target:r,instance:n}},t.prototype.getDropInstance=function(i){var r="getModuleName",n,s=i&&i.ej2_instances;if(s)for(var a=0,l=s;a<l.length;a++){var h=l[a];if(h[""+r]()==="droppable"){n=h;break}}return n},t.prototype.destroy=function(){this.toggleEvents(!0),o.prototype.destroy.call(this)};var e;return _e([it({},zS)],t.prototype,"cursorAt",void 0),_e([w(!0)],t.prototype,"clone",void 0),_e([w()],t.prototype,"dragArea",void 0),_e([w()],t.prototype,"isDragScroll",void 0),_e([w()],t.prototype,"isReplaceDragEle",void 0),_e([w(!0)],t.prototype,"isPreventSelect",void 0),_e([w(!1)],t.prototype,"isPreventScroll",void 0),_e([Q()],t.prototype,"drag",void 0),_e([Q()],t.prototype,"dragStart",void 0),_e([Q()],t.prototype,"dragStop",void 0),_e([w(1)],t.prototype,"distance",void 0),_e([w()],t.prototype,"handle",void 0),_e([w()],t.prototype,"abort",void 0),_e([w()],t.prototype,"helper",void 0),_e([w("default")],t.prototype,"scope",void 0),_e([w("")],t.prototype,"dragTarget",void 0),_e([w()],t.prototype,"axis",void 0),_e([w()],t.prototype,"queryPositionInfo",void 0),_e([w(!1)],t.prototype,"enableTailMode",void 0),_e([w(!1)],t.prototype,"skipDistanceCheck",void 0),_e([w(!0)],t.prototype,"preventDefault",void 0),_e([w(!1)],t.prototype,"enableAutoScroll",void 0),_e([w(!1)],t.prototype,"enableTapHold",void 0),_e([w(750)],t.prototype,"tapHoldThreshold",void 0),_e([w(!1)],t.prototype,"enableScrollHandler",void 0),t=e=_e([Qe],t),t}(br);var RS=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(t,e)};return function(t,e){o(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),ha=function(o,t,e,i){var r=arguments.length,n=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,e,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,e,n):s(t,e))||n);return r>3&&n&&Object.defineProperty(t,e,n),n},FS={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},Mr=function(o){RS(t,o);function t(i,r){var n=o.call(this,r,i)||this;return n.keyPressHandler=function(s){for(var a=s.altKey,l=s.ctrlKey,h=s.shiftKey,c=s.which,u=Object.keys(n.keyConfigs),p=0,f=u;p<f.length;p++)for(var g=f[p],v=n.keyConfigs[""+g].split(","),y=0,C=v;y<C.length;y++){var b=C[y],M=e.getKeyConfigData(b.trim());a===M.altKey&&l===M.ctrlKey&&h===M.shiftKey&&c===M.keyCode&&(s.action=g,n.keyAction&&n.keyAction(s))}},n.bind(),n}e=t,t.prototype.destroy=function(){this.unwireEvents(),o.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(i,r){},t.prototype.bind=function(){this.wireEvents()},t.prototype.getModuleName=function(){return"keyboard"},t.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},t.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},t.getKeyConfigData=function(i){if(i in this.configCache)return this.configCache[""+i];var r=i.toLowerCase().split("+"),n={altKey:r.indexOf("alt")!==-1,ctrlKey:r.indexOf("ctrl")!==-1,shiftKey:r.indexOf("shift")!==-1,keyCode:null};return r[r.length-1].length>1&&Number(r[r.length-1])?n.keyCode=Number(r[r.length-1]):n.keyCode=e.getKeyCode(r[r.length-1]),e.configCache[""+i]=n,n},t.getKeyCode=function(i){return FS[""+i]||i.toUpperCase().charCodeAt(0)};var e;return t.configCache={},ha([w({})],t.prototype,"keyConfigs",void 0),ha([w("keyup")],t.prototype,"eventName",void 0),ha([Q()],t.prototype,"keyAction",void 0),t=e=ha([Qe],t),t}(br),yi=function(){function o(t,e,i){this.controlName=t,this.localeStrings=e,this.setLocale(i||mc)}return o.prototype.setLocale=function(t){var e=this.intGetControlConstant(o.locale,t);this.currentLocale=e||this.localeStrings},o.load=function(t){this.locale=m(this.locale,t,{},!0)},o.prototype.getConstant=function(t){return d(this.currentLocale[""+t])?this.localeStrings[""+t]||"":this.currentLocale[""+t]},o.prototype.intGetControlConstant=function(t,e){return t[""+e]?t[""+e][this.controlName]:null},o.locale={},o}(),Zg=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(t,e)};return function(t,e){o(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),er=function(o,t,e,i){var r=arguments.length,n=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,e,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,e,n):s(t,e))||n);return r>3&&n&&Object.defineProperty(t,e,n),n},BS=function(o){Zg(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return er([w(50)],t.prototype,"swipeThresholdDistance",void 0),t}(Ue),HS=/(Up|Down)/,Ir=function(o){Zg(t,o);function t(e,i){var r=o.call(this,i,e)||this;return r.touchAction=!0,r.tapCount=0,r.startEvent=function(n){if(r.touchAction===!0){var s=r.updateChangeTouches(n);n.changedTouches!==void 0&&(r.touchAction=!1),r.isTouchMoved=!1,r.movedDirection="",r.startPoint=r.lastMovedPoint={clientX:s.clientX,clientY:s.clientY},r.startEventData=s,r.hScrollLocked=r.vScrollLocked=!1,r.tStampStart=Date.now(),r.timeOutTapHold=setTimeout(function(){r.tapHoldEvent(n)},r.tapHoldThreshold),I.add(r.element,D.touchMoveEvent,r.moveEvent,r),I.add(r.element,D.touchEndEvent,r.endEvent,r),I.add(r.element,D.touchCancelEvent,r.cancelEvent,r)}},r.moveEvent=function(n){var s=r.updateChangeTouches(n);r.movedPoint=s,r.isTouchMoved=!(s.clientX===r.startPoint.clientX&&s.clientY===r.startPoint.clientY);var a={};if(r.isTouchMoved){clearTimeout(r.timeOutTapHold),r.calcScrollPoints(n);var l={startEvents:r.startEventData,originalEvent:n,startX:r.startPoint.clientX,startY:r.startPoint.clientY,distanceX:r.distanceX,distanceY:r.distanceY,scrollDirection:r.scrollDirection,velocity:r.getVelocity(s)};a=m(a,{},l),r.trigger("scroll",a),r.lastMovedPoint={clientX:s.clientX,clientY:s.clientY}}},r.cancelEvent=function(n){clearTimeout(r.timeOutTapHold),clearTimeout(r.timeOutTap),r.tapCount=0,r.swipeFn(n),I.remove(r.element,D.touchCancelEvent,r.cancelEvent)},r.endEvent=function(n){r.swipeFn(n),r.isTouchMoved||typeof r.tap=="function"&&(r.trigger("tap",{originalEvent:n,tapCount:++r.tapCount}),r.timeOutTap=setTimeout(function(){r.tapCount=0},r.tapThreshold)),r.modeclear()},r.swipeFn=function(n){clearTimeout(r.timeOutTapHold),clearTimeout(r.timeOutTap);var s=r.updateChangeTouches(n),a=s.clientX-r.startPoint.clientX,l=s.clientY-r.startPoint.clientY;a=Math.floor(a<0?-1*a:a),l=Math.floor(l<0?-1*l:a),r.isTouchMoved=a>1||l>1;var h=/Firefox/.test(D.userAgent);h&&s.clientX===0&&s.clientY===0&&n.type==="mouseup"&&(r.isTouchMoved=!1),r.endPoint=s,r.calcPoints(n);var c={originalEvent:n,startEvents:r.startEventData,startX:r.startPoint.clientX,startY:r.startPoint.clientY,distanceX:r.distanceX,distanceY:r.distanceY,swipeDirection:r.movedDirection,velocity:r.getVelocity(s)};if(r.isTouchMoved){var u=r.swipeSettings.swipeThresholdDistance,p=m(void 0,r.defaultArgs,c),f=!1,g=r.element,v=r.isScrollable(g),y=HS.test(r.movedDirection);(u<r.distanceX&&!y||u<r.distanceY&&y)&&(v?f=r.checkSwipe(g,y):f=!0),f&&r.trigger("swipe",p)}r.modeclear()},r.modeclear=function(){r.modeClear=setTimeout(function(){r.touchAction=!0},typeof r.tap!="function"?0:20),r.lastTapTime=new Date().getTime(),I.remove(r.element,D.touchMoveEvent,r.moveEvent),I.remove(r.element,D.touchEndEvent,r.endEvent),I.remove(r.element,D.touchCancelEvent,r.cancelEvent)},r.bind(),r}return t.prototype.onPropertyChanged=function(e,i){},t.prototype.bind=function(){this.wireEvents(),D.isIE&&this.element.classList.add("e-block-touch")},t.prototype.destroy=function(){this.unwireEvents(),o.prototype.destroy.call(this)},t.prototype.wireEvents=function(){I.add(this.element,D.touchStartEvent,this.startEvent,this)},t.prototype.unwireEvents=function(){I.remove(this.element,D.touchStartEvent,this.startEvent)},t.prototype.getModuleName=function(){return"touch"},t.prototype.isScrollable=function(e){var i=getComputedStyle(e),r=i.overflow+i.overflowX+i.overflowY;return!!/(auto|scroll)/.test(r)},t.prototype.tapHoldEvent=function(e){this.tapCount=0,this.touchAction=!0,I.remove(this.element,D.touchMoveEvent,this.moveEvent),I.remove(this.element,D.touchEndEvent,this.endEvent);var i={originalEvent:e};this.trigger("tapHold",i),I.remove(this.element,D.touchCancelEvent,this.cancelEvent)},t.prototype.calcPoints=function(e){var i=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(i.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(i.clientY)-Math.abs(this.startPoint.clientY)),this.distanceX>this.distanceY?this.movedDirection=i.clientX>this.startPoint.clientX?"Right":"Left":this.movedDirection=i.clientY<this.startPoint.clientY?"Up":"Down"},t.prototype.calcScrollPoints=function(e){var i=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(i.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(i.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||this.hScrollLocked===!0)&&this.vScrollLocked===!1?(this.scrollDirection=i.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=i.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)},t.prototype.getVelocity=function(e){var i=e.clientX,r=e.clientY,n=Date.now(),s=i-this.startPoint.clientX,a=r-this.startPoint.clientX,l=n-this.tStampStart;return Math.sqrt(s*s+a*a)/l},t.prototype.checkSwipe=function(e,i){var r=["scroll","offset"],n=i?["Height","Top"]:["Width","Left"];return e[r[0]+n[0]]<=e[r[1]+n[0]]?!0:e[r[0]+n[1]]===0||e[r[1]+n[0]]+e[r[0]+n[1]]>=e[r[0]+n[0]]},t.prototype.updateChangeTouches=function(e){var i=e.changedTouches&&e.changedTouches.length!==0?e.changedTouches[0]:e;return i},er([Q()],t.prototype,"tap",void 0),er([Q()],t.prototype,"tapHold",void 0),er([Q()],t.prototype,"swipe",void 0),er([Q()],t.prototype,"scroll",void 0),er([w(350)],t.prototype,"tapThreshold",void 0),er([w(750)],t.prototype,"tapHoldThreshold",void 0),er([it({},BS)],t.prototype,"swipeSettings",void 0),t=er([Qe],t),t}(br),US=new RegExp("\\n|\\r|\\s\\s+","g"),YS=new RegExp(/'|"/g),_S=new RegExp("if ?\\("),VS=new RegExp("else if ?\\("),Ag=new RegExp("else"),QS=new RegExp("for ?\\("),Eg=new RegExp("(/if|/for)"),WS=new RegExp("\\((.*)\\)",""),yc=new RegExp("^[0-9]+$","g"),XS=new RegExp(`[\\w"'.\\s+]+`,"g"),qS=new RegExp('"(.*?)"',"g"),GS=new RegExp(`[\\w"'@#$.\\s-+]+`,"g"),Og=new RegExp("\\${([^}]*)}","g"),ZS=/^\..*/gm,dc=/\\/gi,$S=/\\\\/gi,JS=new RegExp(`[\\w"'@#$.\\s+]+`,"g"),KS=/\window\./gm;function eT(o,t,e){if(typeof o=="function")return o;var i="data",r=tT(o,i,t,e),n=`var valueRegEx = (/value=\\'([A-Za-z0-9 _]*)((.)([\\w)(!-;?-\u25A0\\s]+)['])/g);
        var hrefRegex = (/(?:href)([\\s='"./]+)([\\w-./?=&\\\\#"]+)((.)([\\w)(!-;/?-\u25A0\\s]+)['])/g);
        if(str.match(valueRegEx)){
            var check = str.match(valueRegEx);
            var str1 = str;
            for (var i=0; i < check.length; i++) {
                var check1 = str.match(valueRegEx)[i].split('value=')[1];
                var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '"') : check1;
                change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'"') : change;
                str1 = str1.replace(check1, change);
            }
            str = str.replace(str, str1);
        }
        else if (str.match(/(?:href='')/) === null) {
            if(str.match(hrefRegex)) {
                var check = str.match(hrefRegex);
                var str1 = str;
                for (var i=0; i < check.length; i++) {
                    var check1 = str.match(hrefRegex)[i].split('href=')[1];
                    if (check1) {
                        var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '"') : check1;
                        change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'"') : change;
                        str1 = str1.replace(check1, change);
                    }
                }
                str = str.replace(str, str1);
            }
        }
        `,s='var str="'+r+'";'+n+" return str;",a=new Function(i,s);return a.bind(t)}function tT(o,t,e,i){var r=0,n=[],s=o.match(/class="([^"]+|)\s{2}/g),a="";if(s&&s.forEach(function(u){a=u.replace(/\s\s+/g," "),o=o.replace(u,a)}),Og.test(o)){for(var l=!1,h="",c=0;c<o.length;c++)o[c+""]==="$"&&o[c+1]==="{"?l=!0:o[c+""]==="}"&&(l=!1),h+=o[c+""]==='"'&&!l?'\\"':o[c+""];o=h}else o=o.replace(/\\?"/g,'\\"');return o.replace(US,"").replace(qS,"'$1'").replace(Og,function(u,p,f,g){var v=/@|#|\$/gm,y=p.match(WS);if(y){var C=y[1];if(VS.test(p))p='";} '+p.replace(y[1],C.replace(XS,function(z){return z=z.trim(),kn(z,!YS.test(z)&&n.indexOf(z)===-1,t,n,i)}))+`{ 
 str = str + "`;else if(_S.test(p))p='"; '+p.replace(y[1],C.replace(GS,function(z){return jg(z,t,n,i)}))+`{ 
 str = str + "`;else if(QS.test(p)){var b=y[1].split(" of ");p='"; '+p.replace(y[1],function(z){return n.push(b[0]),n.push(b[0]+"Index"),r=r+1,"var i"+r+"=0; i"+r+" < "+kn(b[1],!0,t,n,i)+".length; i"+r+"++"})+`{ 
 `+b[0]+"= "+kn(b[1],!0,t,n,i)+"[i"+r+`]; 
 var `+b[0]+"Index=i"+r+`; 
 str = str + "`}else{var M=p.split("("),S=e&&Object.prototype.hasOwnProperty.call(e,M[0])?"this.":"global";S=/\./.test(M[0])?"":S;var N=y[1].split(",");y[1].length!==0&&!/data/.test(N[0])&&!/window./.test(N[0])&&(y[1]=S==="global"?t+"."+y[1]:y[1]);var x=/@|\$|#/gm,A=/\]\./gm;if(KS.test(p)&&A.test(p)||x.test(p)){var U=/@|\$|#|\]\./gm;U.test(p)&&(p='"+ '+(S==="global"?"":S)+p.replace(y[1],C.replace(JS,function(z){return jg(z,t,n,i)}))+'+ "')}else p='" + '+(S==="global"?"":S)+p.replace(C,kn(y[1].replace(/,( |)data.|,/gi,","+t+".").replace(/,( |)data.window/gi,",window"),S!=="global",t,n,i))+'+"'}}else Ag.test(p)?p='"; '+p.replace(Ag,`} else { 
 str = str + "`):p.match(Eg)?p=p.replace(Eg,`"; 
 } 
 str = str + "`):v.test(p)?(p.match(dc)&&(p=Ng(p)),p='"+'+fc(p,n.indexOf(p)===-1,t,n)+'"]+"'):p.match(dc)?(p=Ng(p),p='"+'+fc(p,n.indexOf(p)===-1,t,n)+'"]+"'):p=p!==""?'"+'+kn(p.replace(/,/gi,"+"+t+"."),n.indexOf(p)===-1,t,n,i)+'+"':"${}";return p})}function kn(o,t,e,i,r){return t&&!yc.test(o)&&i.indexOf(o.split(".")[0])===-1&&!r&&o!=="true"&&o!=="false"?e+"."+o:o}function iT(o,t,e,i){var r=/^\..*/gm;return t&&!yc.test(o)&&i.indexOf(o.split(".")[0])===-1&&!r.test(o)?e+"."+o:o}function fc(o,t,e,i){return t&&!yc.test(o)&&i.indexOf(o.split(".")[0])===-1?e+'["'+o:o}function Ng(o){var t="\\\\";return o.match($S)?o:o.replace(dc,t)}function jg(o,t,e,i){o=o.trim();var r=/\window\./gm;if(r.test(o))return o;var n=/'|"/gm,s=/@|\$|#/gm;return s.test(o)&&(o=fc(o,e.indexOf(o)===-1,t,e)+'"]'),ZS.test(o)?iT(o,!n.test(o)&&e.indexOf(o)===-1,t,e):kn(o,!n.test(o)&&e.indexOf(o)===-1,t,e,i)}var rT=/^[\n\r.]+<tr|^<tr/,nT=/^[\n\r.]+<svg|^<path|^<g/,Pn={};function $g(){return"-"+Math.random().toString(36).substr(2,5)}function rt(o,t,e){var i=Cc.compile(o,t,e);return function(r,n,s,a,l,h,c,u){var p=i(r,n,s,c,u),f="BlazorTemplateId";if(he()&&!l){var g=$g(),v=a+g;if(Pn[""+a]||(Pn[""+a]=[]),d(h))r[""+f]=v,Pn[""+a].push(r);else for(var y=Object.keys(Pn[""+a][parseInt(h.toString(),10)]),C=0,b=y;C<b.length;C++){var M=b[C];M!==f&&r[""+M]&&(Pn[""+a][parseInt(h.toString(),10)][""+M]=r[""+M]),M===f&&(v=Pn[""+a][parseInt(h.toString(),10)][""+M])}return s==="rowTemplate"?[xe("tr",{id:v,className:"e-blazor-template"})]:[xe("div",{id:v,className:"e-blazor-template"})]}if(typeof p=="string")if(nT.test(p)){var S=xe("svg",{innerHTML:p});return S.childNodes}else{var S=xe(rT.test(p)?"table":"div",{innerHTML:p});return S.childNodes}else return p}}function Jg(o){Cc.compile=o.compile}function Kg(){return Cc.compile}function fa(o,t){var e;return o.prototype.CSPTemplate=!0,d(t)?e=o:(e=o.bind(t),e.prototype=Object.create(o.prototype)),e}var sT=function(){function o(){}return o.prototype.compile=function(t,e,i){return e===void 0&&(e={}),eT(t,e)},o}(),Cc={compile:new sT().compile},oT=["script","style","iframe[src]",'link[href*="javascript:"]','object[type="text/x-scriptlet"]','object[data^="data:text/html;base64"]','img[src^="data:text/html;base64"]','[src^="javascript:"]','[dynsrc^="javascript:"]','[lowsrc^="javascript:"]','[type^="application/x-shockwave-flash"]'],aT=[{attribute:"href",selector:'[href*="javascript:"]'},{attribute:"href",selector:"a[href]"},{attribute:"background",selector:'[background^="javascript:"]'},{attribute:"style",selector:'[style*="javascript:"]'},{attribute:"style",selector:'[style*="expression("]'},{attribute:"href",selector:'a[href^="data:text/html;base64"]'}],Lg=["onchange","onclick","onmouseover","onmouseout","onkeydown","onload","onerror","onblur","onfocus","onbeforeload","onbeforeunload","onkeyup","onsubmit","onafterprint","onbeforeonload","onbeforeprint","oncanplay","oncanplaythrough","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onformchange","onforminput","onhaschange","oninput","oninvalid","onkeypress","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseup","onmousewheel","onoffline","onoine","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreadystatechange","onredo","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onstorage","onsuspend","ontimeupdate","onundo","onunload","onvolumechange","onwaiting","onmouseenter","onmouseleave","onstart","onpropertychange","oncopy","ontoggle","onpointerout","onpointermove","onpointerleave","onpointerenter","onpointerrawupdate","onpointerover","onbeforecopy","onbeforecut","onbeforeinput"],nt=function(){function o(){}return o.beforeSanitize=function(){return{selectors:{tags:oT,attributes:aT}}},o.sanitize=function(t){if(d(t))return t;var e=this.beforeSanitize(),i=this.serializeValue(e,t);return i},o.serializeValue=function(t,e){this.removeAttrs=t.selectors.attributes,this.removeTags=t.selectors.tags,this.wrapElement=document.createElement("div"),this.wrapElement.innerHTML=e,this.removeXssTags(),this.removeJsEvents(),this.removeXssAttrs();var i=this.wrapElement.innerHTML;return this.removeElement(),this.wrapElement=null,i.replace(/&amp;/g,"&")},o.removeElement=function(){for(var t=this.wrapElement.children,e=0;e<t.length;e++)for(var i=t[parseInt(e.toString(),10)].attributes,r=0;r<i.length;r++)this.wrapElement.children[parseInt(e.toString(),10)].removeAttribute(i[parseInt(r.toString(),10)].localName)},o.removeXssTags=function(){var t=this.wrapElement.querySelectorAll(this.removeTags.join(","));if(t.length>0)t.forEach(function(e){K(e)});else return},o.removeJsEvents=function(){var t=this.wrapElement.querySelectorAll("["+Lg.join("],[")+"]");if(t.length>0)t.forEach(function(e){Lg.forEach(function(i){e.hasAttribute(i)&&e.removeAttribute(i)})});else return},o.removeXssAttrs=function(){var t=this;this.removeAttrs.forEach(function(e,i){var r=t.wrapElement.querySelectorAll(e.selector);r.length>0&&(e.selector==="a[href]"?r.forEach(function(n){n.getAttribute(e.attribute).replace(/\t|\s|&/,"").indexOf("javascript:alert")!==-1&&n.removeAttribute(e.attribute)}):r.forEach(function(n){n.removeAttribute(e.attribute)}))})},o}();function lT(o,t){t.forEach(function(e){Object.getOwnPropertyNames(e.prototype).forEach(function(i){(!Object.prototype.hasOwnProperty.call(o.prototype,i)||e.isFormBase&&i!=="constructor")&&(o.prototype["".concat(i)]=e.prototype["".concat(i)])})})}function ks(o){return function(t){lT(t,o)}}function ga(o,t,e){var i={};if(o&&o.length){for(var r=0,n=o;r<n.length;r++){var s=n[r];e===!0?(t.propCollection["".concat(s)]=new li(!1),t["".concat(s)]=t.propCollection["".concat(s)]):i["".concat(s)]=new li(!1)}e!==!0&&t.setProperties(i,!0)}}function va(o,t,e){var i,r=Object.keys(o.registeredTemplate);if(r.length)for(var n=t&&t.filter(function(N){return!/\./g.test(N)}),s=/tab|accordion|toolbar/.test((i=o.getModuleName)===null||i===void 0?void 0:i.call(o)),a=0,l=n&&n||r;a<l.length;a++){var h=l[a];if(e&&e.length)for(var c=0;c<e.length;c++)if(s)for(var u=0;u<o.registeredTemplate["".concat(h)].length;u++){var p=o.registeredTemplate["".concat(h)][parseInt(u.toString(),10)];p&&p===e["".concat(c)]&&(p.destroy(),o.registeredTemplate["".concat(h)].splice(u,1))}else for(var u=0;u<o.registeredTemplate.template.length;u++){var p=o.registeredTemplate.template[parseInt(u.toString(),10)].rootNodes[0];if(p===e["".concat(c)]){var f=o.registeredTemplate["".concat(h)];f[parseInt(u.toString(),10)].destroy()}}else if(o.registeredTemplate["".concat(h)])for(var g=0,v=o.registeredTemplate["".concat(h)];g<v.length;g++){var f=v[g];if(!f.destroyed){if(f._view){var y=f._view.renderer.parentNode(f.rootNodes[0]);if(!d(y))for(var u=0;u<f.rootNodes.length;u++)y.appendChild(f.rootNodes[parseInt(u.toString(),10)])}f.destroy()}}(!s||!e)&&delete o.registeredTemplate["".concat(h)]}for(var C=function(N){N.instance&&N.instance.clearTemplate(t&&t.filter(function(x){var A=RegExp;return!!new A(N.name).test(x)}))},b=0,M=o.tagObjects;b<M.length;b++){var S=M[b];C(S)}}function Un(o,t,e){for(var i=o.replace(/\[/g,".").replace(/\]/g,"").split("."),r=e||{},n=0;n<i.length;n++){var s=i[parseInt(n.toString(),10)];n+1===i.length?r["".concat(s)]=t===void 0?{}:t:r["".concat(s)]===void 0&&(r["".concat(s)]={}),r=r["".concat(s)]}return r}var hT=/Ref$/,ev=function(){function o(){this.hasChanges=!1,this.propCollection={},this.dataSource={},this.tags=[],this.tagObjects=[]}return o.prototype.ngOnInit=function(){this.registeredTemplate={};for(var t=0,e=this.tags;t<e.length;t++){var i=e[t],r=Y("child"+i.substring(0,1).toUpperCase()+i.substring(1),this);r&&this.tagObjects.push({instance:r,name:i})}for(var n=Object.keys(this),s=0;s<n.length;s++){var a=Y(n[parseInt(s.toString(),10)],this);typeof a=="object"&&a&&a.elementRef&&(Y(n[parseInt(s.toString(),10)].indexOf("Ref")!==-1?n[parseInt(s.toString(),10)]:n[parseInt(s.toString(),10)]+"Ref",this)||ve(n[parseInt(s.toString(),10)].indexOf("Ref")!==-1?n[parseInt(s.toString(),10)]:n[parseInt(s.toString(),10)]+"Ref",a,this),Y("viewContainerRef",this)&&!Y("_viewContainerRef",a.elementRef.nativeElement)&&!Y("propName",a.elementRef.nativeElement)&&(ve("_viewContainerRef",Y("viewContainerRef",this),a.elementRef.nativeElement),ve("propName",n[parseInt(s.toString(),10)].replace("Ref",""),a.elementRef.nativeElement)))}n=Object.keys(this),n=n.filter(function(v){return/Ref$/i.test(v)});for(var l=0,h=n;l<h.length;l++){var c=h[l],u=c.replace("Ref","");ve(u.replace("_","."),Y(u,this),this.propCollection)}var p=Object.keys(this);if(this.directivePropList){for(var f=0;f<this.directivePropList.length;f++){var g=this.directivePropList[parseInt(f.toString(),10)];p.indexOf(g)!==-1&&(Y(g,this)===!1||Y(g,this))&&ve(g,Y(g,this),this.propCollection)}this.hasChanges=!0}this.isInitChanges=!0},o.prototype.registerEvents=function(t){ga(t,this,!0)},o.prototype.ngOnChanges=function(t){for(var e=0,i=Object.keys(t);e<i.length;e++){var r=i[e],n=t["".concat(r)];this.propCollection["".concat(r)]=n.currentValue}this.isUpdated=!1,this.hasChanges=!0},o.prototype.clearTemplate=function(t){va(this,t)},o.prototype.getProperties=function(){for(var t=0,e=this.tagObjects;t<e.length;t++){var i=e[t];this.propCollection[i.name]=i.instance.getProperties()}return this.propCollection},o.prototype.isChanged=function(){var t=this.hasChanges;if(!d(this.propCollection[this.property])){for(var e=this.propCollection[this.property],i=Object.keys(e[0]),r=0;r<i.length;r++)if(!d(this.propCollection[i[parseInt(r.toString(),10)]])){var n=Y(i[parseInt(r.toString(),10)],this),s=this.propCollection[this.property][0][i[parseInt(r.toString(),10)]];!d(n)&&this.propCollection[i[parseInt(r.toString(),10)]]!==n&&s!==n&&(ve(i[parseInt(r.toString(),10)],n,this.propCollection[this.property][0]),ve(i[parseInt(r.toString(),10)],n,this.propCollection),this.hasChanges=!0,this.isUpdated=!1)}}for(var a=0,l=this.tagObjects;a<l.length;a++){var h=l[a];t=t||h.instance.hasChanges}return t||this.hasChanges},o.prototype.ngAfterContentChecked=function(){if(this.hasChanges=this.isChanged(),this.isInitChanges||this.hasChanges){var t=Object.keys(this);t=t.filter(function(s){return hT.test(s)});for(var e=0,i=t;e<i.length;e++){var r=i[e],n=r.replace("Ref","");ve(n.replace("_","."),Y(n,this),this.propCollection)}}},o.prototype.ngAfterViewChecked=function(){this.isUpdated&&(this.hasChanges=!1)},o.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},o.prototype.ngOnDestroy=function(){this.directivePropList=[]},o}();var tv=function(){function o(t){this.list=[],this.hasChanges=!1,this.propertyName=t}return o.prototype.ngOnInit=function(){this.isInitChanges=!0},o.prototype.ngAfterContentInit=function(){var t=this,e=0;this.list=this.children.map(function(i){return i.dirIndex=e++,i.property=t.propertyName,i}),this.hasChanges=!0},o.prototype.getProperties=function(){for(var t=[],e=0,i=this.list;e<i.length;e++){var r=i[e];t.push(r.getProperties())}return t},o.prototype.isChanged=function(){var t=this,e=!1,i=0,r=!1,n=this.children.map(function(c){return c});if(this.list.length===this.children.length)for(var s=0;s<this.list.length;s++)this.list[parseInt(s.toString(),10)].propCollection.dataSource&&(this.list[parseInt(s.toString(),10)].dataSource&&this.list[parseInt(s.toString(),10)].propCollection.dataSource!==this.list[parseInt(s.toString(),10)].dataSource&&(this.list[parseInt(s.toString(),10)].propCollection.dataSource=this.list[parseInt(s.toString(),10)].dataSource,this.list[parseInt(s.toString(),10)].hasChanges=!0),this.list[parseInt(s.toString(),10)].property!=="series"&&(r=JSON.stringify(this.list[parseInt(s.toString(),10)].propCollection.dataSource)!==JSON.stringify(n[parseInt(s.toString(),10)].propCollection.dataSource))),r=this.list[parseInt(s.toString(),10)].hasChanges!==n[parseInt(s.toString(),10)].hasChanges;this.hasNewChildren=this.list.length!==this.children.length||r?!0:null,this.hasNewChildren&&(this.list=this.children.map(function(c){return c.dirIndex=i++,c.property=t.propertyName,c}));for(var a=0,l=this.list;a<l.length;a++){var h=l[a];e=e||h.hasChanges}return!!this.list.length&&e},o.prototype.clearTemplate=function(t){for(var e=this,i=0,r=this.list;i<r.length;i++){var n=r[i];n.clearTemplate(t&&t.map(function(s){var a=RegExp;return new a(e.propertyName).test(s)?s.replace(e.propertyName+".",""):s}))}},o.prototype.ngAfterContentChecked=function(){this.hasChanges=this.isChanged();for(var t=0;t<this.list.length;t++)Y("childColumns",this.list[parseInt(t.toString(),10)])&&Y("property",this.list[parseInt(t.toString(),10)])==="columns"&&ve("columns",Y("childColumns",this.list[parseInt(t.toString(),10)]).getProperties(),this.list[parseInt(t.toString(),10)].propCollection),this.list[parseInt(t.toString(),10)].isUpdated=!0},o.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},o.prototype.ngOnDestroy=function(){this.list=[]},o}();var Sr=function(){function o(){this.isProtectedOnChange=!0,this.isFormInit=!0}return o.prototype.saveChanges=function(t,e,i){if(!this.isProtectedOnChange){this.oldProperties["".concat(t)]=i,this.changedProperties["".concat(t)]=e,this.finalUpdate();var r=setTimeout(this.dataBind.bind(this)),n=function(){clearTimeout(r)};this.finalUpdate=n}},o.prototype.ngOnInit=function(t){var e=t||this;e.registeredTemplate={},e.ngBoundedEvents={},e.isAngular=!0,e.isFormInit=!0,t&&(this.tags=t.tags),e.tags=this.tags||[],e.complexTemplate=this.complexTemplate||[],e.tagObjects=[],e.ngAttr=this.getAngularAttr(e.element),e.createElement=function(v,y){var C=e.srenderer?e.srenderer.createElement(v):xe(v);return typeof y>"u"||(C.innerHTML=y.innerHTML?y.innerHTML:"",y.className!==void 0&&(C.className=y.className),y.id!==void 0&&(C.id=y.id),y.styles!==void 0&&C.setAttribute("style",y.styles),e.ngAttr!==void 0&&C.setAttribute(e.ngAttr,""),y.attrs!==void 0&&ye(C,y.attrs)),C};for(var i=0,r=e.tags;i<r.length;i++){var n=r[i],s={instance:Y("child"+n.substring(0,1).toUpperCase()+n.substring(1),e),name:n};e.tagObjects.push(s)}for(var a=Object.keys(e),l=0;l<a.length;l++){var h=Y(a[parseInt(l.toString(),10)],e);typeof h=="object"&&h&&h.elementRef&&(typeof h=="object"&&h&&h.elementRef&&a[parseInt(l.toString(),10)].indexOf("_")!==-1&&a[parseInt(l.toString(),10)].indexOf("Ref")===-1&&ve(a[parseInt(l.toString(),10)]+"Ref",h,e),e.viewContainerRef&&!Y("_viewContainerRef",h.elementRef.nativeElement)&&!Y("propName",h.elementRef.nativeElement)&&(ve("_viewContainerRef",e.viewContainerRef,h.elementRef.nativeElement),ve("propName",a[parseInt(l.toString(),10)].replace("Ref",""),h.elementRef.nativeElement)))}a=Object.keys(e),a=a.filter(function(v){return/Ref$/i.test(v)&&/_/i.test(v)});for(var c=0,u=a;c<u.length;c++){var p=u[c],f=p.replace("Ref",""),g={};ve(f.replace("_","."),Y(f,e),g),e.setProperties(g,!0)}},o.prototype.getAngularAttr=function(t){for(var e=t.attributes,i=e.length,r,n=0;n<i;n++)/_ngcontent/g.test(e[parseInt(n.toString(),10)].name)&&(r=e[parseInt(n.toString(),10)].name);return r},o.prototype.ngAfterViewInit=function(t){var e=t||this,i=/ejs-tab|ejs-accordion/g;i.test(e.ngEle.nativeElement.outerHTML)&&(e.ngEle.nativeElement.style.visibility="hidden");var r=Object.keys(e);r=r.filter(function(u){return/Ref$/i.test(u)});for(var n=e.getModuleName()==="DocumentEditor",s=0,a=r;s<a.length;s++){var l=a[s],h=l.replace("Ref","");ve(h.replace("_","."),Y(h+"Ref",e),e)}var c=function(u){typeof window<"u"&&u.element&&(u.appendTo(u.element),u.ngEle.nativeElement.style.visibility="")};!n&&!e.getModuleName().includes("btn")?setTimeout(function(){c(e)}):c(e)},o.prototype.ngOnDestroy=function(t){var e=t||this;setTimeout(function(){if(typeof window<"u"&&e.element.classList.contains("e-control")){if(e.ngOnFocus!==void 0&&e.ngOnBlur!==void 0){var i=e.inputElement||e.element;i.removeEventListener("focus",e.ngOnFocusBound),i.removeEventListener("blur",e.ngOnBlurBound),e.ngOnFocusBound=null,e.ngOnBlurBound=null}e.destroy(),e.clearTemplate(null),setTimeout(function(){for(var r=0,n=Object.keys(e);r<n.length;r++){var s=n[r],a=e["".concat(s)];if(a&&/object/.test(typeof a)&&Object.keys(a).length!==0)if(/properties|changedProperties|childChangedProperties|oldProperties|moduleLoader/.test(s))for(var l=0,h=Object.keys(e["".concat(s)]);l<h.length;l++){var c=h[l],u=a["".concat(c)];u&&/object/.test(typeof u)&&Object.keys(u).length!==0&&(u.parent||u.parentObj)&&(e["".concat(s)]["".concat(c)]=null)}else(a.parent||a.parentObj)&&(e["".concat(s)]=null)}})}})},o.prototype.clearTemplate=function(t,e){va(this,t,e)},o.prototype.ngAfterContentChecked=function(t){for(var e=t||this,i=0,r=e.tagObjects;i<r.length;i++){var n=r[i];if(!de(n.instance)&&(n.instance.isInitChanges||n.instance.hasChanges||n.instance.hasNewChildren)){var s={};if(n.instance.isInitChanges){var a=void 0,l=Y("instance.list",n);l&&l.length&&(a=l[0].directivePropList);var h=!0;if(e.getModuleName&&e.getModuleName()==="gantt"&&(h=!1),a&&h&&a.indexOf(n.instance.propertyName)===-1)for(var c=Object.keys(n.instance.list[0].propCollection),u=0;u<n.instance.list.length;u++){n.instance.list["".concat(u)].propCollection[n.instance.propertyName]=[];for(var p={},f=0;f<c.length;f++){var g=c[parseInt(f.toString(),10)];p["".concat(g)]=n.instance.list["".concat(u)].propCollection["".concat(g)]}for(var v=function(B){var E=n.instance.list["".concat(u)].tags[parseInt(B.toString(),10)],L=Y("child"+E.substring(0,1).toUpperCase()+E.substring(1),n.instance.list["".concat(u)]);if(L){var P=n.instance.list["".concat(u)]["child"+E.substring(0,1).toUpperCase()+E.substring(1)],j=function(k){var F=[];if(k)for(var X=0;X<k.list.length;X++){var re=k.list[0].tags[0];if(re){var q=Y("child"+re.substring(0,1).toUpperCase()+re.substring(1),k.list[parseInt(X.toString(),10)]);q&&(k.list[parseInt(X.toString(),10)].tagObjects.push({instance:q,name:re}),F.push(q))}}if(F.length!==0)for(var ie=0;ie<F.length;ie++)j(F[parseInt(ie.toString(),10)])};j(P),n.instance.list["".concat(u)].tagObjects.push({instance:L,name:E})}},y=0;y<n.instance.list["".concat(u)].tags.length;y++)v(y);n.instance.list["".concat(u)].propCollection[n.instance.propertyName].push(p)}s[n.name]=n.instance.getProperties(),e.setProperties(s,n.instance.isInitChanges)}else{var C=!1;(e[n.name].length!==n.instance.list.length||/diagram|DashboardLayout/.test(e.getModuleName()))&&(e[n.name]=n.instance.list,C=!0);for(var b=0,M=n.instance.list;b<M.length;b++){var l=M[b];if(l.tags)for(var S=0,N=l.tags;S<N.length;S++){var x=N[S],A=Y("child"+x.substring(0,1).toUpperCase()+x.substring(1),l);A&&l.tagObjects.push({instance:A,name:x})}var U=n.instance.list.indexOf(l),z=Y(n.name,e)["".concat(U)],J=Object.keys(z);if(J=J.filter(function(E){return/Ref$/i.test(E)}),z.properties&&Object.keys(z.properties).length!==0)for(var R=0,_=J;R<_.length;R++){var g=_[R];g=g.replace(/Ref/,""),z.properties["".concat(g)]=z.properties["".concat(g)]?z.properties["".concat(g)]:z.propCollection["".concat(g)]}!de(z)&&!de(z.setProperties)&&(/diagram|DashboardLayout/.test(e.getModuleName())?z.setProperties(l.getProperties(),!0):z.setProperties(l.getProperties())),l.isUpdated=!0}(/grid/.test(e.getModuleName())&&C||/chart/.test(e.getModuleName()))&&(s[n.name]=n.instance.getProperties(),e.setProperties(s,n.instance.isInitChanges))}}}},o.prototype.registerEvents=function(t){ga(t,this)},o.prototype.twoWaySetter=function(t,e){var i=Y(e,this.properties);i!==t&&(this.saveChanges(e,t,i),ve(e,d(t)?null:t,this.properties),Y(e+"Change",this).emit(t))},o.prototype.addTwoWay=function(t){for(var e=this,i=function(l){Y(l,r),Object.defineProperty(r,l,{get:function(){return Y(l,e.properties)},set:function(h){return e.twoWaySetter(h,l)}}),ve(l+"Change",new li,r)},r=this,n=0,s=t;n<s.length;n++){var a=s[n];i(a)}},o.prototype.addEventListener=function(t,e){var i=Y(t,this);de(i)||(this.ngBoundedEvents["".concat(t)]||(this.ngBoundedEvents["".concat(t)]=new Map),this.ngBoundedEvents["".concat(t)].set(e,i.subscribe(e)))},o.prototype.removeEventListener=function(t,e){var i=Y(t,this);de(i)||this.ngBoundedEvents["".concat(t)].get(e).unsubscribe()},o.prototype.trigger=function(t,e,i){var r=Y(t,this),n=this.isProtectedOnChange;this.isProtectedOnChange=!1,e&&(e.name=t),de(r)||r.next(e);var s=Y("local"+t.charAt(0).toUpperCase()+t.slice(1),this);de(s)||s.call(this,e),this.isProtectedOnChange=n,i&&(this.preventChange=this.isPreventChange,i.call(this,e)),this.isPreventChange=!1},o}();var yO=function(){function o(){}return o.prototype.propagateChange=function(t){},o.prototype.propagateTouch=function(){},o.prototype.localChange=function(t){var e=t.checked===void 0?t.value:t.checked;if(this.objCheck=ir(e),this.isUpdated===!0&&(this.angularValue=this.oldValue),this.objCheck===!0)this.duplicateValue=JSON.stringify(e),this.duplicateAngularValue=JSON.stringify(this.angularValue),this.duplicateValue!==this.duplicateAngularValue&&this.propagateChange!==void 0&&e!==void 0&&(this.propagateChange(e),this.angularValue=e);else if(e!==this.angularValue&&this.propagateChange!==void 0&&e!==void 0)if(e!==""&&e!==null)this.propagateChange(e),this.angularValue=e;else{var i=e;this.propagateChange(i),this.angularValue=e}this.cdr.markForCheck()},o.prototype.registerOnChange=function(t){this.propagateChange=t},o.prototype.registerOnTouched=function(t){this.propagateTouch=t},o.prototype.twoWaySetter=function(t,e){var i=this.oldValue||Y(e,this.properties),r=this.inputElement||this.element;r&&i===t&&this.value===t&&(r.value===void 0||r.value==="")||(this.saveChanges(e,t,i),ve(e,d(t)?null:t,this.properties),Y(e+"Change",this).emit(t))},o.prototype.ngAfterViewInit=function(t){var e=t||this;if(e.ngOnBlurBound=this.ngOnBlur.bind(this),e.ngOnFocusBound=this.ngOnFocus.bind(this),typeof window<"u"){e.getModuleName().includes("dropdowntree")?setTimeout(function(){e.appendTo(e.element)}):e.appendTo(e.element);var i=e.inputElement||e.element;i.addEventListener("focus",e.ngOnFocusBound),i.addEventListener("blur",e.ngOnBlurBound)}this.isFormInit=!1},o.prototype.setDisabledState=function(t){this.enabled=!t,this.disabled=t},o.prototype.writeValue=function(t){var e=/ejs-radiobutton/g;this.checked===void 0?this.value=t:this.ngEle&&(typeof t=="boolean"?e.test(this.ngEle.nativeElement.outerHTML)?this.checked=t===this.value:this.checked=t:this.checked=t===this.value),this.angularValue=t,this.isUpdated=!0,this.preventChange=!this.isFormInit,this.cdr.markForCheck()},o.prototype.ngOnFocus=function(t){this.skipFromEvent!==!0&&this.focus.emit(t),this.cdr.markForCheck()},o.prototype.ngOnBlur=function(t){this.propagateTouch(),this.skipFromEvent!==!0&&this.blur.emit(t),this.cdr.markForCheck()},o.isFormBase=!0,o}();var cT=Kg();function uT(o,t){if(typeof o=="string"||typeof o=="function"&&o.prototype&&o.prototype.CSPTemplate)return cT(o,t);var e=o.elementRef.nativeElement._viewContainerRef,i=o.elementRef.nativeElement.propName;return function(r,n,s){var a={$implicit:r},l=e||n.viewContainerRef,h=l.createEmbeddedView(o,a);/EJS-MENTION|EJS-DROPDOWNLIST/.test(Y("currentInstance.element.nodeName",l))||/E-TABITEM/.test(Y("element.nativeElement.nodeName",l))&&Y("currentInstance.headerTemplateRef",l)?h.detectChanges():h.markForCheck();var c=n&&n.registeredTemplate?n.registeredTemplate:Y("currentInstance.registeredTemplate",l);return s=s&&n.registeredTemplate?s:i,typeof c["".concat(s)]>"u"&&(c["".concat(s)]=[]),c["".concat(s)].push(h),h.rootNodes}}function tn(o){return function(t,e){var i={set:pT(e),get:dT(e,o),enumerable:!0,configurable:!0};Object.defineProperty(t,e,i)}}function pT(o){return function(t){t!==void 0&&(ve(o+"Ref",t,this),typeof t!="string"?(t.elementRef.nativeElement._viewContainerRef=this.viewContainerRef,t.elementRef.nativeElement.propName=o):this.saveChanges&&(this.saveChanges(o,t,void 0),this.dataBind()))}}function dT(o,t){return function(){return Y(o+"Ref",this)||t}}Jg({compile:uT});function fT(o){for(var t,e=o.childNodes,i=0;i<e.length;i++)if(t=e[i],t.nodeType===3)return t;return null}var gT=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(t,e)};return function(t,e){o(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ci=function(o,t,e,i){var r=arguments.length,n=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,e,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,e,n):s(t,e))||n);return r>3&&n&&Object.defineProperty(t,e,n),n};var jO=new Rn,Kt={RTL:"e-rtl",BUTTON:"e-btn",PRIMARY:"e-primary",ICONBTN:"e-icon-btn"},bi=function(o){gT(t,o);function t(e,i){return o.call(this,e,i)||this}return t.prototype.preRender=function(){},t.prototype.render=function(){this.initialize(),this.removeRippleEffect=rr(this.element,{selector:"."+Kt.BUTTON}),this.renderComplete()},t.prototype.initialize=function(){if(this.cssClass&&Z([this.element],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.isPrimary&&this.element.classList.add(Kt.PRIMARY),!he()||he()&&this.getModuleName()!=="progress-btn"){if(this.content){var e=this.enableHtmlSanitizer?nt.sanitize(this.content):this.content;this.element.innerHTML=e}this.setIconCss()}this.enableRtl&&this.element.classList.add(Kt.RTL),this.disabled?this.controlStatus(this.disabled):this.wireEvents()},t.prototype.controlStatus=function(e){this.element.disabled=e},t.prototype.setIconCss=function(){if(this.iconCss){var e=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(e.classList.add("e-icon-"+this.iconPosition.toLowerCase()),(this.iconPosition==="Top"||this.iconPosition==="Bottom")&&this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add(Kt.ICONBTN);var i=this.element.childNodes[0];i&&(this.iconPosition==="Left"||this.iconPosition==="Top")?this.element.insertBefore(e,i):this.element.appendChild(e)}},t.prototype.wireEvents=function(){this.isToggle&&I.add(this.element,"click",this.btnClickHandler,this)},t.prototype.unWireEvents=function(){this.isToggle&&I.remove(this.element,"click",this.btnClickHandler)},t.prototype.btnClickHandler=function(){this.element.classList.contains("e-active")?this.element.classList.remove("e-active"):this.element.classList.add("e-active")},t.prototype.destroy=function(){var e=[Kt.PRIMARY,Kt.RTL,Kt.ICONBTN,"e-success","e-info","e-danger","e-warning","e-flat","e-outline","e-small","e-bigger","e-active","e-round","e-top-icon-btn","e-bottom-icon-btn"];this.cssClass&&(e=e.concat(this.cssClass.split(/\s+/).filter(function(r){return r.length>0}))),o.prototype.destroy.call(this),ee([this.element],e),this.element.getAttribute("class")||this.element.removeAttribute("class"),this.disabled&&this.element.removeAttribute("disabled"),this.content&&(this.element.innerHTML=this.element.innerHTML.replace(this.content,""));var i=this.element.querySelector("span.e-btn-icon");i&&K(i),this.unWireEvents(),Bn&&this.removeRippleEffect()},t.prototype.getModuleName=function(){return"btn"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.Inject=function(){},t.prototype.onPropertyChanged=function(e,i){for(var r=this.element.querySelector("span.e-btn-icon"),n=0,s=Object.keys(e);n<s.length;n++){var a=s[n];switch(a){case"isPrimary":e.isPrimary?this.element.classList.add(Kt.PRIMARY):this.element.classList.remove(Kt.PRIMARY);break;case"disabled":this.controlStatus(e.disabled);break;case"iconCss":{r=this.element.querySelector("span.e-btn-icon"),r?e.iconCss?(r.className="e-btn-icon "+e.iconCss,this.element.textContent.trim()&&(this.iconPosition==="Left"?r.classList.add("e-icon-left"):r.classList.add("e-icon-right"))):K(r):this.setIconCss();break}case"iconPosition":ee([this.element],["e-top-icon-btn","e-bottom-icon-btn"]),r=this.element.querySelector("span.e-btn-icon"),r&&K(r),this.setIconCss();break;case"cssClass":i.cssClass&&ee([this.element],i.cssClass.split(/\s+/).filter(function(h){return h.length>0})),e.cssClass&&Z([this.element],e.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":e.enableRtl?this.element.classList.add(Kt.RTL):this.element.classList.remove(Kt.RTL);break;case"content":{var l=fT(this.element);l||this.element.classList.remove(Kt.ICONBTN),(!he()||he()&&!this.isServerRendered&&this.getModuleName()!=="progress-btn")&&(this.enableHtmlSanitizer&&(e.content=nt.sanitize(e.content)),this.element.innerHTML=e.content,this.setIconCss());break}case"isToggle":e.isToggle?I.add(this.element,"click",this.btnClickHandler,this):(I.remove(this.element,"click",this.btnClickHandler),ee([this.element],["e-active"]));break}}},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},Ci([w("Left")],t.prototype,"iconPosition",void 0),Ci([w("")],t.prototype,"iconCss",void 0),Ci([w(!1)],t.prototype,"disabled",void 0),Ci([w(!1)],t.prototype,"isPrimary",void 0),Ci([w("")],t.prototype,"cssClass",void 0),Ci([w("")],t.prototype,"content",void 0),Ci([w(!1)],t.prototype,"isToggle",void 0),Ci([w()],t.prototype,"locale",void 0),Ci([w(!0)],t.prototype,"enableHtmlSanitizer",void 0),Ci([Q()],t.prototype,"created",void 0),t=Ci([Qe],t),t}(dt);var Ui,Tr,Zt,Bs,Vc=!1;function vT(o,t){var e=!1,i={left:0,top:0},r=o;if(!o||!t)return i;for(d(t.offsetParent)&&t.style.position==="fixed"&&(e=!0);(t.offsetParent||e)&&o&&t.offsetParent!==o;)i.left+=o.offsetLeft,i.top+=o.offsetTop,o=o.offsetParent;for(o=r;(t.offsetParent||e)&&o&&t.offsetParent!==o;)i.left-=o.scrollLeft,i.top-=o.scrollTop,o=o.parentElement;return i}function Lt(o,t,e,i,r){if(Tr=void 0,Tr=r,Vc=!!i,!o)return{left:0,top:0};t||(t="left"),e||(e="top"),Bs=o.ownerDocument,Zt=o;var n={left:0,top:0};return mT(t.toLowerCase(),e.toLowerCase(),n)}function nr(o,t){t.left=o}function sr(o,t){t.top=o}function mT(o,t,e){switch(Ui=Zt.getBoundingClientRect(),t+o){case"topcenter":nr(Sc(),e),sr(Sa(),e);break;case"topright":nr(Ic(),e),sr(Sa(),e);break;case"centercenter":nr(Sc(),e),sr(Mc(),e);break;case"centerright":nr(Ic(),e),sr(Mc(),e);break;case"centerleft":nr(Ta(),e),sr(Mc(),e);break;case"bottomcenter":nr(Sc(),e),sr(bc(),e);break;case"bottomright":nr(Ic(),e),sr(bc(),e);break;case"bottomleft":nr(Ta(),e),sr(bc(),e);break;default:case"topleft":nr(Ta(),e),sr(Sa(),e);break}return Zt=null,e}function Bv(){return Bs.documentElement.scrollTop||Bs.body.scrollTop}function Hv(){return Bs.documentElement.scrollLeft||Bs.body.scrollLeft}function bc(){return Vc?Ui.bottom:Ui.bottom+Bv()}function Mc(){return Sa()+Ui.height/2}function Sa(){return Vc?Ui.top:Ui.top+Bv()}function Ta(){return Ui.left+Hv()}function Ic(){var o=Zt&&((Zt.classList.contains("e-date-wrapper")||Zt.classList.contains("e-datetime-wrapper"))&&Zt.classList.contains("e-rtl")||Zt.classList.contains("e-ddl")&&Zt.classList.contains("e-rtl")||Zt.classList.contains("e-date-range-wrapper"))?Tr?Tr.width:0:Tr&&Ui.width>=Tr.width?Tr.width:0;return Zt&&Zt.classList.contains("e-rtl")&&Zt.classList.contains("e-multiselect")&&(o=Tr.width),Ui.right+Hv()-o}function Sc(){return Ta()+Ui.width/2}var Dr,Yt;function Qc(o,t,e,i){if(t===void 0&&(t=null),e===void 0&&(e={X:!1,Y:!1}),!e.Y&&!e.X)return{left:0,top:0};var r=o.getBoundingClientRect();if(Yt=t,Dr=o.ownerDocument,i||(i=Lt(o,"left","top")),e.X){var n=Yt?Wv():$v(),s=Gc(),a=Zc(),l=s-i.left,h=i.left+r.width-a;r.width>n?l>0&&h<=0?i.left=a-r.width:h>0&&l<=0?i.left=s:i.left=l>h?a-r.width:s:l>0?i.left+=l:h>0&&(i.left-=h)}if(e.Y){var c=Yt?Xv():Zv(),u=qc(),p=$c(),f=u-i.top,g=i.top+r.height-p;r.height>c?f>0&&g<=0?i.top=p-r.height:g>0&&f<=0?i.top=u:i.top=f>g?p-r.height:u:f>0?i.top+=f:g>0&&(i.top-=g)}return i}function Ys(o,t,e,i){t===void 0&&(t=null);var r=Lt(o,"left","top");e&&(r.left=e),i&&(r.top=i);var n=[];Yt=t,Dr=o.ownerDocument;var s=o.getBoundingClientRect(),a=r.top,l=r.left,h=r.left+s.width,c=r.top+s.height,u=Qv(a,c),p=Yv(l,h);return u.topSide&&n.push("top"),p.rightSide&&n.push("right"),p.leftSide&&n.push("left"),u.bottomSide&&n.push("bottom"),n}function yT(o,t,e,i,r,n,s,a,l){if(s===void 0&&(s=null),a===void 0&&(a={X:!0,Y:!0}),!(!t||!o||!r||!n||!a.X&&!a.Y)){var h={TL:null,TR:null,BL:null,BR:null},c={TL:null,TR:null,BL:null,BR:null},u;if(window.getComputedStyle(o).display==="none"){var p=o.style.visibility;o.style.visibility="hidden",o.style.display="block",u=o.getBoundingClientRect(),o.style.removeProperty("display"),o.style.visibility=p}else u=o.getBoundingClientRect();var f={posX:r,posY:n,offsetX:e,offsetY:i,position:{left:0,top:0}};Yt=s,Dr=t.ownerDocument,bT(t,h,f,l,u),Xc(c,f,u),a.X&&_v(t,c,h,f,u,!0),a.Y&&h.TL.top>-1&&Vv(t,c,h,f,u,!0),CT(o,f,u)}}function CT(o,t,e){var i=0,r=0;if(o.offsetParent!=null&&(getComputedStyle(o.offsetParent).position==="absolute"||getComputedStyle(o.offsetParent).position==="relative")){var n=Lt(o.offsetParent,"left","top",!1,e);i=n.left,r=n.top}var s=1,a=1,l=Uv(o);if(l){var h=getComputedStyle(l).transform;if(h!=="none"){var c=new DOMMatrix(h);s=c.a,a=c.d}var u=getComputedStyle(l).zoom;if(u!=="none"){var p=Wc(document.body);s=p*s,a=p*a}}o.style.top=t.position.top/a+t.offsetY-r/a+"px",o.style.left=t.position.left/s+t.offsetX-i/s+"px"}function Wc(o){var t=getComputedStyle(o).zoom;return parseFloat(t)||1}function Uv(o){for(;o;){var t=window.getComputedStyle(o).transform,e=Wc(document.body);if(t&&t!=="none"||e&&e!==1)return o;if(o===document.body)return null;o=o.offsetParent||o.parentElement}return null}function bT(o,t,e,i,r){e.position=Lt(o,e.posX,e.posY,i,r),t.TL=Lt(o,"left","top",i,r),t.TR=Lt(o,"right","top",i,r),t.BR=Lt(o,"left","bottom",i,r),t.BL=Lt(o,"right","bottom",i,r)}function Xc(o,t,e){o.TL={top:t.position.top+t.offsetY,left:t.position.left+t.offsetX},o.TR={top:o.TL.top,left:o.TL.left+e.width},o.BL={top:o.TL.top+e.height,left:o.TL.left},o.BR={top:o.TL.top+e.height,left:o.TL.left+e.width}}function Yv(o,t){var e=!1,i=!1;return o-xa()<Gc()&&(e=!0),t>Zc()&&(i=!0),{leftSide:e,rightSide:i}}function _v(o,t,e,i,r,n){var s=Yv(t.TL.left,t.TR.left);e.TL.left-xa()<=Gc()&&(s.leftSide=!1),e.TR.left>Zc()&&(s.rightSide=!1),(s.leftSide&&!s.rightSide||!s.leftSide&&s.rightSide)&&(i.posX==="right"?i.posX="left":i.posX="right",i.offsetX=i.offsetX+r.width,i.offsetX=-1*i.offsetX,i.position=Lt(o,i.posX,i.posY,!1),Xc(t,i,r),n&&_v(o,t,e,i,r,!1))}function Vv(o,t,e,i,r,n){var s=Qv(t.TL.top,t.BL.top);e.TL.top-Da()<=qc()&&(s.topSide=!1),e.BL.top>=$c()&&o.getBoundingClientRect().bottom<window.innerHeight&&(s.bottomSide=!1),(s.topSide&&!s.bottomSide||!s.topSide&&s.bottomSide)&&(i.posY==="top"?i.posY="bottom":i.posY="top",i.offsetY=i.offsetY+r.height,i.offsetY=-1*i.offsetY,i.position=Lt(o,i.posX,i.posY,!1,r),Xc(t,i,r),n&&Vv(o,t,e,i,r,!1))}function Qv(o,t){var e=!1,i=!1;return o-Da()<qc()&&(e=!0),t>$c()&&(i=!0),{topSide:e,bottomSide:i}}function Wv(){return Yt.getBoundingClientRect().width}function Xv(){return Yt.getBoundingClientRect().height}function qv(){return Yt.getBoundingClientRect().left}function Gv(){return Yt.getBoundingClientRect().top}function qc(){return Yt?Gv():0}function Gc(){return Yt?qv():0}function Zc(){return Yt?xa()+qv()+Wv():xa()+$v()}function $c(){return Yt?Da()+Gv()+Xv():Da()+Zv()}function Da(){return Dr.documentElement.scrollTop||Dr.body.scrollTop}function xa(){return Dr.documentElement.scrollLeft||Dr.body.scrollLeft}function Zv(){return window.innerHeight}function $v(){var o=window.innerWidth,t=document.documentElement.getBoundingClientRect(),e=d(document.documentElement)?0:t.width;return o-(o-e)}function Jv(){Yt=null,Dr=null}var Kv=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(t,e)};return function(t,e){o(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),ft=function(o,t,e,i){var r=arguments.length,n=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,e,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,e,n):s(t,e))||n);return r>3&&n&&Object.defineProperty(t,e,n),n},em=function(o){Kv(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return ft([w("left")],t.prototype,"X",void 0),ft([w("top")],t.prototype,"Y",void 0),t}(Ue),bt={ROOT:"e-popup",RTL:"e-rtl",OPEN:"e-popup-open",CLOSE:"e-popup-close"},Ar=function(o){Kv(t,o);function t(e,i){return o.call(this,i,e)||this}return t.prototype.onPropertyChanged=function(e,i){for(var r=0,n=Object.keys(e);r<n.length;r++){var s=n[r];switch(s){case"width":Ce(this.element,{width:le(e.width)});break;case"height":Ce(this.element,{height:le(e.height)});break;case"zIndex":Ce(this.element,{zIndex:e.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":{var a=e.offsetX-i.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+a).toString()+"px";break}case"offsetY":{var l=e.offsetY-i.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+l).toString()+"px";break}case"content":this.setContent();break;case"actionOnScroll":e.actionOnScroll!=="none"?this.wireScrollEvents():this.unwireScrollEvents();break}}},t.prototype.getModuleName=function(){return"popup"},t.prototype.resolveCollision=function(){this.checkCollision()},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){this.element.classList.contains("e-popup-open")&&this.unwireEvents(),this.element.classList.remove(bt.ROOT,bt.RTL,bt.OPEN,bt.CLOSE),this.content=null,this.relateTo=null,Jv(),o.prototype.destroy.call(this)},t.prototype.render=function(){this.element.classList.add(bt.ROOT);var e={};this.zIndex!==1e3&&(e.zIndex=this.zIndex),this.width!=="auto"&&(e.width=le(this.width)),this.height!=="auto"&&(e.height=le(this.height)),Ce(this.element,e),this.fixedParent=!1,this.setEnableRtl(),this.setContent()},t.prototype.wireEvents=function(){D.isDevice&&I.add(window,"orientationchange",this.orientationOnChange,this),this.actionOnScroll!=="none"&&this.wireScrollEvents()},t.prototype.wireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,i=this.getScrollableParent(this.getRelateToElement());e<i.length;e++){var r=i[e];I.add(r,"scroll",this.scrollRefresh,this)}},t.prototype.unwireEvents=function(){D.isDevice&&I.remove(window,"orientationchange",this.orientationOnChange),this.actionOnScroll!=="none"&&this.unwireScrollEvents()},t.prototype.unwireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,i=this.getScrollableParent(this.getRelateToElement());e<i.length;e++){var r=i[e];I.remove(r,"scroll",this.scrollRefresh)}},t.prototype.getRelateToElement=function(){var e=this.relateTo===""||d(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:e},!0),typeof this.relateTo=="string"?document.querySelector(this.relateTo):this.relateTo},t.prototype.scrollRefresh=function(e){if(this.actionOnScroll==="reposition"?!d(this.element)&&!(this.element.offsetParent===e.target||this.element.offsetParent&&this.element.offsetParent.tagName==="BODY"&&e.target.parentElement==null)&&this.refreshPosition():this.actionOnScroll==="hide"&&this.hide(),this.actionOnScroll!=="none"&&this.getRelateToElement()){var i=this.isElementOnViewport(this.getRelateToElement(),e.target);!i&&!this.targetInvisibleStatus?(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0):i&&(this.targetInvisibleStatus=!1)}},t.prototype.isElementOnViewport=function(e,i){for(var r=this.getScrollableParent(e),n=0;n<r.length;n++)if(!this.isElementVisible(e,r[n]))return!1;return!0},t.prototype.isElementVisible=function(e,i){var r=this.checkGetBoundingClientRect(e);if(!r.height||!r.width)return!1;if(d(this.checkGetBoundingClientRect(i))){var s=window,a={top:s.scrollY,left:s.scrollX,right:s.scrollX+s.outerWidth,bottom:s.scrollY+s.outerHeight},l=Lt(e),h={top:l.top,left:l.left,right:l.left+r.width,bottom:l.top+r.height},c={top:a.bottom-h.top,left:a.right-h.left,bottom:h.bottom-a.top,right:h.right-a.left};return c.top>0&&c.left>0&&c.right>0&&c.bottom>0}else{var n=i.getBoundingClientRect();return!(r.bottom<n.top)&&!(r.bottom>n.bottom)&&!(r.right>n.right)&&!(r.left<n.left)}},t.prototype.preRender=function(){},t.prototype.setEnableRtl=function(){this.reposition(),this.enableRtl?this.element.classList.add(bt.RTL):this.element.classList.remove(bt.RTL)},t.prototype.setContent=function(){if(!d(this.content))if(this.element.innerHTML="",typeof this.content=="string")this.element.textContent=this.content;else{var e=this.getRelateToElement(),i=this.content.props;(!e.classList.contains("e-dropdown-btn")||d(i))&&this.element.appendChild(this.content)}},t.prototype.orientationOnChange=function(){var e=this;setTimeout(function(){e.refreshPosition()},200)},t.prototype.refreshPosition=function(e,i){d(e)||this.checkFixedParent(e),this.reposition(),i||this.checkCollision()},t.prototype.reposition=function(){var e,i,r=this.getRelateToElement();if(typeof this.position.X=="number"&&typeof this.position.Y=="number")e={left:this.position.X,top:this.position.Y};else if(typeof this.position.X=="string"&&typeof this.position.Y=="number"||typeof this.position.X=="number"&&typeof this.position.Y=="string"){var n=void 0,s=this.element.style.display;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(n=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),i=this.getAnchorPosition(r,this.element,this.position,this.offsetX,this.offsetY),typeof this.position.X=="string"?e={left:i.left,top:this.position.Y}:e={left:this.position.X,top:i.top},this.element.style.display=s,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=n)}else if(r){var a=this.element.clientHeight,s=this.element.style.display;this.element.style.display="block",e=this.getAnchorPosition(r,this.element,this.position,this.offsetX,this.offsetY,a),this.element.style.display=s}else e={left:0,top:0};d(e)||(this.element.style.left=e.left+"px",this.element.style.top=e.top+"px")},t.prototype.checkGetBoundingClientRect=function(e){var i;try{return i=e.getBoundingClientRect(),i}catch{return null}},t.prototype.getAnchorPosition=function(e,i,r,n,s,a){a===void 0&&(a=0);var l=this.checkGetBoundingClientRect(i),h=this.checkGetBoundingClientRect(e);if(d(l)||d(h))return null;var c=e,u={left:0,top:0};switch(i.offsetParent&&i.offsetParent.tagName==="BODY"&&e.tagName==="BODY"?u=Lt(e):(i.classList.contains("e-dlg-modal")&&c.tagName!=="BODY"&&(i=i.parentElement),u=vT(c,i)),r.X){default:case"left":break;case"center":i.classList.contains("e-dlg-modal")&&c.tagName==="BODY"&&this.targetType==="container"?u.left+=window.innerWidth/2-l.width/2:this.targetType==="container"?u.left+=h.width/2-l.width/2:u.left+=h.width/2;break;case"right":if(i.classList.contains("e-dlg-modal")&&c.tagName==="BODY"&&this.targetType==="container")u.left+=window.innerWidth-l.width;else if(this.targetType==="container"){var p=1,f=Uv(i);if(f){var g=getComputedStyle(f).transform;if(g!=="none"){var v=new DOMMatrix(g);p=v.a}var y=getComputedStyle(f).zoom;if(y!=="none"){var C=Wc(document.body);p=C*p}}u.left+=(h.width-l.width)/p}else u.left+=h.width;break}switch(r.Y){default:case"top":break;case"center":i.classList.contains("e-dlg-modal")&&c.tagName==="BODY"&&this.targetType==="container"?u.top+=window.innerHeight/2-l.height/2:this.targetType==="container"?u.top+=h.height/2-l.height/2:u.top+=h.height/2;break;case"bottom":i.classList.contains("e-dlg-modal")&&c.tagName==="BODY"&&this.targetType==="container"?u.top+=window.innerHeight-l.height:this.targetType==="container"&&!i.classList.contains("e-dialog")?u.top+=h.height-l.height:this.targetType==="container"&&i.classList.contains("e-dialog")?u.top+=h.height-a:u.top+=h.height;break}return u.left+=n,u.top+=s,u},t.prototype.callFlip=function(e){var i=this.getRelateToElement();yT(this.element,i,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,e,this.fixedParent)},t.prototype.callFit=function(e){if(Ys(this.element,this.viewPortElement).length!==0)if(d(this.viewPortElement)){var i=Qc(this.element,this.viewPortElement,e);e.X&&(this.element.style.left=i.left+"px"),e.Y&&(this.element.style.top=i.top+"px")}else{var r=this.checkGetBoundingClientRect(this.element),n=this.checkGetBoundingClientRect(this.viewPortElement);if(d(r)||d(n))return null;e&&e.Y===!0&&(n.top>r.top?this.element.style.top="0px":n.bottom<r.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(r.bottom-n.bottom)+"px")),e&&e.X===!0&&(n.right<r.right?this.element.style.left=parseInt(this.element.style.left,10)-(r.right-n.right)+"px":n.left>r.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(n.left-r.left)+"px"))}},t.prototype.checkCollision=function(){var e=this.collision.X,i=this.collision.Y;e==="none"&&i==="none"||(e==="flip"&&i==="flip"?this.callFlip({X:!0,Y:!0}):e==="fit"&&i==="fit"?this.callFit({X:!0,Y:!0}):(e==="flip"?this.callFlip({X:!0,Y:!1}):i==="flip"&&this.callFlip({Y:!0,X:!1}),e==="fit"?this.callFit({X:!0,Y:!1}):i==="fit"&&this.callFit({X:!1,Y:!0})))},t.prototype.show=function(e,i){var r=this;if(this.wireEvents(),this.zIndex===1e3||!d(i)){var n=d(i)?this.element:i;this.zIndex=Er(n),Ce(this.element,{zIndex:this.zIndex})}e=!d(e)&&typeof e=="object"?e:this.showAnimation,(this.collision.X!=="none"||this.collision.Y!=="none")&&(ee([this.element],bt.CLOSE),Z([this.element],bt.OPEN),this.checkCollision(),ee([this.element],bt.OPEN),Z([this.element],bt.CLOSE)),d(e)?(ee([this.element],bt.CLOSE),Z([this.element],bt.OPEN),this.trigger("open")):(e.begin=function(){r.isDestroyed||(ee([r.element],bt.CLOSE),Z([r.element],bt.OPEN))},e.end=function(){r.isDestroyed||r.trigger("open")},new Gt(e).animate(this.element))},t.prototype.hide=function(e){var i=this;e=!d(e)&&typeof e=="object"?e:this.hideAnimation,d(e)?(ee([this.element],bt.OPEN),Z([this.element],bt.CLOSE),this.trigger("close")):(e.end=function(){i.isDestroyed||(ee([i.element],bt.OPEN),Z([i.element],bt.CLOSE),i.trigger("close"))},new Gt(e).animate(this.element)),this.unwireEvents()},t.prototype.getScrollableParent=function(e){return this.checkFixedParent(e),tm(e,this.fixedParent)},t.prototype.checkFixedParent=function(e){for(var i=e.parentElement;i&&i.tagName!=="HTML";){var r=getComputedStyle(i);(r.position==="fixed"||r.position==="sticky")&&!d(this.element)&&this.element.offsetParent&&this.element.offsetParent.tagName==="BODY"&&getComputedStyle(this.element.offsetParent).overflow!=="hidden"&&(this.element.style.top=window.scrollY>parseInt(this.element.style.top,10)?le(window.scrollY-parseInt(this.element.style.top,10)):le(parseInt(this.element.style.top,10)-window.scrollY),this.element.style.position="fixed",this.fixedParent=!0),i=i.parentElement,!d(this.element)&&d(this.element.offsetParent)&&r.position==="fixed"&&this.element.style.position==="fixed"&&(this.fixedParent=!0)}},ft([w("auto")],t.prototype,"height",void 0),ft([w("auto")],t.prototype,"width",void 0),ft([w(null)],t.prototype,"content",void 0),ft([w("container")],t.prototype,"targetType",void 0),ft([w(null)],t.prototype,"viewPortElement",void 0),ft([w({X:"none",Y:"none"})],t.prototype,"collision",void 0),ft([w("")],t.prototype,"relateTo",void 0),ft([it({},em)],t.prototype,"position",void 0),ft([w(0)],t.prototype,"offsetX",void 0),ft([w(0)],t.prototype,"offsetY",void 0),ft([w(1e3)],t.prototype,"zIndex",void 0),ft([w(!1)],t.prototype,"enableRtl",void 0),ft([w("reposition")],t.prototype,"actionOnScroll",void 0),ft([w(null)],t.prototype,"showAnimation",void 0),ft([w(null)],t.prototype,"hideAnimation",void 0),ft([Q()],t.prototype,"open",void 0),ft([Q()],t.prototype,"close",void 0),ft([Q()],t.prototype,"targetExitViewport",void 0),t=ft([Qe],t),t}(dt);function tm(o,t){for(var e=getComputedStyle(o),i=[],r=/(auto|scroll)/,n=o.parentElement;n&&n.tagName!=="HTML";){var s=getComputedStyle(n);!(e.position==="absolute"&&s.position==="static")&&r.test(s.overflow+s.overflowY+s.overflowX)&&i.push(n),n=n.parentElement}return t||i.push(document),i}function Er(o){for(var t=o.parentElement,e=[];t&&t.tagName!=="BODY";){var i=document.defaultView.getComputedStyle(t,null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(t,null).getPropertyValue("position");i!=="auto"&&r!=="static"&&e.push(i),t=t.parentElement}for(var n=[],s=0;s<document.body.children.length;s++)if(!o.isEqualNode(document.body.children[s])){var i=document.defaultView.getComputedStyle(document.body.children[s],null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(document.body.children[s],null).getPropertyValue("position");i!=="auto"&&r!=="static"&&n.push(i)}n.push("999");var a=[];if(!d(o.parentElement)&&o.parentElement.tagName!=="BODY"){for(var l=[].slice.call(o.parentElement.children),s=0;s<l.length;s++)if(!o.isEqualNode(l[s])){var i=document.defaultView.getComputedStyle(l[s],null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(l[s],null).getPropertyValue("position");i!=="auto"&&r!=="static"&&a.push(i)}}var h=e.concat(n,a),c=Math.max.apply(Math,h)+1;return c>2147483647?2147483647:c}var Tc=["north-west","north","north-east","west","east","south-west","south","south-east"],_s="e-resize-handle",wr="e-focused-handle",MT="e-dlg-resizable",iv=["e-restrict-left"],im="e-resize-viewport",IT=["north","west","east","south"],Pe,Ii,Jc=0,Kc=0,rm=0,nm=0,Hs=0,Us=0,Vn,ar,eu,lr,we,Qn=null,Aa=null,Ea=null,or,Oa=!0,rv=0,wc=!0;function ST(o){Qn=o.resizeBegin,Aa=o.resizing,Ea=o.resizeComplete,Pe=nv(o.element),we=nv(o.boundary);for(var t=o.direction.split(" "),e=0;e<t.length;e++)if(IT.indexOf(t[e])>=0&&t[e])TT(t[e]);else if(t[e].trim()!==""){var i=xe("div",{className:"e-icons "+_s+" e-"+t[e]});Pe.appendChild(i)}Vn=o.minHeight,eu=o.minWidth,lr=o.maxWidth,ar=o.maxHeight,o.proxy&&o.proxy.element&&o.proxy.element.classList.contains("e-dialog")?sv(o.proxy):sv()}function TT(o){tu();var t=xe("span",{attrs:{unselectable:"on",contenteditable:"false"}});t.setAttribute("class","e-dialog-border-resize e-"+o),o==="south"&&(t.style.height="2px",t.style.width="100%",t.style.bottom="0px",t.style.left="0px"),o==="north"&&(t.style.height="2px",t.style.width="100%",t.style.top="0px",t.style.left="0px"),o==="east"&&(t.style.height="100%",t.style.width="2px",t.style.right="0px",t.style.top="0px"),o==="west"&&(t.style.height="100%",t.style.width="2px",t.style.left="0px",t.style.top="0px"),Pe.appendChild(t)}function nv(o){var t;return d(o)||(typeof o=="string"?t=document.querySelector(o):t=o),t}function sv(o){for(var t=o||this,e=Pe.querySelectorAll("."+_s),i=0;i<e.length;i++){Ii=e[i],I.add(Ii,"mousedown",ov,t);var r=D.info.name==="msie"?"pointerdown":"touchstart";I.add(Ii,r,av,t)}var n=Pe.querySelectorAll(".e-dialog-border-resize");if(!d(n))for(var i=0;i<n.length;i++){Ii=n[i],I.add(Ii,"mousedown",ov,t);var r=D.info.name==="msie"?"pointerdown":"touchstart";I.add(Ii,r,av,t)}}function sm(o){return o.indexOf("mouse")>-1?"mouse":"touch"}function ov(o){if(o.preventDefault(),Pe=o.target.parentElement,tu(),Hs=o.pageX,Us=o.pageY,o.target.classList.add(wr),!d(Qn)){var t=this;if(Qn(o,t)===!0)return}this.targetEle&&Pe&&Pe.querySelector("."+MT)&&(we=this.target==="body"?null:this.targetEle,lr=this.targetEle.clientWidth,ar=this.targetEle.clientHeight);var e=d(we)?document:we;I.add(e,"mousemove",Fs,this),I.add(document,"mouseup",Na,this);for(var i=0;i<iv.length;i++)Pe.classList.contains(iv[i])?Oa=!1:Oa=!0}function Na(o){var t=D.info.name==="msie"?"pointermove":"touchmove",e=D.info.name==="msie"?"pointerup":"touchend",i=d(we)?document:we,r=D.info.name==="msie"?"pointerdown":"touchstart";if(I.remove(i,"mousemove",Fs),I.remove(i,t,Fs),I.remove(i,r,Fs),d(document.body.querySelector("."+wr))||document.body.querySelector("."+wr).classList.remove(wr),!d(Ea)){var n=this;Ea(o,n)}I.remove(document,"mouseup",Na),I.remove(document,e,Na)}function tu(){Jc=parseFloat(getComputedStyle(Pe,null).getPropertyValue("width").replace("px","")),Kc=parseFloat(getComputedStyle(Pe,null).getPropertyValue("height").replace("px","")),rm=Pe.getBoundingClientRect().left,nm=Pe.getBoundingClientRect().top}function av(o){Pe=o.target.parentElement,tu();var t=Pe.classList.contains("e-dialog");(o.target.classList.contains(_s)||o.target.classList.contains("e-dialog-border-resize"))&&t&&o.target.classList.add(wr);var e=o.touches?o.changedTouches[0]:o;if(Hs=e.pageX,Us=e.pageY,!d(Qn)){var i=this;if(Qn(o,i)===!0)return}var r=D.info.name==="msie"?"pointermove":"touchmove",n=D.info.name==="msie"?"pointerup":"touchend",s=d(we)?document:we;I.add(s,r,Fs,this),I.add(document,n,Na,this)}function Fs(o){if(o.target.classList.contains(_s)&&o.target.classList.contains(wr)?Ii=o.target:d(document.body.querySelector("."+wr))||(Ii=document.body.querySelector("."+wr)),!d(Ii)){for(var t="",e=0;e<Tc.length;e++)Ii.classList.contains("e-"+Tc[e])&&(t=Tc[e]);if(!d(Aa)){var i=this;Aa(o,i)}switch(t){case"south":Dc(o);break;case"north":xc(o);break;case"west":Ac(o);break;case"east":Ec(o);break;case"south-east":Dc(o),Ec(o);break;case"south-west":Dc(o),Ac(o);break;case"north-east":xc(o),Ec(o);break;case"north-west":xc(o),Ac(o);break}}}function xr(o){return o.getBoundingClientRect()}function Dc(o){var t=document.documentElement.clientHeight,e=!1,i=o.touches?o.changedTouches[0]:o,r=i.pageY,n=xr(Pe),s;d(we)||(s=xr(we)),d(we)?d(we)&&(t-r>=0||n.top<0)&&(e=!0):e=!0;var a=Kc+(r-Us);a=a>Vn?a:Vn;var l=0;d(we)||(l=s.top);var h=d(we)?0:we.offsetHeight-we.clientHeight,c=n.top-l-h/2;if(c=c<0?0:c,n.top>0&&c+a>ar){if(e=!1,Pe.classList.contains(im))return;Pe.style.height=ar-parseInt(c.toString(),10)+"px";return}var u=0;if(e){n.top<0&&t+(n.height+n.top)>0&&(u=n.top,a+u<=30&&(a=n.height-(n.height+n.top)+30)),a+n.top>=ar&&(Pe.style.height=n.height+(t-(n.height+n.top))+"px");var p=d(we)?u:c;a>=Vn&&a+p<=ar&&(Pe.style.height=a+"px")}}function xc(o){var t=!1,e,i=sm(o.type)==="mouse"?o.pageY:o.touches[0].pageY,r=xr(Pe),n=d(we)?0:we.offsetHeight-we.clientHeight;d(we)||(e=xr(we)),(!d(we)&&r.top-e.top>0||d(we)&&i>0||!d(we)&&Math.floor(r.top-e.top+r.height+(e.bottom-r.bottom))-n<=ar)&&(t=!0);var s=Kc-(i-Us);if(t&&s>=Vn&&s<=ar){var a=0;d(we)||(a=e.top);var l=nm-a+(i-Us);l=l>0?l:1,Pe.style.height=s+"px",Pe.style.top=l+"px"}}function Ac(o){var t=document.documentElement.clientWidth,e=!1,i;d(we)||(i=xr(we));var r=sm(o.type)==="mouse"?o.pageX:o.touches[0].pageX,n=xr(Pe),s=d(we)?0:we.offsetWidth-we.clientWidth,a=d(we)?0:i.left,l=d(we)?0:i.width;d(or)&&(d(we)?or=t:(or=n.left-a-s/2+n.width,or=or+(l-s-or))),(!d(we)&&Math.floor(n.left-i.left+n.width+(i.right-n.right))-s<=lr||d(we)&&r>=0)&&(e=!0);var h=Jc-(r-Hs);if(Oa&&(h=h>or?or:h),e&&h>=eu&&h<=lr){var c=0;d(we)||(c=i.left);var u=rm-c+(r-Hs);u=u>0?u:1,h!==rv&&wc&&(Pe.style.width=h+"px"),Oa&&(Pe.style.left=u+"px",u===1?wc=!1:wc=!0)}rv=h}function Ec(o){var t=document.documentElement.clientWidth,e=!1,i;d(we)||(i=xr(we));var r=o.touches?o.changedTouches[0]:o,n=r.pageX,s=xr(Pe);(!d(we)&&(s.left-i.left+s.width<=lr||s.right-i.left>=s.width)||d(we)&&t-n>0)&&(e=!0);var a=Jc+(n-Hs),l=0;if(d(we)||(l=i.left),s.left-l+a>lr){if(e=!1,Pe.classList.contains(im))return;Pe.style.width=lr-(s.left-l)+"px"}e&&a>=eu&&a<=lr&&(Pe.style.width=a+"px")}function wT(o){Vn=o}function DT(o){lr=o}function xT(o){ar=o}function lv(){for(var o=Pe.querySelectorAll("."+_s),t=0;t<o.length;t++)K(o[t]);var e=Pe.querySelectorAll(".e-dialog-border-resize");if(!d(e))for(var t=0;t<e.length;t++)K(e[t])}function AT(){Pe=null,Ii=null,we=null,or=null,Qn=null,Aa=null,Ea=null}var iu=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(t,e)};return function(t,e){o(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Te=function(o,t,e,i){var r=arguments.length,n=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,e,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,e,n):s(t,e))||n);return r>3&&n&&Object.defineProperty(t,e,n),n},ET=function(o){iu(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return Te([w(!0)],t.prototype,"isFlat",void 0),Te([w()],t.prototype,"buttonModel",void 0),Te([w("Button")],t.prototype,"type",void 0),Te([Q()],t.prototype,"click",void 0),t}(Ue),OT=function(o){iu(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return Te([w("Fade")],t.prototype,"effect",void 0),Te([w(400)],t.prototype,"duration",void 0),Te([w(0)],t.prototype,"delay",void 0),t}(Ue),ma="e-dialog",Oc="e-rtl",Nc="e-dlg-header-content",hv="e-dlg-header",ya="e-footer-content",Ca="e-dlg-modal",NT="e-dlg-content",cv="e-icon-dlg-close",jT="e-dlg-overlay",Mi="e-dlg-target",LT="e-dlg-container",ei="e-scroll-disabled",PT="e-primary",kT="e-icons",zT="e-popup",uv="e-device",ba="e-dlg-fullscreen",pv="e-dlg-closeicon-btn",RT="e-popup-close",dv="e-popup-open",fv="Information",gv="e-scroll-disabled",om="e-alert-dialog",am="e-confirm-dialog",jc="e-dlg-resizable",Yn="e-restrict-left",vv="e-resize-viewport",FT="e-dlg-ref-element",Lc="user action",BT="close icon",HT="escape",UT="overlayClick",YT="e-draggable",rn=function(o){iu(t,o);function t(e,i){var r=o.call(this,e,i)||this;return r.needsID=!0,r}return t.prototype.render=function(){this.initialize(),this.initRender(),this.wireEvents(),this.width==="100%"&&(this.element.style.width=""),this.minHeight!==""&&(this.element.style.minHeight=le(this.minHeight)),this.enableResize&&(this.setResize(),this.isModal&&(this.isModelResize=!0),this.animationSettings.effect==="None"&&this.getMinHeight()),this.renderComplete()},t.prototype.initializeValue=function(){this.dlgClosedBy=Lc},t.prototype.preRender=function(){var e=this;this.initializeValue(),this.headerContent=null,this.allowMaxHeight=!0,this.preventVisibility=!0,this.clonedEle=this.element.cloneNode(!0),this.closeIconClickEventHandler=function(n){e.dlgClosedBy=BT,e.hide(n)},this.dlgOverlayClickEventHandler=function(n){e.dlgClosedBy=UT,n.preventFocus=!1,e.trigger("overlayClick",n,function(s){s.preventFocus||e.focusContent(),e.dlgClosedBy=Lc})};var i={close:"Close"};if(this.l10n=new yi("dialog",i,this.locale),this.checkPositionData(),d(this.target)){var r=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.target=document.body,this.isProtectedOnChange=r}},t.prototype.updatePersistData=function(){this.enablePersistence&&this.setProperties({width:parseFloat(this.element.style.width),height:parseFloat(this.element.style.height),position:{X:parseFloat(this.dragObj.element.style.left),Y:parseFloat(this.dragObj.element.style.top)}},!0)},t.prototype.isNumberValue=function(e){var i=/^[-+]?\d*\.?\d+$/.test(e);return i},t.prototype.checkPositionData=function(){if(!d(this.position)){if(!d(this.position.X)&&typeof this.position.X!="number"){var e=this.isNumberValue(this.position.X);if(e){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.X=parseFloat(this.position.X),this.isProtectedOnChange=i}}if(!d(this.position.Y)&&typeof this.position.Y!="number"){var e=this.isNumberValue(this.position.Y);if(e){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.Y=parseFloat(this.position.Y),this.isProtectedOnChange=i}}}},t.prototype.getEle=function(e,i){for(var r=void 0,n=0;n<e.length;n++)if(e[n].classList.contains(i)){r=e[n];break}return r},t.prototype.getMinHeight=function(){var e="0px",i="0px";d(this.element.querySelector("."+Nc))||(e=getComputedStyle(this.headerContent).height);var r=this.getEle(this.element.children,ya);d(r)||(i=getComputedStyle(r).height);var n=parseInt(e.slice(0,e.indexOf("p")),10),s=parseInt(i.slice(0,i.indexOf("p")),10);return wT(n+30+(isNaN(s)?0:s)),n+30+s},t.prototype.onResizeStart=function(e,i){if(i.trigger("resizeStart",e),!e.cancel&&this.isModelResize&&!d(this.dlgContainer)&&this.dlgContainer.classList.contains("e-dlg-"+this.position.X+"-"+this.position.Y)){this.setPopupPosition(),this.dlgContainer.classList.remove("e-dlg-"+this.position.X+"-"+this.position.Y);var r=this.getTargetContainer(this.target);if(r instanceof Element){var n=window.getComputedStyle(r);n.getPropertyValue("direction")==="rtl"?this.element.style.position="absolute":this.element.style.position="relative"}else this.element.style.position="relative";this.element.classList.contains(Yn)&&this.element.classList.remove(Yn),this.isModelResize=!1}return e.cancel},t.prototype.onResizing=function(e,i){i.trigger("resizing",e)},t.prototype.onResizeComplete=function(e,i){i.trigger("resizeStop",e),this.updatePersistData()},t.prototype.setResize=function(){if(this.enableResize){this.element.classList.add(jc);for(var e=getComputedStyle(this.element).minHeight,i=getComputedStyle(this.element).minWidth,r="",n=0;n<this.resizeHandles.length;n++)if(this.resizeHandles[n]==="All"){r="south north east west north-east north-west south-east south-west";break}else{var s="";switch(this.resizeHandles[n].toString()){case"SouthEast":s="south-east";break;case"SouthWest":s="south-west";break;case"NorthEast":s="north-east";break;case"NorthWest":s="north-west";break;default:s=this.resizeHandles[n].toString();break}r+=s.toLocaleLowerCase()+" "}this.enableRtl&&r.trim()==="south-east"?r="south-west":this.enableRtl&&r.trim()==="south-west"&&(r="south-east"),this.isModal&&this.enableRtl?this.element.classList.add(Yn):this.isModal&&this.target===document.body&&this.element.classList.add(vv),ST({element:this.element,direction:r,minHeight:parseInt(e.slice(0,i.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(i.slice(0,i.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:this.target===document.body?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this}),this.wireWindowResizeEvent()}else lv(),this.unWireWindowResizeEvent(),this.isModal?this.element.classList.remove(Yn):this.element.classList.remove(vv),this.element.classList.remove(jc)},t.prototype.getFocusElement=function(e){var i='input,select,textarea,button:enabled,a,[contenteditable="true"],[tabindex]',r=e.querySelectorAll(i);return{element:r[r.length-1]}},t.prototype.keyDown=function(e){var i=this;if(e.keyCode===9&&this.isModal){var r=void 0;d(this.btnObj)||(r=this.btnObj[this.btnObj.length-1]),d(this.btnObj)&&!d(this.ftrTemplateContent)&&(r=this.getFocusElement(this.ftrTemplateContent)),d(this.btnObj)&&d(this.ftrTemplateContent)&&!d(this.contentEle)&&(r=this.getFocusElement(this.contentEle)),!d(r)&&document.activeElement===r.element&&!e.shiftKey&&(e.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&e.shiftKey&&(e.preventDefault(),d(r)||r.element.focus())}var n=document.activeElement,s=["input","textarea"].indexOf(n.tagName.toLowerCase())>-1,a=!1;if(s||(a=n.hasAttribute("contenteditable")&&n.getAttribute("contenteditable")==="true"),e.keyCode===27&&this.closeOnEscape){this.dlgClosedBy=HT;var l=document.querySelector(".e-popup-open:not(.e-dialog)");!d(l)&&!l.classList.contains("e-toolbar-pop")&&!l.classList.contains("e-slider-tooltip")||this.hide(e)}if(e.keyCode===13&&!e.ctrlKey&&n.tagName.toLowerCase()!=="textarea"&&s&&!d(this.primaryButtonEle)||e.keyCode===13&&e.ctrlKey&&(n.tagName.toLowerCase()==="textarea"||a)&&!d(this.primaryButtonEle)){var h,c=this.buttons.some(function(u,p){h=p;var f=u.buttonModel;return!d(f)&&f.isPrimary===!0});c&&typeof this.buttons[h].click=="function"&&!this.primaryButtonEle.disabled&&setTimeout(function(){i.buttons[h].click.call(i,e)})}},t.prototype.initialize=function(){d(this.target)||(this.targetEle=typeof this.target=="string"?document.querySelector(this.target):this.target),this.isBlazorServerRender()||Z([this.element],ma),D.isDevice&&Z([this.element],uv),this.isBlazorServerRender()||this.setCSSClass(),this.setMaxHeight()},t.prototype.initRender=function(){var e=this;if(this.initialRender=!0,this.isBlazorServerRender()||ye(this.element,{role:"dialog"}),this.zIndex===1e3?(this.setzIndex(this.element,!1),this.calculatezIndex=!0):this.calculatezIndex=!1,this.setTargetContent(),this.header!==""&&!d(this.header)&&this.setHeader(),this.renderCloseIcon(),this.setContent(),this.footerTemplate!==""&&!d(this.footerTemplate)?this.setFooterTemplate():!d(this.buttons[0])&&!d(this.buttons[0].buttonModel)&&this.setButton(),this.allowDragging&&!d(this.headerContent)&&this.setAllowDragging(),ye(this.element,{"aria-modal":this.isModal?"true":"false"}),this.isModal&&this.setIsModal(),this.element.classList.contains(om)!==!0&&this.element.classList.contains(am)!==!0&&!d(this.element.parentElement)){var i=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=this.createElement("div",{className:FT}),i.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}if(d(this.targetEle)||(this.isModal?this.targetEle.appendChild(this.dlgContainer):this.targetEle.appendChild(this.element)),this.popupObj=new Ar(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.target,actionOnScroll:"none",enableRtl:this.enableRtl,open:function(s){var a={container:e.isModal?e.dlgContainer:e.element,element:e.element,target:e.target,preventFocus:!1};e.enableResize&&e.resetResizeIcon(),e.trigger("open",a,function(l){l.preventFocus||e.focusContent()})},close:function(s){e.isModal&&Z([e.dlgOverlay],"e-fade"),e.unBindEvent(e.element),e.isModal&&(e.dlgContainer.style.display="none"),e.trigger("close",e.closeArgs);var a=document.activeElement;!d(a)&&!d(a.blur)&&a.blur(),!d(e.storeActiveElement)&&!d(e.storeActiveElement.focus)&&e.storeActiveElement.focus()}}),this.positionChange(),this.setEnableRTL(),this.isBlazorServerRender()||(Z([this.element],RT),this.isModal&&this.setOverlayZindex()),this.visible){if(this.show(),this.isModal){var r=this.getTargetContainer(this.target);if(r instanceof Element){var n=window.getComputedStyle(r);n.getPropertyValue("direction")==="rtl"&&this.setPopupPosition()}}}else this.isModal&&(this.dlgOverlay.style.display="none");this.initialRender=!1},t.prototype.getTargetContainer=function(e){var i=null;if(typeof e=="string")if(e.startsWith("#"))i=document.getElementById(e.substring(1));else if(e.startsWith(".")){var r=document.getElementsByClassName(e.substring(1));i=r.length>0?r[0]:null}else!(e instanceof HTMLElement)&&e!==document.body&&(i=document.querySelector(e));else e instanceof HTMLElement&&(i=e);return i},t.prototype.resetResizeIcon=function(){var e=this.getMinHeight();if(this.targetEle.offsetHeight<e){var i=this.enableRtl?"e-south-west":"e-south-east",r=this.element.querySelector("."+i);d(r)||(r.style.bottom="-"+e.toString()+"px")}},t.prototype.setOverlayZindex=function(e){var i;d(e)?i=parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:i=e,this.dlgOverlay.style.zIndex=(i-1).toString(),this.dlgContainer.style.zIndex=i.toString()},t.prototype.positionChange=function(){this.isModal?!isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()},t.prototype.setPopupPosition=function(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})},t.prototype.setAllowDragging=function(){var e=this,i="."+Nc;this.element.classList.contains(YT)||(this.dragObj=new Ps(this.element,{clone:!1,isDragScroll:!0,abort:".e-dlg-closeicon-btn",handle:i,dragStart:function(r){e.trigger("dragStart",r,function(n){he()&&n.bindEvents(r.dragElement)})},dragStop:function(r){if(e.isModal){e.IsDragStop=!0,d(e.position)||e.dlgContainer.classList.remove("e-dlg-"+e.position.X+"-"+e.position.Y);var n=e.getTargetContainer(e.target);if(n instanceof Element){var s=window.getComputedStyle(n);s.getPropertyValue("direction")==="rtl"?e.element.style.position="absolute":e.element.style.position="relative"}else e.element.style.position="relative"}e.trigger("dragStop",r),e.isModelResize=!1,e.element.classList.remove(Yn),e.updatePersistData()},drag:function(r){e.trigger("drag",r)}}),d(this.targetEle)||(this.dragObj.dragArea=this.targetEle))},t.prototype.setButton=function(){if(!this.isBlazorServerRender()){this.buttonContent=[],this.btnObj=[];for(var e=0;e<this.buttons.length;e++)if(!d(this.buttons[e].buttonModel)){var i=d(this.buttons[e].type)?"button":this.buttons[e].type.toLowerCase(),r=this.createElement("button",{className:this.cssClass,attrs:{type:i,tabindex:"0"}});this.buttonContent.push(r.outerHTML)}this.setFooterTemplate()}for(var n,e=0,s=this.element.children;e<s.length;e++)s[e].classList.contains(ya)&&(n=s[e].querySelectorAll("button"));for(var e=0;e<this.buttons.length;e++)d(this.buttons[e].buttonModel)||(this.isBlazorServerRender()||(this.btnObj[e]=new bi(this.buttons[e].buttonModel)),!d(this.ftrTemplateContent)&&n.length>0&&(typeof this.buttons[e].click=="function"&&I.add(n[e],"click",this.buttons[e].click,this),typeof this.buttons[e].click=="object"&&I.add(n[e],"click",this.buttonClickHandler.bind(this,e),this)),!this.isBlazorServerRender()&&!d(this.ftrTemplateContent)&&(this.btnObj[e].appendTo(this.ftrTemplateContent.children[e]),this.buttons[e].isFlat&&this.btnObj[e].element.classList.add("e-flat"),this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0]))},t.prototype.buttonClickHandler=function(e){this.trigger("buttons["+e+"].click",{})},t.prototype.setContent=function(){this.contentEle=this.createElement("div",{className:NT,id:this.element.id+"_dialog-content"}),this.headerEle?ye(this.element,{"aria-describedby":this.element.id+"_title "+this.element.id+"_dialog-content"}):ye(this.element,{"aria-describedby":this.element.id+"_dialog-content"}),this.innerContentElement?this.contentEle.appendChild(this.innerContentElement):(!d(this.content)&&this.content!==""||!this.initialRender)&&(typeof this.content=="string"&&!he()?this.setTemplate(this.content,this.contentEle,"content"):this.content instanceof HTMLElement?this.contentEle.appendChild(this.content):this.setTemplate(this.content,this.contentEle,"content")),d(this.headerContent)?this.element.insertBefore(this.contentEle,this.element.children[0]):this.element.insertBefore(this.contentEle,this.element.children[1]),this.height==="auto"&&(!this.isBlazorServerRender()&&D.isIE&&this.element.style.width===""&&!d(this.width)&&(this.element.style.width=le(this.width)),this.setMaxHeight())},t.prototype.setTemplate=function(e,i,r){var n,s;i.classList.contains(hv)?s=this.element.id+"header":i.classList.contains(ya)?s=this.element.id+"footerTemplate":s=this.element.id+"content";var a;d(e.outerHTML)?(typeof e=="string"||typeof e!="string"||he()&&!this.isStringTemplate)&&(typeof e=="string"&&(e=this.sanitizeHelper(e)),this.isVue||typeof e!="string"?(n=rt(e),a=e):i.innerHTML=e):i.appendChild(e);var l=[];if(!d(n)){for(var h=he()&&!this.isStringTemplate&&a.indexOf("<div>Blazor")===0?this.isStringTemplate:!0,c=0,u=n({},this,r,s,h);c<u.length;c++){var p=u[c];l.push(p)}He([].slice.call(l),i)}},t.prototype.sanitizeHelper=function(e){if(this.enableHtmlSanitizer){var i=nt.beforeSanitize(),r={cancel:!1,helper:null};m(i,i,r),this.trigger("beforeSanitizeHtml",i),i.cancel&&!d(i.helper)?e=i.helper(e):i.cancel||(e=nt.serializeValue(i,e))}return e},t.prototype.setMaxHeight=function(){if(this.allowMaxHeight){var e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!d(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=e,D.isIE&&this.height==="auto"&&!d(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}},t.prototype.setEnableRTL=function(){this.isBlazorServerRender()||(this.enableRtl?Z([this.element],Oc):ee([this.element],Oc)),d(this.element.querySelector(".e-resize-handle"))||(lv(),this.setResize())},t.prototype.setTargetContent=function(){var e=this;if(d(this.content)||this.content===""){var i=this.element.innerHTML.replace(/\s|<(\/?|\/?)(!--!--)>/g,"")!=="";(this.element.children.length>0||i)&&(this.innerContentElement=document.createDocumentFragment(),[].slice.call(this.element.childNodes).forEach(function(r){r.nodeType!==8&&e.innerContentElement.appendChild(r)}))}},t.prototype.setHeader=function(){this.headerEle?this.headerEle.innerHTML="":this.headerEle=this.createElement("div",{id:this.element.id+"_title",className:hv}),this.createHeaderContent(),this.headerContent.appendChild(this.headerEle),this.setTemplate(this.header,this.headerEle,"header"),ye(this.element,{"aria-describedby":this.element.id+"_title"}),ye(this.element,{"aria-labelledby":this.element.id+"_dialog-header"}),this.element.insertBefore(this.headerContent,this.element.children[0]),this.allowDragging&&!d(this.headerContent)&&this.setAllowDragging()},t.prototype.setFooterTemplate=function(){this.ftrTemplateContent?this.ftrTemplateContent.innerHTML="":this.ftrTemplateContent=this.createElement("div",{className:ya}),this.footerTemplate!==""&&!d(this.footerTemplate)?this.setTemplate(this.footerTemplate,this.ftrTemplateContent,"footerTemplate"):this.ftrTemplateContent.innerHTML=this.buttonContent.join(""),this.element.appendChild(this.ftrTemplateContent)},t.prototype.createHeaderContent=function(){d(this.headerContent)&&(this.headerContent=this.createElement("div",{id:this.element.id+"_dialog-header",className:Nc}))},t.prototype.renderCloseIcon=function(){this.showCloseIcon&&(this.closeIcon=this.createElement("button",{className:pv,attrs:{type:"button"}}),this.closeIconBtnObj=new bi({cssClass:"e-flat",iconCss:cv+" "+kT}),this.closeIconTitle(),d(this.headerContent)?(this.createHeaderContent(),vi([this.closeIcon],this.headerContent),this.element.insertBefore(this.headerContent,this.element.children[0])):vi([this.closeIcon],this.headerContent),this.closeIconBtnObj.appendTo(this.closeIcon))},t.prototype.closeIconTitle=function(){this.l10n.setLocale(this.locale);var e=this.l10n.getConstant("close");this.closeIcon.setAttribute("title",e),this.closeIcon.setAttribute("aria-label",e)},t.prototype.setCSSClass=function(e){e&&(ee([this.element],e.split(" ")),this.isModal&&!d(this.dlgContainer)&&ee([this.dlgContainer],e.split(" "))),this.cssClass&&(Z([this.element],this.cssClass.split(" ")),this.isModal&&!d(this.dlgContainer)&&Z([this.dlgContainer],this.cssClass.split(" ")))},t.prototype.setIsModal=function(){this.dlgContainer=this.createElement("div",{className:LT}),this.setCSSClass(),this.element.classList.remove(dv),this.element.parentNode.insertBefore(this.dlgContainer,this.element),this.dlgContainer.appendChild(this.element),Z([this.element],Ca),this.dlgOverlay=this.createElement("div",{className:jT}),this.dlgOverlay.style.zIndex=(this.zIndex-1).toString(),this.dlgContainer.appendChild(this.dlgOverlay)},t.prototype.getValidFocusNode=function(e){for(var i,r=0;r<e.length;r++){if(i=e[r],(i.clientHeight>0||i.tagName.toLowerCase()==="a"&&i.hasAttribute("href"))&&i.tabIndex>-1&&!i.disabled&&!this.disableElement(i,'[disabled],[aria-disabled="true"],[type="hidden"]'))return i;i=null}return i},t.prototype.focusableElements=function(e){if(!d(e)){var i='input,select,textarea,button,a,[contenteditable="true"],[tabindex]',r=e.querySelectorAll(i);return this.getValidFocusNode(r)}return null},t.prototype.getAutoFocusNode=function(e){var i=e.querySelector("."+pv),r="[autofocus]",n=e.querySelectorAll(r),s=this.getValidFocusNode(n);if(he()&&(this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0]),!d(s))i=s;else if(s=this.focusableElements(this.contentEle),d(s)){if(!d(this.primaryButtonEle))return this.element.querySelector("."+PT)}else return i=s;return i},t.prototype.disableElement=function(e,i){var r=e?e.matches||e.webkitMatchesSelector||e.msGetRegionContent:null;if(r){for(;e;e=e.parentNode)if(e instanceof Element&&r.call(e,i))return e}return null},t.prototype.focusContent=function(){var e=this.getAutoFocusNode(this.element),i=d(e)?this.element:e,r=D.userAgent;(r.indexOf("MSIE ")>0||r.indexOf("Trident/")>0)&&this.element.focus(),i.focus(),this.unBindEvent(this.element),this.bindEvent(this.element)},t.prototype.bindEvent=function(e){I.add(e,"keydown",this.keyDown,this)},t.prototype.unBindEvent=function(e){I.remove(e,"keydown",this.keyDown)},t.prototype.updateSanitizeContent=function(){this.isBlazorServerRender()||(this.contentEle.innerHTML=this.sanitizeHelper(this.content))},t.prototype.isBlazorServerRender=function(){return he()&&this.isServerRendered},t.prototype.getModuleName=function(){return"dialog"},t.prototype.onPropertyChanged=function(e,i){if(this.element.classList.contains(ma))for(var r=0,n=Object.keys(e);r<n.length;r++){var s=n[r];switch(s){case"content":!d(this.content)&&this.content!==""?(this.isBlazorServerRender()&&(this.contentEle=this.element.querySelector(".e-dlg-content")),!d(this.contentEle)&&this.contentEle.getAttribute("role")!=="dialog"?(this.isBlazorServerRender()||(this.contentEle.innerHTML=""),typeof this.content=="function"?(this.clearTemplate(["content"]),K(this.contentEle),this.contentEle=null,this.setContent()):typeof this.content=="string"?this.updateSanitizeContent():this.contentEle.appendChild(this.content),this.setMaxHeight()):this.setContent()):d(this.contentEle)||(K(this.contentEle),this.contentEle=null);break;case"header":this.header===""||d(this.header)?this.headerEle&&(K(this.headerEle),this.headerEle=null):this.setHeader();break;case"footerTemplate":if(this.footerTemplate===""||d(this.footerTemplate)){if(!this.ftrTemplateContent)return;K(this.ftrTemplateContent),this.ftrTemplateContent=null,this.buttons=[{}]}else this.setFooterTemplate(),this.buttons=[{}];break;case"showCloseIcon":this.element.getElementsByClassName(cv).length>0?!this.showCloseIcon&&(this.header===""||d(this.header))?(K(this.headerContent),this.headerContent=null):this.showCloseIcon||K(this.closeIcon):(this.renderCloseIcon(),this.wireEvents());break;case"locale":this.showCloseIcon&&this.closeIconTitle();break;case"visible":this.visible?this.show():this.hide();break;case"isModal":this.updateIsModal();break;case"height":Ce(this.element,{height:le(e.height)}),this.updatePersistData();break;case"width":Ce(this.element,{width:le(e.width)}),this.updatePersistData();break;case"zIndex":this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.element.style.zIndex!==this.zIndex.toString()&&(this.calculatezIndex=!1);break;case"cssClass":this.setCSSClass(i.cssClass);break;case"buttons":{this.unWireButtonEvents(),this.destroyButtons(),d(this.ftrTemplateContent)||(K(this.ftrTemplateContent),this.ftrTemplateContent=null),this.footerTemplate="",this.setButton();break}case"allowDragging":this.allowDragging&&!d(this.headerContent)?this.setAllowDragging():this.dragObj.destroy();break;case"target":this.setTarget(e.target);break;case"position":if(this.checkPositionData(),this.isModal){var a=this.position.X,l=this.position.Y;d(i.position)||(d(i.position.X)||(a=i.position.X),d(i.position.Y)||(l=i.position.Y)),this.dlgContainer.classList.contains("e-dlg-"+a+"-"+l)&&this.dlgContainer.classList.remove("e-dlg-"+a+"-"+l)}this.positionChange(),this.updatePersistData();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize(),this.isModelResize=this.enableResize&&this.isModal,this.enableResize&&this.dialogOpen&&this.resetResizeIcon();break;case"minHeight":this.minHeight!==""&&(this.element.style.minHeight=le(this.minHeight));break}}},t.prototype.setTarget=function(e){this.popupObj.relateTo=e,this.target=e,this.targetEle=typeof this.target=="string"?document.querySelector(this.target):this.target,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.updateIsModal(),this.enableResize&&this.setResize(),d(this.targetEle)||(this.isModal&&!d(this.dlgContainer)?this.targetEle.appendChild(this.dlgContainer):d(this.element)||this.targetEle.appendChild(this.element))},t.prototype.updateIsModal=function(){if(this.element.setAttribute("aria-modal",this.isModal?"true":"false"),this.isModal)d(this.dlgOverlay)&&(this.setIsModal(),this.element.style.top="0px",this.element.style.left="0px",d(this.targetEle)||this.targetEle.appendChild(this.dlgContainer));else{for(ee([this.element],Ca),ee([document.body],[Mi,ei]),K(this.dlgOverlay);this.dlgContainer.firstChild;)this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild,this.dlgContainer);this.dlgContainer.parentElement.removeChild(this.dlgContainer)}this.visible&&this.show(),this.positionChange(),this.isModal&&this.dlgOverlay&&I.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},t.prototype.setzIndex=function(e,i){var r=this.isProtectedOnChange;this.isProtectedOnChange=!0;var n=Er(e);this.zIndex=n>this.zIndex?n:this.zIndex,this.isProtectedOnChange=r,i&&(this.popupObj.zIndex=this.zIndex)},t.prototype.windowResizeHandler=function(){DT(this.targetEle.clientWidth),xT(this.targetEle.clientHeight),this.setMaxHeight()},t.prototype.getPersistData=function(){return this.addOnPersist(["width","height","position"])},t.prototype.removeAllChildren=function(e){for(;e.children[0];)this.removeAllChildren(e.children[0]),e.removeChild(e.children[0])},t.prototype.destroy=function(){if(!this.isDestroyed){var e=[Oc,Ca,jc,Yn,ba,uv],i=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];ee([this.targetEle],[Mi,ei]),!d(this.element)&&this.element.classList.contains(ba)&&ee([document.body],[Mi,ei]),this.isModal&&ee([d(this.targetEle)?document.body:this.targetEle],ei),this.unWireEvents(),this.unWireButtonEvents(),this.destroyButtons(),d(this.closeIconBtnObj)||this.closeIconBtnObj.destroy(),d(this.dragObj)||this.dragObj.destroy(),!d(this.popupObj.element)&&this.popupObj.element.classList.contains(zT)&&this.popupObj.destroy(),ee([this.element],e),!d(this.cssClass)&&this.cssClass!==""&&ee([this.element],this.cssClass.split(" ")),!d(this.refElement)&&!d(this.refElement.parentElement)&&(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),K(this.refElement),this.refElement=void 0),this.isModal&&(K(this.dlgOverlay),this.dlgContainer.parentNode.insertBefore(this.element,this.dlgContainer),K(this.dlgContainer)),this.element.innerHTML=this.clonedEle.innerHTML;for(var r=0;r<i.length;r++)this.element.removeAttribute(i[r]);this.ftrTemplateContent=null,this.headerContent=null,!this.isReact&&!this.isVue&&!d(this.contentEle)&&this.removeAllChildren(this.contentEle),this.contentEle=null,AT(),o.prototype.destroy.call(this),this.isReact&&this.clearTemplate()}},t.prototype.wireWindowResizeEvent=function(){this.boundWindowResizeHandler=this.windowResizeHandler.bind(this),window.addEventListener("resize",this.boundWindowResizeHandler)},t.prototype.unWireWindowResizeEvent=function(){window.removeEventListener("resize",this.boundWindowResizeHandler),this.boundWindowResizeHandler=null},t.prototype.wireEvents=function(){this.showCloseIcon&&I.add(this.closeIcon,"click",this.closeIconClickEventHandler,this),this.isModal&&this.dlgOverlay&&I.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},t.prototype.unWireEvents=function(){this.showCloseIcon&&I.remove(this.closeIcon,"click",this.closeIconClickEventHandler),this.isModal&&I.remove(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler)},t.prototype.refreshPosition=function(){this.popupObj.refreshPosition(),this.element.classList.contains(Ca)&&this.positionChange()},t.prototype.getDimension=function(){var e=this.element.offsetWidth,i=this.element.offsetHeight;return{width:e,height:i}},t.prototype.show=function(e){var i=this;if(this.element.classList.contains(ma)){if(!this.element.classList.contains(dv)||!d(e)){d(e)||this.fullScreen(e);var r=he()?{cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,maxHeight:this.element.style.maxHeight}:{cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,target:this.target,maxHeight:this.element.style.maxHeight};this.trigger("beforeOpen",r,function(n){if(!n.cancel){if(i.element.style.maxHeight!==r.maxHeight&&(i.allowMaxHeight=!1,i.element.style.maxHeight=r.maxHeight),i.enableResize&&i.boundWindowResizeHandler==null&&!i.initialRender&&i.wireWindowResizeEvent(),i.storeActiveElement=document.activeElement,i.element.tabIndex=-1,i.isModal&&!d(i.dlgOverlay))if(i.dlgOverlay.style.display="block",i.dlgContainer.style.display="flex",ee([i.dlgOverlay],"e-fade"),d(i.targetEle))Z([document.body],[Mi,ei]);else{i.targetEle===document.body?i.dlgContainer.style.position="fixed":i.dlgContainer.style.position="absolute",i.dlgOverlay.style.position="absolute";var s=i.getTargetContainer(i.target);if(s instanceof Element){var a=window.getComputedStyle(s);a.getPropertyValue("direction")==="rtl"?i.element.style.position="absolute":i.element.style.position="relative"}else i.element.style.position="relative";Z([i.targetEle],[Mi,ei])}var l={name:i.animationSettings.effect==="None"&&qt==="Enable"?"ZoomIn":i.animationSettings.effect+"In",duration:i.animationSettings.duration,delay:i.animationSettings.delay},h=i.isModal?i.element.parentElement:i.element;if(i.calculatezIndex&&(i.setzIndex(h,!0),Ce(i.element,{zIndex:i.zIndex}),i.isModal&&i.setOverlayZindex(i.zIndex)),i.animationSettings.effect==="None"&&qt==="Enable"?i.popupObj.show(l):i.animationSettings.effect==="None"?i.popupObj.show():i.popupObj.show(l),i.isModal){var s=i.getTargetContainer(i.target);if(s instanceof Element){var a=window.getComputedStyle(s);a.getPropertyValue("direction")==="rtl"&&!i.IsDragStop&&i.setPopupPosition()}}i.dialogOpen=!0;var c=i.isProtectedOnChange;i.isProtectedOnChange=!0,i.visible=!0,i.preventVisibility=!0,i.isProtectedOnChange=c}})}this.isReact&&this.renderReactTemplates()}},t.prototype.hide=function(e){var i=this;if(this.element.classList.contains(ma)&&this.preventVisibility){var r=he()?{cancel:!1,isInteracted:!!e,element:this.element,container:this.isModal?this.dlgContainer:this.element,event:e}:{cancel:!1,isInteracted:!!e,element:this.element,target:this.target,container:this.isModal?this.dlgContainer:this.element,event:e,closedBy:this.dlgClosedBy};this.closeArgs=r,this.trigger("beforeClose",r,function(n){if(!n.cancel){i.enableResize&&i.unWireWindowResizeEvent();var s={name:i.animationSettings.effect==="None"&&qt==="Enable"?"ZoomOut":i.animationSettings.effect+"Out",duration:i.animationSettings.duration,delay:i.animationSettings.delay};i.animationSettings.effect==="None"&&qt==="Enable"?i.popupObj.hide(s):i.animationSettings.effect==="None"?i.popupObj.hide():i.popupObj.hide(s),setTimeout(function(){i.isModal&&!d(i.targetEle)&&i.targetEle.classList.contains(Mi)&&i.targetEle.classList.contains(ei)&&ee([i.targetEle],[Mi,ei]),document.body.classList.contains(Mi)&&document.body.classList.contains(ei)&&ee([document.body],[Mi,ei])},i.animationSettings.duration+i.animationSettings.delay),i.dialogOpen=!1;var a=i.isProtectedOnChange;i.isProtectedOnChange=!0,i.visible=!1,i.preventVisibility=!1,i.isProtectedOnChange=a}i.dlgClosedBy=Lc})}},t.prototype.fullScreen=function(e){var i=this.element.offsetTop,r=this.element.offsetLeft;if(e){this.isModal||(this.element.style.top=document.scrollingElement.scrollTop+"px"),Z([this.element],ba);var n=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=d(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=n,Z([document.body],[Mi,ei]),this.allowDragging&&!d(this.dragObj)&&this.dragObj.destroy()}else ee([this.element],ba),ee([document.body],[Mi,ei]),this.allowDragging&&!d(this.headerContent)&&this.setAllowDragging();return e},t.prototype.getButtons=function(e){return d(e)?this.btnObj:this.btnObj[e]},t.prototype.unWireButtonEvents=function(){if(this.buttons.length>0&&this.footerTemplate===""&&this.ftrTemplateContent)for(var e=0;e<this.buttons.length;e++)this.buttons[e].click&&typeof this.buttons[e].click=="function"&&this.ftrTemplateContent.children[e]&&I.remove(this.ftrTemplateContent.children[e],"click",this.buttons[e].click)},t.prototype.destroyButtons=function(){if(!d(this.btnObj))for(var e=0;e<this.btnObj.length;e++)this.btnObj[e]&&!this.btnObj[e].isDestroyed&&this.btnObj[e].destroy()},Te([w("")],t.prototype,"content",void 0),Te([w(!0)],t.prototype,"enableHtmlSanitizer",void 0),Te([w(!1)],t.prototype,"enablePersistence",void 0),Te([w(!1)],t.prototype,"showCloseIcon",void 0),Te([w(!1)],t.prototype,"isModal",void 0),Te([w("")],t.prototype,"header",void 0),Te([w(!0)],t.prototype,"visible",void 0),Te([w(!1)],t.prototype,"enableResize",void 0),Te([w(["South-East"])],t.prototype,"resizeHandles",void 0),Te([w("auto")],t.prototype,"height",void 0),Te([w("")],t.prototype,"minHeight",void 0),Te([w("100%")],t.prototype,"width",void 0),Te([w("")],t.prototype,"cssClass",void 0),Te([w(1e3)],t.prototype,"zIndex",void 0),Te([w(null)],t.prototype,"target",void 0),Te([w("")],t.prototype,"footerTemplate",void 0),Te([w(!1)],t.prototype,"allowDragging",void 0),Te([mi([{}],ET)],t.prototype,"buttons",void 0),Te([w(!0)],t.prototype,"closeOnEscape",void 0),Te([it({},OT)],t.prototype,"animationSettings",void 0),Te([it({X:"center",Y:"center"},em)],t.prototype,"position",void 0),Te([Q()],t.prototype,"created",void 0),Te([Q()],t.prototype,"open",void 0),Te([Q()],t.prototype,"beforeSanitizeHtml",void 0),Te([Q()],t.prototype,"beforeOpen",void 0),Te([Q()],t.prototype,"close",void 0),Te([Q()],t.prototype,"beforeClose",void 0),Te([Q()],t.prototype,"dragStart",void 0),Te([Q()],t.prototype,"dragStop",void 0),Te([Q()],t.prototype,"drag",void 0),Te([Q()],t.prototype,"overlayClick",void 0),Te([Q()],t.prototype,"resizeStart",void 0),Te([Q()],t.prototype,"resizing",void 0),Te([Q()],t.prototype,"resizeStop",void 0),Te([Q()],t.prototype,"destroyed",void 0),t=Te([Qe],t),t}(dt),mv;(function(o){function t(c){var u=xe("div",{className:om});document.body.appendChild(u);var p,f=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return typeof c=="string"?p=i({content:c,position:{X:"center",Y:"top"},isModal:!0,header:fv,buttons:f},u):p=i(r(c),u),p.close=function(){c&&c.close&&c.close.apply(p),p.destroy(),p.element.classList.contains("e-dlg-modal")?(p.element.parentElement.remove(),p.target.classList.remove(gv)):p.element.remove()},p}o.alert=t;function e(c){var u=xe("div",{className:am});document.body.appendChild(u);var p,f=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},{buttonModel:{content:"Cancel"},click:function(){this.hide()}}];return typeof c=="string"?p=i({position:{X:"center",Y:"top"},content:c,isModal:!0,header:fv,buttons:f},u):p=i(n(c),u),p.close=function(){c&&c.close&&c.close.apply(p),p.destroy(),p.element.classList.contains("e-dlg-modal")?(p.element.parentElement.remove(),p.target.classList.remove(gv)):p.element.remove()},p}o.confirm=e;function i(c,u){var p=new rn(c);return p.appendTo(u),p}function r(c){var u={};return u.buttons=[],u=s(u,c),u=a(u,c),u}function n(c){var u={};return u.buttons=[],u=s(u,c),u=l(u,c),u}function s(c,u){return c.header=d(u.title)?null:u.title,c.content=d(u.content)?"":u.content,c.isModal=d(u.isModal)?!0:u.isModal,c.showCloseIcon=d(u.showCloseIcon)?!1:u.showCloseIcon,c.allowDragging=d(u.isDraggable)?!1:u.isDraggable,c.closeOnEscape=d(u.closeOnEscape)?!1:u.closeOnEscape,c.position=d(u.position)?{X:"center",Y:"top"}:u.position,c.animationSettings=d(u.animationSettings)?{effect:"Fade",duration:400,delay:0}:u.animationSettings,c.cssClass=d(u.cssClass)?"":u.cssClass,c.zIndex=d(u.zIndex)?1e3:u.zIndex,c.open=d(u.open)?null:u.open,c.width=d(u.width)?"auto":u.width,c.height=d(u.height)?"auto":u.height,c}function a(c,u){var p=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return d(u.okButton)?c.buttons=p:c.buttons[0]=h(c.buttons[0],u.okButton,p[0]),c}function l(c,u){var p={buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},f={buttonModel:{content:"Cancel"},click:function(){this.hide()}};return d(u.okButton)?c.buttons[0]=p:c.buttons[0]=h(c.buttons[0],u.okButton,p),d(u.cancelButton)?c.buttons[1]=f:c.buttons[1]=h(c.buttons[1],u.cancelButton,f),c}function h(c,u,p){var f=p;return d(u.text)||(f.buttonModel.content=u.text),d(u.icon)||(f.buttonModel.iconCss=u.icon),d(u.cssClass)||(f.buttonModel.cssClass=u.cssClass),d(u.click)||(f.click=u.click),d(u.isFlat)||(f.isFlat=u.isFlat),f}})(mv||(mv={}));var lm=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(t,e)};return function(t,e){o(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),ke=function(o,t,e,i){var r=arguments.length,n=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,e,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,e,n):s(t,e))||n);return r>3&&n&&Object.defineProperty(t,e,n),n},_T=1500,VT=500,yv=0,Cv=8,QT=2,Hi=2,Pc="e-tooltip",bv="e-rtl",WT="e-bigger",Mv="e-icons",Iv="e-tooltip-close",kc="e-tooltip-wrap",Sv="e-tip-content",_n="e-arrow-tip",Tv="e-arrow-tip-outer",Ma="e-arrow-tip-inner",zs="e-tip-bottom",zc="e-tip-top",wv="e-tip-left",Rc="e-tip-right",Fc="e-popup",Rs="e-popup-open",Bc="e-popup-close",Ia="e-lib",XT="e-hidden",Dv="e-tooltip-popup-container",qT=function(o){lm(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return ke([w({effect:"FadeIn",duration:150,delay:0})],t.prototype,"open",void 0),ke([w({effect:"FadeOut",duration:150,delay:0})],t.prototype,"close",void 0),t}(Ue),nn=function(o){lm(t,o);function t(e,i){var r=o.call(this,e,i)||this;return r.mouseMoveEvent=null,r.mouseMoveTarget=null,r.containerElement=null,r.isBodyContainer=!0,r}return t.prototype.initialize=function(){this.formatPosition(),Z([this.element],Pc)},t.prototype.formatPosition=function(){var e,i;this.position&&(this.position.indexOf("Top")===0||this.position.indexOf("Bottom")===0?(e=this.position.split(/(?=[A-Z])/),this.tooltipPositionY=e[0],this.tooltipPositionX=e[1]):(i=this.position.split(/(?=[A-Z])/),this.tooltipPositionX=i[0],this.tooltipPositionY=i[1]))},t.prototype.renderArrow=function(){this.setTipClass(this.position);var e=this.createElement("div",{className:_n+" "+this.tipClass});e.appendChild(this.createElement("div",{className:Tv+" "+this.tipClass})),e.appendChild(this.createElement("div",{className:Ma+" "+this.tipClass})),this.tooltipEle.appendChild(e)},t.prototype.setTipClass=function(e){e.indexOf("Right")===0?this.tipClass=wv:e.indexOf("Bottom")===0?this.tipClass=zc:e.indexOf("Left")===0?this.tipClass=Rc:this.tipClass=zs},t.prototype.renderPopup=function(e){var i=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(e);this.tooltipEle.classList.remove(Ia),this.popupObj=new Ar(this.tooltipEle,{height:this.height,width:this.width,position:{X:i.left,Y:i.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})},t.prototype.getScalingFactor=function(e){if(!e)return{x:1,y:1};var i={x:1,y:1},r=e.closest('[style*="transform: scale"]');if(r&&r!==this.tooltipEle&&r.contains(this.tooltipEle)){var n=window.getComputedStyle(r),s=n.getPropertyValue("transform"),a=s.match(/matrix\(([^)]+)\)/)[1].split(",").map(parseFloat);i.x=a[0],i.y=a[3]}return i},t.prototype.getTooltipPosition=function(e){this.tooltipEle.style.display="block";var i=this.element.closest('[style*="zoom"]');i&&(i.contains(this.tooltipEle)||(this.tooltipEle.style.zoom=getComputedStyle(i).zoom));var r=Lt(e,this.tooltipPositionX,this.tooltipPositionY,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect()),n=this.getScalingFactor(e),s=this.calculateTooltipOffset(this.position,n.x,n.y),a=this.calculateElementPosition(r,s),l=a[0],h=a[1],c=this.collisionFlipFit(e,l,h);return c.left=c.left/n.x,c.top=c.top/n.y,this.tooltipEle.style.display="",c},t.prototype.windowResize=function(){this.reposition(this.findTarget())},t.prototype.reposition=function(e){if(this.popupObj&&e){var i=this.getTooltipPosition(e);this.popupObj.position={X:i.left,Y:i.top},this.popupObj.dataBind()}},t.prototype.openPopupHandler=function(){!this.mouseTrail&&this.needTemplateReposition()&&this.reposition(this.findTarget()),this.trigger("afterOpen",this.tooltipEventArgs),this.tooltipEventArgs=null},t.prototype.closePopupHandler=function(){this.isReact&&!(this.opensOn==="Click"||typeof this.content=="function")&&this.clearTemplate(["content"]),this.clear();var e={type:this.tooltipEventArgs.event?this.tooltipEventArgs.event.type:null,cancel:!1,target:this.tooltipEventArgs.target,event:this.tooltipEventArgs.event?this.tooltipEventArgs.event:null,element:this.tooltipEle,isInteracted:!d(this.tooltipEventArgs.event)};this.trigger("afterClose",e),e=null},t.prototype.calculateTooltipOffset=function(e,i,r){i===void 0&&(i=1),r===void 0&&(r=1);var n={top:0,left:0},s,a,l,h,c,u,p,f;if(i!==1||r!==1){var g=this.tooltipEle.getBoundingClientRect(),v=void 0;l=Math.round(g.width),h=Math.round(g.height),c=ae("."+_n,this.tooltipEle),c&&(v=c.getBoundingClientRect()),s=c?Math.round(v.width):0,a=c?Math.round(v.height):0,u=this.showTipPointer?yv:Cv,p=a/2+Hi+(h-this.tooltipEle.clientHeight*r),f=s/2+Hi+(l-this.tooltipEle.clientWidth*i)}else l=this.tooltipEle.offsetWidth,h=this.tooltipEle.offsetHeight,c=ae("."+_n,this.tooltipEle),s=c?c.offsetWidth:0,a=c?c.offsetHeight:0,u=this.showTipPointer?yv:Cv,p=a/2+Hi+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),f=s/2+Hi+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(u+=QT),e){case"RightTop":n.left+=s+u,n.top-=h-p;break;case"RightCenter":n.left+=s+u,n.top-=h/2;break;case"RightBottom":n.left+=s+u,n.top-=p;break;case"BottomRight":n.top+=a+u,n.left-=f;break;case"BottomCenter":n.top+=a+u,n.left-=l/2;break;case"BottomLeft":n.top+=a+u,n.left-=l-f;break;case"LeftBottom":n.left-=s+l+u,n.top-=p;break;case"LeftCenter":n.left-=s+l+u,n.top-=h/2;break;case"LeftTop":n.left-=s+l+u,n.top-=h-p;break;case"TopLeft":n.top-=h+a+u,n.left-=l-f;break;case"TopRight":n.top-=h+a+u,n.left-=f;break;default:n.top-=h+a+u,n.left-=l/2;break}return n.left+=this.offsetX,n.top+=this.offsetY,n},t.prototype.updateTipPosition=function(e){var i=Se("."+_n+",."+Tv+",."+Ma,this.tooltipEle),r=[zs,zc,wv,Rc];ee(i,r),this.setTipClass(e),Z(i,this.tipClass)},t.prototype.adjustArrow=function(e,i,r,n){var s=ae("."+_n,this.tooltipEle);if(!(this.showTipPointer===!1||s===null)){this.updateTipPosition(i);var a,l;this.tooltipEle.style.display="block";var h=this.tooltipEle.clientWidth,c=this.tooltipEle.clientHeight,u=ae("."+Ma,this.tooltipEle),p=s.offsetWidth,f=s.offsetHeight;if(this.tooltipEle.style.display="",this.tipClass===zs||this.tipClass===zc){if(this.tipClass===zs?(l="99.9%",u.style.top="-"+(f-2)+"px"):(l=-(f-1)+"px",u.style.top="-"+(f-6)+"px"),e){var g=r!=="Center"||h>e.offsetWidth||this.mouseTrail;g&&r==="Left"||!g&&this.tipPointerPosition==="End"?a=h-p-Hi+"px":g&&r==="Right"||!g&&this.tipPointerPosition==="Start"?a=Hi+"px":g&&(this.tipPointerPosition==="End"||this.tipPointerPosition==="Start")?a=this.tipPointerPosition==="End"?e.offsetWidth+(this.tooltipEle.offsetWidth-e.offsetWidth)/2-p/2-Hi+"px":(this.tooltipEle.offsetWidth-e.offsetWidth)/2-p/2+Hi+"px":a=h/2-p/2+"px"}}else{this.tipClass===Rc?(a="99.9%",u.style.left="-"+(p-2)+"px"):(a=-(p-1)+"px",u.style.left=-p+(p-2)+"px");var g=n!=="Center"||c>e.offsetHeight||this.mouseTrail;g&&n==="Top"||!g&&this.tipPointerPosition==="End"?l=c-f-Hi+"px":g&&n==="Bottom"||!g&&this.tipPointerPosition==="Start"?l=Hi+"px":l=c/2-f/2+"px"}s.style.top=l,s.style.left=a}},t.prototype.renderContent=function(e){var i=this,r=ae("."+Sv,this.tooltipEle);if(this.cssClass&&Z([this.tooltipEle],this.cssClass.split(" ")),e&&!d(e.getAttribute("title"))&&(e.setAttribute("data-content",e.getAttribute("title")),e.removeAttribute("title")),d(this.content))e&&!d(e.getAttribute("data-content"))&&(r.innerHTML=e.getAttribute("data-content"));else if(r.innerHTML="",this.content instanceof HTMLElement)r.appendChild(this.content);else if(typeof this.content=="string")if(this.isAngular?this.setProperties({content:nt.sanitize(this.content)},!0):this.content=this.enableHtmlSanitizer?nt.sanitize(this.content):this.content,this.enableHtmlParse){var n=rt(this.content),s=n({},this,"content",this.element.id+"content",void 0,void 0,r,this.root);s&&He(s,r)}else r.textContent=this.content;else{var a=rt(this.content),s=a({},this,"content",this.element.id+"content",void 0,void 0,r);s&&(this.isAngular&&setTimeout(function(){i.reposition(e)},1),He(s,r)),this.renderReactTemplates()}},t.prototype.renderCloseIcon=function(){if(!this.isSticky){var e=this.tooltipEle.querySelector("."+Mv+"."+Iv);e&&ct(e);return}var i=this.createElement("div",{className:Mv+" "+Iv,attrs:{role:"button","aria-label":"Press escape to close the Tooltip"}});this.tooltipEle.appendChild(i),I.add(i,D.touchStartEvent,this.onStickyClose,this)},t.prototype.addDescribedBy=function(e,i){var r=(e.getAttribute("aria-describedby")||"").split(/\s+/);r.indexOf(i)<0&&r.push(i),ye(e,{"aria-describedby":r.join(" ").trim(),"data-tooltip-id":i})},t.prototype.removeDescribedBy=function(e){var i=e.getAttribute("data-tooltip-id"),r=(e.getAttribute("aria-describedby")||"").split(/\s+/),n=r.indexOf(i);n!==-1&&r.splice(n,1),e.removeAttribute("data-tooltip-id");var s=r.join(" ").trim();s?e.setAttribute("aria-describedby",s):e.removeAttribute("aria-describedby")},t.prototype.tapHoldHandler=function(e){clearTimeout(this.autoCloseTimer),this.targetHover(e.originalEvent)},t.prototype.touchEndHandler=function(){var e=this;if(!this.isSticky){var i=function(){e.close()};this.autoCloseTimer=setTimeout(i,_T)}},t.prototype.targetClick=function(e){var i;if(this.target?i=ge(e.target,this.target):i=this.element,!d(i)){var r=e;i.getAttribute("data-tooltip-id")===null?r.type==="mousedown"&&r.button===2||this.targetHover(e):this.isSticky||this.hideTooltip(this.animation.close,e,i)}},t.prototype.targetHover=function(e){var i;if(this.target?i=ge(e.target,this.target):i=this.element,!(d(i)||i.getAttribute("data-tooltip-id")!==null&&this.closeDelay===0)){for(var r=[].slice.call(Se('[data-tooltip-id= "'+this.ctrlId+'_content"]',document)),n=0,s=r;n<s.length;n++){var a=s[n];this.restoreElement(a)}this.showTooltip(i,this.animation.open,e)}},t.prototype.mouseMoveBeforeOpen=function(e){this.mouseMoveEvent=e},t.prototype.mouseMoveBeforeRemove=function(){this.mouseMoveTarget&&I.remove(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen)},t.prototype.showTooltip=function(e,i,r){var n=this;clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.openDelay&&this.mouseTrail&&(this.mouseMoveBeforeRemove(),this.mouseMoveTarget=e,I.add(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen,this)),this.tooltipEventArgs={type:r?r.type:null,cancel:!1,target:e,event:r||null,element:this.tooltipEle,isInteracted:!d(r)};var s=function(a){n.beforeRenderCallback(a,e,r,i)};this.trigger("beforeRender",this.tooltipEventArgs,s.bind(this))},t.prototype.beforeRenderCallback=function(e,i,r,n){e.cancel?(this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove()):(this.isHidden=!1,d(this.tooltipEle)?(this.ctrlId=this.element.getAttribute("id")?Je(this.element.getAttribute("id")):Je("tooltip"),this.tooltipEle=this.createElement("div",{className:kc+" "+Fc+" "+Ia,attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"}}),this.tooltipEle.style.width=le(this.width),this.tooltipEle.style.height=le(this.height),this.tooltipEle.style.position="absolute",this.tooltipBeforeRender(i,this),this.tooltipAfterRender(i,r,n,this)):i&&(this.adjustArrow(i,this.position,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(i,this.ctrlId+"_content"),this.renderContent(i),Gt.stop(this.tooltipEle),this.reposition(i),this.tooltipAfterRender(i,r,n,this)))},t.prototype.appendContainer=function(e){typeof this.container=="string"?this.container==="body"?this.containerElement=document.body:(this.isBodyContainer=!1,this.containerElement=ae(this.container,document)):this.container instanceof HTMLElement&&(this.containerElement=this.container,this.isBodyContainer=this.containerElement.tagName==="BODY"),this.isBodyContainer||Z([this.containerElement],Dv),this.containerElement.appendChild(e.tooltipEle)},t.prototype.tooltipBeforeRender=function(e,i){e&&(D.isDevice&&Z([i.tooltipEle],WT),i.width!=="auto"&&(i.tooltipEle.style.maxWidth=le(i.width)),i.tooltipEle.appendChild(i.createElement("div",{className:Sv})),this.appendContainer(i),ee([i.tooltipEle],XT),i.addDescribedBy(e,i.ctrlId+"_content"),i.renderContent(e),Z([i.tooltipEle],Rs),i.showTipPointer&&i.renderArrow(),i.renderCloseIcon(),i.renderPopup(e),i.adjustArrow(e,i.position,i.tooltipPositionX,i.tooltipPositionY),Gt.stop(i.tooltipEle),i.reposition(e))},t.prototype.tooltipAfterRender=function(e,i,r,n){if(e){ee([n.tooltipEle],Rs),Z([n.tooltipEle],Bc),n.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:e,event:i||null,element:n.tooltipEle,isInteracted:!d(i)},n.needTemplateReposition()&&!n.mouseTrail&&(r.effect==="None"||r.effect==="FadeIn"||this.isReact&&typeof n.content!="string")&&(n.tooltipEle.style.display="none");var s=function(a){n.beforeOpenCallback(a,e,r,i)};n.trigger("beforeOpen",n.tooltipEventArgs,s.bind(n))}},t.prototype.beforeOpenCallback=function(e,i,r,n){var s=this;if(e.cancel)this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove(),this.restoreElement(i);else{var a={name:r.effect==="None"&&qt==="Enable"?"FadeIn":this.animation.open.effect,duration:r.duration,delay:r.delay,timingFunction:"easeOut"};if(r.effect==="None"&&(a=void 0),this.openDelay>0){var l=function(){s.mouseTrail&&I.add(i,"mousemove touchstart mouseenter",s.onMouseMove,s),s.popupObj&&(s.popupObj.show(a,i),s.mouseMoveEvent&&s.mouseTrail&&s.onMouseMove(s.mouseMoveEvent))};this.showTimer=setTimeout(l,this.openDelay)}else this.popupObj&&this.popupObj.show(a,i)}n&&this.wireMouseEvents(n,i)},t.prototype.needTemplateReposition=function(){var e=this;return!d(e.viewContainerRef)&&typeof e.viewContainerRef!="string"||this.isReact},t.prototype.checkCollision=function(e,i,r){var n={left:i,top:r,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},s=Ys(this.tooltipEle,this.checkCollideTarget(),i,r);return s.length>0&&(n.horizontal=s.indexOf("left")>=0?"Right":s.indexOf("right")>=0?"Left":this.tooltipPositionX,n.vertical=s.indexOf("top")>=0?"Bottom":s.indexOf("bottom")>=0?"Top":this.tooltipPositionY),n},t.prototype.calculateElementPosition=function(e,i){return[this.isBodyContainer?e.left+i.left:e.left-this.containerElement.getBoundingClientRect().left+i.left+window.pageXOffset+this.containerElement.scrollLeft,this.isBodyContainer?e.top+i.top:e.top-this.containerElement.getBoundingClientRect().top+i.top+window.pageYOffset+this.containerElement.scrollTop]},t.prototype.collisionFlipFit=function(e,i,r){var n=this.checkCollision(e,i,r),s=n.position;if(this.tooltipPositionY!==n.vertical&&(s=this.position.indexOf("Bottom")===0||this.position.indexOf("Top")===0?n.vertical+this.tooltipPositionX:this.tooltipPositionX+n.vertical),this.tooltipPositionX!==n.horizontal&&(s.indexOf("Left")===0&&(n.vertical=s==="LeftTop"||s==="LeftCenter"?"Top":"Bottom",s=n.vertical+"Left"),s.indexOf("Right")===0&&(n.vertical=s==="RightTop"||s==="RightCenter"?"Top":"Bottom",s=n.vertical+"Right"),n.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:e,event:null,element:this.tooltipEle,collidedPosition:s},this.trigger("beforeCollision",this.tooltipEventArgs),this.tooltipEventArgs.cancel)s=this.position;else{var a=n.vertical,l=n.horizontal;if(n.position!==s){var h=Lt(e,l,a,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect());this.adjustArrow(e,s,l,a);var c=this.getScalingFactor(e),u=this.calculateTooltipOffset(s,c.x,c.y);u.top-=this.getOffSetPosition("TopBottom",s,this.offsetY),u.left-=this.getOffSetPosition("RightLeft",s,this.offsetX),n.position=s;var p=this.calculateElementPosition(h,u);n.left=p[0],n.top=p[1]}else this.adjustArrow(e,s,l,a)}var f={left:n.left,top:n.top},g=this.isBodyContainer?Qc(this.tooltipEle,this.checkCollideTarget(),{X:!0,Y:this.windowCollision},f):f;this.tooltipEle.style.display="block";var v=ae("."+_n,this.tooltipEle);if(this.showTipPointer&&v!=null&&(s.indexOf("Bottom")===0||s.indexOf("Top")===0)){var y=parseInt(v.style.left,10)-(g.left-n.left);y<0?y=0:y+v.offsetWidth>this.tooltipEle.clientWidth&&(y=this.tooltipEle.clientWidth-v.offsetWidth),v.style.left=y.toString()+"px"}return this.tooltipEle.style.display="",f.left=g.left,f.top=g.top,f},t.prototype.getOffSetPosition=function(e,i,r){return e.indexOf(this.position.split(/(?=[A-Z])/)[0])!==-1&&e.indexOf(i.split(/(?=[A-Z])/)[0])!==-1?2*r:0},t.prototype.checkCollideTarget=function(){return!this.windowCollision&&this.target?this.element:null},t.prototype.hideTooltip=function(e,i,r){var n=this;if(this.closeDelay>0){clearTimeout(this.hideTimer),clearTimeout(this.showTimer);var s=function(){n.closeDelay&&n.tooltipEle&&n.isTooltipOpen||n.tooltipHide(e,i,r)};this.hideTimer=setTimeout(s,this.closeDelay)}else this.tooltipHide(e,i,r)},t.prototype.tooltipHide=function(e,i,r){var n=this,s;i?s=this.target?r||i.target:this.element:s=ae('[data-tooltip-id= "'+this.ctrlId+'_content"]',document),this.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:s,event:i||null,element:this.tooltipEle,isInteracted:!d(i)},this.trigger("beforeClose",this.tooltipEventArgs,function(a){a.cancel?n.isHidden=!1:(n.mouseMoveBeforeRemove(),n.popupHide(e,s,i))})},t.prototype.popupHide=function(e,i,r){i&&r&&this.restoreElement(i),this.isHidden=!0;var n={name:e.effect==="None"&&qt==="Enable"?"FadeOut":this.animation.close.effect,duration:e.duration,delay:e.delay,timingFunction:"easeIn"};e.effect==="None"&&(n=void 0),this.popupObj&&this.popupObj.hide(n)},t.prototype.restoreElement=function(e){this.unwireMouseEvents(e),d(e.getAttribute("data-content"))||(e.setAttribute("title",e.getAttribute("data-content")),e.removeAttribute("data-content")),this.removeDescribedBy(e)},t.prototype.clear=function(){var e=this.findTarget();e&&this.restoreElement(e),this.tooltipEle&&(ee([this.tooltipEle],Bc),Z([this.tooltipEle],Rs)),this.isHidden&&(this.popupObj&&this.popupObj.destroy(),this.tooltipEle&&ct(this.tooltipEle),this.tooltipEle=null,this.popupObj=null)},t.prototype.tooltipHover=function(){this.tooltipEle&&(this.isTooltipOpen=!0)},t.prototype.tooltipMouseOut=function(e){this.isTooltipOpen=!1,this.hideTooltip(this.animation.close,e,this.findTarget())},t.prototype.onMouseOut=function(e){var i=e.relatedTarget;if(i&&!this.mouseTrail){var r=ge(i,"."+kc+"."+Ia+"."+Fc);r?I.add(r,"mouseleave",this.tooltipElementMouseOut,this):(this.hideTooltip(this.animation.close,e,this.findTarget()),this.closeDelay===0&&(this.animation.close.effect==="None"||this.isReact&&typeof this.content!="string")&&this.clear())}else this.hideTooltip(this.animation.close,e,this.findTarget()),this.clear();this.popupObj&&!this.popupObj.element.classList.contains(Rs)&&this.clear()},t.prototype.tooltipElementMouseOut=function(e){this.hideTooltip(this.animation.close,e,this.findTarget()),I.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()},t.prototype.onStickyClose=function(){this.close()},t.prototype.onMouseMove=function(e){var i=0,r=0;if(e.type.indexOf("touch")>-1?(e.preventDefault(),i=e.touches[0].pageX,r=e.touches[0].pageY):(i=e.pageX,r=e.pageY),!d(this.tooltipEle)){Gt.stop(this.tooltipEle),ee([this.tooltipEle],Bc),Z([this.tooltipEle],Rs),this.adjustArrow(e.target,this.position,this.tooltipPositionX,this.tooltipPositionY);var n=this.getScalingFactor(e.target),s=this.calculateTooltipOffset(this.position,n.x,n.y),a=i+s.left+this.offsetX,l=r+s.top+this.offsetY,h=this.checkCollision(e.target,a,l);if(this.tooltipPositionX!==h.horizontal||this.tooltipPositionY!==h.vertical){var c=this.position.indexOf("Bottom")===0||this.position.indexOf("Top")===0?h.vertical+h.horizontal:h.horizontal+h.vertical;h.position=c,this.adjustArrow(e.target,h.position,h.horizontal,h.vertical);var u=this.calculateTooltipOffset(h.position,n.x,n.y);h.left=i+u.left-this.offsetX,h.top=r+u.top-this.offsetY}this.tooltipEle.style.left=h.left+"px",this.tooltipEle.style.top=h.top+"px"}},t.prototype.keyDown=function(e){this.tooltipEle&&e.keyCode===27&&this.close()},t.prototype.touchEnd=function(e){this.tooltipEle&&ge(e.target,"."+Pc)===null&&!this.isSticky&&this.close()},t.prototype.scrollHandler=function(e){this.tooltipEle&&!this.isSticky&&!ge(e.target,"."+kc+"."+Ia+"."+Fc)&&!this.isSticky&&this.close()},t.prototype.render=function(){this.initialize(),this.wireEvents(this.opensOn),this.renderComplete()},t.prototype.preRender=function(){this.tipClass=zs,this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0},t.prototype.wireEvents=function(e){for(var i=this.getTriggerList(e),r=0,n=i;r<n.length;r++){var s=n[r];if(s==="Custom")return;s==="Focus"&&this.wireFocusEvents(),s==="Click"&&I.add(this.element,D.touchStartEvent,this.targetClick,this),s==="Hover"&&(D.isDevice?(this.touchModule=new Ir(this.element,{tapHoldThreshold:VT,tapHold:this.tapHoldHandler.bind(this)}),I.add(this.element,D.touchEndEvent,this.touchEndHandler,this)):I.add(this.element,"mouseover",this.targetHover,this))}this.windowResizeBound=this.windowResize.bind(this),this.keyDownBound=this.keyDown.bind(this),this.touchEndBound=this.touchEnd.bind(this),this.scrollWheelBound=this.scrollHandler.bind(this),document.addEventListener("wheel",this.scrollWheelBound),document.addEventListener("scroll",this.scrollWheelBound),document.addEventListener("touchend",this.touchEndBound),document.addEventListener("keydown",this.keyDownBound),window.addEventListener("resize",this.windowResizeBound)},t.prototype.getTriggerList=function(e){return e?(e==="Auto"&&(e=D.isDevice?"Hover":"Hover Focus"),e.split(" ")):[]},t.prototype.wireFocusEvents=function(){if(d(this.target))I.add(this.element,"focusin",this.targetHover,this);else{var e=[].slice.call(Se(this.target,this.element));if(this.targetsList=e,!d(this.targetsList)&&this.targetsList.length>0)for(var i=0,r=e;i<r.length;i++){var n=r[i];I.add(n,"focus",this.targetHover,this)}else I.add(this.element,"focusin",this.targetHover,this)}},t.prototype.wireMouseEvents=function(e,i){this.tooltipEle&&(this.isSticky||(e.type==="focus"&&I.add(i,"blur",this.onMouseOut,this),e.type==="focusin"&&I.add(i,"focusout",this.onMouseOut,this),e.type==="mouseover"&&I.add(i,"mouseleave",this.onMouseOut,this),this.closeDelay&&(I.add(this.tooltipEle,"mouseenter",this.tooltipHover,this),I.add(this.tooltipEle,"mouseleave",this.tooltipMouseOut,this))),this.mouseTrail&&this.openDelay===0&&I.add(i,"mousemove touchstart mouseenter",this.onMouseMove,this))},t.prototype.unwireEvents=function(e){for(var i=this.getTriggerList(e),r=0,n=i;r<n.length;r++){var s=n[r];if(s==="Custom")return;s==="Focus"&&this.unwireFocusEvents(),s==="Click"&&I.remove(this.element,D.touchStartEvent,this.targetClick),s==="Hover"&&(D.isDevice?(this.touchModule&&this.touchModule.destroy(),I.remove(this.element,D.touchEndEvent,this.touchEndHandler)):I.remove(this.element,"mouseover",this.targetHover))}document.removeEventListener("touchend",this.touchEndBound),this.touchEndBound=null,document.removeEventListener("wheel",this.scrollWheelBound),document.removeEventListener("scroll",this.scrollWheelBound),this.scrollWheelBound=null,window.removeEventListener("resize",this.windowResizeBound),this.windowResizeBound=null,document.removeEventListener("keydown",this.keyDownBound),this.keyDownBound=null},t.prototype.unwireFocusEvents=function(){if(d(this.target))I.remove(this.element,"focusin",this.targetHover);else{var e=[].slice.call(Se(this.target,this.element));if(!d(this.targetsList)&&this.targetsList.length>0)for(var i=0,r=e;i<r.length;i++){var n=r[i];I.remove(n,"focus",this.targetHover)}else I.remove(this.element,"focusin",this.targetHover)}},t.prototype.unwireMouseEvents=function(e){if(!this.isSticky){for(var i=this.getTriggerList(this.opensOn),r=0,n=i;r<n.length;r++){var s=n[r];s==="Focus"&&(I.remove(e,"blur",this.onMouseOut),I.remove(e,"focusout",this.onMouseOut)),s==="Hover"&&!D.isDevice&&I.remove(e,"mouseleave",this.onMouseOut)}this.closeDelay&&(I.remove(e,"mouseenter",this.tooltipHover),I.remove(e,"mouseleave",this.tooltipMouseOut))}this.mouseTrail&&I.remove(e,"mousemove touchstart mouseenter",this.onMouseMove)},t.prototype.findTarget=function(){var e=ae('[data-tooltip-id= "'+this.ctrlId+'_content"]',document);return e},t.prototype.getModuleName=function(){return"tooltip"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.onPropertyChanged=function(e,i){for(var r=this.findTarget(),n=0,s=Object.keys(e);n<s.length;n++){var a=s[n];switch(a){case"width":this.tooltipEle&&r&&(this.tooltipEle.style.width=this.tooltipEle.style.maxWidth=le(e.width),this.reposition(r));break;case"height":this.tooltipEle&&r&&(this.tooltipEle.style.height=le(e.height),this.reposition(r));break;case"content":this.tooltipEle&&this.renderContent();break;case"opensOn":this.unwireEvents(i.opensOn),this.wireEvents(e.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&r){var l=ae("."+Ma,this.tooltipEle);l&&(l.style.top=l.style.left=null),this.reposition(r)}break;case"tipPointerPosition":this.tooltipEle&&r&&this.reposition(r);break;case"offsetX":if(this.tooltipEle){var h=e.offsetX-i.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+h).toString()+"px"}break;case"offsetY":if(this.tooltipEle){var c=e.offsetY-i.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+c).toString()+"px"}break;case"cssClass":this.tooltipEle&&(i.cssClass&&ee([this.tooltipEle],i.cssClass.split(" ")),e.cssClass&&Z([this.tooltipEle],e.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?Z([this.tooltipEle],bv):ee([this.tooltipEle],bv));break;case"isSticky":this.tooltipEle&&r&&(this.renderCloseIcon(),this.reposition(r));break;case"container":d(this.containerElement)||ee([this.containerElement],Dv),this.container=e.container,this.tooltipEle&&r&&(this.appendContainer(this),this.reposition(r))}}},t.prototype.open=function(e,i){d(i)&&(i=this.animation.open),d(e)&&(e=this.element),e.style.display!=="none"&&this.showTooltip(e,i)},t.prototype.close=function(e){e||(e=this.animation.close),this.hideTooltip(e)},t.prototype.refresh=function(e){if(this.tooltipEle&&this.renderContent(e),this.popupObj&&e&&this.reposition(e),!d(this.targetsList)&&!d(this.target)){var i=Se(this.target,this.element);i.length!==this.targetsList.length&&(this.unwireEvents(this.opensOn),this.wireEvents(this.opensOn))}},t.prototype.destroy=function(){o.prototype.destroy.call(this),this.tooltipEle&&ct(this.tooltipEle),this.popupObj&&this.popupObj.destroy(),Jv(),ee([this.element],Pc),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null;for(var e=Se('[data-tooltip-id= "'+this.ctrlId+'_content"]',this.element),i=0,r=e;i<r.length;i++){var n=r[i];this.restoreElement(n)}this.containerElement=null,this.tipClass=null,this.tooltipPositionX=null,this.tooltipPositionY=null,this.ctrlId=null,this.tooltipEventArgs=null,this.touchModule=null,this.mouseMoveEvent=null,this.mouseMoveTarget=null,this.containerElement=null,this.targetsList=null},ke([w("auto")],t.prototype,"width",void 0),ke([w("auto")],t.prototype,"height",void 0),ke([w()],t.prototype,"content",void 0),ke([w("body")],t.prototype,"container",void 0),ke([w()],t.prototype,"target",void 0),ke([w("TopCenter")],t.prototype,"position",void 0),ke([w(0)],t.prototype,"offsetX",void 0),ke([w(0)],t.prototype,"offsetY",void 0),ke([w(!0)],t.prototype,"showTipPointer",void 0),ke([w(!0)],t.prototype,"enableHtmlParse",void 0),ke([w(!1)],t.prototype,"windowCollision",void 0),ke([w("Auto")],t.prototype,"tipPointerPosition",void 0),ke([w("Auto")],t.prototype,"opensOn",void 0),ke([w(!1)],t.prototype,"mouseTrail",void 0),ke([w(!1)],t.prototype,"isSticky",void 0),ke([it({},qT)],t.prototype,"animation",void 0),ke([w(0)],t.prototype,"openDelay",void 0),ke([w(0)],t.prototype,"closeDelay",void 0),ke([w()],t.prototype,"cssClass",void 0),ke([w(!0)],t.prototype,"enableHtmlSanitizer",void 0),ke([w("")],t.prototype,"htmlAttributes",void 0),ke([Q()],t.prototype,"beforeRender",void 0),ke([Q()],t.prototype,"beforeOpen",void 0),ke([Q()],t.prototype,"afterOpen",void 0),ke([Q()],t.prototype,"beforeClose",void 0),ke([Q()],t.prototype,"afterClose",void 0),ke([Q()],t.prototype,"beforeCollision",void 0),ke([Q()],t.prototype,"created",void 0),ke([Q()],t.prototype,"destroyed",void 0),t=ke([Qe],t),t}(dt),vt={},GT=30,ZT=30,xv=30,$T=30,JT=30,KT=30,ew=36,tw=36,Hc="e-spin-show",wa="e-spin-hide",Av="e-spin-material",Ev="e-spin-material3",Ov="e-spin-tailwind3",Nv="e-spin-fabric",jv="e-spin-fluent",Lv="e-spin-fluent2",Pv="e-spin-tailwind",iw="e-spin-bootstrap",kv="e-spin-bootstrap4",zv="e-spin-bootstrap5",Rv="e-spin-high-contrast",Uc="e-spinner-pane",ru="e-spinner-inner",ja="e-path-circle",rw="e-path-arc",nw="e-spin-label",Yc="e-spin-template",Fv=null,sw=null;function Or(o,t){var e;if(o.target){var i,r=d(t)?xe:t,n=Aw(o.target,r);if(!d(o.cssClass)){var s=o.cssClass.split(" ").filter(function(c){return c.trim()!==""});(e=n.wrap.classList).add.apply(e,s)}if(!d(o.template)||!d(Fv)){var a=d(o.template)?Fv:o.template;n.wrap.classList.add(Yc),ww(n.wrap,a,sw)}else{var l=d(o.type)?yw(n.wrap):o.type,h=d(o.width)?void 0:o.width;i=Dw(h,l),Cw(l,n.wrap,i,r),d(o.label)||ow(n.inner_wrap,o.label,r)}n.wrap.classList.add(wa),n=null}}function ow(o,t,e){var i=e("div",{});return i.classList.add(nw),i.innerHTML=t,o.appendChild(i),i}function aw(o,t,e){var i=Si();vt[""+i]={timeOut:0,type:"Material",radius:t},Qs(o,i,e,Av),Ws(t,o,"Material",Av)}function lw(o,t,e){var i=Si();vt[""+i]={timeOut:0,type:"Tailwind3",radius:t},Qs(o,i,e,Ov),Ws(t,o,"Tailwind3",Ov)}function hw(o,t,e){var i=Si();vt[""+i]={timeOut:0,type:"Material3",radius:t},Qs(o,i,e,Ev),Ws(t,o,"Material3",Ev)}function cw(o,t,e){var i=Si();vt[""+i]={timeOut:0,type:"Bootstrap4",radius:t},Qs(o,i,e,kv),Ws(t,o,"Bootstrap4",kv)}function uw(o,t,e){var i=Si();vt[""+i]={timeOut:0,type:"Bootstrap5",radius:t},Qs(o,i,e,zv),Ws(t,o,"Bootstrap5",zv)}function pw(o,t,e){var i={},r=0;vt[""+t].timeOut=0,i[""+t]=xw(t,e,0,0);var n={uniqueID:t,container:o,globalInfo:i,timeOutVar:r};hm(n)}function dw(o,t,e){var i=Si();vt[""+i]={timeOut:0,type:"Fabric",radius:t},Vs(o,i,Nv),Xs(t,o,Nv)}function fw(o,t,e){var i=Si();vt[""+i]={timeOut:0,type:"Fluent",radius:t},Vs(o,i,jv),Xs(t,o,jv)}function gw(o,t,e){var i=Si();vt[""+i]={timeOut:0,type:"Fluent2",radius:t},Vs(o,i,Lv),Xs(t,o,Lv)}function vw(o,t,e){var i=Si();vt[""+i]={timeOut:0,type:"Tailwind",radius:t},Vs(o,i,Pv),Xs(t,o,Pv)}function mw(o,t,e){var i=Si();vt[""+i]={timeOut:0,type:"HighContrast",radius:t},Vs(o,i,Rv),Xs(t,o,Rv)}function yw(o){var t=window.getComputedStyle(o,":after").getPropertyValue("content");return t.replace(/['"]+/g,"")}function Cw(o,t,e,i){var r=t.querySelector("."+ru),n=r.querySelector("svg");switch(d(n)||r.removeChild(n),o){case"Material":aw(r,e,i);break;case"Material3":hw(r,e,i);break;case"Fabric":dw(r,e);break;case"Fluent":fw(r,e);break;case"Fluent2":gw(r,e);break;case"Bootstrap":bw(r,e);break;case"HighContrast":mw(r,e);break;case"Bootstrap4":cw(r,e,i);break;case"Bootstrap5":uw(r,e,i);break;case"Tailwind":case"Tailwind-dark":vw(r,e);break;case"Tailwind3":lw(r,e,i);break}}function bw(o,t,e){var i=Si();vt[""+i]={timeOut:0,type:"Bootstrap",radius:t},Mw(o,i),Iw(o,t)}function Mw(o,t,e){var i=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=64,n=32,s=2;i.setAttribute("id",t),i.setAttribute("class",iw),i.setAttribute("viewBox","0 0 "+r+" "+r),o.insertBefore(i,o.firstChild);for(var a=0;a<=7;a++){var l=document.createElementNS("http://www.w3.org/2000/svg","circle");l.setAttribute("class",ja+"_"+a),l.setAttribute("r",s+""),l.setAttribute("transform","translate("+n+","+n+")"),i.appendChild(l)}}function Iw(o,t){var e=o.querySelector("svg.e-spin-bootstrap"),i=0,r=0,n=24;e.style.width=e.style.height=t+"px";for(var s=90,a=0;a<=7;a++){var l=_c(i,r,n,s),h=e.querySelector("."+ja+"_"+a);h.setAttribute("cx",l.x+""),h.setAttribute("cy",l.y+""),s=s>=360?0:s,s=s+45}}function Sw(o,t){var e=[],i=o,r=t,n=!1,s=1;a(i);function a(l){e.push(l),(l!==r||s===1)&&(l<=i&&l>1&&!n?l=parseFloat((l-.2).toFixed(2)):l===1?(l=7,l=parseFloat((l+.2).toFixed(2)),n=!0):l<8&&n?(l=parseFloat((l+.2).toFixed(2)),l===8&&(n=!1)):l<=8&&!n&&(l=parseFloat((l-.2).toFixed(2))),++s,a(l))}return e}function Tw(o){for(var t=o.querySelector("svg.e-spin-bootstrap"),e=t.getAttribute("id"),i=1;i<=8;i++){var r=o.getElementsByClassName("e-path-circle_"+(i===8?0:i))[0];n(r,i,i,Sw(i,i),e)}function n(s,a,l,h,c){var u=0;p(a);function p(f){vt[""+c].isAnimate&&(++u,s.setAttribute("r",f+""),u>=h.length&&(u=0),vt[c].timeOut=setTimeout(p.bind(null,h[u]),18))}}}function ww(o,t,e){d(e)||o.classList.add(e);var i=o.querySelector(".e-spinner-inner");i.innerHTML=t}function Dw(o,t){var e;switch(t){case"Material":e=GT;break;case"Material3":e=ZT;break;case"Fabric":e=xv;break;case"Tailwind":case"Tailwind-dark":case"Tailwind3":e=xv;break;case"Fluent":e=$T;break;case"Fluent2":e=JT;break;case"Bootstrap4":e=ew;break;case"Bootstrap5":e=tw;break;default:e=KT}return o=o?parseFloat(o+""):e,t==="Bootstrap"?o:o/2}function xw(o,t,e,i){return{radius:t,count:e,previousId:i}}function Si(){for(var o="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=0;e<5;e++)o+=t.charAt(Math.floor(Math.random()*t.length));return o}function Vs(o,t,e,i){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("id",t),r.setAttribute("class",e);var n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("class",ja);var s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("class",rw),o.insertBefore(r,o.firstChild),r.appendChild(n),r.appendChild(s)}function Qs(o,t,e,i){var r=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("class",i),r.setAttribute("id",t),n.setAttribute("class",ja),o.insertBefore(r,o.firstChild),r.appendChild(n)}function Aw(o,t){var e=t("div",{}),i=t("div",{});return e.classList.add(Uc),i.classList.add(ru),i.setAttribute("aria-disabled","true"),o.appendChild(e),e.appendChild(i),{wrap:e,inner_wrap:i}}function hm(o){var t=1,e=149,i=1333,r=75;Ew(t,e,jw,i,o.globalInfo[o.uniqueID].count,r,o),o.globalInfo[o.uniqueID].count=++o.globalInfo[o.uniqueID].count%4}function Ew(o,t,e,i,r,n,s){var a=++s.globalInfo[s.uniqueID].previousId,l=new Date().getTime(),h=t-o,c=Ow(s.globalInfo[s.uniqueID].radius*2+""),u=cm(c),p=-90*(s.globalInfo[s.uniqueID].count||0);f(s);function f(v){var y=Math.max(0,Math.min(new Date().getTime()-l,i));g(e(y,o,h,i),v.container),a===v.globalInfo[v.uniqueID].previousId&&y<i?vt[v.uniqueID].timeOut=setTimeout(f.bind(null,v),1):hm(v)}function g(v,y){if(!d(y.querySelector("svg.e-spin-material"))||!d(y.querySelector("svg.e-spin-material3"))||!d(y.querySelector("svg.e-spin-tailwind3"))){var C=void 0;if(!d(y.querySelector("svg.e-spin-material"))&&!d(y.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))?C=y.querySelector("svg.e-spin-material"):!d(y.querySelector("svg.e-spin-material3"))&&!d(y.querySelector("svg.e-spin-material3").querySelector("path.e-path-circle"))?C=y.querySelector("svg.e-spin-material3"):!d(y.querySelector("svg.e-spin-tailwind3"))&&!d(y.querySelector("svg.e-spin-tailwind3").querySelector("path.e-path-circle"))&&(C=y.querySelector("svg.e-spin-tailwind3")),!d(C)){var b=C.querySelector("path.e-path-circle");b.setAttribute("stroke-dashoffset",um(c,u,v,n)+""),b.setAttribute("transform","rotate("+p+" "+c/2+" "+c/2+")")}}}}function Ws(o,t,e,i){var r=o*2,n=t.querySelector("svg."+i),s=n.querySelector("path.e-path-circle"),a=cm(r),l=r/2+"px";n.setAttribute("viewBox","0 0 "+r+" "+r),n.style.width=n.style.height=r+"px",n.style.transformOrigin=l+" "+l+" "+l,s.setAttribute("d",Nw(r,a)),(e==="Material"||e==="Material3"||e==="Fluent2"||e==="Tailwind3")&&(s.setAttribute("stroke-width",a+""),s.setAttribute("stroke-dasharray",(r-a)*Math.PI*.75+""),s.setAttribute("stroke-dashoffset",um(r,a,1,75)+""))}function Ow(o){var t=parseFloat(o);return t}function Nw(o,t){var e=o/2,i=t/2;return"M"+e+","+i+"A"+(e-i)+","+(e-i)+" 0 1 1 "+i+","+e}function cm(o){return 10/100*o}function um(o,t,e,i){return(o-t)*Math.PI*(3*i/100-e/100)}function jw(o,t,e,i){var r=(o/=i)*o,n=r*o;return t+e*(6*n*r+-15*r*r+10*n)}function Xs(o,t,e){var i=o,r=o,n=o*2,s=315,a=45,l=t.querySelector("."+e),h=l.querySelector(".e-path-circle"),c=l.querySelector(".e-path-arc"),u=n/2+"px";h.setAttribute("d",Pw(i,r,o)),c.setAttribute("d",Lw(i,r,o,s,a)),l.setAttribute("viewBox","0 0 "+n+" "+n),l.style.transformOrigin=u+" "+u+" "+u,l.style.width=l.style.height=n+"px"}function _c(o,t,e,i){var r=(i-90)*Math.PI/180;return{x:o+e*Math.cos(r),y:t+e*Math.sin(r)}}function Lw(o,t,e,i,r){var n=_c(o,t,e,r),s=_c(o,t,e,i),a=["M",n.x,n.y,"A",e,e,0,0,0,s.x,s.y].join(" ");return a}function Pw(o,t,e){var i=["M",o,t,"m",-e,0,"a",e,e,0,1,0,e*2,0,"a",e,e,0,1,0,-e*2,0].join(" ");return i}function _t(o){pm(o,!1),o=null}function pm(o,t){var e;if(o)if(o.classList.contains(Uc))e=o;else{var i=o.querySelectorAll("."+Uc);if(D.isIE){for(var r=0;r<i.length;r++)if(i[r].parentElement&&i[r].parentElement===o){e=i[r];break}}else e=Array.from(i).find(function(h){return h.parentElement===o})||null}if(o&&e){var n=e.querySelector("."+ru),s=t?!e.classList.contains(Yc)&&!e.classList.contains(wa):!e.classList.contains(Yc)&&!e.classList.contains(Hc);if(s){var a=e.querySelector("svg");if(d(a))return;var l=a.getAttribute("id");switch(vt[""+l].isAnimate=!t,vt[""+l].type){case"Material":case"Material3":case"Tailwind3":t?clearTimeout(vt[l].timeOut):pw(n,l,vt[l].radius);break;case"Bootstrap":t?clearTimeout(vt[l].timeOut):Tw(n);break}}t?St(e,[wa],[Hc]):St(e,[Hc],[wa]),o=null}}function xt(o){pm(o,!0),o=null}var kw=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(t,e)};return function(t,e){o(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Wn=function(o,t,e,i){var r=arguments.length,n=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,e,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,e,n):s(t,e))||n);return r>3&&n&&Object.defineProperty(t,e,n),n};function Xn(o,t){for(var e=m({},o),i=0,r=Object.keys(e);i<r.length;i++){var n=r[i];t.indexOf(n)<0&&ua(e,n)}return e}function zw(o,t){var e=t===40?0:o.childElementCount-1,i=e,r,n=o.querySelector(".e-selected");n&&n.classList.remove("e-selected");for(var s=0,a=o.children.length;s<a;s++)o.children[s].classList.contains("e-focused")&&(r=o.children[s],i=s,r.classList.remove("e-focused"),t===40?i++:i--,i===(t===40?o.childElementCount:-1)&&(i=e));r=o.children[i],i=dm(o,r,i,t),i!==-1&&(Z([o.children[i]],"e-focused"),o.children[i].focus())}function dm(o,t,e,i,r){if(r===void 0&&(r=0),(t.classList.contains("e-separator")||t.classList.contains("e-disabled"))&&(e===(i===40?o.childElementCount-1:0)?e=i===40?0:o.childElementCount-1:i===40?e++:e--),t=o.children[e],t.classList.contains("e-separator")||t.classList.contains("e-disabled")){if(r++,r===o.childElementCount)return e=-1;e=dm(o,t,e,i,r)}return e}function Rw(o,t){var e=[].slice.call(o.getElementsByClassName("e-blank-icon"));if(t){var i=[].slice.call(o.getElementsByClassName("e-item"));i.forEach(function(h){(h.style.paddingLeft||h.style.paddingRight)&&h.removeAttribute("style")})}if(e.length){var r=o.querySelector(".e-item:not(.e-blank-icon):not(.e-separator)");if(!d(r)){r.classList.contains("e-url")&&(r=r.querySelector(".e-menu-url"));var n=r.querySelector(".e-menu-icon"),s,a=o.classList.contains("e-rtl");a?s={padding:"paddingRight",margin:"marginLeft"}:s={padding:"paddingLeft",margin:"marginRight"};var l=parseInt(getComputedStyle(n).fontSize,10)+parseInt(getComputedStyle(n)[s.margin],10)+parseInt(getComputedStyle(r).paddingLeft,10)+"px";e.forEach(function(h){h.classList.contains("e-url")&&h.querySelector(".e-menu-url")?h.querySelector(".e-menu-url").style[s.padding]=l:h.style[s.padding]=l})}}}var su=function(o){kw(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return Wn([w("")],t.prototype,"iconCss",void 0),Wn([w("")],t.prototype,"id",void 0),Wn([w(!1)],t.prototype,"separator",void 0),Wn([w("")],t.prototype,"text",void 0),Wn([w("")],t.prototype,"url",void 0),Wn([w(!1)],t.prototype,"disabled",void 0),t}(Ue),fm=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(t,e)};return function(t,e){o(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),st=function(o,t,e,i){var r=arguments.length,n=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,e,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,e,n):s(t,e))||n);return r>3&&n&&Object.defineProperty(t,e,n),n},Ft={DISABLED:"e-disabled",FOCUS:"e-focused",ICON:"e-menu-icon",ITEM:"e-item",POPUP:"e-dropdown-popup",RTL:"e-rtl",SEPARATOR:"e-separator",VERTICAL:"e-vertical",POPUPWIDTH:"e-dropdown-popup-width"},Fw=function(o){fm(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return st([w("SlideDown")],t.prototype,"effect",void 0),st([w(400)],t.prototype,"duration",void 0),st([w("ease")],t.prototype,"easing",void 0),t}(Ue),Ye=function(o){fm(t,o);function t(e,i){var r=o.call(this,e,i)||this;return r.isPopupCreated=!0,r}return t.prototype.preRender=function(){},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.toggle=function(){this.canOpen()?this.openPopUp():this.createPopupOnClick&&!this.isPopupCreated?(this.createPopup(),this.openPopUp()):this.closePopup()},t.prototype.render=function(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete()},t.prototype.addItems=function(e,i){for(var r,n=this.items.length,s=0,a=this.items.length;s<a;s++)if(i===this.items[s].text){n=s;break}for(var l=e.length-1;l>=0;l--)r=new su(this,"items",e[l],!0),this.items.splice(n,0,r);this.canOpen()||this.createItems()},t.prototype.removeItems=function(e,i){for(var r=!1,n=0,s=e.length;n<s;n++)for(var a=0,l=this.items.length;a<l;a++)if(e[n]===(i?this.items[a].id:this.items[a].text)){this.items.splice(a,1),r=!0;break}r&&this.getULElement()&&this.createItems()},t.prototype.createPopup=function(){var e,i=this.createElement("div",{className:this.popupWidth!=="auto"?Ft.POPUP+" "+Ft.POPUPWIDTH:Ft.POPUP,id:this.element.id+"-popup"});if(document.body.appendChild(i),this.dropDown=new Ar(i,{width:this.popupWidth,relateTo:this.element,collision:{X:"fit",Y:"flip"},position:{X:"left",Y:"bottom"},targetType:"relative",content:this.target?this.getTargetElement():"",enableRtl:this.enableRtl}),this.dropDown.element.setAttribute("role","dialog"),this.dropDown.element.setAttribute("aria-label","dropdown menu"),d(this.popupContent)||(this.popupContent.style.display=""),this.dropDown.element.style.position==="fixed"&&this.dropDown.refreshPosition(this.element),this.dropDown.hide(),ye(this.element,(e={},e["aria-haspopup"]=this.items.length||this.target?"true":"false",e["aria-expanded"]="false",e.type="button",e)),this.cssClass&&Z([i],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.isPopupCreated=!0,this.createPopupOnClick){var r=$(this.activeElem[0],"split-btn");r&&(r.isPopupCreated=!0)}},t.prototype.getTargetElement=function(){return this.createPopupOnClick&&!this.isColorPicker()&&!d(this.popupContent)?this.popupContent:typeof this.target=="string"?ae(this.target):this.target},t.prototype.createItems=function(e){var i=this,r=this.items,n=this.hasIcon(this.items,"iconCss"),s,a,l,h,c=this.getULElement();if(c?c.innerHTML="":c=this.createElement("ul",{attrs:{role:"menu",tabindex:"0"}}),this.itemTemplate){var u=this.compiletemplate(this.itemTemplate);r.forEach(function(y){var C=i.createElement("li",{className:y.separator?Ft.ITEM+" "+Ft.SEPARATOR:Ft.ITEM,attrs:y.separator?{role:"separator",tabindex:"-1","aria-label":"separator","aria-hidden":"true"}:{role:"menuitem",tabindex:"-1","aria-label":y.text},id:y.id?y.id:Je("e-"+i.getModuleName()+"-item")}),b=u(y,i,"template",null,!1,null,C);b&&He(b,C),y.disabled&&C.classList.add("e-disabled");var M={item:y,element:C};i.trigger("beforeItemRender",M),M.item.disabled!==y.disabled&&C.classList[M.item.disabled?"add":"remove"]("e-disabled"),c.appendChild(C)}),this.isReact&&this.renderReactTemplates()}else for(var p=0;p<r.length;p++){a=r[p],this.enableHtmlSanitizer&&(a.text=nt.sanitize(a.text));var f=a.text;l=this.createElement("li",{innerHTML:a.url?"":f,className:a.separator?Ft.ITEM+" "+Ft.SEPARATOR:Ft.ITEM,attrs:a.separator?{role:"separator",tabindex:"-1","aria-label":"separator","aria-hidden":"true"}:{role:"menuitem",tabindex:"-1","aria-label":f},id:a.id?a.id:Je("e-"+this.getModuleName()+"-item")}),this.enableHtmlSanitizer?l.textContent=a.url?"":f:l.innerHTML=a.url?"":f,a.url&&(l.appendChild(this.createAnchor(a)),l.classList.add("e-url")),a.iconCss?(s=this.createElement("span",{className:Ft.ICON+" "+a.iconCss}),a.url?l.childNodes[0].appendChild(s):l.insertBefore(s,l.childNodes[0])):n&&!a.separator&&l.classList.add("e-blank-icon");var g=a.disabled;a.disabled&&l.classList.add("e-disabled"),h={item:a,element:l},this.trigger("beforeItemRender",h);var v=h.item.disabled;g!==v&&(h.item.disabled?l.classList.add("e-disabled"):l.classList.remove("e-disabled")),c.appendChild(l)}e&&this.getPopUpElement().appendChild(c),n&&Rw(this.getPopUpElement())},t.prototype.compiletemplate=function(e){if(this.itemTemplate)try{if(typeof this.itemTemplate!="function"){var i=document.querySelector(this.itemTemplate);if(i)return rt(i.innerHTML.trim())}return rt(e)}catch{return rt(e)}},t.prototype.hasIcon=function(e,i){for(var r=0,n=e.length;r<n;r++)if(e[r][""+i])return!0;return!1},t.prototype.createAnchor=function(e){var i=e.text,r=this.createElement("a",{className:"e-menu-text e-menu-url",attrs:{href:e.url}});return this.enableHtmlSanitizer?r.textContent=i:r.innerHTML=i,r},t.prototype.initialize=function(){this.button=new bi({iconCss:this.iconCss,iconPosition:this.iconPosition,cssClass:this.cssClass,content:this.content,disabled:this.disabled,enableRtl:this.enableRtl,enablePersistence:this.enablePersistence}),this.button.createElement=this.createElement,this.button.appendTo(this.element),this.element.id||(this.element.id=Je("e-"+this.getModuleName())),this.appendArrowSpan(),this.setActiveElem([this.element]),this.element.setAttribute("tabindex","0"),this.element.setAttribute("aria-label",this.element.textContent?this.element.textContent:"dropdownbutton"),this.target&&!this.isColorPicker()&&!this.createPopupOnClick||!this.createPopupOnClick?this.createPopup():(this.isPopupCreated=!1,this.target&&!this.isColorPicker()&&this.createPopupOnClick&&(this.popupContent=this.getTargetElement(),this.popupContent.style.display="none"))},t.prototype.isColorPicker=function(){if(!this.element)return!1;var e=this.element.previousSibling;return!!(e&&e.classList&&e.classList.contains("e-split-colorpicker"))},t.prototype.appendArrowSpan=function(){this.cssClass=d(this.cssClass)?"":this.cssClass,this.element.appendChild(this.createElement("span",{className:"e-btn-icon e-icons e-icon-"+(this.cssClass.indexOf(Ft.VERTICAL)>-1?"bottom":"right")+" e-caret"}))},t.prototype.setActiveElem=function(e){this.activeElem=e},t.prototype.getModuleName=function(){return"dropdown-btn"},t.prototype.canOpen=function(){var e=!1;return this.isPopupCreated&&(e=this.getPopUpElement().classList.contains("e-popup-close")),e},t.prototype.destroy=function(){var e=this;if(o.prototype.destroy.call(this),this.getModuleName()==="dropdown-btn"){var i;this.element.querySelector("span.e-caret")&&K(this.element.querySelector("span.e-caret")),this.cssClass&&(i=this.cssClass.split(" ")),this.button.destroy(),i&&ee([this.element],i),ee(this.activeElem,["e-active"]);var r=this.element.getAttribute("class")?["aria-haspopup","aria-expanded","aria-owns","type"]:["aria-haspopup","aria-expanded","aria-owns","type","class"];r.forEach(function(n){e.element.removeAttribute(n)}),this.popupUnWireEvents(),this.destroyPopup(),this.isPopupCreated=!1,this.disabled||this.unWireEvents()}},t.prototype.destroyPopup=function(){if(this.isPopupCreated){if(this.dropDown.destroy(),this.getPopUpElement()){var e=document.getElementById(this.getPopUpElement().id);e&&(ee([e],["e-popup-open","e-popup-close"]),K(e))}I.remove(this.getPopUpElement(),"click",this.clickHandler),I.remove(this.getPopUpElement(),"keydown",this.keyBoardHandler),this.isPopupCreated&&this.dropDown&&(this.dropDown.element=null,this.dropDown=void 0)}this.isPopupCreated=!1;var i=$(this.activeElem[0],"split-btn");if(this.createPopupOnClick&&i){var r=$(this.activeElem[1],"dropdown-btn");r&&(r.isPopupCreated=!1)}},t.prototype.getPopUpElement=function(){var e=null;if(!this.dropDown&&this.activeElem[0].classList.contains("e-split-btn")){var i=$(this.activeElem[1],"dropdown-btn");i&&(this.dropDown=i.dropDown)}return this.dropDown&&(e=this.dropDown.element),e},t.prototype.getULElement=function(){var e=null;return this.getPopUpElement()&&(e=this.getPopUpElement().children[0]),e},t.prototype.wireEvents=function(){this.delegateMousedownHandler=this.mousedownHandler.bind(this),this.createPopupOnClick||I.add(document,"mousedown touchstart",this.delegateMousedownHandler,this),I.add(this.element,"click",this.clickHandler,this),I.add(this.element,"keydown",this.keyBoardHandler,this),I.add(window,"resize",this.windowResize,this)},t.prototype.windowResize=function(){!this.canOpen()&&this.dropDown&&this.dropDown.refreshPosition(this.element)},t.prototype.popupWireEvents=function(){this.delegateMousedownHandler||(this.delegateMousedownHandler=this.mousedownHandler.bind(this));var e=this.getPopUpElement();this.createPopupOnClick&&I.add(document,"mousedown touchstart",this.delegateMousedownHandler,this),e&&(I.add(e,"click",this.clickHandler,this),I.add(e,"keydown",this.keyBoardHandler,this),this.closeActionEvents&&I.add(e,this.closeActionEvents,this.focusoutHandler,this)),this.rippleFn=rr(e,{selector:"."+Ft.ITEM})},t.prototype.popupUnWireEvents=function(){var e=this.getPopUpElement();this.createPopupOnClick&&I.remove(document,"mousedown touchstart",this.delegateMousedownHandler),e&&e.parentElement&&(I.remove(e,"click",this.clickHandler),I.remove(e,"keydown",this.keyBoardHandler),this.closeActionEvents&&I.remove(e,this.closeActionEvents,this.focusoutHandler)),Bn&&this.rippleFn&&this.rippleFn()},t.prototype.keyBoardHandler=function(e){if(!(e.target===this.element&&(e.keyCode===9||!e.altKey&&e.keyCode===40||e.keyCode===38)))switch(e.keyCode){case 38:case 40:e.altKey&&(e.keyCode===38||e.keyCode===40)?this.keyEventHandler(e):this.upDownKeyHandler(e);break;case 9:case 13:case 27:case 32:this.keyEventHandler(e);break}},t.prototype.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},t.prototype.upDownKeyHandler=function(e){this.target&&(e.keyCode===38||e.keyCode===40)||(e.preventDefault(),zw(this.getULElement(),e.keyCode))},t.prototype.keyEventHandler=function(e){if(!(this.target&&(e.keyCode===13||e.keyCode===9))){if(e.keyCode===13&&this.activeElem[0].classList.contains("e-split-btn")){this.triggerSelect(e),this.activeElem[0].focus();return}e.target&&e.target.className.indexOf("e-edit-template")>-1&&e.keyCode===32||(e.keyCode!==9&&e.preventDefault(),e.keyCode===27||e.keyCode===38||e.keyCode===9?this.canOpen()||this.closePopup(e,this.element):this.clickHandler(e))}},t.prototype.getLI=function(e){return e.tagName==="LI"?e:ge(e,"li")},t.prototype.mousedownHandler=function(e){var i=e.target;this.dropDown&&!this.canOpen()&&this.getPopUpElement()&&!(ge(i,'[id="'+this.getPopUpElement().id+'"]')||ge(i,'[id="'+this.element.id+'"]'))&&this.closePopup(e)},t.prototype.focusoutHandler=function(e){if(this.isPopupCreated&&!this.canOpen()){var i=e.relatedTarget||e.target;if(i&&i.className.indexOf("e-item")>-1){var r=this.getLI(i);if(r){var n=Array.prototype.indexOf.call(this.getULElement().children,r),s=this.items[n];if(s){var a={element:r,item:s,event:e};this.trigger("select",a)}}}this.closePopup(e)}},t.prototype.clickHandler=function(e){var i=e.target;if(ge(i,'[id="'+this.element.id+'"]'))!this.createPopupOnClick||this.target&&this.target!==""&&!this.isColorPicker()&&!this.createPopupOnClick?this.getPopUpElement().classList.contains("e-popup-close")?this.openPopUp(e):this.closePopup(e):this.isPopupCreated?this.closePopup(e,this.activeElem[0]):(this.createPopup(),this.openPopUp(e));else if(ge(i,'[id="'+this.getPopUpElement().id+'"]')){var r=this.getLI(e.target);r&&(this.triggerSelect(e),this.closePopup(e,this.activeElem[0]))}},t.prototype.triggerSelect=function(e){var i,r,n,s=this.getLI(e.target);s&&(r=Array.prototype.indexOf.call(this.getULElement().children,s),n=this.items[r],n&&(i={element:s,item:n,event:e},this.trigger("select",i)))},t.prototype.openPopUp=function(e){var i=this;e===void 0&&(e=null);var r=this.getPopUpElement();if(this.activeElem[0]&&this.activeElem[0].classList.contains("e-dropdown-btn")&&r.style.width&&r.style.width!=="auto"&&this.setWidth(r),!this.target)this.createItems(!0);else if(this.activeElem.length>1){var n=$(this.activeElem[0],"split-btn");n.isReact&&r.childNodes.length<1&&(n.appendReactElement&&n.appendReactElement(this.getTargetElement(),this.getPopUpElement()),this.renderReactTemplates())}else this.isReact&&r.childNodes.length<1&&(this.appendReactElement&&this.appendReactElement(this.getTargetElement(),this.getPopUpElement()),this.renderReactTemplates());var s=this.getULElement();this.popupWireEvents();var a={element:s,items:this.items,event:e,cancel:!1};this.trigger("beforeOpen",a,function(l){if(!l.cancel){var h=i.getULElement(),c=i.animationSettings.effect!=="None"?{name:i.animationSettings.effect,duration:i.animationSettings.duration,timingFunction:i.animationSettings.easing}:null;if(c&&i.animatePopup(c,h),i.dropDown.show(null,i.element),Z([i.element],"e-active"),i.element.setAttribute("aria-expanded","true"),i.element.setAttribute("aria-owns",i.getPopUpElement().id),h&&!i.isSafari()&&h.focus(),i.enableRtl&&h.parentElement.style.left!=="0px"){var u=void 0;i.element.parentElement&&i.element.parentElement.classList.contains("e-split-btn-wrapper")?u=i.element.parentElement.offsetWidth:u=i.element.offsetWidth;var p=h.parentElement.offsetWidth-u,f=parseFloat(h.parentElement.style.left)-p;f<0&&(f=0),h.parentElement.style.left=f+"px"}var g={element:h,items:i.items};i.trigger("open",g),h&&i.isSafari()&&h.focus()}})},t.prototype.animatePopup=function(e,i){new Gt(e).animate(i,{begin:function(r){r.element.parentElement.style.height=r.element.parentElement.offsetHeight+"px"}})},t.prototype.setWidth=function(e){var i=le(e.style.width);if(i.indexOf("%")>-1){var r=this.element.offsetWidth*parseFloat(i)/100;e.style.width=r+"px"}},t.prototype.closePopup=function(e,i){var r=this;e===void 0&&(e=null);var n=this.getULElement(),s={element:n,items:this.items,event:e,cancel:!1};this.trigger("beforeClose",s,function(a){if(a.cancel)n&&n.focus();else{var l=r.getPopUpElement();l&&I.remove(l,"keydown",r.keyBoardHandler),r.popupUnWireEvents();var h=r.getULElement(),c=void 0;h&&(c=h.querySelector(".e-selected")),c&&c.classList.remove("e-selected"),r.dropDown&&r.dropDown.hide(),ee(r.activeElem,"e-active"),r.element.setAttribute("aria-expanded","false"),r.element.removeAttribute("aria-owns"),i&&(r.isSafari()?i.focus({preventScroll:!0}):i.focus());var u={element:h,items:r.items};r.trigger("close",u),!r.target&&h&&K(h),(!r.target||r.isColorPicker()||r.target&&!r.isColorPicker())&&r.createPopupOnClick&&r.destroyPopup()}})},t.prototype.unWireEvents=function(){this.createPopupOnClick||I.remove(document,"mousedown touchstart",this.delegateMousedownHandler),I.remove(this.element,"click",this.clickHandler),I.remove(this.element,"keydown",this.keyBoardHandler),this.isPopupCreated&&(I.remove(this.getPopUpElement(),"click",this.clickHandler),I.remove(this.getPopUpElement(),"keydown",this.keyBoardHandler)),I.remove(window,"resize",this.windowResize)},t.prototype.onPropertyChanged=function(e,i){var r=["content","cssClass","iconCss","iconPosition","disabled","enableRtl"];this.button.setProperties(Xn(e,r));var n;this.isPopupCreated&&(n=this.getPopUpElement(),this.dropDown.setProperties(Xn(e,["enableRtl"])));for(var s=0,a=Object.keys(e);s<a.length;s++){var l=a[s];switch(l){case"content":this.element.querySelector("span.e-caret")||this.appendArrowSpan();break;case"disabled":e.disabled?(this.unWireEvents(),this.isPopupCreated&&!this.canOpen()&&this.closePopup()):this.wireEvents();break;case"cssClass":if(i.cssClass=d(i.cssClass)?"":i.cssClass,e.cssClass.indexOf(Ft.VERTICAL)>-1||i.cssClass.indexOf(Ft.VERTICAL)>-1){this.element.querySelector("span.e-caret")||this.appendArrowSpan();var h=this.element.querySelector("span.e-caret");e.cssClass.indexOf(Ft.VERTICAL)>-1?St(h,["e-icon-bottom"],["e-icon-right"]):St(h,["e-icon-right"],["e-icon-bottom"])}this.isPopupCreated&&(i.cssClass&&ee([n],i.cssClass.split(" ")),e.cssClass&&Z([n],e.cssClass.replace(/\s+/g," ").trim().split(" ")));break;case"target":this.dropDown.content=this.getTargetElement(),this.dropDown.dataBind();break;case"items":this.isPopupCreated&&this.getULElement()&&this.createItems();break;case"createPopupOnClick":e.createPopupOnClick?this.destroyPopup():this.createPopup();break}}},t.prototype.focusIn=function(){this.element.focus()},st([w("")],t.prototype,"content",void 0),st([w("")],t.prototype,"cssClass",void 0),st([w(!1)],t.prototype,"disabled",void 0),st([w("")],t.prototype,"iconCss",void 0),st([w("Left")],t.prototype,"iconPosition",void 0),st([w(!0)],t.prototype,"enableHtmlSanitizer",void 0),st([mi([],su)],t.prototype,"items",void 0),st([w(!1)],t.prototype,"createPopupOnClick",void 0),st([w("")],t.prototype,"target",void 0),st([w("")],t.prototype,"closeActionEvents",void 0),st([w(null)],t.prototype,"itemTemplate",void 0),st([w("auto")],t.prototype,"popupWidth",void 0),st([it({effect:"None"},Fw)],t.prototype,"animationSettings",void 0),st([Q()],t.prototype,"beforeItemRender",void 0),st([Q()],t.prototype,"beforeOpen",void 0),st([Q()],t.prototype,"beforeClose",void 0),st([Q()],t.prototype,"close",void 0),st([Q()],t.prototype,"open",void 0),st([Q()],t.prototype,"select",void 0),st([Q()],t.prototype,"created",void 0),t=st([Qe],t),t}(dt),Bw=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(t,e)};return function(t,e){o(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),At=function(o,t,e,i){var r=arguments.length,n=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,e,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,e,n):s(t,e))||n);return r>3&&n&&Object.defineProperty(t,e,n),n},La="e-rtl",nu="EJS-SPLITBUTTON",gm=function(o){Bw(t,o);function t(e,i){return o.call(this,e,i)||this}return t.prototype.preRender=function(){var e=this.element;if(e.tagName===nu){for(var i=Y("ej2_instances",e),r=this.createElement("button",{attrs:{type:"button"}}),n=this.createElement(nu,{className:"e-"+this.getModuleName()+"-wrapper"}),s=0,a=e.attributes.length;s<a;s++)r.setAttribute(e.attributes[s].nodeName,e.attributes[s].nodeValue);e.parentNode.insertBefore(n,e),K(e),e=r,n.appendChild(e),ve("ej2_instances",i,e),this.wrapper=n,this.element=e}this.element.id||(this.element.id=Je("e-"+this.getModuleName()))},t.prototype.render=function(){this.initWrapper(),this.createPrimaryButton(),this.renderControl()},t.prototype.renderControl=function(){this.createSecondaryButton(),this.setActiveElem([this.element,this.secondaryBtnObj.element]),this.setAria(),this.wireEvents(),this.renderComplete()},t.prototype.addItems=function(e,i){o.prototype.addItems.call(this,e,i),this.secondaryBtnObj.items=this.items},t.prototype.removeItems=function(e,i){o.prototype.removeItems.call(this,e,i),this.secondaryBtnObj.items=this.items},t.prototype.initWrapper=function(){this.wrapper||(this.wrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.element.parentNode.insertBefore(this.wrapper,this.element)),this.element.classList.remove("e-"+this.getModuleName()),this.enableRtl&&this.wrapper.classList.add(La),this.cssClass&&Z([this.wrapper],this.cssClass.replace(/\s+/g," ").trim().split(" "))},t.prototype.createPrimaryButton=function(){var e={cssClass:this.cssClass,enableRtl:this.enableRtl,iconCss:this.iconCss,iconPosition:this.iconPosition,content:this.content,disabled:this.disabled};this.primaryBtnObj=new bi(e),this.primaryBtnObj.createElement=this.createElement,this.primaryBtnObj.appendTo(this.element),this.element.classList.add("e-"+this.getModuleName()),this.element.type="button",this.wrapper.appendChild(this.element)},t.prototype.createSecondaryButton=function(){var e=this,i=this.createElement("button",{className:"e-icon-btn",attrs:{tabindex:"-1"},id:this.element.id+"_dropdownbtn"});this.wrapper.appendChild(i);var r={cssClass:this.cssClass,disabled:this.disabled,enableRtl:this.enableRtl,items:this.items,target:this.target,createPopupOnClick:this.createPopupOnClick};r.beforeItemRender=function(n){e.createPopupOnClick&&(e.secondaryBtnObj.dropDown.relateTo=e.wrapper,e.dropDown=e.secondaryBtnObj.dropDown),e.trigger("beforeItemRender",n)},r.open=function(n){e.trigger("open",n)},r.close=function(n){e.trigger("close",n)},r.select=function(n){e.trigger("select",n)},r.beforeOpen=function(n){e.createPopupOnClick&&e.items.length===0&&(e.secondaryBtnObj.dropDown.relateTo=e.wrapper,e.dropDown=e.secondaryBtnObj.dropDown);var s=new qs;return e.trigger("beforeOpen",n,function(a){s.resolve(a)}),s},r.beforeClose=function(n){var s=new qs;return e.trigger("beforeClose",n,function(a){s.resolve(a)}),s},this.secondaryBtnObj=new Ye(r),this.secondaryBtnObj.createElement=this.createElement,this.secondaryBtnObj.appendTo(i),this.createPopupOnClick||(this.secondaryBtnObj.dropDown.relateTo=this.wrapper,this.dropDown=this.secondaryBtnObj.dropDown),this.isPopupCreated=this.secondaryBtnObj.isPopupCreated,this.secondaryBtnObj.activeElem=[this.element,this.secondaryBtnObj.element],this.secondaryBtnObj.element.querySelector(".e-btn-icon").classList.remove("e-icon-right"),this.disabled&&this.wrapper.classList.add("e-splitbtn-disabled")},t.prototype.setAria=function(){ye(this.element,{"aria-expanded":"false","aria-haspopup":"true","aria-label":this.element.textContent?this.element.textContent+" splitbutton":"splitbutton","aria-owns":this.element.id+"_dropdownbtn-popup"})},t.prototype.getModuleName=function(){return"split-btn"},t.prototype.toggle=function(){this.secondaryBtnObj.toggle()},t.prototype.destroy=function(){var e=this,i=[La];if(this.cssClass&&(i=i.concat(this.cssClass.split(" "))),this.element){var r=document.getElementById(this.element.id);r&&r.parentElement===this.wrapper&&(this.wrapper.tagName===nu?(this.wrapper.innerHTML="",ee([this.wrapper],["e-rtl","e-"+this.getModuleName()+"-wrapper"]),ee([this.wrapper],this.cssClass.split(" "))):(ee([this.element],i),["aria-label","aria-haspopup","aria-expanded","aria-owns","type"].forEach(function(n){e.element.removeAttribute(n)}),this.wrapper.parentNode.insertBefore(this.element,this.wrapper),ct(this.wrapper)),this.unWireEvents())}this.primaryBtnObj.destroy(),this.secondaryBtnObj.destroy(),o.prototype.destroy.call(this),this.element&&!this.element.getAttribute("class")&&this.element.removeAttribute("class"),this.refreshing&&this.isAngular&&(this.element=this.wrapper,["e-control","e-split-btn","e-lib"].forEach(function(n){e.element.classList.add(n)}),ve("ej2_instances",[this],this.element)),this.wrapper=null},t.prototype.wireEvents=function(){I.add(this.element,"click",this.primaryBtnClickHandler,this),new Mr(this.element,{keyAction:this.btnKeyBoardHandler.bind(this),keyConfigs:{altdownarrow:"alt+downarrow",enter:"enter"}})},t.prototype.unWireEvents=function(){I.remove(this.element,"click",this.primaryBtnClickHandler),Bi(this.element,Mr).destroy()},t.prototype.primaryBtnClickHandler=function(){this.trigger("click",{element:this.element})},t.prototype.btnKeyBoardHandler=function(e){switch(e.action){case"altdownarrow":this.clickHandler(e);break;case"enter":this.clickHandler(e),this.getPopUpElement()&&!this.getPopUpElement().classList.contains("e-popup-close")?(this.element.classList.remove("e-active"),this.secondaryBtnObj.element.classList.add("e-active")):this.secondaryBtnObj.element.classList.remove("e-active");break}},t.prototype.onPropertyChanged=function(e,i){var r=["content","iconCss","iconPosition","cssClass","disabled","enableRtl"];this.primaryBtnObj.setProperties(Xn(e,r)),r=["beforeOpen","beforeItemRender","select","open","close","cssClass","disabled","enableRtl","createPopupOnClick"],Object.keys(e).indexOf("items")>-1&&(this.secondaryBtnObj.items=e.items,this.secondaryBtnObj.dataBind()),this.secondaryBtnObj.setProperties(Xn(e,r));for(var n=0,s=Object.keys(e);n<s.length;n++){var a=s[n];switch(a){case"cssClass":i.cssClass&&ee([this.wrapper],i.cssClass.split(" ")),Z([this.wrapper],e.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":e.enableRtl?Z([this.wrapper],La):ee([this.wrapper],La);break;case"disabled":e.disabled?Z([this.wrapper],"e-splitbtn-disabled"):ee([this.wrapper],"e-splitbtn-disabled")}}},t.prototype.focusIn=function(){this.element.focus()},At([w("")],t.prototype,"content",void 0),At([w("")],t.prototype,"cssClass",void 0),At([w(!1)],t.prototype,"disabled",void 0),At([w("")],t.prototype,"iconCss",void 0),At([w("Left")],t.prototype,"iconPosition",void 0),At([w(!1)],t.prototype,"createPopupOnClick",void 0),At([mi([],su)],t.prototype,"items",void 0),At([w("")],t.prototype,"target",void 0),At([Q()],t.prototype,"beforeItemRender",void 0),At([Q()],t.prototype,"beforeOpen",void 0),At([Q()],t.prototype,"beforeClose",void 0),At([Q()],t.prototype,"click",void 0),At([Q()],t.prototype,"close",void 0),At([Q()],t.prototype,"open",void 0),At([Q()],t.prototype,"select",void 0),At([Q()],t.prototype,"created",void 0),t=At([Qe],t),t}(Ye),qs=function(){function o(){var t=this;this.promise=new Promise(function(e,i){t.resolve=e,t.reject=i}),this.catch=this.promise.catch.bind(this.promise),this.then=this.promise.then.bind(this.promise)}return o}();var oe={RTL:"e-rtl",DISABLE:"e-disabled",INPUT:"e-input",TEXTAREA:"e-multi-line-input",INPUTGROUP:"e-input-group",FLOATINPUT:"e-float-input",FLOATLINE:"e-float-line",FLOATTEXT:"e-float-text",FLOATTEXTCONTENT:"e-float-text-content",CLEARICON:"e-clear-icon",CLEARICONHIDE:"e-clear-icon-hide",LABELTOP:"e-label-top",LABELBOTTOM:"e-label-bottom",NOFLOATLABEL:"e-no-float-label",INPUTCUSTOMTAG:"e-input-custom-tag",FLOATCUSTOMTAG:"e-float-custom-tag"},bu=["title","style","class"],vm="e-input-focus",me;(function(o){var t,e=!0;function i(T,O){T.element.__eventHandlers={};var W=d(O)?xe:O,G={container:null,buttons:[],clearButton:null};if(t=T.floatLabelType,e=T.bindClearAction,d(T.floatLabelType)||T.floatLabelType==="Never"?(G.container=P(T,oe.INPUTGROUP,oe.INPUTCUSTOMTAG,"span",W),T.element.parentNode.insertBefore(G.container,T.element),Z([T.element],oe.INPUT),G.container.appendChild(T.element)):y(T,G,W),a(T),!d(T.properties)&&!d(T.properties.showClearButton)&&T.properties.showClearButton&&(se(T.properties.showClearButton,T.element,G,!0,W),G.clearButton.setAttribute("role","button"),G.container.classList.contains(oe.FLOATINPUT)&&Z([G.container],oe.INPUTGROUP)),!d(T.buttons))for(var te=0;te<T.buttons.length;te++)G.buttons.push(tl(T.buttons[te],G.container,W));return!d(T.element)&&T.element.tagName==="TEXTAREA"&&Z([G.container],oe.TEXTAREA),Hu(G.container,T.element),G=M(T,G),Mt(G.container,W),G}o.createInput=i;function r(T){var O=x(T.element);(O.classList.contains("e-input-group")||O.classList.contains("e-outline")||O.classList.contains("e-filled"))&&O.classList.add("e-input-focus"),T.floatLabelType!=="Never"&&setTimeout(function(){o.calculateWidth(T.element,O)},80)}function n(T){var O=x(T.element);(O.classList.contains("e-input-group")||O.classList.contains("e-outline")||O.classList.contains("e-filled"))&&O.classList.remove("e-input-focus"),T.floatLabelType!=="Never"&&setTimeout(function(){o.calculateWidth(T.element,O)},80)}function s(T){h(T.floatLabelType,T.element)}function a(T){h(T.floatLabelType,T.element);var O=function(){return r(T)},W=function(){return n(T)},G=function(){return s(T)};T.element.addEventListener("focus",O),T.element.addEventListener("blur",W),T.element.addEventListener("input",G),T.element.__eventHandlers.inputFocusHandler={focusHandler:O},T.element.__eventHandlers.inputBlurHandler={blurHandler:W},T.element.__eventHandlers.inputHandler={inputHandler:G}}o.bindInitialEvent=a;function l(T){if(!d(T.element)&&!d(T.element.__eventHandlers)&&!d(T.element.__eventHandlers.inputFocusHandler)&&!d(T.element.__eventHandlers.inputBlurHandler)&&!d(T.element.__eventHandlers.inputHandler)){var O=T.element.__eventHandlers.inputFocusHandler.focusHandler,W=T.element.__eventHandlers.inputBlurHandler.blurHandler,G=T.element.__eventHandlers.inputHandler.inputHandler;T.element.removeEventListener("focus",O),T.element.removeEventListener("blur",W),T.element.removeEventListener("input",G),delete T.element.__eventHandlers.inputFocusHandler,delete T.element.__eventHandlers.inputBlurHandler,delete T.element.__eventHandlers.inputHandler}}function h(T,O){var W=O.value,G=O.parentElement,te=G&&G.parentElement;W!==""&&!d(W)?G&&G.classList.contains("e-input-group")?G.classList.add("e-valid-input"):te&&te.classList.contains("e-input-group")&&te.classList.add("e-valid-input"):T!=="Always"&&(G&&G.classList.contains("e-input-group")?G.classList.remove("e-valid-input"):te&&te.classList.contains("e-input-group")&&te.classList.remove("e-valid-input"))}function c(){var T=x(this).getElementsByClassName("e-float-text")[0];d(T)||(Z([T],oe.LABELTOP),T.classList.contains(oe.LABELBOTTOM)&&ee([T],oe.LABELBOTTOM))}function u(){var T=x(this);if(T.getElementsByTagName("textarea")[0]?T.getElementsByTagName("textarea")[0].value==="":T.getElementsByTagName("input")[0].value===""){var O=T.getElementsByClassName("e-float-text")[0];d(O)||(O.classList.contains(oe.LABELTOP)&&ee([O],oe.LABELTOP),Z([O],oe.LABELBOTTOM))}}function p(T){T.addEventListener("focus",c),T.addEventListener("blur",u)}o.wireFloatingEvents=p;function f(T){d(T)||(T.removeEventListener("focus",c),T.removeEventListener("blur",u))}function g(T){L(T.element,T.floatLabelType)}function v(T){L(T.element,T.floatLabelType)}function y(T,O,W){var G=d(W)?xe:W;T.floatLabelType==="Auto"&&p(T.element),d(O.container)?(O.container=P(T,oe.FLOATINPUT,oe.FLOATCUSTOMTAG,"div",G),O.container.classList.add(oe.INPUTGROUP),T.element.parentNode&&T.element.parentNode.insertBefore(O.container,T.element)):(d(T.customTag)||O.container.classList.add(oe.FLOATCUSTOMTAG),O.container.classList.add(oe.FLOATINPUT));var te=G("span",{className:oe.FLOATLINE}),ne=G("label",{className:oe.FLOATTEXT});if(!d(T.element.id)&&T.element.id!==""&&(ne.id="label_"+T.element.id.replace(/ /g,"_"),ye(T.element,{"aria-labelledby":ne.id})),!d(T.element.placeholder)&&T.element.placeholder!==""&&(ne.innerText=j(T.element.placeholder),T.element.removeAttribute("placeholder")),!d(T.properties)&&!d(T.properties.placeholder)&&T.properties.placeholder!==""&&(ne.innerText=j(T.properties.placeholder)),ne.innerText||O.container.classList.add(oe.NOFLOATLABEL),O.container.classList.contains("e-float-icon-left")){var Ae=O.container.querySelector(".e-input-in-wrap");Ae.appendChild(T.element),Ae.appendChild(te),Ae.appendChild(ne)}else O.container.appendChild(T.element),O.container.appendChild(te),O.container.appendChild(ne);if(N(T.element.value,ne),T.floatLabelType==="Always"&&(ne.classList.contains(oe.LABELBOTTOM)&&ee([ne],oe.LABELBOTTOM),Z([ne],oe.LABELTOP)),T.floatLabelType==="Auto"){var Ot=function(){return g(T)},yt=function(){return v(T)};T.element.addEventListener("input",Ot),T.element.addEventListener("blur",yt),T.element.__eventHandlers.floatInputHandler={inputFloatHandler:Ot},T.element.__eventHandlers.floatBlurHandler={blurFloatHandler:yt}}else C(T);d(T.element.getAttribute("id"))||ne.setAttribute("for",T.element.getAttribute("id"))}function C(T){if(!d(T.element)&&!d(T.element.__eventHandlers)&&!d(T.element.__eventHandlers.floatInputHandler)&&!d(T.element.__eventHandlers.floatBlurHandler)){var O=T.element.__eventHandlers.floatInputHandler.inputFloatHandler,W=T.element.__eventHandlers.floatBlurHandler.blurFloatHandler;T.element.removeEventListener("input",O),T.element.removeEventListener("blur",W),delete T.element.__eventHandlers.floatInputHandler,delete T.element.__eventHandlers.floatBlurHandler}}function b(T,O){T==="Always"&&O.classList.contains("e-outline")&&O.classList.add("e-valid-input")}function M(T,O){if(!d(T.properties))for(var W=0,G=Object.keys(T.properties);W<G.length;W++){var te=G[W];switch(te){case"cssClass":F(T.properties.cssClass,[O.container]),b(T.floatLabelType,O.container);break;case"enabled":fe(T.properties.enabled,T.element,T.floatLabelType,O.container);break;case"enableRtl":ue(T.properties.enableRtl,[O.container]);break;case"placeholder":q(T.properties.placeholder,T.element);break;case"readonly":ie(T.properties.readonly,T.element);break}}return O}function S(T,O,W){d(O)||(T&&!W?ee([O],oe.CLEARICONHIDE):Z([O],oe.CLEARICONHIDE))}function N(T,O,W){if(W===void 0&&(W=null),T)Z([O],oe.LABELTOP),O.classList.contains(oe.LABELBOTTOM)&&ee([O],oe.LABELBOTTOM);else{var G=W!=null?W!==document.activeElement:!0;G&&(O.classList.contains(oe.LABELTOP)&&ee([O],oe.LABELTOP),Z([O],oe.LABELBOTTOM))}}function x(T){var O=d(T.parentNode)?T:T.parentNode;return O&&O.classList.contains("e-input-in-wrap")&&(O=O.parentNode),O}function A(T,O,W,G){var te=d(G)?xe:G,ne=te("span",{className:oe.CLEARICON}),Ae=O.container;if(!d(W))Ae.appendChild(ne);else{var Ot=O.container.classList.contains(oe.FLOATINPUT)?O.container.querySelector("."+oe.FLOATTEXT):T;Ot.insertAdjacentElement("afterend",ne)}return Z([ne],oe.CLEARICONHIDE),_(T,ne),ne.setAttribute("aria-label","close"),ne}function U(T,O,W){O.classList.contains(oe.DISABLE)||O.readOnly||(T.preventDefault(),O!==document.activeElement&&O.focus(),O.value="",Z([W],oe.CLEARICONHIDE))}function z(T,O){S(T.value,O)}function J(T,O){S(T.value,O,T.readOnly)}function R(T,O){setTimeout(function(){d(O)||(Z([O],oe.CLEARICONHIDE),O=!d(T)&&T.classList.contains("e-combobox")?null:O)},200)}function _(T,O,W){if(e===void 0||e){var G=function(Ot){return U(Ot,T,O)};O.addEventListener("click",G),T.__eventHandlers.clearClickHandler={clickHandlerEvent:G}}var te=function(){return z(T,O)},ne=function(){return J(T,O)},Ae=function(){return R(T,O)};T.addEventListener("input",te),T.addEventListener("focus",ne),T.addEventListener("blur",Ae),T.__eventHandlers.clearInputHandler={inputHandlerEvent:te},T.__eventHandlers.clearFocusHandler={focusHandlerEvent:ne},T.__eventHandlers.clearBlurHandler={blurHandlerEvent:Ae}}o.wireClearBtnEvents=_;function B(T,O){if(!d(T)&&!d(T.__eventHandlers)){if(!d(T.__eventHandlers.clearClickHandler)){var W=T.__eventHandlers.clearClickHandler.clickHandlerEvent;(e===void 0||e)&&(d(O)||O.removeEventListener("click",W)),delete T.__eventHandlers.clearClickHandler}if(!d(T.__eventHandlers.clearInputHandler)&&!d(T.__eventHandlers.clearFocusHandler)&&!d(T.__eventHandlers.clearBlurHandler)){var G=T.__eventHandlers.clearInputHandler.inputHandlerEvent,te=T.__eventHandlers.clearFocusHandler.focusHandlerEvent,ne=T.__eventHandlers.clearBlurHandler.blurHandlerEvent;T.removeEventListener("input",G),T.removeEventListener("focus",te),T.removeEventListener("blur",ne),delete T.__eventHandlers.clearInputHandler,delete T.__eventHandlers.clearFocusHandler,delete T.__eventHandlers.clearBlurHandler}}}function E(T,O){O===void 0&&(O=null),l(T),T.floatLabelType==="Auto"&&C(T),T.properties.showClearButton&&B(T.element,O),d(T.buttons)||Rr(!1,null,T.buttons),f(T.element),d(T.element)||(delete T.element.__eventHandlers,T.element.classList.contains(oe.INPUT)&&T.element.classList.remove(oe.INPUT))}o.destroy=E;function L(T,O){var W=x(T);if(W.classList.contains(oe.FLOATINPUT)&&O==="Auto"){var G=x(T).getElementsByClassName("e-float-text")[0];N(T.value,G,T)}}function P(T,O,W,G,te){var ne=d(te)?xe:te,Ae;return d(T.customTag)?Ae=ne(G,{className:O}):(Ae=ne(T.customTag,{className:O}),Ae.classList.add(W)),Ae.classList.add("e-control-wrapper"),Ae}function j(T){var O="";if(!d(T)&&T!==""){var W=document.createElement("span");W.innerHTML='<input  placeholder="'+T+'"/>';var G=W.children[0];O=G.placeholder}return O}function k(T,O,W,G){if(O.value=T,W!=="Never"&&X(O,O.parentElement),!d(W)&&W==="Auto"&&L(O,W),!d(G)&&G){var te=x(O);if(!d(te)){var ne=te.getElementsByClassName(oe.CLEARICON)[0];d(ne)||(O.value&&!d(te)&&te.classList.contains("e-input-focus")?ee([ne],oe.CLEARICONHIDE):Z([ne],oe.CLEARICONHIDE))}}h(W,O)}o.setValue=k;function F(T,O,W){!d(W)&&W!==""&&ee(O,W.split(" ")),!d(T)&&T!==""&&Z(O,T.split(" "))}o.setCssClass=F;function X(T,O,W){if(!(W!=="multiselect"&&!vo(T))){var G=W==="multiselect"?T:T.clientWidth-parseInt(getComputedStyle(T,null).getPropertyValue("padding-left"),10);!d(O)&&!d(O.getElementsByClassName("e-float-text-content")[0])&&(O.getElementsByClassName("e-float-text-content")[0].classList.contains("e-float-text-overflow")&&O.getElementsByClassName("e-float-text-content")[0].classList.remove("e-float-text-overflow"),(G<O.getElementsByClassName("e-float-text-content")[0].clientWidth||G===O.getElementsByClassName("e-float-text-content")[0].clientWidth)&&O.getElementsByClassName("e-float-text-content")[0].classList.add("e-float-text-overflow"))}}o.calculateWidth=X;function re(T,O){typeof T=="number"?O.style.width=le(T):typeof T=="string"&&(O.style.width=T.match(/px|%|em/)?T:le(T)),X(O.firstChild,O)}o.setWidth=re;function q(T,O){T=j(T);var W=x(O);if(W.classList.contains(oe.FLOATINPUT))if(!d(T)&&T!==""){var G=W.getElementsByClassName("e-float-text-content")[0];G&&G.children[0]?G.children[0].textContent=T:W.getElementsByClassName(oe.FLOATTEXT)[0].textContent=T,W.classList.remove(oe.NOFLOATLABEL),O.removeAttribute("placeholder")}else{W.classList.add(oe.NOFLOATLABEL);var G=W.getElementsByClassName("e-float-text-content")[0];G?G.children[0].textContent="":W.getElementsByClassName(oe.FLOATTEXT)[0].textContent=""}else!d(T)&&T!==""?ye(O,{placeholder:T}):O.removeAttribute("placeholder")}o.setPlaceholder=q;function ie(T,O,W){T?ye(O,{readonly:""}):O.removeAttribute("readonly"),d(W)||L(O,W)}o.setReadonly=ie;function ue(T,O){T?Z(O,oe.RTL):ee(O,oe.RTL)}o.setEnableRtl=ue;function fe(T,O,W,G){var te={disabled:"","aria-disabled":"true"},ne=!d(G);T?(O.classList.remove(oe.DISABLE),Oe(te,O),ne&&ee([G],oe.DISABLE)):(O.classList.add(oe.DISABLE),qe(te,O),ne&&Z([G],oe.DISABLE)),d(W)||L(O,W)}o.setEnabled=fe;function se(T,O,W,G,te){var ne=d(te)?xe:te;T?W.clearButton=A(O,W,G,ne):(ct(W.clearButton),W.clearButton=null)}o.setClearButton=se;function Oe(T,O){for(var W=0,G=Object.keys(T);W<G.length;W++){var te=G[W],ne=x(O);te==="disabled"&&O.classList.remove(oe.DISABLE),te==="disabled"&&ne.classList.contains(oe.INPUTGROUP)&&ne.classList.remove(oe.DISABLE),te==="placeholder"&&ne.classList.contains(oe.FLOATINPUT)?ne.getElementsByClassName(oe.FLOATTEXT)[0].textContent="":O.removeAttribute(te)}}o.removeAttributes=Oe;function qe(T,O){for(var W=0,G=Object.keys(T);W<G.length;W++){var te=G[W],ne=x(O);te==="disabled"&&O.classList.add(oe.DISABLE),te==="disabled"&&ne.classList.contains(oe.INPUTGROUP)&&ne.classList.add(oe.DISABLE),te==="placeholder"&&ne.classList.contains(oe.FLOATINPUT)?ne.getElementsByClassName(oe.FLOATTEXT)[0].textContent=T[""+te]:O.setAttribute(te,T[""+te])}}o.addAttributes=qe;function De(T){var O=T.container;if(!d(O)&&O.classList.contains(oe.FLOATINPUT)){var W=O.querySelector("textarea")?O.querySelector("textarea"):O.querySelector("input"),G=O.querySelector("."+oe.FLOATTEXT).textContent,te=O.querySelector(".e-clear-icon")!==null;K(O.querySelector("."+oe.FLOATLINE)),K(O.querySelector("."+oe.FLOATTEXT)),St(O,[oe.INPUTGROUP],[oe.FLOATINPUT]),f(W),ye(W,{placeholder:G}),W.classList.add(oe.INPUT),!te&&W.tagName==="INPUT"&&W.removeAttribute("required")}}o.removeFloating=De;function pt(T,O,W,G){var te=d(G)?xe:G,ne=ge(T,"."+oe.INPUTGROUP);t=O;var Ae=ne.tagName;Ae=Ae!=="DIV"&&Ae!=="SPAN"?Ae:null;var Ot={element:T,floatLabelType:O,customTag:Ae,properties:{placeholder:W}};if(O!=="Never"){var yt=ne.querySelector(".e-clear-icon"),Ei={container:ne};T.classList.remove(oe.INPUT),y(Ot,Ei,te),Mt(Ei.container,te),X(Ot.element,Ei.container);var Oi=ne.classList.contains("e-float-icon-left");if(d(yt))if(Oi){var by=ne.querySelector(".e-input-in-wrap");yt=by.querySelector(".e-input-group-icon")}else yt=ne.querySelector(".e-input-group-icon");if(d(yt))Oi&&(yt=ne.querySelector(".e-input-group-icon"));else{var My=ne.querySelector("."+oe.FLOATLINE),Iy=ne.querySelector("."+oe.FLOATTEXT),rl=Oi?ne.querySelector(".e-input-in-wrap"):ne;rl.insertBefore(T,yt),rl.insertBefore(My,yt),rl.insertBefore(Iy,yt)}}else C(Ot);b(O,T.parentElement)}o.addFloating=pt;function Mt(T,O){if(T.classList.contains("e-outline")&&T.getElementsByClassName("e-float-text")[0]){var W=O("span",{className:oe.FLOATTEXTCONTENT});W.innerHTML=T.getElementsByClassName("e-float-text")[0].innerHTML,T.getElementsByClassName("e-float-text")[0].innerHTML="",T.getElementsByClassName("e-float-text")[0].appendChild(W)}}o.createSpanElement=Mt;function zr(T,O){for(var W=0;W<O.length;W++)Rr(T,O[parseInt(W.toString(),10)].container)}o.setRipple=zr;function Rr(T,O,W){var G=[];G.push(W);var te=d(W)?O.querySelectorAll(".e-input-group-icon"):G;if(T&&te.length>0)for(var ne=0;ne<te.length;ne++)te[parseInt(ne.toString(),10)].addEventListener("mousedown",zu,!1),te[parseInt(ne.toString(),10)].addEventListener("mouseup",Ru,!1);else if(te.length>0)for(var ne=0;ne<te.length;ne++)te[parseInt(ne.toString(),10)].removeEventListener("mousedown",zu,this),te[parseInt(ne.toString(),10)].removeEventListener("mouseup",Ru,this)}function go(T,O){!T.classList.contains("e-disabled")&&!T.querySelector("input").readOnly&&O.classList.add("e-input-btn-ripple")}function vo(T){if(!T)return!1;for(var O=T;O&&O!==document.body;){var W=window.getComputedStyle(O);if(W.display==="none")return!1;O=O.parentElement}return!0}function zu(){for(var T=this,O=this.parentElement;!O.classList.contains("e-input-group");)O=O.parentElement;go(O,T)}function Ru(){var T=this;setTimeout(function(){T.classList.remove("e-input-btn-ripple")},500)}function Fu(T,O){var W=O("span",{className:T});return W.classList.add("e-input-group-icon"),W}function gy(T,O,W,G,te){var ne=typeof O=="string"?O.split(","):O;if(T.toLowerCase()==="append")for(var Ae=0,Ot=ne;Ae<Ot.length;Ae++){var yt=Ot[Ae];tl(yt,W,te)}else for(var Ei=0,Oi=ne;Ei<Oi.length;Ei++){var yt=Oi[Ei];Bu(yt,W,G,te)}W.getElementsByClassName("e-input-group-icon")[0]&&W.getElementsByClassName("e-float-text-overflow")[0]&&W.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon")}o.addIcon=gy;function Bu(T,O,W,G){var te=d(G)?xe:G,ne=Fu(T,te);O.classList.add("e-float-icon-left");var Ae=O.querySelector(".e-input-in-wrap");if(d(Ae)){Ae=te("span",{className:"e-input-in-wrap"}),W.parentNode.insertBefore(Ae,W);var Ot=O.querySelectorAll(W.tagName+" ~ *");Ae.appendChild(W);for(var yt=0;yt<Ot.length;yt++){var Ei=Ot[parseInt(yt.toString(),10)],Oi=Ae.parentElement;(!Ei.classList.contains("e-float-line")||!(Oi&&Oi.classList.contains("e-filled"))&&Oi)&&Ae.appendChild(Ei)}}return Ae.parentNode.insertBefore(ne,Ae),Rr(!0,O,ne),ne}o.prependSpan=Bu;function tl(T,O,W){var G=d(W)?xe:W,te=Fu(T,G),ne=O.classList.contains("e-float-icon-left")?O.querySelector(".e-input-in-wrap"):O;return ne.appendChild(te),Rr(!0,O,te),te}o.appendSpan=tl;function Hu(T,O){O.type==="hidden"?T.classList.add("e-hidden"):T.classList.contains("e-hidden")&&T.classList.remove("e-hidden")}o.validateInputType=Hu;function vy(T,O){if(!d(T))for(var W=0,G=Object.keys(T);W<G.length;W++){var te=G[W];bu.indexOf(te)<0&&O.setAttribute(te,T[""+te])}}o.updateHTMLAttributesToElement=vy;function my(T,O,W){F(il(T),[W],il(O))}o.updateCssClass=my;function il(T){var O=T;return!d(T)&&T!==""&&(O=T.replace(/\s+/g," ").trim()),O}o.getInputValidClassList=il;function yy(T,O){if(!d(T))for(var W=0,G=Object.keys(T);W<G.length;W++){var te=G[W];if(bu.indexOf(te)>-1)if(te==="class"){var ne=this.getInputValidClassList(T[""+te]);ne!==""&&Z([O],ne.split(" "))}else if(te==="style"){var Ae=O.getAttribute(te);Ae=d(Ae)?T[""+te]:Ae+T[""+te],O.setAttribute(te,Ae)}else O.setAttribute(te,T[""+te])}}o.updateHTMLAttributesToWrapper=yy;function Cy(T){return!T||/^\s*$/.test(T)}o.isBlank=Cy})(me||(me={}));var Hw=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(t,e)};return function(t,e){o(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ge=function(o,t,e,i){var r=arguments.length,n=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,e,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,e,n):s(t,e))||n);return r>3&&n&&Object.defineProperty(t,e,n),n},Uw="e-control-wrapper e-numeric",ou="e-input-group-icon",au="e-spin-up",Yw="e-spin-down",mm="e-error",qn="increment",Gs="decrement",_w=new RegExp("^(-)?(\\d*)$"),Vw=".",Qw="e-numerictextbox",Ww="e-control",ym="e-input-focus",Xw="e-numeric-hidden",Cm=["title","style","class"],bm=0,ln=function(o){Hw(t,o);function t(e,i){var r=o.call(this,e,i)||this;return r.preventChange=!1,r.isDynamicChange=!1,r.numericOptions=e,r}return t.prototype.preRender=function(){this.isPrevFocused=!1,this.decimalSeparator=".",this.intRegExp=new RegExp("/^(-)?(d*)$/"),this.isCalled=!1;var e=Y("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),ee([this.cloneElement],[Ww,Qw,"e-lib"]),this.angularTagName=null,this.formEle=ge(this.element,"form"),this.element.tagName==="EJS-NUMERICTEXTBOX"){this.angularTagName=this.element.tagName;var i=this.createElement("input"),r=0;for(r;r<this.element.attributes.length;r++){var n=this.element.attributes[r].nodeName;n!=="id"&&n!=="class"?(i.setAttribute(this.element.attributes[r].nodeName,this.element.attributes[r].nodeValue),i.innerHTML=this.element.innerHTML):n==="class"&&i.setAttribute(n,this.element.className.split(" ").filter(function(a){return a.indexOf("ng-")!==0}).join(" "))}this.element.hasAttribute("name")&&this.element.removeAttribute("name"),this.element.classList.remove("e-control","e-numerictextbox"),this.element.appendChild(i),this.element=i,ve("ej2_instances",e,this.element)}ye(this.element,{role:"spinbutton",tabindex:"0",autocomplete:"off"});var s={incrementTitle:"Increment value",decrementTitle:"Decrement value",placeholder:this.placeholder};this.l10n=new yi("numerictextbox",s,this.locale),this.l10n.getConstant("placeholder")!==""&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",Je("numerictextbox")),this.isValidState=!0,this.inputStyle=null,this.inputName=null,this.cultureInfo={},this.initCultureInfo(),this.initCultureFunc(),this.prevValue=this.value,this.updateHTMLAttrToElement(),this.checkAttributes(!1),this.formEle&&(this.inputEleValue=this.value),this.validateMinMax(),this.validateStep(),this.placeholder===null&&this.updatePlaceholder()},t.prototype.render=function(){this.element.tagName.toLowerCase()==="input"&&(this.createWrapper(),this.showSpinButton&&this.spinBtnCreation(),this.setElementWidth(this.width),this.container.classList.contains("e-input-group")||this.container.classList.add("e-input-group"),this.changeValue(this.value===null||isNaN(this.value)?null:this.strictMode?this.trimValue(this.value):this.value),this.wireEvents(),this.value!==null&&!isNaN(this.value)&&this.decimals&&this.setProperties({value:this.roundNumber(this.value,this.decimals)},!0),(this.element.getAttribute("value")||this.value)&&(this.element.setAttribute("value",this.element.value),this.hiddenInput.setAttribute("value",this.hiddenInput.value)),this.elementPrevValue=this.element.value,this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),!this.element.hasAttribute("aria-labelledby")&&!this.element.hasAttribute("placeholder")&&!this.element.hasAttribute("aria-label")&&this.element.setAttribute("aria-label","numerictextbox"),!d(ge(this.element,"fieldset"))&&ge(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete())},t.prototype.checkAttributes=function(e){for(var i=e?d(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","step","disabled","readonly","style","name","placeholder"],r=0,n=i;r<n.length;r++){var s=n[r];if(!d(this.element.getAttribute(s)))switch(s){case"disabled":if(d(this.numericOptions)||this.numericOptions.enabled===void 0||e){var a=!(this.element.getAttribute(s)==="disabled"||this.element.getAttribute(s)===""||this.element.getAttribute(s)==="true");this.setProperties({enabled:a},!e)}break;case"readonly":if(d(this.numericOptions)||this.numericOptions.readonly===void 0||e){var l=this.element.getAttribute(s)==="readonly"||this.element.getAttribute(s)===""||this.element.getAttribute(s)==="true";this.setProperties({readonly:l},!e)}break;case"placeholder":(d(this.numericOptions)||this.numericOptions.placeholder===void 0||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"value":if(d(this.numericOptions)||this.numericOptions.value===void 0||e){var h=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(s));this.setProperties(ve(s,h,{}),!e)}break;case"min":if(d(this.numericOptions)||this.numericOptions.min===void 0||e){var c=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(s));c!==null&&!isNaN(c)&&this.setProperties(ve(s,c,{}),!e)}break;case"max":if(d(this.numericOptions)||this.numericOptions.max===void 0||e){var u=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(s));u!==null&&!isNaN(u)&&this.setProperties(ve(s,u,{}),!e)}break;case"step":if(d(this.numericOptions)||this.numericOptions.step===void 0||e){var p=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(s));p!==null&&!isNaN(p)&&this.setProperties(ve(s,p,{}),!e)}break;case"style":this.inputStyle=this.element.getAttribute(s);break;case"name":this.inputName=this.element.getAttribute(s);break;default:{var f=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(s));(f!==null&&!isNaN(f)||s==="value")&&this.setProperties(ve(s,f,{}),!0)}break}}},t.prototype.updatePlaceholder=function(){this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0)},t.prototype.initCultureFunc=function(){this.instance=new Ls(this.locale)},t.prototype.initCultureInfo=function(){this.cultureInfo.format=this.format,Y("currency",this)!==null&&(ve("currency",this.currency,this.cultureInfo),this.setProperties({currencyCode:this.currency},!0))},t.prototype.createWrapper=function(){var e=this.cssClass;!d(this.cssClass)&&this.cssClass!==""&&(e=this.getNumericValidClassList(this.cssClass));var i=me.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:e,enableRtl:this.enableRtl,showClearButton:this.showClearButton,enabled:this.enabled}},this.createElement);this.inputWrapper=i,this.container=i.container,this.container.setAttribute("class",Uw+" "+this.container.getAttribute("class")),this.updateHTMLAttrToWrapper(),this.readonly&&ye(this.element,{"aria-readonly":"true"}),this.hiddenInput=this.createElement("input",{attrs:{type:"text",validateHidden:"true","aria-label":"hidden",class:Xw}}),this.inputName=this.inputName!==null?this.inputName:this.element.id,this.element.removeAttribute("name"),this.isAngular&&this.angularTagName==="EJS-NUMERICTEXTBOX"&&this.cloneElement.id.length>0?ye(this.hiddenInput,{name:this.cloneElement.id}):ye(this.hiddenInput,{name:this.inputName}),this.container.insertBefore(this.hiddenInput,this.container.childNodes[1]),this.updateDataAttribute(!1),this.inputStyle!==null&&ye(this.container,{style:this.inputStyle})},t.prototype.updateDataAttribute=function(e){var i={};if(e)i=this.htmlAttributes;else for(var r=0;r<this.element.attributes.length;r++)i[this.element.attributes[r].name]=this.element.getAttribute(this.element.attributes[r].name);for(var n=0,s=Object.keys(i);n<s.length;n++){var a=s[n];a.indexOf("data")===0&&this.hiddenInput.setAttribute(a,i[""+a])}},t.prototype.updateHTMLAttrToElement=function(){if(!d(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var r=i[e];Cm.indexOf(r)<0&&this.element.setAttribute(r,this.htmlAttributes[""+r])}},t.prototype.updateCssClass=function(e,i){me.setCssClass(this.getNumericValidClassList(e),[this.container],this.getNumericValidClassList(i))},t.prototype.getNumericValidClassList=function(e){var i=e;return!d(e)&&e!==""&&(i=e.replace(/\s+/g," ").trim()),i},t.prototype.updateHTMLAttrToWrapper=function(){if(!d(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var r=i[e];if(Cm.indexOf(r)>-1)if(r==="class"){var n=this.getNumericValidClassList(this.htmlAttributes[""+r]);n!==""&&Z([this.container],n.split(" "))}else if(r==="style"){var s=this.container.getAttribute(r);s=d(s)?this.htmlAttributes[""+r]:s+this.htmlAttributes[""+r],this.container.setAttribute(r,s)}else this.container.setAttribute(r,this.htmlAttributes[""+r])}},t.prototype.setElementWidth=function(e){d(e)||(typeof e=="number"?this.container.style.width=le(e):typeof e=="string"&&(this.container.style.width=e.match(/px|%|em/)?e:le(e)))},t.prototype.spinBtnCreation=function(){this.spinDown=me.appendSpan(ou+" "+Yw,this.container,this.createElement),ye(this.spinDown,{title:this.l10n.getConstant("decrementTitle")}),this.spinUp=me.appendSpan(ou+" "+au,this.container,this.createElement),ye(this.spinUp,{title:this.l10n.getConstant("incrementTitle")}),this.wireSpinBtnEvents()},t.prototype.validateMinMax=function(){typeof this.min=="number"&&!isNaN(this.min)||this.setProperties({min:-Number.MAX_VALUE},!0),typeof this.max=="number"&&!isNaN(this.max)||this.setProperties({max:Number.MAX_VALUE},!0),this.decimals!==null&&(this.min!==-Number.MAX_VALUE&&this.setProperties({min:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.min))},!0),this.max!==Number.MAX_VALUE&&this.setProperties({max:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.max))},!0)),this.setProperties({min:this.min>this.max?this.max:this.min},!0),this.min!==-Number.MAX_VALUE&&ye(this.element,{"aria-valuemin":this.min.toString()}),this.max!==Number.MAX_VALUE&&ye(this.element,{"aria-valuemax":this.max.toString()})},t.prototype.formattedValue=function(e,i){return this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(i)},t.prototype.validateStep=function(){this.decimals!==null&&this.setProperties({step:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.step))},!0)},t.prototype.action=function(e,i){this.isInteract=!0;var r=this.isFocused?this.instance.getNumberParser({format:"n"})(this.element.value):this.value;this.changeValue(this.performAction(r,this.step,e)),this.raiseChangeEvent(i)},t.prototype.checkErrorClass=function(){this.isValidState?ee([this.container],mm):Z([this.container],mm),ye(this.element,{"aria-invalid":this.isValidState?"false":"true"})},t.prototype.bindClearEvent=function(){this.showClearButton&&I.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},t.prototype.resetHandler=function(e){e.preventDefault(),(!this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.inputWrapper.container.classList.contains("e-static-clear"))&&this.clear(e),this.isInteract=!0,this.raiseChangeEvent(e)},t.prototype.clear=function(e){this.setProperties({value:null},!0),this.setElementValue(""),this.hiddenInput.value="";var i=ge(this.element,"form");if(i){var r=this.element.nextElementSibling,n=document.createEvent("KeyboardEvent");n.initEvent("keyup",!1,!0),r.dispatchEvent(n)}},t.prototype.resetFormHandler=function(){this.element.tagName==="EJS-NUMERICTEXTBOX"?this.updateValue(null):this.updateValue(this.inputEleValue)},t.prototype.setSpinButton=function(){d(this.spinDown)||ye(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),d(this.spinUp)||ye(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")})},t.prototype.wireEvents=function(){I.add(this.element,"focus",this.focusHandler,this),I.add(this.element,"blur",this.focusOutHandler,this),I.add(this.element,"keydown",this.keyDownHandler,this),I.add(this.element,"keyup",this.keyUpHandler,this),I.add(this.element,"input",this.inputHandler,this),I.add(this.element,"keypress",this.keyPressHandler,this),I.add(this.element,"change",this.changeHandler,this),I.add(this.element,"paste",this.pasteHandler,this),this.enabled&&(this.bindClearEvent(),this.formEle&&I.add(this.formEle,"reset",this.resetFormHandler,this))},t.prototype.wireSpinBtnEvents=function(){I.add(this.spinUp,D.touchStartEvent,this.mouseDownOnSpinner,this),I.add(this.spinDown,D.touchStartEvent,this.mouseDownOnSpinner,this),I.add(this.spinUp,D.touchEndEvent,this.mouseUpOnSpinner,this),I.add(this.spinDown,D.touchEndEvent,this.mouseUpOnSpinner,this),I.add(this.spinUp,D.touchMoveEvent,this.touchMoveOnSpinner,this),I.add(this.spinDown,D.touchMoveEvent,this.touchMoveOnSpinner,this)},t.prototype.unwireEvents=function(){I.remove(this.element,"focus",this.focusHandler),I.remove(this.element,"blur",this.focusOutHandler),I.remove(this.element,"keyup",this.keyUpHandler),I.remove(this.element,"input",this.inputHandler),I.remove(this.element,"keydown",this.keyDownHandler),I.remove(this.element,"keypress",this.keyPressHandler),I.remove(this.element,"change",this.changeHandler),I.remove(this.element,"paste",this.pasteHandler),this.formEle&&I.remove(this.formEle,"reset",this.resetFormHandler)},t.prototype.unwireSpinBtnEvents=function(){I.remove(this.spinUp,D.touchStartEvent,this.mouseDownOnSpinner),I.remove(this.spinDown,D.touchStartEvent,this.mouseDownOnSpinner),I.remove(this.spinUp,D.touchEndEvent,this.mouseUpOnSpinner),I.remove(this.spinDown,D.touchEndEvent,this.mouseUpOnSpinner),I.remove(this.spinUp,D.touchMoveEvent,this.touchMoveOnSpinner),I.remove(this.spinDown,D.touchMoveEvent,this.touchMoveOnSpinner)},t.prototype.changeHandler=function(e){e.stopPropagation(),this.element.value.length||this.setProperties({value:null},!0);var i=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(i,e)},t.prototype.raiseChangeEvent=function(e){if(this.inputValue=d(this.inputValue)||isNaN(this.inputValue)?null:this.inputValue,this.prevValue!==this.value||this.prevValue!==this.inputValue){var i={};this.changeEventArgs={value:this.value,previousValue:this.prevValue,isInteracted:this.isInteract,isInteraction:this.isInteract,event:e},e&&(this.changeEventArgs.event=e),this.changeEventArgs.event===void 0&&(this.changeEventArgs.isInteracted=!1,this.changeEventArgs.isInteraction=!1),Rt(i,this.changeEventArgs),this.prevValue=this.value,this.isInteract=!1,this.elementPrevValue=this.element.value,this.preventChange=!1,this.trigger("change",i)}},t.prototype.pasteHandler=function(){var e=this;if(!(!this.enabled||this.readonly)){var i=this.element.value;setTimeout(function(){e.numericRegex().test(e.element.value)||e.setElementValue(i)})}},t.prototype.preventHandler=function(){var e=this,i=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);setTimeout(function(){if(e.element.selectionStart>0){var r=e.element.selectionStart,n=e.element.selectionStart-1,s=0,a=e.element.value.split(""),l=Hn(e.locale),h=Y("decimal",l),c=h.charCodeAt(0);e.element.value[n]===" "&&e.element.selectionStart>0&&!i?(d(e.prevVal)?e.element.value=e.element.value.trim():n!==0?e.element.value=e.prevVal:n===0&&(e.element.value=e.element.value.trim()),e.element.setSelectionRange(n,n)):isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&e.element.value[e.element.selectionStart-1].charCodeAt(0)!==45?(a.indexOf(e.element.value[e.element.selectionStart-1])!==a.lastIndexOf(e.element.value[e.element.selectionStart-1])&&e.element.value[e.element.selectionStart-1].charCodeAt(0)===c||e.element.value[e.element.selectionStart-1].charCodeAt(0)!==c)&&(e.element.value=e.element.value.substring(0,n)+e.element.value.substring(r,e.element.value.length),e.element.setSelectionRange(n,n),isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&e.element.selectionStart>0&&e.element.value.length&&e.preventHandler()):isNaN(parseFloat(e.element.value[e.element.selectionStart-2]))&&e.element.selectionStart>1&&e.element.value[e.element.selectionStart-2].charCodeAt(0)!==45&&(a.indexOf(e.element.value[e.element.selectionStart-2])!==a.lastIndexOf(e.element.value[e.element.selectionStart-2])&&e.element.value[e.element.selectionStart-2].charCodeAt(0)===c||e.element.value[e.element.selectionStart-2].charCodeAt(0)!==c)&&(e.element.setSelectionRange(n,n),e.nextEle=e.element.value[e.element.selectionStart],e.cursorPosChanged=!0,e.preventHandler()),e.cursorPosChanged===!0&&e.element.value[e.element.selectionStart]===e.nextEle&&isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&(e.element.setSelectionRange(e.element.selectionStart+1,e.element.selectionStart+1),e.cursorPosChanged=!1,e.nextEle=null),e.element.value.trim()===""&&e.element.setSelectionRange(s,s),e.element.selectionStart>0&&(e.element.value[e.element.selectionStart-1].charCodeAt(0)===45&&e.element.selectionStart>1&&(d(e.prevVal)||(e.element.value=e.prevVal),e.element.setSelectionRange(e.element.selectionStart,e.element.selectionStart)),e.element.value[e.element.selectionStart-1]===h&&e.decimals===0&&e.validateDecimalOnType&&(e.element.value=e.element.value.substring(0,n)+e.element.value.substring(r,e.element.value.length))),e.prevVal=e.element.value}})},t.prototype.keyUpHandler=function(){if(!(!this.enabled||this.readonly)){var e=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);!e&&D.isDevice&&this.preventHandler();var i=this.instance.getNumberParser({format:"n"})(this.element.value);i=i===null||isNaN(i)?null:i,this.hiddenInput.value=i||i===0?i.toString():null;var r=ge(this.element,"form");if(r){var n=this.element.nextElementSibling,s=document.createEvent("KeyboardEvent");s.initEvent("keyup",!1,!0),n.dispatchEvent(s)}}},t.prototype.inputHandler=function(e){var i=this;if(!(!this.enabled||this.readonly)){var r=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform),n=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;if((n||r)&&D.isDevice&&this.preventHandler(),this.isAngular&&this.element.value!==Y("decimal",Hn(this.locale))&&this.element.value!==Y("minusSign",Hn(this.locale))){var s=this.instance.getNumberParser({format:"n"})(this.element.value);s=isNaN(s)?null:s,i.localChange({value:s}),this.preventChange=!0}if(this.isVue){var a=this.instance.getNumberParser({format:"n"})(this.element.value),l=this.instance.getNumberParser({format:"n"})(this.elementPrevValue),h=new RegExp("[^0-9]+$");(h.test(this.element.value)||(this.elementPrevValue.indexOf(".")!==-1||this.elementPrevValue.indexOf("-")!==-1)&&this.element.value[this.element.value.length-1]==="0")&&(a=this.value);var c={event:e,value:a===null||isNaN(a)?null:a,previousValue:l===null||isNaN(l)?null:l};this.preventChange=!0,this.elementPrevValue=this.element.value,this.trigger("input",c)}}},t.prototype.keyDownHandler=function(e){if(!this.readonly)switch(e.keyCode){case 38:e.preventDefault(),this.action(qn,e);break;case 40:e.preventDefault(),this.action(Gs,e);break}},t.prototype.performAction=function(e,i,r){(e===null||isNaN(e))&&(e=0);var n=r===qn?e+i:e-i;return n=this.correctRounding(e,i,n),this.strictMode?this.trimValue(n):n},t.prototype.correctRounding=function(e,i,r){var n=new RegExp("[,.](.*)"),s=n.test(e.toString()),a=n.test(i.toString());if(s||a){var l=s?n.exec(e.toString())[0].length:0,h=a?n.exec(i.toString())[0].length:0,c=Math.max(l,h);return e=this.roundValue(r,c)}return r},t.prototype.roundValue=function(e,i){i=i||0;var r=Math.pow(10,i);return e*=r,e=Math.round(e)/r},t.prototype.updateValue=function(e,i){i&&(this.isInteract=!0),e!==null&&!isNaN(e)&&this.decimals&&(e=this.roundNumber(e,this.decimals)),this.inputValue=e,this.changeValue(e===null||isNaN(e)?null:this.strictMode?this.trimValue(e):e),this.isDynamicChange||this.raiseChangeEvent(i)},t.prototype.updateCurrency=function(e,i){ve(e,i,this.cultureInfo),this.updateValue(this.value)},t.prototype.changeValue=function(e){if(!(e||e===0))e=null,this.setProperties({value:e},!0);else{var i=this.getNumberOfDecimals(e);this.setProperties({value:this.roundNumber(e,i)},!0)}this.modifyText(),this.strictMode||this.validateState()},t.prototype.modifyText=function(){if(this.value||this.value===0){var e=this.formatNumber(),i=this.isFocused?e:this.instance.getNumberFormat(this.cultureInfo)(this.value);this.setElementValue(i),ye(this.element,{"aria-valuenow":e}),d(this.hiddenInput)||(this.hiddenInput.value=this.value.toString(),this.value!==null&&this.serverDecimalSeparator&&(this.hiddenInput.value=this.hiddenInput.value.replace(".",this.serverDecimalSeparator)))}else this.setElementValue(""),this.element.removeAttribute("aria-valuenow"),this.hiddenInput.value=null},t.prototype.setElementValue=function(e,i){me.setValue(e,i||this.element,this.floatLabelType,this.showClearButton)},t.prototype.validateState=function(){this.isValidState=!0,(this.value||this.value===0)&&(this.isValidState=!(this.value>this.max||this.value<this.min)),this.checkErrorClass()},t.prototype.getNumberOfDecimals=function(e){var i,r=new RegExp("[eE][-+]?([0-9]+)"),n=e.toString();if(r.test(n)){var s=r.exec(n);d(s)||(n=e.toFixed(Math.min(parseInt(s[1],10),20)))}var a=n.split(".")[1];return i=!a||!a.length?0:a.length,this.decimals!==null&&(i=i<this.decimals?i:this.decimals),i},t.prototype.formatNumber=function(){var e=this.getNumberOfDecimals(this.value);return this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(this.value)},t.prototype.trimValue=function(e){return e>this.max?this.max:e<this.min?this.min:e},t.prototype.roundNumber=function(e,i){var r=e,n=i||0,s=r.toString().split("e");r=Math.round(+(s[0]+"e"+(s[1]?Number(s[1])+n:n)));var a=r.toString().split("e");return r=+(a[0]+"e"+(a[1]?Number(a[1])-n:-n)),Number(r.toFixed(n))},t.prototype.cancelEvent=function(e){return e.preventDefault(),!1},t.prototype.keyPressHandler=function(e){if(!this.enabled||this.readonly)return!0;if(!D.isDevice&&D.info.version==="11.0"&&e.keyCode===13){var i=this.instance.getNumberParser({format:"n"})(this.element.value);return this.updateValue(i,e),!0}if(e.which===0||e.metaKey||e.ctrlKey||e.keyCode===8||e.keyCode===13)return!0;var r=String.fromCharCode(e.which),n=Y("decimal",Hn(this.locale)),s=e.code==="NumpadDecimal"&&r!==n;s&&(r=n);var a=this.element.value;if(a=a.substring(0,this.element.selectionStart)+r+a.substring(this.element.selectionEnd),this.numericRegex().test(a)){if(s){var l=this.element.selectionStart+1;this.element.value=a,this.element.setSelectionRange(l,l),e.preventDefault(),e.stopPropagation()}return!0}else return e.preventDefault(),e.stopPropagation(),!1},t.prototype.numericRegex=function(){var e=Hn(this.locale),i=Y("decimal",e),r="*";return i===Vw&&(i="\\"+i),this.decimals===0&&this.validateDecimalOnType?_w:(this.decimals&&this.validateDecimalOnType&&(r="{0,"+this.decimals+"}"),new RegExp("^\\s*(-)?(((\\d+("+i+"\\d"+r+")?)|("+i+"\\d"+r+")))?$"))},t.prototype.mouseWheel=function(e){e.preventDefault();var i,r=e;r.wheelDelta?i=r.wheelDelta/120:r.detail&&(i=-r.detail/3),i>0?this.action(qn,e):i<0&&this.action(Gs,e),this.cancelEvent(e)},t.prototype.focusHandler=function(e){var i=this;if(clearTimeout(bm),this.focusEventArgs={event:e,value:this.value,container:this.container},this.trigger("focus",this.focusEventArgs),!(!this.enabled||this.readonly)){if(this.isFocused=!0,this.prevValue=this.value,this.value||this.value===0){var r=this.formatNumber();if(this.setElementValue(r),!this.isPrevFocused)if(!D.isDevice&&D.info.version==="11.0")this.element.setSelectionRange(0,r.length);else{var n=D.isDevice&&D.isIos?600:0;bm=setTimeout(function(){i.element.setSelectionRange(0,r.length)},n)}}D.isDevice||I.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this)}},t.prototype.focusOutHandler=function(e){var i=this;if(this.blurEventArgs={event:e,value:this.value,container:this.container},this.trigger("blur",this.blurEventArgs),!(!this.enabled||this.readonly)){if(this.isPrevFocused){if(e.preventDefault(),D.isDevice){var r=this.element.value;this.element.focus(),this.isPrevFocused=!1;var n=this.element;setTimeout(function(){i.setElementValue(r,n)},200)}}else{this.isFocused=!1,this.element.value.length||this.setProperties({value:null},!0);var s=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(s),D.isDevice||I.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)}var a=ge(this.element,"form");if(a){var l=this.element.nextElementSibling,h=document.createEvent("FocusEvent");h.initEvent("focusout",!1,!0),l.dispatchEvent(h)}}},t.prototype.mouseDownOnSpinner=function(e){var i=this;if(this.isFocused&&(this.isPrevFocused=!0,e.preventDefault()),!!this.getElementData(e)){this.getElementData(e);var r=e.currentTarget,n=r.classList.contains(au)?qn:Gs;I.add(r,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval(function(){i.isCalled=!0,i.action(n,e)},150),I.add(document,"mouseup",this.mouseUpClick,this)}},t.prototype.touchMoveOnSpinner=function(e){var i;if(e.type==="touchmove"){var r=e.touches;i=r.length&&document.elementFromPoint(r[0].pageX,r[0].pageY)}else i=document.elementFromPoint(e.clientX,e.clientY);i.classList.contains(ou)||clearInterval(this.timeOut)},t.prototype.mouseUpOnSpinner=function(e){if(this.prevValue=this.value,this.isPrevFocused&&(this.element.focus(),D.isDevice||(this.isPrevFocused=!1)),D.isDevice||e.preventDefault(),!!this.getElementData(e)){var i=e.currentTarget,r=i.classList.contains(au)?qn:Gs;I.remove(i,"mouseleave",this.mouseUpClick),this.isCalled||this.action(r,e),this.isCalled=!1,I.remove(document,"mouseup",this.mouseUpClick);var n=ge(this.element,"form");if(n){var s=this.element.nextElementSibling,a=document.createEvent("KeyboardEvent");a.initEvent("keyup",!1,!0),s.dispatchEvent(a)}}},t.prototype.getElementData=function(e){return e.which&&e.which===3||e.button&&e.button===2||!this.enabled||this.readonly?!1:(clearInterval(this.timeOut),!0)},t.prototype.floatLabelTypeUpdate=function(){me.removeFloating(this.inputWrapper);var e=this.hiddenInput;this.hiddenInput.remove(),me.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement),this.container.insertBefore(e,this.container.childNodes[1])},t.prototype.mouseUpClick=function(e){e.stopPropagation(),clearInterval(this.timeOut),this.isCalled=!1,this.spinUp&&I.remove(this.spinUp,"mouseleave",this.mouseUpClick),this.spinDown&&I.remove(this.spinDown,"mouseleave",this.mouseUpClick)},t.prototype.increment=function(e){e===void 0&&(e=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,e,qn)),this.raiseChangeEvent()},t.prototype.decrement=function(e){e===void 0&&(e=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,e,Gs)),this.raiseChangeEvent()},t.prototype.destroy=function(){this.unwireEvents(),this.showClearButton&&(this.clearButton=document.getElementsByClassName("e-clear-icon")[0]),K(this.hiddenInput),this.showSpinButton&&(this.unwireSpinBtnEvents(),K(this.spinUp),K(this.spinDown));for(var e=["aria-labelledby","role","autocomplete","aria-readonly","aria-disabled","autocapitalize","spellcheck","aria-autocomplete","tabindex","aria-valuemin","aria-valuemax","aria-valuenow","aria-invalid"],i=0;i<e.length;i++)this.element.removeAttribute(e[i]);this.element.classList.remove("e-input"),this.container.insertAdjacentElement("afterend",this.element),K(this.container),this.spinUp=null,this.spinDown=null,this.container=null,this.hiddenInput=null,this.changeEventArgs=null,this.blurEventArgs=null,this.focusEventArgs=null,this.inputWrapper=null,me.destroy({element:this.element,floatLabelType:this.floatLabelType,properties:this.properties},this.clearButton),o.prototype.destroy.call(this)},t.prototype.getText=function(){return this.element.value},t.prototype.focusIn=function(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),Z([this.container],[ym]))},t.prototype.focusOut=function(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),ee([this.container],[ym]))},t.prototype.getPersistData=function(){var e=["value"];return this.addOnPersist(e)},t.prototype.onPropertyChanged=function(e,i){for(var r=0,n=Object.keys(e);r<n.length;r++){var s=n[r];switch(s){case"width":this.setElementWidth(e.width),me.calculateWidth(this.element,this.container);break;case"cssClass":this.updateCssClass(e.cssClass,i.cssClass);break;case"enabled":me.setEnabled(e.enabled,this.element),this.bindClearEvent();break;case"enableRtl":me.setEnableRtl(e.enableRtl,[this.container]);break;case"readonly":me.setReadonly(e.readonly,this.element),this.readonly?ye(this.element,{"aria-readonly":"true"}):this.element.removeAttribute("aria-readonly");break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.updateDataAttribute(!0),this.checkAttributes(!0),me.validateInputType(this.container,this.element);break;case"placeholder":me.setPlaceholder(e.placeholder,this.element),me.calculateWidth(this.element,this.container);break;case"step":this.step=e.step,this.validateStep();break;case"showSpinButton":this.updateSpinButton(e);break;case"showClearButton":this.updateClearButton(e);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,this.floatLabelTypeUpdate();break;case"value":this.isDynamicChange=(this.isAngular||this.isVue)&&this.preventChange,this.updateValue(e.value),this.isDynamicChange&&(this.preventChange=!1,this.isDynamicChange=!1);break;case"min":case"max":ve(s,Y(s,e),this),this.validateMinMax(),this.updateValue(this.value);break;case"strictMode":this.strictMode=e.strictMode,this.updateValue(this.value),this.validateState();break;case"locale":this.initCultureFunc(),this.l10n.setLocale(this.locale),this.setSpinButton(),this.updatePlaceholder(),me.setPlaceholder(this.placeholder,this.element),this.updateValue(this.value);break;case"currency":{var a=Y(s,e);this.setProperties({currencyCode:a},!0),this.updateCurrency(s,a)}break;case"currencyCode":{var l=Y(s,e);this.setProperties({currency:l},!0),this.updateCurrency("currency",l)}break;case"format":ve(s,Y(s,e),this),this.initCultureInfo(),this.updateValue(this.value);break;case"decimals":this.decimals=e.decimals,this.updateValue(this.value)}}},t.prototype.updateClearButton=function(e){me.setClearButton(e.showClearButton,this.element,this.inputWrapper,void 0,this.createElement),this.bindClearEvent()},t.prototype.updateSpinButton=function(e){e.showSpinButton?this.spinBtnCreation():(K(this.spinUp),K(this.spinDown))},t.prototype.getModuleName=function(){return"numerictextbox"},Ge([w("")],t.prototype,"cssClass",void 0),Ge([w(null)],t.prototype,"value",void 0),Ge([w(-Number.MAX_VALUE)],t.prototype,"min",void 0),Ge([w(Number.MAX_VALUE)],t.prototype,"max",void 0),Ge([w(1)],t.prototype,"step",void 0),Ge([w(null)],t.prototype,"width",void 0),Ge([w(null)],t.prototype,"placeholder",void 0),Ge([w({})],t.prototype,"htmlAttributes",void 0),Ge([w(!0)],t.prototype,"showSpinButton",void 0),Ge([w(!1)],t.prototype,"readonly",void 0),Ge([w(!0)],t.prototype,"enabled",void 0),Ge([w(!1)],t.prototype,"showClearButton",void 0),Ge([w(!1)],t.prototype,"enablePersistence",void 0),Ge([w("n2")],t.prototype,"format",void 0),Ge([w(null)],t.prototype,"decimals",void 0),Ge([w(null)],t.prototype,"currency",void 0),Ge([w(null)],t.prototype,"currencyCode",void 0),Ge([w(!0)],t.prototype,"strictMode",void 0),Ge([w(!1)],t.prototype,"validateDecimalOnType",void 0),Ge([w("Never")],t.prototype,"floatLabelType",void 0),Ge([Q()],t.prototype,"created",void 0),Ge([Q()],t.prototype,"destroyed",void 0),Ge([Q()],t.prototype,"change",void 0),Ge([Q()],t.prototype,"focus",void 0),Ge([Q()],t.prototype,"blur",void 0),t=Ge([Qe],t),t}(dt);var io=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(t,e)};return function(t,e){o(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ie=function(o,t,e,i){var r=arguments.length,n=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,e,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,e,n):s(t,e))||n);return r>3&&n&&Object.defineProperty(t,e,n),n},qw=function(o){io(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return Ie([w("None")],t.prototype,"placement",void 0),Ie([w(10)],t.prototype,"largeStep",void 0),Ie([w(1)],t.prototype,"smallStep",void 0),Ie([w(!1)],t.prototype,"showSmallTicks",void 0),Ie([w(null)],t.prototype,"format",void 0),t}(Ue),Gw=function(o){io(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return Ie([w(null)],t.prototype,"color",void 0),Ie([w(null)],t.prototype,"start",void 0),Ie([w(null)],t.prototype,"end",void 0),t}(Ue),Zw=function(o){io(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return Ie([w(!1)],t.prototype,"enabled",void 0),Ie([w(null)],t.prototype,"minStart",void 0),Ie([w(null)],t.prototype,"minEnd",void 0),Ie([w(null)],t.prototype,"maxStart",void 0),Ie([w(null)],t.prototype,"maxEnd",void 0),Ie([w(!1)],t.prototype,"startHandleFixed",void 0),Ie([w(!1)],t.prototype,"endHandleFixed",void 0),t}(Ue),$w=function(o){io(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return Ie([w("")],t.prototype,"cssClass",void 0),Ie([w("Before")],t.prototype,"placement",void 0),Ie([w("Focus")],t.prototype,"showOn",void 0),Ie([w(!1)],t.prototype,"isVisible",void 0),Ie([w(null)],t.prototype,"format",void 0),t}(Ue),Jw=6,Kw=3,H={root:"e-slider",rtl:"e-rtl",sliderHiddenInput:"e-slider-input",controlWrapper:"e-control-wrapper",sliderHandle:"e-handle",rangeBar:"e-range",sliderButton:"e-slider-button",firstButton:"e-first-button",secondButton:"e-second-button",scale:"e-scale",tick:"e-tick",large:"e-large",tickValue:"e-tick-value",sliderTooltip:"e-slider-tooltip",sliderHover:"e-slider-hover",sliderFirstHandle:"e-handle-first",sliderSecondHandle:"e-handle-second",sliderDisabled:"e-disabled",sliderContainer:"e-slider-container",horizontalTooltipBefore:"e-slider-horizontal-before",horizontalTooltipAfter:"e-slider-horizontal-after",verticalTooltipBefore:"e-slider-vertical-before",verticalTooltipAfter:"e-slider-vertical-after",materialTooltip:"e-material-tooltip",materialTooltipOpen:"e-material-tooltip-open",materialTooltipActive:"e-tooltip-active",materialSlider:"e-material-slider",sliderTrack:"e-slider-track",sliderHorizantalColor:"e-slider-horizantal-color",sliderVerticalColor:"e-slider-vertical-color",sliderHandleFocused:"e-handle-focused",verticalSlider:"e-vertical",horizontalSlider:"e-horizontal",sliderHandleStart:"e-handle-start",sliderTooltipStart:"e-material-tooltip-start",sliderTabHandle:"e-tab-handle",sliderButtonIcon:"e-button-icon",sliderSmallSize:"e-small-size",sliderTickPosition:"e-tick-pos",sliderFirstTick:"e-first-tick",sliderLastTick:"e-last-tick",sliderButtonClass:"e-slider-btn",sliderTooltipWrapper:"e-tooltip-wrap",sliderTabTrack:"e-tab-track",sliderTabRange:"e-tab-range",sliderActiveHandle:"e-handle-active",sliderMaterialHandle:"e-material-handle",sliderMaterialRange:"e-material-range",sliderMaterialDefault:"e-material-default",materialTooltipShow:"e-material-tooltip-show",materialTooltipHide:"e-material-tooltip-hide",readonly:"e-read-only",limits:"e-limits",limitBarDefault:"e-limit-bar",limitBarFirst:"e-limit-first",limitBarSecond:"e-limit-second",dragHorizontal:"e-drag-horizontal",dragVertical:"e-drag-vertical"},es=function(o){io(t,o);function t(e,i){var r=o.call(this,e,i)||this;return r.horDir="left",r.verDir="bottom",r.transition={handle:"left .4s cubic-bezier(.25, .8, .25, 1), right .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1) , bottom .4s cubic-bezier(.25, .8, .25, 1)",rangeBar:"all .4s cubic-bezier(.25, .8, .25, 1)"},r.transitionOnMaterialTooltip={handle:"left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, top 1ms ease-out",rangeBar:"left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, width 1ms ease-out, height 1ms ease-out"},r.scaleTransform="transform .4s cubic-bezier(.25, .8, .25, 1)",r.customAriaText=null,r.drag=!0,r.isDragComplete=!1,r.initialTooltip=!0,r}return t.prototype.preRender=function(){var e={incrementTitle:"Increase",decrementTitle:"Decrease"};this.l10n=new yi("slider",e,this.locale),this.isElementFocused=!1,this.tickElementCollection=[],this.tooltipFormatInfo={},this.ticksFormatInfo={},this.initCultureInfo(),this.initCultureFunc(),this.formChecker()},t.prototype.formChecker=function(){var e=ge(this.element,"form");e?(this.isForm=!0,d(this.formResetValue)||this.setProperties({value:this.formResetValue},!0),this.formResetValue=this.value,this.type==="Range"&&(d(this.formResetValue)||typeof this.formResetValue!="object")?this.formResetValue=[parseFloat(le(this.min)),parseFloat(le(this.max))]:d(this.formResetValue)&&(this.formResetValue=parseFloat(le(this.min))),this.formElement=e):this.isForm=!1},t.prototype.initCultureFunc=function(){this.internationalization=new Ls(this.locale)},t.prototype.initCultureInfo=function(){this.tooltipFormatInfo.format=d(this.tooltip.format)?null:this.tooltip.format,this.ticksFormatInfo.format=d(this.ticks.format)?null:this.ticks.format},t.prototype.formatString=function(e,i){var r=null,n=null;if(e||e===0){r=this.formatNumber(e);var s=this.numberOfDecimals(e);n=this.internationalization.getNumberFormat(i)(this.makeRoundNumber(e,s))}return{elementVal:r,formatString:n}},t.prototype.formatNumber=function(e){var i=this.numberOfDecimals(e);return this.internationalization.getNumberFormat({maximumFractionDigits:i,minimumFractionDigits:i,useGrouping:!1})(e)},t.prototype.numberOfDecimals=function(e){var i=e.toString().split(".")[1],r=!i||!i.length?0:i.length;return r},t.prototype.makeRoundNumber=function(e,i){var r=i||0;return Number(e.toFixed(r))},t.prototype.fractionalToInteger=function(e){e=this.numberOfDecimals(e)===0?Number(e).toFixed(this.noOfDecimals):e;for(var i=1,r=0;r<this.noOfDecimals;r++)i*=10;return e=Number((e*i).toFixed(0)),e},t.prototype.render=function(){var e=this;this.initialize(),this.initRender(),this.wireEvents(),this.setZindex(),this.renderComplete(),this.element.tagName==="EJS-SLIDER"&&this.getTheme(this.sliderContainer)==="none"&&setTimeout(function(){e.refresh()},0)},t.prototype.initialize=function(){Z([this.element],H.root),this.setCSSClass()},t.prototype.setElementWidth=function(e){!d(e)&&!d(this.sliderContainer)&&(typeof e=="number"?this.sliderContainer.style.width=le(e):typeof e=="string"&&(this.sliderContainer.style.width=e.match(/px|%|em/)?e:le(e)))},t.prototype.setCSSClass=function(e){e&&ee([this.element],e.split(" ")),this.cssClass&&Z([this.element],this.cssClass.split(" "))},t.prototype.setEnabled=function(){this.enabled?(ee([this.sliderContainer],[H.sliderDisabled]),this.tooltip.isVisible&&this.tooltipElement&&this.tooltip.showOn==="Always"&&this.tooltipElement.classList.remove(H.sliderDisabled),this.wireEvents()):(Z([this.sliderContainer],[H.sliderDisabled]),this.tooltip.isVisible&&this.tooltipElement&&this.tooltip.showOn==="Always"&&this.tooltipElement.classList.add(H.sliderDisabled),this.unwireEvents())},t.prototype.getTheme=function(e){var i=window.getComputedStyle(e,":after").getPropertyValue("content");return i.replace(/['"]+/g,"")},t.prototype.initRender=function(){this.sliderContainer=this.createElement("div",{className:H.sliderContainer+" "+H.controlWrapper}),this.element.parentNode.insertBefore(this.sliderContainer,this.element),this.sliderContainer.appendChild(this.element),this.sliderTrack=this.createElement("div",{className:H.sliderTrack}),this.element.appendChild(this.sliderTrack),this.setElementWidth(this.width),this.element.tabIndex=-1,this.getThemeInitialization(),this.setHandler(),this.createRangeBar(),this.limits.enabled&&this.createLimitBar(),this.setOrientClass(),this.hiddenInput=this.createElement("input",{attrs:{type:"hidden",value:d(this.value)?d(this.min)?"0":this.min.toString():this.value.toString(),name:this.element.getAttribute("name")||this.element.getAttribute("id")||"_"+(Math.random()*1e3).toFixed(0)+"slider",class:H.sliderHiddenInput}}),this.hiddenInput.tabIndex=-1,this.sliderContainer.appendChild(this.hiddenInput),this.showButtons&&this.setButtons(),this.setEnableRTL(),this.type==="Range"?this.rangeValueUpdate():this.value=d(this.value)?d(this.min)?0:parseFloat(le(this.min.toString())):this.value,this.previousVal=this.type!=="Range"?this.checkHandleValue(parseFloat(le(this.value.toString()))):[this.checkHandleValue(parseFloat(le(this.value[0].toString()))),this.checkHandleValue(parseFloat(le(this.value[1].toString())))],this.previousChanged=this.previousVal,d(this.element.hasAttribute("name"))||this.element.removeAttribute("name"),this.setValue(),this.limits.enabled&&this.setLimitBar(),this.ticks.placement!=="None"&&this.renderScale(),this.tooltip.isVisible&&this.renderTooltip(),this.enabled?ee([this.sliderContainer],[H.sliderDisabled]):Z([this.sliderContainer],[H.sliderDisabled]),this.readonly?Z([this.sliderContainer],[H.readonly]):ee([this.sliderContainer],[H.readonly])},t.prototype.getThemeInitialization=function(){this.isMaterial=this.getTheme(this.sliderContainer)==="material"||this.getTheme(this.sliderContainer)==="material-dark",this.isMaterial3=this.getTheme(this.sliderContainer)==="Material3"||this.getTheme(this.sliderContainer)==="Material3-dark",this.isBootstrap=this.getTheme(this.sliderContainer)==="bootstrap"||this.getTheme(this.sliderContainer)==="bootstrap-dark",this.isBootstrap4=this.getTheme(this.sliderContainer)==="bootstrap4",this.isTailwind=this.getTheme(this.sliderContainer)==="tailwind"||this.getTheme(this.sliderContainer)==="tailwind-dark",this.isTailwind3=this.getTheme(this.sliderContainer)==="tailwind3"||this.getTheme(this.sliderContainer)==="tailwind3-dark",this.isBootstrap5=this.getTheme(this.sliderContainer)==="bootstrap5",this.isFluent=this.getTheme(this.sliderContainer)==="FluentUI",this.isFluent2=this.getTheme(this.sliderContainer)==="fluent2",this.isBootstrap5Dot3=this.getTheme(this.sliderContainer)==="bootstrap5.3",this.isMaterialTooltip=(this.isMaterial||this.isMaterial3)&&this.type!=="Range"&&this.tooltip.isVisible},t.prototype.createRangeBar=function(){this.type!=="Default"&&(this.rangeBar=this.createElement("div",{attrs:{class:H.rangeBar}}),this.element.appendChild(this.rangeBar),this.drag&&this.type==="Range"&&(this.orientation==="Horizontal"?this.rangeBar.classList.add(H.dragHorizontal):this.rangeBar.classList.add(H.dragVertical)))},t.prototype.createLimitBar=function(){var e=this.type!=="Range"?H.limitBarDefault:H.limitBarFirst;e+=" "+H.limits,this.limitBarFirst=this.createElement("div",{attrs:{class:e}}),this.element.appendChild(this.limitBarFirst),this.type==="Range"&&(this.limitBarSecond=this.createElement("div",{attrs:{class:H.limitBarSecond+" "+H.limits}}),this.element.appendChild(this.limitBarSecond))},t.prototype.setOrientClass=function(){this.orientation!=="Vertical"?(this.sliderContainer.classList.remove(H.verticalSlider),this.sliderContainer.classList.add(H.horizontalSlider),this.firstHandle.setAttribute("aria-orientation","horizontal"),this.type==="Range"&&this.secondHandle.setAttribute("aria-orientation","horizontal")):(this.sliderContainer.classList.remove(H.horizontalSlider),this.sliderContainer.classList.add(H.verticalSlider),this.firstHandle.setAttribute("aria-orientation","vertical"),this.type==="Range"&&this.secondHandle.setAttribute("aria-orientation","vertical"))},t.prototype.setAriaAttributes=function(e){var i=this,r=this.min,n=this.max;if(!d(this.customValues)&&this.customValues.length>0&&(r=this.customValues[0],n=this.customValues[this.customValues.length-1]),this.type!=="Range")ye(e,{"aria-valuemin":d(r)?"0":r.toString(),"aria-valuemax":d(n)?"100":n.toString()});else{var s=!d(this.customValues)&&this.customValues.length>0?[[r.toString(),this.customValues[this.value[1]].toString()],[this.customValues[this.value[0]].toString(),n.toString()]]:[[r.toString(),this.value[1].toString()],[this.value[0].toString(),n.toString()]];s.forEach(function(a,l){var h=l===0?i.firstHandle:i.secondHandle;h&&ye(h,{"aria-valuemin":a[0],"aria-valuemax":a[1]})})}},t.prototype.createSecondHandle=function(){this.secondHandle=this.createElement("div",{attrs:{class:H.sliderHandle,role:"slider",tabIndex:"0","aria-label":"slider"}}),this.secondHandle.classList.add(H.sliderSecondHandle),this.element.appendChild(this.secondHandle)},t.prototype.createFirstHandle=function(){this.firstHandle=this.createElement("div",{attrs:{class:H.sliderHandle,role:"slider",tabIndex:"0","aria-label":"slider"}}),this.firstHandle.classList.add(H.sliderFirstHandle),this.element.appendChild(this.firstHandle),this.isMaterialTooltip&&(this.materialHandle=this.createElement("div",{attrs:{class:H.sliderHandle+" "+H.sliderMaterialHandle}}),this.element.appendChild(this.materialHandle))},t.prototype.wireFirstHandleEvt=function(e){e?(I.remove(this.firstHandle,"mousedown touchstart",this.handleFocus),I.remove(this.firstHandle,"transitionend",this.transitionEnd),I.remove(this.firstHandle,"mouseenter touchenter",this.handleOver),I.remove(this.firstHandle,"mouseleave touchend",this.handleLeave)):(I.add(this.firstHandle,"mousedown touchstart",this.handleFocus,this),I.add(this.firstHandle,"transitionend",this.transitionEnd,this),I.add(this.firstHandle,"mouseenter touchenter",this.handleOver,this),I.add(this.firstHandle,"mouseleave touchend",this.handleLeave,this))},t.prototype.wireSecondHandleEvt=function(e){e?(I.remove(this.secondHandle,"mousedown touchstart",this.handleFocus),I.remove(this.secondHandle,"transitionend",this.transitionEnd),I.remove(this.secondHandle,"mouseenter touchenter",this.handleOver),I.remove(this.secondHandle,"mouseleave touchend",this.handleLeave)):(I.add(this.secondHandle,"mousedown touchstart",this.handleFocus,this),I.add(this.secondHandle,"transitionend",this.transitionEnd,this),I.add(this.secondHandle,"mouseenter touchenter",this.handleOver,this),I.add(this.secondHandle,"mouseleave touchend",this.handleLeave,this))},t.prototype.handleStart=function(){this.type!=="Range"&&(this.firstHandle.classList[this.handlePos1===0?"add":"remove"](H.sliderHandleStart),this.isMaterialTooltip&&(this.materialHandle.classList[this.handlePos1===0?"add":"remove"](H.sliderHandleStart),this.tooltipElement&&this.tooltipElement.classList[this.handlePos1===0?"add":"remove"](H.sliderTooltipStart)))},t.prototype.transitionEnd=function(e){e.propertyName!=="transform"&&(this.handleStart(),this.enableAnimation||(this.getHandle().style.transition="none"),this.type!=="Default"&&(this.rangeBar.style.transition="none"),(this.isMaterial||this.isMaterial3)&&this.tooltip.isVisible&&this.type==="Default"&&(this.tooltipElement.style.transition=this.transition.handle),this.tooltipToggle(this.getHandle()),this.closeTooltip())},t.prototype.handleFocusOut=function(){this.firstHandle.classList.contains(H.sliderHandleFocused)&&this.firstHandle.classList.remove(H.sliderHandleFocused),this.type==="Range"&&this.secondHandle.classList.contains(H.sliderHandleFocused)&&this.secondHandle.classList.remove(H.sliderHandleFocused)},t.prototype.handleFocus=function(e){this.focusSliderElement(),this.sliderBarClick(e),e.currentTarget===this.firstHandle?(this.firstHandle.classList.add(H.sliderHandleFocused),this.firstHandle.classList.add(H.sliderTabHandle)):(this.secondHandle.classList.add(H.sliderHandleFocused),this.secondHandle.classList.add(H.sliderTabHandle)),I.add(document,"mousemove touchmove",this.sliderBarMove,this),I.add(document,"mouseup touchend",this.sliderBarUp,this)},t.prototype.handleOver=function(e){this.tooltip.isVisible&&this.tooltip.showOn==="Hover"&&this.tooltipToggle(e.currentTarget),this.type==="Default"&&this.tooltipToggle(this.getHandle())},t.prototype.handleLeave=function(e){this.tooltip.isVisible&&this.tooltip.showOn==="Hover"&&!e.currentTarget.classList.contains(H.sliderHandleFocused)&&!e.currentTarget.classList.contains(H.sliderTabHandle)&&this.closeTooltip()},t.prototype.setHandler=function(){this.createFirstHandle(),this.type==="Range"&&this.createSecondHandle()},t.prototype.setEnableRTL=function(){this.enableRtl&&this.orientation!=="Vertical"?Z([this.sliderContainer],H.rtl):ee([this.sliderContainer],H.rtl);var e=this.orientation!=="Vertical"?this.horDir:this.verDir;this.enableRtl?(this.horDir="right",this.verDir="bottom"):(this.horDir="left",this.verDir="bottom");var i=this.orientation!=="Vertical"?this.horDir:this.verDir;e!==i&&this.orientation==="Horizontal"&&(Ce(this.firstHandle,{right:"",left:"auto"}),this.type==="Range"&&Ce(this.secondHandle,{top:"",left:"auto"})),this.setBarColor()},t.prototype.tooltipValue=function(){var e=this,i,r={value:this.value,text:""};this.initialTooltip&&(this.initialTooltip=!1,this.setTooltipContent(),r.text=i=typeof this.tooltipObj.content=="function"?this.tooltipObj.content():this.tooltipObj.content,this.trigger("tooltipChange",r,function(n){if(e.addTooltipClass(n.text),i!==n.text){e.customAriaText=n.text,e.enableHtmlSanitizer?n.text=nt.sanitize(n.text.toString()):n.text=n.text.toString();var s=function(){return n.text};e.tooltipObj.content=fa(s),e.setAriaAttrValue(e.firstHandle),e.type==="Range"&&e.setAriaAttrValue(e.secondHandle)}}),this.isMaterialTooltip&&this.setPreviousVal("change",this.value))},t.prototype.setTooltipContent=function(){var e=this.formatContent(this.tooltipFormatInfo,!1),i=function(){return e};this.tooltipObj.content=fa(i)},t.prototype.formatContent=function(e,i){var r="",n=this.handleVal1,s=this.handleVal2;return!d(this.customValues)&&this.customValues.length>0&&(n=this.customValues[this.handleVal1],s=this.customValues[this.handleVal2]),i?(this.type==="Range"?this.enableRtl&&this.orientation!=="Vertical"?r=!d(this.tooltip)&&!d(this.tooltip.format)?this.formatString(s,e).elementVal+" - "+this.formatString(n,e).elementVal:s.toString()+" - "+n.toString():r=!d(this.tooltip)&&!d(this.tooltip.format)?this.formatString(n,e).elementVal+" - "+this.formatString(s,e).elementVal:n.toString()+" - "+s.toString():d(n)||(r=!d(this.tooltip)&&!d(this.tooltip.format)?this.formatString(n,e).elementVal:n.toString()),r):(this.type==="Range"?this.enableRtl&&this.orientation!=="Vertical"?r=d(e.format)?s.toString()+" - "+n.toString():this.formatString(s,e).formatString+" - "+this.formatString(n,e).formatString:r=d(e.format)?n.toString()+" - "+s.toString():this.formatString(n,e).formatString+" - "+this.formatString(s,e).formatString:d(n)||(r=d(e.format)?n.toString():this.formatString(n,e).formatString),r)},t.prototype.addTooltipClass=function(e){if(this.isMaterialTooltip){var i=e.toString().length;if(this.tooltipElement){var r=i>4?{oldCss:H.sliderMaterialDefault,newCss:H.sliderMaterialRange}:{oldCss:H.sliderMaterialRange,newCss:H.sliderMaterialDefault};this.tooltipElement.classList.remove(r.oldCss),this.tooltipElement.classList.contains(r.newCss)||(this.tooltipElement.classList.add(r.newCss),this.tooltipElement.style.transform=i>4?"scale(1)":this.getTooltipTransformProperties(this.previousTooltipClass).rotate)}else{var r=i>4?H.sliderMaterialRange:H.sliderMaterialDefault;this.tooltipObj.cssClass=H.sliderTooltip+" "+r}}},t.prototype.tooltipPlacement=function(){return this.orientation==="Horizontal"?this.tooltip.placement==="Before"?"TopCenter":"BottomCenter":this.tooltip.placement==="Before"?"LeftCenter":"RightCenter"},t.prototype.tooltipBeforeOpen=function(e){this.tooltipElement=e.element,this.tooltip.cssClass&&Z([this.tooltipElement],this.tooltip.cssClass.split(" ").filter(function(i){return i})),e.target.removeAttribute("aria-describedby"),this.isMaterialTooltip&&(this.tooltipElement.firstElementChild.classList.add(H.materialTooltipHide),this.handleStart(),this.setTooltipTransform())},t.prototype.tooltipCollision=function(e){if(this.isBootstrap||this.isBootstrap4||(this.isMaterial||this.isMaterial3)&&!this.isMaterialTooltip){var i=this.isBootstrap4?Kw:Jw;switch(e){case"TopCenter":this.tooltipObj.setProperties({offsetY:-i},!1);break;case"BottomCenter":this.tooltipObj.setProperties({offsetY:i},!1);break;case"LeftCenter":this.tooltipObj.setProperties({offsetX:-i},!1);break;case"RightCenter":this.tooltipObj.setProperties({offsetX:i},!1);break}}},t.prototype.materialTooltipEventCallBack=function(e){this.sliderBarClick(e),I.add(document,"mousemove touchmove",this.sliderBarMove,this),I.add(document,"mouseup touchend",this.sliderBarUp,this)},t.prototype.wireMaterialTooltipEvent=function(e){this.isMaterialTooltip&&(e?I.remove(this.tooltipElement,"mousedown touchstart",this.materialTooltipEventCallBack):I.add(this.tooltipElement,"mousedown touchstart",this.materialTooltipEventCallBack,this))},t.prototype.tooltipPositionCalculation=function(e){var i;switch(e){case"TopCenter":i=H.horizontalTooltipBefore;break;case"BottomCenter":i=H.horizontalTooltipAfter;break;case"LeftCenter":i=H.verticalTooltipBefore;break;case"RightCenter":i=H.verticalTooltipAfter;break}return i},t.prototype.getTooltipTransformProperties=function(e){var i;if(this.tooltipElement){var r=this.orientation==="Horizontal"?this.tooltipElement.clientHeight+14-this.tooltipElement.clientHeight/2:this.tooltipElement.clientWidth+14-this.tooltipElement.clientWidth/2;i=this.orientation==="Horizontal"?e===H.horizontalTooltipBefore?{rotate:"rotate(45deg)",translate:"translateY("+r+"px)"}:{rotate:"rotate(225deg)",translate:"translateY("+-r+"px)"}:e===H.verticalTooltipBefore?{rotate:"rotate(-45deg)",translate:"translateX("+r+"px)"}:{rotate:"rotate(-225deg)",translate:"translateX("+-r+"px)"}}return i},t.prototype.openMaterialTooltip=function(){var e=this;if(this.isMaterialTooltip){this.refreshTooltip(this.firstHandle);var i=this.tooltipElement.firstElementChild;i.classList.remove(H.materialTooltipHide),i.classList.add(H.materialTooltipShow),this.firstHandle.style.cursor="default",this.tooltipElement.style.transition=this.scaleTransform,this.tooltipElement.classList.add(H.materialTooltipOpen),this.materialHandle.style.transform="scale(0)",i.innerText.length>4?this.tooltipElement.style.transform="scale(1)":this.tooltipElement.style.transform=this.getTooltipTransformProperties(this.previousTooltipClass).rotate,this.type==="Default"?setTimeout(function(){e.tooltipElement&&(e.tooltipElement.style.transition=e.transition.handle)},2500):setTimeout(function(){e.tooltipElement&&(e.tooltipElement.style.transition="none")},2500)}},t.prototype.closeMaterialTooltip=function(){var e=this;if(this.isMaterialTooltip){var i=this.tooltipElement.firstElementChild;this.tooltipElement.style.transition=this.scaleTransform,i.classList.remove(H.materialTooltipShow),i.classList.add(H.materialTooltipHide),this.firstHandle.style.cursor="-webkit-grab",this.firstHandle.style.cursor="grab",this.materialHandle&&(this.materialHandle.style.transform="scale(1)"),this.tooltipElement.classList.remove(H.materialTooltipOpen),this.setTooltipTransform(),this.tooltipTarget=void 0,setTimeout(function(){e.tooltipElement&&(e.tooltipElement.style.transition="none")},2500)}},t.prototype.checkTooltipPosition=function(e){var i=this.tooltipPositionCalculation(e.collidedPosition);(this.tooltipCollidedPosition===void 0||this.tooltipCollidedPosition!==e.collidedPosition||!e.element.classList.contains(i))&&(this.isMaterialTooltip&&(i!==void 0&&(e.element.classList.remove(this.previousTooltipClass),e.element.classList.add(i),this.previousTooltipClass=i),e.element.style.transform&&e.element.classList.contains(H.materialTooltipOpen)&&e.element.firstElementChild.innerText.length<=4&&(e.element.style.transform=this.getTooltipTransformProperties(this.previousTooltipClass).rotate)),this.tooltipCollidedPosition=e.collidedPosition),this.isMaterialTooltip&&this.tooltipElement&&this.tooltipElement.style.transform.indexOf("translate")!==-1&&this.setTooltipTransform()},t.prototype.setTooltipTransform=function(){var e=this.getTooltipTransformProperties(this.previousTooltipClass);d(this.tooltipElement)||(this.tooltipElement.firstElementChild.innerText.length>4?this.tooltipElement.style.transform=e.translate+" scale(0.01)":this.tooltipElement.style.transform=e.translate+" "+e.rotate+" scale(0.01)")},t.prototype.renderTooltip=function(){this.tooltipObj=new nn({showTipPointer:this.isBootstrap||this.isMaterial||this.isMaterial3||this.isBootstrap4||this.isTailwind||this.isTailwind3||this.isBootstrap5||this.isFluent||this.isFluent2||this.isBootstrap5Dot3,cssClass:H.sliderTooltip,height:this.isMaterial||this.isMaterial3?30:"auto",animation:{open:{effect:"None"},close:{effect:"FadeOut",duration:500}},opensOn:"Custom",beforeOpen:this.tooltipBeforeOpen.bind(this),beforeCollision:this.checkTooltipPosition.bind(this),beforeClose:this.tooltipBeforeClose.bind(this),enableHtmlSanitizer:this.enableHtmlSanitizer}),this.tooltipObj.appendTo(this.firstHandle),this.initializeTooltipProps()},t.prototype.initializeTooltipProps=function(){var e=this.tooltip.showOn==="Auto"?"Hover":this.tooltip.showOn;this.setProperties({tooltip:{showOn:e}},!0),this.tooltipObj.position=this.tooltipPlacement(),this.tooltipCollision(this.tooltipObj.position),[this.firstHandle,this.rangeBar,this.secondHandle].forEach(function(i){d(i)||(i.style.transition="none")}),this.isMaterialTooltip&&(this.sliderContainer.classList.add(H.materialSlider),this.tooltipValue(),this.tooltipObj.animation.close.effect="None",this.tooltipObj.open(this.firstHandle))},t.prototype.tooltipBeforeClose=function(){this.tooltipElement=void 0,this.tooltipCollidedPosition=void 0},t.prototype.setButtons=function(){this.firstBtn=this.createElement("div",{className:H.sliderButton+" "+H.firstButton}),this.firstBtn.appendChild(this.createElement("span",{className:H.sliderButtonIcon})),(this.isTailwind||this.isTailwind3)&&this.firstBtn.querySelector("span").classList.add("e-icons"),this.firstBtn.tabIndex=-1,this.secondBtn=this.createElement("div",{className:H.sliderButton+" "+H.secondButton}),this.secondBtn.appendChild(this.createElement("span",{className:H.sliderButtonIcon})),(this.isTailwind||this.isTailwind3)&&this.secondBtn.querySelector("span").classList.add("e-icons"),this.secondBtn.tabIndex=-1,this.sliderContainer.classList.add(H.sliderButtonClass),this.sliderContainer.appendChild(this.firstBtn),this.sliderContainer.appendChild(this.secondBtn),this.sliderContainer.appendChild(this.element),this.buttonTitle()},t.prototype.buttonTitle=function(){var e=this.enableRtl&&this.orientation!=="Vertical";this.l10n.setLocale(this.locale);var i=this.l10n.getConstant("decrementTitle"),r=this.l10n.getConstant("incrementTitle");ye(e?this.secondBtn:this.firstBtn,{"aria-label":i,title:i}),ye(e?this.firstBtn:this.secondBtn,{"aria-label":r,title:r})},t.prototype.buttonFocusOut=function(){(this.isMaterial||this.isMaterial3)&&this.getHandle().classList.remove("e-large-thumb-size")},t.prototype.repeatButton=function(e){var i=this.handleValueUpdate(),r=this.enableRtl&&this.orientation!=="Vertical",n;e.target.parentElement.classList.contains(H.firstButton)||e.target.classList.contains(H.firstButton)?r?n=this.add(i,parseFloat(this.step.toString()),!0):n=this.add(i,parseFloat(this.step.toString()),!1):(e.target.parentElement.classList.contains(H.secondButton)||e.target.classList.contains(H.secondButton))&&(r?n=this.add(i,parseFloat(this.step.toString()),!1):n=this.add(i,parseFloat(this.step.toString()),!0)),this.limits.enabled&&(n=this.getLimitCorrectedValues(n)),n>=this.min&&n<=this.max&&(this.changeHandleValue(n),this.tooltipToggle(this.getHandle()))},t.prototype.repeatHandlerMouse=function(e){e.preventDefault(),(e.type==="mousedown"||e.type==="touchstart")&&(this.buttonClick(e),this.repeatInterval=setInterval(this.repeatButton.bind(this),180,e))},t.prototype.materialChange=function(){this.getHandle().classList.contains("e-large-thumb-size")||this.getHandle().classList.add("e-large-thumb-size")},t.prototype.focusHandle=function(){this.getHandle().classList.contains(H.sliderTabHandle)||this.getHandle().classList.add(H.sliderTabHandle)},t.prototype.repeatHandlerUp=function(e){this.changeEvent("changed",e),this.closeTooltip(),clearInterval(this.repeatInterval),this.getHandle().focus()},t.prototype.customTickCounter=function(e){var i=4;return!d(this.customValues)&&this.customValues.length>0&&(e>4&&(i=3),e>7&&(i=2),e>14&&(i=1),e>28&&(i=0)),i},t.prototype.renderScale=function(){var e=this.orientation==="Vertical"?"v":"h";this.noOfDecimals=this.numberOfDecimals(this.step),this.ul=this.createElement("ul",{className:H.scale+" e-"+e+"-scale "+H.tick+"-"+this.ticks.placement.toLowerCase(),attrs:{role:"presentation","aria-hidden":"true"}}),this.ul.style.zIndex="-1",D.isAndroid&&e==="h"&&this.ul.classList.add(H.sliderTickPosition);var i=this.ticks.smallStep;this.ticks.showSmallTicks?i<=0&&(i=parseFloat(le(this.step))):this.ticks.largeStep>0?i=this.ticks.largeStep:i=parseFloat(le(this.max))-parseFloat(le(this.min));var r=this.fractionalToInteger(this.min),n=this.fractionalToInteger(this.max),s=this.fractionalToInteger(i),a=!d(this.customValues)&&this.customValues.length>0&&this.customValues.length-1,l=this.customTickCounter(a),h=!d(this.customValues)&&this.customValues.length>0?a*l+a:Math.abs((n-r)/s);this.element.appendChild(this.ul);var c,u=parseFloat(this.min.toString());e==="v"&&(u=parseFloat(this.max.toString()));var p=0,f,g=100/h;g===1/0&&(g=5);for(var v=0,y=!d(this.customValues)&&this.customValues.length>0?this.customValues.length-1:0,C=0;v<=h;v++){if(c=this.createElement("li",{attrs:{class:H.tick,role:"presentation","aria-hidden":"true"}}),!d(this.customValues)&&this.customValues.length>0)f=v%(l+1)===0,f&&(e==="h"?(u=this.customValues[C],C++):(u=this.customValues[y],y--),c.setAttribute("title",u.toString()));else if(c.setAttribute("title",u.toString()),this.numberOfDecimals(this.max)===0&&this.numberOfDecimals(this.min)===0&&this.numberOfDecimals(this.step)===0)e==="h"?f=(u-parseFloat(this.min.toString()))%this.ticks.largeStep===0:f=Math.abs(u-parseFloat(this.max.toString()))%this.ticks.largeStep===0;else{var b=this.fractionalToInteger(this.ticks.largeStep),M=this.fractionalToInteger(u);e==="h"?f=(M-r)%b===0:f=Math.abs(M-parseFloat(n.toString()))%b===0}f&&c.classList.add(H.large),e==="h"?c.style.width=g+"%":c.style.height=g+"%";var S=f?this.ticks.placement==="Both"?2:1:0;if(f)for(var N=0;N<S;N++)this.createTick(c,u);else d(this.customValues)&&this.formatTicksValue(c,u);this.ul.appendChild(c),this.tickElementCollection.push(c);var x=void 0;d(this.customValues)&&(this.numberOfDecimals(i)>this.numberOfDecimals(u)?x=this.numberOfDecimals(i):x=this.numberOfDecimals(u),e==="h"?u=this.makeRoundNumber(u+i,x):this.min>this.max?u=this.makeRoundNumber(u+i,x):u=this.makeRoundNumber(u-i,x),p=this.makeRoundNumber(p+i,x))}this.ticksAlignment(e,g)},t.prototype.ticksAlignment=function(e,i,r){r===void 0&&(r=!0),this.firstChild=this.ul.firstElementChild,this.lastChild=this.ul.lastElementChild,this.firstChild.classList.add(H.sliderFirstTick),this.lastChild.classList.add(H.sliderLastTick),this.sliderContainer.classList.add(H.scale+"-"+this.ticks.placement.toLowerCase()),e==="h"?(this.firstChild.style.width=i/2+"%",this.lastChild.style.width=i/2+"%"):(this.firstChild.style.height=i/2+"%",this.lastChild.style.height=i/2+"%");var n={ticksWrapper:this.ul,tickElements:this.tickElementCollection};r&&this.trigger("renderedTicks",n),this.scaleAlignment()},t.prototype.createTick=function(e,i){var r=this.createElement("span",{className:H.tickValue+" "+H.tick+"-"+this.ticks.placement.toLowerCase(),attrs:{role:"presentation","aria-hidden":"true"}});e.appendChild(r),d(this.customValues)?this.formatTicksValue(e,i,r):this.enableHtmlSanitizer?r.innerHTML=nt.sanitize(i.toString()):r.innerHTML=i.toString()},t.prototype.formatTicksValue=function(e,i,r){var n=this,s=this.formatNumber(i),a=!d(this.ticks)&&!d(this.ticks.format)?this.formatString(i,this.ticksFormatInfo).formatString:s,l={value:i,text:a,tickElement:e};this.trigger("renderingTicks",l,function(h){e.setAttribute("title",h.text.toString()),r&&(n.enableHtmlSanitizer?r.innerHTML=nt.sanitize(h.text.toString()):r.innerHTML=h.text.toString())})},t.prototype.scaleAlignment=function(){this.tickValuePosition(),this.orientation==="Vertical"?this.element.getBoundingClientRect().width<=15?this.sliderContainer.classList.add(H.sliderSmallSize):this.sliderContainer.classList.remove(H.sliderSmallSize):this.element.getBoundingClientRect().height<=15?this.sliderContainer.classList.add(H.sliderSmallSize):this.sliderContainer.classList.remove(H.sliderSmallSize)},t.prototype.tickValuePosition=function(){this.firstChild=this.element.querySelector("ul").children[0];var e=this.firstChild.getBoundingClientRect(),i,r,n=this.ticks.smallStep,s=Math.abs(parseFloat(le(this.max))-parseFloat(le(this.min)))/n;this.firstChild.children.length>0&&(i=this.firstChild.children[0].getBoundingClientRect());var a=[this.sliderContainer.querySelectorAll("."+H.tick+"."+H.large+" ."+H.tickValue)],l;this.ticks.placement==="Both"?l=[].slice.call(a[0],2):l=[].slice.call(a[0],1);for(var h=this.orientation==="Vertical"?e.height*2:e.width*2,c=0;c<this.firstChild.children.length;c++)this.orientation==="Vertical"?this.firstChild.children[c].style.top=-(i.height/2)+"px":this.enableRtl?this.firstChild.children[c].style.left=(h-this.firstChild.children[c].getBoundingClientRect().width)/2+"px":this.firstChild.children[c].style.left=-(i.width/2)+"px";for(var c=0;c<l.length;c++)r=l[c].getBoundingClientRect(),this.orientation==="Vertical"?Ce(l[c],{top:(h-r.height)/2+"px"}):Ce(l[c],{left:(h-r.width)/2+"px"});this.enableRtl&&this.lastChild.children.length&&s!==0&&(this.lastChild.children[0].style.left=-(this.lastChild.getBoundingClientRect().width/2)+"px",this.ticks.placement==="Both"&&(this.lastChild.children[1].style.left=-(this.lastChild.getBoundingClientRect().width/2)+"px")),s===0&&(this.orientation==="Horizontal"&&(this.enableRtl?(this.firstChild.classList.remove(H.sliderLastTick),this.firstChild.style.right=this.firstHandle.style.right,this.firstChild.children[0].style.left=this.firstChild.getBoundingClientRect().width/2+2+"px",this.ticks.placement==="Both"&&(this.firstChild.children[1].style.left=this.firstChild.getBoundingClientRect().width/2+2+"px")):(this.firstChild.classList.remove(H.sliderLastTick),this.firstChild.style.left=this.firstHandle.style.left)),this.orientation==="Vertical"&&this.firstChild.classList.remove(H.sliderLastTick))},t.prototype.setAriaAttrValue=function(e){var i,r=!d(this.ticks)&&!d(this.ticks.format),n=r?this.formatContent(this.tooltipFormatInfo,!1):this.formatContent(this.ticksFormatInfo,!1),s=r?this.formatContent(this.ticksFormatInfo,!0):this.formatContent(this.tooltipFormatInfo,!0);n=this.customAriaText?this.customAriaText:n,n.split(" - ").length===2?i=n.split(" - "):i=[n,n],this.setAriaAttributes(e),this.type!=="Range"?ye(e,{"aria-valuenow":s,"aria-valuetext":n}):this.enableRtl?e===this.firstHandle?ye(e,{"aria-valuenow":s.split(" - ")[1],"aria-valuetext":i[1]}):ye(e,{"aria-valuenow":s.split(" - ")[0],"aria-valuetext":i[0]}):e===this.firstHandle?ye(e,{"aria-valuenow":s.split(" - ")[0],"aria-valuetext":i[0]}):ye(e,{"aria-valuenow":s.split(" - ")[1],"aria-valuetext":i[1]})},t.prototype.handleValueUpdate=function(){var e;return this.type==="Range"?this.activeHandle===1?e=this.handleVal1:e=this.handleVal2:e=this.handleVal1,e},t.prototype.getLimitCorrectedValues=function(e){return this.type==="MinRange"||this.type==="Default"?e=this.getLimitValueAndPosition(e,this.limits.minStart,this.limits.minEnd)[0]:this.activeHandle===1?e=this.getLimitValueAndPosition(e,this.limits.minStart,this.limits.minEnd)[0]:e=this.getLimitValueAndPosition(e,this.limits.maxStart,this.limits.maxEnd)[0],e},t.prototype.focusSliderElement=function(){this.isElementFocused||(this.element.focus(),this.isElementFocused=!0)},t.prototype.buttonClick=function(e){this.focusSliderElement();var i,r=this.enableRtl&&this.orientation!=="Vertical",n=this.handleValueUpdate();e.keyCode===40||e.keyCode===37||e.currentTarget.classList.contains(H.firstButton)?r?i=this.add(n,parseFloat(this.step.toString()),!0):i=this.add(n,parseFloat(this.step.toString()),!1):e.keyCode===38||e.keyCode===39||e.currentTarget.classList.contains(H.secondButton)?r?i=this.add(n,parseFloat(this.step.toString()),!1):i=this.add(n,parseFloat(this.step.toString()),!0):e.keyCode===33||e.currentTarget.classList.contains(H.firstButton)?r?i=this.add(n,parseFloat(this.ticks.largeStep.toString()),!1):i=this.add(n,parseFloat(this.ticks.largeStep.toString()),!0):e.keyCode===34||e.currentTarget.classList.contains(H.secondButton)?r?i=this.add(n,parseFloat(this.ticks.largeStep.toString()),!0):i=this.add(n,parseFloat(this.ticks.largeStep.toString()),!1):e.keyCode===36?i=parseFloat(this.min<this.max?this.min.toString():this.max.toString()):e.keyCode===35&&(i=parseFloat(this.min<this.max?this.max.toString():this.min.toString())),this.limits.enabled&&(i=this.getLimitCorrectedValues(i)),this.changeHandleValue(i),(this.isMaterial||this.isMaterial3)&&!this.tooltip.isVisible&&!this.getHandle().classList.contains(H.sliderTabHandle)&&this.materialChange(),this.tooltipToggle(this.getHandle()),this.getHandle().focus(),this.focusHandle(),e.currentTarget.classList.contains(H.firstButton)&&I.add(this.firstBtn,"mouseup touchend",this.buttonUp,this),e.currentTarget.classList.contains(H.secondButton)&&I.add(this.secondBtn,"mouseup touchend",this.buttonUp,this)},t.prototype.tooltipToggle=function(e){this.isMaterialTooltip?this.tooltipElement.classList.contains(H.materialTooltipOpen)?this.refreshTooltip(this.firstHandle):this.openMaterialTooltip():this.tooltipElement?this.refreshTooltip(e):this.openTooltip(e)},t.prototype.buttonUp=function(e){e.currentTarget.classList.contains(H.firstButton)&&I.remove(this.firstBtn,"mouseup touchend",this.buttonUp),e.currentTarget.classList.contains(H.secondButton)&&I.remove(this.secondBtn,"mouseup touchend",this.buttonUp)},t.prototype.setRangeBar=function(){this.orientation==="Horizontal"&&!d(this.rangeBar)?this.type==="MinRange"?(this.enableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",Ce(this.rangeBar,{width:d(this.handlePos1)?0:this.handlePos1+"px"})):(this.enableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",Ce(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"})):d(this.rangeBar)||(this.type==="MinRange"?(this.rangeBar.style.bottom=this.min>this.max?this.handlePos1+"px":"0px",Ce(this.rangeBar,{height:d(this.handlePos1)?0:this.min>this.max?this.element.clientHeight-this.handlePos1+"px":this.handlePos1+"px"})):(this.rangeBar.style.bottom=this.min>this.max?this.handlePos2+"px":this.handlePos1+"px",Ce(this.rangeBar,{height:this.min>this.max?this.handlePos1-this.handlePos2+"px":this.handlePos2-this.handlePos1+"px"})))},t.prototype.checkValidValueAndPos=function(e){return e=this.checkHandleValue(e),e=this.checkHandlePosition(e),e},t.prototype.setLimitBarPositions=function(e,i,r,n){this.orientation==="Horizontal"?this.enableRtl?(this.limitBarFirst.style.right=e+"px",this.limitBarFirst.style.width=i-e+"px"):(this.limitBarFirst.style.left=e+"px",this.limitBarFirst.style.width=i-e+"px"):(this.limitBarFirst.style.bottom=(this.min<this.max?e:i)+"px",this.limitBarFirst.style.height=(this.min<this.max?i-e:e-i)+"px"),this.type==="Range"&&(this.orientation==="Horizontal"?this.enableRtl?(this.limitBarSecond.style.right=r+"px",this.limitBarSecond.style.width=n-r+"px"):(this.limitBarSecond.style.left=r+"px",this.limitBarSecond.style.width=n-r+"px"):(this.limitBarSecond.style.bottom=(this.min<this.max?r:n)+"px",this.limitBarSecond.style.height=(this.min<this.max?n-r:r-n)+"px"))},t.prototype.setLimitBar=function(){if(this.type==="Default"||this.type==="MinRange"){var e=this.getLimitValueAndPosition(this.limits.minStart,this.limits.minStart,this.limits.minEnd,!0)[0];e=this.checkValidValueAndPos(e);var i=this.getLimitValueAndPosition(this.limits.minEnd,this.limits.minStart,this.limits.minEnd,!0)[0];i=this.checkValidValueAndPos(i),this.setLimitBarPositions(e,i)}else if(this.type==="Range"){var r=this.getLimitValueAndPosition(this.limits.minStart,this.limits.minStart,this.limits.minEnd,!0)[0];r=this.checkValidValueAndPos(r);var n=this.getLimitValueAndPosition(this.limits.minEnd,this.limits.minStart,this.limits.minEnd,!0)[0];n=this.checkValidValueAndPos(n);var s=this.getLimitValueAndPosition(this.limits.maxStart,this.limits.maxStart,this.limits.maxEnd,!0)[0];s=this.checkValidValueAndPos(s);var a=this.getLimitValueAndPosition(this.limits.maxEnd,this.limits.maxStart,this.limits.maxEnd,!0)[0];a=this.checkValidValueAndPos(a),this.setLimitBarPositions(r,n,s,a)}},t.prototype.getLimitValueAndPosition=function(e,i,r,n){return d(i)&&(i=this.min<this.max?this.min:this.max,d(e)&&n&&(e=i)),d(r)&&(r=this.min<this.max?this.max:this.min,d(e)&&n&&(e=r)),e<i&&(e=i),e>r&&(e=r),[e,this.checkHandlePosition(e)]},t.prototype.setValue=function(){if(!d(this.customValues)&&this.customValues.length>0&&(this.min=0,this.max=this.customValues.length-1,this.setBarColor()),this.setAriaAttributes(this.firstHandle),this.handleVal1=d(this.value)?this.checkHandleValue(parseFloat(this.min.toString())):this.checkHandleValue(parseFloat(this.value.toString())),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.preHandlePos1=this.handlePos1,d(this.activeHandle)&&(this.activeHandle=this.type==="Range"?2:1),this.type==="Default"||this.type==="MinRange"){if(this.limits.enabled){var e=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=e[0],this.handlePos1=e[1],this.preHandlePos1=this.handlePos1}this.setHandlePosition(null),this.handleStart(),this.value=this.handleVal1,this.setAriaAttrValue(this.firstHandle),this.changeEvent("changed",null)}else this.validateRangeValue();this.type!=="Default"&&this.setRangeBar(),this.limits.enabled&&this.setLimitBar()},t.prototype.rangeValueUpdate=function(){(this.value===null||typeof this.value!="object")&&(this.value=[parseFloat(le(this.min)),parseFloat(le(this.max))])},t.prototype.validateRangeValue=function(){this.rangeValueUpdate(),this.setRangeValue()},t.prototype.modifyZindex=function(){this.type==="Range"&&!d(this.firstHandle)&&!d(this.secondHandle)?this.activeHandle===1?(this.firstHandle.style.zIndex=this.zIndex+4+"",this.secondHandle.style.zIndex=this.zIndex+3+""):(this.firstHandle.style.zIndex=this.zIndex+3+"",this.secondHandle.style.zIndex=this.zIndex+4+""):this.isMaterialTooltip&&this.tooltipElement&&(this.tooltipElement.style.zIndex=Er(this.element)+"")},t.prototype.setHandlePosition=function(e){var i=this,r,n=this.activeHandle===1?this.handlePos1:this.handlePos2;this.isMaterialTooltip?r=[this.firstHandle,this.materialHandle]:r=[this.getHandle()],this.handleStart(),r.forEach(function(s){d(s)||(i.orientation==="Horizontal"?i.enableRtl?s.style.right=n+"px":s.style.left=n+"px":s.style.bottom=n+"px")}),this.changeEvent("change",e)},t.prototype.getHandle=function(){return this.activeHandle===1?this.firstHandle:this.secondHandle},t.prototype.setRangeValue=function(){this.updateRangeValue(),this.activeHandle=1,this.setHandlePosition(null),this.activeHandle=2,this.setHandlePosition(null),this.activeHandle=1},t.prototype.changeEvent=function(e,i){var r=e==="change"?this.previousVal:this.previousChanged;if(this.type!=="Range")this.setProperties({value:this.handleVal1},!0),r!==this.value&&(!this.isMaterialTooltip||!this.initialTooltip)&&(this.trigger(e,this.changeEventArgs(e,i)),this.initialTooltip=!0,this.setPreviousVal(e,this.value)),this.setAriaAttrValue(this.firstHandle);else{var n=this.value=[this.handleVal1,this.handleVal2];this.setProperties({value:n},!0),(r.length===this.value.length&&this.value[0]!==r[0]||this.value[1]!==r[1])&&(this.initialTooltip=!1,this.trigger(e,this.changeEventArgs(e,i)),this.initialTooltip=!0,this.setPreviousVal(e,this.value)),this.setAriaAttrValue(this.getHandle())}this.hiddenInput.value=this.value.toString()},t.prototype.changeEventArgs=function(e,i){var r;return this.tooltip.isVisible&&this.tooltipObj&&this.initialTooltip?(this.tooltipValue(),r={value:this.value,previousValue:e==="change"?this.previousVal:this.previousChanged,action:e,text:typeof this.tooltipObj.content=="function"?this.tooltipObj.content():this.tooltipObj.content,isInteracted:!d(i)}):r={value:this.value,previousValue:e==="change"?this.previousVal:this.previousChanged,action:e,text:d(this.ticksFormatInfo.format)?this.value.toString():this.type!=="Range"?this.formatString(this.value,this.ticksFormatInfo).formatString:this.formatString(this.value[0],this.ticksFormatInfo).formatString+" - "+this.formatString(this.value[1],this.ticksFormatInfo).formatString,isInteracted:!d(i)},r},t.prototype.setPreviousVal=function(e,i){e==="change"?this.previousVal=i:this.previousChanged=i},t.prototype.updateRangeValue=function(){var e=this.value.toString().split(",").map(Number);if(this.enableRtl&&this.orientation!=="Vertical"||this.rtl?this.value=[e[1],e[0]]:this.value=[e[0],e[1]],this.enableRtl&&this.orientation!=="Vertical"?(this.handleVal1=this.checkHandleValue(this.value[1]),this.handleVal2=this.checkHandleValue(this.value[0])):(this.handleVal1=this.checkHandleValue(this.value[0]),this.handleVal2=this.checkHandleValue(this.value[1])),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2),this.min<this.max&&this.handlePos1>this.handlePos2&&(this.handlePos1=this.handlePos2,this.handleVal1=this.handleVal2),this.min>this.max&&this.handlePos1<this.handlePos2&&(this.handlePos2=this.handlePos1,this.handleVal2=this.handleVal1),this.preHandlePos1=this.handlePos1,this.preHandlePos2=this.handlePos2,this.limits.enabled){this.activeHandle=1;var i=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=i[0],this.handlePos1=i[1],this.preHandlePos1=this.handlePos1,this.activeHandle=2,i=this.getLimitValueAndPosition(this.handleVal2,this.limits.maxStart,this.limits.maxEnd),this.handleVal2=i[0],this.handlePos2=i[1],this.preHandlePos2=this.handlePos2}},t.prototype.checkHandlePosition=function(e){var i;return e=100*(e-parseFloat(le(this.min)))/(parseFloat(le(this.max))-parseFloat(le(this.min))),this.orientation==="Horizontal"?i=this.element.getBoundingClientRect().width*(e/100):i=this.element.getBoundingClientRect().height*(e/100),parseFloat(le(this.max))===parseFloat(le(this.min))&&(this.orientation==="Horizontal"?i=this.element.getBoundingClientRect().width:i=this.element.getBoundingClientRect().height),i},t.prototype.checkHandleValue=function(e){if(this.min===this.max)return parseFloat(le(this.max));var i=this.tempStartEnd();return e<i.start?e=i.start:e>i.end&&(e=i.end),e},t.prototype.reposition=function(){var e=this;d(this.firstHandle)||(this.firstHandle.style.transition="none"),this.type!=="Default"&&!d(this.rangeBar)&&(this.rangeBar.style.transition="none"),this.type==="Range"&&!d(this.secondHandle)&&(this.secondHandle.style.transition="none"),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handleVal2&&(this.handlePos2=this.checkHandlePosition(this.handleVal2)),this.orientation==="Horizontal"?(this.enableRtl?this.firstHandle.style.right=this.handlePos1+"px":this.firstHandle.style.left=this.handlePos1+"px",this.isMaterialTooltip&&!d(this.materialHandle)&&(this.enableRtl?this.materialHandle.style.right=this.handlePos1+"px":this.materialHandle.style.left=this.handlePos1+"px"),this.type==="MinRange"&&!d(this.rangeBar)?(this.enableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",Ce(this.rangeBar,{width:d(this.handlePos1)?0:this.handlePos1+"px"})):this.type==="Range"&&!d(this.secondHandle)&&!d(this.rangeBar)&&(this.enableRtl?(this.secondHandle.style.right=this.handlePos2+"px",this.rangeBar.style.right=this.handlePos1+"px"):(this.secondHandle.style.left=this.handlePos2+"px",this.rangeBar.style.left=this.handlePos1+"px"),Ce(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"}))):(this.firstHandle.style.bottom=this.handlePos1+"px",this.isMaterialTooltip&&(this.materialHandle.style.bottom=this.handlePos1+"px"),this.type==="MinRange"?(this.rangeBar.style.bottom=this.min>this.max?this.handlePos1+"px":"0px",Ce(this.rangeBar,{height:d(this.handlePos1)?0:this.min>this.max?this.element.clientHeight-this.handlePos1+"px":this.handlePos1+"px"})):this.type==="Range"&&(this.secondHandle.style.bottom=this.handlePos2+"px",this.rangeBar.style.bottom=this.min>this.max?this.handlePos2+"px":this.handlePos1+"px",Ce(this.rangeBar,{height:this.min>this.max?this.handlePos1-this.handlePos2+"px":this.handlePos2-this.handlePos1+"px"}))),this.limits.enabled&&this.setLimitBar(),this.ticks.placement!=="None"&&this.ul&&(this.removeElement(this.ul),this.ul=void 0,this.renderScale()),this.handleStart(),this.tooltip.isVisible||setTimeout(function(){d(e.firstHandle)||(e.firstHandle.style.transition=e.scaleTransform),e.type==="Range"&&!d(e.secondHandle)&&(e.secondHandle.style.transition=e.scaleTransform)}),this.refreshTooltip(this.tooltipTarget),this.setBarColor()},t.prototype.changeHandleValue=function(e){var i=null;this.activeHandle===1?(this.limits.enabled&&this.limits.startHandleFixed||(this.handleVal1=this.checkHandleValue(e),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.type==="Range"&&(this.handlePos1>this.handlePos2&&this.min<this.max||this.handlePos1<this.handlePos2&&this.min>this.max)&&(this.handlePos1=this.handlePos2,this.handleVal1=this.handleVal2),this.handlePos1!==this.preHandlePos1&&(i=this.preHandlePos1=this.handlePos1)),this.modifyZindex()):(this.limits.enabled&&this.limits.endHandleFixed||(this.handleVal2=this.checkHandleValue(e),this.handlePos2=this.checkHandlePosition(this.handleVal2),this.type==="Range"&&(this.handlePos2<this.handlePos1&&this.min<this.max||this.handlePos2>this.handlePos1&&this.min>this.max)&&(this.handlePos2=this.handlePos1,this.handleVal2=this.handleVal1),this.handlePos2!==this.preHandlePos2&&(i=this.preHandlePos2=this.handlePos2)),this.modifyZindex()),i!==null&&(this.type!=="Default"&&this.setRangeBar(),this.setHandlePosition(null))},t.prototype.tempStartEnd=function(){return this.min>this.max?{start:this.max,end:this.min}:{start:this.min,end:this.max}},t.prototype.xyToPosition=function(e){var i;if(this.min===this.max)return 100;if(this.orientation==="Horizontal"){var r=e.x-this.element.getBoundingClientRect().left,n=this.element.offsetWidth/100;this.val=r/n}else{var s=e.y-this.element.getBoundingClientRect().top,n=this.element.offsetHeight/100;this.val=100-s/n}var a=this.stepValueCalculation(this.val);return a<0?a=0:a>100&&(a=100),this.enableRtl&&this.orientation!=="Vertical"&&(a=100-a),this.orientation==="Horizontal"?i=this.element.getBoundingClientRect().width*(a/100):i=this.element.getBoundingClientRect().height*(a/100),i},t.prototype.stepValueCalculation=function(e){this.step===0&&(this.step=1);var i=parseFloat(le(this.step))/((parseFloat(le(this.max))-parseFloat(le(this.min)))/100),r=e%Math.abs(i);return r!==0&&(i/2>r?e-=r:e+=Math.abs(i)-r),e},t.prototype.add=function(e,i,r){var n=Math.pow(10,3),s;return r?s=(Math.round(e*n)+Math.round(i*n))/n:s=(Math.round(e*n)-Math.round(i*n))/n,s},t.prototype.positionToValue=function(e){var i,r=parseFloat(le(this.max))-parseFloat(le(this.min));this.orientation==="Horizontal"?i=e/this.element.getBoundingClientRect().width*r:i=e/this.element.getBoundingClientRect().height*r;var n=this.add(i,parseFloat(this.min.toString()),!0);return n},t.prototype.sliderBarClick=function(e){e.preventDefault();var i;e.type==="mousedown"||e.type==="mouseup"||e.type==="click"?i={x:e.clientX,y:e.clientY}:(e.type==="touchend"||e.type==="touchstart")&&(i={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY});var r=this.xyToPosition(i),n=this.positionToValue(r);if(this.type==="Range"&&(this.min<this.max&&this.handlePos2-r<r-this.handlePos1||this.min>this.max&&this.handlePos1-r>r-this.handlePos2)){if(this.activeHandle=2,!(this.limits.enabled&&this.limits.endHandleFixed)){if(this.limits.enabled){var s=this.getLimitValueAndPosition(n,this.limits.maxStart,this.limits.maxEnd);n=s[0],r=s[1]}this.secondHandle.classList.add(H.sliderActiveHandle),this.handlePos2=this.preHandlePos2=r,this.handleVal2=n}this.modifyZindex(),this.secondHandle.focus()}else{if(this.activeHandle=1,!(this.limits.enabled&&this.limits.startHandleFixed)){if(this.limits.enabled){var s=this.getLimitValueAndPosition(n,this.limits.minStart,this.limits.minEnd);n=s[0],r=s[1]}this.firstHandle.classList.add(H.sliderActiveHandle),this.handlePos1=this.preHandlePos1=r,this.handleVal1=n}this.modifyZindex(),this.firstHandle.focus()}this.isMaterialTooltip&&this.tooltipElement.classList.add(H.materialTooltipActive);var a=this.element.querySelector("."+H.sliderTabHandle);a&&this.getHandle()!==a&&a.classList.remove(H.sliderTabHandle);var l=this.activeHandle===1?this.firstHandle:this.secondHandle,h;if((e.type==="click"||e.type==="mousedown")&&e.target===l){var c=e.clientX,u=e.clientY;h=document.elementFromPoint(c,u)}if(this.checkRepeatedValue(n)){var p=(this.isMaterial||this.isMaterial3)&&this.tooltip.isVisible?this.transitionOnMaterialTooltip:this.transition;this.getHandle().style.transition=p.handle,this.type!=="Default"&&(this.rangeBar.style.transition=p.rangeBar),this.setHandlePosition(e),this.isMaterialTooltip&&(this.initialTooltip=!1),e.target!==l&&this.changeEvent("changed",e),this.type!=="Default"&&this.setRangeBar()}},t.prototype.handleValueAdjust=function(e,i,r){r===1?(this.handleVal1=i,this.handleVal2=this.handleVal1+this.minDiff):r===2&&(this.handleVal2=i,this.handleVal1=this.handleVal2-this.minDiff),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2)},t.prototype.dragRangeBarMove=function(e){var i,r;e.type!=="touchmove"&&e.preventDefault(),this.rangeBarDragged=!0;var n;this.rangeBar.style.transition="none",this.firstHandle.style.transition="none",this.secondHandle.style.transition="none";var s,a;if(e.type==="mousemove"?(i=[e.clientX,e.clientY],s=i[0],a=i[1]):(r=[e.changedTouches[0].clientX,e.changedTouches[0].clientY],s=r[0],a=r[1]),!(this.limits.enabled&&this.limits.startHandleFixed)&&!(this.limits.enabled&&this.limits.endHandleFixed)){if(this.enableRtl?n={x:s+this.secondPartRemain,y:a+this.secondPartRemain}:n={x:s-this.firstPartRemain,y:a+this.secondPartRemain},this.min>this.max?(this.handlePos2=this.xyToPosition(n),this.handleVal2=this.positionToValue(this.handlePos2)):(this.handlePos1=this.xyToPosition(n),this.handleVal1=this.positionToValue(this.handlePos1)),this.enableRtl?n={x:s-this.firstPartRemain,y:a-this.firstPartRemain}:n={x:s+this.secondPartRemain,y:a-this.firstPartRemain},this.min>this.max?(this.handlePos1=this.xyToPosition(n),this.handleVal1=this.positionToValue(this.handlePos1)):(this.handlePos2=this.xyToPosition(n),this.handleVal2=this.positionToValue(this.handlePos2)),this.limits.enabled){var l=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=l[0],this.handlePos1=l[1],this.handleVal1===this.limits.minEnd&&this.handleValueAdjust(this.handleVal1,this.limits.minEnd,1),this.handleVal1===this.limits.minStart&&this.handleValueAdjust(this.handleVal1,this.limits.minStart,1),l=this.getLimitValueAndPosition(this.handleVal2,this.limits.maxStart,this.limits.maxEnd),this.handleVal2=l[0],this.handlePos2=l[1],this.handleVal2===this.limits.maxStart&&this.handleValueAdjust(this.handleVal2,this.limits.maxStart,2),this.handleVal2===this.limits.maxEnd&&this.handleValueAdjust(this.handleVal2,this.limits.maxEnd,2)}this.handleVal2===(this.min>this.max?this.min:this.max)&&this.handleValueAdjust(this.handleVal2,this.min>this.max?this.min:this.max,2),this.handleVal1===(this.min>this.max?this.max:this.min)&&this.handleValueAdjust(this.handleVal1,this.min>this.max?this.max:this.min,1)}this.activeHandle=1,this.setHandlePosition(e),this.activeHandle=2,this.setHandlePosition(e),this.tooltipToggle(this.rangeBar),this.setRangeBar()},t.prototype.sliderBarUp=function(e){this.changeEvent("changed",e),this.handleFocusOut(),this.firstHandle.classList.remove(H.sliderActiveHandle),this.type==="Range"&&(this.initialTooltip=!1,this.secondHandle.classList.remove(H.sliderActiveHandle)),this.closeTooltip(),(this.isMaterial||this.isMaterial3)&&(this.getHandle().classList.remove("e-large-thumb-size"),this.isMaterialTooltip&&this.tooltipElement.classList.remove(H.materialTooltipActive)),I.remove(document,"mousemove touchmove",this.sliderBarMove),I.remove(document,"mouseup touchend",this.sliderBarUp)},t.prototype.sliderBarMove=function(e){e.type!=="touchmove"&&e.preventDefault();var i;e.type==="mousemove"?i={x:e.clientX,y:e.clientY}:i={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY};var r=this.xyToPosition(i),n=this.positionToValue(r);if(r=Math.round(r),this.type!=="Range"&&this.activeHandle===1){if(!(this.limits.enabled&&this.limits.startHandleFixed)){if(this.limits.enabled){var s=this.getLimitValueAndPosition(n,this.limits.minStart,this.limits.minEnd);r=s[1],n=s[0]}this.handlePos1=r,this.handleVal1=n}this.firstHandle.classList.add(H.sliderActiveHandle)}if(this.type==="Range"){if(this.activeHandle===1){if(this.firstHandle.classList.add(H.sliderActiveHandle),!(this.limits.enabled&&this.limits.startHandleFixed)&&((this.min<this.max&&r>this.handlePos2||this.min>this.max&&r<this.handlePos2)&&(r=this.handlePos2,n=this.handleVal2),r!==this.preHandlePos1)){if(this.limits.enabled){var a=this.getLimitValueAndPosition(n,this.limits.minStart,this.limits.minEnd);n=a[0],r=a[1]}this.handlePos1=this.preHandlePos1=r,this.handleVal1=n,this.activeHandle=1}}else if(this.activeHandle===2&&(this.secondHandle.classList.add(H.sliderActiveHandle),!(this.limits.enabled&&this.limits.endHandleFixed)&&((this.min<this.max&&r<this.handlePos1||this.min>this.max&&r>this.handlePos1)&&(r=this.handlePos1,n=this.handleVal1),r!==this.preHandlePos2))){if(this.limits.enabled){var a=this.getLimitValueAndPosition(n,this.limits.maxStart,this.limits.maxEnd);n=a[0],r=a[1]}this.handlePos2=this.preHandlePos2=r,this.handleVal2=n,this.activeHandle=2}}this.checkRepeatedValue(n)&&(this.getHandle().style.transition=this.scaleTransform,this.type!=="Default"&&(this.rangeBar.style.transition="none"),this.setHandlePosition(e),(this.isMaterial||this.isMaterial3)&&!this.tooltip.isVisible&&!this.getHandle().classList.contains(H.sliderTabHandle)&&this.materialChange(),this.tooltipToggle(this.getHandle()),this.type!=="Default"&&this.setRangeBar())},t.prototype.dragRangeBarUp=function(e){this.rangeBarDragged?this.isDragComplete=!0:(this.focusSliderElement(),this.sliderBarClick(e)),this.changeEvent("changed",e),this.closeTooltip(),I.remove(document,"mousemove touchmove",this.dragRangeBarMove),I.remove(document,"mouseup touchend",this.dragRangeBarUp),this.rangeBarDragged=!1},t.prototype.checkRepeatedValue=function(e){if(this.type==="Range"){var i=this.enableRtl&&this.orientation!=="Vertical"?this.activeHandle===1?this.previousVal[1]:this.previousVal[0]:this.activeHandle===1?this.previousVal[0]:this.previousVal[1];if(e===i)return 0}else if(e===this.previousVal)return 0;return 1},t.prototype.refreshTooltip=function(e){this.tooltip.isVisible&&this.tooltipObj&&(this.tooltipValue(),e&&(this.tooltipObj.refresh(e),this.tooltipTarget=e))},t.prototype.openTooltip=function(e){this.tooltip.isVisible&&this.tooltipObj&&!this.isMaterialTooltip&&(this.tooltipValue(),this.tooltipObj.open(e),this.tooltipTarget=e)},t.prototype.closeTooltip=function(){this.tooltip.isVisible&&this.tooltipObj&&this.tooltip.showOn!=="Always"&&!this.isMaterialTooltip&&(this.tooltipValue(),this.tooltipObj.close(),this.tooltipTarget=void 0)},t.prototype.keyDown=function(e){switch(e.keyCode){case 37:case 38:case 39:case 40:case 33:case 34:case 36:case 35:e.preventDefault(),this.buttonClick(e);break}},t.prototype.wireButtonEvt=function(e){e?(I.remove(this.firstBtn,"mouseleave touchleave",this.buttonFocusOut),I.remove(this.secondBtn,"mouseleave touchleave",this.buttonFocusOut),I.remove(this.firstBtn,"mousedown touchstart",this.repeatHandlerMouse),I.remove(this.firstBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp),I.remove(this.secondBtn,"mousedown touchstart",this.repeatHandlerMouse),I.remove(this.secondBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp),I.remove(this.firstBtn,"focusout",this.sliderFocusOut),I.remove(this.secondBtn,"focusout",this.sliderFocusOut)):(I.add(this.firstBtn,"mouseleave touchleave",this.buttonFocusOut,this),I.add(this.secondBtn,"mouseleave touchleave",this.buttonFocusOut,this),I.add(this.firstBtn,"mousedown touchstart",this.repeatHandlerMouse,this),I.add(this.firstBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp,this),I.add(this.secondBtn,"mousedown touchstart",this.repeatHandlerMouse,this),I.add(this.secondBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp,this),I.add(this.firstBtn,"focusout",this.sliderFocusOut,this),I.add(this.secondBtn,"focusout",this.sliderFocusOut,this))},t.prototype.rangeBarMousedown=function(e){var i,r;if(e.preventDefault(),this.focusSliderElement(),this.type==="Range"&&this.drag&&e.target===this.rangeBar){var n=void 0,s=void 0;e.type==="mousedown"?(i=[e.clientX,e.clientY],n=i[0],s=i[1]):e.type==="touchstart"&&(r=[e.changedTouches[0].clientX,e.changedTouches[0].clientY],n=r[0],s=r[1]),this.orientation==="Horizontal"?(this.firstPartRemain=n-this.rangeBar.getBoundingClientRect().left,this.secondPartRemain=this.rangeBar.getBoundingClientRect().right-n):(this.firstPartRemain=s-this.rangeBar.getBoundingClientRect().top,this.secondPartRemain=this.rangeBar.getBoundingClientRect().bottom-s),this.minDiff=this.handleVal2-this.handleVal1,this.tooltipToggle(this.rangeBar);var a=this.element.querySelector("."+H.sliderTabHandle);a&&a.classList.remove(H.sliderTabHandle),I.add(document,"mousemove touchmove",this.dragRangeBarMove,this),I.add(document,"mouseup touchend",this.dragRangeBarUp,this)}},t.prototype.elementClick=function(e){if(this.isDragComplete){this.isDragComplete=!1;return}e.preventDefault(),this.focusSliderElement(),this.sliderBarClick(e),this.focusHandle()},t.prototype.wireEvents=function(){this.onresize=this.reposition.bind(this),window.addEventListener("resize",this.onresize),this.enabled&&!this.readonly&&(I.add(this.element,"click",this.elementClick,this),this.type==="Range"&&this.drag&&I.add(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown,this),I.add(this.sliderContainer,"keydown",this.keyDown,this),I.add(this.sliderContainer,"keyup",this.keyUp,this),I.add(this.element,"focusout",this.sliderFocusOut,this),I.add(this.sliderContainer,"mouseover mouseout touchstart touchend",this.hover,this),this.wireFirstHandleEvt(!1),this.type==="Range"&&this.wireSecondHandleEvt(!1),this.showButtons&&this.wireButtonEvt(!1),this.wireMaterialTooltipEvent(!1),this.isForm&&I.add(this.formElement,"reset",this.formResetHandler,this))},t.prototype.unwireEvents=function(){I.remove(this.element,"click",this.elementClick),this.type==="Range"&&this.drag&&I.remove(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown),I.remove(this.sliderContainer,"keydown",this.keyDown),I.remove(this.sliderContainer,"keyup",this.keyUp),I.remove(this.element,"focusout",this.sliderFocusOut),I.remove(this.sliderContainer,"mouseover mouseout touchstart touchend",this.hover),this.wireFirstHandleEvt(!0),this.type==="Range"&&this.wireSecondHandleEvt(!0),this.showButtons&&this.wireButtonEvt(!0),this.wireMaterialTooltipEvent(!0),I.remove(this.element,"reset",this.formResetHandler)},t.prototype.formResetHandler=function(){this.setProperties({value:this.formResetValue},!0),this.setValue()},t.prototype.keyUp=function(e){if(e.keyCode===9&&e.target.classList.contains(H.sliderHandle)&&(this.focusSliderElement(),!e.target.classList.contains(H.sliderTabHandle))){this.element.querySelector("."+H.sliderTabHandle)&&this.element.querySelector("."+H.sliderTabHandle).classList.remove(H.sliderTabHandle),e.target.classList.add(H.sliderTabHandle);var i=e.target.parentElement;if(i===this.element&&(i.querySelector("."+H.sliderTrack).classList.add(H.sliderTabTrack),(this.type==="Range"||this.type==="MinRange")&&i.querySelector("."+H.rangeBar).classList.add(H.sliderTabRange)),this.type==="Range"){var r=e.target.previousSibling;r&&r.classList.contains(H.sliderHandle)?this.activeHandle=2:this.activeHandle=1}this.getHandle().focus(),this.tooltipToggle(this.getHandle())}this.closeTooltip(),this.changeEvent("changed",e)},t.prototype.hover=function(e){if(!d(e))if(e.type==="mouseover"||e.type==="touchmove"||e.type==="mousemove"||e.type==="pointermove"||e.type==="touchstart")this.sliderContainer.classList.add(H.sliderHover);else{this.sliderContainer.classList.remove(H.sliderHover);var i=e.currentTarget;this.tooltip.isVisible&&this.tooltip.showOn!=="Always"&&this.tooltipObj&&this.isMaterialTooltip&&!i.classList.contains(H.sliderHandleFocused)&&!i.classList.contains(H.sliderTabHandle)&&this.closeMaterialTooltip()}},t.prototype.sliderFocusOut=function(e){e.relatedTarget!==this.secondHandle&&e.relatedTarget!==this.firstHandle&&e.relatedTarget!==this.element&&e.relatedTarget!==this.firstBtn&&e.relatedTarget!==this.secondBtn&&(this.closeMaterialTooltip(),this.closeTooltip(),this.element.querySelector("."+H.sliderTabHandle)&&this.element.querySelector("."+H.sliderTabHandle).classList.remove(H.sliderTabHandle),this.element.querySelector("."+H.sliderTabTrack)&&(this.element.querySelector("."+H.sliderTabTrack).classList.remove(H.sliderTabTrack),(this.type==="Range"||this.type==="MinRange")&&this.element.querySelector("."+H.sliderTabRange)&&this.element.querySelector("."+H.sliderTabRange).classList.remove(H.sliderTabRange)),this.hiddenInput.focus(),this.hiddenInput.blur(),this.isElementFocused=!1)},t.prototype.removeElement=function(e){e.parentNode&&e.parentNode.removeChild(e)},t.prototype.changeSliderType=function(e,i){this.isMaterialTooltip&&this.materialHandle&&(this.sliderContainer.classList.remove(H.materialSlider),this.removeElement(this.materialHandle),this.materialHandle=void 0),this.removeElement(this.firstHandle),this.firstHandle=void 0,e!=="Default"&&(e==="Range"&&(this.removeElement(this.secondHandle),this.secondHandle=void 0),this.removeElement(this.rangeBar),this.rangeBar=void 0),this.tooltip.isVisible&&!d(this.tooltipObj)&&(this.tooltipObj.destroy(),this.tooltipElement=void 0,this.tooltipCollidedPosition=void 0),this.limits.enabled&&(e==="MinRange"||e==="Default"?d(this.limitBarFirst)||(this.removeElement(this.limitBarFirst),this.limitBarFirst=void 0):d(this.limitBarSecond)||(this.removeElement(this.limitBarSecond),this.limitBarSecond=void 0)),this.activeHandle=1,this.getThemeInitialization(),this.type==="Range"&&this.rangeValueUpdate(),this.createRangeBar(),this.limits.enabled&&this.createLimitBar(),this.setHandler(),this.setOrientClass(),this.wireFirstHandleEvt(!this.enabled),this.type==="Range"&&this.wireSecondHandleEvt(!this.enabled),this.setValue(),this.tooltip.isVisible&&(this.renderTooltip(),this.wireMaterialTooltipEvent(!1)),this.setBarColor(),i!=="tooltip"&&this.updateConfig(),this.readonly&&(this.sliderContainer.classList.remove(H.readonly),this.setReadOnly())},t.prototype.changeRtl=function(){if(!this.enableRtl&&this.type==="Range"&&(this.value=[this.handleVal2,this.handleVal1]),this.updateConfig(),this.tooltip.isVisible&&this.tooltipObj.refresh(this.firstHandle),this.showButtons){var e=this.enableRtl&&this.orientation!=="Vertical";ye(e?this.secondBtn:this.firstBtn,{"aria-label":"Decrease",title:"Decrease"}),ye(e?this.firstBtn:this.secondBtn,{"aria-label":"Increase",title:"Increase"})}},t.prototype.changeOrientation=function(){this.changeSliderType(this.type,"null")},t.prototype.updateConfig=function(){this.setEnableRTL(),this.setValue(),this.tooltip.isVisible&&this.refreshTooltip(this.tooltipTarget),this.ticks.placement!=="None"&&this.ul&&(this.removeElement(this.ul),this.ul=void 0,this.renderScale()),this.limitsPropertyChange()},t.prototype.limitsPropertyChange=function(){this.limits.enabled?(d(this.limitBarFirst)&&this.type!=="Range"&&this.createLimitBar(),d(this.limitBarFirst)&&d(this.limitBarSecond)&&this.type==="Range"&&this.createLimitBar(),this.setLimitBar(),this.setValue()):(d(this.limitBarFirst)||K(this.limitBarFirst),d(this.limitBarSecond)||K(this.limitBarSecond))},t.prototype.getPersistData=function(){var e=["value"];return this.addOnPersist(e)},t.prototype.destroy=function(){o.prototype.destroy.call(this),this.unwireEvents(),window.removeEventListener("resize",this.onresize),ee([this.sliderContainer],[H.sliderDisabled]),this.firstHandle.removeAttribute("aria-orientation"),this.type==="Range"&&this.secondHandle.removeAttribute("aria-orientation"),this.sliderContainer.parentNode&&this.sliderContainer.parentNode.insertBefore(this.element,this.sliderContainer),K(this.sliderContainer),this.tooltip.isVisible&&this.tooltipObj.destroy(),this.element.innerHTML="",this.hiddenInput=null,this.sliderContainer=null,this.sliderTrack=null,this.rangeBar=null,this.firstHandle=null,this.secondHandle=null,this.tickElementCollection=null,this.ul=null,this.firstBtn=null,this.secondBtn=null,this.materialHandle=null,this.tooltipObj=null,this.tooltipTarget=null,this.limitBarFirst=null,this.limitBarSecond=null,this.firstChild=null,this.lastChild=null,this.tooltipElement=null},t.prototype.onPropertyChanged=function(e,i){for(var r=this,n=0,s=Object.keys(e);n<s.length;n++){var a=s[n];switch(a){case"cssClass":this.setCSSClass(i.cssClass);break;case"value":if(e&&i){var l=d(e.value)?this.type==="Range"?[this.min,this.max]:this.min:e.value;this.setProperties({value:l},!0),!d(i.value)&&i.value.toString()!==l.toString()&&(this.setValue(),this.refreshTooltip(this.tooltipTarget),this.type==="Range"&&(d(e.value)||i.value[1]===l[1]?this.activeHandle=1:this.activeHandle=2))}break;case"min":case"step":case"max":this.setMinMaxValue();break;case"tooltip":!d(e.tooltip)&&!d(i.tooltip)&&(this.initialTooltip=!0,this.setTooltip(a),this.showButtons||this.wireEvents());break;case"type":!d(i)&&Object.keys(i).length&&!d(i.type)&&(this.changeSliderType(i.type,a),this.setZindex());break;case"enableRtl":i.enableRtl!==e.enableRtl&&this.orientation!=="Vertical"&&(this.rtl=i.enableRtl,this.changeRtl());break;case"limits":this.limitsPropertyChange();break;case"orientation":this.changeOrientation();break;case"ticks":d(this.sliderContainer.querySelector("."+H.scale))||(K(this.ul),Array.prototype.forEach.call(this.sliderContainer.classList,function(h){h.match(/e-scale-/)&&r.sliderContainer.classList.remove(h)})),this.ticks.placement!=="None"&&(this.renderScale(),this.setZindex());break;case"locale":this.showButtons&&this.buttonTitle();break;case"showButtons":e.showButtons?(this.setButtons(),this.reposition(),this.enabled&&!this.readonly&&this.wireButtonEvt(!1)):this.firstBtn&&this.secondBtn&&(this.sliderContainer.removeChild(this.firstBtn),this.sliderContainer.removeChild(this.secondBtn),this.sliderContainer.classList.remove(H.sliderButtonClass),this.firstBtn=void 0,this.secondBtn=void 0,this.reposition());break;case"enabled":this.setEnabled();break;case"readonly":this.setReadOnly();break;case"customValues":this.setValue(),this.reposition();break;case"colorRange":this.reposition();break;case"width":this.setElementWidth(e.width),this.setMinMaxValue(),this.limits&&this.limitsPropertyChange();break}}},t.prototype.setReadOnly=function(){this.readonly?(this.unwireEvents(),this.sliderContainer.classList.add(H.readonly)):(this.wireEvents(),this.sliderContainer.classList.remove(H.readonly))},t.prototype.setMinMaxValue=function(){var e=this;this.setValue(),this.refreshTooltip(this.tooltipTarget),d(this.sliderContainer.querySelector("."+H.scale))||this.ul&&(K(this.ul),Array.prototype.forEach.call(this.sliderContainer.classList,function(i){i.match(/e-scale-/)&&e.sliderContainer.classList.remove(i)})),this.ticks.placement!=="None"&&(this.renderScale(),this.setZindex())},t.prototype.setZindex=function(){this.zIndex=6,!d(this.ticks)&&this.ticks.placement!=="None"&&!d(this.ul)&&!d(this.element)&&(this.ul.style.zIndex=this.zIndex+-7+"",this.element.style.zIndex=this.zIndex+2+""),!this.isMaterial&&!this.isMaterial3&&!d(this.ticks)&&this.ticks.placement==="Both"&&(this.element.style.zIndex=this.zIndex+2+""),d(this.firstHandle)||(this.firstHandle.style.zIndex=this.zIndex+3+""),this.type==="Range"&&!d(this.secondHandle)&&(this.secondHandle.style.zIndex=this.zIndex+4+"")},t.prototype.setTooltip=function(e){this.changeSliderType(this.type,e)},t.prototype.setBarColor=function(){for(var e,i,r=this.sliderTrack.lastElementChild;r;)this.sliderTrack.removeChild(r),r=this.sliderTrack.lastElementChild;for(var n=0;n<this.colorRange.length;n++)if(!d(this.colorRange[n].start)&&!d(this.colorRange[n].end)&&this.colorRange[n].end>this.colorRange[n].start){this.colorRange[n].start<this.min&&(this.colorRange[n].start=this.min),this.colorRange[n].end>this.max&&(this.colorRange[n].end=this.max);var s=this.checkHandlePosition(this.colorRange[n].start),a=this.checkHandlePosition(this.colorRange[n].end),l=this.createElement("div");l.style.backgroundColor=this.colorRange[n].color,l.style.border="1px solid "+this.colorRange[n].color,this.orientation==="Horizontal"?(i=H.sliderHorizantalColor,this.enableRtl?d(this.customValues)?e=this.checkHandlePosition(this.max)-this.checkHandlePosition(this.colorRange[n].end):e=this.checkHandlePosition(this.customValues.length-this.colorRange[n].end-1):e=this.checkHandlePosition(this.colorRange[n].start),l.style.width=a-s+"px",l.style.left=e+"px"):(i=H.sliderVerticalColor,e=this.checkHandlePosition(this.colorRange[n].start),l.style.height=a-s+"px",l.style.bottom=e+"px"),l.classList.add(i),this.sliderTrack.appendChild(l)}},t.prototype.getModuleName=function(){return"slider"},Ie([w(null)],t.prototype,"value",void 0),Ie([w(null)],t.prototype,"customValues",void 0),Ie([w(1)],t.prototype,"step",void 0),Ie([w(null)],t.prototype,"width",void 0),Ie([w(0)],t.prototype,"min",void 0),Ie([w(100)],t.prototype,"max",void 0),Ie([w(!1)],t.prototype,"readonly",void 0),Ie([w("Default")],t.prototype,"type",void 0),Ie([mi([{}],Gw)],t.prototype,"colorRange",void 0),Ie([it({},qw)],t.prototype,"ticks",void 0),Ie([it({},Zw)],t.prototype,"limits",void 0),Ie([w(!0)],t.prototype,"enabled",void 0),Ie([it({},$w)],t.prototype,"tooltip",void 0),Ie([w(!1)],t.prototype,"showButtons",void 0),Ie([w(!0)],t.prototype,"enableAnimation",void 0),Ie([w("Horizontal")],t.prototype,"orientation",void 0),Ie([w("")],t.prototype,"cssClass",void 0),Ie([w(!0)],t.prototype,"enableHtmlSanitizer",void 0),Ie([Q()],t.prototype,"created",void 0),Ie([Q()],t.prototype,"change",void 0),Ie([Q()],t.prototype,"changed",void 0),Ie([Q()],t.prototype,"renderingTicks",void 0),Ie([Q()],t.prototype,"renderedTicks",void 0),Ie([Q()],t.prototype,"tooltipChange",void 0),t=Ie([Qe],t),t}(dt);var QO={EMAIL:new RegExp("^[A-Za-z0-9._%+-]{1,}@[A-Za-z0-9._%+-]{1,}([.]{1}[a-zA-Z0-9]{2,}|[.]{1}[a-zA-Z0-9]{2,4}[.]{1}[a-zA-Z0-9]{2,4})$"),URL:/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/m,DATE_ISO:new RegExp("^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$"),DIGITS:new RegExp("^[0-9]*$"),PHONE:new RegExp("^[+]?[0-9]{9,13}$"),CREDITCARD:new RegExp("^\\d{13,16}$")};var _a=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(t,e)};return function(t,e){o(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),be=function(o,t,e,i){var r=arguments.length,n=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,e,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,e,n):s(t,e))||n);return r>3&&n&&Object.defineProperty(t,e,n),n},eD="e-upload e-control-wrapper",Mm="e-file-select",lu="e-file-drop",tD="e-file-select-wrap",Im="e-upload-files",Pa="e-upload-file-list",ut="e-file-status",iD="e-upload-actions",rD="e-file-upload-btn e-css e-btn e-flat e-primary",nD="e-file-clear-btn e-css e-btn e-flat",Sm="e-file-name",Tm="e-file-type",wm="e-file-size",Tt="e-file-remove-btn",ti="e-file-delete-btn",Dm="e-spinner-pane",lt="e-file-abort-btn",Yi="e-file-reload-btn",hu="e-upload-drag-hover",sn="e-upload-progress-wrap",ka="e-upload-progress-bar",cu="e-progress-bar-text",ii="e-upload-progress",Ti="e-upload-success",ri="e-upload-fails",uu="e-file-container",xm="e-validation-fails",Am="e-rtl",pu="e-disabled",Em="e-rtl-container",du="e-clear-icon-focus",sD="e-progress-inner-wrap",Pt="e-file-pause-btn",on="e-file-play-btn",Zs="e-restrict-retry",Om=["title","style","class"],Nm="e-form-upload",oD="e-hidden-file-input",Gn="e-file-invalid",aD="e-file-information",lD=function(o){_a(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return be([w("")],t.prototype,"name",void 0),be([w(null)],t.prototype,"size",void 0),be([w("")],t.prototype,"type",void 0),t}(Ue),hD=function(o){_a(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return be([w("Browse...")],t.prototype,"browse",void 0),be([w("Upload")],t.prototype,"upload",void 0),be([w("Clear")],t.prototype,"clear",void 0),t}(Ue),cD=function(o){_a(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return be([w("")],t.prototype,"saveUrl",void 0),be([w("")],t.prototype,"removeUrl",void 0),be([w(0)],t.prototype,"chunkSize",void 0),be([w(3)],t.prototype,"retryCount",void 0),be([w(500)],t.prototype,"retryAfterDelay",void 0),t}(Ue),hn=function(o){_a(t,o);function t(e,i){var r=o.call(this,e,i)||this;return r.initialAttr={accept:null,multiple:!1,disabled:!1},r.uploadedFilesData=[],r.base64String=[],r.isForm=!1,r.allTypes=!1,r.pausedData=[],r.uploadMetaData=[],r.tabIndex="0",r.btnTabIndex="0",r.disableKeyboardNavigation=!1,r.count=-1,r.actionCompleteCount=0,r.flag=!0,r.selectedFiles=[],r.uploaderName="UploadFiles",r.fileStreams=[],r.newFileRef=0,r.isFirstFileOnSelection=!1,r.dragCounter=0,r.fileList=[],r.filesData=[],r.uploaderOptions=e,r}return t.prototype.onPropertyChanged=function(e,i){for(var r=0,n=Object.keys(e);r<n.length;r++){var s=n[r];switch(s){case"allowedExtensions":this.setExtensions(this.allowedExtensions),this.clearAll();break;case"enabled":this.setControlStatus();break;case"multiple":this.setMultipleSelection();break;case"enableRtl":this.setRTL(),this.reRenderFileList();break;case"buttons":this.buttons.browse=d(this.buttons.browse)?"":this.buttons.browse,this.buttons.clear=d(this.buttons.clear)?"":this.buttons.clear,this.buttons.upload=d(this.buttons.upload)?"":this.buttons.upload,this.renderButtonTemplates();break;case"dropArea":this.unBindDropEvents(),this.updateDropArea();break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkHTMLAttributes(!0);break;case"files":this.renderPreLoadFiles();break;case"directoryUpload":this.updateDirectoryAttributes();break;case"template":this.isReact?this.reRenderFileList():this.clearAll();break;case"minFileSize":case"maxFileSize":case"autoUpload":this.clearAll();break;case"sequentialUpload":this.clearAll();break;case"locale":this.l10n.setLocale(this.locale),this.setLocalizedTexts(),this.preLocaleObj=Y("currentLocale",this.l10n);break;case"cssClass":this.setCSSClass(i.cssClass);break}}},t.prototype.setLocalizedTexts=function(){d(this.template)&&(typeof this.buttons.browse=="string"&&(this.browseButton.innerText=this.buttons.browse==="Browse..."?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.innerText),this.uploadWrapper&&!d(this.uploadWrapper.querySelector("."+lu))&&(this.uploadWrapper.querySelector("."+lu).innerHTML=this.localizedTexts("dropFilesHint"))),this.updateFileList())},t.prototype.getKeyValue=function(e){for(var i,r=0,n=Object.keys(this.preLocaleObj);r<n.length;r++){var s=n[r];this.preLocaleObj[""+s]===e&&(i=s)}return i},t.prototype.updateFileList=function(){var e;if(this.fileList.length>0&&!d(this.uploadWrapper.querySelector("."+Im)))for(var i=0;i<this.fileList.length;i++)e=this.fileList[i].querySelector(".e-file-status"),e.innerHTML=this.localizedTexts(this.getKeyValue(this.filesData[i].status)),this.filesData[i].status=this.localizedTexts(this.getKeyValue(this.filesData[i].status)),this.fileList[i].classList.contains(Ti)&&this.fileList[i].querySelector(".e-icons").setAttribute("title",this.localizedTexts("delete")),this.fileList[i].querySelector(".e-file-play-btn")&&this.fileList[i].querySelector(".e-icons").setAttribute("title",this.localizedTexts("resume")),this.fileList[i].querySelector(".e-file-remove-btn")&&this.fileList[i].querySelector(".e-icons").setAttribute("title",this.localizedTexts("remove")),this.fileList[i].querySelector(".e-file-reload-btn")&&this.fileList[i].querySelector(".e-icons").setAttribute("title",this.localizedTexts("retry")),this.autoUpload||(this.uploadButton.innerText=this.buttons.upload==="Upload"?this.localizedTexts("Upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.localizedTexts("Upload")),this.clearButton.innerText=this.buttons.clear==="Clear"?this.localizedTexts("Clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.localizedTexts("Clear")))},t.prototype.reRenderFileList=function(){this.listParent&&(K(this.listParent),this.listParent=null,this.fileList=[],this.internalCreateFileList(this.filesData),this.actionButtons&&(this.removeActionButtons(),this.renderActionButtons(),this.checkActionButtonStatus()))},t.prototype.preRender=function(){this.localeText={Browse:"Browse...",Clear:"Clear",Upload:"Upload",invalidFileName:"File Name is not allowed",dropFilesHint:"Or drop files here",invalidMaxFileSize:"File size is too large",invalidMinFileSize:"File size is too small",invalidFileType:"File type is not allowed",uploadFailedMessage:"File failed to upload",uploadSuccessMessage:"File uploaded successfully",removedSuccessMessage:"File removed successfully",removedFailedMessage:"Unable to remove file",inProgress:"Uploading",readyToUploadMessage:"Ready to upload",abort:"Abort",remove:"Remove",cancel:"Cancel",delete:"Delete file",pauseUpload:"File upload paused",pause:"Pause",resume:"Resume",retry:"Retry",fileUploadCancel:"File upload canceled",invalidFileSelection:"Invalid files selected",totalFiles:"Total files",size:"Size"},this.l10n=new yi("uploader",this.localeText,this.locale),this.preLocaleObj=Y("currentLocale",this.l10n),this.formRendered(),this.updateHTMLAttrToElement(),this.checkHTMLAttributes(!1);var e=Y("ej2_instances",this.element);if(this.element.tagName==="EJS-UPLOADER"){var i=this.createElement("input",{attrs:{type:"file"}}),r=0;for(r;r<this.element.attributes.length;r++)this.element.attributes[r].nodeName!=="id"?i.setAttribute(this.element.attributes[r].nodeName,this.element.attributes[r].nodeValue):this.element.attributes[r].nodeName==="id"&&i.setAttribute(this.element.attributes[r].nodeName,Je("uploader")),i.innerHTML=this.element.innerHTML;i.hasAttribute("name")||i.setAttribute("name","UploadFiles"),this.element.appendChild(i),this.element=i,ve("ej2_instances",e,this.element)}e[0].isPureReactComponent&&(d(e[0].props.name)?!d(e[0].props.id)&&d(e[0].props.name)?this.element.setAttribute("name",e[0].props.id):this.element.setAttribute("name","UploadFiles"):this.element.setAttribute("name",e[0].props.name)),d(this.element.getAttribute("name"))&&this.element.setAttribute("name",this.element.getAttribute("id")),this.element.hasAttribute("type")||this.element.setAttribute("type","file"),this.updateDirectoryAttributes(),this.keyConfigs={enter:"enter"},this.element.hasAttribute("tabindex")&&(this.tabIndex=this.element.getAttribute("tabindex")),this.browserName=D.info.name,this.uploaderName=this.element.getAttribute("name")},t.prototype.formRendered=function(){var e=ge(this.element,"form");if(!d(e))for(;e&&e!==document.documentElement;e=e.parentElement)e.tagName==="FORM"&&(this.isForm=!0,this.formElement=e,e.setAttribute("enctype","multipart/form-data"),e.setAttribute("encoding","multipart/form-data"))},t.prototype.getPersistData=function(){return this.addOnPersist(["filesData"])},t.prototype.getModuleName=function(){return"uploader"},t.prototype.updateDirectoryAttributes=function(){this.directoryUpload?(this.element.setAttribute("directory","true"),this.element.setAttribute("webkitdirectory","true")):(this.element.removeAttribute("directory"),this.element.removeAttribute("webkitdirectory"))},t.prototype.render=function(){this.renderBrowseButton(),this.initializeUpload(),this.updateHTMLAttrToWrapper(),this.wireEvents(),this.setMultipleSelection(),this.setExtensions(this.allowedExtensions),this.setRTL(),this.renderPreLoadFiles(),this.setControlStatus(),this.setCSSClass()},t.prototype.renderBrowseButton=function(){this.browseButton=this.createElement("button",{className:"e-css e-btn",attrs:{type:"button"}}),this.browseButton.setAttribute("tabindex",this.tabIndex),typeof this.buttons.browse=="string"?(this.browseButton.textContent=this.buttons.browse==="Browse..."?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.innerText)):this.browseButton.appendChild(this.buttons.browse),this.element.setAttribute("aria-label","Uploader")},t.prototype.renderActionButtons=function(){this.element.setAttribute("tabindex","-1"),this.actionButtons=this.createElement("div",{className:iD}),this.uploadButton=this.createElement("button",{className:rD,attrs:{type:"button",tabindex:this.btnTabIndex,"aria-label":this.localizedTexts("Upload")}}),this.clearButton=this.createElement("button",{className:nD,attrs:{type:"button",tabindex:this.btnTabIndex,"aria-label":this.localizedTexts("Clear")}}),this.actionButtons.appendChild(this.clearButton),this.actionButtons.appendChild(this.uploadButton),this.renderButtonTemplates(),this.uploadWrapper.appendChild(this.actionButtons),this.browseButton.blur(),this.isPreloadFiles||this.uploadButton.focus(),this.wireActionButtonEvents()},t.prototype.serverActionButtonsEventBind=function(e){e&&!this.isForm&&(this.browseButton.blur(),this.actionButtons=e,this.uploadButton=this.actionButtons.querySelector(".e-file-upload-btn"),this.clearButton=this.actionButtons.querySelector(".e-file-clear-btn"),this.uploadButton.focus(),this.unwireActionButtonEvents(),this.wireActionButtonEvents(),this.checkActionButtonStatus())},t.prototype.wireActionButtonEvents=function(){I.add(this.uploadButton,"click",this.uploadButtonClick,this),I.add(this.clearButton,"click",this.clearButtonClick,this)},t.prototype.unwireActionButtonEvents=function(){I.remove(this.uploadButton,"click",this.uploadButtonClick),I.remove(this.clearButton,"click",this.clearButtonClick)},t.prototype.removeActionButtons=function(){this.actionButtons&&(this.unwireActionButtonEvents(),K(this.actionButtons),this.actionButtons=null)},t.prototype.renderButtonTemplates=function(){if(typeof this.buttons.browse=="string"?(this.browseButton.textContent=this.buttons.browse==="Browse..."?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.textContent)):(this.browseButton.innerHTML="",this.browseButton.appendChild(this.buttons.browse)),this.uploadButton){var e=d(this.buttons.upload)?"Upload":this.buttons.upload;this.buttons.upload=e,typeof this.buttons.upload=="string"?(this.uploadButton.textContent=this.buttons.upload==="Upload"?this.localizedTexts("Upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.uploadButton.textContent)):(this.uploadButton.innerHTML="",this.uploadButton.appendChild(this.buttons.upload))}if(this.clearButton){var i=d(this.buttons.clear)?"Clear":this.buttons.clear;this.buttons.clear=i,typeof this.buttons.clear=="string"?(this.clearButton.textContent=this.buttons.clear==="Clear"?this.localizedTexts("Clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.clearButton.textContent)):(this.clearButton.innerHTML="",this.clearButton.appendChild(this.buttons.clear))}},t.prototype.initializeUpload=function(){this.element.setAttribute("tabindex","-1");var e=this.createElement("span",{className:Mm});this.element.parentElement.insertBefore(e,this.element),this.dropAreaWrapper=this.createElement("div",{className:tD}),this.element.parentElement.insertBefore(this.dropAreaWrapper,this.element),e.appendChild(this.element),this.dropAreaWrapper.appendChild(this.browseButton),this.dropAreaWrapper.appendChild(e),this.uploadWrapper=this.createElement("div",{className:eD}),this.dropAreaWrapper.parentElement.insertBefore(this.uploadWrapper,this.dropAreaWrapper),this.uploadWrapper.appendChild(this.dropAreaWrapper),this.setDropArea()},t.prototype.renderPreLoadFiles=function(){if(this.files.length){if(this.enablePersistence&&this.filesData.length){this.internalCreateFileList(this.filesData);return}if(d(this.files[0].size))return;this.isPreloadFiles=!0;var e=[].slice.call(this.files),i=[];this.multiple||(this.clearData(),e=[e[0]]);for(var r=0,n=e;r<n.length;r++){var s=n[r],a={name:s.name+"."+s.type.split(".")[s.type.split(".").length-1],rawFile:"",size:s.size,status:this.localizedTexts("uploadSuccessMessage"),type:s.type,validationMessages:{minSize:"",maxSize:""},statusCode:"2"};i.push(a),this.filesData.push(a)}this.internalCreateFileList(i),!this.autoUpload&&this.listParent&&!this.actionButtons&&(!this.isForm||this.allowUpload())&&this.showFileList&&this.renderActionButtons(),this.checkActionButtonStatus(),this.sequentialUpload&&(this.count=this.filesData.length-1),this.isPreloadFiles=!1}},t.prototype.checkActionButtonStatus=function(){if(this.actionButtons){var e=this.uploadWrapper.querySelectorAll("."+xm).length+this.uploadWrapper.querySelectorAll(".e-upload-fails:not(.e-upload-progress)").length+this.uploadWrapper.querySelectorAll("span."+Ti).length+this.uploadWrapper.querySelectorAll("span."+ii).length;e>0&&e===this.uploadWrapper.querySelectorAll("li").length?this.uploadButton.setAttribute("disabled","disabled"):this.uploadButton.removeAttribute("disabled")}},t.prototype.setDropArea=function(){var e=this.dropAreaWrapper.querySelector(".e-file-drop");if(this.dropArea){this.dropZoneElement=typeof this.dropArea!="string"?this.dropArea:ae(this.dropArea,document);for(var i=this.element,r=!1;i.parentNode;)i=i.parentNode,i===this.dropZoneElement&&(r=!0,e?e.innerHTML=this.localizedTexts("dropFilesHint"):this.createDropTextHint());!r&&e&&ct(e)}else!d(this.uploaderOptions)&&this.uploaderOptions.dropArea===void 0&&(this.createDropTextHint(),this.dropZoneElement=this.uploadWrapper,this.setProperties({dropArea:this.uploadWrapper},!0));this.bindDropEvents()},t.prototype.updateDropArea=function(){if(this.dropArea)this.setDropArea();else{this.dropZoneElement=null;var e=this.dropAreaWrapper.querySelector(".e-file-drop");e&&ct(e)}},t.prototype.createDropTextHint=function(){var e=this.createElement("span",{className:lu});e.innerHTML=this.localizedTexts("dropFilesHint"),this.dropAreaWrapper.appendChild(e)},t.prototype.updateHTMLAttrToElement=function(){if(!d(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var r=i[e];Om.indexOf(r)<0&&this.element.setAttribute(r,this.htmlAttributes[""+r])}},t.prototype.updateHTMLAttrToWrapper=function(){if(!d(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var r=i[e];if(Om.indexOf(r)>-1)if(r==="class"){var n=this.htmlAttributes[""+r].replace(/\s+/g," ").trim();n!==""&&Z([this.uploadWrapper],n.split(" "))}else if(r==="style"){var s=this.uploadWrapper.getAttribute(r);s=d(s)?this.htmlAttributes[""+r]:s+this.htmlAttributes[""+r],this.uploadWrapper.setAttribute(r,s)}else this.uploadWrapper.setAttribute(r,this.htmlAttributes[""+r])}},t.prototype.setMultipleSelection=function(){if(this.multiple&&!this.element.hasAttribute("multiple")){var e=document.createAttribute("multiple");e.value="multiple",this.element.setAttributeNode(e)}else this.multiple||this.element.removeAttribute("multiple")},t.prototype.checkAutoUpload=function(e){this.autoUpload?(this.sequentialUpload?this.sequenceUpload(e):this.upload(e),this.removeActionButtons()):this.actionButtons||this.renderActionButtons(),this.checkActionButtonStatus()},t.prototype.sequenceUpload=function(e){if(this.filesData.length-e.length===0||this.filesData[this.filesData.length-e.length-1].statusCode!=="1"){(this.multiple||this.count<0)&&++this.count;var i=!this.showFileList;typeof this.filesData[this.count]=="object"?(this.isFirstFileOnSelection=!1,this.upload(this.filesData[this.count],i),this.filesData[this.count].statusCode==="0"&&this.sequenceUpload(e)):--this.count}},t.prototype.setCSSClass=function(e){var i=e;d(e)||(i=e.replace(/\s+/g," ").trim()),!d(e)&&i!==""&&ee([this.uploadWrapper],i.split(" "));var r=this.cssClass;!d(this.cssClass)&&this.cssClass!==""&&(r=this.cssClass.replace(/\s+/g," ").trim()),!d(this.cssClass)&&r!==""&&Z([this.uploadWrapper],r.split(r.indexOf(",")>-1?",":" "))},t.prototype.wireEvents=function(){I.add(this.browseButton,"click",this.browseButtonClick,this),I.add(this.element,"change",this.onSelectFiles,this),I.add(document,"click",this.removeFocus,this),this.keyboardModule=new Mr(this.uploadWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.isForm&&I.add(this.formElement,"reset",this.resetForm,this)},t.prototype.unWireEvents=function(){I.remove(this.browseButton,"click",this.browseButtonClick),I.remove(this.element,"change",this.onSelectFiles),I.remove(document,"click",this.removeFocus),this.isForm&&I.remove(this.formElement,"reset",this.resetForm),this.keyboardModule&&this.keyboardModule.destroy()},t.prototype.resetForm=function(){this.clearAll()},t.prototype.keyActionHandler=function(e){var i=e.target;switch(e.action){case"enter":if(e.target===this.clearButton)this.clearButtonClick();else if(e.target===this.uploadButton)this.uploadButtonClick();else if(e.target===this.browseButton)this.browseButtonClick();else if(i.classList.contains(Pt)){var r=this.getCurrentMetaData(null,e);r.file.statusCode="4",r.file.status=this.localizedTexts("pauseUpload"),this.abortUpload(r,!1)}else if(i.classList.contains(on))this.resumeUpload(this.getCurrentMetaData(null,e),e);else if(i.classList.contains(Yi)){var r=this.getCurrentMetaData(null,e);if(!d(r))r.file.statusCode="1",r.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(r.file);else{var n=e.target.parentElement,s=this.filesData[this.fileList.indexOf(n)];this.retry(s)}}else this.removeFiles(e),i.classList.contains(lt)||this.browseButton.focus();e.preventDefault(),e.stopPropagation();break}},t.prototype.getCurrentMetaData=function(e,i){var r,n;if(d(e)){var s=i.target.parentElement;r=this.filesData[this.fileList.indexOf(s)]}else r=e;for(var a=0;a<this.uploadMetaData.length;a++)this.uploadMetaData[a].file.name===r.name&&(n=this.uploadMetaData[a]);return n},t.prototype.removeFocus=function(){this.uploadWrapper&&this.listParent&&this.listParent.querySelector("."+du)&&(document.activeElement.blur(),this.listParent.querySelector("."+du).classList.remove(du))},t.prototype.browseButtonClick=function(){this.element.click()},t.prototype.uploadButtonClick=function(){this.sequentialUpload?this.sequenceUpload(this.filesData):this.upload(this.filesData)},t.prototype.clearButtonClick=function(){this.clearAll(),this.sequentialUpload&&(this.count=-1),this.actionCompleteCount=0},t.prototype.bindDropEvents=function(){this.dropZoneElement&&(I.add(this.dropZoneElement,"drop",this.dropElement,this),I.add(this.dropZoneElement,"dragover",this.dragHover,this),I.add(this.dropZoneElement,"dragleave",this.onDragLeave,this),I.add(this.dropZoneElement,"paste",this.onPasteFile,this),I.add(this.dropZoneElement,"dragenter",this.onDragEnter,this))},t.prototype.unBindDropEvents=function(){this.dropZoneElement&&(I.remove(this.dropZoneElement,"drop",this.dropElement),I.remove(this.dropZoneElement,"dragover",this.dragHover),I.remove(this.dropZoneElement,"dragleave",this.onDragLeave),I.remove(this.dropZoneElement,"dragenter",this.onDragEnter))},t.prototype.onDragEnter=function(e){this.enabled&&(this.dropZoneElement.classList.add(hu),this.dragCounter=this.dragCounter+1,e.preventDefault(),e.stopPropagation())},t.prototype.onDragLeave=function(){this.enabled&&(this.dragCounter=this.dragCounter-1,this.dragCounter||this.dropZoneElement.classList.remove(hu))},t.prototype.dragHover=function(e){this.enabled&&(this.dropEffect!=="Default"&&(e.dataTransfer.dropEffect=this.dropEffect.toLowerCase()),e.preventDefault(),e.stopPropagation())},t.prototype.dropElement=function(e){this.dragCounter=0,this.dropZoneElement.classList.remove(hu),this.onSelectFiles(e),e.preventDefault(),e.stopPropagation()},t.prototype.onPasteFile=function(e){var i=e.clipboardData.items;if(e.type==="paste"&&this.browserName!=="msie"&&this.browserName!=="edge"&&this.browserName!=="safari"&&(this.element.files=e.clipboardData.files),!(i.length!==1&&!this.multiple))for(var r=0;r<i.length;r++){var n=[].slice.call(i)[r];!d(n.getAsFile())&&(n.kind==="file"||n.type.match("^image/"))&&this.renderSelectedFiles(e,[n.getAsFile()],!1,!0)}},t.prototype.getSelectedFiles=function(e){for(var i=[],r=this.fileList[e],n=this.getFilesData(),s=+r.getAttribute("data-files-count"),a=0,l=0;l<e;l++)a+=+this.fileList[l].getAttribute("data-files-count");for(var h=a;h<a+s;h++)i.push(n[h]);return i},t.prototype.removeFiles=function(e){if(this.enabled){var i=e.target.parentElement,r=this.fileList.indexOf(i),n=this.fileList[r],s=this.isFormUpload(),a=s?this.getSelectedFiles(r):this.getFilesInArray(this.filesData[r]);if(!d(a)){if(e.target.classList.contains(lt)&&!s){if(a[0].statusCode="5",!d(n)){var l=n.querySelector("."+lt);Or({target:l,width:"20px"}),_t(l)}this.sequentialUpload&&this.uploadSequential(),n.classList.contains(Zs)||this.checkActionComplete(!0)}else ge(e.target,"."+Dm)||this.remove(a,!1,!1,!0,e);if(this.isForm&&n&&n.classList.contains(Gn)&&(this.element.value=""),this.checkActionButtonStatus(),this.actionButtons&&this.clearButton&&this.uploadWrapper){var h=this.uploadWrapper.querySelectorAll(".e-upload-progress-bar.e-upload-progress:not(.e-upload-success):not(.e-upload-fails)");h.length===1&&i.contains(h[0])&&this.clearButton.hasAttribute("disabled")&&this.clearButton.removeAttribute("disabled")}}}},t.prototype.removeFilesData=function(e,i){var r;if(i){this.showFileList||(r=this.filesData.indexOf(e),this.filesData.splice(r,1));return}var n=this.getLiElement(e);d(n)||(this.element.value="",K(n),r=this.fileList.indexOf(n),this.fileList.splice(r,1),this.filesData.splice(r,1),this.fileList.length===0&&!d(this.listParent)&&(K(this.listParent),this.listParent=null,this.removeActionButtons()),this.sequentialUpload&&r<=this.count&&--this.count)},t.prototype.removeUploadedFile=function(e,i,r,n){var s=this,a=e,l=new Fn(this.asyncSettings.removeUrl,"POST",!0,null);l.emitError=!1;var h=new FormData;l.beforeSend=function(c){i.currentRequest=l.httpRequest,r?s.removingEventCallback(i,h,a,e):s.trigger("removing",i,function(u){u.cancel?c.cancel=!0:s.removingEventCallback(u,h,a,e)})},l.onLoad=function(c){return s.removeCompleted(c,a,n),{}},l.onError=function(c){return s.removeFailed(c,a,n),{}},l.send(h)},t.prototype.removingEventCallback=function(e,i,r,n){var s=this.element.getAttribute("name"),a=this.getLiElement(n);if(!d(a)&&(!d(a.querySelector("."+ti))||!d(a.querySelector("."+Tt)))){var l=a.querySelector("."+ti)?a.querySelector("."+ti):a.querySelector("."+Tt);Or({target:l,width:"20px"}),_t(l)}e.postRawFile&&!d(r.rawFile)&&r.rawFile!==""?i.append(s,r.rawFile,r.name):i.append(s,r.name),this.updateFormData(i,e.customFormData)},t.prototype.updateFormData=function(e,i){if(i.length>0&&i[0])for(var r=function(s){var a=i[s],l=Object.keys(a).map(function(h){return a[""+h]});e.append(Object.keys(a)[0],l)},n=0;n<i.length;n++)r(n)},t.prototype.updateCustomheader=function(e,i){if(i.length>0&&i[0])for(var r=function(s){var a=i[s],l=Object.keys(a).map(function(h){return a[""+h]});e.setRequestHeader(Object.keys(a)[0],l)},n=0;n<i.length;n++)r(n)},t.prototype.removeCompleted=function(e,i,r){var n=e&&e.currentTarget?this.getResponse(e):null,s=e.target;if(s.readyState===4&&s.status>=200&&s.status<=299){var a={e,response:n,operation:"remove",file:this.updateStatus(i,this.localizedTexts("removedSuccessMessage"),"2")};this.trigger("success",a),this.removeFilesData(i,r);var l=this.uploadedFilesData.indexOf(i);this.uploadedFilesData.splice(l,1),this.trigger("change",{files:this.uploadedFilesData})}else this.removeFailed(e,i,r)},t.prototype.removeFailed=function(e,i,r){var n=e&&e.currentTarget?this.getResponse(e):null,s={e,response:n,operation:"remove",file:this.updateStatus(i,this.localizedTexts("removedFailedMessage"),"0")};if(!r){var a=this.filesData.indexOf(i),l=this.fileList[a];if(l){l.classList.remove(Ti),l.classList.add(ri);var h=l.querySelector("."+ut);h&&(h.classList.remove(Ti),h.classList.add(ri))}this.checkActionButtonStatus()}this.trigger("failure",s);var c=this.getLiElement(i);if(!d(c)&&!d(c.querySelector("."+ti))){var u=c.querySelector("."+ti);xt(u),K(c.querySelector(".e-spinner-pane"))}},t.prototype.getFilesFromFolder=function(e){this.filesEntries=[];var i=this.multiple?e.dataTransfer.items:[e.dataTransfer.items[0]],r=this.checkDirectoryUpload(i);if(r)for(var n=function(l){var h=i[l].webkitGetAsEntry();if(h.isFile){var c=[];h.file(function(u){var p=h.fullPath;c.push({path:p,file:u})}),s.renderSelectedFiles(e,c,!0)}else h.isDirectory&&s.traverseFileTree(h,e)},s=this,a=0;a<i.length;a++)n(a)},t.prototype.checkDirectoryUpload=function(e){for(var i=0;e&&i<e.length;i++){var r=e[i].webkitGetAsEntry();if(r.isDirectory)return!0}return!1},t.prototype.traverseFileTree=function(e,i){if(e.isFile)this.filesEntries.push(e);else if(e.isDirectory){var r=e.createReader();this.readFileFromDirectory(r,i)}},t.prototype.readFileFromDirectory=function(e,i){var r=this;e.readEntries(function(n){for(var s=0;s<n.length;s++)r.traverseFileTree(n[s],i);r.pushFilesEntries(i),n.length&&r.readFileFromDirectory(e)})},t.prototype.pushFilesEntries=function(e){for(var i=this,r=[],n=function(l){s.filesEntries[l].file(function(h){if(i.filesEntries.length){var c=i.filesEntries[l].fullPath;r.push({path:c,file:h}),l===i.filesEntries.length-1&&(i.filesEntries=[],i.renderSelectedFiles(e,r,!0))}})},s=this,a=0;a<this.filesEntries.length;a++)n(a)},t.prototype.onSelectFiles=function(e){if(this.enabled){var i;if(e.type==="drop")if(this.directoryUpload)this.getFilesFromFolder(e);else{var r=this.sortFilesList=e.dataTransfer.files;this.browserName!=="msie"&&this.browserName!=="edge"&&this.browserName!=="safari"&&(this.element.files=r),r.length>0&&(i=this.multiple?this.sortFileList(r):[r[0]],this.renderSelectedFiles(e,i))}else i=[].slice.call(e.target.files),this.renderSelectedFiles(e,i);(this.isAngular||this.isReact)&&e.stopPropagation()}},t.prototype.getBase64=function(e){return new Promise(function(i,r){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return i(n.result)},n.onerror=function(s){return r(s)}})},t.prototype.renderSelectedFiles=function(e,i,r,n){var s=this;this.base64String=[];var a={event:e,cancel:!1,filesData:[],isModified:!1,modifiedFilesData:[],progressInterval:"",isCanceled:!1,currentRequest:null,customFormData:null};if(i.length<1){a.isCanceled=!0,this.trigger("selected",a);return}this.flag=!0;var l=[];this.multiple||(this.clearData(!0),this.actionCompleteCount=0,i=[i[0]]);for(var h=0;h<i.length;h++){var c=r?i[h].file:i[h];this.updateInitialFileDetails(e,i,c,h,l,r,n)}if(a.filesData=l,!d(this.allowedExtensions)&&this.allowedExtensions.indexOf("*")>-1&&(this.allTypes=!0),this.enableHtmlSanitizer)for(var h=0;h<l.length;h++){for(var u=nt.beforeSanitize(),p=nt.serializeValue(u,l[parseInt(h.toString(),10)].name),f=l[parseInt(h.toString(),10)].name,g=!1,v=0;v<f.length;v++)if(f.charCodeAt(v)>127){g=!0;break}var y=/<([a-z][a-z0-9]*)\b[^>]*>(.*?)<\/\1>/i,C=y.test(f);if(p!==l[parseInt(h.toString(),10)].name&&!(g&&!C)){var b=i[parseInt(h.toString(),10)].name.replace(/[\u00A0-\u9999<>\\&]/g,function(S){return"&#"+S.charCodeAt(0)+";"});l[parseInt(h.toString(),10)].name=b,l[parseInt(h.toString(),10)].status=this.localizedTexts("invalidFileName"),l[parseInt(h.toString(),10)].statusCode="0"}}this.allTypes||(l=this.checkExtension(l)),this.trigger("selected",a,function(M){s._internalRenderSelect(M,l)})},t.prototype.updateInitialFileDetails=function(e,i,r,n,s,a,l){var h=a?i[n].path.substring(1,i[n].path.length):l?Je(r.name.substring(0,r.name.lastIndexOf(".")))+"."+this.getFileType(r.name):this.directoryUpload?i[n].webkitRelativePath:r.name,c={name:h,rawFile:r,size:r.size,status:this.localizedTexts("readyToUploadMessage"),type:this.getFileType(r.name),validationMessages:this.validatedFileSize(r.size),statusCode:"1",id:Je(r.name.substring(0,r.name.lastIndexOf(".")))+"."+this.getFileType(r.name)};l&&(c.fileSource="paste"),c.status=c.validationMessages.minSize!==""?this.localizedTexts("invalidMinFileSize"):c.validationMessages.maxSize!==""?this.localizedTexts("invalidMaxFileSize"):c.status,(c.validationMessages.minSize!==""||c.validationMessages.maxSize!=="")&&(c.statusCode="0",this.checkActionComplete(!0)),s.push(c)},t.prototype._internalRenderSelect=function(e,i){if(!e.cancel){if(this.selectedFiles=this.selectedFiles.concat(i),this.btnTabIndex=this.disableKeyboardNavigation?"-1":"0",this.showFileList){if(e.isModified&&e.modifiedFilesData.length>0){for(var r=0;r<e.modifiedFilesData.length;r++)for(var n=0;n<i.length;n++)e.modifiedFilesData[r].id===i[n].id&&(e.modifiedFilesData[r].rawFile=i[n].rawFile);var s=this.allTypes?e.modifiedFilesData:this.checkExtension(e.modifiedFilesData);this.updateSortedFileList(s),this.filesData=this.filesData.concat(s),(!this.isForm||this.allowUpload())&&this.checkAutoUpload(s)}else{if(this.internalCreateFileList(i),this.autoUpload&&this.sequenceUpload&&this.sequentialUpload&&this.filesData.length>0&&this.filesData[this.filesData.length-1].statusCode!=="2"&&this.filesData[this.filesData.length-1].statusCode!=="0"){this.filesData=this.filesData.concat(i);return}this.filesData=this.filesData.concat(i),(!this.isForm||this.allowUpload())&&this.checkAutoUpload(i)}!d(e.progressInterval)&&e.progressInterval!==""&&(this.progressInterval=e.progressInterval)}else this.filesData=this.filesData.concat(i),this.autoUpload&&this.upload(this.filesData,!0);this.raiseActionComplete(),this.isFirstFileOnSelection=!0}},t.prototype.allowUpload=function(){var e=!1;return this.isForm&&!d(this.asyncSettings.saveUrl)&&this.asyncSettings.saveUrl!==""&&(e=!0),e},t.prototype.isFormUpload=function(){var e=!1;return this.isForm&&(d(this.asyncSettings.saveUrl)||this.asyncSettings.saveUrl==="")&&(d(this.asyncSettings.removeUrl)||this.asyncSettings.removeUrl==="")&&(e=!0),e},t.prototype.clearData=function(e){d(this.listParent)||(K(this.listParent),this.listParent=null),this.browserName!=="msie"&&!e&&(this.element.value=""),this.fileList=[],this.filesData=[],this.removeActionButtons()},t.prototype.updateSortedFileList=function(e){var i=this.createElement("div",{id:"clonewrapper"}),r=-1;if(this.listParent){for(var n=0;n<this.listParent.querySelectorAll("li").length;n++){var s=this.listParent.querySelectorAll("li")[n];i.appendChild(s.cloneNode(!0))}this.removeActionButtons();var a=[].slice.call(i.childNodes);this.createParentUL();for(var l=0;l<e.length;l++){for(var h=0;h<this.filesData.length;h++)this.filesData[h].name===e[l].name&&(this.listParent.appendChild(a[h]),I.add(a[h].querySelector(".e-icons"),"click",this.removeFiles,this),this.fileList.push(a[h]),r=l);r!==l&&this.internalCreateFileList([e[l]])}}else this.internalCreateFileList(e)},t.prototype.isBlank=function(e){return!e||/^\s*$/.test(e)},t.prototype.checkGenericExtension=function(e,i){var r=[];switch(e.toLowerCase()){case"image/*":r.push("jpg","jpeg","png","gif","bmp","tiff","svg","webp","heic");break;case"audio/*":r.push("mp3","wav","aac","flac","ogg","m4a");break;case"video/*":r.push("mp4","mov","avi","mkv","flv","wmv","webm","mpeg");break;case"application/*":r.push("doc","docx","xls","xlsx","ppt","pptx","zip","rar","7z","tar","pdf");break;case"text/*":r.push("txt","csv","html","css","js","json","xml","md");break}return r.includes(i.toLowerCase())},t.prototype.checkExtension=function(e){var i=e;if(!this.isBlank(this.allowedExtensions)){for(var r=[],n=d(r)?[""]:this.allowedExtensions.split(","),s=0,a=n;s<a.length;s++){var l=a[s];r.push(l.trim().toLocaleLowerCase())}for(var h=0;h<e.length;h++){var c=e[h].type.indexOf(".")!==-1?e[h].type.replace(".",""):e[h].type;if(r[0].indexOf("/*")!==-1){var u=this.checkGenericExtension(r[0],c);u||(e[h].status=this.localizedTexts("invalidFileType"),e[h].statusCode="0")}else r.indexOf(("."+c).toLocaleLowerCase())===-1&&(e[h].status=this.localizedTexts("invalidFileType"),e[h].statusCode="0")}}return i},t.prototype.validatedFileSize=function(e){var i="",r="";e<this.minFileSize?i=this.localizedTexts("invalidMinFileSize"):e>this.maxFileSize?r=this.localizedTexts("invalidMaxFileSize"):(i="",r="");var n={minSize:i,maxSize:r};return n},t.prototype.isPreLoadFile=function(e){for(var i=!1,r=0;r<this.files.length;r++)this.files[r].name===e.name.slice(0,e.name.lastIndexOf("."))&&this.files[r].type===e.type&&(i=!0);return i},t.prototype.createCustomfileList=function(e){this.createParentUL();for(var i=0,r=e;i<r.length;i++){var n=r[i],s=this.createElement("li",{className:Pa,attrs:{"data-file-name":n.name}});this.uploadTemplateFn=this.templateComplier(this.template);var a=this.uploadTemplateFn(n,this,"template",this.element.id+"Template",this.isStringTemplate,null,s);if(a){var l=[].slice.call(a);He(l,s)}var h=e.indexOf(n),c={element:s,fileInfo:n,index:h,isPreload:this.isPreLoadFile(n)},u={element:s,fileInfo:n,index:h,isPreload:this.isPreLoadFile(n)};this.trigger("rendering",c),this.trigger("fileListRendering",u),this.listParent.appendChild(s),this.fileList.push(s)}this.renderReactTemplates()},t.prototype.createParentUL=function(){d(this.listParent)&&(this.listParent=this.createElement("ul",{className:Im}),this.uploadWrapper.appendChild(this.listParent))},t.prototype.formFileList=function(e,i){var r=this.createElement("li",{className:Pa});r.setAttribute("data-files-count",e.length+"");for(var n=this.createElement("span",{className:uu}),s,a=0,l=e;a<l.length;a++){var h=l[a],c=this.createElement("span",{className:Sm});c.innerHTML=this.getFileNameOnly(h.name);var u=this.createElement("span",{className:Tm}),p=this.getFileType(h.name);if(u.innerHTML="."+p,p||u.classList.add("e-hidden"),!this.enableRtl)n.appendChild(c),n.appendChild(u);else{var f=this.createElement("span",{className:Em});f.appendChild(u),f.appendChild(c),n.appendChild(f)}this.truncateName(c),s=this.formValidateFileInfo(h,r)}r.appendChild(n),this.setListToFileInfo(e,r);var g=this.listParent.querySelectorAll("li").length,v=this.createElement("span");if(r.classList.contains(Gn)?(v.classList.add(ut),v.classList.add(Gn),v.innerText=e.length>1?this.localizedTexts("invalidFileSelection"):s):(v.classList.add(e.length>1?aD:wm),v.innerText=e.length>1?this.localizedTexts("totalFiles")+": "+e.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(e)):this.bytesToSize(e[0].size),this.createFormInput(e)),n.appendChild(v),d(r.querySelector(".e-icons"))){var y=this.createElement("span",{className:"e-icons",attrs:{tabindex:this.btnTabIndex}});this.browserName==="msie"&&y.classList.add("e-msie"),y.setAttribute("title",this.localizedTexts("remove")),r.appendChild(n),r.appendChild(y),I.add(y,"click",this.removeFiles,this),y.classList.add(Tt)}var C={element:r,fileInfo:this.mergeFileInfo(e,r),index:g,isPreload:this.isPreLoadFile(this.mergeFileInfo(e,r))},b={element:r,fileInfo:this.mergeFileInfo(e,r),index:g,isPreload:this.isPreLoadFile(this.mergeFileInfo(e,r))};this.trigger("rendering",C),this.trigger("fileListRendering",b),this.listParent.appendChild(r),this.fileList.push(r)},t.prototype.formValidateFileInfo=function(e,i){var r=e.status,n=this.validatedFileSize(e.size);(n.minSize!==""||n.maxSize!=="")&&(this.addInvalidClass(i),r=n.minSize!==""?this.localizedTexts("invalidMinFileSize"):n.maxSize!==""?this.localizedTexts("invalidMaxFileSize"):r);var s=this.checkExtension(this.getFilesInArray(e))[0].status;return s===this.localizedTexts("invalidFileType")&&(this.addInvalidClass(i),r=s),r},t.prototype.addInvalidClass=function(e){e.classList.add(Gn)},t.prototype.createFormInput=function(e){if(this.browserName!=="safari"){var i=this.element.cloneNode(!0);i.classList.add(oD);for(var r=0,n=e;r<n.length;r++){var s=n[r];s.input=i}i.setAttribute("id",Je("hiddenUploader")),i.setAttribute("name",this.uploaderName),this.uploadWrapper.querySelector("."+Mm).appendChild(i),this.browserName!=="msie"&&this.browserName!=="edge"&&(this.element.value="")}},t.prototype.getFileSize=function(e){for(var i=0,r=0,n=e;r<n.length;r++){var s=n[r];i+=s.size}return i},t.prototype.mergeFileInfo=function(e,i){for(var r={name:"",rawFile:"",size:0,status:"",type:"",validationMessages:{minSize:"",maxSize:""},statusCode:"1",list:i},n=[],s="",a=0,l=e;a<l.length;a++){var h=l[a];n.push(h.name),s=h.type}return r.name=n.join(", "),r.size=this.getFileSize(e),r.type=s,r.status=this.statusForFormUpload(e,i),r},t.prototype.statusForFormUpload=function(e,i){for(var r=!0,n,s=0,a=e;s<a.length;s++){var l=a[s];n=l.status;var h=this.validatedFileSize(l.size);(h.minSize!==""||h.maxSize!=="")&&(r=!1,n=h.minSize!==""?this.localizedTexts("invalidMinFileSize"):h.maxSize!==""?this.localizedTexts("invalidMaxFileSize"):n);var c=this.checkExtension(this.getFilesInArray(l))[0].status;c===this.localizedTexts("invalidFileType")&&(r=!1,n=c)}return r?n=this.localizedTexts("totalFiles")+": "+e.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(e)):(i.classList.add(Gn),n=e.length>1?this.localizedTexts("invalidFileSelection"):n),n},t.prototype.formCustomFileList=function(e,i){this.createParentUL();var r=this.createElement("li",{className:Pa});r.setAttribute("data-files-count",e.length+""),this.setListToFileInfo(e,r);var n=this.mergeFileInfo(e,r);r.setAttribute("data-file-name",n.name),this.uploadTemplateFn=this.templateComplier(this.template);var s=this.uploadTemplateFn(n,this,"template",this.element.id+"Template",this.isStringTemplate,null,r);if(s){var a=[].slice.call(s);He(a,r)}var l=this.listParent.querySelectorAll("li").length;r.classList.contains(Gn)||this.createFormInput(e);var h={element:r,fileInfo:n,index:l,isPreload:this.isPreLoadFile(n)},c={element:r,fileInfo:n,index:l,isPreload:this.isPreLoadFile(n)};this.trigger("rendering",h),this.trigger("fileListRendering",c),this.listParent.appendChild(r),this.fileList.push(r),this.renderReactTemplates()},t.prototype.createFileList=function(e){this.filesData=this.filesData&&this.filesData.length>0?this.filesData.concat(e):e,this.internalCreateFileList(e)},t.prototype.internalCreateFileList=function(e){if(this.createParentUL(),this.template!==""&&!d(this.template))this.isFormUpload()?(this.uploadWrapper.classList.add(Nm),this.formCustomFileList(e,this.element.files)):this.createCustomfileList(e);else if(this.isFormUpload())this.uploadWrapper.classList.add(Nm),this.formFileList(e,this.element.files);else for(var i=0,r=e;i<r.length;i++){var n=r[i],s=this.createElement("li",{className:Pa,attrs:{"data-file-name":n.name,"data-files-count":"1"}}),a=this.createElement("span",{className:uu}),l=this.createElement("span",{className:Sm,attrs:{title:n.name}});l.innerHTML=this.getFileNameOnly(n.name);var h=this.createElement("span",{className:Tm}),c=this.getFileType(n.name);if(h.innerHTML="."+c,c||h.classList.add("e-hidden"),!this.enableRtl)a.appendChild(l),a.appendChild(h);else{var u=this.createElement("span",{className:Em});u.appendChild(h),u.appendChild(l),a.appendChild(u)}var p=this.createElement("span",{className:wm});p.innerHTML=this.bytesToSize(n.size),a.appendChild(p);var f=this.createElement("span",{className:ut});a.appendChild(f),f.innerHTML=n.status,s.appendChild(a);var g=this.createElement("span",{className:" e-icons",attrs:{tabindex:this.btnTabIndex}});this.browserName==="msie"&&g.classList.add("e-msie"),g.setAttribute("title",this.localizedTexts("remove")),s.appendChild(g),I.add(g,"click",this.removeFiles,this),n.statusCode==="2"?(f.classList.add(Ti),g.classList.add(ti),g.setAttribute("title",this.localizedTexts("delete")),g.setAttribute("aria-label",this.localizedTexts("delete"))):n.statusCode!=="1"&&(f.classList.remove(Ti),f.classList.add(xm)),this.autoUpload&&n.statusCode==="1"&&this.asyncSettings.saveUrl!==""&&(f.innerHTML=""),g.classList.contains(ti)||(g.classList.add(Tt),g.setAttribute("aria-label",this.localizedTexts("remove")));var v=e.indexOf(n),y={element:s,fileInfo:n,index:v,isPreload:this.isPreLoadFile(n)},C={element:s,fileInfo:n,index:v,isPreload:this.isPreLoadFile(n)};this.trigger("rendering",y),this.trigger("fileListRendering",C),this.listParent.appendChild(s),this.fileList.push(s),this.truncateName(l);var b=this.flag;this.isPreLoadFile(n)&&(this.flag=!1,this.checkActionComplete(!0),this.flag=b)}},t.prototype.getSlicedName=function(e){var i=e.textContent;e.dataset.tail=i.slice(i.length-10)},t.prototype.setListToFileInfo=function(e,i){for(var r=0,n=e;r<n.length;r++){var s=n[r];s.list=i}},t.prototype.truncateName=function(e){var i=e;this.browserName!=="edge"&&i.offsetWidth<i.scrollWidth?this.getSlicedName(i):i.offsetWidth+1<i.scrollWidth&&this.getSlicedName(i)},t.prototype.getFileType=function(e){var i,r=e.lastIndexOf(".");return r>=0&&(i=e.substring(r+1)),i||""},t.prototype.getFileNameOnly=function(e){var i=this.getFileType(e),r=e.split("."+i);return i=r[0]},t.prototype.setInitialAttributes=function(){if(this.initialAttr.accept&&this.element.setAttribute("accept",this.initialAttr.accept),this.initialAttr.disabled&&this.element.setAttribute("disabled","disabled"),this.initialAttr.multiple){var e=document.createAttribute("multiple");this.element.setAttributeNode(e)}},t.prototype.filterfileList=function(e){for(var i=[],r,n=0;n<e.length;n++)r=this.getLiElement(e[n]),(!d(r)&&!r.classList.contains(Ti)||!this.showFileList&&e[n].status!=="File uploaded successfully")&&i.push(e[n]);return i},t.prototype.updateStatus=function(e,i,r,n){if(n===void 0&&(n=!0),!(i===""||d(i))&&!(r===""||d(r))&&(e.status=i,e.statusCode=r),n){var s=this.getLiElement(e);d(s)||!d(s.querySelector("."+ut))&&!(i===""||d(i))&&(s.querySelector("."+ut).textContent=i)}return e},t.prototype.getLiElement=function(e){for(var i,r=0;r<this.filesData.length;r++)!d(e)&&(!d(this.filesData[r].id)&&!d(e.id)?this.filesData[r].name===e.name&&this.filesData[r].id===e.id:this.filesData[r].name===e.name)&&(i=r);return this.fileList[i]},t.prototype.createProgressBar=function(e){var i=this.createElement("span",{className:sn}),r=this.createElement("progressbar",{className:ka,attrs:{value:"0",max:"100"}}),n=this.createElement("span",{className:sD});r.setAttribute("style","width: 0%");var s=this.createElement("span",{className:cu});s.textContent="0%",n.appendChild(r),i.appendChild(n),i.appendChild(s),e.querySelector("."+uu).appendChild(i)},t.prototype.updateProgressbar=function(e,i){if(!isNaN(Math.round(e.loaded/e.total*100))&&!d(i.querySelector("."+ka)))if(!d(this.progressInterval)&&this.progressInterval!==""){var r=Math.round(e.loaded/e.total*100)%parseInt(this.progressInterval,10);(r===0||r===100)&&this.changeProgressValue(i,Math.round(e.loaded/e.total*100).toString()+"%")}else this.changeProgressValue(i,Math.round(e.loaded/e.total*100).toString()+"%")},t.prototype.changeProgressValue=function(e,i){e.querySelector("."+ka).setAttribute("style","width:"+i),e.querySelector("."+cu).textContent=i},t.prototype.uploadInProgress=function(e,i,r,n){var s=this.getLiElement(i);if(!(d(s)&&!r)){if(d(s))this.cancelUploadingFile(i,e,n);else{i.statusCode==="5"&&this.cancelUploadingFile(i,e,n,s),!(s.querySelectorAll("."+sn).length>0)&&s.querySelector("."+ut)&&(s.querySelector("."+ut).classList.add(ii),this.createProgressBar(s),this.updateProgressBarClasses(s,ii),s.querySelector("."+ut).classList.remove(ri)),this.updateProgressbar(e,s);var a=s.querySelector("."+Tt);d(a)||(a.classList.add(lt,ii),a.setAttribute("title",this.localizedTexts("abort")),a.classList.remove(Tt))}var l={e,operation:"upload",file:this.updateStatus(i,this.localizedTexts("inProgress"),"3")};this.trigger("progress",l)}},t.prototype.cancelUploadingFile=function(e,i,r,n){var s=this;if(e.statusCode==="5"){var a={event:i,fileData:e,cancel:!1,customFormData:[],currentRequest:null};this.trigger("canceling",a,function(l){if(l.cancel){if(e.statusCode="3",!d(n)){var h=n.querySelector("."+lt);d(h)||(xt(h),K(n.querySelector(".e-spinner-pane")))}}else{r.emitError=!1,r.httpRequest.abort();var c=new FormData;if(e.statusCode==="5"){var u=s.element.getAttribute("name");c.append(u,e.name),c.append("cancel-uploading",e.name),s.updateFormData(c,l.customFormData);var p=new Fn(s.asyncSettings.removeUrl,"POST",!0,null);p.emitError=!1,p.beforeSend=function(f){l.currentRequest&&s.updateCustomheader(p.httpRequest,l.currentRequest)},p.onLoad=function(f){return s.removecanceledFile(f,e),{}},p.send(c)}}})}},t.prototype.removecanceledFile=function(e,i){var r=this.getLiElement(i);if(!(d(r)||r.querySelector("."+Yi)||d(r.querySelector("."+lt)))){this.updateStatus(i,this.localizedTexts("fileUploadCancel"),"5"),this.renderFailureState(e,i,r);var n=r.querySelector("."+Tt);d(r)||(xt(n),d(r.querySelector(".e-spinner-pane"))||K(r.querySelector(".e-spinner-pane")));var s=e&&e.currentTarget?this.getResponse(e):null,a={event:e,response:s,operation:"cancel",file:i};this.trigger("success",a)}},t.prototype.renderFailureState=function(e,i,r){var n=this;this.updateProgressBarClasses(r,ri),this.removeProgressbar(r,"failure"),d(r.querySelector(".e-file-status"))||r.querySelector(".e-file-status").classList.add(ri);var s=r.querySelector("."+lt);if(!d(s)){s.classList.remove(lt,ii),s.classList.add(Tt),s.setAttribute("title",this.localizedTexts("remove")),this.pauseButton=this.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}}),s.parentElement.insertBefore(this.pauseButton,s),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),this.pauseButton.setAttribute("aria-label",this.localizedTexts("retry"));var a=r.querySelector("."+Yi);a.addEventListener("click",function(l){n.reloadcanceledFile(l,i,r,!1)},!1)}},t.prototype.reloadcanceledFile=function(e,i,r,n){i.statusCode="1",i.status=this.localizedTexts("readyToUploadMessage"),n||(d(r.querySelector("."+ut))||r.querySelector("."+ut).classList.remove(ri),d(r.querySelector("."+Yi))||K(r.querySelector("."+Yi)),this.pauseButton=null),d(r)||r.classList.add(Zs),this.upload([i])},t.prototype.uploadComplete=function(e,i,r){var n=e.target;if(n.readyState===4&&n.status>=200&&n.status<=299){var s=this.getLiElement(i);if(d(s)&&(!r||d(r))&&this.showFileList)return;if(!d(s)){this.updateProgressBarClasses(s,Ti),this.removeProgressbar(s,"success");var a=s.querySelector("."+lt);d(a)||(a.classList.add(ti),a.setAttribute("title",this.localizedTexts("delete")),a.setAttribute("aria-label",this.localizedTexts("delete")),a.classList.remove(lt),a.classList.remove(ii))}this.raiseSuccessEvent(e,i)}else this.uploadFailed(e,i)},t.prototype.getResponse=function(e){var i=e.currentTarget,r={readyState:i.readyState,statusCode:i.status,statusText:i.statusText,headers:i.getAllResponseHeaders(),withCredentials:i.withCredentials};return r},t.prototype.raiseSuccessEvent=function(e,i){var r=this,n=e&&e.currentTarget?this.getResponse(e):null,s=this.localizedTexts("uploadSuccessMessage"),a={e,response:n,operation:"upload",file:this.updateStatus(i,s,"2",!1),statusText:s},l=this.getLiElement(i);if(!d(l)){var h=l.querySelector("."+Dm);d(h)||(xt(l),K(h))}this.trigger("success",a,function(c){r.updateStatus(i,c.statusText,"2"),r.multiple?r.uploadedFilesData.push(i):r.uploadedFilesData=[i],r.trigger("change",{file:r.uploadedFilesData}),r.checkActionButtonStatus(),r.fileList.length>0?r.getLiElement(i).classList.contains(Zs)?r.getLiElement(i).classList.remove(Zs):(r.uploadSequential(),r.checkActionComplete(!0)):r.showFileList||r.checkActionComplete(!0)})},t.prototype.uploadFailed=function(e,i){var r=this,n=this.getLiElement(i),s=e&&e.currentTarget?this.getResponse(e):null,a=this.localizedTexts("uploadFailedMessage"),l={e,response:s,operation:"upload",file:this.updateStatus(i,a,"0",!1),statusText:a};d(n)||this.renderFailureState(e,i,n),this.trigger("failure",l,function(h){r.updateStatus(i,h.statusText,"0"),r.checkActionButtonStatus(),r.uploadSequential(),r.checkActionComplete(!0)})},t.prototype.uploadSequential=function(){this.sequentialUpload&&(this.autoUpload?this.checkAutoUpload(this.filesData):this.uploadButtonClick())},t.prototype.checkActionComplete=function(e){e?++this.actionCompleteCount:--this.actionCompleteCount,this.raiseActionComplete()},t.prototype.raiseActionComplete=function(){if(this.filesData.length===this.actionCompleteCount&&this.flag){this.flag=!1;var e={fileData:[]};e.fileData=this.getSelectedFileStatus(this.selectedFiles),this.trigger("actionComplete",e)}},t.prototype.getSelectedFileStatus=function(e){for(var i=[],r=0,n=0;n<e.length;n++)for(var s=e[n],a=0;a<this.filesData.length;a++)if(this.filesData[a].name===s.name&&this.filesData[a].status===s.status){i[r]=this.filesData[a],++r;break}return i},t.prototype.updateProgressBarClasses=function(e,i){var r=e.querySelector("."+ka);d(r)||(r.classList.add(i),this.actionButtons&&this.clearButton&&this.uploadWrapper&&(i==="e-upload-progress"&&!this.clearButton.hasAttribute("disabled")?this.clearButton.setAttribute("disabled","disabled"):(i==="e-upload-success"||i==="e-upload-fails")&&this.uploadWrapper.querySelectorAll(".e-upload-progress-bar.e-upload-progress:not(.e-upload-success):not(.e-upload-fails)").length===0&&this.clearButton.hasAttribute("disabled")&&this.clearButton.removeAttribute("disabled")))},t.prototype.removeProgressbar=function(e,i){var r=this;d(e.querySelector("."+sn))||(this.progressAnimation=new Gt({duration:1250}),this.progressAnimation.animate(e.querySelector("."+sn),{name:"FadeOut"}),this.progressAnimation.animate(e.querySelector("."+cu),{name:"FadeOut"}),setTimeout(function(){r.animateProgressBar(e,i)},750))},t.prototype.animateProgressBar=function(e,i){i==="success"?(e.classList.add(Ti),d(e.querySelector("."+ut))||(e.querySelector("."+ut).classList.remove(ii),this.progressAnimation.animate(e.querySelector("."+ut),{name:"FadeIn"}),e.querySelector("."+ut).classList.add(Ti))):d(e.querySelector("."+ut))||(e.querySelector("."+ut).classList.remove(ii),this.progressAnimation.animate(e.querySelector("."+ut),{name:"FadeIn"}),e.querySelector("."+ut).classList.add(ri)),e.querySelector("."+sn)&&K(e.querySelector("."+sn))},t.prototype.setExtensions=function(e){e!==""&&!d(e)?this.element.setAttribute("accept",e):this.element.removeAttribute("accept")},t.prototype.templateComplier=function(e){if(e)try{return typeof e!="function"&&Se(e,document).length?rt(ae(e,document).innerHTML.trim()):rt(e)}catch{return rt(e)}},t.prototype.setRTL=function(){this.enableRtl?Z([this.uploadWrapper],Am):ee([this.uploadWrapper],Am)},t.prototype.localizedTexts=function(e){return this.l10n.setLocale(this.locale),this.l10n.getConstant(e)},t.prototype.setControlStatus=function(){this.enabled?(this.uploadWrapper.classList.contains(pu)&&this.uploadWrapper.classList.remove(pu),!d(this.browseButton)&&this.element.hasAttribute("disabled")&&(this.element.removeAttribute("disabled"),this.browseButton.removeAttribute("disabled")),!d(this.clearButton)&&this.clearButton.hasAttribute("disabled")&&this.clearButton.removeAttribute("disabled"),!d(this.uploadButton)&&this.uploadButton.hasAttribute("disabled")&&this.uploadButton.hasAttribute("disabled")):(this.uploadWrapper.classList.add(pu),this.element.setAttribute("disabled","disabled"),this.browseButton.setAttribute("disabled","disabled"),d(this.clearButton)||this.clearButton.setAttribute("disabled","disabled"),d(this.uploadButton)||this.uploadButton.setAttribute("disabled","disabled"))},t.prototype.checkHTMLAttributes=function(e){for(var i=e?d(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["accept","multiple","disabled"],r=0,n=i;r<n.length;r++){var s=n[r];if(!d(this.element.getAttribute(s)))switch(s){case"accept":(d(this.uploaderOptions)||this.uploaderOptions.allowedExtensions===void 0||e)&&(this.setProperties({allowedExtensions:this.element.getAttribute("accept")},!e),this.initialAttr.accept=this.allowedExtensions);break;case"multiple":if(d(this.uploaderOptions)||this.uploaderOptions.multiple===void 0||e){var a=this.element.getAttribute(s)==="multiple"||this.element.getAttribute(s)===""||this.element.getAttribute(s)==="true";this.setProperties({multiple:a},!e),this.initialAttr.multiple=!0}break;case"disabled":if(d(this.uploaderOptions)||this.uploaderOptions.enabled===void 0||e){var l=!(this.element.getAttribute(s)==="disabled"||this.element.getAttribute(s)===""||this.element.getAttribute(s)==="true");this.setProperties({enabled:l},!e),this.initialAttr.disabled=!0}}}},t.prototype.chunkUpload=function(e,i,r){var n=0,s=Math.min(this.asyncSettings.chunkSize,e.size),a=0,l=e.rawFile.slice(n,s),h={chunkIndex:a,blob:l,file:e,start:n,end:s,retryCount:0,request:null};this.sendRequest(e,h,i,r)},t.prototype.sendRequest=function(e,i,r,n){var s=this,a=new FormData,l=e.rawFile.slice(i.start,i.end);a.append(this.uploaderName,l,e.name),a.append("chunk-index",i.chunkIndex.toString()),a.append("chunkIndex",i.chunkIndex.toString());var h=Math.max(Math.ceil(e.size/this.asyncSettings.chunkSize),1);a.append("total-chunk",h.toString()),a.append("totalChunk",h.toString());var c=new Fn({url:this.asyncSettings.saveUrl,type:"POST",async:!0,contentType:null});c.emitError=!1,c.onLoad=function(p){return s.chunkUploadComplete(p,i,r),{}},c.onUploadProgress=function(p){return s.chunkUploadInProgress(p,i,r),{}};var u={fileData:e,customFormData:[],cancel:!1,chunkSize:this.asyncSettings.chunkSize===0?null:this.asyncSettings.chunkSize};c.beforeSend=function(p){u.currentRequest=c.httpRequest,u.currentChunkIndex=i.chunkIndex,u.currentChunkIndex===0?s.trigger("uploading",u,function(f){s.uploadingEventCallback(a,f,p,e)}):s.trigger("chunkUploading",u,function(f){s.uploadingEventCallback(a,f,p,e)})},c.onError=function(p){return s.chunkUploadFailed(p,i,r),{}},c.send(a),i.request=c},t.prototype.uploadingEventCallback=function(e,i,r,n){i.cancel?this.eventCancelByArgs(r,i,n):this.updateFormData(e,i.customFormData)},t.prototype.eventCancelByArgs=function(e,i,r){var n=this;if(e.cancel=!0,i.fileData.statusCode!=="5"){i.fileData.statusCode="5",i.fileData.status=this.localizedTexts("fileUploadCancel");var s=this.getLiElement(i.fileData);if(s){d(s.querySelector("."+ut))||(s.querySelector("."+ut).innerHTML=this.localizedTexts("fileUploadCancel"),s.querySelector("."+ut).classList.add(ri)),this.pauseButton=this.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}});var a=s.querySelector("."+Tt);a&&a.parentElement.insertBefore(this.pauseButton,a),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),this.pauseButton.addEventListener("click",function(l){n.reloadcanceledFile(l,r,s)},!1),this.checkActionButtonStatus()}}},t.prototype.checkChunkUpload=function(){return!(this.asyncSettings.chunkSize<=0||d(this.asyncSettings.chunkSize))},t.prototype.chunkUploadComplete=function(e,i,r){var n=this,s=e.target,a;if(s.readyState===4&&s.status>=200&&s.status<300){var l=e&&e.currentTarget?this.getResponse(e):null,h=Math.max(Math.ceil(i.file.size/this.asyncSettings.chunkSize),1),c={event:e,file:i.file,chunkIndex:i.chunkIndex,totalChunk:h,chunkSize:this.asyncSettings.chunkSize,response:l};if(this.trigger("chunkSuccess",c),(d(r)||!r)&&(a=this.getLiElement(i.file)),this.updateMetaData(i),i.end===i.file.size&&(i.file.statusCode="3"),i.file.statusCode==="5"){var u={event:e,fileData:i.file,cancel:!1,customFormData:[]};this.trigger("canceling",u,function(f){if(f.cancel){i.file.statusCode="3";var g=a.querySelector("."+lt);!d(a)&&!d(g)&&(xt(g),K(a.querySelector(".e-spinner-pane"))),n.sendNextRequest(i)}else{i.request.emitError=!1,s.abort();var v=new FormData,y=n.element.getAttribute("name");v.append(y,i.file.name),v.append("cancel-uploading",i.file.name),v.append("cancelUploading",i.file.name),n.updateFormData(v,f.customFormData);var C=new Fn(n.asyncSettings.removeUrl,"POST",!0,null);C.emitError=!1,C.onLoad=function(b){return n.removeChunkFile(b,i,r),{}},C.send(v)}})}else{if(h-1===i.chunkIndex&&h>i.chunkIndex){var p=this.pausedData.indexOf(i);p>=0&&this.pausedData.splice(p,1),d(this.template)&&(d(r)||!r)&&a&&(a&&!d(a.querySelector("."+Pt))&&K(a.querySelector("."+Pt)),this.removeChunkProgressBar(i)),this.raiseSuccessEvent(e,i.file);return}i.file.statusCode!=="4"&&this.sendNextRequest(i)}}else this.chunkUploadFailed(e,i)},t.prototype.sendNextRequest=function(e){e.start=e.end,e.end+=this.asyncSettings.chunkSize,e.end=Math.min(e.end,e.file.size),e.chunkIndex+=1,this.sendRequest(e.file,e)},t.prototype.removeChunkFile=function(e,i,r){if(d(this.template)&&d(r)&&!r){var n=this.getLiElement(i.file),s=n.querySelector("."+lt),a=s;this.updateStatus(i.file,this.localizedTexts("fileUploadCancel"),"5"),this.updateProgressBarClasses(n,ri),this.removeProgressbar(n,"failure"),s&&(s.classList.remove(lt),s.classList.add(Tt),s.setAttribute("title",this.localizedTexts("remove")));var l=n.querySelector("."+Pt);l&&(l.classList.add(Yi),l.classList.remove(Pt),l.setAttribute("title",this.localizedTexts("retry"))),!d(n)&&!d(s)&&!d(n.querySelector(".e-spinner-pane"))&&(xt(a),K(n.querySelector(".e-spinner-pane")))}},t.prototype.pauseUpload=function(e,i,r){e.file.statusCode="4",e.file.status=this.localizedTexts("pause"),this.updateMetaData(e);var n={event:i||null,file:e.file,chunkIndex:e.chunkIndex,chunkCount:Math.round(e.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.abortUpload(e,r,n),this.sequentialUpload&&this.uploadSequential()},t.prototype.abortUpload=function(e,i,r){e.file.statusCode!=="4"&&(e.request.emitError=!1,e.request.httpRequest.abort());var n=this.getLiElement(e.file);if(d(this.template)&&(d(i)||!i)){var s=n.querySelector("."+Pt);s.classList.remove(Pt),s.classList.add(on),s.setAttribute("title",this.localizedTexts("resume")),s.nextElementSibling.classList.add(Tt),s.nextElementSibling.classList.remove(lt),s.nextElementSibling.setAttribute("title",this.localizedTexts("remove"))}for(var a=0;a<this.pausedData.length;a++)this.pausedData[a].file.name===e.file.name&&this.pausedData.splice(a,1);this.pausedData.push(e),this.trigger("pausing",r)},t.prototype.resumeUpload=function(e,i,r){var n=this.getLiElement(e.file),s;d(n)||(s=n.querySelector("."+on)),!d(s)&&(d(r)||!r)&&(s.classList.remove(on),s.classList.add(Pt),s.setAttribute("title",this.localizedTexts("pause")),s.nextElementSibling.classList.remove(Tt),s.nextElementSibling.classList.add(lt),s.nextElementSibling.setAttribute("title",this.localizedTexts("abort"))),e.file.status=this.localizedTexts("inProgress"),e.file.statusCode="3",this.updateMetaData(e);var a={event:i||null,file:e.file,chunkIndex:e.chunkIndex,chunkCount:Math.round(e.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.trigger("resuming",a);for(var l=0;l<this.pausedData.length;l++)this.pausedData[l].end===this.pausedData[l].file.size?this.chunkUploadComplete(i,e,r):this.pausedData[l].file.name===e.file.name&&(this.pausedData[l].start=this.pausedData[l].end,this.pausedData[l].end=this.pausedData[l].end+this.asyncSettings.chunkSize,this.pausedData[l].end=Math.min(this.pausedData[l].end,this.pausedData[l].file.size),this.pausedData[l].chunkIndex=this.pausedData[l].chunkIndex+1,this.sendRequest(this.pausedData[l].file,this.pausedData[l],r))},t.prototype.updateMetaData=function(e){this.uploadMetaData.indexOf(e)===-1?this.uploadMetaData.push(e):(this.uploadMetaData.splice(this.uploadMetaData.indexOf(e),1),this.uploadMetaData.push(e))},t.prototype.removeChunkProgressBar=function(e){var i=this.getLiElement(e.file);if(!d(i)){this.updateProgressBarClasses(i,Ti),this.removeProgressbar(i,"success");var r=i.querySelector("."+lt);d(r)||(r.classList.add(ti),r.setAttribute("title",this.localizedTexts("delete")),r.classList.remove(lt,ii))}},t.prototype.chunkUploadFailed=function(e,i,r){var n=this,s=Math.max(Math.ceil(i.file.size/this.asyncSettings.chunkSize),1),a;d(this.template)&&(d(r)||!r)&&(a=this.getLiElement(i.file));var l=e&&e.currentTarget?this.getResponse(e):null,h={event:e,file:i.file,chunkIndex:i.chunkIndex,totalChunk:s,chunkSize:this.asyncSettings.chunkSize,cancel:!1,response:l};this.trigger("chunkFailure",h,function(c){if(!c.cancel)if(i.retryCount<n.asyncSettings.retryCount)setTimeout(function(){n.retryRequest(a,i,r)},n.asyncSettings.retryAfterDelay);else{if(!d(a)){var u=a.querySelector("."+Pt)?a.querySelector("."+Pt):a.querySelector("."+on);d(u)||(u.classList.add(Yi),u.classList.remove(Pt,on)),n.updateProgressBarClasses(a,ri),n.removeProgressbar(a,"failure"),a.querySelector(".e-icons").classList.remove(ii);var p=a.querySelector("."+lt)?a.querySelector("."+lt):a.querySelector("."+Tt);p.classList.remove(lt),d(a.querySelector("."+Pt))||K(a.querySelector("."+Pt)),i.start>0?(p.classList.add(ti),p.setAttribute("title",n.localizedTexts("delete"))):(p.classList.add(Tt),p.setAttribute("title",n.localizedTexts("remove")))}i.retryCount=0;var f=i.file,g=n.localizedTexts("uploadFailedMessage"),v={e,response:l,operation:"upload",file:n.updateStatus(f,g,"0",!1),statusText:g};n.trigger("failure",v,function(y){n.updateStatus(f,y.statusText,"0"),n.uploadSequential(),n.checkActionComplete(!0)})}})},t.prototype.retryRequest=function(e,i,r){d(this.template)&&(d(r)||!r)&&e&&this.updateProgressBarClasses(e,ri),i.retryCount+=1,this.sendRequest(i.file,i)},t.prototype.checkPausePlayAction=function(e){var i=e.target,r=e.target.parentElement,n=this.fileList.indexOf(r),s=this.filesData[n],a=this.getCurrentMetaData(s);i.classList.contains(Pt)?this.pauseUpload(a,e):i.classList.contains(on)?this.resumeUpload(a,e):i.classList.contains(Yi)&&(a.file.status===this.localizedTexts("fileUploadCancel")?this.retryUpload(a,!1):this.retryUpload(a,!0))},t.prototype.retryUpload=function(e,i){i?(e.end=e.end+this.asyncSettings.chunkSize,e.start=e.start+this.asyncSettings.chunkSize,this.sendRequest(e.file,e)):(e.file.statusCode="1",e.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(e.file)),this.getLiElement(e.file).classList.add(Zs)},t.prototype.chunkUploadInProgress=function(e,i,r){var n=this;if(i.file.statusCode!=="4"){i.file.statusCode!=="4"&&i.file.statusCode!=="5"&&(i.file.statusCode="3",i.file.status=this.localizedTexts("inProgress")),this.updateMetaData(i);var s=this.getLiElement(i.file);if(!d(s)){var a=s.querySelector("."+Yi);if(d(a)||(a.classList.add(Pt),a.setAttribute("title",this.localizedTexts("pause")),a.classList.remove(Yi)),!d(s)){if(!(s.querySelectorAll("."+sn).length>0)){var l=s.querySelector("."+ut);d(this.template)&&(l.classList.add(ii),l.classList.remove(ri),this.createProgressBar(s),this.updateProgressBarClasses(s,ii));var h=s.querySelector("."+Tt)?s.querySelector("."+Tt):s.querySelector("."+ti);d(h)||(h.classList.add(lt),h.setAttribute("title",this.localizedTexts("abort")),h.classList.remove(Tt))}if(!isNaN(Math.round(e.loaded/e.total*100))&&d(this.template)&&i.file.statusCode!=="4"){var c=void 0,u=Math.ceil(i.file.size/this.asyncSettings.chunkSize)-1;this.asyncSettings.chunkSize&&u&&(c=Math.round(i.chunkIndex/u*100),this.changeProgressValue(s,c.toString()+"%"))}i.chunkIndex===0&&this.checkActionButtonStatus()}if(d(s.querySelector("."+Pt))&&d(this.template)&&d(s.querySelector("."+ti))){this.pauseButton=this.createElement("span",{className:"e-icons e-file-pause-btn",attrs:{tabindex:this.btnTabIndex}}),this.browserName==="msie"&&this.pauseButton.classList.add("e-msie");var p=s.querySelector("."+lt);p.parentElement.insertBefore(this.pauseButton,p),this.pauseButton.setAttribute("title",this.localizedTexts("pause")),this.pauseButton.addEventListener("click",function(f){n.checkPausePlayAction(f)},!1)}}}},t.prototype.bytesToSize=function(e){var i=-1;if(!e)return"0.0 KB";do e=e/1024,i++;while(e>99);return i>=2&&(e=e*1024,i=1),Math.max(e,0).toFixed(1)+" "+["KB","MB"][i]},t.prototype.sortFileList=function(e){e=e||this.sortFilesList;for(var i=e,r=[],n=0;n<i.length;n++)r.push(i[n].name);for(var s=r.sort(),a=[],l=0,h=s;l<h.length;l++)for(var c=h[l],n=0;n<i.length;n++)c===i[n].name&&a.push(i[n]);return a},t.prototype.destroy=function(){this.element.value=null,this.clearTemplate(),this.clearAll(),this.unWireEvents(),this.unBindDropEvents(),this.multiple&&this.element.removeAttribute("multiple"),this.enabled||this.element.removeAttribute("disabled"),this.element.removeAttribute("accept"),this.setInitialAttributes();for(var e=["aria-label","directory","webkitdirectory","tabindex"],i=0,r=e;i<r.length;i++){var n=r[i];this.element.removeAttribute(n)}d(this.uploadWrapper)||(this.uploadWrapper.parentElement.appendChild(this.element),K(this.uploadWrapper)),this.uploadWrapper=null,this.uploadWrapper=null,this.browseButton=null,this.dropAreaWrapper=null,this.dropZoneElement=null,this.dropArea=null,this.keyboardModule=null,this.clearButton=null,this.uploadButton=null,o.prototype.destroy.call(this)},t.prototype.upload=function(e,i){var r=this;if(e=e||this.filesData,this.sequentialUpload&&(this.isFirstFileOnSelection||i))this.sequenceUpload(e);else{var n=this.getFilesInArray(e),s={customFormData:[],currentRequest:null,cancel:!1};this.trigger("beforeUpload",s,function(a){a.cancel||(r.customFormDatas=a.customFormData&&a.customFormData.length>0?a.customFormData:r.customFormDatas,r.uploadFiles(n,i))})}},t.prototype.getFilesInArray=function(e){var i=[];return e&&(e instanceof Array?i=e:i.push(e)),i},t.prototype.serverReadFileBase64=function(e,i,r){var n=this;return new Promise(function(s,a){var l=n.fileStreams[e].rawFile;try{var h=new FileReader;h.onload=function(c){return function(){try{var u=c.result,p=u?u.split(";base64,")[1]:null;s(p)}catch(f){a(f)}}}(h),h.readAsDataURL(l.slice(i,i+r))}catch(c){a(c)}})},t.prototype.uploadFileCount=function(e){var i=this.filesData;if(!i||i.length===0)return-1;var r=i.length;return r},t.prototype.getFileRead=function(e,i){var r=this.filesData;if(!r||r.length===0)return-1;var n=r[e],s=this.newFileRef++;return this.fileStreams[s]=n,s},t.prototype.uploadFiles=function(e,i){var r=[];if(!(this.asyncSettings.saveUrl===""||d(this.asyncSettings.saveUrl))){if(!i||d(i))if(this.multiple)r=this.filterfileList(e);else{var n=[];n.push(e[0]),r=this.filterfileList(n)}else r=e;for(var s=0;s<r.length;s++)this.uploadFilesRequest(r,s,i)}},t.prototype.uploadFilesRequest=function(e,i,r){var n=this,s=this.checkChunkUpload(),a=new Fn(this.asyncSettings.saveUrl,"POST",!0,null);a.emitError=!1;var l={fileData:e[i],customFormData:[],cancel:!1},h=new FormData;if(a.beforeSend=function(u){l.currentRequest=a.httpRequest,n.trigger("uploading",l,function(p){p.cancel&&n.eventCancelByArgs(u,p,e[i]),n.customFormDatas&&n.customFormDatas.length>0&&n.updateFormData(h,n.customFormDatas),n.updateFormData(h,p.customFormData)})},e[i].statusCode==="1"){var c=this.element.getAttribute("name");h.append(c,e[i].rawFile,e[i].name),s&&e[i].size>this.asyncSettings.chunkSize?this.chunkUpload(e[i],r,i):(a.onLoad=function(u){return l.cancel?{}:(n.uploadComplete(u,e[i],r),{})},a.onUploadProgress=function(u){return l.cancel?{}:(n.uploadInProgress(u,e[i],r,a),{})},a.onError=function(u){return n.uploadFailed(u,e[i]),{}},a.send(h))}},t.prototype.spliceFiles=function(e){for(var i=this.fileList[e],r=this.getFilesData(),n=+i.getAttribute("data-files-count"),s=0,a=0;a<e;a++)s+=+this.fileList[a].getAttribute("data-files-count");for(var l=s+n-1,h=l;h>=s;h--)r.splice(h,1)},t.prototype.remove=function(e,i,r,n,s){var a=this;d(n)&&(n=!0);var l={event:s,cancel:!1,filesData:[],customFormData:[],postRawFile:n,currentRequest:null},h={cancel:!1,customFormData:[],currentRequest:null};this.trigger("beforeRemove",h,function(c){if(!c.cancel)if(a.isFormUpload())l.filesData=e,a.trigger("removing",l,function(b){if(!b.cancel)for(var M=a.getFilesInArray(e),S=!1,N=void 0,x=0,A=M;x<A.length;x++){var U=A[x];if(S||(N=a.fileList.indexOf(U.list)),N>-1){var z=d(U.input)?null:U.input;z&&K(z),a.spliceFiles(N),K(a.fileList[N]),a.fileList.splice(N,1),S=!0,N=-1}}});else if(a.isForm&&(d(a.asyncSettings.removeUrl)||a.asyncSettings.removeUrl===""))l.filesData=a.getFilesData(),a.trigger("removing",l,function(b){b.cancel||a.clearAll()});else{var u=[];e=d(e)?a.filesData:e,e instanceof Array?u=e:u.push(e),l.filesData=u;for(var p=a.asyncSettings.removeUrl,f=!(p===""||d(p)),g=function(b){var M=a.uploadedFilesData.indexOf(b);(b.statusCode==="2"||b.statusCode==="4"||b.statusCode==="0"&&M!==-1)&&f?a.removeUploadedFile(b,l,r,i):r?a.removeFilesData(b,i):a.trigger("removing",l,function(S){S.cancel||a.removeFilesData(b,i)}),s&&!s.target.classList.contains(Tt)&&a.checkActionComplete(!1)},v=0,y=u;v<y.length;v++){var C=y[v];g(C)}}})},t.prototype.clearAll=function(){var e=this;if(d(this.listParent)){this.browserName!=="msie"&&(this.element.value=""),this.filesData=[];return}var i={cancel:!1,filesData:this.filesData};this.trigger("clearing",i,function(r){r.cancel||(e.clearData(),e.actionCompleteCount=0,e.count=-1)})},t.prototype.getFilesData=function(e){return d(e)?this.filesData:this.getSelectedFiles(e)},t.prototype.pause=function(e,i){e=e||this.filesData;var r=this.getFilesInArray(e);this.pauseUploading(r,i)},t.prototype.pauseUploading=function(e,i){for(var r=this.getFiles(e),n=0;n<r.length;n++)r[n].statusCode==="3"&&this.pauseUpload(this.getCurrentMetaData(r[n],null),null,i)},t.prototype.getFiles=function(e){var i=[];return!d(e)&&!(e instanceof Array)?i.push(e):i=e,i},t.prototype.resume=function(e,i){e=e||this.filesData;var r=this.getFilesInArray(e);this.resumeFiles(r,i)},t.prototype.resumeFiles=function(e,i){for(var r=this.getFiles(e),n=0;n<r.length;n++)r[n].statusCode==="4"&&this.resumeUpload(this.getCurrentMetaData(r[n],null),null,i)},t.prototype.retry=function(e,i,r){e=e||this.filesData;var n=this.getFilesInArray(e);this.sequentialUpload&&this.isFirstFileOnSelection&&(this.isFirstFileOnSelection=!1),this.retryFailedFiles(n,i,r)},t.prototype.retryFailedFiles=function(e,i,r){for(var n=this.getFiles(e),s=0;s<n.length;s++)if(n[s].statusCode==="5"||n[s].statusCode==="0")if(this.asyncSettings.chunkSize>0&&this.getCurrentMetaData(n[s],null))this.retryUpload(this.getCurrentMetaData(n[s],null),i);else{var a=void 0;r||(a=this.fileList[this.filesData.indexOf(n[s])]),this.reloadcanceledFile(null,n[s],a,r)}},t.prototype.cancel=function(e){e=e||this.filesData;var i=this.getFilesInArray(e);this.cancelUpload(i)},t.prototype.cancelUpload=function(e){var i=this.getFiles(e);if(this.asyncSettings.chunkSize>0){for(var r=0;r<i.length;r++)if(i[r].statusCode==="3"){var n=this.getCurrentMetaData(i[r],null);n.file.statusCode="5",n.file.status=this.localizedTexts("fileUploadCancel"),this.updateMetaData(n),this.showHideUploadSpinner(i[r])}}else for(var r=0;r<i.length;r++)i[r].statusCode==="3"&&(i[r].statusCode="5",i[r].status=this.localizedTexts("fileUploadCancel"),this.showHideUploadSpinner(i[r]))},t.prototype.showHideUploadSpinner=function(e){var i=this.getLiElement(e);if(!d(i)&&d(this.template)){var r=i.querySelector("."+lt);Or({target:r,width:"20px"}),_t(r)}},be([it({saveUrl:"",removeUrl:""},cD)],t.prototype,"asyncSettings",void 0),be([w(!1)],t.prototype,"sequentialUpload",void 0),be([w({})],t.prototype,"htmlAttributes",void 0),be([w("")],t.prototype,"cssClass",void 0),be([w(!0)],t.prototype,"enabled",void 0),be([w(null)],t.prototype,"template",void 0),be([w(!0)],t.prototype,"multiple",void 0),be([w(!0)],t.prototype,"autoUpload",void 0),be([w(!0)],t.prototype,"enableHtmlSanitizer",void 0),be([it({},hD)],t.prototype,"buttons",void 0),be([w("")],t.prototype,"allowedExtensions",void 0),be([w(0)],t.prototype,"minFileSize",void 0),be([w(3e7)],t.prototype,"maxFileSize",void 0),be([w(null)],t.prototype,"dropArea",void 0),be([mi([{}],lD)],t.prototype,"files",void 0),be([w(!0)],t.prototype,"showFileList",void 0),be([w(!1)],t.prototype,"directoryUpload",void 0),be([w("Default")],t.prototype,"dropEffect",void 0),be([Q()],t.prototype,"created",void 0),be([Q()],t.prototype,"actionComplete",void 0),be([Q()],t.prototype,"rendering",void 0),be([Q()],t.prototype,"beforeUpload",void 0),be([Q()],t.prototype,"fileListRendering",void 0),be([Q()],t.prototype,"selected",void 0),be([Q()],t.prototype,"uploading",void 0),be([Q()],t.prototype,"success",void 0),be([Q()],t.prototype,"failure",void 0),be([Q()],t.prototype,"removing",void 0),be([Q()],t.prototype,"beforeRemove",void 0),be([Q()],t.prototype,"clearing",void 0),be([Q()],t.prototype,"progress",void 0),be([Q()],t.prototype,"change",void 0),be([Q()],t.prototype,"chunkSuccess",void 0),be([Q()],t.prototype,"chunkFailure",void 0),be([Q()],t.prototype,"chunkUploading",void 0),be([Q()],t.prototype,"canceling",void 0),be([Q()],t.prototype,"pausing",void 0),be([Q()],t.prototype,"resuming",void 0),t=be([Qe],t),t}(dt),uD=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(t,e)};return function(t,e){o(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),ot=function(o,t,e,i){var r=arguments.length,n=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,e,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,e,n):s(t,e))||n);return r>3&&n&&Object.defineProperty(t,e,n),n},$s="e-apply",za="e-cancel",fu="e-current",pD="e-container",Js="e-ctrl-btn",Zn="e-switch-ctrl-btn",jm="e-disabled",Lm="e-value-switch-btn",Pm="e-handler",km="e-hex",gu="e-hide-hex-value",vu="e-hide-opacity",$n="e-hide-switchable-value",an="e-hide-value",zm="e-hide-valueswitcher",Ks="e-hsv-color",Rm="e-hsv-container",Jn="e-selected-value",Ra="e-mode-switch-btn",mu="e-nocolor-item",yu="e-opacity-value",eo="e-palette",Fa="e-color-palette",Cu="e-color-picker",Ba="e-preview-container",Ha="e-previous",dD="e-rtl",Kn="e-show-value",to="e-selected",Ua="e-split-preview",Ya="e-tile",fD={default:["#000000","#f44336","#e91e63","#9c27b0","#673ab7","#2196f3","#03a9f4","#00bcd4","#009688","#ffeb3b","#ffffff","#ffebee","#fce4ec","#f3e5f5","#ede7f6","#e3f2fd","#e1f5fe","#e0f7fa","#e0f2f1","#fffde7","#f2f2f2","#ffcdd2","#f8bbd0","#e1bee7","#d1c4e9","#bbdefb","#b3e5fc","#b2ebf2","#b2dfdb","#fff9c4","#e6e6e6","#ef9a9a","#f48fb1","#ce93d8","#b39ddb","#90caf9","#81d4fa","#80deea","#80cbc4","#fff59d","#cccccc","#e57373","#f06292","#ba68c8","#9575cd","#64b5f6","#4fc3f7","#4dd0e1","#4db6ac","#fff176","#b3b3b3","#ef5350","#ec407a","#ab47bc","#7e57c2","#42a5f5","#29b6f6","#26c6da","#26a69a","#ffee58","#999999","#e53935","#d81b60","#8e24aa","#5e35b1","#1e88e5","#039be5","#00acc1","#00897b","#fdd835","#808080","#d32f2f","#c2185b","#7b1fa2","#512da8","#1976d2","#0288d1","#0097a7","#00796b","#fbc02d","#666666","#c62828","#ad1457","#6a1b9a","#4527a0","#1565c0","#0277bd","#00838f","#00695c","#f9a825","#4d4d4d","#b71c1c","#880e4f","#4a148c","#311b92","#0d47a1","#01579b","#006064","#004d40","#f57f17"]},hr=function(o){uD(t,o);function t(e,i){var r=o.call(this,e,i)||this;return r.recentColors=[],r}return t.prototype.preRender=function(){var e=this.element;this.formElement=ge(this.element,"form"),this.formElement&&I.add(this.formElement,"reset",this.formResetHandler,this);var i={Apply:"Apply",Cancel:"Cancel",ModeSwitcher:"Switch Mode",RecentColors:"Recent colors"};this.l10n=new yi("colorpicker",i,this.locale),e.getAttribute("ejs-for")&&!e.getAttribute("name")&&e.setAttribute("name",e.id)},t.prototype.render=function(){this.initWrapper(),this.inline?this.createWidget():this.createSplitBtn(),this.enableOpacity||Z([this.container.parentElement],vu),this.renderComplete()},t.prototype.initWrapper=function(){var e=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"});this.element.parentNode.insertBefore(e,this.element),e.appendChild(this.element),ye(this.element,{tabindex:"-1",spellcheck:"false","aria-label":"colorpicker"}),this.container=this.createElement("div",{className:pD}),this.getWrapper().appendChild(this.container);var i=this.value?this.roundValue(this.value).toLowerCase():"#008000ff";this.noColor&&this.mode==="Palette"&&this.value===""&&(i="");var r=i.slice(0,7);d(this.initialInputValue)&&(this.initialInputValue=r),this.element.value=r,this.enableOpacity?this.setProperties({value:i},!0):this.setProperties({value:r},!0),this.enableRtl&&e.classList.add(dD),this.cssClass&&Z([e],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.tileRipple=rr(this.container,{selector:"."+Ya}),this.ctrlBtnRipple=rr(this.container,{selector:".e-btn"})},t.prototype.getWrapper=function(){return this.element.parentElement},t.prototype.createWidget=function(){this.mode==="Palette"?(this.createPalette(),this.inline||this.firstPaletteFocus()):(this.createPicker(),this.inline||this.getDragHandler().focus()),this.isRgb=!0,this.createInput(),this.createCtrlBtn(),this.disabled||this.wireEvents(),this.inline&&this.disabled&&this.toggleDisabled(!0),D.isDevice&&this.refreshPopupPos()},t.prototype.createSplitBtn=function(){var e=this,i=this.createElement("button",{className:"e-split-colorpicker"});this.getWrapper().appendChild(i),this.splitBtn=new gm({iconCss:"e-selected-color",target:this.container,disabled:this.disabled,enableRtl:this.enableRtl,createPopupOnClick:this.createPopupOnClick,open:this.onOpen.bind(this),click:function(){var a=new MouseEvent("click",{bubbles:!0,cancelable:!1});e.trigger("change",{currentValue:{hex:e.value.slice(0,7),rgba:e.convertToRgbString(e.hexToRgb(e.value))},previousValue:{hex:null,rgba:null},value:e.value,event:a})}}),this.splitBtn.createElement=this.createElement,this.splitBtn.appendTo(i),this.splitBtn.element.setAttribute("aria-label","colorpicker");var r=this.createElement("span",{className:Ua});ae(".e-selected-color",i).appendChild(r),r.style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value));var n=this.getPopupEle();if(Z([n],"e-colorpicker-popup"),this.cssClass&&Z([n],this.cssClass.replace(/\s+/g," ").trim().split(" ")),D.isDevice&&!this.createPopupOnClick){var s=this.getPopupInst();s.relateTo=document.body,s.position={X:"center",Y:"center"},s.targetType="container",s.collision={X:"fit",Y:"fit"},s.offsetY=4,n.style.zIndex=Er(this.splitBtn.element).toString()}this.bindCallBackEvent()},t.prototype.onOpen=function(){if(this.trigger("open",{element:this.container}),!D.isDevice){var e=this.getPopupInst(),i=Ys(e.element);i.length>0&&(e.collision={X:"flip",Y:"fit"},e.position={X:"right",Y:"bottom"},e.targetType="container")}},t.prototype.getPopupInst=function(){return Bi(this.getPopupEle(),Ar)},t.prototype.bindCallBackEvent=function(){var e=this;this.splitBtn.beforeOpen=function(i){var r=new qs;return e.trigger("beforeOpen",i,function(n){if(!n.cancel){var s=e.getPopupEle();if(s.style.top=le(0+pageYOffset),s.style.left=le(0+pageXOffset),s.style.display="block",e.createWidget(),s.style.display="",D.isDevice){if(e.createPopupOnClick){var a=e.getPopupInst();a.relateTo=document.body,a.position={X:"center",Y:"center"},a.targetType="container",a.collision={X:"fit",Y:"fit"},a.offsetY=4,s.style.zIndex=Er(e.splitBtn.element).toString()}e.modal=e.createElement("div"),e.modal.className="e-"+e.getModuleName()+" e-modal",e.modal.style.display="none",document.body.insertBefore(e.modal,s),document.body.className+=" e-colorpicker-overflow",e.modal.style.display="block",e.modal.style.zIndex=(Number(s.style.zIndex)-1).toString()}}i.cancel=n.cancel,r.resolve(n)}),r},this.splitBtn.beforeClose=function(i){var r=new qs;if(d(i.event))r.resolve(i);else{var n={element:e.container,event:i.event,cancel:!1};e.trigger("beforeClose",n,function(s){D.isDevice&&i.event.target===e.modal&&(s.cancel=!0),s.cancel||e.onPopupClose(),i.cancel=s.cancel,r.resolve(s)})}return r}},t.prototype.onPopupClose=function(){this.unWireEvents(),this.destroyOtherComp(),this.container.style.width="",ae("."+Ua,this.splitBtn.element).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value)),this.container.innerHTML="",ee([this.container],[Cu,Fa]),D.isDevice&&this.modal&&(ee([document.body],"e-colorpicker-overflow"),this.modal.style.display="none",this.modal.outerHTML="",this.modal=null)},t.prototype.createPalette=function(){if(St(this.container,[Fa],[Cu]),this.presetColors){var e=this.createElement("div",{className:"e-custom-palette"});this.appendElement(e);var i=Object.keys(this.presetColors);if(i.length===1)this.appendPalette(this.presetColors[i[0]],i[0],e);else for(var r=0,n=i.length;r<n;r++)this.appendPalette(this.presetColors[i[r]],i[r],e);Se(".e-row",e).length>10&&Z([e],"e-palette-group")}else this.appendPalette(fD.default,"default");this.mode==="Palette"&&!this.modeSwitcher&&this.noColor&&this.setNoColor(),this.showRecentColors&&this.recentColors&&this.recentColors.length>0&&this.renderRecentColor();var s=parseInt(getComputedStyle(this.container).borderBottomWidth,10);this.container.style.width=le(this.container.children[0].offsetWidth+s+s),this.rgb=this.hexToRgb(this.roundValue(this.value)),this.hsv=this.rgbToHsv.apply(this,this.rgb)},t.prototype.renderRecentColor=function(){var e=this,i=this.container.querySelector(".e-clr-pal-rec-wpr");i&&K(i);var r=this.createElement("div",{className:"e-clr-pal-rec-wpr"}),n=this.container.querySelector(".e-switch-ctrl-btn");n?this.container.insertBefore(r,n):this.container.appendChild(r);var s=this.createElement("label",{className:"e-recent-clr-span"});if(s.textContent=this.l10n.getConstant("RecentColors"),r.appendChild(s),this.recentColors.length>0){for(this.recentColors=this.recentColors.filter(function(a,l){return e.recentColors.indexOf(a)===l});this.recentColors.length>10;)this.recentColors.pop();this.appendPalette(this.recentColors,"recent-color",r)}},t.prototype.firstPaletteFocus=function(){ae("."+to,this.container.children[0])||Se("."+eo,this.container)[0].focus()},t.prototype.appendPalette=function(e,i,r){var n=this.createElement("div",{className:eo,attrs:{tabindex:"0",role:"grid"}});i==="recent-color"&&n.classList.add("e-recent-palette"),r?r.appendChild(n):this.appendElement(n);for(var s,a,l,h=0,c=e.length;h<c;h++)(h===0||h%this.columns===0)&&(s=this.createElement("div",{className:"e-row",attrs:{role:"row"}}),n.appendChild(s)),l=this.roundValue(e[h]).toLowerCase(),a=this.createElement("span",{className:Ya,attrs:{role:"gridcell","aria-label":l,"aria-selected":"false"}}),this.trigger("beforeTileRender",{element:a,presetName:i,value:e[h]}),s.appendChild(a),this.value===l&&i!=="recent-color"&&(this.addTileSelection(a),n.focus()),a.style.backgroundColor=this.convertToRgbString(this.hexToRgb(l))},t.prototype.setNoColor=function(){var e=this.container.querySelector(".e-row").children[0];e.classList.add(mu),this.value||(e.classList.add(to),ge(e,"."+eo).focus()),["aria-selected","aria-label"].forEach(function(i){e.removeAttribute(i)}),e.style.backgroundColor=""},t.prototype.appendElement=function(e,i){i===void 0&&(i=0);var r=this.container.children[i];r?this.container.insertBefore(e,r):this.container.appendChild(e)},t.prototype.addTileSelection=function(e){e&&(e.classList.add(to),e.setAttribute("aria-selected","true"))},t.prototype.createPicker=function(){St(this.container,[Cu],[Fa]);var e=this.createElement("div",{className:Rm});this.appendElement(e),e.appendChild(this.createElement("div",{className:Ks}));var i=this.createElement("span",{className:Pm,attrs:{tabindex:"0"}});e.appendChild(i),(this.value===null||this.value==="")&&(this.value="#008000ff"),this.rgb=this.hexToRgb(this.value),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHsvContainerBg(),this.setHandlerPosition(),this.createSlider(),this.createDragTooltip()},t.prototype.setHsvContainerBg=function(e){e===void 0&&(e=this.hsv[0]),this.getHsvContainer().style.backgroundColor=this.convertToRgbString(this.hsvToRgb(e,100,100,1))},t.prototype.getHsvContainer=function(){return ae("."+Rm,this.container)},t.prototype.setHandlerPosition=function(){var e=this.getDragHandler(),i=ae("."+Ks,this.container);this.enableRtl?e.style.left=le((i.offsetWidth-e.offsetWidth/2.5)*Math.abs(100-this.hsv[1])/100):e.style.left=le((i.offsetWidth-e.offsetWidth/2.5)*this.hsv[1]/100),e.style.top=le((i.offsetHeight-e.offsetHeight/2.5)*(100-this.hsv[2])/100)},t.prototype.createSlider=function(){var e=this.createElement("div",{className:"e-slider-preview"});this.appendElement(e,1),this.createPreview(e);var i=this.createElement("div",{className:"e-colorpicker-slider"});e.insertBefore(i,e.children[0]);var r=this.createElement("div",{className:"e-hue-slider"});i.appendChild(r),this.hueSlider=new es({value:this.hsv[0],min:0,max:359,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.hueChange.bind(this)}),this.hueSlider.createElement=this.createElement,this.hueSlider.appendTo(r),this.enableOpacity&&(r=this.createElement("div",{className:"e-opacity-slider"}),i.appendChild(r),this.createOpacitySlider(r))},t.prototype.createOpacitySlider=function(e){this.opacitySlider=new es({value:this.rgb[3]*100,min:0,max:100,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.opacityChange.bind(this)}),this.opacitySlider.createElement=this.createElement,this.opacitySlider.appendTo(e);var i=this.createElement("div",{className:"e-opacity-empty-track"});e.appendChild(i),this.updateOpacitySliderBg()},t.prototype.updateOpacitySliderBg=function(){var e=this.enableRtl?"to left":"to right",i=ae(".e-opacity-empty-track",this.opacitySlider.element);i&&(i.style.background="linear-gradient("+e+", rgba("+this.rgb.slice(0,3)+", 0) 0%, "+this.convertToRgbString(this.rgb.slice(0,3))+" 100%)")},t.prototype.hueChange=function(e){this.hsv[0]=e.value,this.setHsvContainerBg(),this.convertToOtherFormat()},t.prototype.opacityChange=function(e){var i=e.value,r=this.rgbToHex(this.rgb);this.hsv[3]=i/100,this.rgb[3]=i/100;var n=this.rgbToHex(this.rgb);this.updateOpacityInput(i);var s=this.convertToRgbString(this.rgb);this.updatePreview(s),this.triggerEvent(n,r,s)},t.prototype.updateOpacityInput=function(e){if(this.enableOpacity&&!this.getWrapper().classList.contains(an)){var i=Bi(ae("."+yu,this.container),ln);i.value=e,i.dataBind()}},t.prototype.createPreview=function(e){var i=this.createElement("div",{className:Ba});e.appendChild(i);var r=this.createElement("span",{className:"e-preview "+fu});i.appendChild(r);var n=this.convertToRgbString(this.rgb);r.style.backgroundColor=n,r=this.createElement("span",{className:"e-preview "+Ha}),i.appendChild(r),r.style.backgroundColor=n},t.prototype.isPicker=function(){return!this.container.classList.contains(Fa)},t.prototype.getPopupEle=function(){return this.container.parentElement},t.prototype.createNumericInput=function(e,i,r,n){var s=this,a=new ln({value:i,placeholder:r,min:0,max:n,format:"###.##",showSpinButton:!1,floatLabelType:"Always",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker(),change:function(l){l.event&&s.inputHandler(l.event)}});a.createElement=this.createElement,a.appendTo(e)},t.prototype.createInput=function(){var e=this.isPicker(),i=this.getWrapper();if(e&&!i.classList.contains(an)||!e&&i.classList.contains(Kn)){var r=this.createElement("div",{className:Jn});e?this.appendElement(r,2):this.appendElement(r,1);var n=this.createElement("div",{className:"e-input-container"});if(r.appendChild(n),i.classList.contains(zm)||this.appendValueSwitchBtn(r),!i.classList.contains(gu)){var s=this.createElement("input",{className:km,attrs:{maxlength:"7",spellcheck:"false","aria-label":"HEX"}});n.appendChild(s),me.createInput({element:s,floatLabelType:"Always",properties:{placeholder:"HEX",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker()}},this.createElement),me.setValue(this.value.slice(0,7),s),s.addEventListener("input",this.inputHandler.bind(this))}if(!i.classList.contains($n)){var a=void 0,l=void 0;this.isRgb?(a="RGB",l=this.rgb):(a="HSV",l=this.hsv);for(var h=["rh","gs","bv"],c=0;c<3;c++)this.createNumericInput(n.appendChild(this.createElement("input",{className:"e-"+h[c]+"-value"})),l[c],a[c],255);this.enableOpacity&&this.appendOpacityValue(n)}}},t.prototype.appendOpacityValue=function(e){this.createNumericInput(e.appendChild(this.createElement("input",{className:yu})),this.rgb[3]*100,"A",100)},t.prototype.appendValueSwitchBtn=function(e){var i=this.createElement("button",{className:"e-icons e-css e-btn e-flat e-icon-btn "+Lm,attrs:{title:"Toggle format"}});e.appendChild(i),this.isPicker()&&!this.getWrapper().classList.contains($n)&&i.addEventListener("click",this.formatSwitchHandler.bind(this))},t.prototype.createCtrlBtn=function(){if(this.modeSwitcher||this.showButtons){this.l10n.setLocale(this.locale);var e=this.createElement("div",{className:Zn});if(this.container.appendChild(e),this.showButtons){var i=this.createElement("div",{className:Js});e.appendChild(i);var r=this.l10n.getConstant("Apply");i.appendChild(this.createElement("button",{innerHTML:r,className:"e-btn e-css e-flat e-primary e-small "+$s,attrs:{title:r}}));var n=this.l10n.getConstant("Cancel");i.appendChild(this.createElement("button",{innerHTML:n,className:"e-btn e-css e-flat e-small "+za,attrs:{title:n}}))}this.modeSwitcher&&this.appendModeSwitchBtn()}},t.prototype.appendModeSwitchBtn=function(){var e=this.createElement("button",{className:"e-icons e-btn e-flat e-icon-btn "+Ra,attrs:{title:this.l10n.getConstant("ModeSwitcher")}});ae("."+Zn,this.container).insertBefore(e,ae("."+Js,this.container))},t.prototype.createDragTooltip=function(){var e=this,i=new nn({opensOn:"Custom",showTipPointer:!1,cssClass:"e-color-picker-tooltip",htmlAttributes:{title:"tooltip"},beforeOpen:function(r){e.tooltipEle=r.element},animation:{open:{effect:"None"},close:{effect:"None"}}});i.createElement=this.createElement,i.appendTo(this.container),i.open(this.container),this.tooltipEle.style.zIndex=Er(this.tooltipEle).toString(),this.tooltipEle.setAttribute("aria-label","colorpicker-tooltip"),ae(".e-tip-content",this.tooltipEle).appendChild(this.createElement("div",{className:"e-tip-transparent"}))},t.prototype.getTooltipInst=function(){return Bi(this.container,nn)},t.prototype.setTooltipOffset=function(e){this.getTooltipInst().offsetY=e},t.prototype.toggleDisabled=function(e){e?this.getWrapper().classList.add(jm):this.getWrapper().classList.remove(jm),this.showButtons&&[].slice.call(Se(".e-btn",this.container)).forEach(function(i){e?ye(i,{disabled:""}):i.removeAttribute("disabled")})},t.prototype.convertToRgbString=function(e){return e.length?e.length===4?"rgba("+e.join()+")":"rgb("+e.join()+")":""},t.prototype.convertToHsvString=function(e){return e.length===4?"hsva("+e.join()+")":"hsv("+e.join()+")"},t.prototype.updateHsv=function(){this.hsv[1]=this.hsv[1]>100?100:this.hsv[1],this.hsv[2]=this.hsv[2]>100?100:this.hsv[2],this.setHandlerPosition()},t.prototype.convertToOtherFormat=function(e,i){e===void 0&&(e=!1);var r=this.rgbToHex(this.rgb);this.rgb=this.hsvToRgb.apply(this,this.hsv);var n=this.rgbToHex(this.rgb),s=this.convertToRgbString(this.rgb);this.updatePreview(s),this.updateInput(n),this.triggerEvent(n,r,s,e,i)},t.prototype.updateInput=function(e){var i=this.getWrapper();i.classList.contains(an)||(i.classList.contains(gu)||me.setValue(e.substr(0,7),ae("."+km,this.container)),i.classList.contains($n)||(this.isRgb?this.updateValue(this.rgb,!1):this.updateValue(this.hsv,!1)))},t.prototype.updatePreview=function(e){this.enableOpacity&&this.updateOpacitySliderBg(),ae(".e-tip-transparent",this.tooltipEle).style.backgroundColor=e,ae("."+Ba+" ."+fu,this.container).style.backgroundColor=e,ae("."+Ba+" ."+Ha,this.container).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value))},t.prototype.getDragHandler=function(){return ae("."+Pm,this.container)},t.prototype.removeTileSelection=function(){var e=[].slice.call(Se("."+to,this.container));e.forEach(function(i){i.classList.remove(to),i.setAttribute("aria-selected","false")})},t.prototype.convertRgbToNumberArray=function(e){return e.slice(e.indexOf("(")+1,e.indexOf(")")).split(",").map(function(i,r){return r!==3?parseInt(i,10):parseFloat(i)})},t.prototype.getValue=function(e,i){if(e||(e=this.value),i=i?i.toLowerCase():"hex",e[0]==="r"){var r=this.convertRgbToNumberArray(e);if(i==="hex"||i==="hexa"){var n=this.rgbToHex(r);return i==="hex"?n.slice(0,7):n}else return i==="hsv"?this.convertToHsvString(this.rgbToHsv.apply(this,r.slice(0,3))):i==="hsva"?this.convertToHsvString(this.rgbToHsv.apply(this,r)):"null"}else if(e[0]==="h"){var r=this.hsvToRgb.apply(this,this.convertRgbToNumberArray(e));if(i==="rgba")return this.convertToRgbString(r);if(i==="hex"||i==="hexa"){var n=this.rgbToHex(r);return i==="hex"?n.slice(0,7):n}else return i==="rgb"?this.convertToRgbString(r.slice(0,3)):"null"}else{e=this.roundValue(e);var s=this.hexToRgb(e);return(i==="rgb"||i==="hsv")&&(s=s.slice(0,3)),i==="rgba"||i==="rgb"?this.convertToRgbString(s):i==="hsva"||i==="hsv"?this.convertToHsvString(this.rgbToHsv.apply(this,s)):i==="hex"?e.slice(0,7):i==="a"?s[3].toString():"null"}},t.prototype.toggle=function(){this.container.parentElement.classList.contains("e-popup-close")?this.splitBtn.toggle():this.closePopup(null)},t.prototype.getModuleName=function(){return"colorpicker"},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.wireEvents=function(){if(this.isPicker()){var e=this.getDragHandler();I.add(e,"keydown",this.pickerKeyDown,this);var i=ae("."+Js,this.container);i&&I.add(i,"keydown",this.ctrlBtnKeyDown,this),I.add(this.getHsvContainer(),"mousedown touchstart",this.handlerDown,this),(this.modeSwitcher||this.showButtons)&&this.addCtrlSwitchEvent(),I.add(ae("."+Ha,this.container),"click",this.previewHandler,this)}else I.add(this.container,"click",this.paletteClickHandler,this),I.add(this.container,"keydown",this.paletteKeyDown,this)},t.prototype.formResetHandler=function(){this.value=this.initialInputValue,ye(this.element,{value:this.initialInputValue})},t.prototype.addCtrlSwitchEvent=function(){var e=ae("."+Zn,this.container);e&&I.add(e,"click",this.btnClickHandler,this)},t.prototype.ctrlBtnKeyDown=function(e){if(e.keyCode===13){var i=ae("."+$s,this.container);if(i){var r=this.rgbToHex(this.rgb);this.triggerChangeEvent(r)}this.splitBtn.element.focus()}},t.prototype.pickerKeyDown=function(e){switch(e.keyCode){case 39:this.handlerDragPosition(1,this.enableRtl?-1:1,e);break;case 37:this.handlerDragPosition(1,this.enableRtl?1:-1,e);break;case 38:this.handlerDragPosition(2,1,e);break;case 40:this.handlerDragPosition(2,-1,e);break;case 13:{e.preventDefault();var i=this.rgbToHex(this.rgb);this.enterKeyHandler(i)}}},t.prototype.enterKeyHandler=function(e){this.triggerChangeEvent(e),this.inline||this.splitBtn.element.focus()},t.prototype.closePopup=function(e){var i=this,r={element:this.container,event:e,cancel:!1};this.trigger("beforeClose",r,function(n){n.cancel||(i.splitBtn.toggle(),i.onPopupClose())})},t.prototype.triggerChangeEvent=function(e,i){var r=e.slice(0,7);this.trigger("change",{currentValue:{hex:r,rgba:this.convertToRgbString(this.rgb)},event:i,previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:this.enableOpacity?e:r}),this.showRecentColors&&(this.recentColors.unshift(r),this.inline&&this.renderRecentColor()),this.enableOpacity?this.setProperties({value:e},!0):this.setProperties({value:r},!0),this.element.value=r||"#000000"},t.prototype.handlerDragPosition=function(e,i,r){r.preventDefault(),this.hsv[e]+=i*(r.ctrlKey?1:3),this.hsv[e]<0&&(this.hsv[e]=0),this.updateHsv(),this.convertToOtherFormat(!0,r)},t.prototype.handlerDown=function(e){e.preventDefault(),e.type==="mousedown"?(this.clientX=Math.abs(e.pageX-pageXOffset),this.clientY=Math.abs(e.pageY-pageYOffset),this.setTooltipOffset(8)):(this.clientX=Math.abs(e.changedTouches[0].pageX-pageXOffset),this.clientY=Math.abs(e.changedTouches[0].pageY-pageYOffset),this.setTooltipOffset(-8)),this.setHsv(this.clientX,this.clientY),this.getDragHandler().style.transition="left .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1)",this.updateHsv(),this.convertToOtherFormat(!1,e),this.getDragHandler().focus(),I.add(document,"mousemove touchmove",this.handlerMove,this),I.add(document,"mouseup touchend",this.handlerEnd,this)},t.prototype.handlerMove=function(e){e.type!=="touchmove"&&e.preventDefault();var i,r;e.type==="mousemove"?(i=Math.abs(e.pageX-pageXOffset),r=Math.abs(e.pageY-pageYOffset)):(i=Math.abs(e.changedTouches[0].pageX-pageXOffset),r=Math.abs(e.changedTouches[0].pageY-pageYOffset)),this.setHsv(i,r);var n=this.getDragHandler();this.updateHsv(),this.convertToOtherFormat(!1,e),this.getTooltipInst().refresh(n),this.tooltipEle.style.transform||(Math.abs(this.clientX-i)>8||Math.abs(this.clientY-r)>8)&&(ae("."+Ks,this.container).style.cursor="pointer",n.style.transition="none",this.inline||(this.tooltipEle.style.zIndex=(parseInt(this.getPopupEle().style.zIndex,10)+1).toString()),this.tooltipEle.style.transform="rotate(45deg)",n.classList.add("e-hide-handler"))},t.prototype.setHsv=function(e,i){var r=ae("."+Ks,this.container),n=r.getBoundingClientRect();this.enableRtl?e=e>n.right?0:Math.abs(e-n.right):e=e>n.left?Math.abs(e-n.left):0,i=i>n.top?Math.abs(i-n.top):0,this.hsv[2]=Math.round(Number(100*(r.offsetHeight-Math.max(0,Math.min(r.offsetHeight,i-r.offsetTop)))/r.offsetHeight)*10)/10,this.hsv[1]=Math.round(Number(100*Math.max(0,Math.min(r.offsetWidth,e-r.offsetLeft))/r.offsetWidth)*10)/10},t.prototype.handlerEnd=function(e){e.type!=="touchend"&&e.preventDefault(),I.remove(document,"mousemove touchmove",this.handlerMove),I.remove(document,"mouseup touchend",this.handlerEnd);var i=this.getDragHandler();ae("."+Ks,this.container).style.cursor="",this.tooltipEle.style.transform&&(this.tooltipEle.style.transform="",i.classList.remove("e-hide-handler")),!this.inline&&!this.showButtons&&this.closePopup(e)},t.prototype.btnClickHandler=function(e){var i=e.target;ge(i,"."+Ra)?(e.stopPropagation(),this.switchToPalette()):(i.classList.contains($s)||i.classList.contains(za))&&this.ctrlBtnClick(i,e)},t.prototype.switchToPalette=function(){this.trigger("beforeModeSwitch",{element:this.container,mode:"Palette"}),this.unWireEvents(),this.destroyOtherComp(),K(ae(".e-slider-preview",this.container)),this.getWrapper().classList.contains(an)||ct(ae("."+Jn,this.container)),K(this.getHsvContainer()),this.createPalette(),this.firstPaletteFocus(),this.createInput(),this.refreshPopupPos(),this.element.parentElement&&this.element.parentElement.parentElement&&this.element.parentElement.parentElement.classList.contains("e-ie-ddb-popup")&&this.refreshImageEditorPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Palette"})},t.prototype.refreshImageEditorPopupPos=function(){if(D.isDevice){var e=this.getPopupEle();e.style.left=le(0+pageXOffset),e.style.top=le(0+pageYOffset);var i=document.querySelector("#"+this.element.parentElement.parentElement.id.split("-popup")[0]);i&&e.parentElement.ej2_instances[0].refreshPosition(i)}},t.prototype.refreshPopupPos=function(){if(!this.inline){var e=this.getPopupEle();e.style.left=le(0+pageXOffset),e.style.top=le(0+pageYOffset),this.getPopupInst().refreshPosition(this.splitBtn.element.parentElement)}},t.prototype.formatSwitchHandler=function(){this.isRgb?(this.updateValue(this.hsv,!0,3,[360,100,100]),this.isRgb=!1):(this.updateValue(this.rgb,!0,2),this.isRgb=!0)},t.prototype.updateValue=function(e,i,r,n){for(var s=["e-rh-value","e-gs-value","e-bv-value"],a,l=0,h=s.length;l<h;l++)a=Bi(ae("."+s[l],this.container),ln),a.value=Math.round(e[l]),i&&(a.placeholder=s[l].substr(r,1).toUpperCase(),a.max=n?n[l]:255),a.dataBind()},t.prototype.previewHandler=function(e){var i=e.target,r=this.rgbToHex(this.rgb);this.rgb=this.convertRgbToNumberArray(i.style.backgroundColor),this.rgb[3]||(this.rgb[3]=1);var n=this.rgbToHex(this.rgb),s=this.rgbToHsv.apply(this,this.rgb);s[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:s[0]},!0),this.hueSlider.refresh()),this.setHsvContainerBg(s[0]),this.enableOpacity&&s[3]!==this.hsv[3]&&(this.opacitySlider.setProperties({value:s[3]*100},!0),this.opacitySlider.refresh(),this.updateOpacitySliderBg()),this.hsv=s,this.setHandlerPosition(),this.updateInput(n),ae("."+Ba+" ."+fu,this.container).style.backgroundColor=this.convertToRgbString(this.rgb),this.triggerEvent(n,r,this.convertToRgbString(this.rgb),!1,e)},t.prototype.paletteClickHandler=function(e){e.preventDefault();var i=e.target;if(i.classList.contains(Ya)){if(this.removeTileSelection(),this.addTileSelection(i),i.classList.contains(mu))this.noColorTile();else{var r=i.getAttribute("aria-label"),n=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(this.roundValue(r)),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(Kn)&&this.updateInput(r),this.triggerEvent(r,n,this.convertToRgbString(this.rgb),!1,e)}!this.inline&&!this.showButtons&&this.closePopup(e)}else ge(i,"."+Ra)?this.switchToPicker():i.classList.contains($s)||i.classList.contains(za)?this.ctrlBtnClick(i,e):this.getWrapper().classList.contains(Kn)&&ge(i,"."+Lm)&&this.formatSwitchHandler()},t.prototype.noColorTile=function(e){e===void 0&&(e=!1);var i=this.rgbToHex(this.rgb);this.rgb=[],this.hsv=[],this.triggerEvent("",i,"",e)},t.prototype.switchToPicker=function(){var e=this.getWrapper();this.trigger("beforeModeSwitch",{element:this.container,mode:"Picker"}),this.unWireEvents(),[].slice.call(Se("."+eo,this.container)).forEach(function(r){K(r)}),this.container.querySelector(".e-clr-pal-rec-wpr")&&K(this.container.querySelector(".e-clr-pal-rec-wpr")),e.classList.contains(Kn)&&K(ae("."+Jn,this.container)),this.container.style.width="";var i=ae(".e-custom-palette",this.container);this.presetColors&&ct(i),this.createPicker(),this.getDragHandler().focus(),this.createInput(),this.refreshPopupPos(),this.element.parentElement&&this.element.parentElement.parentElement&&this.element.parentElement.parentElement.classList.contains("e-ie-ddb-popup")&&this.refreshImageEditorPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Picker"})},t.prototype.ctrlBtnClick=function(e,i){if(e.classList.contains($s)){var r=this.rgbToHex(this.rgb);this.triggerChangeEvent(r,i)}if(!this.inline)this.closePopup(i),this.splitBtn.element.focus();else if(e.classList.contains(za)){var n={element:this.container,event:i,cancel:!1};this.trigger("beforeClose",n)}},t.prototype.paletteKeyDown=function(e){var i=e.target;if(i.classList.contains(eo)){var r,n,s=[].slice.call(Se("."+Ya,i)),a=s.filter(function(h){return h.classList.contains("e-selected")}).pop();switch(!e.altKey&&e.keyCode){case 39:e.preventDefault(),r=a?s[this.tilePosition(s,a,this.enableRtl?-1:1)]:s[this.enableRtl?s.length-1:0],this.keySelectionChanges(r);break;case 37:e.preventDefault(),r=a?s[this.tilePosition(s,a,this.enableRtl?1:-1)]:s[this.enableRtl?0:s.length-1],this.keySelectionChanges(r);break;case 38:e.preventDefault(),n=a?this.tilePosition(s,a,-this.columns):0,r=s[n]?s[n]:s[n-this.columns],this.keySelectionChanges(r);break;case 40:e.preventDefault(),n=a?this.tilePosition(s,a,this.columns):s.length-1,s[n]||(n%=s.length,n+=s[s.length-1].parentElement.childElementCount),r=s[n],this.keySelectionChanges(r);break;case 13:if(e.preventDefault(),a){var l=a.getAttribute("aria-label");this.enterKeyHandler(l||"")}break}}},t.prototype.keySelectionChanges=function(e){if(this.removeTileSelection(),this.addTileSelection(e),e.classList.contains(mu))this.noColorTile(!0);else{var i=e.getAttribute("aria-label"),r=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(i),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(Kn)&&this.updateInput(i),this.triggerEvent(i,r,this.convertToRgbString(this.rgb),!0)}},t.prototype.tilePosition=function(e,i,r){e=Array.prototype.slice.call(e);var n=e.length,s=this.columns-e[n-1].parentElement.childElementCount,a=e.indexOf(i);return a+=r,a<0?a+=n+s:a%=n+s,a},t.prototype.inputHandler=function(e){var i=e.target;if(i.value.length){var r,n,s=ae(".e-float-text",i.parentElement).textContent;switch(s){case"HEX":{var a="";if((i.value[0]==="#"&&i.value.length!==5||i.value[0]!=="#"&&i.value.length!==4)&&(a=this.roundValue(i.value)),a.length===9)n=this.rgbToHex(this.rgb),this.rgb=this.hexToRgb(a+a.substr(-2)),this.inputValueChange(this.rgbToHsv.apply(this,this.rgb),n,i.value,e);else return;break}case"R":this.rgb[0]!==Number(i.value)&&(n=this.rgbToHex(this.rgb),this.rgb[0]=Number(i.value),r=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(r,n,null,e));break;case"G":this.rgb[1]!==Number(i.value)&&(n=this.rgbToHex(this.rgb),this.rgb[1]=Number(i.value),r=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(r,n,null,e));break;case"B":this.rgb[2]!==Number(i.value)&&(n=this.rgbToHex(this.rgb),this.rgb[2]=Number(i.value),r=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(r,n,null,e));break;case"H":this.hueSlider.value=Number(i.value);break;case"S":this.hsv[1]!==Number(i.value)&&(this.hsv[1]=Number(i.value),this.updateHsv(),this.convertToOtherFormat(!1,e));break;case"V":this.hsv[2]!==Number(i.value)&&(this.hsv[2]=Number(i.value),this.updateHsv(),this.convertToOtherFormat(!1,e));break;case"A":this.opacitySlider.value=Number(i.value);break}}},t.prototype.inputValueChange=function(e,i,r,n){e[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:e[0]},!0),this.hueSlider.refresh(),this.setHsvContainerBg(e[0])),this.hsv=e;var s=this.rgbToHex(this.rgb);this.setHandlerPosition(),this.updateInput(r||s);var a=this.convertToRgbString(this.rgb);this.updatePreview(a),this.triggerEvent(s,i,a,!1,n)},t.prototype.triggerEvent=function(e,i,r,n,s){n===void 0&&(n=!1);var a=e.slice(0,7);d(s)&&(s=new MouseEvent("click",{bubbles:!0,cancelable:!1})),!this.showButtons&&!n?(this.trigger("change",{currentValue:{hex:a,rgba:r},event:s,previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:e}),this.showRecentColors&&(this.recentColors.unshift(a),this.inline&&this.renderRecentColor()),this.enableOpacity?this.setProperties({value:e},!0):this.setProperties({value:a},!0),this.element.value=a||"#000000"):this.trigger("select",{currentValue:{hex:a,rgba:r},event:s,previousValue:{hex:i.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(i))}})},t.prototype.destroy=function(){var e=this,i=this.getWrapper();o.prototype.destroy.call(this),["tabindex","spellcheck"].forEach(function(r){e.element.removeAttribute(r)}),this.inline?(this.unWireEvents(),this.destroyOtherComp()):(this.isPopupOpen()&&(this.unWireEvents(),this.destroyOtherComp()),this.splitBtn.destroy(),this.splitBtn=null),this.tileRipple(),this.tileRipple=null,this.ctrlBtnRipple(),this.ctrlBtnRipple=null,this.element.nextElementSibling&&K(this.element.nextElementSibling),i&&(i.parentElement.insertBefore(this.element,i),K(i)),this.container=null,this.formElement&&I.remove(this.formElement,"reset",this.formResetHandler)},t.prototype.destroyOtherComp=function(){if(this.isPicker()){for(var e=ge(this.hueSlider.element,".e-color-picker"),i=e.querySelectorAll(".e-numerictextbox"),r=0;r<i.length;r++)Bi(i[r],ln).destroy();this.hueSlider.destroy(),this.enableOpacity&&(this.opacitySlider.destroy(),this.opacitySlider=null),this.hueSlider=null;var n=this.getTooltipInst();n.close(),n.destroy(),this.tooltipEle=null}},t.prototype.isPopupOpen=function(){return this.getPopupEle().classList.contains("e-popup-open")},t.prototype.unWireEvents=function(){if(this.isPicker()){var e=this.getDragHandler();I.remove(e,"keydown",this.pickerKeyDown);var i=ae("."+Js,this.container);i&&I.remove(i,"keydown",this.ctrlBtnKeyDown),I.remove(this.getHsvContainer(),"mousedown touchstart",this.handlerDown),(this.modeSwitcher||this.showButtons)&&I.remove(ae("."+Zn,this.container),"click",this.btnClickHandler),I.remove(ae("."+Ha,this.container),"click",this.previewHandler)}else I.remove(this.container,"click",this.paletteClickHandler),I.remove(this.container,"keydown",this.paletteKeyDown)},t.prototype.roundValue=function(e){if(!e)return"";e[0]!=="#"&&(e="#"+e);var i=e.length;if(i===4&&(e+="f",i=5),i===5){for(var r="",n=1,s=e.length;n<s;n++)r+=e.charAt(n)+e.charAt(n);e="#"+r,i=9}return i===7&&(e+="ff"),e},t.prototype.hexToRgb=function(e){if(!e)return[];e=e.trim(),e.length!==9&&(e=this.roundValue(e));var i=Number((parseInt(e.slice(-2),16)/255).toFixed(2));e=e.slice(1,7);var r=parseInt(e,16),n=[];return n.push(r>>16&255),n.push(r>>8&255),n.push(r&255),n.push(i),n},t.prototype.rgbToHsv=function(e,i,r,n){if(this.rgb&&!this.rgb.length)return[];e/=255,i/=255,r/=255;var s=Math.max(e,i,r),a=Math.min(e,i,r),l,h=s,c=s-a,u=s===0?0:c/s;if(s===a)l=0;else{switch(s){case e:l=(i-r)/c+(i<r?6:0);break;case i:l=(r-e)/c+2;break;case r:l=(e-i)/c+4;break}l/=6}var p=[Math.round(l*360),Math.round(u*1e3)/10,Math.round(h*1e3)/10];return d(n)||p.push(n),p},t.prototype.hsvToRgb=function(e,i,r,n){var s,a,l;if(i/=100,r/=100,i===0)return s=a=l=r,[Math.round(s*255),Math.round(a*255),Math.round(l*255),n];e/=60;var h=Math.floor(e),c=e-h,u=r*(1-i),p=r*(1-i*c),f=r*(1-i*(1-c));switch(h){case 0:s=r,a=f,l=u;break;case 1:s=p,a=r,l=u;break;case 2:s=u,a=r,l=f;break;case 3:s=u,a=p,l=r;break;case 4:s=f,a=u,l=r;break;default:s=r,a=u,l=p}var g=[Math.round(s*255),Math.round(a*255),Math.round(l*255)];return d(n)||g.push(n),g},t.prototype.rgbToHex=function(e){return e.length?"#"+this.hex(e[0])+this.hex(e[1])+this.hex(e[2])+(d(e[3])?"":e[3]!==0?(Math.round(e[3]*255)+65536).toString(16).substr(-2):"00"):""},t.prototype.hex=function(e){return("0"+e.toString(16)).slice(-2)},t.prototype.changeModeSwitcherProp=function(e){var i=ae("."+Zn,this.container);e?i?this.appendModeSwitchBtn():(this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):i&&(this.showButtons?K(ae("."+Ra,i)):ct(i))},t.prototype.changeShowBtnProps=function(e){var i=ae("."+Zn,this.container);e?(i&&ct(i),this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):this.modeSwitcher?K(ae("."+Js,i)):ct(i)},t.prototype.changeValueProp=function(e){if(this.isPicker())this.rgb=this.hexToRgb(e),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHandlerPosition(),K(ge(this.hueSlider.element,".e-slider-preview")),this.createSlider(),this.setHsvContainerBg(),this.updateInput(e),this.rgb.length===4&&this.updateOpacityInput(this.rgb[3]*100);else{this.removeTileSelection();var i=this.container.querySelector('span[aria-label="'+this.roundValue(e)+'"]');i&&this.addTileSelection(i)}},t.prototype.setInputEleProps=function(){ct(ae("."+Jn,this.container)),this.createInput()},t.prototype.changeDisabledProp=function(e){this.isPicker()&&(this.hueSlider.enabled=!e,this.opacitySlider.enabled=!e,this.setInputEleProps()),e?(this.toggleDisabled(!0),this.unWireEvents()):(this.toggleDisabled(!1),this.wireEvents())},t.prototype.changeCssClassProps=function(e,i){var r=this.getWrapper(),n=this.getPopupEle();i&&ee([r,n],i.split(" ")),e&&Z([r,n],e.replace(/\s+/g," ").trim().split(" "))},t.prototype.changeRtlProps=function(e){e?Z([this.getWrapper()],"e-rtl"):ee([this.getWrapper()],"e-rtl")},t.prototype.changePaletteProps=function(){K(this.container.children[0]),this.container.style.width="",this.createPalette()},t.prototype.changeOpacityProps=function(e){var i=this.getWrapper();e?(ee([this.container.parentElement],vu),this.createOpacitySlider(ae(".e-colorpicker-slider",this.container).appendChild(this.createElement("div",{className:"e-opacity-slider"}))),!i.classList.contains(an)&&!i.classList.contains($n)&&this.appendOpacityValue(ae(".e-input-container",this.container))):(Z([this.container.parentElement],vu),this.opacitySlider.destroy(),ct(this.opacitySlider.element),this.opacitySlider=null,!i.classList.contains(an)&&!i.classList.contains($n)&&ct(ae("."+yu,this.container).parentElement))},t.prototype.onPropertyChanged=function(e,i){var r=this;if(!d(e.value)){var n=this.roundValue(e.value);if(n.length===9){this.element.value=this.roundValue(n).slice(0,7);var s=this.splitBtn&&ae("."+Ua,this.splitBtn.element);s&&(s.style.backgroundColor=this.convertToRgbString(this.hexToRgb(e.value)))}else if(this.noColor&&this.mode==="Palette"&&this.value===""){var s=this.splitBtn&&ae("."+Ua,this.splitBtn.element);s.style.backgroundColor=""}else this.value=i.value}if(!this.inline&&d(e.inline)){var a=["disabled","enableRtl"];if(this.splitBtn.setProperties(Xn(e,a)),!this.isPopupOpen()){this.changeCssClassProps(e.cssClass,i.cssClass),this.changeRtlProps(e.enableRtl);return}}for(var l=function(f){switch(f){case"inline":e.inline?(h.getWrapper().appendChild(h.container),h.splitBtn.destroy(),K(h.element.nextElementSibling),h.container.children.length||h.createWidget()):(h.destroyOtherComp(),h.unWireEvents(),h.container.innerHTML="",h.createSplitBtn());break;case"cssClass":{h.changeCssClassProps(e.cssClass,i.cssClass);var g=e.cssClass.split(" ").concat(i.cssClass.split(" "));g=g.reduce(function(C,b){return C.indexOf(b)<0&&C.push(b),C},[]);var v=0;g.forEach(function(C){if(v===0&&(C===an||C===zm||C===Kn||C===gu||C===$n)){var b=ae("."+Jn,r.container);b&&ct(ae("."+Jn,r.container)),r.createInput(),v++}});break}case"enableRtl":h.isPicker()&&(h.hueSlider.enableRtl=e.enableRtl,h.enableOpacity&&(h.opacitySlider.enableRtl=e.enableRtl),h.setInputEleProps()),h.changeRtlProps(e.enableRtl);break;case"disabled":h.changeDisabledProp(e.disabled);break;case"value":h.value!==i.value&&h.changeValueProp(e.value);break;case"showButtons":h.changeShowBtnProps(e.showButtons);break;case"mode":e.mode==="Picker"?h.switchToPicker():h.switchToPalette();break;case"modeSwitcher":h.changeModeSwitcherProp(e.modeSwitcher);break;case"columns":case"presetColors":h.isPicker()||h.changePaletteProps();break;case"noColor":e.noColor?h.mode==="Palette"&&!h.modeSwitcher&&h.setNoColor():h.changePaletteProps();break;case"enableOpacity":h.changeOpacityProps(e.enableOpacity);break;case"showRecentColors":if(!e.showRecentColors){var y=h.container.querySelector(".e-clr-pal-rec-wpr");y&&K(y)}h.recentColors=[];break}},h=this,c=0,u=Object.keys(e);c<u.length;c++){var p=u[c];l(p)}},t.prototype.focusIn=function(){this.element.parentElement.focus()},ot([w("#008000ff")],t.prototype,"value",void 0),ot([w("")],t.prototype,"cssClass",void 0),ot([w(!1)],t.prototype,"disabled",void 0),ot([w("Picker")],t.prototype,"mode",void 0),ot([w(!0)],t.prototype,"modeSwitcher",void 0),ot([w(null)],t.prototype,"presetColors",void 0),ot([w(!0)],t.prototype,"showButtons",void 0),ot([w(10)],t.prototype,"columns",void 0),ot([w(!1)],t.prototype,"inline",void 0),ot([w(!1)],t.prototype,"noColor",void 0),ot([w(!1)],t.prototype,"enablePersistence",void 0),ot([w(!0)],t.prototype,"enableOpacity",void 0),ot([w(!1)],t.prototype,"createPopupOnClick",void 0),ot([w(!1)],t.prototype,"showRecentColors",void 0),ot([Q()],t.prototype,"select",void 0),ot([Q()],t.prototype,"change",void 0),ot([Q()],t.prototype,"beforeTileRender",void 0),ot([Q()],t.prototype,"beforeOpen",void 0),ot([Q()],t.prototype,"open",void 0),ot([Q()],t.prototype,"beforeClose",void 0),ot([Q()],t.prototype,"beforeModeSwitch",void 0),ot([Q()],t.prototype,"onModeSwitch",void 0),ot([Q()],t.prototype,"created",void 0),t=ot([Qe],t),t}(dt),gD=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(t,e)};return function(t,e){o(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),mt=function(o,t,e,i){var r=arguments.length,n=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,e,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,e,n):s(t,e))||n);return r>3&&n&&Object.defineProperty(t,e,n),n},vD="e-clear-icon-hide",Fm=function(o){gD(t,o);function t(e,i){var r=o.call(this,e,i)||this;return r.previousValue=null,r.isHiddenInput=!1,r.isForm=!1,r.inputPreviousValue=null,r.textboxOptions=e,r}return t.prototype.onPropertyChanged=function(e,i){for(var r=0,n=Object.keys(e);r<n.length;r++){var s=n[r];switch(s){case"floatLabelType":me.removeFloating(this.textboxWrapper),me.addFloating(this.respectiveElement,this.floatLabelType,this.placeholder);break;case"enabled":me.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container),this.bindClearEvent();break;case"width":me.setWidth(e.width,this.textboxWrapper.container);break;case"value":{var a=this.isProtectedOnChange;this.isProtectedOnChange=!0,me.isBlank(this.value)||(this.value=this.value.toString()),this.isProtectedOnChange=a,me.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.inputPreviousValue=this.respectiveElement.value,(this.isAngular||this.isVue)&&this.preventChange===!0?(this.previousValue=this.isAngular?this.value:this.previousValue,this.preventChange=!1):(d(this.isAngular)||!this.isAngular||this.isAngular&&!this.preventChange||this.isAngular&&d(this.preventChange))&&this.raiseChangeEvent()}break;case"htmlAttributes":this.updateHTMLAttributesToElement(),this.updateHTMLAttributesToWrapper(),this.checkAttributes(!0),this.multiline&&!d(this.textarea)?me.validateInputType(this.textboxWrapper.container,this.textarea):me.validateInputType(this.textboxWrapper.container,this.element);break;case"readonly":me.setReadonly(this.readonly,this.respectiveElement);break;case"type":this.respectiveElement.tagName!=="TEXTAREA"&&(this.respectiveElement.setAttribute("type",this.type),me.validateInputType(this.textboxWrapper.container,this.element),this.raiseChangeEvent());break;case"showClearButton":me.setClearButton(this.showClearButton,this.respectiveElement,this.textboxWrapper),this.bindClearEvent();break;case"enableRtl":me.setEnableRtl(this.enableRtl,[this.textboxWrapper.container]);break;case"placeholder":me.setPlaceholder(this.placeholder,this.respectiveElement),me.calculateWidth(this.respectiveElement,this.textboxWrapper.container);break;case"autocomplete":this.autocomplete!=="on"&&this.autocomplete!==""?this.respectiveElement.autocomplete=this.autocomplete:this.removeAttributes(["autocomplete"]);break;case"cssClass":me.updateCssClass(e.cssClass,i.cssClass,this.textboxWrapper.container);break;case"locale":this.globalize=new Ls(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),me.setPlaceholder(this.placeholder,this.respectiveElement);break}}},t.prototype.getModuleName=function(){return"textbox"},t.prototype.preRender=function(){if(this.cloneElement=this.element.cloneNode(!0),this.formElement=ge(this.element,"form"),d(this.formElement)||(this.isForm=!0),this.element.tagName==="EJS-TEXTBOX"){var e=Y("ej2_instances",this.element),i=this.multiline?this.createElement("textarea"):this.createElement("input"),r=0;for(r;r<this.element.attributes.length;r++){var n=this.element.attributes[r].nodeName;n!=="id"&&n!=="class"?(i.setAttribute(n,this.element.attributes[r].nodeValue),i.innerHTML=this.element.innerHTML,n==="name"&&this.element.removeAttribute("name")):n==="class"&&i.setAttribute(n,this.element.className.split(" ").filter(function(l){return l.indexOf("ng-")!==0}).join(" "))}this.element.appendChild(i),this.element=i,ve("ej2_instances",e,this.element)}this.updateHTMLAttributesToElement(),this.checkAttributes(!1),(d(this.textboxOptions)||this.textboxOptions.value===void 0)&&this.element.value!==""&&this.setProperties({value:this.element.value},!0),this.element.tagName!=="TEXTAREA"&&this.element.setAttribute("type",this.type),(this.type==="text"||this.element.tagName==="INPUT"&&this.multiline&&this.isReact)&&this.element.setAttribute("role","textbox"),this.globalize=new Ls(this.locale);var s={placeholder:this.placeholder};if(this.l10n=new yi("textbox",s,this.locale),this.l10n.getConstant("placeholder")!==""&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",Je("textbox")),this.element.hasAttribute("name")||this.element.setAttribute("name",this.element.getAttribute("id")),this.element.tagName==="INPUT"&&this.multiline){this.isHiddenInput=!0,this.textarea=this.createElement("textarea"),this.element.parentNode.insertBefore(this.textarea,this.element),this.element.setAttribute("type","hidden"),this.textarea.setAttribute("name",this.element.getAttribute("name")),this.element.removeAttribute("name"),this.textarea.setAttribute("role",this.element.getAttribute("role")),this.element.removeAttribute("role"),this.textarea.setAttribute("id",Je("textarea"));for(var a=["placeholder","disabled","value","readonly","type","autocomplete"],r=0;r<this.element.attributes.length;r++){var n=this.element.attributes[r].nodeName;this.element.hasAttribute(n)&&bu.indexOf(n)<0&&!(n==="id"||n==="type"||n==="e-mappinguid")&&(this.textarea.setAttribute(n,this.element.attributes[r].nodeValue),a.indexOf(n)<0&&(this.element.removeAttribute(n),r--))}}},t.prototype.checkAttributes=function(e){for(var i=e?d(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["placeholder","disabled","value","readonly","type","autocomplete"],r=0,n=i;r<n.length;r++){var s=n[r];if(!d(this.element.getAttribute(s)))switch(s){case"disabled":if(d(this.textboxOptions)||this.textboxOptions.enabled===void 0||e){var a=!(this.element.getAttribute(s)==="disabled"||this.element.getAttribute(s)===""||this.element.getAttribute(s)==="true");this.setProperties({enabled:a},!e)}break;case"readonly":if(d(this.textboxOptions)||this.textboxOptions.readonly===void 0||e){var l=this.element.getAttribute(s)==="readonly"||this.element.getAttribute(s)===""||this.element.getAttribute(s)==="true";this.setProperties({readonly:l},!e)}break;case"placeholder":(d(this.textboxOptions)||this.textboxOptions.placeholder===void 0||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"autocomplete":if(d(this.textboxOptions)||this.textboxOptions.autocomplete===void 0||e){var h=this.element.autocomplete==="off"?"off":"on";this.setProperties({autocomplete:h},!e)}break;case"value":(d(this.textboxOptions)||this.textboxOptions.value===void 0||e)&&this.element.value!==""&&this.setProperties({value:this.element.value},!e);break;case"type":(d(this.textboxOptions)||this.textboxOptions.type===void 0||e)&&this.setProperties({type:this.element.type},!e);break}}},t.prototype.render=function(){var e=this.cssClass;!d(this.cssClass)&&this.cssClass!==""&&(e=me.getInputValidClassList(this.cssClass)),this.respectiveElement=this.isHiddenInput?this.textarea:this.element,this.textboxWrapper=me.createInput({element:this.respectiveElement,floatLabelType:this.floatLabelType,properties:{enabled:this.enabled,enableRtl:this.enableRtl,cssClass:e,readonly:this.readonly,placeholder:this.placeholder,showClearButton:this.showClearButton}}),this.updateHTMLAttributesToWrapper(),this.isHiddenInput&&this.respectiveElement.parentNode.insertBefore(this.element,this.respectiveElement),this.wireEvents(),d(this.value)||(me.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value)),d(this.value)||(this.initialValue=this.value,this.setInitialValue()),this.autocomplete!=="on"&&this.autocomplete!==""?this.respectiveElement.autocomplete=this.autocomplete:!d(this.textboxOptions)&&this.textboxOptions.autocomplete!==void 0&&this.removeAttributes(["autocomplete"]),this.previousValue=this.value,this.inputPreviousValue=this.value,this.respectiveElement.defaultValue=this.respectiveElement.value,me.setWidth(this.width,this.textboxWrapper.container),!d(ge(this.element,"fieldset"))&&ge(this.element,"fieldset").disabled&&(this.enabled=!1),!this.element.hasAttribute("aria-labelledby")&&!this.element.hasAttribute("placeholder")&&!this.element.hasAttribute("aria-label")&&this.element.setAttribute("aria-label","textbox"),this.renderComplete()},t.prototype.updateHTMLAttributesToWrapper=function(){me.updateHTMLAttributesToWrapper(this.htmlAttributes,this.textboxWrapper.container)},t.prototype.updateHTMLAttributesToElement=function(){me.updateHTMLAttributesToElement(this.htmlAttributes,this.respectiveElement?this.respectiveElement:this.multiline&&!d(this.textarea)?this.textarea:this.element)},t.prototype.setInitialValue=function(){this.isAngular||this.respectiveElement.setAttribute("value",this.initialValue)},t.prototype.wireEvents=function(){I.add(this.respectiveElement,"focus",this.focusHandler,this),I.add(this.respectiveElement,"blur",this.focusOutHandler,this),I.add(this.respectiveElement,"keydown",this.keydownHandler,this),I.add(this.respectiveElement,"input",this.inputHandler,this),I.add(this.respectiveElement,"change",this.changeHandler,this),this.isForm&&I.add(this.formElement,"reset",this.resetForm,this),this.bindClearEvent(),!d(this.textboxWrapper.container.querySelector(".e-float-text"))&&this.floatLabelType==="Auto"&&this.textboxWrapper.container.classList.contains("e-autofill")&&this.textboxWrapper.container.classList.contains("e-outline")&&I.add(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler,this)},t.prototype.animationHandler=function(){this.textboxWrapper.container.classList.add("e-valid-input");var e=this.textboxWrapper.container.querySelector(".e-float-text");d(e)||(e.classList.add("e-label-top"),e.classList.contains("e-label-bottom")&&e.classList.remove("e-label-bottom"))},t.prototype.resetValue=function(e){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.value=e,e==null&&this.textboxWrapper.container.classList.contains("e-valid-input")&&!(this.floatLabelType==="Always"&&this.textboxWrapper.container.classList.contains("e-outline"))&&this.textboxWrapper.container.classList.remove("e-valid-input"),this.isProtectedOnChange=i},t.prototype.resetForm=function(){if(this.isAngular?this.resetValue(""):this.resetValue(this.initialValue),!d(this.textboxWrapper)){var e=this.textboxWrapper.container.querySelector(".e-float-text");!d(e)&&this.floatLabelType!=="Always"&&(d(this.initialValue)||this.initialValue===""?(e.classList.add("e-label-bottom"),e.classList.remove("e-label-top")):this.initialValue!==""&&(e.classList.add("e-label-top"),e.classList.remove("e-label-bottom")))}},t.prototype.focusHandler=function(e){var i={container:this.textboxWrapper.container,event:e,value:this.value};this.trigger("focus",i)},t.prototype.focusOutHandler=function(e){!(this.previousValue===null&&this.value===null&&this.respectiveElement.value==="")&&this.previousValue!==this.value&&this.raiseChangeEvent(e,!0);var i={container:this.textboxWrapper.container,event:e,value:this.value};this.trigger("blur",i)},t.prototype.keydownHandler=function(e){(e.keyCode===13||e.keyCode===9)&&!((this.previousValue===null||this.previousValue==="")&&(this.value===null||this.value==="")&&this.respectiveElement.value==="")&&this.setProperties({value:this.respectiveElement.value},!0)},t.prototype.inputHandler=function(e){var i=this,r={event:e,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container};this.inputPreviousValue=this.respectiveElement.value,this.isAngular&&(i.localChange({value:this.respectiveElement.value}),this.preventChange=!0),this.isVue&&(this.preventChange=!0),this.trigger("input",r),e.stopPropagation()},t.prototype.changeHandler=function(e){this.setProperties({value:this.respectiveElement.value},!0),this.previousValue!==this.value&&this.raiseChangeEvent(e,!0),e.stopPropagation()},t.prototype.raiseChangeEvent=function(e,i){var r={event:e,value:this.value,previousValue:this.previousValue,container:this.textboxWrapper.container,isInteraction:i||!1,isInteracted:i||!1};this.preventChange=!1,this.trigger("change",r),this.previousValue=this.value,this.element.tagName==="INPUT"&&this.multiline&&D.info.name==="mozilla"&&(this.element.value=this.respectiveElement.value)},t.prototype.bindClearEvent=function(){this.showClearButton&&(this.enabled?I.add(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler,this):I.remove(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler))},t.prototype.resetInputHandler=function(e){if(e.preventDefault(),!this.textboxWrapper.clearButton.classList.contains(vD)||this.textboxWrapper.container.classList.contains("e-static-clear")){me.setValue("",this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.setProperties({value:this.respectiveElement.value},!0);var i={event:e,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container};if(this.trigger("input",i),this.inputPreviousValue=this.respectiveElement.value,this.raiseChangeEvent(e,!0),ge(this.element,"form")){var r=this.element,n=document.createEvent("KeyboardEvent");n.initEvent("keyup",!1,!0),r.dispatchEvent(n)}}},t.prototype.unWireEvents=function(){I.remove(this.respectiveElement,"focus",this.focusHandler),I.remove(this.respectiveElement,"blur",this.focusOutHandler),I.remove(this.respectiveElement,"keydown",this.keydownHandler),I.remove(this.respectiveElement,"input",this.inputHandler),I.remove(this.respectiveElement,"change",this.changeHandler),this.isForm&&I.remove(this.formElement,"reset",this.resetForm),!d(this.textboxWrapper.container.querySelector(".e-float-text"))&&this.floatLabelType==="Auto"&&this.textboxWrapper.container.classList.contains("e-outline")&&this.textboxWrapper.container.classList.contains("e-autofill")&&I.remove(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler)},t.prototype.destroy=function(){this.unWireEvents(),this.showClearButton&&(this.clearButton=document.getElementsByClassName("e-clear-icon")[0]),this.element.tagName==="INPUT"&&this.multiline&&(K(this.textboxWrapper.container.getElementsByTagName("textarea")[0]),this.respectiveElement=this.element,this.element.removeAttribute("type")),this.respectiveElement.value=this.respectiveElement.defaultValue,this.respectiveElement.classList.remove("e-input"),this.removeAttributes(["aria-disabled","aria-readonly","aria-labelledby"]),d(this.textboxWrapper)||(this.textboxWrapper.container.insertAdjacentElement("afterend",this.respectiveElement),K(this.textboxWrapper.container)),this.textboxWrapper=null,me.destroy({element:this.respectiveElement,floatLabelType:this.floatLabelType,properties:this.properties},this.clearButton),o.prototype.destroy.call(this)},t.prototype.addIcon=function(e,i){me.addIcon(e,i,this.textboxWrapper.container,this.respectiveElement,this.createElement)},t.prototype.getPersistData=function(){var e=["value"];return this.addOnPersist(e)},t.prototype.addAttributes=function(e){for(var i=0,r=Object.keys(e);i<r.length;i++){var n=r[i];n==="disabled"?(this.setProperties({enabled:!1},!0),me.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):n==="readonly"?(this.setProperties({readonly:!0},!0),me.setReadonly(this.readonly,this.respectiveElement)):n==="class"?this.respectiveElement.classList.add(e[""+n]):n==="placeholder"?(this.setProperties({placeholder:e[""+n]},!0),me.setPlaceholder(this.placeholder,this.respectiveElement)):n==="rows"&&this.respectiveElement.tagName==="TEXTAREA"?this.respectiveElement.setAttribute(n,e[""+n]):this.respectiveElement.setAttribute(n,e[""+n])}},t.prototype.removeAttributes=function(e){for(var i=0,r=e;i<r.length;i++){var n=r[i];n==="disabled"?(this.setProperties({enabled:!0},!0),me.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):n==="readonly"?(this.setProperties({readonly:!1},!0),me.setReadonly(this.readonly,this.respectiveElement)):n==="placeholder"?(this.setProperties({placeholder:null},!0),me.setPlaceholder(this.placeholder,this.respectiveElement)):this.respectiveElement.removeAttribute(n)}},t.prototype.focusIn=function(){document.activeElement!==this.respectiveElement&&this.enabled&&(this.respectiveElement.focus(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&Z([this.textboxWrapper.container],[vm]))},t.prototype.focusOut=function(){document.activeElement===this.respectiveElement&&this.enabled&&(this.respectiveElement.blur(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&ee([this.textboxWrapper.container],[vm]))},mt([w("text")],t.prototype,"type",void 0),mt([w(!1)],t.prototype,"readonly",void 0),mt([w(null)],t.prototype,"value",void 0),mt([w("Never")],t.prototype,"floatLabelType",void 0),mt([w("")],t.prototype,"cssClass",void 0),mt([w(null)],t.prototype,"placeholder",void 0),mt([w("on")],t.prototype,"autocomplete",void 0),mt([w({})],t.prototype,"htmlAttributes",void 0),mt([w(!1)],t.prototype,"multiline",void 0),mt([w(!0)],t.prototype,"enabled",void 0),mt([w(!1)],t.prototype,"showClearButton",void 0),mt([w(!1)],t.prototype,"enablePersistence",void 0),mt([w(null)],t.prototype,"width",void 0),mt([Q()],t.prototype,"created",void 0),mt([Q()],t.prototype,"destroyed",void 0),mt([Q()],t.prototype,"change",void 0),mt([Q()],t.prototype,"blur",void 0),mt([Q()],t.prototype,"focus",void 0),mt([Q()],t.prototype,"input",void 0),t=mt([Qe],t),t}(dt);var Fe=function(){function o(t){return this.subQuery=null,this.isChild=!1,this.distincts=[],this.queries=[],this.key="",this.fKey="",typeof t=="string"?this.fromTable=t:t&&t instanceof Array&&(this.lookups=t),this.expands=[],this.sortedColumns=[],this.groupedColumns=[],this.subQuery=null,this.isChild=!1,this.params=[],this.lazyLoad=[],this}return Object.defineProperty(o.prototype,"moduleName",{get:function(){return"query"},enumerable:!0,configurable:!0}),o.prototype.setKey=function(t){return this.key=t,this},o.prototype.using=function(t){return this.dataManager=t,this},o.prototype.execute=function(t,e,i,r){return t=t||this.dataManager,t?t.executeQuery(this,e,i,r):V.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')},o.prototype.executeLocal=function(t){return t=t||this.dataManager,t?t.executeLocal(this):V.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')},o.prototype.clone=function(){var t=new o;return t.queries=this.queries.slice(0),t.key=this.key,t.isChild=this.isChild,t.dataManager=this.dataManager,t.fromTable=this.fromTable,t.params=this.params.slice(0),t.expands=this.expands.slice(0),t.sortedColumns=this.sortedColumns.slice(0),t.groupedColumns=this.groupedColumns.slice(0),t.subQuerySelector=this.subQuerySelector,t.subQuery=this.subQuery,t.fKey=this.fKey,t.isCountRequired=this.isCountRequired,t.distincts=this.distincts.slice(0),t.lazyLoad=this.lazyLoad.slice(0),t},o.prototype.from=function(t){return this.fromTable=t,this},o.prototype.addParams=function(t,e){return typeof e=="function"?this.params.push({key:t,fn:e}):this.params.push({key:t,value:e}),this},o.prototype.distinct=function(t){return typeof t=="string"?this.distincts=[].slice.call([t],0):this.distincts=t.slice(0),this},o.prototype.expand=function(t){return typeof t=="string"?this.expands=[].slice.call([t],0):this.expands=t.slice(0),this},o.prototype.where=function(t,e,i,r,n,s){e=e?e.toLowerCase():null;var a=null;return typeof t=="string"?a=new Et(t,e,i,r,n,s):t instanceof Et&&(a=t),this.queries.push({fn:"onWhere",e:a}),this},o.prototype.search=function(t,e,i,r,n){typeof e=="string"&&(e=[e]),(!i||i==="none")&&(i="contains");var s=V.fnOperators[i];return this.queries.push({fn:"onSearch",e:{fieldNames:e,operator:i,searchKey:t,ignoreCase:r,ignoreAccent:n,comparer:s}}),this},o.prototype.sortBy=function(t,e,i){return this.sortByForeignKey(t,e,i)},o.prototype.sortByForeignKey=function(t,e,i,r){var n=d(r)?"ascending":r,s,a;if(typeof t=="string"&&V.endsWith(t.toLowerCase()," desc")&&(t=t.replace(/ desc$/i,""),e="descending"),(!e||typeof e=="string")&&(n=e?e.toLowerCase():"ascending",e=V.fnSort(e)),i){s=o.filterQueries(this.queries,"onSortBy");for(var l=0;l<s.length;l++)if(a=s[l].e.fieldName,typeof a=="string"){if(a===t)return this}else if(a instanceof Array){for(var h=0;h<a.length;h++)if(a[h]===t||t.toLowerCase()===a[h]+" desc")return this}}return this.queries.push({fn:"onSortBy",e:{fieldName:t,comparer:e,direction:n}}),this},o.prototype.sortByDesc=function(t){return this.sortBy(t,"descending")},o.prototype.group=function(t,e,i){return this.sortBy(t,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:t,comparer:e||null,format:i||null}}),this},o.prototype.page=function(t,e){return this.queries.push({fn:"onPage",e:{pageIndex:t,pageSize:e}}),this},o.prototype.range=function(t,e){return this.queries.push({fn:"onRange",e:{start:t,end:e}}),this},o.prototype.take=function(t){return this.queries.push({fn:"onTake",e:{nos:t}}),this},o.prototype.skip=function(t){return this.queries.push({fn:"onSkip",e:{nos:t}}),this},o.prototype.select=function(t){return typeof t=="string"&&(t=[].slice.call([t],0)),this.queries.push({fn:"onSelect",e:{fieldNames:t}}),this},o.prototype.hierarchy=function(t,e){return this.subQuerySelector=e,this.subQuery=t,this},o.prototype.foreignKey=function(t){return this.fKey=t,this},o.prototype.requiresCount=function(){return this.isCountRequired=!0,this},o.prototype.aggregate=function(t,e){return this.queries.push({fn:"onAggregates",e:{field:e,type:t}}),this},o.filterQueries=function(t,e){return t.filter(function(i){return i.fn===e})},o.filterQueryLists=function(t,e){for(var i=t.filter(function(s){return e.indexOf(s.fn)!==-1}),r={},n=0;n<i.length;n++)r[i[n].fn]||(r[i[n].fn]=i[n].e);return r},o}(),Et=function(){function o(t,e,i,r,n,s){return r===void 0&&(r=!1),this.ignoreAccent=!1,this.isComplex=!1,typeof t=="string"?(this.field=t,this.operator=e.toLowerCase(),this.value=i,this.matchCase=s,this.ignoreCase=r,this.ignoreAccent=n,this.isComplex=!1,this.comparer=V.fnOperators.processOperator(this.operator)):(t instanceof o&&i instanceof o||i instanceof Array)&&(this.isComplex=!0,this.condition=e.toLowerCase(),this.predicates=[t],this.matchCase=t.matchCase,this.ignoreCase=t.ignoreCase,this.ignoreAccent=t.ignoreAccent,i instanceof Array?[].push.apply(this.predicates,i):this.predicates.push(i)),this}return o.and=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.combinePredicates([].slice.call(t,0),"and")},o.prototype.and=function(t,e,i,r,n){return o.combine(this,t,e,i,"and",r,n)},o.or=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.combinePredicates([].slice.call(t,0),"or")},o.prototype.or=function(t,e,i,r,n){return o.combine(this,t,e,i,"or",r,n)},o.ornot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.combinePredicates([].slice.call(t,0),"or not")},o.prototype.ornot=function(t,e,i,r,n){return o.combine(this,t,e,i,"ornot",r,n)},o.andnot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.combinePredicates([].slice.call(t,0),"and not")},o.prototype.andnot=function(t,e,i,r,n){return o.combine(this,t,e,i,"andnot",r,n)},o.fromJson=function(t){if(t instanceof Array){for(var e=[],i=0,r=t.length;i<r;i++)e.push(this.fromJSONData(t[i]));return e}var n=t;return this.fromJSONData(n)},o.prototype.validate=function(t){var e=this.predicates?this.predicates:[],i,r;if(!this.isComplex&&this.comparer)return this.condition&&this.condition.indexOf("not")!==-1?(this.condition=this.condition.split("not")[0]===""?void 0:this.condition.split("not")[0],!this.comparer.call(this,V.getObject(this.field,t),this.value,this.ignoreCase,this.ignoreAccent)):this.comparer.call(this,V.getObject(this.field,t),this.value,this.ignoreCase,this.ignoreAccent);this.condition&&this.condition.indexOf("not")!==-1?r=this.condition.indexOf("and")!==-1:r=this.condition==="and";for(var n=0;n<e.length;n++)if(n>0&&this.condition&&this.condition.indexOf("not")!==-1&&(e[n].condition=e[n].condition?e[n].condition+"not":"not"),i=e[n].validate(t),r){if(!i)return!1}else if(i)return!0;return r},o.prototype.toJson=function(){var t,e;if(this.isComplex){t=[],e=this.predicates;for(var i=0;i<e.length;i++)t.push(e[i].toJson())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:t,matchCase:this.matchCase}},o.combinePredicates=function(t,e){if(t.length===1){if(!(t[0]instanceof Array))return t[0];t=t[0]}return new o(t[0],e,t.slice(1))},o.combine=function(t,e,i,r,n,s,a){return e instanceof o?o[n](t,e):typeof e=="string"?o[n](t,new o(e,i,r,s,a)):V.throwError("Predicate - "+n+" : invalid arguments")},o.fromJSONData=function(t){for(var e=t.predicates||[],i=e.length,r=[],n,s=0;s<i;s++)r.push(this.fromJSONData(e[s]));return t.isComplex?n=new o(r[0],t.condition,r.slice(1)):n=new o(t.field,t.operator,t.value,t.ignoreCase,t.ignoreAccent),n},o}(),Bm={GroupGuid:"{271bbba0-1ee7}"},V=function(){function o(){}return o.getValue=function(t,e){return typeof t=="function"?t.call(e||{}):t},o.endsWith=function(t,e){return t.slice&&t.slice(-e.length)===e},o.notEndsWith=function(t,e){return t.slice&&t.slice(-e.length)!==e},o.startsWith=function(t,e){return t.slice(0,e.length)===e},o.notStartsWith=function(t,e){return t.slice(0,e.length)!==e},o.wildCard=function(t,e){var i,r;if(e.indexOf("[")!==-1&&(e=e.split("[").join("[[]")),e.indexOf("(")!==-1&&(e=e.split("(").join("[(]")),e.indexOf(")")!==-1&&(e=e.split(")").join("[)]")),e.indexOf("\\")!==-1&&(e=e.split("\\").join("[\\\\]")),e.indexOf("*")!==-1){e.charAt(0)!=="*"&&(e="^"+e),e.charAt(e.length-1)!=="*"&&(e=e+"$"),i=e.split("*");for(var n=0;n<i.length;n++)i[n].indexOf(".")===-1?i[n]=i[n]+".*":i[n]=i[n]+"*";e=i.join("")}(e.indexOf("%3f")!==-1||e.indexOf("?")!==-1)&&(r=e.indexOf("%3f")!==-1?e.split("%3f"):e.split("?"),e=r.join("."));var s=new RegExp(e,"g");return s.test(t)},o.like=function(t,e){return e.indexOf("%")!==-1?e.charAt(0)==="%"&&e.lastIndexOf("%")<2?(e=e.substring(1,e.length),o.startsWith(o.toLowerCase(t),o.toLowerCase(e))):e.charAt(e.length-1)==="%"&&e.indexOf("%")>e.length-3?(e=e.substring(0,e.length-1),o.endsWith(o.toLowerCase(t),o.toLowerCase(e))):(e.lastIndexOf("%")!==e.indexOf("%")&&e.lastIndexOf("%")>e.indexOf("%")+1&&(e=e.substring(e.indexOf("%")+1,e.lastIndexOf("%"))),t.indexOf(e)!==-1):!1},o.fnSort=function(t){return t=t?o.toLowerCase(t):"ascending",t==="ascending"?this.fnAscending:this.fnDescending},o.fnAscending=function(t,e){return d(t)&&d(e)?0:e==null?-1:typeof t=="string"?t.localeCompare(e):t==null?1:t-e},o.fnDescending=function(t,e){return d(t)&&d(e)?0:e==null?1:typeof t=="string"?t.localeCompare(e)*-1:t==null?-1:e-t},o.extractFields=function(t,e){for(var i={},r=0;r<e.length;r++)i=this.setValue(e[r],this.getObject(e[r],t),i);return i},o.select=function(t,e){for(var i=[],r=0;r<t.length;r++)i.push(this.extractFields(t[r],e));return i},o.group=function(t,e,i,r,n,s,a){r=r||1;var l=t,h="GroupGuid";if(l.GroupGuid===Bm[h]){for(var c=function(M){if(d(n))l[M].items=u.group(l[M].items,e,i,l.level+1,null,s,a),l[M].count=l[M].items.length;else{var S=-1,N=n.filter(function(x){return x.key===l[M].key});S=n.indexOf(N[0]),l[M].items=u.group(l[M].items,e,i,l.level+1,n[S].items,s,a),l[M].count=n[S].count}},u=this,p=0;p<l.length;p++)c(p);return l.childLevels+=1,l}var f={},g=[];g.GroupGuid=Bm[h],g.level=r,g.childLevels=0,g.records=l;for(var v=function(M){var S=y.getVal(l,M,e);if(d(s)||(S=s(S,e)),!f[S]&&(f[S]={key:S,count:0,items:[],aggregates:{},field:e},g.push(f[S]),!d(n))){var N=n.filter(function(x){return x.key===f[S].key});f[S].count=N[0].count}f[S].count=d(n)?f[S].count+=1:f[S].count,(!a||a&&i.length)&&f[S].items.push(l[M])},y=this,C=0;C<l.length;C++)v(C);if(i&&i.length)for(var b=function(M){for(var S={},N=void 0,x=i,A=0;A<i.length;A++)if(N=o.aggregates[i[A].type],d(n))N&&(S[x[A].field+" - "+x[A].type]=N(g[M].items,x[A].field));else{var U=n.filter(function(z){return z.key===g[M].key});N&&(S[x[A].field+" - "+x[A].type]=N(U[0].items,x[A].field))}g[M].aggregates=S},C=0;C<g.length;C++)b(C);if(a&&g.length&&i.length)for(var C=0;C<g.length;C++)g[C].items=[];return l.length&&g||l},o.buildHierarchy=function(t,e,i,r,n){var s,a={},l;for(r.result&&(r=r.result),r.GroupGuid&&this.throwError("DataManager: Do not have support Grouping in hierarchy"),s=0;s<r.length;s++){var h=this.getObject(t,r[s]);l=a[h]||(a[h]=[]),l.push(r[s])}for(s=0;s<i.length;s++){var h=this.getObject(n||t,i[s]);i[s][e]=a[h]}},o.getFieldList=function(t,e,i){if(i===void 0&&(i=""),e==null)return this.getFieldList(t,[],i);for(var r=t,n=Object.keys(t),s=0,a=n;s<a.length;s++){var l=a[s];typeof r[l]=="object"&&!(r[l]instanceof Array)?this.getFieldList(r[l],e,i+l+"."):e.push(i+l)}return e},o.getObject=function(t,e){if(!t)return e;if(e){if(t.indexOf(".")===-1)if(d(e[t])){var i=t.charAt(0).toLowerCase()+t.slice(1),r=t.charAt(0).toUpperCase()+t.slice(1);return d(e[i])?d(e[r])?null:e[r]:e[i]}else return e[t];for(var n=e,s=t.split("."),a=0;a<s.length&&n!=null;a++){if(n=n[s[a]],n===void 0){var l=s[a].charAt(0).toUpperCase()+s[a].slice(1);n=e[l]||e[l.charAt(0).toLowerCase()+l.slice(1)]||null}e=n}return n}},o.setValue=function(t,e,i){var r=t.toString().split("."),n=i||{},s=n,a,l=r.length,h;for(a=0;a<l;a++)h=r[a],a+1===l?s[h]=e===void 0?void 0:e:d(s[h])&&(s[h]={}),s=s[h];return n},o.sort=function(t,e,i){var r=this;return t.length<=1?t:t.slice().sort(function(n,s){return i(r.getVal([n],0,e),r.getVal([s],0,e),n,s)})},o.ignoreDiacritics=function(t){if(typeof t!="string")return t;var e=t.split(""),i=e.map(function(r){return r in o.diacritics?o.diacritics[r]:r});return i.join("")},o.ignoreDiacriticsForArrays=function(t){return Array.isArray(t)?t.map(function(e){return o.ignoreDiacritics(e)}):[]},o.merge=function(t,e,i,r){for(var n=[],s;t.length>0||e.length>0;)t.length>0&&e.length>0?r?s=r(this.getVal(t,0,i),this.getVal(e,0,i),t[0],e[0])<=0?t:e:s=t[0][i]<t[0][i]?t:e:s=t.length>0?t:e,n.push(s.shift());return n},o.getVal=function(t,e,i){return i?this.getObject(i,t[e]):t[e]},o.toLowerCase=function(t){return d(t)?"":typeof t=="string"?t.toLowerCase():t instanceof Date?t.toString().toLowerCase():t.toString()},o.callAdaptorFunction=function(t,e,i,r){if(e in t){var n=t[e](i,r);d(n)||(i=n)}return i},o.getAddParams=function(t,e,i){var r={};return o.callAdaptorFunction(t,"addParams",{dm:e,query:i,params:i?i.params:[],reqParams:r}),r},o.isPlainObject=function(t){return!!t&&t.constructor===Object},o.isCors=function(){var t=null,e="XMLHttpRequest";try{t=new window[e]}catch{}return!!t&&"withCredentials"in t},o.getGuid=function(t){var e="0123456789abcdef",i;return(t||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(r,n){if("crypto"in window&&"getRandomValues"in crypto){var s=new Uint8Array(1);window.crypto.getRandomValues(s),i=s[0]%16|0}else i=Math.random()*16|0;return e[n===19?i&3|8:i]})},o.isNull=function(t){return t==null},o.getItemFromComparer=function(t,e,i){var r,n,s,a=0,l=typeof o.getVal(t,0,e)=="string";if(t.length)for(;d(r)&&a<t.length;)r=o.getVal(t,a,e),s=t[a++];for(;a<t.length;a++)n=o.getVal(t,a,e),!d(n)&&(l&&(r=+r,n=+n),i(r,n)>0&&(r=n,s=t[a]));return s},o.distinct=function(t,e,i){i=d(i)?!1:i;var r=[],n,s={};return t.forEach(function(a,l){n=typeof t[l]=="object"?o.getVal(t,l,e):t[l],n in s||(r.push(i?t[l]:n),s[n]=1)}),r},o.processData=function(t,e){var i=this.prepareQuery(t),r=new is(e);t.requiresCounts&&i.requiresCount();var n=r.executeLocal(i),s={result:t.requiresCounts?n.result:n,count:n.count,aggregates:JSON.stringify(n.aggregates)};return t.requiresCounts?s:n},o.prepareQuery=function(t){var e=this,i=new Fe;if(t.select&&i.select(t.select),t.where){var r=o.parse.parseJson(t.where);r.filter(function(s){if(d(s.condition))i.where(s.field,s.operator,s.value,s.ignoreCase,s.ignoreAccent);else{var a=[];s.field?a.push(new Et(s.field,s.operator,s.value,s.ignoreCase,s.ignoreAccent)):a=a.concat(e.getPredicate(s.predicates)),s.condition==="or"?i.where(Et.or(a)):s.condition==="and"&&i.where(Et.and(a))}})}if(t.search){var n=o.parse.parseJson(t.search);n.filter(function(s){return i.search(s.key,s.fields,s.operator,s.ignoreCase,s.ignoreAccent)})}return t.aggregates&&t.aggregates.filter(function(s){return i.aggregate(s.type,s.field)}),t.sorted&&t.sorted.filter(function(s){return i.sortBy(s.name,s.direction)}),t.skip&&i.skip(t.skip),t.take&&i.take(t.take),t.group&&t.group.filter(function(s){return i.group(s)}),i},o.getPredicate=function(t){for(var e=[],i=0;i<t.length;i++){var r=t[i];if(r.field)e.push(new Et(r.field,r.operator,r.value,r.ignoreCase,r.ignoreAccent));else{for(var n=[],s=this.getPredicate(r.predicates),a=0,l=Object.keys(s);a<l.length;a++){var h=l[a];n.push(s[h])}e.push(r.condition==="or"?Et.or(n):Et.and(n))}}return e},o.serverTimezoneOffset=null,o.timeZoneHandling=!0,o.throwError=function(t){try{throw new Error(t)}catch(e){throw e.message+`
`+e.stack}},o.aggregates={sum:function(t,e){for(var i=0,r,n=typeof o.getVal(t,0,e)!="number",s=0;s<t.length;s++)r=o.getVal(t,s,e),!isNaN(r)&&r!==null&&(n&&(r=+r),i+=r);return i},average:function(t,e){return o.aggregates.sum(t,e)/t.length},min:function(t,e){var i;return typeof e=="function"&&(i=e,e=null),o.getObject(e,o.getItemFromComparer(t,e,i||o.fnAscending))},max:function(t,e){var i;return typeof e=="function"&&(i=e,e=null),o.getObject(e,o.getItemFromComparer(t,e,i||o.fnDescending))},truecount:function(t,e){return new is(t).executeLocal(new Fe().where(e,"equal",!0,!0)).length},falsecount:function(t,e){return new is(t).executeLocal(new Fe().where(e,"equal",!1,!0)).length},count:function(t,e){return t.length}},o.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},o.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},o.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof",doesnotendwith:"not endswith",doesnotstartwith:"not startswith",doesnotcontain:"not substringof",wildcard:"wildcard",like:"like"},o.odv4UniOperator={"$=":"endswith","^=":"startswith","*=":"contains",endswith:"endswith",startswith:"startswith",contains:"contains",doesnotendwith:"not endswith",doesnotstartwith:"not startswith",doesnotcontain:"not contains",wildcard:"wildcard",like:"like"},o.diacritics={"\u24B6":"A",\uFF21:"A",\u00C0:"A",\u00C1:"A",\u00C2:"A",\u1EA6:"A",\u1EA4:"A",\u1EAA:"A",\u1EA8:"A",\u00C3:"A",\u0100:"A",\u0102:"A",\u1EB0:"A",\u1EAE:"A",\u1EB4:"A",\u1EB2:"A",\u0226:"A",\u01E0:"A",\u00C4:"A",\u01DE:"A",\u1EA2:"A",\u00C5:"A",\u01FA:"A",\u01CD:"A",\u0200:"A",\u0202:"A",\u1EA0:"A",\u1EAC:"A",\u1EB6:"A",\u1E00:"A",\u0104:"A","\u023A":"A","\u2C6F":"A","\uA732":"AA",\u00C6:"AE",\u01FC:"AE",\u01E2:"AE","\uA734":"AO","\uA736":"AU","\uA738":"AV","\uA73A":"AV","\uA73C":"AY","\u24B7":"B",\uFF22:"B",\u1E02:"B",\u1E04:"B",\u1E06:"B","\u0243":"B",\u0182:"B",\u0181:"B","\u24B8":"C",\uFF23:"C",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u00C7:"C",\u1E08:"C",\u0187:"C","\u023B":"C","\uA73E":"C","\u24B9":"D",\uFF24:"D",\u1E0A:"D",\u010E:"D",\u1E0C:"D",\u1E10:"D",\u1E12:"D",\u1E0E:"D",\u0110:"D",\u018B:"D",\u018A:"D",\u0189:"D","\uA779":"D",\u01F1:"DZ",\u01C4:"DZ",\u01F2:"Dz",\u01C5:"Dz","\u24BA":"E",\uFF25:"E",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u1EC0:"E",\u1EBE:"E",\u1EC4:"E",\u1EC2:"E",\u1EBC:"E",\u0112:"E",\u1E14:"E",\u1E16:"E",\u0114:"E",\u0116:"E",\u00CB:"E",\u1EBA:"E",\u011A:"E",\u0204:"E",\u0206:"E",\u1EB8:"E",\u1EC6:"E",\u0228:"E",\u1E1C:"E",\u0118:"E",\u1E18:"E",\u1E1A:"E",\u0190:"E",\u018E:"E","\u24BB":"F",\uFF26:"F",\u1E1E:"F",\u0191:"F","\uA77B":"F","\u24BC":"G",\uFF27:"G",\u01F4:"G",\u011C:"G",\u1E20:"G",\u011E:"G",\u0120:"G",\u01E6:"G",\u0122:"G",\u01E4:"G",\u0193:"G","\uA7A0":"G","\uA77D":"G","\uA77E":"G","\u24BD":"H",\uFF28:"H",\u0124:"H",\u1E22:"H",\u1E26:"H",\u021E:"H",\u1E24:"H",\u1E28:"H",\u1E2A:"H",\u0126:"H","\u2C67":"H","\u2C75":"H","\uA78D":"H","\u24BE":"I",\uFF29:"I",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u0128:"I",\u012A:"I",\u012C:"I",\u0130:"I",\u00CF:"I",\u1E2E:"I",\u1EC8:"I",\u01CF:"I",\u0208:"I",\u020A:"I",\u1ECA:"I",\u012E:"I",\u1E2C:"I",\u0197:"I","\u24BF":"J",\uFF2A:"J",\u0134:"J","\u0248":"J","\u24C0":"K",\uFF2B:"K",\u1E30:"K",\u01E8:"K",\u1E32:"K",\u0136:"K",\u1E34:"K",\u0198:"K","\u2C69":"K","\uA740":"K","\uA742":"K","\uA744":"K","\uA7A2":"K","\u24C1":"L",\uFF2C:"L",\u013F:"L",\u0139:"L",\u013D:"L",\u1E36:"L",\u1E38:"L",\u013B:"L",\u1E3C:"L",\u1E3A:"L",\u0141:"L","\u023D":"L","\u2C62":"L","\u2C60":"L","\uA748":"L","\uA746":"L","\uA780":"L",\u01C7:"LJ",\u01C8:"Lj","\u24C2":"M",\uFF2D:"M",\u1E3E:"M",\u1E40:"M",\u1E42:"M","\u2C6E":"M",\u019C:"M","\u24C3":"N",\uFF2E:"N",\u01F8:"N",\u0143:"N",\u00D1:"N",\u1E44:"N",\u0147:"N",\u1E46:"N",\u0145:"N",\u1E4A:"N",\u1E48:"N","\u0220":"N",\u019D:"N","\uA790":"N","\uA7A4":"N",\u01CA:"NJ",\u01CB:"Nj","\u24C4":"O",\uFF2F:"O",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u1ED2:"O",\u1ED0:"O",\u1ED6:"O",\u1ED4:"O",\u00D5:"O",\u1E4C:"O",\u022C:"O",\u1E4E:"O",\u014C:"O",\u1E50:"O",\u1E52:"O",\u014E:"O",\u022E:"O",\u0230:"O",\u00D6:"O",\u022A:"O",\u1ECE:"O",\u0150:"O",\u01D1:"O",\u020C:"O",\u020E:"O",\u01A0:"O",\u1EDC:"O",\u1EDA:"O",\u1EE0:"O",\u1EDE:"O",\u1EE2:"O",\u1ECC:"O",\u1ED8:"O",\u01EA:"O",\u01EC:"O",\u00D8:"O",\u01FE:"O",\u0186:"O",\u019F:"O","\uA74A":"O","\uA74C":"O",\u01A2:"OI","\uA74E":"OO",\u0222:"OU","\u24C5":"P",\uFF30:"P",\u1E54:"P",\u1E56:"P",\u01A4:"P","\u2C63":"P","\uA750":"P","\uA752":"P","\uA754":"P","\u24C6":"Q",\uFF31:"Q","\uA756":"Q","\uA758":"Q","\u024A":"Q","\u24C7":"R",\uFF32:"R",\u0154:"R",\u1E58:"R",\u0158:"R",\u0210:"R",\u0212:"R",\u1E5A:"R",\u1E5C:"R",\u0156:"R",\u1E5E:"R","\u024C":"R","\u2C64":"R","\uA75A":"R","\uA7A6":"R","\uA782":"R","\u24C8":"S",\uFF33:"S","\u1E9E":"S",\u015A:"S",\u1E64:"S",\u015C:"S",\u1E60:"S",\u0160:"S",\u1E66:"S",\u1E62:"S",\u1E68:"S",\u0218:"S",\u015E:"S","\u2C7E":"S","\uA7A8":"S","\uA784":"S","\u24C9":"T",\uFF34:"T",\u1E6A:"T",\u0164:"T",\u1E6C:"T",\u021A:"T",\u0162:"T",\u1E70:"T",\u1E6E:"T",\u0166:"T",\u01AC:"T",\u01AE:"T","\u023E":"T","\uA786":"T","\uA728":"TZ","\u24CA":"U",\uFF35:"U",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u0168:"U",\u1E78:"U",\u016A:"U",\u1E7A:"U",\u016C:"U",\u00DC:"U",\u01DB:"U",\u01D7:"U",\u01D5:"U",\u01D9:"U",\u1EE6:"U",\u016E:"U",\u0170:"U",\u01D3:"U",\u0214:"U",\u0216:"U",\u01AF:"U",\u1EEA:"U",\u1EE8:"U",\u1EEE:"U",\u1EEC:"U",\u1EF0:"U",\u1EE4:"U",\u1E72:"U",\u0172:"U",\u1E76:"U",\u1E74:"U","\u0244":"U","\u24CB":"V",\uFF36:"V",\u1E7C:"V",\u1E7E:"V",\u01B2:"V","\uA75E":"V","\u0245":"V","\uA760":"VY","\u24CC":"W",\uFF37:"W",\u1E80:"W",\u1E82:"W",\u0174:"W",\u1E86:"W",\u1E84:"W",\u1E88:"W","\u2C72":"W","\u24CD":"X",\uFF38:"X",\u1E8A:"X",\u1E8C:"X","\u24CE":"Y",\uFF39:"Y",\u1EF2:"Y",\u00DD:"Y",\u0176:"Y",\u1EF8:"Y",\u0232:"Y",\u1E8E:"Y",\u0178:"Y",\u1EF6:"Y",\u1EF4:"Y",\u01B3:"Y","\u024E":"Y","\u1EFE":"Y","\u24CF":"Z",\uFF3A:"Z",\u0179:"Z",\u1E90:"Z",\u017B:"Z",\u017D:"Z",\u1E92:"Z",\u1E94:"Z",\u01B5:"Z",\u0224:"Z","\u2C7F":"Z","\u2C6B":"Z","\uA762":"Z","\u24D0":"a",\uFF41:"a",\u1E9A:"a",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u1EA7:"a",\u1EA5:"a",\u1EAB:"a",\u1EA9:"a",\u00E3:"a",\u0101:"a",\u0103:"a",\u1EB1:"a",\u1EAF:"a",\u1EB5:"a",\u1EB3:"a",\u0227:"a",\u01E1:"a",\u00E4:"a",\u01DF:"a",\u1EA3:"a",\u00E5:"a",\u01FB:"a",\u01CE:"a",\u0201:"a",\u0203:"a",\u1EA1:"a",\u1EAD:"a",\u1EB7:"a",\u1E01:"a",\u0105:"a","\u2C65":"a",\u0250:"a","\uA733":"aa",\u00E6:"ae",\u01FD:"ae",\u01E3:"ae","\uA735":"ao","\uA737":"au","\uA739":"av","\uA73B":"av","\uA73D":"ay","\u24D1":"b",\uFF42:"b",\u1E03:"b",\u1E05:"b",\u1E07:"b",\u0180:"b",\u0183:"b",\u0253:"b","\u24D2":"c",\uFF43:"c",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u00E7:"c",\u1E09:"c",\u0188:"c","\u023C":"c","\uA73F":"c","\u2184":"c","\u24D3":"d",\uFF44:"d",\u1E0B:"d",\u010F:"d",\u1E0D:"d",\u1E11:"d",\u1E13:"d",\u1E0F:"d",\u0111:"d",\u018C:"d",\u0256:"d",\u0257:"d","\uA77A":"d",\u01F3:"dz",\u01C6:"dz","\u24D4":"e",\uFF45:"e",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u1EC1:"e",\u1EBF:"e",\u1EC5:"e",\u1EC3:"e",\u1EBD:"e",\u0113:"e",\u1E15:"e",\u1E17:"e",\u0115:"e",\u0117:"e",\u00EB:"e",\u1EBB:"e",\u011B:"e",\u0205:"e",\u0207:"e",\u1EB9:"e",\u1EC7:"e",\u0229:"e",\u1E1D:"e",\u0119:"e",\u1E19:"e",\u1E1B:"e","\u0247":"e",\u025B:"e",\u01DD:"e","\u24D5":"f",\uFF46:"f",\u1E1F:"f",\u0192:"f","\uA77C":"f","\u24D6":"g",\uFF47:"g",\u01F5:"g",\u011D:"g",\u1E21:"g",\u011F:"g",\u0121:"g",\u01E7:"g",\u0123:"g",\u01E5:"g",\u0260:"g","\uA7A1":"g","\u1D79":"g","\uA77F":"g","\u24D7":"h",\uFF48:"h",\u0125:"h",\u1E23:"h",\u1E27:"h",\u021F:"h",\u1E25:"h",\u1E29:"h",\u1E2B:"h",\u1E96:"h",\u0127:"h","\u2C68":"h","\u2C76":"h",\u0265:"h",\u0195:"hv","\u24D8":"i",\uFF49:"i",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u0129:"i",\u012B:"i",\u012D:"i",\u00EF:"i",\u1E2F:"i",\u1EC9:"i",\u01D0:"i",\u0209:"i",\u020B:"i",\u1ECB:"i",\u012F:"i",\u1E2D:"i",\u0268:"i",\u0131:"i","\u24D9":"j",\uFF4A:"j",\u0135:"j",\u01F0:"j","\u0249":"j","\u24DA":"k",\uFF4B:"k",\u1E31:"k",\u01E9:"k",\u1E33:"k",\u0137:"k",\u1E35:"k",\u0199:"k","\u2C6A":"k","\uA741":"k","\uA743":"k","\uA745":"k","\uA7A3":"k","\u24DB":"l",\uFF4C:"l",\u0140:"l",\u013A:"l",\u013E:"l",\u1E37:"l",\u1E39:"l",\u013C:"l",\u1E3D:"l",\u1E3B:"l",\u017F:"l",\u0142:"l",\u019A:"l",\u026B:"l","\u2C61":"l","\uA749":"l","\uA781":"l","\uA747":"l",\u01C9:"lj","\u24DC":"m",\uFF4D:"m",\u1E3F:"m",\u1E41:"m",\u1E43:"m",\u0271:"m",\u026F:"m","\u24DD":"n",\uFF4E:"n",\u01F9:"n",\u0144:"n",\u00F1:"n",\u1E45:"n",\u0148:"n",\u1E47:"n",\u0146:"n",\u1E4B:"n",\u1E49:"n",\u019E:"n",\u0272:"n",\u0149:"n","\uA791":"n","\uA7A5":"n",\u01CC:"nj","\u24DE":"o",\uFF4F:"o",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u1ED3:"o",\u1ED1:"o",\u1ED7:"o",\u1ED5:"o",\u00F5:"o",\u1E4D:"o",\u022D:"o",\u1E4F:"o",\u014D:"o",\u1E51:"o",\u1E53:"o",\u014F:"o",\u022F:"o",\u0231:"o",\u00F6:"o",\u022B:"o",\u1ECF:"o",\u0151:"o",\u01D2:"o",\u020D:"o",\u020F:"o",\u01A1:"o",\u1EDD:"o",\u1EDB:"o",\u1EE1:"o",\u1EDF:"o",\u1EE3:"o",\u1ECD:"o",\u1ED9:"o",\u01EB:"o",\u01ED:"o",\u00F8:"o",\u01FF:"o",\u0254:"o","\uA74B":"o","\uA74D":"o",\u0275:"o",\u01A3:"oi",\u0223:"ou","\uA74F":"oo","\u24DF":"p",\uFF50:"p",\u1E55:"p",\u1E57:"p",\u01A5:"p","\u1D7D":"p","\uA751":"p","\uA753":"p","\uA755":"p","\u24E0":"q",\uFF51:"q","\u024B":"q","\uA757":"q","\uA759":"q","\u24E1":"r",\uFF52:"r",\u0155:"r",\u1E59:"r",\u0159:"r",\u0211:"r",\u0213:"r",\u1E5B:"r",\u1E5D:"r",\u0157:"r",\u1E5F:"r","\u024D":"r",\u027D:"r","\uA75B":"r","\uA7A7":"r","\uA783":"r","\u24E2":"s",\uFF53:"s",\u00DF:"s",\u015B:"s",\u1E65:"s",\u015D:"s",\u1E61:"s",\u0161:"s",\u1E67:"s",\u1E63:"s",\u1E69:"s",\u0219:"s",\u015F:"s","\u023F":"s","\uA7A9":"s","\uA785":"s",\u1E9B:"s","\u24E3":"t",\uFF54:"t",\u1E6B:"t",\u1E97:"t",\u0165:"t",\u1E6D:"t",\u021B:"t",\u0163:"t",\u1E71:"t",\u1E6F:"t",\u0167:"t",\u01AD:"t",\u0288:"t","\u2C66":"t","\uA787":"t","\uA729":"tz","\u24E4":"u",\uFF55:"u",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u0169:"u",\u1E79:"u",\u016B:"u",\u1E7B:"u",\u016D:"u",\u00FC:"u",\u01DC:"u",\u01D8:"u",\u01D6:"u",\u01DA:"u",\u1EE7:"u",\u016F:"u",\u0171:"u",\u01D4:"u",\u0215:"u",\u0217:"u",\u01B0:"u",\u1EEB:"u",\u1EE9:"u",\u1EEF:"u",\u1EED:"u",\u1EF1:"u",\u1EE5:"u",\u1E73:"u",\u0173:"u",\u1E77:"u",\u1E75:"u",\u0289:"u","\u24E5":"v",\uFF56:"v",\u1E7D:"v",\u1E7F:"v",\u028B:"v","\uA75F":"v",\u028C:"v","\uA761":"vy","\u24E6":"w",\uFF57:"w",\u1E81:"w",\u1E83:"w",\u0175:"w",\u1E87:"w",\u1E85:"w",\u1E98:"w",\u1E89:"w","\u2C73":"w","\u24E7":"x",\uFF58:"x",\u1E8B:"x",\u1E8D:"x","\u24E8":"y",\uFF59:"y",\u1EF3:"y",\u00FD:"y",\u0177:"y",\u1EF9:"y",\u0233:"y",\u1E8F:"y",\u00FF:"y",\u1EF7:"y",\u1E99:"y",\u1EF5:"y",\u01B4:"y","\u024F":"y","\u1EFF":"y","\u24E9":"z",\uFF5A:"z",\u017A:"z",\u1E91:"z",\u017C:"z",\u017E:"z",\u1E93:"z",\u1E95:"z",\u01B6:"z",\u0225:"z","\u0240":"z","\u2C6C":"z","\uA763":"z",\u0386:"\u0391",\u0388:"\u0395",\u0389:"\u0397",\u038A:"\u0399",\u03AA:"\u0399",\u038C:"\u039F",\u038E:"\u03A5",\u03AB:"\u03A5",\u038F:"\u03A9",\u03AC:"\u03B1",\u03AD:"\u03B5",\u03AE:"\u03B7",\u03AF:"\u03B9",\u03CA:"\u03B9",\u0390:"\u03B9",\u03CC:"\u03BF",\u03CD:"\u03C5",\u03CB:"\u03C5",\u03B0:"\u03C5",\u03C9:"\u03C9",\u03C2:"\u03C3"},o.fnOperators={equal:function(t,e,i,r){return r&&(t=o.ignoreDiacritics(t),e=o.ignoreDiacritics(e)),i?o.toLowerCase(t)===o.toLowerCase(e):t===e},notequal:function(t,e,i,r){return r&&(t=o.ignoreDiacritics(t),e=o.ignoreDiacritics(e)),!o.fnOperators.equal(t,e,i)},lessthan:function(t,e,i){return i?o.toLowerCase(t)<o.toLowerCase(e):(d(t)&&(t=void 0),t<e)},greaterthan:function(t,e,i){return i?o.toLowerCase(t)>o.toLowerCase(e):t>e},lessthanorequal:function(t,e,i){return i?o.toLowerCase(t)<=o.toLowerCase(e):(d(t)&&(t=void 0),t<=e)},greaterthanorequal:function(t,e,i){return i?o.toLowerCase(t)>=o.toLowerCase(e):t>=e},contains:function(t,e,i,r){return r&&(t=o.ignoreDiacritics(t),e=o.ignoreDiacritics(e)),i?!d(t)&&!d(e)&&o.toLowerCase(t).indexOf(o.toLowerCase(e))!==-1:!d(t)&&!d(e)&&t.toString().indexOf(e)!==-1},doesnotcontain:function(t,e,i,r){return r&&(t=o.ignoreDiacritics(t),e=o.ignoreDiacritics(e)),i?!d(t)&&!d(e)&&o.toLowerCase(t).indexOf(o.toLowerCase(e))===-1:!d(t)&&!d(e)&&t.toString().indexOf(e)===-1},isnotnull:function(t){return t!=null},isnull:function(t){return t==null},startswith:function(t,e,i,r){return r&&(t=o.ignoreDiacritics(t),e=o.ignoreDiacritics(e)),i?t&&e&&o.startsWith(o.toLowerCase(t),o.toLowerCase(e)):t&&e&&o.startsWith(t,e)},doesnotstartwith:function(t,e,i,r){return r&&(t=o.ignoreDiacritics(t),e=o.ignoreDiacritics(e)),i?t&&e&&o.notStartsWith(o.toLowerCase(t),o.toLowerCase(e)):t&&e&&o.notStartsWith(t,e)},like:function(t,e,i,r){return r&&(t=o.ignoreDiacritics(t),e=o.ignoreDiacritics(e)),i?t&&e&&o.like(o.toLowerCase(t),o.toLowerCase(e)):t&&e&&o.like(t,e)},isempty:function(t){return t===void 0||t===""},isnotempty:function(t){return t!==void 0&&t!==""},wildcard:function(t,e,i,r){return r&&(t=o.ignoreDiacritics(t),e=o.ignoreDiacritics(e)),i?(t||typeof t=="boolean")&&e&&typeof t!="object"&&o.wildCard(o.toLowerCase(t),o.toLowerCase(e)):(t||typeof t=="boolean")&&e&&o.wildCard(t,e)},endswith:function(t,e,i,r){return r&&(t=o.ignoreDiacritics(t),e=o.ignoreDiacritics(e)),i?t&&e&&o.endsWith(o.toLowerCase(t),o.toLowerCase(e)):t&&e&&o.endsWith(t,e)},doesnotendwith:function(t,e,i,r){return r&&(t=o.ignoreDiacritics(t),e=o.ignoreDiacritics(e)),i?t&&e&&o.notEndsWith(o.toLowerCase(t),o.toLowerCase(e)):t&&e&&o.notEndsWith(t,e)},processSymbols:function(t){var e=o.operatorSymbols[t];if(e){var i=o.fnOperators[e];return i}return o.throwError("Query - Process Operator : Invalid operator")},processOperator:function(t){var e=o.fnOperators[t];return e||o.fnOperators.processSymbols(t)},in:function(t,e,i,r){return r&&(t=o.ignoreDiacritics(t),e=o.ignoreDiacriticsForArrays(e)),i?!d(t)&&e&&e.length>0&&e.map(function(n){return o.toLowerCase(n)}).indexOf(o.toLowerCase(t))>-1:t instanceof Date?!d(t)&&e&&e.length>0&&Array.isArray(e)&&e.some(function(n){return n instanceof Date&&n.getTime()===t.getTime()}):!d(t)&&e&&e.length>0&&e.indexOf(t)>-1},notin:function(t,e,i,r){return r&&(t=o.ignoreDiacritics(t),e=o.ignoreDiacriticsForArrays(e)),i?!d(t)&&e&&e.length>0&&e.map(function(n){return o.toLowerCase(n)}).indexOf(o.toLowerCase(t))===-1:t instanceof Date?!d(t)&&e&&e.length>0&&Array.isArray(e)&&e.every(function(n){return!(n instanceof Date)||n.getTime()!==t.getTime()}):!d(t)&&e&&e.length>0&&e.indexOf(t)===-1}},o.parse={parseJson:function(t){return typeof t=="string"&&(/^[\s]*\[|^[\s]*\{(.)+:/g.test(t)||t.indexOf('"')===-1)?t=JSON.parse(t,o.parse.jsonReviver):t instanceof Array?o.parse.iterateAndReviveArray(t):typeof t=="object"&&t!==null&&o.parse.iterateAndReviveJson(t),t},iterateAndReviveArray:function(t){for(var e=0;e<t.length;e++)typeof t[e]=="object"&&t[e]!==null?o.parse.iterateAndReviveJson(t[e]):typeof t[e]=="string"&&(!/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(t[e])||t[e].toString().indexOf('"')===-1)?t[e]=o.parse.jsonReviver("",t[e]):t[e]=o.parse.parseJson(t[e])},iterateAndReviveJson:function(t){for(var e,i=Object.keys(t),r=0,n=i;r<n.length;r++){var s=n[r];o.startsWith(s,"__")||(e=t[s],typeof e=="object"?e instanceof Array?o.parse.iterateAndReviveArray(e):e&&o.parse.iterateAndReviveJson(e):t[s]=o.parse.jsonReviver(t[s],e))}},jsonReviver:function(t,e){if(typeof e=="string"){var i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(e),r=o.timeZoneHandling?o.serverTimezoneOffset:null;if(i)return o.dateParse.toTimeZone(new Date(parseInt(i[1],10)),r,!0);if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(e)){var n=e.indexOf("Z")>-1||e.indexOf("z")>-1,s=e.split(/[^0-9.]/);if(n){if(s[5].indexOf(".")>-1){var a=s[5].split(".");s[5]=a[0],s[6]=new Date(e).getUTCMilliseconds().toString()}else s[6]="00";e=o.dateParse.toTimeZone(new Date(parseInt(s[0],10),parseInt(s[1],10)-1,parseInt(s[2],10),parseInt(s[3],10),parseInt(s[4],10),parseInt(s[5]?s[5]:"00",10),parseInt(s[6],10)),o.serverTimezoneOffset,!1)}else{var l=new Date(parseInt(s[0],10),parseInt(s[1],10)-1,parseInt(s[2],10),parseInt(s[3],10),parseInt(s[4],10),parseInt(s[5]?s[5]:"00",10)),h=parseInt(s[6],10),c=parseInt(s[7],10);if(isNaN(h)&&isNaN(c))return l;e.indexOf("+")>-1?l.setHours(l.getHours()-h,l.getMinutes()-c):l.setHours(l.getHours()+h,l.getMinutes()+c),e=o.dateParse.toTimeZone(l,o.serverTimezoneOffset,!1)}o.serverTimezoneOffset==null&&(e=o.dateParse.addSelfOffset(e))}}return e},isJson:function(t){return typeof t[0]=="string"?t:o.parse.parseJson(t)},isGuid:function(t){var e=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i,i=e.exec(t);return i!=null},replacer:function(t,e){return o.isPlainObject(t)?o.parse.jsonReplacer(t,e):t instanceof Array?o.parse.arrayReplacer(t):t instanceof Date?o.parse.jsonReplacer({val:t},e).val:t},jsonReplacer:function(t,e){for(var i,r=Object.keys(t),n=0,s=r;n<s.length;n++){var a=s[n];if(i=t[a],i instanceof Date){var l=i;o.serverTimezoneOffset==null?t[a]=o.dateParse.toTimeZone(l,null).toJSON():(l=new Date(+l+o.serverTimezoneOffset*36e5),t[a]=o.dateParse.toTimeZone(o.dateParse.addSelfOffset(l),null).toJSON())}}return t},arrayReplacer:function(t){for(var e=0;e<t.length;e++)o.isPlainObject(t[e])?t[e]=o.parse.jsonReplacer(t[e]):t[e]instanceof Date&&(t[e]=o.parse.jsonReplacer({date:t[e]}).date);return t},jsonDateReplacer:function(t,e){if(t==="value"&&e){if(typeof e=="string"){var i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(e);if(i)e=o.dateParse.toTimeZone(new Date(parseInt(i[1],10)),null,!0);else if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(e)){var r=e.split(/[^0-9]/);e=o.dateParse.toTimeZone(new Date(parseInt(r[0],10),parseInt(r[1],10)-1,parseInt(r[2],10),parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10)),null,!0)}}if(e instanceof Date)return e=o.dateParse.addSelfOffset(e),o.serverTimezoneOffset===null?o.dateParse.toTimeZone(o.dateParse.addSelfOffset(e),null).toJSON():(e=o.dateParse.toTimeZone(e,e.getTimezoneOffset()/60-o.serverTimezoneOffset,!1),e.toJSON())}return e}},o.dateParse={addSelfOffset:function(t){return new Date(+t-t.getTimezoneOffset()*6e4)},toUTC:function(t){return new Date(+t+t.getTimezoneOffset()*6e4)},toTimeZone:function(t,e,i){if(e===null)return t;var r=i?o.dateParse.toUTC(t):t;return new Date(+r-e*36e5)},toLocalTime:function(t){var e=t,i=-e.getTimezoneOffset(),r=i>=0?"+":"-",n=function(a){var l=Math.floor(Math.abs(a));return(l<10?"0":"")+l},s=e.getFullYear()+"-"+n(e.getMonth()+1)+"-"+n(e.getDate())+"T"+n(e.getHours())+":"+n(e.getMinutes())+":"+n(e.getSeconds())+r+n(i/60)+":"+n(i%60);return s}},o}(),rs=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(t,e)};return function(t,e){o(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),mD={GroupGuid:"{271bbba0-1ee7}"},Hm=function(){function o(t){this.options={from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",expand:"expand"},this.type=o,this.dataSource=t,this.pvt={}}return o.prototype.processResponse=function(t,e,i,r){return t},o}(),Iu=function(o){rs(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.processQuery=function(e,i){for(var r=e.dataSource.json.slice(0),n=r.length,s=!0,a,l,h={},c=0,u=[],p=[],f,g=0;g<i.lazyLoad.length;g++)c++,h[i.lazyLoad[g].key]=i.lazyLoad[g].value;var v={},y=!1;if(i.lazyLoad.length){for(var g=0;g<i.queries.length;g++)if(l=i.queries[g],l.fn==="onGroup"&&!d(l.e.format)){y=!0;break}}for(var g=0;g<i.queries.length;g++){if(l=i.queries[g],(l.fn==="onPage"||l.fn==="onGroup"||l.fn==="onSortBy"&&!y)&&i.lazyLoad.length){l.fn==="onGroup"&&u.push(l.e),l.fn==="onPage"&&(f=l.e),l.fn==="onSortBy"&&p.unshift(l.e);continue}a=this[l.fn].call(this,r,l.e,i),l.fn==="onAggregates"?v[l.e.field+" - "+l.e.type]=a:r=a!==void 0?a:r,(l.fn==="onPage"||l.fn==="onSkip"||l.fn==="onTake"||l.fn==="onRange")&&(s=!1),s&&(n=r.length)}if(c){var C={query:i,lazyLoad:h,result:r,group:u,page:f,sort:p},b=this.lazyLoadGroup(C);r=b.result,n=b.count}return i.isCountRequired&&(r={result:r,count:n,aggregates:v}),r},t.prototype.lazyLoadGroup=function(e){var i=0,r=this.getAggregate(e.query),n=e.result;if(d(e.lazyLoad.onDemandGroupInfo)){var c=e.group[0].fieldName;n=V.group(n,c,r,null,null,e.group[0].comparer,!0),i=n.length;var h=n;if(e.sort.length){var u=e.sort.length>1?e.sort.filter(function(f){return f.fieldName===c})[0]:e.sort[0];n=this.onSortBy(n,u,e.query,!0)}e.page&&(n=this.onPage(n,e.page,e.query)),this.formGroupResult(n,h)}else{for(var s=e.lazyLoad.onDemandGroupInfo,a=s.where.length-1;a>=0;a--)n=this.onWhere(n,s.where[a]);if(e.group.length!==s.level){var l=e.group[s.level].fieldName;n=V.group(n,l,r,null,null,e.group[s.level].comparer,!0),e.sort.length&&(n=this.onSortBy(n,e.sort[parseInt(s.level.toString(),10)],e.query,!0))}else for(var a=e.sort.length-1;a>=s.level;a--)n=this.onSortBy(n,e.sort[parseInt(a.toString(),10)],e.query,!1);i=n.length;var h=n;n=n.slice(s.skip),n=n.slice(0,s.take),e.group.length!==s.level&&this.formGroupResult(n,h)}return{result:n,count:i}},t.prototype.formGroupResult=function(e,i){if(e.length&&i.length){var r="GroupGuid",n="childLevels",s="level",a="records";e[r]=i[r],e[n]=i[n],e[s]=i[s],e[a]=i[a]}return e},t.prototype.getAggregate=function(e){var i=Fe.filterQueries(e.queries,"onAggregates"),r=[];if(i.length)for(var n=void 0,s=0;s<i.length;s++)n=i[s].e,r.push({type:n.type,field:V.getValue(n.field,e)});return r},t.prototype.batchRequest=function(e,i,r){var n,s=i.deletedRecords.length;for(n=0;n<i.addedRecords.length;n++)this.insert(e,i.addedRecords[n]);for(n=0;n<i.changedRecords.length;n++)this.update(e,r.key,i.changedRecords[n]);for(n=0;n<s;n++)this.remove(e,r.key,i.deletedRecords[n]);return i},t.prototype.onWhere=function(e,i){return!e||!e.length?e:e.filter(function(r){if(i)return i.validate(r)})},t.prototype.onAggregates=function(e,i){var r=V.aggregates[i.type];return!e||!r||e.length===0?null:r(e,i.field)},t.prototype.onSearch=function(e,i){return!e||!e.length?e:(i.fieldNames.length===0&&V.getFieldList(e[0],i.fieldNames),e.filter(function(r){for(var n=0;n<i.fieldNames.length;n++)if(i.comparer.call(r,V.getObject(i.fieldNames[n],r),i.searchKey,i.ignoreCase,i.ignoreAccent))return!0;return!1}))},t.prototype.onSortBy=function(e,i,r,n){if(!e||!e.length)return e;var s,a=V.getValue(i.fieldName,r);if(!a)return e.sort(i.comparer);if(a instanceof Array){a=a.slice(0);for(var l=a.length-1;l>=0;l--)a[l]&&(s=i.comparer,V.endsWith(a[l]," desc")&&(s=V.fnSort("descending"),a[l]=a[l].replace(" desc","")),e=V.sort(e,a[l],s));return e}return V.sort(e,n?"key":a,i.comparer)},t.prototype.onGroup=function(e,i,r){if(!e||!e.length)return e;var n=this.getAggregate(r);return V.group(e,V.getValue(i.fieldName,r),n,null,null,i.comparer)},t.prototype.onPage=function(e,i,r){var n=V.getValue(i.pageSize,r),s=(V.getValue(i.pageIndex,r)-1)*n,a=s+n;return!e||!e.length?e:e.slice(s,a)},t.prototype.onRange=function(e,i){return!e||!e.length?e:e.slice(V.getValue(i.start),V.getValue(i.end))},t.prototype.onTake=function(e,i){return!e||!e.length?e:e.slice(0,V.getValue(i.nos))},t.prototype.onSkip=function(e,i){return!e||!e.length?e:e.slice(V.getValue(i.nos))},t.prototype.onSelect=function(e,i){return!e||!e.length?e:V.select(e,V.getValue(i.fieldNames))},t.prototype.insert=function(e,i,r,n,s){return d(s)?e.dataSource.json.push(i):e.dataSource.json.splice(s,0,i)},t.prototype.remove=function(e,i,r,n){var s=e.dataSource.json,a;for(typeof r=="object"&&!(r instanceof Date)&&(r=V.getObject(i,r)),a=0;a<s.length&&V.getObject(i,s[a])!==r;a++);return a!==s.length?s.splice(a,1):null},t.prototype.update=function(e,i,r,n){var s=e.dataSource.json,a,l;for(d(i)||(l=Y(i,r)),a=0;a<s.length&&!(!d(i)&&Y(i,s[a])===l);a++);return a<s.length?Rt(s[a],r):null},t}(Hm),ro=function(o){rs(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.processQuery=function(e,i,r){var n=this.getQueryRequest(i),s=Fe.filterQueryLists(i.queries,["onSelect","onPage","onSkip","onTake","onRange"]),a=i.params,l=e.dataSource.url,h,c,u=null,p=this.options,f={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};"onPage"in s?(h=s.onPage,c=V.getValue(h.pageIndex,i),u=V.getValue(h.pageSize,i),c=(c-1)*u):"onRange"in s&&(h=s.onRange,c=h.start,u=h.end-h.start);for(var g=0;g<n.sorts.length;g++)h=V.getValue(n.sorts[g].e.fieldName,i),f.sorts.push(V.callAdaptorFunction(this,"onEachSort",{name:h,direction:n.sorts[g].e.direction},i));r&&(h=this.getFiltersFrom(r,i),h&&f.filters.push(V.callAdaptorFunction(this,"onEachWhere",h.toJson(),i)));for(var g=0;g<n.filters.length;g++){var v=V.callAdaptorFunction(this,"onEachWhere",n.filters[g].e.toJson(),i);this.getModuleName&&this.getModuleName()==="ODataV4Adaptor"&&!d(n.filters[g].e.key)&&n.filters.length>1&&(v="("+v+")"),f.filters.push(v);for(var y=typeof f.filters[g]=="object"?Object.keys(f.filters[g]):[],C=0,b=y;C<b.length;C++){var M=b[C];V.isNull(f[M])&&delete f[M]}}for(var g=0;g<n.searches.length;g++)h=n.searches[g].e,f.searches.push(V.callAdaptorFunction(this,"onEachSearch",{fields:h.fieldNames,operator:h.operator,key:h.searchKey,ignoreCase:h.ignoreCase,ignoreAccent:h.ignoreAccent},i));for(var g=0;g<n.groups.length;g++)f.groups.push(V.getValue(n.groups[g].e.fieldName,i));for(var g=0;g<n.aggregates.length;g++)h=n.aggregates[g].e,f.aggregates.push({type:h.type,field:V.getValue(h.field,i)});var S={};if(this.getRequestQuery(p,i,s,f,S),V.callAdaptorFunction(this,"addParams",{dm:e,query:i,params:a,reqParams:S}),i.lazyLoad.length)for(var g=0;g<i.lazyLoad.length;g++)S[i.lazyLoad[g].key]=i.lazyLoad[g].value;for(var N=Object.keys(S),x=0,A=N;x<A.length;x++){var M=A[x];(V.isNull(S[M])||S[M]===""||S[M].length===0)&&delete S[M]}!(p.skip in S&&p.take in S)&&u!==null&&(S[p.skip]=V.callAdaptorFunction(this,"onSkip",c,i),S[p.take]=V.callAdaptorFunction(this,"onTake",u,i));var U=this.pvt;return this.pvt={},this.options.requestType==="json"?{data:JSON.stringify(S,V.parse.jsonDateReplacer),url:l,pvtData:U,type:"POST",contentType:"application/json; charset=utf-8"}:(h=this.convertToQueryString(S,i,e),h=(e.dataSource.url.indexOf("?")!==-1?"&":"/")+h,{type:"GET",url:h.length?l.replace(/\/*$/,h):l,pvtData:U})},t.prototype.getRequestQuery=function(e,i,r,n,s){var a="param",l=s;l[e.from]=i.fromTable,e.apply&&i.distincts.length&&(l[e.apply]="onDistinct"in this?V.callAdaptorFunction(this,"onDistinct",i.distincts):""),!i.distincts.length&&e.expand&&(l[e.expand]="onExpand"in this&&"onSelect"in r?V.callAdaptorFunction(this,"onExpand",{selects:V.getValue(r.onSelect.fieldNames,i),expands:i.expands},i):i.expands),l[e.select]="onSelect"in r&&!i.distincts.length?V.callAdaptorFunction(this,"onSelect",V.getValue(r.onSelect.fieldNames,i),i):"",l[e.count]=i.isCountRequired?V.callAdaptorFunction(this,"onCount",i.isCountRequired,i):"",l[e.search]=n.searches.length?V.callAdaptorFunction(this,"onSearch",n.searches,i):"",l[e.skip]="onSkip"in r?V.callAdaptorFunction(this,"onSkip",V.getValue(r.onSkip.nos,i),i):"",l[e.take]="onTake"in r?V.callAdaptorFunction(this,"onTake",V.getValue(r.onTake.nos,i),i):"",l[e.where]=n.filters.length||n.searches.length?V.callAdaptorFunction(this,"onWhere",n.filters,i):"",l[e.sortBy]=n.sorts.length?V.callAdaptorFunction(this,"onSortBy",n.sorts,i):"",l[e.group]=n.groups.length?V.callAdaptorFunction(this,"onGroup",n.groups,i):"",l[e.aggregates]=n.aggregates.length?V.callAdaptorFunction(this,"onAggregates",n.aggregates,i):"",l[a]=[]},t.prototype.convertToQueryString=function(e,i,r){return""},t.prototype.processResponse=function(e,i,r,n,s,a){if(n&&n.headers.get("Content-Type")&&n.headers.get("Content-Type").indexOf("application/json")!==-1){var l=V.timeZoneHandling;i&&!i.timeZoneHandling&&(V.timeZoneHandling=!1),i.enableCache||(e=V.parse.parseJson(e)),V.timeZoneHandling=l}var h=s,c=h.pvtData||{},u=e?e.groupDs:[];if(n&&n.headers.get("Content-Type")&&n.headers.get("Content-Type").indexOf("xml")!==-1)return r.isCountRequired?{result:[],count:0}:[];var p=JSON.parse(h.data);if(p&&p.action==="batch"&&e&&e.addedRecords&&!d(a))return a.addedRecords=e.addedRecords,a;e&&e.d&&(e=e.d);var f={};e&&"count"in e&&(f.count=e.count),f.result=e&&e.result?e.result:e;var g=!1;if(Array.isArray(e.result)&&e.result.length){var v="key",y="value",C="level";if(d(e.result[0][v])||(f.result=this.formRemoteGroupedData(f.result,1,c.groups.length-1)),r&&r.lazyLoad.length&&c.groups.length){for(var b=0;b<r.lazyLoad.length;b++)if(r.lazyLoad[b][v]==="onDemandGroupInfo"){var M=r.lazyLoad[b][y][C];c.groups.length===M&&(g=!0)}}}return g||this.getAggregateResult(c,e,f,u,r),V.isNull(f.count)?f.result:{result:f.result,count:f.count,aggregates:f.aggregates}},t.prototype.formRemoteGroupedData=function(e,i,r){for(var n=0;n<e.length;n++)e[n].items.length&&Object.keys(e[n].items[0]).indexOf("key")>-1&&this.formRemoteGroupedData(e[n].items,i+1,r-1);var s="GroupGuid",a="childLevels",l="level",h="records";return e[s]=mD[s],e[l]=i,e[a]=r,e[h]=e[0].items.length?this.getGroupedRecords(e,!d(e[0].items[h])):[],e},t.prototype.getGroupedRecords=function(e,i){for(var r=[],n="records",s=0;s<e.length;s++)if(i)r=r.concat(e[s].items[n]);else for(var a=0;a<e[s].items.length;a++)r.push(e[s].items[a]);return r},t.prototype.onGroup=function(e){return this.pvt.groups=e,e},t.prototype.onAggregates=function(e){this.pvt.aggregates=e},t.prototype.batchRequest=function(e,i,r,n,s){var a,l;return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(m({},{changed:i.changedRecords,added:i.addedRecords,deleted:i.deletedRecords,action:"batch",table:r[a],key:r[l]},V.getAddParams(this,e,n)))}},t.prototype.beforeSend=function(e,i,r){},t.prototype.insert=function(e,i,r,n){return{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(m({},{value:i,table:r,action:"insert"},V.getAddParams(this,e,n)))}},t.prototype.remove=function(e,i,r,n,s){return{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(m({},{key:r,keyColumn:i,table:n,action:"remove"},V.getAddParams(this,e,s)))}},t.prototype.update=function(e,i,r,n,s){return{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(m({},{value:r,action:"update",keyColumn:i,key:V.getObject(i,r),table:n},V.getAddParams(this,e,s)))}},t.prototype.getFiltersFrom=function(e,i){var r=i.fKey,n,s=r,a=i.key,l=[];typeof e[0]!="object"&&(s=null);for(var h=0;h<e.length;h++)typeof e[0]=="object"?n=V.getObject(a||s,e[h]):n=e[h],l.push(new Et(r,"equal",n));return Et.or(l)},t.prototype.getAggregateResult=function(e,i,r,n,s){var a=i;if(i&&i.result&&(a=i.result),e&&e.aggregates&&e.aggregates.length){var l=e.aggregates,h=void 0,c=a,u={};i.aggregate&&(c=i.aggregate);for(var p=0;p<l.length;p++)h=V.aggregates[l[p].type],h&&(u[l[p].field+" - "+l[p].type]=h(c,l[p].field));r.aggregates=u}var f="key",g=Array.isArray(i.result)&&i.result.length&&!d(i.result[0][f]);if(e&&e.groups&&e.groups.length&&!g){for(var v=e.groups,p=0;p<v.length;p++){var y=null;d(n)||(n=V.group(n,v[p]));var C=Fe.filterQueries(s.queries,"onGroup")[p].e;a=V.group(a,v[p],e.aggregates,y,n,C.comparer)}r.result=a}return r},t.prototype.getQueryRequest=function(e){var i={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return i.sorts=Fe.filterQueries(e.queries,"onSortBy"),i.groups=Fe.filterQueries(e.queries,"onGroup"),i.filters=Fe.filterQueries(e.queries,"onWhere"),i.searches=Fe.filterQueries(e.queries,"onSearch"),i.aggregates=Fe.filterQueries(e.queries,"onAggregates"),i},t.prototype.addParams=function(e){var i=e.reqParams;e.params.length&&(i.params={});for(var r=0,n=e.params;r<n.length;r++){var s=n[r];if(i[s.key])throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");i[s.key]=s.value,s.fn&&(i[s.key]=s.fn.call(e.query,s.key,e.query,e.dm)),i.params[s.key]=i[s.key]}},t}(Hm),Mu=function(o){rs(t,o);function t(e){var i=o.call(this)||this;return i.options=m({},i.options,{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:`Content-Type: application/http
Content-Transfer-Encoding: binary `,batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PUT"}),m(i.options,e||{}),i}return t.prototype.getModuleName=function(){return"ODataAdaptor"},t.prototype.onPredicate=function(e,i,r){var n="",s,a,l=e.value,h=typeof l,c=e.field?t.getField(e.field):null;if(l instanceof Date&&(l="datetime'"+V.parse.replacer(l)+"'"),h==="string"&&(l=l.replace(/'/g,"''"),e.ignoreCase&&(l=l.toLowerCase()),e.operator!=="like"&&(l=encodeURIComponent(l)),e.operator!=="wildcard"&&e.operator!=="like"&&(l="'"+l+"'"),r&&(c="cast("+c+", 'Edm.String')"),V.parse.isGuid(l)&&(a="guid"),e.ignoreCase&&(a||(c="tolower("+c+")"),l=l.toLowerCase())),e.operator==="isempty"||e.operator==="isnull"||e.operator==="isnotempty"||e.operator==="isnotnull"?(s=e.operator.indexOf("isnot")!==-1?V.odBiOperator.notequal:V.odBiOperator.equal,l=e.operator==="isnull"||e.operator==="isnotnull"?null:"''"):s=V.odBiOperator[e.operator],s)return n+=c,n+=s,a&&(n+=a),n+l;if(!d(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?s=V.odv4UniOperator[e.operator]:s=V.odUniOperator[e.operator],s==="like")l=l,l.indexOf("%")!==-1&&(l.charAt(0)==="%"&&l.lastIndexOf("%")<2?(l=l.substring(1,l.length),s=!d(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?V.odv4UniOperator.startswith:V.odUniOperator.startswith):l.charAt(l.length-1)==="%"&&l.indexOf("%")>l.length-3?(l=l.substring(0,l.length-1),s=!d(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?V.odv4UniOperator.endswith:V.odUniOperator.endswith):l.lastIndexOf("%")!==l.indexOf("%")&&l.lastIndexOf("%")>l.indexOf("%")+1?(l=l.substring(l.indexOf("%")+1,l.lastIndexOf("%")),s=!d(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?V.odv4UniOperator.contains:V.odUniOperator.contains):s=!d(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?V.odv4UniOperator.contains:V.odUniOperator.contains),l=encodeURIComponent(l),l="'"+l+"'";else if(s==="wildcard")if(l=l,l.indexOf("*")!==-1){var u=l.split("*"),p=void 0,f=0;if(l.indexOf("*")!==0&&u[0].indexOf("%3f")===-1&&u[0].indexOf("?")===-1&&(p=u[0],p="'"+p+"'",s=!d(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?V.odv4UniOperator.startswith:V.odUniOperator.startswith,n+=s+"(",n+=c+",",a&&(n+=a),n+=p+")",f++),l.lastIndexOf("*")!==l.length-1&&u[u.length-1].indexOf("%3f")===-1&&u[u.length-1].indexOf("?")===-1&&(p=u[u.length-1],p="'"+p+"'",s=!d(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?V.odv4UniOperator.endswith:V.odUniOperator.endswith,f>0&&(n+=" and "),n+=s+"(",n+=c+",",a&&(n+=a),n+=p+")",f++),u.length>2){for(var g=1;g<u.length-1;g++)if(u[g].indexOf("%3f")===-1&&u[g].indexOf("?")===-1){if(p=u[g],p="'"+p+"'",s=!d(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?V.odv4UniOperator.contains:V.odUniOperator.contains,f>0&&(n+=" and "),s==="substringof"||s==="not substringof"){var v=p;p=c,c=v}n+=s+"(",n+=c+",",a&&(n+=a),n+=p+")",f++}}f===0?(s=!d(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?V.odv4UniOperator.contains:V.odUniOperator.contains,(l.indexOf("?")!==-1||l.indexOf("%3f")!==-1)&&(l=l.indexOf("?")!==-1?l.split("?").join(""):l.split("%3f").join("")),l="'"+l+"'"):s="wildcard"}else s=!d(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?V.odv4UniOperator.contains:V.odUniOperator.contains,(l.indexOf("?")!==-1||l.indexOf("%3f")!==-1)&&(l=l.indexOf("?")!==-1?l.split("?").join(""):l.split("%3f").join("")),l="'"+l+"'";if(s==="substringof"||s==="not substringof"){var v=l;l=c,c=v}return s!=="wildcard"&&(n+=s+"(",n+=c+",",a&&(n+=a),n+=l+")"),n},t.prototype.addParams=function(e){o.prototype.addParams.call(this,e),delete e.reqParams.params},t.prototype.onComplexPredicate=function(e,i,r){for(var n=[],s=0;s<e.predicates.length;s++)n.push("("+this.onEachWhere(e.predicates[s],i,r)+")");return n.join(" "+e.condition+" ")},t.prototype.onEachWhere=function(e,i,r){return e.isComplex?this.onComplexPredicate(e,i,r):this.onPredicate(e,i,r)},t.prototype.onWhere=function(e){return this.pvt.search&&e.push(this.onEachWhere(this.pvt.search,null,!0)),e.join(" and ")},t.prototype.onEachSearch=function(e){e.fields&&e.fields.length===0&&V.throwError("Query() - Search : oData search requires list of field names to search");for(var i=this.pvt.search||[],r=0;r<e.fields.length;r++)i.push(new Et(e.fields[r],e.operator,e.key,e.ignoreCase));this.pvt.search=i},t.prototype.onSearch=function(e){return this.pvt.search=Et.or(this.pvt.search),""},t.prototype.onEachSort=function(e){var i=[];if(e.name instanceof Array)for(var r=0;r<e.name.length;r++)i.push(t.getField(e.name[r])+(e.direction==="descending"?" desc":""));else i.push(t.getField(e.name)+(e.direction==="descending"?" desc":""));return i.join(",")},t.prototype.onSortBy=function(e){return e.reverse().join(",")},t.prototype.onGroup=function(e){return this.pvt.groups=e,[]},t.prototype.onSelect=function(e){for(var i=0;i<e.length;i++)e[i]=t.getField(e[i]);return e.join(",")},t.prototype.onAggregates=function(e){return this.pvt.aggregates=e,""},t.prototype.onCount=function(e){return e===!0?"allpages":""},t.prototype.beforeSend=function(e,i,r){V.endsWith(r.url,this.options.batch)&&r.type.toLowerCase()==="post"?(i.headers.set("Accept",this.options.multipartAccept),i.headers.set("DataServiceVersion","2.0")):i.headers.set("Accept",this.options.accept),i.headers.set("DataServiceVersion","2.0"),i.headers.set("MaxDataServiceVersion","2.0")},t.prototype.processResponse=function(e,i,r,n,s,a){var l="odata.metadata";if(s&&s.type==="GET"&&!this.rootUrl&&e[l]){var h=e[l].split("/$metadata#");this.rootUrl=h[0],this.resourceTableName=h[1]}var c="pvtData";if(!d(e.d)){var u=r&&r.isCountRequired?e.d.results:e.d,p="__metadata";if(!d(u))for(var f=0;f<u.length;f++)d(u[f][p])||delete u[f][p]}var g=s&&s[c],v=this.processBatchResponse(e,r,n,s,a);if(v)return v;var y=n&&s.fetchRequest.headers.get("DataServiceVersion"),C=null,b=y&&parseInt(y,10)||2;if(r&&r.isCountRequired){var M="__count";(e[M]||e["odata.count"])&&(C=e[M]||e["odata.count"]),e.d&&(e=e.d),(e[M]||e["odata.count"])&&(C=e[M]||e["odata.count"])}b===3&&e.value&&(e=e.value),e.d&&(e=e.d),b<3&&e.results&&(e=e.results);var S={};return S.count=C,S.result=e,this.getAggregateResult(g,e,S,null,r),V.isNull(C)?S.result:{result:S.result,count:S.count,aggregates:S.aggregates}},t.prototype.convertToQueryString=function(e,i,r){var n=[],s="table",a=e[s]||"",l="$format";delete e[s],r.dataSource.requiresFormat&&(e[l]="json");for(var h=Object.keys(e),c=0,u=h;c<u.length;c++){var p=u[c];n.push(p+"="+e[p])}return n=n.join("&"),r.dataSource.url&&r.dataSource.url.indexOf("?")!==-1&&!a?n:n.length?a+"?"+n:a||""},t.prototype.localTimeReplacer=function(e,i){for(var r=0,n=d(i)?[]:Object.keys(i);r<n.length;r++){var s=n[r];i[s]instanceof Date&&(i[s]=V.dateParse.toLocalTime(i[s]))}return i},t.prototype.insert=function(e,i,r){return{url:(e.dataSource.insertUrl||e.dataSource.url).replace(/\/*$/,r?"/"+r:""),data:JSON.stringify(i,this.options.localTime?this.localTimeReplacer:null)}},t.prototype.remove=function(e,i,r,n){var s;return typeof r=="string"&&!V.parse.isGuid(r)?s="('"+r+"')":s="("+r+")",{type:"DELETE",url:(e.dataSource.removeUrl||e.dataSource.url).replace(/\/*$/,n?"/"+n:"")+s}},t.prototype.update=function(e,i,r,n,s,a){this.options.updateType==="PATCH"&&!d(a)&&(r=this.compareAndRemove(r,a,i));var l;return typeof r[i]=="string"&&!V.parse.isGuid(r[i])?l="('"+r[i]+"')":l="("+r[i]+")",{type:this.options.updateType,url:(e.dataSource.updateUrl||e.dataSource.url).replace(/\/*$/,n?"/"+n:"")+l,data:JSON.stringify(r,this.options.localTime?this.localTimeReplacer:null),accept:this.options.accept}},t.prototype.batchRequest=function(e,i,r,n,s){var a=r.guid=V.getGuid(this.options.batchPre),l=e.dataSource.batchUrl||this.rootUrl?(e.dataSource.batchUrl||this.rootUrl)+"/"+this.options.batch:(e.dataSource.batchUrl||e.dataSource.url).replace(/\/*$/,"/"+this.options.batch);r.url=this.resourceTableName?this.resourceTableName:r.url;var h={url:r.url,key:r.key,cid:1,cSet:V.getGuid(this.options.changeSet)},c="--"+a+`
`;return c+="Content-Type: multipart/mixed; boundary="+h.cSet.replace("--","")+`
`,this.pvt.changeSet=0,c+=this.generateInsertRequest(i.addedRecords,h,e),c+=this.generateUpdateRequest(i.changedRecords,h,e,s?s.changedRecords:[]),c+=this.generateDeleteRequest(i.deletedRecords,h,e),c+=h.cSet+`--
`,c+="--"+a+"--",{type:"POST",url:l,dataType:"json",contentType:"multipart/mixed; charset=UTF-8;boundary="+a,data:c}},t.prototype.generateDeleteRequest=function(e,i,r){if(!e)return"";var n="",s={method:"DELETE ",url:function(a,l,h){var c=V.getObject(h,a[l]);if(typeof c=="number"||V.parse.isGuid(c))return"("+c+")";if(c instanceof Date){var u=a[l][h];return"("+u.toJSON()+")"}else return"('"+c+"')"},data:function(a,l){return""}};return n=this.generateBodyContent(e,i,s,r),n+`
`},t.prototype.generateInsertRequest=function(e,i,r){if(!e)return"";var n="",s={method:"POST ",url:function(a,l,h){return""},data:function(a,l){return JSON.stringify(a[l])+`

`}};return n=this.generateBodyContent(e,i,s,r),n},t.prototype.generateUpdateRequest=function(e,i,r,n){var s=this;if(!e)return"";var a="";e.forEach(function(h){return h=s.compareAndRemove(h,n.filter(function(c){return V.getObject(i.key,c)===V.getObject(i.key,h)})[0],i.key)});var l={method:this.options.updateType+" ",url:function(h,c,u){if(typeof h[c][u]=="number"||V.parse.isGuid(h[c][u]))return"("+h[c][u]+")";if(h[c][u]instanceof Date){var p=h[c][u];return"("+p.toJSON()+")"}else return"('"+h[c][u]+"')"},data:function(h,c){return JSON.stringify(h[c])+`

`}};return a=this.generateBodyContent(e,i,l,r),a},t.getField=function(e){return e.replace(/\./g,"/")},t.prototype.generateBodyContent=function(e,i,r,n){for(var s="",a=0;a<e.length;a++)s+=`
`+i.cSet+`
`,s+=this.options.changeSetContent+`

`,s+=r.method,r.method==="POST "?s+=(n.dataSource.insertUrl||n.dataSource.crudUrl||i.url)+r.url(e,a,i.key)+` HTTP/1.1
`:r.method==="PUT "||r.method==="PATCH "?s+=(n.dataSource.updateUrl||n.dataSource.crudUrl||i.url)+r.url(e,a,i.key)+` HTTP/1.1
`:r.method==="DELETE "&&(s+=(n.dataSource.removeUrl||n.dataSource.crudUrl||i.url)+r.url(e,a,i.key)+` HTTP/1.1
`),s+="Accept: "+this.options.accept+`
`,s+="Content-Id: "+this.pvt.changeSet+++`
`,s+=this.options.batchChangeSetContentType+`
`,d(e[a]["@odata.etag"])?s+=`
`:(s+="If-Match: "+e[a]["@odata.etag"]+`

`,delete e[a]["@odata.etag"]),s+=r.data(e,a);return s},t.prototype.processBatchResponse=function(e,i,r,n,s){if(r&&r.headers.get("Content-Type")&&r.headers.get("Content-Type").indexOf("xml")!==-1)return i.isCountRequired?{result:[],count:0}:[];if(n&&this.options.batch&&V.endsWith(n.url,this.options.batch)&&n.type.toLowerCase()==="post"){var a=r.headers.get("Content-Type"),l=void 0,h=void 0,c=e+"";if(a=a.substring(a.indexOf("=batchresponse")+1),c=c.split(a),c.length<2)return{};c=c[1];var u=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(c);u&&c.replace(u[0],"");var p=u?u[1]:"";c=c.split(p);for(var f=c.length;f>-1;f--)!/\bContent-ID:/i.test(c[f])||!/\bHTTP.+201/.test(c[f])||(l=parseInt(/\bContent-ID: (\d+)/i.exec(c[f])[1],10),s.addedRecords[l]&&(h=V.parse.parseJson(/^\{.+\}/m.exec(c[f])[0]),m({},s.addedRecords[l],this.processResponse(h))));return s}return null},t.prototype.compareAndRemove=function(e,i,r){var n=this;return d(i)||Object.keys(e).forEach(function(s){if(s!==r&&s!=="@odata.etag")if(V.isPlainObject(e[s])){n.compareAndRemove(e[s],i[s]);var a=Object.keys(e[s]).filter(function(l){return l!=="@odata.etag"});a.length===0&&delete e[s]}else(e[s]===i[s]||e[s]&&i[s]&&e[s].valueOf()===i[s].valueOf())&&delete e[s]}),e},t}(ro);var yD=function(o){rs(t,o);function t(){var e=o.call(this)||this;return ve("beforeSend",ro.prototype.beforeSend,e),e}return t.prototype.insert=function(e,i,r,n,s){return this.pvt.position=s,this.updateType="add",{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(m({},{value:i,table:r,action:"insert"},V.getAddParams(this,e,n)))}},t.prototype.remove=function(e,i,r,n,s){return o.prototype.remove.call(this,e,i,r),{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(m({},{key:r,keyColumn:i,table:n,action:"remove"},V.getAddParams(this,e,s)))}},t.prototype.update=function(e,i,r,n,s){return this.updateType="update",this.updateKey=i,{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(m({},{value:r,action:"update",keyColumn:i,key:r[i],table:n},V.getAddParams(this,e,s)))}},t.prototype.processResponse=function(e,i,r,n,s,a,l){var h,c=s?JSON.parse(s.data):e;if(e=c.action==="batch"?V.parse.parseJson(e):e,this.updateType==="add"&&o.prototype.insert.call(this,i,e,null,null,this.pvt.position),this.updateType==="update"&&o.prototype.update.call(this,i,this.updateKey,e),this.updateType=void 0,e.added)for(h=0;h<e.added.length;h++)o.prototype.insert.call(this,i,e.added[h]);if(e.changed)for(h=0;h<e.changed.length;h++)o.prototype.update.call(this,i,l.key,e.changed[h]);if(e.deleted)for(h=0;h<e.deleted.length;h++)o.prototype.remove.call(this,i,l.key,e.deleted[h]);return e},t.prototype.batchRequest=function(e,i,r,n,s){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(m({},{changed:i.changedRecords,added:i.addedRecords,deleted:i.deletedRecords,action:"batch",table:r.url,key:r.key},V.getAddParams(this,e,n)))}},t.prototype.addParams=function(e){var i=new ro;i.addParams(e)},t}(Iu),CD=function(o){rs(t,o);function t(e){var i=o.call(this)||this;return i.options=m({},i.options,{getData:function(){},addRecord:function(){},updateRecord:function(){},deleteRecord:function(){},batchUpdate:function(){}}),m(i.options,e||{}),i}return t.prototype.getModuleName=function(){return"CustomDataAdaptor"},t}(ro);var bD=function(o){rs(t,o);function t(e,i,r){var n=o.call(this)||this;n.isCrudAction=!1,n.isInsertAction=!1,d(e)||(n.cacheAdaptor=e),n.pageSize=r,n.guidId=V.getGuid("cacheAdaptor");var s={keys:[],results:[]};window.localStorage.setItem(n.guidId,JSON.stringify(s));var a=n.guidId;return d(i)||setInterval(function(){for(var l=V.parse.parseJson(window.localStorage.getItem(a)),h=[],c=0;c<l.results.length;c++){var u=+new Date,p=+new Date(l.results[c].timeStamp);l.results[c].timeStamp=u-p,u-p>i&&h.push(c)}for(var c=0;c<h.length;c++)l.results.splice(h[c],1),l.keys.splice(h[c],1);window.localStorage.removeItem(a),window.localStorage.setItem(a,JSON.stringify(l))},i),n}return t.prototype.generateKey=function(e,i){var r=this.getQueryRequest(i),n=Fe.filterQueryLists(i.queries,["onSelect","onPage","onSkip","onTake","onRange"]),s=e,a="onPage";a in n&&(s+=n[a].pageIndex),r.sorts.forEach(function(p){s+=p.e.direction+p.e.fieldName}),r.groups.forEach(function(p){s+=p.e.fieldName}),r.searches.forEach(function(p){s+=p.e.searchKey});for(var l=0;l<r.filters.length;l++){var h=r.filters[l];if(h.e.isComplex){var c=i.clone();c.queries=[];for(var u=0;u<h.e.predicates.length;u++)c.queries.push({fn:"onWhere",e:h.e.predicates[u],filter:i.queries.filter});s+=h.e.condition+this.generateKey(e,c)}else s+=h.e.field+h.e.operator+h.e.value}return s},t.prototype.processQuery=function(e,i,r){var n=this.generateKey(e.dataSource.url,i),s=V.parse.parseJson(window.localStorage.getItem(this.guidId)),a=s?s.results[s.keys.indexOf(n)]:null;return a!=null&&!this.isCrudAction&&!this.isInsertAction?a:(this.isCrudAction=null,this.isInsertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0)))},t.prototype.processResponse=function(e,i,r,n,s,a){if(this.isInsertAction||s&&this.cacheAdaptor.options.batch&&V.endsWith(s.url,this.cacheAdaptor.options.batch)&&s.type.toLowerCase()==="post")return this.cacheAdaptor.processResponse(e,i,r,n,s,a);e=this.cacheAdaptor.processResponse.apply(this.cacheAdaptor,[].slice.call(arguments,0));var l=r?this.generateKey(i.dataSource.url,r):i.dataSource.url,h={};h=V.parse.parseJson(window.localStorage.getItem(this.guidId));var c=h.keys.indexOf(l);for(c!==-1&&(h.results.splice(c,1),h.keys.splice(c,1)),h.results[h.keys.push(l)-1]={keys:l,result:e.result,timeStamp:new Date,count:e.count};h.results.length>this.pageSize;)h.results.splice(0,1),h.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(h)),e},t.prototype.beforeSend=function(e,i,r){!d(this.cacheAdaptor.options.batch)&&V.endsWith(r.url,this.cacheAdaptor.options.batch)&&r.type.toLowerCase()==="post"&&i.headers.set("Accept",this.cacheAdaptor.options.multipartAccept),e.dataSource.crossDomain||i.headers.set("Accept",this.cacheAdaptor.options.accept)},t.prototype.update=function(e,i,r,n){return this.isCrudAction=!0,this.cacheAdaptor.update(e,i,r,n)},t.prototype.insert=function(e,i,r){return this.isInsertAction=!0,this.cacheAdaptor.insert(e,i,r)},t.prototype.remove=function(e,i,r,n){return this.isCrudAction=!0,this.cacheAdaptor.remove(e,i,r,n)},t.prototype.batchRequest=function(e,i,r){return this.cacheAdaptor.batchRequest(e,i,r)},t}(ro),Va=function(o,t,e,i){return new(e||(e=Promise))(function(r,n){function s(h){try{l(i.next(h))}catch(c){n(c)}}function a(h){try{l(i.throw(h))}catch(c){n(c)}}function l(h){h.done?r(h.value):new e(function(c){c(h.value)}).then(s,a)}l((i=i.apply(o,t||[])).next())})},Qa=function(o,t){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,r,n,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(h){return function(c){return l([h,c])}}function l(h){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,r&&(n=h[0]&2?r.return:h[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,h[1])).done)return n;switch(r=0,n&&(h=[h[0]&2,n.value]),h[0]){case 0:case 1:n=h;break;case 4:return e.label++,{value:h[1],done:!1};case 5:e.label++,r=h[1],h=[0];continue;case 7:h=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(h[0]===6||h[0]===2)){e=0;continue}if(h[0]===3&&(!n||h[1]>n[0]&&h[1]<n[3])){e.label=h[1];break}if(h[0]===6&&e.label<n[1]){e.label=n[1],n=h;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(h);break}n[2]&&e.ops.pop(),e.trys.pop();continue}h=t.call(o,e)}catch(c){h=[6,c],r=0}finally{i=n=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},is=function(){function o(t,e,i){var r=this;this.dateParse=!0,this.timeZoneHandling=!0,this.persistQuery={},this.isInitialLoad=!1,this.requests=[],this.isEnableCache=!1,this.isInitialLoad=!0,this.isEnableCache=!1,!t&&!this.dataSource&&(t=[]),i=i||t.adaptor,t&&t.timeZoneHandling===!1&&(this.timeZoneHandling=t.timeZoneHandling);var n;if(t instanceof Array?n={json:t,offline:!0}:typeof t=="object"?(t.json||(t.json=[]),t.enablePersistence||(t.enablePersistence=!1),t.id||(t.id=""),t.ignoreOnPersist||(t.ignoreOnPersist=[]),n={url:t.url,insertUrl:t.insertUrl,removeUrl:t.removeUrl,updateUrl:t.updateUrl,crudUrl:t.crudUrl,batchUrl:t.batchUrl,json:t.json,headers:t.headers,accept:t.accept,data:t.data,enableCache:t.enableCache,timeTillExpiration:t.timeTillExpiration,cachingPageSize:t.cachingPageSize,enableCaching:t.enableCaching,requestType:t.requestType,key:t.key,crossDomain:t.crossDomain,jsonp:t.jsonp,dataType:t.dataType,offline:t.offline!==void 0?t.offline:t.adaptor instanceof yD||t.adaptor instanceof CD?!1:!t.url,requiresFormat:t.requiresFormat,enablePersistence:t.enablePersistence,id:t.id,ignoreOnPersist:t.ignoreOnPersist}):V.throwError("DataManager: Invalid arguments"),n.requiresFormat===void 0&&!V.isCors()&&(n.requiresFormat=d(n.crossDomain)?!0:n.crossDomain),n.dataType===void 0&&(n.dataType="json"),this.isEnableCache=n.enableCache,this.dataSource=n,this.defaultQuery=e,this.dataSource.enablePersistence&&this.dataSource.id&&window.addEventListener("unload",this.setPersistData.bind(this)),n.url&&n.offline&&!n.json.length?(this.isDataAvailable=!1,this.adaptor=i||new Mu,this.dataSource.offline=!1,this.ready=this.executeQuery(e||new Fe),this.ready.then(function(a){r.dataSource.offline=!0,r.isDataAvailable=!0,n.json=a.result,r.adaptor=new Iu})):this.adaptor=n.offline?new Iu:new Mu,!n.jsonp&&this.adaptor instanceof Mu&&(n.jsonp="callback"),this.adaptor=i||this.adaptor,this.isEnableCache){this.guidId=V.getGuid("cacheAdaptor");var s={keys:[],results:[]};window.localStorage.setItem(this.guidId,JSON.stringify(s))}return n.enableCaching&&(this.adaptor=new bD(this.adaptor,n.timeTillExpiration,n.cachingPageSize)),this}return Object.defineProperty(o.prototype,"moduleName",{get:function(){return"datamanager"},enumerable:!0,configurable:!0}),o.prototype.getPersistedData=function(t){var e=localStorage.getItem(t||this.dataSource.id);return JSON.parse(e)},o.prototype.setPersistData=function(t,e,i){localStorage.setItem(e||this.dataSource.id,JSON.stringify(i||this.persistQuery))},o.prototype.setPersistQuery=function(t){var e=this,i=this.getPersistedData();if(this.isInitialLoad&&i&&Object.keys(i).length){this.persistQuery=i,this.persistQuery.queries=this.persistQuery.queries.filter(function(n){if(e.dataSource.ignoreOnPersist&&e.dataSource.ignoreOnPersist.length&&n.fn&&e.dataSource.ignoreOnPersist.some(function(l){return n.fn===l}))return!1;if(n.fn==="onWhere"){var s=n.e;if(s&&s.isComplex&&s.predicates instanceof Array){var a=s.predicates.map(function(l){if(l.predicates&&l.predicates instanceof Array){var h=l.predicates.map(function(y){var C=y.field,b=y.operator,M=y.value,S=y.ignoreCase,N=y.ignoreAccent,x=y.matchCase;return new Et(C,b,M,S,N,x)});return l.condition==="and"?Et.and(h):Et.or(h)}else{var c=l.field,u=l.operator,p=l.value,f=l.ignoreCase,g=l.ignoreAccent,v=l.matchCase;return new Et(c,u,p,f,g,v)}});n.e=new Et(a[0],s.condition,a.slice(1))}}return!0});var r=m(new Fe,this.persistQuery);return this.isInitialLoad=!1,r}else return this.persistQuery=t,this.isInitialLoad=!1,t},o.prototype.setDefaultQuery=function(t){return this.defaultQuery=t,this},o.prototype.executeLocal=function(t){!this.defaultQuery&&!(t instanceof Fe)&&V.throwError("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||V.throwError("DataManager - executeLocal() : Json data is required to execute"),this.dataSource.enablePersistence&&this.dataSource.id&&(t=this.setPersistQuery(t)),t=t||this.defaultQuery;var e=this.adaptor.processQuery(this,t);if(t.subQuery){var i=t.subQuery.fromTable,r=t.subQuery.lookups,n=t.isCountRequired?e.result:e;r&&r instanceof Array&&V.buildHierarchy(t.subQuery.fKey,i,n,r,t.subQuery.key);for(var s=0;s<n.length;s++)n[s][i]instanceof Array&&(n[s]=m({},{},n[s]),n[s][i]=this.adaptor.processResponse(t.subQuery.using(new o(n[s][i].slice(0))).executeLocal(),this,t))}return this.adaptor.processResponse(e,this,t)},o.prototype.executeQuery=function(t,e,i,r){var n=this,s="makeRequest";this.dataSource.enablePersistence&&this.dataSource.id&&(t=this.setPersistQuery(t)),typeof t=="function"&&(r=i,i=e,e=t,t=null),t||(t=this.defaultQuery),t instanceof Fe||V.throwError("DataManager - executeQuery() : A query is required to execute");var a=new ts,l={query:t};if(!this.dataSource.offline&&this.dataSource.url!==void 0&&this.dataSource.url!==""||!d(this.adaptor[s])||this.isCustomDataAdaptor(this.adaptor)){var h=this.isEnableCache?this.processQuery(t):this.adaptor.processQuery(this,t);d(this.adaptor[s])?!d(h.url)||this.isCustomDataAdaptor(this.adaptor)?(this.requests=[],this.makeRequest(h,a,l,t)):(l=o.getDeferedArgs(t,h,l),a.resolve(l)):this.adaptor[s](h,a,l,t)}else o.nextTick(function(){var c=n.executeLocal(t);l=o.getDeferedArgs(t,c,l),a.resolve(l)});return(e||i)&&a.promise.then(e,i),r&&a.promise.then(r,r),a.promise},o.prototype.getQueryRequest=function(t){var e={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return e.sorts=Fe.filterQueries(t.queries,"onSortBy"),e.groups=Fe.filterQueries(t.queries,"onGroup"),e.filters=Fe.filterQueries(t.queries,"onWhere"),e.searches=Fe.filterQueries(t.queries,"onSearch"),e.aggregates=Fe.filterQueries(t.queries,"onAggregates"),e},o.prototype.generateKey=function(t,e){var i=this.getQueryRequest(e),r=Fe.filterQueryLists(e.queries,["onSelect","onPage","onSkip","onTake","onRange"]),n=t,s="onPage";i.sorts.forEach(function(p){n+=p.e.direction+p.e.fieldName}),i.groups.forEach(function(p){n+=p.e.fieldName}),i.searches.forEach(function(p){n+=p.e.searchKey});for(var a=0;a<i.filters.length;a++){var l=i.filters[a];if(l.e.isComplex){var h=e.clone();h.queries=[];for(var c=0;c<l.e.predicates.length;c++)h.queries.push({fn:"onWhere",e:l.e.predicates[c],filter:e.queries.filter});n+=l.e.condition+this.generateKey(t,h)}else n+=l.e.field+l.e.operator+l.e.value}if(!d(this.previousCacheQuery)&&this.previousCacheQuery!==n){var u={keys:[],results:[]};window.localStorage.setItem(this.guidId,JSON.stringify(u))}return this.previousCacheQuery=n,s in r&&(n+=r[s].pageIndex),n},o.prototype.processQuery=function(t){var e=this.generateKey(this.dataSource.url,t),i=JSON.parse(window.localStorage.getItem(this.guidId)),r=i?i.results[i.keys.indexOf(e)]:null;return r!=null?V.parse.parseJson(r):this.adaptor.processQuery(this,t)},o.getDeferedArgs=function(t,e,i){return t.isCountRequired?(i.result=e.result,i.count=e.count,i.aggregates=e.aggregates):i.result=e,i},o.nextTick=function(t){(window.setImmediate||window.setTimeout)(t,0)},o.prototype.extendRequest=function(t,e,i){return m({},{type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,processData:!1,onSuccess:e,onFailure:i},t)},o.prototype.makeRequest=function(t,e,i,r){var n=this,s=!!r.subQuerySelector,a=function(y){i.error=y,e.reject(i)},l=function(y,C,b,M,S,N,x){i.xhr=b,i.count=C?parseInt(C.toString(),10):0,i.result=y,i.request=M,i.aggregates=N,i.actual=S,i.virtualSelectRecords=x,e.resolve(i)},h=function(y,C){var b=new ts,M={parent:i};r.subQuery.isChild=!0;var S=n.adaptor.processQuery(n,r.subQuery,y?n.adaptor.processResponse(y):C),N=n.makeRequest(S,b,M,r.subQuery);return s||b.then(function(x){y&&(V.buildHierarchy(r.subQuery.fKey,r.subQuery.fromTable,y,x,r.subQuery.key),l(y,x.count,x.xhr))},a),N},c=function(y,C){if(n.isGraphQLAdaptor(n.adaptor)&&!d(y.errors))return a(y.errors);n.isCustomDataAdaptor(n.adaptor)&&(C=m({},n.fetchReqOption,C)),C.contentType.indexOf("xml")===-1&&n.dateParse&&!n.isEnableCache&&(y=V.parse.parseJson(y));var b,M=n.afterReponseRequest(y);M.then(function(S){if(b=n.adaptor.processResponse(S,n,r,C.fetchRequest,C),n.isEnableCache){var N=r?n.generateKey(n.dataSource.url,r):n.dataSource.url,x={};x=JSON.parse(window.localStorage.getItem(n.guidId));var A=x.keys.indexOf(N);A!==-1&&(x.results.splice(A,1),x.keys.splice(A,1)),x.results[x.keys.push(N)-1]={keys:N,result:b.result,timeStamp:new Date,count:b.count},window.localStorage.setItem(n.guidId,JSON.stringify(x))}C.contentType.indexOf("xml")===-1&&n.dateParse&&n.isEnableCache&&(b=V.parse.parseJson(b));var U=0,z=null,J="virtualSelectRecords",R=S[J];if(r.isCountRequired&&(U=b.count,z=b.aggregates,b=b.result),!r.subQuery){l(b,U,C.fetchRequest,C.type,S,z,R);return}s||h(b,C)}).catch(function(S){return a(C)})},u=this.extendRequest(t,c,a);if(this.isCustomDataAdaptor(this.adaptor)){this.fetchReqOption=u;var g=u;this.adaptor.options.getData({data:g.data,onSuccess:g.onSuccess,onFailure:g.onFailure})}else{var p=this.useMiddleware(u),f;p.then(function(y){f=new pa(u),f.beforeSend=function(){n.beforeSend(f.fetchRequest,f,y)},u=f.send(),u.catch(function(C){return!0}),n.requests.push(f)}).catch(function(y){return a(u)})}if(s){var p=void 0,v=r.subQuerySelector.call(this,{query:r.subQuery,parent:r});v&&v.length?(p=Promise.all([u,h(null,v)]),p.then(function(){for(var C=[],b=0;b<arguments.length;b++)C[b]=arguments[b];var M=C[0],S=n.adaptor.processResponse(M[0],n,r,n.requests[0].fetchRequest,n.requests[0]),N=0;r.isCountRequired&&(N=S.count,S=S.result);var x=n.adaptor.processResponse(M[1],n,r.subQuery,n.requests[1].fetchRequest,n.requests[1]);N=0,r.subQuery.isCountRequired&&(N=x.count,x=x.result),V.buildHierarchy(r.subQuery.fKey,r.subQuery.fromTable,S,x,r.subQuery.key),s=!1,l(S,N,n.requests[0].fetchRequest)})):s=!1}return u},o.prototype.afterReponseRequest=function(t){return Va(this,void 0,void 0,function(){var e,i;return Qa(this,function(r){switch(r.label){case 0:return[4,this.applyPostRequestMiddlewares(t)];case 1:return e=r.sent(),i=new ts,i.resolve(e),[2,i.promise]}})})},o.prototype.applyPostRequestMiddlewares=function(t){return Va(this,void 0,void 0,function(){return Qa(this,function(e){return[2,t]})})},o.prototype.useMiddleware=function(t){return Va(this,void 0,void 0,function(){var e,i;return Qa(this,function(r){switch(r.label){case 0:return[4,this.applyPreRequestMiddlewares(t)];case 1:return e=r.sent(),i=new ts,i.resolve(e),[2,i.promise]}})})},o.prototype.applyPreRequestMiddlewares=function(t){return Va(this,void 0,void 0,function(){return Qa(this,function(e){return[2,t]})})},o.prototype.beforeSend=function(t,e,i){this.adaptor.beforeSend(this,t,e);var r=[];this.dataSource.headers&&(r=r.concat(this.dataSource.headers));var n;i&&i.headers&&(r=r.concat(i.headers));for(var s=0;r&&s<r.length;s++){n=[];for(var a=Object.keys(r[s]),l=0,h=a;l<h.length;l++){var c=h[l];n.push(c),t.headers.set(c,r[s][c])}}},o.prototype.saveChanges=function(t,e,i,r,n){var s=this;i instanceof Fe&&(r=i,i=null);var a={url:i,key:e||this.dataSource.key},l=this.adaptor.batchRequest(this,t,a,r||new Fe,n),h="dofetchRequest";if(this.dataSource.offline)return l;if(d(this.adaptor[h])){if(this.isCustomDataAdaptor(this.adaptor))return this.dofetchRequest(l,this.adaptor.options.batchUpdate,t);var c=new ts,u=new pa(l);return u.beforeSend=function(){s.beforeSend(u.fetchRequest,u)},u.onSuccess=function(p,f){s.isGraphQLAdaptor(s.adaptor)&&(d(p.errors)||u.onFailure(JSON.stringify(p.errors))),c.resolve(s.adaptor.processResponse(p,s,null,f.fetchRequest,f,t,a))},u.onFailure=function(p){c.reject([{error:p}])},u.send().catch(function(p){return!0}),c.promise}else return this.adaptor[h](l)},o.prototype.insert=function(t,e,i,r){e instanceof Fe&&(i=e,e=null);var n=this.adaptor.insert(this,t,e,i,r),s="dofetchRequest";return this.dataSource.offline?n:d(this.adaptor[s])?this.dofetchRequest(n,this.adaptor.options.addRecord):this.adaptor[s](n)},o.prototype.remove=function(t,e,i,r){typeof e=="object"&&(e=V.getObject(t,e)),i instanceof Fe&&(r=i,i=null);var n=this.adaptor.remove(this,t,e,i,r),s="dofetchRequest";if(this.dataSource.offline)return n;if(d(this.adaptor[s])){var a=this.adaptor.options.deleteRecord;return this.dofetchRequest(n,a)}else return this.adaptor[s](n)},o.prototype.update=function(t,e,i,r,n){i instanceof Fe&&(r=i,i=null),this.isEnableCache&&(this.cacheQuery=this.generateKey(this.dataSource.url,r));var s=this.adaptor.update(this,t,e,i,r,n),a="dofetchRequest";if(this.dataSource.offline)return s;if(d(this.adaptor[a])){var l=this.adaptor.options.updateRecord;return this.dofetchRequest(s,l)}else return this.adaptor[a](s)},o.prototype.isCustomDataAdaptor=function(t){return this.adaptor.getModuleName&&this.adaptor.getModuleName()==="CustomDataAdaptor"},o.prototype.isGraphQLAdaptor=function(t){return this.adaptor.getModuleName&&this.adaptor.getModuleName()==="GraphQLAdaptor"},o.prototype.successFunc=function(t,e,i){if(this.isGraphQLAdaptor(this.adaptor)){var r=typeof t=="object"?t:JSON.parse(t);d(r.errors)||this.failureFunc(JSON.stringify(r.errors))}this.isCustomDataAdaptor(this.adaptor)&&(e=m({},this.fetchReqOption,e));try{V.parse.parseJson(t)}catch{t=[]}if(this.isEnableCache){var n=JSON.parse(e.data);if(n.action==="insert"||n.action==="remove"){var s={keys:[],results:[]};window.localStorage.setItem(this.guidId,JSON.stringify(s))}else if(n.action==="update"){var a=JSON.parse(window.localStorage.getItem(this.guidId)),r=a?a.results[a.keys.indexOf(this.cacheQuery)]:null;if(r&&r.result){for(var l=r.result,h=0;h<l.length;h++)if(l[h][n.keyColumn]===n.key){l[h]=n.value,window.localStorage.setItem(this.guidId,JSON.stringify(a));break}}}}t=this.adaptor.processResponse(V.parse.parseJson(t),this,null,e.fetchRequest,e,i),this.fetchDeffered.resolve(t)},o.prototype.failureFunc=function(t){this.isEnableCache&&(this.cacheQuery=""),this.fetchDeffered.reject([{error:t}])},o.prototype.dofetchRequest=function(t,e,i){var r=this;if(t=m({},{type:"POST",contentType:"application/json; charset=utf-8",processData:!1},t),this.fetchDeffered=new ts,this.isCustomDataAdaptor(this.adaptor))this.fetchReqOption=t,e.call(this,{data:t.data,onSuccess:this.successFunc.bind(this),onFailure:this.failureFunc.bind(this),changes:i});else{var n=new pa(t);n.beforeSend=function(){r.beforeSend(n.fetchRequest,n)},n.onSuccess=this.successFunc.bind(this),n.onFailure=this.failureFunc.bind(this),n.send().catch(function(s){return!0})}return this.fetchDeffered.promise},o.prototype.clearPersistence=function(){window.removeEventListener("unload",this.setPersistData.bind(this)),this.dataSource.enablePersistence=!1,this.persistQuery={},window.localStorage.setItem(this.dataSource.id,"[]")},o}(),ts=function(){function o(){var t=this;this.promise=new Promise(function(e,i){t.resolve=e,t.reject=i}),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}return o}();var Ne={li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"},Su;(function(o){o.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null,sortBy:null};var t={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},e={showCheckBox:!1,showIcon:!1,enableHtmlSanitizer:!1,expandCollapse:!1,fields:o.defaultMappedFields,ariaAttributes:t,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right",itemNavigable:!1};function i(R,_,B,E,L){var P=m({},e,B),j=m({},t,P.ariaAttributes),k=g(_).typeof;return k==="string"||k==="number"?r(R,_,E,B,L):a(R,_,B,j.level,E,L)}o.createList=i;function r(R,_,B,E,L){var P=n(R,_,B,E,L);return z(R,P,null,E)}o.createListFromArray=r;function n(R,_,B,E,L){var P=[],j=m({},e,E);Ne=x(j.moduleName);for(var k=M(),F=0;F<_.length;F++)if(!d(_[F])){var X=void 0;if(j.itemCreating&&typeof j.itemCreating=="function"){var re={dataSource:_,curData:_[F],text:_[F],options:j};j.itemCreating(re)}if(B?X=N(R,_[F],void 0,null,null,[],null,k,F,E):X=U(R,_[F],void 0,null,null,E,L),j.itemCreated&&typeof j.itemCreated=="function"){var re={dataSource:_,curData:_[F],text:_[F],item:X,options:j};j.itemCreated(re)}P.push(X)}return P}o.createListItemFromArray=n;function s(R,_,B,E,L,P){var j=m({},e,B);Ne=x(j.moduleName);var k=P&&(P.getModuleName()==="listview"||P.getModuleName()==="multiselect")?j.fields:m({},o.defaultMappedFields,j.fields),F=m({},t,j.ariaAttributes),X,re=[];E&&(F.level=E);var q=[],ie,ue;_&&_.length&&!d(g(_).item)&&!Object.prototype.hasOwnProperty.call(g(_).item,k.id)&&(X=M());for(var fe=0;fe<_.length;fe++){var se=no(_[fe],k);if(!d(_[fe])){if(j.itemCreating&&typeof j.itemCreating=="function"){var Oe={dataSource:_,curData:_[fe],text:se[k.text],options:j,fields:k};j.itemCreating(Oe)}var qe=_[fe];j.itemCreating&&typeof j.itemCreating=="function"&&(se=no(_[fe],k)),Object.prototype.hasOwnProperty.call(se,k.id)&&!d(se[k.id])&&(X=se[k.id]);var De=[];if(j.showCheckBox&&(j.itemNavigable&&(se[k.url]||se[k.urlAttributes])?re.push(R("input",{className:Ne.check,attrs:{type:"checkbox"}})):De.push(R("input",{className:Ne.check,attrs:{type:"checkbox"}}))),L===!0){if(j.showIcon&&Object.prototype.hasOwnProperty.call(se,k.iconCss)&&!d(se[k.iconCss])&&De.push(R("span",{className:Ne.icon+" "+se[k.iconCss]})),ie=N(R,qe,se,k,j.itemClass,De,!!(Object.prototype.hasOwnProperty.call(qe,"isHeader")&&qe.isHeader),X,fe,B),ue=ie.querySelector("."+Ne.anchorWrap),Object.prototype.hasOwnProperty.call(se,k.tooltip)){var pt=se[k.tooltip];if(B&&B.enableHtmlSanitizer)pt=nt.sanitize(pt);else{var Mt=R("span",{innerHTML:pt});pt=Mt.innerText,Mt=null}ie.setAttribute("title",pt)}j.itemNavigable&&re.length&&vi(re,ie.firstElementChild)}else{if(ie=U(R,qe,se,k,j.itemClass,B,P),ie.classList.add(Ne.level+"-"+F.level),ie.setAttribute("aria-level",F.level.toString()),(F.groupItemRole==="presentation"||F.itemRole==="presentation")&&ie.removeAttribute("aria-level"),ue=ie.querySelector("."+Ne.anchorWrap),Object.prototype.hasOwnProperty.call(se,k.tooltip)){var pt=se[k.tooltip];if(B&&B.enableHtmlSanitizer)pt=nt.sanitize(pt);else{var Mt=R("span",{innerHTML:pt});pt=Mt.innerText,Mt=null}ie.setAttribute("title",pt)}if(Object.prototype.hasOwnProperty.call(se,k.htmlAttributes)&&se[k.htmlAttributes]){var zr=se[k.htmlAttributes];"class"in zr&&typeof zr.class=="string"&&zr.class.trim()===""&&delete zr.class,v(ie,zr)}if(Object.prototype.hasOwnProperty.call(se,k.enabled)&&se[k.enabled]===!1&&ie.classList.add(Ne.disabled),Object.prototype.hasOwnProperty.call(se,k.isVisible)&&se[k.isVisible]===!1&&(ie.style.display="none"),Object.prototype.hasOwnProperty.call(se,k.imageUrl)&&!d(se[k.imageUrl])&&!j.template){var Rr={src:se[k.imageUrl],alt:d(se.name)?"Displaying Image":"Displaying "+se.name+" Image"};Rt(Rr,se[k.imageAttributes]);var go=R("img",{className:Ne.image,attrs:Rr});ue?ue.insertAdjacentElement("afterbegin",go):vi([go],ie.firstElementChild)}if(j.showIcon&&Object.prototype.hasOwnProperty.call(se,k.iconCss)&&!d(se[k.iconCss])&&!j.template){var vo=R("div",{className:Ne.icon+" "+se[k.iconCss]});ue?ue.insertAdjacentElement("afterbegin",vo):vi([vo],ie.firstElementChild)}De.length&&vi(De,ie.firstElementChild),j.itemNavigable&&re.length&&vi(re,ie.firstElementChild),S(R,se,k,_,j,ie,F.level)}if(ue&&Z([ie],[Ne.navigable]),j.itemCreated&&typeof j.itemCreated=="function"){var Oe={dataSource:_,curData:_[fe],text:se[k.text],item:ie,options:j,fields:k};j.itemCreated(Oe)}re=[],q.push(ie)}}return q}o.createListItemFromJson=s;function a(R,_,B,E,L,P){var j=m({},e,B),k=s(R,_,B,E,L,P);return z(R,k,j.listClass,B)}o.createListFromJson=a;function l(R,_,B){if(Ne=x(e.moduleName),!(!R||!R.length)){var E,L,P=Array.prototype.slice.call(R);for(_?L=h(_,P):L=B===!0?P.length:-1,E=P[L+(B===!0?-1:1)];E&&(!jt(E)||E.classList.contains(Ne.disabled));)L=L+(B===!0?-1:1),E=P[L];return E}}o.getSiblingLI=l;function h(R,_){if(!(!_||!R)){var B=_;return B=Array.prototype.slice.call(_),B.indexOf(R)}}o.indexOf=h;function c(R,_,B){B===void 0&&(B="None");var E=m({},o.defaultMappedFields,_),L=new Fe().group(E.groupBy);L=u(B,"key",L);var P=p(R,L);R=[];for(var j=0;j<P.length;j++){var k=P[j].items,F={},X="isHeader";F[E.text]=P[j].key,F[""+X]=!0;var re=E.text;re==="id"&&(re="text",F[""+re]=P[j].key),F._id="group-list-item-"+(P[j].key?P[j].key.toString().trim():"undefined"),F.items=k,R.push(F);for(var q=0;q<k.length;q++)R.push(k[q])}return R}o.groupDataSource=c;function u(R,_,B){if(B===void 0&&(B=new Fe),R==="Ascending")B.sortBy(_,"ascending",!0);else if(R==="Descending")B.sortBy(_,"descending",!0);else for(var E=0;E<B.queries.length;E++)B.queries[E].fn==="onSortBy"&&B.queries.splice(E,1);return B}o.addSorting=u;function p(R,_){return new is(R).executeLocal(_)}o.getDataSource=p;function f(R,_){var B=m({},e,_),E=m({},o.defaultMappedFields,B.fields),L=R.cloneNode(!0),P=[];L.classList.add("json-parent");var j=L.querySelectorAll(".json-parent>li");L.classList.remove("json-parent");for(var k=0;k<j.length;k++){for(var F=j[k],X=F.querySelector("a"),re=F.querySelector("ul"),q={},ie=X?X.childNodes:F.childNodes,ue=Object.keys(ie),fe=0;fe<ie.length;fe++)ie[Number(ue[fe])].hasChildNodes()||(q[E.text]=ie[Number(ue[fe])].textContent);var se=y(F);se.id?(q[E.id]=se.id,delete se.id):q[E.id]=M(),Object.keys(se).length&&(q[E.htmlAttributes]=se),X&&(se=y(X),Object.keys(se).length&&(q[E.urlAttributes]=se)),re&&(q[E.child]=f(re,_)),P.push(q)}return P}o.createJsonFromElement=f;function g(R){for(var _={typeof:null,item:null},B=0;B<R.length;B++)if(!d(R[B]))return _={typeof:typeof R[B],item:R[B]};return _}function v(R,_){var B={};Rt(B,_),B.class&&(Z([R],B.class.split(" ")),delete B.class),ye(R,B)}function y(R){for(var _={},B=R.attributes,E=0;E<B.length;E++)_[B[E].nodeName]=B[E].nodeValue;return _}function C(R,_,B,E,L,P){Ne=x(e.moduleName);for(var j=R("ul",{className:Ne.ul,attrs:{role:"presentation"}}),k=m({},e,L),F=m({},o.defaultMappedFields,E),X=Wa(_),re=[],q,ie=M(),ue=0;ue<B.length;ue++){var fe=no(B[ue],F),se=B[ue],Oe=se.isHeader;if(typeof B[ue]=="string"||typeof B[ue]=="number"?q=se:q=fe[F.value],k.itemCreating&&typeof k.itemCreating=="function"){var qe={dataSource:B,curData:se,text:q,options:k,fields:F};k.itemCreating(qe)}k.itemCreating&&typeof k.itemCreating=="function"&&(fe=no(B[ue],F),typeof B[ue]=="string"||typeof B[ue]=="number"?q=se:q=fe[F.value]);var De=R("li",{id:ie+"-"+ue,className:Oe?Ne.group:Ne.li,attrs:{role:"presentation"}});if(Oe)typeof B[ue]=="string"||typeof B[ue]=="number"?De.innerText=se:De.innerText=fe[F.text];else{var pt=Oe?k.groupTemplateID:k.templateID;if(Oe)if(P&&P.getModuleName()!=="listview"){var Mt=X(se,P,"headerTemplate",pt,!!k.isStringTemplate,null,De);Mt&&He(Mt,De)}else He(X(se,P,"headerTemplate",pt,!!k.isStringTemplate),De);else if(P&&P.getModuleName()!=="listview"){var Mt=X(se,P,"template",pt,!!k.isStringTemplate,null,De);Mt&&He(Mt,De)}else He(X(se,P,"template",pt,!!k.isStringTemplate),De);De.setAttribute("data-value",d(q)?"null":q),De.setAttribute("role","option")}if(k.itemCreated&&typeof k.itemCreated=="function"){var qe={dataSource:B,curData:se,text:q,item:De,options:k,fields:F};k.itemCreated(qe)}re.push(De)}return He(re,j),j}o.renderContentTemplate=C;function b(R,_,B,E,L,P){for(var j=Wa(R),k=m({},o.defaultMappedFields,B),F=m({},e,L),X=k.groupBy,re=0,q=E;re<q.length;re++){var ie=q[re],ue={};if(ue[""+X]=ie.textContent,ie.innerHTML="",P&&P.getModuleName()!=="listview"){var fe=j(ue,P,"groupTemplate",F.groupTemplateID,!!F.isStringTemplate,null,ie);fe&&He(fe,ie)}else He(j(ue,P,"groupTemplate",F.groupTemplateID,!!F.isStringTemplate),ie)}return E}o.renderGroupTemplate=b;function M(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}o.generateId=M;function S(R,_,B,E,L,P,j){var k=_[B.child]||[],F=_[B.hasChildren];if(k.length&&(F=!0,P.classList.add(Ne.hasChild),L.processSubChild)){var X=a(R,k,L,++j);P.appendChild(X)}if(L.expandCollapse&&F&&!L.template){P.firstElementChild.classList.add(Ne.iconWrapper);var re=L.expandIconPosition==="Left"?vi:He;re([R("div",{className:"e-icons "+L.expandIconClass})],P.querySelector("."+Ne.textContent))}}function N(R,_,B,E,L,P,j,k,F,X){var re=m({},e,X),q=m({},t,re.ariaAttributes),ie=_,ue=_,fe;typeof _!="string"&&typeof _!="number"&&typeof _!="boolean"&&(fe=_,ie=typeof B[E.text]=="boolean"||typeof B[E.text]=="number"?B[E.text]:B[E.text]||"",ue=B[E.value]);var se;!d(fe)&&!d(B[E.id])&&B[E.id]!==""?se=k:se=k+"-"+F;var Oe=R("li",{className:(j===!0?Ne.group:Ne.li)+" "+(d(L)?"":L),id:se,attrs:q.groupItemRole!==""&&q.itemRole!==""?{role:j===!0?q.groupItemRole:q.itemRole}:{}});return fe&&Object.prototype.hasOwnProperty.call(B,E.enabled)&&B[E.enabled].toString()==="false"&&Oe.classList.add(Ne.disabled),X&&X.enableHtmlSanitizer&&(ie=nt.sanitize(ie)),j?Oe.innerText=ie:(Oe.setAttribute("data-value",d(ue)?"null":ue),Oe.setAttribute("role","option"),fe&&Object.prototype.hasOwnProperty.call(B,E.htmlAttributes)&&B[E.htmlAttributes]&&v(Oe,B[E.htmlAttributes]),P.length&&!re.itemNavigable&&He(P,Oe),fe&&(B[E.url]||B[E.urlAttributes]&&B[E.urlAttributes].href)?Oe.appendChild(A(R,fe,E,ie,P,re.itemNavigable)):(P.length&&re.itemNavigable&&He(P,Oe),Oe.appendChild(document.createTextNode(ie)))),Oe}function x(R){var _;return _={li:"e-"+R+"-item",ul:"e-"+R+"-parent e-ul",group:"e-"+R+"-group-item",icon:"e-"+R+"-icon",text:"e-"+R+"-text",check:"e-"+R+"-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-"+R+"-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-"+R+"-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"}}function A(R,_,B,E,L,P){var j=no(_,B),k={href:j[B.url]};Object.prototype.hasOwnProperty.call(j,B.urlAttributes)&&j[B.urlAttributes]&&(Rt(k,j[B.urlAttributes]),k.href=j[B.url]?j[B.url]:j[B.urlAttributes].href);var F;if(!P)F=R("a",{className:Ne.text+" "+Ne.url,innerHTML:E});else{F=R("a",{className:Ne.text+" "+Ne.url});var X=R("div",{className:Ne.anchorWrap});L&&L.length&&He(L,X),X.appendChild(document.createTextNode(E)),He([X],F)}return v(F,k),F}function U(R,_,B,E,L,P,j){var k=m({},e,P),F=m({},t,k.ariaAttributes),X=_,re,q,ie;typeof _!="string"&&typeof _!="number"&&(ie=_,X=B[E.text]||"",re=d(B._id)?B[E.id]:B._id,q=!!(Object.prototype.hasOwnProperty.call(_,"isHeader")&&_.isHeader)),P&&P.enableHtmlSanitizer&&(X=nt.sanitize(X));var ue=R("li",{className:(q===!0?Ne.group:Ne.li)+" "+(d(L)?"":L),attrs:F.groupItemRole!==""&&F.itemRole!==""?{role:q===!0?F.groupItemRole:F.itemRole}:{}});if(d(re)?ue.setAttribute("data-uid",M()):ue.setAttribute("data-uid",re),q&&P&&P.groupTemplate){var fe=Wa(P.groupTemplate);if(j&&j.getModuleName()!=="listview"){var se=fe(_,j,"groupTemplate",k.groupTemplateID,!!k.isStringTemplate,null,ue);se&&He(se,ue)}else He(fe(_,j,"groupTemplate",k.groupTemplateID,!!k.isStringTemplate),ue)}else if(!q&&P&&P.template){var fe=Wa(P.template);if(j&&j.getModuleName()!=="listview"){var se=fe(_,j,"template",k.templateID,!!k.isStringTemplate,null,ue);se&&He(se,ue)}else He(fe(_,j,"template",k.templateID,!!k.isStringTemplate),ue)}else{var Oe=R("div",{className:Ne.textContent,attrs:F.wrapperRole!==""?{role:F.wrapperRole}:{}});if(ie&&(B[E.url]||B[E.urlAttributes]&&B[E.urlAttributes].href))Oe.appendChild(A(R,ie,E,X,null,k.itemNavigable));else{var qe=R("span",{className:Ne.text,attrs:F.itemText!==""?{role:F.itemText}:{}});P&&P.enableHtmlSanitizer?qe.innerText=X:qe.innerHTML=X,Oe.appendChild(qe)}ue.appendChild(Oe)}return ue}function z(R,_,B,E){var L=m({},e,E),P=m({},t,L.ariaAttributes);Ne=x(L.moduleName);var j=R("ul",{className:Ne.ul+" "+(d(B)?"":B),attrs:P.listRole!==""?{role:P.listRole}:{}});return He(_,j),j}o.generateUL=z;function J(R,_,B,E){var L=m({},e,E);Ne=x(L.moduleName);var P=L.expandIconPosition==="Left"?vi:He;return P([R("div",{className:"e-icons "+L.expandIconClass+" "+(d(B)?"":B)})],_.querySelector("."+Ne.textContent)),_}o.generateIcon=J})(Su||(Su={}));function no(o,t){var e={};if(d(o)||typeof o=="string"||typeof o=="number"||!d(o.isHeader))return o;for(var i=0,r=Object.keys(t);i<r.length;i++){var n=r[i],s=t[""+n],a=!d(s)&&typeof s=="string"?Y(s,o):void 0;d(a)||(e[""+s]=a)}return e}function Wa(o){if(o)try{return typeof o!="function"&&document.querySelector(o)?rt(document.querySelector(o).innerHTML.trim()):rt(o)}catch{return rt(o)}}var ID=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(t,e)};return function(t,e){o(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Um=function(o,t,e,i){var r=arguments.length,n=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,e,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,e,n):s(t,e))||n);return r>3&&n&&Object.defineProperty(t,e,n),n},SD="e-hscroll",Nr="e-rtl",jr="e-overlay",TD="e-hscroll-bar",wD="e-hscroll-content",so="e-nav-arrow",oo="e-nav-right-arrow",Xa="e-nav-left-arrow",cn="e-scroll-nav",Tu="e-scroll-right-nav",Ym="e-scroll-left-nav",_m="e-scroll-device",qa="e-scroll-overlay",wu="e-scroll-right-overlay",Du="e-scroll-left-overlay",Vm=40,DD=function(o){ID(t,o);function t(e,i){return o.call(this,e,i)||this}return t.prototype.preRender=function(){this.browser=D.info.name,this.browserCheck=this.browser==="mozilla",this.isDevice=D.isDevice,this.customStep=!0;var e=this.element;this.ieCheck=this.browser==="edge"||this.browser==="msie",this.initialize(),e.id===""&&(e.id=Je("hscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add(Nr)},t.prototype.render=function(){this.touchModule=new Ir(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),I.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add(_m),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()},t.prototype.setScrollState=function(){d(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=this.createElement("div",{className:wD}),i=this.createElement("div",{className:TD});i.setAttribute("tabindex","-1");for(var r=this.element,n=[].slice.call(r.children),s=0,a=n;s<a.length;s++){var l=a[s];e.appendChild(l)}i.appendChild(e),r.appendChild(i),i.style.overflowX="hidden",this.scrollEle=i,this.scrollItems=e},t.prototype.getPersistData=function(){var e=["scrollStep"];return this.addOnPersist(e)},t.prototype.getModuleName=function(){return"hScroll"},t.prototype.destroy=function(){var e=this.element;e.style.display="",e.classList.remove(SD),e.classList.remove(_m),e.classList.remove(Nr);var i=Se(".e-"+e.id+"_nav."+cn,e),r=Se("."+qa,e);[].slice.call(r).forEach(function(l){K(l)});for(var n=0,s=[].slice.call(this.scrollItems.children);n<s.length;n++){var a=s[n];e.appendChild(a)}this.uniqueId&&this.element.removeAttribute("id"),K(this.scrollEle),i.length>0&&(K(i[0]),d(i[1])||K(i[1])),I.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,o.prototype.destroy.call(this)},t.prototype.disable=function(e){var i=Se(".e-scroll-nav:not(."+jr+")",this.element);e?this.element.classList.add(jr):this.element.classList.remove(jr),[].slice.call(i).forEach(function(r){r.setAttribute("tabindex",e?"-1":"0")})},t.prototype.createOverlay=function(e){var i=e.id.concat("_nav"),r=this.createElement("div",{className:qa+" "+wu}),n="e-"+e.id.concat("_nav "+cn+" "+Tu),s=this.createElement("div",{id:i.concat("_right"),className:n}),a=this.createElement("div",{className:oo+" "+so+" e-icons"});s.appendChild(a);var l=this.createElement("div",{className:qa+" "+Du});this.ieCheck&&s.classList.add("e-ie-align"),e.appendChild(r),e.appendChild(s),e.insertBefore(l,e.firstChild),this.eventBinding([s])},t.prototype.createNavIcon=function(e){var i=e.id.concat("_nav"),r="e-"+e.id.concat("_nav "+cn+" "+Tu),n={role:"button",id:i.concat("_right"),"aria-label":"Scroll right"},s=this.createElement("div",{className:r,attrs:n});s.setAttribute("aria-disabled","false");var a=this.createElement("div",{className:oo+" "+so+" e-icons"}),l="e-"+e.id.concat("_nav "+cn+" "+Ym),h={role:"button",id:i.concat("_left"),"aria-label":"Scroll left"},c=this.createElement("div",{className:l+" "+jr,attrs:h});c.setAttribute("aria-disabled","true");var u=this.createElement("div",{className:Xa+" "+so+" e-icons"});c.appendChild(u),s.appendChild(a),e.appendChild(s),e.insertBefore(c,e.firstChild),this.ieCheck&&(s.classList.add("e-ie-align"),c.classList.add("e-ie-align")),this.eventBinding([s,c])},t.prototype.onKeyPress=function(e){var i=this;if(e.key==="Enter"){var r=function(){i.keyTimeout=!0,i.eleScrolling(10,e.target,!0)};this.keyTimer=window.setTimeout(function(){r()},100)}},t.prototype.onKeyUp=function(e){e.key==="Enter"&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var i=this;[].slice.call(e).forEach(function(r){new Ir(r,{tapHold:i.tabHoldHandler.bind(i),tapHoldThreshold:500}),r.addEventListener("keydown",i.onKeyPress.bind(i)),r.addEventListener("keyup",i.onKeyUp.bind(i)),r.addEventListener("mouseup",i.repeatScroll.bind(i)),r.addEventListener("touchend",i.repeatScroll.bind(i)),r.addEventListener("contextmenu",function(n){n.preventDefault()}),I.add(r,"click",i.clickEventHandler,i)})},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var i=this,r=e.originalEvent.target;r=this.contains(r,cn)?r.firstElementChild:r;var n=10,s=function(){i.eleScrolling(n,r,!0)};this.timeout=window.setInterval(function(){s()},50)},t.prototype.contains=function(e,i){return e.classList.contains(i)},t.prototype.eleScrolling=function(e,i,r){var n=this.element,s=i.classList;s.contains(cn)&&(s=i.querySelector("."+so).classList),this.contains(n,Nr)&&this.browserCheck&&(e=-e),!this.contains(n,Nr)||this.browserCheck||this.ieCheck?s.contains(oo)?this.frameScrollRequest(e,"add",r):this.frameScrollRequest(e,"",r):s.contains(Xa)?this.frameScrollRequest(e,"add",r):this.frameScrollRequest(e,"",r)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.swipeHandler=function(e){var i=this.scrollEle,r;e.velocity<=1?r=e.distanceX/(e.velocity*10):r=e.distanceX/e.velocity;var n=.5,s=function(){var a=Math.sin(n);a<=0?window.cancelAnimationFrame(a):(e.swipeDirection==="Left"?i.scrollLeft+=r*a:e.swipeDirection==="Right"&&(i.scrollLeft-=r*a),n-=.5,window.requestAnimationFrame(s))};s()},t.prototype.scrollUpdating=function(e,i){i==="add"?this.scrollEle.scrollLeft+=e:this.scrollEle.scrollLeft-=e,this.enableRtl&&this.scrollEle.scrollLeft>0&&(this.scrollEle.scrollLeft=0)},t.prototype.frameScrollRequest=function(e,i,r){var n=this,s=10;if(r){this.scrollUpdating(e,i);return}this.customStep||[].slice.call(Se("."+qa,this.element)).forEach(function(l){e-=l.offsetWidth});var a=function(){var l,h;n.contains(n.element,Nr)&&n.browserCheck?(l=-e,h=-s):(l=e,h=s),l<s?window.cancelAnimationFrame(h):(n.scrollUpdating(h,i),e-=h,window.requestAnimationFrame(a))};a()},t.prototype.touchHandler=function(e){var i=this.scrollEle,r=e.distanceX;this.ieCheck&&this.contains(this.element,Nr)&&(r=-r),e.scrollDirection==="Left"?i.scrollLeft=i.scrollLeft+r:e.scrollDirection==="Right"&&(i.scrollLeft=i.scrollLeft-r)},t.prototype.arrowDisabling=function(e,i){if(this.isDevice){var r=d(e)?i:e,n=r.querySelector("."+so);d(e)?St(n,[oo],[Xa]):St(n,[Xa],[oo])}else e&&i&&(e.classList.add(jr),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),i.classList.remove(jr),i.setAttribute("aria-disabled","false"),i.setAttribute("tabindex","0"));this.repeatScroll()},t.prototype.scrollHandler=function(e){var i=e.target,r=i.offsetWidth,n=this.element,s=this.element.querySelector("."+Ym),a=this.element.querySelector("."+Tu),l=this.element.querySelector("."+Du),h=this.element.querySelector("."+wu),c=i.scrollLeft;if(c<=0&&(c=-c),this.isDevice&&(this.enableRtl&&!(this.browserCheck||this.ieCheck)&&(l=this.element.querySelector("."+wu),h=this.element.querySelector("."+Du)),c<Vm?l.style.width=c+"px":l.style.width="40px",i.scrollWidth-Math.ceil(r+c)<Vm?h.style.width=i.scrollWidth-Math.ceil(r+c)+"px":h.style.width="40px"),c===0)this.arrowDisabling(s,a);else if(Math.ceil(r+c+.1)>=i.scrollWidth)this.arrowDisabling(a,s);else{var u=this.element.querySelector("."+cn+"."+jr);u&&(u.classList.remove(jr),u.setAttribute("aria-disabled","false"),u.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,i){for(var r=0,n=Object.keys(e);r<n.length;r++){var s=n[r];switch(s){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add(Nr):this.element.classList.remove(Nr);break}}},Um([w(null)],t.prototype,"scrollStep",void 0),t=Um([Qe],t),t}(dt),xD=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(t,e)};return function(t,e){o(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Qm=function(o,t,e,i){var r=arguments.length,n=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,e,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,e,n):s(t,e))||n);return r>3&&n&&Object.defineProperty(t,e,n),n},AD="e-vscroll",Ga="e-rtl",Lr="e-overlay",ED="e-vscroll-bar",OD="e-vscroll-content",ao="e-nav-arrow",Za="e-nav-up-arrow",lo="e-nav-down-arrow",un="e-scroll-nav",Wm="e-scroll-up-nav",xu="e-scroll-down-nav",Xm="e-scroll-device",$a="e-scroll-overlay",qm="e-scroll-up-overlay",Gm="e-scroll-down-overlay",Zm=40,ND=function(o){xD(t,o);function t(e,i){return o.call(this,e,i)||this}return t.prototype.preRender=function(){this.browser=D.info.name,this.browserCheck=this.browser==="mozilla",this.isDevice=D.isDevice,this.customStep=!0;var e=this.element;this.ieCheck=this.browser==="edge"||this.browser==="msie",this.initialize(),e.id===""&&(e.id=Je("vscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add(Ga)},t.prototype.render=function(){this.touchModule=new Ir(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),I.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add(Xm),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),I.add(this.element,"wheel",this.wheelEventHandler,this)},t.prototype.setScrollState=function(){d(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=xe("div",{className:OD}),i=xe("div",{className:ED});i.setAttribute("tabindex","-1");for(var r=this.element,n=[].slice.call(r.children),s=0,a=n;s<a.length;s++){var l=a[s];e.appendChild(l)}i.appendChild(e),r.appendChild(i),i.style.overflow="hidden",this.scrollEle=i,this.scrollItems=e},t.prototype.getPersistData=function(){var e=["scrollStep"];return this.addOnPersist(e)},t.prototype.getModuleName=function(){return"vScroll"},t.prototype.destroy=function(){var e=this.element;e.style.display="",ee([this.element],[AD,Xm,Ga]);var i=Se(".e-"+e.id+"_nav."+un,e),r=Se("."+$a,e);[].slice.call(r).forEach(function(l){K(l)});for(var n=0,s=[].slice.call(this.scrollItems.children);n<s.length;n++){var a=s[n];e.appendChild(a)}this.uniqueId&&this.element.removeAttribute("id"),K(this.scrollEle),i.length>0&&(K(i[0]),d(i[1])||K(i[1])),I.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,o.prototype.destroy.call(this)},t.prototype.disable=function(e){var i=Se(".e-scroll-nav:not(."+Lr+")",this.element);e?this.element.classList.add(Lr):this.element.classList.remove(Lr),[].slice.call(i).forEach(function(r){r.setAttribute("tabindex",e?"-1":"0")})},t.prototype.createOverlayElement=function(e){var i=e.id.concat("_nav"),r=xe("div",{className:$a+" "+Gm}),n="e-"+e.id.concat("_nav "+un+" "+xu),s=xe("div",{id:i.concat("down"),className:n}),a=xe("div",{className:lo+" "+ao+" e-icons"});s.appendChild(a);var l=xe("div",{className:$a+" "+qm});this.ieCheck&&s.classList.add("e-ie-align"),e.appendChild(r),e.appendChild(s),e.insertBefore(l,e.firstChild),this.eventBinding([s])},t.prototype.createNavIcon=function(e){var i=e.id.concat("_nav"),r="e-"+e.id.concat("_nav "+un+" "+xu),n=xe("div",{id:i.concat("_down"),className:r});n.setAttribute("aria-disabled","false");var s=xe("div",{className:lo+" "+ao+" e-icons"}),a="e-"+e.id.concat("_nav "+un+" "+Wm),l=xe("div",{id:i.concat("_up"),className:a+" "+Lr});l.setAttribute("aria-disabled","true");var h=xe("div",{className:Za+" "+ao+" e-icons"});l.appendChild(h),n.appendChild(s),n.setAttribute("tabindex","0"),e.appendChild(n),e.insertBefore(l,e.firstChild),this.ieCheck&&(n.classList.add("e-ie-align"),l.classList.add("e-ie-align")),this.eventBinding([n,l])},t.prototype.onKeyPress=function(e){var i=this;if(e.key==="Enter"){var r=function(){i.keyTimeout=!0,i.eleScrolling(10,e.target,!0)};this.keyTimer=window.setTimeout(function(){r()},100)}},t.prototype.onKeyUp=function(e){e.key==="Enter"&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var i=this;[].slice.call(e).forEach(function(r){new Ir(r,{tapHold:i.tabHoldHandler.bind(i),tapHoldThreshold:500}),r.addEventListener("keydown",i.onKeyPress.bind(i)),r.addEventListener("keyup",i.onKeyUp.bind(i)),r.addEventListener("mouseup",i.repeatScroll.bind(i)),r.addEventListener("touchend",i.repeatScroll.bind(i)),r.addEventListener("contextmenu",function(n){n.preventDefault()}),I.add(r,"click",i.clickEventHandler,i)})},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var i=this,r=e.originalEvent.target;r=this.contains(r,un)?r.firstElementChild:r;var n=10,s=function(){i.eleScrolling(n,r,!0)};this.timeout=window.setInterval(function(){s()},50)},t.prototype.contains=function(e,i){return e.classList.contains(i)},t.prototype.eleScrolling=function(e,i,r){var n=i.classList;n.contains(un)&&(n=i.querySelector("."+ao).classList),n.contains(lo)?this.frameScrollRequest(e,"add",r):n.contains(Za)&&this.frameScrollRequest(e,"",r)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.wheelEventHandler=function(e){e.preventDefault(),this.frameScrollRequest(this.scrollStep,e.deltaY>0?"add":"",!1)},t.prototype.swipeHandler=function(e){var i=this.scrollEle,r;e.velocity<=1?r=e.distanceY/(e.velocity*10):r=e.distanceY/e.velocity;var n=.5,s=function(){var a=Math.sin(n);a<=0?window.cancelAnimationFrame(a):(e.swipeDirection==="Up"?i.scrollTop+=r*a:e.swipeDirection==="Down"&&(i.scrollTop-=r*a),n-=.02,window.requestAnimationFrame(s))};s()},t.prototype.scrollUpdating=function(e,i){i==="add"?this.scrollEle.scrollTop+=e:this.scrollEle.scrollTop-=e},t.prototype.frameScrollRequest=function(e,i,r){var n=this,s=10;if(r){this.scrollUpdating(e,i);return}this.customStep||[].slice.call(Se("."+$a,this.element)).forEach(function(l){e-=l.offsetHeight});var a=function(){e<s?window.cancelAnimationFrame(s):(n.scrollUpdating(s,i),e-=s,window.requestAnimationFrame(a))};a()},t.prototype.touchHandler=function(e){var i=this.scrollEle,r=e.distanceY;e.scrollDirection==="Up"?i.scrollTop=i.scrollTop+r:e.scrollDirection==="Down"&&(i.scrollTop=i.scrollTop-r)},t.prototype.arrowDisabling=function(e,i){if(this.isDevice){var r=d(e)?i:e,n=r.querySelector("."+ao);d(e)?St(n,[lo],[Za]):St(n,[Za],[lo])}else e.classList.add(Lr),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),i.classList.remove(Lr),i.setAttribute("aria-disabled","false"),i.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollEventHandler=function(e){var i=e.target,r=i.offsetHeight,n=this.element.querySelector("."+Wm),s=this.element.querySelector("."+xu),a=this.element.querySelector("."+qm),l=this.element.querySelector("."+Gm),h=i.scrollTop;if(h<=0&&(h=-h),this.isDevice&&(h<Zm?a.style.height=h+"px":a.style.height="40px",i.scrollHeight-Math.ceil(r+h)<Zm?l.style.height=i.scrollHeight-Math.ceil(r+h)+"px":l.style.height="40px"),h===0)this.arrowDisabling(n,s);else if(Math.ceil(r+h+.1)>=i.scrollHeight)this.arrowDisabling(s,n);else{var c=this.element.querySelector("."+un+"."+Lr);c&&(c.classList.remove(Lr),c.setAttribute("aria-disabled","false"),c.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,i){for(var r=0,n=Object.keys(e);r<n.length;r++){var s=n[r];switch(s){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add(Ga):this.element.classList.remove(Ga);break}}},Qm([w(null)],t.prototype,"scrollStep",void 0),t=Qm([Qe],t),t}(dt);var sy=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(t,e)};return function(t,e){o(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),ze=function(o,t,e,i){var r=arguments.length,n=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,e,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,e,n):s(t,e))||n);return r>3&&n&&Object.defineProperty(t,e,n),n},Au="e-vertical",We="e-toolbar-items",Xe="e-toolbar-item",_i="e-rtl",Ke="e-separator",Ja="e-popup-up-icon",ho="e-popup-down-icon",$m="e-popup-open",Jm="e-template",kt="e-overlay",Km="e-toolbar-text",Eu="e-popup-text",wi="e-overflow-show",Ka="e-overflow-hide",jD="e-tbar-btn",Vt="e-hor-nav",ey="e-scroll-nav",LD="e-toolbar-right",PD="e-toolbar-left",ty="e-toolbar-center",Di="e-tbar-pos",kD="e-hscroll-content",zD="e-vscroll-content",Ou="e-hscroll-bar",RD="e-hor-nav",co="e-toolbar-pop",Pr="e-toolbar-popup",FD="e-tbar-btn-text",uo="e-nav-active",po="e-ignore",Nu="e-popup-alone",Vi="e-hidden",iy="e-toolbar-multirow",ry="e-multirow-pos",ju="e-multirow-separator",Lu="e-extended-separator",ny="e-extended-toolbar",el="e-toolbar-extended",BD="e-expended-nav",Pu="e-tbar-extended",HD=function(o){sy(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return ze([w("")],t.prototype,"id",void 0),ze([w("")],t.prototype,"text",void 0),ze([w("auto")],t.prototype,"width",void 0),ze([w("")],t.prototype,"cssClass",void 0),ze([w(!1)],t.prototype,"showAlwaysInPopup",void 0),ze([w(!1)],t.prototype,"disabled",void 0),ze([w("")],t.prototype,"prefixIcon",void 0),ze([w("")],t.prototype,"suffixIcon",void 0),ze([w(!0)],t.prototype,"visible",void 0),ze([w("None")],t.prototype,"overflow",void 0),ze([w("")],t.prototype,"template",void 0),ze([w("Button")],t.prototype,"type",void 0),ze([w("Both")],t.prototype,"showTextOn",void 0),ze([w(null)],t.prototype,"htmlAttributes",void 0),ze([w("")],t.prototype,"tooltipText",void 0),ze([w("Left")],t.prototype,"align",void 0),ze([Q()],t.prototype,"click",void 0),ze([w(-1)],t.prototype,"tabIndex",void 0),t}(Ue),Qt=function(o){sy(t,o);function t(e,i){var r=o.call(this,e,i)||this;return r.resizeContext=r.resize.bind(r),r.orientationChangeContext=r.orientationChange.bind(r),r.keyConfigs={moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow",popupOpen:"enter",popupClose:"escape",tab:"tab",home:"home",end:"end"},r}return t.prototype.destroy=function(){var e=this;(this.isReact||this.isAngular)&&this.clearTemplate();var i=this.element.querySelectorAll(".e-control.e-btn");for([].slice.call(i).forEach(function(r){!d(r)&&!d(r.ej2_instances)&&!d(r.ej2_instances[0])&&!r.ej2_instances[0].isDestroyed&&r.ej2_instances[0].destroy()}),this.unwireEvents(),this.tempId.forEach(function(r){d(e.element.querySelector(r))||(document.body.appendChild(e.element.querySelector(r)).style.display="none")}),this.destroyItems();this.element.lastElementChild;)this.element.removeChild(this.element.lastElementChild);this.trgtEle&&(this.element.appendChild(this.ctrlTem),this.trgtEle=null,this.ctrlTem=null),this.popObj&&(this.popObj.destroy(),K(this.popObj.element)),this.activeEle&&(this.activeEle=null),this.popObj=null,this.tbarAlign=null,this.tbarItemsCol=[],this.remove(this.element,"e-toolpop"),this.cssClass&&ee([this.element],this.cssClass.split(" ")),this.element.removeAttribute("style"),["aria-disabled","aria-orientation","role"].forEach(function(r){return e.element.removeAttribute(r)}),o.prototype.destroy.call(this)},t.prototype.preRender=function(){var e={enableCollision:this.enableCollision,scrollStep:this.scrollStep};this.trigger("beforeCreate",e),this.enableCollision=e.enableCollision,this.scrollStep=e.scrollStep,this.scrollModule=null,this.popObj=null,this.tempId=[],this.tbarItemsCol=this.items,this.isVertical=!!this.element.classList.contains(Au),this.isExtendedOpen=!1,this.popupPriCount=0,this.enableRtl&&this.add(this.element,_i)},t.prototype.wireEvents=function(){I.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resizeContext),window.addEventListener("orientationchange",this.orientationChangeContext),this.allowKeyboard&&this.wireKeyboardEvent()},t.prototype.wireKeyboardEvent=function(){this.keyModule=new Mr(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs}),I.add(this.element,"keydown",this.docKeyDown,this),this.updateTabIndex("0")},t.prototype.updateTabIndex=function(e){var i=this.element.querySelector("."+Xe+":not(."+kt+" ):not(."+Ke+" ):not(."+Vi+" )");if(!d(i)&&!d(i.firstElementChild)){var r=i.firstElementChild.getAttribute("data-tabindex");r&&r==="-1"&&i.firstElementChild.tagName!=="INPUT"&&i.firstElementChild.setAttribute("tabindex",e)}},t.prototype.unwireKeyboardEvent=function(){this.keyModule&&(I.remove(this.element,"keydown",this.docKeyDown),this.keyModule.destroy(),this.keyModule=null)},t.prototype.docKeyDown=function(e){if(e.target.tagName!=="INPUT"){var i=!d(this.popObj)&&jt(this.popObj.element)&&this.overflowMode!=="Extended";e.keyCode===9&&e.target.classList.contains("e-hor-nav")===!0&&i&&this.popObj.hide({name:"FadeOut",duration:100});var r=e.keyCode===40||e.keyCode===38||e.keyCode===35||e.keyCode===36;r&&e.preventDefault()}},t.prototype.unwireEvents=function(){I.remove(this.element,"click",this.clickHandler),this.destroyScroll(),this.unwireKeyboardEvent(),window.removeEventListener("resize",this.resizeContext),window.removeEventListener("orientationchange",this.orientationChangeContext),document.removeEventListener("scroll",this.clickEvent),document.removeEventListener("click",this.scrollEvent),this.scrollEvent=null,this.clickEvent=null},t.prototype.clearProperty=function(){this.tbarEle=[],this.tbarAlgEle={lefts:[],centers:[],rights:[]}},t.prototype.docEvent=function(e){var i=ge(e.target,".e-popup");this.popObj&&jt(this.popObj.element)&&!i&&this.overflowMode==="Popup"&&this.popObj.hide({name:"FadeOut",duration:100})},t.prototype.destroyScroll=function(){this.scrollModule&&(this.tbarAlign&&this.add(this.scrollModule.element,Di),this.scrollModule.destroy(),this.scrollModule=null)},t.prototype.destroyItems=function(){if(this.element&&[].slice.call(this.element.querySelectorAll("."+Xe)).forEach(function(i){K(i)}),this.tbarAlign){var e=this.element.querySelector("."+We);[].slice.call(e.children).forEach(function(i){K(i)}),this.tbarAlign=!1,this.remove(e,Di)}this.clearProperty()},t.prototype.destroyMode=function(){this.scrollModule&&(this.remove(this.scrollModule.element,_i),this.destroyScroll()),this.remove(this.element,Pu),this.remove(this.element,ny);var e=this.element.querySelector(".e-toolbar-multirow");e&&this.remove(e,iy),this.popObj&&this.popupRefresh(this.popObj.element,!0)},t.prototype.add=function(e,i){e.classList.add(i)},t.prototype.remove=function(e,i){e.classList.remove(i)},t.prototype.elementFocus=function(e){var i=e.firstElementChild;i?(i.focus(),this.activeEleSwitch(e)):e.focus()},t.prototype.clstElement=function(e,i){var r;return e&&this.popObj&&jt(this.popObj.element)?r=this.popObj.element.querySelector("."+Xe):this.element===i||e?r=this.element.querySelector("."+Xe+":not(."+kt+" ):not(."+Ke+" ):not(."+Vi+" )"):r=ge(i,"."+Xe),r},t.prototype.keyHandling=function(e,i,r,n,s){var a=this.popObj,l=this.element,h={name:"FadeOut",duration:100},c=i.action==="moveUp"?"previous":"next",u,p;switch(i.action){case"moveRight":if(this.isVertical)return;l===r?this.elementFocus(e):n||this.eleFocus(e,"next");break;case"moveLeft":if(this.isVertical)return;n||this.eleFocus(e,"previous");break;case"home":case"end":if(e){var f=ge(e,".e-popup"),g=this.element.querySelector("."+el);this.overflowMode==="Extended"&&g&&g.classList.contains("e-popup-open")&&(f=i.action==="end"?g:null),f?jt(this.popObj.element)&&(p=[].slice.call(f.children),i.action==="home"?u=this.focusFirstVisibleEle(p):u=this.focusLastVisibleEle(p)):(p=this.element.querySelectorAll("."+We+" ."+Xe+":not(."+Ke+")"),i.action==="home"?u=this.focusFirstVisibleEle(p):u=this.focusLastVisibleEle(p)),u&&this.elementFocus(u)}break;case"moveUp":case"moveDown":if(this.isVertical)i.action==="moveUp"?this.eleFocus(e,"previous"):this.eleFocus(e,"next");else if(a&&ge(r,".e-popup")){var v=a.element,y=v.firstElementChild;c==="previous"&&y===e?v.lastElementChild.firstChild.focus():c==="next"&&v.lastElementChild===e?y.firstChild.focus():this.eleFocus(e,c)}else i.action==="moveDown"&&a&&jt(a.element)&&this.elementFocus(e);break;case"tab":if(!s&&!n){var C=e.firstElementChild;l===r&&(this.activeEle?this.activeEle.focus():(this.activeEleRemove(C),C.focus()))}break;case"popupClose":a&&this.overflowMode!=="Extended"&&a.hide(h);break;case"popupOpen":if(!n)return;a&&!jt(a.element)?(a.element.style.top=l.offsetHeight+"px",a.show({name:"FadeIn",duration:100})):a.hide(h);break}},t.prototype.keyActionHandler=function(e){var i=e.target;if(!(i.tagName==="INPUT"||i.tagName==="TEXTAREA"||this.element.classList.contains(kt))){e.preventDefault();var r=i.classList.contains(Vt),n=i.classList.contains(ey),s=this.clstElement(r,i);(s||n)&&this.keyHandling(s,e,i,r,n)}},t.prototype.disable=function(e){var i=this.element;e?i.classList.add(kt):i.classList.remove(kt),this.activeEle&&this.activeEle.setAttribute("tabindex",this.activeEle.getAttribute("data-tabindex")),this.scrollModule&&this.scrollModule.disable(e),this.popObj&&(jt(this.popObj.element)&&this.overflowMode!=="Extended"&&this.popObj.hide(),i.querySelector("#"+i.id+"_nav").setAttribute("tabindex",e?"-1":"0"))},t.prototype.eleContains=function(e){return e.classList.contains(Ke)||e.classList.contains(kt)||e.getAttribute("disabled")||e.classList.contains(Vi)||!jt(e)||!e.classList.contains(Xe)},t.prototype.focusFirstVisibleEle=function(e){for(var i,r=0;r<e.length;){var n=e[parseInt(r.toString(),10)];if(!n.classList.contains(Vi)&&!n.classList.contains(kt))return n;r++}return i},t.prototype.focusLastVisibleEle=function(e){for(var i,r=e.length-1;r>=0;){var n=e[parseInt(r.toString(),10)];if(!n.classList.contains(Vi)&&!n.classList.contains(kt))return n;r--}return i},t.prototype.eleFocus=function(e,i){var r=Object(e)[i+"ElementSibling"];if(r){var n=this.eleContains(r);if(n){this.eleFocus(r,i);return}this.elementFocus(r)}else if(this.tbarAlign){var s=Object(e.parentElement)[i+"ElementSibling"];if(!d(s)&&s.children.length===0&&(s=Object(s)[i+"ElementSibling"]),!d(s)&&s.children.length>0)if(i==="next"){var a=s.querySelector("."+Xe);this.eleContains(a)?this.eleFocus(a,i):(a.firstElementChild.focus(),this.activeEleSwitch(a))}else{var a=s.lastElementChild;this.eleContains(a)?this.eleFocus(a,i):this.elementFocus(a)}}else if(!d(e)){var l=this.element.querySelectorAll("."+We+" ."+Xe+":not(."+Ke+"):not(."+kt+"):not(."+Vi+")");i==="next"&&l?this.elementFocus(l[0]):i==="previous"&&l&&this.elementFocus(l[l.length-1])}},t.prototype.clickHandler=function(e){var i=this,r=e.target,n=this.element,s=!d(ge(r,"."+co)),a=r.classList,l=ge(r,"."+Vt);l||(l=r),!n.children[0].classList.contains("e-hscroll")&&!n.children[0].classList.contains("e-vscroll")&&a.contains(Vt)&&(a=r.querySelector(".e-icons").classList),(a.contains(Ja)||a.contains(ho))&&this.popupClickHandler(n,l,_i);var h,c=ge(e.target,"."+Xe);if(!((d(c)||c.classList.contains(kt))&&!l.classList.contains(Vt))){if(c){var u=this.items[this.tbarEle.indexOf(c)];h=u}var p={originalEvent:e,item:h},f=h&&!d(h.click)&&typeof h.click=="object"?!d(h.click.observers)&&h.click.observers.length>0:!d(h)&&!d(h.click);f&&this.trigger("items["+this.tbarEle.indexOf(c)+"].click",p),p.cancel||this.trigger("clicked",p,function(g){!d(i.popObj)&&s&&!g.cancel&&i.overflowMode==="Popup"&&g.item&&g.item.type!=="Input"&&i.popObj.hide({name:"FadeOut",duration:100})})}},t.prototype.popupClickHandler=function(e,i,r){var n=this.popObj;jt(n.element)?(i.classList.remove(uo),n.hide({name:"FadeOut",duration:100})):(e.classList.contains(r)&&(n.enableRtl=!0,n.position={X:"left",Y:"top"}),n.offsetX===0&&!e.classList.contains(r)&&(n.enableRtl=!1,n.position={X:"right",Y:"top"}),this.overflowMode==="Extended"&&(n.element.style.minHeight="0px",n.width=this.getToolbarPopupWidth(this.element)),n.dataBind(),n.refreshPosition(),n.element.style.top=this.getElementOffsetY()+"px",i.classList.add(uo),n.show({name:"FadeIn",duration:100}))},t.prototype.getToolbarPopupWidth=function(e){var i=window.getComputedStyle(e);return parseFloat(i.width)+parseFloat(i.borderRightWidth)*2},t.prototype.render=function(){var e=this;this.initialize(),this.renderControl(),this.wireEvents(),this.clickEvent=this.docEvent.bind(this),this.scrollEvent=this.docEvent.bind(this),this.renderComplete(),this.isReact&&this.portals&&this.portals.length>0&&this.renderReactTemplates(function(){e.refreshOverflow()})},t.prototype.initialize=function(){var e=le(this.width),i=le(this.height);(D.info.name!=="msie"||this.height!=="auto"||this.overflowMode==="MultiRow")&&Ce(this.element,{height:i}),Ce(this.element,{width:e});var r={role:"toolbar","aria-disabled":"false","aria-orientation":this.isVertical?"vertical":"horizontal"};ye(this.element,r),this.cssClass&&Z([this.element],this.cssClass.split(" "))},t.prototype.renderControl=function(){var e=this.element;this.trgtEle=e.children.length>0?e.querySelector("div"):null,this.tbarAlgEle={lefts:[],centers:[],rights:[]},this.renderItems(),this.renderLayout()},t.prototype.renderLayout=function(){this.renderOverflowMode(),this.tbarAlign&&this.itemPositioning(),this.popObj&&this.popObj.element.childElementCount>1&&this.checkPopupRefresh(this.element,this.popObj.element)&&this.popupRefresh(this.popObj.element,!1),this.separator()},t.prototype.itemsAlign=function(e,i){var r,n;this.tbarEle||(this.tbarEle=[]);for(var s=0;s<e.length;s++)r=this.renderSubComponent(e[parseInt(s.toString(),10)],s),this.tbarEle.indexOf(r)===-1&&this.tbarEle.push(r),this.tbarAlign||this.tbarItemAlign(e[parseInt(s.toString(),10)],i,s),n=i.querySelector(".e-toolbar-"+e[parseInt(s.toString(),10)].align.toLowerCase()),n?(e[parseInt(s.toString(),10)].showAlwaysInPopup&&e[parseInt(s.toString(),10)].overflow!=="Show"||this.tbarAlgEle[(e[parseInt(s.toString(),10)].align+"s").toLowerCase()].push(r),n.appendChild(r)):i.appendChild(r);if(this.isReact){var a="portals";this.notify("render-react-toolbar-template",this[""+a]),this.renderReactTemplates()}},t.prototype.changeOrientation=function(){var e=this.element;this.isVertical?(e.classList.remove(Au),this.isVertical=!1,(this.height==="auto"||this.height==="100%")&&(e.style.height=this.height),e.setAttribute("aria-orientation","horizontal")):(e.classList.add(Au),this.isVertical=!0,e.setAttribute("aria-orientation","vertical"),Ce(this.element,{height:le(this.height),width:le(this.width)})),this.destroyMode(),this.refreshOverflow()},t.prototype.initScroll=function(e,i){if(!this.scrollModule&&this.checkOverflow(e,i[0])){this.tbarAlign&&this.element.querySelector("."+We+" ."+ty).removeAttribute("style"),this.isVertical?this.scrollModule=new ND({scrollStep:this.scrollStep,enableRtl:this.enableRtl},i[0]):this.scrollModule=new DD({scrollStep:this.scrollStep,enableRtl:this.enableRtl},i[0]),this.cssClass&&Z([i[0]],this.cssClass.split(" "));var r=this.scrollModule.element.querySelector("."+Ou+", .e-vscroll-bar");r&&r.removeAttribute("tabindex"),this.remove(this.scrollModule.element,Di),Ce(this.element,{overflow:"hidden"})}},t.prototype.itemWidthCal=function(e){var i=this,r=0,n;return[].slice.call(Se("."+Xe,e)).forEach(function(s){jt(s)&&(n=window.getComputedStyle(s),r+=i.isVertical?s.offsetHeight:s.offsetWidth,r+=parseFloat(i.isVertical?n.marginTop:n.marginRight),r+=parseFloat(i.isVertical?n.marginBottom:n.marginLeft))}),r},t.prototype.getScrollCntEle=function(e){var i=this.isVertical?".e-vscroll-content":".e-hscroll-content";return e.querySelector(i)},t.prototype.checkOverflow=function(e,i){if(d(e)||d(i)||!jt(e))return!1;var r=this.isVertical?e.offsetHeight:e.offsetWidth,n=this.isVertical?i.offsetHeight:i.offsetWidth;(this.tbarAlign||this.scrollModule||r===n)&&(n=this.itemWidthCal(this.scrollModule?this.getScrollCntEle(i):i));var s=e.querySelector("."+Vt),a=e.querySelector("."+ey),l=0;return s?l=this.isVertical?s.offsetHeight:s.offsetWidth:a&&(l=this.isVertical?a.offsetHeight*2:a.offsetWidth*2),r>=n&&a?!1:n>r-l},t.prototype.refreshOverflow=function(){this.resize()},t.prototype.toolbarAlign=function(e){this.tbarAlign&&(this.add(e,Di),this.itemPositioning())},t.prototype.renderOverflowMode=function(){var e=this.element,i=e.querySelector("."+We),r=this.popupPriCount>0;if(e&&e.children.length>0)switch(this.offsetWid=e.offsetWidth,this.remove(this.element,"e-toolpop"),D.info.name==="msie"&&this.height==="auto"&&(e.style.height=""),this.overflowMode){case"Scrollable":d(this.scrollModule)&&this.initScroll(e,[].slice.call(e.getElementsByClassName(We)));break;case"Popup":this.add(this.element,"e-toolpop"),this.tbarAlign&&this.removePositioning(),(this.checkOverflow(e,i)||r)&&this.setOverflowAttributes(e),this.toolbarAlign(i);break;case"MultiRow":this.add(i,iy),this.checkOverflow(e,i)&&this.tbarAlign&&(this.removePositioning(),this.add(i,ry)),e.style.overflow==="hidden"&&(e.style.overflow=""),(D.info.name==="msie"||e.style.height!=="auto")&&(e.style.height="auto");break;case"Extended":this.add(this.element,ny),(this.checkOverflow(e,i)||r)&&(this.tbarAlign&&this.removePositioning(),this.setOverflowAttributes(e)),this.toolbarAlign(i)}},t.prototype.setOverflowAttributes=function(e){this.createPopupEle(e,[].slice.call(Se("."+We+" ."+Xe,e)));var i={tabindex:"0",role:"button","aria-haspopup":"true","aria-label":"overflow"};ye(this.element.querySelector("."+Vt),i)},t.prototype.separator=function(){var e=this.element,i=[].slice.call(e.querySelectorAll("."+Ke)),r=e.querySelector("."+ju),n=e.querySelector("."+Lu),s=this.overflowMode==="MultiRow"?r:n;s!==null&&(this.overflowMode==="MultiRow"?s.classList.remove(ju):this.overflowMode==="Extended"&&s.classList.remove(Lu));for(var a=0;a<=i.length-1;a++)i[parseInt(a.toString(),10)].offsetLeft<30&&i[parseInt(a.toString(),10)].offsetLeft!==0&&(this.overflowMode==="MultiRow"?i[parseInt(a.toString(),10)].classList.add(ju):this.overflowMode==="Extended"&&i[parseInt(a.toString(),10)].classList.add(Lu))},t.prototype.createPopupEle=function(e,i){var r=e.querySelector("."+Vt),n=this.isVertical;r||this.createPopupIcon(e),r=e.querySelector("."+Vt);var s=n?r.offsetHeight:r.offsetWidth,a=(n?e.offsetHeight:e.offsetWidth)-s;this.element.classList.remove("e-rtl"),Ce(this.element,{direction:"initial"}),this.checkPriority(e,i,a,!0),this.enableRtl&&this.element.classList.add("e-rtl"),this.element.style.removeProperty("direction"),this.createPopup()},t.prototype.pushingPoppedEle=function(e,i,r,n,s){var a=e.element,l=[].slice.call(Se("."+Pr,a.querySelector("."+We))),h=Se("."+wi,r),c=0,u=0;l.forEach(function(v,y){h=Se("."+wi,r),v.classList.contains(wi)&&h.length>0?e.tbResize&&h.length>y?(r.insertBefore(v,h[parseInt(y.toString(),10)]),++u):(r.insertBefore(v,r.children[h.length]),++u):v.classList.contains(wi)||e.tbResize&&v.classList.contains(Ka)&&r.children.length>0&&h.length===0?(r.insertBefore(v,r.firstChild),++u):v.classList.contains(Ka)?i.push(v):e.tbResize?(r.insertBefore(v,r.childNodes[c+u]),++c):r.appendChild(v),v.classList.contains(Ke)?Ce(v,{display:"",height:s+"px"}):Ce(v,{display:"",height:n+"px"})}),i.forEach(function(v){r.appendChild(v)});for(var p=Se("."+Xe,a.querySelector("."+We)),f=p.length-1;f>=0;f--){var g=p[parseInt(f.toString(),10)];if(g.classList.contains(Ke)&&this.overflowMode!=="Extended")Ce(g,{display:"none"});else break}},t.prototype.createPopup=function(){var e=this.element,i,r;this.overflowMode==="Extended"&&(r=e.querySelector("."+Ke),i=e.style.height==="auto"||e.style.height===""?null:r&&r.offsetHeight);var n=e.querySelector("."+Xe+":not(."+Ke+"):not(."+Pr+")"),s=e.style.height==="auto"||e.style.height===""?null:n&&n.offsetHeight,a,l=[];if(ae("#"+e.id+"_popup."+co,e))a=ae("#"+e.id+"_popup."+co,e);else{var h=this.createElement("div",{id:e.id+"_popup",className:co+" "+el}),c=this.createElement("div",{id:e.id+"_popup",className:co});a=this.overflowMode==="Extended"?h:c}this.pushingPoppedEle(this,l,a,s,i),this.popupInit(e,a)},t.prototype.getElementOffsetY=function(){return this.overflowMode==="Extended"&&window.getComputedStyle(this.element).getPropertyValue("box-sizing")==="border-box"?this.element.clientHeight:this.element.offsetHeight},t.prototype.popupInit=function(e,i){if(this.popObj){if(this.overflowMode!=="Extended"){var s=this.popObj.element;Ce(s,{maxHeight:"",display:"block"}),Ce(s,{maxHeight:s.offsetHeight+"px",display:""})}}else{e.appendChild(i),this.cssClass&&Z([i],this.cssClass.split(" ")),Ce(this.element,{overflow:""});var r=new Ar(null,{relateTo:this.element,offsetY:this.isVertical?0:this.getElementOffsetY(),enableRtl:this.enableRtl,open:this.popupOpen.bind(this),close:this.popupClose.bind(this),collision:{Y:this.enableCollision?"flip":"none"},position:this.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"}});if(this.overflowMode==="Extended"&&(r.width=this.getToolbarPopupWidth(this.element),r.offsetX=0),r.appendTo(i),document.addEventListener("scroll",this.clickEvent),document.addEventListener("click",this.scrollEvent),this.overflowMode!=="Extended"&&(r.element.style.maxHeight=r.element.offsetHeight+"px"),this.isVertical&&(r.element.style.visibility="hidden"),this.isExtendedOpen){var n=this.element.querySelector("."+Vt);n.classList.add(uo),St(n.firstElementChild,[Ja],[ho]),this.element.querySelector("."+el).classList.add($m)}else r.hide();this.popObj=r}},t.prototype.tbarPopupHandler=function(e){this.overflowMode==="Extended"&&(e?this.add(this.element,Pu):this.remove(this.element,Pu))},t.prototype.popupOpen=function(e){var i=this.popObj;this.isVertical||(i.offsetY=this.getElementOffsetY(),i.dataBind());var r=this.popObj.element,n=this.popObj.element.parentElement,s=n.querySelector("."+Vt);s.setAttribute("aria-expanded","true"),this.overflowMode==="Extended"?i.element.style.minHeight="":(Ce(i.element,{height:"auto",maxHeight:""}),i.element.style.maxHeight=i.element.offsetHeight+"px");var a=r.offsetTop+r.offsetHeight+Lt(n).top,l=s.firstElementChild;s.classList.add(uo),St(l,[Ja],[ho]),this.tbarPopupHandler(!0);var h=d(window.scrollY)?0:window.scrollY;if(!this.isVertical&&window.innerHeight+h<a&&this.element.offsetTop<r.offsetHeight){var c=r.offsetHeight-(a-window.innerHeight-h+5);i.height=c+"px";for(var u=0;u<=r.childElementCount;u++){var p=r.children[parseInt(u.toString(),10)];if(p.offsetTop+p.offsetHeight>c){c=p.offsetTop;break}}this.overflowMode!=="Extended"&&Ce(i.element,{maxHeight:c+"px"})}else if(this.isVertical&&this.overflowMode!=="Extended"){var f=this.element.getBoundingClientRect();Ce(i.element,{maxHeight:f.top+this.element.offsetHeight+"px",bottom:0,visibility:""})}if(i){var g=r.getBoundingClientRect();g.right>document.documentElement.clientWidth&&g.width>n.getBoundingClientRect().width&&(i.collision={Y:"none"},i.dataBind()),i.refreshPosition()}},t.prototype.popupClose=function(e){var i=this.element,r=i.querySelector("."+Vt);r.setAttribute("aria-expanded","false");var n=r.firstElementChild;r.classList.remove(uo),St(n,[ho],[Ja]),this.tbarPopupHandler(!1)},t.prototype.checkPriority=function(e,i,r,n){for(var s=this.popupPriCount>0,a=i.length,l=r,h,c,u=0,p=0,f=0,g=function(x,A){var U=!1;return A.forEach(function(z){x.classList.contains(z)&&(U=!0)}),U},v=a-1;v>=0;v--){var y=void 0,C=window.getComputedStyle(i[parseInt(v.toString(),10)]);this.isVertical?(y=parseFloat(C.marginTop),y+=parseFloat(C.marginBottom)):(y=parseFloat(C.marginRight),y+=parseFloat(C.marginLeft));var b=i[parseInt(v.toString(),10)]===this.tbarEle[0];b&&(this.tbarEleMrgn=y),h=this.isVertical?i[parseInt(v.toString(),10)].offsetHeight:i[parseInt(v.toString(),10)].offsetWidth;var M=b?h+y:h;if(g(i[parseInt(v.toString(),10)],[Nu])&&s&&(i[parseInt(v.toString(),10)].classList.add(Pr),this.isVertical?Ce(i[parseInt(v.toString(),10)],{display:"none",minHeight:M+"px"}):Ce(i[parseInt(v.toString(),10)],{display:"none",minWidth:M+"px"}),f++),this.isVertical?c=i[parseInt(v.toString(),10)].offsetTop+i[parseInt(v.toString(),10)].offsetHeight+y>r:c=i[parseInt(v.toString(),10)].offsetLeft+i[parseInt(v.toString(),10)].offsetWidth+y>r,c){if(i[parseInt(v.toString(),10)].classList.contains(Ke)){if(this.overflowMode==="Extended"){var S=i[parseInt(v.toString(),10)];g(S,[Ke,po])&&(i[parseInt(v.toString(),10)].classList.add(Pr),f++),p++}else if(this.overflowMode==="Popup"){if(u>0&&p===f){var S=i[v+p+(u-1)];g(S,[Ke,po])&&Ce(S,{display:"none"})}u++,p=0,f=0}}else p++;i[parseInt(v.toString(),10)].classList.contains(wi)&&n?r-=(this.isVertical?i[parseInt(v.toString(),10)].offsetHeight:i[parseInt(v.toString(),10)].offsetWidth)+y:g(i[parseInt(v.toString(),10)],[Ke,po])?r-=(this.isVertical?i[parseInt(v.toString(),10)].offsetHeight:i[parseInt(v.toString(),10)].offsetWidth)+y:(i[parseInt(v.toString(),10)].classList.add(Pr),this.isVertical?Ce(i[parseInt(v.toString(),10)],{display:"none",minHeight:M+"px"}):Ce(i[parseInt(v.toString(),10)],{display:"none",minWidth:M+"px"}),f++)}}if(n){var N=Se("."+Xe+":not(."+Pr+")",this.element);this.checkPriority(e,N,l,!1)}},t.prototype.createPopupIcon=function(e){var i=e.id.concat("_nav"),r="e-"+e.id.concat("_nav "+RD);r=this.overflowMode==="Extended"?r+" "+BD:r;var n=this.createElement("div",{id:i,className:r});(D.info.name==="msie"||D.info.name==="edge")&&n.classList.add("e-ie-align");var s=this.createElement("div",{className:ho+" e-icons"});n.appendChild(s),n.setAttribute("tabindex","0"),n.setAttribute("role","button"),e.appendChild(n)},t.prototype.tbarPriRef=function(e,i,r,n,s,a,l,h,c){var u=h,p=this.popObj.element,f="."+Xe+":not(."+Ke+"):not(."+wi+")",g=Se("."+Pr+":not(."+wi+")",p).length,v=function(S,N){return S.classList.contains(N)};if(Se(f,e).length===0){var y=e.children[i-(i-r)-1],C=!d(y)&&v(y,po);if(!d(y)&&v(y,Ke)&&!jt(y)||C){y.style.display="unset";var b=y.offsetWidth+parseFloat(window.getComputedStyle(y).marginRight)*2,M=y.previousElementSibling;a+b<l||s?(e.insertBefore(n,e.children[i+u-(i-r)]),d(M)||(M.style.display="")):(Ce(n,c),M.classList.contains(Ke)&&(M.style.display="none")),y.style.display=""}else e.insertBefore(n,e.children[i+u-(i-r)])}else e.insertBefore(n,e.children[i+u-g])},t.prototype.popupRefresh=function(e,i){var r=this,n=this.element,s=this.isVertical,a=n.querySelector("."+We),l=n.querySelector("."+Vt);if(!d(l)){a.removeAttribute("style"),e.style.display="block";var h;s?h=n.offsetHeight-(l.offsetHeight+a.offsetHeight):h=n.offsetWidth-(l.offsetWidth+a.offsetWidth);var c=0;[].slice.call(e.children).forEach(function(u){c+=r.popupEleWidth(u),Ce(u,{position:""})}),h+(s?l.offsetHeight:l.offsetWidth)>c&&this.popupPriCount===0&&(i=!0),this.popupEleRefresh(h,e,i),e.style.display="",e.children.length===0&&l&&this.popObj&&(K(l),l=null,this.popObj.destroy(),K(this.popObj.element),this.popObj=null)}},t.prototype.ignoreEleFetch=function(e,i){var r=[].slice.call(i.querySelectorAll("."+po)),n=[],s=0;if(r.length>0)r.forEach(function(a){n.push([].slice.call(i.children).indexOf(a))});else return 0;return n.forEach(function(a){a<=e&&s++}),s},t.prototype.checkPopupRefresh=function(e,i){i.style.display="block";var r=this.popupEleWidth(i.firstElementChild);i.firstElementChild.style.removeProperty("Position");var n=e.offsetWidth-e.querySelector("."+Vt).offsetWidth,s=e.querySelector("."+We).offsetWidth;return i.style.removeProperty("display"),n>r+s},t.prototype.popupEleWidth=function(e){e.style.position="absolute";var i=this.isVertical?e.offsetHeight:e.offsetWidth,r=e.querySelector("."+FD);if(e.classList.contains("e-tbtn-align")||e.classList.contains(Eu)){var n=e.children[0];!d(r)&&e.classList.contains(Eu)?r.style.display="none":!d(r)&&e.classList.contains(Km)&&(r.style.display="block"),n.style.minWidth="0%",i=parseFloat(this.isVertical?e.style.minHeight:e.style.minWidth),n.style.minWidth="",n.style.minHeight="",d(r)||(r.style.display="")}return i},t.prototype.popupEleRefresh=function(e,i,r){for(var n=this.popupPriCount>0,s=this.tbarEle,a,l,h=this.element.querySelector("."+We),c=0,u=function(b){if(b.classList.contains(Nu)&&n&&!r)return"continue";var M=p.popupEleWidth(b);if(b===p.tbarEle[0]&&(M+=p.tbarEleMrgn),b.style.position="",M<e||r){var S={minWidth:b.style.minWidth,height:b.style.height,minHeight:b.style.minHeight};if(Ce(b,{minWidth:"",height:"",minHeight:""}),b.classList.contains(Ka)||b.classList.remove(Pr),l=p.tbarEle.indexOf(b),p.tbarAlign){var N=p.items[parseInt(l.toString(),10)].align;l=p.tbarAlgEle[(N+"s").toLowerCase()].indexOf(b),s=p.tbarAlgEle[(N+"s").toLowerCase()],h=p.element.querySelector("."+We+" .e-toolbar-"+N.toLowerCase())}var x=0;p.overflowMode!=="Extended"&&s.slice(0,l).forEach(function(A){(A.classList.contains(wi)||A.classList.contains(Ke))&&(A.classList.contains(Ke)&&(A.style.display="",e-=A.offsetWidth),x++)}),c=p.ignoreEleFetch(l,h),b.classList.contains(wi)?(p.tbarPriRef(h,l,x,b,r,M,e,c,S),e-=b.offsetWidth):l===0?(h.insertBefore(b,h.firstChild),e-=b.offsetWidth):(a=Se("."+wi,p.popObj.element).length,h.insertBefore(b,h.children[l+c-a]),e-=b.offsetWidth),b.style.height=""}else return"break"},p=this,f=0,g=[].slice.call(i.children);f<g.length;f++){var v=g[f],y=u(v);if(y==="break")break}var C=this.checkOverflow(this.element,this.element.getElementsByClassName(We)[0]);C&&!r&&this.renderOverflowMode()},t.prototype.removePositioning=function(){var e=this.element.querySelector("."+We);if(!(d(e)||!e.classList.contains(Di))){this.remove(e,Di);var i=[].slice.call(e.childNodes);i[1].removeAttribute("style"),i[2].removeAttribute("style")}},t.prototype.refreshPositioning=function(){var e=this.element.querySelector("."+We);this.add(e,Di),this.itemPositioning()},t.prototype.itemPositioning=function(){var e=this.element.querySelector("."+We),i;if(!(d(e)||!e.classList.contains(Di))){var r=this.element.querySelector("."+Vt),n;if(this.scrollModule){var s=this.isVertical?zD:kD;n=[].slice.call(e.querySelector("."+s).children)}else n=[].slice.call(e.childNodes);this.isVertical?i=n[0].offsetHeight+n[2].offsetHeight:i=n[0].offsetWidth+n[2].offsetWidth;var a=this.isVertical?this.element.offsetHeight:this.element.offsetWidth;if(r){a-=this.isVertical?r.offsetHeight:r.offsetWidth;var l=(this.isVertical?r.offsetHeight:r.offsetWidth)+"px";n[2].removeAttribute("style"),this.isVertical?this.enableRtl?n[2].style.top=l:n[2].style.bottom=l:this.enableRtl?n[2].style.left=l:n[2].style.right=l}if(!(a<=i)){var h=(a-i-(this.isVertical?n[1].offsetHeight:n[1].offsetWidth))/2;n[1].removeAttribute("style");var c=(this.isVertical?n[0].offsetHeight:n[0].offsetWidth)+h+"px";this.isVertical?this.enableRtl?n[1].style.marginBottom=c:n[1].style.marginTop=c:this.enableRtl?n[1].style.marginRight=c:n[1].style.marginLeft=c}}},t.prototype.tbarItemAlign=function(e,i,r){var n=this;if(!(e.showAlwaysInPopup&&e.overflow!=="Show")){var s=[];if(s.push(this.createElement("div",{className:PD,attrs:{role:"group"}})),s.push(this.createElement("div",{className:ty,attrs:{role:"group"}})),s.push(this.createElement("div",{className:LD,attrs:{role:"group"}})),r===0&&e.align!=="Left")s.forEach(function(h){i.appendChild(h)}),this.tbarAlign=!0,this.add(i,Di);else if(e.align!=="Left"){var a=i.childNodes,l=s[0];[].slice.call(a).forEach(function(h){n.tbarAlgEle.lefts.push(h),l.appendChild(h)}),i.appendChild(l),i.appendChild(s[1]),i.appendChild(s[2]),this.tbarAlign=!0,this.add(i,Di)}}},t.prototype.ctrlTemplate=function(){var e=this;this.ctrlTem=this.trgtEle.cloneNode(!0),this.add(this.trgtEle,We),this.tbarEle=[];var i=[].slice.call(this.trgtEle.children);i.forEach(function(r){r.tagName==="DIV"&&(e.tbarEle.push(r),d(r.firstElementChild)||r.firstElementChild.setAttribute("aria-disabled","false"),e.add(r,Xe))})},t.prototype.renderItems=function(){var e=this.element,i=this.items;if(this.trgtEle!=null)this.ctrlTemplate();else if(e&&i.length>0){var r=void 0;e&&e.children.length>0&&(r=e.querySelector("."+We)),r||(r=this.createElement("div",{className:We})),this.itemsAlign(i,r),e.appendChild(r)}},t.prototype.setAttr=function(e,i){for(var r=Object.keys(e),n,s=0;s<r.length;s++)n=r[parseInt(s.toString(),10)],n==="class"?this.add(i,e[""+n]):i.setAttribute(n,e[""+n])},t.prototype.enableItems=function(e,i){var r=e,n=r.length,s;d(i)&&(i=!0);var a=function(u,p){u?(p.classList.remove(kt),d(p.firstElementChild)||p.firstElementChild.setAttribute("aria-disabled","false")):(p.classList.add(kt),d(p.firstElementChild)||p.firstElementChild.setAttribute("aria-disabled","true"))};if(!d(n)&&n>=1){for(var l=0,h=[].slice.call(r);l<n;l++){var c=h[parseInt(l.toString(),10)];if(typeof c=="number"){if(s=this.getElementByIndex(c),d(s))return;r[parseInt(l.toString(),10)]=s}else s=c;a(i,s)}i?ee(r,kt):Z(r,kt)}else{if(typeof r=="number"){if(s=this.getElementByIndex(r),d(s))return}else s=e;a(i,s)}},t.prototype.getElementByIndex=function(e){return this.tbarEle[parseInt(e.toString(),10)]?this.tbarEle[parseInt(e.toString(),10)]:null},t.prototype.addItems=function(e,i){var r;this.extendedOpen();var n=this.element.querySelector("."+We);if(d(n)){this.itemsRerender(e);return}var s,a="Left";d(i)&&(i=0),e.forEach(function(f){!d(f.align)&&f.align!=="Left"&&a==="Left"&&(a=f.align)});for(var l=0,h=e;l<h.length;l++){var c=h[l];if(d(c.type)&&(c.type="Button"),r=Se("."+Xe,this.element),c.align=a,s=this.renderSubComponent(c,i),this.tbarEle.length>=i&&r.length>=0){d(this.scrollModule)&&this.destroyMode();var u=c.align[0]==="L"?0:c.align[0]==="C"?1:2,p=void 0;!this.tbarAlign&&a!=="Left"?(this.tbarItemAlign(c,n,1),this.tbarAlign=!0,p=ge(r[0],"."+We).children[parseInt(u.toString(),10)],p.appendChild(s),this.tbarAlgEle[(c.align+"s").toLowerCase()].push(s),this.refreshPositioning()):this.tbarAlign?(p=ge(r[0],"."+We).children[parseInt(u.toString(),10)],p.insertBefore(s,p.children[parseInt(i.toString(),10)]),this.tbarAlgEle[(c.align+"s").toLowerCase()].splice(i,0,s),this.refreshPositioning()):r.length===0?(r=Se("."+We,this.element),r[0].appendChild(s)):r[0].parentNode.insertBefore(s,r[parseInt(i.toString(),10)]),this.items.splice(i,0,c),c.template&&this.tbarEle.splice(this.tbarEle.length-1,1),this.tbarEle.splice(i,0,s),i++,this.offsetWid=n.offsetWidth}}n.style.width="",this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()},t.prototype.removeItems=function(e){var i=e,r,n=[].slice.call(Se("."+Xe,this.element));if(typeof i=="number")r=parseInt(e.toString(),10),this.removeItemByIndex(r,n);else if(i&&i.length>1)for(var s=0,a=[].slice.call(i);s<a.length;s++){var l=a[s];r=this.tbarEle.indexOf(l),this.removeItemByIndex(r,n),n=Se("."+Xe,this.element)}else{var l=i&&i.length&&i.length===1?i[0]:e;r=n.indexOf(l),this.removeItemByIndex(r,n)}this.resize()},t.prototype.removeItemByIndex=function(e,i){if(this.tbarEle[parseInt(e.toString(),10)]&&i[parseInt(e.toString(),10)]){var r=this.tbarEle.indexOf(i[parseInt(e.toString(),10)]);if(this.tbarAlign){var n=this.tbarAlgEle[(this.items[parseInt(r.toString(),10)].align+"s").toLowerCase()].indexOf(this.tbarEle[parseInt(r.toString(),10)]);this.tbarAlgEle[(this.items[parseInt(r.toString(),10)].align+"s").toLowerCase()].splice(parseInt(n.toString(),10),1)}this.isReact&&this.clearToolbarTemplate(i[parseInt(e.toString(),10)]);var s=i[parseInt(e.toString(),10)].querySelector(".e-control.e-btn");!d(s)&&!d(s.ej2_instances[0])&&!s.ej2_instances[0].isDestroyed&&s.ej2_instances[0].destroy(),K(i[parseInt(e.toString(),10)]),this.items.splice(r,1),this.tbarEle.splice(r,1)}},t.prototype.templateRender=function(e,i,r,n){var s=r.type,a=e,l;if(typeof e=="object"&&(l=typeof a.appendTo=="function"),typeof e=="string"||!l){var h=void 0,c=e,u=new RegExp(/<(?=.*? .*?\/ ?>|br|hr|input|!--|wbr)[a-z]+.*?>|<([a-z]+).*?<\/\1>/i);c=typeof e=="string"?e.trim():e;try{if(typeof e=="object"&&!d(e.tagName))i.appendChild(e);else if(typeof e=="string"&&u.test(c))i.innerHTML=c;else if(document.querySelectorAll(c).length){var p=document.querySelector(c),f=p.outerHTML.trim();i.appendChild(p),p.style.display="",d(f)||this.tempId.push(c)}else h=rt(c)}catch{h=rt(c)}var g=void 0;if(!d(h)){var v=this.element.id+n+"_template";g=h({},this,"template",v,this.isStringTemplate,void 0,void 0,this.root)}!d(g)&&g.length>0&&[].slice.call(g).forEach(function(C){d(C.tagName)||(C.style.display=""),i.appendChild(C)})}else if(s==="Input"){var p=this.createElement("input");r.id?p.id=r.id:p.id=Je("tbr-ipt"),i.appendChild(p),a.appendTo(p)}this.add(i,Jm);var y=i.firstElementChild;d(y)||(y.setAttribute("tabindex",d(y.getAttribute("tabIndex"))?"-1":this.getDataTabindex(y)),y.setAttribute("data-tabindex",d(y.getAttribute("tabIndex"))?"-1":this.getDataTabindex(y))),this.tbarEle.push(i)},t.prototype.buttonRendering=function(e,i){var r=this.createElement("button",{className:jD});r.setAttribute("type","button");var n=e.text,s,a;e.id?r.id=e.id:r.id=Je("e-tbr-btn");var l=this.createElement("span",{className:"e-tbar-btn-text"});n?(l.innerHTML=this.enableHtmlSanitizer?nt.sanitize(n):n,r.appendChild(l),r.classList.add("e-tbtn-txt")):this.add(i,"e-tbtn-align"),(e.prefixIcon||e.suffixIcon)&&(e.prefixIcon&&e.suffixIcon||e.prefixIcon?(s=e.prefixIcon+" e-icons",a="Left"):(s=e.suffixIcon+" e-icons",a="Right"));var h=new bi({iconCss:s,iconPosition:a});return h.createElement=this.createElement,h.appendTo(r),e.width&&Ce(r,{width:le(e.width)}),r},t.prototype.renderSubComponent=function(e,i){var r,n=this.createElement("div",{className:Xe}),s=this.createElement("div",{innerHTML:this.enableHtmlSanitizer&&!d(e.tooltipText)?nt.sanitize(e.tooltipText):e.tooltipText});if(this.tbarEle||(this.tbarEle=[]),e.htmlAttributes&&this.setAttr(e.htmlAttributes,n),e.tooltipText&&n.setAttribute("title",s.textContent),e.cssClass&&(n.className=n.className+" "+e.cssClass),e.template)this.templateRender(e.template,n,e,i);else switch(e.type){case"Button":r=this.buttonRendering(e,n),r.setAttribute("tabindex",d(e.tabIndex)?"-1":e.tabIndex.toString()),r.setAttribute("data-tabindex",d(e.tabIndex)?"-1":e.tabIndex.toString()),r.setAttribute("aria-label",e.text||e.tooltipText),r.setAttribute("aria-disabled","false"),n.appendChild(r),n.addEventListener("click",this.itemClick.bind(this));break;case"Separator":this.add(n,Ke);break}if(e.showTextOn){var a=e.showTextOn;a==="Toolbar"?(this.add(n,Km),this.add(n,"e-tbtn-align")):a==="Overflow"&&this.add(n,Eu)}if(e.overflow){var l=e.overflow;l==="Show"?this.add(n,wi):l==="Hide"&&(n.classList.contains(Ke)||this.add(n,Ka))}return e.overflow!=="Show"&&e.showAlwaysInPopup&&!n.classList.contains(Ke)&&(this.add(n,Nu),this.popupPriCount++),e.disabled&&this.add(n,kt),e.visible===!1&&this.add(n,Vi),n},t.prototype.getDataTabindex=function(e){return d(e.getAttribute("data-tabindex"))?"-1":e.getAttribute("data-tabindex")},t.prototype.itemClick=function(e){this.activeEleSwitch(e.currentTarget)},t.prototype.activeEleSwitch=function(e){this.activeEleRemove(e.firstElementChild),this.activeEle.focus()},t.prototype.activeEleRemove=function(e){var i=this.element.querySelector("."+Xe+":not(."+kt+" ):not(."+Ke+" ):not(."+Vi+" )");if(d(this.activeEle)||(this.activeEle.setAttribute("tabindex",this.getDataTabindex(this.activeEle)),i&&i.removeAttribute("tabindex"),i=this.activeEle),this.activeEle=e,this.getDataTabindex(this.activeEle)==="-1")if(d(this.trgtEle)&&!e.parentElement.classList.contains(Jm)){if(!d(this.element.querySelector(".e-hor-nav"))&&this.element.querySelector(".e-hor-nav").classList.contains("e-nav-active")){this.updateTabIndex("0");var r=this.getDataTabindex(i)==="-1"?"0":this.getDataTabindex(i);i.setAttribute("tabindex",r)}else this.updateTabIndex("-1");e.removeAttribute("tabindex")}else{var n=parseInt(this.getDataTabindex(this.activeEle),10)+1;this.activeEle.setAttribute("tabindex",n.toString())}},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.getModuleName=function(){return"toolbar"},t.prototype.itemsRerender=function(e){this.items=this.tbarItemsCol,(this.isReact||this.isAngular)&&this.clearTemplate(),this.destroyMode(),this.destroyItems(),this.items=e,this.tbarItemsCol=this.items,this.renderItems(),this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()},t.prototype.resize=function(){var e=this.element;this.tbResize=!0,this.tbarAlign&&this.itemPositioning(),this.popObj&&this.overflowMode==="Popup"&&this.popObj.hide();var i=this.checkOverflow(e,e.getElementsByClassName(We)[0]);if(!i){this.destroyScroll();var r=e.querySelector("."+We);d(r)||(this.remove(r,ry),this.tbarAlign&&this.add(r,Di))}i&&this.scrollModule&&this.offsetWid===e.offsetWidth||((this.offsetWid>e.offsetWidth||i)&&this.renderOverflowMode(),this.popObj&&(this.overflowMode==="Extended"&&(this.popObj.width=this.getToolbarPopupWidth(this.element)),this.tbarAlign&&this.removePositioning(),this.popupRefresh(this.popObj.element,!1),this.tbarAlign&&this.refreshPositioning()),this.element.querySelector("."+Ou)&&(this.scrollStep=this.element.querySelector("."+Ou).offsetWidth),this.offsetWid=e.offsetWidth,this.tbResize=!1,this.separator())},t.prototype.orientationChange=function(){var e=this;setTimeout(function(){e.resize()},500)},t.prototype.extendedOpen=function(){var e=this.element.querySelector("."+el);this.overflowMode==="Extended"&&e&&(this.isExtendedOpen=e.classList.contains($m))},t.prototype.updateHideEleTabIndex=function(e,i,r,n,s){r&&(n=s.indexOf(e));for(var a=s[++n];a;){var l=this.eleContains(a);if(!l){var h=a.firstElementChild.getAttribute("data-tabindex");i&&h==="-1"?a.firstElementChild.setAttribute("tabindex","0"):h!==a.firstElementChild.getAttribute("tabindex")&&a.firstElementChild.setAttribute("tabindex",h);break}a=s[++n]}},t.prototype.clearToolbarTemplate=function(e){if(this.registeredTemplate&&this.registeredTemplate.template)for(var i=this.registeredTemplate,r=0;r<i.template.length;r++){var n=i.template[parseInt(r.toString(),10)].rootNodes[0],s=ge(n,"."+Xe);if(!d(s)&&s===e){this.clearTemplate(["template"],[i.template[parseInt(r.toString(),10)]]);break}}else if(this.portals&&this.portals.length>0)for(var a=this.portals,r=0;r<a.length;r++){var l=a[parseInt(r.toString(),10)],s=ge(l.containerInfo,"."+Xe);if(!d(s)&&s===e){this.clearTemplate(["template"],r);break}}},t.prototype.onPropertyChanged=function(e,i){var r=this.element;this.extendedOpen();for(var n=0,s=Object.keys(e);n<s.length;n++){var a=s[n];switch(a){case"items":if(e.items instanceof Array&&i.items instanceof Array)this.itemsRerender(e.items);else for(var l=Object.keys(e.items),h=0;h<l.length;h++){var c=parseInt(Object.keys(e.items)[parseInt(h.toString(),10)],10),u=Object.keys(e.items[parseInt(c.toString(),10)])[0],p=Object(e.items[parseInt(c.toString(),10)])[""+u];if(this.tbarAlign||u==="align"){this.refresh(),this.trigger("created");break}var f=u==="showAlwaysInPopup"&&!p,g=u==="overflow"&&this.popupPriCount!==0;(f||this.items[parseInt(c.toString(),10)].showAlwaysInPopup&&g)&&--this.popupPriCount,d(this.scrollModule)&&this.destroyMode();var v=[].slice.call(Se("."+We+" ."+Xe,r));this.isReact&&this.items[parseInt(c.toString(),10)].template&&this.clearToolbarTemplate(v[parseInt(c.toString(),10)]),K(v[parseInt(c.toString(),10)]),this.tbarEle.splice(c,1),this.addItems([this.items[parseInt(c.toString(),10)]],c),this.items.splice(c,1),this.items[parseInt(c.toString(),10)].template&&this.tbarEle.splice(this.items.length,1)}break;case"width":Ce(r,{width:le(e.width)}),this.refreshOverflow();break;case"height":Ce(this.element,{height:le(e.height)});break;case"overflowMode":this.destroyMode(),this.renderOverflowMode(),this.enableRtl&&this.add(r,_i),this.refreshOverflow();break;case"enableRtl":e.enableRtl?this.add(r,_i):this.remove(r,_i),d(this.scrollModule)||(e.enableRtl?this.add(this.scrollModule.element,_i):this.remove(this.scrollModule.element,_i)),d(this.popObj)||(e.enableRtl?this.add(this.popObj.element,_i):this.remove(this.popObj.element,_i)),this.tbarAlign&&this.itemPositioning();break;case"scrollStep":this.scrollModule&&(this.scrollModule.scrollStep=this.scrollStep);break;case"enableCollision":this.popObj&&(this.popObj.collision={Y:this.enableCollision?"flip":"none"});break;case"cssClass":i.cssClass&&ee([this.element],i.cssClass.split(" ")),e.cssClass&&Z([this.element],e.cssClass.split(" "));break;case"allowKeyboard":this.unwireKeyboardEvent(),e.allowKeyboard&&this.wireKeyboardEvent();break}}},t.prototype.hideItem=function(e,i){var r=typeof e=="object",n=e,s;if(!(!r&&d(n))){var a=[].slice.call(Se("."+Xe,this.element));if(r)s=e;else if(this.tbarEle[parseInt(n.toString(),10)]){var l=[].slice.call(Se("."+Xe,this.element));s=l[parseInt(n.toString(),10)]}s&&(i?(s.classList.add(Vi),s.classList.contains(Ke)||(d(s.firstElementChild.getAttribute("tabindex"))||s.firstElementChild.getAttribute("tabindex")!=="-1")&&this.updateHideEleTabIndex(s,i,r,n,a)):(s.classList.remove(Vi),s.classList.contains(Ke)||this.updateHideEleTabIndex(s,i,r,n,a)),this.refreshOverflow())}},ze([mi([],HD)],t.prototype,"items",void 0),ze([w("auto")],t.prototype,"width",void 0),ze([w("auto")],t.prototype,"height",void 0),ze([w("")],t.prototype,"cssClass",void 0),ze([w("Scrollable")],t.prototype,"overflowMode",void 0),ze([w()],t.prototype,"scrollStep",void 0),ze([w(!0)],t.prototype,"enableCollision",void 0),ze([w(!0)],t.prototype,"enableHtmlSanitizer",void 0),ze([w(!0)],t.prototype,"allowKeyboard",void 0),ze([Q()],t.prototype,"clicked",void 0),ze([Q()],t.prototype,"created",void 0),ze([Q()],t.prototype,"destroyed",void 0),ze([Q()],t.prototype,"beforeCreate",void 0),t=ze([Qe],t),t}(dt);var UD=function(){function o(t){this.croppedDegree=0,this.cropDestPoints={startX:0,startY:0,width:0,height:0},this.tempFlipPanPoint={x:0,y:0},this.isPreventScaling=!1,this.isInitCrop=!1,this.isTransformCrop=!1,this.parent=t,this.addEventListener()}return o.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},o.prototype.addEventListener=function(){this.parent.on("crop",this.cropping,this),this.parent.on("destroyed",this.destroy,this)},o.prototype.removeEventListener=function(){this.parent.off("crop",this.cropping),this.parent.off("destroyed",this.destroy)},o.prototype.cropping=function(t){switch(this.updateCropPvtVar(),t.prop){case"cropCircle":this.cropCircle(t.value.context,t.value.isSave,t.value.isFlip);break;case"setCurrSelPoints":this.setCurrSelPoints(t.value.isSetDimension);break;case"updateRotatePan":this.updateRotatePan();break;case"crop":this.crop(t.value.obj);break;case"calcRatio":this.calcRatio(t.value.obj,t.value.dimension);break;case"getCurrFlipState":this.getCurrFlipState(t.value.panObj);break;case"getPreviousCropCurrentObj":t.value.obj.prevObj=this.prevCropCurrObj;break;case"setPreviousCropCurrentObj":this.prevCropCurrObj=t.value.obj;break;case"setCropDestPoints":this.cropDestPoints=t.value.point;break;case"getTempFlipPanPoint":t.value.obj.point=this.tempFlipPanPoint;break;case"setTempFlipPanPoint":d(t.value.isAdd)?this.tempFlipPanPoint=t.value.point:(this.tempFlipPanPoint.x+=t.value.point.x,this.tempFlipPanPoint.y+=t.value.point.y);break;case"getPreventScaling":t.value.obj.bool=this.isPreventScaling;break;case"adjustStraightenForShapes":this.adjustStraightenForShapes(t.value.type,t.value.isInitialRotated);break;case"resizeWrapper":this.resizeWrapper();break;case"setTransformCrop":this.isTransformCrop=t.value.bool;break;case"setInitCrop":this.isInitCrop=t.value.bool;break;case"resetZoom":this.resetZoom();break;case"revertTransform":this.revertTransform(t.value.type,t.value.coll);break;case"reset":this.reset();break}},o.prototype.getModuleName=function(){return"crop"},o.prototype.updateCropPvtVar=function(){var t=this.parent;t.lowerCanvas&&(this.lowerContext=t.lowerCanvas.getContext("2d")),t.upperCanvas&&(this.upperContext=t.upperCanvas.getContext("2d"))},o.prototype.reset=function(){this.prevCropCurrObj=null,this.croppedDegree=0,this.cropDestPoints={startX:0,startY:0,width:0,height:0},this.tempFlipPanPoint={x:0,y:0},this.isPreventScaling=!1,this.isInitCrop=!1,this.isTransformCrop=!1},o.prototype.cropImg=function(t){for(var e=this.parent,i=d(t),r=e.element.querySelector("#"+e.element.id+"_nonaspectratio"),n=e.activeObj.activePoint,s=e.img,a=!1,l=0,h=e.rotateFlipColl.length;l<h;l++){var c=e.rotateFlipColl[l];(c===90||c===-90)&&(a=!0)}if(e.notify("draw",{prop:"setImageEdited",onPropertyChange:!1}),(i||r)&&(this.croppedDegree=e.transform.degree),i&&e.transform.degree!==0||a){this.updateCropObj();var u={startX:s.destLeft,startY:s.destTop,width:s.destWidth,height:s.destHeight};e.notify("transform",{prop:"setCurrDestinationPoint",onPropertyChange:!1,value:{point:u}}),this.rotateCrop()}else if(i&&e.transform.currFlipState!==""){this.updateCropObj();var u={startX:s.destLeft,startY:s.destTop,width:s.destWidth,height:s.destHeight};e.notify("transform",{prop:"setCurrDestinationPoint",onPropertyChange:!1,value:{point:u}}),this.flipCrop()}else{this.adjustStraightenForShapes("initial",!1),e.notify("draw",{prop:"setTempZoomFactor",onPropertyChange:!1,value:{tempZoomFactor:e.transform.zoomFactor}});var p=this.calcRatio();if(i||!t){this.updateCropObj(),e.notify("draw",{prop:"resetPanPoints",onPropertyChange:!1}),e.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1});var u={startX:s.destLeft,startY:s.destTop,width:s.destWidth,height:s.destHeight};e.notify("transform",{prop:"setCurrDestinationPoint",onPropertyChange:!1,value:{point:u}}),e.currSelectionPoint=m({},e.activeObj,{},!0),this.cropDestPoints={startX:s.destLeft,startY:s.destTop,width:s.destWidth,height:s.destHeight}}var f={width:0,height:0};e.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:n.width*p.width,height:n.height*p.height,obj:f,isImgShape:null}});var g=f;this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),this.lowerContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),e.img={srcLeft:n.startX*p.width-s.destLeft*p.width,srcTop:n.startY*p.height-s.destTop*p.height,srcWidth:n.width*p.width,srcHeight:n.height*p.height,destLeft:(e.lowerCanvas.clientWidth-g.width)/2,destTop:(e.lowerCanvas.clientHeight-g.height+1)/2,destWidth:g.width,destHeight:g.height};var v=this.lowerContext.filter;e.notify("draw",{prop:"drawImage",onPropertyChange:!1}),this.lowerContext.filter="none";var y=m({},e.activeObj,{},!0);this.cropObjColl(),e.transform.straighten=0,e.activeObj=y,this.cropFreehandDrawColl(),e.shapeColl=[],e.notify("shape",{prop:"updateShapeColl",onPropertyChange:!1}),e.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:null}}),e.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),e.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}}),e.currSelectionPoint&&e.currSelectionPoint.shape==="crop-circle"?this.cropCircle(this.lowerContext):e.isCircleCrop=!1,this.lowerContext.filter=v,e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),e.currObjType.isCustomCrop=!1,e.pan(!1),e.transform.defaultZoomFactor=0}},o.prototype.adjustStraightenForShapes=function(t,e){for(var i=this.parent,r={x:i.img.destLeft+i.img.destWidth/2,y:i.img.destTop+i.img.destHeight/2},n=0,s=i.objColl;n<s.length;n++){var a=s[n];if(["rectangle","ellipse","text","image","redact"].indexOf(a.shape)!==-1&&(e||a.rotatedAngle!==0)){var l=a.activePoint,h=l.startX,c=l.startY,u=l.width,p=l.height,f=t==="initial"?a.rotatedAngle:-a.rotatedAngle,g=h+u/2-r.x,v=c+p/2-r.y,y=Math.cos(f),C=Math.sin(f),b=y*g-C*v+r.x,M=C*g+y*v+r.y,S=b-h-u/2,N=M-c-p/2;a.activePoint.startX+=S,a.activePoint.startY+=N,a.activePoint.endX+=S,a.activePoint.endY+=N}}},o.prototype.updateCropObj=function(){this.parent.afterCropActions=[];var t={currObj:{}};this.parent.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:t}});var e=t.currObj;e.straighten=this.parent.transform.straighten,this.parent.cropObj=m({},e,{},!0)},o.prototype.rotateCrop=function(){var t=this.parent,e=this.getCurrFlipState(),i=t.activeObj.shape||"";t.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),t.currSelectionPoint=m({},t.activeObj,{},!0),t.objColl.push(t.activeObj),t.activeObj=m({},t.objColl[t.objColl.length-1],{},!0);var r=m({},t.objColl[t.objColl.length-1],{},!0),n=m({},t.currSelectionPoint,{},!0),s={bool:null};t.notify("transform",{prop:"getPreventSelect",onPropertyChange:!1,value:{obj:s}}),t.notify("transform",{prop:"setPreventSelect",onPropertyChange:!1,value:{bool:!0}});var a=m([],t.rotateFlipColl,[],!0);this.panToSelRangle(!0),r=m({},t.objColl[t.objColl.length-1],{},!0),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:r}}),t.objColl.pop(),t.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),t.objColl.push(t.activeObj);var l=t.transform.straighten;l!==0&&(t.transform.straighten=0,t.straightenBaseImageCanvas(),t.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:null}}),t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),t.notify("draw",{prop:"render-image",value:{isMouseWheel:!1}})),this.resetZoom();var h=m([],t.afterCropActions,[],!0);this.revertTransform("initial",a),l!==0&&(t.transform.straighten=e==="horizontal"||e==="vertical"?-l:l,t.straightenBaseImageCanvas(),t.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:null}}),t.notify("draw",{prop:"render-image",value:{isMouseWheel:!1}}),t.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:null}})),r=m({},t.objColl[t.objColl.length-1],{},!0),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:r}}),t.objColl.pop(),t.transform.degree=0;var c={isIntersect:null};t.notify("draw",{prop:"updateImgCanvasPoints",onPropertyChange:!1}),t.notify("draw",{prop:"isLinesIntersect",onPropertyChange:!1,value:{obj:c}});for(var u=0;l!==0&&c.isIntersect&&(u++,u!==50);)t.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:.025,zoomPoint:null},isResize:null}),t.notify("draw",{prop:"updateImgCanvasPoints",onPropertyChange:!1}),t.notify("draw",{prop:"isLinesIntersect",onPropertyChange:!1,value:{obj:c}});this.cropImg(!0),this.revertTransform("reverse",a),t.afterCropActions=h,t.currSelectionPoint=n,t.notify("transform",{prop:"setPreventSelect",onPropertyChange:!1,value:{bool:s.bool}}),t.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),t.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}}),i==="crop-circle"&&this.cropCircle(this.lowerContext),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.notify("draw",{prop:"resetPanPoints",onPropertyChange:!1})},o.prototype.revertTransform=function(t,e){var i=this.parent,r={isRotate:!1};if(t==="initial")for(var n=e.length-1;n>=0;n--){var s=e[n];switch(s){case 90:i.notify("transform",{prop:"rotate",value:{degree:-90,obj:r}});break;case-90:i.notify("transform",{prop:"rotate",value:{degree:90,obj:r}});break;default:i.notify("transform",{prop:"flipImage",value:{direction:i.toPascalCase(s.toString())}});break}}else{this.updateFlipState();for(var n=0,a=e.length;n<a;n++){var s=e[n];switch(s){case 90:i.notify("transform",{prop:"rotate",value:{degree:90,obj:r}});break;case-90:i.notify("transform",{prop:"rotate",value:{degree:-90,obj:r}});break;default:i.notify("transform",{prop:"flipImage",value:{direction:i.toPascalCase(s.toString())}});break}}}},o.prototype.updateFlipState=function(){for(var t=this.parent,e=t.objColl,i=0,r=e.length;i<r;i++)e[i].shapeFlip="";for(var n=t.pointColl,i=0;i<t.freehandCounter;i++)n[i].shapeFlip=""},o.prototype.resetZoom=function(){var t=this.parent;if(t.transform.zoomFactor>0){var e=t.transform.zoomFactor,i=t.isUndoRedo;t.setProperties({zoomSettings:{zoomFactor:e*10}},!0),t.notify("transform",{prop:"setPreviousZoomValue",onPropertyChange:!1,value:{previousZoomValue:t.zoomSettings.zoomFactor}});for(var r=0;r<e*10;r++)t.isUndoRedo=!0,t.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-.1,zoomPoint:null},isResize:null});t.isUndoRedo=i,t.notify("draw",{prop:"resetPanPoints",onPropertyChange:!1})}},o.prototype.flipCrop=function(){var t=this.parent;t.notify("transform",{prop:"setReverseFlip",onPropertyChange:!1,value:{isReverseFlip:!0}}),t.panPoint.totalPannedPoint.x+=this.tempFlipPanPoint.x,t.panPoint.totalPannedPoint.y+=this.tempFlipPanPoint.y;var e=t.transform.currFlipState,i={flipColl:null};t.notify("transform",{prop:"getFlipColl",onPropertyChange:!1,value:{obj:i}});var r=i.flipColl;if(t.notify("transform",{prop:"setFlipColl",onPropertyChange:!1,value:{flipColl:[]}}),t.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),t.objColl.push(t.activeObj),t.transform.degree===0){var n=-t.cropObj.totalPannedPoint.x,s=-t.cropObj.totalPannedPoint.y;t.img.destLeft+=n,t.img.destTop+=s,t.notify("transform",{prop:"drawPannImage",value:{point:{x:n,y:s}}}),t.activeObj=m({},t.objColl[t.objColl.length-1],{},!0),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:t.activeObj}}),t.objColl.pop(),t.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),t.objColl.push(t.activeObj)}this.resetZoom(),t.currSelectionPoint=m({},t.objColl[t.objColl.length-1],{},!0),this.lowerContext.clearRect(0,0,t.lowerCanvas.width,t.lowerCanvas.height),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height);var a=this.lowerContext.filter;t.notify("draw",{prop:"drawImage",onPropertyChange:!1}),this.updateFlipState(),t.notify("shape",{prop:"redrawObj",onPropertyChange:!1,value:{degree:this.getCurrFlipState()}}),t.notify("freehand-draw",{prop:"flipFHDColl",onPropertyChange:!1,value:{value:this.getCurrFlipState()}}),t.activeObj=m({},t.objColl[t.objColl.length-1],{},!0),t.objColl.pop(),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}}),this.cropImg(!0),t.notify("transform",{prop:"setReverseRotate",onPropertyChange:!1,value:{bool:!0}}),this.lowerContext.setTransform(1,0,0,1,0,0),t.notify("draw",{prop:"setDestPoints",onPropertyChange:!1}),t.notify("draw",{prop:"currTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,context:null,isPreventCircleCrop:null}}),t.notify("draw",{prop:"drawImage",onPropertyChange:!1}),this.lowerContext.filter=a,t.notify("draw",{prop:"setRotateZoom",onPropertyChange:!1,value:{isRotateZoom:!1}}),t.notify("draw",{prop:"currTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:null,context:null,isPreventCircleCrop:null}}),t.transform.currFlipState=e,t.notify("transform",{prop:"setFlipColl",onPropertyChange:!1,value:{flipColl:r}}),this.lowerContext.filter="none",this.updateFlipState(),t.notify("shape",{prop:"redrawObj",onPropertyChange:!1,value:{degree:this.getCurrFlipState()}}),t.notify("freehand-draw",{prop:"flipFHDColl",onPropertyChange:!1,value:{value:this.getCurrFlipState()}}),t.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:null}}),this.lowerContext.filter=a,(t.currSelectionPoint&&t.currSelectionPoint.shape==="crop-circle"||t.isCircleCrop)&&this.cropCircle(this.lowerContext),t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),t.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),t.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}}),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.notify("transform",{prop:"setReverseFlip",onPropertyChange:!1,value:{isReverseFlip:!1}}),t.notify("draw",{prop:"resetPanPoints",onPropertyChange:!1}),this.tempFlipPanPoint={x:0,y:0}},o.prototype.cropObjColl=function(){var t=this.parent,e,i,r;if(t.objColl.length>0)for(var n=0,s=t.objColl.length;n<s;n++){r=t.objColl[n],e=r.activePoint;var a=t.activeObj.activePoint,l=a.startX,h=a.startY,c=a.width,u=a.height;i=r.shape,r.imageRatio={startX:(e.startX-l)/c,startY:(e.startY-h)/u,endX:(e.endX-l)/c,endY:(e.endY-h)/u,width:c/e.width,height:u/e.height};var p=void 0,f=void 0;switch(i){case"text":p=r.shapeDegree===0?t.transform.degree:t.transform.degree-r.shapeDegree,f=p===0||Math.abs(p)===180?e.width:e.height,r.textSettings.fontRatio=f/r.textSettings.fontSize;break;case"line":case"arrow":this.cropPointCollection(n),i==="arrow"&&t.notify("shape",{prop:"updateArrowRatio",onPropertyChange:!1,value:{obj:r}});break;case"path":this.cropPointCollection(n);break}}},o.prototype.cropPointCollection=function(t){var e=this.parent,i=e.objColl[t].shape,r,n,s,a,l=e.activeObj.activePoint,h=e.img,c=h.destLeft,u=h.destTop,p=h.destWidth,f=h.destHeight;i==="path"?(r=l.startX,n=l.startY,s=l.width,a=l.height):(r=c,n=u,s=p,a=f);for(var g=e.objColl[t].pointColl,v=0,y=g.length;v<y;v++)g[v].ratioX=(g[v].x-r)/s,g[v].ratioY=(g[v].y-n)/a},o.prototype.cropFreehandDrawColl=function(){for(var t=this.parent,e=t.activeObj.activePoint,i=e.startX,r=e.startY,n=e.width,s=e.height,a=0;a<t.freehandCounter;a++){t.points=m([],t.pointColl[a].points,[]),t.notify("freehand-draw",{prop:"setPointCounter",onPropertyChange:!1,value:{value:0}});for(var l=t.points.length,h=0;h<l;h++)t.points[h].ratioX=(t.points[h].x-i)/n,t.points[h].ratioY=(t.points[h].y-r)/s}t.notify("freehand-draw",{prop:"updateCropPtsForSel",onPropertyChange:!1})},o.prototype.resetAnnotations=function(){var t=this.parent;t.objColl=[],t.pointColl=[],t.freehandCounter=0,t.notify("freehand-draw",{prop:"resetStraightenPoint"})},o.prototype.setCurrSelPoints=function(t){var e=this.parent;e.allowDownScale=!1;var i=this.cropDestPoints,r=this.lowerContext.filter,n=e.isCropTab;e.img={srcLeft:0,srcTop:0,srcWidth:e.baseImgCanvas.width,srcHeight:e.baseImgCanvas.height,destLeft:i.startX,destTop:i.startY,destWidth:i.width,destHeight:i.height};var s=e.img,a=e.currSelectionPoint;this.lowerContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),t&&e.notify("draw",{prop:"setDestPoints",onPropertyChange:!1}),e.notify("draw",{prop:"currTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,context:null,isPreventCircleCrop:null}}),this.croppedDegree===0&&e.transform.degree===0&&a&&a.shape!=="crop-circle"&&a.shape!=="crop-square"&&(s.destLeft=i.startX,s.destTop=i.startY,s.destWidth=i.width,s.destHeight=i.height),e.transform.degree===0&&(s.destLeft+=e.panPoint.totalPannedInternalPoint.x,s.destTop+=e.panPoint.totalPannedInternalPoint.y),e.notify("draw",{prop:"drawImage",onPropertyChange:!1}),this.lowerContext.filter=r,e.notify("draw",{prop:"currTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:null,context:null,isPreventCircleCrop:!0}});var l=m([],e.objColl,null,!0),h=m([],e.pointColl,null,!0),c={straightenPoint:null};if(e.notify("freehand-draw",{prop:"getStraightenPoint",onPropertyChange:!1,value:{obj:c}}),this.resetAnnotations(),d(e.activeObj.shape)&&e.cropObj.activeObj.shape&&(e.activeObj=m({},e.cropObj.activeObj,null,!0)),this.panToSelRangle(),e.isCropTab=n,e.objColl=l,e.pointColl=h,e.freehandCounter=e.pointColl.length,c.straightenPoint.x&&c.straightenPoint.y&&e.notify("freehand-draw",{prop:"setStraightenPoint",onPropertyChange:!1,value:{x:c.straightenPoint.x,y:c.straightenPoint.y,ratioX:c.straightenPoint.ratioX,ratioY:c.straightenPoint.ratioY}}),e.cropObj.activeObj.shape){var u={startX:s.destLeft,startY:s.destTop,width:s.destWidth,height:s.destHeight};if(a&&a.activePoint){var p=a.activePoint,f=p.startX,g=p.startY,v=p.width,y=p.height;s.destLeft=f,s.destTop=g,s.destWidth=v,s.destHeight=y}e.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:null}}),s.destLeft=u.startX,s.destTop=u.startY,s.destWidth=u.width,s.destHeight=u.height,e.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1}),l=m([],e.objColl,null,!0),h=m([],e.pointColl,null,!0),e.notify("freehand-draw",{prop:"getStraightenPoint",onPropertyChange:!1,value:{obj:c}}),this.resetAnnotations();var C={selPointColl:null};e.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:C}});var b=C.selPointColl;e.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:[]}}}),e.cropObj.filter=this.lowerContext.filter;var M=m({},e.currSelectionPoint,null,!0);e.notify("draw",{prop:"setCurrentObj",onPropertyChange:!1,value:{obj:null}}),e.activeObj=m({},M,null,!0);var S=m({},e.activeObj,null,!0);if(e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),e.currSelectionPoint=null,e.isCircleCrop=!1,e.transform.degree!==0&&(d(e.activeObj.shape)&&e.cropObj.activeObj.shape&&(e.activeObj=m({},e.cropObj.activeObj,null,!0)),e.notify("transform",{prop:"drawPannedImage",value:{xDiff:0,yDiff:0}}),e.panPoint.currentPannedPoint={x:0,y:0}),e.objColl=l,e.pointColl=h,e.freehandCounter=e.pointColl.length,c.straightenPoint.x&&c.straightenPoint.y&&e.notify("freehand-draw",{prop:"setStraightenPoint",onPropertyChange:!1,value:{x:c.straightenPoint.x,y:c.straightenPoint.y,ratioX:c.straightenPoint.ratioX,ratioY:c.straightenPoint.ratioY}}),e.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:b}}}),e.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"iterate",pen:"iterate",isPreventApply:null}}),this.adjustStraightenForShapes("reverse",!1),e.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1,value:{isPreventApply:!0}}),e.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:null}}),e.transform.degree===0?e.notify("transform",{prop:"drawPannImage",onPropertyChange:!1,value:{point:{x:0,y:0}}}):(d(e.activeObj.shape)&&e.cropObj.activeObj.shape&&(e.activeObj=m({},e.cropObj.activeObj,null,!0)),e.notify("transform",{prop:"drawPannedImage",value:{xDiff:0,yDiff:0}}),e.panPoint.currentPannedPoint={x:0,y:0}),e.activeObj=S,e.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}}),e.notify("transform",{prop:"setTempPanMove",onPropertyChange:!1,value:{point:null}}),!this.isInitCrop&&e.transform.degree===0&&e.cropObj.currFlipState!==""&&e.cropObj.cropZoom!==0){this.isInitCrop=!0;var N={activeObj:null};e.notify("draw",{prop:"getStraightenActObj",onPropertyChange:!1,value:{obj:N}}),e.notify("draw",{prop:"performCancel",value:{isContextualToolbar:null}}),e.notify("draw",{prop:"setStraightenActObj",onPropertyChange:!1,value:{activeObj:N.activeObj}}),e.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"croptransform",isApplyBtn:!1,isCropping:null,isZooming:null,cType:null}})}else this.isInitCrop=!1}else{this.adjustStraightenForShapes("reverse",!0),e.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1,value:{isPreventApply:!0}});var x=this.lowerContext.filter;this.lowerContext.filter="none",e.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"iterate",pen:"iterate",isPreventApply:null}}),this.lowerContext.filter=x,e.currSelectionPoint=null}document.querySelector(".e-ie-straighten-value-span")&&(document.querySelector(".e-ie-straighten-value-span").innerHTML=e.transform.straighten.toString()+"&#176")},o.prototype.panToSelRangle=function(t){var e=this.parent,i=e.cropObj.totalPannedClientPoint,r=e.transform.degree!==0?t?-i.x:i.x:0,n=e.transform.degree!==0?t?-i.y:i.y:0;e.transform.degree!==0&&(e.panPoint.currentPannedPoint={x:r,y:n},e.notify("transform",{prop:"drawPannedImage",value:{xDiff:r,yDiff:n}}),e.panPoint.currentPannedPoint={x:0,y:0})},o.prototype.cropCircle=function(t,e,i){var r=this.parent,n=r.img,s=n.destLeft,a=n.destTop,l=n.destWidth,h=n.destHeight;i&&r.transform.currFlipState!==""&&r.notify("draw",{prop:"setTransform",onPropertyChange:!1,value:{context:t,value:r.transform.currFlipState,isReverse:null}});var c=t.filter;t.filter="none",t.globalCompositeOperation="destination-in",t.beginPath();var u=d(e)?s+l/2:t.canvas.width/2,p=d(e)?a+h/2:t.canvas.height/2,f=e?t.canvas.width/2:l/2;t.arc(u,p,f,0,Math.PI*2),t.closePath(),t.fill(),t.restore(),t.globalCompositeOperation="source-over",r.currObjType.isActiveObj=r.isCircleCrop=!0,t.filter=c,i&&r.transform.currFlipState!==""&&r.notify("draw",{prop:"setTransform",onPropertyChange:!1,value:{context:t,value:r.transform.currFlipState,isReverse:null}})},o.prototype.getCurrCropState=function(){var t=this.parent,e="",i={flipColl:null};return t.notify("transform",{prop:"getFlipColl",onPropertyChange:!1,value:{obj:i}}),e=this.getCurrFlipState(),(t.transform.degree===-90||t.transform.degree===-270)&&(e==="horizontal"?e="vertical":e==="vertical"&&(e="horizontal")),e===""&&(e=i.flipColl.length>1?this.getCurrFlipState():t.transform.currFlipState),e},o.prototype.updateRotatePan=function(){var t=this.parent;if(!d(t.panPoint.currentPannedPoint)){var e="",i=t.transform.degree,r=t.panPoint.currentPannedPoint,n=r.x,s=r.y;t.rotateFlipColl.length>0&&typeof t.rotateFlipColl[0]=="number"&&i<0?e=this.getCurrCropState():e=this.getCurrFlipState(),i%90===0&&i%180!==0?i===90||i===-90&&(e==="horizontal"||e==="vertical")||i===-270&&(e===""||e==="verticalHorizontal"||e==="horizontalVertical")?(e==="horizontal"||e===""?t.img.destLeft+=s:t.img.destLeft-=s,e===""||e==="vertical"?t.img.destTop-=n:t.img.destTop+=n):(i===270||i===-270&&(e==="horizontal"||e==="vertical")||i===-90&&(e===""||e==="verticalHorizontal"||e==="horizontalVertical"))&&(e===""||e==="horizontal"?t.img.destLeft-=s:t.img.destLeft+=s,e===""||e==="vertical"?t.img.destTop+=n:t.img.destTop-=n):(i===180||i===-180)&&(e===""||e==="vertical"?t.img.destLeft-=n:t.img.destLeft+=n,e===""||e==="horizontal"?t.img.destTop-=s:t.img.destTop+=s)}},o.prototype.crop=function(t){var e=this.parent,i=e.activeObj.activePoint,r=i.startX,n=i.startY,s=i.endX,a=i.endY;if(!e.disabled&&e.isImageLoaded){var l={isCropToolbar:e.isCropToolbar};e.currObjType.isUndoAction&&!l.isCropToolbar&&e.notify("undo-redo",{prop:"refreshUrc",value:{bool:null}});var h={cancel:!1,startPoint:{x:r,y:n},endPoint:{x:s,y:a},preventScaling:!1};l.isCropToolbar||(e.trigger("cropping",h),e.editCompleteArgs=h),this.cropEvent(h,t,l)}},o.prototype.cropEvent=function(t,e,i){var r=this.parent,n;if(!t.cancel&&(n=r.activeObj.shape?r.activeObj.shape.split("-"):[],!r.disabled&&r.activeObj.horTopLine&&(r.currObjType.isCustomCrop||n.length>0&&n[0]==="crop"))){e.isCrop=!0;var s=m({},r.cropObj,{},!0),a=m({},this.prevCropCurrObj,{},!0);t.preventScaling?this.isPreventScaling=!0:this.isPreventScaling=!1,this.cropImg(),this.isPreventScaling&&(r.aspectWidth=r.img.destWidth,r.aspectHeight=r.img.destHeight),r.notify("freehand-draw",{prop:"resetStraightenPoint"}),r.isCropTab=!1,r.transform.zoomFactor=0,r.setProperties({zoomSettings:{zoomFactor:1}},!0),r.notify("transform",{prop:"setPreviousZoomValue",onPropertyChange:!1,value:{previousZoomValue:r.zoomSettings.zoomFactor}}),D.isDevice||this.updateUndoRedoColl(a,s,i),r.notify("transform",{prop:"setCropDimension",onPropertyChange:!1,value:{width:r.cropObj.destPoints.width,height:r.cropObj.destPoints.height}});var l=r.element.querySelector("#"+r.element.id+"_aspectratio"),h=r.element.querySelector("#"+r.element.id+"_nonaspectratio");r.notify("draw",{prop:"render-image",value:{isMouseWheel:!1}}),!i.isCropToolbar&&d(l)&&d(h)&&r.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:!1,isCropping:!1,isZooming:null,cType:null}}),this.resizeWrapper(),D.isDevice&&this.updateUndoRedoColl(a,s,i)}},o.prototype.updateUndoRedoColl=function(t,e,i){var r=this.parent,n={prevCurrSelectionPoint:r.prevCurrSelectionPoint};t.currSelectionPoint=m({},n.prevCurrSelectionPoint,{},!0),r.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"crop",previousObj:t,previousObjColl:t.objColl,previousPointColl:t.pointColl,previousSelPointColl:t.selPointColl,previousCropObj:e,previousText:null,currentText:null,previousFilter:null,isCircleCrop:r.isCircleCrop}}),i.isCropToolbar||r.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}})},o.prototype.resizeWrapper=function(){var t=this.parent;if(D.isDevice){var e=t.element,i=e.querySelector("#"+e.id+"_contextualToolbarArea");i&&i.style.position===""&&!this.isTransformCrop&&(i.style.position="absolute",t.isStraightening=!1,t.update(),t.notify("filter",{prop:"setAdjustmentValue",value:{adjustmentValue:t.canvasFilter}}))}},o.prototype.calcRatio=function(t,e){var i=this.parent,r=i.transform.degree,n=i.img,s=n.destWidth,a=n.destHeight,l=e||i.baseImgCanvas,h=l.width,c=l.height,u=r===0||r%180===0?h/s:c/s,p=r===0||r%180===0?c/a:h/a;return t&&(t.width=u,t.height=p),{width:u,height:p}},o.prototype.getCurrFlipState=function(t){var e=this.parent,i={panRegion:""},r={collection:e.rotateFlipColl};e.notify("shape",{prop:"alignRotateFlipColl",onPropertyChange:!1,value:{collection:e.rotateFlipColl,isRotateFlipCollection:!0,obj:r}}),e.rotateFlipColl=r.collection;for(var n=0,s=e.rotateFlipColl.length;n<s;n++)e.notify("transform",{prop:"setCurrPanRegion",onPropertyChange:!1,value:{region:i.panRegion,type:e.rotateFlipColl[n],obj:i}});return t&&(t.panRegion=i.panRegion),i.panRegion},o}(),YD=function(o,t,e,i){return new(e||(e=Promise))(function(r,n){function s(h){try{l(i.next(h))}catch(c){n(c)}}function a(h){try{l(i.throw(h))}catch(c){n(c)}}function l(h){h.done?r(h.value):new e(function(c){c(h.value)}).then(s,a)}l((i=i.apply(o,t||[])).next())})},_D=function(o,t){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,r,n,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(h){return function(c){return l([h,c])}}function l(h){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,r&&(n=h[0]&2?r.return:h[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,h[1])).done)return n;switch(r=0,n&&(h=[h[0]&2,n.value]),h[0]){case 0:case 1:n=h;break;case 4:return e.label++,{value:h[1],done:!1};case 5:e.label++,r=h[1],h=[0];continue;case 7:h=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(h[0]===6||h[0]===2)){e=0;continue}if(h[0]===3&&(!n||h[1]>n[0]&&h[1]<n[3])){e.label=h[1];break}if(h[0]===6&&e.label<n[1]){e.label=n[1],n=h;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(h);break}n[2]&&e.ops.pop(),e.trys.pop();continue}h=t.call(o,e)}catch(c){h=[6,c],r=0}finally{i=n=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},VD=function(){function o(t){this.isInitialLoading=!1,this.fileName="",this.isErrorImage=!1,this.isShapeTextInserted=!1,this.isRotateZoom=!1,this.tempStrokeSettings={strokeColor:"#fff",fillColor:"",strokeWidth:null,outlineColor:"",radius:null,outlineWidth:null},this.tempTextSettings={text:"Enter Text",fontFamily:"",fontSize:null,fontRatio:null,bold:!1,italic:!1,underline:!1},this.tempAdjValue="",this.tempFilter="",this.tempUndoRedoStep=0,this.tempFreehandCounter=0,this.tempCurrFhdIndex=0,this.tempZoomFactor=null,this.isCancelAction=!1,this.rotatedFlipCropSel=!1,this.zoomCrop={width:0,height:0},this.isImageEdited=!1,this.isFileChanged=!1,this.isNewPath=!1,this.isResizeSelect=!1,this.arrowDimension={bar:{width:10,height:32,ratioX:null,ratioY:null},arrow:{width:24,height:24,ratioX:null,ratioY:null},arrowSolid:{width:32,height:32,ratioX:null,ratioY:null},circle:{width:10,height:10,ratioX:null,ratioY:null},square:{width:20,height:20,ratioX:null,ratioY:null}},this.origDim={width:0,height:0},this.isImageApply=!1,this.imgCanvasPoints=[],this.isCropSelect=!1,this.isDownScale=!1,this.preventStraightening=!1,this.tempObjColl=[],this.tempPointColl={},this.imageBackgroundColor="",this.allowRedactStraighten=!0,this.isNullExtension=!0,this.parent=t,this.addEventListener()}return o.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},o.prototype.addEventListener=function(){this.parent.on("draw",this.draw,this),this.parent.on("destroyed",this.destroy,this)},o.prototype.removeEventListener=function(){this.parent.off("draw",this.draw),this.parent.off("destroyed",this.destroy)},o.prototype.draw=function(t){switch(this.updatePrivateVariables(),t.prop){case"drawObject":this.drawObject(t.value.canvas,t.value.obj,t.value.isCropRatio,t.value.points,t.value.isPreventDrag,t.value.saveContext,t.value.isPreventSelection);break;case"updateActiveObject":this.updateActiveObject(t.value.actPoint,t.value.obj,t.value.isMouseMove,t.value.x,t.value.y);break;case"clearOuterCanvas":this.clearOuterCanvas(t.value.context);break;case"setDestPoints":this.setDestPoints();break;case"updateCurrTransState":this.updateCurrTransState(t.value.type,t.value.isPreventDestination,t.value.isRotatePan);break;case"currTransState":this.currTransState(t.value.type,t.value.isPreventDestination,t.value.context,t.value.isPreventCircleCrop);break;case"setTransform":this.setTransform(t.value.context,t.value.value,t.value.isReverse);break;case"render-image":this.renderImage(t.value.isMouseWheel,t.value.isPreventClearRect,t.value.isFrame,t.value.isStraighten);break;case"draw-image-to-canvas":this.drawImgToCanvas(t.value.dimension);break;case"update-canvas":this.updateCanvas();break;case"performCancel":this.performCancel(t.value.isContextualToolbar,t.value.isUndoRedo,t.value.isFinalCancel);break;case"updateFlipPan":this.updateFlipPan(t.value.tempSelectionObj);break;case"select":this.select(t.value.type,t.value.startX,t.value.startY,t.value.width,t.value.height);break;case"callUpdateCurrTransState":this.callUpdateCurrTransState();break;case"resetPanPoints":this.resetPanPoints();break;case"setClientTransDim":this.setClientTransDim(t.value.isPreventDimension);break;case"redrawImgWithObj":this.redrawImgWithObj();break;case"setCurrentObj":this.setCurrentObj(t.value.obj,t.value.isUndoRedo,t.value.isCircleCrop);break;case"performPointZoom":this.performPointZoom(t.value.x,t.value.y,t.value.type,t.value.isResize);break;case"open":this.open(t.value.data);break;case"isInitialLoading":this.isInitialLoading=t.value.isInitialLoading;break;case"isInitialLoaded":this.getInitialLoaded(t.value.object);break;case"fileSelect":this.fileSelect(t.value.inputElement,t.value.args);break;case"getFileName":t.value.obj.fileName=this.fileName,t.value.obj.fileType=this.fileType;break;case"getErrorImage":t.value.obj.isErrorImage=this.isErrorImage;break;case"getInitialZoomValue":t.value.obj.initialZoomValue=this.initZoomValue;break;case"setShapeTextInsert":this.isShapeTextInserted=t.value.bool;break;case"resetCurrentSelectionPoint":this.currSelPoint=null;break;case"setRotateZoom":this.isRotateZoom=t.value.isRotateZoom;break;case"setTempStrokeSettings":this.tempStrokeSettings=t.value.tempStrokeSettings;break;case"setTempTextSettings":this.tempTextSettings=t.value.tempTextSettings;break;case"setTempAdjustmentValue":this.tempAdjValue=t.value.tempAdjustmentValue;break;case"getTempAdjustmentValue":t.value.obj.value=this.tempAdjValue;break;case"setTempFilter":this.tempFilter=t.value.tempFilter;break;case"setTempUndoRedoStep":this.tempUndoRedoStep=t.value.tempUndoRedoStep;break;case"setTempFreehandCounter":this.tempFreehandCounter=t.value.tempFreehandCounter;break;case"setTempCurrentFreehandDrawIndex":this.tempCurrFhdIndex=t.value.tempCurrentFreehandDrawIndex;break;case"setTempZoomFactor":this.tempZoomFactor=t.value.tempZoomFactor;break;case"setCancelAction":this.isCancelAction=t.value.bool;break;case"getRotatedFlipCropSelection":t.value.bool.isSelected=this.rotatedFlipCropSel;break;case"getPrevActObj":t.value.obj.prevActObj=this.prevActObj;break;case"setPrevActObj":this.prevActObj=t.value.prevActObj;break;case"setZoomCropWidth":this.zoomCrop.width=t.value.width,this.zoomCrop.height=t.value.height;break;case"setImageEdited":this.isImageEdited=!0;break;case"reset":this.reset();break;case"setNewPath":this.isNewPath=t.value.bool;break;case"getNewPath":t.value.obj.isNewPath=this.isNewPath;break;case"getArrowDimension":t.value.obj.arrowDimension=m({},this.arrowDimension,{},!0);break;case"setArrowDimension":this.arrowDimension=t.value.arrowDimension;break;case"moveToSelectionRange":this.moveToSelectionRange(t.value.type,t.value.activeObj);break;case"setResizeSelect":this.isResizeSelect=t.value.bool;break;case"applyFrame":this.applyFrame(t.value.ctx,t.value.frame,t.value.preventImg);break;case"drawImage":this.drawImage();break;case"downScaleImgCanvas":this.downScaleImgCanvas(t.value.ctx,t.value.isImgAnnotation,t.value.isHFlip,t.value.isVFlip);break;case"downScale":this.downScale(t.value.canvas,t.value.width,t.value.height);break;case"resetFrameZoom":this.resetFrameZoom(t.value.isOk);break;case"triggerFrameChange":t.value.obj.frameChangeEventArgs=this.triggerFrameChange(t.value.prevFrameSettings);break;case"setImageApply":this.isImageApply=t.value.bool;break;case"zoomToSel":this.zoomToSel(t.value.activeObj,t.value.isToolbar);break;case"getStraightenActObj":t.value.obj.activeObj=this.straightenActObj;break;case"setStraightenActObj":this.straightenActObj=t.value.activeObj;break;case"updateImgCanvasPoints":this.updateImgCanvasPoints();break;case"isLinesIntersect":t.value.obj.isIntersect=this.isLinesIntersect(t.value.obj);break;case"getImageCanvasPoints":t.value.obj.points=this.imgCanvasPoints;break;case"setDestForStraighten":this.setDestForStraighten();break;case"setTempDestForStraighten":this.tempStraightenDestPoints=m({},this.straightenDestPoints,{},!0);break;case"getStraightenInitZoom":t.value.obj.zoomFactor=this.straightenInitZoom;break;case"setStraightenInitZoom":this.straightenInitZoom=t.value.zoomFactor;break;case"isPointsInsideImg":t.value.obj.bool=this.checkPointPosition(t.value.x,t.value.y,this.imgCanvasPoints[0].x,this.imgCanvasPoints[0].y,this.imgCanvasPoints[1].x,this.imgCanvasPoints[1].y,this.imgCanvasPoints[2].x,this.imgCanvasPoints[2].y,this.imgCanvasPoints[3].x,this.imgCanvasPoints[3].y)!=="inside";break;case"setIsCropSelect":this.isCropSelect=t.value.bool;break;case"updateCropSelection":this.updateCropSelection();break;case"updateCropSelObj":this.updateCropSelObj();break;case"redrawDownScale":this.redrawDownScale();break;case"updateFinetune":this.updateFinetune();break;case"isSelOutsideImg":t.value.obj.bool=this.isSelOutsideImg();break;case"resetStraightenDestPoints":this.straightenDestPoints=null;break;case"checkPointPosition":t.value.obj.position=this.checkPointPosition(t.value.obj.x,t.value.obj.y,t.value.obj.x1,t.value.obj.y1,t.value.obj.x2,t.value.obj.y2,t.value.obj.x3,t.value.obj.y3,t.value.obj.x4,t.value.obj.y4);break;case"updateTempObjColl":this.tempObjColl=m([],this.parent.objColl,[],!0);break;case"resetTempObjColl":this.tempObjColl=null;break;case"updateTempPointColl":this.tempPointColl=m({},this.parent.pointColl,{},!0);break;case"resetTempPointColl":this.tempPointColl={};break;case"showDialogPopup":this.showDialogPopup();break;case"imageBackgroundColor":this.imageBackgroundColor=t.value.color;break;case"getImageBackgroundColor":t.value.obj.color=this.imageBackgroundColor;break;case"setTempStrokeWidth":this.tempStrokeWidth=t.value.strokeWidth;break;case"setNullExtension":this.isNullExtension=t.value.extension;break}},o.prototype.getModuleName=function(){return"draw"},o.prototype.updatePrivateVariables=function(){var t=this.parent;t.lowerCanvas&&(this.lowerContext=t.lowerCanvas.getContext("2d")),t.upperCanvas&&(this.upperContext=t.upperCanvas.getContext("2d")),d(this.tempZoomFactor)&&(this.tempZoomFactor=t.transform.zoomFactor),this.tempTextSettings.fontFamily===""&&(this.tempTextSettings.fontFamily=t.fontFamily.default)},o.prototype.reset=function(){this.isInitialLoading=this.isErrorImage=this.isNewPath=this.isResizeSelect=!1,this.isShapeTextInserted=!1,this.isImageApply=!1,this.isNullExtension=!0,this.initZoomValue=null,this.tempFilter="",this.origDim={width:0,height:0},this.currSelPoint=null,this.isRotateZoom=!1,this.tempAdjValue="",this.tempStrokeSettings={strokeColor:"#fff",fillColor:"",strokeWidth:null,radius:null,outlineColor:"",outlineWidth:null},this.tempTextSettings={text:"Enter Text",fontFamily:this.parent.fontFamily.default,fontSize:null,fontRatio:null,bold:!1,italic:!1,underline:!1},this.tempUndoRedoStep=this.tempFreehandCounter=this.tempCurrFhdIndex=0,this.tempZoomFactor=null,this.isCancelAction=!1,this.rotatedFlipCropSel=!1,this.prevActObj=null,this.tempStraightenDestPoints=null,this.arrowDimension={bar:{width:10,height:32,ratioX:null,ratioY:null},arrow:{width:24,height:24,ratioX:null,ratioY:null},arrowSolid:{width:32,height:32,ratioX:null,ratioY:null},circle:{width:10,height:10,ratioX:null,ratioY:null},square:{width:20,height:20,ratioX:null,ratioY:null}},this.straightenActObj=null,this.imgCanvasPoints=[],this.straightenInitZoom=null,this.allowRedactStraighten=!0,this.tempObjColl=[],this.tempPointColl={},this.imageBackgroundColor="",this.tempStrokeWidth=null,this.straightenDestPoints=null,this.isCropSelect=this.isDownScale=this.preventStraightening=!1},o.prototype.redrawDownScale=function(){var t=this.parent;if(t.transform.zoomFactor&&t.transform.zoomFactor<0){var e=m({},t.activeObj,{},!0);t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.isDownScale=!0,this.renderImage(),this.isDownScale=!1,e.shape&&this.drawObject("duplicate",e)}},o.prototype.updateFinetune=function(){var t=this.parent;if(t.transform.zoomFactor&&t.transform.zoomFactor<0){var e=this.lowerContext.filter;this.lowerContext.filter="none",t.notify("draw",{prop:"redrawDownScale"});var i=t.inMemoryCanvas.getContext("2d"),r=this.lowerContext,n=r.getImageData(0,0,r.canvas.width,r.canvas.height);t.inMemoryCanvas.width=n.width,t.inMemoryCanvas.height=n.height,i.putImageData(n,0,0),this.lowerContext.filter=e,t.notify("draw",{prop:"redrawDownScale"})}},o.prototype.drawImage=function(){this.applyFrame(this.lowerContext,this.parent.frameObj.type)},o.prototype.drawObject=function(t,e,i,r,n,s,a){var l=this.parent,h=l.activeObj,c=l.activeObj.activePoint;this.upperContext.clearRect(0,0,l.upperCanvas.width,l.upperCanvas.height);var u;if(t=t.toLowerCase(),t==="original"?u=this.lowerContext:t==="duplicate"?u=this.upperContext:s&&(u=s),!n&&h.shape&&this.setDragLimit(),l.currObjType.shape){var p=l.currObjType.shape.split("-");p[0].toLowerCase()==="crop"&&i&&this.drawCropRatio()}if(h=l.activeObj,c=l.activeObj.activePoint,d(h.strokeSettings)){var f={strokeSettings:{}};l.notify("shape",{prop:"getStrokeSettings",onPropertyChange:!1,value:{obj:f}}),h.strokeSettings=f.strokeSettings}if(d(h.strokeSettings.strokeWidth)&&(h.strokeSettings.strokeWidth=2),e&&(l.activeObj=m({},e,{},!0)),r&&r.startX&&r.startY&&r.endX&&r.endY&&r.width&&r.height&&(c.startX=r.startX,c.startY=r.startY,c.endX=r.endX,c.endY=r.endY,c.width=r.width,c.height=r.height),this.updateActiveObject(),h=l.activeObj,c=l.activeObj.activePoint,!(d(c.startX)&&d(c.startY))){if(l.currObjType.isText){var g={keyHistory:""};l.notify("shape",{prop:"getKeyHistory",onPropertyChange:!1,value:{obj:g}}),h.keyHistory=g.keyHistory}var v=!1;if(t!=="original"){var p=void 0;h.shape&&(p=h.shape.split("-"),p[0]==="crop"&&(v=!0)),v&&(r&&r.startX&&r.startY&&r.endX&&r.endY&&r.width&&r.height?(c.startX=r.startX,c.startY=r.startY,c.endX=r.endX,c.endY=r.endY,c.width=r.width,c.height=r.height):c=h.activePoint,this.upperContext.fillStyle="rgb(0, 0, 0, 0.25)",this.upperContext.fillRect(0,0,l.lowerCanvas.width,l.lowerCanvas.height),this.upperContext.clearRect(c.startX,c.startY,c.width,c.height)),d(a)&&(u===this.lowerContext||u===this.upperContext)&&(this.rotateContext("initial",u),this.drawOuterSelection(u),this.rotateContext("reverse",u))}l.currObjType.isActiveObj=!0;var y={keyHistory:""};l.notify("shape",{prop:"getKeyHistory",onPropertyChange:!1,value:{obj:y}}),e?this.drawShapeObj(t,e.shape,s,a):y.keyHistory!==""&&l.currObjType.isText?this.drawShapeObj(t,"text",s,a):h.shape?this.drawShapeObj(t,h.shape,s,a):this.drawShapeObj(t,void 0,s,a),t==="duplicate"&&v&&h.shape!=="crop-circle"&&l.frameObj.type!=="none"&&(this.applyFrame(this.upperContext,l.frameObj.type),this.drawCornerCircles(this.upperContext))}},o.prototype.rotateContext=function(t,e){var i=this.parent,r=i.activeObj,n=r.shape,s=r.rotatedAngle,a=i.img,l=a.destLeft,h=a.destTop,c=a.destWidth,u=a.destHeight,p=i.activeObj.activePoint,f=p.startX,g=p.startY,v=p.width,y=p.height;if(!(n==="line"||n==="arrow")){var C=t==="initial"?s:-s,b,M;i.transform.straighten===0&&!i.isCropTab?(b=f+v/2,M=g+y/2):(b=l+c/2,M=h+u/2),e.translate(b,M),e.rotate(C),e.translate(-b,-M)}},o.prototype.setDragLimit=function(){var t=this.parent,e=t.activeObj.activePoint,i=t.activeObj,r=i.shape,n=i.rotatedAngle;if(e&&r!=="image"&&r!=="line"&&n===0&&t.activeObj.preventShapeDragOut){var s=t.img,a=s.destLeft,l=s.destTop,h=s.destWidth,c=s.destHeight;e.startX<a?(e.startX=a,e.endX=Math.min(e.startX+e.width,a+h)):e.endX>a+h&&(e.endX=a+h,e.startX=Math.max(e.endX-e.width,a)),e.startY<l?e.startY=l:e.endY>l+c&&(e.endY=l+c,e.startY=Math.max(e.endY-e.height,l)),t.activeObj=this.updateWidthHeight(t.activeObj)}},o.prototype.drawCropRatio=function(){var t=this.parent,e=t.activeObj.activePoint,i,r,n,s,a=t.img,l=a.destLeft,h=a.destTop,c=a.destWidth,u=a.destHeight;if(t.transform.zoomFactor>0&&this.currSelPoint){var p=m({},t.activeObj,{},!0);this.drawCustomSelection("crop-custom",null,null,null,null),t.transform.straighten!==0&&(e=t.activeObj.activePoint),t.transform.degree%90===0&&t.transform.degree%180!==0?(n=e.width<e.height?e.width:e.height,s=n):(n=e.width,s=e.height),t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),t.activeObj=p,t.currObjType.shape=p.shape,this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.currObjType.isCustomCrop=!1}else n=c,s=u,l<0&&(n+=l),h<0&&(s+=h),l+c>t.lowerCanvas.width&&(n-=l+c-t.lowerCanvas.width),h+u>t.lowerCanvas.height&&(s-=h+u-t.lowerCanvas.height);switch(t.currObjType.shape.toLowerCase()){case"crop-square":case"crop-circle":t.notify("selection",{prop:"setDragDirection",onPropertyChange:!1,value:{width:n,height:s}}),e=t.activeObj.activePoint,t.lowerCanvas.width<e.endX-e.startX&&(e.startX=7.5,e.endX=t.lowerCanvas.width-7.5),t.lowerCanvas.height<e.endY-e.startY&&(e.startY=7.5,e.endY=t.lowerCanvas.height-7.5),n===c&&s===u&&(e.startX+=l,e.startY+=h,e.endX+=l,e.endY+=h),t.lowerCanvas.width>t.lowerCanvas.height?(e.height=e.endY-e.startY,e.width=e.height,e.endX=e.startX+e.width):(e.width=e.endX-e.startX,e.height=e.width,e.endY=e.startY+e.height);break;case"crop-3:2":i=3,r=2;break;case"crop-4:3":i=4,r=3;break;case"crop-5:4":i=5,r=4;break;case"crop-7:5":i=7,r=5;break;case"crop-16:9":i=16,r=9;break;case"crop-2:3":i=2,r=3;break;case"crop-3:4":i=3,r=4;break;case"crop-4:5":i=4,r=5;break;case"crop-5:7":i=5,r=7;break;case"crop-9:16":i=9,r=16;break;default:i=parseInt(t.currObjType.shape.toLowerCase().split("crop-")[1].split(":")[0]),r=parseInt(t.currObjType.shape.toLowerCase().split("crop-")[1].split(":")[1]);break}if(i!==void 0&&r!==void 0&&(t.notify("selection",{prop:"calcShapeRatio",onPropertyChange:!1,value:{x:i,y:r,imgWidth:n,imgHeight:s}}),n===c&&s===u&&this.updatePoints(),e=t.activeObj.activePoint),e.startX<l){var f=l-e.startX+7.5;e.startX+=f,e.endX+=f}if(e.startY<h){var f=h-e.startY+7.5;e.startY+=f,e.endY+=f}t.activeObj=this.updateWidthHeight(t.activeObj),this.adjToCenter(),this.enlargeToImg(),t.transform.straighten!==0&&(this.adjToStraighten(),this.updateActiveObject(t.activeObj.activePoint,t.activeObj));var g={isIntersect:null,arr:null},v=0;if(e=t.activeObj.activePoint,t.transform.straighten!==0)for(;this.isLinesIntersect(g)&&v<100;){v++;var f=e.width*1/100;e.startX+=f,e.endX-=f,f=e.height*1/100,e.startY+=f,e.endY-=f,e.width=e.endX-e.startX,e.height=e.endY-e.startY,this.updateActiveObject(e,t.activeObj)}this.straightenInitZoom=t.transform.zoomFactor,this.straightenActObj=m({},t.activeObj,{},!0),t.notify("draw",{prop:"resetStraightenDestPoints"}),t.notify("draw",{prop:"setDestForStraighten"})},o.prototype.adjToCenter=function(){var t=this.parent,e=t.activeObj.activePoint,i=t.img,r=i.destLeft,n=i.destTop,s=i.destWidth,a=i.destHeight,l=t.lowerCanvas.width/2-(e.endX-e.width/2),h=t.lowerCanvas.height/2-(e.endY-e.height/2);if(e.startX+=l,e.endX+=l,e.startY+=h,e.endY+=h,e.startX<(r>=7.5?r:7.5)){var c=(r>=7.5?r:0)-e.startX;e.startX+=c,e.endX+=c}else if(e.endX>r+s){var c=e.endX-(r+s);e.startX-=c,e.endX-=c}if(e.startY<(n>=7.5?n:7.5)){var c=(n>=7.5?n:0)-e.startY;e.startY+=c,e.endY+=c}else if(e.endY>n+a){var c=e.endY-(n+a);e.startY-=c,e.endY-=c}},o.prototype.enlargeToImg=function(){var t=this.parent;if(t.transform.straighten!==0&&t.transform.degree%90===0&&t.transform.degree%180!==0)for(var e=t.activeObj.activePoint,i=m({},e,{},!0),r=0;;){r++;var n=e.width*5/100;e.startX-=n,e.endX+=n,n=e.height*5/100,e.startY-=n,e.endY+=n,e.width=e.endX-e.startX,e.height=e.endY-e.startY,this.updateActiveObject(e,t.activeObj);var s={isIntersect:null,arr:null};if(this.updateImgCanvasPoints(),this.isLinesIntersect(s),s.arr[0]||s.arr[1]||s.arr[2]||s.arr[3]||e.startX<7.5||e.startY<7.5||r===100){e=m({},i,{},!0),n=e.width*1/100,e.startX+=n,e.endX-=n,n=e.height*1/100,e.startY+=n,e.endY-=n,e.width=e.endX-e.startX,e.height=e.endY-e.startY,this.updateActiveObject(e,t.activeObj);break}i=m({},e,{},!0)}},o.prototype.updateActiveObject=function(t,e,i,r,n){var s=this.parent;t=t||m({},s.activeObj.activePoint,{},!0),e=e||m({},s.activeObj,{},!0),t.width=t.endX-t.startX,t.height=t.endY-t.startY;var a=t.startX,l=t.startY,h=t.endX,c=t.endY,u=t.width,p=t.height;r=r||0,n=n||0;var f=u/2,g=p/2,v=7.5;e.horTopLine={startX:a+r,startY:l-n,endX:h+r,endY:c+n},e.horBottomLine={startX:a-r,startY:c-n,endX:h-r,endY:c+n},e.verLeftLine={startX:a+r,startY:l-n,endX:a-n,endY:c-n},e.verRightLine={startX:h+r,startY:l+n,endX:h-r,endY:c+n},e.topLeftCircle={startX:a,startY:l,radius:e.horTopLine.endX?v:0},e.topCenterCircle={startX:a+f,startY:l,radius:e.horTopLine.endX?v:0},e.topRightCircle={startX:h,startY:l,radius:e.horTopLine.endX?v:0},e.centerLeftCircle={startX:a,startY:l+g,radius:e.horTopLine.endX?v:0},e.centerRightCircle={startX:h,startY:l+g,radius:e.horTopLine.endX?v:0},e.bottomLeftCircle={startX:a,startY:c,radius:e.horTopLine.endX?v:0},e.bottomCenterCircle={startX:a+f,startY:c,radius:e.horTopLine.endX?v:0},e.bottomRightCircle={startX:h,startY:c,radius:e.horTopLine.endX?v:0},e.rotatedAngle===0&&(e.rotationCirclePoint={x:e.bottomCenterCircle.startX,y:e.bottomCenterCircle.startY+25},e.rotationCirclePoint.ratioX=(e.rotationCirclePoint.x-s.img.destLeft)/s.img.destWidth,e.rotationCirclePoint.ratioY=(e.rotationCirclePoint.y-s.img.destTop)/s.img.destHeight),e.activePoint=t,d(i)&&(s.activeObj=m({},e,{},!0))},o.prototype.drawOuterSelection=function(t,e){var i,r=this.parent,n=r.activeObj.activePoint,s=r.activeObj;t.lineWidth=.5;var a=m({},s,{},!0);s.shape&&(i=s.shape.split("-")),(i&&i[0]==="crop"||s.shape===void 0)&&!e&&(this.upperContext.fillStyle="rgb(0, 0, 0, 0.25)",this.upperContext.fillRect(0,0,r.lowerCanvas.width,r.lowerCanvas.height),this.upperContext.clearRect(n.startX,n.startY,n.width,n.height)),t.strokeStyle=r.themeColl[r.theme].primaryColor,t.fillStyle=r.themeColl[r.theme].secondaryColor;var l;if(a.shapeDegree===0?l=r.transform.degree:l=r.transform.degree-a.shapeDegree,l<0&&(l=360+l),s.shape==="arrow"||s.shape==="line")t.beginPath(),t.moveTo(n.startX,n.startY),t.lineTo(n.endX,n.endY),t.stroke();else if(s.shape==="path"){t.beginPath();var h=m({},r.activeObj,{},!0);if(h.pointColl[0]&&(t.moveTo(h.pointColl[0].x,h.pointColl[0].y),h.pointColl.length>1))for(var c=1,u=h.pointColl.length;c<u;c++)n.endX=h.pointColl[c].x,n.endY=h.pointColl[c].y,t.lineTo(n.endX,n.endY);var p={shape:null};r.notify("selection",{prop:"getCurrentDrawingShape",value:{obj:p}}),p.shape==="path"&&(r.activeObj=s=h),t.lineTo(n.endX,n.endY),t.stroke()}else this.drawCornerCircles(t);if(r.selectionSettings.showCircle&&(i===void 0||i[0]!=="crop")){var f=t.strokeStyle,g=t.fillStyle;t.strokeStyle=r.selectionSettings.strokeColor,t.fillStyle=r.selectionSettings.fillColor,s.shape==="text"?(t.lineWidth*=2,t.beginPath(),this.drawRotationArcLine(t),t.lineTo(s.rotationCirclePoint.x,s.rotationCirclePoint.y),t.stroke(),t.fill(),t.closePath(),t.beginPath(),t.moveTo(s.rotationCirclePoint.x,s.rotationCirclePoint.y),t.arc(s.rotationCirclePoint.x,s.rotationCirclePoint.y,s.bottomCenterCircle.radius,0,2*Math.PI),t.stroke(),t.fill(),t.closePath(),t.lineWidth/=2):r.activeObj.shape!=="redact"&&this.drawCenterCircles(t),t.strokeStyle=f,t.fillStyle=g}a.rotationCircleLine=s.rotationCircleLine,r.activeObj=m({},a,{},!0)},o.prototype.drawArrowHead=function(t,e){var i=e?this.parent.activeObj.start:this.parent.activeObj.end;switch(i){case"arrowSolid":e?this.arrowSolid(t,!0):this.arrowSolid(t,!1);break;case"arrow":e?this.arrow(t,!0):this.arrow(t,!1);break;case"circleSolid":e?this.arrowCircleSolid(t,!0):this.arrowCircleSolid(t,!1);break;case"circle":e?this.arrowCircle(t,!0):this.arrowCircle(t,!1);break;case"bar":e?this.arrowBar(t,!0):this.arrowBar(t,!1);break;case"square":case"squareSolid":e?this.arrowSquareStart(t):this.arrowSquareEnd(t);break}},o.prototype.drawShapeObj=function(t,e,i,r){var n=this.parent,s=n.activeObj.activePoint,a=n.activeObj,l=a.strokeSettings,h=l.strokeColor,c=l.fillColor,u=l.strokeWidth,p=e!==void 0?e:n.currObjType.shape;n.currObjType.shape=p;var f;t.toLowerCase()==="original"?f=this.lowerContext:t.toLowerCase()==="duplicate"?f=this.upperContext:i&&(f=i);var g=n.currObjType.shape.toLowerCase(),v=["rectangle","ellipse","line","arrow","path","image","redact"];v.indexOf(g)!==-1&&(a.shape=n.currObjType.shape),f.strokeStyle=h,e==="text"||e==="freehanddraw"?f.fillStyle=h:f.fillStyle=c;var y=s.width/3,C=s.height/3,b=s.endX-s.startX,M=s.endY-s.startY;this.rotateContext("initial",f);var S,N=f.fillStyle,x;switch(n.currObjType.shape.toLowerCase()){case"rectangle":this.drawSquareLines(f),d(r)&&f===this.upperContext&&this.drawOuterSelection(f);break;case"redact":this.drawRedact(f,a),d(r)&&f===this.upperContext&&this.drawOuterSelection(f),n.currObjType.isRedact=!0;break;case"ellipse":b=Math.abs(b),M=Math.abs(M),f.beginPath(),f.ellipse(s.startX+b/2,s.startY+M/2,b/2,M/2,0,0,2*Math.PI,!1),c!==""&&(f.fillStyle=c,f.fill()),f.ellipse(s.startX+b/2,s.startY+M/2,Math.abs(b/2-u),Math.abs(M/2-u),0,0,2*Math.PI,!1),f.fillStyle=h,f.fill("evenodd"),f.closePath(),d(r)&&f===this.upperContext&&this.drawOuterSelection(f);break;case"crop-circle":this.shapeCircle(f,b,M);break;case"line":this.shapeLine(f,s.startX,s.startY,s.endX,s.endY),d(r)&&f===this.upperContext&&this.drawOuterSelection(f);break;case"arrow":a.shapeDegree===0?S=n.transform.degree:S=n.transform.degree-a.shapeDegree,S<0&&(S=360+S),f.fillStyle=f.strokeStyle,d(a.triangleDirection)&&(a.triangleDirection="right"),d(a.start)&&(a.start="none"),d(a.end)&&(a.end="arrowSolid"),this.drawArrowHead(f,!0),this.drawArrowHead(f,!1),a.end==="none"&&a.start!=="circle"&&a.start!=="square"&&this.shapeLine(f,s.startX,s.startY,s.endX,s.endY),f.fillStyle=N,d(r)&&f===this.upperContext&&this.drawOuterSelection(f);break;case"path":if(x=m({},n.activeObj,{},!0),x.pointColl.length>1){var A={shape:null};if(n.notify("selection",{prop:"getCurrentDrawingShape",value:{obj:A}}),A.shape==="path"&&n.isShapeDrawing)for(var U={x:0,y:0},z=0,J=x.pointColl.length;z<J;z++)d(x.pointColl[z+1])?(U.x=x.activePoint.endX,U.y=x.activePoint.endY):(U.x=x.pointColl[z+1].x,U.y=x.pointColl[z+1].y),s.startX=x.pointColl[z].x,s.startY=x.pointColl[z].y,s.endX=U.x,s.endY=U.y,n.activeObj=this.updateWidthHeight(n.activeObj),this.shapeLine(f,s.startX,s.startY,s.endX,s.endY),D.isDevice&&(x.activePoint.endX=U.x,x.activePoint.endY=U.y);else for(var z=1,J=x.pointColl.length;z<J;z++)s.startX=x.pointColl[z-1].x,s.startY=x.pointColl[z-1].y,s.endX=x.pointColl[z].x,s.endY=x.pointColl[z].y,n.activeObj=this.updateWidthHeight(n.activeObj),this.shapeLine(f,s.startX,s.startY,s.endX,s.endY);n.activeObj=a=x}else this.shapeLine(f,s.startX,s.startY,s.endX,s.endY);f===this.upperContext&&this.drawOuterSelection(f);break;case"text":this.shapeText(f);break;case"image":this.shapeImage(f),d(r)&&f===this.upperContext&&this.drawOuterSelection(f);break;case"crop-square":case"crop-3:4":case"crop-4:3":case"crop-6:9":case"crop-9:6":case"crop-9:16":case"crop-16:9":f===this.lowerContext&&(f=this.upperContext),this.drawSelection(y,C),n.currObjType.shape="";break;default:this.drawSelection(y,C);break}this.rotateContext("reverse",f)},o.prototype.updatePoints=function(){var t=this.parent,e=t.activeObj.activePoint,i=t.img,r=i.destLeft,n=i.destTop;e.startX+=r,e.startY+=n,e.endX+=r,e.endY+=n,t.activeObj=this.updateWidthHeight(t.activeObj)},o.prototype.updateWidthHeight=function(t){var e=t.activePoint,i=e.startX,r=e.startY,n=e.endX,s=e.endY;return t.activePoint.width=n-i,t.activePoint.height=s-r,t},o.prototype.drawCornerCircles=function(t){var e=this.parent,i=e.activeObj;if(t.beginPath(),t.rect(i.activePoint.startX,i.activePoint.startY,i.activePoint.width,i.activePoint.height),t.stroke(),t.closePath(),e.selectionSettings.showCircle){var r=t.strokeStyle,n=t.fillStyle;t.strokeStyle=e.selectionSettings.strokeColor,t.fillStyle=e.selectionSettings.fillColor,t.lineWidth*=2,t.beginPath(),t.moveTo(i.topLeftCircle.startX,i.topLeftCircle.startY),t.arc(i.topLeftCircle.startX,i.topLeftCircle.startY,i.topLeftCircle.radius,0,2*Math.PI),t.moveTo(i.topRightCircle.startX,i.topRightCircle.startY),t.arc(i.topRightCircle.startX,i.topRightCircle.startY,i.topRightCircle.radius,0,2*Math.PI),t.moveTo(i.bottomLeftCircle.startX,i.bottomLeftCircle.startY),t.arc(i.bottomLeftCircle.startX,i.bottomLeftCircle.startY,i.bottomLeftCircle.radius,0,2*Math.PI),t.moveTo(i.bottomRightCircle.startX,i.bottomRightCircle.startY),t.arc(i.bottomRightCircle.startX,i.bottomRightCircle.startY,i.bottomRightCircle.radius,0,2*Math.PI),t.stroke(),t.fill(),t.closePath(),t.lineWidth/=2,t.strokeStyle=r,t.fillStyle=n}},o.prototype.drawCenterCircles=function(t){var e=this.parent,i=e.activeObj.activePoint,r=e.activeObj;if(t.lineWidth*=2,t.beginPath(),r.shape==="arrow"||r.shape==="line")t.moveTo(i.startX,i.startY),t.arc(i.startX,i.startY,r.topCenterCircle.radius,0,2*Math.PI),t.moveTo(i.endX,i.endY),t.arc(i.endX,i.endY,r.bottomCenterCircle.radius,0,2*Math.PI);else if(r.shape==="path"){var n=m({},e.activeObj,{},!0);if(n.pointColl.length>1)for(var s=1,a=n.pointColl.length;s<a;s++)i.startX=n.pointColl[s-1].x,i.startY=n.pointColl[s-1].y,i.endX=n.pointColl[s].x,i.endY=n.pointColl[s].y,t.moveTo(i.startX,i.startY),t.arc(i.startX,i.startY,r.topCenterCircle.radius,0,2*Math.PI),t.moveTo(i.endX,i.endY),t.arc(i.endX,i.endY,r.bottomCenterCircle.radius,0,2*Math.PI);var l={shape:null};e.notify("selection",{prop:"getCurrentDrawingShape",value:{obj:l}}),l.shape==="path"&&(e.activeObj=r=n),t.moveTo(i.startX,i.startY),t.arc(i.startX,i.startY,r.topCenterCircle.radius,0,2*Math.PI),t.moveTo(i.endX,i.endY),t.arc(i.endX,i.endY,r.bottomCenterCircle.radius,0,2*Math.PI)}else this.drawRotationArcLine(t),t.lineTo(r.rotationCirclePoint.x,r.rotationCirclePoint.y);t.stroke(),t.fill(),t.closePath(),r.shape!=="arrow"&&r.shape!=="line"&&r.shape!=="path"&&(t.beginPath(),t.moveTo(r.rotationCirclePoint.x,r.rotationCirclePoint.y),t.arc(r.rotationCirclePoint.x,r.rotationCirclePoint.y,r.bottomCenterCircle.radius,0,2*Math.PI),t.stroke(),t.fill(),t.closePath()),t.lineWidth/=2},o.prototype.drawRotationArcLine=function(t){var e=this.parent,i=e.activeObj;d(i.rotationCircleLine)&&(i.rotationCircleLine=22.5);var r,n=!1,s=!1;if(i.shapeDegree===0?r=e.transform.degree:r=e.transform.degree-i.shapeDegree,r<0&&(r=360+r),i.flipObjColl)for(var a=0,l=i.flipObjColl.length;a<l;a++){var h=i.flipObjColl[a].toLowerCase();h==="horizontal"?n=!0:h==="vertical"&&(s=!0)}switch(r){case 0:case 360:s?(i.rotationCirclePoint={x:i.topCenterCircle.startX,y:i.topCenterCircle.startY-i.rotationCircleLine},t.moveTo(i.rotationCirclePoint.x,i.rotationCirclePoint.y+i.rotationCircleLine)):(i.rotationCirclePoint={x:i.bottomCenterCircle.startX,y:i.bottomCenterCircle.startY+i.rotationCircleLine},t.moveTo(i.rotationCirclePoint.x,i.rotationCirclePoint.y-i.rotationCircleLine));break;case 90:case-270:n?(i.rotationCirclePoint={x:i.centerRightCircle.startX+i.rotationCircleLine,y:i.centerLeftCircle.startY},t.moveTo(i.rotationCirclePoint.x-i.rotationCircleLine,i.rotationCirclePoint.y)):(i.rotationCirclePoint={x:i.centerLeftCircle.startX-i.rotationCircleLine,y:i.centerLeftCircle.startY},t.moveTo(i.rotationCirclePoint.x+i.rotationCircleLine,i.rotationCirclePoint.y));break;case 180:case-180:s?(i.rotationCirclePoint={x:i.bottomCenterCircle.startX,y:i.bottomCenterCircle.startY+i.rotationCircleLine},t.moveTo(i.rotationCirclePoint.x,i.rotationCirclePoint.y-i.rotationCircleLine)):(i.rotationCirclePoint={x:i.topCenterCircle.startX,y:i.topCenterCircle.startY-i.rotationCircleLine},t.moveTo(i.rotationCirclePoint.x,i.rotationCirclePoint.y+i.rotationCircleLine));break;case 270:case-90:n?(i.rotationCirclePoint={x:i.centerLeftCircle.startX-i.rotationCircleLine,y:i.centerLeftCircle.startY},t.moveTo(i.rotationCirclePoint.x+i.rotationCircleLine,i.rotationCirclePoint.y)):(i.rotationCirclePoint={x:i.centerRightCircle.startX+i.rotationCircleLine,y:i.centerLeftCircle.startY},t.moveTo(i.rotationCirclePoint.x-i.rotationCircleLine,i.rotationCirclePoint.y));break}},o.prototype.drawSquareLines=function(t){var e,i=this.parent,r=i.activeObj,n=r.activePoint,s=n.startX,a=n.startY,l=n.width,h=n.height,c=r.strokeSettings,u=c.fillColor,p=c.strokeColor,f=c.strokeWidth,g=c.radius;r.shape&&(e=r.shape.split("-")),e[0]==="crop"?t.strokeStyle="#fff":t.strokeStyle=p,t.beginPath();var v={width:0,height:0},y={width:1,height:1};i.notify("crop",{prop:"calcRatio",onPropertyChange:!1,value:{obj:v,dimension:{width:t.canvas.width,height:t.canvas.height}}}),y=v;var C=t.canvas.id===i.element.id+"_tempCanvas",b=i.transform.zoomFactor,M=C?g*10*((y.width+y.height)/2):g*10,S=M+M*b;g!==null?i.isSafari?this.drawRoundedRect(t,s,a,l,h,S):t.roundRect(s,a,l,h,S):t.rect(s,a,l,h),u!==""&&(t.fillStyle=u,t.fill()),g!==null?i.isSafari?this.drawRoundedRect(t,s+f,a+f,l-2*f,h-2*f,S):t.roundRect(s+f,a+f,l-2*f,h-2*f,S):t.rect(s+f,a+f,l-2*f,h-2*f),t.fillStyle=p,t.fill("evenodd"),t.closePath()},o.prototype.drawRoundedRect=function(t,e,i,r,n,s){var a=Math.max(0,Math.min(s,r/2,n/2));t.moveTo(e+a,i),t.arcTo(e+r,i,e+r,i+n,a),t.arcTo(e+r,i+n,i,i+n,a),t.arcTo(e,i+n,e,i,a),t.arcTo(e,i,e+r,i,a),t.closePath()},o.prototype.drawSelection=function(t,e){var i=this.parent,r=i.activeObj,n=r.activePoint,s=n.startX,a=n.startY,l=n.endX,h=n.endY;this.upperContext.strokeStyle=i.themeColl[i.theme].primaryColor,this.upperContext.beginPath(),r.horTopInnerLine={startX:s,startY:a+e,endX:l,endY:h+e},r.horBottomInnerLine={startX:s,startY:a+2*e,endX:l,endY:h+2*e},r.verLeftInnerLine={startX:s+t,startY:a,endX:s+t,endY:h},r.verRightInnerLine={startX:s+2*t,startY:a,endX:s+2*t,endY:h},this.upperContext.moveTo(r.horTopInnerLine.startX,r.horTopInnerLine.startY),this.upperContext.lineTo(r.horTopInnerLine.endX,r.horTopInnerLine.startY),this.upperContext.moveTo(r.horBottomInnerLine.startX,r.horBottomInnerLine.startY),this.upperContext.lineTo(r.horBottomInnerLine.endX,r.horBottomInnerLine.startY),this.upperContext.moveTo(r.verLeftInnerLine.startX,r.verLeftInnerLine.startY),this.upperContext.lineTo(r.verLeftInnerLine.endX,r.verLeftInnerLine.endY),this.upperContext.moveTo(r.verRightInnerLine.startX,r.verRightInnerLine.startY),this.upperContext.lineTo(r.verRightInnerLine.endX,r.verRightInnerLine.endY),this.upperContext.stroke(),this.upperContext.closePath()},o.prototype.shapeCircle=function(t,e,i){var r=this.parent,n=r.activeObj.activePoint,s=n.startX,a=n.startY,l=n.endX,h=n.endY,c=n.width;t.strokeStyle=r.themeColl[r.theme].primaryColor,t.clearRect(0,0,r.lowerCanvas.width,r.lowerCanvas.height),t.fillStyle="rgb(0, 0, 0, 0.25)",t.fillRect(0,0,r.lowerCanvas.width,r.lowerCanvas.height);var u=t.lineWidth;t.lineWidth=2,t.beginPath(),t.ellipse(r.activeObj.horTopLine.startX+e/2,r.activeObj.horTopLine.startY+i/2,e/2,i/2,0,0,2*Math.PI,!1),t.stroke(),t.closePath(),t.save(),t.beginPath(),t.arc((l-s)/2+s,(h-a)/2+a,c/2,0,Math.PI*2),t.closePath(),t.clip(),t.clearRect(0,0,r.lowerCanvas.width,r.lowerCanvas.height),t.restore(),t.lineWidth=u,this.drawOuterSelection(t,!0),r.currObjType.shape=""},o.prototype.shapeLine=function(t,e,i,r,n){var s=t.lineWidth;t.lineWidth=this.parent.activeObj.strokeSettings.strokeWidth,t.beginPath(),t.moveTo(e,i),t.lineTo(r,n),t.stroke(),t.lineWidth=s},o.prototype.manipulateSaveCtx=function(t,e,i){if(t!==this.lowerContext&&t!==this.upperContext){var r={width:0,height:0};this.parent.notify("crop",{prop:"calcRatio",onPropertyChange:!1,value:{obj:r,dimension:{width:t.canvas.width,height:t.canvas.height}}});var n=r;e&&(e*=n.width),i&&(i*=n.height)}return{x:e,y:i}},o.prototype.arrow=function(t,e){var i=this.parent,r=i.activeObj,n=r.activePoint,s=n.startX,a=n.startY,l=n.endX,h=n.endY,c=r.strokeSettings.strokeWidth;t.lineWidth=c;var u=this.arrowDimension.arrow.width,p=this.arrowDimension.arrow.height,f=this.manipulateSaveCtx(t,u,p);u=f.x+c,p=f.y+c,this.dx=l-s,this.dy=h-a,t.fillStyle=r.strokeSettings.strokeColor;var g=Math.atan2(this.dy,this.dx),v=r.start==="arrow",y=r.end==="arrow",C=r.end==="circle"||r.end==="square",b=r.start==="circle"||r.start==="square";((e&&r.triangleDirection==="left"||r.triangleDirection==="right")&&(v&&r.end==="none"||v&&!C&&!b)||!e&&(y&&r.start==="none"||!v&&!C&&!b))&&this.shapeLine(t,s,a,l,h),e&&r.triangleDirection==="left"||!e&&r.triangleDirection==="right"?(t.translate(l,h),t.rotate(g),this.shapeLine(t,0,0,-u,p/2),this.shapeLine(t,0,0,-u,-p/2),t.rotate(-g),t.translate(-l,-h)):(e&&r.triangleDirection==="right"||!e&&r.triangleDirection==="left")&&(t.translate(s,a),t.rotate(g),this.shapeLine(t,0,0,u,p/2),this.shapeLine(t,0,0,u,-p/2),t.rotate(-g),t.translate(-s,-a))},o.prototype.arrowSolid=function(t,e){var i=this.parent,r=i.activeObj,n=r.strokeSettings.strokeWidth,s=r.activePoint,a=s.startX,l=s.startY,h=s.endX,c=s.endY,u=this.arrowDimension.arrowSolid.width,p=this.arrowDimension.arrowSolid.height,f=this.manipulateSaveCtx(t,u,p);u=f.x+n,p=f.y+n,this.dx=h-a,this.dy=c-l;var g=Math.atan2(this.dy,this.dx),v=r.start==="arrowSolid",y=r.end==="arrowSolid",C=r.end==="circle"||r.end==="square",b=r.start==="circle"||r.start==="square";(e&&v&&r.end==="none"||v&&!C&&!b||!e&&(y&&r.start==="none"||!v&&!C&&!b))&&this.shapeLine(t,a,l,h,c),e&&r.triangleDirection==="left"||!e&&r.triangleDirection==="right"?(t.translate(h,c),t.rotate(g),t.beginPath(),t.moveTo(n,0),t.lineTo(-u+p/2,p/2),t.lineTo(-u+p/2,-p/2),t.closePath(),t.fill(),t.rotate(-g),t.translate(-h,-c),r.rotatedAngle=g):(e&&r.triangleDirection==="right"||!e&&r.triangleDirection==="left")&&(t.translate(a,l),t.rotate(g),t.beginPath(),t.moveTo(0-n,0),t.lineTo(u-p/2,p/2),t.lineTo(u-p/2,-p/2),t.closePath(),t.fill(),t.rotate(-g),t.translate(-a,-l),r.rotatedAngle=g)},o.prototype.arrowSquareStart=function(t){var e=this.parent,i=e.activeObj,r=i.strokeSettings.strokeWidth,n=i.activePoint,s=n.startX,a=n.startY,l=n.endX,h=n.endY,c=i.start==="square",u=i.end==="circle",p=i.start==="squareSolid",f=i.end==="circleSolid";(c&&i.end==="none"||c&&!u&&i.start!=="square"||p&&f)&&this.shapeLine(t,s,a,l,h),t.lineWidth=r,t.beginPath(),t.fillStyle=i.strokeSettings.strokeColor;var g=this.arrowDimension.square.width,v=this.arrowDimension.square.height,y=this.manipulateSaveCtx(t,g,v);g=y.x+r,v=y.y+r,this.dx=l-s,this.dy=h-a;var C=Math.atan2(this.dy,this.dx);i.triangleDirection==="left"?(t.translate(l,h),t.rotate(C),i.start==="squareSolid"&&t.fillRect(-g+v/2,-v/2,g,v),t.strokeRect(-g+v/2,-v/2,g,v),t.rotate(-C),t.translate(-l,-h),this.squareStartIntersectX1=l-v/2*Math.cos(C),this.squareStartIntersectY1=h-v/2*Math.sin(C),i.start==="square"&&i.end!=="square"&&i.end!=="circle"?this.shapeLine(t,s,a,this.squareStartIntersectX1,this.squareStartIntersectY1):i.start==="square"&&i.end==="circle"?this.shapeLine(t,this.endCircleIntersectX1,this.endCircleIntersectY1,this.squareStartIntersectX1,this.squareStartIntersectY1):i.start==="squareSolid"&&i.end==="squareSolid"&&this.shapeLine(t,s,a,l,h)):i.triangleDirection==="right"&&(t.lineWidth=r,t.fillStyle=i.strokeSettings.strokeColor,i.start==="squareSolid"&&i.end==="squareSolid"&&this.shapeLine(t,s,a,l,h),t.translate(s,a),t.rotate(C),i.start==="squareSolid"&&t.fillRect(v/2-g,-v/2,g,v),t.strokeRect(v/2-g,-v/2,g,v),t.rotate(-C),t.translate(-s,-a),i.rotatedAngle=C,this.squareStartIntersectX1=s+v/2*Math.cos(C),this.squareStartIntersectY1=a+v/2*Math.sin(C),i.start==="square"&&i.end!=="square"&&i.end!=="circle"&&this.shapeLine(t,l,h,this.squareStartIntersectX1,this.squareStartIntersectY1),i.start==="square"&&i.end==="circle"&&this.shapeLine(t,this.endCircleIntersectX1,this.endCircleIntersectY1,this.squareStartIntersectX1,this.squareStartIntersectY1))},o.prototype.arrowSquareEnd=function(t){var e=this.parent,i=e.activeObj,r=i.activePoint,n=r.startX,s=r.startY,a=r.endX,l=r.endY,h=i.strokeSettings.strokeWidth,c=this.arrowDimension.square.width,u=this.arrowDimension.square.height,p=this.manipulateSaveCtx(t,c,u);c=p.x+h,u=p.y+h,this.dx=a-n,this.dy=l-s;var f=Math.atan2(this.dy,this.dx);t.lineWidth=h,i.triangleDirection==="right"?(t.fillStyle=i.strokeSettings.strokeColor,i.end==="squareSolid"&&i.start==="none"&&this.shapeLine(t,n,s,a,l),t.translate(a,l),t.rotate(f),i.end==="squareSolid"&&t.fillRect(-c+u/2,-u/2,c,u),t.strokeRect(-c+u/2,-u/2,c,u),t.rotate(-f),t.translate(-a,-l),i.rotatedAngle=f,this.squareEndIntersectX1=a-u/2*Math.cos(f),this.squareEndIntersectY1=l-u/2*Math.sin(f),i.end==="square"&&i.start!=="square"&&i.start!=="circle"?this.shapeLine(t,n,s,this.squareEndIntersectX1,this.squareEndIntersectY1):i.start==="circle"&&i.end==="square"?this.shapeLine(t,this.squareEndIntersectX1,this.squareEndIntersectY1,this.startCircleIntersectX1,this.startCircleIntersectY1):i.start==="square"&&i.end==="square"&&this.shapeLine(t,this.squareEndIntersectX1,this.squareEndIntersectY1,this.squareStartIntersectX1,this.squareStartIntersectY1)):i.triangleDirection==="left"&&(t.translate(n,s),t.rotate(f),i.end==="squareSolid"&&t.fillRect(u/2-c,-u/2,c,u),t.strokeRect(u/2-c,-u/2,c,u),t.rotate(-f),t.translate(-n,-s),i.rotatedAngle=f,this.squareEndIntersectX1=n+u/2*Math.cos(f),this.squareEndIntersectY1=s+u/2*Math.sin(f),i.end==="square"&&i.start!=="square"&&i.start!=="circle"?this.shapeLine(t,a,l,this.squareEndIntersectX1,this.squareEndIntersectY1):i.start==="circle"&&i.end==="square"?this.shapeLine(t,this.squareEndIntersectX1,this.squareEndIntersectY1,this.startCircleIntersectX1,this.startCircleIntersectY1):i.start==="square"&&i.end==="square"?this.shapeLine(t,this.squareEndIntersectX1,this.squareEndIntersectY1,this.squareStartIntersectX1,this.squareStartIntersectY1):i.end==="squareSolid"&&i.start==="none"&&this.shapeLine(t,n,s,a,l))},o.prototype.arrowCircle=function(t,e){var i=this.parent,r=i.activeObj,n=r.activePoint,s=n.startX,a=n.startY,l=n.endX,h=n.endY,c=r.strokeSettings.strokeWidth;if(e&&r.triangleDirection==="left"||!e&&r.triangleDirection==="right"){t.lineWidth=c;var u=this.arrowDimension.circle.width,p=this.manipulateSaveCtx(t,u,null);u=p.x+c,t.beginPath(),t.arc(l,h,u,0,2*Math.PI),t.stroke(),t.closePath(),this.dx=l-s,this.dy=h-a;var f=this.dx*this.dx+this.dy*this.dy,g=2*(this.dx*(s-l)+this.dy*(a-h)),v=(s-l)*(s-l)+(a-h)*(a-h)-u*u,y=g*g-4*f*v;if(y>=0){t.fillStyle=r.strokeSettings.strokeColor;var C=(-g-Math.sqrt(y))/(2*f),b=s+this.dx*C,M=a+this.dy*C;e?(this.startCircleIntersectX1=b,this.startCircleIntersectY1=M,this.endCircleIntersectX1=l-this.dx*C,this.endCircleIntersectY1=h-this.dy*C,t.beginPath(),t.fill(),t.beginPath(),r.start==="circle"&&r.end==="circle"?this.shapeLine(t,this.startCircleIntersectX1,this.startCircleIntersectY1,this.endCircleIntersectX1,this.endCircleIntersectY1):r.start==="circle"&&r.end!=="circle"&&r.end!=="square"&&this.shapeLine(t,s,a,this.startCircleIntersectX1,this.startCircleIntersectY1),t.stroke(),t.closePath()):(this.endCircleIntersectX1=b,this.endCircleIntersectY1=M,r.end==="circle"&&r.start!=="circle"&&r.start!=="square"&&this.shapeLine(t,s,a,this.endCircleIntersectX1,this.endCircleIntersectY1))}var S=Math.atan2(this.dy,this.dx);i.activeObj.rotatedAngle=S}else if(e&&r.triangleDirection==="right"||!e&&r.triangleDirection==="left"){t.lineWidth=c;var u=this.arrowDimension.circle.width,p=this.manipulateSaveCtx(t,u,null);u=p.x+c,t.beginPath(),t.arc(s,a,u,0,2*Math.PI),t.stroke(),t.closePath(),this.dx=s-l,this.dy=a-h;var f=this.dx*this.dx+this.dy*this.dy,g=2*(this.dx*(l-s)+this.dy*(h-a)),v=(l-s)*(l-s)+(h-a)*(h-a)-u*u,y=g*g-4*f*v;if(y>=0){t.fillStyle=r.strokeSettings.strokeColor;var C=(-g-Math.sqrt(y))/(2*f),b=l+this.dx*C,M=h+this.dy*C;e?(this.startCircleIntersectX1=b,this.startCircleIntersectY1=M,this.endCircleIntersectX1=s-this.dx*C,this.endCircleIntersectY1=a-this.dy*C,r.start==="circle"&&r.end==="circle"?this.shapeLine(t,this.endCircleIntersectX1,this.endCircleIntersectY1,this.startCircleIntersectX1,this.startCircleIntersectY1):r.start==="circle"&&r.end!=="circle"&&r.end!=="square"&&this.shapeLine(t,l,h,this.startCircleIntersectX1,this.startCircleIntersectY1)):(this.endCircleIntersectX1=b,this.endCircleIntersectY1=M,t.beginPath(),t.fill(),t.beginPath(),r.end==="circle"&&r.start!=="circle"&&r.start!=="square"&&this.shapeLine(t,l,h,this.endCircleIntersectX1,this.endCircleIntersectY1))}var S=Math.atan2(this.dy,this.dx);i.activeObj.rotatedAngle=S}},o.prototype.arrowCircleSolid=function(t,e){var i=this.parent,r=i.activeObj,n=r.activePoint,s=n.startX,a=n.startY,l=n.endX,h=n.endY,c=r.start==="circleSolid",u=r.strokeSettings.strokeWidth;if(e&&r.triangleDirection==="left"||!e&&r.triangleDirection==="right"){t.lineWidth=u,t.beginPath(),t.fillStyle=r.strokeSettings.strokeColor,(e&&c&&r.end==="none"||c&&r.end!=="circle"&&r.end!=="square"||!e&&r.end==="circleSolid"&&r.start==="none")&&this.shapeLine(t,s,a,l,h);var p=this.arrowDimension.circle.width,f=this.manipulateSaveCtx(t,p,null);p=f.x+u,this.dx=l-s,this.dy=h-a,t.save(),t.beginPath(),t.arc(l,h,p,0,2*Math.PI),t.stroke(),t.fill(),t.closePath(),r.rotatedAngle=Math.atan2(this.dy,this.dx)}else if(e&&r.triangleDirection==="right"||!e&&r.triangleDirection==="left"){t.lineWidth=u,t.beginPath(),t.fillStyle=r.strokeSettings.strokeColor,(e&&c&&r.end==="none"||c&&r.end!=="circle"&&r.end!=="square"||!e&&r.end==="circleSolid"&&r.start==="none")&&this.shapeLine(t,s,a,l,h);var p=this.arrowDimension.circle.width,f=this.manipulateSaveCtx(t,p,null);p=f.x+u,this.dx=l-s,this.dy=h-a,t.save(),t.beginPath(),t.arc(s,a,p,0,2*Math.PI),t.stroke(),t.fill(),t.closePath(),r.rotatedAngle=Math.atan2(this.dy,this.dx)}},o.prototype.arrowBar=function(t,e){var i=this.parent,r=i.activeObj,n=r.activePoint,s=n.startX,a=n.startY,l=n.endX,h=n.endY,c=r.strokeSettings.strokeWidth;if(e&&r.triangleDirection==="left"||!e&&r.triangleDirection==="right"){t.lineWidth=c,t.beginPath(),t.fillStyle=r.strokeSettings.strokeColor,(e&&r.start==="bar"&&r.end==="none"||r.start==="bar"&&r.end!=="circle"&&r.end!=="square"||!e&&(r.end==="bar"&&r.start==="none"||r.end==="bar"&&r.start!=="circle"&&r.start!=="square"))&&this.shapeLine(t,s,a,l,h);var u=this.arrowDimension.bar.width,p=this.arrowDimension.bar.height,f=this.manipulateSaveCtx(t,u,p);u=f.x+c,p=f.y+c,this.dx=l-s,this.dy=h-a;var g=Math.atan2(this.dy,this.dx);t.translate(l,h),t.rotate(g),t.fillRect(-u+p/4,-p/2,u,p),t.rotate(-g),t.translate(-l,-h),r.rotatedAngle=g}else if(e&&r.triangleDirection==="right"||!e&&r.triangleDirection==="left"){t.lineWidth=c,t.beginPath(),t.fillStyle=r.strokeSettings.strokeColor,(e&&r.start==="bar"&&r.end==="none"||r.start==="bar"&&r.end!=="circle"&&r.end!=="square"||!e&&r.end==="bar"&&r.start==="none")&&this.shapeLine(t,s,a,l,h);var u=this.arrowDimension.bar.width,p=this.arrowDimension.bar.height,f=this.manipulateSaveCtx(t,u,p);u=f.x+c,p=f.y+c,this.dx=l-s,this.dy=h-a;var g=Math.atan2(this.dy,this.dx);t.translate(s,a),t.rotate(g),t.fillRect(p/4-u,-p/2,u,p),t.rotate(-g),t.translate(-s,-a),i.activeObj.rotatedAngle=g}},o.prototype.shapeImage=function(t){var e=this.parent,i=e.activeObj,r=i.activePoint,n=r.startX,s=r.startY,a=r.width,l=r.height,h=i.imageCanvas.getContext("2d");if(t===this.lowerContext&&this.isImageApply){var c={width:0,height:0};e.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:i.imageElement.width,height:i.imageElement.height,obj:c,isImgShape:null}}),(a<c.width/5||l<c.height/5)&&(h.clearRect(0,0,i.imageCanvas.width,i.imageCanvas.height),e.notify("selection",{prop:"applyTransformToImg",onPropertyChange:!1,value:{ctx:h}}),e.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}}),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),e.notify("selection",{prop:"setImageClarity",onPropertyChange:!1,value:{bool:!1}}),this.isImageApply=!1)}var u={startX:0,startY:0,width:0,height:0};u.width=a,u.height=l,i.flipObjColl.length===4&&(i.flipObjColl=[],i.shapeFlip=""),u.startX=(a-u.width)/2+n,u.startY=(l-u.height)/2+s;var p=t.globalAlpha;t.globalAlpha=i.opacity,i.rotateFlipColl&&i.rotateFlipColl.length>0?this.rotateImage(t):t.drawImage(i.imageCanvas,u.startX,u.startY,u.width,u.height),t.globalAlpha=p,e.currObjType.isText=!1},o.prototype.shapeText=function(t){var e=this.parent,i=t.filter,r=e.activeObj,n=r.activePoint,s=n.startX,a=n.startY,l=n.width,h=n.height,c=r.keyHistory.split(`
`),u=r.textSettings,p=u.fontFamily,f=u.bold,g=u.italic,v=r.textSettings.fontSize,y=v+v*.25,C=(y*c.length-v*c.length)/c.length;t.filter="none";var b=t.fillStyle;r.strokeSettings.fillColor!==""&&(t.fillStyle=r.strokeSettings.fillColor,t.fillRect(r.activePoint.startX,r.activePoint.startY,r.activePoint.width,r.activePoint.height)),t.fillStyle=b;for(var M=0;M<c.length;M++){var S=c[M],N=(M+1)*v*.85+M*C;e.transform.degree===-360&&(e.transform.degree=0),e.transform.degree===0||e.transform.degree===180?v>h&&(v=r.textSettings.fontSize=h-h*.1):v>l&&(v=r.textSettings.fontSize=l-l*.1),t.strokeStyle=r.strokeSettings.outlineColor,t.fillStyle=r.strokeSettings.strokeColor;var x=t.lineWidth,A={width:0,height:0},U={width:1,height:1};e.notify("crop",{prop:"calcRatio",onPropertyChange:!1,value:{obj:A,dimension:{width:t.canvas.width,height:t.canvas.height}}}),U=A;var z=t.canvas.id===e.element.id+"_tempCanvas",J=Math.max(1,r.strokeSettings.outlineWidth/2);/^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6}|[0-9A-Fa-f]{8})$|^[a-zA-Z]+$/.test(r.strokeSettings.outlineColor)?(t.lineWidth=J*(Math.floor(z?(v-1)/60:(v-1)/16)*.5+.5),z&&(t.lineWidth*=(U.width+U.height)/2,e.transform.degree!==0&&(t.lineWidth/=1.8))):t.lineWidth=1;var R="";f&&(R="bold "),g&&(R="italic "),f&&g&&(R="italic bold "),t.font=R+v+"px "+p,r.flipObjColl.length===4&&(r.flipObjColl=[],r.shapeFlip=""),r.rotateFlipColl&&r.rotateFlipColl.length>0?this.rotateText(t):(t.strokeText(S,s+v*.1,a+N),t.fillText(S,s+v*.1,a+N)),t.lineWidth=x}t.filter=i,e.currObjType.isText=!1,this.upperContext===t&&this.drawOuterSelection(t)},o.prototype.updateActPoint=function(t,e){var i=this.parent,r=i.activeObj,n=r.activePoint;return t.toLowerCase()==="horizontal"?n.startX<=e.canvas.width/2?(n.startX=e.canvas.width/2+(e.canvas.width/2-n.endX),n.endX=n.startX+n.width,this.updateActiveObject(n,r),i.activeObj=r):n.startX>=e.canvas.width/2&&(n.startX=e.canvas.width-n.endX,n.endX=n.startX+n.width,this.updateActiveObject(n,r),i.activeObj=r):t.toLowerCase()==="vertical"&&(n.startY<=e.canvas.height/2?(n.startY=e.canvas.height/2+(e.canvas.height/2-n.endY),n.endY=n.startY+n.height,this.updateActiveObject(n,r),i.activeObj=r):n.startY>=e.canvas.height/2&&(n.startY=e.canvas.height-n.endY,n.endY=n.startY+n.height,this.updateActiveObject(n,r),i.activeObj=r)),n},o.prototype.rotateImage=function(t){var e=this.parent,i,r=e.activeObj,n=m({},e.activeObj,null,!0);r.shapeDegree===0?i=e.transform.degree:i=e.transform.degree-r.shapeDegree,i===-450&&(i=-90),i<0&&(i=360+i);var s={startX:0,startY:0,width:0,height:0};s.width=i%90===0&&i%180!==0?r.activePoint.height:r.activePoint.width,s.height=i%90===0&&i%180!==0?r.activePoint.width:r.activePoint.height,s.startX=r.activePoint.startX,s.startY=r.activePoint.startY;var a=s.startX,l=s.startY,h;t.save();for(var c=0,u=r.rotateFlipColl.length;c<u;c++){var p=r.rotateFlipColl[c];typeof p=="number"?(h=p,h===-450&&(h=-90),h<0&&(h=360+h),s.width=h%90===0&&h%180!==0?r.activePoint.height:r.activePoint.width,s.height=h%90===0&&h%180!==0?r.activePoint.width:r.activePoint.height,t.translate(t.canvas.width/2,t.canvas.height/2),t.rotate(Math.PI/180*p),t.translate(-t.canvas.height/2,-t.canvas.width/2),h%90===0&&h%270!==0||h===0?(l=t.canvas.width-(r.activePoint.startX+r.activePoint.width),l+=(r.activePoint.width-s.height)/2,a=s.startY):h%270===0&&(a=t.canvas.height-(r.activePoint.startY+r.activePoint.height),a+=(r.activePoint.height-s.width)/2,l=s.startX),s.startX=a,s.startY=l,r.activePoint.startX=a,r.activePoint.startY=l,r.activePoint.endX=r.activePoint.startX+s.width,r.activePoint.endY=r.activePoint.startY+s.height,r=this.updateWidthHeight(r)):(p==="horizontal"&&i%90===0&&i%180!==0?p="vertical":p==="vertical"&&i%90===0&&i%180!==0&&(p="horizontal"),p==="horizontal"?(t.translate(t.canvas.width,0),t.scale(-1,1),r.activePoint=this.updateActPoint("horizontal",t)):p==="vertical"&&(t.translate(0,t.canvas.height),t.scale(1,-1),r.activePoint=this.updateActPoint("vertical",t)),s.startX=r.activePoint.startX,s.startY=r.activePoint.startY),s.startX=r.activePoint.startX,s.startY=r.activePoint.startY,a=s.startX,l=s.startY}r.rotatedAngle!==0&&e.notify("shape",{prop:"setPointCollForShapeRotation",onPropertyChange:!1,value:{obj:r}}),t.drawImage(r.imageCanvas,s.startX,s.startY,s.width,s.height),t.restore(),e.activeObj=n,(e.transform.degree===360||e.transform.degree===-360)&&(e.transform.degree=0)},o.prototype.rotateText=function(t){var e=this.parent,i,r=e.activeObj,n=m({},e.activeObj,null,!0),s=e.activeObj.activePoint;r.shapeDegree===0?i=e.transform.degree:i=e.transform.degree-r.shapeDegree,i===-450&&(i=-90),i<0&&(i=360+i);var a={startX:0,startY:0,width:0,height:0};a.width=i%90===0&&i%180!==0?s.height:s.width,a.height=i%90===0&&i%180!==0?s.width:s.height,a.startX=s.startX,a.startY=s.startY;var l=a.startX,h=a.startY,c;t.save();for(var u=0,p=r.rotateFlipColl.length;u<p;u++){var f=r.rotateFlipColl[u];typeof f=="number"?(c=f,c===-450&&(c=-90),c<0&&(c=360+c),a.width=c%90===0&&c%180!==0?s.height:s.width,a.height=c%90===0&&c%180!==0?s.width:s.height,t.translate(t.canvas.width/2,t.canvas.height/2),t.rotate(Math.PI/180*f),t.translate(-t.canvas.height/2,-t.canvas.width/2),c%90===0&&c%270!==0||c===0?(h=t.canvas.width-s.endX,l=s.startY):c%270===0&&(l=t.canvas.height-s.endY,h=s.startX),a.startX=l,a.startY=h,s.startX=l,s.startY=h,s.endX=s.startX+a.width,s.endY=s.startY+a.height,r=this.updateWidthHeight(r)):(f==="horizontal"&&i%90===0&&i%180!==0?f="vertical":f==="vertical"&&i%90===0&&i%180!==0&&(f="horizontal"),f==="horizontal"?(t.translate(t.canvas.width,0),t.scale(-1,1)):f==="vertical"&&(t.translate(0,t.canvas.height),t.scale(1,-1)),r.activePoint=s=this.updateActPoint(f,t),a.startX=s.startX,a.startY=s.startY),a.startX=s.startX,a.startY=s.startY,l=a.startX,h=a.startY}r.rotatedAngle!==0&&e.notify("shape",{prop:"setPointCollForShapeRotation",onPropertyChange:!1,value:{obj:r}}),h+=r.textSettings.fontSize*.4,this.textFlipDegree(t,l,h),t.restore(),e.activeObj=n,(e.transform.degree===360||e.transform.degree===-360)&&(e.transform.degree=0)},o.prototype.textFlipDegree=function(t,e,i){for(var r=this.parent,n=r.activeObj,s=n.keyHistory.split(`
`),a=n.textSettings.fontSize,l=(a*s.length-a*s.length)/s.length,h=a*.85+l,c=0,u=s.length;c<u;c++){var p=s[c];c>0&&(c===1&&(h-=a*.85),h+=a+a*.15),t.strokeText(p,e+a*.15,i+h+(c>0?a*.25:-a*.35)),t.fillText(p,e+a*.15,i+h+(c>0?a*.25:-a*.35))}},o.prototype.clearOuterCanvas=function(t){var e=this.parent,i=e.img,r=i.destLeft,n=i.destTop,s=i.destWidth,a=i.destHeight,l=r>0?r:0,h=n>0?n:0;t.clearRect(0,0,l,e.lowerCanvas.height),t.clearRect(r+s,0,e.lowerCanvas.width-(r+s),e.lowerCanvas.height),t.clearRect(0,0,e.lowerCanvas.width,h),t.clearRect(0,n+a,e.lowerCanvas.width,e.lowerCanvas.height-(n+a)),e.transform.currFlipState!==""&&(e.img.destLeft=r,e.img.destTop=n)},o.prototype.setDestPoints=function(){var t,e=this.parent,i=e.transform,r=i.degree,n=i.zoomFactor;if(r%90===0&&r%180!==0){var s={width:0,height:0};e.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:e.img.srcHeight,height:e.img.srcWidth,obj:s,isImgShape:null}}),t=s,this.isRotateZoom&&(t.width+=t.width*n,t.height+=t.height*n,e.img.destWidth=t.height,e.img.destHeight=t.width),e.img.destLeft=(e.lowerCanvas.clientWidth-t.height)/2,e.img.destTop=(e.lowerCanvas.clientHeight-t.width)/2,e.img.destWidth=t.height,e.img.destHeight=t.width}else{var s={width:0,height:0};e.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:e.img.srcWidth,height:e.img.srcHeight,obj:s,isImgShape:null}}),t=s,this.isRotateZoom&&(t.width+=t.width*n,t.height+=t.height*n,e.img.destWidth=t.width,e.img.destHeight=t.height),e.img.destLeft=(e.lowerCanvas.clientWidth-t.width)/2,r===0?e.img.destTop=(e.lowerCanvas.clientHeight-t.height+1)/2:e.img.destTop=(e.lowerCanvas.clientHeight-t.height)/2,e.img.destWidth=t.width,e.img.destHeight=t.height}},o.prototype.updateCurrTransState=function(t,e,i,r){var n=this.parent,s=n.img.destLeft,a=n.img.destTop;t==="initial"&&(this.lowerContext.setTransform(1,0,0,1,0,0),d(e)&&this.setDestPoints()),n.isCircleCrop||n.currSelectionPoint&&n.currSelectionPoint.shape==="crop-circle"?(this.currTransState(t,!0,null,i),n.transform.degree===0&&n.transform.currFlipState===""&&n.transform.straighten===0&&d(r)&&(n.img.destLeft=s,n.img.destTop=a),i&&(n.img.destLeft+=n.panPoint.totalPannedClientPoint.x,n.img.destTop+=n.panPoint.totalPannedClientPoint.y),n.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),i&&(n.img.destLeft-=n.panPoint.totalPannedClientPoint.x,n.img.destTop-=n.panPoint.totalPannedClientPoint.y)):(this.currTransState(t,null,null,i),n.transform.degree===0&&n.transform.currFlipState===""&&n.transform.straighten===0&&d(r)&&(n.img.destLeft=s,n.img.destTop=a))},o.prototype.currTransState=function(t,e,i,r){var n=this.parent;i=i||this.lowerContext,t==="initial"?this.setTransformColl(i,t):t==="reverse"&&(this.setTransformColl(i,t),this.setClientTransDim(e),(n.isCircleCrop||n.currSelectionPoint&&n.currSelectionPoint.shape==="crop-circle"&&d(r))&&(r&&(n.img.destLeft+=n.panPoint.totalPannedClientPoint.x,n.img.destTop+=n.panPoint.totalPannedClientPoint.y),n.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),r&&(n.img.destLeft-=n.panPoint.totalPannedClientPoint.x,n.img.destTop-=n.panPoint.totalPannedClientPoint.y)))},o.prototype.setTransformColl=function(t,e){var i=this.parent;if(e==="initial")for(var r=0,n=i.rotateFlipColl.length;r<n;r++)this.setTransform(t,i.rotateFlipColl[r]);else if(e==="reverse")for(var r=i.rotateFlipColl.length-1;r>=0;r--)this.setTransform(t,i.rotateFlipColl[r],!0)},o.prototype.setTransform=function(t,e,i){var r=this.parent;switch(i&&e===90?e=-90:i&&e===-90&&(e=90),e==="horizontal"&&r.transform.degree%90===0&&r.transform.degree%180!==0?e="vertical":e==="vertical"&&r.transform.degree%90===0&&r.transform.degree%180!==0&&(e="horizontal"),r.notify("transform",{prop:"setReverseRotate",onPropertyChange:!1,value:{bool:!0}}),r.notify("transform",{prop:"setReverseFlip",onPropertyChange:!1,value:{isReverseFlip:!0}}),d(i)&&t.clearRect(0,0,t.canvas.width,t.canvas.height),e){case 90:case-90:t.translate(t.canvas.width/2,t.canvas.height/2),t.rotate(Math.PI/180*e),t.translate(-t.canvas.width/2,-t.canvas.height/2);break;case"horizontal":t.translate(t.canvas.width,0),t.scale(-1,1);break;case"vertical":t.translate(0,t.canvas.height),t.scale(1,-1);break}r.notify("transform",{prop:"setReverseRotate",onPropertyChange:!1,value:{bool:!1}}),r.notify("transform",{prop:"setReverseFlip",onPropertyChange:!1,value:{isReverseFlip:!1}})},o.prototype.drawImgToCanvas=function(t){var e=this.parent;this.lowerContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),e.img.destWidth=t.width,e.img.destHeight=t.height,this.isInitialLoading&&(e.notify("filter",{prop:"initFilter",onPropertyChange:!1}),this.isInitialLoading=!1);var i=this.lowerContext.filter;this.lowerContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),this.drawImage(),(e.currSelectionPoint&&e.currSelectionPoint.shape==="crop-circle"||e.isCircleCrop)&&e.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),this.lowerContext.filter=i},o.prototype.renderImage=function(t,e,i,r){var n=this.parent;n.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:null}}),d(e)&&(this.upperContext.clearRect(0,0,n.lowerCanvas.width,n.lowerCanvas.height),this.lowerContext.clearRect(0,0,n.lowerCanvas.width,n.lowerCanvas.height)),t?this.setTransformColl(this.lowerContext,"initial"):(n.transform.zoomFactor!==0&&(this.isRotateZoom=!0),this.updateCurrTransState("initial",null,null,r)),n.notify("transform",{prop:"setDestPointsForFlipState",onPropertyChange:!1}),this.drawImage(),n.notify("transform",{prop:"setDestPointsForFlipState",onPropertyChange:!1}),t?this.setTransformColl(this.lowerContext,"reverse"):(this.updateCurrTransState("reverse",null,null,r),this.isRotateZoom=!1),i?n.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:null}}):n.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"iterate",pen:"iterate",isPreventApply:null}}),this.clearOuterCanvas(this.lowerContext),(n.isCircleCrop||n.currSelectionPoint&&n.currSelectionPoint.shape==="crop-circle")&&n.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}})},o.prototype.imageOnLoad=function(t){var e=this,i=this.parent,r=this;i.baseImg.src=t,i.baseImg.onload=function(){i.imgSrc=t,i.isUndoRedo||i.notify("filter",{prop:"update-finetunes",onPropertyChange:!1}),r.lowerContext.drawImage(i.baseImg,0,0,r.parent.lowerCanvas.width,r.parent.lowerCanvas.height);var n=!1,s=!1;if(i.isImageUpdated){var a=i.img,l=a.srcWidth,h=a.srcHeight,c=i.baseImgCanvas,u=c.width,p=c.height;n=l!==u||h!==p,s=i.baseImg.width===u&&i.baseImg.height===p}xt(i.element),i.element.style.opacity="1",r.updateBaseImgCanvas();var f={fileName:e.fileName,fileType:e.fileType,isValidImage:!0};if(r.updateCanvas(n,s),i.currObjType.isUndoZoom&&(i.currObjType.isUndoZoom=!1,r.parent.lowerCanvas.style.display="block"),i.isUndoRedo=e.isErrorImage=!1,D.isDevice){i.notify("toolbar",{prop:"destroy-top-toolbar",onPropertyChange:!1}),i.notify("toolbar",{prop:"destroy-bottom-toolbar",onPropertyChange:!1});var g={isApplyBtn:!1,isDevice:D.isDevice,isOkBtn:null,isResize:null,isFrame:null,isMainToolbar:!0};i.notify("toolbar",{prop:"init-main-toolbar",onPropertyChange:!1,value:g}),i.notify("toolbar",{prop:"create-bottom-toolbar",onPropertyChange:!1})}else{i.notify("toolbar",{prop:"destroy-top-toolbar",onPropertyChange:!1});var g={isApplyBtn:!1,isDevice:!1,isOkBtn:null};i.notify("toolbar",{prop:"init-main-toolbar",onPropertyChange:!1,value:g})}if(i.isImageLoaded&&i.element.style.opacity!=="0.5"){i.trigger("fileOpened",f);var v={action:"file-open",actionEventArgs:f};i.triggerEditCompleteEvent(v)}},i.baseImg.onerror=function(){xt(i.element),r.isErrorImage=!0,r.errorLoading()}},o.prototype.errorLoading=function(){var t=this.parent,e={fileName:null,fileType:null,isValidImage:!1};t.trigger("fileOpened",e)},o.prototype.updateBaseImgCanvas=function(){var t=this.parent;t.baseImgCanvas.width=t.baseImg.width,t.baseImgCanvas.height=t.baseImg.height,t.baseImgCanvas.getContext("2d").drawImage(t.baseImg,0,0)},o.prototype.updateCanvas=function(t,e){var i=this.parent;!i.isImageUpdated||!t?(i.img.srcWidth=i.baseImgCanvas.width,i.img.srcHeight=i.baseImgCanvas.height):!e&&t&&(i.img.srcLeft=0,i.img.srcTop=0,i.img.srcWidth=i.baseImgCanvas.width,i.img.srcHeight=i.baseImgCanvas.height,i.currSelectionPoint=null,i.cropObj={cropZoom:0,defaultZoom:0,totalPannedPoint:{x:0,y:0},totalPannedClientPoint:{x:0,y:0},totalPannedInternalPoint:{x:0,y:0},tempFlipPanPoint:{x:0,y:0},activeObj:{},rotateFlipColl:[],degree:0,currFlipState:"",straighten:0,destPoints:{startX:0,startY:0,width:0,height:0},srcPoints:{startX:0,startY:0,width:0,height:0},filter:"",isBrightAdjust:!1,zoomFactor:0,previousZoomValue:0,aspectWidth:null,aspectHeight:null,frame:"none",straightenZoom:0,adjustmentLevel:{brightness:0,contrast:0,hue:0,opacity:100,saturation:0,blur:0,exposure:0,transparency:100,sharpen:!1,bw:!1},currentFilter:""});var r={width:0,height:0};i.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:i.img.srcWidth,height:i.img.srcHeight,obj:r,isImgShape:null}});var n=r;i.img.destLeft=(i.lowerCanvas.clientWidth-n.width)/2,i.img.destTop=(i.lowerCanvas.clientHeight-n.height+1)/2,this.drawImgToCanvas(n),this.origDim.width=i.img.destWidth,this.origDim.height=i.img.destHeight,this.zoomCrop.width=i.img.destWidth,this.zoomCrop.height=i.img.destHeight,i.notify("transform",{prop:"setCropDimension",onPropertyChange:!1,value:{width:i.img.destWidth,height:i.img.destHeight}});var s={startX:i.img.destLeft,startY:i.img.destTop,width:i.img.destWidth,height:i.img.destHeight};i.notify("crop",{prop:"setCropDestPoints",onPropertyChange:!1,value:{point:s}});var a=this.lowerContext.filter;this.lowerContext.filter="none",i.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"iterate",pen:"zoom",isPreventApply:null}}),this.lowerContext.filter=a,i.img.destWidth>0&&i.img.destHeight>0&&(i.isImageLoaded=!0),i.isUndoRedo&&i.transform.currFlipState!==""&&i.notify("transform",{prop:"flipImage",onPropertyChange:!1,value:{direction:i.toPascalCase(i.transform.currFlipState)}}),i.disabled&&i.element.setAttribute("class","e-disabled"),(i.zoomSettings.zoomFactor!==1||i.zoomSettings.zoomPoint)&&i.zoom(i.zoomSettings.zoomFactor,i.zoomSettings.zoomPoint),d(this.initZoomValue)&&(this.initZoomValue=i.zoomSettings.zoomFactor),this.isImageEdited=!1},o.prototype.resetFrameZoom=function(t){var e=this.parent;if(!d(e.tempFrameZoomLevel)){var i=e.tempFrameZoomLevel;e.tempFrameZoomLevel=null,e.notify("transform",{prop:"resetZoom",onPropertyChange:!1}),e.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:i,zoomPoint:null,isResize:!0}});var r=e.cancelCropSelection;t&&r&&(r.previousObj.frameObj=m({},e.frameObj,null,!0),r.currentObj.frameObj=m({},e.frameObj,null,!0),r.previousObj.frame=r.currentObj.frame=e.frameObj.type),this.updateCropSelObj(),e.cancelCropSelection=null}},o.prototype.performCancel=function(t,e,i){var r=this.parent;i&&(r.noPushUndo=!1);var n={bool:r.isStraightening};t=t||!1;var s={bool:!1};r.allowDownScale=!0,r.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:s}}),d(e)&&JSON.stringify(r.frameObj)!==JSON.stringify(r.tempFrameObj)&&(m(r.frameObj,r.tempFrameObj),this.renderImage(null,null,!0)),this.resetFrameZoom(!1);var a={action:""};if(s.bool)a.action="freehand-draw",r.notify("freehand-draw",{prop:"cancelFhd",onPropertyChange:!1}),r.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1}),r.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}});else if(r.textArea.style.display==="block"||r.textArea.style.display==="inline-block")a.action="text-editing",r.textArea.style.display="none",r.textArea.value="",r.textArea.style.transform="",this.prevActObj?(r.activeObj=this.prevActObj,this.prevActObj=null):(r.activeObj.strokeSettings=this.tempStrokeSettings,r.activeObj.textSettings=this.tempTextSettings),r.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"cancel"}}),this.isShapeTextInserted&&r.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),r.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:!0}}),r.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1}),r.notify("selection",{prop:"setTempActObj",onPropertyChange:!1,value:{obj:r.activeObj}}),r.drawingShape&&r.enableShapeDrawing(r.toPascalCase(r.drawingShape),!0);else if((!r.activeObj.shape||r.activeObj.shape!=="redact")&&((!D.isDevice||D.isDevice&&!n.bool)&&document.querySelector("#"+r.element.id+"_sliderWrapper")||r.currObjType.isFiltered)){a.action=r.isFinetuneBtnClick?"fine-tune":"filter",this.lowerContext.filter=this.tempAdjValue,r.canvasFilter=this.tempAdjValue,r.notify("filter",{prop:"setAdjustmentValue",onPropertyChange:!1,value:{adjustmentValue:this.tempAdjValue}}),r.initialAdjustmentValue=this.tempAdjValue,this.lowerContext.filter.split(" ").length>1&&this.lowerContext.filter.split(" ")[0].split("(")[1].split(")")[0]==="1"&&r.notify("filter",{prop:"setBrightnessAdjusted",onPropertyChange:!1,value:{isBrightnessAdjusted:!1}}),r.currentFilter=this.tempFilter,r.notify("filter",{prop:"setBevelFilter",onPropertyChange:!1,value:{bevelFilter:this.lowerContext.filter}}),this.lowerContext.clearRect(0,0,r.lowerCanvas.width,r.lowerCanvas.height),this.redrawImgWithObj(),r.currObjType.isFiltered=!1;var l={tempAdjustmentLevel:null};r.notify("filter",{prop:"getTempAdjustmentLevel",onPropertyChange:!1,value:{obj:l}}),r.notify("filter",{prop:"setAdjustmentLevel",onPropertyChange:!1,value:{adjustmentLevel:m({},l.tempAdjustmentLevel,{},!0)}}),r.notify("undo-redo",{prop:"setUndoRedoStep",onPropertyChange:!1,value:{step:this.tempUndoRedoStep}}),r.upperCanvas.style.cursor=r.cursor="default",r.currObjType.isCustomCrop=!1,this.tempStrokeSettings={strokeColor:"#fff",fillColor:"",strokeWidth:null,radius:null,outlineColor:"",outlineWidth:null},this.clearOuterCanvas(this.lowerContext),(r.currSelectionPoint&&r.currSelectionPoint.shape==="crop-circle"||r.isCircleCrop)&&r.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}});var h={type:"main",isApplyBtn:null,isCropping:null,isZooming:null};r.element.querySelector(".e-contextual-toolbar-wrapper").classList.add("e-hide"),r.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:h}),r.activeObj.shape&&r.activeObj.shape==="image"&&r.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1}),r.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"cancel"}}),r.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,r.upperCanvas.width,r.upperCanvas.height),r.drawingShape&&(r.drawingShape=null,r.notify("selection",{prop:"setCurrentDrawingShape",onPropertyChange:!1,value:{value:""}}))}else if((!r.activeObj.shape||r.activeObj.shape!=="redact")&&t&&(!D.isDevice||D.isDevice&&!n.bool)){var h={type:"main",isApplyBtn:null,isCropping:null,isZooming:null};r.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:h})}else this.cancelItems(a),r.transform.zoomFactor>0?(r.togglePan=!0,r.notify("selection",{prop:"setDragCanvas",value:{bool:!0}})):(r.togglePan=!1,r.notify("selection",{prop:"setDragCanvas",value:{bool:!1}}));this.isShapeTextInserted=!1,this.isNewPath=!1,r.notify("toolbar",{prop:"refresh-dropdown-btn",value:{isDisabled:!1}}),r.notify("toolbar",{prop:"setCurrentToolbar",value:{type:"main"}}),i&&(r.noPushUndo=!1),r.drawingShape=null,r.notify("draw",{prop:"resetTempObjColl"}),r.notify("draw",{prop:"resetTempPointColl"}),r.isMaskImage=r.isFinetuneBtnClick=!1;var c={action:"cancel",actionEventArgs:a};r.triggerEditCompleteEvent(c)},o.prototype.cancelItems=function(t){var e=this.parent,i=!1,r=e.element.id,n=e.element.querySelector("#"+r+"_aspectratio"),s=e.element.querySelector("#"+r+"_nonaspectratio"),a,l=["rectangle","ellipse","line","arrow","path","image","redact"];if(e.activeObj.shape!==void 0&&(a=e.activeObj.shape.split("-")),(a===void 0&&e.currObjType.isCustomCrop||a!==void 0&&a[0]==="crop")&&(i=!0),i&&e.isCropTab&&(e.isCropTab=!1,e.transform.zoomFactor=e.transform.defaultZoomFactor),e.isResize&&(n||s||e.currentToolbar==="resize-toolbar")){t.action="resize";var h={width:null,height:null};e.notify("selection",{prop:"getNumTextValue",onPropertyChange:!1,value:{obj:h}});var c={x:h.width,y:h.height},u=e.element.querySelector("#"+e.element.id+"_aspectratio"),p=e.element.querySelector(".e-ie-toolbar-aspect-ratio-btn");if(c&&c.x&&c.y&&!d(e.aspectWidth))if(u||p&&!p.classList.contains("e-hidden"))e.notify("transform",{prop:"resizeImage",value:{width:e.aspectWidth,height:e.aspectHeight}});else{var f=e.currObjType.isUndoAction;e.currObjType.isUndoAction=!1,e.notify("transform",{prop:"resizeCrop",value:{width:e.aspectWidth,height:e.aspectHeight}}),e.currObjType.isUndoAction=f}var g={prevCropObj:e.prevCropObj},v={prevObj:e.prevObj};if(e.notify("toolbar",{prop:"getPrevCropObj",onPropertyChange:!1,value:{obj:g}}),e.notify("toolbar",{prop:"getPrevObj",onPropertyChange:!1,value:{obj:v}}),g.prevCropObj&&v.prevObj){e.objColl=[],e.pointColl=[],e.freehandCounter=0,e.cropObj=m({},g.prevCropObj,{},!0),this.setCurrentObj(v.prevObj),e.objColl=v.prevObj.objColl,e.pointColl=v.prevObj.pointColl,e.freehandCounter=e.pointColl.length,e.transform.straighten=0,e.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:null}});var y=e.currSelectionPoint?m({},e.currSelectionPoint,{},!0):null;e.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-e.transform.zoomFactor,zoomPoint:null,isResize:!0}}),e.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:v.prevObj.defaultZoom,zoomPoint:null,isResize:!0}}),e.currSelectionPoint=y,v.prevObj.zoomFactor&&e.setProperties({zoomSettings:{zoomFactor:v.prevObj.zoomFactor}},!0),e.notify("transform",{prop:"setPreviousZoomValue",onPropertyChange:!1,value:{previousZoomValue:e.zoomSettings.zoomFactor}})}e.isResize=!1,e.notify("transform",{prop:"setResizedImgAngle",onPropertyChange:!1,value:{angle:null}});var C=e.isCropTab;e.isCropTab=!1,this.updateCropSelObj(),e.cancelCropSelection=null,e.isCropTab=C}switch(!0){case e.togglePen:t.action="freehand-draw",this.cancelPen();break;case e.activeObj.shape==="text":t.action="text",this.cancelText();break;case l.indexOf(e.activeObj.shape)!==-1:t.action=e.activeObj.shape,this.cancelShape(),e.currObjType.isRedact=!1;break;case i:t.action="crop-selection",this.cancelSelection();break;default:e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),e.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"cancel"}});break}e.notify("selection",{prop:"setCurrentDrawingShape",onPropertyChange:!1,value:{value:""}}),e.upperCanvas.style.cursor=e.cursor="default",e.currObjType.isCustomCrop=!1,this.tempStrokeSettings={strokeColor:"#fff",fillColor:"",strokeWidth:null,radius:null,outlineColor:"",outlineWidth:null};var b={type:"main",isApplyBtn:null,isCropping:!1,isZooming:null};e.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:b})},o.prototype.cancelPen=function(){var t=this.parent;this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.togglePen=!1,t.upperCanvas.style.cursor=t.cursor="default";var e=m([],t.pointColl,[],!0);t.pointColl={};for(var i=0;i<this.tempFreehandCounter;i++)t.pointColl[i]=e[i];t.freehandCounter=this.tempFreehandCounter,t.notify("freehand-draw",{prop:"setCurrentFreehandDrawIndex",value:{value:this.tempCurrFhdIndex}}),t.activeObj.strokeSettings=this.tempStrokeSettings,t.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:t.activeObj.strokeSettings,strokeColor:null,fillColor:null,strokeWidth:null,radius:null}}),t.notify("freehand-draw",{prop:"setPenStrokeWidth",onPropertyChange:!1,value:{value:this.tempStrokeWidth}}),t.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"cancel"}}),t.notify("selection",{prop:"setFreehandDrawCustomized",value:{isFreehandDrawCustomized:!1}}),t.objColl=m([],this.tempObjColl,[],!0),t.pointColl=m([],this.tempPointColl,[],!0),t.freehandCounter=t.pointColl.length,this.tempPointColl={},this.renderImage(),t.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok",isCancel:!0}})},o.prototype.cancelText=function(){var t=this.parent;if(t.notify("shape",{prop:"setTextSettings",onPropertyChange:!1,value:{textSettings:this.tempTextSettings,fontFamily:null,fontSize:null}}),t.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:this.tempStrokeSettings,strokeColor:null,fillColor:null,strokeWidth:null,radius:null}}),d(t.activeObj.currIndex))t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height);else{var e={appliedUndoRedoColl:[]};t.notify("undo-redo",{prop:"getAppliedUndoRedoColl",value:{obj:e}});var i=e.appliedUndoRedoColl.length,r=e.appliedUndoRedoColl[i-1];this.prevActObj&&r&&r.currentObjColl.length&&r.currentObjColl[r.currentObjColl.length-1].currIndex===this.prevActObj.currIndex?(t.activeObj=this.prevActObj,this.prevActObj=null):(t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height))}t.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1}),this.tempTextSettings={text:"Enter Text",fontFamily:t.fontFamily.default,fontSize:null,fontRatio:null,bold:!1,italic:!1,underline:!1},t.objColl=m([],this.tempObjColl,[],!0),t.pointColl=m([],this.tempPointColl,[],!0),this.renderImage(),this.tempObjColl=[],t.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok",isCancel:!0}})},o.prototype.cancelShape=function(){var t=this.parent;if(t.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:this.tempStrokeSettings,strokeColor:null,fillColor:null,strokeWidth:null,radius:null}}),d(t.activeObj.currIndex))t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height);else if(this.isNewPath)t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),this.renderImage();else{var e={appliedUndoRedoColl:[]};t.notify("undo-redo",{prop:"getAppliedUndoRedoColl",value:{obj:e}});for(var i=void 0,r=0,n=e.appliedUndoRedoColl.length;r<n;r++)for(var s=e.appliedUndoRedoColl[r].currentObjColl,a=0,l=s.length;a<l;a++)if(this.prevActObj&&this.prevActObj.currIndex&&s[a].currIndex===this.prevActObj.currIndex){i=s[0];break}this.prevActObj&&i?(t.activeObj=this.prevActObj,this.prevActObj=null,t.notify("selection",{prop:"redrawShape",onPropertyChange:!1,value:{obj:t.activeObj}}),t.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"cancel"}}),t.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:!0}})):(t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height));var h={undoRedoStep:null};t.notify("undo-redo",{prop:"getUndoRedoStep",value:{obj:h}}),e.appliedUndoRedoColl[h.undoRedoStep-1]?t.objColl=m([],e.appliedUndoRedoColl[h.undoRedoStep-1].currentObjColl,[],!0):t.objColl=[],this.renderImage()}t.currObjType.isDragging=!1,t.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1}),t.objColl=m([],this.tempObjColl,[],!0),t.pointColl=m([],this.tempPointColl,[],!0),this.renderImage(),this.tempObjColl=[],t.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok",isCancel:!0}})},o.prototype.cancelSelection=function(){var t=this.parent;if(t.cancelCropSelection){var e={value:t.tempStraighten};t.transform.straighten=e.value,t.straightenBaseImageCanvas(),t.notify("freehand-draw",{prop:"resetStraightenPoint"}),t.notify("draw",{prop:"render-image",value:{isMouseWheel:!1}}),t.notify("draw",{prop:"setStraightenActObj",value:{activeObj:t.activeObj}}),t.notify("crop",{prop:"resizeWrapper"}),this.updateCropSelObj(),this.tempStraightenDestPoints&&JSON.stringify(this.tempStraightenDestPoints)!==JSON.stringify(this.straightenDestPoints)&&(this.straightenDestPoints=m({},this.tempStraightenDestPoints,{},!0))}},o.prototype.updateCropSelObj=function(){var t=this.parent;t.cancelCropSelection&&(t.cropObj=m({},t.cancelCropSelection.previousCropObj,{},!0),t.afterCropActions=t.cancelCropSelection.previousObj.afterCropActions,t.notify("undo-redo",{prop:"undoDefault",onPropertyChange:!1,value:{obj:t.cancelCropSelection}}),t.currSelectionPoint=m({},t.cancelCropSelection.previousCropObj.activeObj,!0),t.currSelectionPoint&&d(t.currSelectionPoint.shape)&&(t.currSelectionPoint=null),this.clearOuterCanvas(this.lowerContext),(t.isCircleCrop||t.currSelectionPoint&&t.currSelectionPoint.shape==="crop-circle")&&t.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}))},o.prototype.updateCropSelection=function(){var t=this.parent,e={currObj:{}};t.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:e}});var i=e.currObj;i.objColl=m([],t.objColl,[],!0),i.pointColl=m([],t.pointColl,[],!0),i.afterCropActions=m([],t.afterCropActions,[],!0);var r={selPointColl:null};t.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:r}}),i.selPointColl=m([],r.selPointColl,[],!0),t.cancelCropSelection={operation:"cropTransform",previousObj:i,currentObj:i,previousObjColl:i.objColl,currentObjColl:i.objColl,previousPointColl:i.pointColl,currentPointColl:i.pointColl,previousSelPointColl:i.selPointColl,currentSelPointColl:i.selPointColl,previousCropObj:m({},t.cropObj,{},!0),currentCropObj:m({},t.cropObj,{},!0),previousText:null,currentText:null,filter:null,isCircleCrop:t.isCircleCrop}},o.prototype.updateFlipPan=function(t){var e=this.parent;if(e.transform.currFlipState!==""){var i=this.lowerContext.filter;e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),e.notify("transform",{prop:"rotatedFlip",onPropertyChange:!1}),this.lowerContext.filter="none",e.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}}),this.lowerContext.filter=i,this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),t&&this.drawObject("duplicate",t)}},o.prototype.select=function(t,e,i,r,n){var s=this.parent;if(t=t.toLowerCase(),!s.disabled&&s.isImageLoaded){s.allowDownScale=!1;var a={currObj:{}};s.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:a}});var l=a.currObj;l.objColl=m([],s.objColl,[],!0),l.pointColl=m([],s.pointColl,[],!0),l.afterCropActions=s.afterCropActions;var h={selPointColl:null};s.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:h}}),l.selPointColl=m([],h.selPointColl,[],!0),s.notify("crop",{prop:"setPreviousCropCurrentObj",onPropertyChange:!1,value:{obj:l}}),s.transform.zoomFactor>0&&s.activeObj.shape&&s.activeObj.shape.split("-")[0]==="crop"&&d(this.currSelPoint)&&(this.currSelPoint=m({},s.activeObj,{},!0));var c=!1,u=void 0;s.activeObj.shape!==void 0&&(u=s.activeObj.shape.split("-")),(u===void 0&&s.currObjType.isCustomCrop||u!==void 0&&u[0]==="crop")&&(c=!0);var p={currObj:{}};s.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:p}});var f=p.currObj;if(f.objColl=m([],s.objColl,[],!0),f.pointColl=m([],s.pointColl,[],!0),f.afterCropActions=m([],s.afterCropActions,[],!0),s.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}}),s.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),s.notify("shape",{prop:"setKeyHistory",onPropertyChange:!1,value:{keyHistory:""}}),this.upperContext.clearRect(0,0,s.upperCanvas.width,s.upperCanvas.height),s.upperCanvas.style.display="block",s.currSelectionPoint||s.transform.defaultZoomFactor!==0||s.transform.degree!==0&&s.panPoint.totalPannedInternalPoint.x!==0&&s.panPoint.totalPannedInternalPoint.y!==0&&!c){if(s.isCircleCrop=!1,s.transform.defaultZoomFactor!==0&&!this.isResizeSelect){var g=s.isCropTab;s.isCropTab=!1,s.notify("transform",{prop:"resetZoom",onPropertyChange:!1}),s.isCropTab=g,this.resetPanPoints()}s.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1}),s.isCropTab=!0,s.isCircleCrop=!1,this.isResizeSelect||s.notify("crop",{prop:"setCurrSelPoints",onPropertyChange:!1,value:{isSetDimension:!0}}),s.transform.zoomFactor=s.transform.cropZoomFactor,d(s.cropObj.activeObj.shape)&&(s.currObjType.shape="crop-"+t,this.drawNewSelection(t,e,i,r,n))}else this.isCropSelect?this.isCropSelect=!1:(s.notify("crop",{prop:"adjustStraightenForShapes",onPropertyChange:!1,value:{type:"reverse",isInitialRotated:!0}}),s.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1}),this.renderImage()),t==="custom"&&(s.currObjType.shape=""),this.drawNewSelection(t,e,i,r,n)}},o.prototype.drawNewSelection=function(t,e,i,r,n){var s=this.parent,a,l="crop-"+t.toLowerCase();l==="crop-custom"?(s.currObjType.shape===""||s.currObjType.shape==="crop-custom")&&(this.drawCustomSelection("crop-custom",e,i,r,n),this.adjToStraighten(),this.updateSelectionInsert(),s.isStraightening&&(this.straightenActObj=m({},s.activeObj,{},!0),this.straightenInitZoom=s.transform.zoomFactor)):l==="crop-canvas"?(s.upperCanvas.style.display="block",s.notify("selection",{prop:"setDragCanvas",value:{bool:!0}})):(s.currObjType.isCustomCrop=!1,s.currObjType.shape=l,r&&n?a={startX:e,startY:i,endX:e+r,endY:i+n,width:r,height:n}:r&&l==="crop-circle"&&(a={startX:e,startY:i,endX:e+r,endY:i+r,width:r,height:r}),s.activeObj.shape=l,this.updateSelectionInsert(a))},o.prototype.updateSelectionInsert=function(t){var e=this.parent,i=e.activeObj.activePoint,r={shapeSettingsObj:{}};e.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:r}});var n={type:e.getSelectionType(r.shapeSettingsObj.type),startX:r.shapeSettingsObj.startX,startY:r.shapeSettingsObj.startY,width:r.shapeSettingsObj.width,height:r.shapeSettingsObj.height},s={action:"insert",previousSelectionSettings:n,currentSelectionSettings:n};e.trigger("selectionChanging",s),e.editCompleteArgs=s,e.notify("shape",{prop:"updSelChangeEventArgs",onPropertyChange:!1,value:{selectionSettings:s.currentSelectionSettings}}),s.currentSelectionSettings.type==="Custom"?this.drawObject("duplicate",e.activeObj,null,null,!0):((i.startX!==0||i.startY!==0||i.width!==0||i.height!==0)&&(t={startX:i.startX,startY:i.startY,endX:i.endX,endY:i.endY,width:i.width,height:i.height}),this.drawObject("duplicate",null,!0,t))},o.prototype.drawCustomSelection=function(t,e,i,r,n){var s=this.parent,a=s.activeObj.activePoint;if(s.currObjType.isCustomCrop=!0,this.upperContext.clearRect(0,0,s.upperCanvas.width,s.upperCanvas.height),s.currObjType.shape=s.activeObj.shape=t.toLowerCase(),!d(e)&&!d(i)&&!d(r)&&!d(n))a.startX=e,a.startY=i,a.endX=e+r,a.endY=i+n,a.width=r,a.height=n;else if(r&&n){var l=s.img,h=l.destLeft,c=l.destTop,u=l.destWidth,p=l.destHeight;a.width=r,a.height=n,a.startX=h+(u/2-r/2),a.startY=c+(p/2-n/2)}else{if(d(s.transform.zoomFactor)||s.transform.zoomFactor===0){var f=s.img,g=f.destLeft,v=f.destTop,y=f.destWidth,C=f.destHeight,b=s.lowerCanvas.width,M=s.lowerCanvas.height,S=a;g>=0&&v>=0?(S.startX=g,S.startY=v,S.endX=g+y,S.endY=v+C):g>=0?(S.startX=g,S.startY=7.5,S.endX=g+y,S.endY=M-15):v>=0?(S.startX=7.5,S.startY=v,S.endX=b-15,S.endY=v+C):(S.startX=7.5,S.startY=7.5,S.endX=b-15,S.endY=M-15)}else{var N=s.img,x=N.destLeft,A=N.destTop,U=N.destWidth,z=N.destHeight,J=s.lowerCanvas.width,R=s.lowerCanvas.height,_=a;_.startX=Math.max(x>0?x:7.5,x),_.startY=Math.max(A>0?A:7.5,A),_.endX=Math.min(x+U+15<J?x+U-15:J-15,x+U),_.endY=Math.min(A+z+15<R?A+z-15:R-15,A+z)}var B=s.img,h=B.destLeft,c=B.destTop,u=B.destWidth,p=B.destHeight,E=s.lowerCanvas.clientWidth,L=s.lowerCanvas.clientHeight,P=a;if(P.startX=Math.max(P.startX,h),P.startY=Math.max(P.startY,c),P.endX=Math.min(P.endX,h+u),P.endY=Math.min(P.endY,c+p),s.transform.straighten>0?(this.imgCanvasPoints[0].x>P.startX&&(P.startX=this.imgCanvasPoints[0].x),this.imgCanvasPoints[0].y>P.startY&&(P.startY=this.imgCanvasPoints[0].y),this.imgCanvasPoints[2].x<P.endX&&(P.endX=this.imgCanvasPoints[2].x),this.imgCanvasPoints[2].y<P.endY&&(P.endY=this.imgCanvasPoints[2].x)):s.transform.straighten<0&&(this.imgCanvasPoints[3].x>P.startX&&(P.startX=this.imgCanvasPoints[3].x),this.imgCanvasPoints[3].y<P.startY&&(P.startY=this.imgCanvasPoints[3].y),this.imgCanvasPoints[1].x<P.endX&&(P.endX=this.imgCanvasPoints[1].x),this.imgCanvasPoints[1].y>P.endY&&(P.endY=this.imgCanvasPoints[1].x)),P.startX===h&&h+u>E&&(P.endX=E-15),P.startY===c&&c+p>L&&(P.endY=L-15),s.activeObj.activePoint.startX>s.activeObj.activePoint.endX){var j=s.activeObj.activePoint.startX;s.activeObj.activePoint.startX=s.activeObj.activePoint.endX,s.activeObj.activePoint.endX=j}if(s.activeObj.activePoint.startY>s.activeObj.activePoint.endY){var j=s.activeObj.activePoint.startY;s.activeObj.activePoint.startY=s.activeObj.activePoint.endY,s.activeObj.activePoint.endY=j}s.activeObj=this.updateWidthHeight(s.activeObj),this.updateActiveObject(a,s.activeObj),this.adjActObj()}this.updateSelectionInsert()},o.prototype.adjToStraighten=function(){var t=this.parent;if(t.transform.straighten!==0&&t.isStraightening){var e=t.activeObj.activePoint;e.startX+=7.5,e.startY+=7.5,e.endX-=7.5,e.endY-=7.5,t.activeObj=this.updateWidthHeight(t.activeObj)}},o.prototype.adjActObj=function(){var t=this.parent;if(t.transform.straighten!==0)for(var e=t.activeObj.activePoint,i=m({},e,{},!0),r=0;;){r++;var n={isIntersect:null,arr:null};if(t.notify("draw",{prop:"updateImgCanvasPoints",onPropertyChange:!1}),t.notify("draw",{prop:"isLinesIntersect",onPropertyChange:!1,value:{obj:n}}),n.arr[0]||n.arr[1]||n.arr[2]||n.arr[3]||r===100){e=m({},i,{},!0);break}i=m({},e,{},!0),e.startX-=5,e.endX+=5,e.width=e.endX-e.startX,this.updateActiveObject(e,t.activeObj)}},o.prototype.callUpdateCurrTransState=function(){var t=this.parent,e=m([],t.objColl,[],!0),i=m({},t.activeObj,{},!0);t.objColl=[],t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.isRotateZoom=!0,this.updateCurrTransState("initial"),this.lowerContext.clearRect(0,0,t.lowerCanvas.width,t.lowerCanvas.height),t.transform.degree===0&&t.rotateFlipColl.length>0&&(t.img.destLeft+=t.panPoint.totalPannedPoint.x,t.img.destTop+=t.panPoint.totalPannedPoint.y),t.img.destLeft+=t.panPoint.totalPannedInternalPoint.x,t.img.destTop+=t.panPoint.totalPannedInternalPoint.y;var r=this.lowerContext.filter;t.transform.degree===0&&t.notify("transform",{prop:"setDestPointsForFlipState",onPropertyChange:!1}),this.drawImage(),this.updateCurrTransState("reverse"),t.transform.degree===0&&t.rotateFlipColl.length>0&&(t.img.destLeft+=t.panPoint.totalPannedPoint.x,t.img.destTop+=t.panPoint.totalPannedPoint.y),this.isRotateZoom=!1,t.objColl=e;var n=t.togglePen;t.togglePen=!1,this.lowerContext.filter="none";var s={penStrokeWidth:null};t.notify("freehand-draw",{prop:"getPenStrokeWidth",onPropertyChange:!1,value:{obj:s}}),t.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"iterate",pen:"iterate",isPreventApply:null}}),t.notify("freehand-draw",{prop:"setPenStrokeWidth",onPropertyChange:!1,value:{value:s.penStrokeWidth}}),t.img.destLeft+=t.panPoint.totalPannedInternalPoint.x,t.img.destTop+=t.panPoint.totalPannedInternalPoint.y,t.img.destLeft-=t.panPoint.totalPannedInternalPoint.x,t.img.destTop-=t.panPoint.totalPannedInternalPoint.y,t.togglePen=n,this.lowerContext.filter=r,t.activeObj=i},o.prototype.resetPanPoints=function(){this.parent.panPoint.totalPannedPoint={x:0,y:0},this.parent.panPoint.totalPannedClientPoint={x:0,y:0},this.parent.panPoint.totalPannedInternalPoint={x:0,y:0}},o.prototype.setClientTransDim=function(t){var e=this.parent;if(e.transform.degree%90===0&&e.transform.degree%180!==0){e.img.destLeft=(e.lowerCanvas.clientWidth-e.img.destHeight)/2,e.img.destTop=(e.lowerCanvas.clientHeight-e.img.destWidth+1)/2;var i=e.img.destWidth;e.img.destWidth=e.img.destHeight,e.img.destHeight=i}else d(t)&&(e.img.destLeft=(e.lowerCanvas.clientWidth-e.img.destWidth)/2,e.img.destTop=(e.lowerCanvas.clientHeight-e.img.destHeight+1)/2)},o.prototype.redrawImgWithObj=function(){var t=this.parent,e={canvasFilter:t.canvasFilter};if(this.lowerContext.filter=e.canvasFilter,t.rotateFlipColl.length!==0){var i=m({},t.panPoint.totalPannedInternalPoint,{},!0),r={startX:t.img.destLeft,startY:t.img.destTop,width:t.img.destWidth,height:t.img.destHeight};this.callUpdateCurrTransState(),t.panPoint.totalPannedInternalPoint=i,t.img.destLeft=r.startX,t.img.destTop=r.startY,t.img.destWidth=r.width,t.img.destHeight=r.height}else this.callUpdateCurrTransState();t.isCircleCrop&&t.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}})},o.prototype.setCurrentObj=function(t,e,i){var r=this.parent,n=!!t;n||(r.cropObj.aspectWidth=r.aspectWidth,r.cropObj.aspectHeight=r.aspectHeight,r.cropObj.frame=r.frameObj.type),t=t||r.cropObj,r.transform.cropZoomFactor=t.cropZoom,r.transform.defaultZoomFactor=t.defaultZoom,this.straightenInitZoom=t.straightenZoom,n?t.activeObj.shape&&t.activeObj.shape.split("-")[0]==="crop"?r.transform.zoomFactor=t.cropZoom:r.transform.zoomFactor=t.defaultZoom:r.transform.zoomFactor=t.cropZoom,r.setProperties({zoomSettings:{zoomFactor:t.zoomFactor}},!0),r.notify("transform",{prop:"setPreviousZoomValue",onPropertyChange:!1,value:{previousZoomValue:t.previousZoomValue}}),r.panPoint.totalPannedPoint=m({},t.totalPannedPoint,{},!0),r.panPoint.totalPannedClientPoint=m({},t.totalPannedClientPoint,{},!0),r.panPoint.totalPannedInternalPoint=m({},t.totalPannedInternalPoint,{},!0);var s=m({},t.tempFlipPanPoint,{},!0);r.notify("crop",{prop:"setTempFlipPanPoint",onPropertyChange:!1,value:{point:s}}),r.rotateFlipColl=m([],t.rotateFlipColl,[],!0),r.transform.degree=t.degree,r.frameObj.type=t.frame,r.transform.currFlipState=t.currFlipState,r.notify("filter",{prop:"setAdjustmentLevel",onPropertyChange:!1,value:{adjustmentLevel:t.adjustmentLevel}}),r.notify("filter",{prop:"setTempAdjVal"}),r.currentFilter=t.currentFilter,r.notify("filter",{prop:"setTempFilVal"}),(r.transform.straighten!==t.straighten||e)&&(r.transform.straighten=t.straighten,r.straightenBaseImageCanvas()),r.img={destLeft:t.destPoints.startX,destTop:t.destPoints.startY,destWidth:t.destPoints.width,destHeight:t.destPoints.height,srcLeft:t.srcPoints.startX,srcTop:t.srcPoints.startY,srcWidth:t.srcPoints.width,srcHeight:t.srcPoints.height},r.aspectWidth=t.aspectWidth,r.aspectHeight=t.aspectHeight,t.afterCropActions&&(r.afterCropActions=t.afterCropActions),this.lowerContext.filter=t.filter,r.notify("filter",{prop:"setBrightnessAdjusted",onPropertyChange:!1,value:{isBrightnessAdjusted:t.isBrightAdjust}}),r.notify("draw",{prop:"imageBackgroundColor",onPropertyChange:!1,value:{color:t.bgColor}});var a=r.isCircleCrop,l;d(r.currSelectionPoint)?l=null:(l=m({},r.currSelectionPoint,{},!0),r.currSelectionPoint=null),r.isCircleCrop=!1,i&&(r.frameObj.type="none"),this.drawCropSelectionImage(t,!1),r.transform.degree!==0&&(r.transform.currFlipState===""?r.notify("transform",{prop:"rotatePan",onPropertyChange:!1,value:{isCropSelection:null,isDefaultZoom:null}}):r.notify("transform",{prop:"drawPannedImage",value:{xDiff:0,yDiff:0}}),r.img.destLeft=t.destPoints.startX,r.img.destTop=t.destPoints.startY,r.panPoint.totalPannedClientPoint=m({},t.totalPannedClientPoint,{},!0),r.panPoint.totalPannedInternalPoint=m({},t.totalPannedInternalPoint,{},!0)),r.activeObj=m({},t.activeObj,{},!0),this.upperContext.clearRect(0,0,r.upperCanvas.width,r.upperCanvas.height),r.activeObj.activePoint.width!==0&&r.activeObj.activePoint.height!==0&&this.drawObject("duplicate",null,null,null,!0);var h=m({},t.activeObj,{},!0),c=!1;if(r.afterCropActions.length>0){var u={collection:r.afterCropActions};r.notify("shape",{prop:"alignRotateFlipColl",onPropertyChange:!1,value:{collection:r.afterCropActions,isRotateFlipCollection:null,obj:u}}),r.afterCropActions=u.collection}var p=m([],r.afterCropActions,[],!0);if(!n&&p.length>0){c=!0;for(var f=0,g=p.length;f<g;f++)(p[f]==="horizontalflip"||p[f]==="verticalflip")&&(r.activeObj=m({},l,{},!0),this.rotatedFlipCropSel=!0),r.notify("transform",{prop:"updateTransform",onPropertyChange:!1,value:{text:p[f]}});h=m({},r.activeObj,{},!0),this.resetPanPoints(),r.activeObj=h,this.upperContext.clearRect(0,0,r.upperCanvas.width,r.upperCanvas.height),r.activeObj.activePoint.width!==0&&r.activeObj.activePoint.height!==0&&this.drawObject("duplicate",null,null,null,!0),t.degree!==r.transform.degree&&(r.transform.cropZoomFactor=null,r.transform.zoomFactor=0),r.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1}),this.rotatedFlipCropSel&&(this.rotatedFlipCropSel=!1)}r.afterCropActions=p,!this.isCancelAction&&!c&&(r.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1}),r.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:null}}),r.img.destLeft=t.destPoints.startX,r.img.destTop=t.destPoints.startY),r.activeObj=h,r.isCircleCrop=a,d(l)?r.currSelectionPoint=null:(r.currSelectionPoint=m({},l,{},!0),r.currSelectionPoint&&d(r.currSelectionPoint.shape)&&(r.currSelectionPoint=null))},o.prototype.drawCropSelectionImage=function(t,e){var i=this.parent,r=this.lowerContext.filter;i.clearContext(this.lowerContext),i.clearContext(this.upperContext),this.lowerContext.setTransform(1,0,0,1,0,0),e?this.updateCurrTransState("initial"):this.setTransformColl(this.lowerContext,"initial"),i.notify("transform",{prop:"setDestPointsForFlipState",onPropertyChange:!1}),this.drawImage(),e?this.updateCurrTransState("reverse"):this.setTransformColl(this.lowerContext,"reverse"),i.img.destLeft=i.cropObj.destPoints.startX,i.img.destTop=i.cropObj.destPoints.startY;var n=m({},t.activeObj,{},!0);if(this.lowerContext.filter="none",i.img={destLeft:t.destPoints.startX,destTop:t.destPoints.startY,destWidth:t.destPoints.width,destHeight:t.destPoints.height,srcLeft:t.srcPoints.startX,srcTop:t.srcPoints.startY,srcWidth:t.srcPoints.width,srcHeight:t.srcPoints.height},t.activeObj.activePoint.width!==0&&t.activeObj.activePoint.height!==0){var s={startX:i.img.destLeft,startY:i.img.destTop,width:i.img.destWidth,height:i.img.destHeight};i.img.destLeft=t.activeObj.activePoint.startX,i.img.destTop=t.activeObj.activePoint.startY,i.img.destWidth=t.activeObj.activePoint.width,i.img.destHeight=t.activeObj.activePoint.height,i.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:null}}),i.img.destLeft=s.startX,i.img.destTop=s.startY,i.img.destWidth=s.width,i.img.destHeight=s.height}i.activeObj=n,this.lowerContext.filter=r},o.prototype.performPointZoom=function(t,e,i,r,n){var s=this.parent,a=s.img,l=a.destLeft,h=a.destTop,c=a.destWidth,u=a.destHeight,p=!1;s.activeObj.shape&&s.activeObj.shape.indexOf("crop-")>-1&&(p=!0),s.element.querySelector(".e-contextual-toolbar-wrapper")&&!p&&(s.element.querySelector(".e-contextual-toolbar-wrapper").classList.contains("e-hide")||(s.okBtn(),s.element.querySelector(".e-contextual-toolbar-wrapper").classList.add("e-hide")));var f=(t-l)/c,g=(e-h)/u,v=s.isUndoRedo;s.isUndoRedo=!0,s.setProperties({zoomSettings:{zoomPoint:{x:t,y:e}}},!0);var y=n||(i==="zoomIn"?.1:-.1);s.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:y,zoomPoint:null,isResize:r}}),s.isUndoRedo=v,this.panToPoint(t,e,f,g)},o.prototype.panToPoint=function(t,e,i,r){var n=this.parent;if(n.transform.zoomFactor>0){var s=n.img.destLeft,a=n.img.destTop,l=m({},n.activeObj,{},!0);if(n.transform.degree===0)n.img.destLeft=t-i*n.img.destWidth,n.img.destTop=e-r*n.img.destHeight,this.drawZoomPanImage(n.img.destLeft-s,n.img.destTop-a);else{var h=n.isCropTab;n.isCropTab=!0;var c=m([],n.objColl,[],!0),u=m([],n.pointColl,[],!0),p={straightenPoint:null};n.notify("freehand-draw",{prop:"getStraightenPoint",onPropertyChange:!1,value:{obj:p}}),n.objColl=[],n.pointColl=[],n.freehandCounter=0,n.notify("freehand-draw",{prop:"setStraightenPoint",onPropertyChange:!1,value:{x:null,y:null,ratioX:null,ratioY:null}});var f={selPointColl:null};n.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:f}});var g=f.selPointColl;n.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:[]}}}),n.panPoint.currentPannedPoint={x:t-i*n.img.destWidth-s,y:e-r*n.img.destHeight-a},n.notify("transform",{prop:"rotatePan",onPropertyChange:!1,value:{isCropSelection:null,isDefaultZoom:null}}),n.isCropTab=h,n.objColl=c,n.pointColl=u,n.freehandCounter=n.pointColl.length,p.straightenPoint.x&&p.straightenPoint.y&&n.notify("freehand-draw",{prop:"setStraightenPoint",onPropertyChange:!1,value:{x:p.straightenPoint.x,y:p.straightenPoint.y,ratioX:p.straightenPoint.ratioX,ratioY:p.straightenPoint.ratioY}}),n.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:g}}}),n.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"pan",pen:"pan",x:n.panPoint.currentPannedPoint.x,y:n.panPoint.currentPannedPoint.y,panRegion:""}})}this.adjustPanning(l);for(var v=!1,y=0;y<n.objColl.length;y++)if(JSON.stringify(l.activePoint)===JSON.stringify(n.objColl[y].activePoint)){v=!0;break}v||(n.activeObj=l),n.activeObj.activePoint.width!==0&&n.activeObj.activePoint.height!==0&&this.drawObject("duplicate",null,null,null,!0)}},o.prototype.adjustPanning=function(t){var e=this.parent,i=t.activePoint,r=i.startX,n=i.startY,s=i.width,a=i.height;if(s!==0&&a!==0){var l=e.img,h=l.destLeft,c=l.destTop,u=l.destWidth,p=l.destHeight,f={x:0,y:0};if(h>r?f.x=h-r:h+u<r+s&&(f.x=h+u-(r+s)),c>n?f.y=c-n:c+p<n+a&&(f.y=c+p-(n+a)),e.transform.degree===0)e.img.destLeft-=f.x,e.img.destTop-=f.y,this.drawZoomPanImage(e.img.destLeft-h,e.img.destTop-c);else{var g=e.isCropTab;e.isCropTab=!0;var v=m([],e.objColl,[],!0),y=m([],e.pointColl,[],!0);e.objColl=[],e.pointColl=[],e.freehandCounter=0;var C={selPointColl:null};e.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:C}});var b=C.selPointColl;e.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:[]}}}),e.img.destLeft-=f.x,e.img.destTop-=f.y,e.panPoint.currentPannedPoint={x:e.img.destLeft-h,y:e.img.destTop-c},e.notify("transform",{prop:"rotatePan",onPropertyChange:!1,value:{isCropSelection:null,isDefaultZoom:null}}),e.isCropTab=g,e.objColl=v,e.pointColl=y,e.freehandCounter=e.pointColl.length,e.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:b}}}),e.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"pan",pen:"pan",x:e.panPoint.currentPannedPoint.x,y:e.panPoint.currentPannedPoint.y,panRegion:""}})}}},o.prototype.panToSel=function(){var t=this.parent,e=m({},t.activeObj,{},!0),i=e.activePoint,r=i.startX,n=i.startY,s=i.width,a=i.height;this.allowRedactStraighten=!0;var l={straightenPoint:null};if(t.notify("freehand-draw",{prop:"getStraightenPoint",onPropertyChange:!1,value:{obj:l}}),l.straightenPoint.x&&l.straightenPoint.y){var h=r+s/2-l.straightenPoint.x,c=n+a/2-l.straightenPoint.y;t.transform.degree===0?(t.img.destLeft+=h,t.img.destTop+=c,t.notify("transform",{prop:"drawPannImage",value:{point:{x:h,y:c}}})):(t.panPoint.currentPannedPoint={x:h,y:c},t.notify("transform",{prop:"drawPannedImage",value:{xDiff:h,yDiff:c}}),t.panPoint.currentPannedPoint={x:0,y:0},t.notify("transform",{prop:"setTempPanMove",value:{point:null}})),t.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:e}});var u=t.img,p=u.destLeft,f=u.destTop,g=u.destWidth,v=u.destHeight,y=this.imgCanvasPoints;y.forEach(function(M){M.x=M.ratioX*g+p,M.y=M.ratioY*v+f}),this.imgCanvasPoints=y;var C=0;if(t.transform.straighten===3&&!this.preventStraightening){this.preventStraightening=!0;var b=t.prevStraightenedDegree;t.prevStraightenedDegree=t.transform.straighten,t.setStraighten(0),t.setStraighten(3),t.prevStraightenedDegree=b,this.preventStraightening=!1}for(;this.isLinesIntersect()&&t.transform.straighten!==0&&t.transform.straighten!==360&&C<100;)C++,this.performPointZoom(t.activeObj.activePoint.startX+t.activeObj.activePoint.width/2,t.activeObj.activePoint.startY+t.activeObj.activePoint.height/2,"zoomIn",!1,.025),this.updateImgCanvasPoints()}},o.prototype.drawZoomPanImage=function(t,e){var i=this.parent;i.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"pan",pen:"pan",x:t,y:e,panRegion:""}}),this.renderImage(!0);var r={width:0,height:0};i.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:i.img.srcWidth,height:i.img.srcHeight,obj:r,isImgShape:null}});var n=r;n.width+=n.width*i.transform.zoomFactor,n.height+=n.height*i.transform.zoomFactor,i.panPoint.totalPannedPoint.x+=t,i.panPoint.totalPannedPoint.y+=e,i.notify("crop",{prop:"setTempFlipPanPoint",onPropertyChange:!1,value:{point:{x:0,y:0}}})},o.prototype.openNewImage=function(){var t=this,e=this.parent,i=e.element.id,r=e.inMemoryCanvas.getContext("2d");_t(e.element),e.element.style.opacity="0.5";var n=document.querySelector("#"+i+"_currPos");n&&(n.style.display="none");var s={defToolbarItems:null};if(e.notify("toolbar",{prop:"getDefToolbarItems",value:{obj:s}}),s.defToolbarItems&&s.defToolbarItems.length===0&&d(document.getElementById(i+"_toolbar"))&&e.element.querySelector("#"+i+"_toolbarArea")){var a=e.element.querySelector("#"+i+"_toolbarArea").clientHeight;e.notify("toolbar",{prop:"setToolbarHeight",value:{height:a}})}e.reset(),e.update(),e.transform.degree=0,e.transform.zoomFactor=0,e.isImageLoaded=!1,e.currSelectionPoint=null;var l=typeof this.openURL;if(l==="string"){var h=this.openURL.split(".");if(h.length>1?(h=h[h.length-2].split("/"),this.fileName=h[h.length-1]):this.fileName="ImageEditor",this.fileType=this.getFileExtensionFromURL(this.openURL),this.fileType){this.fileType=e.toPascalCase(this.fileType);var c=this.fileType.toLowerCase();(c==="jpg"||c==="jpeg")&&(this.fileType="Jpeg",c="jpeg"),c!=="jpeg"&&c!=="png"&&c!=="svg"&&c!=="webp"&&(this.fileType=null)}this.imageOnLoad(this.openURL),(typeof this.openURL!="string"||this.openURL.indexOf("localhost")===-1)&&this.getImageSizeFromURL(this.openURL.toString(),function(u){u!==null&&t.parent.notify("toolbar",{prop:"setInitialSize",value:{value:+u}})})}else this.fileName="ImageEditor",this.fileType=null,e.lowerCanvas=document.querySelector("#"+i+"_lowerCanvas"),e.upperCanvas=document.querySelector("#"+i+"_upperCanvas"),this.lowerContext=e.lowerCanvas.getContext("2d"),this.upperContext=e.upperCanvas.getContext("2d"),e.clearContext(this.lowerContext),e.clearContext(this.upperContext),e.clearContext(r),e.inMemoryCanvas.width=this.openURL.width,e.inMemoryCanvas.height=this.openURL.height,r.putImageData(this.openURL,0,0),e.baseImg.src=e.inMemoryCanvas.toDataURL()},o.prototype.getImageSizeFromURL=function(t,e){return YD(this,void 0,void 0,function(){var i,r,n,s;return _D(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,fetch(t,{method:"HEAD"})];case 1:return i=a.sent(),r=parseInt(i.headers.get("content-length")||"0",10),n=r,e(n),[3,3];case 2:return s=a.sent(),console.log(s.message),[3,3];case 3:return[2]}})})},o.prototype.dlgBtnClick=function(){this.parent.export(),this.applyDialogOption()},o.prototype.dlgCloseBtnClick=function(){this.applyDialogOption()},o.prototype.applyDialogOption=function(){var t=this.parent;this.isFileChanged?(t.isImageLoaded=this.isFileChanged=!1,t.reset(),this.checkToolbarTemplate(this.inputElem,this.openURL)):(this.reset(),this.openNewImage()),$(document.getElementById(t.element.id+"_dialog"),"dialog").destroy(),this.isImageEdited=!1},o.prototype.showDialogPopup=function(){var t=this.parent,e={key:"ConfirmDialogHeader"};t.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:e}});var i={key:"ConfirmDialogContent"};t.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:i}});var r={key:"Yes"};t.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:r}});var n={key:"No"};t.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:n}}),t.element.querySelector("#"+t.element.id+"_dialog").style.display="block";var s=new rn({header:e.value,closeOnEscape:!0,content:"<span>"+i.value+"</span>",target:document.getElementById("target"),width:"285px",isModal:!0,animationSettings:{effect:"Zoom"},close:this.dlgCloseBtnClick.bind(this),buttons:[{click:this.dlgCloseBtnClick.bind(this),buttonModel:{content:n.value,iconCss:"e-icons e-close"}},{click:this.dlgBtnClick.bind(this),buttonModel:{content:r.value,isPrimary:!0,iconCss:"e-icons e-check"}}]});s.appendTo("#"+t.element.id+"_dialog")},o.prototype.restoreOldImage=function(){var t=this,e=this.parent,i=document.getElementById(this.parent.element.id+"_dropArea"),r=e.getExtensionArray(),n=typeof this.openURL;if(n!=="string"){this.openImageData(i);return}var s=this.getFileExtensionFromURL(this.openURL);s&&(s=s.toLowerCase(),s=s==="jpg"||s==="jpeg"?"jpeg":s);var a=(s?r.indexOf(s)>-1||s==="jpeg"&&(e.uploadSettings.allowedExtensions.indexOf("jpg")>-1||e.uploadSettings.allowedExtensions.indexOf("jpeg")>-1):!1)||this.isNullExtension;this.openURL.indexOf("data:image/")>-1&&this.openURL.indexOf("base64")>-1||this.openURL.indexOf("blob")>-1?this.openImageData(i,!0):e.uploadSettings.minFileSize||e.uploadSettings.maxFileSize?this.getImageSizeFromURL(this.openURL.toString(),function(l){var h=e.uploadSettings.minFileSize&&l<e.uploadSettings.minFileSize||e.uploadSettings.maxFileSize&&l>e.uploadSettings.maxFileSize;t.handleFileSize(!a||h,i,!a)}):this.handleFileSize(!a,i,!a)},o.prototype.handleFileSize=function(t,e,i){var r=this.parent;t?(this.errorLoading(),r.showDialogPopup("unsupported",i),e&&!r.isImageLoaded&&(e.style.display="block")):(e&&(e.style.display="none"),this.parent.isImageLoaded&&this.reset(),this.openNewImage())},o.prototype.openImageData=function(t,e){var i=this.parent,r=this,n=i.createElement("canvas"),s=n.getContext("2d");if(!i.uploadSettings.minFileSize&&!i.uploadSettings.maxFileSize){this.handleFileSize(!1,t,!1);return}if(e){var a=new Image;a.src=this.openURL,a.onload=function(){s.canvas.width=a.width,s.canvas.height=a.height,s.drawImage(a,0,0),r.getImageSize(n,t)}}else n.width=this.openURL.width,n.height=this.openURL.height,s.putImageData(this.openURL,0,0),this.getImageSize(n,t)},o.prototype.getImageSize=function(t,e){var i=this.parent;t.toBlob(function(r){i.uploadSettings.minFileSize&&r.size<i.uploadSettings.minFileSize||i.uploadSettings.maxFileSize&&r.size>i.uploadSettings.maxFileSize?this.handleFileSize(!0,e,!1):this.handleFileSize(!1,e,!1)}.bind(this),"image/jpeg",1)},o.prototype.open=function(t){this.parent.disabled||(this.openURL=t,this.restoreOldImage())},o.prototype.getInitialLoaded=function(t){t.isInitialLoaded=this.isInitialLoading},o.prototype.getFileExtensionFromURL=function(t){var e=t.lastIndexOf(".");return e!==-1?t.slice(e+1).toLowerCase():t.indexOf("base64")!==-1?t.slice(t.indexOf("/")+1,t.indexOf(";")).toLowerCase():null},o.prototype.fileSelect=function(t,e){var i=this.parent,r=document.getElementById(i.element.id+"_dropArea");if(r&&(r.style.display="none"),!i.disabled){var n=void 0,s=void 0;e.target?(n=e.target.files[0],s=n):n=s=e.filesData[0].rawFile;var a=void 0;if(s.name){var l=s.name.split(".");a=l[l.length-1].toLowerCase()}var h=i.getExtensionArray(),c=(a==="jpg"||a==="jpeg")&&(i.uploadSettings.allowedExtensions.indexOf("jpg")>-1||i.uploadSettings.allowedExtensions.indexOf("jpeg")>-1);if(a&&h.indexOf(a)===-1&&!c||i.uploadSettings.minFileSize&&s.size<i.uploadSettings.minFileSize||i.uploadSettings.maxFileSize&&s.size>i.uploadSettings.maxFileSize){this.errorLoading();return}if(_t(i.element),i.element.style.opacity="0.5",this.inputElem=t,a=s.name&&s.name.split(".")[1],a){var u=i.toPascalCase(a);u==="JPG"||u==="Jpg"?this.fileType="Jpeg":this.fileType=u}else this.fileType=null;var p=window.URL,f=p.createObjectURL(n);this.openURL=f,i.isImageLoaded&&!i.isChangesSaved&&(this.isImageEdited||i.pointColl.length>0||i.objColl.length>0)?(this.isFileChanged=!0,this.showDialogPopup()):this.checkToolbarTemplate(t,f)}},o.prototype.checkToolbarTemplate=function(t,e){var i=this.parent;d(i.toolbarTemplate)&&(i.reset(),i.update()),this.fileName=t.value.split("\\")[t.value.split("\\").length-1],this.fileName=this.fileName.split(".")[0],this.imageOnLoad(e.toString()),t.value=""},o.prototype.moveToSelectionRange=function(t,e){var i=this.parent;if(i.activeObj.shape){for(var r=!1,n=0,s=i.rotateFlipColl.length;n<s;n++){var a=i.rotateFlipColl[n];if(a===90||a===-90){r=!0;break}}if(r){if(i.transform.degree===0)return;var l=i.transform.zoomFactor;i.objColl.push(i.activeObj),i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1});var h=i.objColl[i.objColl.length-1];if(t==="rotateleft"||t==="rotateright")if(i.transform.degree%90===0&&i.transform.degree%180!==0)if(h.activePoint.width<e.activePoint.height)for(var n=2;n<i.zoomSettings.maxZoomFactor;n++){if(h.activePoint.width>=e.activePoint.height||this.isSelectionBiggerThanCanvas(h)||this.isSelectionOutsideCanvas(h)){d(l)||i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-.1,zoomPoint:null},isResize:null});break}l+=.1,i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:l,zoomPoint:null},isResize:null})}else for(var n=2;n<i.zoomSettings.maxZoomFactor;n++){if(h.activePoint.width>=e.activePoint.height||this.isSelectionBiggerThanCanvas(h)||this.isSelectionOutsideCanvas(h)){d(l)||i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:.1,zoomPoint:null,isResize:null}});break}l-=.1,i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:l,zoomPoint:null},isResize:null})}else if(h.activePoint.height<e.activePoint.width)for(var n=2;n<i.zoomSettings.maxZoomFactor;n++){if(h.activePoint.height>=e.activePoint.width||this.isSelectionBiggerThanCanvas(h)||this.isSelectionOutsideCanvas(h)){d(l)||i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-.1,zoomPoint:null},isResize:null});break}l+=.1,i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:l,zoomPoint:null},isResize:null})}else for(var n=2;n<i.zoomSettings.maxZoomFactor;n++){if(h.activePoint.height>=e.activePoint.width||this.isSelectionBiggerThanCanvas(h)||this.isSelectionOutsideCanvas(h)){d(l)||i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:.1,zoomPoint:null},isResize:null});break}l-=.1,i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:l,zoomPoint:null},isResize:null})}var c=i.lowerCanvas.clientWidth/2-(h.activePoint.startX+h.activePoint.width/2),u=(i.lowerCanvas.clientHeight+1)/2-(h.activePoint.startY+h.activePoint.height/2);d(i.activeObj.shape)&&(i.activeObj=m({},e,{},!0)),i.transform.degree===0?(i.img.destLeft+=c,i.img.destTop+=u,i.notify("transform",{prop:"drawPannImage",value:{point:{x:c,y:u}}})):(i.panPoint.currentPannedPoint={x:c,y:u},i.notify("transform",{prop:"drawPannedImage",value:{xDiff:c,yDiff:u}}),i.panPoint.currentPannedPoint={x:0,y:0}),i.notify("transform",{prop:"setTempPanMove",onPropertyChange:!1,value:{point:null}}),i.activeObj=m({},i.objColl[i.objColl.length-1]),i.objColl.pop(),i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:i.activeObj}})}}},o.prototype.isSelectionBiggerThanCanvas=function(t){var e=!1,i=this.parent,r=t.activePoint,n=r.startX,s=r.startY,a=r.endX,l=r.endY,h=i.img,c=h.destLeft,u=h.destTop,p=h.destWidth,f=h.destHeight;return(n<=c||s<=u||a>=c+p||l>=u+f)&&(e=!0),e},o.prototype.isSelectionOutsideCanvas=function(t){var e=!1,i=this.parent;return(t.activePoint.height<i.lowerCanvas.height-i.toolbarHeight||t.activePoint.width<i.lowerCanvas.width)&&(e=!0),e},o.prototype.downScaleImgCanvas=function(t,e,i,r){var n=this.parent,s=e?n.activeObj.imageCanvas:n.baseImgCanvas,a=e?n.activeObj.imageElement:n.baseImg,l=e?n.activeObj.activePoint.width:n.img.destWidth,h=e?n.activeObj.activePoint.height:n.img.destHeight,c={width:0,height:0};if(n.transform.degree%90===0&&n.transform.degree%180!==0?n.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:a.height,height:a.width,obj:c,isImgShape:e}}):n.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:a.width,height:a.height,obj:c,isImgShape:e}}),e||n.allowDownScale&&!n.isCropTab&&!n.isCropToolbar&&a.width!==0&&a.height!==0&&c.width*.75>l&&c.height*.75>h){var u=n.createElement("canvas",{id:n.element.id+"_downScaleCanvas",attrs:{name:"canvasImage"}});u.width=e?a.width:n.img.srcWidth,u.height=e?a.height:n.img.srcHeight,e?u.getContext("2d").drawImage(a,0,0,u.width,u.height):(this.imageBackgroundColor!==""&&(t.fillStyle=this.imageBackgroundColor,t.fillRect(n.img.destLeft,n.img.destTop,n.img.destWidth,n.img.destHeight)),u.getContext("2d").drawImage(s,n.img.srcLeft,n.img.srcTop,n.img.srcWidth,n.img.srcHeight,0,0,u.width,u.height)),(e||this.isDownScale)&&this.downScale(u,l,h,e),e?(t.canvas.width=u.width,t.canvas.height=u.height,i&&r?(t.translate(n.activeObj.imageCanvas.width,0),t.scale(-1,1),t.translate(0,n.activeObj.imageCanvas.height),t.scale(1,-1)):i?(d(n.activeObj.isHorImageFlip)||!n.activeObj.isHorImageFlip?(n.activeObj.isHorImageFlip=!0,t.translate(n.activeObj.imageCanvas.width,0),t.scale(-1,1)):n.activeObj.isHorImageFlip&&(n.activeObj.isHorImageFlip=!1),n.activeObj.isVerImageFlip&&(t.translate(0,n.activeObj.imageCanvas.height),t.scale(1,-1))):r&&(d(n.activeObj.isVerImageFlip)||!n.activeObj.isVerImageFlip?(n.activeObj.isVerImageFlip=!0,t.translate(0,n.activeObj.imageCanvas.height),t.scale(1,-1)):n.activeObj.isVerImageFlip&&(n.activeObj.isVerImageFlip=!1),n.activeObj.isHorImageFlip&&(t.translate(n.activeObj.imageCanvas.width,0),t.scale(-1,1))),t.drawImage(u,0,0),t.setTransform(1,0,0,1,0,0)):n.isFinetuning?(t.save(),t.setTransform(1,0,0,1,0,0),t.drawImage(n.inMemoryCanvas,0,0),t.restore()):t.drawImage(u,0,0,u.width,u.height,n.img.destLeft,n.img.destTop,u.width,u.height)}else(d(e)||!e)&&n.baseImgCanvas.width!==0&&n.baseImgCanvas.height!==0&&(this.imageBackgroundColor!==""&&(t.fillStyle=this.imageBackgroundColor,t.fillRect(n.img.destLeft,n.img.destTop,n.img.destWidth,n.img.destHeight)),t.drawImage(n.baseImgCanvas,n.img.srcLeft,n.img.srcTop,n.img.srcWidth,n.img.srcHeight,n.img.destLeft,n.img.destTop,n.img.destWidth,n.img.destHeight));n.isSafari&&n.notify("filter",{prop:"apply-filter",onPropertyChange:!1,value:{context:t}})},o.prototype.downScale=function(t,e,i,r){var n=this.parent;if(!(r&&n.isStraightening)){var s=t.width,a=t.height;e=Math.round(e),i=Math.round(i);for(var l=s/e,h=a/i,c=Math.ceil(l/2),u=Math.ceil(h/2),p=t.getContext("2d"),f=p.getImageData(0,0,s,a),g=p.createImageData(e,i),v=f.data,y=g.data,C=0;C<i;C++)for(var b=0;b<e;b++){for(var M=(b+C*e)*4,S=0,N=0,x=0,A=0,U=0,z=0,J=0,R=(C+.5)*h,_=Math.floor(C*h),B=Math.ceil((C+1)*h),E=_;E<B;E++)for(var L=Math.abs(R-(E+.5))/u,P=(b+.5)*l,j=L*L,k=Math.floor(b*l),F=Math.ceil((b+1)*l),X=k;X<F;X++){var re=Math.abs(P-(X+.5))/c,q=Math.sqrt(j+re*re);if(!(q>=1)){S=2*q*q*q-3*q*q+1;var ie=4*(X+E*s);J+=S*v[ie+3],x+=S,S=S*v[ie+3]/250,A+=S*v[ie],U+=S*v[ie+1],z+=S*v[ie+2],N+=S}}y[M]=A/N,y[M+1]=U/N,y[M+2]=z/N,y[M+3]=J/x}t.width=r?n.activeObj.activePoint.width:n.lowerCanvas.width,t.height=r?n.activeObj.activePoint.height:n.lowerCanvas.height,p.putImageData(g,0,0)}},o.prototype.drawImgToCtx=function(t,e){var i=this.parent;t.canvas.id!==i.element.id+"_tempCanvas"&&t!==this.upperContext&&d(e)&&this.downScaleImgCanvas(t,null,null,null)},o.prototype.getFrameColor=function(t,e,i){var r=this.parent,n=r.frameObj.color;if(t.gradientColor){var s=e.createLinearGradient(i.startX,i.startY,i.startX+i.width,i.startY+i.height);s.addColorStop(0,t.color),s.addColorStop(1,t.gradientColor),n=s}else n=t.color;return n},o.prototype.applyFrame=function(t,e,i){var r=this.parent;r.frameObj.type=e;var n,s={width:1,height:1},a={startX:r.img.destLeft-t.lineWidth,startY:r.img.destTop-t.lineWidth,width:r.img.destWidth+2*t.lineWidth,height:r.img.destHeight+2*t.lineWidth},l={type:r.frameObj.type,color:r.frameObj.color,size:r.frameObj.size,inset:r.frameObj.inset,offset:r.frameObj.offset/2,radius:r.frameObj.radius,amount:r.frameObj.amount,border:r.frameObj.border,gradientColor:r.frameObj.gradientColor},h=r.transform.zoomFactor;if(t.canvas.id===r.element.id+"_tempCanvas"){var c=t.canvas.width,u=t.canvas.height,p={width:0,height:0};r.notify("crop",{prop:"calcRatio",onPropertyChange:!1,value:{obj:p,dimension:{width:c,height:u}}}),s=p,l.size*=(s.width+s.height)/2,l.inset*=(s.width+s.height)/2,l.offset*=(s.width+s.height)/2,l.radius*=(s.width+s.height)/2,a={startX:0,startY:0,width:t.canvas.width,height:t.canvas.height},r.notify("export",{prop:"updateSaveContext",onPropertyChange:!1,value:{context:t}})}else t===this.upperContext&&r.activeObj.shape?a={startX:r.activeObj.activePoint.startX-t.lineWidth,startY:r.activeObj.activePoint.startY-t.lineWidth,width:r.activeObj.activePoint.width+2*t.lineWidth,height:r.activeObj.activePoint.height+2*t.lineWidth}:d(i)&&t.clearRect(0,0,t.canvas.width,t.canvas.height);var f=40*((s.width+s.height)/2),g=50*((s.width+s.height)/2);if(t!==this.upperContext&&(l.size+=l.size*h,l.inset+=l.inset*h,l.offset+=l.offset*h,l.radius+=l.radius*h,f+=f*h,g+=g*h),!(t===this.upperContext&&r.activeObj.shape&&(e==="mat"&&(a.width-2*l.size<0||a.height-2*l.size<0)||e==="bevel"&&(a.width-2*l.size<40||a.height-2*l.size<40)||e==="inset"&&(a.startX+a.width-l.offset-(a.startX+l.offset)<0||a.startY+a.height-l.offset-(a.startY+l.offset)<0)||e==="hook"&&(a.width-2*l.size<50||a.height-2*l.size<50)))){var v={bevelFilter:t.filter},y=t.filter;if(r.currSelectionPoint&&r.currSelectionPoint.shape==="crop-circle"||r.isCircleCrop||t===this.lowerContext&&r.isCropTab)this.drawImgToCtx(t,i);else{switch(e){case"none":this.drawImgToCtx(t,i);break;case"mat":for(this.drawImgToCtx(t,i);(a.width-2*l.size<0||a.height-2*l.size<0)&&l.size>0;)l.size-=20;t.filter="none",t.fillStyle=this.getFrameColor(l,t,a),t.beginPath(),t.rect(a.startX,a.startY,a.width,a.height),t.rect(a.startX+l.size,a.startY+l.size,a.width-2*l.size,a.height-2*l.size),t.fill("evenodd"),t.closePath();break;case"bevel":for(t.filter="none",t.fillStyle=this.getFrameColor(l,t,a),t.beginPath(),t.fillRect(a.startX,a.startY,a.width,a.height),t.closePath(),a.startX+=l.size,a.startY+=l.size,a.width-=2*l.size,a.height-=2*l.size;(a.width-2*l.size<40||a.height-2*l.size<40)&&l.size>0;)a.startX-=l.size,a.startY-=l.size,a.width+=2*l.size,a.height+=2*l.size,l.size-=20,a.startX+=l.size,a.startY+=l.size,a.width-=2*l.size,a.height-=2*l.size;t.fillStyle=this.getFrameColor(l,t,a),t.save(),t.beginPath(),t.moveTo(a.startX+f,a.startY),t.lineTo(a.startX+a.width-f,a.startY),t.quadraticCurveTo(a.startX+a.width,a.startY,a.startX+a.width,a.startY+f),t.lineTo(a.startX+a.width,a.startY+a.height-f),t.quadraticCurveTo(a.startX+a.width,a.startY+a.height,a.startX+a.width-f,a.startY+a.height),t.lineTo(a.startX+f,a.startY+a.height),t.quadraticCurveTo(a.startX,a.startY+a.height,a.startX,a.startY+a.height-f),t.lineTo(a.startX,a.startY+f),t.quadraticCurveTo(a.startX,a.startY,a.startX+f,a.startY),t.closePath(),t.clip(),t.filter=y==="none"?r.canvasFilter:y,t.canvas.id===r.element.id+"_tempCanvas"?(i=null,t.filter="none",t.drawImage(r.inMemoryCanvas,0,0),t.filter=y==="none"?r.canvasFilter:y):(t.clearRect(0,0,t.canvas.width,t.canvas.height),i?(i=null,r.transform.zoomFactor!==0&&(this.isRotateZoom=!0),r.notify("filter",{prop:"getBevelFilter",onPropertyChange:!1,value:{obj:v}}),t.filter=v.bevelFilter,this.updateCurrTransState("initial"),this.drawImgToCtx(t,i),this.updateCurrTransState("reverse"),this.isRotateZoom=!1,r.frameObj.type="none",t.filter="none",r.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:t,shape:"iterate",pen:"iterate",isPreventApply:null}}),r.frameObj.type="bevel",t.filter=y==="none"?r.canvasFilter:y):(r.notify("filter",{prop:"getBevelFilter",onPropertyChange:!1,value:{obj:v}}),t.filter=v.bevelFilter,this.drawImgToCtx(t,i))),t.restore();break;case"line":this.drawImgToCtx(t,i),n=t.lineWidth,t.lineWidth=l.size/10;for(var C=0;C<r.frameObj.amount;C++){C>0&&(a.startX+=l.offset,a.startY+=l.offset,a.width-=2*l.offset,a.height-=2*l.offset);var b=a.startY+a.height-l.inset-l.radius,M=a.startY+l.inset+l.radius,S=a.startX+a.width-l.inset-l.radius,N=a.startX+l.inset+l.radius,x=a.startX+l.inset+l.radius,A=a.startX+a.width-l.inset-l.radius,U=a.startY+l.inset+l.radius,z=a.startY+a.height-l.inset-l.radius;b>=M&&S>=N&&x<=A&&U<=z&&(t.filter="none",t.strokeStyle=this.getFrameColor(l,t,a),l.border==="dashed"?t.setLineDash([t.lineWidth*2.5,t.lineWidth*1.5]):l.border==="dotted"&&t.setLineDash([t.lineWidth,t.lineWidth]),t.beginPath(),t.moveTo(a.startX+l.inset+l.radius,a.startY+l.inset),t.lineTo(a.startX+a.width-l.inset-l.radius,a.startY+l.inset),t.arcTo(a.startX+a.width-l.inset,a.startY+l.inset,a.startX+a.width-l.inset,a.startY+l.inset+l.radius,l.radius),t.lineTo(a.startX+a.width-l.inset,a.startY+a.height-l.inset-l.radius),t.arcTo(a.startX+a.width-l.inset,a.startY+a.height-l.inset,a.startX+a.width-l.inset-l.radius,a.startY+a.height-l.inset,l.radius),t.lineTo(a.startX+l.inset+l.radius,a.startY+a.height-l.inset),t.arcTo(a.startX+l.inset,a.startY+a.height-l.inset,a.startX+l.inset,a.startY+a.height-l.inset-l.radius,l.radius),t.lineTo(a.startX+l.inset,a.startY+l.inset+l.radius),t.arcTo(a.startX+l.inset,a.startY+l.inset,a.startX+l.inset+l.radius,a.startY+l.inset,l.radius),t.closePath(),t.stroke(),t.setLineDash([]))}t.lineWidth=n;break;case"inset":this.drawImgToCtx(t,i),t.filter="none",t.strokeStyle=this.getFrameColor(l,t,a),n=t.lineWidth,t.lineWidth=l.size/10,t.beginPath(),t.moveTo(a.startX+l.offset,a.startY+l.inset),t.lineTo(a.startX+a.width-l.offset,a.startY+l.inset),t.moveTo(a.startX+a.width-l.inset,a.startY+l.offset),t.lineTo(a.startX+a.width-l.inset,a.startY+a.height-l.offset),t.moveTo(a.startX+a.width-l.offset,a.startY+a.height-l.inset),t.lineTo(a.startX+l.offset,a.startY+a.height-l.inset),t.moveTo(a.startX+l.inset,a.startY+a.height-l.offset),t.lineTo(a.startX+l.inset,a.startY+l.offset),t.stroke(),t.closePath(),t.lineWidth=n;break;case"hook":this.drawImgToCtx(t,i),t.filter="none",t.strokeStyle=this.getFrameColor(l,t,a),n=t.lineWidth,t.lineWidth=l.size/10,t.beginPath(),t.moveTo(a.startX+l.inset+g,a.startY+l.inset),t.lineTo(a.startX+l.inset,a.startY+l.inset),t.lineTo(a.startX+l.inset,a.startY+l.inset+g),t.moveTo(a.startX+a.width-l.inset-g,a.startY+l.inset),t.lineTo(a.startX+a.width-l.inset,a.startY+l.inset),t.lineTo(a.startX+a.width-l.inset,a.startY+l.inset+g),t.moveTo(a.startX+a.width-l.inset-g,a.startY+a.height-l.inset),t.lineTo(a.startX+a.width-l.inset,a.startY+a.height-l.inset),t.lineTo(a.startX+a.width-l.inset,a.startY+a.height-l.inset-g),t.moveTo(a.startX+l.inset+g,a.startY+a.height-l.inset),t.lineTo(a.startX+l.inset,a.startY+a.height-l.inset),t.lineTo(a.startX+l.inset,a.startY+a.height-l.inset-g),t.stroke(),t.lineWidth=n;break}(r.isCircleCrop||r.currSelectionPoint&&r.currSelectionPoint.shape==="crop-circle")&&r.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:t,isSave:t.canvas.id===r.element.id+"_tempCanvas"?!0:null,isFlip:null}}),t.filter=y}}},o.prototype.triggerFrameChange=function(t){var e=this.parent,i={type:e.toPascalCase(e.frameObj.type),color:e.frameObj.color,gradientColor:e.frameObj.gradientColor,size:e.frameObj.size,inset:e.frameObj.inset,offset:e.frameObj.offset,borderRadius:e.frameObj.radius,frameLineStyle:e.toPascalCase(e.frameObj.border),lineCount:e.frameObj.amount},r={cancel:!1,previousFrameSetting:t,currentFrameSetting:i};return e.trigger("frameChange",r),e.editCompleteArgs=r,r.cancel||this.setFrameObj(r.currentFrameSetting),r},o.prototype.setFrameObj=function(t){var e=this.parent;e.frameObj.type=t.type.toLowerCase(),e.frameObj.color=t.color,e.frameObj.gradientColor=t.gradientColor,e.frameObj.size=t.size,e.frameObj.inset=t.inset,e.frameObj.offset=t.offset,e.frameObj.radius=t.borderRadius,e.frameObj.border=t.frameLineStyle.toLowerCase(),e.frameObj.amount=t.lineCount},o.prototype.zoomToSel=function(t,e){var i=this.parent;if(this.straightenActObj&&JSON.stringify(this.straightenActObj.activePoint)===JSON.stringify(t.activePoint))if(i.activeObj=m({},this.straightenActObj,null,!0),this.allowRedactStraighten=!1,i.transform.straighten===0){var r=i.img.destWidth,n=i.img.destHeight;for(i.transform.straighten=360;;)if(!d(this.straightenInitZoom)&&Math.round(i.transform.zoomFactor*Math.pow(10,3))/Math.pow(10,3)>Math.round(this.straightenInitZoom*Math.pow(10,3))/Math.pow(10,3)){if(this.setZoomPan("out"),r===i.img.destWidth&&n===i.img.destHeight){this.performDummyZoom();break}i.transform.degree===0&&(i.transform.zoomFactor-=.025,i.transform.cropZoomFactor-=.025)}else{this.performDummyZoom();break}i.transform.straighten=0,i.img={destLeft:i.img.destLeft,destTop:i.img.destTop,destWidth:i.img.destWidth,destHeight:i.img.destHeight,srcLeft:i.img.srcLeft,srcTop:i.img.srcTop,srcWidth:i.img.srcWidth,srcHeight:i.img.srcHeight}}else d(this.straightenInitZoom)&&(this.straightenInitZoom=i.transform.zoomFactor),this.straightenInitZoom-i.transform.zoomFactor>0?i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-(this.straightenInitZoom-i.transform.zoomFactor),zoomPoint:null,isResize:!0}}):this.straightenInitZoom-i.transform.zoomFactor<0&&i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:this.straightenInitZoom-i.transform.zoomFactor,zoomPoint:null,isResize:!0}}),i.activeObj=m({},t,null,!0),i.transform.zoomFactor+=.001,this.calcStraightenedPoints(e);else this.straightenActObj=m({},t,null,!0),i.activeObj=m({},this.straightenActObj,null,!0),this.straightenInitZoom=i.transform.zoomFactor,this.calcStraightenedPoints(e)},o.prototype.isDestPointSmall=function(){var t=this.parent,e=t.img,i={startX:e.destLeft,startY:e.destTop,width:e.destWidth,height:e.destHeight};t.notify("shape",{prop:"straightenShapes",onPropertyChange:!1});var r=!1;return this.straightenDestPoints.destWidth&&this.straightenDestPoints.destHeight&&(e.destWidth<this.straightenDestPoints.destWidth||e.destHeight<this.straightenDestPoints.destHeight)&&(r=!0),e.destLeft=i.startX,e.destTop=i.startY,e.destWidth=i.width,e.destHeight=i.height,t.img=e,r},o.prototype.calcStraightenedPoints=function(t){var e=this.parent,i=e.img.destWidth,r=e.img.destHeight;d(e.transform.zoomFactor)&&(e.transform.zoomFactor+=.025),this.updateImgCanvasPoints();for(var n=function(){if(s.isLinesIntersect()||s.isSelOutsideImg()||t&&s.isDestPointSmall()){if(e.activeObj=m({},s.straightenActObj,null,!0),s.setZoomPan("in"),i===e.img.destWidth&&r===e.img.destHeight)return s.performDummyZoom(),"break";e.transform.degree===0&&(e.transform.zoomFactor+=.025,e.transform.cropZoomFactor+=.025);var l=s.imgCanvasPoints,h=e.img.destLeft,c=e.img.destTop,u=e.img.destWidth,p=e.img.destHeight;l.forEach(function(f){f.x=f.ratioX*u+h,f.y=f.ratioY*p+c}),s.imgCanvasPoints=l}else return s.performDummyZoom(),"break"},s=this;;){var a=n();if(a==="break")break}},o.prototype.performDummyZoom=function(){var t=this.parent;t.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:.025,zoomPoint:null,isResize:!0}}),t.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-.025,zoomPoint:null,isResize:!0}});var e=t.transform.zoomFactor*10;e<1&&(e=1+e/10),t.setProperties({zoomSettings:{zoomFactor:e}},!0),t.notify("transform",{prop:"setPreviousZoomValue",onPropertyChange:!1,value:{previousZoomValue:e}}),this.panToSel()},o.prototype.setZoomPan=function(t){var e=this.parent,i={maxDimension:null};e.transform.degree===0?(e.notify("transform",{prop:"cropZoom",onPropertyChange:!1,value:{value:t==="in"?.025:-.025,selectionObj:e.activeObj,obj:i}}),e.img.destWidth=i.maxDimension.width,e.img.destHeight=i.maxDimension.height):(e.transform.zoomFactor+=t==="in"?.025:-.025,e.transform.cropZoomFactor+=t==="in"?.025:-.025,this.updateCurrTransState("initial"),this.isRotateZoom=!0,this.setDestPoints(),this.isRotateZoom=!1,this.updateCurrTransState("reverse"))},o.prototype.updateImgCanvasPoints=function(){var t=this.parent,e=this.getImagePoints(),i={width:0,height:0},r=t.baseImgCanvas.width,n=t.baseImgCanvas.height;t.notify("crop",{prop:"calcRatio",onPropertyChange:!1,value:{obj:i,dimension:{width:r,height:n}}});var s=i;r=t.transform.degree%90===0&&t.transform.degree%180!==0?s.height:s.width,n=t.transform.degree%90===0&&t.transform.degree%180!==0?s.width:s.height;var a,l,h,c,u=t.img,p=u.destLeft,f=u.destTop,g=u.destWidth,v=u.destHeight;t.transform.straighten>0?(a={x:p+e[0].x/r,y:f},l={x:p+g,y:f+e[1].y/n},h={x:p+g-e[0].x/r,y:f+v},c={x:p,y:f+v-e[1].y/n}):t.transform.straighten<0?(a={x:p,y:f+e[0].y/n},l={x:p+e[1].x/r,y:f},h={x:p+g,y:f+v-e[0].y/n},c={x:p+g-e[1].x/r,y:f+v}):t.transform.straighten===0&&(a={x:p,y:f},l={x:p+g,y:f},h={x:p+g,y:f+v},c={x:p,y:f+v}),a.ratioX=(a.x-p)/g,a.ratioY=(a.y-f)/v,l.ratioX=(l.x-p)/g,l.ratioY=(l.y-f)/v,h.ratioX=(h.x-p)/g,h.ratioY=(h.y-f)/v,c.ratioX=(c.x-p)/g,c.ratioY=(c.y-f)/v,this.imgCanvasPoints=[a,l,h,c]},o.prototype.isLinesIntersect=function(t){var e=this.parent,i=e.activeObj.activePoint;if(e.activeObj.rotatedAngle!==0){var r=e.activeObj.activePoint,n=r.startX,s=r.startY,a=r.endX,l=r.endY,h=r.width,c=r.height,u={x:n+h/2,y:s+c/2},p=Math.cos(e.activeObj.rotatedAngle),f=Math.sin(e.activeObj.rotatedAngle),g={x:p*(n-u.x)-f*(s-u.y)+u.x,y:f*(n-u.x)+p*(s-u.y)+u.y},v={x:p*(a-u.x)-f*(s-u.y)+u.x,y:f*(a-u.x)+p*(s-u.y)+u.y},y={x:p*(n-u.x)-f*(l-u.y)+u.x,y:f*(n-u.x)+p*(l-u.y)+u.y},C={x:p*(a-u.x)-f*(l-u.y)+u.x,y:f*(a-u.x)+p*(l-u.y)+u.y},b=this.imgCanvasPoints,M=this.doIntersect(g,v,b[0],b[1]),S=this.doIntersect(v,C,b[1],b[2]),N=this.doIntersect(y,C,b[2],b[3]),x=this.doIntersect(g,y,b[3],b[0]);return t&&(t.arr=[M,S,N,x]),M||S||N||x}var A=this.imgCanvasPoints,U=this.doIntersect({x:i.startX,y:i.startY},{x:i.endX,y:i.startY},A[0],A[1]),z=this.doIntersect({x:i.endX,y:i.startY},{x:i.endX,y:i.endY},A[1],A[2]),J=this.doIntersect({x:i.startX,y:i.endY},{x:i.endX,y:i.endY},A[2],A[3]),R=this.doIntersect({x:i.startX,y:i.startY},{x:i.startX,y:i.endY},A[3],A[0]),_=this.isInsideRect(A[0]),B=this.isInsideRect(A[1]),E=this.isInsideRect(A[2]),L=this.isInsideRect(A[3]);return t&&(t.arr=[U,z,J,R]),U||z||J||R||_||B||E||L||A[0].x>i.startX&&A[1].x<i.endX&&A[2].x<i.endX&&A[3].x>i.startX&&A[0].y<i.startY&&A[1].y<i.startY&&A[2].y>i.endY&&A[3].y>i.endY||A[0].x<i.startX&&A[1].x>i.endX&&A[2].x>i.endX&&A[3].x<i.startX&&A[0].y>i.startY&&A[1].y>i.startY&&A[2].y<i.endY&&A[3].y<i.endY},o.prototype.isSelOutsideImg=function(){var t=this.parent,e=this.imgCanvasPoints,i=t.activeObj.activePoint;return this.checkPointPosition(i.startX,i.startY,e[0].x,e[0].y,e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y)!=="inside"||this.checkPointPosition(i.endX,i.startY,e[0].x,e[0].y,e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y)!=="inside"||this.checkPointPosition(i.startX,i.endY,e[0].x,e[0].y,e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y)!=="inside"||this.checkPointPosition(i.endX,i.endY,e[0].x,e[0].y,e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y)!=="inside"},o.prototype.calcTriangleArea=function(t,e,i,r,n,s){return Math.abs((t*(r-s)+i*(s-e)+n*(e-r))/2)},o.prototype.checkPointPosition=function(t,e,i,r,n,s,a,l,h,c){var u=this.calcTriangleArea(t,e,i,r,h,c),p=this.calcTriangleArea(t,e,h,c,a,l),f=this.calcTriangleArea(t,e,a,l,n,s),g=this.calcTriangleArea(t,e,n,s,i,r),v=this.calcTriangleArea(i,r,n,s,a,l)+this.calcTriangleArea(a,l,h,c,i,r);return u+p+f+g>v?"outside":u+p+f+g===v&&(u===0||p===0||f===0||g===0)?"on":"inside"},o.prototype.getImagePoints=function(){var t=[],e=this.parent,i=e.transform.degree,r=e.baseImg.width,n=e.baseImg.height,s={dim:null,width:n,height:r,angle:e.transform.straighten};s.dim=e.getRotatedCanvasDim(s.width,s.height,s.angle);var a=i%90===0&&i%180!==0?s.dim.width:e.baseImgCanvas.width,l=i%90===0&&i%180!==0?s.dim.height:e.baseImgCanvas.height,h=i%90===0&&i%180!==0?n:r,c=i%90===0&&i%180!==0?r:n,u=a/2,p=l/2,f=u-h/2,g=p-c/2,v=u+h/2,y=p+c/2,C={x:u,y:p},b=e.transform.straighten*(Math.PI/180),M={x:Math.cos(b)*(f-C.x)-Math.sin(b)*(g-C.y)+C.x,y:Math.sin(b)*(f-C.x)+Math.cos(b)*(g-C.y)+C.y},S={x:Math.cos(b)*(v-C.x)-Math.sin(b)*(g-C.y)+C.x,y:Math.sin(b)*(v-C.x)+Math.cos(b)*(g-C.y)+C.y},N={x:Math.cos(b)*(v-C.x)-Math.sin(b)*(y-C.y)+C.x,y:Math.sin(b)*(v-C.x)+Math.cos(b)*(y-C.y)+C.y},x={x:Math.cos(b)*(f-C.x)-Math.sin(b)*(y-C.y)+C.x,y:Math.sin(b)*(f-C.x)+Math.cos(b)*(y-C.y)+C.y};return t.push(M),t.push(S),t.push(N),t.push(x),t},o.prototype.doIntersect=function(t,e,i,r){var n=this.initiation(t,e,i),s=this.initiation(t,e,r),a=this.initiation(i,r,t),l=this.initiation(i,r,e);return!!(n!==s&&a!==l||n===0&&this.onSegment(t,i,e)||s===0&&this.onSegment(t,r,e)||a===0&&this.onSegment(i,t,r)||l===0&&this.onSegment(i,e,r))},o.prototype.initiation=function(t,e,i){var r=(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y);return r===0?0:r>0?1:2},o.prototype.onSegment=function(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)},o.prototype.isInsideRect=function(t){var e=this.parent,i=e.activeObj.activePoint,r=!1;return t.x>=i.startX&&t.x<=i.endX&&t.y>=i.startY&&t.y<=i.endY&&(r=!0),r},o.prototype.setDestForStraighten=function(){var t=this.parent;if(d(this.straightenDestPoints)){var e=t.img,i=e.destLeft,r=e.destTop,n=e.destWidth,s=e.destHeight;t.notify("shape",{prop:"straightenShapes",onPropertyChange:!1}),this.straightenDestPoints=m({},t.img,{},!0),t.img.destLeft=i,t.img.destTop=r,t.img.destWidth=n,t.img.destHeight=s}},o.prototype.drawRedact=function(t,e){var i=e.activePoint,r=i.startX,n=i.startY,s=i.endX,a=i.endY,l=e.activePoint,h=l.width,c=l.height,u=!1,p=t.canvas;p.id.indexOf("_tempCanvas")!==-1&&(u=!0);var f=this.parent.img;if(!(h<=0||c<=0))if(this.parent.isCropTab)t.drawImage(e.redactImage,0,0,e.redactImage.width,e.redactImage.height,r,n,h,c);else{var g=document.createElement("canvas"),v=g.getContext("2d"),y=p.width,C=p.height,b=Math.min(y,C)/1e3,M=this.parent.transform.straighten!==0?this.parent.transform.straighten:this.parent.cropObj.straighten;if(this.allowRedactStraighten&&M!==0){var S=document.createElement("canvas"),N=S.getContext("2d");u?(S.width=p.width,S.height=p.height,N.drawImage(p,0,0)):(S.width=f.destWidth,S.height=f.destHeight,N.drawImage(this.lowerContext.canvas,f.destLeft,f.destTop,f.destWidth,f.destHeight,0,0,f.destWidth,f.destHeight));var x=-M*Math.PI/180,A=document.createElement("canvas"),U=A.getContext("2d");A.width=S.width,A.height=S.height,f.destWidth>p.width&&!u&&(A.width=p.width),f.destHeight>p.height&&!u&&(A.height=p.height),U.save(),U.translate(S.width/2,S.height/2),U.rotate(x),U.drawImage(S,-S.width/2,-S.height/2),U.restore(),f.destLeft>0&&!u&&(r-=f.destLeft,s-=f.destLeft),f.destTop>0&&!u&&(n-=f.destTop,a-=f.destTop);var z={x:r+h/2,y:n+c/2},J=Math.cos(M*Math.PI/180),R=Math.sin(M*Math.PI/180),_={x:J*(r-z.x)-R*(n-z.y)+z.x,y:R*(r-z.x)+J*(n-z.y)+z.y},B={x:J*(s-z.x)-R*(n-z.y)+z.x,y:R*(s-z.x)+J*(n-z.y)+z.y},E={x:J*(r-z.x)-R*(a-z.y)+z.x,y:R*(r-z.x)+J*(a-z.y)+z.y};u?z={x:p.width/2,y:p.height/2}:(z={x:f.destWidth/2,y:f.destHeight/2},f.destWidth>p.width&&(z.x=p.width/2),f.destHeight>p.height&&(z.y=p.height/2)),J=Math.cos(x),R=Math.sin(x);var L={x:J*(_.x-z.x)-R*(_.y-z.y)+z.x,y:R*(_.x-z.x)+J*(_.y-z.y)+z.y},P={x:J*(B.x-z.x)-R*(B.y-z.y)+z.x,y:R*(B.x-z.x)+J*(B.y-z.y)+z.y},j={x:J*(E.x-z.x)-R*(E.y-z.y)+z.x,y:R*(E.x-z.x)+J*(E.y-z.y)+z.y},k=u?t.canvas.width:f.destWidth,F=u?t.canvas.height:f.destHeight,X=Math.abs(k*Math.cos(x))+Math.abs(F*Math.sin(x)),re=Math.abs(k*Math.sin(x))+Math.abs(F*Math.cos(x));if(A.width=X,A.height=re,U.save(),U.translate(X/2,re/2),U.rotate(x),U.drawImage(S,-S.width/2,-S.height/2),U.restore(),this.parent.activeObj.redactType==="blur")g.width=h,g.height=c,v.drawImage(A,L.x+(X-S.width)/2,L.y+(re-S.height)/2,P.x-L.x,j.y-P.y,0,0,h,c);else{var q=e.redactPixelate/100*20;u&&(q=b*(e.redactPixelate/100)*35),g.width=Math.ceil(h/q),g.height=Math.ceil(c/q),v.drawImage(A,L.x+(X-S.width)/2,L.y+(re-S.height)/2,P.x-L.x,j.y-P.y,0,0,g.width,g.height)}}if(this.parent.activeObj.redactType==="blur"){if(M===0&&(g.width=h,g.height=c,v.drawImage(u?p:this.lowerContext.canvas,r,n,h,c,0,0,h,c)),u){var ie=b*(e.redactBlur/100*34);v.filter="blur("+ie+"px)"}else v.filter="blur("+e.redactBlur/100*17+"px)";v.drawImage(g,0,0),M===0?v.drawImage(u?p:this.lowerContext.canvas,r,n,h,c,0,0,h,c):(f.destLeft>0&&!u&&(r+=f.destLeft,s+=f.destLeft),f.destTop>0&&!u&&(n+=f.destTop,a+=f.destTop)),this.parent.isSafari&&this.parent.notify("filter",{prop:"apply-filter",onPropertyChange:!1,value:{context:v}}),t.drawImage(g,0,0,h,c,r,n,h,c)}else{var q=e.redactPixelate/100*20;u&&(q=b*(e.redactPixelate/100)*35),M===0?(g.width=Math.ceil(h/q),g.height=Math.ceil(c/q),v.drawImage(u?p:this.lowerContext.canvas,r,n,h,c,0,0,g.width,g.height)):(f.destLeft>0&&!u&&(r+=f.destLeft,s+=f.destLeft),f.destTop>0&&!u&&(n+=f.destTop,a+=f.destTop)),t.imageSmoothingEnabled=!1,t.drawImage(g,0,0,g.width,g.height,r,n,h,c)}e.redactImage=this.parent.createElement("canvas"),e.redactImage.width=g.width,e.redactImage.height=g.height,e.redactImage.getContext("2d").drawImage(g,0,0),t.beginPath(),t.rect(r,n,h,c),t.rect(r,n,h,c),t.fill("evenodd"),t.closePath()}},o}(),QD=function(){function o(t){this.parent=t,this.addEventListener()}return o.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},o.prototype.addEventListener=function(){this.parent.on("export",this.export,this),this.parent.on("destroyed",this.destroy,this)},o.prototype.removeEventListener=function(){this.parent.off("export",this.export),this.parent.off("destroyed",this.destroy)},o.prototype.export=function(t){switch(this.parent.notify("toolbar",{prop:"refreshShapeDrawing",onPropertyChange:!1}),this.updatePvtVar(),t.prop){case"export":this.exportImg(t.value.type,t.value.fileName,t.value.imgQuality);break;case"exportToCanvas":this.exportToCanvas(t.value.object);break;case"updateSaveContext":this.updateSaveContext(t.value.context);break;case"setImageQuality":this.imageQuality=t.value.value;break;case"drawAnnotation":this.drawAnnotation(t.value.context,t.value.ratio);break}},o.prototype.getModuleName=function(){return"export"},o.prototype.updatePvtVar=function(){var t=this.parent;t.lowerCanvas&&(this.lowerContext=t.lowerCanvas.getContext("2d"))},o.prototype.exportImg=function(t,e,i){var r=this.parent,n={fileName:""};r.notify("draw",{prop:"getFileName",onPropertyChange:!1,value:{obj:n}});var s=n.fileName;if(!r.disabled&&r.isImageLoaded){r.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:null}});var a={canvasFilter:this.parent.canvasFilter};this.lowerContext.filter=a.canvasFilter,t=t||"Png",r.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}});var l={cancel:!1,fileName:e||s,fileType:t,imageQuality:i};r.trigger("beforeSave",l),this.beforeSaveEvent(l,t,e,s,i)}},o.prototype.beforeSaveEvent=function(t,e,i,r,n){var s=this.parent;if(!t.cancel){s.currObjType.isSave=!0,i=t.fileName?t.fileName:i;var a=e.toLowerCase();i=i||r,a==="svg"?this.toSVGImg(i):this.toBlobFn(i,a,n);var l={fileName:i||r,fileType:e};s.trigger("saved",l);var h={action:"save",actionEventArgs:l};s.triggerEditCompleteEvent(h),s.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1}),s.lowerCanvas.style.left=s.upperCanvas.style.left="",s.lowerCanvas.style.top=s.upperCanvas.style.top="",s.lowerCanvas.style.maxWidth=s.upperCanvas.style.maxWidth="",s.lowerCanvas.style.maxHeight=s.upperCanvas.style.maxHeight=""}},o.prototype.toSVGImg=function(t){var e=this.parent;_t(e.element),e.element.style.opacity="0.5";var i=this.exportToCanvas(),r=i.toDataURL();xt(e.element),e.element.style.opacity="1";var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("width",i.style.maxWidth),n.setAttribute("height",i.style.maxHeight);var s="http://www.w3.org/1999/xlink",a=document.createElementNS("http://www.w3.org/2000/svg","image");a.setAttributeNS(null,"height",i.height.toString()),a.setAttributeNS(null,"width",i.width.toString()),a.setAttributeNS(s,"xlink:href",r),n.appendChild(a);var l="data:image/svg+xml;base64,",h='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' width="'+i.width+'"')+(' height="'+i.height+'"')+">",c="</svg>",u=n.innerHTML,p=h+u+c,f=l+btoa(p);return t===null?f:(this.downloadImg(f,t+".svg"),null)},o.prototype.toBlobFn=function(t,e,i){var r=this,n=this.parent;_t(n.element),n.element.style.opacity="0.5",d(i)||(i=i>1?1:i<=0?.01:i,this.imageQuality=i||null);var s=this.exportToCanvas(),a=e==="jpeg"?"image/jpeg":e==="webp"?"image/webp":"image/png";s.toBlob(function(l){var h=URL.createObjectURL(l);r.downloadImg(h,t+"."+e),xt(n.element),n.element.style.opacity="1"},a,this.imageQuality?this.imageQuality:null)},o.prototype.exportToCanvas=function(t){var e=this.parent,i,r,n=m({},e.cropObj,{},!0),s={currObj:{}};e.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:s}});var a=s.currObj;a.objColl=m([],e.objColl,[],!0),a.pointColl=m([],e.pointColl,[],!0),a.afterCropActions=m([],e.afterCropActions,[],!0);var l={selPointColl:null};e.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:l}}),this.parent.aspectWidth?(e.notify("undo-redo",{prop:"setPreventUR",value:{bool:!0}}),e.notify("toolbar",{prop:"resizeClick",value:{bool:!1}}),e.okBtn(),e.transform.degree%90===0&&e.transform.degree%180!==0?(i=this.parent.aspectHeight,r=this.parent.aspectWidth):(i=this.parent.aspectWidth,r=this.parent.aspectHeight),e.notify("undo-redo",{prop:"setPreventUR",value:{bool:!1}})):e.currSelectionPoint?(i=e.img.srcWidth,r=e.img.srcHeight):(i=e.baseImgCanvas.width,r=e.baseImgCanvas.height);var h={width:0,height:0};e.notify("crop",{prop:"calcRatio",onPropertyChange:!1,value:{obj:h,dimension:{width:i,height:r}}});var c=h,u=this.lowerContext.filter;if(this.lowerContext.filter!=="none"){var p=this.lowerContext.filter.split(" "),f=parseFloat(p[5].split("(")[1]);f*=(c.width+c.height)/2,p[5]="blur("+f+"px)",this.lowerContext.filter=p.join(" ")}var g=e.createElement("canvas",{id:e.element.id+"_tempCanvas",attrs:{name:"canvasImage"}}),v=g.getContext("2d");g.width=i,g.height=r;var y={width:0,height:0};e.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:i,height:r,obj:y}});var C=y;g.style.maxWidth=C.width+"px",g.style.maxHeight=C.height+"px";var b=this.lowerContext.filter;return v.filter=this.lowerContext.filter,this.downScaleImgCanvas(v,i,r),this.lowerContext.filter=b,(e.transform.degree!==0||e.transform.currFlipState!==""||e.transform.straighten!==0)&&(this.updateSaveContext(v),this.exportTransformedImage(v)),e.isSafari&&e.notify("filter",{prop:"apply-filter",onPropertyChange:!1,value:{context:v}}),this.drawAnnotation(v,c),e.isCircleCrop&&e.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:v,isSave:!0,isFlip:null}}),this.updateFrame(v,!0),this.lowerContext.filter=u,e.canvasFilter=u,t&&(t.canvas=g),e.aspectWidth&&(e.objColl=[],e.pointColl=[],e.freehandCounter=0,e.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:[]}}}),e.notify("draw",{prop:"setCurrentObj",onPropertyChange:!1,value:{obj:a}}),a.selPointColl=m([],l.selPointColl,[],!0),e.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:a.selPointColl}}}),e.cropObj=n,e.objColl=m([],a.objColl,[],!0),e.pointColl=m([],a.pointColl,[],!0),e.freehandCounter=e.pointColl.length,e.transform.straighten=0,this.lowerContext.filter="none",e.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:null}}),this.lowerContext.filter=a.filter,e.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),(e.isCircleCrop||e.currSelectionPoint&&e.currSelectionPoint.shape==="crop-circle")&&e.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}})),g},o.prototype.drawAnnotation=function(t,e){var i=this.parent,r=m([],i.objColl,[],!0),n=m([],i.pointColl,[],!0),s=i.shapeColl.filter(function(h){return h.shape!=="redact"}),a=i.shapeColl.filter(function(h){return h.shape==="redact"});i.shapeColl=a.concat(s);for(var l=0;l<i.shapeColl.length;l++)i.shapeColl[l].order&&(i.shapeColl[l].currIndex&&i.shapeColl[l].currIndex.indexOf("shape")>-1?(i.objColl=[],i.objColl.push(m({},i.shapeColl[l],{},!0)),this.drawShape(t,e)):i.shapeColl[l].id&&i.shapeColl[l].id.indexOf("pen")>-1&&(i.pointColl=[],i.freehandCounter=0,i.pointColl.push(m({},i.shapeColl[l],{},!0)),i.freehandCounter=i.pointColl.length,this.drawPen(t,e)));i.objColl=r,i.pointColl=n,i.freehandCounter=i.pointColl.length},o.prototype.drawShape=function(t,e){var i=this.parent;if(i.objColl.length>0){var r=t.filter;t.filter="none";var n={index:null};i.notify("shape",{prop:"getSmallestIndex",onPropertyChange:!1,value:{obj:n}});for(var s=n.index,a=m([],i.objColl,[],!0),l=m([],i.objColl,[],!0);a.length>0;){for(var h=!1,c=0;c<a.length;c++){var u=a[c];if(d(u.order)){a.splice(c,1),c--;continue}if(u.order===s){var p=t.filter;t.filter="none";var f=a[c],g=f.activePoint;if(g.startX-=i.img.destLeft,g.startY-=i.img.destTop,g.endX-=i.img.destLeft,g.endY-=i.img.destTop,g.width=g.endX-g.startX,g.height=g.endY-g.startY,g.startX*=e.width,g.startY*=e.height,g.endX*=e.width,g.endY*=e.height,g.width=g.endX-g.startX,g.height=g.endY-g.startY,f.strokeSettings.strokeWidth*=(e.width+e.height)/2,f.shape==="text")f.textSettings.fontSize*=(e.width+e.height)/2;else if(f.shape==="path")for(var v=0;v<f.pointColl.length;v++)f.pointColl[v].x=(f.pointColl[v].x-i.img.destLeft)*e.width,f.pointColl[v].y=(f.pointColl[v].y-i.img.destTop)*e.height;else f.shape==="image"&&(i.activeObj=m({},a[c],{},!0),i.notify("selection",{prop:"upgradeImageQuality",onPropertyChange:!1}),a[c]=m({},i.activeObj,{},!0));i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"saveContext",obj:a[c],isCropRatio:null,points:null,isPreventDrag:!0,saveContext:t,isPreventSelection:null}}),t.filter=p,i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),s++;var y={bool:!1};i.notify("shape",{prop:"isIndexInObjColl",onPropertyChange:!1,value:{obj:y,index:s}}),y.bool||s++,a.splice(c,1),h=!0;break}}if(!h)break}t.filter=r,i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),i.objColl=l}},o.prototype.drawPen=function(t,e){var i=this.parent;if(i.freehandCounter>0){var r={penStrokeWidth:null};i.notify("freehand-draw",{prop:"getPenStrokeWidth",onPropertyChange:!1,value:{obj:r}});for(var n=m({},i.pointColl,{},!0),s=0;s<i.freehandCounter;s++){i.points=m([],i.pointColl[s].points,[]),i.notify("freehand-draw",{prop:"setPointCounter",onPropertyChange:!1,value:{value:0}});var a=i.points.length;i.pointColl[s].strokeWidth*=(e.width+e.height)/2;for(var l=0;l<a;l++)i.points[l].x=(i.points[l].x-i.img.destLeft)*e.width,i.points[l].y=(i.points[l].y-i.img.destTop)*e.height}i.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:t,points:null}}),i.pointColl=n,i.notify("freehand-draw",{prop:"setPenStrokeWidth",onPropertyChange:!1,value:{value:r.penStrokeWidth}})}},o.prototype.downScaleImgCanvas=function(t,e,i){var r=this.parent,n=r.baseImgCanvas,s=r.baseImg,a={width:0,height:0};r.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:s.width,height:s.height,obj:a,isImgShape:null}});var l={color:null};if(r.notify("draw",{prop:"getImageBackgroundColor",value:{obj:l}}),l.color!==""&&(t.fillStyle=l.color,t.fillRect(0,0,t.canvas.width,t.canvas.height)),a.width>e&&a.height>i){var h=r.createElement("canvas",{id:r.element.id+"_downScaleCanvas",attrs:{name:"canvasImage"}});h.width=this.parent.img.srcWidth,h.height=this.parent.img.srcHeight,h.getContext("2d").drawImage(n,r.img.srcLeft,r.img.srcTop,r.img.srcWidth,r.img.srcHeight,0,0,h.width,h.height),r.notify("draw",{prop:"downScale",value:{canvas:h,width:e,height:i}}),t.drawImage(h,0,0)}else t.drawImage(r.baseImgCanvas,r.img.srcLeft,r.img.srcTop,r.img.srcWidth,r.img.srcHeight,0,0,e,i)},o.prototype.updateFrame=function(t,e){if(this.parent.frameObj.type!=="none"){var i=t.filter;t.filter="none",this.parent.notify("draw",{prop:"applyFrame",value:{ctx:t,frame:this.parent.frameObj.type,preventImg:e}}),t.filter=i}},o.prototype.downloadImg=function(t,e){var i=document.createElement("a");i.href=t,i.target="_parent",i.download=e,(document.body||document.documentElement).appendChild(i),i.click(),i.parentNode.removeChild(i)},o.prototype.exportTransformedImage=function(t){var e=this.parent,i=e.transform.degree;if(e.rotateFlipColl.length>0)for(var r=0,n=e.rotateFlipColl.length;r<n;r++){var s=e.rotateFlipColl[r];typeof s=="number"?this.exportRotate(t,s):s==="horizontal"?this.exportFlip(t,!0,!1):s==="vertical"&&this.exportFlip(t,!1,!0)}e.transform.degree=i},o.prototype.exportRotate=function(t,e){var i=this.parent;t.clearRect(0,0,t.canvas.width,t.canvas.height),this.setMaxDim(i.transform.degree,t.canvas),t.translate(t.canvas.width/2,t.canvas.height/2),t.rotate(Math.PI/180*e),t.drawImage(i.inMemoryCanvas,-t.canvas.height/2,-t.canvas.width/2,t.canvas.height,t.canvas.width),this.updateSaveContext(t)},o.prototype.exportFlip=function(t,e,i){t.clearRect(0,0,t.canvas.width,t.canvas.height),e&&(t.translate(t.canvas.width,0),t.scale(-1,1)),i&&(t.translate(0,t.canvas.height),t.scale(1,-1)),t.drawImage(this.parent.inMemoryCanvas,0,0),this.updateSaveContext(t)},o.prototype.updateSaveContext=function(t){var e=this.parent.inMemoryCanvas.getContext("2d");t.setTransform(1,0,0,1,0,0);var i=t.getImageData(0,0,t.canvas.width,t.canvas.height);this.parent.inMemoryCanvas.width=i.width,this.parent.inMemoryCanvas.height=i.height,e.putImageData(i,0,0)},o.prototype.setMaxDim=function(t,e){var i,r;t%90===0&&t%180!==0?d(this.parent.currSelectionPoint)?(i=this.parent.baseImgCanvas.height,r=this.parent.baseImgCanvas.width):(i=this.parent.img.srcHeight,r=this.parent.img.srcWidth):(t%180===0||t===0)&&(d(this.parent.currSelectionPoint)?(i=this.parent.baseImgCanvas.width,r=this.parent.baseImgCanvas.height):(i=this.parent.img.srcWidth,r=this.parent.img.srcHeight)),d(this.parent.aspectWidth)||(i=this.parent.aspectWidth,r=this.parent.aspectHeight),e.width=i,e.height=r;var n={width:0,height:0};this.parent.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:i,height:r,obj:n,isImgShape:null}});var s=n;e.style.maxWidth=s.width+"px",e.style.maxHeight=s.height+"px"},o}(),WD=function(){function o(t){this.adjustmentLevel={brightness:0,contrast:0,hue:0,opacity:100,saturation:0,blur:0,exposure:0,transparency:100,sharpen:!1,bw:!1},this.tempAdjustmentLevel={brightness:0,contrast:0,hue:0,opacity:100,saturation:0,blur:0,exposure:0,transparency:100,sharpen:!1,bw:!1},this.adjustmentValue="",this.isBrightnessAdjusted=!1,this.bevelFilter="none",this.tempAdjVal={brightness:0,contrast:0,hue:0,opacity:100,saturation:0,blur:0,exposure:0,transparency:100,sharpen:!1,bw:!1},this.tempFilVal="",this.parent=t,this.addEventListener()}return o.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},o.prototype.addEventListener=function(){this.parent.on("filter",this.filter,this),this.parent.on("destroyed",this.destroy,this)},o.prototype.removeEventListener=function(){this.parent.off("filter",this.filter),this.parent.off("destroyed",this.destroy)},o.prototype.filter=function(t){switch(this.updatePrivateVariables(),t.prop){case"finetuneImage":this.finetuneImage(t.value.option,t.value.value);break;case"applyImageFilter":this.setFilter(t.value.option);break;case"update-finetunes":this.updateFinetunes();break;case"set-adjustment":this.setAdjustment(t.value.operation);break;case"initFilter":this.initFilter();break;case"setCurrAdjValue":this.setCurrAdjValue(t.value.type,t.value.value);break;case"updateAdj":this.updateAdj(t.value.type,t.value.value,t.value.isPreview,t.value.ctx);break;case"getCurrentObj":this.getCurrentObj(t.value.object);break;case"getAdjustmentLevel":d(this.parent.activeObj.opacity)?this.adjustmentLevel.transparency=100:this.adjustmentLevel.transparency=this.parent.activeObj.opacity*100,t.value.obj.adjustmentLevel=this.adjustmentLevel;break;case"setAdjustmentLevel":this.adjustmentLevel=t.value.adjustmentLevel;break;case"getTempAdjustmentLevel":t.value.obj.tempAdjustmentLevel=this.tempAdjustmentLevel;break;case"setTempAdjustmentLevel":this.tempAdjustmentLevel=t.value.tempAdjustmentLevel;break;case"setAdjustmentValue":this.adjustmentValue=t.value.adjustmentValue;break;case"setBrightnessAdjusted":this.isBrightnessAdjusted=t.value.isBrightnessAdjusted,this.parent.currentFilter.split("_")&&this.parent.currentFilter.split("_")[1]==="cold"&&(this.isBrightnessAdjusted=!1);break;case"getBevelFilter":t.value.obj.bevelFilter=this.bevelFilter;break;case"setBevelFilter":this.bevelFilter=t.value.bevelFilter;break;case"setTempAdjVal":this.tempAdjVal=m({},this.adjustmentLevel,{},!0);break;case"setTempFilVal":this.tempFilVal=this.parent.currentFilter;break;case"reset":this.reset();break;case"apply-filter":this.applyFilter(t.value.context);break}},o.prototype.updatePrivateVariables=function(){var t=this.parent;t.lowerCanvas&&(this.lowerContext=t.lowerCanvas.getContext("2d"))},o.prototype.getModuleName=function(){return"filter"},o.prototype.reset=function(){this.adjustmentLevel={brightness:0,contrast:0,hue:0,opacity:100,saturation:0,blur:0,exposure:0,transparency:100,sharpen:!1,bw:!1},this.tempAdjustmentLevel={brightness:0,contrast:0,hue:0,opacity:100,saturation:0,blur:0,exposure:0,transparency:100,sharpen:!1,bw:!1},this.adjustmentValue=this.parent.getDefaultFilter(),this.isBrightnessAdjusted=!1,this.bevelFilter="none",this.tempFilVal="",this.tempAdjVal={brightness:0,contrast:0,hue:0,opacity:100,saturation:0,blur:0,exposure:0,transparency:100,sharpen:!1,bw:!1}},o.prototype.updateFinetunes=function(){var t=this,e=this.parent,i=e.finetuneSettings;if(i){var r=["brightness","contrast","hue","saturation","exposure","opacity","blur"];r.forEach(function(n){i[n]&&(t.adjustmentLevel[n]=i[n].defaultValue,t.tempAdjustmentLevel[n]=i[n].defaultValue)}),e.notify("draw",{prop:"isInitialLoading",onPropertyChange:!1,value:{isInitialLoading:!0}})}},o.prototype.initFilter=function(){this.setFilterAdj("brightness",this.adjustmentLevel.brightness),this.setFilterAdj("contrast",this.adjustmentLevel.contrast),this.setFilterAdj("hue",this.adjustmentLevel.hue),this.setFilterAdj("saturation",this.adjustmentLevel.saturation),this.setFilterAdj("exposure",this.adjustmentLevel.exposure),this.setFilterAdj("opacity",this.adjustmentLevel.opacity),this.setFilterAdj("blur",this.adjustmentLevel.blur)},o.prototype.updateAdj=function(t,e,i,r){var n=this.parent;this.lowerContext.clearRect(0,0,n.lowerCanvas.width,n.lowerCanvas.height);var s=this.lowerContext.filter.split(" "),a=[],l=this.getFilterValue(this.adjustmentLevel.brightness),h,c,u,p,f;switch(t){case"brightness":e=this.getFilterValue(this.adjustmentLevel.exposure)+e*.005,s[0]="brightness("+e+")",this.adjustmentLevel.brightness!==0?(e=this.adjustmentLevel.opacity/100-this.adjustmentLevel.opacity*.3/100,s[4]="opacity("+e+")"):(e=this.adjustmentLevel.opacity/100,s[4]="opacity("+e+")"),this.adjustmentValue=s.join(" ");break;case"contrast":s[1]="contrast("+e+"%)",this.adjustmentValue=s.join(" ");break;case"hue":s[2]="hue-rotate("+e+"deg)",this.adjustmentValue=s.join(" ");break;case"saturation":s[3]="saturate("+e+"%)",this.adjustmentValue=s.join(" ");break;case"opacity":parseFloat(s[0].split("(")[1])!==1&&(e-=.2),e<0&&(e=0),s[4]="opacity("+e+")",this.adjustmentValue=s.join(" ");break;case"blur":s[5]="blur("+e+"px)",this.adjustmentValue=s.join(" ");break;case"exposure":e>1?(e-=1,e+=l):e<1&&(e=1-e,e=l-e),s[0]="brightness("+e+")",this.adjustmentValue=s.join(" ");break;case"chrome":h=this.getSaturationFilterValue(this.adjustmentLevel.saturation),h*=100,e=h+h*.4,s[3]="saturate("+e+"%)",a=this.adjustmentValue.split(" "),s[0]=a[0],s[1]=a[1],s[2]=a[2],s[4]=a[4],s[5]=a[5],s[6]="sepia(0%)",s[7]="grayscale(0%)",s[8]="invert(0%)";break;case"cold":c=this.getFilterValue(this.adjustmentLevel.brightness),c*=100,e=c*.9,e*=.01,s[0]="brightness("+e+")",p=this.getFilterValue(this.adjustmentLevel.contrast),p*=100,e=p+p*.5,s[1]="contrast("+e+"%)",f=this.getSaturationFilterValue(this.adjustmentLevel.saturation),f*=100,e=f,s[3]="saturate("+e+"%)",a=this.adjustmentValue.split(" "),s[2]=a[2],s[4]=a[4],s[5]=a[5],s[6]="sepia(0%)",s[7]="grayscale(0%)",s[8]="invert(0%)";break;case"warm":u=this.getSaturationFilterValue(this.adjustmentLevel.saturation),u*=100,e=u+u*.4,s[3]="saturate("+e+"%)",s[6]="sepia(25%)",a=this.adjustmentValue.split(" "),s[0]=a[0],s[1]=a[1],s[2]=a[2],s[4]=a[4],s[5]=a[5],s[7]="grayscale(0%)",s[8]="invert(0%)";break;case"grayscale":s[7]="grayscale(100%)",a=this.adjustmentValue.split(" "),s[0]=a[0],s[1]=a[1],s[2]=a[2],s[3]=a[3],s[4]=a[4],s[5]=a[5],s[6]="sepia(0%)",s[8]="invert(0%)";break;case"sepia":s[6]="sepia(100%)",a=this.adjustmentValue.split(" "),s[0]=a[0],s[1]=a[1],s[2]=a[2],s[3]=a[3],s[4]=a[4],s[5]=a[5],s[7]="grayscale(0%)",s[8]="invert(0%)";break;case"invert":s[8]="invert(100%)",a=this.adjustmentValue.split(" "),s[0]=a[0],s[1]=a[1],s[2]=a[2],s[3]=a[3],s[4]=a[4],s[5]=a[5],s[6]="sepia(0%)",s[7]="grayscale(0%)";break}if(t!=="sharpen"&&t!=="blackandwhite"){d(i)&&(t==="default"&&(s=this.getDefaultCurrentFilter(s)),this.lowerContext.filter=s.join(" ")),s=this.setTempFilterValue(l,i,s,t),n.notify("draw",{prop:"setRotateZoom",onPropertyChange:!1,value:{isRotateZoom:!0}}),n.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,isRotatePan:null}});var g=void 0;n.frameObj.type==="bevel"&&(g=this.lowerContext.filter,this.bevelFilter=g),n.transform.degree===0&&n.rotateFlipColl.length>0&&(n.img.destLeft+=n.panPoint.totalPannedPoint.x,n.img.destTop+=n.panPoint.totalPannedPoint.y),n.img.destLeft+=n.panPoint.totalPannedInternalPoint.x,n.img.destTop+=n.panPoint.totalPannedInternalPoint.y,n.transform.degree===0&&n.notify("transform",{prop:"setDestPointsForFlipState",onPropertyChange:!1}),n.notify("draw",{prop:"drawImage",onPropertyChange:!1}),n.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:null,isRotatePan:null}}),n.notify("draw",{prop:"setRotateZoom",onPropertyChange:!1,value:{isRotateZoom:!1}}),n.transform.degree===0&&n.rotateFlipColl.length>0&&(n.img.destLeft+=n.panPoint.totalPannedPoint.x,n.img.destTop+=n.panPoint.totalPannedPoint.y),s=this.setTempFilterValue(l,i,s,t),d(i)&&(this.lowerContext.filter=s.join(" ")),n.initialAdjustmentValue=s.join(" "),g=this.lowerContext.filter,this.lowerContext.filter="brightness(1) contrast(100%) hue-rotate(0deg) saturate(100%) opacity(1) blur(0px) sepia(0%) grayscale(0%) invert(0%)",this.bevelFilter=g,n.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"iterate",pen:"iterate",isPreventApply:null}}),this.lowerContext.filter=g,n.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),(n.currSelectionPoint&&n.currSelectionPoint.shape==="crop-circle"||n.isCircleCrop)&&n.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),this.isBrightnessAdjusted=l!==1}var v=s.join(" ");r&&(r.filter=v)},o.prototype.setTempFilterValue=function(t,e,i,r){if(e){if(r==="default")i=this.getDefaultCurrentFilter(i);else if(t!==1){var n=this.lowerContext.filter.split(" ");n[4]=i[4],this.lowerContext.filter=n.join(" ")}}return i},o.prototype.getDefaultCurrentFilter=function(t){var e=this.adjustmentValue.split(" ");return t=[e[0],e[1],e[2],e[3],e[4],e[5],"sepia(0%)","grayscale(0%)","invert(0%)"],t},o.prototype.getFilterValue=function(t){return t===0?1:1+t*.5/100},o.prototype.getSaturationFilterValue=function(t){return t===0?1:1+t/100},o.prototype.setFilterAdj=function(t,e){var i=this.parent;switch(i.notify("freehand-draw",{prop:"apply-pen-draw",onPropertyChange:!1}),this.adjustmentLevel[""+t]=e,t){case"contrast":case"exposure":e=this.getFilterValue(e),t==="contrast"&&(e*=100);break;case"hue":e*=3;break;case"saturation":e=this.getSaturationFilterValue(e)*100;break;case"opacity":e<10&&(e+=1),e/=100;break;case"blur":e!==0&&(e/=20,e+=.5);break}var r=m({},i.cropObj,{},!0),n=this.getCurrentObj();n.objColl=m([],i.objColl,[],!0),n.pointColl=m([],i.pointColl,[],!0),n.afterCropActions=m([],i.afterCropActions,[],!0);var s={selPointColl:null};i.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:s}}),n.selPointColl=m([],s.selPointColl,[],!0),this.updateAdj(t,e),i.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:t,previousObj:n,previousObjColl:n.objColl,previousPointColl:n.pointColl,previousSelPointColl:n.selPointColl,previousCropObj:r,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}})},o.prototype.setFilter=function(t){var e=this.parent;t=t.toLowerCase(),e.notify("freehand-draw",{prop:"apply-pen-draw",onPropertyChange:!1});var i={currentFilter:this.parent.currentFilter},r=i.currentFilter,n=m({},e.cropObj,{},!0),s=this.getCurrentObj();s.objColl=m([],e.objColl,[],!0),s.pointColl=m([],e.pointColl,[],!0),s.afterCropActions=m([],e.afterCropActions,[],!0);var a={selPointColl:null};e.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:a}}),s.selPointColl=m([],a.selPointColl,[],!0),this.updateAdj(t,null),e.notify("draw",{prop:"setImageEdited",onPropertyChange:!1}),e.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:t,previousObj:s,previousObjColl:s.objColl,previousPointColl:s.pointColl,previousSelPointColl:s.selPointColl,previousCropObj:n,previousText:null,currentText:null,previousFilter:r,isCircleCrop:null}})},o.prototype.setAdjustment=function(t){var e=this.lowerContext.filter.split(" "),i,r;switch(t){case"brightness":r=e[0].split("("),i=parseFloat(r[1].split(")")[0]),this.adjustmentLevel.brightness=this.setFilterValue(i);break;case"contrast":r=e[1].split("("),i=parseFloat(r[1].split(")")[0]),i/=100,this.adjustmentLevel.contrast=this.setFilterValue(i);break;case"hue":r=e[2].split("("),i=parseFloat(r[1].split(")")[0]),i/=3,this.adjustmentLevel.hue=i;break;case"saturation":r=e[3].split("("),i=parseFloat(r[1].split(")")[0]),i/=100,this.adjustmentLevel.saturation=this.setSaturationFilterValue(i);break;case"opacity":r=e[4].split("("),i=parseFloat(r[1].split(")")[0]),i===.45?i=40:i===.4?i=30:i===.35?i=20:i===.3?i=10:i===.25?i=0:i*=100,this.adjustmentLevel.opacity=i;break;case"blur":r=e[5].split("("),i=parseFloat(r[1].split(")")[0]),i*=20,this.adjustmentLevel.blur=i;break;case"exposure":r=e[0].split("("),i=parseFloat(r[1].split(")")[0]),this.adjustmentLevel.exposure=this.setFilterValue(i);break}},o.prototype.setFilterValue=function(t){return Math.round(t===1?0:(t-1)*100/.5)},o.prototype.setSaturationFilterValue=function(t){return Math.round(t===1?0:(t-1)*100)},o.prototype.finetuneImage=function(t,e){var i=this.parent;if(!i.disabled&&i.isImageLoaded){switch(t.toLowerCase()){case"brightness":this.setFilterAdj("brightness",e);break;case"contrast":this.setFilterAdj("contrast",e);break;case"hue":this.setFilterAdj("hue",e);break;case"saturation":this.setFilterAdj("saturation",e);break;case"opacity":this.setFilterAdj("opacity",e);break;case"blur":this.setFilterAdj("blur",e);break;case"exposure":this.setFilterAdj("exposure",e);break}this.parent.canvasFilter=this.lowerContext.filter,i.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}})}},o.prototype.setCurrAdjValue=function(t,e){var i=this.parent;switch(this.parent.notify("draw",{prop:"setImageEdited",onPropertyChange:!1}),t){case"brightness":this.setFilterAdj("brightness",e);break;case"contrast":this.setFilterAdj("contrast",e);break;case"hue":this.setFilterAdj("hue",e);break;case"saturation":this.setFilterAdj("saturation",e);break;case"opacity":this.setFilterAdj("opacity",e);break;case"blur":this.setFilterAdj("blur",e);break;case"exposure":this.setFilterAdj("exposure",e);break}i.isFinetuneBtnClick=!0,i.curFinetuneObjEvent={finetune:i.toPascalCase(t),value:e}},o.prototype.getCurrentObj=function(t){var e=this.parent,i={point:null};e.notify("crop",{prop:"getTempFlipPanPoint",value:{obj:i}});var r={previousZoomValue:null};e.notify("transform",{prop:"getPreviousZoomValue",value:{obj:r}});var n={zoomFactor:null};e.notify("draw",{prop:"getStraightenInitZoom",value:{obj:n}});var s={color:null};e.notify("draw",{prop:"getImageBackgroundColor",value:{obj:s}});var a={cropZoom:0,defaultZoom:0,totalPannedPoint:{x:0,y:0},totalPannedClientPoint:{x:0,y:0},totalPannedInternalPoint:{x:0,y:0},tempFlipPanPoint:{x:0,y:0},activeObj:{},rotateFlipColl:[],degree:0,currFlipState:"",zoomFactor:0,previousZoomValue:0,straighten:0,destPoints:{startX:0,startY:0,width:0,height:0},frame:"none",srcPoints:{startX:0,startY:0,width:0,height:0},filter:"",isBrightAdjust:this.isBrightnessAdjusted,aspectWidth:null,aspectHeight:null,straightenZoom:0,adjustmentLevel:m({},this.tempAdjVal,{},!0),currentFilter:this.tempFilVal,imageSource:"",bgColor:""};return a.cropZoom=e.transform.cropZoomFactor,a.defaultZoom=e.transform.defaultZoomFactor,a.zoomFactor=e.zoomSettings.zoomFactor,a.previousZoomValue=r.previousZoomValue,a.straightenZoom=n.zoomFactor,a.totalPannedPoint=m({},e.panPoint.totalPannedPoint,{},!0),a.totalPannedClientPoint=m({},e.panPoint.totalPannedClientPoint,{},!0),a.totalPannedInternalPoint=m({},e.panPoint.totalPannedInternalPoint,{},!0),a.tempFlipPanPoint=m({},i.point,{},!0),a.activeObj=m({},e.activeObj,{},!0),a.rotateFlipColl=m([],e.rotateFlipColl,[],!0),a.degree=e.transform.degree,a.straighten=e.cropObj.straighten,a.currFlipState=e.transform.currFlipState,a.destPoints={startX:e.img.destLeft,startY:e.img.destTop,endX:0,endY:0,width:e.img.destWidth,height:e.img.destHeight},a.srcPoints={startX:e.img.srcLeft,startY:e.img.srcTop,endX:0,endY:0,width:e.img.srcWidth,height:e.img.srcHeight},a.filter=this.lowerContext.filter,a.aspectWidth=e.aspectWidth,a.aspectHeight=e.aspectHeight,a.frame=e.frameObj.type,a.frameObj=m({},e.frameObj),a.imageSource=e.baseImg.src,a.bgColor=s.color,t&&(t.currObj=a),a},o.prototype.getValFromPercentage=function(t){var e=parseFloat(t);return/%\s*?$/i.test(t)&&(e/=100),e},o.prototype.getValFromLength=function(t){return parseFloat(t)},o.prototype.parseFilterString=function(t){var e=[];return t&&t!=="none"&&(e=t.split(" ").map(function(i){var r=i.match(/([a-z-]+)\(([^)]+)\)/).slice(1,3),n=r[0],s=r[1];return{filter:n,value:s}})),e},o.prototype.applyFilter=function(t){for(var e=t.canvas,i=e.height,r=e.width,n=t.getImageData(0,0,r,i),s=this.parseFilterString(t.filter),a=0,l=s.length;a<l;a++)switch(s[a].filter){case"blur":n=this.blur(t,n,s[a].value);break;case"brightness":n=this.brightness(n,s[a].value);break;case"contrast":n=this.contrast(n,s[a].value);break;case"grayscale":n=this.grayscale(n,s[a].value);break;case"hue-rotate":n=this.hueRotate(n,s[a].value);break;case"invert":n=this.invert(n,s[a].value);break;case"opacity":n=this.opacity(n,s[a].value);break;case"saturate":n=this.saturate(t,n,s[a].value);break;case"sepia":n=this.sepia(n,s[a].value);break}t.putImageData(n,0,0)},o.prototype.blur=function(t,e,i){i===void 0&&(i="0");var r=this.getValFromLength(i);if(r=Math.floor(r),r<=0)return e;for(var n=t.canvas,s=n.height,a=n.width,l=e.data,h=new Uint8ClampedArray(l.length),c=0;c<s;c++)for(var u=0;u<a;u++){for(var p=0,f=0,g=0,v=0,y=0,C=-r;C<=r;C++)for(var b=-r;b<=r;b++){var M=u+b,S=c+C;if(M>=0&&M<a&&S>=0&&S<s){var N=(S*a+M)*4;p+=l[N],f+=l[N+1],g+=l[N+2],v+=l[N+3],y++}}var x=(c*a+u)*4;h[x]=p/y,h[x+1]=f/y,h[x+2]=g/y,h[x+3]=v/y}for(var x=0;x<l.length;x++)l[x]=h[x];return e},o.prototype.brightness=function(t,e){e===void 0&&(e="1");var i=this.getValFromPercentage(e);if(i!==1)for(var r=t.data,n=r.length,s=0;s<n;s+=4)r[s+0]*=i,r[s+1]*=i,r[s+2]*=i;return t},o.prototype.contrast=function(t,e){e===void 0&&(e="1");var i=this.getValFromPercentage(e);if(i!==1)for(var r=t.data,n=r.length,s=0;s<n;s+=4)r[s+0]=((r[s+0]/255-.5)*i+.5)*255,r[s+1]=((r[s+1]/255-.5)*i+.5)*255,r[s+2]=((r[s+2]/255-.5)*i+.5)*255;return t},o.prototype.grayscale=function(t,e){e===void 0&&(e="0");var i=this.getValFromPercentage(e);if(i>0)for(var r=t.data,n=r.length,s=0;s<n;s+=4){var a=r[s],l=r[s+1],h=r[s+2],c=.299*a+.587*l+.114*h;r[s]=a*(1-i)+c*i,r[s+1]=l*(1-i)+c*i,r[s+2]=h*(1-i)+c*i}return t},o.prototype.hueRotate=function(t,e){e===void 0&&(e="0deg");var i=t.data,r=parseFloat(e)*(Math.PI/180);if(r>0)for(var n=Math.cos(r),s=Math.sin(r),a=[.213+n*.787-s*.213,.715-n*.715-s*.715,.072-n*.072+s*.928,.213-n*.213+s*.143,.715+n*.285+s*.14,.072-n*.072-s*.283,.213-n*.213-s*.787,.715-n*.715+s*.715,.072+n*.928+s*.072],l=0;l<i.length;l+=4){var h=i[l],c=i[l+1],u=i[l+2];i[l]=a[0]*h+a[1]*c+a[2]*u,i[l+1]=a[3]*h+a[4]*c+a[5]*u,i[l+2]=a[6]*h+a[7]*c+a[8]*u}return t},o.prototype.invert=function(t,e){e===void 0&&(e="0");var i=this.getValFromPercentage(e);if(i>0)for(var r=t.data,n=r.length,s=0;s<n;s+=4)r[s+0]=Math.abs(r[s+0]-255*i),r[s+1]=Math.abs(r[s+1]-255*i),r[s+2]=Math.abs(r[s+2]-255*i);return t},o.prototype.opacity=function(t,e){e===void 0&&(e="0");var i=this.getValFromPercentage(e);if(i>=0)for(var r=t.data,n=r.length,s=3;s<n;s+=4)r[s]*=i;return t},o.prototype.saturate=function(t,e,i){i===void 0&&(i="0");var r=this.getValFromPercentage(i);if(r!==1)for(var n=t.canvas,s=n.width,a=n.height,l=e.data,h=(1-r)*.3086,c=(1-r)*.6094,u=(1-r)*.082,p=s<<2,f=0;f<a;f++)for(var g=f*p,v=0;v<s;v++){var y=g+(v<<2),C=l[y+0],b=l[y+1],M=l[y+2];l[y+0]=(h+r)*C+c*b+u*M,l[y+1]=h*C+(c+r)*b+u*M,l[y+2]=h*C+c*b+(u+r)*M}return e},o.prototype.sepia=function(t,e){e===void 0&&(e="0");var i=this.getValFromPercentage(e);if(i>1&&(i=1),i>0)for(var r=t.data,n=r.length,s=0;s<n;s+=4){var a=r[s+0],l=r[s+1],h=r[s+2];r[s+0]=(.393*a+.769*l+.189*h)*i+a*(1-i),r[s+1]=(.349*a+.686*l+.168*h)*i+l*(1-i),r[s+2]=(.272*a+.534*l+.131*h)*i+h*(1-i)}return t},o}(),XD=function(){function o(t){this.fhdObj={lastWidth:0,lastVelocity:0,time:0,pointX:0,pointY:0},this.isFreehandDrawing=!1,this.freehandDownPoint={x:0,y:0},this.isFreehandPointMoved=!1,this.pointCounter=0,this.selPointColl={},this.currFHDIdx=0,this.selPoints=[],this.dummyPoints=[],this.tempFHDStyles={strokeColor:null,fillColor:null,strokeWidth:null},this.straightenPoint={x:null,y:null,ratioX:null,ratioY:null},this.straightenPointAngle=0,this.isMasking=!1,this.parent=t,this.addEventListener()}return o.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},o.prototype.addEventListener=function(){this.parent.on("freehand-draw",this.draw,this),this.parent.on("destroyed",this.destroy,this)},o.prototype.removeEventListener=function(){this.parent.off("freehand-draw",this.draw),this.parent.off("destroyed",this.destroy)},o.prototype.draw=function(t){switch(this.updateFhdPvtVar(),t.prop){case"hoverFhd":{this.hoverFhd(t.value.strokeColor,t.value.strokeWidth);break}case"freehandDownHandler":this.freehandDownHandler(t.value.e,t.value.canvas);break;case"freehandUpHandler":this.freehandUpHandler(t.value.e,t.value.canvas,t.value.context);break;case"handle-freehand-draw":{var e=parseInt(t.value.id.split("_")[1],10)-1;this.isFHDIdx(e)&&this.deleteFhd(e,!0);break}case"freehandRedraw":this.freehandRedraw(t.value.context,t.value.points);break;case"deleteFhd":{var e=parseInt(t.value.id.split("_")[1],10)-1;this.deleteFhd(e,!0);break}case"selectFhd":{var e=null;t.value.id&&(e=parseInt(t.value.id.split("_")[1],10)-1),this.selectFhd(e);break}case"applyFhd":this.applyFhd();break;case"cancelFhd":this.cancelFhd();break;case"updateFHDCurPts":this.updateFHDCurPts();break;case"rotateFhdColl":this.rotateFhdColl();break;case"flipFHDColl":this.flipFHDColl(t.value.value);break;case"panFHDColl":this.panFHDColl(t.value.xDiff,t.value.yDiff,t.value.panRegion);break;case"updateFHDColl":t.value&&t.value.isPreventApply?this.updateFHDColl(t.value.isPreventApply):this.updateFHDColl();break;case"zoomFHDColl":this.zoomFHDColl(t.value.isPreventApply);break;case"apply-pen-draw":this.applyPenDraw();break;case"freeHandDraw":this.freeHandDraw(t.value.value);break;case"isFHDIdx":this.isFHDIdx(t.value.index,t.value.obj);break;case"getSqPtFD":this.getSqPtFD(t.value.idx,t.value.obj);break;case"getSelPointColl":t.value.obj.selPointColl=m([],this.selPointColl);break;case"setSelPointColl":this.selPointColl=m([],t.value.obj.selPointColl);break;case"pushSelPointColl":this.selPointColl.push(m([],t.value.obj.selPointColl));break;case"setFreehandDrawHoveredIndex":this.fhdHovIdx=t.value.index;break;case"getFreehandDrawHoveredIndex":t.value.obj.index=this.fhdHovIdx;break;case"setPointCounter":this.pointCounter=t.value.value;break;case"getPenStrokeWidth":t.value.obj.penStrokeWidth=this.penStrokeWidth;break;case"setPenStrokeWidth":this.penStrokeWidth=t.value.value;break;case"getCurrentFreehandDrawIndex":t.value.obj.currentFreehandDrawIndex=this.currFHDIdx;break;case"setCurrentFreehandDrawIndex":this.currFHDIdx=t.value.value;break;case"updateCropPtsForSel":this.updateCropPtsForSel();break;case"getFreehandDrawSelectedId":t.value.obj.freehandDrawSelectedId=this.fhdSelID;break;case"resetFreehandDrawSelectedId":this.fhdSelID=null;break;case"getTempFreeHandDrawEditingStyles":t.value.obj.tempFreeHandDrawEditingStyles=this.tempFHDStyles;break;case"setFreehandSelectedIndex":this.fhdSelIdx=t.value.index;break;case"getFreehandSelectedIndex":t.value.obj.freehandSelectedIndex=this.fhdSelIdx;break;case"setCenterSelPoints":this.setCenterSelPoints();break;case"getStraightenPoint":t.value.obj.straightenPoint=m({},this.straightenPoint,{},!0);break;case"setStraightenPoint":this.straightenPoint.x=t.value.x,this.straightenPoint.y=t.value.y,t.value.ratioX&&t.value.ratioY&&(this.straightenPoint.ratioX=t.value.ratioX,this.straightenPoint.ratioY=t.value.ratioY);break;case"resetStraightenPoint":this.straightenPoint={x:null,y:null,ratioX:null,ratioY:null},this.prevStraightenObj=null,this.straightenPointAngle=0;break;case"getStraightenPointAngle":t.value.obj.angle=this.straightenPointAngle;break;case"reset":this.reset();break;case"triggerShapeChanging":this.triggerShapeChanging(t.value.shapeChangingArgs);break;case"setMasking":this.isMasking=t.value.value;break;case"resetSelPoints":this.selPoints=[];break}},o.prototype.updateFhdPvtVar=function(){var t=this.parent;t.lowerCanvas&&(this.lowerContext=t.lowerCanvas.getContext("2d")),t.upperCanvas&&(this.upperContext=t.upperCanvas.getContext("2d"))},o.prototype.reset=function(){this.fhdObj={lastWidth:0,lastVelocity:0,time:0,pointX:0,pointY:0},this.isFreehandDrawing=this.isFreehandPointMoved=!1,this.selPoints=[],this.dummyPoints=[],this.freehandDownPoint={x:0,y:0},this.selPointColl={},this.straightenPointAngle=0,this.fhdHovIdx=null,this.pointCounter=0,this.fhdSelID=null,this.isMasking=!1,this.penStrokeWidth=void 0,this.currFHDIdx=0,this.fhdSelIdx=null,this.tempFHDStyles={strokeColor:null,fillColor:null,strokeWidth:null},this.straightenPoint={x:null,y:null,ratioX:null,ratioY:null},this.prevStraightenObj=null},o.prototype.getModuleName=function(){return"freehand-draw"},o.prototype.hoverFhd=function(t,e){var i=this.parent,r=this.upperContext,n=-1;this.fhdHovIdx>-1?n=this.fhdHovIdx:n=this.fhdSelIdx,i.points=m([],i.pointColl[n].points),this.pointCounter=0;var s=i.points.length,a,l,h,c,u=0,p=0;r.fillStyle=t||i.pointColl[n].strokeColor,r.strokeStyle=r.fillStyle,u=p=this.penStrokeWidth=e||i.pointColl[n].strokeWidth,s===1&&(a=l=h=c=i.points[0],this.startDraw(r,a,l,h,c,u,p));for(var f=0;f<s-3;f++)i.points[f+1]&&i.points[f+2]&&i.points[f+2]&&(a=this.calcCurveCP(i.points[f+0],i.points[f+1],i.points[f+2]).controlPoint2,l=this.calcCurveCP(i.points[f+1],i.points[f+2],i.points[f+3]).controlPoint1,f===0?h=i.points[f]:h=i.points[f+1],c=i.points[f+2],this.startDraw(r,a,l,h,c,u,p));r.closePath();var g=this.getSqPtFD(n),v=r.lineWidth;r.lineWidth=2,r.strokeStyle=i.themeColl[i.theme].primaryColor,r.beginPath(),r.rect(g.startX,g.startY,g.width,g.height),r.stroke(),r.closePath(),r.lineWidth=v},o.prototype.freehandDownHandler=function(t,e){var i=this.parent;i.lowerCanvas=document.querySelector("#"+i.element.id+"_lowerCanvas"),this.lowerContext=i.lowerCanvas.getContext("2d"),i.upperCanvas=document.querySelector("#"+i.element.id+"_upperCanvas"),this.upperContext=i.upperCanvas.getContext("2d"),this.fhdObj.time=new Date().getTime(),this.isFreehandDrawing=!0,t.type==="mousedown"?this.freehandDownPoint={x:t.clientX,y:t.clientY}:this.freehandDownPoint={x:t.touches[0].clientX,y:t.touches[0].clientY},this.isFreehandPointMoved=!1,I.add(e,"mousemove touchmove",this.freehandMoveHandler,this);var r={id:"pen_"+(this.currFHDIdx+1),type:xi.FreehandDraw,startX:this.freehandDownPoint.x,startY:this.freehandDownPoint.y,strokeColor:i.activeObj.strokeSettings.strokeColor,strokeWidth:this.penStrokeWidth,points:null,index:i.objColl.length+i.freehandCounter+1},n={cancel:!1,action:"draw-start",previousShapeSettings:r,currentShapeSettings:r};this.triggerShapeChanging(n)},o.prototype.freehandUpHandler=function(t,e,i){var r=e.getBoundingClientRect(),n=this.parent;I.remove(e,"mousemove touchmove",this.freehandMoveHandler),n.points.length===0&&(t.type==="mouseup"?this.processPoint(t.clientX-r.left,t.clientY-r.top,!0,i):t.type==="touchend"&&t.changedTouches?this.processPoint(t.changedTouches[0].clientX-r.left,t.changedTouches[0].clientY-r.top,!0,i):this.isFreehandPointMoved||this.processPoint(this.freehandDownPoint.x-r.left,this.freehandDownPoint.y-r.top,!0,i)),i.closePath();var s=m({},n.cropObj,{},!0),a={currObj:{}};n.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:a}});var l=a.currObj;l.objColl=m([],n.objColl,[],!0),l.pointColl=m([],n.pointColl,[],!0),l.afterCropActions=m([],n.afterCropActions,[],!0);var h={selPointColl:null};n.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:h}}),l.selPointColl=m([],h.selPointColl,[],!0);var c=n.freehandCounter,u=n.objColl.length+n.freehandCounter+1;n.pointColl[c]={points:m([],n.points),strokeColor:n.activeObj.strokeSettings.strokeColor,strokeWidth:this.penStrokeWidth,flipState:n.transform.currFlipState,id:"pen_"+(this.currFHDIdx+1),order:u},n.points=[],this.dummyPoints=[],this.selPointColl[c]={points:m([],this.selPoints)},this.selPoints=[],this.pointCounter=0,n.freehandCounter++,this.isFreehandDrawing=!1,n.isMaskImage||n.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"freehand-draw",previousObj:l,previousObjColl:l.objColl,previousPointColl:l.pointColl,previousSelPointColl:l.selPointColl,previousCropObj:s,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}});var p={id:"pen_"+(this.currFHDIdx+1),type:xi.FreehandDraw,startX:this.freehandDownPoint.x,startY:this.freehandDownPoint.y,strokeColor:n.activeObj.strokeSettings.strokeColor,strokeWidth:this.penStrokeWidth,points:n.pointColl[this.currFHDIdx].points,index:u},f={cancel:!1,action:"draw-end",previousShapeSettings:p,currentShapeSettings:p};this.triggerShapeChanging(f),this.currFHDIdx++},o.prototype.freehandMoveHandler=function(t){this.isFreehandPointMoved=!0;var e=this.parent.upperCanvas.getBoundingClientRect(),i,r;t.type==="mousemove"?(i=t.clientX-e.left,r=t.clientY-e.top):(i=t.touches[0].clientX-e.left,r=t.touches[0].clientY-e.top),this.isFreehandDrawing&&(this.upperContext.fillStyle=this.parent.activeObj.strokeSettings.strokeColor,this.parent.isMaskImage&&(this.upperContext.globalCompositeOperation="xor"),this.processPoint(i,r,!1,this.upperContext))},o.prototype.processPoint=function(t,e,i,r){var n=this.parent,s=this.point(t,e,new Date().getTime());s=n.points.length>0&&n.points[n.points.length-1];var a=s?this.distanceTo(s)<=5:!1,l,h,c,u;if(this.selPoints.push({x:t,y:e,ratioX:(t-n.img.destLeft)/n.img.destWidth,ratioY:(e-n.img.destTop)/n.img.destHeight,time:this.fhdObj.time}),!s||!(s&&a)||i){if(this.fhdObj.time=new Date().getTime(),n.points.push({x:t,y:e,ratioX:(t-n.img.destLeft)/n.img.destWidth,ratioY:(e-n.img.destTop)/n.img.destHeight,time:this.fhdObj.time}),this.dummyPoints.push({x:t,y:e,ratioX:(t-n.img.destLeft)/n.img.destWidth,ratioY:(e-n.img.destTop)/n.img.destHeight,time:this.fhdObj.time}),this.dummyPoints.length>2){this.dummyPoints.length===3&&this.dummyPoints.unshift(this.dummyPoints[0]);var p=this.dummyPoints[0],f=this.dummyPoints[1],g=this.dummyPoints[2],v=this.dummyPoints[3];l=this.calcCurveCP(p,f,g).controlPoint2,h=this.calcCurveCP(f,g,v).controlPoint1,c=this.dummyPoints[1],u=this.dummyPoints[2];var y=.5,C=5;d(this.penStrokeWidth)||(y=C=this.penStrokeWidth),this.startDraw(r,l,h,c,u,y,C),this.pointCounter++,this.dummyPoints.shift()}if(i){l=h=c=u={x:t,y:e,time:new Date().getTime()};var y=.5,C=5;d(this.penStrokeWidth)||(y=C=this.penStrokeWidth),this.startDraw(r,l,h,c,u,y,C)}}},o.prototype.calcCurveCP=function(t,e,i){e||(e=t),i||(i=e);var r=t.x-e.x,n=t.y-e.y,s=e.x-i.x,a=e.y-i.y,l={x:(t.x+e.x)/2,y:(t.y+e.y)/2},h={x:(e.x+i.x)/2,y:(e.y+i.y)/2},c=Math.sqrt(r*r+n*n),u=Math.sqrt(s*s+a*a),p=l.x-h.x,f=l.y-h.y,g=u/(c+u),v={x:h.x+p*g,y:h.y+f*g},y=e.x-v.x,C=e.y-v.y;return{controlPoint1:this.point(l.x+y,l.y+C,0),controlPoint2:this.point(h.x+y,h.y+C,0)}},o.prototype.point=function(t,e,i){return this.fhdObj.pointX=t,this.fhdObj.pointY=e,{x:this.fhdObj.pointX,y:this.fhdObj.pointY,time:i}},o.prototype.startDraw=function(t,e,i,r,n,s,a){var l;l=this.pointVelocity(r),l=.7*l+(1-.7)*this.fhdObj.lastVelocity;var h=Math.max(a/(.7+1),s);this.drawCurve(this.fhdObj.time,h,t,e,i,r,n,a),this.fhdObj.lastVelocity=l,this.fhdObj.time=h},o.prototype.pointVelocity=function(t){return this.fhdObj.time!==t.time?this.distanceTo(t)/(this.fhdObj.time-t.time):0},o.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.fhdObj.pointX-t.x,2)+Math.pow(this.fhdObj.pointY-t.y,2))},o.prototype.drawCurve=function(t,e,i,r,n,s,a,l){var h,c,u,p,f,g,v,y,C,b,M=e-t,S=this.bezierLength(r,n,s,a),N=Math.ceil(S)*2;for(i.beginPath(),c=0;c<N;c++)u=c/N,p=u*u,f=p*u,g=1-u,v=g*g,y=v*g,C=y*s.x,C+=3*v*u*r.x,C+=3*g*p*n.x,C+=f*a.x,b=y*s.y,b+=3*v*u*r.y,b+=3*g*p*n.y,b+=f*a.y,h=Math.min(t+f*M,l),this.drawArc(C,b,h,i);i.closePath(),i.fill()},o.prototype.bezierLength=function(t,e,i,r){var n=10,s=0,a,l,h,c,u,p,f,g;for(a=0;a<=n;a++)l=a/n,h=this.bezierPoint(l,i.x,t.x,e.x,r.x),c=this.bezierPoint(l,i.y,t.y,e.y,r.y),a>0&&(f=h-u,g=c-p,s+=Math.sqrt(f*f+g*g)),u=h,p=c;return s},o.prototype.bezierPoint=function(t,e,i,r,n){return e*(1-t)*(1-t)*(1-t)+3*i*(1-t)*(1-t)*t+3*r*(1-t)*t*t+n*t*t*t},o.prototype.drawArc=function(t,e,i,r){var n=this.parent.img;(t>n.destLeft&&e>n.destTop&&t<n.destLeft+n.destWidth&&e<n.destTop+n.destHeight||r!==this.lowerContext&&r!==this.upperContext)&&(r.moveTo(t,e),r.arc(t,e,i,0,2*Math.PI,!1))},o.prototype.freehandRedraw=function(t,e){var i=this.parent,r=t.filter;if(t.filter="none",e&&(i.pointColl[i.freehandCounter]={points:e,strokeColor:i.activeObj.strokeSettings.strokeColor,strokeWidth:this.penStrokeWidth,flipState:i.transform.currFlipState,id:"pen_"+(i.freehandCounter+1),order:i.objColl.length+i.freehandCounter+1},this.selPointColl[i.freehandCounter]=m({},i.pointColl[i.freehandCounter],{},!0),i.freehandCounter++),i.freehandCounter>0){for(var n=0;n<i.freehandCounter;n++){i.points=m([],i.pointColl[n].points),this.pointCounter=0;var s=i.points.length,a=void 0,l=void 0,h=void 0,c=void 0,u=void 0,p=void 0;s>0&&(t.fillStyle=i.pointColl[n].strokeColor,u=p=this.penStrokeWidth=i.pointColl[n].strokeWidth),s===1&&(a=l=h=c=i.points[0],this.startDraw(t,a,l,h,c,u,p));for(var f=0;f<s-3;f++)i.points[f+1]&&i.points[f+2]&&i.points[f+2]&&(a=this.calcCurveCP(i.points[f+0],i.points[f+1],i.points[f+2]).controlPoint2,l=this.calcCurveCP(i.points[f+1],i.points[f+2],i.points[f+3]).controlPoint1,f===0?h=i.points[f]:h=i.points[f+1],c=i.points[f+2],this.startDraw(t,a,l,h,c,u,p));t.closePath()}t===this.lowerContext&&(i.notify("draw",{prop:"applyFrame",value:{ctx:this.lowerContext,frame:i.frameObj.type,preventImg:!0}}),this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height))}t.filter=r},o.prototype.getSqPtFD=function(t,e){var i={startX:0,startY:0,endX:0,endY:0,width:0,height:0},r=m([],this.selPointColl[t].points,[]);this.parent.points=m([],this.parent.pointColl[t].points),this.pointCounter=0;for(var n=r.length,s=0;s<n;s++)i.startX===0&&i.startY===0&&i.endX===0&&i.endY===0?(i.startX=r[s].x,i.startY=r[s].y,i.endX=r[s].x,i.endY=r[s].y):(i.startX=Math.min(i.startX,r[s].x),i.startY=Math.min(i.startY,r[s].y),i.endX=Math.max(i.endX,r[s].x),i.endY=Math.max(i.endY,r[s].y));return i.startX-=this.penStrokeWidth,i.startY-=this.penStrokeWidth,i.endX+=this.penStrokeWidth,i.endY+=this.penStrokeWidth,i.width=i.endX-i.startX,i.height=i.endY-i.startY,e&&(e.activePoint=i),i},o.prototype.applyPenDraw=function(){var t=this.parent;t.currObjType.shape==="freehanddraw"&&(t.notify("shape",{prop:"apply",onPropertyChange:!1,value:{shape:null,obj:null,canvas:null}}),t.upperCanvas.style.cursor=t.cursor="default",t.currObjType.shape=""),t.notify("shape",{prop:"clearActObj"})},o.prototype.applyFhd=function(){var t=this.parent,e=t.pointColl[this.fhdSelIdx];e.strokeColor==="#42a5f5"&&(e.strokeColor=this.tempFHDStyles.strokeColor),t.notify("toolbar",{prop:"setSelectedFreehandColor",value:{color:"#42a5f5"}}),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),this.lowerContext.clearRect(0,0,t.lowerCanvas.width,t.lowerCanvas.height),t.notify("draw",{prop:"render-image",value:{isMouseWheel:null}}),t.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1}),e&&(e.isSelected=!1),t.notify("selection",{prop:"resetFreehandDrawVariables"}),this.fhdHovIdx=this.fhdSelIdx=null},o.prototype.cancelFhd=function(){var t=this.parent,e=t.pointColl[this.fhdSelIdx];t.notify("toolbar",{prop:"setSelectedFreehandColor",value:{color:"#42a5f5"}}),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),this.lowerContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),this.pointCounter=0,e&&(e.strokeColor=this.tempFHDStyles.strokeColor,e.strokeWidth=this.tempFHDStyles.strokeWidth,e.isSelected=!1),this.fhdHovIdx=this.fhdSelIdx=this.fhdSelID=null,t.notify("selection",{prop:"resetFreehandDrawVariables"}),t.activeObj.strokeSettings.strokeColor=this.tempFHDStyles.strokeColor,t.activeObj.strokeSettings.strokeWidth=this.penStrokeWidth=this.tempFHDStyles.strokeWidth,this.tempFHDStyles={strokeColor:null,strokeWidth:null,fillColor:null},t.notify("draw",{prop:"render-image",value:{isMouseWheel:null}}),t.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1})},o.prototype.selectFhd=function(t){var e=this.parent,i=m({},this.tempFHDStyles,{},!0);if(e.notify("selection",{prop:"setFreehandDrawEditing",onPropertyChange:!1,value:{bool:!0}}),t||t===0)if(this.isFHDIdx(t))this.fhdSelIdx=this.fhdHovIdx=t,this.hoverFhd(),e.upperCanvas.style.cursor=e.cursor="pointer";else return;this.fhdSelIdx=this.fhdHovIdx;var r=e.pointColl[this.fhdSelIdx];r.isSelected=!0,this.fhdSelID=r.id,r.strokeColor!=="#42a5f5"&&(e.activeObj.strokeSettings.strokeColor=this.tempFHDStyles.strokeColor=r.strokeColor),e.activeObj.strokeSettings.strokeWidth=this.tempFHDStyles.strokeWidth=e.pointColl[this.fhdHovIdx].strokeWidth;var n={bool:!1};if(e.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:n}}),n.bool){var s={id:"pen_"+(this.fhdSelIdx+1),type:xi.FreehandDraw,startX:r.points[0].x,startY:r.points[0].y,strokeColor:r.strokeColor,strokeWidth:r.strokeWidth,points:r.points,opacity:r.opacity,index:r.order},a={cancel:!1,action:"select",previousShapeSettings:s,currentShapeSettings:s};this.triggerShapeChanging(a)}else e.okBtn(null,!0);e.isUndoRedoStack&&(this.tempFHDStyles=i)},o.prototype.deleteFhd=function(t,e){var i=this.parent;if(this.isFHDIdx(t)){this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height);var r=m({},i.pointColl,{},!0),n=m({},this.selPointColl,{},!0);i.pointColl={},this.selPointColl={};for(var s=0,a=0;a<i.freehandCounter;a++)parseInt(r[a].id.split("_")[1],10)-1!==t&&(i.pointColl[s]=r[a],this.selPointColl[s]=n[a],s++);i.freehandCounter-=1,this.fhdHovIdx=this.fhdSelIdx=null,i.notify("selection",{prop:"resetFreehandDrawVariables"}),i.notify("draw",{prop:"render-image",value:{isMouseWheel:null}}),i.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1})}},o.prototype.zoomX=function(t){return t*this.parent.img.destWidth+this.parent.img.destLeft},o.prototype.zoomY=function(t){return t*this.parent.img.destHeight+this.parent.img.destTop},o.prototype.zoomFHDColl=function(t){var e=this.parent,i={startX:e.img.destLeft,startY:e.img.destTop,width:e.img.destWidth,height:e.img.destHeight};e.notify("shape",{prop:"straightenShapes",onPropertyChange:!1});for(var r=0;r<e.freehandCounter;r++){e.points=m([],e.pointColl[r].points,[]),this.pointCounter=0;for(var n=e.points.length,s=0;s<n;s++){var a=e.points[s];a.x=this.zoomX(a.ratioX),a.y=this.zoomY(a.ratioY)}}this.updateFHDCurPts(),this.straightenPoint.x&&this.straightenPoint.y&&(this.straightenPoint.x=this.zoomX(this.straightenPoint.ratioX),this.straightenPoint.y=this.zoomY(this.straightenPoint.ratioY)),e.transform.straighten!==0&&e.notify("shape",{prop:"straightenFHD",onPropertyChange:!1}),e.img.destLeft=i.startX,e.img.destTop=i.startY,e.img.destWidth=i.width,e.img.destHeight=i.height,d(t)&&this.freehandRedraw(this.lowerContext,null)},o.prototype.updateFHDCurPts=function(){for(var t=this.parent,e=0;e<t.freehandCounter;e++)if(this.selPointColl[e]){this.selPoints=m([],this.selPointColl[e].points,[]),this.pointCounter=0;for(var i=this.selPoints.length,r=0;r<i;r++){var n=this.selPoints[r];n.x=this.zoomX(n.ratioX),n.y=this.zoomY(n.ratioY)}}},o.prototype.rotateFhdColl=function(){for(var t=this.parent,e=t.img,i=e.destLeft,r=e.destTop,n=e.destWidth,s=e.destHeight,a=0;a<t.freehandCounter;a++){t.points=m([],t.pointColl[a].points,[]),this.pointCounter=0;for(var l=t.points.length,h=0;h<l;h++){var c=t.points[h];c.y=r+s*c.ratioX,c.x=i+n-n*c.ratioY,c.ratioX=(c.x-i)/n,c.ratioY=(c.y-r)/s}}for(var a=0;a<t.freehandCounter;a++)if(this.selPointColl[a]){this.selPoints=m([],this.selPointColl[a].points,[]),this.pointCounter=0;for(var l=this.selPoints.length,h=0;h<l;h++){var c=this.selPoints[h];c.y=r+s*c.ratioX,c.x=i+n-n*c.ratioY,c.ratioX=(c.x-i)/n,c.ratioY=(c.y-r)/s}}this.updateFHDCurPts()},o.prototype.flipFHDColl=function(t){var e=t.toLowerCase();if(e==="horizontal")this.pointsHorizontalFlip();else if(e==="vertical")this.pointsVerticalFlip();else{this.pointsHorizontalFlip();for(var i=0;i<this.parent.freehandCounter;i++)this.parent.pointColl[i].shapeFlip="";this.pointsVerticalFlip()}},o.prototype.pointsHorizontalFlip=function(){for(var t=this.parent,e=t.img,i=e.destLeft,r=e.destTop,n=e.destWidth,s=e.destHeight,a=0;a<t.freehandCounter;a++)if(t.pointColl[a].shapeFlip!==t.transform.currFlipState){t.points=m([],t.pointColl[a].points,[]),this.pointCounter=0;for(var l=t.points.length,h=0;h<l;h++){var c=t.points[h];c.x<=i+n/2?c.x=i+n-(c.x-i):c.x>=i+n/2&&(c.x=i+(i+n-c.x)),c.ratioX=(c.x-i)/n,c.ratioY=(c.y-r)/s}t.pointColl[a].shapeFlip=t.transform.currFlipState}for(var a=0;a<t.freehandCounter;a++)if(this.selPointColl[a]&&this.selPointColl[a].shapeFlip!==t.transform.currFlipState){this.selPoints=m([],this.selPointColl[a].points,[]),this.pointCounter=0;for(var l=this.selPoints.length,h=0;h<l;h++){var c=this.selPoints[h];c.x<=i+n/2?c.x=i+n-(c.x-i):c.x>=i+n/2&&(c.x=i+(i+n-c.x)),c.ratioX=(c.x-i)/n,c.ratioY=(c.y-r)/s}}this.updateFHDCurPts()},o.prototype.pointsVerticalFlip=function(){for(var t=this.parent,e=t.img,i=e.destLeft,r=e.destTop,n=e.destWidth,s=e.destHeight,a=0;a<t.freehandCounter;a++)if(t.pointColl[a].shapeFlip!==t.transform.currFlipState){t.points=m([],t.pointColl[a].points,[]),this.pointCounter=0;for(var l=t.points.length,h=0;h<l;h++){var c=t.points[h];c.y<=r+s/2?c.y=r+s-(c.y-r):c.y>=r+s/2&&(c.y=r+(r+s-c.y)),c.ratioX=(c.x-i)/n,c.ratioY=(c.y-r)/s}t.pointColl[a].shapeFlip=t.transform.currFlipState}for(var a=0;a<t.freehandCounter;a++)if(this.selPointColl[a]&&this.selPointColl[a].shapeFlip!==t.transform.currFlipState){this.selPoints=m([],this.selPointColl[a].points,[]),this.pointCounter=0;for(var l=this.selPoints.length,h=0;h<l;h++){var c=this.selPoints[h];c.y<=r+s/2?c.y=r+s-(c.y-r):c.y>=r+s/2&&(c.y=r+(r+s-c.y)),c.ratioX=(c.x-i)/n,c.ratioY=(c.y-r)/s}}this.updateFHDCurPts()},o.prototype.updateFHDColl=function(t){var e=this.parent,i={startX:e.img.destLeft,startY:e.img.destTop,width:e.img.destWidth,height:e.img.destHeight};e.notify("shape",{prop:"straightenShapes",onPropertyChange:!1});for(var r=e.img,n=r.destLeft,s=r.destTop,a=r.destWidth,l=r.destHeight,h=0,c=e.objColl.length;h<c;h++){var u=e.objColl[h];if(u.shape==="line"||u.shape==="arrow")e.notify("shape",{prop:"straightenShapePoints",value:{obj:u,isReverse:!0}});else if(u.shape==="path"){var p=e.transform.straighten;e.transform.straighten=-e.transform.straighten,e.notify("shape",{prop:"straightenPath",onPropertyChange:!1,value:{obj:u}}),e.transform.straighten=p}if(u.imageRatio={startX:(u.activePoint.startX-n)/a,startY:(u.activePoint.startY-s)/l,endX:(u.activePoint.endX-n)/a,endY:(u.activePoint.endY-s)/l,width:a/u.activePoint.width,height:l/u.activePoint.height},u.shape==="path")for(var f=0,g=u.pointColl.length;f<g;f++)u.pointColl[f].ratioX=(u.pointColl[f].x-n)/a,u.pointColl[f].ratioY=(u.pointColl[f].y-s)/l;e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1})}if(e.freehandCounter>0&&e.transform.straighten!==0){var p=e.transform.straighten;e.transform.straighten=-e.transform.straighten,e.notify("shape",{prop:"straightenFHD",onPropertyChange:!1}),e.transform.straighten=p}for(var v=0;v<e.freehandCounter;v++){e.points=m([],e.pointColl[v].points,[]),this.pointCounter=0;for(var y=e.points.length,C=0;C<y;C++){var b=e.points[C];b.ratioX=(b.x-n)/a,b.ratioY=(b.y-s)/l}}for(var v=0;v<e.freehandCounter;v++)if(this.selPointColl[v]){this.selPoints=m([],this.selPointColl[v].points,[]),this.pointCounter=0;for(var y=this.selPoints.length,C=0;C<y;C++){var b=this.selPoints[C];b.ratioX=(b.x-n)/a,b.ratioY=(b.y-s)/l}}this.straightenPoint.x&&this.straightenPoint.y&&(this.straightenPoint.ratioX=(this.straightenPoint.x-n)/a,this.straightenPoint.ratioY=(this.straightenPoint.y-s)/l),e.img.destLeft=i.startX,e.img.destTop=i.startY,e.img.destWidth=i.width,e.img.destHeight=i.height,e.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:t}})},o.prototype.panFHDColl=function(t,e,i){for(var r=this.parent,n=0;n<r.freehandCounter;n++){r.points=m([],r.pointColl[n].points,[]),this.pointCounter=0;for(var s=r.points.length,a=0;a<s;a++){var l=r.points[a];i===""||i==="vertical"?l.x+=t:l.x-=t,i===""||i==="horizontal"?l.y+=e:l.y-=e}}for(var n=0;n<r.freehandCounter;n++)if(this.selPointColl[n]){this.selPoints=m([],this.selPointColl[n].points,[]),this.pointCounter=0;for(var s=this.selPoints.length,a=0;a<s;a++){var l=this.selPoints[a];i===""||i==="vertical"?l.x+=t:l.x-=t,i===""||i==="horizontal"?l.y+=e:l.y-=e}}this.straightenPoint.x&&this.straightenPoint.y&&(i===""||i==="vertical"?this.straightenPoint.x+=t:this.straightenPoint.x-=t,i===""||i==="horizontal"?this.straightenPoint.y+=e:this.straightenPoint.y-=e),this.freehandRedraw(this.lowerContext,null)},o.prototype.freeHandDraw=function(t){var e=this.parent;if(t){if(e.points=[],this.dummyPoints=[],e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),e.togglePen=!0,e.upperCanvas.style.cursor=e.cursor="crosshair",e.upperCanvas.style.display="block",d(e.activeObj.strokeSettings)){var i={strokeSettings:{}};e.notify("shape",{prop:"getStrokeSettings",onPropertyChange:!1,value:{obj:i}}),e.activeObj.strokeSettings=i.strokeSettings}d(e.activeObj.strokeSettings.strokeWidth)&&(e.activeObj.strokeSettings.strokeWidth=2),e.isMaskImage?e.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1}):e.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"pen",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}})}else{e.upperCanvas.style.cursor=e.cursor="default";var r=this.penStrokeWidth;e.notify("shape",{prop:"apply",onPropertyChange:!1,value:{shape:null,obj:null,canvas:null}}),e.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1}),e.notify("toolbar",{prop:"setCurrentToolbar",value:{type:"main"}}),e.notify("selection",{prop:"setFreehandDrawCustomized",value:{isFreehandDrawCustomized:!1}}),this.penStrokeWidth=r}},o.prototype.isFHDIdx=function(t,e){for(var i=!1,r=0;r<this.parent.freehandCounter;r++)if(this.parent.pointColl[r].id&&parseInt(this.parent.pointColl[r].id.split("_")[1],10)-1===t){i=!0;break}return e&&(e.isIndex=i),i},o.prototype.updateCropPtsForSel=function(){for(var t=this.parent,e=t.activeObj.activePoint,i=0;i<t.freehandCounter;i++){var r={selPointColl:m([],this.selPointColl)};if(r.selPointColl[i]){this.selPoints=m([],r.selPointColl[i].points,[]),this.pointCounter=0;for(var n=this.selPoints.length,s=0;s<n;s++){var a=this.selPoints[s];a.ratioX=(a.x-e.startX)/e.width,a.ratioY=(a.y-e.startY)/e.height}}}},o.prototype.triggerShapeChanging=function(t){var e=this.parent,i=e.pointColl[this.fhdSelIdx];if(e.trigger("shapeChanging",t),e.element.getAttribute("data-value")==="mask-drawing"&&!this.isMasking){this.isMasking=!0,e.upperCanvas.style.cursor="crosshair",e.notify("draw",{prop:"updateTempObjColl"}),e.notify("draw",{prop:"updateTempPointColl"}),e.discard(),e.selectMaskImage();return}if(e.editCompleteArgs=t,t.currentShapeSettings.id.indexOf("pen_")===-1&&(t.action==="draw-end"||t.action==="select")){var r="pen_"+t.currentShapeSettings.id;this.fhdSelIdx?e.pointColl[this.fhdSelIdx].id=r:e.pointColl[e.freehandCounter-1].id=r}this.penStrokeWidth=t.currentShapeSettings.strokeWidth,e.activeObj.strokeSettings.strokeColor!==t.currentShapeSettings.strokeColor&&(e.activeObj.strokeSettings.strokeColor=t.currentShapeSettings.strokeColor,e.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1})),this.fhdSelID&&i&&t.currentShapeSettings&&(i.strokeColor=t.currentShapeSettings.strokeColor,i.strokeWidth=t.currentShapeSettings.strokeWidth,i.points=t.currentShapeSettings.points,i.opacity=t.currentShapeSettings.opacity),t.action==="select"&&(this.freehandRedraw(this.upperContext),e.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"pen",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}))},o.prototype.setCenterSelPoints=function(){var t=this.parent,e={startX:t.img.destLeft,startY:t.img.destTop,width:t.img.destWidth,height:t.img.destHeight};t.notify("shape",{prop:"straightenShapes",onPropertyChange:!1});var i=t.img,r=i.destLeft,n=i.destTop,s=i.destWidth,a=i.destHeight,l=t.activeObj.activePoint;(d(this.prevStraightenObj)||JSON.stringify(this.prevStraightenObj.activePoint)!==JSON.stringify(l))&&(this.straightenPoint={x:l.startX+l.width/2,y:l.startY+l.height/2,ratioX:(l.startX+l.width/2-r)/s,ratioY:(l.startY+l.height/2-n)/a},this.prevStraightenObj=m({},t.activeObj,{},!0),this.straightenPointAngle=t.transform.straighten),t.img.destLeft=e.startX,t.img.destTop=e.startY,t.img.destWidth=e.width,t.img.destHeight=e.height},o}(),qD=function(){function o(t){this.diffPoint={x:0,y:0},this.oldPoint={},this.isTouch=!1,this.isObjSelected=!1,this.isFhdPoint=!1,this.dragPoint={startX:0,startY:0,endX:0,endY:0},this.isShapeInserted=!1,this.tempActiveObj={activePoint:{startX:0,startY:0,endX:0,endY:0,width:0,height:0},flipObjColl:[],triangle:[],triangleRatio:[],order:null},this.isFirstMove=!1,this.startTouches=[],this.tempTouches=[],this.currMousePoint={x:0,y:0},this.cursorTargetId="",this.isPreventDragging=!1,this.dragElement="",this.textRow=1,this.mouseDownPoint={x:0,y:0},this.previousPoint={x:0,y:0},this.zoomType="Toolbar",this.isInitialTextEdited=!1,this.dragCanvas=!1,this.isFhdCustomized=!1,this.touchEndPoint={},this.isFhdEditing=!1,this.currentDrawingShape="",this.initialPrevObj={},this.touchTime=0,this.resizedElement="",this.isImageClarity=!0,this.isPinching=!1,this.isSliding=!1,this.mouseDown="",this.isSliderActive=!1,this.arrowShape=[fo.None,fo.SolidArrow],this.isTouchDblClick=!1,this.isMouseDown=!1,this.isMouseUp=!1,this.mouseWheel=0,this.isTransformedShape=!1,this.parent=t,this.addEventListener()}return o.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},o.prototype.addEventListener=function(){this.parent.on("selection",this.selection,this),this.parent.on("destroyed",this.destroy,this)},o.prototype.removeEventListener=function(){this.parent.off("selection",this.selection),this.parent.off("destroyed",this.destroy)},o.prototype.selection=function(t){var e=this.parent;switch(this.updatePrivateVariables(),t.prop){case"setCursor":this.setCursor(t.value.x,t.value.y);break;case"updateActivePoint":this.updateActivePoint(t.value.x,t.value.y,t.value.isCropSelection);break;case"updateCursorStyles":this.updateCursorStyles(t.value.x,t.value.y,t.value.type);break;case"setTextSelection":this.setTextSelection(t.value.width,t.value.height);break;case"setActivePoint":this.setActivePoint(t.value.startX,t.value.startY);break;case"clearSelection":this.clearSelection(t.value.resetCrop);break;case"calcShapeRatio":this.calcShapeRatio(t.value.x,t.value.y,t.value.imgWidth,t.value.imgHeight);break;case"tab":this.performTabAction();break;case"setDragDirection":this.setDragDirection(t.value.width,t.value.height);break;case"clearUpperCanvas":this.isTouch&&setTimeout(function(){e.upperCanvas.getContext("2d").clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height)},550);break;case"resetFreehandDrawVariables":this.isFhdEditing=this.isFhdPoint=!1;break;case"isShapeInserted":this.isShapeInserted=t.value.bool;break;case"redrawShape":this.redrawShape(t.value.obj);break;case"setTextBoxStylesToActObj":this.setTextBoxStylesToActObj();break;case"mouseDownEventHandler":this.mouseDownEventHandler(t.value.e);break;case"mouseMoveEventHandler":this.mouseMoveEventHandler(t.value.e);break;case"mouseUpEventHandler":this.mouseUpEventHandler(t.value.e);break;case"canvasMouseDownHandler":this.canvasMouseDownHandler(t.value.e);break;case"canvasMouseMoveHandler":this.canvasMouseMoveHandler(t.value.e);break;case"canvasMouseUpHandler":this.canvasMouseUpHandler(t.value.e);break;case"touchStartHandler":this.touchStartHandler(t.value.e);break;case"keyDownEventHandler":this.keyDownEventHandler(t.value.e);break;case"handleScroll":this.handleScroll(t.value.e);break;case"textKeyDown":setTimeout(this.textKeyDown.bind(this),1,t.value.e);break;case"deleteItem":this.deleteItem();break;case"updatePrevShapeSettings":this.updatePrevShapeSettings(t.value.obj);break;case"getZoomType":t.value.obj.zoomType=this.zoomType;break;case"setZoomType":this.zoomType=t.value.zoomType;break;case"setInitialTextEdit":this.isInitialTextEdited=t.value.bool;break;case"setDragCanvas":this.dragCanvas=t.value.bool;break;case"setFreehandDrawCustomized":this.isFhdCustomized=t.value.isFreehandDrawCustomized;break;case"setTouchEndPoint":this.touchEndPoint.x=t.value.x,this.touchEndPoint.y=t.value.y;break;case"getPanDown":t.value.obj.panDown=this.panDown;break;case"setPanDown":this.panDown=t.value.panDown;break;case"getFreehandDrawEditing":t.value.obj.bool=this.isFhdEditing;break;case"setFreehandDrawEditing":this.isFhdEditing=t.value.bool;break;case"getTempActObj":t.value.obj.tempObj=this.tempActiveObj;break;case"setTempActObj":this.tempActiveObj=t.value.obj;break;case"isInside":this.isInside(t.value.x,t.value.y,t.value.z1,t.value.z2,t.value.z3,t.value.z4);break;case"setDragElement":this.dragElement=t.value.value;break;case"setObjSelected":this.isObjSelected=t.value.bool;break;case"adjustActObjForLineArrow":this.adjustActObjForLineArrow(t.value.obj);break;case"findTarget":this.findTarget(t.value.x,t.value.y,t.value.type);break;case"getCurrentFlipState":this.getCurrentFlipState();break;case"setDragWidth":this.setDragWidth(t.value.width);break;case"setDragHeight":this.setDragHeight(t.value.setDragHeight);break;case"annotate":this.currentDrawingShape=t.value.shape,t.value.shape==="text"?(e.activeObj.textSettings.fontSize=11,e.activeObj.keyHistory="Enter Text",e.notify("shape",{prop:"initializeTextShape",onPropertyChange:!1,value:{text:null,fontFamily:null,fontSize:null,bold:null,italic:null,strokeColor:null}})):t.value.shape==="path"&&(e.activeObj.pointColl=[]);break;case"getCurrentDrawingShape":t.value.obj.shape=this.currentDrawingShape;break;case"setCurrentDrawingShape":this.currentDrawingShape=t.value.value;break;case"getTransRotationPoint":this.getTransRotationPoint(t.value.obj,t.value.object);break;case"adjustNEPoints":this.adjustNEPoints(t.value.rectangle,t.value.x,t.value.y,t.value.angle);break;case"adjustRotationPoints":this.adjustRotationPoints(t.value.rectangle,t.value.x,t.value.y,t.value.angle,t.value.type,t.value.elem);break;case"getResizeDirection":this.getResizeDirection(t.value.rectangle,t.value.x,t.value.y,t.value.angle);break;case"setResizedElement":this.resizedElement=t.value.value;break;case"reset":this.reset();break;case"unWireEvent":this.unwireEvent();break;case"updPtCollForShpRot":this.updPtCollForShpRot(t.value.obj);break;case"findImageRatio":this.findImageRatio(t.value.width,t.value.height,t.value.obj);break;case"getNumTextValue":this.getNumTextValue(t.value.obj);break;case"setImageClarity":this.isImageClarity=t.value.bool;break;case"upgradeImageQuality":this.upgradeImageQuality();break;case"triggerShapeChange":this.triggerShapeChange(t.value.shapeResizingArgs,t.value.shapeMovingArgs,t.value.type);break;case"applyTransformToImg":this.applyTransformToImg(t.value.ctx);break;case"findTargetObj":t.value.obj.bool=this.findTargetObj(t.value.x,t.value.y,t.value.isCrop);break;case"setSliding":this.isSliding=t.value.bool;break;case"setSliderActive":this.isSliderActive=t.value.bool;break;case"getArrowType":t.value.obj.type=this.getArrowType(t.value.type);break;case"setArrowShape":t.value.type==="initial"?this.arrowShape[0]=t.value.shape:this.arrowShape[1]=t.value.shape;break;case"updateNWPoints":this.updateNWPoints(t.value.x,t.value.y);break;case"updateNPoints":this.updateNPoints(t.value.x,t.value.y);break;case"updateNEPoints":this.updateNEPoints(t.value.x,t.value.y);break;case"updateWPoints":this.updateWPoints(t.value.x,t.value.y);break;case"updateEPoints":this.updateEPoints(t.value.x,t.value.y);break;case"updateSWPoints":this.updateSWPoints(t.value.x,t.value.y);break;case"updateSPoints":this.updateSPoints(t.value.x,t.value.y);break;case"updateSEPoints":this.updateSEPoints(t.value.x,t.value.y);break;case"drawMaskCircle":this.drawMaskCircle(t.value.x,t.value.y);break;case"isValueUpdated":this.isValueUpdated();break;case"getDistance":this.getDistance(t.value.x,t.value.y);break;case"redact":this.currentDrawingShape=t.value.shape;break;case"updateTransColl":t.value.obj.coll=this.updateTransColl(t.value.object);break;case"getTransformedShape":t.value.obj.bool=this.isTransformedShape;break;case"setTransformedShape":this.isTransformedShape=t.value.bool;break;case"rgbToHex":this.rgbToHex(t.value.r,t.value.g,t.value.b,t.value.a);break;case"padLeft":this.padLeft(t.value.value,t.value.length,t.value.padChar);break;case"setTimer":this.setTimer(t.value.e);break;case"targetTouches":t.value.output=this.targetTouches(t.value.touches);break;case"calculateScale":t.value.output=this.calculateScale(t.value.startTouches,t.value.endTouches);break;case"beforeSaveEvent":this.beforeSaveEvent(t.value.args,t.value.e);break;case"isKeyBoardCrop":t.value.output=this.isKeyBoardCrop(t.value.e);break;case"focusRatioBtn":this.focusRatioBtn();break;case"performEnterAction":this.performEnterAction(t.value.e);break;case"getImagePoints":t.value.output=this.getImagePoints(t.value.x,t.value.y);break;case"revertPoints":this.revertPoints(t.value.actPoint,t.value.tempActiveObj);break;case"performNWResize":this.performNWResize(t.value.x,t.value.y,t.value.tempActiveObj,t.value.actPoint);break;case"performSEResize":this.performSEResize(t.value.x,t.value.y,t.value.tempActiveObj,t.value.actPoint);break;case"isMouseOutsideImg":t.value.output=this.isMouseOutsideImg(t.value.x,t.value.y);break}},o.prototype.getModuleName=function(){return"selection"},o.prototype.updatePrivateVariables=function(){var t=this.parent;t.lowerCanvas&&(this.lowerContext=t.lowerCanvas.getContext("2d")),t.upperCanvas&&(this.upperContext=t.upperCanvas.getContext("2d"))},o.prototype.reset=function(){this.diffPoint={x:0,y:0},this.oldPoint={},this.isTouch=this.isObjSelected=this.isFhdPoint=this.isShapeInserted=!1,this.dragPoint={startX:0,startY:0,endX:0,endY:0},this.tempActiveObj={activePoint:{startX:0,startY:0,endX:0,endY:0,width:0,height:0},flipObjColl:[],triangle:[],triangleRatio:[],order:null},this.isFirstMove=!1,this.cursorTargetId=this.dragElement="",this.isTouchDblClick=!1,this.startTouches=[],this.tempTouches=[],this.currMousePoint={x:0,y:0},this.isPreventDragging=!1,this.timer=void 0,this.tempObjColl=void 0,this.mouseWheel=0,this.textRow=1,this.mouseDownPoint={x:0,y:0},this.previousPoint={x:0,y:0},this.zoomType="Toolbar",this.isInitialTextEdited=!1,this.dragCanvas=this.isPinching=!1,this.isFhdCustomized=!1,this.touchEndPoint={},this.panDown=null,this.isSliding=!1,this.isFhdEditing=!1,this.pathAdjustedIndex=null,this.touchTime=0,this.isImageClarity=!0,this.currentDrawingShape="",this.initialPrevObj={},this.resizedElement="",this.mouseDown="",this.isSliderActive=!1,this.arrowShape=[fo.None,fo.SolidArrow],this.isMouseDown=this.isMouseUp=this.isTransformedShape=!1},o.prototype.performTabAction=function(){var t=this.parent;if(t.textArea.style.display==="block"||t.textArea.style.display==="inline-block"){var e=this.applyCurrShape(!1);t.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}}),e&&t.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}})}t.isKBDNavigation=!0},o.prototype.selMouseUpEvent=function(){this.oldPoint.x=void 0,this.oldPoint.y=void 0},o.prototype.getMouseCursor=function(t,e,i,r,n){var s=this.getTransRotationPoint(t),a=t.bottomCenterCircle.radius,l="default",h=n?0:t.topLeftCircle.radius*2;return e>=t.topLeftCircle.startX-h&&e<=t.topLeftCircle.startX+h&&i>=t.topLeftCircle.startY-h&&i<=t.topLeftCircle.startY+h?l="nw-resize":e>=t.topLeftCircle.startX-h&&e<=t.topRightCircle.startX-h&&i>=t.topCenterCircle.startY-h&&i<=t.topCenterCircle.startY+h?l="n-resize":e>=t.topRightCircle.startX-h&&e<=t.topRightCircle.startX+h&&i>=t.topRightCircle.startY-h&&i<=t.topRightCircle.startY+h?l="ne-resize":e>=t.centerLeftCircle.startX-h&&e<=t.centerLeftCircle.startX+h&&i>=t.topLeftCircle.startY-h&&i<=t.bottomLeftCircle.startY-h?l="w-resize":e>=t.centerRightCircle.startX-h&&e<=t.centerRightCircle.startX+h&&i>=t.topRightCircle.startY-h&&i<=t.bottomRightCircle.startY-h?l="e-resize":e>=t.bottomLeftCircle.startX-h&&e<=t.bottomLeftCircle.startX+h&&i>=t.bottomLeftCircle.startY-h&&i<=t.bottomLeftCircle.startY+h?l="sw-resize":e>=t.bottomLeftCircle.startX-h&&e<=t.bottomRightCircle.startX-h&&i>=t.bottomCenterCircle.startY-h&&i<=t.bottomCenterCircle.startY+h?l="s-resize":e>=t.bottomRightCircle.startX-h&&e<=t.bottomRightCircle.startX+h&&i>=t.bottomRightCircle.startY-h&&i<=t.bottomRightCircle.startY+h?l="se-resize":e>=t.activePoint.startX&&e<=t.activePoint.endX&&i>=t.activePoint.startY&&i<=t.activePoint.endY?r?l="grab":l="move":s&&!n&&e>=s.x-(a+2)&&e<=s.x+(a+2)&&i>=s.y-(a+2)&&i<=s.y+(a+2)?l="grabbing":l="default",l},o.prototype.setCursor=function(t,e){var i=this.parent;i.upperCanvas.style.cursor=i.cursor="default";var r={bool:null};if(i.notify("toolbar",{prop:"getFrameToolbar",onPropertyChange:!1,value:{obj:r}}),i.isResize||this.isSliding||r.bool){i.upperCanvas.style.cursor="default";return}var n=!1,s;if(i.activeObj.shape&&(s=i.activeObj.shape.split("-")),(!s&&i.currObjType.isCustomCrop||s&&s[0]==="crop")&&(n=!0),i.currObjType.isDragging){this.dragElement===""?i.upperCanvas.style.cursor=i.cursor="move":i.upperCanvas.style.cursor=i.cursor=this.dragElement;return}if(i.togglePen){i.upperCanvas.style.cursor=i.cursor="crosshair",i.isMaskImage&&(this.drawMaskCircle(t,e),i.upperCanvas.style.cursor="none");return}if(i.activeObj.shape&&this.setCursorForActObj(s,n,t,e),i.cursor==="default"||i.cursor==="grab"){for(var a=this.getHighestOrder(),l=m([],i.shapeColl,[],!0),h=m([],i.objColl,[],!0),c=!1;a>0;){c=!1;for(var u=l.length-1;u>=0;u--)if(l[u].order===a)if(c=!0,l[u].id&&l[u].id.indexOf("pen")>-1){if(i.pointColl[0]&&(i.cursor!=="grab"||!n)&&!i.currObjType.isDragging&&!i.currObjType.isResize){var p=m([],i.points,[],!0);n||this.setCursorForFreehandDrawing(t,e,i.upperCanvas,l[u].id),i.points=p}}else{i.objColl=[],i.objColl.push(m({},l[u],null,!0));var f=i.upperCanvas.style.cursor;i.objColl.length>0&&(i.cursor!=="grab"||!n)&&this.setCursorFromObj(t,e,i.objColl,i.upperCanvas,n),f==="grab"&&i.cursor==="default"&&(i.upperCanvas.style.cursor=i.cursor="grab")}else d(l[u].order)&&(c=!0);if(i.cursor!=="default"&&i.cursor!=="grab")break;if(c)for(var g=!1;!g&&a>0;){for(var v=0;v<l.length;v++)if(l[v].order===a-1){g=!0;break}a--,g||a--}}i.objColl=h,(i.cursor==="default"||i.cursor==="grab")&&i.togglePan&&(i.lowerCanvas.style.cursor=i.upperCanvas.style.cursor=i.cursor="grab")}this.currentDrawingShape!==""&&(i.cursor==="default"||i.cursor==="grab")&&(i.upperCanvas.style.cursor=i.cursor="crosshair")},o.prototype.getHighestOrder=function(){for(var t=0,e=0;e<this.parent.shapeColl.length;e++)this.parent.shapeColl[e].order>t&&(t=this.parent.shapeColl[e].order);return t},o.prototype.drawMaskCircle=function(t,e){var i=this.parent;if(i.isMaskImage){var r=i.activeObj.strokeSettings.strokeWidth*2,n=i.maskCanvas.getContext("2d");n.clearRect(0,0,i.maskCanvas.width,i.maskCanvas.height),n.fillStyle=i.activeObj.strokeSettings.strokeColor,n.strokeStyle="#fff",n.beginPath(),n.ellipse(t,e,r/2,r/2,0,0,2*Math.PI,!1),n.fill(),n.stroke(),n.closePath(),i.maskCanvas.style.cursor="none"}},o.prototype.setCursorForActObj=function(t,e,i,r){var n=this.parent;if(n.activeObj.horTopLine!==void 0){n.activeObj.shape!==void 0&&(t=n.activeObj.shape.split("-")),(t===void 0&&n.currObjType.isCustomCrop||t!==void 0&&t[0]==="crop")&&(e=!0),!e&&n.togglePan&&(n.lowerCanvas.style.cursor=n.upperCanvas.style.cursor=n.cursor="grab");var s=n.upperCanvas.style.cursor,a=m({},n.activeObj,{},!0);this.cursorTargetId=a.currIndex;var l=void 0;if(a.shapeDegree===0?l=n.transform.degree:l=n.transform.degree-a.shapeDegree,l<0&&(l=360+l),a.shape==="line"||a.shape==="arrow")this.setCursorForLineArrow(a,i,r,n.upperCanvas);else if(a.shape==="path")this.setCursorForPath(a,i,r,n.upperCanvas);else if(!d(a.rotatedAngle)&&a.rotatedAngle!==0)this.setCursorForRotatedObject(a,i,r,n.upperCanvas);else{n.upperCanvas.style.cursor=n.cursor=this.getMouseCursor(a,i,r,e,!1);var h=["n-resize","s-resize","e-resize","w-resize"];a.shape==="text"&&h.indexOf(n.cursor)>-1&&(n.upperCanvas.style.cursor=n.cursor="move")}s==="default"&&n.cursor==="default"&&e&&(n.upperCanvas.style.cursor=n.cursor="grab"),s==="grab"&&n.cursor==="default"&&(n.upperCanvas.style.cursor=n.cursor="grab")}else n.togglePan&&!n.togglePen?n.lowerCanvas.style.cursor=n.upperCanvas.style.cursor=n.cursor="grab":n.currObjType.isCustomCrop||n.togglePen?n.upperCanvas.style.cursor=n.cursor="crosshair":n.upperCanvas.style.cursor=n.cursor="default"},o.prototype.setCursorForPath=function(t,e,i,r){this.setCursorForLineArrow(t,e,i,r);var n=this.parent;if(n.cursor==="default")for(var s=m({},t,null,!0),a=!1,l=1,h=t.pointColl.length;l<h&&!a;l++){s.activePoint.startX=t.pointColl[l-1].x,s.activePoint.startY=t.pointColl[l-1].y,s.activePoint.endX=t.pointColl[l].x,s.activePoint.endY=t.pointColl[l].y,n.notify("shape",{prop:"setPointCollForLineArrow",onPropertyChange:!1,value:{obj:s}});for(var c=t.topLeftCircle.radius,u=0,p=s.pointColl.length;u<p;u++){var f=s.pointColl[u];if(!d(f.x-c*2)&&!d(f.x+c*2)&&!d(f.y-c*2)&&!d(f.y+c*2)&&e>=f.x-c*2&&e<=f.x+c*2&&i>=f.y-c*2&&i<=f.y+c*2){r.style.cursor=n.cursor="move",a=!0;break}else r.style.cursor=n.cursor="default"}}return n.cursor},o.prototype.setCursorForLineArrow=function(t,e,i,r){var n,s=t.topLeftCircle.radius;if(d(t.pointColl))return n;for(var a=0,l=t.pointColl.length;a<l;a++){var h=t.pointColl[a];if(e>=h.x-s*2&&e<=h.x+s*2&&i>=h.y-s*2&&i<=h.y+s*2){r.style.cursor=this.parent.cursor="move",n=a;break}else r.style.cursor=this.parent.cursor="default"}return n},o.prototype.setCursorForRotatedObject=function(t,e,i,r){this.resizedElement="";var n=this.parent,s=t.bottomCenterCircle.radius,a=t.horTopLinePointColl[Math.round(t.horTopLinePointColl.length/2)],l=t.horTopLinePointColl[Math.round(t.horTopLinePointColl.length-1)],h=t.verLeftLinePointColl[Math.round(t.verLeftLinePointColl.length/2)],c=t.verRightLinePointColl[Math.round(t.verRightLinePointColl.length/2)],u=t.horBottomLinePointColl[Math.round(t.horBottomLinePointColl.length/2)],p=t.horBottomLinePointColl[Math.round(t.horBottomLinePointColl.length-1)],f=t.rotationCirclePointColl,g=t.horTopLinePointColl[0],v=t.horBottomLinePointColl[0];if(e>=g.x-(s+2)&&e<=g.x+(s+2)&&i>=g.y-(s+2)&&i<=g.y+(s+2))r.style.cursor=n.cursor="nw-resize";else if(e>=a.x-5&&e<=a.x+5&&i>=a.y-5&&i<=a.y+5)r.style.cursor=n.cursor=this.resizedElement="n-resize";else if(e>=l.x-(s+2)&&e<=l.x+(s+2)&&i>=l.y-(s+2)&&i<=l.y+(s+2))r.style.cursor=n.cursor="ne-resize";else if(e>=h.x-5&&e<=h.x+5&&i>=h.y-5&&i<=h.y+5)r.style.cursor=n.cursor=this.resizedElement="w-resize";else if(e>=c.x-5&&e<=c.x+5&&i>=c.y-5&&i<=c.y+5)r.style.cursor=n.cursor=this.resizedElement="e-resize";else if(e>=v.x-(s+2)&&e<=v.x+(s+2)&&i>=v.y-(s+2)&&i<=v.y+(s+2))r.style.cursor=n.cursor="sw-resize";else if(e>=u.x-5&&e<=u.x+5&&i>=u.y-5&&i<=u.y+5)r.style.cursor=n.cursor=this.resizedElement="s-resize";else if(e>=p.x-(s+2)&&e<=p.x+(s+2)&&i>=p.y-(s+2)&&i<=p.y+(s+2))r.style.cursor=n.cursor="se-resize";else if(f&&e>=f.x-(s+2)&&e<=f.x+(s+2)&&i>=f.y-(s+2)&&i<=f.y+(s+2))r.style.cursor=n.cursor="grabbing";else{r.style.cursor=n.cursor="default";var y=this.getRectanglePoints(t.activePoint.startX,t.activePoint.startY,t.activePoint.width,t.activePoint.height,t.rotatedAngle*(180/Math.PI),e,i);y&&(r.style.cursor=n.cursor="move")}if(n.cursor==="default")for(var C=0,b=t.horTopLinePointColl.length;C<b;C++){var M=t.horTopLinePointColl[C];if(e>=M.x-5&&e<=M.x+5&&i>=M.y-5&&i<=M.y+5){r.style.cursor=n.cursor=this.resizedElement="n-resize";break}}if(n.cursor==="default")for(var C=0,b=t.horBottomLinePointColl.length;C<b;C++){var S=t.horBottomLinePointColl[C];if(e>=S.x-5&&e<=S.x+5&&i>=S.y-5&&i<=S.y+5){r.style.cursor=n.cursor=this.resizedElement="s-resize";break}}if(n.cursor==="default")for(var C=0,b=t.verLeftLinePointColl.length;C<b;C++){var N=t.verLeftLinePointColl[C];if(e>=N.x-5&&e<=N.x+5&&i>=N.y-5&&i<=N.y+5){r.style.cursor=n.cursor=this.resizedElement="w-resize";break}}if(n.cursor==="default")for(var C=0,b=t.verRightLinePointColl.length;C<b;C++){var x=t.verRightLinePointColl[C];if(e>=x.x-5&&e<=x.x+5&&i>=x.y-5&&i<=x.y+5){r.style.cursor=n.cursor=this.resizedElement="e-resize";break}}return this.adjustCursorStylesForRotatedState(t),n.cursor},o.prototype.adjustCursorStylesForRotatedState=function(t){var e=this.parent,i=t.rotatedAngle*(180/Math.PI);if(i=i>0?Math.floor(i):Math.ceil(i),i>=92&&i<=182||i>=-178&&i<=-88){var r={"nw-resize":"ne-resize","n-resize":"s-resize","ne-resize":"nw-resize","w-resize":"e-resize","e-resize":"w-resize","sw-resize":"se-resize","s-resize":"n-resize","se-resize":"sw-resize"};e.cursor in r&&(e.cursor=r[e.cursor])}return e.upperCanvas.style.cursor=this.getResizeElement(t.rotatedAngle*(180/Math.PI),e.cursor),e.cursor},o.prototype.getResizeElement=function(t,e){var i=[];switch(e){case"nw-resize":i=[[337.5,22.5,"nw-resize"],[22.5,67.5,"n-resize"],[67.5,112.5,"ne-resize"],[112.5,157.5,"e-resize"],[157.5,202.5,"se-resize"],[202.5,247.5,"s-resize"],[247.5,292.5,"sw-resize"],[292.5,337.5,"w-resize"]];break;case"n-resize":i=[[337.5,22.5,"n-resize"],[22.5,67.5,"ne-resize"],[67.5,112.5,"e-resize"],[112.5,157.5,"se-resize"],[157.5,202.5,"s-resize"],[202.5,247.5,"sw-resize"],[247.5,292.5,"w-resize"],[292.5,337.5,"nw-resize"]];break;case"ne-resize":i=[[337.5,22.5,"ne-resize"],[22.5,67.5,"e-resize"],[67.5,112.5,"se-resize"],[112.5,157.5,"s-resize"],[157.5,202.5,"sw-resize"],[202.5,247.5,"w-resize"],[247.5,292.5,"nw-resize"],[292.5,337.5,"n-resize"]];break;case"e-resize":i=[[337.5,22.5,"e-resize"],[22.5,67.5,"se-resize"],[67.5,112.5,"s-resize"],[112.5,157.5,"sw-resize"],[157.5,202.5,"w-resize"],[202.5,247.5,"nw-resize"],[247.5,292.5,"n-resize"],[292.5,337.5,"ne-resize"]];break;case"se-resize":i=[[337.5,22.5,"se-resize"],[22.5,67.5,"s-resize"],[67.5,112.5,"sw-resize"],[112.5,157.5,"w-resize"],[157.5,202.5,"nw-resize"],[202.5,247.5,"n-resize"],[247.5,292.5,"ne-resize"],[292.5,337.5,"e-resize"]];break;case"s-resize":i=[[337.5,22.5,"s-resize"],[22.5,67.5,"sw-resize"],[67.5,112.5,"w-resize"],[112.5,157.5,"nw-resize"],[157.5,202.5,"n-resize"],[202.5,247.5,"ne-resize"],[247.5,292.5,"e-resize"],[292.5,337.5,"se-resize"]];break;case"sw-resize":i=[[337.5,22.5,"sw-resize"],[22.5,67.5,"w-resize"],[67.5,112.5,"nw-resize"],[112.5,157.5,"n-resize"],[157.5,202.5,"ne-resize"],[202.5,247.5,"e-resize"],[247.5,292.5,"se-resize"],[292.5,337.5,"s-resize"]];break;case"w-resize":i=[[337.5,22.5,"w-resize"],[22.5,67.5,"nw-resize"],[67.5,112.5,"n-resize"],[112.5,157.5,"ne-resize"],[157.5,202.5,"e-resize"],[202.5,247.5,"se-resize"],[247.5,292.5,"s-resize"],[292.5,337.5,"sw-resize"]];break}for(var r=t<0?360-Math.abs(t):t,n=0,s=i;n<s.length;n++){var a=s[n],l=a[0],h=a[1],c=a[2];if(r>l&&r<=h||r+360>l&&r+360<=h)return c}return e},o.prototype.setCursorForFreehandDrawing=function(t,e,i,r){var n=i.getContext("2d"),s=this.parent,a=document.querySelector("#"+s.element.id+"_textArea"),l=!1;s.notify("freehand-draw",{prop:"setFreehandDrawHoveredIndex",onPropertyChange:!1,value:{index:-1}});for(var h,c=0;c<s.freehandCounter;c++)if(!(r&&r!==s.pointColl[c].id)){var u={selPointColl:{}};s.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:u}}),h=m([],u.selPointColl[c].points,[]),s.points=m([],s.pointColl[c].points,[]);var p=s.pointColl[c];s.notify("freehand-draw",{prop:"setPointCounter",onPropertyChange:!1,value:{value:0}});for(var f=h.length,g=0;g<f;g++)if(g!==0){var v=!1;if(h[g-1]&&h[g]&&(v=this.isInside(t,e,h[g-1].x,h[g-1].y,h[g].x,h[g].y)),v){this.isFhdPoint=!0,s.notify("freehand-draw",{prop:"setFreehandDrawHoveredIndex",onPropertyChange:!1,value:{index:c}}),s.notify("freehand-draw",{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:null,strokeWidth:null}}),i.style.cursor=s.cursor="pointer",l=!0;break}else if(!this.isFhdEditing||p.isSelected){if((this.isFhdPoint||this.isFhdEditing)&&(n.clearRect(0,0,i.width,i.height),s.activeObj.shape&&a.style.display==="none"&&s.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:s.activeObj}})),this.isFhdEditing){var y={freehandSelectedIndex:-1};s.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:y}});var C=s.pointColl[y.freehandSelectedIndex].strokeColor,b=s.pointColl[y.freehandSelectedIndex].strokeWidth;s.notify("freehand-draw",{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:C,strokeWidth:b}})}else s.notify("freehand-draw",{prop:"setFreehandDrawHoveredIndex",onPropertyChange:!1,value:{index:null}});this.isFhdPoint=!1}}else{var M=s.points[g];if(t>M.x-p.strokeWidth&&t<M.x+p.strokeWidth&&e>M.y-p.strokeWidth&&e<M.y+p.strokeWidth){this.isFhdPoint=!0,s.notify("freehand-draw",{prop:"setFreehandDrawHoveredIndex",onPropertyChange:!1,value:{index:c}}),s.notify("freehand-draw",{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:null,strokeWidth:null}}),i.style.cursor=s.cursor="pointer",l=!0;break}else if(!this.isFhdEditing||p.isSelected){if((this.isFhdPoint||this.isFhdEditing)&&(n.clearRect(0,0,i.width,i.height),s.activeObj.shape&&a.style.display==="none"&&s.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:s.activeObj}})),this.isFhdEditing){var y={freehandSelectedIndex:-1};s.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:y}});var C=s.pointColl[y.freehandSelectedIndex].strokeColor,b=s.pointColl[y.freehandSelectedIndex].strokeWidth;s.notify("freehand-draw",{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:C,strokeWidth:b}})}this.isFhdPoint=!1}}if(l)break}},o.prototype.setCursorFromObj=function(t,e,i,r,n){for(var s=this.parent,a=0,l=i.length;a<l;a++){if(s.cursor==="move")return;var h=m({},i[a],{},!0);if(h.activePoint.width===0&&h.activePoint.height===0){i.splice(a,1);return}this.cursorTargetId=h.currIndex,h.shape==="line"||h.shape==="arrow"?this.setCursorForLineArrow(h,t,e,r):h.shape==="path"?this.setCursorForPath(h,t,e,r):!d(h.rotatedAngle)&&h.rotatedAngle!==0?this.setCursorForRotatedObject(h,t,e,r):r.style.cursor=s.cursor=this.getMouseCursor(h,t,e,n,!0)}},o.prototype.isInside=function(t,e,i,r,n,s){var a=Math.min(i,n),l=Math.max(i,n),h=Math.min(r,s),c=Math.max(r,s);return a<=t&&t<=l&&h<=e&&e<=c},o.prototype.preventResizing=function(t){var e=this.parent;if(e.activeObj.preventShapeDragOut&&this.isShapeDragOut()){var i=e.activeObj.activePoint;i.startX=t.activePoint.startX,i.startY=t.activePoint.startY,i.endX=t.activePoint.endX,i.endY=t.activePoint.endY,i.width=t.activePoint.width,i.height=t.activePoint.height,e.activeObj.rotatedAngle=t.rotatedAngle,e.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:i,obj:e.activeObj,isMouseMove:null,x:null,y:null}})}},o.prototype.updateActivePoint=function(t,e,i){var r=this.parent,n={width:0,height:0},s=r.activeObj.activePoint,a=s.startX,l=s.startY,h=r.activeObj.activePoint,c=h.width,u=h.height;r.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:c,height:u,obj:n,isImgShape:null}});var p=this.updatePrevShapeSettings(),f={cancel:!1,action:"resize",previousShapeSettings:p,allowShapeOverflow:this.allowOutofBound()},g={cancel:!1,action:"move",previousShapeSettings:p,allowShapeOverflow:this.allowOutofBound()};if(this.shapeResizingArgs=f,this.shapeMovingArgs=g,r.activeObj.shape==="text"&&this.dragElement!==""&&r.notify("shape",{prop:"updateFontRatio",onPropertyChange:!1,value:{obj:r.activeObj,isTextArea:null}}),this.currentDrawingShape!==""&&(this.dragElement===""||this.dragElement==="move")&&r.isShapeDrawing){var v=["line","arrow","path"];v.indexOf(r.activeObj.shape)>-1?this.dragElement="e-resize":t>a&&e>l?this.dragElement="se-resize":t<a&&e>l?this.dragElement="sw-resize":t>a&&e<l?this.dragElement="ne-resize":t<a&&e<l&&(this.dragElement="nw-resize")}r.activeObj.shape==="arrow"&&(Math.atan2(t-r.lowerCanvas.width/2,e-r.lowerCanvas.height/2)>0?r.activeObj.rotatedAngle=-Math.atan2(t-r.lowerCanvas.width/2,e-r.lowerCanvas.height/2):r.activeObj.rotatedAngle=Math.abs(Math.atan2(t-r.lowerCanvas.width/2,e-r.lowerCanvas.height/2)));var y,C=!1,b=!1;if(!(i&&r.transform.straighten!==0&&this.isMouseOutsideImg(t,e))){var M=m({},r.activeObj,{},!0),S,N;switch(r.activeObj.shape!==void 0&&(S=r.activeObj.shape.split("-")),S!==void 0&&S[0]==="crop"&&(N=!0),this.dragElement.toLowerCase()){case"nw-resize":this.updateNWPoints(t,e),this.preventResizing(M),r.notify("shape",{prop:"updateArrowDirection",onPropertyChange:!1,value:{obj:r.activeObj,flip:null,rotatedDegree:null}}),this.triggerShapeChange(f,g,"resize");break;case"n-resize":this.updateNPoints(t,e),this.preventResizing(M),r.notify("shape",{prop:"updateArrowDirection",onPropertyChange:!1,value:{obj:r.activeObj,flip:null,rotatedDegree:null}}),this.triggerShapeChange(f,g,"resize");break;case"ne-resize":this.updateNEPoints(t,e),this.preventResizing(M),r.notify("shape",{prop:"updateArrowDirection",onPropertyChange:!1,value:{obj:r.activeObj,flip:null,rotatedDegree:null}}),this.triggerShapeChange(f,g,"resize");break;case"w-resize":this.updateWPoints(t,e),this.preventResizing(M),r.notify("shape",{prop:"updateArrowDirection",onPropertyChange:!1,value:{obj:r.activeObj,flip:null,rotatedDegree:null}}),this.triggerShapeChange(f,g,"resize");break;case"e-resize":this.updateEPoints(t,e),this.preventResizing(M),r.notify("shape",{prop:"updateArrowDirection",onPropertyChange:!1,value:{obj:r.activeObj,flip:null,rotatedDegree:null}}),this.triggerShapeChange(f,g,"resize");break;case"sw-resize":this.updateSWPoints(t,e),this.preventResizing(M),r.notify("shape",{prop:"updateArrowDirection",onPropertyChange:!1,value:{obj:r.activeObj,flip:null,rotatedDegree:null}}),this.triggerShapeChange(f,g,"resize");break;case"s-resize":this.updateSPoints(t,e),this.preventResizing(M),r.notify("shape",{prop:"updateArrowDirection",onPropertyChange:!1,value:{obj:r.activeObj,flip:null,rotatedDegree:null}}),this.triggerShapeChange(f,g,"resize");break;case"se-resize":this.updateSEPoints(t,e),this.preventResizing(M),r.notify("shape",{prop:"updateArrowDirection",onPropertyChange:!1,value:{obj:r.activeObj,flip:null,rotatedDegree:null}}),this.triggerShapeChange(f,g,"resize");break;case"grabbing":Math.atan2(t-(a+c/2),e-(l+u/2))>0?r.activeObj.rotatedAngle=-Math.atan2(t-(a+c/2),e-(l+u/2)):r.activeObj.rotatedAngle=Math.abs(Math.atan2(t-(a+c/2),e-(l+u/2))),r.activeObj.shapeDegree===0?y=r.transform.degree:y=r.transform.degree-r.activeObj.shapeDegree,y<0&&(y=360+y);for(var x=0,A=r.activeObj.flipObjColl.length;x<A;x++)r.activeObj.flipObjColl[x].toLowerCase()==="horizontal"?C=!0:r.activeObj.flipObjColl[x].toLowerCase()==="vertical"&&(b=!0);r.activeObj.rotatedAngle-=y*(Math.PI/180),y===0||y===360?b&&(r.activeObj.rotatedAngle-=180*(Math.PI/180)):y===90||y===-270?C&&(r.activeObj.rotatedAngle-=180*(Math.PI/180)):y===180||y===-180?b&&(r.activeObj.rotatedAngle-=180*(Math.PI/180)):(y===270||y===-90)&&C&&(r.activeObj.rotatedAngle-=180*(Math.PI/180)),this.preventResizing(M);break;case"pathdrag":d(this.pathAdjustedIndex)||(r.activeObj.pointColl[this.pathAdjustedIndex].x=t,r.activeObj.pointColl[this.pathAdjustedIndex].y=e);break;default:if(!i&&!r.currObjType.isCustomCrop){var U=r.activeObj.activePoint;if(this.dragPoint.startX){var z=this.dragPoint.endX-this.previousPoint.x,J=this.dragPoint.endY-this.previousPoint.y;if(U.startX+=z,U.endX+=z,U.startY+=J,U.endY+=J,a=U.startX,l=U.startY,r.activeObj.shape!=="line"&&r.activeObj.shape!=="arrow"&&r.activeObj.rotationCirclePointColl&&(r.activeObj.rotationCirclePointColl.x+=z,r.activeObj.rotationCirclePointColl.y+=J,r.activeObj.rotationCirclePoint.x+=z,r.activeObj.rotationCirclePoint.y+=J),r.activeObj.shape==="path")for(var x=0,A=r.activeObj.pointColl.length;x<A;x++)r.activeObj.pointColl[x].x+=z,r.activeObj.pointColl[x].y+=J;if(!this.isPreventDragging&&this.isShapeDragOut()&&(r.activeObj.preventShapeDragOut||r.activeObj.shape==="redact"||N)){if(U.startX-=z,U.endX-=z,U.startY-=J,U.endY-=J,r.activeObj.shape!=="line"&&r.activeObj.shape!=="arrow"&&r.activeObj.rotationCirclePointColl)r.activeObj.rotationCirclePointColl.x-=z,r.activeObj.rotationCirclePointColl.y-=J,r.activeObj.rotationCirclePoint.x-=z,r.activeObj.rotationCirclePoint.y-=J;else if(r.activeObj.shape==="path")for(var R=0,A=r.activeObj.pointColl.length;R<A;R++)r.activeObj.pointColl[R].x-=z,r.activeObj.pointColl[R].y-=J;if(r.activeObj.rotatedAngle===0){var _=r.activeObj.activePoint.endX,B=r.activeObj.activePoint.endY;r.activeObj.shape==="path"&&(r.activeObj.activePoint=r.getSquarePointForPath(r.activeObj)),this.setDragWidth(z),this.setDragHeight(J);var E=r.activeObj,L=E.activePoint.endX-_,P=E.activePoint.endY-B;if(E.shape==="path")for(var R=0,A=E.pointColl.length;R<A;R++)E.pointColl[R].x+=L,E.pointColl[R].y+=P}else r.notify("selection",{prop:"updPtCollForShpRot",onPropertyChange:!1,value:{obj:r.activeObj}})}}else U.startX=t<this.mouseDownPoint.x?t:this.mouseDownPoint.x,U.startY=e<this.mouseDownPoint.y?e:this.mouseDownPoint.y,t=t<this.mouseDownPoint.x?this.mouseDownPoint.x:t,e=e<this.mouseDownPoint.y?this.mouseDownPoint.y:e,U.endX=t,U.endY=e;this.triggerShapeChange(f,g,"move")}break}}},o.prototype.isShapeDragOut=function(){var t=this.parent,e=!1,i=!1,r=t.activeObj.shape;if((t.activeObj.preventShapeDragOut||t.activeObj.rotatedAngle===0&&r!=="line"&&r!=="arrow"&&r!=="path")&&(i=!0),i){var n=t.activeObj.activePoint,s=n.startX,a=n.startY,l=n.endX,h=n.endY;if(r==="path"){var c=t.getSquarePointForPath(t.activeObj);s=c.startX,a=c.startY,l=c.endX,h=c.endY}if(t.activeObj.rotatedAngle===0||r==="arrow")e=this.isObjOutsideImg(s,a,l,h,r);else{var u={isIntersect:null,arr:null};t.notify("draw",{prop:"updateImgCanvasPoints",onPropertyChange:!1}),t.notify("draw",{prop:"isLinesIntersect",onPropertyChange:!1,value:{obj:u}}),u.arr[0]||u.arr[1]||u.arr[2]||u.arr[3]?e=!0:e=this.isObjOutsideImg(s,a,l,h,r)}}return e},o.prototype.isObjOutsideImg=function(t,e,i,r,n){var s=this.parent,a=s.img,l=a.destLeft,h=a.destTop,c=a.destWidth,u=a.destHeight;return t<l||e<h||i>l+c||r>h+u||(n==="line"||n==="arrow")&&(t>l+c||e>h+u||i<l||r<h)},o.prototype.triggerShapeChange=function(t,e,i){var r=this.parent,n=r.activeObj.activePoint;n.width=n.endX-n.startX,n.height=n.endY-n.startY;var s=this.updatePrevShapeSettings();if(!d(this.shapeResizingArgs)&&!d(this.shapeMovingArgs)?(t.currentShapeSettings=this.shapeResizingArgs.currentShapeSettings=s,e.currentShapeSettings=this.shapeMovingArgs.currentShapeSettings=s):(t.currentShapeSettings=s,e.currentShapeSettings=s),i==="resize"){this.isCropSelection=!1;var a=void 0;if(r.activeObj.shape!==void 0&&(a=r.activeObj.shape.split("-")),a!==void 0&&a[0]==="crop"&&(this.isCropSelection=!0),!this.isCropSelection)this.currentDrawingShape!==""&&r.upperCanvas.style.cursor==="crosshair"&&(t.action="drawing"),(!r.currObjType.isRedact||r.activeObj.shape!=="redact")&&r.trigger("shapeChanging",t),r.editCompleteArgs=t,this.isPreventShaping=t.cancel,r.notify("shape",{prop:"updateShapeChangeEventArgs",onPropertyChange:!1,value:{shapeSettings:t.currentShapeSettings,allowShapeOverflow:t.allowShapeOverflow}});else{this.isMouseDown?t.action="resize-start":this.isMouseUp&&(t.action="resize-end");var l={action:t.action,previousSelectionSettings:{type:r.getSelectionType(r.activeObj.shape),startX:t.previousShapeSettings.startX,startY:t.previousShapeSettings.startY,width:t.previousShapeSettings.width,height:t.previousShapeSettings.height},currentSelectionSettings:{type:r.getSelectionType(r.activeObj.shape),startX:t.currentShapeSettings.startX,startY:t.currentShapeSettings.startY,width:t.currentShapeSettings.width,height:t.currentShapeSettings.height}};this.selectionResizingArgs=l,r.trigger("selectionChanging",l),r.editCompleteArgs=l,r.notify("shape",{prop:"updSelChangeEventArgs",onPropertyChange:!1,value:{selectionSettings:l.currentSelectionSettings}})}}else i==="mouse-down"||i==="mouse-up"?(r.activeObj.shape!=="redact"&&r.trigger("shapeChanging",t),r.editCompleteArgs=t,this.isPreventShaping=t.cancel,r.notify("shape",{prop:"updateShapeChangeEventArgs",onPropertyChange:!1,value:{shapeSettings:t.currentShapeSettings,allowShapeOverflow:t.allowShapeOverflow}})):(r.activeObj.shape!=="redact"&&r.trigger("shapeChanging",e),r.editCompleteArgs=e,this.isPreventShaping=e.cancel,r.notify("shape",{prop:"updateShapeChangeEventArgs",onPropertyChange:!1,value:{shapeSettings:e.currentShapeSettings,allowShapeOverflow:e.allowShapeOverflow}}));r.eventType=i},o.prototype.setDragWidth=function(t){var e=this.parent,i=e.activeObj.activePoint,r=e.img,n=r.destLeft,s=r.destWidth,a=t,l=e.activeObj.shape,h=!1;if(e.activeObj.preventShapeDragOut&&(l==="line"||l==="arrow")&&(h=!0),a>=0)for(var c=0;c<a&&(t=a-c,i.startX+=t,i.endX+=t,!(i.startX>=n&&i.endX<=n+s&&!h||i.startX>=n&&i.endX<=n+s&&i.endX>=n&&i.startX<=n+s&&h));c++)i.startX-=t,i.endX-=t;else for(var c=1;c<Math.abs(a)&&(t=a+c,i.startX+=t,i.endX+=t,!(i.startX>=n&&i.endX<=n+s&&!h||i.startX>=n&&i.endX<=n+s&&i.endX>=n&&i.startX<=n+s&&h));c++)i.startX-=t,i.endX-=t},o.prototype.setDragHeight=function(t){var e=this.parent,i=e.activeObj.activePoint,r=e.img,n=r.destTop,s=r.destHeight,a=t,l=e.activeObj.shape,h=!1;if(e.activeObj.preventShapeDragOut&&(l==="line"||l==="arrow")&&(h=!0),a>=0)for(var c=1;c<a&&(t=a-c,i.startY+=t,i.endY+=t,!(i.startY>=n&&i.endY<=n+s&&!h||i.startY>=n&&i.endY<=n+s&&i.endY>=n&&i.startY<=n+s&&h));c++)i.startY-=t,i.endY-=t;else for(var c=0;c<Math.abs(a)&&(t=a+c,i.startY+=t,i.endY+=t,!(i.startY>=n&&i.endY<=n+s&&!h||i.startY>=n&&i.endY<=n+s&&i.endY>=n&&i.startY<=n+s&&h));c++)i.startY-=t,i.endY-=t},o.prototype.limitDrag=function(t){var e=!1,i=this.parent,r=i.img,n=r.destLeft,s=r.destTop,a=r.destWidth,l=r.destHeight,h=i.activeObj.activePoint,c=t?h.startX:h.endX,u=t?h.startY:h.endY,p=t?h.endX:h.startX,f=t?h.endY:h.startY,g=i.upperCanvas.width,v=i.upperCanvas.height;if(D.isDevice?(c<0&&n<0&&(c=0),u<0&&s<0&&(u=0),p>g&&n+a>g&&(p=g),f>v&&s+l>v&&(f=v)):(c<n&&(c=n),u<s&&(u=s),p>n+a&&(p=n+a),f>s+l&&(f=s+l)),i.transform.straighten!==0){var y={isIntersect:null,arr:null};i.notify("draw",{prop:"updateImgCanvasPoints",onPropertyChange:!1}),i.notify("draw",{prop:"isLinesIntersect",onPropertyChange:!1,value:{obj:y}}),(y.arr[0]||y.arr[1]||y.arr[2]||y.arr[3])&&(e=!0)}return t?(h.startX=c,h.startY=u,h.endX=p,h.endY=f):(h.startX=p,h.startY=f,h.endX=c,h.endY=u),e},o.prototype.isMouseOutsideImg=function(t,e){var i={bool:!1};return this.parent.notify("draw",{prop:"updateImgCanvasPoints",onPropertyChange:!1}),this.parent.notify("draw",{prop:"isPointsInsideImg",value:{obj:i,x:t,y:e}}),i.bool},o.prototype.preventDraggingInvertly=function(){var t=!1,e=this.parent;if(e.activeObj.shape==="image")return t;var i,r;if(e.activeObj.shape!==void 0&&(i=e.activeObj.shape.split("-")),i!==void 0&&i[0]==="crop"&&(r=!0),!this.isPreventDragging&&e.activeObj.rotatedAngle===0&&(e.activeObj.preventShapeDragOut||e.activeObj.shape==="redact"||r)){t=this.limitDrag(!0);var n=["line","arrow","path"];n.indexOf(e.activeObj.shape)>-1&&(t=this.limitDrag(!1))}return t},o.prototype.preventTextDraggingInvertly=function(){var t=this.parent,e=!1,i=t.activeObj.activePoint,r=t.img,n=r.destLeft,s=r.destTop,a=r.destWidth,l=r.destHeight;return this.isPreventDragging||(i.startX<n||i.startY<s||i.endX>n+a||i.endY>s+l)&&(e=!0),e},o.prototype.preventInverseResize=function(t){var e=this.parent,i=e.activeObj.activePoint;i.width<0&&(i.width=0,i.startX=t.activePoint.startX,i.endX=t.activePoint.endX),i.height<0&&(i.height=0,i.startY=t.activePoint.startY,i.endY=t.activePoint.endY)},o.prototype.getScaleRatio=function(t){var e=this.parent,i={x:t,y:t};if(e.activeObj.shape&&e.activeObj.shape!=="crop-custom"&&e.activeObj.shape!=="crop-circle"&&e.activeObj.shape!=="crop-square"){var r=e.activeObj.shape==="image"||e.activeObj.shape==="text"?this.findImageRatio(e.activeObj.activePoint.width,e.activeObj.activePoint.height).split("-"):e.activeObj.shape.split("-");if(r.length>1||e.activeObj.shape==="image"||e.activeObj.shape==="text"){r=e.activeObj.shape==="image"||e.activeObj.shape==="text"?r[0].split(":"):r[1].split(":");var n=t/parseInt(r[1],10);i.x=n*parseInt(r[0],10),i.y=n*parseInt(r[1],10)}}return i},o.prototype.findImageRatio=function(t,e,i){var r=function(a,l){return l===0?a:r(l,a%l)},n=r(t,e),s=t/n+":"+e/n;return i&&(i.ratio=s),s},o.prototype.revertResizing=function(t){var e=this.parent,i=e.activeObj.activePoint;this.preventDraggingInvertly()&&(i.startX=t.activePoint.startX,i.startY=t.activePoint.startY,i.endX=t.activePoint.endX,i.endY=t.activePoint.endY)},o.prototype.performSEResize=function(t,e,i,r){var n=this.parent;if(this.resizeImg(t,e,"se-resize",i),r.endX<r.startX){var s=r.endX;r.endX=r.startX,r.startX=s,this.dragElement=n.upperCanvas.style.cursor=n.cursor="sw-resize"}if(r.endY<r.startY){var s=r.endY;r.endY=r.startY,r.startY=s,this.dragElement=n.upperCanvas.style.cursor=n.cursor="ne-resize"}this.revertCustomSelection(r,i,"se-resize"),this.revertResizing(i)},o.prototype.performNWResize=function(t,e,i,r){var n=this.parent;if(this.resizeImg(t,e,"nw-resize",i),r.startX>r.endX){var s=r.startX;r.startX=r.endX,r.endX=s,this.dragElement=n.upperCanvas.style.cursor=n.cursor="ne-resize"}if(r.startY>r.endY){var s=r.startY;r.startY=r.endY,r.endY=s,this.dragElement=n.upperCanvas.style.cursor=n.cursor="sw-resize"}this.revertCustomSelection(r,i,"nw-resize"),this.revertResizing(i)},o.prototype.isCustomSelection=function(){if(this.parent.activeObj.shape){var t=["custom","circle","square","2:3","3:2","3:4","4:3","4:5","5:4","5:7","7:5","9:16","16:9"];return this.parent.activeObj.shape.indexOf("crop-")>-1&&t.indexOf(this.parent.activeObj.shape.split("-")[1])===-1}return!1},o.prototype.revertCustomSelection=function(t,e,i){var r=this.parent;if(this.isCustomSelection()){var n=r.img,s=n.destLeft,a=n.destTop,l=n.destWidth,h=n.destHeight,c=s+l<r.lowerCanvas.width?s+l:r.lowerCanvas.width,u=a+h<r.lowerCanvas.height?a+h:r.lowerCanvas.height,p=s>0?s:0,f=a>0?a:0,g=a>0?a:0,v=s>0?s:0;(i==="se-resize"&&(t.endX>c||t.endY>u)||i==="nw-resize"&&(t.startX<p||t.startY<f)||i==="ne-resize"&&(t.endX>c||t.startY<g)||i==="sw-resize"&&(t.startX<v||t.endY>u))&&this.revertPoints(t,e)}},o.prototype.revertPoints=function(t,e){t.startX=e.activePoint.startX,t.startY=e.activePoint.startY,t.endX=e.activePoint.endX,t.endY=e.activePoint.endY,t.width=e.activePoint.width,t.height=e.activePoint.height},o.prototype.updateNWPoints=function(t,e){var i=this.parent,r=i.activeObj.activePoint,n,s,a,l=m({},i.activeObj,null,!0);if(i.activeObj.shape==="text")this.resizeImg(t,e,"nw-resize",l),i.notify("shape",{prop:"updateFontSize",onPropertyChange:!1,value:{obj:i.activeObj}});else{var h=void 0;if(i.activeObj.shape!==void 0&&(h=i.activeObj.shape.split("-")),i.activeObj.shape==="crop-custom"||i.activeObj.shape!==void 0&&h[0]!=="crop"||this.isCustomSelection()){if(i.activeObj.shape==="image"||this.isCustomSelection()?this.resizeImg(t,e,"nw-resize",l):this.adjustNWPoints(r,t,e,i.activeObj.rotatedAngle),r.startX>r.endX){var c=r.startX;r.startX=r.endX,r.endX=c,this.dragElement=i.upperCanvas.style.cursor=i.cursor="ne-resize"}if(r.startY>r.endY){var c=r.startY;r.startY=r.endY,r.endY=c,this.dragElement=i.upperCanvas.style.cursor=i.cursor="sw-resize"}this.revertCustomSelection(r,l,"nw-resize"),this.revertResizing(l)}else{var u=i.img,p=u.destLeft,f=u.destTop;if(r.startX<t&&r.startY<e){n=t-r.startX,s=e-r.startY,a=Math.min(n,s);var g=this.getScaleRatio(a);r.startX+=g.x,r.startY+=g.y;var v=p>0?p:0,y=f>0?f:0;(r.startX<v||r.startY<y)&&(r.startX-=g.x,r.startY-=g.y)}else{n=r.startX-t,s=e-r.endY,a=Math.max(n,s);var g=this.getScaleRatio(a);r.startX-=g.x,r.startY-=g.y;var v=p>0?p:0,C=f>0?f:0;(r.startX<v||r.startY<C)&&(r.startX+=g.x,r.startY+=g.y)}r.width=r.endX-r.startX,r.height=r.endY-r.startY,this.revertResizing(l)}r.width=r.endX-r.startX,r.height=r.endY-r.startY,this.preventInverseResize(l)}},o.prototype.updateNPoints=function(t,e){var i=this.parent,r=i.activeObj.activePoint,n,s,a,l=m({},i.activeObj,null,!0);if(i.activeObj.shape!=="text"){var h=void 0;if(i.activeObj.shape&&(h=i.activeObj.shape.split("-")),i.activeObj.shape==="crop-custom"||i.activeObj.shape&&h[0]!=="crop"){if(i.activeObj.shape!=="line"&&i.activeObj.shape!=="arrow"&&i.activeObj.shape!=="path"&&i.activeObj.rotatedAngle!==0&&this.dragPoint.startX?(this.dragPoint.startX&&this.dragPoint.startY&&(this.previousPoint.x=this.dragPoint.endX,this.previousPoint.y=this.dragPoint.endY,this.dragPoint.endX=t,this.dragPoint.endY=e),n=this.dragPoint.endX-this.previousPoint.x,s=this.dragPoint.endY-this.previousPoint.y,this.adjustRotationPoints(r,n,s,i.activeObj.rotatedAngle)):(r.startY=e,r.height=r.endY-r.startY),r.startY>r.endY){var c=r.startY;r.startY=r.endY,r.endY=c,this.dragElement=this.resizedElement="s-resize"}this.revertResizing(l)}else{var u=i.img,p=u.destLeft,f=u.destTop,g=u.destWidth;if(this.isCustomSelection())this.performNWResize(t,e,l,r);else if(r.endX>t&&r.startY<e){n=r.endX-t,s=e-r.startY,a=Math.min(n,s);var v=this.getScaleRatio(a);r.endX-=v.x,r.startY+=v.y,(r.endX>p+g||r.startY<f)&&(r.endX+=v.x,r.startY-=v.y)}else{n=t-r.endX,s=r.startY-e,a=Math.max(n,s);var v=this.getScaleRatio(a);r.endX+=v.x,r.startY-=v.y,(r.endX>p+g||r.startY<f)&&(r.endX-=v.x,r.startY+=v.y)}r.width=r.endX-r.startX,r.height=r.endY-r.startY,this.revertResizing(l)}}},o.prototype.updateNEPoints=function(t,e){var i=this.parent,r=i.activeObj.activePoint,n,s,a,l=m({},i.activeObj,null,!0);if(i.activeObj.shape==="text")this.resizeImg(t,e,"ne-resize",l),i.notify("shape",{prop:"updateFontSize",onPropertyChange:!1,value:{obj:i.activeObj}});else{var h=void 0;if(i.activeObj.shape&&(h=i.activeObj.shape.split("-")),i.activeObj.shape==="crop-custom"||i.activeObj.shape!==void 0&&h[0]!=="crop"||this.isCustomSelection()){if(i.activeObj.shape==="image"||this.isCustomSelection()?this.resizeImg(t,e,"ne-resize",l):this.adjustNEPoints(r,t,e,i.activeObj.rotatedAngle),r.endX<r.startX){var c=r.endX;r.endX=r.startX,r.startX=c,this.dragElement=i.upperCanvas.style.cursor=i.cursor="nw-resize"}if(r.startY>r.endY){var c=r.startY;r.startY=r.endY,r.endY=c,this.dragElement=i.upperCanvas.style.cursor=i.cursor="se-resize"}this.revertCustomSelection(r,l,"ne-resize"),this.revertResizing(l)}else{var u=i.img,p=u.destLeft,f=u.destTop,g=u.destWidth;if(r.endX>t&&r.startY<e){n=r.endX-t,s=e-r.startY,a=Math.min(n,s);var v=this.getScaleRatio(a);r.endX-=v.x,r.startY+=v.y;var y=p+g<i.lowerCanvas.width?p+g:i.lowerCanvas.width,C=f>0?f:0;(r.endX>y||r.startY<C)&&(r.endX+=v.x,r.startY-=v.y)}else{n=t-r.endX,s=r.startY-e,a=Math.max(n,s);var v=this.getScaleRatio(a);r.endX+=v.x,r.startY-=v.y;var y=p+g<i.lowerCanvas.width?p+g:i.lowerCanvas.width,C=f>0?f:0;(r.endX>y||r.startY<C)&&(r.endX-=v.x,r.startY+=v.y)}r.width=r.endX-r.startX,r.height=r.endY-r.startY,this.revertResizing(l)}r.width=r.endX-r.startX,r.height=r.endY-r.startY,this.preventInverseResize(l)}},o.prototype.updateWPoints=function(t,e){var i=this.parent,r=i.activeObj.activePoint,n,s,a,l=m({},i.activeObj,null,!0);if(i.activeObj.shape!=="text"){var h=void 0;if(i.activeObj.shape&&(h=i.activeObj.shape.split("-")),i.activeObj.shape==="crop-custom"||i.activeObj.shape&&h[0]!=="crop"){if(i.activeObj.shape!=="line"&&i.activeObj.shape!=="arrow"&&i.activeObj.shape!=="path"&&i.activeObj.rotatedAngle!==0&&this.dragPoint.startX?(this.dragPoint.startX&&this.dragPoint.startY&&(this.previousPoint.x=this.dragPoint.endX,this.previousPoint.y=this.dragPoint.endY,this.dragPoint.endX=t,this.dragPoint.endY=e),n=this.dragPoint.endX-this.previousPoint.x,s=this.dragPoint.endY-this.previousPoint.y,this.adjustRotationPoints(r,n,s,i.activeObj.rotatedAngle)):(r.startX=t,r.width=r.endX-r.startX),i.activeObj.shape==="line"||i.activeObj.shape==="arrow"||i.activeObj.shape==="path")r.startY=e,r.height=r.endY-r.startY,this.adjustActObjForLineArrow()&&(this.dragElement="e-resize",i.activeObj.triangleDirection==="right"?i.activeObj.triangleDirection="left":i.activeObj.triangleDirection==="left"&&(i.activeObj.triangleDirection="right"));else if(r.startX>r.endX){var c=r.startX;r.startX=r.endX,r.endX=c,this.dragElement=this.resizedElement="e-resize"}this.revertResizing(l)}else{var u=i.img,p=u.destLeft,f=u.destTop,g=u.destHeight;if(this.isCustomSelection())this.performNWResize(t,e,l,r);else if(r.startX<t&&r.endY>e){n=t-r.startX,s=r.endY-e,a=Math.min(n,s);var v=this.getScaleRatio(a);r.startX+=v.x,r.endY-=v.y,(r.startX<p||r.endY>f+g)&&(r.startX-=v.x,r.endY+=v.y)}else{n=r.startX-t,s=e-r.endY,a=Math.max(n,s);var v=this.getScaleRatio(a);r.startX-=v.x,r.endY+=v.y,(r.startX<p||r.endY>f+g)&&(r.startX+=v.x,r.endY-=v.y)}r.width=r.endX-r.startX,r.height=r.endY-r.startY,this.revertResizing(l)}}},o.prototype.updateEPoints=function(t,e){var i=this.parent,r=i.activeObj.activePoint,n,s,a,l=m({},i.activeObj,null,!0);if(i.activeObj.shape!=="text"){var h=void 0;if(i.activeObj.shape&&(h=i.activeObj.shape.split("-")),i.activeObj.shape==="crop-custom"||i.activeObj.shape&&h[0]!=="crop"){if(i.activeObj.shape!=="line"&&i.activeObj.shape!=="arrow"&&i.activeObj.shape!=="path"&&i.activeObj.rotatedAngle!==0&&this.dragPoint.startX?(this.dragPoint.startX&&this.dragPoint.startY&&(this.previousPoint.x=this.dragPoint.endX,this.previousPoint.y=this.dragPoint.endY,this.dragPoint.endX=t,this.dragPoint.endY=e),n=this.dragPoint.endX-this.previousPoint.x,s=this.dragPoint.endY-this.previousPoint.y,this.adjustRotationPoints(r,n,s,i.activeObj.rotatedAngle)):(r.endX=t,r.width=r.endX-r.startX),i.activeObj.shape==="line"||i.activeObj.shape==="arrow"||i.activeObj.shape==="path")r.endY=e,r.height=r.endY-r.startY,this.adjustActObjForLineArrow()&&(this.dragElement="w-resize",i.activeObj.triangleDirection==="right"?i.activeObj.triangleDirection="left":i.activeObj.triangleDirection==="left"&&(i.activeObj.triangleDirection="right"));else if(r.endX<r.startX){var c=r.endX;r.endX=r.startX,r.startX=c,this.dragElement=this.resizedElement="w-resize"}this.revertResizing(l)}else{var u=i.img,p=u.destLeft,f=u.destTop,g=u.destWidth,v=u.destHeight;if(this.isCustomSelection())this.performSEResize(t,e,l,r);else if(r.endX>t&&r.endY>e){n=r.endX-t,s=r.endY-e,a=Math.min(n,s);var y=this.getScaleRatio(a);r.endX-=y.x,r.endY-=y.y,(r.endX>p+g||r.endY>f+v)&&(r.endX+=y.x,r.endY+=y.y)}else{n=t-r.endX,s=e-r.endY,a=Math.max(n,s);var y=this.getScaleRatio(a);r.endX+=y.x,r.endY+=y.y,(r.endX>p+g||r.endY>f+v)&&(r.endX-=y.x,r.endY-=y.y)}r.width=r.endX-r.startX,r.height=r.endY-r.startY,this.revertResizing(l)}}},o.prototype.updateSWPoints=function(t,e){var i=this.parent,r=i.activeObj.activePoint,n,s,a,l=m({},i.activeObj,null,!0);if(i.activeObj.shape==="text")this.resizeImg(t,e,"sw-resize",l),i.notify("shape",{prop:"updateFontSize",onPropertyChange:!1,value:{obj:i.activeObj}});else{var h=void 0;if(i.activeObj.shape!==void 0&&(h=i.activeObj.shape.split("-")),i.activeObj.shape==="crop-custom"||i.activeObj.shape!==void 0&&h[0]!=="crop"||this.isCustomSelection()){if(i.activeObj.shape==="image"||this.isCustomSelection()?this.resizeImg(t,e,"sw-resize",l):this.adjustSWPoints(r,t,e,i.activeObj.rotatedAngle),r.startX>r.endX){var c=r.startX;r.startX=r.endX,r.endX=c,this.dragElement=i.upperCanvas.style.cursor=i.cursor="se-resize"}if(r.endY<r.startY){var c=r.endY;r.endY=r.startY,r.startY=c,this.dragElement=i.upperCanvas.style.cursor=i.cursor="nw-resize"}this.revertCustomSelection(r,l,"sw-resize"),this.revertResizing(l)}else{var u=i.img,p=u.destLeft,f=u.destTop,g=u.destHeight;if(r.startX<t&&r.endY>e){n=t-r.startX,s=r.endY-e,a=Math.min(n,s);var v=this.getScaleRatio(a);r.startX+=v.x,r.endY-=v.y;var y=p>0?p:0,C=f+g<i.lowerCanvas.height?f+g:i.lowerCanvas.height;(r.startX<y||r.endY>C)&&(r.startX-=v.x,r.endY+=v.y)}else{n=r.startX-t,s=e-r.endY,a=Math.max(n,s);var v=this.getScaleRatio(a);r.startX-=v.x,r.endY+=v.y;var y=p>0?p:0,C=f+g<i.lowerCanvas.height?f+g:i.lowerCanvas.height;(r.startX<y||r.endY>C)&&(r.startX+=v.x,r.endY-=v.y)}r.width=r.endX-r.startX,r.height=r.endY-r.startY,this.revertResizing(l)}r.width=r.endX-r.startX,r.height=r.endY-r.startY,this.preventInverseResize(l)}},o.prototype.updateSPoints=function(t,e){var i=this.parent,r=i.activeObj.activePoint,n,s,a,l=m({},i.activeObj,null,!0);if(i.activeObj.shape!=="text"){var h=void 0;if(i.activeObj.shape&&(h=i.activeObj.shape.split("-")),i.activeObj.shape==="crop-custom"||i.activeObj.shape&&h[0]!=="crop"){if(i.activeObj.shape!=="line"&&i.activeObj.shape!=="arrow"&&i.activeObj.shape!=="path"&&i.activeObj.rotatedAngle!==0&&this.dragPoint.startX?(this.dragPoint.startX&&this.dragPoint.startY&&(this.previousPoint.x=this.dragPoint.endX,this.previousPoint.y=this.dragPoint.endY,this.dragPoint.endX=t,this.dragPoint.endY=e),n=this.dragPoint.endX-this.previousPoint.x,s=this.dragPoint.endY-this.previousPoint.y,this.adjustRotationPoints(r,n,s,i.activeObj.rotatedAngle)):(r.endY=e,r.height=r.endY-r.startY),r.endY<r.startY){var c=r.endY;r.endY=r.startY,r.startY=c,this.dragElement=this.resizedElement="n-resize"}this.revertResizing(l)}else{var u=i.img,p=u.destLeft,f=u.destTop,g=u.destWidth,v=u.destHeight;if(this.isCustomSelection())this.performSEResize(t,e,l,r);else if(r.endX>t&&r.endY>e){n=r.endX-t,s=r.endY-e,a=Math.min(n,s);var y=this.getScaleRatio(a);r.endX-=y.x,r.endY-=y.y,(r.endX>p+g||r.endY>f+v)&&(r.endX+=y.x,r.endY+=y.y)}else{n=t-r.endX,s=e-r.endY,a=Math.max(n,s);var y=this.getScaleRatio(a);r.endX+=y.x,r.endY+=y.x,(r.endX>p+g||r.endY>f+v)&&(r.endX-=y.x,r.endY-=y.y)}r.width=r.endX-r.startX,r.height=r.endY-r.startY,this.revertResizing(l)}}},o.prototype.updateSEPoints=function(t,e){var i=this.parent,r=i.activeObj.activePoint,n,s,a,l=m({},i.activeObj,null,!0);if(i.activeObj.shape==="text")this.resizeImg(t,e,"se-resize",l),i.notify("shape",{prop:"updateFontSize",onPropertyChange:!1,value:{obj:i.activeObj}});else{var h=void 0,c=void 0;if(i.activeObj.shape!==void 0&&(h=i.activeObj.shape.split("-")),i.activeObj.shape==="crop-custom"||i.activeObj.shape!==void 0&&h[0]!=="crop"||this.isCustomSelection()){if(i.activeObj.shape==="image"||this.isCustomSelection()?this.resizeImg(t,e,"se-resize",l):this.adjustSEPoints(r,t,e,i.activeObj.rotatedAngle),r.endX<r.startX){var u=r.endX;r.endX=r.startX,r.startX=u,this.dragElement=i.upperCanvas.style.cursor=i.cursor="sw-resize"}if(r.endY<r.startY){var u=r.endY;r.endY=r.startY,r.startY=u,this.dragElement=i.upperCanvas.style.cursor=i.cursor="ne-resize"}this.revertCustomSelection(r,l,"se-resize"),this.revertResizing(l)}else{var p=i.img,f=p.destLeft,g=p.destTop,v=p.destWidth,y=p.destHeight;if(r.endX>t&&r.endY>e){n=r.endX-t,s=r.endY-e,a=Math.min(n,s),c=this.getScaleRatio(a),r.endX-=c.x,r.endY-=c.y;var C=f+v<i.lowerCanvas.width?f+v:i.lowerCanvas.width,b=g+y<i.lowerCanvas.height?g+y:i.lowerCanvas.height;(r.endX>C||r.endY>b)&&(r.endX+=c.x,r.endY+=c.y)}else{n=t-r.endX,s=e-r.endY,a=Math.max(n,s),c=this.getScaleRatio(a),r.endX+=c.x,r.endY+=c.y;var C=f+v<i.lowerCanvas.width?f+v:i.lowerCanvas.width,b=g+y<i.lowerCanvas.height?g+y:i.lowerCanvas.height;(r.endX>C||r.endY>b)&&(r.endX-=c.x,r.endY-=c.y)}r.width=r.endX-r.startX,r.height=r.endY-r.startY,this.revertResizing(l)}this.preventInverseResize(l)}},o.prototype.resizeImg=function(t,e,i,r){var n=this.parent,s=n.activeObj.activePoint,a,l,h,c;if(this.previousPoint.x!==0&&this.previousPoint.y!==0){if(this.currentDrawingShape==="text"&&(this.setCursor(t,e),n.activeObj.textSettings.fontSize===0)){n.activeObj.textSettings.fontSize=11,n.notify("shape",{prop:"updateFontRatio",onPropertyChange:!1,value:{obj:n.activeObj,isTextArea:null}}),n.activeObj.textSettings.text=n.activeObj.keyHistory="Enter Text",n.notify("shape",{prop:"updateFontStyles",onPropertyChange:!1,value:{isTextBox:null}});var u=this.upperContext.measureText(n.activeObj.textSettings.text).width+n.activeObj.textSettings.fontSize*.5;s.endX=s.startX+u,s.endY=s.startY+n.activeObj.textSettings.fontSize,s.width=s.endX-s.startX,s.height=s.endY-s.startY,r=m({},n.activeObj,null,!0),n.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:n.activeObj.activePoint,obj:n.activeObj,isMouseMove:null,x:null,y:null}})}switch(n.upperCanvas.style.cursor){case"se-resize":case"s-resize":this.previousPoint.x>t||this.previousPoint.y>e?(a=this.previousPoint.x-t,l=this.previousPoint.y-e,h=(a+l)/2,c=this.getScaleRatio(h),this.adjustRotationPoints(s,-Math.abs(c.x),-Math.abs(c.y),n.activeObj.rotatedAngle,"img-resize",i)):this.previousPoint.x!==0&&this.previousPoint.y!==0&&(a=t-this.previousPoint.x,l=e-this.previousPoint.y,h=(a+l)/2,c=this.getScaleRatio(h),this.adjustRotationPoints(s,Math.abs(c.x),Math.abs(c.y),n.activeObj.rotatedAngle,"img-resize",i));break;case"sw-resize":this.previousPoint.x<t||this.previousPoint.y>e?(a=t-this.previousPoint.x,l=this.previousPoint.y-e,h=(a+l)/2,c=this.getScaleRatio(h),this.adjustRotationPoints(s,-Math.abs(c.x),-Math.abs(c.y),n.activeObj.rotatedAngle,"img-resize",i)):this.previousPoint.x!==0&&this.previousPoint.y!==0&&(a=this.previousPoint.x-t,l=e-this.previousPoint.y,h=(a+l)/2,c=this.getScaleRatio(h),this.adjustRotationPoints(s,Math.abs(c.x),Math.abs(c.y),n.activeObj.rotatedAngle,"img-resize",i));break;case"w-resize":case"nw-resize":this.previousPoint.x<t||this.previousPoint.y<e?(a=t-this.previousPoint.x,l=e-this.previousPoint.y,h=(a+l)/2,c=this.getScaleRatio(h),this.adjustRotationPoints(s,-Math.abs(c.x),-Math.abs(c.y),n.activeObj.rotatedAngle,"img-resize",i)):this.previousPoint.x!==0&&this.previousPoint.y!==0&&(a=this.previousPoint.x-t,l=this.previousPoint.y-e,h=(a+l)/2,c=this.getScaleRatio(h),this.adjustRotationPoints(s,Math.abs(c.x),Math.abs(c.y),n.activeObj.rotatedAngle,"img-resize",i));break;case"n-resize":case"ne-resize":this.previousPoint.x>t||this.previousPoint.y<e?(a=this.previousPoint.x-t,l=e-this.previousPoint.y,h=(a+l)/2,c=this.getScaleRatio(h),this.adjustRotationPoints(s,-Math.abs(c.x),-Math.abs(c.y),n.activeObj.rotatedAngle,"img-resize",i)):this.previousPoint.x!==0&&this.previousPoint.y!==0&&(a=t-this.previousPoint.x,l=this.previousPoint.y-e,h=(a+l)/2,c=this.getScaleRatio(h),this.adjustRotationPoints(s,Math.abs(c.x),Math.abs(c.y),n.activeObj.rotatedAngle,"img-resize",i));break;case"e-resize":this.previousPoint.x>t||this.previousPoint.y>e?(a=this.previousPoint.x-t,l=this.previousPoint.y-e,h=(a+l)/2,c=this.getScaleRatio(h),this.adjustRotationPoints(s,-Math.abs(c.x),-Math.abs(c.y),n.activeObj.rotatedAngle,"img-resize",i)):this.previousPoint.x!==0&&this.previousPoint.y!==0&&(a=t-this.previousPoint.x,l=e-this.previousPoint.y,h=(a+l)/2,c=this.getScaleRatio(h),this.adjustRotationPoints(s,Math.abs(c.x),Math.abs(c.y),n.activeObj.rotatedAngle,"img-resize",i));break}s.width=s.endX-s.startX,s.height=s.endY-s.startY,(s.width<10||s.height<10||n.activeObj.shape==="text"&&n.activeObj.rotatedAngle===0&&this.preventTextDraggingInvertly())&&(n.activeObj=m({},r,null,!0))}this.previousPoint={x:t,y:e}},o.prototype.adjustNWPoints=function(t,e,i,r){var n=t.startX+t.width/2,s=t.startY+t.height/2,a=this.rotatePoints(t.endX,t.endY,n,s,r),l=[(a[0]+e)/2,(a[1]+i)/2],h=this.rotatePoints(a[0],a[1],l[0],l[1],-r),c=this.rotatePoints(e,i,l[0],l[1],-r);return t.endX=h[0],t.endY=h[1],t.startY=c[1],t.startX=c[0],t.width=t.endX-t.startX,t.height=t.endY-t.startY,t},o.prototype.adjustNEPoints=function(t,e,i,r){var n=t.startX+t.width/2,s=t.startY+t.height/2,a=this.rotatePoints(t.startX,t.endY,n,s,r),l=[(a[0]+e)/2,(a[1]+i)/2],h=this.rotatePoints(a[0],a[1],l[0],l[1],-r),c=this.rotatePoints(e,i,l[0],l[1],-r);return t.startX=h[0],t.endY=h[1],t.width=c[0]-h[0],t.height=h[1]-c[1],t.endX=t.startX+t.width,t.startY=t.endY-t.height,t},o.prototype.adjustSWPoints=function(t,e,i,r){var n=t.startX+t.width/2,s=t.startY+t.height/2,a=this.rotatePoints(t.endX,t.startY,n,s,r),l=[(a[0]+e)/2,(a[1]+i)/2],h=this.rotatePoints(a[0],a[1],l[0],l[1],-r),c=this.rotatePoints(e,i,l[0],l[1],-r);return t.endX=h[0],t.startY=h[1],t.startX=c[0],t.endY=c[1],t.width=t.endX-t.startX,t.height=t.endY-t.startY,t},o.prototype.adjustSEPoints=function(t,e,i,r){var n=t.startX+t.width/2,s=t.startY+t.height/2,a=this.rotatePoints(t.startX,t.startY,n,s,r),l=[(a[0]+e)/2,(a[1]+i)/2],h=this.rotatePoints(a[0],a[1],l[0],l[1],-r),c=this.rotatePoints(e,i,l[0],l[1],-r);return t.startX=h[0],t.startY=h[1],t.width=c[0]-h[0],t.height=c[1]-h[1],t.endX=t.startX+t.width,t.endY=t.startY+t.height,t},o.prototype.adjustRotationPoints=function(t,e,i,r,n,s){var a=t.startX+t.width/2,l=t.startY+t.height/2;this.getResizeDirection(t,e,i,r,n,s);var h=this.rotatePoints(t.startX,t.startY,a,l,r),c=this.rotatePoints(t.endX,t.startY,a,l,r),u=this.rotatePoints(t.endX,t.endY,a,l,r),p=this.rotatePoints(t.startX,t.endY,a,l,r),f=[(h[0]+u[0])/2,(h[1]+u[1])/2],g=this.rotatePoints(h[0],h[1],f[0],f[1],-r),v=this.rotatePoints(p[0],p[1],f[0],f[1],-r),y=this.rotatePoints(c[0],c[1],f[0],f[1],-r);return t.startX=g[0],t.startY=g[1],t.endX=y[0],t.endY=v[1],t.width=t.endX-t.startX,t.height=t.endY-t.startY,t},o.prototype.rotatePoints=function(t,e,i,r,n){return[(t-i)*Math.cos(n)-(e-r)*Math.sin(n)+i,(t-i)*Math.sin(n)+(e-r)*Math.cos(n)+r]},o.prototype.setResizedValue=function(t,e,i,r){switch(t){case"x":e+=i;break;case"y":e+=r;break;case"abs-x":e+=i>0?-i:Math.abs(i);break;case"abs-y":e+=r>0?-r:Math.abs(r);break;case"y-abs-x":e+=r+(i>0?-i:Math.abs(i))/2;break;case"abs-x-abs-y":e+=(i>0?-i:Math.abs(i))+(r>0?-r:Math.abs(r))/2;break;case"abs-y-x":e+=(r>0?-r:Math.abs(r))+i/2;break;case"x-y":e+=i+r/2;break;case"y-x":e+=r+i/2;break;case"img-resize-x":e+=i;break;case"img-resize-y":e+=r;break}return e},o.prototype.getResizeDirection=function(t,e,i,r,n,s){var a=r*(180/Math.PI),l=this.getResizedElement(a,this.resizedElement);this.resizedElement==="e-resize"?(t.width=this.setResizedValue(l,t.width,e,i),t.endX=t.width+t.startX):this.resizedElement==="n-resize"?(t.startY=this.setResizedValue(l,t.startY,e,i),t.height=t.endY-t.startY):this.resizedElement==="w-resize"?(t.startX=this.setResizedValue(l,t.startX,e,i),t.width=t.startX+t.endX):this.resizedElement==="s-resize"?(t.height=this.setResizedValue(l,t.height,e,i),t.endY=t.height+t.startY):n&&n==="img-resize"?(t.width=this.setResizedValue("img-resize-x",t.width,e,i),t.height=this.setResizedValue("img-resize-y",t.height,e,i),s==="se-resize"?(t.endX=t.width+t.startX,t.endY=t.height+t.startY):s==="sw-resize"?(t.startX=t.endX-t.width,t.endY=t.height+t.startY):s==="ne-resize"?(t.endX=t.width+t.startX,t.startY=t.endY-t.height):s==="nw-resize"&&(t.startX=t.endX-t.width,t.startY=t.endY-t.height)):n&&n==="text"&&(s==="widthHeight"?(t.width=this.setResizedValue("x-y",t.width,e,i),t.endX=t.width+t.startX,t.height=this.setResizedValue("y-x",t.height,e,i),t.endY=t.height+t.startY):s==="width"?(t.width=this.setResizedValue("x-y",t.width,e,i),t.endX=t.width+t.startX):s==="height"&&(t.height=this.setResizedValue("y-abs-x",t.height,e,i),t.endY=t.height+t.startY))},o.prototype.getResizedElement=function(t,e){var i=[];e==="n-resize"?i=[[337.5,360,"y"],[0,22.5,"y"],[22.5,67.5,"y-abs-x"],[67.5,112.5,"abs-x"],[112.5,157.5,"abs-x-abs-y"],[157.5,202.5,"abs-y"],[202.5,247.5,"abs-y-x"],[247.5,292.5,"x"],[292.5,337.5,"x-y"]]:e==="e-resize"?i=[[337.5,360,"x"],[0,22.5,"x"],[22.5,67.5,"x-y"],[67.5,112.5,"y"],[112.5,157.5,"y-abs-x"],[157.5,202.5,"abs-x"],[202.5,247.5,"abs-x-abs-y"],[247.5,292.5,"abs-y"],[292.5,337.5,"abs-y-x"]]:e==="s-resize"?i=[[337.5,360,"y"],[0,22.5,"y"],[22.5,67.5,"y-abs-x"],[67.5,112.5,"abs-x"],[112.5,157.5,"abs-x-abs-y"],[157.5,202.5,"abs-y"],[202.5,247.5,"abs-y-x"],[247.5,292.5,"x"],[292.5,337.5,"x-y"]]:e==="w-resize"&&(i=[[337.5,360,"x"],[0,22.5,"x"],[22.5,67.5,"x-y"],[67.5,112.5,"y"],[112.5,157.5,"y-abs-x"],[157.5,202.5,"abs-x"],[202.5,247.5,"abs-x-abs-y"],[247.5,292.5,"abs-y"],[292.5,337.5,"abs-y-x"]]);for(var r=t<0?360-Math.abs(t):t,n=0,s=i;n<s.length;n++){var a=s[n],l=a[0],h=a[1],c=a[2];if(r>l&&r<=h||r+360>l&&r+360<=h)return c}return e},o.prototype.updateCursorStyles=function(t,e,i){var r=this.parent,n=!1;r.activeObj.keyHistory!==""&&r.activeObj.shape===void 0&&!r.currObjType.isCustomCrop&&!r.currObjType.isLine&&r.currObjType.isText&&(r.activeObj.shape="text");var s=m({},r.activeObj,{},!0);if(!d(s.topLeftCircle)){var a;if(s.shapeDegree===0?a=r.transform.degree:a=r.transform.degree-s.shapeDegree,a<0&&(a=360+a),this.isObjSelected)if(s.shape==="line"||s.shape==="arrow")n=this.updateCursorStylesForLineArrow(t,e,s);else if(s.shape==="path")n=this.updateCursorStylesForPath(t,e,s);else if(s.rotatedAngle)this.setCursorForRotatedObject(s,t,e,r.upperCanvas),r.cursor==="grabbing"?(r.upperCanvas.style.cursor=r.cursor="grabbing",this.dragElement=r.cursor):r.cursor==="move"?(this.dragPoint.startX=this.previousPoint.x=this.dragPoint.endX=t,this.dragPoint.startY=this.previousPoint.y=this.dragPoint.endY=e):r.cursor!=="default"&&(n=!0,this.dragElement=r.cursor,r.currObjType.isResize=!0);else{var l=this.getTransRotationPoint(s),h=s.topLeftCircle.radius;l&&t>=l.x-h*2&&t<=l.x+h*2&&e>=l.y-h*2&&e<=l.y+h*2&&this.dragElement!=="grabbing"?(r.upperCanvas.style.cursor=r.cursor="grabbing",this.dragElement=r.upperCanvas.style.cursor):t>=s.topLeftCircle.startX-h*2&&t<=s.topLeftCircle.startX+h*2&&e>=s.topLeftCircle.startY-h*2&&e<=s.topLeftCircle.startY+h*2&&this.dragElement!=="nw-resize"?(s.topLeftCircle.startX=s.topLeftCircle.startY=0,r.upperCanvas.style.cursor=r.cursor="nw-resize",n=!0,this.dragElement=r.upperCanvas.style.cursor):t>=s.topLeftCircle.startX-h*2&&t<=s.topRightCircle.startX-h*2&&e>=s.topCenterCircle.startY-h*2&&e<=s.topCenterCircle.startY+h*2&&this.dragElement!=="n-resize"?(s.topCenterCircle.startX=s.topCenterCircle.startY=0,r.upperCanvas.style.cursor=r.cursor="n-resize",n=!0,this.dragElement=r.upperCanvas.style.cursor):t>=s.topRightCircle.startX-h*2&&t<=s.topRightCircle.startX+h*2&&e>=s.topRightCircle.startY-h*2&&e<=s.topRightCircle.startY+h*2&&this.dragElement!=="ne-resize"?(s.topRightCircle.startX=s.topRightCircle.startY=0,r.upperCanvas.style.cursor=r.cursor="ne-resize",n=!0,this.dragElement=r.upperCanvas.style.cursor):t>=s.centerLeftCircle.startX-h*2&&t<=s.centerLeftCircle.startX+h*2&&e>=s.topLeftCircle.startY-h*2&&e<=s.bottomLeftCircle.startY-h*2&&this.dragElement!=="w-resize"?(s.centerLeftCircle.startX=s.centerLeftCircle.startY=0,r.upperCanvas.style.cursor=r.cursor="w-resize",n=!0,this.dragElement=r.upperCanvas.style.cursor):t>=s.centerRightCircle.startX-h*2&&t<=s.centerRightCircle.startX+h*2&&e>=s.topRightCircle.startY-h*2&&e<=s.bottomRightCircle.startY-h*2&&this.dragElement!=="e-resize"?(s.centerRightCircle.startX=s.centerRightCircle.startY=0,r.upperCanvas.style.cursor=r.cursor="e-resize",n=!0,this.dragElement=r.upperCanvas.style.cursor):t>=s.bottomLeftCircle.startX-h*2&&t<=s.bottomLeftCircle.startX+h*2&&e>=s.bottomLeftCircle.startY-h*2&&e<=s.bottomLeftCircle.startY+h*2&&this.dragElement!=="sw-resize"?(s.bottomLeftCircle.startX=s.bottomLeftCircle.startY=0,r.upperCanvas.style.cursor=r.cursor="sw-resize",n=!0,this.dragElement=r.upperCanvas.style.cursor):t>=s.bottomLeftCircle.startX-h*2&&t<=s.bottomRightCircle.startX-h*2&&e>=s.bottomCenterCircle.startY-h*2&&e<=s.bottomCenterCircle.startY+h*2&&this.dragElement!=="s-resize"?(s.bottomCenterCircle.startX=s.bottomCenterCircle.startY=0,r.upperCanvas.style.cursor=r.cursor="s-resize",n=!0,this.dragElement=r.upperCanvas.style.cursor):t>=s.bottomRightCircle.startX-h*2&&t<=s.bottomRightCircle.startX+h*2&&e>=s.bottomRightCircle.startY-h*2&&e<=s.bottomRightCircle.startY+h*2&&this.dragElement!=="se-resize"?(s.bottomRightCircle.startX=s.bottomRightCircle.startY=0,r.upperCanvas.style.cursor=r.cursor="se-resize",n=!0,this.dragElement=r.upperCanvas.style.cursor):(this.dragPoint.startX=this.previousPoint.x=this.dragPoint.endX=t,this.dragPoint.startY=this.previousPoint.y=this.dragPoint.endY=e),s.shape==="text"&&(r.cursor==="n-resize"||r.cursor==="s-resize"||r.cursor==="e-resize"||r.cursor==="w-resize")&&(r.upperCanvas.style.cursor=r.cursor="move",this.dragElement="",this.dragPoint.startX=this.previousPoint.x=this.dragPoint.endX=t,this.dragPoint.startY=this.previousPoint.y=this.dragPoint.endY=e)}else this.dragPoint.startX=this.previousPoint.x=this.dragPoint.endX=t,this.dragPoint.startY=this.previousPoint.y=this.dragPoint.endY=e;this.previousPoint.x=this.previousPoint.y=this.diffPoint.x=this.diffPoint.y=0,i==="touchstart"?n||t>=s.activePoint.startX&&t<=s.activePoint.endX&&e>=s.activePoint.startY&&e<=s.activePoint.endY||this.dragElement==="grabbing"?r.currObjType.isDragging=!0:s.shape==="line"||s.shape==="arrow"?(this.setCursorForLineArrow(s,t,e,r.upperCanvas),r.cursor==="move"&&(r.currObjType.isDragging=!0)):s.shape==="path"&&(this.setCursorForPath(s,t,e,r.upperCanvas),r.cursor==="move"&&(r.currObjType.isDragging=!0)):r.currObjType.isDragging=!0,s.rotatedAngle!==0&&(this.dragElement==="e-resize"||this.dragElement==="w-resize"||this.dragElement==="n-resize"||this.dragElement==="s-resize")&&(this.dragPoint.startX=this.previousPoint.x=this.dragPoint.endX=t,this.dragPoint.startY=this.previousPoint.y=this.dragPoint.endY=e)}},o.prototype.updateCursorStylesForLineArrow=function(t,e,i){for(var r=!1,n=this.parent,s,a=i.topLeftCircle.radius,l=0;l<5;l++)if(s=i.pointColl[l],t>=s.x-a*2&&t<=s.x+a*2&&e>=s.y-a*2&&e<=s.y+a*2){i.centerLeftCircle.startX=i.centerLeftCircle.startY=0,this.dragElement="w-resize",r=!0;break}if(!r){for(var l=1;l<6;l++)if(s=i.pointColl[i.pointColl.length-l],t>=s.x-a*2&&t<=s.x+a*2&&e>=s.y-a*2&&e<=s.y+a*2){i.centerRightCircle.startX=i.centerRightCircle.startY=0,this.dragElement="e-resize",r=!0;break}}if(!r)for(var l=0;l<i.pointColl.length;l++)if(s=i.pointColl[l],t>=s.x-a*2&&t<=s.x+a*2&&e>=s.y-a*2&&e<=s.y+a*2){n.upperCanvas.style.cursor=n.cursor="move",this.dragPoint.startX=this.previousPoint.x=this.dragPoint.endX=t,this.dragPoint.startY=this.previousPoint.y=this.dragPoint.endY=e;break}else n.upperCanvas.style.cursor=n.cursor="default";return r},o.prototype.updateCursorStylesForPath=function(t,e,i){var r=!1,n=this.parent;return this.pathAdjustedIndex=this.setCursorForLineArrow(i,t,e,n.upperCanvas),n.cursor==="move"&&(r=!0,this.dragElement="pathDrag"),r||(n.upperCanvas.style.cursor=n.cursor="move",this.dragPoint.startX=this.previousPoint.x=this.dragPoint.endX=t,this.dragPoint.startY=this.previousPoint.y=this.dragPoint.endY=e),r},o.prototype.setTextSelection=function(t,e){var i=this.parent,r=i.activeObj.activePoint,n=i.transform.degree;i.activeObj.shapeDegree===0?n=i.transform.degree:n=i.transform.degree-i.activeObj.shapeDegree;var s=i.activeObj.rotateFlipColl;if(this.isTransformedShape&&s){n=0;for(var a=0;a<s.length;a++)typeof s[a]=="number"&&(n+=s[a])}n<0&&(n=360+n);for(var a=0,l=i.activeObj.flipObjColl.length;a<l;a++){var h=i.activeObj.flipObjColl[a].toLowerCase();switch(n){case 0:switch(h){case"horizontal":r={startX:r.endX-t,startY:r.startY,endX:r.endX,endY:r.startY+(e||0)};break;case"vertical":r.startY=r.endY-e,r={startX:r.startX,startY:r.startY,endX:r.startX+(t||0),endY:r.endY};break;default:r={startX:r.startX,startY:r.startY,endX:r.startX+(t||0),endY:r.startY+(e||0)};break}break;case 90:switch(h){case"horizontal":r.endX=r.startX+e,r={startX:r.startX,startY:r.startY,endX:r.endX,endY:r.startY+(t||0)};break;case"vertical":r.startX=r.endX-e,r={startX:r.startX,startY:r.endY-t,endX:r.endX,endY:r.endY};break;default:r.startX=r.endX-e,r={startX:r.startX,startY:r.startY,endX:r.endX,endY:r.startY+(t||0)};break}break;case 180:switch(h){case"horizontal":r.startY=r.endY-e,r={startX:r.startX,startY:r.startY,endX:r.startX+t,endY:r.endY};break;case"vertical":r.endY=r.startY+e,r={endX:r.endX,endY:r.endY,startX:r.endX-(t||0),startY:r.startY};break;default:r={endX:r.endX,endY:r.endY,startX:r.endX-(t||0),startY:r.endY-(e||0)};break}break;case 270:switch(h){case"horizontal":r.startX=r.endX-e,r={startX:r.startX,startY:r.endY-(t||0),endX:r.endX,endY:r.endY};break;case"vertical":r={startX:r.startX,startY:r.startY,endX:r.startX+e,endY:r.startY+(t||0)};break;default:r.endX=r.startX+e,r={startX:r.startX,startY:r.endY-(t||0),endX:r.endX,endY:r.endY};break}break}}if(i.activeObj.flipObjColl.length===0)switch(n){case 0:r={startX:r.startX,startY:r.startY,endX:r.startX+(t||0),endY:r.startY+(e||0)};break;case 90:r.startX=r.endX-e,r={startX:r.startX,startY:r.startY,endX:r.endX,endY:r.startY+(t||0)};break;case 180:r={endX:r.endX,endY:r.endY,startX:r.endX-(t||0),startY:r.endY-(e||0)};break;case 270:r.endX=r.startX+e,r={startX:r.startX,startY:r.endY-(t||0),endX:r.endX,endY:r.endY};break}r.width=r.endX-r.startX,r.height=r.endY-r.startY,i.activeObj.activePoint=r,(i.transform.degree===360||i.transform.degree===-360)&&(i.transform.degree=0)},o.prototype.setActivePoint=function(t,e){var i=this.parent,r=i.activeObj.activePoint;if(!d(r))if(i.currObjType.isText){var n=t||0,s=e||i.activeObj.textSettings.fontSize;i.activeObj.textSettings.fontSize===void 0&&(i.activeObj.textSettings.fontSize=Math.abs(i.baseImgCanvas.width-i.baseImgCanvas.height)*.1),this.setTextSelection(n,s),this.mouseDownPoint.x=r.endX,this.mouseDownPoint.y=r.endY,i.activeObj.horTopLine!==void 0&&(i.activeObj.activePoint=m({},r,{},!0)),i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}})}else if(t&&e)r.startX=this.mouseDownPoint.x=t,r.startY=this.mouseDownPoint.y=e,i.currObjType.isDragging=!0;else{var a=i.activeObj;r={startX:a.horTopLine.startX,startY:a.horTopLine.startY,endX:a.horTopLine.endX,endY:a.horTopLine.endY},r.width=r.endX-r.startX,r.height=r.endY-r.startY}},o.prototype.mouseDownEventHandler=function(t){var e=this.parent;if(e.isKBDNavigation=!1,this.mouseDown=t.currentTarget===e.lowerCanvas||t.currentTarget===e.upperCanvas?"canvas":"",t.type==="touchstart"?this.isTouch=!0:this.isTouch=!1,!(t.type==="touchstart"&&t.currentTarget===e.lowerCanvas&&!e.isImageLoaded)){this.isCropSelection=!1,this.isPan=!0;var i;if(e.activeObj.shape!==void 0&&(i=e.activeObj.shape.split("-")),i!==void 0&&i[0]==="crop"&&(this.isCropSelection=!0),this.isCropSelection&&(this.dragCanvas=e.togglePan=!0),e.cursor==="grabbing"){var r={shapeSettingsObj:{}};this.isGrabbing=!0,e.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:r}});var n=r.shapeSettingsObj,s={cancel:!1,action:"rotate-start",previousShapeSettings:n,allowShapeOverflow:this.allowOutofBound()},a={cancel:!1,action:"rotate-start",previousShapeSettings:n,allowShapeOverflow:this.allowOutofBound()};this.triggerShapeChange(s,a,"mouse-down")}var l={point:this.setXYPoints(t)};e.trigger("click",l),this.isMouseDown=!0,this.isMouseUp=!1,this.clickEvent(l,t)}},o.prototype.getImagePoints=function(t,e){var i=this.parent,r=i.img,n=r.destLeft,s=r.destTop,a=r.destWidth,l=r.destHeight;return t<n?t=n:t>n+a&&(t=n+a),e<s?e=s:e>s+l&&(e=s+l),{x:t,y:e}},o.prototype.clickEvent=function(t,e){var i=this.parent,r=i.activeObj.activePoint,n=t.point.x,s=t.point.y,a=i.activeObj.shape&&i.activeObj.shape==="text"?i.cursor:"default",l=i.upperCanvas.style.cursor;if(i.isResize){this.performEnterAction(e),i.upperCanvas.style.cursor="default";return}else if(JSON.stringify(i.frameObj)!==JSON.stringify(i.tempFrameObj))i.okBtn();else if(this.currentDrawingShape!==""&&!this.isShapeTouch(e,this.isCropSelection)&&(this.isTouch||l==="crosshair"||i.isShapeDrawing)){i.drawingShape&&!i.isShapeDrawing&&(i.okBtn(),i.enableShapeDrawing(i.toPascalCase(i.drawingShape),!0)),r=i.activeObj.activePoint;var h={currObj:{}};i.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:h}}),this.initialPrevObj=h.currObj,this.initialPrevObj.objColl=m([],i.objColl,[],!0),this.initialPrevObj.pointColl=m([],i.pointColl,[],!0),this.initialPrevObj.afterCropActions=m([],i.afterCropActions,[],!0);var c={selPointColl:null};if(i.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:c}}),this.initialPrevObj.selPointColl=m([],c.selPointColl,[],!0),this.setActivePoint(n,s),r=i.activeObj.activePoint,this.currentDrawingShape==="path"){var u=this.getImagePoints(n,s);i.activeObj.pointColl.push({x:u.x,y:u.y}),r.width!==0&&r.height!==0&&(r.width=0,r.height=0,r.startX=i.activeObj.pointColl[i.activeObj.pointColl.length-1].x,r.startY=i.activeObj.pointColl[i.activeObj.pointColl.length-1].y)}if(r.endX=r.startX,r.endY=r.startY,this.currentDrawingShape==="text"){i.activeObj.textSettings.fontSize=11,this.previousPoint.x=r.startX,this.previousPoint.y=r.startY,i.notify("shape",{prop:"updateFontStyles",onPropertyChange:!1,value:{isTextBox:null}});var p=this.upperContext.measureText(i.activeObj.textSettings.text).width+i.activeObj.textSettings.fontSize*.5;r.endX=r.startX+p,r.endY=r.startY+i.activeObj.textSettings.fontSize,r.width=r.endX-r.startX,r.height=r.endY-r.startY}else this.currentDrawingShape==="arrow"&&(i.activeObj.start=this.arrowShape[0],i.activeObj.end=this.arrowShape[1]);i.currObjType.isDragging=!0;var f=this.updatePrevShapeSettings(),g={cancel:!1,action:"draw-start",previousShapeSettings:f,allowShapeOverflow:this.allowOutofBound()},v={cancel:!1,action:"move",previousShapeSettings:f,allowShapeOverflow:this.allowOutofBound()};this.shapeResizingArgs=g,this.shapeMovingArgs=v,this.triggerShapeChange(g,v,"mouse-down"),i.activeObj.activePoint=r,i.isShapeDrawing=!0,this.tempActiveObj=m({},i.activeObj,{},!0);return}i.notify("draw",{prop:"resetFrameZoom",onPropertyChange:!1,value:{isOk:!0}}),this.isCropSelection&&this.dragCanvas&&(this.setCursor(n,s),i.cursor!=="move"&&i.cursor!=="crosshair"&&i.cursor!=="default"&&i.cursor!=="grab"&&(this.isPan=!1)),i.activeObj.shape?this.isObjSelected=!0:this.isObjSelected=!1;var y={currObj:{}};i.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:y}});var C=y.currObj,b=m({},i.activeObj,null,!0),M=this.isShapeTouch(e,this.isCropSelection),S=this.isFreehandDrawTouch(e,this.isCropSelection),N=M||this.isShapeClick(e,this.isCropSelection),x=this.applyCurrShape(N),A=i.textArea.style.display!=="none";if(this.isTouch&&!M&&b.shape&&!this.isCropSelection){this.applyObj(n,s)&&(i.okBtn(!0),i.notify("draw",{prop:"setPrevActObj",onPropertyChange:!1,value:{prevActObj:null}}));var U=m({},i.cropObj,{},!0);i.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:C,previousObjColl:C.objColl,previousPointColl:C.pointColl,previousSelPointColl:C.selPointColl,previousCropObj:U,previousText:null,currentText:null,previousFilter:null,isCircleCrop:i.isCircleCrop}}),x&&i.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}})}if(!M&&!i.togglePen&&!this.isCropSelection&&i.activeObj.redactType!=="blur"&&i.activeObj.redactType!=="pixelate"&&(i.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1}),i.notify("toolbar",{prop:"close-contextual-toolbar",onPropertyChange:!1})),this.dragCanvas&&this.isPan&&(i.cursor==="grab"||this.isTouch)&&!M&&!S&&!i.togglePen){if(this.applyObj(n,s)){if(i.okBtn(!0),x){var z=i.cursor;i.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}),i.cursor=z}i.notify("draw",{prop:"setPrevActObj",onPropertyChange:!1,value:{prevActObj:null}})}this.isFhdEditing&&(i.notify("freehand-draw",{prop:"applyFhd",onPropertyChange:!1}),this.isFhdCustomized=!1,i.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1}));var J=i.activeObj.shape,R=["rectangle","ellipse","line","arrow","path","text","image","redact"];J&&R.indexOf(J)>-1&&(i.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}}),i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),i.notify("toolbar",{prop:"setCurrentToolbar",value:{type:"main"}}),i.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1}));var _=!1;i.activeObj.shape&&i.activeObj.shape.indexOf("crop-")>-1&&(_=!0),i.element.querySelector(".e-contextual-toolbar-wrapper")&&!_&&(i.element.querySelector(".e-contextual-toolbar-wrapper").classList.contains("e-hide")||(i.okBtn(),i.element.querySelector(".e-contextual-toolbar-wrapper").classList.add("e-hide"))),this.canvasMouseDownHandler(e)}else{var B=!1;i.activeObj.shape&&(i.activeObj.shape==="line"||i.activeObj.shape==="arrow")&&(B=!0);var E=this.setXYPoints(e),L=E.x,P=E.y;if(this.applyObj(L,P)){if(i.okBtn(!0),x){var j=i.cursor;i.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}),i.cursor=j}i.notify("draw",{prop:"setPrevActObj",onPropertyChange:!1,value:{prevActObj:null}})}i.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:L,y:P,isMouseDown:!0}});var k={index:null};i.notify("freehand-draw",{prop:"getFreehandDrawHoveredIndex",onPropertyChange:!1,value:{obj:k}});var F={freehandSelectedIndex:null};if(i.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:F}}),this.isFhdPoint||this.isFhdCustomized&&!i.togglePen){if(!d(F.freehandSelectedIndex)&&F.freehandSelectedIndex!==k.index){var X=k.index;if(i.okBtn(),this.isFhdCustomized=!1,i.notify("freehand-draw",{prop:"setFreehandDrawHoveredIndex",onPropertyChange:!1,value:{index:X}}),k.index>-1){var re=i.pointColl[k.index].strokeColor;i.notify("freehand-draw",{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:re,strokeWidth:i.pointColl[k.index].strokeWidth}})}}F.freehandSelectedIndex=null,i.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:F}});var q=m([],i.objColl,[],!0);if(!d(k.index)&&k.index>-1)i.notify("freehand-draw",{prop:"selectFhd",value:{type:"ok"}}),i.notify("freehand-draw",{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:null,strokeWidth:null}}),i.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:!0}});else if(F.freehandSelectedIndex){i.okBtn();var re=i.pointColl[F.freehandSelectedIndex].strokeColor;i.notify("freehand-draw",{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:re,strokeWidth:i.pointColl[F.freehandSelectedIndex].strokeWidth}})}else this.findTargetObj(L,P,!1)&&(i.objColl=q,this.findTarget(L,P,e.type),i.notify("draw",{prop:"redrawDownScale"}))}else{if(this.isFhdEditing){i.apply();var ie=document.getElementById(i.element.id+"_quickAccessToolbarArea");ie&&(ie.style.display="none");var u=i.pointColl[F.freehandSelectedIndex],ue={id:"pen_"+(F.freehandSelectedIndex+1),type:xi.FreehandDraw,startX:u.points[0].x,startY:u.points[0].y,strokeColor:u.strokeColor,strokeWidth:u.strokeWidth,points:u.points,opacity:u.opacity,index:u.order},fe={action:"apply",currentShapeSettings:m({},ue,{},!0)};i.trigger("shapeChange",fe),i.editCompleteArgs=fe}var se=i.togglePen;if(i.notify("toolbar",{prop:"close-contextual-toolbar",onPropertyChange:!1}),se&&i.freeHandDraw(!0),this.isFhdEditing=!1,B?this.setCursor(L,P):a!=="default"&&(i.upperCanvas.style.cursor=i.cursor=a),i.cursor==="crosshair"||D.isDevice&&i.togglePen){if(i.togglePen){if(d(i.activeObj.strokeSettings)){var Oe={strokeSettings:{}};i.notify("shape",{prop:"getStrokeSettings",onPropertyChange:!1,value:{obj:Oe}}),i.activeObj.strokeSettings=Oe.strokeSettings}var qe={penStrokeWidth:null};i.notify("freehand-draw",{prop:"getPenStrokeWidth",onPropertyChange:!1,value:{obj:qe}}),d(qe.penStrokeWidth)&&i.notify("freehand-draw",{prop:"setPenStrokeWidth",onPropertyChange:!1,value:{value:2}}),this.upperContext.strokeStyle=i.activeObj.strokeSettings.strokeColor,this.upperContext.fillStyle=i.activeObj.strokeSettings.strokeColor,i.notify("freehand-draw",{prop:"resetSelPoints",onPropertyChange:!1}),i.notify("freehand-draw",{prop:"freehandDownHandler",onPropertyChange:!1,value:{e,canvas:i.upperCanvas}})}else i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height);i.currObjType.isActiveObj=!1,this.dragElement="",this.dragPoint.startX=this.dragPoint.startY=this.dragPoint.endX=this.dragPoint.endY=0}(this.isTouch&&l!=="crosshair"||i.cursor!=="crosshair")&&e.type.toLowerCase()==="touchstart"||i.currObjType.isActiveObj&&i.cursor!=="default"&&!i.togglePen?(i.notify("draw",{prop:"updateTempObjColl"}),i.notify("draw",{prop:"updateTempPointColl"}),this.findTarget(L,P,e.type),i.notify("draw",{prop:"redrawDownScale"})):(i.currObjType.shape===""||i.currObjType.isCustomCrop)&&!i.togglePen&&i.cursor!=="default"&&this.setActivePoint(L,P),A&&i.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}})}}this.isShapeInserted=!1,this.tempActiveObj=m({},i.activeObj,{},!0)},o.prototype.mouseMoveEventHandler=function(t){var e=this.parent,i=e.cursor,r=e.upperCanvas.style.cursor;if(t.preventDefault(),!(this.isPreventShaping||e.isShapeDrawing&&e.currObjType.isDragging&&this.isTouch&&e.activeObj.shape&&e.activeObj.shape==="path")){if(e.cursor==="grabbing"&&this.isGrabbing){var n={shapeSettingsObj:{}};e.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:n}});var s=n.shapeSettingsObj,a={cancel:!1,action:"rotating",previousShapeSettings:s,allowShapeOverflow:this.allowOutofBound()},l={cancel:!1,action:"rotating",previousShapeSettings:s,allowShapeOverflow:this.allowOutofBound()};this.triggerShapeChange(a,l,"mouse-down")}if(this.timer&&this.timer>0&&this.dragPoint.startX&&this.dragPoint.startY){var h=Math.abs(this.dragPoint.startX-t.touches[0].clientX),c=Math.abs(this.dragPoint.startY-t.touches[0].clientY);(h>10||c>10)&&(this.timer=0)}var u=e.lowerCanvas.getBoundingClientRect();if(t.type==="touchmove"&&t.touches.length===2){if(this.isFirstMove)this.startTouches=this.targetTouches(t.touches),this.tempTouches=[],this.tempTouches.push({x:t.touches[0].clientX||t.touches[0].pageX-e.lowerCanvas.offsetLeft-u.left,y:(t.touches[0].clientY||t.touches[0].pageY-e.lowerCanvas.offsetTop)-u.top}),this.tempTouches.push({x:(t.touches[1].clientX||t.touches[1].pageX-e.lowerCanvas.offsetLeft)-u.left,y:(t.touches[1].clientY||t.touches[1].pageY-e.lowerCanvas.offsetTop)-u.top});else{var p=(t.touches[0].clientX||t.touches[0].pageX-e.lowerCanvas.offsetLeft)-u.left,f=(t.touches[0].clientY||t.touches[0].pageY-e.lowerCanvas.offsetTop)-u.top,g=(t.touches[1].clientX||t.touches[1].pageX-e.lowerCanvas.offsetLeft)-u.left,v=(t.touches[1].clientY||t.touches[1].pageY-e.lowerCanvas.offsetTop)-u.top,y={x:p<g?g-(g-p)/2:p-(p-g)/2,y:f<v?v-(v-f)/2:f-(f-v)/2};if(this.currMousePoint.x!==y.x&&this.currMousePoint.y!==y.y){var C="";if(t.type==="touchmove"&&(e.zoomSettings.zoomTrigger&et.Pinch)===et.Pinch){this.zoomType="Pinch";var b=this.calculateScale(this.startTouches,this.targetTouches(t.touches));this.startTouches=this.targetTouches(t.touches),b>1?C="zoomIn":b<1&&(C="zoomOut")}C!==""&&(e.isZoomBtnClick=!0,e.notify("draw",{prop:"performPointZoom",onPropertyChange:!1,value:{x:y.x,y:y.y,type:C,isResize:null}})),this.tempTouches=[],this.tempTouches.push({x:t.touches[0].clientX||t.touches[0].pageX-e.lowerCanvas.offsetLeft,y:t.touches[0].clientY||t.touches[0].pageY-e.lowerCanvas.offsetTop}),this.tempTouches.push({x:t.touches[1].clientX||t.touches[1].pageX-e.lowerCanvas.offsetLeft,y:t.touches[1].clientY||t.touches[1].pageY-e.lowerCanvas.offsetTop}),this.currMousePoint.x=y.x,this.currMousePoint.y=y.y,this.isPinching=!0}}this.isFirstMove=!1;return}var M,S;t.type==="mousemove"?(M=t.clientX,S=t.clientY):(this.touchEndPoint.x=M=t.touches[0].clientX,this.touchEndPoint.y=S=t.touches[0].clientY),M-=u.left,S-=u.top,this.canvasMouseMoveHandler(t);var N=!1,x;e.activeObj.shape!==void 0&&(x=e.activeObj.shape.split("-")),x!==void 0&&x[0]==="crop"&&(N=!0),N&&e.notify("transform",{prop:"disableZoomOutBtn",value:{isZoomOut:!0}}),e.upperCanvas.style.cursor=r,e.cursor=i,(e.currObjType.isActiveObj&&(e.activeObj.activePoint!==void 0||e.objColl.length>0)&&!this.dragCanvas||e.activeObj.activePoint!==void 0)&&this.dragElement===""&&(this.setCursor(M,S),e.activeObj.activePoint&&(e.activeObj.activePoint.width===0||!d(e.activeObj.currIndex)&&this.cursorTargetId!==e.activeObj.currIndex)&&e.cursor!=="default"&&e.cursor!=="move"&&e.cursor!=="crosshair"&&e.cursor!=="grab"&&e.cursor!=="pointer"&&(e.upperCanvas.style.cursor=e.cursor="move"),this.findTarget(M,S,t.type));var A=e.img,U=A.destLeft,z=A.destTop,J=A.destWidth,R=A.destHeight;if(e.currObjType.isDragging){if(e.activeObj.shape&&e.activeObj.preventShapeDragOut&&(M<U||M>U+J||S<z||S>z+R))return;this.upperContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),this.updateActivePoint(M,S,N),e.notify("shape",{prop:"updateTrianglePoints",onPropertyChange:!1,value:{obj:e.activeObj}}),this.isPreventDragging?(this.isShapeDragOut()||(this.isPreventDragging=!1),e.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:null,isCropRatio:null,points:null,isPreventDrag:!0,saveContext:null,isPreventSelection:null}})):e.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:null,isCropRatio:null,points:null,isPreventDrag:null,saveContext:null,isPreventSelection:null}}),N&&(this.dragCanvas=e.togglePan=!0)}this.isMouseDown=!1,this.isMouseUp=!1}},o.prototype.mouseUpEventHandler=function(t){var e=this.parent,i=e.element.id;if(e.isKBDNavigation=this.isMouseDown=!1,this.isMouseUp=!0,!(!D.isDevice&&(e.element.querySelector("#"+i+"_contextualToolbar")&&!e.element.querySelector("#"+i+"_contextualToolbar").parentElement.classList.contains("e-hide")||e.element.querySelector("#"+i+"_headWrapper")&&!e.element.querySelector("#"+i+"_headWrapper").parentElement.classList.contains("e-hide"))&&!(e.activeObj.shape&&e.activeObj.shape==="redact"&&e.isShapeDrawing))){if(e.cursor==="grabbing"&&this.isGrabbing){var r={shapeSettingsObj:{}};e.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:r}});var n=r.shapeSettingsObj,s={cancel:!1,action:"rotate-end",previousShapeSettings:n,allowShapeOverflow:this.allowOutofBound()},a={cancel:!1,action:"rotate-end",previousShapeSettings:n,allowShapeOverflow:this.allowOutofBound()};this.triggerShapeChange(s,a,"mouse-up")}if(this.isGrabbing=!1,this.isPreventShaping&&(this.isPreventShaping=!1),this.mouseDown==="canvas"||this.isSliderActive||t.target.closest(".e-image-editor")||t.target.closest(".e-ie-ddb-popup")){t.type==="touchstart"?this.isTouch=!1:t.type==="touchend"&&t.stopImmediatePropagation(),t.preventDefault(),e.togglePan&&this.canvasMouseUpHandler(t);var l=void 0,h=void 0;t.type==="mouseup"?(l=t.clientX,h=t.clientY):this.isTouchDblClick||(l=this.touchEndPoint.x,h=this.touchEndPoint.y);var c=e.lowerCanvas.getBoundingClientRect();l-=c.left,h-=c.top;var u=void 0,p=this.currentDrawingShape,f=!1;if(t.type==="touchend"&&(this.startTouches=this.tempTouches=[],this.isFirstMove=!1,e.textArea.style.display==="none"&&(this.timer=0),this.isPinching)){this.isPinching=!1,e.notify("draw",{prop:"redrawDownScale"}),(e.isCropTab||e.activeObj.shape)&&(e.notify("draw",{prop:"setStraightenActObj",value:{activeObj:null}}),e.notify("freehand-draw",{prop:"resetStraightenPoint"})),e.isStraightening&&(e.notify("draw",{prop:"resetStraightenDestPoints"}),e.notify("draw",{prop:"setDestForStraighten"}));return}var g=!1,v=void 0;if(e.activeObj.shape!==void 0&&(v=e.activeObj.shape.split("-")),v!==void 0&&v[0]==="crop"&&(g=!0),this.currentDrawingShape==="path"&&e.isShapeDrawing){var y=t.srcElement,C=y.parentElement.id,b=e.element.id;t.currentTarget!==e.upperCanvas&&t.currentTarget!==e.lowerCanvas&&e.activeObj.pointColl.length>0&&(y.classList.contains("e-upload-icon")||C===b+"_zoomIn"||C===b+"_zoomOut"||C===b+"_annotationBtn"||C===b+"_borderColorBtn"||C===b+"_borderWidthBtn")&&(e.notify("shape",{prop:"stopPathDrawing",onPropertyChange:!1,value:{e:t,isApply:!0}}),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),e.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:e.activeObj,isCropRatio:null,points:null,isPreventDrag:!0,saveContext:null,isPreventSelection:!0}})),e.currObjType.isDragging&&this.isTouch&&e.activeObj.shape&&e.activeObj.shape==="path"&&(this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),e.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:e.activeObj,isCropRatio:null,points:null,isPreventDrag:!0,saveContext:null,isPreventSelection:!0}}));return}if(t.currentTarget===e.upperCanvas&&!e.isResize){if(this.pathAdjustedIndex=null,this.currentDrawingShape!==""){if(this.currentDrawingShape==="text"){var M=m({},e.cropObj,{},!0);e.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeInsert",previousObj:this.initialPrevObj,previousObjColl:this.initialPrevObj.objColl,previousPointColl:this.initialPrevObj.pointColl,previousSelPointColl:this.initialPrevObj.selPointColl,previousCropObj:M,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}})}else e.notify("undo-redo",{prop:"updateUrObj",onPropertyChange:!1,value:{objColl:this.initialPrevObj.objColl,operation:"shapeInsert"}});this.isShapeInserted=!0,this.currentDrawingShape="",(e.activeObj.shape&&e.activeObj.shape==="path"&&e.activeObj.pointColl.length===0||(!e.activeObj.shape||e.activeObj.shape!=="path")&&e.activeObj.activePoint.width===0&&e.activeObj.activePoint.height===0)&&(f=!0,e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height));var S=this.updatePrevShapeSettings(),s={cancel:!1,action:"draw-end",previousShapeSettings:S},a={cancel:!1,action:"move",previousShapeSettings:S};this.shapeResizingArgs=s,this.shapeMovingArgs=a,this.triggerShapeChange(s,a,"mouse-up")}e.activeObj.shape&&e.activeObj.shape==="path"&&e.activeObj.pointColl.length>0&&(e.activeObj.activePoint=e.getSquarePointForPath(e.activeObj)),this.adjustActObjForLineArrow(),this.updPtCollForShpRot(),e.currObjType.shape=e.currObjType.shape.toLowerCase();var N=m({},e.cropObj,{},!0),x={currObj:{}};e.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:x}});var A=x.currObj;A.objColl=m([],e.objColl,[],!0),A.pointColl=m([],e.pointColl,[],!0),A.afterCropActions=m([],e.afterCropActions,[],!0);var U={selPointColl:null};if(e.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:U}}),A.selPointColl=m([],U.selPointColl,[],!0),!e.togglePen&&!g){if(this.tempObjColl&&e.activeObj.activePoint.width!==0){e.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),e.objColl.push(e.activeObj),JSON.stringify(e.activeObj.activePoint)!==JSON.stringify(this.tempActiveObj.activePoint)&&e.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:A,previousObjColl:this.tempObjColl,previousPointColl:A.pointColl,previousSelPointColl:A.selPointColl,previousCropObj:N,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}});var z=m({},e.objColl[e.objColl.length-1],{},!0);e.objColl.pop(),this.redrawShape(z),this.tempObjColl=void 0}this.isFhdEditing||(this.applyCurrActObj(l,h),e.currObjType.isResize=!1,e.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1}))}else if(g&&this.isMouseUp&&e.cursor.indexOf("resize")>-1){var S=this.updatePrevShapeSettings(),s={cancel:!1,action:"resize-end",previousShapeSettings:S};this.triggerShapeChange(s,s,"resize")}if(e.activeObj){var J=!1,R;e.activeObj.shape!==void 0&&(R=e.activeObj.shape.split("-")),(R===void 0&&(e.currObjType.isCustomCrop||e.togglePen)||R!==void 0&&R[0]==="crop")&&(J=!0);var _=e.activeObj.shape;u=_;var B=["rectangle","ellipse","line","arrow","path"];if(B.indexOf(_)>-1)e.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"shapes",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}});else if(_==="text")e.textArea.style.display==="none"&&e.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"text",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}});else if(_==="redact")e.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"redact",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}});else if(this.isFhdEditing)e.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"pen",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}});else if(!J){var E={type:"main",isApplyBtn:null,isCropping:!1,isZooming:null};e.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:E})}if(e.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1}),!this.isFhdEditing){var L=Math.floor(e.activeObj.activePoint.width);if(e.activeObj.shape&&e.activeObj.shape==="text"&&e.activeObj.textSettings.fontSize===11&&Math.floor(e.activeObj.activePoint.height)===11&&(L===55||e.activeObj.textSettings.bold&&L===58)&&(e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),e.drawingShape==="text"&&!e.activeObj.keyHistory&&(e.activeObj.keyHistory="Enter Text")),!J)if(this.adjustActObjForLineArrow(),e.isShapeDrawing){var P=this.currentDrawingShape;e.notify("undo-redo",{prop:"updateUndoRedoStack",onPropertyChange:!1}),this.currentDrawingShape=P}else e.notify("undo-redo",{prop:"updateUndoRedoStack",onPropertyChange:!1})}}}if(e.activeObj.shape!==void 0&&(v=e.activeObj.shape.split("-")),v!==void 0&&v[0]==="crop"&&(g=!0),e.activeObj.shape&&!g&&t.currentTarget===e.upperCanvas&&e.textArea.style.display==="none"){if(e.activeObj.shape==="text")e.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"text",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}});else if(e.activeObj.shape==="redact")e.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"redact",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}});else{var P=this.currentDrawingShape;this.currentDrawingShape="",e.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"shapes",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}),this.currentDrawingShape=P}e.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1}),e.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}})}var r={freehandDrawSelectedId:null};e.notify("freehand-draw",{prop:"getFreehandDrawSelectedId",onPropertyChange:!1,value:{obj:r}}),e.togglePen&&t.currentTarget===e.upperCanvas&&!r.freehandDrawSelectedId?(e.notify("freehand-draw",{prop:"freehandUpHandler",onPropertyChange:!1,value:{e:t,canvas:e.upperCanvas,context:this.upperContext}}),e.togglePen&&!e.isMaskImage&&(d(e.toolbar)||e.toolbar&&e.toolbar.length>0||!d(e.toolbarTemplate))&&(e.okBtn(),e.freeHandDraw(!0))):e.currObjType.shape="",this.dragElement="",this.mouseDown="",this.isSliderActive=!1,e.currObjType.isInitialLine=e.currObjType.isDragging=!1,this.selMouseUpEvent(),d(e.drawingShape)&&u&&p!==""&&(e.drawingShape=u),e.drawingShape&&(this.currentDrawingShape=e.drawingShape.toLowerCase(),f&&(e.enableShapeDrawing(e.toPascalCase(e.drawingShape),!0),e.upperCanvas.style.cursor="crosshair")),e.isShapeDrawing=!1,e.notify("freehand-draw",{prop:"resetSelPoints",onPropertyChange:!1})}this.isMouseUp=!1}},o.prototype.adjustActObjForLineArrow=function(t){var e=!1,i=this.parent;if(t=t||i.activeObj,t.shape&&(t.shape==="line"||i.activeObj.shape==="arrow")){var r=void 0;if((this.dragElement==="e-resize"&&t.activePoint.endX<t.activePoint.startX||this.dragElement==="w-resize"&&t.activePoint.startX>t.activePoint.endX)&&(e=!0,r=t.activePoint.startX,t.activePoint.startX=t.activePoint.endX,t.activePoint.endX=r,r=t.activePoint.startY,t.activePoint.startY=t.activePoint.endY,t.activePoint.endY=r),t.activePoint.width=Math.abs(t.activePoint.endX-t.activePoint.startX),t.activePoint.height=Math.abs(t.activePoint.endY-t.activePoint.startY),i.activeObj.shape!=="path"){i.notify("shape",{prop:"setPointCollForLineArrow",onPropertyChange:!1,value:{obj:t}});for(var n=0;n<t.pointColl.length;n++)t.pointColl[n].ratioX=(t.pointColl[n].x-i.img.destLeft)/i.img.destWidth,t.pointColl[n].ratioY=(t.pointColl[n].y-i.img.destTop)/i.img.destHeight}}return e},o.prototype.updPtCollForShpRot=function(t){var e=this.parent;if(t=t||e.activeObj,t.shape&&t.rotatedAngle!==0){e.notify("shape",{prop:"setPointCollForShapeRotation",onPropertyChange:!1,value:{obj:t}});var i=e.img,r=i.destLeft,n=i.destTop,s=i.destWidth,a=i.destHeight,l=t.horTopLinePointColl,h=t.horBottomLinePointColl,c=t.verLeftLinePointColl,u=t.verRightLinePointColl,p=function(f){f.ratioX=(f.x-r)/s,f.ratioY=(f.y-n)/a};l.forEach(p),h.forEach(p),c.forEach(p),u.forEach(p)}},o.prototype.setXYPoints=function(t){t.preventDefault();var e,i;t.type==="mousedown"?(e=t.clientX,i=t.clientY):(this.touchEndPoint.x=e=t.touches[0].clientX,this.touchEndPoint.y=i=t.touches[0].clientY);var r=this.parent.lowerCanvas.getBoundingClientRect();return e-=r.left,i-=r.top,{x:e,y:i}},o.prototype.getCurrentIndex=function(){for(var t,e=this.parent,i=0,r=e.objColl.length;i<r;i++)if(e.activeObj.currIndex===e.objColl[i].currIndex){t=i;break}return t},o.prototype.isShapeClick=function(t,e){var i=this.parent,r=!1;if(i.togglePen)return r;if(i.activeObj.shape&&i.activeObj.shape==="text"&&this.isShapeInserted){var n=i.textArea.style.display==="block"||i.textArea.style.display==="inline-block",s=m({},i.activeObj,null,!0);i.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:!0}});var a=this.setXYPoints(t),l=a.x,h=a.y;if(r=this.findTargetObj(l,h,e),e||(this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),r&&i.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:!0}})),n){i.textArea.value=i.objColl[i.objColl.length-1].keyHistory,i.textArea.style.display="block",i.activeObj=s;var c=this.getCurrentIndex();d(c)?i.objColl.pop():i.objColl.splice(c,1)}else if(!r&&s.shape){i.activeObj=s;var c=this.getCurrentIndex();!d(c)&&JSON.stringify(i.activeObj.activePoint)===JSON.stringify(i.objColl[c].activePoint)?i.objColl.splice(c,1):d(i.activeObj.currIndex)&&i.objColl.pop()}}return r},o.prototype.isShapeTouch=function(t,e){var i=this.parent,r=!1;if(t.type==="touchstart"&&!i.togglePen){i.activeObj&&i.activeObj.shape==="text"&&(this.timer=setTimeout(this.setTimer.bind(this),1e3,t));var n=i.textArea.style.display==="block"||i.textArea.style.display==="inline-block",s=m({},i.activeObj,null,!0);i.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:!0}});var a=this.setXYPoints(t),l=a.x,h=a.y;if(r=this.findTargetObj(l,h,e),e||this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),n){i.textArea.value=i.objColl[i.objColl.length-1].keyHistory,i.textArea.style.display="block",i.activeObj=s;var c=this.getCurrentIndex();d(c)?i.objColl.pop():i.objColl.splice(c,1)}else if(!r&&s.shape&&(s.activePoint.width!==0||s.activePoint.height!==0||s.shape==="path"&&s.pointColl.length>0)){i.activeObj=s;var c=this.getCurrentIndex();e||(!d(c)&&JSON.stringify(i.activeObj.activePoint)===JSON.stringify(i.objColl[c].activePoint)?i.objColl.splice(c,1):d(i.activeObj.currIndex)&&i.objColl.pop())}}return r},o.prototype.isFreehandDrawTouch=function(t,e){var i=this.parent,r=!1;if(t.type==="touchstart"&&!e&&!i.togglePen){var n=i.textArea.style.display==="block"||i.textArea.style.display==="inline-block",s=m({},i.activeObj,null,!0);i.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:!0}});var a=this.setXYPoints(t),l=a.x,h=a.y;if(this.setCursor(l,h),this.isFhdPoint&&(r=!0),n){i.textArea.value=i.objColl[i.objColl.length-1].keyHistory,i.textArea.style.display="block",i.activeObj=s;var c=this.getCurrentIndex();d(c)?i.objColl.pop():i.objColl.splice(c,1)}else if(s.shape){i.activeObj=s;var c=this.getCurrentIndex();e||(!d(c)&&JSON.stringify(i.activeObj.activePoint)===JSON.stringify(i.objColl[c].activePoint)?i.objColl.splice(c,1):d(i.activeObj.currIndex)&&i.objColl.pop())}}return r},o.prototype.applyObj=function(t,e){var i=this.parent,r=!1;if(i.activeObj.activePoint.width===0&&i.activeObj.activePoint.height===0)return!1;var n=["rectangle","ellipse","line","arrow","path","image","text"],s=i.activeObj.activePoint,a=s.startX,l=s.startY,h=s.endX,c=s.endY;if(i.activeObj.shape&&n.indexOf(i.activeObj.shape)>-1){var u=i.activeObj.topLeftCircle.radius;t>=a-u*2&&t<=h+u*2&&e>=l-u*2&&e<=c+u*2||i.upperCanvas.style.cursor!=="default"&&i.upperCanvas.style.cursor!=="grab"&&i.upperCanvas.style.cursor!=="crosshair"&&i.upperCanvas.style.cursor!=="pointer"&&i.upperCanvas.style.cursor!=="move"?r=!1:r=!0}return r},o.prototype.applyCurrShape=function(t){var e=this.parent,i=!1;if(e.togglePen)return i;var r=m({},e.activeObj,null,!0);if(this.isShapeInserted&&e.activeObj.shape==="text"&&t&&(this.isInitialTextEdited=!0,e.notify("draw",{prop:"setShapeTextInsert",onPropertyChange:!1,value:{bool:!0}})),e.textArea.style.display==="block"||e.textArea.style.display==="inline-block"){var n=m({},e.activeObj,null,!0);e.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}}),r=m({},e.objColl[e.objColl.length-1],null,!0),e.objColl.pop(),e.activeObj=m({},n,null,!0),e.textArea.value=r.keyHistory,e.textArea.style.display="block";var s=r.strokeSettings&&r.strokeSettings.strokeColor?r.strokeSettings.strokeColor.split("(")[0]==="rgb"?this.rgbToHex(parseFloat(r.strokeSettings.strokeColor.split("(")[1].split(",")[0]),parseFloat(r.strokeSettings.strokeColor.split("(")[1].split(",")[1]),parseFloat(r.strokeSettings.strokeColor.split("(")[1].split(",")[2]),parseFloat(r.strokeSettings.strokeColor.split("(")[1].split(",")[3])):r.strokeSettings.strokeColor:null;s&&s==="#ffffff"&&(s="#fff"),this.tempActiveObj.strokeSettings&&this.tempActiveObj.strokeSettings.strokeColor&&this.tempActiveObj.strokeSettings.strokeColor==="#ffffff"&&(this.tempActiveObj.strokeSettings.strokeColor="#fff"),(r.keyHistory!==this.tempActiveObj.keyHistory||s&&s!==this.tempActiveObj.strokeSettings.strokeColor||r.textSettings&&r.textSettings.fontFamily!==this.tempActiveObj.textSettings.fontFamily||r.textSettings&&Math.round(r.textSettings.fontSize)!==Math.round(this.tempActiveObj.textSettings.fontSize)||r.textSettings&&Math.round(r.textSettings.fontRatio)!==Math.round(this.tempActiveObj.textSettings.fontRatio)||r.textSettings&&r.textSettings.bold!==this.tempActiveObj.textSettings.bold||r.textSettings&&r.textSettings.italic!==this.tempActiveObj.textSettings.italic||r.textSettings&&r.textSettings.underline!==this.tempActiveObj.textSettings.underline)&&(i=!0),this.isInitialTextEdited&&!i&&(i=!0,this.isInitialTextEdited=!1)}else this.tempActiveObj.activePoint.height=Math.abs(this.tempActiveObj.activePoint.height),i=JSON.stringify(r)!==JSON.stringify(this.tempActiveObj);return i},o.prototype.canvasMouseDownHandler=function(t){var e=this.parent;t.preventDefault();var i,r;t.type==="mousedown"?(i=t.offsetX||t.pageX-e.lowerCanvas.offsetLeft,r=t.offsetY||t.pageY-e.lowerCanvas.offsetTop):(i=t.touches[0].clientX||t.touches[0].pageX-e.lowerCanvas.offsetLeft,r=t.touches[0].clientY||t.touches[0].pageY-e.lowerCanvas.offsetTop);var n=e.lowerCanvas.getBoundingClientRect();i-=n.left,r-=n.top,this.panDown={x:i,y:r};var s={tempPanMove:null};e.notify("transform",{prop:"getTempPanMove",onPropertyChange:!1,value:{obj:s}}),d(s.tempPanMove)&&e.notify("transform",{prop:"setTempPanMove",onPropertyChange:!1,value:{point:{x:i,y:r}}})},o.prototype.canvasMouseMoveHandler=function(t){var e=this.parent,i={bool:null};if(e.notify("toolbar",{prop:"getFrameToolbar",onPropertyChange:!1,value:{obj:i}}),e.isResize||i.bool){e.upperCanvas.style.cursor="default";return}this.dragCanvas?e.lowerCanvas.style.cursor="grab":(this.dragCanvas=e.togglePan=!1,e.lowerCanvas.style.cursor=e.upperCanvas.style.cursor=e.cursor="default");var r,n;t.type==="mousemove"?(r=t.offsetX,n=t.offsetY):(r=t.touches[0].clientX||t.touches[0].pageX-e.lowerCanvas.offsetLeft,n=t.touches[0].clientY||t.touches[0].pageY-e.lowerCanvas.offsetTop);var s=e.lowerCanvas.getBoundingClientRect();r-=s.left,n-=s.top;var a={x:r,y:n};e.notify("transform",{prop:"setPanMove",onPropertyChange:!1,value:{point:{x:r,y:n}}}),this.panDown&&a&&e.togglePan&&this.dragCanvas&&((e.isCropTab||e.activeObj.shape)&&(e.notify("draw",{prop:"setStraightenActObj",value:{activeObj:null}}),e.notify("freehand-draw",{prop:"resetStraightenPoint"})),e.notify("transform",{prop:"drawPannedImage",onPropertyChange:!1,value:{xDiff:null,yDiff:null}}))},o.prototype.canvasMouseUpHandler=function(t){var e=this.parent;t.preventDefault();var i={panMove:null};e.notify("transform",{prop:"getPanMove",onPropertyChange:!1,value:{obj:i}}),e.togglePan&&this.panDown&&i.panMove&&e.togglePan&&this.dragCanvas&&(this.panDown=null,e.notify("transform",{prop:"setPanMove",onPropertyChange:!1,value:{point:null}})),e.notify("transform",{prop:"setTempPanMove",onPropertyChange:!1,value:{point:null}}),this.currentDrawingShape!=="path"&&(e.currObjType.isDragging=!1)},o.prototype.touchStartHandler=function(t){t.preventDefault();var e=this.parent;if(this.touchTime===0)this.touchTime=new Date().getTime();else if(new Date().getTime()-this.touchTime<400){this.isTouchDblClick=!0;var i=e.isShapeDrawing;if(e.notify("shape",{prop:"stopPathDrawing",onPropertyChange:!1,value:{e:t,isApply:null}}),this.isTouchDblClick=!1,this.touchTime=0,i!==e.isShapeDrawing&&e.activeObj.shape&&e.activeObj.shape==="path")return}else this.touchTime=new Date().getTime();t.touches.length===2?this.isFirstMove=!0:this.mouseDownEventHandler(t),I.add(e.lowerCanvas,"touchend",this.mouseUpEventHandler,this),I.add(e.lowerCanvas,"touchmove",this.mouseMoveEventHandler,this),I.add(e.upperCanvas,"touchend",this.mouseUpEventHandler,this),I.add(e.upperCanvas,"touchmove",this.mouseMoveEventHandler,this)},o.prototype.unwireEvent=function(){var t=this.parent;I.remove(t.lowerCanvas,"touchend",this.mouseUpEventHandler),I.remove(t.lowerCanvas,"touchmove",this.mouseMoveEventHandler),I.remove(t.upperCanvas,"touchend",this.mouseUpEventHandler),I.remove(t.upperCanvas,"touchmove",this.mouseMoveEventHandler)},o.prototype.keyDownEventHandler=function(t){var e=this.parent;t.ctrlKey&&(t.key==="+"||t.key==="-")&&t.preventDefault();var i={fileName:"",fileType:null};e.notify("draw",{prop:"getFileName",onPropertyChange:!1,value:{obj:i}});var r={fileName:i.fileName,fileType:i.fileType,cancel:!1};switch(t.key){case(t.ctrlKey&&"s"):e.trigger("beforeSave",r),this.beforeSaveEvent(r,t);break;case(t.ctrlKey&&"z"):e.allowUndoRedo&&(e.noPushUndo=!1,(e.togglePen||e.drawingShape)&&(e.okBtn(),e.drawingShape=null),e.notify("undo-redo",{prop:"call-undo"}));break;case(t.ctrlKey&&"y"):e.allowUndoRedo&&(e.noPushUndo=!1,(e.togglePen||e.drawingShape)&&(e.okBtn(),e.drawingShape=null),e.notify("undo-redo",{prop:"call-redo"}));break;case(t.ctrlKey&&"+"):(e.zoomSettings.zoomTrigger&et.Commands)===et.Commands&&(this.zoomType="Commands",e.isZoomBtnClick=!0,e.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:.1,zoomPoint:null},isResize:null}),e.notify("draw",{prop:"redrawDownScale"}),(e.isCropTab||e.activeObj.shape)&&(e.notify("draw",{prop:"setStraightenActObj",value:{activeObj:null}}),e.notify("freehand-draw",{prop:"resetStraightenPoint"})),e.isStraightening&&(e.notify("draw",{prop:"resetStraightenDestPoints"}),e.notify("draw",{prop:"setDestForStraighten"})));break;case(t.ctrlKey&&"-"):(e.zoomSettings.zoomTrigger&et.Commands)===et.Commands&&(this.zoomType="Commands",e.isZoomBtnClick=!0,e.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-.1,zoomPoint:null},isResize:null}),e.notify("draw",{prop:"redrawDownScale"}),(e.isCropTab||e.activeObj.shape)&&(e.notify("draw",{prop:"setStraightenActObj",value:{activeObj:null}}),e.notify("freehand-draw",{prop:"resetStraightenPoint"})),e.isStraightening&&(e.notify("draw",{prop:"resetStraightenDestPoints"}),e.notify("draw",{prop:"setDestForStraighten"})));break;case"Delete":this.deleteItem();break;case"Escape":e.notify("draw",{prop:"performCancel",value:{isContextualToolbar:null,isFinalCancel:!0}});break;case"Enter":this.performEnterAction(t);break;case"Tab":this.performTabAction();break;default:D.isDevice&&(e.textArea.style.display==="block"||e.textArea.style.display==="inline-block")&&setTimeout(this.textKeyDown.bind(this),1,t);break}},o.prototype.performEnterAction=function(t){var e=this.parent;if(e.isResize){var i=t.target,r=!!(i.id.indexOf("aspectratio")||i.id.indexOf("non-aspectratio")>-1),n=this.isValueUpdated();if(!n){r&&this.focusRatioBtn();return}var s=this.getNumTextValue(),a=e.element.querySelector("#"+e.element.id+"_aspectratio"),l=e.element.querySelector(".e-ie-toolbar-aspect-ratio-btn");s&&s.x&&s.y&&(a||l&&!l.classList.contains("e-hidden")?e.notify("transform",{prop:"resize",value:{width:s.x,height:null,isAspectRatio:!0}}):e.notify("transform",{prop:"resize",value:{width:s.x,height:s.y,isAspectRatio:!1}}));var h=e.element.querySelector("#"+e.element.id+"_resizeHeight"),c=e.element.querySelector("#"+e.element.id+"_resizeWidth");if(d(a)){if(h){var u=$(h,"numerictextbox");h&&h.value===""&&(u.value=parseFloat(u.placeholder),h.value=u.placeholder+"px")}if(c){var u=$(c,"numerictextbox");c&&c.value===""&&(u.value=parseFloat(u.placeholder),c.value=u.placeholder+"px")}}e.notify("draw",{prop:"redrawDownScale"}),r&&this.focusRatioBtn()}else if(t.target.classList.contains("e-upload")){var p=e.element.querySelector(".e-image-upload");p&&p.querySelector(".e-tbar-btn")&&p.querySelector(".e-tbar-btn").click()}else if(t.target.classList.contains("filter-wrapper"))t.target.parentElement.click();else{var f=void 0;e.activeObj.shape&&(f=e.activeObj.shape.split("-")),t&&this.isKeyBoardCrop(t)&&e.activeObj.horTopLine&&e.activeObj.shape&&f[0]==="crop"&&e.crop()}},o.prototype.focusRatioBtn=function(){var t=this.parent.element.id;this.parent.isKBDNavigation&&setTimeout(function(){document.getElementById(t+"_aspectratio")?document.getElementById(t+"_aspectratio").focus():document.getElementById(t+"_nonaspectratio")&&document.getElementById(t+"_nonaspectratio").focus()},50)},o.prototype.isKeyBoardCrop=function(t){var e=!1,i=t.target;return(i.id===this.parent.element.id+"_ok"||i.id==="")&&(e=!0),e},o.prototype.beforeSaveEvent=function(t,e){var i=this.parent;t.cancel||i.notify("export",{prop:"export",onPropertyChange:!1,value:{type:t.fileType,fileName:t.fileName}}),e.preventDefault(),e.stopImmediatePropagation()},o.prototype.handleScroll=function(t){this.mouseWheel++;var e=this.parent,i,r,n=!1;t.type==="mousewheel"&&(i=t.clientX,r=t.clientY);var s=e.lowerCanvas.getBoundingClientRect();if(i-=s.left,r-=s.top,i>e.img.destLeft&&i<e.img.destLeft+e.img.destWidth&&r>e.img.destTop&&r<e.img.destTop+e.img.destHeight&&(n=!0),this.mouseWheel===2){this.mouseWheel=0,t.ctrlKey===!0&&n&&t.preventDefault();return}if(t.stopPropagation(),t.ctrlKey===!0&&n){t.preventDefault(),!e.isCropTab&&e.activeObj.shape&&e.activeObj.shape.split("-")[0]!=="crop"&&(e.okBtn(null,!0),e.notify("toolbar",{prop:"close-contextual-toolbar",onPropertyChange:!1}));var a="";t.type==="mousewheel"&&(e.zoomSettings.zoomTrigger&et.MouseWheel)===et.MouseWheel&&(this.zoomType="MouseWheel",t.wheelDelta>0?a="zoomIn":a="zoomOut"),a!==""&&(e.isZoomBtnClick=!0,e.notify("draw",{prop:"performPointZoom",onPropertyChange:!1,value:{x:i,y:r,type:a,isResize:null}}),e.notify("draw",{prop:"redrawDownScale"}),(e.isCropTab||e.activeObj.shape)&&(e.notify("draw",{prop:"setStraightenActObj",value:{activeObj:null}}),e.notify("freehand-draw",{prop:"resetStraightenPoint"})),e.isStraightening&&(e.notify("draw",{prop:"resetStraightenDestPoints"}),e.notify("draw",{prop:"setDestForStraighten"})))}},o.prototype.textKeyDown=function(t){var e=this.parent;if(e.activeObj.rotatedAngle===0){String.fromCharCode(t.which)==="\r"&&(this.textRow+=1),e.textArea.setAttribute("rows",this.textRow.toString()),e.textArea.style.height="auto",e.textArea.style.height=e.textArea.scrollHeight+"px",e.notify("shape",{prop:"setTextBoxWidth",onPropertyChange:!1,value:{e:t}}),D.isDevice&&(e.textArea.style.width=parseFloat(e.textArea.style.width)+e.textArea.style.fontSize+"px");var i=e.textArea.value.split(`
`);this.textRow=i.length,e.textArea.setAttribute("rows",this.textRow.toString()),this.isInitialTextEdited=!1}},o.prototype.clearSelection=function(t){var e=this.parent;!e.disabled&&e.isImageLoaded&&(t?e.notify("draw",{prop:"performCancel",value:{isContextualToolbar:null}}):(e.togglePen=!1,e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.dragElement="",this.dragPoint.startX=this.dragPoint.startY=this.dragPoint.endX=this.dragPoint.endY=0,e.currObjType.shape="",this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),e.currObjType.isActiveObj=!0,e.currObjType.isCustomCrop=!1,e.upperCanvas.style.cursor=e.cursor="default"))},o.prototype.setDragDirection=function(t,e){var i=7.5,r=this.parent,n=r.activeObj.activePoint;r.img.destWidth>r.img.destHeight?(n.startX=this.dragPoint.startX=t/2-e/2+i,n.startY=this.dragPoint.startY=e/2-e/2+i,n.endX=t/2+e/2-i,n.endY=e/2+e/2-i):(n.startY=this.dragPoint.startX=e/2-t/2+i,n.endY=e/2+t/2-i,n.startX=this.dragPoint.startX=i,n.endX=t-i)},o.prototype.calcShapeRatio=function(t,e,i,r){for(var n=this.parent,s=n.activeObj.activePoint,a=7.5,l=t/e,h=i,c=r,u=h>=c?h:c,p=u*l,f=u,g=this.getScale(p,h),v=[],y=n.img,C=y.destLeft,b=y.destTop,M=y.destWidth,S=y.destHeight,N=0;N<2;N++)N===0?v.push(p*g):v.push(f*g);p=v[0],f=v[1];for(var x=this.getScale(f,c),A=[],N=0;N<2;N++)N===0?A.push(p*x):A.push(f*x);p=A[0],f=A[1],s.width=p,s.height=f,s.startX=(this.dragPoint.startX=(h-p)/2)+a,s.startY=(this.dragPoint.startY=(c-f)/2)+a,s.endX=s.startX+s.width,s.endY=s.startY+s.height,s.startX<C&&C+M>n.lowerCanvas.clientWidth&&(s.startX=C,s.endX=s.startX+p-a),s.startY<b&&b+S>n.lowerCanvas.clientHeight&&(s.startY=b,s.endY=s.startY+f-a),s.width=s.endX-s.startX,s.height=s.endY-s.startY},o.prototype.getScale=function(t,e){return t>e?e/t:1},o.prototype.findTarget=function(t,e,i){var r=this.parent;if(i.toLowerCase()==="mousedown"||i.toLowerCase()==="touchstart"){var n=void 0,s=!1;r.activeObj.shape&&(n=r.activeObj.shape.split("-"),n[0]==="crop"&&(s=!0)),this.findTargetObj(t,e,s),this.updateCursorStyles(t,e,i)}else{var a=r.activeObj,l=a.topLeftCircle,h=a.topCenterCircle,c=a.topRightCircle,u=a.centerLeftCircle,p=a.centerRightCircle,f=a.bottomLeftCircle,g=a.bottomCenterCircle,v=a.bottomRightCircle;switch(this.dragElement.toLowerCase()){case"nw-resize":l.startX=t,l.startY=e;break;case"n-resize":h.startX=t,h.startY=e;break;case"ne-resize":c.startX=t,c.startY=e;break;case"w-resize":u.startX=t,u.startY=e;break;case"e-resize":p.startX=t,p.startY=e;break;case"sw-resize":f.startX=t,f.startY=e;break;case"s-resize":g.startX=t,g.startY=e;break;case"se-resize":v.startX=t,v.startY=e;break;default:this.dragPoint.startX&&this.dragPoint.startY&&(this.previousPoint.x=this.dragPoint.endX,this.previousPoint.y=this.dragPoint.endY,this.dragPoint.endX=t,this.dragPoint.endY=e);break}}},o.prototype.findTargetObj=function(t,e,i){var r=this.parent,n=!1;if(r.objColl.length!==0&&!r.currObjType.isCustomCrop&&!i){for(var s=0,a=void 0,l=0;l<r.objColl.length;l++){var h=r.upperCanvas.style.cursor;this.setCursor(t,e);var c=m({},r.objColl[l],{},!0),u=c.topLeftCircle.radius;if(c.shape==="line"||c.shape==="arrow"){for(var p=0;p<c.pointColl.length;p++)if(t>=c.pointColl[p].x-u*2&&t<=c.pointColl[p].x+u*2&&e>=c.pointColl[p].y-u*2&&e<=c.pointColl[p].y+u*2){if(this.tempActiveObj&&this.tempActiveObj.activePoint&&JSON.stringify(this.tempActiveObj.activePoint)===JSON.stringify(c.activePoint)){a=l;break}else this.isTouch||r.cursor==="move"||r.cursor==="grab"||this.isShapeInserted?(s===0||s<c.order)&&(s=c.order,a=l):r.objColl[l].currIndex===this.tempActiveObj.currIndex&&(a=l);break}}else if(c.shape==="path"){var f=this.setCursorForPath(c,t,e,r.upperCanvas);if(f!=="default"&&f!=="grab")if(this.tempActiveObj&&this.tempActiveObj.activePoint&&JSON.stringify(this.tempActiveObj.activePoint)===JSON.stringify(c.activePoint)){a=l;break}else this.isTouch||r.cursor==="move"||r.cursor==="grab"||this.isShapeInserted?(s===0||s<c.order)&&(s=c.order,a=l):r.objColl[l].currIndex===this.tempActiveObj.currIndex&&(a=l)}else if(c.rotatedAngle!==0){var g=this.setCursorForRotatedObject(c,t,e,r.upperCanvas);if(g!=="default"&&g!=="grab")if(this.tempActiveObj&&this.tempActiveObj.activePoint&&JSON.stringify(this.tempActiveObj.activePoint)===JSON.stringify(c.activePoint)){a=l;break}else this.isTouch||r.cursor==="move"||r.cursor==="grab"||this.isShapeInserted?(s===0||s<c.order&&(c.shape!=="redact"||r.drawingShape==="redact"))&&(s=c.order,a=l):r.objColl[l].currIndex===this.tempActiveObj.currIndex&&(a=l)}else{var v=this.getTransRotationPoint(c);if(t>=c.activePoint.startX-u*2&&t<=c.activePoint.endX+u*2&&e>=c.activePoint.startY-u*2&&e<=c.activePoint.endY+u*2||v&&t>=v.x-u*2&&t<=v.x+u*2&&e>=v.y-u*2&&e<=v.y+u*2)if(this.tempActiveObj&&this.tempActiveObj.activePoint&&JSON.stringify(this.tempActiveObj.activePoint)===JSON.stringify(c.activePoint)){a=l;break}else this.isTouch||h==="move"||h==="grabbing"||this.isShapeInserted||r.cursor==="move"||r.cursor==="grabbing"?(s===0||s<c.order&&(c.shape!=="redact"||r.drawingShape==="redact"))&&(s=c.order,a=l):r.objColl[l].currIndex===this.tempActiveObj.currIndex&&(a=l)}}if(d(a))r.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),n=!1;else{this.tempObjColl=m([],r.objColl,[],!0),r.currObjType.isCustomCrop=!1,r.activeObj=m({},r.objColl[a],{},!0);var y=m({},r.objColl[a],{},!0);if(r.objColl.splice(a,1),r.transform.degree===0){var C=this.lowerContext.filter;this.lowerContext.clearRect(0,0,r.lowerCanvas.width,r.lowerCanvas.height),r.notify("draw",{prop:"drawImage",onPropertyChange:!1}),this.lowerContext.filter="none",r.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"iterate",pen:"iterate",isPreventApply:null}}),r.activeObj=m({},C,{},!0),this.lowerContext.filter=C,this.getCurrentFlipState()}else{var b=m({},r.panPoint.totalPannedInternalPoint,{},!0),M={startX:r.img.destLeft,startY:r.img.destTop,width:r.img.destWidth,height:r.img.destHeight};r.notify("draw",{prop:"callUpdateCurrTransState",onPropertyChange:!1}),r.panPoint.totalPannedInternalPoint=b,r.img.destLeft=M.startX,r.img.destTop=M.startY,r.img.destWidth=M.width,r.img.destHeight=M.height,r.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"iterate",pen:"iterate",isPreventApply:null}})}r.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),(r.currSelectionPoint&&r.currSelectionPoint.shape==="crop-circle"||r.isCircleCrop)&&r.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),r.activeObj=m({},y,{},!0),this.setActivePoint(),r.activeObj=m({},y,{},!0);var S=m({},r.activeObj.strokeSettings,{},!0);r.notify("draw",{prop:"setTempStrokeSettings",onPropertyChange:!1,value:{tempStrokeSettings:S}});var N=m({},r.activeObj.textSettings,{},!0);r.notify("draw",{prop:"setTempTextSettings",onPropertyChange:!1,value:{tempTextSettings:N}});var x=this.updatePrevShapeSettings(),A={cancel:!1,action:"select",previousShapeSettings:x,currentShapeSettings:x,allowShapeOverflow:this.allowOutofBound()};(r.activeObj.shape==="line"||r.activeObj.shape==="arrow")&&(A.currentShapeSettings.width=r.activeObj.activePoint.endX-r.activeObj.activePoint.startX,A.currentShapeSettings.height=r.activeObj.activePoint.endY-r.activeObj.activePoint.startY),this.isCropSelection=!1;var U=void 0;if(r.activeObj.shape!==void 0&&(U=r.activeObj.shape.split("-")),U!==void 0&&U[0]==="crop"&&(this.isCropSelection=!0),!this.isCropSelection&&r.activeObj.shape!=="redact")r.trigger("shapeChanging",A),this.shapeEvent(A),r.editCompleteArgs=A;else{this.isMouseDown?A.action="resize-start":this.isMouseUp&&(A.action="resize-end");var z={action:A.action,previousSelectionSettings:{type:r.getSelectionType(r.activeObj.shape),startX:A.previousShapeSettings.startX,startY:A.previousShapeSettings.startY,width:A.previousShapeSettings.width,height:A.previousShapeSettings.height},currentSelectionSettings:{type:r.getSelectionType(r.activeObj.shape),startX:A.currentShapeSettings.startX,startY:A.currentShapeSettings.startY,width:A.currentShapeSettings.width,height:A.currentShapeSettings.height}};r.trigger("selectionChanging",z),r.editCompleteArgs=z,A.currentShapeSettings.startX=z.currentSelectionSettings.startX,A.currentShapeSettings.startY=z.currentSelectionSettings.startY,A.currentShapeSettings.width=z.currentSelectionSettings.width,A.currentShapeSettings.height=z.currentSelectionSettings.height,this.shapeEvent(A)}n=!0}}return n},o.prototype.shapeEvent=function(t){var e=this.parent;if(e.notify("shape",{prop:"updateShapeChangeEventArgs",onPropertyChange:!1,value:{shapeSettings:t.currentShapeSettings,allowShapeOverflow:t.allowShapeOverflow}}),e.activeObj.activePoint){var i={prevActObj:null};e.notify("draw",{prop:"getPrevActObj",onPropertyChange:!1,value:{obj:i}}),d(i.prevActObj)&&e.notify("draw",{prop:"setPrevActObj",onPropertyChange:!1,value:{prevActObj:m({},e.activeObj,{},!0)}}),e.activeObj.shape==="image"&&!this.isImageClarity&&(this.upgradeImageQuality(),this.isImageClarity=!0),e.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:e.activeObj,isCropRatio:null,points:null,isPreventDrag:!0,saveContext:null,isPreventSelection:!0}}),this.isShapeInserted||(this.isPreventDragging=this.isShapeDragOut())}},o.prototype.upgradeImageQuality=function(){var t=this.parent;if(t.activeObj.imageCanvas){var e=m({},t.activeObj,null,!0),i=t.activeObj.imageCanvas.getContext("2d"),r={width:0,height:0};t.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:t.activeObj.imageElement.width,height:t.activeObj.imageElement.height,obj:r,isImgShape:null}}),t.notify("shape",{prop:"updateObj",onPropertyChange:!1,value:{dimObj:r,x:null,y:null}}),i.clearRect(0,0,t.activeObj.imageCanvas.width,t.activeObj.imageCanvas.height),this.applyTransformToImg(i),t.activeObj=e}},o.prototype.applyTransformToImg=function(t){var e=this.parent;e.activeObj.isHorImageFlip&&e.activeObj.isVerImageFlip?(e.activeObj.isHorImageFlip=e.activeObj.isVerImageFlip=!1,e.notify("draw",{prop:"downScaleImgCanvas",onPropertyChange:!1,value:{ctx:t,isImgAnnotation:!0,isHFlip:!0,isVFlip:!0}})):e.activeObj.isHorImageFlip?(e.activeObj.isHorImageFlip=!1,e.notify("draw",{prop:"downScaleImgCanvas",onPropertyChange:!1,value:{ctx:t,isImgAnnotation:!0,isHFlip:!0,isVFlip:!1}})):e.activeObj.isVerImageFlip?(e.activeObj.isVerImageFlip=!1,e.notify("draw",{prop:"downScaleImgCanvas",onPropertyChange:!1,value:{ctx:t,isImgAnnotation:!0,isHFlip:!1,isVFlip:!0}})):e.notify("draw",{prop:"downScaleImgCanvas",onPropertyChange:!1,value:{ctx:t,isImgAnnotation:!0,isHFlip:!1,isVFlip:!1}})},o.prototype.targetTouches=function(t){var e=this.parent.lowerCanvas.getBoundingClientRect(),i={x:t[0].pageX-e.left,y:t[0].pageY-e.top},r={x:t[1].pageX-e.left,y:t[1].pageY-e.top},n=[i,r];return n},o.prototype.calculateScale=function(t,e){var i=this.getDistance(t[0],t[1]),r=this.getDistance(e[0],e[1]);return r/i},o.prototype.getDistance=function(t,e){var i=0,r=0;return t&&e&&(i=t.x-e.x,r=t.y-e.y),Math.sqrt(i*i+r*r)},o.prototype.redrawShape=function(t,e){for(var i=this.parent,r=0,n=i.objColl.length;r<n;r++)if(JSON.stringify(t)===JSON.stringify(i.objColl[r])){if(i.objColl.splice(r,1),t.shape&&i.textArea.style.display==="none"){var s=m({},t,{},!0);i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.lowerContext.clearRect(0,0,i.lowerCanvas.width,i.lowerCanvas.height),i.notify("draw",{prop:"render-image",value:{isMouseWheel:null}}),i.rotateFlipColl.length>0&&(i.panPoint.totalPannedClientPoint.x!==0||i.panPoint.totalPannedClientPoint.y!==0)&&i.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1}),t=i.activeObj=s}break}t.shape==="path"&&t.pointColl.length===0||t.shape!=="path"&&t.activePoint.width===0&&t.activePoint.height===0||(this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),this.isPreventDragging?(i.activeObj.activePoint.startX>i.img.destLeft&&(this.isPreventDragging=!1),e&&i.activeObj.rotatedAngle!==0?i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:null,isCropRatio:null,points:null,isPreventDrag:!0,saveContext:null,isPreventSelection:null}}):i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:null,isCropRatio:null,points:null,isPreventDrag:!0,saveContext:null,isPreventSelection:null}})):e&&i.activeObj.rotatedAngle!==0?i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:null,isCropRatio:null,points:null,isPreventDrag:!0,saveContext:null,isPreventSelection:null}}):(i.activeObj.shape==="redact"&&(this.lowerContext.clearRect(0,0,i.lowerCanvas.width,i.lowerCanvas.height),i.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1}),i.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}})),i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:null,isCropRatio:null,points:null,isPreventDrag:!0,saveContext:null,isPreventSelection:null}})))},o.prototype.setTimer=function(t){var e=this.parent;this.timer>10&&(clearTimeout(this.timer),this.timer=0,e.notify("shape",{prop:"findTextTarget",onPropertyChange:!1,value:{e:t}}),D.isDevice&&this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height))},o.prototype.applyCurrActObj=function(t,e){var i=this.parent,r=!1,n=m({},i.activeObj,{},!0);if(!d(n.activePoint)){var s=n.activePoint,a=s.startX,l=s.startY,h=s.endX,c=s.endY,u=n.topLeftCircle?n.topLeftCircle.radius:0;if(t>=Math.floor(a)&&t<=Math.ceil(h)&&e>=Math.floor(l)&&e<=Math.ceil(c))r=!0;else if(u!==0&&t>=Math.floor(a)-u&&t<=Math.ceil(h)+u&&e>=Math.floor(l)-u&&e<=Math.ceil(c)+u)r=!0,this.tempActiveObj={activePoint:{startX:0,startY:0,endX:0,endY:0,width:0,height:0},flipObjColl:[],triangle:[],triangleRatio:[]};else if((n.shape==="text"||n.shape==="image")&&this.dragElement!=="")r=!0;else if(n.shape==="line"||n.shape==="arrow"){var p={x:a<h?a:h,y:l<c?l:c},f={x:a>h?a:h,y:l>c?l:c};(t>=Math.floor(p.x)-5&&t<=Math.ceil(f.x)+5&&e>=Math.floor(p.y)-5&&e<=Math.ceil(f.y)+5||i.activeObj.preventShapeDragOut)&&(r=!0)}else if(n.shape==="path"){var g=this.setCursorForPath(n,t,e,i.upperCanvas);g==="move"&&(r=!0)}else if(this.dragElement==="grabbing")r=!0;else if(n.rotatedAngle!==0){var g=this.setCursorForRotatedObject(n,t,e,i.upperCanvas);(g!=="default"&&g!=="grab"||this.dragElement==="n-resize"||this.dragElement==="e-resize"||this.dragElement==="s-resize"||this.dragElement==="w-resize")&&(r=!0)}else(i.textArea.style.display==="block"||i.textArea.style.display==="inline-block")&&(r=!0);if(!r){if(d(i.activeObj.currIndex)){var v={id:"shape_"+(i.objColl.length+1)};i.notify("shape",{prop:"getNewShapeId",onPropertyChange:!1,value:{obj:v}}),i.activeObj.currIndex=v.id}i.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),i.activeObj.horTopLine!==void 0&&i.activeObj.horTopLine.startX!==0&&i.activeObj.horTopLine.endX!==0&&!i.currObjType.isCustomCrop&&i.currObjType.shape!==""&&i.objColl.length>0&&JSON.stringify(i.objColl[i.objColl.length-1].activePoint)!==JSON.stringify(i.activeObj.activePoint)&&i.objColl.push(m({},i.activeObj,{},!0));var y=["rectangle","ellipse","line","arrow","path","text","image"];if(y.indexOf(i.activeObj.shape)>-1){var C=this.lowerContext.filter;this.lowerContext.filter="brightness(1) contrast(100%) hue-rotate(0deg) saturate(100%) opacity(1) blur(0px) sepia(0%) grayscale(0%) invert(0%)",i.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:null}}),this.lowerContext.filter=C,i.activeObj.shape&&i.notify("shape",{prop:"apply",onPropertyChange:!1,value:{shape:null,obj:null,canvas:null}}),i.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),i.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}}),i.isCircleCrop&&i.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}})}i.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1})}}},o.prototype.getCurrentFlipState=function(){var t=this.parent;if(t.rotateFlipColl.length!==0){var e=m({},t.panPoint.totalPannedInternalPoint,{},!0);t.notify("draw",{prop:"callUpdateCurrTransState",onPropertyChange:!1}),t.panPoint.totalPannedInternalPoint=e}else t.notify("draw",{prop:"callUpdateCurrTransState",onPropertyChange:!1})},o.prototype.setTextBoxStylesToActObj=function(){var t=this.parent;t.activeObj.textSettings.fontFamily=t.textArea.style.fontFamily,t.activeObj.strokeSettings.strokeColor=t.textArea.style.color!==""&&t.textArea.style.color.split("(")[1]&&t.textArea.style.color.split("(")[1].split(",")[0]&&t.textArea.style.color.split("(")[1].split(",")[1]&&t.textArea.style.color.split("(")[1].split(",")[2]&&t.textArea.style.color.split("(")[1].split(",")[3]?this.rgbToHex(parseFloat(t.textArea.style.color.split("(")[1].split(",")[0]),parseFloat(t.textArea.style.color.split("(")[1].split(",")[1]),parseFloat(t.textArea.style.color.split("(")[1].split(",")[2]),parseFloat(t.textArea.style.color.split("(")[1].split(",")[3])):t.textArea.style.color,t.activeObj.strokeSettings.fillColor=t.textArea.style.backgroundColor!==""&&t.textArea.style.backgroundColor.split("(")[1]&&t.textArea.style.backgroundColor.split("(")[1].split(",")[0]&&t.textArea.style.backgroundColor.split("(")[1].split(",")[1]&&t.textArea.style.backgroundColor.split("(")[1].split(",")[2]&&t.textArea.style.backgroundColor.split("(")[1].split(",")[3]?this.rgbToHex(parseFloat(t.textArea.style.backgroundColor.split("(")[1].split(",")[0]),parseFloat(t.textArea.style.backgroundColor.split("(")[1].split(",")[1]),parseFloat(t.textArea.style.backgroundColor.split("(")[1].split(",")[2]),parseFloat(t.textArea.style.backgroundColor.split("(")[1].split(",")[3])):t.textArea.style.backgroundColor,t.activeObj.strokeSettings.outlineColor=t.textArea.style.textShadow!==""&&t.textArea.style.textShadow.split("(")[1]&&t.textArea.style.textShadow.split("(")[1].split(",")[0]&&t.textArea.style.textShadow.split("(")[1].split(",")[1]&&t.textArea.style.textShadow.split("(")[1].split(",")[2]&&t.textArea.style.textShadow.split("(")[1].split(",")[3]?this.rgbToHex(parseFloat(t.textArea.style.textShadow.split("(")[1].split(",")[0]),parseFloat(t.textArea.style.textShadow.split("(")[1].split(",")[1]),parseFloat(t.textArea.style.textShadow.split("(")[1].split(",")[2]),parseFloat(t.textArea.style.textShadow.split("(")[1].split(",")[3])):t.textArea.style.textShadow.match(/^(\s*[\w#]+)\s/)?t.textArea.style.textShadow.match(/^(\s*[\w#]+)\s/)[1].trim():t.textArea.style.textShadow,t.textArea.style.fontWeight==="bold"?t.activeObj.textSettings.bold=!0:t.activeObj.textSettings.bold=!1,t.textArea.style.fontStyle==="italic"?t.activeObj.textSettings.italic=!0:t.activeObj.textSettings.italic=!1,t.activeObj.textSettings.fontSize=parseFloat(t.textArea.style.fontSize)},o.prototype.rgbToHex=function(t,e,i,r){t=Math.max(0,Math.min(255,Math.round(t))),e=Math.max(0,Math.min(255,Math.round(e))),i=Math.max(0,Math.min(255,Math.round(i))),r=Math.max(0,Math.min(1,r));var n=this.padLeft(t.toString(16),2,"0"),s=this.padLeft(e.toString(16),2,"0"),a=this.padLeft(i.toString(16),2,"0"),l=this.padLeft(Math.round(r*255).toString(16),2,"0"),h;return isNaN(Number(l))?h="#"+n+s+a:h="#"+n+s+a+l,h},o.prototype.padLeft=function(t,e,i){for(;t.length<e;)t=i+t;return t},o.prototype.deleteItem=function(){var t=this.parent,e={cancel:!1},i={};if(this.isFhdEditing){this.updateFreehandDrawColorChange();var r=m({},t.cropObj,{},!0),n={currObj:{}};t.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:n}});var s=n.currObj;s.objColl=m([],t.objColl,[],!0),s.pointColl=m([],t.pointColl,[],!0),s.afterCropActions=m([],t.afterCropActions,[],!0);var a={selPointColl:null};t.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:a}}),s.selPointColl=m([],a.selPointColl,[],!0);var l={freehandDrawSelectedId:null};t.notify("freehand-draw",{prop:"getFreehandDrawSelectedId",onPropertyChange:!1,value:{obj:l}}),t.notify("freehand-draw",{prop:"deleteFhd",value:{id:l.freehandDrawSelectedId}}),t.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"deleteFreehandDrawing",previousObj:s,previousObjColl:this.tempObjColl,previousPointColl:s.pointColl,previousSelPointColl:s.selPointColl,previousCropObj:r,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),t.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}),t.notify("freehand-draw",{prop:"resetFreehandDrawSelectedId"})}else if(t.textArea.style.display==="none"){var l={prevActObj:null};if(t.notify("draw",{prop:"getPrevActObj",onPropertyChange:!1,value:{obj:l}}),l.prevActObj&&(l.prevActObj.activePoint.width=Math.abs(l.prevActObj.activePoint.width),l.prevActObj.activePoint.height=Math.abs(l.prevActObj.activePoint.height)),l.prevActObj&&JSON.stringify(l.prevActObj)!==JSON.stringify(t.activeObj)){var h=t.activeObj.currIndex;t.notify("draw",{prop:"performCancel",value:{isContextualToolbar:null,isFinalCancel:!0}});for(var c=0,u=t.objColl.length;c<u;c++)if(t.objColl[c].currIndex===h){t.objColl.splice(c,1),t.notify("draw",{prop:"render-image",value:{isMouseWheel:null}});break}}var n={isNewPath:null};if(t.notify("draw",{prop:"getNewPath",value:{obj:n}}),n.isNewPath)t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.notify("draw",{prop:"render-image",value:{isMouseWheel:null}}),t.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1});else if(t.activeObj.shape){t.objColl.push(t.activeObj);var r=m({},t.cropObj,{},!0),p={currObj:{}};t.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:p}});var s=p.currObj;s.objColl=m([],t.objColl,[],!0),s.pointColl=m([],t.pointColl,[],!0),s.afterCropActions=m([],t.afterCropActions,[],!0);var a={selPointColl:null};t.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:a}}),s.selPointColl=m([],a.selPointColl,[],!0),t.objColl.pop(),i=this.updatePrevShapeSettings(),e={cancel:!1,action:"delete",previousShapeSettings:i,currentShapeSettings:null},t.notify("shape",{prop:"setKeyHistory",onPropertyChange:!1,value:{keyHistory:""}}),t.clearSelection(),t.trigger("shapeChanging",e),t.editCompleteArgs=e,t.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1}),t.notify("draw",{prop:"render-image",value:{isMouseWheel:null}}),d(s.objColl[s.objColl.length-1].currIndex)||(t.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"deleteObj",previousObj:s,previousObjColl:this.tempObjColl,previousPointColl:s.pointColl,previousSelPointColl:s.selPointColl,previousCropObj:r,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),t.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}))}t.notify("draw",{prop:"setPrevActObj",onPropertyChange:!1,value:{prevActObj:null}}),t.drawingShape&&(this.currentDrawingShape=t.drawingShape.toLowerCase(),t.enableShapeDrawing(t.toPascalCase(t.drawingShape),!0),t.upperCanvas.style.cursor="crosshair")}document.getElementById(t.element.id+"_quickAccessToolbarArea")&&(document.getElementById(t.element.id+"_quickAccessToolbarArea").style.display="none")},o.prototype.updateFreehandDrawColorChange=function(){var t=this.parent,e={freehandSelectedIndex:null};if(t.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:e}}),!d(e.freehandSelectedIndex)&&!d(t.pointColl[e.freehandSelectedIndex])&&t.pointColl[e.freehandSelectedIndex].strokeColor==="#42a5f5"){var i={tempFreeHandDrawEditingStyles:null};t.notify("freehand-draw",{prop:"getTempFreeHandDrawEditingStyles",value:{obj:i}}),t.pointColl[e.freehandSelectedIndex].strokeColor=i.tempFreeHandDrawEditingStyles.strokeColor}},o.prototype.updatePrevShapeSettings=function(t){var e=this.parent,i=[];if(d(e.activeObj.currIndex)){var r={id:"shape_"+(e.objColl.length+1)};e.notify("shape",{prop:"getNewShapeId",onPropertyChange:!1,value:{obj:r}}),e.activeObj.currIndex=r.id}e.activeObj.shape==="text"&&e.activeObj.textSettings&&(e.activeObj.textSettings.bold&&i.push("bold"),e.activeObj.textSettings.italic&&i.push("italic"),e.activeObj.textSettings.underline&&i.push("underline"));var n=e.activeObj.activePoint,s=n.startX,a=n.startY,l=n.endX,h=n.endY,c=n.width,u=n.height,p=e.activeObj,f=p.keyHistory,g=p.currIndex,v=p.shape,y=p.textSettings,C=p.strokeSettings,b=p.rotatedAngle,M=p.imageElement,S=p.opacity,N={id:d(g)?null:g,type:e.toPascalCase(v),startX:s,startY:a,width:c,height:u,strokeColor:C?v==="text"?C.outlineColor:C.strokeColor:null,strokeWidth:C?v==="text"?C.outlineWidth:C.strokeWidth:null,fillColor:C?C.fillColor:null,radius:v==="ellipse"?c/2:null,length:v==="line"||v==="arrow"?c:null,text:v==="text"?f||(y.text?y.text:null):null,fontSize:v==="text"&&y?y.fontSize:null,fontFamily:v==="text"&&y?y.fontFamily:null,fontStyle:v==="text"?i:null,color:v==="text"&&C?C.strokeColor:null,degree:v==="ellipse"||v==="rectangle"||v==="image"||v==="text"?b*(180/Math.PI):null,imageData:v==="image"?M.src:null,opacity:v==="image"?S:null,radiusX:v==="ellipse"?c/2:null,radiusY:v==="ellipse"?u/2:null,endX:v==="line"||v==="arrow"?l:null,endY:v==="line"||v==="arrow"?h:null,arrowHead:v==="arrow"?this.getArrowType(e.activeObj.start):null,arrowTail:v==="arrow"?this.getArrowType(e.activeObj.end):null,points:v==="path"?e.activeObj.pointColl:null,index:e.activeObj.order,transformCollection:v==="text"?this.updateTransColl(e.activeObj):null};return t&&(t.shapeSettingsObj=N),N},o.prototype.updateTransColl=function(t){var e=this.parent,i,r=t.rotateFlipColl;if(r&&r.length>0){var n=void 0;i=[];for(var s=0;s<r.length;s++)n=r[s],typeof n=="number"?i.push({degree:n}):i.push({flip:e.toPascalCase(n)})}return i},o.prototype.getArrowType=function(t){var e={none:"None",arrow:"Arrow",arrowSolid:"SolidArrow",circle:"Circle",circleSolid:"SolidCircle",square:"Square",squareSolid:"SolidSquare",bar:"Bar"};return e[""+t]},o.prototype.getRectanglePoints=function(t,e,i,r,n,s,a){var l=t+i/2,h=e+r/2,c=n*(Math.PI/180),u=Math.cos(c),p=Math.sin(c),f=s-l,g=a-h,v=f*u+g*p,y=-f*p+g*u,C=i/2,b=r/2;return v>=-C&&v<=C&&y>=-b&&y<=b},o.prototype.getTransRotationPoint=function(t,e){var i,r,n=!1,s=!1;if(r=t.shapeDegree===0?this.parent.transform.degree:this.parent.transform.degree-t.shapeDegree,r<0&&(r=360+r),t.flipObjColl)for(var a=0,l=t.flipObjColl.length;a<l;a++)t.flipObjColl[a].toLowerCase()==="horizontal"?n=!0:t.flipObjColl[a].toLowerCase()==="vertical"&&(s=!0);return r===0||r===360?s?i={x:t.topCenterCircle.startX,y:t.topCenterCircle.startY-t.rotationCircleLine}:i={x:t.bottomCenterCircle.startX,y:t.bottomCenterCircle.startY+t.rotationCircleLine}:r===90||r===-270?n?i={x:t.centerRightCircle.startX+t.rotationCircleLine,y:t.centerLeftCircle.startY}:i={x:t.centerLeftCircle.startX-t.rotationCircleLine,y:t.centerLeftCircle.startY}:r===180||r===-180?s?i={x:t.bottomCenterCircle.startX,y:t.bottomCenterCircle.startY+t.rotationCircleLine}:i={x:t.topCenterCircle.startX,y:t.topCenterCircle.startY-t.rotationCircleLine}:(r===270||r===-90)&&(n?i={x:t.centerLeftCircle.startX-t.rotationCircleLine,y:t.centerLeftCircle.startY}:i={x:t.centerRightCircle.startX+t.rotationCircleLine,y:t.centerLeftCircle.startY}),e&&(e.rotationCirclePoint=i),i},o.prototype.getNumTextValue=function(t){var e=this.parent,i=e.element,r,n,s,a;if(s=i.querySelector("#"+i.id+"_resizeWidth"),a=i.querySelector("#"+i.id+"_resizeHeight"),s&&a){var l=a.value.replace(/,/g,""),h=s.value.replace(/,/g,"");l===""&&(l=a.placeholder.replace(/,/g,"")),h===""&&(h=s.placeholder.replace(/,/g,"")),r=parseFloat(l),n=parseFloat(h)}return t&&(t.width=n,t.height=r),{x:n,y:r}},o.prototype.isValueUpdated=function(){var t=!0,e,i;return e=this.parent.element.querySelector("#"+this.parent.element.id+"_resizeWidth"),i=this.parent.element.querySelector("#"+this.parent.element.id+"_resizeHeight"),e&&i&&i.value.replace(/,/g,"")===""&&e.value.replace(/,/g,"")===""&&(t=!1),t},o.prototype.allowOutofBound=function(){var t=["ellipse","rectangle","text","image","redact"],e=!(t.indexOf(this.parent.activeObj.shape)!==-1&&this.parent.activeObj.rotatedAngle===0);return e},o}(),GD=function(){function o(t){this.textSettings={text:"Enter Text",fontFamily:"",fontSize:null,fontRatio:null,bold:!1,italic:!1,underline:!1},this.strokeSettings={strokeColor:"#fff",fillColor:"",strokeWidth:null,radius:null,outlineColor:"",outlineWidth:null},this.keyHistory="",this.preventFrameAnnotation=!1,this.redactType="blur",this.parent=t,this.addEventListener()}return o.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},o.prototype.addEventListener=function(){this.parent.on("shape",this.shape,this),this.parent.on("destroyed",this.destroy,this)},o.prototype.removeEventListener=function(){this.parent.off("shape",this.shape),this.parent.off("destroyed",this.destroy)},o.prototype.shape=function(t){var e=this.parent;this.initShapePvtProps();var i;switch(t.prop){case"drawEllipse":this.drawEllipse(t.value.x,t.value.y,t.value.radiusX,t.value.radiusY,t.value.strokeWidth,t.value.strokeColor,t.value.fillColor,t.value.degree,t.value.isSelected);break;case"drawLine":this.drawLine(t.value.startX,t.value.startY,t.value.endX,t.value.endY,t.value.strokeWidth,t.value.strokeColor,t.value.isSelected);break;case"drawArrow":this.drawArrow(t.value.startX,t.value.startY,t.value.endX,t.value.endY,t.value.strokeWidth,t.value.strokeColor,t.value.arrowStart,t.value.arrowEnd,t.value.isSelected);break;case"drawPath":this.drawPath(t.value.pointColl,t.value.strokeWidth,t.value.strokeColor,t.value.isSelected);break;case"drawRectangle":this.drawRectangle(t.value.x,t.value.y,t.value.width,t.value.height,t.value.strokeWidth,t.value.strokeColor,t.value.fillColor,t.value.degree,t.value.isSelected,t.value.radius);break;case"drawText":this.drawText(t.value.x,t.value.y,t.value.text,t.value.fontFamily,t.value.fontSize,t.value.bold,t.value.italic,t.value.color,t.value.isSelected,t.value.degree,t.value.fillColor,t.value.outlineColor,t.value.outlineWidth,t.value.transformCollection);break;case"redrawActObj":this.redrawActObj(t.value.x,t.value.y,t.value.isMouseDown);break;case"apply":this.apply(t.value.shape,t.value.obj,t.value.canvas);break;case"updateShapeChangeEventArgs":this.updateShapeChangeEventArgs(t.value.shapeSettings,t.value.allowShapeOverflow);break;case"updSelChangeEventArgs":this.updSelChangeEventArgs(t.value.selectionSettings);break;case"iterateObjColl":this.iterateObjColl();break;case"updImgRatioForActObj":this.updImgRatioForActObj();break;case"redrawObj":this.redrawObj(t.value.degree);break;case"redraw-text":this.redrawText();break;case"draw-shape":this.drawShape(t.value.obj,t.value.strokeWidth,t.value.strokeColor,t.value.fillColor,t.value.start,t.value.width,t.value.height);break;case"renderTextArea":this.renderTextArea(t.value.x,t.value.y,t.value.actObj);break;case"setTextBoxWidth":this.setTextBoxWidth(t.value.e);break;case"findTextTarget":this.findTextTarget(t.value.e);break;case"updateFontStyles":this.updateFontStyles(t.value.isTextBox);break;case"applyFontStyle":this.applyFontStyle(t.value.item);break;case"updateFontRatio":this.updateFontRatio(t.value.obj,t.value.isTextArea);break;case"updateFontSize":this.updateFontSize(t.value.obj);break;case"pushActItemIntoObj":this.pushActItemIntoObj();break;case"clearActObj":this.clearActObj();break;case"refreshActiveObj":this.refreshActiveObj();break;case"applyActObj":this.applyActObj(t.value.isMouseDown);break;case"wireEvent":I.add(e.upperCanvas,"dblclick",this.findTextTarget,this),I.add(e.textArea,"mousedown",this.findTextTarget,this),i=document.getElementById(e.element.id+"_fileUpload"),i&&I.add(i,"change",this.fileChanged,this);break;case"unWireEvent":I.remove(e.upperCanvas,"dblclick",this.findTextTarget),I.remove(e.textArea,"mousedown",this.findTextTarget),i=document.getElementById(e.element.id+"_fileUpload"),i&&I.remove(i,"change",this.fileChanged);break;case"getShapeSetting":this.getShapeSetting(t.value.id,t.value.obj);break;case"getShapeSettings":this.getShapeSettings(t.value.obj);break;case"getRedactSettings":this.getRedactSettings(t.value.obj);break;case"isPointsInRange":this.isPointsInRange(t.value.x,t.value.y,t.value.obj);break;case"alignRotateFlipColl":this.alignRotateFlipColl(t.value.collection,t.value.isRotateFlipCollection,t.value.obj);break;case"selectShape":this.selectShape(t.value.id,t.value.obj);break;case"deleteShape":this.deleteShape(t.value.id);break;case"getMaxText":this.getMaxText(t.value.isTextBox,t.value.text,t.value.obj);break;case"setPointCollForLineArrow":t.value.obj.pointColl=this.getLinePoints(t.value.obj.activePoint.startX,t.value.obj.activePoint.startY,t.value.obj.activePoint.endX,t.value.obj.activePoint.endY);break;case"setPointCollForShapeRotation":this.setPointCollForShapeRotation(t.value.obj);break;case"setTextSettings":t.value.textSettings?this.textSettings=t.value.textSettings:t.value.fontFamily?this.textSettings.fontFamily=t.value.fontFamily:t.value.fontSize?this.textSettings.fontSize=t.value.fontSize:t.value.radius&&(this.strokeSettings.radius=t.value.radius);break;case"setStrokeSettings":t.value.strokeSettings?this.strokeSettings=t.value.strokeSettings:t.value.strokeColor?this.strokeSettings.strokeColor=t.value.strokeColor:t.value.fillColor?this.strokeSettings.fillColor=t.value.fillColor:t.value.strokeWidth?this.strokeSettings.strokeWidth=t.value.strokeWidth:t.value.outlineColor?this.strokeSettings.outlineColor=t.value.outlineColor:t.value.radius?this.strokeSettings.radius=t.value.radius:t.value.outlineWidth&&(this.strokeSettings.outlineWidth=t.value.outlineWidth);break;case"getStrokeSettings":t.value.obj.strokeSettings=this.strokeSettings;break;case"setKeyHistory":this.keyHistory=t.value.keyHistory;break;case"getKeyHistory":t.value.obj.keyHistory=this.keyHistory;break;case"setTextBoxPos":this.setTextBoxPos(t.value.actObj,t.value.degree,t.value.flip,t.value.x,t.value.y);break;case"setTextBoxPoints":this.setTextBoxPoints(t.value.actObj,t.value.degree,t.value.flip,t.value.x,t.value.y);break;case"alignTextAreaIntoCanvas":this.alignTextAreaIntoCanvas();break;case"initializeTextShape":this.initializeTextShape(t.value.text,t.value.fontFamily,t.value.fontSize,t.value.bold,t.value.italic,t.value.strokeColor,t.value.fillColor,t.value.outlineColor,t.value.outlineWidth);break;case"stopPathDrawing":this.stopPathDrawing(t.value.e,t.value.isApply);break;case"updateArrowRatio":this.updateArrowRatio(t.value.obj);break;case"getSquarePointForRotatedShape":this.getSquarePointForRotatedShape(t.value.obj,t.value.object);break;case"drawImage":this.drawImage(t.value.x,t.value.y,t.value.width,t.value.height,t.value.src,t.value.degree,t.value.isAspectRatio,t.value.opacity,t.value.isSelected);break;case"reset":this.reset();break;case"updateObj":this.updateObj(t.value.dimObj,t.value.x,t.value.y);break;case"straightenShapes":this.straightenShapes();break;case"straightenShapePoints":this.straightenShapePoints(t.value.obj,t.value.isReverse);break;case"straightenPath":this.straightenPath(t.value.obj);break;case"straightenFHD":this.straightenFHD();break;case"getTextBoxPosition":this.getTextBoxPosition(t.value.obj,t.value.object);break;case"setFlipState":this.setFlipState(t.value.x,t.value.y,t.value.obj,t.value.object);break;case"getNewShapeId":t.value.obj.id=this.getNewShapeId();break;case"z-order":this.updateZOrder(t.value.obj,t.value.value);break;case"getSmallestIndex":t.value.obj.index=this.getSmallestIndex();break;case"isIndexInObjColl":t.value.obj.bool=this.isIndexInObjColl(t.value.index);break;case"drawAnnotations":this.drawAnnotations(t.value.ctx,t.value.shape,t.value.pen,t.value.isPreventApply,t.value.x,t.value.y,t.value.panRegion);break;case"updateShapeColl":this.updateShapeColl();break;case"getNewOrder":t.value.obj.order=this.getNewOrder();break;case"getHighestOrder":t.value.obj.order=this.getHighestOrder();break;case"getLowestOrder":t.value.obj.order=this.getLowestOrder();break;case"drawRedact":this.drawRedact(t.value.x,t.value.y,t.value.width,t.value.height,t.value.type,t.value.value);break;case"setRedactType":this.redactType=t.value.redactType;break}},o.prototype.getModuleName=function(){return"shape"},o.prototype.initShapePvtProps=function(){var t=this.parent;t.lowerCanvas&&(this.lowerContext=t.lowerCanvas.getContext("2d")),t.upperCanvas&&(this.upperContext=t.upperCanvas.getContext("2d")),d(this.shapeImg)&&(this.shapeImg=t.createElement("img",{id:t.element.id+"_shapeImg",attrs:{name:"Image",crossorigin:"anonymous"}})),this.textSettings.fontFamily===""&&(this.textSettings.fontFamily=t.fontFamily.default)},o.prototype.reset=function(){this.textSettings={text:"Enter Text",fontFamily:this.parent.fontFamily.default,fontSize:null,fontRatio:null,bold:!1,italic:!1,underline:!1},this.strokeSettings={strokeColor:"#fff",fillColor:"",strokeWidth:null,radius:null,outlineColor:"",outlineWidth:null},this.preventFrameAnnotation=!1},o.prototype.drawEllipse=function(t,e,i,r,n,s,a,l,h){this.initializeShape("ellipse");var c=t&&e?{x:t,y:e}:null;this.drawShape("ellipse",n,s,a,c,i,r,null,null,null,l,null,h)},o.prototype.drawLine=function(t,e,i,r,n,s,a){this.initializeShape("line");var l=t&&e?{x:t,y:e}:null,h=i-t,c=r-e;this.drawShape("line",n,s,null,l,h,c,null,null,null,null,null,a)},o.prototype.drawPath=function(t,e,i,r){this.initializeShape("path"),t&&this.drawShape("path",e,i,null,null,null,null,t,null,null,null,null,r)},o.prototype.drawArrow=function(t,e,i,r,n,s,a,l,h){this.initializeShape("arrow");var c=t&&e?{x:t,y:e}:null,u=i-t,p=r-e;this.drawShape("arrow",n,s,null,c,u,p,null,a,l,null,null,h)},o.prototype.drawRectangle=function(t,e,i,r,n,s,a,l,h,c){this.initializeShape("rectangle");var u=t&&e?{x:t,y:e}:null;this.drawShape("rectangle",n,s,a,u,i,r,null,null,null,l,null,h,c)},o.prototype.drawRedact=function(t,e,i,r,n,s){this.initializeShape("redact");var a=t&&e?{x:t,y:e}:null;this.drawShape("redact",null,null,null,a,i,r,null,null,null,null,null,null,null,n,s)},o.prototype.drawText=function(t,e,i,r,n,s,a,l,h,c,u,p,f,g){this.drawShapeText(i,r,n,s,a,l,t,e,h,c,u,p,f,g)},o.prototype.initializeShape=function(t){var e=this.parent;this.redrawActObj(),e.activeObj.shape=t,e.currObjType.isCustomCrop=!1},o.prototype.updateWidthHeight=function(t){return t.activePoint.width=t.activePoint.endX-t.activePoint.startX,t.activePoint.height=t.activePoint.endY-t.activePoint.startY,t},o.prototype.setDimension=function(t,e){var i=this.parent,r=i.activeObj.shape;(t&&e||(r==="line"||r==="arrow")&&(t||e))&&(i.activeObj.activePoint.width=t,i.activeObj.activePoint.height=e,i.currObjType.shape.toLowerCase()==="ellipse"&&(i.activeObj.activePoint.width=2*t,i.activeObj.activePoint.height=2*e))},o.prototype.getArrowType=function(t){var e=t;if(t){var i={None:"none",Arrow:"arrow",SolidArrow:"arrowSolid",Circle:"circle",SolidCircle:"circleSolid",Square:"square",SolidSquare:"squareSolid",Bar:"bar"};e=i[""+t]}return e},o.prototype.drawShape=function(t,e,i,r,n,s,a,l,h,c,u,p,f,g,v,y){var C=this.parent;if(!C.disabled&&C.isImageLoaded){C.notify("draw",{prop:"setImageEdited",onPropertyChange:!1}),this.redrawActObj();var b=m([],C.objColl,[],!0);if(C.togglePen=!1,this.keyHistory="",C.upperCanvas.style.display="block",this.refreshActiveObj(),C.currObjType.shape=t=t.toLowerCase(),t!=="freehanddraw"&&t!==""){C.activeObj.shape=t;var M=C.activeObj.strokeSettings;this.upperContext.clearRect(0,0,C.upperCanvas.width,C.upperCanvas.height),d(M)&&(M=this.strokeSettings),t==="path"&&l&&(C.activeObj.pointColl=l),p!=null&&(C.activeObj.opacity=p),M.strokeWidth=e||M.strokeWidth;var S=C.activeObj.shape;(S==="rectangle"||S==="ellipse")&&e===0&&(M.strokeWidth=0),M.strokeColor=i||M.strokeColor,M.fillColor=r||r===""?r:M.fillColor,M.radius=g||M.radius;var N=C.img.destWidth>100?100:C.img.destWidth/2,x=C.img.destHeight>100?100:C.img.destHeight/2;C.activeObj.activePoint.width=N,C.activeObj.activePoint.height=x,t==="line"||t==="arrow"?(C.activeObj.lineDraw="horizontal",C.activeObj.activePoint.height=0,t==="arrow"&&(C.activeObj.activePoint.width+=50,C.activeObj.start=this.getArrowType(h),C.activeObj.end=this.getArrowType(c))):t==="rectangle"?C.activeObj.activePoint.width+=C.activeObj.activePoint.width/2:t==="redact"&&v&&(C.activeObj.redactType=v.toLowerCase(),v===ly.Blur?y&&(C.activeObj.redactBlur=y):y&&(C.activeObj.redactPixelate=y),C.activeObj.redactImage=C.createElement("canvas")),this.setDimension(s,a),n?(C.activeObj.activePoint.startX=n.x,C.activeObj.activePoint.startY=n.y,C.activeObj.activePoint.endX=C.activeObj.activePoint.startX+C.activeObj.activePoint.width,C.activeObj.activePoint.endY=C.activeObj.activePoint.startY+C.activeObj.activePoint.height):this.setCenterPoints(),this.setPointCollForLineAndArrow(),t==="arrow"&&(C.activeObj.triangleDirection="right"),C.currObjType.isDragging=C.currObjType.isCustomCrop=!1,this.initShapeProps();var A={shapeSettingsObj:{}};C.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:A}});var U=A.shapeSettingsObj,z={cancel:!1,action:"insert",previousShapeSettings:U,currentShapeSettings:U};C.trigger("shapeChanging",z),C.editCompleteArgs=z,this.updateShapeChangeEventArgs(z.currentShapeSettings,z.allowShapeOverflow),this.setDimension(s,a),C.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}}),u&&(C.activeObj.rotatedAngle=u*(Math.PI/180),C.notify("selection",{prop:"updPtCollForShpRot",onPropertyChange:!1,value:{obj:C.activeObj}})),C.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}}),C.notify("selection",{prop:"isShapeInserted",onPropertyChange:!1,value:{bool:!0}}),C.notify("undo-redo",{prop:"updateUrObj",onPropertyChange:!1,value:{objColl:b}}),t==="redact"?C.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"redact",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}):C.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"shapes",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}),C.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1}),C.isPublicMethod&&!f&&C.notify("undo-redo",{prop:"updateUndoRedo",value:{operation:"shapeInsert"},onPropertyChange:!1}),C.isPublicMethod=!1}}},o.prototype.initShapeProps=function(){var t=this.parent;t.activeObj.shapeDegree=t.transform.degree,t.activeObj.shapeFlip=t.transform.currFlipState,t.activeObj.textFlip=t.transform.currFlipState,t.activeObj.flipObjColl=[],t.activeObj.order=this.getNewOrder()},o.prototype.setPointCollForLineAndArrow=function(){var t=this.parent,e=t.activeObj.shape,i=t.activeObj.activePoint,r=i.startX,n=i.startY,s=i.endX,a=i.endY;if((e==="line"||e==="arrow")&&(t.activeObj.pointColl=this.getLinePoints(r,n,s,a),t.activeObj.pointColl))for(var l=0,h=t.activeObj.pointColl.length;l<h;l++)t.activeObj.pointColl[l].ratioX=(t.activeObj.pointColl[l].x-t.img.destLeft)/t.img.destWidth,t.activeObj.pointColl[l].ratioY=(t.activeObj.pointColl[l].y-t.img.destTop)/t.img.destHeight},o.prototype.prevObjColl=function(){var t=this.parent,e={currObj:{}};t.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:e}}),this.prevObj=e.currObj,this.prevObj.objColl=m([],t.objColl,[],!0),this.prevObj.pointColl=m([],t.pointColl,[],!0),this.prevObj.afterCropActions=m([],t.afterCropActions,[],!0);var i={selPointColl:null};t.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:i}}),this.prevObj.selPointColl=m([],i.selPointColl,[],!0)},o.prototype.drawShapeText=function(t,e,i,r,n,s,a,l,h,c,u,p,f,g){var v=this.parent;if(!v.disabled&&v.isImageLoaded){v.currObjType.shape==="freehanddraw"&&(this.apply(),v.upperCanvas.style.cursor=v.cursor="default",v.currObjType.shape=""),v.notify("draw",{prop:"setImageEdited",onPropertyChange:!1}),v.togglePen=!1,this.redrawActObj(),this.prevObjColl(),this.refreshActiveObj(),v.activeObj.shape=v.currObjType.shape="text",v.currObjType.isCustomCrop=!1,this.initializeTextShape(t,e,i,r,n,s,u,p,f),v.currObjType.isText=v.currObjType.isInitialText=!0,d(v.activeObj.textSettings.fontSize)&&(v.getFontSizes(),v.activeObj.textSettings.fontSize=parseInt(v.fontSizeColl[parseInt("3",10)-1].text,10)),v.img.destWidth<100?v.activeObj.textSettings.fontSize=Math.floor(v.img.destWidth/20):v.img.destHeight<100&&(v.activeObj.textSettings.fontSize=Math.floor(v.img.destHeight/20)),v.activeObj.shapeDegree=v.transform.degree,v.activeObj.shapeFlip=v.transform.currFlipState,v.activeObj.flipObjColl=[],this.updateFontStyles(),v.activeObj.order=this.getNewOrder();var y=this.upperContext.measureText(v.activeObj.textSettings.text).width+v.activeObj.textSettings.fontSize*.5,C=v.activeObj.textSettings.fontSize;if(t){v.activeObj.keyHistory=t;var b=this.getMaxText();b=b||v.activeObj.textSettings.text,y=this.upperContext.measureText(b).width+v.activeObj.textSettings.fontSize*.5;var M=t.split(`
`);M.length>1&&(C=M.length*v.activeObj.textSettings.fontSize,C+=i*.25)}if(!d(a)&&!d(l)?(v.activeObj.activePoint.startX=a,v.activeObj.activePoint.startY=l,v.activeObj.activePoint.endX=v.activeObj.activePoint.startX+y,v.activeObj.activePoint.endY=v.activeObj.activePoint.startY+C):this.setCenterPoints(!0,y,C),g){v.notify("selection",{prop:"setTransformedShape",onPropertyChange:!1,value:{bool:!0}}),this.setTransformColl(g);var S=v.activeObj;S.shapeDegree=0,S.shapeFlip="";for(var N=0,x=S.rotateFlipColl,A=0;A<x.length;A++)typeof x[A]=="number"&&(N+=x[A]);N%90===0&&Math.abs(N)%180===90&&(S.activePoint.endX=S.activePoint.startX+C,S.activePoint.endY=S.activePoint.startY+y,S.activePoint.width=S.activePoint.endX-S.activePoint.startX,S.activePoint.height=S.activePoint.endY-S.activePoint.startY)}var U={shapeSettingsObj:{}};v.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:U}});var z=U.shapeSettingsObj,J={cancel:!1,action:"insert",previousShapeSettings:z,currentShapeSettings:z};if(v.trigger("shapeChanging",J),v.editCompleteArgs=J,this.drawShapeTextEvent(J),c&&(v.activeObj.rotatedAngle=c*(Math.PI/180),v.notify("selection",{prop:"updPtCollForShpRot",onPropertyChange:!1,value:{obj:v.activeObj}}),this.upperContext.clearRect(0,0,v.upperCanvas.width,v.upperCanvas.height),v.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:v.activeObj,isCropRatio:null,points:null,isPreventDrag:!0,saveContext:null,isPreventSelection:null}}),v.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1}),v.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}})),t&&t.indexOf(`
`)>-1&&v.isPublicMethod){var R=String(v.fontSizeColl.findIndex(function(_){return _.text===String(v.activeObj.textSettings.fontSize)})+1);v.noPushUndo=!0,v.updateFontSize("5"),parseInt(R,10)>0&&v.updateFontSize(R),v.noPushUndo=!1}v.isPublicMethod&&!h&&v.notify("undo-redo",{prop:"updateUndoRedo",value:{operation:"shapeInsert"},onPropertyChange:!1}),v.isPublicMethod=!1}},o.prototype.drawShapeImageEvent=function(t,e){var i=this.parent;this.updateShapeChangeEventArgs(t.currentShapeSettings,t.allowShapeOverflow),i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}}),i.objColl.push(i.activeObj);var r=m({},i.cropObj,{},!0);i.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeInsert",previousObj:this.prevObj,previousObjColl:this.prevObj.objColl,previousPointColl:this.prevObj.pointColl,previousSelPointColl:this.prevObj.selPointColl,previousCropObj:r,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),i.notify("selection",{prop:"redrawShape",onPropertyChange:!1,value:{obj:i.objColl[i.objColl.length-1]}}),e?(i.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"shapes",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}),i.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1}),i.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}})):i.okBtn(null,!0),i.notify("selection",{prop:"isShapeInserted",onPropertyChange:!1,value:{bool:!0}})},o.prototype.setTransformColl=function(t){var e=this.parent;if(e.activeObj.rotateFlipColl=[],t)for(var i=0;i<t.length;i++)t[i].degree?e.activeObj.rotateFlipColl.push(t[i].degree):e.activeObj.rotateFlipColl.push(t[i].flip.toLowerCase())},o.prototype.drawShapeTextEvent=function(t){var e=this.parent;this.updateShapeChangeEventArgs(t.currentShapeSettings,t.allowShapeOverflow),this.addLetter(e.activeObj.textSettings.text),e.activeObj.textFlip=e.transform.currFlipState,this.updateFontRatio(e.activeObj),e.objColl.push(e.activeObj);var i=m({},e.cropObj,{},!0);e.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeInsert",previousObj:this.prevObj,previousObjColl:this.prevObj.objColl,previousPointColl:this.prevObj.pointColl,previousSelPointColl:this.prevObj.selPointColl,previousCropObj:i,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),e.notify("selection",{prop:"redrawShape",onPropertyChange:!1,value:{obj:e.objColl[e.objColl.length-1]}}),e.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}}),e.notify("selection",{prop:"isShapeInserted",onPropertyChange:!1,value:{bool:!0}}),e.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"text",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}),e.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1})},o.prototype.initializeTextShape=function(t,e,i,r,n,s,a,l,h){var c=this.parent;this.keyHistory="",c.upperCanvas.style.display="block",c.activeObj.strokeSettings.strokeColor=s||c.activeObj.strokeSettings.strokeColor,c.activeObj.strokeSettings.fillColor=a||c.activeObj.strokeSettings.fillColor,c.activeObj.textSettings.text=t||c.activeObj.textSettings.text,c.activeObj.textSettings.fontFamily=e||c.activeObj.textSettings.fontFamily,c.activeObj.textSettings.fontSize=i||c.activeObj.textSettings.fontSize,c.activeObj.textSettings.bold=r||c.activeObj.textSettings.bold,c.activeObj.textSettings.italic=n||c.activeObj.textSettings.italic,c.activeObj.strokeSettings.outlineColor=l||c.activeObj.strokeSettings.outlineColor,c.activeObj.strokeSettings.outlineWidth=h||c.activeObj.strokeSettings.outlineWidth},o.prototype.drawImage=function(t,e,i,r,n,s,a,l,h){this.initializeShape("image"),this.onLoadImgShape(t,e,i,r,n,null,s,a,l,h)},o.prototype.redrawActObj=function(t,e,i){var r,n=this.parent;n.activeObj.shape&&(r=n.activeObj.shape.split("-")),n.activeObj.horTopLine&&n.activeObj.shape&&r[0]!=="crop"&&(n.textArea.style.display==="block"||n.textArea.style.display==="inline-block"?(n.notify("selection",{prop:"setTextBoxStylesToActObj",onPropertyChange:!1}),this.updateFontRatio(n.activeObj,!0),t&&e?t!==n.activeObj.activePoint.startX&&e!==n.activeObj.activePoint.startY&&this.updateTextFromTextArea():(this.updateTextFromTextArea(),n.textArea.style.transform="",n.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1})),this.refreshActiveObj()):this.applyActObj(i))},o.prototype.apply=function(t,e,i){var r=this.parent;if(!r.disabled)if(r.togglePen&&!r.currObjType.isCustomCrop){var n=r.img.destLeft,s=r.img.destTop,a=r.img.destWidth,l=r.img.destHeight;r.notify("draw",{prop:"callUpdateCurrTransState",onPropertyChange:!1});var h=this.lowerContext.filter;this.lowerContext.filter="none",r.togglePen=!1,(r.isCircleCrop||r.currSelectionPoint&&r.currSelectionPoint.shape==="crop-circle")&&r.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),r.img.destLeft=n,r.img.destTop=s,r.img.destWidth=a,r.img.destHeight=l,this.lowerContext.filter=h}else i=i||"original",d(r.activeObj.shape)&&d(t)?r.currObjType.shape="":r.currObjType.shape=t||r.currObjType.shape,r.currObjType.shape!==""&&(this.upperContext.clearRect(0,0,r.upperCanvas.width,r.upperCanvas.height),r.activeObj.shape==="text"?r.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:i,obj:e,isCropRatio:null,points:null,isPreventDrag:!0,saveContext:null,isPreventSelection:null}}):r.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:i,obj:e}}),r.activeObj.shape=r.currObjType.shape.toLowerCase(),!t&&r.currObjType.shape!==""&&!r.currObjType.isCustomCrop&&r.objColl.push(m({},r.activeObj,{},!0)),this.keyHistory="")},o.prototype.setCenterPoints=function(t,e,i){var r=this.parent,n,s;t&&e&&i?(n=e,s=i):(n=r.activeObj.activePoint.width,s=r.activeObj.activePoint.height),r.activeObj.activePoint.startX=r.lowerCanvas.width/2-n/2,r.activeObj.activePoint.startY=r.lowerCanvas.height/2-s/2,r.activeObj.activePoint.endX=r.lowerCanvas.width/2+n/2,r.activeObj.activePoint.endY=r.lowerCanvas.height/2+s/2},o.prototype.updSelChangeEventArgs=function(t){var e=this.parent;e.activeObj.activePoint={startX:t.startX,startY:t.startY,endX:e.activeObj.activePoint.startX+e.activeObj.activePoint.width,endY:e.activeObj.activePoint.startY+e.activeObj.activePoint.height,width:t.width,height:t.height},e.activeObj.activePoint.endX=e.activeObj.activePoint.startX+e.activeObj.activePoint.width,e.activeObj.activePoint.endY=e.activeObj.activePoint.startY+e.activeObj.activePoint.height},o.prototype.updateShapeChangeEventArgs=function(t,e){var i=this.parent,r;if(t.id&&t.id.indexOf("shape_")===-1&&t.id.indexOf("pen_")===-1&&(i.activeObj.currIndex?i.activeObj.currIndex="shape_"+t.id:i.pointColl[r].id="pen_"+t.id),t.id&&t.id.split("_")[0]&&t.id.split("_")[0]==="pen")r=parseInt(t.id.split("_")[1],10)-1,i.pointColl[r].points=t.points,i.pointColl[r].strokeColor=t.strokeColor,i.pointColl[r].strokeWidth=t.strokeWidth,i.pointColl[r].opacity=t.opacity,i.pointColl[r].order=t.index;else{switch(i.activeObj.activePoint.startX=t.startX,i.activeObj.activePoint.startY=t.startY,t.width&&t.height&&(i.activeObj.activePoint.width=t.width,i.activeObj.activePoint.height=t.height,i.activeObj.activePoint.endX=i.activeObj.activePoint.startX+i.activeObj.activePoint.width,i.activeObj.activePoint.endY=i.activeObj.activePoint.startY+i.activeObj.activePoint.height),i.activeObj.shape!=="text"&&(i.activeObj.strokeSettings.strokeColor=t.strokeColor,i.activeObj.strokeSettings.strokeWidth=t.strokeWidth),i.activeObj.strokeSettings.fillColor=t.fillColor,i.activeObj.opacity=t.opacity,i.activeObj.order=t.index,i.activeObj.preventShapeDragOut=!e,d(t.degree)&&(t.degree=0),i.activeObj.shape){case"ellipse":i.activeObj.activePoint.width=t.radiusX*2,i.activeObj.activePoint.height=t.radiusY*2,i.activeObj.activePoint.endX=i.activeObj.activePoint.startX+i.activeObj.activePoint.width,i.activeObj.activePoint.endY=i.activeObj.activePoint.startY+i.activeObj.activePoint.height,t.degree&&(i.activeObj.rotatedAngle=t.degree*(Math.PI/180));break;case"line":case"arrow":i.activeObj.activePoint.width=t.length,i.activeObj.activePoint.endX=t.endX,i.activeObj.activePoint.endY=t.endY,i.activeObj.activePoint.width=i.activeObj.activePoint.startX+i.activeObj.activePoint.width,i.activeObj.activePoint.height=i.activeObj.activePoint.startY+i.activeObj.activePoint.height,i.activeObj.shape==="arrow"&&(i.activeObj.start=this.getArrowType(t.arrowHead),i.activeObj.end=this.getArrowType(t.arrowTail));break;case"text":i.activeObj.keyHistory=i.activeObj.textSettings.text=t.text,i.activeObj.textSettings.fontSize=t.fontSize,i.activeObj.strokeSettings.strokeColor=t.color,i.activeObj.strokeSettings.outlineColor=t.strokeColor,i.activeObj.strokeSettings.outlineWidth=t.strokeWidth,i.activeObj.strokeSettings.fillColor=t.fillColor,i.activeObj.textSettings.fontFamily=t.fontFamily,this.setTransformColl(t.transformCollection),t.degree&&(i.activeObj.rotatedAngle=t.degree*(Math.PI/180)),this.updateFontRatio(i.activeObj);break;case"rectangle":case"image":t.degree&&(i.activeObj.rotatedAngle=t.degree*(Math.PI/180));break;case"path":i.activeObj.pointColl=t.points;break}if(i.activeObj.shape==="text"&&i.activeObj.textSettings){i.activeObj.textSettings.bold=!1,i.activeObj.textSettings.italic=!1,i.activeObj.textSettings.underline=!1;for(var n=0;n<t.fontStyle.length;n++)switch(t.fontStyle[n]){case"bold":i.activeObj.textSettings.bold=!0;break;case"italic":i.activeObj.textSettings.italic=!0;break}}}},o.prototype.addLetter=function(t){var e=this.parent;if(e.textArea.style.display==="none"&&(e.currObjType.isText||e.activeObj.shape==="text")){var i=e.activeObj.textSettings.fontSize;t==="Backspace"?this.keyHistory=this.keyHistory.slice(0,-1):this.keyHistory+=t,this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),this.updateFontStyles();var r=this.upperContext.measureText(this.keyHistory).width+i*.5,n=i;this.upperContext.fillText(this.keyHistory,e.activeObj.activePoint.startX,e.activeObj.activePoint.startY+i),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),e.currObjType.isText=!0,e.notify("selection",{prop:"setActivePoint",onPropertyChange:!1,value:{startX:r,startY:n}})}},o.prototype.redrawText=function(){var t=this.parent,e=t.activeObj.textSettings,i=e.fontSize,r=e.fontFamily,n=e.bold,s=e.italic,a="";n&&(a+="bold "),s&&(a+="italic "),this.upperContext.font=a+i+"px "+r;var l=t.activeObj.keyHistory.split(`
`),h=t.textArea.style.display==="block"||t.textArea.style.display==="inline-block"?this.getMaxText(!0):this.getMaxText(),c=this.upperContext.measureText(h).width+i*.5,u=l.length*i;l.length>1&&(u+=i*.5),t.notify("selection",{prop:"setTextSelection",onPropertyChange:!1,value:{width:c,height:u}}),t.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:t.activeObj.activePoint,obj:t.activeObj,isMouseMove:null,x:null,y:null}}),t.notify("selection",{prop:"redrawShape",onPropertyChange:!1,value:{obj:t.activeObj}})},o.prototype.updateTextFromTextArea=function(){var t=this.parent,e=!1,i=t.activeObj.textSettings.fontSize,r=m({},t.activeObj,{},!0),n=m({},t.cropObj,{},!0),s={currObj:{}};t.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:s}});var a=s.currObj;a.objColl=m([],t.objColl,[],!0),a.pointColl=m([],t.pointColl,[],!0),a.afterCropActions=m([],t.afterCropActions,[],!0);var l={selPointColl:null};t.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:l}}),a.selPointColl=m([],l.selPointColl,[],!0),t.activeObj.keyHistory!==t.textArea.value&&(e=!0),t.activeObj.keyHistory=t.textArea.value,t.textArea.style.display="none",t.textArea.value="",this.updateFontStyles();var h=this.upperContext.measureText(t.activeObj.keyHistory).width+i*.5,c=i,u=t.activeObj.keyHistory.split(`
`);if(u.length>1){c*=u.length,c+=i*.1*u.length;for(var p=[],f=0,g=u.length;f<g;f++)p.push(this.upperContext.measureText(u[f]).width+i*.5);h=Math.max.apply(Math,p)}if(t.notify("selection",{prop:"setTextSelection",onPropertyChange:!1,value:{width:h,height:c}}),t.activeObj.rotatedAngle!==0){var v=t.activeObj.activePoint.width-r.activePoint.width,y=t.activeObj.activePoint.height-r.activePoint.height,C="";v>0&&y>0?C="widthHeight":v!==0?C="width":y!==0&&(C="height"),t.activeObj.activePoint=m({},r.activePoint,{},!0),t.notify("selection",{prop:"adjustRotationPoints",onPropertyChange:!1,value:{rectangle:t.activeObj.activePoint,x:v,y,angle:t.activeObj.rotatedAngle,type:"text",elem:C}}),t.notify("shape",{prop:"updateFontSize",onPropertyChange:!1,value:{obj:t.activeObj}})}t.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:t.activeObj.activePoint,obj:t.activeObj,isMouseMove:null,x:null,y:null}}),this.updImgRatioForActObj(),t.activeObj.rotatedAngle!==0&&t.notify("selection",{prop:"updPtCollForShpRot",onPropertyChange:!1,value:{obj:t.activeObj}}),e?(this.apply(t.activeObj.shape,t.activeObj),t.objColl.push(m({},t.activeObj,{},!0)),t.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"text",previousObj:a,previousObjColl:a.objColl,previousPointColl:a.pointColl,previousSelPointColl:a.selPointColl,previousCropObj:n,previousText:t.activeObj.keyHistory,currentText:t.textArea.value,previousFilter:null,isCircleCrop:null}})):(this.apply(t.activeObj.shape,t.activeObj),t.objColl.push(m({},t.activeObj,{},!0)))},o.prototype.iterateObjColl=function(){var t=this.parent;if(t.objColl.length>0)for(var e=this.getSmallestIndex(),i=m([],t.objColl,[],!0);i.length>0;){for(var r=!1,n=0;n<i.length;n++){var s=i[n];if(d(s.order)){i.splice(n,1),n--;continue}if(s.order===e){this.apply(s.shape,s),s.shape==="redact"&&JSON.stringify(s.activePoint)===JSON.stringify(t.activeObj.activePoint)&&s.redactImage!==t.activeObj.redactImage&&(s.redactImage=t.activeObj.redactImage,t.objColl[n]&&JSON.stringify(t.objColl[n].activePoint)===JSON.stringify(s.activePoint)&&(t.objColl[n].redactImage=t.activeObj.redactImage)),this.refreshActiveObj(),e++,this.isIndexInObjColl(e)||e++,i.splice(n,1),r=!0;break}}if(!r)break}},o.prototype.getSmallestIndex=function(){for(var t=this.parent,e,i=0,r=t.objColl.length;i<r;i++){var n=t.objColl[i];d(n.order)||(d(e)||n.order<e)&&(e=n.order)}return e},o.prototype.isIndexInObjColl=function(t){for(var e=this.parent,i=0,r=e.objColl.length;i<r;i++){var n=e.objColl[i];if(!d(n.order)&&n.order===t)return!0}return!1},o.prototype.updImgRatioForActObj=function(){var t=this.parent,e={startX:t.img.destLeft,startY:t.img.destTop,width:t.img.destWidth,height:t.img.destHeight};this.straightenShapes();var i=t.img,r=i.destLeft,n=i.destTop,s=i.destWidth,a=i.destHeight,l=t.activeObj.activePoint;t.activeObj.imageRatio={startX:(l.startX-r)/s,startY:(l.startY-n)/a,endX:(l.endX-r)/s,endY:(l.endY-n)/a,width:s/l.width,height:a/l.height},t.activeObj.rotationCirclePointColl&&(t.activeObj.rotationCirclePointColl.ratioX=(t.activeObj.rotationCirclePointColl.x-r)/s,t.activeObj.rotationCirclePointColl.ratioY=(t.activeObj.rotationCirclePointColl.y-n)/a),t.activeObj.shape==="path"?this.updatePathRatio(t.activeObj):t.activeObj.shape==="arrow"&&this.updateArrowRatio(t.activeObj),t.img.destLeft=e.startX,t.img.destTop=e.startY,t.img.destWidth=e.width,t.img.destHeight=e.height},o.prototype.zoomObjColl=function(t){var e=this.parent,i={startX:e.img.destLeft,startY:e.img.destTop,width:e.img.destWidth,height:e.img.destHeight};if(this.straightenShapes(),e.objColl.length>0){for(var r=0,n=e.objColl.length;r<n;r++){var s=e.objColl[r];if(s.imageRatio&&(s.activePoint.startX=s.imageRatio.startX*e.img.destWidth+e.img.destLeft,s.activePoint.startY=s.imageRatio.startY*e.img.destHeight+e.img.destTop,s.activePoint.endX=s.imageRatio.endX*e.img.destWidth+e.img.destLeft,s.activePoint.endY=s.imageRatio.endY*e.img.destHeight+e.img.destTop),s=this.updateWidthHeight(s),s.shape==="text")this.updateFontSize(s);else if(s.shape==="line"||s.shape==="arrow"){s.pointColl=this.getLinePoints(s.activePoint.startX,s.activePoint.startY,s.activePoint.endX,s.activePoint.endY);for(var a=0,l=s.pointColl.length;a<l;a++)s.pointColl[a].ratioX=(s.pointColl[a].x-e.img.destLeft)/e.img.destWidth,s.pointColl[a].ratioY=(s.pointColl[a].y-e.img.destTop)/e.img.destHeight;s.shape==="arrow"&&this.updateArrowSize(s),e.transform.straighten!==0&&(s.shape==="line"||s.shape==="arrow")&&this.straightenShapePoints(s)}else if(s.shape==="path"){for(var h=0,c=s.pointColl.length;h<c;h++)s.pointColl[h].x=s.pointColl[h].ratioX*e.img.destWidth+e.img.destLeft,s.pointColl[h].y=s.pointColl[h].ratioY*e.img.destHeight+e.img.destTop;this.updatePathRatio(s),e.transform.straighten!==0&&this.straightenPath(s)}e.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:s.activePoint,obj:s}}),s.shape!=="line"&&s.shape!=="arrow"&&s.shape!=="path"&&s.rotatedAngle!==0&&(this.setPointCollForShapeRotation(s),s.rotationCirclePoint.x=s.rotationCirclePoint.ratioX*e.img.destWidth+e.img.destLeft,s.rotationCirclePoint.y=s.rotationCirclePoint.ratioY*e.img.destHeight+e.img.destTop,s.rotationCirclePointColl&&(s.rotationCirclePointColl.x=s.rotationCirclePointColl.ratioX*e.img.destWidth+e.img.destLeft,s.rotationCirclePointColl.y=s.rotationCirclePointColl.ratioY*e.img.destHeight+e.img.destTop))}if(d(t)){var u=this.lowerContext.filter;this.lowerContext.filter="none",this.iterateObjColl(),this.lowerContext.filter=u}}e.img.destLeft=i.startX,e.img.destTop=i.startY,e.img.destWidth=i.width,e.img.destHeight=i.height},o.prototype.straightenPath=function(t){for(var e,i=0,r=t.pointColl.length;i<r;i++)e=this.straightenPoints(t.pointColl[i].x,t.pointColl[i].y),t.pointColl[i].x=e.x,t.pointColl[i].y=e.y},o.prototype.straightenFHD=function(){for(var t=this.parent,e=0,i=t.freehandCounter;e<i;e++){t.points=m([],t.pointColl[e].points,[]);for(var r=t.points.length,n=void 0,s=0;s<r;s++)n=this.straightenPoints(t.points[s].x,t.points[s].y),t.points[s].x=n.x,t.points[s].y=n.y}var a={selPointColl:null};t.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:a}});for(var e=0,i=t.freehandCounter;e<i;e++)if(a.selPointColl[e]&&a.selPointColl[e].points)for(var r=a.selPointColl[e].points.length,n=void 0,s=0;s<r;s++)n=this.straightenPoints(a.selPointColl[e].points[s].x,a.selPointColl[e].points[s].y),a.selPointColl[e].points[s].x=n.x,a.selPointColl[e].points[s].y=n.y;var l={straightenPoint:null};if(t.notify("freehand-draw",{prop:"getStraightenPoint",onPropertyChange:!1,value:{obj:l}}),l.straightenPoint.x&&l.straightenPoint.y){var h={angle:0};t.notify("freehand-draw",{prop:"getStraightenPointAngle",onPropertyChange:!1,value:{obj:h}});var c=((t.transform.straighten===360?0:t.transform.straighten)-h.angle)*(Math.PI/180),n=this.straightenPoints(l.straightenPoint.x,l.straightenPoint.y,c);c===0&&(n.x=l.straightenPoint.x,n.y=l.straightenPoint.y),t.notify("freehand-draw",{prop:"setStraightenPoint",onPropertyChange:!1,value:{x:n.x,y:n.y}})}},o.prototype.straightenPoints=function(t,e,i){var r=this.parent,n={x:r.img.destLeft+r.img.destWidth/2,y:r.img.destTop+r.img.destHeight/2};i=i||r.transform.straighten*(Math.PI/180);var s={x:Math.cos(i)*(t-n.x)-Math.sin(i)*(e-n.y)+n.x,y:Math.sin(i)*(t-n.x)+Math.cos(i)*(e-n.y)+n.y};return s},o.prototype.straightenShapes=function(){var t=this.parent,e=t.img,i=e.destLeft,r=e.destTop,n=e.destWidth,s=e.destHeight,a={bool:t.isStraightening};if(!(!a.bool||t.transform.straighten===0)){t.notify("draw",{prop:"updateImgCanvasPoints"});var l={points:null};t.notify("draw",{prop:"getImageCanvasPoints",value:{obj:l}});var h={x:i+n/2,y:r+s/2},c=-(t.transform.straighten*(Math.PI/180)),u={x:Math.cos(c)*(l.points[0].x-h.x)-Math.sin(c)*(l.points[0].y-h.y)+h.x,y:Math.sin(c)*(l.points[0].x-h.x)+Math.cos(c)*(l.points[0].y-h.y)+h.y},p={x:Math.cos(c)*(l.points[1].x-h.x)-Math.sin(c)*(l.points[1].y-h.y)+h.x,y:Math.sin(c)*(l.points[1].x-h.x)+Math.cos(c)*(l.points[1].y-h.y)+h.y},f={x:Math.cos(c)*(l.points[2].x-h.x)-Math.sin(c)*(l.points[2].y-h.y)+h.x,y:Math.sin(c)*(l.points[2].x-h.x)+Math.cos(c)*(l.points[2].y-h.y)+h.y};t.img.destWidth=p.x-u.x,t.img.destHeight=f.y-p.y,t.img.destLeft=u.x,t.img.destTop=u.y}},o.prototype.straightenShapePoints=function(t,e){var i=this.parent,r=i.img,n=r.destLeft,s=r.destTop,a=r.destWidth,l=r.destHeight,h={bool:i.isStraightening};if(h.bool&&(t.shape==="line"||t.shape==="arrow")){t.activePoint.width=t.activePoint.endX>t.activePoint.startX?t.activePoint.endX-t.activePoint.startX:t.activePoint.startX-t.activePoint.endX,t.activePoint.height=t.activePoint.endY>t.activePoint.startY?t.activePoint.endY-t.activePoint.startY:t.activePoint.startY-t.activePoint.endY;var c={x:n+a/2,y:s+l/2},u=(e?-i.transform.straighten:i.transform.straighten)*(Math.PI/180),p={x:Math.cos(u)*(t.activePoint.startX-c.x)-Math.sin(u)*(t.activePoint.startY-c.y)+c.x,y:Math.sin(u)*(t.activePoint.startX-c.x)+Math.cos(u)*(t.activePoint.startY-c.y)+c.y},f={x:Math.cos(u)*(t.activePoint.endX-c.x)-Math.sin(u)*(t.activePoint.endY-c.y)+c.x,y:Math.sin(u)*(t.activePoint.endX-c.x)+Math.cos(u)*(t.activePoint.endY-c.y)+c.y};t.activePoint.startX=p.x,t.activePoint.startY=p.y,t.activePoint.endX=f.x,t.activePoint.endY=f.y,t.activePoint.width=t.activePoint.endX>t.activePoint.startX?t.activePoint.endX-t.activePoint.startX:t.activePoint.startX-t.activePoint.endX,t.activePoint.height=t.activePoint.endY>t.activePoint.startY?t.activePoint.endY-t.activePoint.startY:t.activePoint.startY-t.activePoint.endY,i.notify("selection",{prop:"adjustActObjForLineArrow",onPropertyChange:!1,value:{obj:t}})}},o.prototype.redrawObj=function(t){var e=this.parent,i=!1;if(e.objColl.length>0){if(t==="horizontal"||t==="vertical"||t==="Horizontal"||t==="Vertical"||t==="horizontalVertical"||t==="verticalHorizontal")this.updateCurrentActiveObjPoint(t.toLowerCase());else if(typeof t=="number"){this.updateCurrentActiveObjPoint(t);var r=this.lowerContext.filter;this.lowerContext.filter="brightness(1) contrast(100%) hue-rotate(0deg) saturate(100%) opacity(1) blur(0px) sepia(0%) grayscale(0%) invert(0%)";for(var n=0,s=e.objColl.length;n<s;n++){var a=e.objColl[n].shape.split("-");a[0]!=="crop"&&(this.apply(e.objColl[n].shape,e.objColl[n]),i=!0)}i&&e.notify("draw",{prop:"applyFrame",value:{ctx:this.lowerContext,frame:e.frameObj.type,preventImg:!0}}),this.lowerContext.filter=r}}},o.prototype.updateCurrentActiveObjPoint=function(t){for(var e=this.parent,i,r=e.img,n=r.destLeft,s=r.destTop,a=r.destWidth,l=r.destHeight,h=0,c=e.objColl.length;h<c;h++){var u=e.objColl[h];if(e.activeObj.shape===u.shape&&e.activeObj.activePoint.startX===u.activePoint.startX&&e.activeObj.activePoint.startY===u.activePoint.startY&&e.activeObj.activePoint.endX===u.activePoint.endX&&e.activeObj.activePoint.endY===u.activePoint.endY&&e.activeObj.currIndex===u.currIndex){i=h;break}}if(t==="horizontal"||t==="vertical"||t==="Horizontal"||t==="Vertical"||t==="horizontalvertical"||t==="verticalhorizontal"){if(t==="horizontal"||t==="Horizontal")for(var p=0,c=e.objColl.length;p<c;p++){var u=e.objColl[p];u.shapeFlip!==e.transform.currFlipState&&(u.activePoint.startX<=n+a/2?(u.activePoint.endX=n+a-(u.activePoint.startX-n),u.activePoint.startX=u.activePoint.endX-u.activePoint.width,e.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:u.activePoint,obj:u}})):u.activePoint.startX>=n+a/2&&(u.activePoint.startX=n+(n+a-u.activePoint.endX),u.activePoint.endX=u.activePoint.startX+u.activePoint.width,e.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:u.activePoint,obj:u}})),u.shape==="line"||u.shape==="arrow"||u.shape==="path"?this.flipLineArrowObj(u,"horizontal"):u.rotatedAngle!==0&&(u.rotatedAngle=u.rotatedAngle+(Math.PI-u.rotatedAngle)*2,u.rotationCirclePointColl.x<=n+a/2?u.rotationCirclePointColl.x=n+a-(u.rotationCirclePointColl.x-n):u.rotationCirclePointColl.x>=n+a/2&&(u.rotationCirclePointColl.x=n+(n+a-u.rotationCirclePointColl.x)),u.rotationCirclePointColl.ratioX=(u.rotationCirclePointColl.x-n)/a),u.shapeFlip=e.transform.currFlipState,u.imageRatio={startX:(u.activePoint.startX-n)/a,startY:(u.activePoint.startY-s)/l,endX:(u.activePoint.endX-n)/a,endY:(u.activePoint.endY-s)/l,width:a/u.activePoint.width,height:l/u.activePoint.height})}else if(t==="vertical"||t==="Vertical")for(var p=0;p<e.objColl.length;p++){var u=e.objColl[p];u.shapeFlip!==e.transform.currFlipState&&(u.activePoint.startY<=s+l/2?(u.activePoint.endY=s+l-(u.activePoint.startY-s),u.activePoint.startY=u.activePoint.endY-u.activePoint.height,e.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:u.activePoint,obj:u}})):u.activePoint.startY>=e.lowerCanvas.height/2&&(u.activePoint.startY=s+(s+l-u.activePoint.endY),u.activePoint.endY=u.activePoint.startY+u.activePoint.height,e.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:u.activePoint,obj:u}})),u.shape==="line"||u.shape==="arrow"||u.shape==="path"?this.flipLineArrowObj(u,"vertical"):u.rotatedAngle!==0&&(u.rotatedAngle=-u.rotatedAngle,u.rotationCirclePointColl.y<=s+l/2?u.rotationCirclePointColl.y=s+l-(u.rotationCirclePointColl.y-s):u.rotationCirclePointColl.y>=s+l/2&&(u.rotationCirclePointColl.y=s+(s+l-u.rotationCirclePointColl.y)),u.rotationCirclePointColl.ratioY=(u.rotationCirclePointColl.y-s)/l),u.shapeFlip=e.transform.currFlipState,u.imageRatio={startX:(u.activePoint.startX-n)/a,startY:(u.activePoint.startY-s)/l,endX:(u.activePoint.endX-n)/a,endY:(u.activePoint.endY-s)/l,width:a/u.activePoint.width,height:l/u.activePoint.height})}else if(t==="verticalhorizontal"||t==="horizontalvertical")for(var p=0,c=e.objColl.length;p<c;p++){var u=e.objColl[p];u.shapeFlip!==e.transform.currFlipState&&(u.activePoint.startX<=n+a/2?(u.activePoint.endX=n+a-(u.activePoint.startX-n),u.activePoint.startX=u.activePoint.endX-u.activePoint.width,e.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:u.activePoint,obj:u}})):u.activePoint.startX>=n+a/2&&(u.activePoint.startX=n+(n+a-u.activePoint.endX),u.activePoint.endX=u.activePoint.startX+u.activePoint.width,e.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:u.activePoint,obj:u}})),u.activePoint.startY<=s+l/2?(u.activePoint.endY=s+l-(u.activePoint.startY-s),u.activePoint.startY=u.activePoint.endY-u.activePoint.height,e.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:u.activePoint,obj:u}})):u.activePoint.startY>=e.lowerCanvas.height/2&&(u.activePoint.startY=s+(s+l-u.activePoint.endY),u.activePoint.endY=u.activePoint.startY+u.activePoint.height,e.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:u.activePoint,obj:u}})),(u.shape==="line"||u.shape==="arrow"||u.shape==="path")&&this.flipLineArrowObj(u,t),u.shapeFlip=e.transform.currFlipState,u.imageRatio={startX:(u.activePoint.startX-n)/a,startY:(u.activePoint.startY-s)/l,endX:(u.activePoint.endX-n)/a,endY:(u.activePoint.endY-s)/l,width:a/u.activePoint.width,height:l/u.activePoint.height})}i!==void 0&&(e.activeObj=m({},e.objColl[i],{},!0))}else if(t===90)this.rotateObjColl();else if(t===-90)for(var p=0;p<3;p++)this.rotateObjColl();else if(typeof t=="number")if(t>0)this.rotateObjColl();else for(var p=0;p<3;p++)this.rotateObjColl()},o.prototype.rotateObjColl=function(){for(var t=this.parent,e=t.img,i=e.destWidth,r=e.destHeight,n=e.destLeft,s=e.destTop,a=0,l=t.objColl.length;a<l;a++){var h=t.objColl[a],c=h.shape;h.activePoint.startY=s+r*h.imageRatio.startX,h.activePoint.endY=s+r*h.imageRatio.endX,h.activePoint.startX=n+i-i*h.imageRatio.endY,h.activePoint.endX=n+i-i*h.imageRatio.startY,h=this.updateWidthHeight(t.objColl[a]),this.updateFontSize(h),c==="line"||c==="arrow"||c==="path"?(this.rotateLineArrowObj(h),c==="arrow"&&this.updateArrowSize(h)):h.rotatedAngle!==0&&(h.rotationCirclePointColl.y=s+r*h.rotationCirclePointColl.ratioX,h.rotationCirclePointColl.x=n+i-i*h.rotationCirclePointColl.ratioY,h.rotationCirclePointColl.ratioX=(h.rotationCirclePointColl.x-n)/i,h.rotationCirclePointColl.ratioY=(h.rotationCirclePointColl.y-s)/r)}for(var a=0,l=t.objColl.length;a<l;a++)t.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:t.objColl[a].activePoint,obj:t.objColl[a]}});for(var a=0,l=t.objColl.length;a<l;a++){var h=t.objColl[a];h.imageRatio={startX:(h.activePoint.startX-n)/i,startY:(h.activePoint.startY-s)/r,endX:(h.activePoint.endX-n)/i,endY:(h.activePoint.endY-s)/r,width:i/h.activePoint.width,height:r/h.activePoint.height}}},o.prototype.rotateLineArrowObj=function(t){if(!d(t.pointColl)){var e=this.parent,i=e.img,r=i.destWidth,n=i.destHeight,s=i.destLeft,a=i.destTop;if(t.pointColl.length>0){for(var l=0;l<t.pointColl.length;l++)t.pointColl[l].y=a+n*t.pointColl[l].ratioX,t.pointColl[l].x=s+r-r*t.pointColl[l].ratioY;for(var l=0;l<t.pointColl.length;l++)t.pointColl[l].ratioX=(t.pointColl[l].x-s)/r,t.pointColl[l].ratioY=(t.pointColl[l].y-a)/n;var h=void 0;d(t.pointColl[t.pointColl.length-2])?h={x:0,y:0}:h={x:t.pointColl[t.pointColl.length-2].x,y:t.pointColl[t.pointColl.length-2].y};var c=t.pointColl[t.pointColl.length-1].x-h.x,u=t.pointColl[t.pointColl.length-1].y-h.y;t.activePoint.startX=t.pointColl[0].x,t.activePoint.startY=t.pointColl[0].y,t.activePoint.endX=t.pointColl[t.pointColl.length-1].x+c/2,t.activePoint.endY=t.pointColl[t.pointColl.length-1].y+u/2,t=this.updateWidthHeight(t)}}},o.prototype.flipLineArrowObj=function(t,e){if(e=e.toLowerCase(),!d(t.pointColl)&&(e==="horizontal"?this.lineArrowHorizontalFlip(t):e==="vertical"?this.lineArrowVerticalFlip(t):(this.lineArrowHorizontalFlip(t),t.shapeFlip="",this.lineArrowVerticalFlip(t)),t.activePoint.startX=t.pointColl[0].x,t.activePoint.startY=t.pointColl[0].y,t.activePoint.endX=t.pointColl[t.pointColl.length-1].x,t.activePoint.endY=t.pointColl[t.pointColl.length-1].y,t.activePoint.startX>t.activePoint.endX)){var i=t.activePoint.startX;t.activePoint.startX=t.activePoint.endX,t.activePoint.endX=i,i=t.activePoint.startY,t.activePoint.startY=t.activePoint.endY,t.activePoint.endY=i}},o.prototype.lineArrowHorizontalFlip=function(t){var e=this.parent,i=e.img,r=i.destWidth,n=i.destHeight,s=i.destLeft,a=i.destTop;if(t.shapeFlip!==e.transform.currFlipState){for(var l=0,h=t.pointColl.length;l<h;l++){var c=t.pointColl[l];c.x<=s+r/2?c.x=s+r-(c.x-s):c.x>=s+r/2&&(c.x=s+(s+r-c.x)),c.ratioX=(c.x-s)/r,c.ratioY=(c.y-a)/n}if(t.shape==="arrow"){var u=t.start;t.start=t.end,t.end=u}t.shapeFlip=e.transform.currFlipState}},o.prototype.lineArrowVerticalFlip=function(t){var e=this.parent,i=e.img,r=i.destWidth,n=i.destHeight,s=i.destLeft,a=i.destTop;if(t.shapeFlip!==e.transform.currFlipState){for(var l=0,h=t.pointColl.length;l<h;l++){var c=t.pointColl[l];c.y<=a+n/2?c.y=a+n-(c.y-a):c.y>=a+n/2&&(c.y=a+(a+n-c.y)),c.ratioX=(c.x-s)/r,c.ratioY=(c.y-a)/n}t.shapeFlip=e.transform.currFlipState}},o.prototype.getRotDegOfShape=function(t,e){var i=this.parent,r;t.shapeDegree===0?r=this.parent.transform.degree:r=this.parent.transform.degree-t.shapeDegree,r<0&&(r=360+r);var n={bool:!1};if(i.notify("selection",{prop:"getTransformedShape",onPropertyChange:!1,value:{obj:n}}),n.bool&&!e&&i.activeObj.rotateFlipColl){r=0;for(var s=0;s<i.activeObj.rotateFlipColl.length;s++)typeof i.activeObj.rotateFlipColl[s]=="number"&&(r+=i.activeObj.rotateFlipColl[s])}return r},o.prototype.renderTextArea=function(t,e,i){var r=this.parent,n={shapeSettingsObj:{}};r.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:n}});var s=n.shapeSettingsObj,a={cancel:!1,action:"text-edit",previousShapeSettings:s,currentShapeSettings:s};r.trigger("shapeChanging",a),this.updateShapeChangeEventArgs(a.currentShapeSettings,a.allowShapeOverflow);var l=this.getRotDegOfShape(r.activeObj);this.transformTextArea(),r.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1});var h=r.element.querySelector("#"+r.element.id+"_zOrderBtn"),c=r.element.querySelector("#"+r.element.id+"_duplicate"),u=r.element.querySelector("#"+r.element.id+"_remove"),p=r.element.querySelector("#"+r.element.id+"_editText"),f=i.strokeSettings.outlineColor,g=i.strokeSettings.outlineWidth,v=[];h&&h.classList.add("e-overlay"),c&&c.classList.add("e-overlay"),u&&u.classList.add("e-overlay"),p&&p.classList.add("e-overlay"),i.strokeSettings.fillColor!==""?r.textArea.style.backgroundColor=i.strokeSettings.fillColor:r.textArea.style.backgroundColor="transparent",r.textArea.style.display="block",r.textArea.style.left=t+"px",r.textArea.style.top=e+"px",r.textArea.style.fontFamily=i.textSettings.fontFamily,r.textArea.style.fontSize=i.textSettings.fontSize+"px",r.textArea.style.color=i.strokeSettings.strokeColor;var y=i.textSettings.fontSize,C=Math.max(1,g/2),b=C*(Math.floor((y-1)/16)*.5+.5);if(/^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6}|[0-9A-Fa-f]{8})$|^[a-zA-Z]+$/.test(i.strokeSettings.outlineColor)){for(var M=-b;M<=b;M++)for(var S=-b;S<=b;S++)(M!==0||S!==0)&&v.push(M/2+"px "+S/2+"px 0 "+f);r.textArea.style.textShadow=v.join(", ")}else r.textArea.style.textShadow=null;r.textArea.style.fontWeight=i.textSettings.bold?"bold":"normal",r.textArea.style.fontStyle=i.textSettings.italic?"italic":"normal",r.textArea.style.border="2px solid "+r.themeColl[r.theme].primaryColor,r.textArea.value=i.keyHistory,r.textArea.style.overflow="hidden",r.textArea.style.width="auto",r.textArea.style.height="auto",r.textArea.focus();var N=i.activePoint,x=N.width,A=N.height;l%90===0&&l%180!==0&&l!==0?(r.textArea.style.width=A+A*.25+"px",r.textArea.style.height=x+x*.25+"px"):(r.textArea.style.width=x+x*.25+"px",r.textArea.style.height=A+A*.25+"px"),this.setTextBoxWidth();var U={flipColl:null};if(r.notify("transform",{prop:"getFlipColl",onPropertyChange:!1,value:{obj:U}}),U.flipColl.length<=1&&this.setTextBoxHeight(),parseFloat(r.textArea.style.maxHeight)<r.activeObj.textSettings.fontSize&&(r.textArea.style.maxHeight=r.activeObj.textSettings.fontSize+"px"),l%90===0&&l%180!==0?parseFloat(r.textArea.style.left)+parseFloat(r.textArea.style.width)>r.img.destTop+r.img.destHeight&&this.alignTextAreaIntoCanvas():parseFloat(r.textArea.style.left)+parseFloat(r.textArea.style.width)>r.img.destLeft+r.img.destWidth&&this.alignTextAreaIntoCanvas(),i.rotatedAngle!==0){var z=parseFloat(r.textArea.style.left),J=parseFloat(r.textArea.style.top);if(i.flipObjColl.length>0){var R={panRegion:""},_=r.lowerCanvas,B=_.clientWidth,E=_.clientHeight,L={x:0,y:0};r.notify("crop",{prop:"getCurrFlipState",onPropertyChange:!1,value:{panObj:R}}),R.panRegion!==""&&(R.panRegion==="horizontal"?(L.x=B-B/2,z=L.x-z+L.x):R.panRegion==="vertical"?(L.y=E-E/2,J=L.y-J+L.y):(L={x:B-B/2,y:E-E/2},z=L.x-z+L.x,J=L.y-J+L.y))}var P=z+parseFloat(r.textArea.style.width),j=J+parseFloat(r.textArea.style.height),k=parseFloat(r.textArea.style.width),F=parseFloat(r.textArea.style.height),X={x:P-k/2,y:j-F/2},re=Math.cos(i.rotatedAngle),q=Math.sin(i.rotatedAngle),ie={x:re*(P-X.x)-q*(j-X.y)+X.x,y:q*(P-X.x)+re*(j-X.y)+X.y};if(ie.x>r.img.destLeft&&ie.x<r.img.destLeft+r.img.destWidth&&ie.y>r.img.destTop&&ie.y+parseFloat(r.textArea.style.fontSize)<r.img.destTop+r.img.destHeight)r.textArea.style.width=r.textArea.style.width;else for(var ue=0,fe=parseFloat(r.textArea.style.width);;)if(ue++,k-=1,P=z+k,X={x:P-k/2,y:j-F/2},ie={x:re*(P-X.x)-q*(j-X.y)+X.x,y:q*(P-X.x)+re*(j-X.y)+X.y},ie.x>r.img.destLeft&&ie.x<r.img.destLeft+r.img.destWidth&&ie.y>r.img.destTop&&ie.y+parseFloat(r.textArea.style.fontSize)<r.img.destTop+r.img.destHeight||ue===fe){r.textArea.style.width=k+"px";break}}r.notify("selection",{prop:"clearUpperCanvas",onPropertyChange:!1})},o.prototype.setTextBoxWidth=function(t){var e=this.parent;if(e.activeObj.rotatedAngle!==0){e.textArea.style.whiteSpace="nowrap",e.textArea.style.textOverflow="ellipsis",e.textArea.style.display="inline-block";return}else e.textArea.style.whiteSpace="",e.textArea.style.textOverflow="",e.textArea.style.display==="inline-block"&&(e.textArea.style.display="block");var i=this.getMaxText(!0);e.textArea.style.display==="block"||e.textArea.style.display==="inline-block"?this.updateFontStyles(!0):this.updateFontStyles();var r=this.upperContext.measureText(i).width+parseFloat(e.textArea.style.fontSize)/2,n=t?this.upperContext.measureText(String.fromCharCode(t.which)).width:0,s=m({},e.activeObj,{},!0),a="",l=this.getRotDegOfShape(s);if(s.shapeFlip!==e.transform.currFlipState?a="":a=e.transform.currFlipState,t&&parseFloat(e.textArea.style.width)<r+n||d(t)){if(l===0)a.toLowerCase()==="horizontal"?parseFloat(e.textArea.style.left)-e.img.destLeft-r-n>0&&(e.textArea.style.width=r+n+"px"):e.img.destWidth-(parseFloat(e.textArea.style.left)-e.img.destLeft)>r+n&&(e.textArea.style.width=r+n+"px");else if(l===90)a.toLowerCase()==="vertical"?parseFloat(e.textArea.style.top)-e.img.destTop-r-n>0&&(e.textArea.style.width=r+n+"px"):e.img.destHeight-(parseFloat(e.textArea.style.top)-e.img.destTop)>r+n&&(e.textArea.style.width=r+n+"px");else if(l===180){var h=parseFloat(e.textArea.style.left),c=e.img.destLeft;if(a.toLowerCase()==="horizontal"){var u=e.img.destWidth-(h-c);u>r+n&&(e.textArea.style.width=r+n+"px")}else{var p=h-c;p-r-n>0&&(e.textArea.style.width=r+n+"px")}}else if(l===270){var f=parseFloat(e.textArea.style.top),g=e.img.destTop;if(a.toLowerCase()==="vertical"){var v=e.img.destHeight-(f-g);v>r+n&&(e.textArea.style.width=r+n+"px")}else{var y=f-g;y-r-n>0&&(e.textArea.style.width=r+n+"px")}}}},o.prototype.setTextBoxHeight=function(){var t=this.parent,e,i=m({},t.activeObj,{},!0),r="",n=this.getRotDegOfShape(i);switch(i.textFlip===t.transform.currFlipState?r="":i.textFlip===""?r=t.transform.currFlipState:r=i.textFlip,n){case 0:r.toLowerCase()==="vertical"?t.textArea.style.maxHeight=t.img.destHeight-(t.img.destHeight-parseFloat(t.textArea.style.top))+"px":(e=parseFloat(t.textArea.style.top)-t.img.destTop,t.textArea.style.maxHeight=t.img.destHeight-e+"px");break;case 90:r.toLowerCase()==="horizontal"?t.textArea.style.maxHeight=t.img.destWidth-(parseFloat(t.textArea.style.left)-t.img.destLeft)+"px":t.textArea.style.maxHeight=parseFloat(t.textArea.style.left)-t.img.destLeft+"px";break;case 180:r.toLowerCase()==="vertical"?(e=parseFloat(t.textArea.style.top)-t.img.destTop,t.textArea.style.maxHeight=t.img.destHeight-e+"px"):t.textArea.style.maxHeight=parseFloat(t.textArea.style.top)-t.img.destTop+"px";break;case 270:r.toLowerCase()==="horizontal"?t.textArea.style.maxHeight=parseFloat(t.textArea.style.left)-t.img.destLeft+"px":t.textArea.style.maxHeight=t.img.destWidth-(parseFloat(t.textArea.style.left)-t.img.destLeft)+"px";break}},o.prototype.updatePathRatio=function(t){for(var e=this.parent,i=0,r=t.pointColl.length;i<r;i++){var n=t.pointColl[i];n.ratioX=(n.x-e.img.destLeft)/e.img.destWidth,n.ratioY=(n.y-e.img.destTop)/e.img.destHeight}},o.prototype.stopPathDrawing=function(t,e){var i=this.parent;if(i.activeObj.shape==="path"){var r={shape:null};if(i.notify("selection",{prop:"getCurrentDrawingShape",value:{obj:r}}),r.shape==="path"){var n=m({},i.cropObj,{},!0),s={currObj:{}};i.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:s}});var a=s.currObj;a.objColl=m([],i.objColl,[],!0),a.pointColl=m([],i.pointColl,[],!0),a.afterCropActions=m([],i.afterCropActions,[],!0);var l={selPointColl:null};if(i.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:l}}),a.selPointColl=m([],l.selPointColl,[],!0),i.notify("selection",{prop:"setCurrentDrawingShape",value:{value:""}}),i.currObjType.isDragging=!1,t&&t.type!=="touchstart"&&d(e)&&i.activeObj.pointColl.pop(),this.updatePathRatio(i.activeObj),d(i.activeObj.imageRatio)&&i.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),i.objColl.push(i.activeObj),i.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:a,previousObjColl:a.objColl,previousPointColl:a.pointColl,previousSelPointColl:a.selPointColl,previousCropObj:n,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),i.objColl.pop(),t&&(i.notify("selection",{prop:"mouseUpEventHandler",value:{e:t}}),this.lowerContext.clearRect(0,0,i.lowerCanvas.width,i.lowerCanvas.height),i.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1}),i.objColl.length>0)){var h=i.activeObj.activePoint,c=i.objColl[i.objColl.length-1].activePoint;Math.floor(h.startX)===Math.floor(c.startX)&&Math.floor(h.startY)===Math.floor(c.startY)&&Math.floor(h.endX)===Math.floor(c.endX)&&Math.floor(h.endY)===Math.floor(c.endY)&&this.refreshActiveObj()}if(i.notify("draw",{prop:"setNewPath",value:{bool:!0}}),i.objColl[i.objColl.length-1]){var u=i.drawingShape;i.notify("selection",{prop:"setCurrentDrawingShape",value:{value:""}}),i.noRedact=!0,i.selectShape(i.objColl[i.objColl.length-1].currIndex),i.notify("selection",{prop:"setCurrentDrawingShape",value:{value:"path"}}),i.drawingShape=u}i.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}});var p={shapeSettingsObj:{}};i.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:p}});var f=p.shapeSettingsObj,g={cancel:!1,action:"draw-end",previousShapeSettings:f},v={cancel:!1,action:"move",previousShapeSettings:f};i.notify("selection",{prop:"triggerShapeChange",onPropertyChange:!1,value:{shapeResizingArgs:g,shapeMovingArgs:v,type:"mouse-up"}}),i.notify("undo-redo",{prop:"updateUndoRedoStack",onPropertyChange:!1})}}},o.prototype.findTextTarget=function(t){var e=this.parent;if(t){if(e.activeObj.shape!=="text")if(e.activeObj.shape==="path"){this.stopPathDrawing(t,null);return}else if(t.type==="dblclick"){e.notify("selection",{prop:"setPanDown",onPropertyChange:!1,value:{panDown:null}});var i=m({},e.activeObj,{},!0),r=m([],e.objColl,[],!0),n={bool:null};if(e.notify("selection",{prop:"findTargetObj",onPropertyChange:!1,value:{x:t.clientX,y:t.clientY,isCrop:!1,obj:n}}),e.objColl=r,!n.bool||e.activeObj.shape!=="text"){e.activeObj=m({},i,{},!0);return}}else return;var s,a;if(t.type==="dblclick"?(s=t.clientX,a=t.clientY):t.type==="touchstart"&&(s=t.touches[0].clientX,a=t.touches[0].clientY,e.notify("selection",{prop:"setTouchEndPoint",onPropertyChange:!1,value:{x:t.touches[0].clientX,y:t.touches[0].clientY}})),e.notify("toolbar",{prop:"setPreventZoomBtn",onPropertyChange:!1,value:{isPrevent:!0}}),e.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"text",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}),e.notify("toolbar",{prop:"setPreventZoomBtn",onPropertyChange:!1,value:{isPrevent:!1}}),e.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1}),!d(s)&&!d(a)){var l=e.lowerCanvas.getBoundingClientRect();s-=l.left,a-=l.top;var h="",c=this.getRotDegOfShape(e.activeObj);e.activeObj.textFlip===""?e.activeObj.textFlip===e.transform.currFlipState?h="":h=e.transform.currFlipState:e.activeObj.textFlip===e.transform.currFlipState?h="":e.transform.currFlipState===""?h=e.activeObj.textFlip:h=e.transform.currFlipState;var u=void 0;if(e.textArea.style.display==="none"){u=m({},e.activeObj,{},!0);for(var p=0;p<e.objColl.length;p++)JSON.stringify(e.activeObj)===JSON.stringify(e.objColl[p])&&e.objColl.splice(p,1);this.refreshActiveObj(),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),this.lowerContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),e.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1}),e.notify("draw",{prop:"redrawDownScale"}),e.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),e.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}}),(e.currSelectionPoint&&e.currSelectionPoint.shape==="crop-circle"||e.isCircleCrop)&&e.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),e.activeObj=u,this.updateFontStyles();var f=m({},e.activeObj,{},!0),g=f.topLeftCircle.radius,v=f.activePoint,y=v.startX,C=v.startY,b=v.endX,M=v.endY,S=v.width,N=v.height,x={x:y+S/2,y:C+N/2},A=Math.cos(f.rotatedAngle),U=Math.sin(f.rotatedAngle),z={x:A*(y-x.x)-U*(C-x.y)+x.x,y:U*(y-x.x)+A*(C-x.y)+x.y},J={x:A*(b-x.x)-U*(C-x.y)+x.x,y:U*(b-x.x)+A*(C-x.y)+x.y},R={x:A*(y-x.x)-U*(M-x.y)+x.x,y:U*(y-x.x)+A*(M-x.y)+x.y},_={x:A*(b-x.x)-U*(M-x.y)+x.x,y:U*(b-x.x)+A*(M-x.y)+x.y},n={position:null,x:s,y:a,x1:z.x,y1:z.y,x2:J.x,y2:J.y,x3:R.x,y3:R.y,x4:_.x,y4:_.y};if(e.notify("draw",{prop:"checkPointPosition",onPropertyChange:!1,value:{obj:n}}),f.rotatedAngle!==0&&(n.position==="inside"||n.position==="on")||f.rotatedAngle===0&&s>=f.activePoint.startX-g*2&&s<=f.activePoint.endX+g*2&&a>=f.activePoint.startY-g*2&&a<=f.activePoint.endY+g*2){if(this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),f.flipObjColl.length===4&&(f.flipObjColl=[],h="",f.shapeFlip=""),h===""&&f.flipObjColl.length>1&&(h=f.flipObjColl[f.flipObjColl.length-1]),f.flipObjColl.length<=1){var B=this.setTextBoxPos(f,c,h,s,a);s=B.x,a=B.y}else{var B=this.setTextBoxPoints(f,c,h,s,a);s=B.x,a=B.y}if(e.activeObj.rotatedAngle!==0){var E=this.getTextBoxPosition(e.activeObj);s=E.x,a=E.y,E=this.setFlipState(s,a,e.activeObj),s=E.x,a=E.y}this.renderTextArea(s,a,f)}else this.applyActObj()}}else if((e.textArea.style.display==="block"||e.textArea.style.display==="inline-block")&&this.selectedText()!==""&&t.type==="mousedown"){var u=e.textArea.value;e.textArea.value+="a",e.textArea.value=u}else e.textArea.style.display==="none"&&(e.textArea.style.display="block")}},o.prototype.getTextBoxPosition=function(t,e){var i={x:0,y:0},r=t.activePoint,n=r.startX,s=r.startY,a=r.endX,l=r.endY,h=r.width,c=r.height,u={x:n+h/2,y:s+c/2},p=Math.cos(t.rotatedAngle),f=Math.sin(t.rotatedAngle),g={x:p*(n-u.x)-f*(s-u.y)+u.x,y:f*(n-u.x)+p*(s-u.y)+u.y},v={x:p*(a-u.x)-f*(s-u.y)+u.x,y:f*(a-u.x)+p*(s-u.y)+u.y},y={x:p*(n-u.x)-f*(l-u.y)+u.x,y:f*(n-u.x)+p*(l-u.y)+u.y},C={x:p*(a-u.x)-f*(l-u.y)+u.x,y:f*(a-u.x)+p*(l-u.y)+u.y},b=this.getRotDegOfShape(t);return b===0||b===360?i={x:g.x,y:g.y}:b===90||b===-270?i={x:v.x,y:v.y}:b===180||b===-180?i={x:C.x,y:C.y}:(b===270||b===-90)&&(i={x:y.x,y:y.y}),e&&(e.x=i.x,e.y=i.y),i},o.prototype.setFlipState=function(t,e,i,r){var n=this.parent,s={panRegion:""},a=n.lowerCanvas,l=a.clientWidth,h=a.clientHeight,c={x:0,y:0};return n.notify("crop",{prop:"getCurrFlipState",onPropertyChange:!1,value:{panObj:s}}),s.panRegion!==""&&(s.panRegion==="horizontal"?(c.x=l-l/2,t=c.x-t+c.x):s.panRegion==="vertical"?(c.y=h-h/2,e=c.y-e+c.y):(c={x:l-l/2,y:h-h/2},t=c.x-t+c.x,e=c.y-e+c.y)),r&&(r.x=t,r.y=e),{x:t,y:e}},o.prototype.fileChanged=function(t){var e=t.target.files[0],i=e,r=i.name&&i.name.split(".").pop().toLowerCase();if(r&&["jpg","jpeg","png","svg","webp"].indexOf(r)===-1){this.refreshActiveObj();return}var n=window.URL,s=n.createObjectURL(t.target.files[0]);this.onLoadImgShape(null,null,null,null,s.toString(),!0),document.getElementById(this.parent.element.id+"_fileUpload").value=""},o.prototype.onLoadImgShape=function(t,e,i,r,n,s,a,l,h,c){var u=this,p=this.parent;typeof n=="string"?this.shapeImg.src=n:(p.inMemoryCanvas.width=n.width,p.inMemoryCanvas.height=n.height,p.inMemoryCanvas.getContext("2d").putImageData(n,0,0),this.shapeImg.src=p.inMemoryCanvas.toDataURL()),this.prevObjColl(),p.activeObj.shape="image",this.initShapeProps(),this.shapeImg.onload=function(){u.upperContext.drawImage(u.shapeImg,0,0,u.shapeImg.width,u.shapeImg.height),u.updateImgCanvas(s,t,e,i,r,a,l,h,c)}},o.prototype.updateImgCanvas=function(t,e,i,r,n,s,a,l,h){var c=this.parent;c.activeObj.imageElement=this.shapeImg,c.activeObj.imageCanvas=c.createElement("canvas");var u={width:0,height:0};if(c.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:this.shapeImg.width,height:this.shapeImg.height,obj:u,isImgShape:null}}),r&&n)if(a){var p={ratio:null};c.notify("selection",{prop:"findImageRatio",onPropertyChange:!1,value:{width:this.shapeImg.width,height:this.shapeImg.height,obj:p}}),u=this.resizeImage(r,p.ratio)}else u={width:r,height:n};if(this.updateObj(u,e,i),c.notify("draw",{prop:"downScaleImgCanvas",onPropertyChange:!1,value:{ctx:c.activeObj.imageCanvas.getContext("2d"),isImgAnnotation:!0,isHFlip:null,isVFlip:null}}),c.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:this.shapeImg.width,height:this.shapeImg.height,obj:u,isImgShape:!0}}),r&&n)if(a){var f={ratio:null};c.notify("selection",{prop:"findImageRatio",onPropertyChange:!1,value:{width:this.shapeImg.width,height:this.shapeImg.height,obj:f}}),u=this.resizeImage(r,f.ratio)}else u={width:r,height:n};l!=null&&(c.activeObj.opacity=l),this.updateObj(u,e,i),c.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}}),this.shapeImg=null,s&&(c.activeObj.rotatedAngle=s*(Math.PI/180),c.notify("selection",{prop:"updPtCollForShpRot",onPropertyChange:!1,value:{obj:c.activeObj}}));var g={shapeSettingsObj:{}};c.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:g}});var v=g.shapeSettingsObj,y={cancel:!1,action:"insert",previousShapeSettings:v,currentShapeSettings:v};c.trigger("shapeChanging",y),c.editCompleteArgs=y,t=t||h,this.drawShapeImageEvent(y,t),c.isPublicMethod&&!h?c.notify("undo-redo",{prop:"updateUndoRedo",onPropertyChange:!1}):c.isPublicMethod||c.notify("undo-redo",{prop:"updateUndoRedoStack",onPropertyChange:!1}),c.isPublicMethod=!1},o.prototype.updateObj=function(t,e,i){var r=this.parent;r.activeObj.activePoint.width=t.width,r.activeObj.activePoint.height=t.height,r.activeObj.activePoint.startX=e||r.lowerCanvas.width/2-t.width/2,r.activeObj.activePoint.startY=i||r.lowerCanvas.height/2-t.height/2,r.activeObj.activePoint.endX=r.activeObj.activePoint.startX+t.width,r.activeObj.activePoint.endY=r.activeObj.activePoint.startY+t.height},o.prototype.resizeImage=function(t,e){var i=e.split(":"),r=parseInt(i[0],10),n=parseInt(i[1],10),s=Math.round(t*n/r);return{width:t,height:s}},o.prototype.setTextBoxPos=function(t,e,i,r,n){var s={x:r,y:n},a=t.activePoint,l=a.startX,h=a.startY,c=a.endX,u=a.endY;switch(i=i.toLowerCase(),e){case 0:i==="horizontal"?(s.x=c,s.y=h):i==="vertical"?(s.x=l,s.y=u):(s.x=l,s.y=h);break;case 90:i==="horizontal"?(s.x=l,s.y=h):i==="vertical"?(s.x=c,s.y=u):(s.x=c,s.y=h);break;case 180:i==="horizontal"?(s.x=l,s.y=u):i==="vertical"?(s.x=c,s.y=h):(s.x=c,s.y=u);break;case 270:i==="horizontal"?(s.x=c,s.y=u):i==="vertical"?(s.x=l,s.y=h):(s.x=l,s.y=u);break}return s},o.prototype.setTextBoxPoints=function(t,e,i,r,n){var s={x:r,y:n},a=t.activePoint,l=a.startX,h=a.startY,c=a.endX,u=a.endY;switch(i=i.toLowerCase(),e){case 0:t.flipObjColl[0]&&t.flipObjColl[0].toLowerCase()==="horizontal"?i==="horizontal"?(s.x=l,s.y=h):i==="vertical"&&(s.x=c,s.y=u):i==="horizontal"?(s.x=c,s.y=u):i==="vertical"&&(s.x=c,s.y=h);break;case 90:t.flipObjColl[0]&&t.flipObjColl[0].toLowerCase()==="horizontal"?i==="horizontal"?(s.x=c,s.y=u):i==="vertical"&&(s.x=l,s.y=u):i==="horizontal"?(s.x=l,s.y=u):i==="vertical"&&(s.x=l,s.y=h);break;case 180:t.flipObjColl[0]&&t.flipObjColl[0].toLowerCase()==="horizontal"?(i==="horizontal"||i==="vertical")&&(s.x=l,s.y=h):i==="horizontal"?(s.x=l,s.y=h):i==="vertical"&&(s.x=l,s.y=u);break;case 270:t.flipObjColl[0]&&t.flipObjColl[0].toLowerCase()==="horizontal"?i==="horizontal"?(s.x=l,s.y=h):i==="vertical"&&(s.x=c,s.y=h):i==="horizontal"?(s.x=c,s.y=h):i==="vertical"&&(s.x=c,s.y=u);break}return s},o.prototype.selectedText=function(){var t=this.parent,e=t.textArea.selectionStart,i=t.textArea.selectionEnd;return t.textArea.value.substring(e,i)},o.prototype.panObjColl=function(t,e,i){var r=this.parent;if(r.objColl.length>0){for(var n=0,s=r.objColl.length;n<s;n++){var a=r.objColl[n];if(i===""){if(a.activePoint.startX+=t,a.activePoint.endX+=t,a.rotationCirclePointColl&&(a.rotationCirclePointColl.x+=t),a.shape==="path")for(var l=0,h=a.pointColl.length;l<h;l++)a.pointColl[l].x+=t;if(a.activePoint.startY+=e,a.activePoint.endY+=e,a.rotationCirclePointColl&&(a.rotationCirclePointColl.y+=e),a.shape==="path")for(var l=0;l<a.pointColl.length;l++)a.pointColl[l].y+=e}if(a=this.updateWidthHeight(a),r.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:a.activePoint,obj:a}}),a.shape==="line"||a.shape==="arrow"){a.pointColl=this.getLinePoints(a.activePoint.startX,a.activePoint.startY,a.activePoint.endX,a.activePoint.endY);for(var c=0,u=a.pointColl.length;c<u;c++)a.pointColl[c].ratioX=(a.pointColl[c].x-r.img.destLeft)/r.img.destWidth,a.pointColl[c].ratioY=(a.pointColl[c].y-r.img.destTop)/r.img.destHeight}this.refreshActiveObj()}var p=this.lowerContext.filter;this.lowerContext.filter="none",this.iterateObjColl(),this.lowerContext.filter=p,this.refreshActiveObj(),r.notify("draw",{prop:"applyFrame",value:{ctx:this.lowerContext,frame:r.frameObj.type,preventImg:!0}})}},o.prototype.updateFontStyles=function(t){var e=this.parent;this.upperContext.strokeStyle=e.activeObj.strokeSettings.strokeColor,this.upperContext.fillStyle=e.activeObj.strokeSettings.strokeColor;var i="";e.activeObj.textSettings.bold&&(i="bold "),e.activeObj.textSettings.italic&&(i="italic "),e.activeObj.textSettings.bold&&e.activeObj.textSettings.italic&&(i="italic bold ");var r=t?parseFloat(e.textArea.style.fontSize):e.activeObj.textSettings.fontSize,n=e.textArea.style.display==="block"||e.textArea.style.display==="inline-block"?e.textArea.style.fontFamily:e.activeObj.textSettings.fontFamily;this.upperContext.font=i+r+"px "+n},o.prototype.applyFontStyle=function(t){var e=this.parent,i={shapeSettingsObj:{}};e.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:i}});var r=i.shapeSettingsObj;this.pushActItemIntoObj();var n=m([],e.objColl,[],!0);switch(e.objColl.pop(),e.textArea.style.display==="none"?this.updateFontRatio(e.activeObj):this.updateFontRatio(e.activeObj,!0),t){case"default":this.updateFontStyle(t,n,"normal","normal");break;case"bold":this.updateFontStyle(t,n,"bold","normal");break;case"italic":this.updateFontStyle(t,n,"normal","italic");break;case"bolditalic":this.updateFontStyle(t,n,"bold","italic");break}var s={action:"font-style",currentShapeSettings:m({},r,{},!0)};s.currentShapeSettings.fontStyle=[t],e.trigger("shapeChange",s),e.editCompleteArgs=s},o.prototype.updateFontStyle=function(t,e,i,r){var n=this.parent,s=n.textArea.style;if(s.display==="block"||s.display==="inline-block"){s.fontWeight==="normal"&&i==="bold"?s.fontWeight="bold":s.fontWeight==="bold"&&i==="bold"&&(s.fontWeight="normal"),s.fontStyle==="normal"&&r==="italic"?s.fontStyle="italic":s.fontStyle==="italic"&&r==="italic"&&(s.fontStyle="normal");var a=s.fontWeight==="normal"&&s.fontStyle==="normal"?"default":s.fontWeight==="bold"&&s.fontStyle==="normal"?"bold":s.fontWeight==="normal"&&s.fontStyle==="italic"?"italic":"bolditalic",l=this.getTextAreaWidth(a);s.width=l+"px",this.updateObjColl(t,e)}else this.textSettings.bold=n.activeObj.textSettings.bold=i!=="normal",this.textSettings.italic=n.activeObj.textSettings.italic=r!=="normal",(n.activeObj.activePoint.width!==0||n.activeObj.activePoint.height!==0)&&this.redrawText(),n.notify("undo-redo",{prop:"updateUrObj",onPropertyChange:!1,value:{objColl:e}})},o.prototype.updateArrowRatio=function(t){var e=this.parent,i={arrowDimension:null};e.notify("draw",{prop:"getArrowDimension",onPropertyChange:!1,value:{obj:i}});var r;Math.abs(t.activePoint.width)>Math.abs(t.activePoint.height)?r=Math.abs(t.activePoint.width):r=Math.abs(t.activePoint.height);for(var n,s=["bar","arrow","arrowSolid","circle","square"],a=0,l=s;a<l.length;a++){n=l[a];var h=r/i.arrowDimension[n].width,c=r/i.arrowDimension[n].height;i.arrowDimension[n].ratioX=h,i.arrowDimension[n].ratioY=c}},o.prototype.updateArrowSize=function(t){var e={arrowDimension:null};this.parent.notify("draw",{prop:"getArrowDimension",onPropertyChange:!1,value:{obj:e}});var i;Math.abs(t.activePoint.width)>Math.abs(t.activePoint.height)?i=Math.abs(t.activePoint.width):i=Math.abs(t.activePoint.height);for(var r,n=["bar","arrow","arrowSolid","circle","square"],s=0,a=n;s<a.length;s++){r=a[s];var l=e.arrowDimension[r].ratioX,h=e.arrowDimension[r].ratioY;e.arrowDimension[r].width=i/l,e.arrowDimension[r].height=i/h}},o.prototype.updateFontRatio=function(t,e){var i=this.parent,r=this.getMaxText(e),n=this.upperContext.measureText(r).width+i.activeObj.textSettings.fontSize*.5,s=i.activeObj.textSettings.fontSize,a=this.getRotDegOfShape(t);if(d(e))a===0||Math.abs(a)===180?t.textSettings.fontRatio=n/t.textSettings.fontSize:t.textSettings.fontRatio=s/t.textSettings.fontSize;else if(e){var l={bool:!1};i.notify("selection",{prop:"getTransformedShape",onPropertyChange:!1,value:{obj:l}}),!l.bool||a===0||Math.abs(a)===180?t.textSettings.fontRatio=n/parseFloat(i.textArea.style.fontSize):t.textSettings.fontRatio=s/parseFloat(i.textArea.style.fontSize)}},o.prototype.updateFontSize=function(t){var e=this.getRotDegOfShape(t,!0);e===0||Math.abs(e)===180?t.textSettings.fontSize=t.activePoint.width/t.textSettings.fontRatio:t.textSettings.fontSize=t.activePoint.height/t.textSettings.fontRatio},o.prototype.updateObjColl=function(t,e){var i=this.parent,r=m({},i.cropObj,{},!0),n={currObj:{}};i.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:n}});var s=n.currObj;s.objColl=e,s.pointColl=m([],i.pointColl,[],!0),s.afterCropActions=m([],i.afterCropActions,[],!0);var a={selPointColl:null};i.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:a}}),s.selPointColl=m([],a.selPointColl,[],!0);var l=i.activeObj.textSettings.bold,h=i.activeObj.textSettings.italic;switch(t){case"default":i.activeObj.textSettings.bold=!1,i.activeObj.textSettings.italic=!1;break;case"bold":i.activeObj.textSettings.bold=!0,i.activeObj.textSettings.italic=!1;break;case"italic":i.activeObj.textSettings.bold=!1,i.activeObj.textSettings.italic=!0;break;case"bolditalic":i.activeObj.textSettings.bold=!0,i.activeObj.textSettings.italic=!0;break}i.objColl.push(i.activeObj),i.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"textAreaCustomization",previousObj:s,previousObjColl:s.objColl,previousPointColl:s.pointColl,previousSelPointColl:s.selPointColl,previousCropObj:r,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),i.objColl.pop(),i.activeObj.textSettings.bold=l,i.activeObj.textSettings.italic=h},o.prototype.pushActItemIntoObj=function(){var t=this.parent;if(t.textArea.style.display==="none")(t.activeObj.activePoint.width!==0||t.activeObj.activePoint.height!==0)&&t.objColl.push(t.activeObj);else{var e=m({},t.activeObj,{},!0);t.notify("selection",{prop:"setTextBoxStylesToActObj",onPropertyChange:!1}),t.objColl.push(t.activeObj),t.activeObj=e}},o.prototype.clearActObj=function(){var t=this.parent;t.textArea.style.display==="none"&&(this.refreshActiveObj(),this.applyActObj(),this.refreshActiveObj(),t.currObjType.isCustomCrop=!1)},o.prototype.refreshActiveObj=function(){var t=this.parent;t.activeObj={},t.activeObj.activePoint={startX:0,startY:0,endX:0,endY:0,width:0,height:0},t.activeObj.triangle=[],t.activeObj.triangleRatio=[],t.activeObj.order=null,t.activeObj.flipObjColl=[],t.activeObj.strokeSettings=this.strokeSettings,t.activeObj.textSettings=this.textSettings,t.activeObj.rotatedAngle=0,t.activeObj.opacity=1,t.activeObj.redactType=this.redactType,t.activeObj.redactBlur=t.tempRedactBlur,t.activeObj.redactPixelate=t.tempRedactPixel},o.prototype.applyActObj=function(t){var e=this.parent,i=!1;if(e.activeObj.shape!==void 0&&e.activeObj.shape==="text"&&e.activeObj.keyHistory==="")this.refreshActiveObj(),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height);else{var r=void 0,n=!1;if(e.activeObj.shape!==void 0&&(r=e.activeObj.shape.split("-")),(r===void 0&&e.currObjType.isCustomCrop||r!==void 0&&r[0]==="crop")&&(n=!0),e.activeObj.shape&&!n&&e.activeObj.shape!=="shape"){for(var s=0;s<e.objColl.length;s++)if(JSON.stringify(e.activeObj)===JSON.stringify(e.objColl[s])){i=!0;break}if(!i){d(e.activeObj.currIndex)&&(e.activeObj.currIndex=this.getNewShapeId()),d(e.activeObj.order)&&(e.activeObj.order=this.getNewOrder()),this.updImgRatioForActObj();var a=e.activeObj.currIndex.split("_"),l=e.objColl.splice(0,parseInt(a[1],10)-1);l.push(m({},e.activeObj,{},!0));for(var s=0;s<e.objColl.length;s++)l.push(e.objColl[s]);e.objColl=l,l=[],this.refreshActiveObj(),this.lowerContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),e.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1}),e.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),e.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}}),e.currObjType.shape="",this.refreshActiveObj(),e.isCircleCrop&&e.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),e.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1}),d(t)&&(e.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}),e.notify("draw",{prop:"setPrevActObj",onPropertyChange:!1,value:{prevActObj:null}}))}}}},o.prototype.getNewShapeId=function(){for(var t=this.parent,e=t.objColl.length+1,i=0;i<t.objColl.length;i++)t.objColl[i].currIndex==="shape_"+e&&(e++,i=-1);return"shape_"+e},o.prototype.getNewOrder=function(){var t=this.parent;this.updateShapeColl();for(var e=t.shapeColl.length+1,i=0;i<t.shapeColl.length;i++)t.shapeColl[i].order===e&&(e++,i=-1);return e},o.prototype.getHighestOrder=function(){var t=this.parent;this.updateShapeColl();for(var e=0,i=0;i<t.shapeColl.length;i++)t.shapeColl[i].order>e&&(e=t.shapeColl[i].order);return e},o.prototype.getLowestOrder=function(){var t=this.parent;this.updateShapeColl();for(var e=1,i=0;i<t.shapeColl.length;i++)t.shapeColl[i].order<e&&(e=t.shapeColl[i].order);return e},o.prototype.alignTextAreaIntoCanvas=function(){var t=this.parent,e=t.textArea.value;t.textArea.value="";for(var i=0,r=e.length;i<r;i++)t.textArea.value+=e[i],t.textArea.style.height="auto",t.textArea.style.height=t.textArea.scrollHeight+"px",this.setTextBoxWidth()},o.prototype.transformTextArea=function(){var t=this.parent;if(t.activeObj.shape==="text"){t.textArea.style.transformOrigin="0 0";var e=t.activeObj.rotatedAngle*(180/Math.PI),i="",r=this.getRotDegOfShape(t.activeObj);if(t.activeObj.flipObjColl.length>0)for(var n=0;n<t.activeObj.flipObjColl.length;n++)r!==0&&r%90===0&&r!==180?i+=t.activeObj.flipObjColl[n].toLowerCase()==="horizontal"?"scale(1, -1)":"scale(-1, 1)":i+=t.activeObj.flipObjColl[n].toLowerCase()==="horizontal"?"scale(-1, 1)":"scale(1, -1)",r+=e,(t.activeObj.flipObjColl[n].toLowerCase()==="horizontal"||t.activeObj.flipObjColl[n].toLowerCase()==="vertical")&&(t.textArea.style.transform="rotate("+r+"deg)"+i);else r+=e,t.textArea.style.transform="rotate("+r+"deg)"}},o.prototype.getTextAreaWidth=function(t){var e=this.parent,i=e.activeObj.textSettings.bold,r=e.activeObj.textSettings.italic;switch(t){case"default":e.activeObj.textSettings.bold=!1,e.activeObj.textSettings.italic=!1;break;case"bold":e.activeObj.textSettings.bold=!0,e.activeObj.textSettings.italic=!1;break;case"italic":e.activeObj.textSettings.bold=!1,e.activeObj.textSettings.italic=!0;break;case"bolditalic":e.activeObj.textSettings.bold=!0,e.activeObj.textSettings.italic=!0;break}var n=e.textArea.style.display!=="none";this.updateFontStyles(n);var s;return n?s=this.upperContext.measureText(e.textArea.value).width+e.activeObj.textSettings.fontSize*.5:s=this.upperContext.measureText(e.activeObj.keyHistory).width+e.activeObj.textSettings.fontSize*.5,e.activeObj.textSettings.bold=i,e.activeObj.textSettings.italic=r,s},o.prototype.getRedactObjDetails=function(t){var e=this.parent,i={};switch(i.id=t.currIndex,i.type=e.toPascalCase(t.redactType),i.startX=t.activePoint.startX,i.startY=t.activePoint.startY,i.width=t.activePoint.width,i.height=t.activePoint.height,t.redactType){case"blur":i.blurIntensity=t.redactBlur;break;case"pixelate":i.pixelSize=t.redactPixelate;break}return i},o.prototype.getObjDetails=function(t){var e=this.parent,i={};i.id=t.currIndex,i.type=e.toPascalCase(t.shape),i.startX=t.activePoint.startX,i.startY=t.activePoint.startY,i.index=t.order;var r={coll:null};switch(t.shape){case"rectangle":i.width=t.activePoint.width,i.height=t.activePoint.height,i.strokeColor=t.strokeSettings.strokeColor,i.fillColor=t.strokeSettings.fillColor,i.strokeWidth=t.strokeSettings.strokeWidth,i.degree=t.rotatedAngle*(180/Math.PI);break;case"ellipse":i.radius=t.activePoint.width/2,i.strokeColor=t.strokeSettings.strokeColor,i.fillColor=t.strokeSettings.fillColor,i.strokeWidth=t.strokeSettings.strokeWidth,i.radiusX=t.activePoint.width/2,i.radiusY=t.activePoint.height/2,i.degree=t.rotatedAngle*(180/Math.PI);break;case"line":case"arrow":if(i.length=t.activePoint.width,i.strokeColor=t.strokeSettings.strokeColor,i.strokeWidth=t.strokeSettings.strokeWidth,i.endX=t.activePoint.endX,i.endY=t.activePoint.endY,t.shape==="arrow"){var n={type:null};e.notify("selection",{prop:"getArrowType",onPropertyChange:!1,value:{type:t.start,obj:n}}),i.arrowHead=n.type,e.notify("selection",{prop:"getArrowType",onPropertyChange:!1,value:{type:t.end,obj:n}}),i.arrowTail=n.type}break;case"text":i.text=t.keyHistory,i.fontSize=t.textSettings.fontSize,i.fontFamily=t.textSettings.fontFamily,i.color=t.strokeSettings.strokeColor,i.strokeColor=t.strokeSettings.outlineColor,i.fillColor=t.strokeSettings.fillColor,i.strokeWidth=t.strokeSettings.outlineWidth,i.fontStyle=[],t.textSettings.bold&&i.fontStyle.push("bold"),t.textSettings.italic&&i.fontStyle.push("italic"),i.degree=t.rotatedAngle*(180/Math.PI),e.notify("selection",{prop:"updateTransColl",onPropertyChange:!1,value:{obj:r,object:t}}),i.transformCollection=r.coll;break;case"path":i.strokeColor=t.strokeSettings.strokeColor,i.strokeWidth=t.strokeSettings.strokeWidth,i.points=t.pointColl;break;case"image":i.imageData=t.imageCanvas.toDataURL(),i.degree=t.rotatedAngle*(180/Math.PI),i.width=t.activePoint.width,i.height=t.activePoint.height,i.opacity=t.opacity;break}return i},o.prototype.getFreehandDrawDetails=function(t){var e=this.parent,i={};return i.id=e.pointColl[t].id,i.type=xi.FreehandDraw,i.points=m([],e.pointColl[t].points),i.strokeColor=e.pointColl[t].strokeColor,i.strokeWidth=e.pointColl[t].strokeWidth,i.index=e.pointColl[t].order,i},o.prototype.getShapeSetting=function(t,e){var i=this.parent,r;if(!i.disabled&&i.isImageLoaded)if(i.textArea.style.display!=="none"?i.okBtn(null,!0):this.applyActObj(!0),t.split("_")[0]==="shape"){for(var n,s=0,a=i.objColl.length;s<a;s++)if(i.objColl[s].currIndex===t){n=m({},i.objColl[s],{},!0);break}r=this.getObjDetails(n)}else t.split("_")[0]==="pen"&&(r=this.getFreehandDrawDetails(parseInt(t.split("_")[1],10)-1));e.shapeDetails=r},o.prototype.getShapeSettings=function(t){var e=this.parent,i=[];if(!e.disabled&&e.isImageLoaded){e.textArea.style.display!=="none"?e.okBtn(null,!0):this.applyActObj(!0);for(var r=0,n=e.objColl.length;r<n;r++){var s=this.getObjDetails(e.objColl[r]);i.push(s)}for(var r=0;r<e.freehandCounter;r++){var s=this.getFreehandDrawDetails(r);i.push(s)}}t.shapeDetailsColl=i},o.prototype.getRedactSettings=function(t){var e=this.parent,i=[];if(!e.disabled&&e.isImageLoaded){e.textArea.style.display!=="none"?e.okBtn(null,!0):this.applyActObj(!0);for(var r=0,n=e.objColl.length;r<n;r++){var s=this.getRedactObjDetails(e.objColl[r]);i.push(s)}}t.shapeDetailsColl=i},o.prototype.isPointsInRange=function(t,e,i){var r=!1,n=this.parent;!d(t)&&!d(e)&&t>=n.img.destLeft&&e>=n.img.destTop&&t<=n.img.destLeft+n.img.destWidth&&e<=n.img.destTop+n.img.destHeight&&(r=!0),i.inRange=r},o.prototype.alignRotateFlipColl=function(t,e,i){return t=this.popForDefaultTransformedState(t),t=this.popForDefaultFlipState(t),t=this.popForDefaultRotateState(t),t.length===0&&e&&(this.parent.transform.degree=0,this.parent.transform.currFlipState=""),i.collection=t,t},o.prototype.popForDefaultTransformedState=function(t){for(var e=0,i=0,r=0,n=0,s=0;s<t.length;s++)t[s]===90||t[s]==="rotateRight"?(e++,i=0,r=0,n=0,e===4&&(t.pop(),t.pop(),t.pop(),t.pop())):t[s]===-90||t[s]==="rotateLeft"?(i++,e=0,r=0,n=0,i===4&&(t.pop(),t.pop(),t.pop(),t.pop())):t[s]==="horizontal"||t[s]==="Horizontal"||t[s]==="horizontalflip"?(r++,i=0,e=0,n=0,r===2&&(t.pop(),t.pop())):(t[s]==="vertical"||t[s]==="Vertical"||t[s]==="verticalflip")&&(n++,r=0,i=0,e=0,n===2&&(t.pop(),t.pop()));return t},o.prototype.popForDefaultFlipState=function(t){for(var e=0,i=t.length-3;e<i;e++){var r=t[e]==="horizontal"||t[e]==="Horizontal"||t[e]==="horizontalFlip",n=t[e]==="vertical"||t[e]==="Vertical"||t[e]==="verticalFlip",s=t[e+1]==="horizontal"||t[e+1]==="Horizontal"||t[e+1]==="horizontalFlip",a=t[e+1]==="vertical"||t[e+1]==="Vertical"||t[e+1]==="verticalFlip",l=t[e+2]==="horizontal"||t[e+2]==="Horizontal"||t[e+2]==="horizontalFlip",h=t[e+2]==="vertical"||t[e+2]==="Vertical"||t[e+2]==="verticalFlip",c=t[e+3]==="horizontal"||t[e+3]==="Horizontal"||t[e+3]==="horizontalFlip";(r&&a&&l&&h||n&&s&&h&&c)&&(t.splice(e,4),e-=4)}return t},o.prototype.popForDefaultRotateState=function(t){for(var e=0;e<t.length-1;e++){var i=t[e],r=t[e+1];((i===90||i==="rotateRight")&&(r===-90||r==="rotateLeft")||(i===-90||i==="rotateLeft")&&(r===90||r==="rotateRight"))&&(t.splice(e,2),e-=2)}return t},o.prototype.selectShape=function(t,e){var i=this.parent,r=!1;if(!i.disabled&&i.isImageLoaded){if(this.applyActObj(),t.split("_")[0]==="shape"){for(var n,s=0,a=i.objColl.length;s<a;s++)if(i.objColl[s].currIndex===t){n=m({},i.objColl[s],{},!0);break}if(d(n))r=!1;else{r=!0,i.activeObj=n;var l={canvasFilter:null};i.notify("toolbar",{prop:"getCanvasFilter",onPropertyChange:!1,value:{obj:l}}),this.lowerContext.filter=l.canvasFilter,i.notify("selection",{prop:"redrawShape",onPropertyChange:!1,value:{obj:i.activeObj}}),i.activeObj.shape==="text"?i.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"text",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}):i.activeObj.shape==="pen"?i.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"pen",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}):i.activeObj.shape==="redact"?i.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"redact",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}):i.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"shapes",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}),i.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1}),i.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}})}}else if(t.split("_")[0]==="pen"){var l={bool:!1};i.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:l}}),l.bool&&i.okBtn(null,!0);var h={isIndex:!1};i.notify("freehand-draw",{prop:"isFHDIdx",value:{index:parseInt(t.split("_")[1],10)-1,obj:h}}),h.isIndex?(r=!0,i.notify("freehand-draw",{prop:"selectFhd",value:{id:t}}),i.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:!0}}),i.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1})):r=!1}}e.isSelected=r},o.prototype.deleteShape=function(t){var e=this.parent;if(!e.disabled&&e.isImageLoaded){if(e.activeObj.currIndex&&e.activeObj.currIndex===t)e.notify("selection",{prop:"deleteItem",onPropertyChange:!1});else if(this.applyActObj(),t.split("_")[0]==="shape"){for(var i=0,r=e.objColl.length;i<r;i++)if(e.objColl[i].currIndex===t){e.objColl.splice(i,1);break}}else t.split("_")[0]==="pen"&&e.notify("freehand-draw",{prop:"handle-freehand-draw",value:{id:t}});var n={canvasFilter:null};e.notify("toolbar",{prop:"getCanvasFilter",onPropertyChange:!1,value:{obj:n}}),this.lowerContext.filter=n.canvasFilter,this.lowerContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),e.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1}),e.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1})}},o.prototype.getMaxText=function(t,e,i){if(d(e)&&(e=t?this.parent.textArea.value:this.parent.activeObj.keyHistory,!e))return e;for(var r,n=e.split(`
`),s=n[0].length,a=n[0],l=1;l<n.length;l++)r=n[l].length,r>s&&(a=n[l],s=r);return i&&(i.maxText=a),a},o.prototype.getLinePoints=function(t,e,i,r){var n=[],s,a;if(t===i){e<r?(s=[t,e],a=[i,r]):(a=[t,e],s=[i,r]);for(var l=this.getSlope(s,a,!0),h=this.getIntercept(s,l),c=s[1];c<=a[1];c++){var u=l*c+h;n.push({x:u,y:c})}}else{t<i?(s=[t,e],a=[i,r]):(a=[t,e],s=[i,r]);for(var l=this.getSlope(s,a,!1),h=this.getIntercept(s,l),u=s[0];u<=a[0];u++){var c=l*u+h;n.push({x:u,y:c})}}if(Math.floor(t)===Math.floor(i)||n.length<10&&(r-e>10||e-r>10)){n=[];for(var p=Math.min(e,r),f=0;f<Math.abs(Math.floor(r)-Math.floor(e));f++)n.push({x:t,y:p+f});if(n.length>1){var g=void 0;d(n[n.length-2])?g={x:0,y:0}:g=n[n.length-2];var v=n[n.length-1].x-g.x,y=n[n.length-1].y-g.y;n.push({x:n[n.length-1].x+v/2,y:n[n.length-1].y+y/2})}}else if(Math.floor(e)===Math.floor(r)||n.length<10&&(i-t>10||t-i>10)){n=[];for(var C=Math.min(t,i),b=0;b<Math.abs(Math.floor(i)-Math.floor(t));b++)n.push({x:C+b,y:e});if(n.length>1){var g=void 0;d(n[n.length-2])?g={x:0,y:0}:g=n[n.length-2];var v=n[n.length-1].x-g.x,y=n[n.length-1].y-g.y;n.push({x:n[n.length-1].x+v/2,y:n[n.length-1].y+y/2})}}return n},o.prototype.getSlope=function(t,e,i){var r;if(i){if(t[1]===e[1])return null;r=(e[0]-t[0])/(e[1]-t[1])}else{if(t[0]===e[0])return null;r=(e[1]-t[1])/(e[0]-t[0])}return r},o.prototype.getIntercept=function(t,e){return e===null?t[0]:t[1]-e*t[0]},o.prototype.setPointCollForShapeRotation=function(t){var e=this.parent,i=t.activePoint,r=i.startX,n=i.startY,s=i.endX,a=i.endY,l=i.width,h=i.height,c={x:r+l/2,y:n+h/2},u=Math.cos(t.rotatedAngle),p=Math.sin(t.rotatedAngle),f={x:u*(r-c.x)-p*(n-c.y)+c.x,y:p*(r-c.x)+u*(n-c.y)+c.y},g={x:u*(s-c.x)-p*(n-c.y)+c.x,y:p*(s-c.x)+u*(n-c.y)+c.y},v={x:u*(r-c.x)-p*(a-c.y)+c.x,y:p*(r-c.x)+u*(a-c.y)+c.y},y={x:u*(s-c.x)-p*(a-c.y)+c.x,y:p*(s-c.x)+u*(a-c.y)+c.y};t.horTopLinePointColl=this.getLinePoints(f.x,f.y,g.x,g.y),t.horTopLinePointColl=this.getLinePoints(f.x,f.y,g.x,g.y),t.horBottomLinePointColl=this.getLinePoints(v.x,v.y,y.x,y.y),t.verLeftLinePointColl=this.getLinePoints(f.x,f.y,v.x,v.y),t.verRightLinePointColl=this.getLinePoints(g.x,g.y,y.x,y.y),t.verLeftLinePointColl.reverse(),t.verRightLinePointColl.reverse();for(var C=0;C<t.horTopLinePointColl.length;C++)t.horTopLinePointColl[C].ratioX=(t.horTopLinePointColl[C].x-this.parent.img.destLeft)/this.parent.img.destWidth,t.horTopLinePointColl[C].ratioY=(t.horTopLinePointColl[C].y-this.parent.img.destTop)/this.parent.img.destHeight;for(var C=0;C<t.horBottomLinePointColl.length;C++)t.horBottomLinePointColl[C].ratioX=(t.horBottomLinePointColl[C].x-this.parent.img.destLeft)/this.parent.img.destWidth,t.horBottomLinePointColl[C].ratioY=(t.horBottomLinePointColl[C].y-this.parent.img.destTop)/this.parent.img.destHeight;for(var C=0;C<t.verLeftLinePointColl.length;C++)t.verLeftLinePointColl[C].ratioX=(t.verLeftLinePointColl[C].x-this.parent.img.destLeft)/this.parent.img.destWidth,t.verLeftLinePointColl[C].ratioY=(t.verLeftLinePointColl[C].y-this.parent.img.destTop)/this.parent.img.destHeight;for(var C=0;C<t.verRightLinePointColl.length;C++)t.verRightLinePointColl[C].ratioX=(t.verRightLinePointColl[C].x-this.parent.img.destLeft)/this.parent.img.destWidth,t.verRightLinePointColl[C].ratioY=(t.verRightLinePointColl[C].y-this.parent.img.destTop)/this.parent.img.destHeight;if(e.upperCanvas.style.cursor!=="move"){var b={rotationCirclePoint:null};e.notify("selection",{prop:"getTransRotationPoint",value:{obj:t,object:b}});var M=b.rotationCirclePoint;M&&(t.rotationCirclePointColl={x:u*(M.x-c.x)-p*(M.y-c.y)+c.x,y:p*(M.x-c.x)+u*(M.y-c.y)+c.y},t.rotationCirclePointColl.ratioX=(t.rotationCirclePointColl.x-e.img.destLeft)/e.img.destWidth,t.rotationCirclePointColl.ratioY=(t.rotationCirclePointColl.y-e.img.destTop)/e.img.destHeight)}},o.prototype.getSquarePointForRotatedShape=function(t,e){var i={startX:0,startY:0,endX:0,endY:0,width:0,height:0},r=t.activePoint,n=r.startX,s=r.startY,a=r.endX,l=r.endY,h=r.width,c=r.height,u={x:n+h/2,y:s+c/2},p=Math.cos(t.rotatedAngle),f=Math.sin(t.rotatedAngle),g={x:p*(n-u.x)-f*(s-u.y)+u.x,y:f*(n-u.x)+p*(s-u.y)+u.y},v={x:p*(a-u.x)-f*(s-u.y)+u.x,y:f*(a-u.x)+p*(s-u.y)+u.y},y={x:p*(n-u.x)-f*(l-u.y)+u.x,y:f*(n-u.x)+p*(l-u.y)+u.y},C={x:p*(a-u.x)-f*(l-u.y)+u.x,y:f*(a-u.x)+p*(l-u.y)+u.y};return i.startX=g.x,i.startY=g.y,i.endX=g.x,i.endY=g.y,i.startX>v.x&&(i.startX=v.x),i.startX>y.x&&(i.startX=y.x),i.startX>C.x&&(i.startX=C.x),i.startY>v.y&&(i.startY=v.y),i.startY>y.y&&(i.startY=y.y),i.startY>C.y&&(i.startY=C.y),i.endX<v.x&&(i.endX=v.x),i.endX<y.x&&(i.endX=y.x),i.endX<C.x&&(i.endX=C.x),i.endY<v.y&&(i.endY=v.y),i.endY<y.y&&(i.endY=y.y),i.endY<C.y&&(i.endY=C.y),i.width=i.endX-i.startX,i.height=i.endY-i.startY,e&&(e.activePoint=i),i},o.prototype.updateZOrder=function(t,e){var i=this.parent;e=e.toLowerCase();var r=t;if(!d(r.order)){var n,s,a=this.getHighestOrder();if(this.updateShapeColl(),i.shapeColl.length!==0){for(var l,h=0;h<i.shapeColl.length;h++)l=i.shapeColl[h],r.id&&r.id.indexOf("pen")>-1?l.id&&l.id===r.id&&i.shapeColl.splice(h,1):l.shape&&l.shape.indexOf("crop-")>-1&&i.shapeColl.splice(h,1);switch(e){case"sendtoback":s=r.order,n=r.order,r.order=1;break;case"sendbackward":r.order-=1,n=r.order;break;case"bringtofront":s=r.order,n=a,r.order=n;break;case"bringforward":r.order+=1,n=r.order;break}this.reArrangeObjColl(n,e,s),r.id&&r.id.indexOf("pen")>-1&&this.reUpdateShapeColl(r)}}},o.prototype.reArrangeObjColl=function(t,e,i){var r=this.parent,n;switch(e){case"sendtoback":for(var s=0,a=r.shapeColl.length;s<a;s++)n=r.shapeColl[s],n.order<i&&n.order<=t&&(n.order+=1,this.reUpdateShapeColl(n));break;case"sendbackward":for(var s=0,a=r.shapeColl.length;s<a;s++)if(n=r.shapeColl[s],n.order===t){n.order+=1,this.reUpdateShapeColl(n);break}break;case"bringtofront":for(var s=0,a=r.shapeColl.length;s<a;s++)n=r.shapeColl[s],n.order>i&&n.order<=t&&(n.order-=1,this.reUpdateShapeColl(n));break;case"bringforward":for(var s=0,a=r.shapeColl.length;s<a;s++)if(n=r.shapeColl[s],n.order===t){n.order-=1,this.reUpdateShapeColl(n);break}break}},o.prototype.reorderRedact=function(t){var e=t.filter(function(r){return r.shape!=="redact"}),i=t.filter(function(r){return r.shape==="redact"});return i.concat(e)},o.prototype.updateShapeColl=function(){var t=this.parent,e=!1,i=1,r=m([],t.objColl,[],!0);r=this.reorderRedact(r);var n=m([],t.pointColl,[],!0);if(t.shapeColl.length>0&&t.shapeColl.length===t.objColl.length+t.pointColl.length){for(var s=0;s<t.shapeColl.length;s++)if(t.shapeColl[s].order===i)e=!0,i++;else{e=!1;break}if(e){for(var s=0;s<t.shapeColl.length;s++)if(t.shapeColl[s].currIndex&&t.shapeColl[s].currIndex.indexOf("shape")>-1){for(var a=0;a<r.length;a++)if(t.shapeColl[s].currIndex===r[a].currIndex){t.shapeColl[s]=m({},r[a],{},!0),r.splice(a,1);break}}else if(t.shapeColl[s].id&&t.shapeColl[s].id.indexOf("pen")>-1){for(var a=0;a<n.length;a++)if(t.shapeColl[s].id===n[a].id){t.shapeColl[s]=m([],n[a],[],!0),n.splice(a,1);break}}return}}r=m([],t.objColl,[],!0),n=m([],t.pointColl,[],!0),t.shapeColl=[];for(var l=1,h,c=!1;r.length!==0||n.length!==0;){h=c=!1;for(var s=0;s<r.length;s++)if(r[s].order===l||!r[s].order&&r[s].shape&&r[s].shape.indexOf("crop-")>-1){t.shapeColl.push(m({},r[s],{},!0)),r[s].shape&&r[s].shape.indexOf("crop-")>-1&&(c=!0),r.splice(s,1),h=!0;break}if(!h){for(var s=0;s<n.length;s++)if(n[s].order===l){t.shapeColl.push(m([],n[s],[],!0)),n.splice(s,1),h=!0;break}}c||l++}},o.prototype.reUpdateShapeColl=function(t){var e=this.parent;if(t.id&&t.id.indexOf("pen")>-1){if(e.freehandCounter>0)for(var i=0;i<e.freehandCounter;i++)e.pointColl[i].id===t.id&&(e.pointColl[i].order=t.order)}else if(t.currIndex&&t.currIndex.indexOf("shape")>-1)for(var i=0;i<e.objColl.length;i++)e.objColl[i].currIndex===t.currIndex&&(e.objColl[i].order=t.order)},o.prototype.drawAnnotations=function(t,e,i,r,n,s,a){var l=this.parent,h=m({},l.activeObj,{},!0),c=m([],l.objColl,[],!0),u=m([],l.pointColl,[],!0),p={selPointColl:null};l.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:p}});var f={selPointColl:null};l.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:f}}),this.updateShapeColl();var g=m([],l.shapeColl,[],!0);g=this.reorderRedact(g);var v=!1;this.preventFrameAnnotation||(this.preventFrameAnnotation=v=!0);for(var y=0;y<g.length;y++){var C=g[y].id;if(g[y].order||!g[y].order&&g[y].shape&&g[y].shape.indexOf("crop-")>-1||!g[y].order&&g[y].shape==="path"&&l.drawingShape==="path"){if(g[y].currIndex&&g[y].currIndex.indexOf("shape")>-1){if(l.objColl=[],l.objColl.push(m({},g[y],{},!0)),e==="iterate"){var b=this.lowerContext.filter;this.lowerContext.filter="none",this.iterateObjColl(),this.lowerContext.filter=b}else if(e==="zoom"||e==="pan"){for(var M=-1,S=0;S<c.length;S++)if(JSON.stringify(c[S])===JSON.stringify(l.objColl[0])){M=S;break}e==="zoom"?this.zoomObjColl(r):this.panObjColl(n,s,a),M>-1&&(c[M]=m({},l.objColl[0],{},!0))}}else if(g[y].id&&g[y].id.indexOf("pen")>-1){if(l.pointColl=[],l.freehandCounter=0,l.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:[]}}}),l.pointColl.push(m({},g[y],{},!0)),l.notify("freehand-draw",{prop:"pushSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:f.selPointColl[y]}}}),l.freehandCounter=l.pointColl.length,i==="iterate")l.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:t,points:null}});else if(i==="zoom"||i==="pan"){i==="zoom"?l.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:r}}):l.notify("freehand-draw",{prop:"panFHDColl",onPropertyChange:!1,value:{xDiff:n,yDiff:s,panRegion:a}});for(var N=0;N<u.length;N++)if(u[N].id===l.pointColl[0].id){u[N]=m({},l.pointColl[0],{},!0);break}for(var x=0,A=p.selPointColl.length;x<A;x++)if(p.selPointColl[x].id===f.selPointColl[x].id){p.selPointColl[x]=m({},f.selPointColl[x],{},!0);break}}}}else(!g[y].shape&&!C||!g[y].currIndex&&!C)&&g.splice(y,1)}i&&i==="zoom"&&(l.pointColl=[],l.freehandCounter=0,l.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:r}})),l.objColl=c,l.pointColl=u,l.freehandCounter=l.pointColl.length,l.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:p.selPointColl}}}),v&&this.preventFrameAnnotation&&(l.notify("draw",{prop:"applyFrame",value:{ctx:this.lowerContext,frame:l.frameObj.type,preventImg:!0}}),this.preventFrameAnnotation=!1),l.activeObj=h},o}(),ZD=function(){function o(t){this.isReverseFlip=!1,this.disablePan=!1,this.isReverseRotate=!1,this.flipColl=[],this.prevZoomValue=1,this.cropDimension={width:0,height:0},this.isPreventSelect=!1,this.preventDownScale=!1,this.resizedImgAngle=null,this.parent=t,this.addEventListener()}return o.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},o.prototype.addEventListener=function(){this.parent.on("transform",this.transform,this),this.parent.on("destroyed",this.destroy,this)},o.prototype.removeEventListener=function(){this.parent.off("transform",this.transform),this.parent.off("destroyed",this.destroy)},o.prototype.transform=function(t){switch(this.initTransformPvtVar(),t.prop){case"flipImage":this.flipImage(t.value.direction);break;case"setDestPointsForFlipState":this.setDestPointsForFlipState();break;case"zoomAction":this.zoomAction(t.value.zoomFactor,t.value.zoomPoint,t.value.isResize);break;case"disableZoomOutBtn":this.disableZoomOutBtn(t.value.isZoomOut);break;case"rotatedFlip":this.rotatedFlip();break;case"drawPannedImage":this.drawPannedImage(t.value.xDiff,t.value.yDiff);break;case"drawPannImage":this.drawPannImage(t.value.point);break;case"performTransformation":this.performTransformation(t.value.text);break;case"updateTransform":this.updateTransform(t.value.text);break;case"rotatePan":this.rotatePan(t.value.isCropSelection,t.value.isDefaultZoom);break;case"resetZoom":this.resetZoom();break;case"pan":this.pan(t.value.value,t.value.x,t.value.y);break;case"zoom":this.zoom(t.value.zoomFactor,t.value.zoomPoint);break;case"setCurrPanRegion":this.setCurrPanRegion(t.value.region,t.value.type,t.value.obj);break;case"rotate":this.rotate(t.value.degree,t.value.obj);break;case"flip":this.flip(t.value.direction);break;case"update":this.update();break;case"calcMaxDimension":this.calcMaxDimension(t.value.width,t.value.height,t.value.obj,t.value.isImgShape);break;case"getPanMove":t.value.obj.panMove=this.panMove;break;case"setPanMove":this.panMove=t.value.point;break;case"getTempPanMove":t.value.obj.tempPanMove=this.tempPanMove;break;case"setTempPanMove":this.tempPanMove=t.value.point;break;case"setReverseFlip":this.isReverseFlip=t.value.isReverseFlip;break;case"setDisablePan":this.disablePan=t.value.bool;break;case"setCurrDestinationPoint":this.currDestPoint=t.value.point,this.currDestPoint.startX-=this.parent.cropObj.totalPannedPoint.x,this.currDestPoint.startY-=this.parent.cropObj.totalPannedPoint.y;break;case"setReverseRotate":this.isReverseRotate=t.value.bool;break;case"getFlipColl":t.value.obj.flipColl=this.flipColl;break;case"setFlipColl":this.flipColl=t.value.flipColl;break;case"getPreviousZoomValue":t.value.obj.previousZoomValue=this.prevZoomValue;break;case"setPreviousZoomValue":this.prevZoomValue=t.value.previousZoomValue;break;case"getCropDimension":t.value.obj.cropDimension=this.cropDimension;break;case"setCropDimension":this.cropDimension.width=t.value.width,this.cropDimension.height=t.value.height;break;case"getPreventSelect":t.value.obj.bool=this.isPreventSelect;break;case"setPreventSelect":this.isPreventSelect=t.value.bool;break;case"resizeImage":this.resizeImage(t.value.width,t.value.height);break;case"resizeCrop":this.resizeCrop(t.value.width,t.value.height);break;case"updateResize":this.updateResize();break;case"resize":this.resize(t.value.width,t.value.height,t.value.isAspectRatio);break;case"straightenImage":this.straightenImage(t.value.degree);break;case"reset":this.reset();break;case"cropZoom":t.value.obj.maxDimension=this.cropZoom(t.value.value,t.value.selectionObj);break;case"setResizedImgAngle":this.resizedImgAngle=t.value.angle;break}},o.prototype.getModuleName=function(){return"transform"},o.prototype.initTransformPvtVar=function(){this.parent.lowerCanvas&&(this.lowerContext=this.parent.lowerCanvas.getContext("2d")),this.parent.upperCanvas&&(this.upperContext=this.parent.upperCanvas.getContext("2d"))},o.prototype.reset=function(){this.zoomBtnHold=null,this.tempPanMove=null,this.panMove=null,this.disablePan=!1,this.currDestPoint=null,this.isReverseRotate=!1,this.flipColl=[],this.resizedImgAngle=null,this.transCurrObj=null,this.prevZoomValue=1,this.isPreventSelect=this.preventDownScale=!1},o.prototype.rotateImage=function(t){var e=this.parent,i={cancel:!1,previousDegree:e.transform.degree,currentDegree:Math.abs(e.transform.degree+t)===360?0:e.transform.degree+t};this.isPreventSelect||(e.trigger("rotating",i),e.editCompleteArgs=i),this.rotateEvent(i,t)},o.prototype.rotateEvent=function(t,e){var i=this.parent;if(t.cancel)i.notify("draw",{prop:"setCurrentObj",onPropertyChange:!1,value:{obj:i.prevEventObjPoint}}),i.activeObj=i.prevEventSelectionPoint,i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:i.activeObj}});else{var r=void 0;if(d(this.transCurrObj)){var n={currObj:{}};i.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:n}}),r=n.currObj,r.objColl=m([],i.objColl,null,!0),r.pointColl=m({},i.pointColl,null,!0),r.afterCropActions=m([],i.afterCropActions,[],!0);var s={selPointColl:null};i.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:s}}),r.selPointColl=m([],s.selPointColl,[],!0)}i.afterCropActions.push(e===90?"rotateRight":"rotateLeft");var a=[],l=void 0;i.activeObj.activePoint&&i.activeObj.shape&&(i.activeObj.shape!==void 0&&(a=i.activeObj.shape.split("-")),(i.currObjType.isCustomCrop||a[0]==="crop")&&(l=i.currObjType.isCustomCrop?"custom":a[1],i.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),i.objColl.push(i.activeObj),i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}))),i.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:!0}}),this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),this.drawRotatedImage(e),i.notify("draw",{prop:"setImageEdited",onPropertyChange:!1}),i.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),i.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}}),i.isCircleCrop&&i.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),l&&(this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),i.activeObj=m({},i.objColl[i.objColl.length-1],{},!0),i.objColl.pop(),i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:i.activeObj}})),i.isUndoRedo=!1;var h={collection:i.rotateFlipColl};i.notify("shape",{prop:"alignRotateFlipColl",onPropertyChange:!1,value:{collection:i.rotateFlipColl,isRotateFlipCollection:!0,obj:h}}),i.rotateFlipColl=h.collection,i.cropObj.activeObj.shape&&!this.isPreventSelect&&(i.notify("draw",{prop:"setIsCropSelect",value:{bool:!0}}),this.isPreventSelect=!0,i.notify("draw",{prop:"select",onPropertyChange:!1,value:{type:"custom",startX:null,startY:null,width:null,height:null}}),this.isPreventSelect=!1,i.setProperties({zoomSettings:{zoomFactor:1}},!0),this.prevZoomValue=i.zoomSettings.zoomFactor)}},o.prototype.drawRotatedImage=function(t){var e=this.parent;t===0?e.transform.degree=0:e.transform.degree+=t,Math.abs(e.transform.degree)===360&&(e.transform.degree=0),e.notify("draw",{prop:"setDestPoints",onPropertyChange:!1});var i=m([],e.objColl,[],!0),r=m({},e.activeObj,{},!0);if(e.objColl=[],e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.isReverseRotate||e.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,isRotatePan:null}}),this.rotateDegree(t),this.isReverseRotate||(e.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:null,isRotatePan:null}}),e.rotateFlipColl.push(t)),e.objColl=m([],i,[],!0),e.activeObj=m({},r,{},!0),e.isCircleCrop&&e.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),e.notify("shape",{prop:"redrawObj",onPropertyChange:!1,value:{degree:t}}),e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),t>0)e.notify("freehand-draw",{prop:"rotateFhdColl",onPropertyChange:!1});else for(var n=0;n<3;n++)e.notify("freehand-draw",{prop:"rotateFhdColl",onPropertyChange:!1});e.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}}),this.updateCurrSelectionPoint(t)},o.prototype.rotateDegree=function(t){var e=this.parent;this.lowerContext.save(),this.lowerContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),this.lowerContext.translate(e.lowerCanvas.width/2,e.lowerCanvas.height/2),this.lowerContext.rotate(Math.PI/180*t),this.lowerContext.translate(-e.lowerCanvas.width/2,-e.lowerCanvas.height/2);var i=this.lowerContext.filter;e.notify("draw",{prop:"drawImage",onPropertyChange:!1}),this.lowerContext.filter=i,this.lowerContext.translate(e.lowerCanvas.width/2,e.lowerCanvas.height/2),this.lowerContext.rotate(Math.PI/180*-t),this.lowerContext.translate(-e.lowerCanvas.width/2,-e.lowerCanvas.height/2),this.lowerContext.restore()},o.prototype.updateCurrSelectionPoint=function(t){var e=this.parent;if(e.currSelectionPoint&&this.currDestPoint){var i=m({},e.activeObj,{},!0),r=m([],e.objColl,[],!0),n={startX:e.img.srcLeft,startY:e.img.srcTop,width:e.img.srcWidth,height:e.img.srcHeight},s={startX:e.img.destLeft,startY:e.img.destTop,width:e.img.destWidth,height:e.img.destHeight};e.objColl=[],e.objColl.push(m({},e.currSelectionPoint,{},!0)),e.img={srcLeft:0,srcTop:0,srcWidth:e.baseImgCanvas.width,srcHeight:e.baseImgCanvas.height,destLeft:this.currDestPoint.startX,destTop:this.currDestPoint.startY,destWidth:this.currDestPoint.width,destHeight:this.currDestPoint.height},typeof t=="number"&&(e.notify("draw",{prop:"setDestPoints",onPropertyChange:!1}),e.notify("draw",{prop:"setClientTransDim",onPropertyChange:!1,value:{isPreventDimension:null}})),e.notify("shape",{prop:"redrawObj",onPropertyChange:!1,value:{degree:t}}),e.currSelectionPoint=m({},e.objColl[0],{},!0),this.currDestPoint={startX:e.img.destLeft,startY:e.img.destTop,width:e.img.destWidth,height:e.img.destHeight},e.objColl=r,e.activeObj=i,e.img={srcLeft:n.startX,srcTop:n.startY,srcWidth:n.width,srcHeight:n.height,destLeft:s.startX,destTop:s.startY,destWidth:s.width,destHeight:s.height}}},o.prototype.flipImage=function(t){var e=this.parent,i={direction:t,cancel:!1,previousDirection:e.toPascalCase(e.transform.currFlipState||t)};this.isPreventSelect||(e.trigger("flipping",i),e.editCompleteArgs=i),this.flipEvent(i,t)},o.prototype.flipEvent=function(t,e){var i=this.parent;if(t.cancel){i.notify("draw",{prop:"setCurrentObj",onPropertyChange:!1,value:{obj:i.prevEventObjPoint}}),i.activeObj=i.prevEventSelectionPoint,i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:i.activeObj}});return}var r;if(d(this.transCurrObj)){var n={currObj:{}};i.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:n}}),r=n.currObj,r.objColl=m([],i.objColl,null,!0),r.pointColl=m({},i.pointColl,null,!0),r.afterCropActions=m([],i.afterCropActions,[],!0);var s={selPointColl:null};i.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:s}}),r.selPointColl=m([],s.selPointColl,[],!0)}i.afterCropActions.push(e.toLowerCase()==="horizontal"?"horizontalflip":"verticalflip");var a=[],l;i.activeObj.activePoint&&(i.activeObj.shape!==void 0&&(a=i.activeObj.shape.split("-")),(i.currObjType.isCustomCrop||a[0]==="crop")&&(l=i.currObjType.isCustomCrop?"custom":a[1],i.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),i.objColl.push(i.activeObj),i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}))),i.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:!0}}),i.clearContext(this.lowerContext),i.clearContext(this.upperContext);var h=m([],i.objColl,[],!0),c=m({},i.activeObj,{},!0);i.objColl=[],i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.isReverseFlip||i.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,isRotatePan:null}});var u=e.toLowerCase();this.updateFlipState(u);var p=i.transform.currFlipState.toLowerCase();i.transform.currFlipState=u==="horizontal"&&p==="horizontal"||u==="vertical"&&p==="vertical"?"":u;var f={isSelected:null};i.notify("draw",{prop:"getRotatedFlipCropSelection",onPropertyChange:!1,value:{bool:f}}),f.isSelected&&(i.img.destLeft+=i.panPoint.totalPannedInternalPoint.x,i.img.destTop+=i.panPoint.totalPannedInternalPoint.y);var g=this.lowerContext.filter;if(i.notify("draw",{prop:"drawImage",onPropertyChange:!1}),this.lowerContext.filter=g,i.notify("draw",{prop:"setImageEdited",onPropertyChange:!1}),this.updateFlipState(e.toLowerCase()),this.isReverseFlip||(i.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:null,isRotatePan:null}}),this.updateFlipColl(e.toLocaleLowerCase()),i.rotateFlipColl.push(e.toLowerCase())),i.rotateFlipColl.length===1){var v={panRegion:""};i.notify("crop",{prop:"getCurrFlipState",onPropertyChange:!1,value:{panObj:v}}),v.panRegion===""?i.notify("draw",{prop:"setClientTransDim",onPropertyChange:!1,value:{isPreventDimension:null}}):this.setDestPointsForFlipState()}i.isCircleCrop&&i.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),i.objColl=m([],h,[],!0),i.activeObj=m({},c,{},!0);for(var y=0,C=i.objColl.length;y<C;y++){var b=i.objColl[y].flipObjColl;b.length===0?b.push(e):b[b.length-1]===e?b.pop():b.push(e)}i.notify("shape",{prop:"redrawObj",onPropertyChange:!1,value:{degree:e.toLowerCase()}});var M=this.lowerContext.filter;this.lowerContext.filter="brightness(1) contrast(100%) hue-rotate(0deg) saturate(100%) opacity(1) blur(0px) sepia(0%) grayscale(0%) invert(0%)",i.notify("shape",{prop:"iterateObjColl",onPropertyChange:!1});var S=e.toLowerCase();S==="horizontal"||S==="vertical"?(i.notify("freehand-draw",{prop:"flipFHDColl",onPropertyChange:!1,value:{value:S}}),i.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}})):i.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}}),this.lowerContext.filter=M,i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.updateCurrSelectionPoint(S),i.isUndoRedo=!1,i.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),i.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}}),i.isCircleCrop&&i.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),l&&(this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),i.activeObj=m({},i.objColl[i.objColl.length-1],{},!0),i.objColl.pop(),i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:i.activeObj}}));var N={collection:i.rotateFlipColl};i.notify("shape",{prop:"alignRotateFlipColl",onPropertyChange:!1,value:{collection:i.rotateFlipColl,isRotateFlipCollection:!0,obj:N}}),i.rotateFlipColl=N.collection,i.cropObj.activeObj.shape&&!this.isPreventSelect&&(i.notify("draw",{prop:"setIsCropSelect",value:{bool:!0}}),this.isPreventSelect=!0,i.notify("draw",{prop:"select",onPropertyChange:!1,value:{type:"custom",startX:null,startY:null,width:null,height:null}}),this.isPreventSelect=!1,i.setProperties({zoomSettings:{zoomFactor:1}},!0),this.prevZoomValue=i.zoomSettings.zoomFactor)},o.prototype.updateFlipState=function(t){var e=this.parent.transform.degree;t==="horizontal"?e%90===0&&e%180!==0?this.verticalFlip():this.horizontalFlip():t==="vertical"&&(e%90===0&&e%180!==0?this.horizontalFlip():this.verticalFlip())},o.prototype.horizontalFlip=function(){this.lowerContext.translate(this.lowerContext.canvas.width,0),this.lowerContext.scale(-1,1),this.upperContext.translate(this.upperContext.canvas.width,0),this.upperContext.scale(-1,1)},o.prototype.verticalFlip=function(){this.lowerContext.translate(0,this.lowerContext.canvas.height),this.lowerContext.scale(1,-1),this.upperContext.translate(0,this.upperContext.canvas.height),this.upperContext.scale(1,-1)},o.prototype.updateFlipColl=function(t){if(!this.isPreventSelect&&(this.flipColl.length===0||this.flipColl[this.flipColl.length-1]!==t?this.flipColl.push(t):this.flipColl.pop(),this.flipColl.length>=4)){var e=this.flipColl.slice(-4);(e[0]==="horizontal"&&e[1]==="vertical"&&e[2]==="horizontal"&&e[3]==="vertical"||e[0]==="vertical"&&e[1]==="horizontal"&&e[2]==="vertical"&&e[3]==="horizontal")&&this.flipColl.splice(-4)}},o.prototype.setDestPointsForFlipState=function(){var t=this.parent,e={panRegion:""},i=t.img,r=i.destLeft,n=i.destTop,s=i.destWidth,a=i.destHeight,l=t.lowerCanvas,h=l.clientWidth,c=l.clientHeight;t.notify("crop",{prop:"getCurrFlipState",onPropertyChange:!1,value:{panObj:e}}),e.panRegion!==""&&(e.panRegion==="horizontal"?t.img.destLeft=h-(s+r):(e.panRegion==="vertical"||(t.img.destLeft=h-(s+r)),t.img.destTop=c-(a+n)))},o.prototype.zoomAction=function(t,e,i,r){var n=this.parent;if(!n.disabled&&n.isImageLoaded){if(d(i)&&(n.zoomSettings.zoomFactor>=n.zoomSettings.maxZoomFactor&&t>0||n.zoomSettings.zoomFactor>n.zoomSettings.minZoomFactor&&t<0&&this.disableZoomOutBtn(!0)||n.zoomSettings.zoomFactor<=n.zoomSettings.minZoomFactor&&t<0)){n.notify("toolbar",{prop:"zoom-up-handler",onPropertyChange:!1});return}n.notify("draw",{prop:"setImageEdited",onPropertyChange:!1});var s=t;t=s>0?.1:-.1;for(var a=0;a<Math.round(Math.abs(s/.1));a++)if(this.prevZoomValue===1)this.prevZoomValue+=t>0?t*10:t*10/10;else if(this.prevZoomValue>1)this.prevZoomValue+=t*10;else if(this.prevZoomValue<1){this.prevZoomValue+=t*10/10;var l=Math.pow(10,1);this.prevZoomValue=Math.round(this.prevZoomValue*l)/l}t=s,n.setProperties({zoomSettings:{zoomFactor:this.prevZoomValue}},!0);var h=void 0;this.tempActiveObj=null,this.isShape=!1,n.activeObj.shape!==void 0&&(n.activeObj.shape==="shape"?n.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}):h=n.activeObj.shape.split("-")),h!==void 0&&h[0]==="crop"?(this.tempActiveObj=m({},n.activeObj,{},!0),n.isCropTab=!0):(n.activeObj.shape&&h[0]!=="crop"&&(n.activeObj.activePoint.width!==0||n.activeObj.activePoint.height!==0)||n.activeObj.shape==="path"&&n.activeObj.pointColl.length>0)&&(this.isShape=!0);var c={zoomType:null};n.notify("selection",{prop:"getZoomType",onPropertyChange:!1,value:{obj:c}}),d(e)&&(n.isCropTab&&this.tempActiveObj?e={x:n.activeObj.activePoint.startX+n.activeObj.activePoint.width/2,y:n.activeObj.activePoint.startY+n.activeObj.activePoint.height/2}:e={x:n.lowerCanvas.clientWidth/2,y:n.lowerCanvas.clientHeight/2},(c.zoomType==="MouseWheel"||c.zoomType==="Pinch")&&(e={x:n.zoomSettings.zoomPoint.x,y:n.zoomSettings.zoomPoint.y}));var u=n.zoomSettings.zoomFactor-t*10,p={zoomPoint:e,cancel:!1,previousZoomFactor:u,currentZoomFactor:n.zoomSettings.zoomFactor,zoomTrigger:c.zoomType};!n.isCropToolbar&&n.isZoomBtnClick&&(n.trigger("zooming",p),n.editCompleteArgs=p),this.zoomEvent(p,t,r)}},o.prototype.zoomEvent=function(t,e,i){var r=this.parent,n,s=r.zoomSettings,a=s.zoomFactor,l=s.minZoomFactor;if(t.cancel){r.isZoomBtnClick=!1;return}this.parent.activeObj.redactType!=="blur"&&this.parent.activeObj.redactType!=="pixelate"&&r.notify("toolbar",{prop:"close-contextual-toolbar",onPropertyChange:!1}),!r.isCropTab&&r.activeObj.shape&&(n=r.activeObj.currIndex),r.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:!0}}),r.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,r.lowerCanvas.width,r.lowerCanvas.height);var h={canvasFilter:r.canvasFilter};this.lowerContext.filter=h.canvasFilter,r.upperCanvas.style.cursor=r.cursor="default";var c=m([],r.objColl,[],!0);if(!r.isCropTab){if(r.transform.degree!==0){r.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}}),r.panPoint.currentPannedPoint={x:0,y:0};var u=r.allowDownScale;r.allowDownScale=!1,this.rotatePan(!0,!0),r.allowDownScale=u}else r.transform.currFlipState!==""&&(r.panPoint.totalPannedPoint={x:0,y:0});r.transform.straighten===0&&!this.isPreventSelect&&r.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1,value:{isPreventApply:i}})}if(r.transform.degree===0){this.drawZoomImgToCanvas(e,this.tempActiveObj);var p={panRegion:""};if(r.notify("crop",{prop:"getCurrFlipState",onPropertyChange:!1,value:{panObj:p}}),p.panRegion!==""){r.notify("crop",{prop:"setTempFlipPanPoint",onPropertyChange:!1,value:{point:r.panPoint.totalPannedPoint,isAdd:!0}}),c=m([],r.objColl,[],!0),r.objColl=[];var f=r.img.destLeft,g=r.img.destTop;this.setDestPointsForFlipState(),this.rotatedFlip(),r.img.destLeft=f,r.img.destTop=g,r.objColl=c,r.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:i}}),r.transform.straighten===0&&!this.isPreventSelect&&r.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1,value:{isPreventApply:i}})}a<=l&&!r.isCropTab&&(r.panPoint.totalPannedPoint={x:0,y:0})}else{r.transform.straighten===0&&!this.isPreventSelect&&r.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1,value:{isPreventApply:i}}),r.panPoint.totalPannedClientPoint={x:0,y:0},r.panPoint.totalPannedInternalPoint={x:0,y:0},this.rotateZoom(e);var v={panRegion:""};if(r.notify("crop",{prop:"getCurrFlipState",onPropertyChange:!1,value:{panObj:v}}),v.panRegion!==""){var u=this.lowerContext.filter;this.lowerContext.filter="none",r.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:i}}),this.lowerContext.filter=u}}var y=Math.pow(10,1);(a<=l||Math.round(r.transform.zoomFactor*y)/y===2)&&(clearInterval(this.zoomBtnHold),this.zoomBtnHold=0);var C={panRegion:""};if(r.notify("crop",{prop:"getCurrFlipState",onPropertyChange:!1,value:{panObj:C}}),C.panRegion===""){var u=this.lowerContext.filter;this.lowerContext.filter="none",r.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:i}}),this.lowerContext.filter=u}(r.currSelectionPoint&&r.currSelectionPoint.shape==="crop-circle"||r.isCircleCrop)&&r.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),r.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),r.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.tempActiveObj&&(r.activeObj=m({},this.tempActiveObj,{},!0),r.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:r.activeObj}}),a<=l&&(r.currSelectionPoint=null)),r.isUndoRedo=!1;var b;b=document.querySelector("#"+r.element.id+"_zoomOut"),b&&a<=l?(b.classList.add("e-disabled"),b.parentElement.classList.add("e-overlay")):b&&(b.classList.remove("e-disabled"),b.parentElement.classList.remove("e-overlay"));var M=r.drawingShape;if(this.autoEnablePan(),r.drawingShape=M,this.tempActiveObj&&(r.activeObj=m({},this.tempActiveObj,{},!0)),r.activeObj.shape==="crop-custom"&&(r.currObjType.isCustomCrop=!0),this.isShape){if(n){for(var S=0,N=r.objColl.length;S<N;S++)if(r.objColl[S].currIndex===n){r.activeObj=m({},r.objColl[S],{},!0),r.objColl.splice(S,1);break}}else r.activeObj=m({},r.objColl[r.objColl.length-1],{},!0),r.objColl.pop();r.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:r.activeObj,isCropRatio:null,points:null,isPreventDrag:!0,saveContext:null,isPreventSelection:null}}),r.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1}),r.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}})}if(r.notify("toolbar",{prop:"enable-disable-btns",onPropertyChange:!1}),r.notify("selection",{prop:"setZoomType",onPropertyChange:!1,value:{zoomType:"Toolbar"}}),t={zoomPoint:t.zoomPoint,previousZoomFactor:t.previousZoomFactor,currentZoomFactor:t.currentZoomFactor,zoomTrigger:t.zoomTrigger},!r.isCropToolbar&&r.isZoomBtnClick&&(r.isZoomBtnClick=!1),r.drawingShape){var x=m({},r.activeObj,{},!0);if(r.enableShapeDrawing(r.toPascalCase(r.drawingShape),!0),r.activeObj=x,x.activePoint.width>0||x.activePoint.height>0||x.pointColl&&x.pointColl.length>0){x.shape==="redact"&&r.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}});var A=r.element.querySelector("#"+r.element.id+"_zOrderBtn"),U=r.element.querySelector("#"+r.element.id+"_duplicate"),z=r.element.querySelector("#"+r.element.id+"_remove"),J=r.element.querySelector("#"+r.element.id+"_editText");A&&A.classList.remove("e-overlay"),U&&U.classList.remove("e-overlay"),z&&z.classList.remove("e-overlay"),J&&J.classList.remove("e-overlay")}}else r.activeObj.shape&&r.activeObj.shape==="redact"&&(r.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"redact",isApplyBtn:!1,isCropping:!1}}),r.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}}))},o.prototype.disableZoomOutBtn=function(t){var e=this.parent,i=e.zoomSettings,r=i.zoomFactor,n=i.minZoomFactor,s=!1,a;d(t)||(e.transform.zoomFactor-=.1),a=e.element.querySelector("#"+e.element.id+"_zoomOut");var l={destLeft:e.img.destLeft,destTop:e.img.destTop,destWidth:e.img.destWidth,destHeight:e.img.destHeight};if(e.activeObj.shape){var h=this.setZoomDimension(-.1,e.activeObj);if(!d(a)){var c=e.activeObj.activePoint;if(e.transform.straighten===0)e.img.destLeft>c.startX||e.img.destTop>c.startY||e.img.destLeft+e.img.destWidth<c.endX||e.img.destTop+e.img.destHeight<c.endY||r===n?(a.classList.add("e-disabled"),a.parentElement.classList.add("e-overlay"),s=!0):(a.classList.remove("e-disabled"),a.parentElement.classList.remove("e-overlay"),s=!1);else{e.img.destWidth=h.width,e.img.destHeight=h.height;var u={isIntersect:null};e.notify("draw",{prop:"updateImgCanvasPoints",onPropertyChange:!1}),e.notify("draw",{prop:"isLinesIntersect",onPropertyChange:!1,value:{obj:u}}),u.isIntersect||r===n?(a.classList.add("e-disabled"),a.parentElement.classList.add("e-overlay"),s=!0):(a.classList.remove("e-disabled"),a.parentElement.classList.remove("e-overlay"),s=!1)}}}else this.setZoomDimension(-.1,null);return d(t)||(e.transform.zoomFactor+=.1),e.img.destLeft=l.destLeft,e.img.destTop=l.destTop,e.img.destWidth=l.destWidth,e.img.destHeight=l.destHeight,s},o.prototype.drawZoomImgToCanvas=function(t,e){var i=this.parent,r=Math.pow(10,1),n=Math.round(i.transform.zoomFactor*r)/r;n===.1&&t===-.1||n===0&&t===-.025?i.transform.zoomFactor=0:i.transform.zoomFactor+=t,i.transform[i.isCropTab?"cropZoomFactor":"defaultZoomFactor"]=i.transform.zoomFactor;var s={width:0,height:0};i.isCropTab?s=this.cropZoom(t,e):(s=this.calcMaxDimension(i.img.srcWidth,i.img.srcHeight),s.width+=s.width*i.transform.zoomFactor,s.height+=s.height*i.transform.zoomFactor,i.img.destLeft=(i.lowerCanvas.clientWidth-s.width)/2,i.img.destTop=(i.lowerCanvas.clientHeight-s.height+1)/2),i.notify("draw",{prop:"draw-image-to-canvas",value:{dimension:s}}),s.width=this.cropDimension.width,s.height=this.cropDimension.height,s.width+=s.width*i.transform.zoomFactor,s.height+=s.height*i.transform.zoomFactor,i.notify("draw",{prop:"setZoomCropWidth",value:{width:s.width,height:s.height}})},o.prototype.rotatedFlip=function(){var t=this.parent;this.isReverseFlip=!0;var e=t.transform.currFlipState,i=this.flipColl,r=m([],t.objColl,[],!0),n=m({},t.activeObj,{},!0);this.flipColl=[],t.objColl=[],t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),t.notify("draw",{prop:"currTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,context:null,isPreventCircleCrop:null}});var s=this.lowerContext.filter;t.notify("draw",{prop:"drawImage",onPropertyChange:!1}),this.lowerContext.filter=s,t.notify("draw",{prop:"currTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:!0,context:null,isPreventCircleCrop:null}}),e===""&&t.transform.currFlipState!==""&&(e=t.transform.currFlipState),t.transform.currFlipState=e,this.flipColl=i,t.objColl=m([],r,[],!0),this.lowerContext.filter="none",t.notify("shape",{prop:"iterateObjColl",onPropertyChange:!1}),this.lowerContext.filter=s,n.activePoint.width!==0&&(t.activeObj=m({},n,{},!0)),this.isReverseFlip=!1},o.prototype.rotateZoom=function(t){var e=this.parent,i=Math.pow(10,1),r=Math.round(e.transform.zoomFactor*i)/i;r===.1&&t===-.1||r===0&&t===-.025?e.transform.zoomFactor=0:e.transform.zoomFactor+=t,e.isCropTab?e.transform.cropZoomFactor=e.transform.zoomFactor:e.transform.defaultZoomFactor=e.transform.zoomFactor;var n=m([],e.objColl,[],!0),s=m({},e.activeObj,{},!0);e.objColl=[],e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),e.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,isRotatePan:null}}),e.notify("draw",{prop:"setRotateZoom",onPropertyChange:!1,value:{isRotateZoom:!0}}),e.notify("draw",{prop:"setDestPoints",onPropertyChange:!1});var a=this.lowerContext.filter;e.notify("draw",{prop:"drawImage",onPropertyChange:!1}),this.lowerContext.filter=a,e.notify("draw",{prop:"setRotateZoom",onPropertyChange:!1,value:{isRotateZoom:!1}}),e.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:null,isRotatePan:null}}),e.objColl=n,e.activeObj=s;var l={width:this.cropDimension.width,height:this.cropDimension.height};l.width+=l.width*e.transform.zoomFactor,l.height+=l.height*e.transform.zoomFactor,e.notify("draw",{prop:"setZoomCropWidth",value:{width:l.width,height:l.height}})},o.prototype.autoEnablePan=function(){var t=this.parent;t.transform.zoomFactor<=0?(t.togglePan=!1,t.notify("selection",{prop:"setDragCanvas",value:{bool:!1}}),t.pan(!1),this.disablePan=!1):t.pan(!this.disablePan)},o.prototype.cropZoom=function(t,e){var i=this.parent,r=i.img.destLeft,n=i.img.destTop,s={width:0,height:0};return i.transform.degree%90===0&&i.transform.degree%180!==0?s=this.calcMaxDimension(i.img.srcHeight,i.img.srcWidth):s=this.calcMaxDimension(i.img.srcWidth,i.img.srcHeight),s.width+=s.width*i.transform.zoomFactor,s.height+=s.height*i.transform.zoomFactor,i.img.destLeft=r-(s.width-i.img.destWidth)/2,i.img.destTop=n-(s.height-i.img.destHeight)/2,r=i.img.destLeft,n=i.img.destTop,e&&i.transform.straighten===0&&(i.img.destLeft>e.activePoint.startX&&(i.img.destLeft=e.activePoint.startX,i.transform.degree===0&&(i.panPoint.totalPannedPoint.x-=r-i.img.destLeft)),i.img.destTop>e.activePoint.startY&&(i.img.destTop=e.activePoint.startY,i.transform.degree===0&&(i.panPoint.totalPannedPoint.y-=n-i.img.destTop)),i.img.destLeft+s.width<e.activePoint.endX&&(i.img.destLeft=e.activePoint.endX-s.width,i.transform.degree===0&&(i.panPoint.totalPannedPoint.x-=r-i.img.destLeft)),i.img.destTop+s.height<e.activePoint.endY&&(i.img.destTop=e.activePoint.endY-s.height,i.transform.degree===0&&(i.panPoint.totalPannedPoint.y-=n-i.img.destTop))),s},o.prototype.setZoomDimension=function(t,e){var i=this.parent,r=i.transform.degree,n={width:0,height:0};if(r%90===0&&r%180!==0?n=this.calcMaxDimension(i.img.srcHeight,i.img.srcWidth):n=this.calcMaxDimension(i.img.srcWidth,i.img.srcHeight),n.width+=n.width*i.transform.zoomFactor,n.height+=n.height*i.transform.zoomFactor,i.img.destLeft+=(i.img.destWidth-n.width)/2,i.img.destTop+=(i.img.destHeight-n.height)/2,t<0&&e){var s=e.activePoint.startX,a=e.activePoint.startY,l=e.activePoint.width,h=e.activePoint.height,c=i.img.destLeft+n.width,u=i.img.destTop+n.height;i.img.destLeft>s&&(i.img.destLeft=s),i.img.destTop>a&&(i.img.destTop=a),c<s+l&&(i.img.destLeft=s+l-n.width),u<a+h&&(i.img.destTop=a+h-n.height)}else t<0&&d(e)&&(i.img.destLeft>0&&(i.img.destLeft=0),i.img.destTop>0&&(i.img.destTop=0),i.img.destLeft+n.width<i.lowerCanvas.clientWidth&&(i.img.destLeft=i.lowerCanvas.clientWidth-i.img.destWidth),i.img.destTop+n.height<i.lowerCanvas.clientHeight&&(i.img.destTop=i.lowerCanvas.clientHeight-i.img.destHeight));return n},o.prototype.drawPannedImage=function(t,e){var i=this.parent,r={panDown:null};i.notify("selection",{prop:"getPanDown",onPropertyChange:!1,value:{obj:r}});var n={startPoint:r.panDown,endPoint:this.panMove,cancel:!1};i.trigger("panning",n),!n.cancel&&this.panEvent(t,e)},o.prototype.panEvent=function(t,e,i){var r=this.parent,n=!1;if(r.activeObj.shape&&r.activeObj.shape==="shape"&&r.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),d(r.activeObj.shape)){n=!0;var s=r.activeObj.activePoint={startX:r.img.destLeft,startY:r.img.destTop,endX:r.img.destLeft+r.img.destWidth,endY:r.img.destTop+r.img.destHeight},a=s.startX,l=s.startY,h=s.endX,c=s.endY;a<0&&(s.startX=0),l<0&&(s.startY=0),h>r.lowerCanvas.width&&(s.endX=r.lowerCanvas.width),c>r.lowerCanvas.height&&(s.endY=r.lowerCanvas.height),s.width=s.endX-s.startX,s.height=s.endY-s.startY,r.activeObj.shape="crop-custom";var u={strokeSettings:{}};r.notify("shape",{prop:"getStrokeSettings",onPropertyChange:!1,value:{obj:u}}),r.activeObj.strokeSettings=u.strokeSettings,r.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:s,obj:r.activeObj,isMouseMove:null,x:null,y:null}}),r.isCropTab=!0}if(r.transform.degree===0){var p=void 0;d(t)&&d(e)||i?i?p=this.updatePanPoints(t,e):p=this.updatePanPoints():p={x:t,y:e},r.panPoint.totalPannedPoint.x+=p.x,r.panPoint.totalPannedPoint.y+=p.y;var f=m({},r.activeObj,{},!0),g=this.lowerContext.filter;this.drawPannImage(p,n),this.lowerContext.filter=g,this.tempPanMove=m({},this.panMove,{},!0),r.activeObj=m({},f,{},!0),this.upperContext.clearRect(0,0,r.upperCanvas.width,r.upperCanvas.height),r.activeObj.shape&&r.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:r.activeObj}})}else{var v=r.transform.currFlipState;r.isCropTab=!0,d(t)&&d(e)||i?i?r.panPoint.currentPannedPoint=this.updatePanPoints(t,e):r.panPoint.currentPannedPoint=this.updatePanPoints():r.panPoint.currentPannedPoint={x:t,y:e},r.transform.currFlipState=v,this.rotatePan(null,null,n),r.isCropTab=!1,this.tempPanMove=m({},this.panMove,{},!0)}n&&(r.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),r.isCropTab=!1,this.upperContext.clearRect(0,0,r.upperCanvas.width,r.upperCanvas.height))},o.prototype.drawPannImage=function(t,e){var i=this.parent,r=this.lowerContext.filter,n={startX:i.img.destLeft,startY:i.img.destTop,width:i.img.destWidth,height:i.img.destHeight};this.lowerContext.clearRect(0,0,i.lowerCanvas.width,i.lowerCanvas.height),i.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,isRotatePan:null}}),i.img.destLeft=n.startX,i.img.destTop=n.startY,i.img.destWidth=n.width,i.img.destHeight=n.height,this.setDestPointsForFlipState(),e&&(i.isCropTab=!1),i.notify("draw",{prop:"drawImage",onPropertyChange:!1}),e&&(i.isCropTab=!0),(i.currSelectionPoint&&i.currSelectionPoint.shape==="crop-circle"||i.isCircleCrop)&&i.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:!0}}),this.lowerContext.filter=r,i.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:null,isRotatePan:null}}),i.img.destLeft=n.startX,i.img.destTop=n.startY,i.img.destWidth=n.width,i.img.destHeight=n.height;var s=this.lowerContext.filter;this.lowerContext.filter="none",e&&(i.isCropTab=!1),i.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"pan",pen:"pan",x:t.x,y:t.y,panRegion:""}}),e&&(i.isCropTab=!0),this.lowerContext.filter=s,i.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),i.isCircleCrop&&i.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:!0}})},o.prototype.resetZoom=function(){var t=this.parent;if(t.transform.defaultZoomFactor!==0){var e=t.isUndoRedo,i={currObj:{}};t.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:i}}),this.transCurrObj=i.currObj,this.transCurrObj.objColl=m([],t.objColl,null,!0),this.transCurrObj.pointColl=m({},t.pointColl,null,!0),this.transCurrObj.afterCropActions=m([],t.afterCropActions,[],!0);var r={selPointColl:null};t.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:r}}),this.transCurrObj.selPointColl=m([],r.selPointColl,[],!0),t.isUndoRedo=t.isCropToolbar=!0;var n=t.transform.defaultZoomFactor;n>0?this.zoomAction(-n):this.zoomAction(Math.abs(n)),t.isCropToolbar=!1,t.isUndoRedo=e}},o.prototype.performTransformation=function(t){var e=this.parent;this.resetZoom(),this.updateTransform(t);for(var i=0,r=e.objColl.length;i<r;i++)if(e.objColl[i].flipObjColl.length>0){var n={collection:e.objColl[i].flipObjColl};e.notify("shape",{prop:"alignRotateFlipColl",onPropertyChange:!1,value:{collection:n.collection,isRotateFlipCollection:null,obj:n}}),e.objColl[i].flipObjColl=n.collection,e.objColl[i].flipObjColl.length===0&&(e.objColl[i].shapeFlip="")}},o.prototype.updateTransform=function(t){switch(t.toLowerCase()){case"rotateleft":this.rotateImage(-90);break;case"rotateright":this.rotateImage(90);break;case"horizontalflip":this.flipImage(ku.Horizontal);break;case"verticalflip":this.flipImage(ku.Vertical);break}},o.prototype.rotatePan=function(t,e,i){var r=this.parent;this.isReverseRotate=!0;var n=r.transform.degree,s,a={selPointColl:null};r.activeObj.activePoint&&r.activeObj.shape&&(s=m({},r.activeObj,{},!0));var l=m([],r.objColl,[],!0),h=m([],r.pointColl,[],!0);r.objColl=[],r.pointColl=[],r.freehandCounter=0,r.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:a}});var c=a.selPointColl;r.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:[]}}}),r.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),r.notify("draw",{prop:"setRotateZoom",onPropertyChange:!1,value:{isRotateZoom:!0}}),r.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,isRotatePan:null}});var u=r.img.destLeft,p=r.img.destTop,f=r.panPoint.totalPannedInternalPoint;r.isCropTab&&(r.img.destLeft+=f.x,r.img.destTop+=f.y),r.notify("crop",{prop:"updateRotatePan",onPropertyChange:!1}),r.isCropTab&&(r.panPoint.totalPannedInternalPoint.x=r.img.destLeft-u,r.panPoint.totalPannedInternalPoint.y=r.img.destTop-p);var g=this.lowerContext.filter;i&&(r.isCropTab=!1),r.notify("draw",{prop:"drawImage",onPropertyChange:!1}),i&&(r.isCropTab=!0),r.notify("draw",{prop:"setRotateZoom",onPropertyChange:!1,value:{isRotateZoom:!1}}),r.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:!0,isRotatePan:!0}});var v=r.img.destLeft,y=r.img.destTop;r.img.destLeft+=r.panPoint.totalPannedClientPoint.x,r.img.destTop+=r.panPoint.totalPannedClientPoint.y,r.img.destLeft+=r.panPoint.currentPannedPoint.x,r.img.destTop+=r.panPoint.currentPannedPoint.y,r.panPoint.totalPannedClientPoint.x=r.img.destLeft-v,r.panPoint.totalPannedClientPoint.y=r.img.destTop-y,r.objColl=l,r.pointColl=h,r.freehandCounter=r.pointColl.length,r.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:c}}}),r.transform.degree=n,this.lowerContext.filter="none",t&&(e?(r.panPoint.totalPannedClientPoint.x=-r.panPoint.totalPannedClientPoint.x,r.panPoint.totalPannedClientPoint.y=-r.panPoint.totalPannedClientPoint.y,r.panPoint.currentPannedPoint=m({},r.panPoint.totalPannedClientPoint,{},!0),r.panPoint.totalPannedClientPoint={x:0,y:0},r.img.destLeft+=r.panPoint.currentPannedPoint.x,r.img.destTop+=r.panPoint.currentPannedPoint.y):r.panPoint.currentPannedPoint=m({},r.panPoint.totalPannedClientPoint,{},!0)),i&&(r.isCropTab=!1),r.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"pan",pen:"pan",x:r.panPoint.currentPannedPoint.x,y:r.panPoint.currentPannedPoint.y,panRegion:""}}),i&&(r.isCropTab=!0),this.lowerContext.filter=g,r.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),this.upperContext.clearRect(0,0,r.upperCanvas.width,r.upperCanvas.height),r.activeObj=m({},s,{},!0),r.activeObj.activePoint&&r.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:r.activeObj,isCropRatio:null,points:null,isPreventDrag:!0,saveContext:null,isPreventSelection:null}}),this.isReverseRotate=!1},o.prototype.limitPan=function(){var t=this.parent,e=t.activeObj.activePoint,i=e.startX,r=e.startY,n=e.endX,s=e.endY,a=t.img;t.activeObj.activePoint&&(a.destLeft>i&&(t.img.destLeft=i),a.destTop>r&&(t.img.destTop=r),a.destLeft+a.destWidth<n&&(t.img.destLeft=n-a.destWidth),a.destTop+a.destHeight<s&&(t.img.destTop=s-a.destHeight))},o.prototype.pan=function(t,e,i){var r=this.parent;!r.disabled&&r.isImageLoaded&&(t?(r.togglePan=!0,r.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}}),r.notify("selection",{prop:"setDragCanvas",value:{bool:!0}}),r.lowerCanvas.style.cursor=r.upperCanvas.style.cursor=r.cursor="grab",r.notify("selection",{prop:"setPanDown",onPropertyChange:!1,value:{panDown:null}}),(e||i)&&(e=e||0,i=i||0,d(this.panMove)&&(this.panMove={x:e,y:i}),d(this.tempPanMove)&&(this.tempPanMove={x:this.panMove.x,y:this.panMove.y}),this.panEvent(e,i,!0),this.tempPanMove=null)):(r.togglePan=r.currObjType.isCustomCrop=!1,r.notify("selection",{prop:"setDragCanvas",value:{bool:!1}}),r.lowerCanvas.style.cursor=r.upperCanvas.style.cursor=r.cursor="default"))},o.prototype.zoom=function(t,e){var i=this.parent;if(!i.disabled&&i.isImageLoaded){var r=this.getCurrentZoomFactor(t);if(d(e))this.zoomAction(r,e);else for(var n=r>0?"zoomIn":"zoomOut",s=Math.abs(r)*10,a=0;a<s;a++)i.notify("draw",{prop:"performPointZoom",onPropertyChange:!1,value:{x:e.x,y:e.y,type:n,isResize:null}});var l={action:r>0?"zoom-in":"zoom-out",actionEventArgs:i.editCompleteArgs};i.triggerEditCompleteEvent(l)}},o.prototype.getCurrentZoomFactor=function(t){return t>=1?this.prevZoomValue<1?t-this.prevZoomValue:(t-this.prevZoomValue)*.1:t-this.prevZoomValue},o.prototype.setCurrPanRegion=function(t,e,i){var r=t;t===""?r=e==="horizontal"?"horizontal":e==="vertical"?"vertical":t:t==="horizontal"?r=e==="horizontal"?"horizontalVertical":e==="vertical"?"verticalHorizontal":e===90?"vertical":e===-90?"horizontal":t:t==="vertical"?r=e==="horizontal"?"horizontalVertical":e==="vertical"?"verticalHorizontal":e===90?"horizontal":e===-90?"vertical":t:r=e==="horizontal"?"vertical":e==="vertical"?"horizontal":t,i.panRegion=r},o.prototype.rotate=function(t,e){var i=this.parent,r=!1;!i.disabled&&i.isImageLoaded&&t%90===0&&this.rotateImage(t),e.isRotate=r},o.prototype.flip=function(t){var e=this.parent;!e.disabled&&e.isImageLoaded&&this.flipImage(t)},o.prototype.update=function(){var t=this.parent,e=0,i=!1,r={bool:!1},n={bool:t.isStraightening},s=0,a=t.element.querySelector("#"+t.element.id+"_contextualToolbar"),l=t.element.querySelector(".e-contextual-toolbar-wrapper"),h=t.element.querySelector("#"+t.element.id+"_headWrapper");if(t.isImageLoaded){var c=!1,u=void 0;D.isDevice&&(t.activeObj.shape&&(u=t.activeObj.shape.split("-")),(t.currObjType.isCustomCrop||u&&u[0]==="crop")&&(c=!0));var p={bool:null};t.notify("toolbar",{prop:"getFrameToolbar",onPropertyChange:!1,value:{obj:p}}),!n.bool&&(a&&!a.parentElement.classList.contains("e-hide")||h&&!h.parentElement.classList.contains("e-hide"))&&(l.classList.add("e-hide"),c||t.okBtn(null,!0),t.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1}),t.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1})),t.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:r}}),r.bool&&t.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1});var f=m({},t.activeObj.activePoint,{},!0);t.activeObj.shape&&(f.width!==0||f.height!==0)&&(i=!0,t.textArea.style.display==="block"||t.textArea.style.display==="inline-block"?(t.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}}),t.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1})):(t.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),t.objColl.push(t.activeObj)),t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}))}t.updateDropInfoContent(t.element.querySelector(".e-ie-drop-info"));var g=this.lowerContext.filter,v=t.element.querySelector("#"+t.element.id+"_canvasWrapper");if(v&&(v.style.width=t.element.offsetWidth-2+"px"),t.lowerCanvas.width=t.upperCanvas.width=t.maskCanvas.width=t.element.offsetWidth-2,t.toolbarTemplate)e=t.element.querySelector("#"+t.element.id+"_toolbarArea").clientHeight;else if(t.element.querySelector("#"+t.element.id+"_toolbar")&&(e=t.element.querySelector("#"+t.element.id+"_toolbar").clientHeight,e===0&&t.toolbar&&t.toolbar.length>0&&t.toolbar.indexOf("Open")===-1)){var y={toolbarHeight:0};t.notify("toolbar",{prop:"getToolbarHeight",value:{obj:y}}),e=y.toolbarHeight}var C=t.element.querySelector("#"+t.element.id+"_contextualToolbarArea");if(D.isDevice&&n.bool&&C&&(s=C.clientHeight),t.notify("toolbar",{prop:"setToolbarHeight",value:{height:e}}),D.isDevice?v&&(v.style.height=t.element.offsetHeight-(2*e+s)-4+"px"):v&&(v.style.height=t.element.offsetHeight-e-2+"px"),t.lowerCanvas.height=t.upperCanvas.height=parseFloat(v.style.height),this.lowerContext.filter="brightness(1) contrast(100%) hue-rotate(0deg) saturate(100%) opacity(1) blur(0px) sepia(0%) grayscale(0%) invert(0%)",t.notify("filter",{prop:"setAdjustmentValue",onPropertyChange:!1,value:{adjustmentValue:this.lowerContext.filter}}),t.canvasFilter=this.lowerContext.filter,t.initialAdjustmentValue=this.lowerContext.filter,t.clearContext(this.lowerContext),t.clearContext(this.upperContext),t.isImageLoaded){if(t.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:null}}),t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.lowerContext.filter=g,t.initialAdjustmentValue=g,t.canvasFilter=this.lowerContext.filter,t.isImageLoaded&&(_t(t.element),t.element.style.opacity="0.5"),this.lowerContext.clearRect(0,0,t.lowerCanvas.width,t.lowerCanvas.height),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),v){v.style.width=t.element.offsetWidth-2+"px",v.style.height=t.element.offsetHeight+"px";var b={toolbarHeight:0};t.notify("toolbar",{prop:"getToolbarHeight",value:{obj:b}}),D.isDevice?v.style.height=parseFloat(v.style.height)-2*b.toolbarHeight-s-4+"px":v.style.height=parseFloat(v.style.height)-b.toolbarHeight-2+"px"}t.lowerCanvas.width=t.upperCanvas.width=t.maskCanvas.width=parseFloat(v.style.width),t.lowerCanvas.height=t.upperCanvas.height=t.maskCanvas.height=parseFloat(v.style.height),this.lowerContext.filter=g;var y={width:0,height:0};this.calcMaxDimension(t.img.srcWidth,t.img.srcHeight,y);var M=y;if(n.bool&&t.transform.cropZoomFactor!==0?(M.width+=M.width*t.transform.cropZoomFactor,M.height+=M.height*t.transform.cropZoomFactor):t.transform.defaultZoomFactor>0&&(M.width+=M.width*t.transform.defaultZoomFactor,M.height+=M.height*t.transform.defaultZoomFactor),t.img.destLeft=(t.lowerCanvas.clientWidth-M.width)/2,t.img.destTop=(t.lowerCanvas.clientHeight-M.height+1)/2,t.transform.degree===0&&t.transform.currFlipState==="")t.transform.defaultZoomFactor>0&&(t.img.destLeft+=t.panPoint.totalPannedPoint.x,t.img.destTop+=t.panPoint.totalPannedPoint.y),t.notify("draw",{prop:"draw-image-to-canvas",value:{dimension:M}});else{t.notify("draw",{prop:"draw-image-to-canvas",value:{dimension:M}}),t.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,isRotatePan:null}});var S=this.lowerContext.filter;t.notify("draw",{prop:"drawImage",onPropertyChange:!1}),this.lowerContext.filter=S,t.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:null,isRotatePan:null}})}t.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:null}}),t.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),t.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}}),t.isCircleCrop&&t.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),xt(t.element),t.element.style.opacity="1";var N={defToolbarItems:null};if(t.notify("toolbar",{prop:"getDefToolbarItems",value:{obj:N}}),N.defToolbarItems&&N.defToolbarItems.length>0&&document.getElementById(t.element.id+"_toolbar")){var x=$(t.element.id+"_toolbar","toolbar");x&&x.refreshOverflow(),l&&!n.bool&&l.classList.add("e-hide")}if(t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),i){var A=m({},t.objColl[t.objColl.length-1],null,!0);t.objColl.pop(),A.activePoint.width!==0&&A.activePoint.height!==0&&(this.lowerContext.clearRect(0,0,t.lowerCanvas.width,t.lowerCanvas.height),t.notify("draw",{prop:"render-image",value:{isMouseWheel:null}}),t.objColl.push(A),t.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:null}}),A=m({},t.objColl[t.objColl.length-1],null,!0),t.objColl.pop(),this.lowerContext.clearRect(0,0,t.lowerCanvas.width,t.lowerCanvas.height),t.notify("draw",{prop:"render-image",value:{isMouseWheel:null}}),t.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:A}}),n.bool&&t.notify("draw",{prop:"setStraightenActObj",value:{activeObj:A}}),(t.activeObj.shape==="rectangle"||t.activeObj.shape==="ellipse"||t.activeObj.shape==="text"||t.activeObj.shape==="line"||t.activeObj.shape==="arrow"||t.activeObj.shape==="path"||t.activeObj.shape==="image")&&t.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}}))}if(r.bool&&t.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:!0}}),t.isResize&&(t.aspectWidth=Math.ceil(t.img.destWidth),t.aspectHeight=Math.ceil(t.img.destHeight),t.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"resize",isApplyBtn:!1,isCropping:!1}}),t.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"resize",isApplyBtn:!1,isCropping:!1}})),(t.transform.degree!==0||t.transform.currFlipState!=="")&&t.transform.defaultZoomFactor>0){var U=m({},t.panPoint.totalPannedPoint,null,!0),z=m({},t.panPoint.totalPannedInternalPoint,null,!0),J=m({},t.panPoint.totalPannedClientPoint,null,!0);this.zoomAction(.1),this.zoomAction(-.1),t.transform.degree===0?(t.img.destLeft+=U.x,t.img.destTop+=U.y,t.panPoint.totalPannedPoint=U,t.notify("draw",{prop:"updateFlipPan",value:{tempSelectionObj:null}})):(t.panPoint.totalPannedInternalPoint=z,t.panPoint.totalPannedClientPoint=J,t.panPoint.currentPannedPoint={x:0,y:0},t.isCropTab=!0,this.rotatePan(),t.isCropTab=!1)}else t.transform.degree!==0&&t.transform.cropZoomFactor>0&&(t.transform.zoomFactor=0,t.transform.cropZoomFactor=null,t.notify("toolbar",{prop:"enable-disable-btns",onPropertyChange:!1}))}},o.prototype.calcMaxDimension=function(t,e,i,r){var n={toolbarHeight:0},s=this.parent;s.notify("toolbar",{prop:"getToolbarHeight",value:{obj:n}});var a=r?s.element.clientWidth/3:s.element.clientWidth,l=r?(s.element.clientHeight-n.toolbarHeight)/3:s.element.clientHeight-n.toolbarHeight;if(l=D.isDevice?l-n.toolbarHeight:l,D.isDevice&&s.isStraightening){var h=s.element.querySelector("#"+s.element.id+"_contextualToolbarArea");l-=h?h.clientHeight:0}!r&&s.element.clientHeight===0&&(l=0),d(r)&&(a>30&&(a-=30),l>30&&(l-=30));var c=a/t,u=l/e,p=Math.min(t,a),f=Math.min(e,l);if(c<1&&c<u?(p=t*c,f=e*c):u<1&&u<c&&(p=t*u,f=e*u),d(r)){var g={bool:null};s.notify("crop",{prop:"getPreventScaling",onPropertyChange:!1,value:{obj:g}}),g.bool&&s.cropObj.activeObj.activePoint&&s.cropObj.activeObj.activePoint.width!==0&&s.cropObj.activeObj.activePoint.height!==0&&(p=s.cropObj.activeObj.activePoint.width,f=s.cropObj.activeObj.activePoint.height)}return i&&(i.width=p,i.height=f),{width:p,height:f}},o.prototype.updatePanPoints=function(t,e){var i=this.parent,r=m({},i.activeObj,{},!0),n=i.img.destLeft,s=i.img.destTop;d(this.tempPanMove)&&(this.tempPanMove={x:this.panMove.x,y:this.panMove.y});var a=this.panMove.x-this.tempPanMove.x,l=this.panMove.y-this.tempPanMove.y;(t||e)&&(a=t,l=e),i.img.destLeft+=a,i.img.destTop+=l,this.limitPan();var h={bool:null},c={isIntersect:null};i.notify("draw",{prop:"updateImgCanvasPoints",onPropertyChange:!1}),i.notify("draw",{prop:"isLinesIntersect",onPropertyChange:!1,value:{obj:c}}),i.notify("draw",{prop:"isSelOutsideImg",onPropertyChange:!1,value:{obj:h}});for(var u=0;i.transform.straighten!==0&&(c.isIntersect||h.bool)&&(u++,i.img.destLeft=n,i.img.destTop=s,a!==0&&a>0?a-=1:a!==0&&a<0&&(a+=1),l!==0&&l>0?l-=1:l!==0&&l<0&&(l+=1),!(a===0&&l===0||u===200));)i.img.destLeft+=a,i.img.destTop+=l,this.limitPan(),i.notify("draw",{prop:"updateImgCanvasPoints",onPropertyChange:!1}),i.notify("draw",{prop:"isLinesIntersect",onPropertyChange:!1,value:{obj:c}}),i.notify("draw",{prop:"isSelOutsideImg",onPropertyChange:!1,value:{obj:h}});return i.activeObj=r,{x:i.img.destLeft-n,y:i.img.destTop-s}},o.prototype.resizeImage=function(t,e){var i=this.parent,r=!0,n=!0;i.allowDownScale=!1,i.img.srcLeft=0,i.img.srcTop=0,i.isAspectRatio=!0;var s=[];for(i.img.srcWidth=i.baseImgCanvas.width,i.img.srcHeight=i.baseImgCanvas.height,i.resizeSrc&&i.resizeSrc.width!==0&&i.resizeSrc.height!==0&&(i.img.srcLeft=i.resizeSrc.startX,i.img.srcTop=i.resizeSrc.startY,i.img.srcWidth=i.resizeSrc.width,i.img.srcHeight=i.resizeSrc.height);(t<i.img.destWidth||e<i.img.destHeight)&&n;)if(this.zoomAction(-.1,null,!0,!0),t>i.img.destWidth||e>i.img.destHeight)for(;t>i.img.destWidth||e>i.img.destHeight;)this.zoomAction(.0125,null,!0,!0),n=!1,s.push(i.img.destWidth);for(;(t>i.img.destWidth||e>i.img.destHeight)&&n&&r;)if(this.zoomAction(.1,null,!0,!0),t<i.img.destWidth||e<i.img.destHeight)for(;t<i.img.destWidth;)this.zoomAction(-.0125,null,!0,!0),r=!1,s.push(i.img.destWidth);for(var a=s[0],l=Math.abs(i.img.destWidth-a),h=0,c=s;h<c.length;h++){var u=c[h],p=Math.abs(t-u);p<l&&(a=u,l=p)}a<t&&r&&(this.zoomAction(-.0125,null,!0,!0),r=!1),a>t&&!r&&(this.zoomAction(.0125,null,!0,!0),r=!1),this.zoomAction(.0125,null,!0),i.allowDownScale=!0,this.zoomAction(-.0125,null,!0);var f=m({},i.cropObj,{},!0),g=m({},this.prevResizeCurrObj,{},!0);i.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"resize",previousObj:g,previousObjColl:g.objColl,previousPointColl:g.pointColl,previousSelPointColl:g.selPointColl,previousCropObj:f,previousText:null,currentText:null,previousFilter:null,isCircleCrop:i.isCircleCrop}}),i.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}})},o.prototype.resizeCrop=function(t,e){var i=this.parent,r=!0,n={prevObj:i.prevObj};i.cropObj=m({},i.prevCropObj,{},!0),i.allowDownScale=!1,i.notify("toolbar",{prop:"getPrevObj",onPropertyChange:!1,value:{obj:n}});var s=m({},n.prevObj.activeObj,{},!0);n.prevObj.activeObj=m({},i.activeObj,{},!0),i.notify("draw",{prop:"setCurrentObj",onPropertyChange:!1,value:{obj:n.prevObj}}),i.objColl=m([],n.prevObj.objColl,[],!0),i.pointColl=m([],n.prevObj.pointColl,[],!0),i.transform.straighten=0,i.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:null}}),i.transform.straighten===0&&!this.isPreventSelect&&i.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1});var a=t,l=e,h=!1;if(e>=t&&e<=Math.ceil(i.img.destHeight)){for(;e<=Math.ceil(i.img.destHeight)&&r;)if(this.zoomAction(-.1,null,!0,!0),t>i.img.destWidth||e>i.img.destHeight)for(;t>i.img.destWidth||e>i.img.destHeight;)this.zoomAction(.0125,null,!0,!0),r=!1}else if(e<=t&&t<i.img.destWidth){for(;t<i.img.destWidth&&r;)if(this.zoomAction(-.1,null,!0,!0),t>i.img.destWidth||e>i.img.destHeight)for(;t>i.img.destWidth||e>i.img.destHeight;)this.zoomAction(.0125,null,!0,!0),r=!1}else if(e>=t&&e>=i.img.destHeight)for(;e>=i.img.destHeight&&r;)this.zoomAction(.1,null,!0,!0);else if(t>=e&&t>=i.img.destWidth){for(;t>=i.img.destWidth&&r;)this.zoomAction(.1,null,!0,!0);if(t<i.img.destWidth&&e<i.img.destHeight){for(;t<i.img.destWidth&&e<i.img.destHeight;)this.zoomAction(-.0125,null,!0,!0),r=!1;this.zoomAction(.0125,null,!0,!0)}}else if(e>i.img.destHeight&&t>i.img.destWidth){for(;e>i.img.destHeight&&t>i.img.destWidth&&r;)this.zoomAction(.1,null,!0,!0);if(t<i.img.destWidth&&e<i.img.destHeight){for(;t<i.img.destWidth&&e<i.img.destHeight;)this.zoomAction(-.0125,null,!0,!0),r=!1;this.zoomAction(.0125,null,!0,!0)}}if(this.resizeImg(s,t,e),t=a,e=l,e!==i.img.destHeight||t!==i.img.destWidth){for(;e>i.img.destHeight||t>i.img.destWidth;)this.zoomAction(.0125,null,!0,!0),h=!0;h&&(this.zoomAction(-.0125,null,!0,!0),h=!1)}if(e!==i.img.destHeight||t!==i.img.destWidth){for(;e<i.img.destHeight||t<i.img.destWidth;)this.zoomAction(-.0125,null,!0,!0),h=!0;h&&(this.zoomAction(-.0125,null,!0,!0),h=!1)}n.prevObj.activeObj=m({},s,{},!0),this.zoomAction(.0125,null,!0),i.allowDownScale=!this.preventDownScale,i.isCropTab=!1,this.zoomAction(-.0125,null,!0),i.aspectWidth=t,i.aspectHeight=e},o.prototype.resizeImg=function(t,e,i){var r=this.parent,n=e/r.img.destWidth,s=i/r.img.destHeight;t.shape?(r.currSelectionPoint=t,r.notify("crop",{prop:"setInitCrop",onPropertyChange:!1,value:{bool:!0}})):r.img.srcWidth===r.baseImgCanvas.width&&r.img.srcHeight===r.baseImgCanvas.height&&(r.currSelectionPoint=null,r.notify("draw",{prop:"select",onPropertyChange:!1,value:{type:"custom",startX:null,startY:null,width:null,height:null}})),d(r.currSelectionPoint)?r.notify("draw",{prop:"select",onPropertyChange:!1,value:{type:"custom",startX:r.img.destLeft,startY:r.img.destTop,width:r.img.destWidth,height:r.img.destHeight}}):r.notify("draw",{prop:"select",onPropertyChange:!1,value:{type:"custom",startX:null,startY:null,width:null,height:null}}),e=r.activeObj.activePoint.width*n,i=r.activeObj.activePoint.height*s;for(var a=r.activeObj.activePoint.startX+r.activeObj.activePoint.width/2-e/2,l=r.activeObj.activePoint.startY+r.activeObj.activePoint.height/2-i/2,h=0;D.isDevice&&h<500&&(a<0||l<0||a+e>r.img.destWidth||l+i>r.img.destHeight);)h++,e-=1,i-=1,a=r.activeObj.activePoint.startX+r.activeObj.activePoint.width/2-e/2,l=r.activeObj.activePoint.startY+r.activeObj.activePoint.height/2-i/2;if(r.transform.defaultZoomFactor=0,r.notify("draw",{prop:"setResizeSelect",value:{bool:!0}}),r.notify("draw",{prop:"setIsCropSelect",value:{bool:!0}}),r.notify("draw",{prop:"select",onPropertyChange:!1,value:{type:"custom",startX:a,startY:l,width:e,height:i}}),r.notify("draw",{prop:"setResizeSelect",value:{bool:!1}}),r.transform.straighten!==0){var c={isIntersect:null,arr:null};for(r.notify("draw",{prop:"updateImgCanvasPoints",onPropertyChange:!1}),r.notify("draw",{prop:"isLinesIntersect",onPropertyChange:!1,value:{obj:c}});c.arr[0]||c.arr[1]||c.arr[2]||c.arr[3];)this.zoomAction(.0125,null,!0),r.notify("draw",{prop:"updateImgCanvasPoints",onPropertyChange:!1}),r.notify("draw",{prop:"isLinesIntersect",onPropertyChange:!1,value:{obj:c}})}r.isCropToolbar=!0,r.crop(),r.isCropToolbar=!1},o.prototype.updateResize=function(){var t=this.parent;t.prevCropObj=m({},t.cropObj,{},!0);var e={currObj:{}};t.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:e}}),t.prevObj=e.currObj,t.currSelectionPoint&&t.prevCropObj.activeObj.shape&&(t.prevObj.activeObj=m({},t.prevCropObj.activeObj,{},!0)),t.prevObj.objColl=m([],t.objColl,[],!0),t.prevObj.pointColl=m([],t.pointColl,[],!0),t.prevObj.afterCropActions=m([],t.afterCropActions,[],!0);var i={selPointColl:null};t.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:i}}),t.prevObj.selPointColl=m([],i.selPointColl,[],!0),t.resizeSrc={startX:t.img.srcLeft,startY:t.img.srcTop,width:t.img.srcWidth,height:t.img.srcHeight}},o.prototype.resize=function(t,e,i){var r=this.parent,n;r.isResize=!0,d(r.prevCropObj)&&d(r.prevObj)&&r.notify("transform",{prop:"updateResize",value:{bool:!1}});var s=r.element.querySelector("#"+r.element.id+"_aspectratio"),a=r.element.querySelector("#"+r.element.id+"_nonaspectratio");s&&a&&(r.notify("toolbar",{prop:"initResizeToolbar"}),D.isDevice&&r.notify("toolbar",{prop:"init-main-toolbar",value:{isApplyBtn:!1,isDevice:!0,isOkBtn:!0,isResize:!0}}));var l=r.element.querySelector("#"+r.element.id+"_resizeHeight");l?n=l.value===""?l.placeholder:l.value:n=e+"px";var h={cancel:!1,previousWidth:Math.ceil(r.img.destWidth),previousHeight:Math.ceil(r.img.destHeight),width:Math.ceil(t),height:Math.ceil(e&&e!==0?e:i?parseFloat(n):r.img.destHeight),isAspectRatio:i||!1};r.trigger("resizing",h),r.editCompleteArgs=h,h.cancel?r.aspectHeight&&r.aspectWidth&&(r.aspectHeight=h.previousHeight,r.aspectWidth=h.previousWidth):this.resizeEventHandler(h)},o.prototype.resizeEventHandler=function(t){var e=this.parent,i,r=e.element.querySelector("#"+e.element.id+"_resizeWidth"),n=e.element.querySelector("#"+e.element.id+"_resizeHeight");if(t.isAspectRatio)if((this.resizedImgAngle==null||this.resizedImgAngle!==e.transform.degree)&&(this.resizedImgAngle=e.transform.degree,i=!0),i){e.notify("transform",{prop:"resizeImage",value:{width:t.width,height:0}});var s=e.img.destWidth,a=e.img.destHeight,l=void 0;if(n){l=parseFloat(r.value===""?r.placeholder:r.value);var h=l/(s/a),c=h%1>=.5||h%1<=-.5?Math.round(h):h<0?Math.ceil(h):Math.floor(h);if($(n,"numerictextbox").value=c,n.value=c.toString()+" px",e.aspectHeight=c,r&&r.value===""){var u=parseFloat(n.value===""?n.placeholder:n.value);h=u/(a/s);var p=h%1>=.5||h%1<=-.5?Math.round(h):h<0?Math.ceil(h):Math.floor(h);$(r,"numerictextbox").value=p,r.value=p.toString()+" px",e.aspectWidth=p}}}else e.notify("transform",{prop:"resizeImage",value:{width:t.width,height:null}});else this.resizedImgAngle!==null&&this.resizedImgAngle!==e.transform.degree&&(this.resizedImgAngle=e.transform.degree,i=!0),i?(e.notify("transform",{prop:"setPreventDownScale",value:{bool:!0}}),e.notify("transform",{prop:"resizeCrop",value:{width:t.width,height:t.height}}),e.notify("undo-redo",{prop:"setPreventUR",value:{bool:!0}}),e.okBtn(null,!0),e.notify("undo-redo",{prop:"setPreventUR",value:{bool:!1}}),e.resizeSrc={startX:e.img.srcLeft,startY:e.img.srcTop,width:e.img.srcWidth,height:e.img.srcHeight},e.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"resize",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}),e.notify("transform",{prop:"setPreventDownScale",value:{bool:!1}}),e.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"resize",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}})):e.notify("transform",{prop:"resizeCrop",value:{width:t.width,height:t.height}});this.resizedImgAngle=e.transform.degree},o.prototype.straightenImage=function(t){var e=this.parent,i=e.activeObj.shape&&e.activeObj.shape.indexOf("crop-")>-1;e.toolbar&&e.toolbar.length===0&&e.notify("draw",{prop:"select",onPropertyChange:!1,value:{type:"custom",startX:null,startY:null,width:null,height:null}}),e.notify("toolbar",{prop:"performCropTransformClick",value:{shape:null}}),e.setStraighten(t),i||e.okBtn()},o}(),$D=function(){function o(t){this.undoRedoStep=0,this.undoRedoColl=[],this.appliedUndoRedoColl=[],this.tempUndoRedoColl=[],this.tempUndoRedoStep=0,this.isPreventing=!1,this.parent=t,this.addEventListener()}return o.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},o.prototype.addEventListener=function(){this.parent.on("undo-redo",this.undoRedo,this),this.parent.on("destroyed",this.destroy,this)},o.prototype.removeEventListener=function(){this.parent.off("undo-redo",this.undoRedo),this.parent.off("destroyed",this.destroy)},o.prototype.initializeUrPvtProp=function(){this.parent.lowerCanvas&&(this.lowerContext=this.parent.lowerCanvas.getContext("2d")),this.parent.upperCanvas&&(this.upperContext=this.parent.upperCanvas.getContext("2d"))},o.prototype.undoRedo=function(t){switch(this.initializeUrPvtProp(),t.prop){case"updateUndoRedoColl":this.updateUrc(t.value.operation,t.value.previousObj,t.value.previousObjColl,t.value.previousPointColl,t.value.previousSelPointColl,t.value.previousCropObj,t.value.previousText,t.value.currentText,t.value.previousFilter,t.value.isCircleCrop);break;case"refreshUrc":this.refreshUrc(t.value.bool);break;case"updateCurrUrc":this.updateCurrUrc(t.value.type,t.value.isCancel);break;case"call-undo":this.callUndo();break;case"call-redo":this.callRedo();break;case"undo":this.undo();break;case"redo":this.redo();break;case"updateUrObj":this.updateUrObj(t.value.objColl,t.value.operation);break;case"updateUndoRedo":this.updateUndoRedo(t.value?t.value.operation:null);break;case"getAppliedUndoRedoColl":t.value.obj.appliedUndoRedoColl=this.appliedUndoRedoColl;break;case"getUndoRedoStep":t.value.obj.undoRedoStep=this.undoRedoStep;break;case"setUndoRedoStep":this.undoRedoStep=t.value.step;break;case"undoDefault":this.undoDefault(t.value.obj);break;case"setPreventUR":this.isPreventing=t.value.bool;break;case"updateUndoRedoStack":t.value&&t.value.isPenDraw?this.updateUndoRedoStack(t.value.isPenDraw):this.updateUndoRedoStack();break;case"reset":this.reset();break}},o.prototype.getModuleName=function(){return"undo-redo"},o.prototype.reset=function(){this.tempCurrSelPoint=null,this.undoRedoStep=0,this.undoRedoColl=[],this.appliedUndoRedoColl=[],this.tempActObj=null,this.tempUndoRedoColl=[],this.tempUndoRedoStep=0,this.isPreventing=!1},o.prototype.refreshUrc=function(t){var e=this.parent;e.isImageUpdated||(t=t||!1,t&&(e.notify("toolbar",{prop:"setEnableDisableUndoRedo",value:{isPrevent:!0}}),this.tempUndoRedoColl=m([],this.appliedUndoRedoColl,[],!0),this.tempUndoRedoStep=this.undoRedoStep),e.notify("toolbar",{prop:"setEnableDisableUndoRedo",value:{isPrevent:!1}}),this.undoRedoColl=this.undoRedoColl.slice(0,this.undoRedoStep),this.appliedUndoRedoColl=this.appliedUndoRedoColl.slice(0,this.undoRedoStep),e.isUndoRedo=e.currObjType.isUndoAction=!1,e.notify("toolbar",{prop:"enable-disable-btns"}))},o.prototype.updateCurrUrc=function(t,e){var i=this.parent;if(!(i.isResize||this.isPreventing||i.noPushUndo)){if(i.notify("toolbar",{prop:"setEnableDisableUndoRedo",value:{isPrevent:!1}}),t==="ok"){i.notify("draw",{prop:"setShapeTextInsert",onPropertyChange:!1,value:{bool:!1}});var r=this.tempUndoRedoColl.length>0?m([],this.tempUndoRedoColl,[],!0):m([],this.undoRedoColl,[],!0),n=this.undoRedoColl[this.undoRedoColl.length-1],s=this.appliedUndoRedoColl[this.appliedUndoRedoColl.length-1],a=n?m({},n.previousObj,{},!0):null;if(d(s)?this.undoRedoColl[0]&&(n.previousCropObj=r[0].previousCropObj,n.previousObj=r[0].previousObj,n.previousObjColl=r[0].previousObjColl,n.previousPointColl=r[0].previousPointColl,n.previousText=r[0].previousText):n.operation!=="imageHFlip"&&n.operation!=="imageVFlip"&&(n.previousCropObj=s.currentCropObj,n.previousObj=s.currentObj,n.previousObjColl=s.currentObjColl,n.previousPointColl=s.currentPointColl,n.previousText=s.currentText,n.operation==="frame"&&n.previousObj&&a&&(n.previousObj.defaultZoom=a.defaultZoom,n.previousObj.zoomFactor=a.zoomFactor,n.previousObj.cropZoom=a.cropZoom)),n){if(n.operation!=="imageHFlip"&&n.operation!=="imageVFlip"){var l=this.getZeroZoomObjPointValue(n.currentObjColl,n.currentPointColl);n.currentObjColl=l.obj,n.currentPointColl=l.point;var h={adjustmentLevel:null};i.notify("filter",{prop:"getAdjustmentLevel",onPropertyChange:!1,value:{obj:h}}),n.currentObj.adjustmentLevel=m({},h.adjustmentLevel,{},!0),i.notify("filter",{prop:"setTempAdjVal"}),n.currentObj.currentFilter=i.currentFilter}this.appliedUndoRedoColl.push(n),e||this.triggerActionCompletedEvent(n.operation)}this.tempUndoRedoColl=[],this.tempUndoRedoStep=0}else this.tempUndoRedoColl.length>0&&(this.appliedUndoRedoColl=m([],this.tempUndoRedoColl,[],!0),this.undoRedoStep=this.tempUndoRedoStep,this.tempUndoRedoColl=[],this.tempUndoRedoStep=0);var c=this.appliedUndoRedoColl[this.appliedUndoRedoColl.length-1],u=this.appliedUndoRedoColl[this.appliedUndoRedoColl.length-2];if(this.appliedUndoRedoColl.length>16)this.appliedUndoRedoColl.splice(0,1);else if(!e&&c&&u){if((c.operation==="shapeTransform"&&u.operation==="shapeTransform"||c.operation==="shapeInsert"&&u.operation==="shapeInsert")&&JSON.stringify(c.currentObjColl)===JSON.stringify(u.currentObjColl)||c.operation==="freehand-draw"&&u.operation==="freehand-draw"&&JSON.stringify(c.currentPointColl)===JSON.stringify(u.currentPointColl)||c.operation==="freehanddrawCustomized"&&u.operation==="freehanddrawCustomized"&&JSON.stringify(c.currentPointColl)===JSON.stringify(u.currentPointColl))this.appliedUndoRedoColl.splice(this.appliedUndoRedoColl.length-1,1);else if(this.undoRedoStep!==this.appliedUndoRedoColl.length-1&&(c=this.appliedUndoRedoColl[this.appliedUndoRedoColl.length-1],u=this.appliedUndoRedoColl[this.undoRedoStep],c&&u&&c.operation==="shapeTransform"&&u.operation==="shapeTransform"&&JSON.stringify(c.currentObjColl)===JSON.stringify(u.previousObjColl))){this.appliedUndoRedoColl.splice(this.appliedUndoRedoColl.length-1,1),this.undoRedoColl=[],this.undoRedoColl=m([],this.appliedUndoRedoColl,[],!0);return}}this.undoRedoColl=[],this.undoRedoColl=m([],this.appliedUndoRedoColl,[],!0),t==="ok"&&(this.undoRedoStep=this.undoRedoColl.length,i.notify("toolbar",{prop:"enable-disable-btns"})),i.transform.zoomFactor>0&&(i.togglePan=!0,i.notify("selection",{prop:"setDragCanvas",value:{bool:!0}}))}},o.prototype.triggerActionCompletedEvent=function(t){var e=this.parent,i={brightness:"fine-tune",contrast:"fine-tune",hue:"fine-tune",saturation:"fine-tune",opacity:"fine-tune",blur:"fine-tune",exposure:"fine-tune",default:"filter",chrome:"filter",cold:"filter",warm:"filter",grayscale:"filter",sepia:"filter",invert:"filter",deleteObj:"shape-delete",deleteFreehandDrawing:"freehand-draw-delete",shapeInsert:"shape-insert",shapeTransform:"shape-customize",freehanddrawCustomized:"freehand-draw-customize"},r=i[t]||t,n={action:r,actionEventArgs:e.editCompleteArgs};e.triggerEditCompleteEvent(n)},o.prototype.getUndoRedoAction=function(t){var e={brightness:"fine-tune",contrast:"fine-tune",hue:"fine-tune",saturation:"fine-tune",opacity:"fine-tune",blur:"fine-tune",exposure:"fine-tune",default:"filter",chrome:"filter",cold:"filter",warm:"filter",grayscale:"filter",sepia:"filter",invert:"filter",deleteObj:"shape-delete",deleteFreehandDrawing:"freehand-drawing-delete",shapeInsert:"shape-insert",shapeTransform:"shape-customize",imageRotate:"shape-customize",freehanddraw:"freehand-draw",freehanddrawCustomized:"freehand-draw-customize",textAreaCustomization:"text-area-customization",imageHFlip:"shape-customize",imageVFlip:"shape-customize",bgColor:"background-color",updateImage:"image-update"};return e[t]||t},o.prototype.cancelCropSelection=function(){var t=this.parent,e=!1,i;t.activeObj.shape&&(i=t.activeObj.shape.split("-")),(t.currObjType.isCustomCrop||i&&i[0]==="crop")&&(e=!0),e&&t.notify("draw",{prop:"performCancel",value:{isContextualToolbar:null}}),(this.tempUndoRedoColl.length!==0||this.tempUndoRedoStep!==0)&&(this.appliedUndoRedoColl=m([],this.tempUndoRedoColl,[],!0),this.undoRedoColl=m([],this.tempUndoRedoColl,[],!0),this.undoRedoStep=this.tempUndoRedoStep,this.tempUndoRedoColl=[],this.tempUndoRedoStep=0,t.notify("toolbar",{prop:"setEnableDisableUndoRedo",value:{isPrevent:!1}}))},o.prototype.refreshToolbarActions=function(){var t=this.parent;t.activeObj.shape?(t.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"shapes",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}),t.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1})):t.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1})},o.prototype.applyCurrentChanges=function(){var t=this.parent;t.currObjType.isFiltered=!1,t.transform.zoomFactor===0&&(t.togglePan=!1,t.notify("selection",{prop:"setDragCanvas",value:{bool:!1}})),t.element.querySelector(".e-contextual-toolbar-wrapper")&&t.element.querySelector(".e-contextual-toolbar-wrapper").classList.add("e-hide"),t.togglePen&&(t.togglePen=!1,t.upperCanvas.style.cursor=t.cursor="default",this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height)),this.appliedUndoRedoColl.length>0&&(this.undoRedoColl=m([],this.appliedUndoRedoColl,[],!0))},o.prototype.callUndo=function(){this.applyCurrentChanges(),this.undo()},o.prototype.callRedo=function(){this.applyCurrentChanges(),this.redo()},o.prototype.undo=function(){var t=this.parent;if(this.cancelCropSelection(),t.notify("draw",{prop:"resetFrameZoom",onPropertyChange:!1,value:{isOk:!1}}),!t.disabled&&t.isImageLoaded&&this.undoRedoStep>0){this.refreshToolbarActions(),t.activeObj.activePoint&&t.activeObj.activePoint.width!==0&&(this.tempActObj=t.activeObj),t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.undoRedoStep--,t.notify("toolbar",{prop:"enable-disable-btns"}),t.element.querySelector(".e-contextual-toolbar-wrapper")&&t.element.querySelector(".e-contextual-toolbar-wrapper").classList.add("e-hide"),t.isUndoRedo=!0;var e=this.undoRedoColl[this.undoRedoStep];this.undoRedoColl.length===this.undoRedoStep?t.currObjType.isUndoAction=!1:t.currObjType.isUndoAction=!0,e.operation!=="textAreaCustomization"&&(t.textArea.style.display==="block"||t.textArea.style.display==="inline-block")&&(t.textArea.style.display="none"),t.notify("draw",{prop:"setCancelAction",onPropertyChange:!1,value:{bool:!0}});var i=void 0;t.cropObj=m({},e.previousCropObj,{},!0),t.afterCropActions=e.previousObj.afterCropActions,this.lowerContext.filter=e.previousObj.filter,t.notify("filter",{prop:"setAdjustmentLevel",onPropertyChange:!1,value:{adjustmentLevel:e.previousObj.adjustmentLevel}}),t.notify("filter",{prop:"setTempAdjVal"}),t.currentFilter=e.previousObj.currentFilter,t.notify("filter",{prop:"setTempFilVal"}),t.canvasFilter=this.lowerContext.filter,t.initialAdjustmentValue=this.lowerContext.filter,t.notify("filter",{prop:"setBevelFilter",onPropertyChange:!1,value:{bevelFilter:this.lowerContext.filter}});var r={action:this.getUndoRedoAction(e.operation)};switch(e.operation){case"shapeTransform":case"brightness":case"contrast":case"hue":case"saturation":case"opacity":case"blur":case"exposure":case"default":case"chrome":case"cold":case"warm":case"grayscale":case"blackandwhite":case"sepia":case"invert":case"sharpen":case"imageRotate":case"shapeInsert":this.shapeTransform(e.previousObjColl,e.previousPointColl);break;case"freehanddraw":case"freehand-draw":this.updateFreehandDraw(e.previousPointColl,e.previousSelPointColl),t.notify("freehand-draw",{prop:"setCurrentFreehandDrawIndex",value:{value:t.pointColl.length}});break;case"freehanddrawCustomized":this.updateFreehandDrawCustomized(e.previousObjColl,e.previousPointColl);break;case"deleteFreehandDrawing":case"deleteObj":this.updateDelete(e.operation,e.previousObjColl,e.previousPointColl,e.previousSelPointColl);break;case"textAreaCustomization":this.shapeTransform(e.previousObjColl,e.previousPointColl),this.updateTextAreaCustomization(i,e.previousObjColl);break;case"text":this.updateText(e.previousObjColl,!0);break;case"frame":t.transform.zoomFactor=t.transform.defaultZoomFactor=e.previousObj.defaultZoom,t.setProperties({zoomSettings:{zoomFactor:e.previousObj.zoomFactor}},!0),t.notify("transform",{prop:"setPreviousZoomValue",onPropertyChange:!1,value:{previousZoomValue:t.zoomSettings.zoomFactor}}),m(t.frameObj,e.previousObj.frameObj),t.notify("draw",{prop:"render-image",value:{isMouseWheel:!0,isPreventClearRect:null,isFrame:!0}});break;case"imageHFlip":this.imageFlip("horizontal",e.previousObjColl);break;case"imageVFlip":this.imageFlip("vertical",e.previousObjColl);break;case"bgColor":t.notify("draw",{prop:"imageBackgroundColor",onPropertyChange:!1,value:{color:e.previousObj.bgColor}}),t.notify("draw",{prop:"render-image",value:{isMouseWheel:!1}});break;case"updateImage":t.isImageUpdated=!0,t.baseImg.src=e.previousObj.imageSource,setTimeout(function(){t.cropObj.straighten!==0?(t.notify("toolbar",{prop:"performCropTransformClick",value:{shape:"crop-custom"}}),t.noPushUndo=!0,t.crop(),t.noPushUndo=!1):t.notify("draw",{prop:"render-image",value:{isMouseWheel:!1}}),t.isImageUpdated=!1});break;default:this.undoDefault(e,!0),t.notify("filter",{prop:"set-adjustment",value:{operation:e.operation}}),t.notify("filter",{prop:"update-filter",value:{operation:e.operation,filter:e.filter}});break}if(e.operation==="crop"){e.previousObj.currSelectionPoint&&(t.currSelectionPoint=m({},e.previousObj.currSelectionPoint,{},!0),t.currSelectionPoint&&d(t.currSelectionPoint.shape)&&(t.currSelectionPoint=null)),t.updateCropTransformItems(),t.notify("draw",{prop:"select",onPropertyChange:!1,value:{type:"custom",startX:null,startY:null,width:null,height:null}}),t.isCircleCrop&&(t.isCircleCrop=!1,this.tempCurrSelPoint=m({},t.currSelectionPoint,{},!0),t.currSelectionPoint=null);var n=t.cancelCropSelection.isCircleCrop;t.cancelCropSelection.isCircleCrop=!1,t.notify("draw",{prop:"performCancel",value:{isContextualToolbar:null,isUndoRedo:!0}}),t.cancelCropSelection.isCircleCrop=n,t.currObjType.isActiveObj=!1,t.transform.straighten!==0&&t.notify("draw",{prop:"setStraightenActObj",value:{activeObj:null}})}else e.operation==="resize"&&t.cropObj&&t.cropObj.activeObj&&(t.currSelectionPoint=m({},t.cropObj.activeObj,{},!0));this.undoRedoColl[this.undoRedoStep-1]&&this.undoRedoColl[this.undoRedoStep-1].isCircleCrop&&(t.isCircleCrop=!0,t.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}})),this.endUndoRedo(e.operation,!0);var s={action:"undo",actionEventArgs:r};t.triggerEditCompleteEvent(s)}},o.prototype.redo=function(){var t=this.parent;if(this.cancelCropSelection(),t.notify("draw",{prop:"resetFrameZoom",onPropertyChange:!1,value:{isOk:!1}}),!t.disabled&&t.isImageLoaded&&this.undoRedoStep<this.appliedUndoRedoColl.length){this.refreshToolbarActions(),this.undoRedoStep++,t.notify("toolbar",{prop:"enable-disable-btns"}),t.isUndoRedo=!0;var e=this.undoRedoColl[this.undoRedoStep-1];this.undoRedoColl.length===this.undoRedoStep?t.currObjType.isUndoAction=!1:t.currObjType.isUndoAction=!0,e.operation!=="textAreaCustomization"&&(t.textArea.style.display==="block"||t.textArea.style.display==="inline-block")&&(t.textArea.style.display="none"),t.notify("draw",{prop:"setCancelAction",onPropertyChange:!1,value:{bool:!0}}),t.cropObj=m({},e.currentCropObj,{},!0),t.afterCropActions=e.currentObj.afterCropActions,this.lowerContext.filter=e.currentObj.filter,t.element.querySelector(".e-contextual-toolbar-wrapper")&&t.element.querySelector(".e-contextual-toolbar-wrapper").classList.add("e-hide"),t.notify("filter",{prop:"setAdjustmentLevel",onPropertyChange:!1,value:{adjustmentLevel:e.currentObj.adjustmentLevel}}),t.notify("filter",{prop:"setTempAdjVal"}),t.currentFilter=e.currentObj.currentFilter,t.notify("filter",{prop:"setTempFilVal"}),t.canvasFilter=this.lowerContext.filter,t.initialAdjustmentValue=this.lowerContext.filter,t.notify("filter",{prop:"setBevelFilter",onPropertyChange:!1,value:{bevelFilter:this.lowerContext.filter}});var i=void 0,r={action:this.getUndoRedoAction(e.operation)};switch(e.operation){case"shapeTransform":case"brightness":case"contrast":case"hue":case"saturation":case"opacity":case"blur":case"exposure":case"default":case"chrome":case"cold":case"warm":case"grayscale":case"blackandwhite":case"sepia":case"invert":case"sharpen":case"imageRotate":case"shapeInsert":this.shapeTransform(e.currentObjColl,e.currentPointColl);break;case"freehanddraw":case"freehand-draw":this.updateFreehandDraw(e.currentPointColl,e.currentSelPointColl),t.notify("freehand-draw",{prop:"setCurrentFreehandDrawIndex",value:{value:t.pointColl.length}});break;case"freehanddrawCustomized":this.updateFreehandDrawCustomized(e.currentObjColl,e.currentPointColl);break;case"deleteFreehandDrawing":case"deleteObj":this.updateDelete(e.operation,e.currentObjColl,e.currentPointColl,e.currentSelPointColl);break;case"textAreaCustomization":this.shapeTransform(e.currentObjColl,e.currentPointColl),this.updateTextAreaCustomization(i,e.currentObjColl);break;case"text":this.updateText(e.currentObjColl,!1);break;case"frame":m(t.frameObj,e.currentObj.frameObj),t.notify("draw",{prop:"render-image",value:{isMouseWheel:!0,isPreventClearRect:null,isFrame:!0}});break;case"imageHFlip":this.imageFlip("horizontal",e.currentObjColl);break;case"imageVFlip":this.imageFlip("vertical",e.currentObjColl);break;case"bgColor":t.notify("draw",{prop:"imageBackgroundColor",onPropertyChange:!1,value:{color:e.currentObj.bgColor}}),t.notify("draw",{prop:"render-image",value:{isMouseWheel:!1}});break;case"updateImage":t.isImageUpdated=!0,t.baseImg.src=e.currentObj.imageSource,setTimeout(function(){t.cropObj.straighten!==0?(t.notify("toolbar",{prop:"performCropTransformClick",value:{shape:"crop-custom"}}),t.noPushUndo=!0,t.crop(),t.noPushUndo=!1):t.notify("draw",{prop:"render-image",value:{isMouseWheel:!1}}),t.isImageUpdated=!1});break;default:t.objColl=[],t.pointColl=[],t.freehandCounter=0,t.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:[]}}}),t.notify("draw",{prop:"setCurrentObj",onPropertyChange:!1,value:{obj:e.currentObj,isUndoRedo:!0}}),t.img.destLeft=e.currentObj.destPoints.startX,t.img.destTop=e.currentObj.destPoints.startY,i=m({},t.activeObj,{},!0),t.objColl=m([],e.currentObjColl,[],!0),t.pointColl=m([],e.currentPointColl,[],!0),t.freehandCounter=t.pointColl.length,t.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:m([],e.currentSelPointColl,[],!0)}}}),t.transform.straighten=0,this.lowerContext.filter="none",t.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:null}}),this.lowerContext.filter=e.currentObj.filter,t.prevStraightenedDegree=t.transform.straighten,t.activeObj=i,this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.activeObj.activePoint.width!==0&&t.activeObj.activePoint.height!==0&&t.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}}),t.notify("filter",{prop:"set-adjustment",value:{operation:e.operation}}),t.notify("filter",{prop:"update-filter",value:{operation:e.operation}});break}e.operation==="crop"&&e.isCircleCrop&&(t.isCircleCrop=!0,t.currSelectionPoint=m({},this.tempCurrSelPoint,{},!0),this.tempCurrSelPoint=null),e.operation==="crop"&&!e.isCircleCrop&&(t.isCircleCrop=!1),e.operation==="crop"&&e.currentObj.currSelectionPoint&&(t.currSelectionPoint=m({},e.currentObj.currSelectionPoint,{},!0),t.notify("draw",{prop:"setStraightenActObj",value:{activeObj:t.currSelectionPoint}})),t.currSelectionPoint&&d(t.currSelectionPoint.shape)&&(t.currSelectionPoint=null),e.operation==="resize"&&t.cropObj&&t.cropObj.activeObj&&(t.currSelectionPoint=m({},t.cropObj.activeObj,{},!0)),this.endUndoRedo(e.operation,!1);var n={action:"redo",actionEventArgs:r};t.triggerEditCompleteEvent(n)}},o.prototype.imageFlip=function(t,e){var i=this.parent;this.shapeTransform(e,null),i.activeObj=m({},i.objColl[i.objColl.length-1],{},!0);var r=i.activeObj,n=r.shape,s=r.isHorImageFlip,a=r.isVerImageFlip;i.objColl.pop(),n&&n==="image"?(t==="horizontal"?d(s)&&a?(i.activeObj.isHorImageFlip=!0,i.activeObj.isVerImageFlip=null,i.horizontalFlip(this.upperContext,!0)):(d(s)||!s?i.activeObj.isHorImageFlip=!0:i.activeObj.isHorImageFlip=null,i.horizontalFlip(this.upperContext,!0)):t==="vertical"&&(d(a)&&s?(i.activeObj.isVerImageFlip=!0,i.activeObj.isHorImageFlip=null,i.verticalFlip(this.upperContext,!0)):(d(a)||!a?i.activeObj.isVerImageFlip=!0:i.activeObj.isVerImageFlip=null,i.verticalFlip(this.upperContext,!0))),i.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:!0}})):i.notify("draw",{prop:"render-image",value:{isMouseWheel:!0}})},o.prototype.shapeTransform=function(t,e){var i=this.parent;i.objColl=m([],t,[],!0),e&&(i.pointColl=m([],e,[],!0),i.freehandCounter=i.pointColl.length),i.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:null}}),this.lowerContext.clearRect(0,0,i.lowerCanvas.width,i.lowerCanvas.height),this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),i.isUndoRedo=!0,i.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1}),i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1})},o.prototype.updateFreehandDraw=function(t,e){var i=this.parent;i.pointColl=t,i.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:e}}}),i.freehandCounter=i.pointColl.length,i.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:null}}),this.lowerContext.clearRect(0,0,i.lowerCanvas.width,i.lowerCanvas.height),this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),i.isUndoRedo=!0,i.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1})},o.prototype.updateFreehandDrawCustomized=function(t,e){var i=this.parent;i.objColl=m([],t,[],!0),i.pointColl=e,i.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:null}}),this.lowerContext.clearRect(0,0,i.lowerCanvas.width,i.lowerCanvas.height),this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),i.isUndoRedo=!0,i.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1})},o.prototype.updateDelete=function(t,e,i,r){var n=this.parent;t==="deleteFreehandDrawing"?(n.pointColl=i,n.freehandCounter=n.pointColl.length,n.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:r}}}),n.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:null}})):t==="deleteObj"&&(n.objColl=e,n.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:null}})),this.lowerContext.clearRect(0,0,n.lowerCanvas.width,n.lowerCanvas.height),this.upperContext.clearRect(0,0,n.upperCanvas.width,n.upperCanvas.height),n.isUndoRedo=!0,n.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1})},o.prototype.updateTextAreaCustomization=function(t,e){var i=this.parent;i.objColl=m([],e,[],!0),i.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:null}}),this.lowerContext.clearRect(0,0,i.lowerCanvas.width,i.lowerCanvas.height),i.isUndoRedo=!0,i.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1});for(var r=0,n=e.length;r<n;r++)if(this.tempActObj){if(this.tempActObj.currIndex===e[r].currIndex){t=m({},e[r],{},!0),i.objColl.splice(r,1);break}}else{t=m({},e[e.length-1],{},!0),i.objColl.splice(r,1);break}t&&this.updateTextBox(t),(i.textArea.style.display==="block"||i.textArea.style.display==="inline-block")&&i.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}})},o.prototype.updateText=function(t,e){var i=this.parent;if(this.tempActObj&&(i.activeObj=m({},this.tempActObj,{},!0)),t.length===0&&i.objColl.length===1)this.tempActObj=m({},i.objColl[0],{},!0);else for(var r=0,n=i.objColl.length;r<n;r++){if(i.objColl[r]&&d(t[r])){this.tempActObj=m({},i.objColl[r],{},!0);break}if(t[r].currIndex!==i.objColl[r].currIndex){this.tempActObj=m({},i.objColl[r],{},!0);break}}e&&(i.activeObj=m({},this.tempActObj,{},!0)),i.objColl=m([],t,[],!0),i.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:!0}}),this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),this.lowerContext.clearRect(0,0,i.lowerCanvas.width,i.lowerCanvas.height),i.isUndoRedo=!0,i.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1}),i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1})},o.prototype.updateTextBox=function(t){var e=this.parent;this.upperContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),this.lowerContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),e.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1}),e.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1});var i=e.textArea;i.style.display="block",i.style.fontFamily=t.textSettings.fontFamily,i.style.fontSize=t.textSettings.fontSize+"px",i.style.color=t.strokeSettings.strokeColor,i.style.fontWeight=t.textSettings.bold?"bold":"normal",i.style.fontStyle=t.textSettings.italic?"italic":"normal",i.style.border="2px solid "+e.themeColl[e.theme].primaryColor,i.value=t.keyHistory,e.activeObj=m({},t,{},!0),e.notify("shape",{prop:"updateFontStyles",onPropertyChange:!1,value:{isTextBox:null}}),e.textArea.style.width=e.activeObj.activePoint.width+"px"},o.prototype.undoDefault=function(t,e){this.lowerContext.filter=t.previousObj.filter;var i=this.parent;i.objColl=[],i.pointColl=[],i.freehandCounter=0,i.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:[]}}});var r=e?!1:t.isCircleCrop;i.notify("draw",{prop:"setCurrentObj",onPropertyChange:!1,value:{obj:t.previousObj,isUndoRedo:e,isCircleCrop:r}}),i.prevStraightenedDegree=i.transform.straighten,this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),i.img.destLeft=t.previousObj.destPoints.startX,i.img.destTop=t.previousObj.destPoints.startY;var n=m({},i.activeObj,{},!0);i.objColl=m([],t.previousObjColl,[],!0),i.pointColl=m([],t.previousPointColl,[],!0),i.freehandCounter=i.pointColl.length,i.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:m([],t.previousSelPointColl,[],!0)}}}),i.transform.straighten=0,this.lowerContext.filter="none",i.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:null}}),this.lowerContext.filter=t.previousObj.filter,i.activeObj=n,this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),i.activeObj.activePoint.width!==0&&i.activeObj.activePoint.height!==0&&i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}})},o.prototype.endUndoRedo=function(t,e){var i=this.parent,r={type:"none",color:"#fff",size:20,inset:20,offset:20,radius:0,amount:1,border:"solid",gradientColor:""};(i.currSelectionPoint&&i.currSelectionPoint.shape==="crop-circle"||i.isCircleCrop)&&JSON.stringify(i.frameObj)!==JSON.stringify(r)&&i.notify("draw",{prop:"render-image",value:{isMouseWheel:!0}}),i.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),i.isCircleCrop&&(e&&t!=="crop"||!e)&&i.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),i.transform.zoomFactor>0&&i.notify("selection",{prop:"setDragCanvas",value:{bool:!0}}),i.notify("draw",{prop:"setCancelAction",onPropertyChange:!1,value:{bool:!1}}),i.activeObj.shape&&i.activeObj.shape.split("-")[0]==="crop"?i.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:!0,isCropping:!0,isZooming:null,cType:null}}):i.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1}),i.notify("toolbar",{prop:"enable-disable-btns"}),document.getElementById(i.element.id+"_quickAccessToolbarArea")&&(document.getElementById(i.element.id+"_quickAccessToolbarArea").style.display="none"),i.notify("toolbar",{prop:"enable-disable-btns"}),i.transform.degree!==0&&i.notify("transform",{prop:"drawPannedImage",onPropertyChange:!1,value:{xDiff:0,yDiff:0}}),i.notify("filter",{prop:"setAdjustmentValue",onPropertyChange:!1,value:{adjustmentValue:this.lowerContext.filter}}),i.currObjType.isCustomCrop=!1},o.prototype.updateUrc=function(t,e,i,r,n,s,a,l,h,c){var u=this.parent;if(!(u.isResize||this.isPreventing)){var p={isInitialLoaded:!1};if(u.currObjType.isUndoAction&&this.refreshUrc(!0),u.notify("draw",{prop:"isInitialLoaded",onPropertyChange:!1,value:{object:p}}),!p.isInitialLoaded&&u.allowUndoRedo){var f={currObj:{}};u.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:f}});var g=f.currObj;g.objColl=m([],u.objColl,[],!0),g.pointColl=m([],u.pointColl,[],!0),g.afterCropActions=m([],u.afterCropActions,[],!0);var v={selPointColl:null};if(u.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:v}}),g.selPointColl=m([],v.selPointColl,[],!0),t==="crop")g.currSelectionPoint=m({},u.currSelectionPoint,{},!0);else if(t==="frame")e.destPoints={startX:u.frameDestPoints.destLeft,startY:u.frameDestPoints.destTop,width:u.frameDestPoints.destWidth,height:u.frameDestPoints.destHeight},g.destPoints={startX:u.frameDestPoints.destLeft,startY:u.frameDestPoints.destTop,width:u.frameDestPoints.destWidth,height:u.frameDestPoints.destHeight},d(u.tempFrameZoomLevel)||(e.defaultZoom=g.defaultZoom=u.tempFrameZoomLevel);else if((t==="imageHFlip"||t==="imageVFlip")&&this.appliedUndoRedoColl.length>0){var y=i[i.length-1].currIndex;if(i=this.appliedUndoRedoColl[this.appliedUndoRedoColl.length-1].currentObjColl,y){for(var C=0,b=i.length;C<b;C++)if(i[C].currIndex===y){var M=m({},i[C],{},!0);i.splice(C,1),i.push(M);break}}}this.undoRedoColl.push({operation:t,previousObj:e,currentObj:g,previousObjColl:i,currentObjColl:g.objColl,previousPointColl:r,currentPointColl:g.pointColl,previousSelPointColl:n,currentSelPointColl:g.selPointColl,previousCropObj:s,currentCropObj:m({},u.cropObj,{},!0),previousText:a,currentText:l,filter:h,isCircleCrop:c}),u.notify("toolbar",{prop:"enable-disable-btns",onPropertyChange:!1})}}},o.prototype.updateUrObj=function(t,e){var i=this.parent;if(i.allowUndoRedo){i.currObjType.isUndoAction&&!i.isShapeDrawing&&this.refreshUrc(!0),d(i.activeObj.imageRatio)&&i.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),i.objColl.push(i.activeObj);var r=m({},i.cropObj,{},!0),n={currObj:{}};i.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:n}});var s=n.currObj;s.objColl=m([],i.objColl,[],!0),s.pointColl=m([],i.pointColl,[],!0),s.afterCropActions=m([],i.afterCropActions,[],!0);var a={selPointColl:null};i.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:a}}),s.selPointColl=m([],a.selPointColl,[],!0);var l=e||"shapeTransform";this.undoRedoColl.push({operation:l,previousObj:s,currentObj:s,previousObjColl:t,currentObjColl:s.objColl,previousPointColl:s.pointColl,currentPointColl:s.pointColl,previousSelPointColl:s.selPointColl,currentSelPointColl:s.selPointColl,previousCropObj:r,currentCropObj:r}),i.notify("selection",{prop:"redrawShape",onPropertyChange:!1,value:{obj:i.objColl[i.objColl.length-1]}})}},o.prototype.updateUndoRedo=function(t){var e=this.parent,i=m({},e.cropObj,{},!0),r={currObj:{}};e.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:r}});var n=r.currObj;n.objColl=m([],e.objColl,[],!0),n.pointColl=m([],e.pointColl,[],!0),n.afterCropActions=m([],e.afterCropActions,[],!0);var s={selPointColl:null};e.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:s}}),n.selPointColl=m([],s.selPointColl,[],!0),d(e.activeObj.imageRatio)&&e.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),e.objColl.push(e.activeObj);var a=t||"shapeTransform";this.updateUrc(a,n,n.objColl,n.pointColl,n.selPointColl,i),e.objColl.pop(),e.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:null}}),e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),e.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"shapes",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}),e.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}})},o.prototype.getZeroZoomObjPointValue=function(t,e){var i=this.parent;this.updateObjColl();var r={currObj:{}};i.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:r}});var n=r.currObj;n.objColl=m([],i.objColl,[],!0),n.pointColl=m([],i.pointColl,[],!0),n.afterCropActions=m([],i.afterCropActions,[],!0);var s={selPointColl:null};i.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:s}}),n.selPointColl=m([],s.selPointColl,[],!0);var a={cropDimension:null};i.notify("transform",{prop:"getCropDimension",onPropertyChange:!1,value:{obj:a}});var l=m([],i.objColl,[],!0),h=m([],i.pointColl,[],!0),c={arrowDimension:null};this.parent.notify("draw",{prop:"getArrowDimension",onPropertyChange:!1,value:{obj:c}});var u=m({},c.arrowDimension,{},!0);if(i.transform.zoomFactor>0&&(t.length>0||e.length>0)){if(t.length>0)for(var p=0;p<t.length;p++)t[p].currIndex||(t[p].currIndex="shape_"+(p+1));i.objColl=t,i.pointColl=e;var f=i.isUndoRedo,g=i.isCropTab;if(i.transform.zoomFactor!==0){i.isUndoRedo=!0,i.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:!0}}),i.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1}),i.isCropTab=!0;var v=m({},i.zoomSettings,null,!0);i.transform.zoomFactor>0?i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-i.transform.zoomFactor,zoomPoint:null,isResize:null}}):i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:Math.abs(i.transform.zoomFactor),zoomPoint:null,isResize:null}}),i.zoomSettings=v,i.isCropTab=g,i.isUndoRedo=f,l=m([],i.objColl,[],!0),h=m([],i.pointColl,[],!0),i.objColl=[],i.pointColl=[],i.freehandCounter=0,i.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:[]}}}),i.notify("transform",{prop:"setCropDimension",onPropertyChange:!1,value:{width:a.cropDimension.width,height:a.cropDimension.height}});var y={width:a.cropDimension.width,height:a.cropDimension.height};y.width+=y.width*n.defaultZoom,y.height+=y.height*n.defaultZoom,i.notify("draw",{prop:"setZoomCropWidth",value:{width:y.width,height:y.height}}),i.notify("draw",{prop:"setCurrentObj",onPropertyChange:!1,value:{obj:n}}),i.img.destLeft=n.destPoints.startX,i.img.destTop=n.destPoints.startY,i.panPoint.totalPannedPoint=n.totalPannedPoint,i.panPoint.totalPannedClientPoint=n.totalPannedClientPoint,i.panPoint.totalPannedInternalPoint=n.totalPannedInternalPoint,i.objColl=m([],n.objColl,[],!0),i.pointColl=m([],n.pointColl,[],!0),i.freehandCounter=i.pointColl.length,i.notify("draw",{prop:"setArrowDimension",onPropertyChange:!1,value:{arrowDimension:u}}),i.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:m([],n.selPointColl,[],!0)}}}),this.lowerContext.filter="none",i.transform.straighten=0,this.applyImgTranform(),i.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"iterate",pen:"iterate",isPreventApply:null}}),i.notify("freehand-draw",{prop:"updateFHDCurPts",onPropertyChange:!1}),this.lowerContext.filter=n.filter,i.transform.degree!==0&&i.notify("transform",{prop:"drawPannedImage",onPropertyChange:!1,value:{xDiff:0,yDiff:0}}),i.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),(i.isCircleCrop||i.currSelectionPoint&&i.currSelectionPoint.shape==="crop-circle")&&i.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}})}}return{obj:l,point:h}},o.prototype.updateObjColl=function(){for(var t=this.parent,e=0;e<t.objColl.length;e++){var i=t.objColl[e],r=!1;if((i.shape==="line"||i.shape==="arrow")&&(i.activePoint.width<0&&(i.activePoint.width=Math.abs(i.activePoint.width),r=!0),i.activePoint.height<0&&(i.activePoint.height=Math.abs(i.activePoint.height),r=!0),r)){var n=m({},t.activeObj,{},!0);t.activeObj=i,t.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),i=t.activeObj,t.activeObj=n}}},o.prototype.applyImgTranform=function(){for(var t=this.parent,e=m({},t.activeObj,{},!0),i=0,r=t.objColl.length;i<r;i++)if(t.objColl[i].shape==="image"){t.activeObj=m({},t.objColl[i],{},!0);var n=t.objColl[i].imageCanvas.getContext("2d");t.notify("selection",{prop:"applyTransformToImg",onPropertyChange:!1,value:{ctx:n}}),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.notify("selection",{prop:"setImageClarity",onPropertyChange:!1,value:{bool:!0}})}t.activeObj=e},o.prototype.updateUndoRedoStack=function(t){var e=this.parent;if(e.activeObj.currIndex&&e.activeObj.activePoint.width!==0||e.activeObj.activePoint.height!==0||e.activeObj.pointColl&&e.activeObj.pointColl.length>0||t){var i=e.textArea.style.display!=="none",r=e.noPushUndo;if(e.noPushUndo=!1,e.isUndoRedoStack=!0,t){var n=e.togglePen,s={freehandDrawSelectedId:null};e.notify("freehand-draw",{prop:"getFreehandDrawSelectedId",onPropertyChange:!1,value:{obj:s}}),e.okBtn(),e.noPushUndo=r,s.freehandDrawSelectedId?(e.noRedact=!0,e.selectShape(s.freehandDrawSelectedId)):e.freeHandDraw(!0),e.togglePen=n}else if(e.activeObj.currIndex){var a=e.activeObj.currIndex;e.okBtn(),e.noPushUndo=r,e.noRedact=!0,e.selectShape(a),e.drawingShape&&e.notify("selection",{prop:"setCurrentDrawingShape",onPropertyChange:!1,value:{value:e.drawingShape.toLowerCase()}}),i&&e.enableTextEditing()}e.isUndoRedoStack=!1}},o}(),ns=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(t,e)};return function(t,e){o(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),ce=function(o,t,e,i){var r=arguments.length,n=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,e,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,e,n):s(t,e))||n);return r>3&&n&&Object.defineProperty(t,e,n),n},JD=function(o){ns(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return ce([w(null)],t.prototype,"allowedExtensions",void 0),ce([w(null)],t.prototype,"minFileSize",void 0),ce([w(null)],t.prototype,"maxFileSize",void 0),t}(Ue),KD=function(o){ns(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return ce([w(null)],t.prototype,"brightness",void 0),ce([w(null)],t.prototype,"contrast",void 0),ce([w(null)],t.prototype,"hue",void 0),ce([w(null)],t.prototype,"saturation",void 0),ce([w(null)],t.prototype,"exposure",void 0),ce([w(null)],t.prototype,"opacity",void 0),ce([w(null)],t.prototype,"blur",void 0),t}(Ue),ex=function(o){ns(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return ce([w(null)],t.prototype,"zoomTrigger",void 0),ce([w(1)],t.prototype,"minZoomFactor",void 0),ce([w(10)],t.prototype,"maxZoomFactor",void 0),ce([w(1)],t.prototype,"zoomFactor",void 0),ce([w(null)],t.prototype,"zoomPoint",void 0),t}(Ue),tx=function(o){ns(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return ce([w(!0)],t.prototype,"showCircle",void 0),ce([w(null)],t.prototype,"strokeColor",void 0),ce([w(null)],t.prototype,"fillColor",void 0),t}(Ue),ix=function(o){ns(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return ce([w("Arial")],t.prototype,"default",void 0),ce([w(null)],t.prototype,"items",void 0),t}(Ue),oy=function(o){ns(t,o);function t(i,r){var n=o.call(this,i)||this;return n.isImageLoaded=!1,n.activeObj={activePoint:{startX:0,startY:0,endX:0,endY:0,width:0,height:0},flipObjColl:[],triangle:[],triangleRatio:[],rotatedAngle:0,opacity:1,order:null},n.currObjType={shape:"",isDragging:!1,isActiveObj:!1,isText:!1,isInitialText:!1,isLine:!1,isInitialLine:!1,isCustomCrop:!1,isZoomed:!1,isUndoZoom:!1,isUndoAction:!1,isFiltered:!1,isSave:!1,isResize:!1,isRedact:!1},n.objColl=[],n.pointColl={},n.freehandCounter=0,n.points=[],n.togglePen=!1,n.togglePan=!1,n.img={destLeft:0,destTop:0,destWidth:0,destHeight:0,srcLeft:0,srcTop:0,srcWidth:0,srcHeight:0},n.rotateFlipColl=[],n.cropObj={cropZoom:0,defaultZoom:0,totalPannedPoint:{x:0,y:0},totalPannedClientPoint:{x:0,y:0},totalPannedInternalPoint:{x:0,y:0},tempFlipPanPoint:{x:0,y:0},activeObj:{},rotateFlipColl:[],degree:0,currFlipState:"",straighten:0,destPoints:{startX:0,startY:0,width:0,height:0},srcPoints:{startX:0,startY:0,width:0,height:0},filter:"",isBrightAdjust:!1,zoomFactor:0,previousZoomValue:0,aspectWidth:null,aspectHeight:null,frame:"none",straightenZoom:0,adjustmentLevel:{brightness:0,contrast:0,hue:0,opacity:100,saturation:0,blur:0,exposure:0,transparency:100,sharpen:!1,bw:!1},currentFilter:""},n.afterCropActions=[],n.transform={degree:0,currFlipState:"",zoomFactor:0,cropZoomFactor:null,defaultZoomFactor:0,straighten:0},n.panPoint={currentPannedPoint:{x:0,y:0},totalPannedPoint:{x:0,y:0},totalPannedInternalPoint:{x:0,y:0},totalPannedClientPoint:{x:0,y:0}},n.isUndoRedo=!1,n.isCropTab=!1,n.isCircleCrop=!1,n.fontSizeColl=[],n.initialAdjustmentValue="",n.currentFilter="",n.canvasFilter="brightness(1) contrast(100%) hue-rotate(0deg) saturate(100%) opacity(1) blur(0px) sepia(0%) grayscale(0%) invert(0%)",n.toolbarHeight=0,n.isPublicMethod=!1,n.isCropToolbar=!1,n.cursor="default",n.resizeSrc={startX:n.img.srcLeft,startY:n.img.srcTop,width:n.img.srcWidth,height:n.img.srcHeight},n.isResize=!1,n.isAspectRatio=!1,n.frameObj={type:"none",color:"#fff",size:20,inset:20,offset:20,radius:0,amount:1,border:"solid",gradientColor:""},n.tempFrameObj={type:"none",color:"#fff",size:20,inset:20,offset:20,radius:0,amount:1,border:"solid",gradientColor:""},n.allowDownScale=!0,n.gradientColor="",n.size=20,n.inset=0,n.offset=0,n.borderRadius=0,n.lineCount=0,n.prevStraightenedDegree=0,n.tempStraighten=0,n.isStraightening=!1,n.isFinetuning=!1,n.isZoomBtnClick=!1,n.isFinetuneBtnClick=!1,n.isFilterCanvasClick=!1,n.isFrameBtnClick=!1,n.isChangesSaved=!1,n.isShapeDrawing=!1,n.noPushUndo=!1,n.isUndoRedoStack=!1,n.shapeColl=[],n.isKBDNavigation=!1,n.isMaskImage=!1,n.tempObjColl=[],n.tempPointColl=[],n.tempShapeColl=[],n.isImageUpdated=!1,n.noRedact=!1,n.tempRedactBlur=50,n.tempRedactPixel=40,n.tempToolbarHeight=0,n.tempToolbar=[],e.Inject(UD,VD,qD,ZD,QD,rx),e.Inject($D),e.Inject(WD),e.Inject(GD),e.Inject(XD),r&&n.appendTo(r),n}e=t,t.prototype.requiredModules=function(){var i=[];return i.push({member:"crop",args:[this]}),i.push({member:"draw",args:[this]}),i.push({member:"selection",args:[this]}),i.push({member:"transform",args:[this]}),i.push({member:"export",args:[this]}),i.push({member:"toolbar-module",args:[this]}),i.push({member:"undo-redo",args:[this]}),i.push({member:"filter",args:[this]}),i.push({member:"shape",args:[this]}),i.push({member:"freehand-draw",args:[this]}),i},t.prototype.preRender=function(){this.element.id=this.element.id||Je("ej2-image-editor"),this.isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),D.isDevice&&this.element.classList.add("e-device"),this.initializeThemeColl()},t.prototype.render=function(){if(this.isAngular){var i=this.element,r=i.cloneNode(!0);i.parentNode.replaceChild(r,i),this.element=r,ve("ej2_instances",[this],this.element)}this.initialize()},t.prototype.getModuleName=function(){return"image-editor"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.onPropertyChanged=function(i,r){for(var n,s=0,a=Object.keys(i);s<a.length;s++){var l=a[s];switch(l){case"cssClass":r.cssClass&&ee([this.element],r.cssClass.replace(/\s+/g," ").trim().split(" ")),i.cssClass&&Z([this.element],i.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"disabled":i.disabled?(this.element.classList.add("e-disabled"),this.unwireEvent()):(this.element.classList.remove("e-disabled"),this.wireEvent());break;case"height":this.element.style.height=i.height,this.update();break;case"width":this.element.style.width=i.width,this.update();break;case"theme":i.theme&&(this.theme&&this.theme!==""?this.theme=this.toPascalCase(this.theme):this.theme="Bootstrap5",this.upperContext.strokeStyle=this.themeColl[this.theme].primaryColor,this.upperContext.fillStyle=this.themeColl[this.theme].secondaryColor,this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}));break;case"finetuneSettings":i.finetuneSettings&&(this.finetuneSettings=i.finetuneSettings,this.notify("filter",{prop:"update-finetunes"}));break;case"locale":i.locale&&(this.notify("toolbar",{prop:"setLocale",onPropertyChange:!1,value:{locale:i.locale}}),this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}));break;case"allowUndoRedo":i.allowUndoRedo?this.allowUndoRedo=!0:this.allowUndoRedo=!1,this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}});break;case"showQuickAccessToolbar":i.showQuickAccessToolbar?(this.showQuickAccessToolbar=!0,this.notify("toolbar",{prop:"create-qa-toolbar",onPropertyChange:!1}),n={freehandSelectedIndex:null},this.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:n}}),this.activeObj.shape?this.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}}):n.freehandSelectedIndex&&this.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:!0}})):(this.showQuickAccessToolbar=!1,this.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1}));break;case"zoomSettings":i.zoomSettings&&(this.zoomSettings.zoomTrigger=i.zoomSettings.zoomTrigger),d(this.zoomSettings.zoomTrigger)?(this.zoomSettings.zoomTrigger=et.MouseWheel|et.Pinch|et.Toolbar|et.Commands,this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}})):(i.zoomSettings.zoomTrigger&et.Toolbar)===et.Toolbar&&this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}});break;case"selectionSettings":i.selectionSettings&&(this.selectionSettings=i.selectionSettings,this.activeObj.shape&&(this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:this.activeObj}})));break;case"toolbar":i.toolbar&&(this.toolbar=i.toolbar,this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}));break;case"toolbarTemplate":i.toolbarTemplate&&(this.notify("toolbar",{prop:"destroy-bottom-toolbar",onPropertyChange:!1}),this.notify("toolbar",{prop:"destroy-top-toolbar",onPropertyChange:!1}),this.element.appendChild(this.createElement("div",{id:this.element.id+"_toolbarArea",className:"e-toolbar-area"})),this.toolbarTemplateFn());break;case"quickAccessToolbarTemplate":i.quickAccessToolbarTemplate&&(this.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1}),this.quickAccessToolbarTemplateFn());break;case"uploadSettings":i.uploadSettings?(this.uploadSettings=i.uploadSettings,this.uploadSettings.allowedExtensions?this.notify("draw",{prop:"setNullExtension",value:{extension:!1}}):(this.uploadSettings.allowedExtensions=".jpg, .jpeg, .png, .svg, .webp",this.notify("draw",{prop:"setNullExtension",value:{extension:!0}})),this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}})):this.notify("draw",{prop:"setNullExtension",value:{extension:!0}}),this.updateDropInfoContent(this.element.querySelector(".e-ie-drop-info"));break}}},t.prototype.destroy=function(){var i=[];this.element.removeAttribute("tabindex");var r=this.element.querySelector("#"+this.element.id+"_saveDialog");r&&r.style.display==="block"&&$(document.getElementById(this.element.id+"_saveDialog"),"dialog").destroy(),this.cssClass&&(i=i.concat(this.cssClass.replace(/\s+/g," ").trim().split(" "))),ee([this.element],i),this.element.getAttribute("class")||this.element.removeAttribute("class"),this.unwireEvent(),this.notify("toolbar",{prop:"destroySubComponents",onPropertyChange:!1}),this.notify("destroyed",null),o.prototype.destroy.call(this),this.element.innerHTML=""},t.prototype.initialize=function(){if(this.toolbarTemplate?(this.element.appendChild(this.createElement("div",{id:this.element.id+"_toolbarArea",className:"e-toolbar-area"})),this.toolbarTemplateFn()):(this.notify("toolbar",{prop:"create-toolbar",onPropertyChange:!1}),this.notify("toolbar",{prop:"create-contextual-toolbar",onPropertyChange:!1})),this.uploadSettings.allowedExtensions?this.notify("draw",{prop:"setNullExtension",value:{extension:!1}}):this.setProperties({uploadSettings:{allowedExtensions:".jpg, .jpeg, .png, .svg, .webp"}},!0),this.createCanvas(),this.element.offsetWidth>359&&this.element.querySelector(".e-ie-min-drop-content")&&this.element.querySelector(".e-ie-drop-content")&&(this.element.querySelector(".e-ie-min-drop-content").style.display="none",this.element.querySelector(".e-ie-drop-content").style.display="block"),this.createDropUploader(),this.showQuickAccessToolbar){var i=document.querySelector("#"+this.element.id+"_canvasWrapper");i.appendChild(this.createElement("div",{id:this.element.id+"_quickAccessToolbarArea",className:"e-quick-access-toolbar-area"}));var r=document.getElementById(this.element.id+"_quickAccessToolbarArea");r.style.position="absolute",r.style.display="none",this.activeObj&&(r.style.left=this.activeObj.activePoint.startX+"px",r.style.top=this.activeObj.activePoint.startY+"px"),r.style.width="100%"}this.quickAccessToolbarTemplate?this.quickAccessToolbarTemplateFn():this.notify("toolbar",{prop:"create-qa-toolbar",onPropertyChange:!1}),this.wireEvent(),this.lowerContext=this.lowerCanvas.getContext("2d"),this.upperContext=this.upperCanvas.getContext("2d"),this.inMemoryContext=this.inMemoryCanvas.getContext("2d"),this.lowerContext.filter=this.getDefaultFilter(),this.notify("filter",{prop:"setAdjustmentValue",onPropertyChange:!1,value:{adjustmentValue:this.lowerContext.filter}}),this.canvasFilter=this.lowerContext.filter,this.notify("toolbar",{prop:"setInitialAdjustmentValue",onPropertyChange:!1,value:{value:this.lowerContext.filter}}),this.cssClass&&Z([this.element],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.element&&Or({target:this.element}),this.initializeZoomSettings(),this.imgSrc&&this.open(this.imgSrc)},t.prototype.createDropUploader=function(){var i=this,r=this,n=new hn({dropArea:this.element.getElementsByClassName("e-canvas-wrapper")[0],allowedExtensions:this.uploadSettings.allowedExtensions,multiple:!1,selected:function(s){if(s.event.type==="change"||s.event.type==="drop"){var a=s.filesData[0].type,l="unsupported",h=i.getExtensionArray(),c=h.indexOf(a)>-1||a==="jpeg"&&(r.uploadSettings.allowedExtensions.indexOf("jpg")>-1||r.uploadSettings.allowedExtensions.indexOf("jpeg")>-1),u=s.filesData[0].size,p=r.uploadSettings.minFileSize&&u<r.uploadSettings.minFileSize||r.uploadSettings.maxFileSize&&u>r.uploadSettings.maxFileSize;(s.event.type==="change"||s.event.type==="drop"&&s.event.dataTransfer.files.length===1)&&c&&!p?i.notify("draw",{prop:"fileSelect",value:{inputElement:i.element.querySelector("#"+i.element.id+"_dropfileUpload"),args:s}}):(s.event.type==="drop"&&s.event.dataTransfer.files.length>1&&(l="multi-select-image"),i.showDialogPopup(l,!c))}}});n.appendTo("#"+this.element.id+"_dropfileUpload")},t.prototype.dlgCloseBtnClick=function(){$(document.getElementById(this.element.id+"_dialog"),"dialog").destroy()},t.prototype.showDialogPopup=function(i,r){var n="";this.element.querySelector("#"+this.element.id+"_dialog").style.display="block";var s,a={key:"DlgOK"};if(this.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:a}}),i==="multi-select-image"){s={key:"ImageErrorDialogHeader"},this.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:s}});var l={key:"ImageErrorDialogContent"};this.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:l}}),n="<span>"+l.value+"</span>"}else{s={key:"AlertDialogHeader"},this.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:s}});var l={key:"AlertDialogContent"};this.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:l}});var h={key:"SupportText"};this.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:h}});var c=this.getExtensionString(),u={key:"MinMaxSizeAlert"};this.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:u}});var p={key:"And"};this.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:p}});var f=void 0;this.uploadSettings.minFileSize&&this.uploadSettings.maxFileSize?f=" "+u.value+" <b> "+this.formatSizeUnits(this.uploadSettings.minFileSize)+" </b> "+p.value+" <b> "+this.formatSizeUnits(this.uploadSettings.maxFileSize)+" </b> ":this.uploadSettings.minFileSize?(u.key="MinSizeAlert",this.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:u}}),f=" "+u.value+" <b> "+this.formatSizeUnits(this.uploadSettings.minFileSize)+" </b> "):this.uploadSettings.maxFileSize&&(u.key="MaxSizeAlert",this.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:u}}),f=" "+u.value+" <b> "+this.formatSizeUnits(this.uploadSettings.maxFileSize)+" </b> "),r?n="<span>"+l.value+" "+h.value+"<b>"+c+"</b></span>":f&&(n="<span>"+l.value+" "+h.value+f+"</span>")}var g=new rn({header:s.value,closeOnEscape:!0,content:n,target:document.getElementById("target"),width:D.isDevice?"285px":"400px",isModal:!0,animationSettings:{effect:"Zoom"},close:this.dlgCloseBtnClick.bind(this),buttons:[{click:this.dlgCloseBtnClick.bind(this),buttonModel:{content:a.value}}]});g.appendTo("#"+this.element.id+"_dialog")},t.prototype.formatSizeUnits=function(i){var r="";return i>=1073741824?r=(i/1073741824).toFixed(2)+" GB":i>=1048576?r=(i/1048576).toFixed(2)+" MB":i>=1024?r=(i/1024).toFixed(2)+" KB":i>1?r=i+" bytes":i===1?r=i+" byte":r="0 bytes",r},t.prototype.getExtensionArray=function(){for(var i=["jpeg","jpg","png","svg","webp"],r=this.uploadSettings.allowedExtensions.split(","),n=[],s=0,a=r;s<a.length;s++)for(var l=a[s],h=l.trim(),c=0,u=i;c<u.length;c++){var p=u[c];if(h.indexOf(p)!==-1){n.push(p);break}}return n},t.prototype.getExtensionString=function(){var i={key:"And"};this.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:i}});for(var r=this.getExtensionArray(),n="",s=0;s<r.length;s++){switch(s===r.length-1&&r.length>1&&!((r[s]==="jpeg"||r[s]==="jpg")&&n.indexOf("JPG")>-1)&&((r.length===2||r.length===3&&r.indexOf("jpeg")!==-1&&r.indexOf("jpg")!==-1)&&(n=n.replace(/,\s*$/,"")),n+=" "+i.value),r[s]){case"jpeg":case"jpg":n.indexOf("JPG")===-1&&(n+=" JPG,");break;case"png":n+=" PNG,";break;case"svg":n+=" SVG,";break;case"webp":n+=" WebP,";break}s===r.length-1&&(n=n.slice(0,-1))}return n},t.prototype.wireEvent=function(){I.add(document,"keydown",this.keyDownEventHandler,this),I.add(document,"keypress",this.keyUpEventHandler,this),I.add(this.upperCanvas,"mousedown",this.mouseDownEventHandler,this),I.add(this.upperCanvas,"mousemove",this.mouseMoveEventHandler,this),I.add(this.upperCanvas,"mouseup",this.mouseUpEventHandler,this),I.add(document,"mouseup",this.mouseUpEventHandler,this),I.add(this.lowerCanvas,"mousedown",this.canvasMouseDownHandler,this),I.add(this.lowerCanvas,"mousemove",this.canvasMouseMoveHandler,this),I.add(this.lowerCanvas,"mouseup",this.canvasMouseUpHandler,this),I.add(this.upperCanvas,"touchstart",this.touchStartHandler,this),I.add(this.lowerCanvas,"touchstart",this.touchStartHandler,this),I.add(this.lowerCanvas,"mousewheel DOMMouseScroll",this.handleScroll,this),I.add(this.upperCanvas,"mousewheel DOMMouseScroll",this.handleScroll,this),window.addEventListener("resize",this.windowResizeHandler.bind(this)),!D.isIos&&D.info.name!=="safari"&&screen.orientation.addEventListener("change",this.screenOrientation.bind(this)),this.notify("shape",{prop:"wireEvent",onPropertyChange:!1})},t.prototype.unwireEvent=function(){I.remove(document,"keydown",this.keyDownEventHandler),I.remove(document,"keypress",this.keyUpEventHandler),I.remove(this.upperCanvas,"mousedown",this.mouseDownEventHandler),I.remove(this.upperCanvas,"mousemove",this.mouseMoveEventHandler),I.remove(this.upperCanvas,"mouseup",this.mouseUpEventHandler),I.remove(document,"mouseup",this.mouseUpEventHandler),I.remove(this.lowerCanvas,"mousedown",this.canvasMouseDownHandler),I.remove(this.lowerCanvas,"mousemove",this.canvasMouseMoveHandler),I.remove(this.lowerCanvas,"mouseup",this.canvasMouseUpHandler),I.remove(this.upperCanvas,"touchstart",this.touchStartHandler),I.remove(this.lowerCanvas,"touchstart",this.touchStartHandler),I.remove(this.lowerCanvas,"mousewheel DOMMouseScroll",this.handleScroll),I.remove(this.upperCanvas,"mousewheel DOMMouseScroll",this.handleScroll),window.removeEventListener("resize",this.windowResizeHandler.bind(this)),!D.isIos&&D.info.name!=="safari"&&screen.orientation.removeEventListener("change",this.screenOrientation.bind(this)),this.notify("shape",{prop:"unWireEvent",onPropertyChange:!1}),this.notify("selection",{prop:"unWireEvent",onPropertyChange:!1})},t.prototype.createCanvas=function(){this.element.style.boxSizing="border-box";var i={toolbarHeight:0};this.notify("toolbar",{prop:"getToolbarHeight",value:{obj:i}});var r=i.toolbarHeight;this.toolbar&&this.toolbar.length>0&&this.toolbar.indexOf("Open")===-1&&(r=0),this.element.style.width=this.width,this.element.style.height=this.height;var n=this.createElement("div",{id:this.element.id+"_canvasWrapper",className:"e-canvas-wrapper"});n.style.cssText="height: "+(this.element.offsetHeight-r-2)+"px; width: "+(this.element.offsetWidth-2)+"px; position: relative; overflow: hidden; margin: 0 auto;";var s=this.element.appendChild(n),a={key:"DragText"};this.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:a}});var l={key:"DropText"};this.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:l}});var h={key:"BrowseText"};this.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:h}});var c=this.createElement("div",{id:this.element.id+"_dropArea",className:"e-ie-drop-area"});c.style.position="relative";var u=this.createElement("span",{className:"e-ie-drop-icon e-icons e-image"});u.style.position="absolute";var p=this.createElement("span",{className:"e-ie-drop-content"});p.style.cssText="position: absolute; display: none;",p.textContent=a.value+" ";var f=this.createElement("span",{className:"e-ie-min-drop-content"});f.style.position="absolute",f.textContent=l.value+" ";var g=this.createElement("a",{id:this.element.id+"_dropBrowse",className:"e-ie-drop-browse"});g.textContent=h.value;var v=this.createElement("a",{id:this.element.id+"_dropBrowse",className:"e-ie-drop-browse"});v.textContent=h.value,p.appendChild(g),f.appendChild(v),g.href="",v.href="";var y=this.createElement("span",{className:"e-ie-drop-info",attrs:{position:"absolute"}});this.updateDropInfoContent(y);var C=c.appendChild(this.createElement("input",{id:this.element.id+"_dropfileUpload",className:"e-fileUpload e-image-upload"}));C.setAttribute("type","file"),C.setAttribute("accept","image/*"),c.appendChild(u),c.appendChild(p),c.appendChild(f),c.appendChild(y),s.appendChild(c),this.lowerCanvas=s.appendChild(this.createElement("canvas",{id:this.element.id+"_lowerCanvas",attrs:{name:"canvasImage"}})),this.maskCanvas=s.appendChild(this.createElement("canvas",{id:this.element.id+"_maskCanvas",attrs:{name:"canvasImage"}})),this.upperCanvas=s.appendChild(this.createElement("canvas",{id:this.element.id+"_upperCanvas",attrs:{name:"canvasImage"}})),this.inMemoryCanvas=this.createElement("canvas",{id:this.element.id+"_inMemoryCanvas",attrs:{name:"canvasImage"}}),this.baseImgCanvas=this.createElement("canvas",{id:this.element.id+"_baseImgCanvas",attrs:{name:"canvasImage"}}),this.textArea=s.appendChild(this.createElement("textarea",{id:this.element.id+"_textArea",className:"e-textarea",attrs:{name:"textArea"}}));var b=this.element.appendChild(this.createElement("div",{id:this.element.id+"_dialog",className:"e-dialog"}));b.style.display="none";var M=this.element.appendChild(this.createElement("input",{id:this.element.id+"_fileUpload",className:"e-fileUpload"}));M.setAttribute("type","file"),M.setAttribute("accept","image/*"),M.style.display="none",this.textArea.setAttribute("spellcheck","false"),this.textArea.style.lineHeight="normal",this.lowerCanvas.style.width=this.upperCanvas.style.width=this.maskCanvas.style.width=this.inMemoryCanvas.style.width="100%",this.lowerCanvas.style.height=this.upperCanvas.style.height=this.maskCanvas.style.height=this.inMemoryCanvas.style.height="100%",this.upperCanvas.style.position=this.lowerCanvas.style.position=this.maskCanvas.style.position=this.textArea.style.position="absolute",this.textArea.style.backgroundColor="transparent",this.textArea.style.display="none",this.maskCanvas.style.display=this.textArea.style.resize="none",this.lowerContext=this.lowerCanvas.getContext("2d"),this.baseImg=this.createElement("img",{id:this.element.id+"_orgImg",attrs:{name:"Image",crossorigin:"anonymous"}}),this.upperCanvas.style.cursor=this.cursor="default",this.upperCanvas.style.display="block",this.upperContext=this.upperCanvas.getContext("2d"),g.addEventListener("click",function(S){return S.preventDefault(),C.click(),!1}),v.addEventListener("click",function(S){return S.preventDefault(),C.click(),!1})},t.prototype.touchStartHandler=function(i){this.notify("selection",{prop:"touchStartHandler",onPropertyChange:!1,value:{e:i}})},t.prototype.mouseDownEventHandler=function(i){i.target.className!=="e-ie-drop-browse"&&this.notify("selection",{prop:"mouseDownEventHandler",onPropertyChange:!1,value:{e:i}})},t.prototype.mouseMoveEventHandler=function(i){this.notify("selection",{prop:"mouseMoveEventHandler",onPropertyChange:!1,value:{e:i}})},t.prototype.mouseUpEventHandler=function(i){i.target.className!=="e-ie-drop-browse"&&this.notify("selection",{prop:"mouseUpEventHandler",onPropertyChange:!1,value:{e:i}})},t.prototype.keyDownEventHandler=function(i){this.notify("selection",{prop:"keyDownEventHandler",onPropertyChange:!1,value:{e:i}})},t.prototype.keyUpEventHandler=function(i){(this.textArea.style.display==="block"||this.textArea.style.display==="inline-block")&&i.target.id===this.element.id+"_textArea"&&this.notify("selection",{prop:"textKeyDown",value:{e:i}})},t.prototype.canvasMouseDownHandler=function(i){i.target.className!=="e-ie-drop-browse"&&this.notify("selection",{prop:"canvasMouseDownHandler",onPropertyChange:!1,value:{e:i}})},t.prototype.canvasMouseMoveHandler=function(i){this.notify("selection",{prop:"canvasMouseMoveHandler",onPropertyChange:!1,value:{e:i}})},t.prototype.canvasMouseUpHandler=function(i){i.target.className!=="e-ie-drop-browse"&&this.notify("selection",{prop:"canvasMouseUpHandler",onPropertyChange:!1,value:{e:i}})},t.prototype.handleScroll=function(i){this.notify("selection",{prop:"handleScroll",onPropertyChange:!1,value:{e:i}})},t.prototype.adjustToScreen=function(){this.update()},t.prototype.screenOrientation=function(){D.isDevice&&setTimeout(this.adjustToScreen.bind(this),100)},t.prototype.windowResizeHandler=function(){!D.isDevice&&this.element.classList.contains("e-image-editor")&&this.adjustToScreen()},t.prototype.notifyResetForAllModules=function(){for(var i=this.requiredModules(),r=0;r<i.length;r++){var n=i[r].member;this.notify(n==="toolbar-module"?"toolbar":n,{prop:"reset",onPropertyChange:!1})}},t.prototype.allowShape=function(i,r){this.isPublicMethod=!0,this.applyShapes();var n={inRange:!1};return this.notify("shape",{prop:"isPointsInRange",onPropertyChange:!1,value:{x:i,y:r,obj:n}}),n.inRange},t.prototype.manageActiveAction=function(){this.applyShapes(),this.activeObj.shape&&this.activeObj.shape.indexOf("crop")>-1&&this.discard()},t.prototype.clearSelection=function(i){this.notify("selection",{prop:"clearSelection",onPropertyChange:!1,value:{resetCrop:i}})},t.prototype.crop=function(){var i={isCrop:!1};return this.notify("crop",{prop:"crop",onPropertyChange:!1,value:{obj:i}}),i.isCrop},t.prototype.flip=function(i){this.applyShapes(),this.updateImageTransformColl(i.toLowerCase()+"flip"),this.notify("transform",{prop:"flip",value:{direction:i}}),this.notify("draw",{prop:"redrawDownScale"}),this.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}});var r={action:"flip",actionEventArgs:this.editCompleteArgs};this.triggerEditCompleteEvent(r)},t.prototype.getImageData=function(i){i=d(i)?!0:i;var r;if(i){var n={canvas:null};this.applyShapes(),this.notify("export",{prop:"exportToCanvas",value:{object:n}}),r=n.canvas.getContext("2d").getImageData(0,0,n.canvas.width,n.canvas.height)}else this.isMaskImage&&this.element.getAttribute("data-value")==="mask-drawing"?(r=this.getData(!0),this.updateColl("reset")):(r=this.getData(),this.notify("draw",{prop:"render-image",value:{isMouseWheel:!1}}));return r},t.prototype.open=function(i,r,n){if(r=d(r)?!0:r,r){if(d(i))return;var s=document.getElementById(this.element.id+"_dropArea");s&&(s.style.display="none"),this.notify("draw",{prop:"open",value:{data:i}})}else this.updateImage(i,n?n.backgroundColor:null)},t.prototype.reset=function(){this.updateColl("reset");var i={isErrorImage:!1};if(this.notify("draw",{prop:"getErrorImage",value:{obj:i}}),!this.disabled&&!i.isErrorImage){this.clearContext(this.inMemoryContext),this.clearContext(this.lowerContext),this.clearContext(this.upperContext),this.notify("shape",{prop:"setRedactType",onPropertyChange:!1,value:{redactType:"blur"}}),this.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:!1,isCropping:!1,isZooming:null,cType:null}}),D.isDevice&&document.getElementById(this.element.id+"_bottomToolbar")&&($(document.getElementById(this.element.id+"_bottomToolbar"),"toolbar").destroy(),this.notify("toolbar",{prop:"create-bottom-toolbar",onPropertyChange:!1}));var r=this.isImageLoaded;this.currObjType.isUndoAction=this.isUndoRedo=this.togglePan=this.togglePen=this.isImageLoaded=this.isFinetuning=!1,this.isCircleCrop=this.isCropTab=!1,this.objColl=[],this.transform.degree=0,this.upperCanvas.style.display="block",this.transform.currFlipState="",this.allowDownScale=!0,this.upperCanvas.style.cursor=this.cursor=this.lowerCanvas.style.cursor="default",this.lowerContext.lineWidth=this.upperContext.lineWidth=void 0,this.frameDestPoints=null,this.textArea.value=this.textArea.textContent="",this.textArea.style.display="none",this.lowerContext.filter=this.canvasFilter=this.getDefaultFilter(),this.img.destLeft=this.img.destTop=this.img.srcLeft=this.img.srcTop=0,this.img.destWidth=this.img.destHeight=this.img.srcWidth=this.img.srcHeight=null,this.currSelectionPoint=null,this.panPoint.currentPannedPoint={x:0,y:0},this.rotateFlipColl=[],this.points=[],this.pointColl={},this.freehandCounter=0,this.notify("draw",{prop:"resetPanPoints"}),this.lowerCanvas.style.left=this.upperCanvas.style.left="",this.fontSizeColl=[],this.lowerCanvas.style.top=this.upperCanvas.style.top="",this.lowerCanvas.style.maxWidth=this.upperCanvas.style.maxWidth="",this.lowerCanvas.style.maxHeight=this.upperCanvas.style.maxHeight="",this.transform.defaultZoomFactor=this.transform.zoomFactor=0,this.transform.cropZoomFactor=null,this.frameObj={type:"none",color:"#fff",size:20,inset:20,offset:20,radius:0,amount:1,border:"solid",gradientColor:""},this.tempFrameObj={type:"none",color:"#fff",size:20,inset:20,offset:20,radius:0,amount:1,border:"solid",gradientColor:""},this.currObjType={shape:"",isDragging:!1,isActiveObj:!1,isText:!1,isInitialText:!1,isLine:!1,isInitialLine:!1,isCustomCrop:!1,isZoomed:!1,isUndoZoom:!1,isUndoAction:!1,isFiltered:!1,isSave:!1,isResize:!1,isRedact:!1},this.cropObj={cropZoom:0,defaultZoom:0,totalPannedPoint:{x:0,y:0},totalPannedClientPoint:{x:0,y:0},totalPannedInternalPoint:{x:0,y:0},tempFlipPanPoint:{x:0,y:0},activeObj:{},rotateFlipColl:[],degree:0,currFlipState:"",straighten:0,zoomFactor:0,previousZoomValue:0,destPoints:{startX:0,startY:0,width:0,height:0},frame:"none",srcPoints:{startX:0,startY:0,width:0,height:0},filter:"",isBrightAdjust:!1,aspectWidth:null,aspectHeight:null,straightenZoom:0,adjustmentLevel:{brightness:0,contrast:0,hue:0,opacity:100,saturation:0,blur:0,exposure:0,transparency:100,sharpen:!1,bw:!1},currentFilter:""},this.afterCropActions=[],this.currentFilter="",this.tempFrameZoomLevel=null,this.cxtTbarHeight=null,this.straightenPoint=null,this.transform.straighten=0,this.cancelCropSelection=null,this.aspectWidth=this.aspectHeight=null,this.isResize=this.isMaskImage=!1,this.drawingShape=null,this.isShapeDrawing=this.noPushUndo=this.isUndoRedoStack=this.isKBDNavigation=!1,this.shapeColl=[],this.tempObjColl=[],this.tempPointColl=[],this.tempShapeColl=[],this.isImageUpdated=!1,this.tempToolbarHeight=0,this.tempToolbar=[],this.tempRedactBlur=50,this.tempRedactPixel=40;var n={initialZoomValue:!1};this.editCompleteArgs=null,this.isFinetuneBtnClick=!1,this.notify("draw",{prop:"getInitialZoomValue",onPropertyChange:!1,value:{obj:n}}),n.initialZoomValue&&this.setProperties({zoomSettings:{zoomFactor:n.initialZoomValue}},!0);var s=document.getElementById(this.element.id+"_quickAccessToolbarArea");s&&(s.style.display="none"),this.notifyResetForAllModules(),this.notify("filter",{prop:"update-finetunes"}),this.toolbarTemplate?this.toolbarHeight=this.element.querySelector("#"+this.element.id+"_toolbarArea").clientHeight:this.element.querySelector("#"+this.element.id+"_toolbar")&&(this.toolbarHeight=this.element.querySelector("#"+this.element.id+"_toolbar").clientHeight),this.notify("toolbar",{prop:"setToolbarHeight",value:{height:this.toolbarHeight}}),this.isImageLoaded=r,this.straightenBaseImageCanvas(),this.isImageLoaded=!1,this.notify("draw",{prop:"update-canvas",onPropertyChange:!1}),this.isImageLoaded=r,this.prevStraightenedDegree=0;var a=this.element.querySelector(".e-contextual-toolbar-wrapper");a&&a.classList.add("e-hide"),this.notify("toolbar",{prop:"refresh-dropdown-btn",value:{isDisabled:!1}}),this.notify("toolbar",{prop:"enable-disable-btns"});var l={bool:this.isStraightening};D.isDevice&&l.bool&&this.notify("crop",{prop:"resizeWrapper"});var h=this.element.querySelector("#"+this.element.id+"_saveDialog");h&&$(h,"dialog").close();var c={action:"reset",actionEventArgs:null};this.triggerEditCompleteEvent(c)}},t.prototype.rotate=function(i){var r={isRotate:!1};this.applyShapes(),(i===90||i===-90)&&this.updateImageTransformColl(i===90?"rotateright":"rotateleft"),this.notify("transform",{prop:"rotate",value:{degree:i,obj:r}}),this.notify("draw",{prop:"redrawDownScale"});var n={action:"rotate",actionEventArgs:this.editCompleteArgs};return this.triggerEditCompleteEvent(n),r.isRotate},t.prototype.export=function(i,r,n){this.applyShapes(),this.notify("export",{prop:"export",onPropertyChange:!1,value:{type:i,fileName:r,imgQuality:n}})},t.prototype.select=function(i,r,n,s,a){this.applyShapes(),this.notify("toolbar",{prop:"performCropTransformClick",value:{shape:"crop-"+i}}),this.notify("draw",{prop:"select",onPropertyChange:!1,value:{type:i,startX:r,startY:n,width:s,height:a}}),r&&n||s&&a?this.notify("draw",{prop:"select",onPropertyChange:!1,value:{type:i,startX:r,startY:n,width:s,height:a}}):this.cropObj={cropZoom:0,defaultZoom:0,totalPannedPoint:{x:0,y:0},totalPannedClientPoint:{x:0,y:0},totalPannedInternalPoint:{x:0,y:0},tempFlipPanPoint:{x:0,y:0},activeObj:{},rotateFlipColl:[],degree:0,currFlipState:"",straighten:0,zoomFactor:0,previousZoomValue:0,destPoints:{startX:0,startY:0,width:0,height:0},frame:"none",srcPoints:{startX:0,startY:0,width:0,height:0},filter:"",isBrightAdjust:!1,aspectWidth:null,aspectHeight:null,straightenZoom:0,adjustmentLevel:{brightness:0,contrast:0,hue:0,opacity:100,saturation:0,blur:0,exposure:0,transparency:100,sharpen:!1,bw:!1},currentFilter:""}},t.prototype.freeHandDraw=function(i){this.notify("freehand-draw",{prop:"freeHandDraw",onPropertyChange:!1,value:{value:i}})},t.prototype.freehandDraw=function(i){if(!this.disabled&&this.isImageLoaded){if(!i&&this.isMaskImage){this.discard();return}this.manageActiveAction(),this.freeHandDraw(i);var r={shapeSettingsObj:{}};this.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:r}});var n=r.shapeSettingsObj;n.type=xi.FreehandDraw;var s={cancel:!1,action:"insert",previousShapeSettings:n,currentShapeSettings:n};this.notify("freehand-draw",{prop:"triggerShapeChanging",value:{shapeChangingArgs:s}})}},t.prototype.pan=function(i,r,n){this.applyShapes(),this.notify("transform",{prop:"pan",onPropertyChange:!1,value:{value:i,x:r,y:n}})},t.prototype.zoom=function(i,r){this.isZoomBtnClick=!0,this.notify("transform",{prop:"zoom",onPropertyChange:!1,value:{zoomFactor:i,zoomPoint:r}}),this.notify("draw",{prop:"redrawDownScale"})},t.prototype.drawEllipse=function(i,r,n,s,a,l,h,c,u){var p=!1,f=this.allowShape(i,r);return!this.disabled&&this.isImageLoaded&&(f||d(i)&&d(r))&&(p=!0,this.manageActiveAction(),this.notify("shape",{prop:"drawEllipse",onPropertyChange:!1,value:{x:i,y:r,radiusX:n,radiusY:s,strokeWidth:a,strokeColor:l,fillColor:h,degree:c,isSelected:u}}),this.editCompleted()),p},t.prototype.drawLine=function(i,r,n,s,a,l,h){var c=!1,u=this.allowShape(i,r);return!this.disabled&&this.isImageLoaded&&(u||d(i)&&d(r))&&(c=!0,this.manageActiveAction(),this.notify("shape",{prop:"drawLine",onPropertyChange:!1,value:{startX:i,startY:r,endX:n,endY:s,strokeWidth:a,strokeColor:l,isSelected:h}}),this.editCompleted()),c},t.prototype.drawArrow=function(i,r,n,s,a,l,h,c,u){var p=!1,f=this.allowShape(i,r);return!this.disabled&&this.isImageLoaded&&(f||d(i)&&d(r))&&(p=!0,this.manageActiveAction(),this.notify("shape",{prop:"drawArrow",onPropertyChange:!1,value:{startX:i,startY:r,endX:n,endY:s,strokeWidth:a,strokeColor:l,arrowStart:h,arrowEnd:c,isSelected:u}}),this.editCompleted()),p},t.prototype.drawPath=function(i,r,n,s){this.isPublicMethod=!0;var a={inRange:!1},l=!1;if(i&&i.length>0)for(var h=0;h<i.length&&!a.inRange;h++)this.notify("shape",{prop:"isPointsInRange",onPropertyChange:!1,value:{x:i[h].x,y:i[h].y,obj:a}});return!this.disabled&&this.isImageLoaded&&(a.inRange||d(i))&&(l=!0,this.manageActiveAction(),this.notify("shape",{prop:"drawPath",onPropertyChange:!1,value:{pointColl:i,strokeWidth:r,strokeColor:n,isSelected:s}}),this.editCompleted()),l},t.prototype.drawRectangle=function(i,r,n,s,a,l,h,c,u,p){var f=!1,g=this.allowShape(i,r);return!this.disabled&&this.isImageLoaded&&(g||d(i)&&d(r))&&(f=!0,this.manageActiveAction(),this.notify("shape",{prop:"drawRectangle",onPropertyChange:!1,value:{x:i,y:r,width:n,height:s,strokeWidth:a,strokeColor:l,fillColor:h,degree:c,isSelected:u,radius:p}}),this.editCompleted()),f},t.prototype.drawText=function(i,r,n,s,a,l,h,c,u,p,f,g,v,y){var C=!1,b=this.allowShape(i,r);return!this.disabled&&this.isImageLoaded&&(b||d(i)&&d(r))&&(C=!0,this.manageActiveAction(),this.notify("shape",{prop:"drawText",onPropertyChange:!1,value:{x:i,y:r,text:n,fontFamily:s,fontSize:a,bold:l,italic:h,color:c,isSelected:u,degree:p,fillColor:f,outlineColor:g,outlineWidth:v,transformCollection:y}}),this.editCompleted()),C},t.prototype.drawImage=function(i,r,n,s,a,l,h,c,u){var p=!1,f=this.allowShape(r,n);if(!this.disabled&&this.isImageLoaded&&(f||d(r)&&d(n))){this.manageActiveAction();var g=this.objColl.length;this.notify("shape",{prop:"drawImage",onPropertyChange:!1,value:{x:r,y:n,width:s,height:a,src:i,degree:h,isAspectRatio:l,opacity:c,isSelected:u}}),this.editCompleted(),this.objColl.length>g&&(p=!0)}return p},t.prototype.updateShape=function(i,r){var n={isSelected:!1},s=!1,a={bool:!1};if(d(i.id))i.strokeColor&&(this.activeObj.strokeSettings.strokeColor=i.strokeColor),i.fillColor&&(this.activeObj.strokeSettings.fillColor=i.fillColor),i.strokeWidth&&(this.activeObj.strokeSettings.strokeWidth=i.strokeWidth),i.index&&(this.activeObj.order=i.index),i.type==="FreehandDraw"&&i.strokeWidth&&this.notify("freehand-draw",{prop:"setPenStrokeWidth",onPropertyChange:!1,value:{value:i.strokeWidth}});else if(i.type.toLowerCase()==="text"&&(this.textArea.style.display==="block"||this.textArea.style.display==="inline-block")&&(this.okBtn(null,!0),s=!0),this.notify("shape",{prop:"selectShape",onPropertyChange:!1,value:{id:i.id,obj:n,isShape:!0}}),this.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:a}}),n.isSelected){var l=this.activeObj.textSettings.fontSize;if(this.notify("shape",{prop:"updateShapeChangeEventArgs",onPropertyChange:!1,value:{shapeSettings:i}}),this.activeObj.shape==="text"&&l){var h=this.activeObj.textSettings.fontSize-l;h!==0&&(this.activeObj.activePoint.height+=h,this.activeObj.activePoint.startY-=h/2,this.activeObj.activePoint.endY+=h/2,this.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:this.activeObj.activePoint,obj:this.activeObj,isMouseMove:null,x:null,y:null}}))}var c=m({},this.activeObj,{},!0);this.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:null}}),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),c.shape&&this.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:c}}),this.activeObj.shape==="text"&&this.notify("toolbar",{prop:"editText",onPropertyChange:!1}),a.bool&&this.notify("undo-redo",{prop:"setPreventUR",value:{bool:!0}}),this.okBtn(r,!0),a.bool&&this.notify("undo-redo",{prop:"setPreventUR",value:{bool:!1}}),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.editCompleteArgs={action:"shape-update",currentShapeSettings:i},this.editCompleted("shape-customize"),s&&this.enableTextEditing(),r&&(this.noRedact=!0,this.selectShape(i.id))}return n.isSelected},t.prototype.selectShape=function(i){this.applyShapes();var r={isSelected:!1};return this.notify("shape",{prop:"selectShape",onPropertyChange:!1,value:{id:i,obj:r,isShape:!0}}),this.editCompleted("shape-select"),this.noRedact=!1,r.isSelected},t.prototype.deleteShape=function(i){var r=this.getShapeSetting(i);r.type!=="Redact"&&(this.applyShapes(),this.notify("shape",{prop:"deleteShape",onPropertyChange:!1,value:{id:i,isShape:!0}}),this.editCompleted("shape-delete"))},t.prototype.getShapeSetting=function(i){this.applyShapes();var r={shapeDetails:null};this.notify("shape",{prop:"getShapeSetting",onPropertyChange:!1,value:{id:i,obj:r}}),this.notify("draw",{prop:"redrawDownScale"});var n=r.shapeDetails?r.shapeDetails:{};return n},t.prototype.getShapeSettings=function(){this.applyShapes();var i={shapeDetailsColl:[]};return this.notify("shape",{prop:"getShapeSettings",onPropertyChange:!1,value:{obj:i}}),this.notify("draw",{prop:"redrawDownScale"}),i.shapeDetailsColl.filter(function(r){return r.type!=="redact"})},t.prototype.getRedacts=function(){this.applyShapes();var i={shapeDetailsColl:[]};return this.notify("shape",{prop:"getRedactSettings",onPropertyChange:!1,value:{obj:i}}),this.notify("draw",{prop:"redrawDownScale"}),i.shapeDetailsColl.filter(function(r){return r.type!=="redact"})},t.prototype.selectRedact=function(i){this.applyShapes();var r={isSelected:!1};return this.notify("shape",{prop:"selectShape",onPropertyChange:!1,value:{id:i,obj:r,isRedact:!0}}),this.editCompleted("redact-select"),this.noRedact=!1,r.isSelected},t.prototype.deleteRedact=function(i){this.applyShapes(),this.notify("shape",{prop:"deleteShape",onPropertyChange:!1,value:{id:i,isRedact:!0}}),this.editCompleted("redact-delete")},t.prototype.updateRedact=function(i,r){this.applyShapes();var n={isSelected:!1};if(this.notify("shape",{prop:"selectShape",onPropertyChange:!1,value:{id:i.id,obj:n,isRedact:!0}}),n.isSelected){this.notify("shape",{prop:"updateShapeChangeEventArgs",onPropertyChange:!1,value:{shapeSettings:i}}),i.blurIntensity&&(this.activeObj.redactBlur=i.blurIntensity),i.pixelSize&&(this.activeObj.redactPixelate=i.pixelSize),this.activeObj.redactType=i.type.toLowerCase()==="blur"?"blur":"pixelate";var s=m({},this.activeObj,{},!0);this.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:null}}),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),s.shape&&this.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:s}}),this.okBtn(r,!0),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.editCompleteArgs={action:"redact-update",currentShapeSettings:i},this.editCompleted("redact-customize"),r&&this.selectRedact(i.id)}return n.isSelected},t.prototype.update=function(){this.notify("transform",{prop:"update"})},t.prototype.finetuneImage=function(i,r){!this.disabled&&this.isImageLoaded&&(this.manageActiveAction(),this.notify("filter",{prop:"finetuneImage",value:{value:r,option:i}}),this.editCompleteArgs={finetune:i,value:r},this.editCompleted("fine-tune"))},t.prototype.applyImageFilter=function(i){!this.disabled&&this.isImageLoaded&&(this.manageActiveAction(),this.notify("filter",{prop:"applyImageFilter",value:{option:i.toString()}}),this.editCompleteArgs={filter:i},this.editCompleted("filter"),this.canvasFilter=this.lowerContext.filter,this.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}))},t.prototype.undo=function(){this.manageActiveAction(),this.notify("undo-redo",{prop:"undo",onPropertyChange:!1}),this.notify("draw",{prop:"redrawDownScale"})},t.prototype.redo=function(){this.manageActiveAction(),this.notify("undo-redo",{prop:"redo",onPropertyChange:!1}),this.notify("draw",{prop:"redrawDownScale"})},t.prototype.getImageDimension=function(){return{x:this.img.destLeft,y:this.img.destTop,width:this.img.destWidth,height:this.img.destHeight}},t.prototype.resize=function(i,r,n){var s=!1;if(i.toString().length<=4&&r.toString().length<=4&&(!this.isCircleCrop||n)){this.manageActiveAction(),this.notify("toolbar",{prop:"resizeClick",value:{bool:!1}});var a={startX:this.img.destLeft,startY:this.img.destTop,width:this.img.destWidth,height:this.img.destHeight};n?(this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"resize",isApplyBtn:!1,isCropping:!1}}),this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"resize",isApplyBtn:!1,isCropping:!1}})):this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"resize",isApplyBtn:!1,isCropping:!1}});var l=this.element.querySelector("#"+this.element.id+"_resizeWidth"),h=this.element.querySelector("#"+this.element.id+"_resizeHeight");l&&h&&($(l,"numerictextbox").value=Math.floor(i),l.value=Math.floor(i).toString()+" px",$(h,"numerictextbox").value=Math.floor(r),h.value=Math.floor(r).toString()+" px"),this.notify("transform",{prop:"resize",value:{width:i,height:r,isAspectRatio:n}}),a.startX!==this.img.destLeft||a.startY!==this.img.destTop||a.width!==this.img.destWidth||a.height!==this.img.destHeight?(s=!0,this.aspectWidth=i,this.aspectHeight=r,n&&(this.aspectHeight=null),this.okBtn(!1,!1,!0)):this.notify("draw",{prop:"performCancel",value:{isContextualToolbar:null}}),this.notify("draw",{prop:"redrawDownScale"})}return s},t.prototype.drawFrame=function(i,r,n,s,a,l,h,c,u){this.manageActiveAction();var p=!1,f={frameChangeEventArgs:null};r=r||"#fff",n=n||"",s=s||20,a=a||0,l=l||0,h=h||0,c=c||ay.Solid,u=u||0;var g={type:this.toPascalCase(this.frameObj.type),color:this.frameObj.color,gradientColor:this.frameObj.gradientColor,size:this.frameObj.size,inset:this.frameObj.inset,offset:this.frameObj.offset,borderRadius:this.frameObj.radius,frameLineStyle:this.toPascalCase(this.frameObj.border),lineCount:this.frameObj.amount};m(this.tempFrameObj,this.frameObj),this.tempFrameZoomLevel=this.transform.zoomFactor,this.frameDestPoints=m({},this.img,{},!0),this.notify("toolbar",{prop:"frameToolbarClick"}),this.frameObj.type=i.toLowerCase(),this.frameObj.color=r,this.frameObj.gradientColor=n,this.frameObj.size=s,this.frameObj.inset=a,this.frameObj.offset=l,this.frameObj.radius=h,this.frameObj.border=c.toLowerCase(),this.frameObj.amount=u,this.notify("draw",{prop:"triggerFrameChange",value:{prevFrameSettings:g,obj:f}}),f.frameChangeEventArgs&&!f.frameChangeEventArgs.cancel?(this.notify("draw",{prop:"render-image",value:{isMouseWheel:null}}),JSON.stringify(this.frameObj)!==JSON.stringify(this.tempFrameObj)?(p=!0,this.okBtn()):this.tempFrameZoomLevel=null):(this.notify("draw",{prop:"performCancel",value:{isContextualToolbar:null}}),m(this.frameObj,this.tempFrameObj),this.tempFrameZoomLevel=null),this.notify("draw",{prop:"redrawDownScale"});var v=this.element.querySelector(".e-contextual-toolbar-wrapper");return v&&v.classList.add("e-hide"),p},t.prototype.straightenImage=function(i){var r=!1;return i>=-45&&i<=45&&(this.applyShapes(),r=!0,this.notify("transform",{prop:"straightenImage",value:{degree:i}}),this.notify("draw",{prop:"redrawDownScale"})),r},t.prototype.cloneShape=function(i){var r={isSelected:!1};return i.split("_")[0]==="shape"&&(this.notify("shape",{prop:"selectShape",onPropertyChange:!1,value:{id:i,obj:r}}),r.isSelected&&(this.notify("toolbar",{prop:"duplicateShape",onPropertyChange:!1,value:{isPreventUndoRedo:!1}}),this.okBtn(null,!0),this.notify("draw",{prop:"redrawDownScale"}))),r.isSelected},t.prototype.getImageFilter=function(i){var r=this.createElement("canvas"),n=r.getContext("2d");return this.notify("filter",{prop:"updateAdj",value:{type:i.toLowerCase(),value:null,isPreview:!0,ctx:n}}),n.filter},t.prototype.enableTextEditing=function(){var i=m({},this.activeObj,{},!0);i.order||(this.noPushUndo=!0,this.okBtn(),this.noPushUndo=!1,this.noRedact=!0,this.selectShape(i.currIndex),i.order=this.activeObj.order),this.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!1}}),this.activeObj=i,this.notify("toolbar",{prop:"editText",onPropertyChange:!1})},t.prototype.canUndo=function(){var i=!1,r=this.getUndoRedoColl(),n=r.index;return n>0&&(i=!0),i},t.prototype.canRedo=function(){var i=!1,r=this.getUndoRedoColl(),n=r.undoRedoColl,s=r.index;return n&&n.length>0&&s<n.length-1&&(i=!0),s===n.length?i=!1:(s===0&&n.length>0||s>0)&&(i=!0),i},t.prototype.apply=function(){this.isMaskImage?this.discard():(this.updateColl("reset"),this.closeOverlayTbar(),this.okBtn(null,!0))},t.prototype.discard=function(){this.updateColl("reset"),this.notify("draw",{prop:"performCancel",value:{isContextualToolbar:this.closeOverlayTbar(),isFinalCancel:!0}})},t.prototype.enableShapeDrawing=function(i,r){if(r&&(this.drawingShape=i.toLowerCase(),this.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1})),i&&r){this.currObjType.shape=i.toLowerCase(),this.activeObj.shape=this.currObjType.shape,this.currObjType.isDragging=this.currObjType.isCustomCrop=!1,this.activeObj.shapeDegree=this.transform.degree,this.activeObj.shapeFlip=this.transform.currFlipState,this.activeObj.textFlip=this.transform.currFlipState,this.activeObj.flipObjColl=[];var n={order:null};this.notify("shape",{prop:"getNewOrder",onPropertyChange:!1,value:{obj:n}}),this.activeObj.order=n.order,this.notify("selection",{prop:"annotate",value:{shape:this.currObjType.shape}}),this.currObjType.shape==="text"?this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"text",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}):this.currObjType.shape==="redact"?this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"redact",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}):this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"shapes",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}),this.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1})}else r||this.okBtn(null,!0)},t.prototype.bringToFront=function(i){this.noRedact=!0,this.selectShape(i)&&(this.updateShapeOrder(i,"bringToFront"),this.apply())},t.prototype.bringForward=function(i){this.noRedact=!0,this.selectShape(i)&&(this.updateShapeOrder(i,"bringForward"),this.apply())},t.prototype.sendToBack=function(i){this.noRedact=!0,this.selectShape(i)&&(this.updateShapeOrder(i,"sendToBack"),this.apply())},t.prototype.sendBackward=function(i){this.noRedact=!0,this.selectShape(i)&&(this.updateShapeOrder(i,"sendBackward"),this.apply())},t.prototype.clearImage=function(){this.reset(),this.isImageLoaded=!1,this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height);var i=document.getElementById(this.element.id+"_bottomToolbar");D.isDevice&&i&&(document.getElementById(this.element.id+"_bottomToolbar").style.display="none"),this.notify("toolbar",{prop:"destroy-top-toolbar",onPropertyChange:!1}),this.notify("toolbar",{prop:"create-toolbar",onPropertyChange:!1}),this.notify("toolbar",{prop:"create-contextual-toolbar",onPropertyChange:!1});var r=document.getElementById(this.element.id+"_dropArea");r&&(r.style.display="block")},t.prototype.selectMaskImage=function(i,r){i=i||10,r=r||"#512da880",this.applyShapes(),this.isMaskImage=!0,this.updateColl("empty"),this.enableDisableToolbar(!0),this.update(),this.activeObj.strokeSettings.strokeWidth=i,this.notify("freehand-draw",{prop:"setPenStrokeWidth",onPropertyChange:!1,value:{value:i}}),this.activeObj.strokeSettings.strokeColor=r,this.notify("freehand-draw",{prop:"freeHandDraw",onPropertyChange:!1,value:{value:!0}}),this.maskCanvas.style.display="block"},t.prototype.enableDisableToolbar=function(i){var r,n=document.getElementById(this.element.id+"_toolbar");n&&(r=$(n,"toolbar"),r&&r.disable(i)),n=document.getElementById(this.element.id+"_bottomToolbar"),n&&(r=$(n,"toolbar"),r&&r.disable(i))},t.prototype.updateImage=function(i,r){var n=this;if(i||r||r===""){var s=m({},this.cropObj,{},!0),a={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:a}});var l=a.currObj;l.objColl=m([],this.objColl,[],!0),l.pointColl=m([],this.pointColl,[],!0),l.afterCropActions=m([],this.afterCropActions,[],!0);var h={selPointColl:null};if(this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:h}}),l.selPointColl=m([],h.selPointColl,[],!0),i){if(this.isImageUpdated=!0,typeof i!="string"){var c=this.createElement("canvas");c.width=i.width,c.height=i.height,c.getContext("2d").putImageData(i,0,0),i=c.toDataURL()}this.baseImg.src=i,setTimeout(function(){n.cropObj.straighten!==0?(n.notify("toolbar",{prop:"performCropTransformClick",value:{shape:"crop-custom"}}),n.noPushUndo=!0,n.crop(),n.noPushUndo=!1):n.notify("draw",{prop:"render-image",value:{isMouseWheel:!1}}),n.isImageUpdated=!1,r||(n.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"updateImage",previousObj:l,previousObjColl:l.objColl,previousPointColl:l.pointColl,previousSelPointColl:l.selPointColl,previousCropObj:s,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),n.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}))},100)}(r||r==="")&&(this.notify("draw",{prop:"imageBackgroundColor",onPropertyChange:!1,value:{color:r}}),this.notify("draw",{prop:"render-image",value:{isMouseWheel:!1}}),i||(this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"bgColor",previousObj:l,previousObjColl:l.objColl,previousPointColl:l.pointColl,previousSelPointColl:l.selPointColl,previousCropObj:s,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}))),i&&r&&(this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"updateImage",previousObj:l,previousObjColl:l.objColl,previousPointColl:l.pointColl,previousSelPointColl:l.selPointColl,previousCropObj:s,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}))}},t.prototype.editCompleted=function(i){this.notify("draw",{prop:"redrawDownScale"});var r={action:i||"shape-insert",actionEventArgs:this.editCompleteArgs};this.triggerEditCompleteEvent(r)},t.prototype.updateColl=function(i){this.isMaskImage&&(i==="empty"?(this.tempToolbarHeight=this.toolbarHeight,this.tempToolbar=this.toolbar?m([],this.toolbar,[],!0):null,this.tempObjColl=m([],this.objColl,[],!0),this.tempPointColl=m([],this.pointColl,[],!0),this.tempShapeColl=m([],this.shapeColl,[],!0),this.objColl=[],this.pointColl=[],this.shapeColl=[],this.freehandCounter=0,this.notify("freehand-draw",{prop:"setCurrentFreehandDrawIndex",value:{value:0}}),this.notify("draw",{prop:"render-image",value:{isMouseWheel:!1}})):i==="reset"&&(this.objColl=this.tempObjColl,this.pointColl=this.tempPointColl,this.shapeColl=this.tempShapeColl,this.freehandCounter=this.pointColl.length,this.notify("freehand-draw",{prop:"setCurrentFreehandDrawIndex",value:{value:this.freehandCounter}}),this.enableDisableToolbar(!1),this.cropObj.straighten!==0&&(this.notify("toolbar",{prop:"performCropTransformClick",value:{shape:"crop-custom"}}),this.noPushUndo=!0,this.crop(),this.noPushUndo=!1),this.notify("draw",{prop:"render-image",value:{isMouseWheel:!1}}),this.isMaskImage=!1,this.upperContext.globalCompositeOperation="source-over",this.maskCanvas.style.display="none",this.activeObj.strokeSettings={strokeColor:"#fff",fillColor:"",strokeWidth:null,radius:null,outlineColor:"",outlineWidth:null},this.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:this.activeObj.strokeSettings,strokeColor:"#fff",fillColor:"",strokeWidth:null,outlineWidth:null}}),this.notify("freehand-draw",{prop:"setPenStrokeWidth",onPropertyChange:!1,value:{value:2}}),this.notify("freehand-draw",{prop:"setMasking",onPropertyChange:!1,value:{value:!1}})))},t.prototype.resetToolbar=function(){this.toolbarHeight!==this.tempToolbarHeight&&!(d(this.toolbar)||this.toolbar&&this.toolbar.length>0||!d(this.toolbarTemplate))&&(this.toolbarHeight=this.tempToolbarHeight,this.notify("toolbar",{prop:"setToolbarHeight",value:{height:this.toolbarHeight}}),this.toolbar=this.tempToolbar,this.toolbarTemplate||(this.notify("toolbar",{prop:"create-toolbar",onPropertyChange:!1}),this.notify("toolbar",{prop:"create-contextual-toolbar",onPropertyChange:!1})),this.update())},t.prototype.getData=function(i){i&&this.resetToolbar();var r=m([],this.objColl,null,!0),n=m([],this.pointColl,null,!0),s=m([],this.shapeColl,null,!0);if(i){this.notify("shape",{prop:"updateShapeColl",onPropertyChange:!1});for(var a=0;a<this.freehandCounter;a++)this.pointColl[a].strokeColor="#fff"}else this.objColl=[],this.pointColl=[],this.shapeColl=[],this.freehandCounter=0;var l=this.frameObj.type;this.frameObj.type="none";var h=this.aspectWidth,c=this.aspectHeight;this.aspectWidth=this.aspectHeight=null;var u=this.cropObj.straighten;this.togglePen=!1,this.notify("toolbar",{prop:"performCropTransformClick",value:{shape:"crop-custom"}});var p=m({},this.img,{},!0),f=m({},this.cropObj,{},!0),g=m({},this.activeObj,{},!0),v=m({},this.transform,{},!0),y=m({},this.panPoint,{},!0);u!==0&&this.setStraighten(0);var C=this.activeObj.activePoint;C.startX=this.img.destLeft,C.startY=this.img.destTop,C.width=this.img.destWidth,C.height=this.img.destHeight,C.endX=C.startX+C.width,C.endY=C.startY+C.height,this.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:C,obj:this.activeObj,isMouseMove:null,x:null,y:null}}),this.noPushUndo=!0,this.crop(),this.noPushUndo=!1,this.isCropTab=!1,this.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.notify("crop",{prop:"resetZoom",onPropertyChange:!1}),this.isCropTab=!0;var b=m([],this.afterCropActions,[],!0),M=m([],this.rotateFlipColl,[],!0);this.notify("crop",{prop:"revertTransform",value:{type:"initial",coll:M}});var S=this.getImageData();if(i){var N=this.createElement("canvas"),x=N.getContext("2d");if(N.width=S.width,N.height=S.height,x.fillRect(0,0,N.width,N.height),this.pointColl.length>0){var A={width:0,height:0};this.notify("crop",{prop:"calcRatio",onPropertyChange:!1,value:{obj:A,dimension:{width:N.width,height:N.height}}});var U=A;this.notify("export",{prop:"drawAnnotation",value:{context:x,ratio:U}})}this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),S=x.getImageData(0,0,N.width,N.height)}return this.notify("crop",{prop:"revertTransform",value:{type:"reverse",coll:M}}),this.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.afterCropActions=b,i||(this.objColl=r,this.pointColl=n,this.shapeColl=s,this.freehandCounter=this.pointColl.length),this.frameObj.type=l,this.aspectWidth=h,this.aspectHeight=c,this.notify("toolbar",{prop:"performCropTransformClick",value:{shape:"crop-custom"}}),u!==0&&this.setStraighten(u),this.img=p,this.cropObj=f,this.activeObj=g,this.transform=v,this.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:.1,zoomPoint:null,isResize:null}}),this.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-.1,zoomPoint:null,isResize:null}}),this.transform.degree!==0&&(this.panPoint.currentPannedPoint={x:y.totalPannedClientPoint.x,y:y.totalPannedClientPoint.y},this.notify("transform",{prop:"drawPannedImage",value:{xDiff:y.totalPannedClientPoint.x,yDiff:y.totalPannedClientPoint.y}}),this.panPoint.currentPannedPoint={x:0,y:0},this.notify("transform",{prop:"setTempPanMove",value:{point:null}})),this.noPushUndo=!0,this.crop(),this.noPushUndo=!1,this.transform.straighten=0,this.notify("draw",{prop:"render-image",value:{isMouseWheel:!1}}),S},t.prototype.applyShapes=function(){if(!this.isUndoRedoStack){var i=["rectangle","ellipse","line","arrow","path","text","image"],r={bool:!1};this.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:r}}),(r.bool||this.togglePen||this.activeObj.shape&&i.indexOf(this.activeObj.shape)!==-1||this.drawingShape)&&this.okBtn(null,!0)}},t.prototype.closeOverlayTbar=function(){var i=!1,r={bool:null};if(this.notify("toolbar",{prop:"getFrameToolbar",onPropertyChange:!1,value:{obj:r}}),!r.bool&&this.element.querySelector(".e-contextual-toolbar-wrapper")){this.element.querySelector(".e-contextual-toolbar-wrapper").classList.contains("e-hide")||(i=!0);var n={bool:this.isStraightening};(!D.isDevice||D.isDevice&&!n.bool)&&this.element.querySelector(".e-contextual-toolbar-wrapper").classList.add("e-hide")}return i},t.prototype.toolbarTemplateFn=function(){var i,r=this.element.id+"_toolbar",n=this.element.querySelector("#"+this.element.id+"_toolbarArea");if(this.toolbarTemplate){if(this.toolbarFn=this.templateParser(this.toolbarTemplate),this.isReact)i=this.toolbarFn({type:"toolbar"},this,"Template",r)[0];else if(this.isAngular){var s=this.toolbarFn({type:"toolbar"},this,"Template",r);i=s[0].nodeType===3?s[1]:s[0]}else i=this.toolbarFn({type:"toolbar"},this,"Template",r)[0];n.appendChild(i),this.toolbarHeight=n.clientHeight,this.notify("toolbar",{prop:"setToolbarHeight",value:{height:this.toolbarHeight}}),this.renderReactTemplates()}},t.prototype.quickAccessToolbarTemplateFn=function(){var i,r=this.element.id+"_quickAccessToolbar",n=this.element.querySelector("#"+this.element.id+"_quickAccessToolbarArea");if(this.quickAccessToolbarTemplate){if(this.qatFn=this.templateParser(this.quickAccessToolbarTemplate),this.isReact)i=this.qatFn({type:"toolbar"},this,"Template",r)[0];else if(this.isAngular){var s=this.qatFn({type:"toolbar"},this,"Template",r);i=s[0].nodeType===3?s[1]:s[0]}else i=this.qatFn({type:"toolbar"},this,"Template",r)[0];n.appendChild(i),this.renderReactTemplates()}},t.prototype.templateParser=function(i){if(i)try{return typeof i!="function"&&document.querySelectorAll(i).length?rt(document.querySelector(i).innerHTML.trim()):rt(i)}catch{return rt(i)}},t.prototype.getTextFromId=function(i){var r={1:"none",2:"bar",3:"arrow",4:"arrowSolid",5:"circle",6:"circleSolid",7:"square",8:"squareSolid"};return r[""+i]},t.prototype.getFinetuneOption=function(i){var r={brightness:kr.Brightness,contrast:kr.Contrast,hue:kr.Hue,saturation:kr.Saturation,opacity:kr.Opacity,blur:kr.Blur,exposure:kr.Exposure};return r[""+i]},t.prototype.setPenStroke=function(i){this.notify("freehand-draw",{prop:"setPenStrokeWidth",onPropertyChange:!1,value:{value:parseInt(i,10)}})},t.prototype.updateFreehandDrawColorChange=function(){var i={tempFreeHandDrawEditingStyles:null};this.notify("freehand-draw",{prop:"getTempFreeHandDrawEditingStyles",value:{obj:i}}),this.notify("freehand-draw",{prop:"color-change",value:{color:i.tempFreeHandDrawEditingStyles.strokeColor}})},t.prototype.getUndoRedoColl=function(){var i={undoRedoColl:null,index:null},r={undoRedoStep:null},n={appliedUndoRedoColl:[]};return this.notify("undo-redo",{prop:"getAppliedUndoRedoColl",value:{obj:n}}),this.notify("undo-redo",{prop:"getUndoRedoStep",value:{obj:r}}),i.undoRedoColl=n.appliedUndoRedoColl,i.index=r.undoRedoStep,i},t.prototype.updateImageTransformColl=function(i){var r;i==="rotateleft"?r=-90:i==="rotateright"?r=90:i==="horizontalflip"?r="horizontal":i==="verticalflip"&&(r="vertical");for(var n=0;n<this.objColl.length;n++){var s=this.objColl[n].shape;if(s==="image"||s==="text"){d(this.objColl[n].rotateFlipColl)&&(this.objColl[n].rotateFlipColl=[]),this.objColl[n].rotateFlipColl.push(r);var a={collection:this.objColl[n].rotateFlipColl};this.notify("shape",{prop:"alignRotateFlipColl",onPropertyChange:!1,value:{collection:this.objColl[n].rotateFlipColl,isRotateFlipCollection:!1,obj:a}}),this.objColl[n].rotateFlipColl=a.collection}}},t.prototype.setInitialZoomState=function(){this.objColl.push(this.activeObj),this.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1});var i=this.isUndoRedo;this.isCropTab=!1,this.isUndoRedo=!0,this.transform.cropZoomFactor&&this.transform.cropZoomFactor>0?this.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-this.transform.cropZoomFactor,zoomPoint:null,isResize:!0}}):this.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:Math.abs(this.transform.cropZoomFactor),zoomPoint:null,isResize:!0}}),this.isUndoRedo=i,this.panPoint.totalPannedPoint={x:0,y:0},this.transform.cropZoomFactor=0,this.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1}),this.activeObj=m({},this.objColl[this.objColl.length-1],{},!0),this.objColl.pop(),this.isCropTab=!0,this.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:this.activeObj}})},t.prototype.updateCropTransformItems=function(){this.prevCurrSelectionPoint=m({},this.currSelectionPoint,{},!0),this.notify("draw",{prop:"updateCropSelection",onPropertyChange:!1})},t.prototype.toPascalCase=function(i,r){var n=[];d(i)||(n=i.toLowerCase().split("-"));for(var s=0;s<n.length;s++)n[s]=n[s].charAt(0).toUpperCase()+n[s].slice(1);return r&&(r.maxText=n.join("")),n.join("")},t.prototype.getFontSizes=function(){var i=[];this.fontSizeColl=[];var r;this.transform.degree===0||this.transform.degree%180===0?r=this.img.destWidth/25:r=this.img.destHeight/25;for(var n=1;n<=10;n++)this.fontSizeColl.push({text:(n*Math.round(r/2)).toString()}),i.push({text:n.toString()});return i},t.prototype.updateDropInfoContent=function(i){if(i){var r={key:"SupportText"};this.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:r}});var n=this.getExtensionString(),s={key:"MinMaxSize"};this.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:s}});var a={key:"And"};this.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:a}});var l;this.uploadSettings.minFileSize&&this.uploadSettings.maxFileSize?l=" "+s.value+" "+this.formatSizeUnits(this.uploadSettings.minFileSize)+" "+a.value+" "+this.formatSizeUnits(this.uploadSettings.maxFileSize):this.uploadSettings.minFileSize?(s.key="MinSize",this.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:s}}),l=" "+s.value+" "+this.formatSizeUnits(this.uploadSettings.minFileSize)):this.uploadSettings.maxFileSize&&(s.key="MaxSize",this.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:s}}),l=" "+s.value+" "+this.formatSizeUnits(this.uploadSettings.maxFileSize)),l?i.textContent=r.value+n+l:i.textContent=r.value+n}},t.prototype.okBtn=function(i,r,n){if(r){this.noPushUndo=!1;var s={activePoint:{startX:0,startY:0,endX:0,endY:0,width:0,height:0},flipObjColl:[],triangle:[],triangleRatio:[],order:null};this.notify("selection",{prop:"setTempActObj",onPropertyChange:!1,value:{obj:s}})}var a=this.element.querySelector(".e-contextual-toolbar-wrapper");a&&a.classList.remove("e-frame-wrapper");var l=!1,h;this.isResizeOkBtn=!0;var c=this.element.querySelector("#"+this.element.id+"_aspectratio"),u=this.element.querySelector("#"+this.element.id+"_nonaspectratio"),p=this.element.querySelector(".e-ie-toolbar-aspect-ratio-btn"),f=this.element.querySelector(".e-ie-toolbar-nonaspect-ratio-btn");if(this.activeObj.shape!==void 0&&(h=this.activeObj.shape.split("-")),(h===void 0&&this.currObjType.isCustomCrop||h!==void 0&&h[0]==="crop")&&(l=!0),this.allowDownScale=!0,(this.activeObj.shape&&this.activeObj.shape!=="image"||this.togglePen)&&!l){var g={shapeSettingsObj:{}};this.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:g}});var v=g.shapeSettingsObj;this.togglePen&&(v.type=xi.FreehandDraw);var y={action:"apply",currentShapeSettings:m({},v,{},!0)};!this.currObjType.isRedact&&(r||this.isShapeDrawing)&&(this.isShapeDrawing&&(y.action="draw-end"),this.trigger("shapeChange",y)),this.editCompleteArgs=y,this.currObjType.isRedact&&(this.currObjType.isRedact=!1)}if(c||u){var C={width:null,height:null};this.notify("selection",{prop:"getNumTextValue",onPropertyChange:!1,value:{obj:C}});var b={x:C.width,y:C.height},M={prevCropObj:this.prevCropObj},S={prevObj:this.prevObj};if(b&&b.x&&b.y&&M.prevCropObj&&S.prevObj){u||f&&!f.classList.contains("e-hidden")?this.notify("transform",{prop:"resize",value:{width:b.x,height:b.y,isAspectRatio:!1}}):(c||p&&!p.classList.contains("e-hidden"))&&this.notify("transform",{prop:"resize",value:{width:b.x,height:null,isAspectRatio:!0}}),this.isResize=!1,this.aspectWidth=b.x,this.aspectHeight=b.y,this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:!1,isCropping:!1,isZooming:null,cType:null}}),this.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-this.transform.zoomFactor,zoomPoint:null,isResize:!0}}),this.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:S.prevObj.defaultZoom,zoomPoint:null,isResize:!0}}),S.prevObj.zoomFactor&&this.setProperties({zoomSettings:{zoomFactor:S.prevObj.zoomFactor}},!0),this.notify("transform",{prop:"setPreviousZoomValue",onPropertyChange:!1,value:{previousZoomValue:this.zoomSettings.zoomFactor}}),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"resize",previousObj:S.prevObj,previousObjColl:S.prevObj.objColl,previousPointColl:S.prevObj.pointColl,previousSelPointColl:S.prevObj.selPointColl,previousCropObj:M.prevCropObj,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}});var N=this.cancelCropSelection;N&&(d(u)||!u)&&(N.previousObj.aspectWidth=N.currentObj.aspectWidth=this.aspectWidth,N.previousObj.aspectHeight=N.currentObj.aspectHeight=this.aspectHeight,N.previousCropObj=m({},this.cropObj,{},!0),N.currentCropObj=m({},this.cropObj,{},!0),this.notify("draw",{prop:"updateCropSelObj"})),this.cancelCropSelection=null}else b&&(b.x===0||b.y===0)?this.notify("draw",{prop:"performCancel",value:{isContextualToolbar:null}}):this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:!1,isCropping:!1,isZooming:null,cType:null}});this.isAspectRatio=!1}else if(n){var x=!1;this.aspectWidth&&this.aspectHeight?this.notify("transform",{prop:"resize",value:{width:this.aspectWidth,height:this.aspectHeight,isAspectRatio:!1}}):this.aspectWidth&&(this.notify("transform",{prop:"resize",value:{width:this.aspectWidth,height:null,isAspectRatio:!0}}),this.aspectHeight=this.aspectWidth/(this.img.destWidth/this.img.destHeight),x=!0),this.isResize=!1,this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:!1,isCropping:!1,isZooming:null,cType:null}}),this.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-this.transform.zoomFactor,zoomPoint:null,isResize:!0}}),this.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:this.prevObj.defaultZoom,zoomPoint:null,isResize:!0}}),this.prevObj.zoomFactor&&this.setProperties({zoomSettings:{zoomFactor:this.prevObj.zoomFactor}},!0),this.notify("transform",{prop:"setPreviousZoomValue",onPropertyChange:!1,value:{previousZoomValue:this.zoomSettings.zoomFactor}}),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"resize",previousObj:this.prevObj,previousObjColl:this.prevObj.objColl,previousPointColl:this.prevObj.pointColl,previousSelPointColl:this.prevObj.selPointColl,previousCropObj:this.prevCropObj,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}});var A=this.cancelCropSelection;A&&x&&(A.previousObj.aspectWidth=A.currentObj.aspectWidth=this.aspectWidth,A.previousObj.aspectHeight=A.currentObj.aspectHeight=this.aspectHeight,A.previousCropObj=m({},this.cropObj,{},!0),A.currentCropObj=m({},this.cropObj,{},!0),this.notify("draw",{prop:"updateCropSelObj"})),this.cancelCropSelection=null,this.isAspectRatio=!1}var U=this.element.querySelector(".e-contextual-toolbar-wrapper .e-toolbar-item.e-selected"),z={bool:!1};this.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:z}});var J={bool:null};this.notify("toolbar",{prop:"getFrameToolbar",onPropertyChange:!1,value:{obj:J}});var R=document.querySelector("#"+this.element.id+"_sliderWrapper");if(U&&(this.currentFilter=U.children[0].children[0].id.replace("Canvas","")),l){if(this.transform.straighten!==0&&(this.panPoint.totalPannedPoint.x!==0||this.panPoint.totalPannedPoint.y!==0||this.panPoint.totalPannedClientPoint.x!==0||this.panPoint.totalPannedClientPoint.y!==0)){var _=this.prevStraightenedDegree;this.prevStraightenedDegree=this.transform.straighten,this.setStraighten(this.transform.straighten-3),this.setStraighten(this.transform.straighten+3),this.prevStraightenedDegree=_}this.isCroppedEvent=this.crop()}else if(this.togglePen){if(this.freeHandDraw(!1),!this.isMaskImage){var B={penStrokeWidth:null};this.notify("freehand-draw",{prop:"getPenStrokeWidth",onPropertyChange:!1,value:{obj:B}}),this.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}),this.notify("freehand-draw",{prop:"setPenStrokeWidth",onPropertyChange:!1,value:{value:B.penStrokeWidth}})}this.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),this.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}})}else if(this.textArea.style.display==="block"||this.textArea.style.display==="inline-block")this.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}}),this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1}),d(i)&&this.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}),this.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),this.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}});else if((R||this.currObjType.isFiltered)&&!this.drawingShape&&this.activeObj.shape!=="redact"){this.initialAdjustmentValue=this.canvasFilter=this.lowerContext.filter,this.currObjType.isFiltered=!1;var E={value:null};this.notify("draw",{prop:"getTempAdjustmentValue",value:{obj:E}}),(!R||R.parentElement.previousElementSibling.textContent!=="Opacity")&&this.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}),(this.activeObj.activePoint.width!==0&&this.activeObj.activePoint.height!==0||this.activeObj.shape==="path"&&this.activeObj.pointColl.length>0)&&this.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:null}})}else if(z.bool)this.notify("freehand-draw",{prop:"applyFhd",onPropertyChange:!1}),this.notify("selection",{prop:"setFreehandDrawCustomized",value:{isFreehandDrawCustomized:!1}}),this.notify("toolbar",{prop:"destroy-qa-toolbar"}),this.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}),this.notify("freehand-draw",{prop:"resetFreehandDrawSelectedId",onPropertyChange:!1});else if(this.activeObj.activePoint.width!==0||this.activeObj.activePoint.height!==0||this.activeObj.shape==="path"&&this.activeObj.pointColl.length>0)this.activeObj.shape==="image"&&this.notify("draw",{prop:"setImageApply",onPropertyChange:!1,value:{bool:!0}}),this.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:null}});else{if(JSON.stringify(this.frameObj)!==JSON.stringify(this.tempFrameObj)){var L={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:L}}),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"frame",previousObj:L.currObj,previousObjColl:L.currObj.objColl,previousPointColl:L.currObj.pointColl,previousSelPointColl:L.currObj.selPointColl,previousCropObj:m({},this.cropObj,{},!0),previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}});var P={type:this.toPascalCase(this.frameObj.type),color:this.frameObj.color,gradientColor:this.frameObj.gradientColor,size:this.frameObj.size,inset:this.frameObj.inset,offset:this.frameObj.offset,borderRadius:this.frameObj.radius,frameLineStyle:this.toPascalCase(this.frameObj.border),lineCount:this.frameObj.amount},j={type:this.toPascalCase(this.tempFrameObj.type),color:this.tempFrameObj.color,gradientColor:this.tempFrameObj.gradientColor,size:this.tempFrameObj.size,inset:this.tempFrameObj.inset,offset:this.tempFrameObj.offset,borderRadius:this.tempFrameObj.radius,frameLineStyle:this.toPascalCase(this.tempFrameObj.border),lineCount:this.tempFrameObj.amount},k={cancel:!1,previousFrameSetting:j,currentFrameSetting:P};this.editCompleteArgs=k,this.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}),this.tempFrameObj=m({},this.frameObj,{},!0)}this.notify("draw",{prop:"resetFrameZoom",onPropertyChange:!1,value:{isOk:!0}})}z.isCropToolbar||(this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:!1,isCropping:null,isZooming:null,cType:null}}),this.currObjType.isRedact=!1),this.notify("draw",{prop:"setNewPath",value:{bool:!1}}),this.transform.zoomFactor=this.transform.defaultZoomFactor,this.notify("selection",{prop:"setCurrentDrawingShape",onPropertyChange:!1,value:{value:""}}),this.isResizeOkBtn=!1,this.notify("draw",{prop:"redrawDownScale"}),this.isChangesSaved=this.isFinetuneBtnClick=!1,r&&(this.drawingShape=null,this.notify("draw",{prop:"resetTempObjColl"}),this.notify("draw",{prop:"resetTempPointColl"}))},t.prototype.triggerEditCompleteEvent=function(i){i.action==="shape-insert"&&i.actionEventArgs&&i.actionEventArgs.currentShapeSettings&&i.actionEventArgs.currentShapeSettings.type.toString()==="Redact"&&(i.action="redact"),this.trigger("editComplete",i),this.editCompleteArgs=null},t.prototype.getObjFromId=function(i){var r;if(this.activeObj.currIndex&&this.activeObj.currIndex===i)r=m({},this.activeObj,{},!0);else for(var n=0;n<this.shapeColl.length;n++){var s=this.shapeColl[n].id?this.shapeColl[n].id:this.shapeColl[n].currIndex;if(s===i){r=m({},this.shapeColl[n],{},!0);break}}return r},t.prototype.setTempFilterProperties=function(){this.upperCanvas.style.display="block",this.cropSelectedState();var i={adjustmentLevel:null};this.notify("filter",{prop:"getAdjustmentLevel",onPropertyChange:!1,value:{obj:i}}),this.lowerContext.filter=this.initialAdjustmentValue,this.notify("draw",{prop:"setTempAdjustmentValue",value:{tempAdjustmentValue:this.lowerContext.filter}}),this.notify("filter",{prop:"setTempAdjustmentLevel",onPropertyChange:!1,value:{tempAdjustmentLevel:m({},i.adjustmentLevel,{},!0)}}),this.notify("draw",{prop:"setTempFilter",value:{tempFilter:this.currentFilter}});var r={undoRedoStep:null};this.notify("undo-redo",{prop:"getUndoRedoStep",value:{obj:r}}),this.notify("draw",{prop:"setTempUndoRedoStep",value:{tempUndoRedoStep:r.undoRedoStep}})},t.prototype.cropSelectedState=function(){this.activeObj.shape&&this.activeObj.shape.split("-")[0]==="crop"&&this.okBtn()},t.prototype.getCurrentCanvasData=function(){var i=m({},this.frameObj,{},!0);this.frameObj={type:"none",color:"#fff",size:20,inset:20,offset:20,radius:0,amount:1,border:"solid",gradientColor:""};var r=this.lowerContext.filter;this.lowerContext.filter=this.canvasFilter="none";var n=m([],this.objColl,null,!0),s=m([],this.pointColl,null,!0);this.objColl=[],this.pointColl=[],this.freehandCounter=0,this.notify("draw",{prop:"render-image",value:{isMouseWheel:!1}});var a=this.element.querySelector(".e-contextual-toolbar-wrapper");a&&a.classList.add("e-hide");var l=this.getImageData();return a&&a.classList.remove("e-hide"),D.isDevice||this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:!0,isCropping:!1}}),this.element.querySelector("#"+this.element.id+"_contextualToolbarArea").classList.remove("e-hide"),this.objColl=n,this.pointColl=s,this.freehandCounter=s.length,this.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"iterate",pen:"iterate",isPreventApply:null}}),this.lowerContext.filter=this.canvasFilter=r,this.frameObj=i,l},t.prototype.setCurrAdjustmentValue=function(i,r){var n={finetune:this.getFinetuneOption(i),value:r,cancel:!1};this.trigger("finetuneValueChanging",n),this.editCompleteArgs=n,!n.cancel&&this.notify("filter",{prop:"setCurrAdjValue",value:{type:i.toLowerCase(),value:r}})},t.prototype.getSquarePointForPath=function(i){var r={startX:0,startY:0,endX:0,endY:0,width:0,height:0};if(i.pointColl.length>0){r={startX:i.pointColl[0].x,startY:i.pointColl[0].y,endX:i.pointColl[0].x,endY:i.pointColl[0].y};for(var n=1;n<i.pointColl.length;n++)i.pointColl[n].x<r.startX&&(r.startX=i.pointColl[n].x),i.pointColl[n].y<r.startY&&(r.startY=i.pointColl[n].y),i.pointColl[n].x>r.endX&&(r.endX=i.pointColl[n].x),i.pointColl[n].y>r.endY&&(r.endY=i.pointColl[n].y);r.width=r.endX-r.startX,r.height=r.endY-r.startY}return r},t.prototype.getSelectionType=function(i){i=i==="crop-custom"?"CropCustom":i;var r={CropCustom:"Custom",CropSquare:"Square",CropCircle:"Circle","Crop3:2":"3:2","Crop4:3":"4:3","Crop5:4":"5:4","Crop7:5":"7:5","Crop16:9":"16:9","Crop2:3":"2:3","Crop3:4":"3:4","Crop4:5":"4:5","Crop5:7":"5:7","Crop9:16":"9:16"};return r[""+i]?r[""+i]:i.split("Crop")[1]},t.prototype.clearContext=function(i){i.clearRect(0,0,i.canvas.width,i.canvas.height),i.clearRect(0,0,i.canvas.height,i.canvas.width)},t.prototype.updateArrow=function(i,r){var n=!1,s=this.objColl.length;this.notify("shape",{prop:"pushActItemIntoObj"}),s!==this.objColl.length&&(n=!0);var a=m({},this.cropObj,{},!0),l={currObj:{}},h={shapeSettingsObj:{}};this.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:h}});var c=h.shapeSettingsObj;this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:l}});var u=l.currObj;if(u.objColl=m([],this.objColl,[],!0),u.pointColl=m([],this.pointColl,[],!0),u.afterCropActions=m([],this.afterCropActions,[],!0),n&&this.objColl.pop(),i==="startArrow"?this.activeObj.start=this.getTextFromId(r):i==="endArrow"&&(this.activeObj.end=this.getTextFromId(r)),this.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:null,strokeColor:null,fillColor:null,strokeWidth:this.activeObj.strokeSettings.strokeWidth}}),this.objColl.push(this.activeObj),(this.activeObj.activePoint.width!==0||this.activeObj.activePoint.height!==0)&&this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:u,previousObjColl:u.objColl,previousPointColl:u.pointColl,previousCropObj:a,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}}),D.isDevice){if(document.getElementById(this.element.id+"_bottomToolbar")){var p=$(this.element.id+"_bottomToolbar","toolbar");p.refreshOverflow()}}else if(document.getElementById(this.element.id+"_toolbar")){var f=$(this.element.id+"_toolbar","toolbar");f.refreshOverflow()}var g={action:i,currentShapeSettings:m({},c,{},!0)};this.trigger("shapeChange",g),this.editCompleteArgs=g},t.prototype.updateFontFamily=function(i){this.notify("selection",{prop:"setInitialTextEdit",value:{bool:!1}});var r=!1,n=this.objColl.length;this.notify("shape",{prop:"pushActItemIntoObj"}),n!==this.objColl.length&&(r=!0);var s=m([],this.objColl,[],!0),a=m({},this.cropObj,{},!0),l={shapeSettingsObj:{}};this.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:l}});var h=l.shapeSettingsObj,c={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:c}});var u=c.currObj;u.objColl=m([],this.objColl,[],!0),u.pointColl=m([],this.pointColl,[],!0),u.afterCropActions=m([],this.afterCropActions,[],!0);var p={selPointColl:null};if(this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:p}}),u.selPointColl=m([],p.selPointColl,[],!0),r&&this.objColl.pop(),this.textArea.style.display==="block"||this.textArea.style.display==="inline-block"){this.notify("shape",{prop:"updateFontRatio",onPropertyChange:!1,value:{obj:this.activeObj,isTextArea:!0}});var f=this.activeObj.textSettings.fontFamily;this.activeObj.textSettings.fontFamily=this.toPascalCase(i),(this.activeObj.activePoint.width!==0||this.activeObj.activePoint.height!==0)&&this.notify("shape",{prop:"redraw-text"}),this.objColl.push(this.activeObj),(this.activeObj.activePoint.width!==0||this.activeObj.activePoint.height!==0)&&this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"textAreaCustomization",previousObj:u,previousObjColl:u.objColl,previousPointColl:u.pointColl,previousSelPointColl:u.selPointColl,previousCropObj:a,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.objColl.pop(),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height);var g=this.activeObj.activePoint.width+this.activeObj.textSettings.fontSize*.25;this.textArea.style.width=g+"px",this.textArea.style.fontFamily=this.toPascalCase(i),this.activeObj.textSettings.fontFamily=f,this.notify("shape",{prop:"updateFontStyles",onPropertyChange:!1,value:{isTextBox:null}})}else{this.notify("shape",{prop:"updateFontRatio",onPropertyChange:!1,value:{obj:this.activeObj,isTextArea:null}});var v=this.activeObj.textSettings.fontFamily=this.toPascalCase(i);this.notify("shape",{prop:"setTextSettings",onPropertyChange:!1,value:{textSettings:null,fontFamily:v,fontSize:null}}),(this.activeObj.activePoint.width!==0||this.activeObj.activePoint.height!==0)&&this.notify("shape",{prop:"redraw-text"}),this.objColl.push(this.activeObj),(this.activeObj.activePoint.width!==0||this.activeObj.activePoint.height!==0)&&this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:u,previousObjColl:s,previousPointColl:m([],this.pointColl,[],!0),previousSelPointColl:u.selPointColl,previousCropObj:a,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}})}var y={action:"font-family",currentShapeSettings:m({},h,{},!0)};y.currentShapeSettings.fontFamily=this.textArea.style.fontFamily,this.trigger("shapeChange",y),this.editCompleteArgs=y},t.prototype.updateFontSize=function(i){var r=i;this.notify("selection",{prop:"setInitialTextEdit",value:{bool:!1}});var n=!1,s=this.objColl.length;this.notify("shape",{prop:"pushActItemIntoObj"}),s!==this.objColl.length&&(n=!0);var a=m({},this.cropObj,{},!0),l={shapeSettingsObj:{}};this.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:l}});var h=l.shapeSettingsObj,c={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:c}});var u=c.currObj;u.objColl=m([],this.objColl,[],!0),u.pointColl=m([],this.pointColl,[],!0),u.afterCropActions=m([],this.afterCropActions,[],!0);var p={selPointColl:null};if(this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:p}}),u.selPointColl=m([],p.selPointColl,[],!0),n&&this.objColl.pop(),this.textArea.style.display==="block"||this.textArea.style.display==="inline-block"){this.notify("shape",{prop:"updateFontRatio",onPropertyChange:!1,value:{obj:this.activeObj,isTextArea:!0}});var f=this.activeObj.textSettings.fontSize;this.activeObj.textSettings.fontSize=parseInt(this.fontSizeColl[parseInt(r,10)-1].text,10),this.objColl.push(this.activeObj),(this.activeObj.activePoint.width!==0||this.activeObj.activePoint.height!==0)&&this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"textAreaCustomization",previousObj:u,previousObjColl:u.objColl,previousPointColl:u.pointColl,previousSelPointColl:u.selPointColl,previousCropObj:a,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.objColl.pop();var g="";this.textArea.style.fontWeight==="bold"&&(g="bold "),this.textArea.style.fontStyle==="italic"&&(g="italic "),this.textArea.style.fontWeight==="bold"&&this.textArea.style.fontStyle==="italic"&&(g="italic bold "),this.upperContext.font=g+this.activeObj.textSettings.fontSize+"px "+this.textArea.style.fontFamily;var v=this.textArea.value.split(`
`),y={maxText:""};this.notify("shape",{prop:"getMaxText",onPropertyChange:!1,value:{isTextBox:!0,text:null,obj:y}});var C=y.maxText,b=this.upperContext.measureText(C).width+this.activeObj.textSettings.fontSize*.5;this.textArea.style.width=b+"px",this.textArea.style.height=v.length*(this.activeObj.textSettings.fontSize+this.activeObj.textSettings.fontSize*.25)+"px",this.activeObj.textSettings.fontSize=f,this.upperContext.font=this.activeObj.textSettings.fontSize+"px "+this.activeObj.textSettings.fontFamily,this.textArea.style.fontSize=parseInt(this.fontSizeColl[parseInt(r,10)-1].text,10)+"px",this.textArea.style.fontFamily==="georgia"&&(this.textArea.style.width=parseFloat(this.textArea.style.width)+parseFloat(this.textArea.style.fontSize)+"px")}else{this.notify("shape",{prop:"updateFontRatio",onPropertyChange:!1,value:{obj:this.activeObj,isTextArea:null}});var M=this.activeObj.textSettings.fontSize=parseInt(this.fontSizeColl[parseInt(r,10)-1].text,10);this.notify("shape",{prop:"setTextSettings",onPropertyChange:!1,value:{textSettings:null,fontFamily:null,fontSize:M}}),this.upperContext.font=this.activeObj.textSettings.fontSize+"px "+this.activeObj.textSettings.fontFamily;var v=this.activeObj.keyHistory.split(`
`),y={maxText:""};this.notify("shape",{prop:"getMaxText",onPropertyChange:!1,value:{isTextBox:null,text:null,obj:y}});var S=y.maxText,b=this.upperContext.measureText(S).width+this.activeObj.textSettings.fontSize*.5,N=v.length*(this.activeObj.textSettings.fontSize+this.activeObj.textSettings.fontSize*.25);(this.activeObj.activePoint.width!==0||this.activeObj.activePoint.height!==0)&&(this.notify("selection",{prop:"setTextSelection",onPropertyChange:!1,value:{width:b,height:N}}),this.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:this.activeObj.activePoint,obj:this.activeObj,isMouseMove:null,x:null,y:null}}),this.notify("shape",{prop:"redraw-text"})),this.objColl.push(this.activeObj),(this.activeObj.activePoint.width!==0||this.activeObj.activePoint.height!==0)&&this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:u,previousObjColl:u.objColl,previousPointColl:u.pointColl,previousSelPointColl:u.selPointColl,previousCropObj:a,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}})}var x={action:"font-size",currentShapeSettings:m({},h,{},!0)};x.currentShapeSettings.fontSize=this.activeObj.textSettings.fontSize,this.trigger("shapeChange",x),this.editCompleteArgs=x},t.prototype.updateFontColor=function(i,r){this.notify("selection",{prop:"setInitialTextEdit",value:{bool:!1}});var n=!1,s=this.objColl.length;this.notify("shape",{prop:"pushActItemIntoObj"}),s!==this.objColl.length&&(n=!0);var a=m({},this.cropObj,{},!0),l={shapeSettingsObj:{}};this.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:l}});var h=l.shapeSettingsObj,c={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:c}});var u=c.currObj;u.objColl=m([],this.objColl,[],!0),u.pointColl=m([],this.pointColl,[],!0),u.afterCropActions=m([],this.afterCropActions,[],!0);var p={selPointColl:null};if(this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:p}}),u.selPointColl=m([],p.selPointColl,[],!0),n&&this.objColl.pop(),this.textArea.style.display==="none")r==="Text"?(this.activeObj.strokeSettings.strokeColor=i,this.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:null,strokeColor:this.activeObj.strokeSettings.strokeColor,fillColor:null,strokeWidth:null}})):(this.activeObj.strokeSettings.fillColor=i,this.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:null,strokeColor:null,fillColor:this.activeObj.strokeSettings.fillColor,strokeWidth:null}})),this.togglePen||(this.activeObj.activePoint.width!==0||this.activeObj.activePoint.height!==0)&&(this.objColl.push(this.activeObj),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:u,previousObjColl:u.objColl,previousPointColl:u.pointColl,previousSelPointColl:u.selPointColl,previousCropObj:a,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}}));else if(this.textArea.style.display==="block"||this.textArea.style.display==="inline-block"){this.textArea.style[r==="Text"?"color":"backgroundColor"]=i;var f=r==="Text"?this.activeObj.strokeSettings.strokeColor:this.activeObj.strokeSettings.fillColor;this.activeObj.strokeSettings[r==="Text"?"strokeColor":"fillColor"]=i,(this.activeObj.activePoint.width!==0||this.activeObj.activePoint.height!==0)&&(this.objColl.push(this.activeObj),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"textAreaCustomization",previousObj:u,previousObjColl:u.objColl,previousPointColl:u.pointColl,previousSelPointColl:u.selPointColl,previousCropObj:a,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.objColl.pop()),this.activeObj.strokeSettings[r==="Text"?"strokeColor":"fillColor"]=f}else this.togglePen||(this.activeObj.activePoint.width!==0||this.activeObj.activePoint.height!==0)&&(this.objColl.push(this.activeObj),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:u,previousObjColl:u.objColl,previousPointColl:u.pointColl,previousSelPointColl:u.selPointColl,previousCropObj:a,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}}));var g={action:"font-color",currentShapeSettings:m({},h,{},!0)};g.currentShapeSettings.fillColor=i,this.trigger("shapeChange",g),this.editCompleteArgs=g},t.prototype.updateStrokeTextColor=function(i){this.notify("selection",{prop:"setInitialTextEdit",value:{bool:!1}});var r=!1,n=this.objColl.length;this.notify("shape",{prop:"pushActItemIntoObj"}),n!==this.objColl.length&&(r=!0);var s=m({},this.cropObj,{},!0),a={shapeSettingsObj:{}};this.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:a}});var l=a.shapeSettingsObj,h={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:h}});var c=h.currObj;c.objColl=m([],this.objColl,[],!0),c.pointColl=m([],this.pointColl,[],!0),c.afterCropActions=m([],this.afterCropActions,[],!0);var u={selPointColl:null};if(this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:u}}),c.selPointColl=m([],u.selPointColl,[],!0),r&&this.objColl.pop(),this.textArea.style.display==="none")this.activeObj.strokeSettings.outlineColor=i,this.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:null,strokeColor:null,fillColor:null,strokeWidth:null,outlineColor:this.activeObj.strokeSettings.outlineColor}}),this.togglePen||(this.activeObj.activePoint.width!==0||this.activeObj.activePoint.height!==0)&&(this.objColl.push(this.activeObj),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:c,previousObjColl:c.objColl,previousPointColl:c.pointColl,previousSelPointColl:c.selPointColl,previousCropObj:s,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}}));else if(this.textArea.style.display==="block"||this.textArea.style.display==="inline-block"){this.textArea.style.textShadow="-1px -1px 0 "+i+", 1px -1px 0 "+i+", -1px 1px 0 "+i+", 1px 1px 0 "+i;var p=this.activeObj.strokeSettings.outlineColor;this.activeObj.strokeSettings.outlineColor=i,(this.activeObj.activePoint.width!==0||this.activeObj.activePoint.height!==0)&&(this.objColl.push(this.activeObj),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"textAreaCustomization",previousObj:c,previousObjColl:c.objColl,previousPointColl:c.pointColl,previousSelPointColl:c.selPointColl,previousCropObj:s,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.objColl.pop()),this.activeObj.strokeSettings.outlineColor=p}else this.togglePen||(this.activeObj.activePoint.width!==0||this.activeObj.activePoint.height!==0)&&(this.objColl.push(this.activeObj),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:c,previousObjColl:c.objColl,previousPointColl:c.pointColl,previousSelPointColl:c.selPointColl,previousCropObj:s,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}}));var f={action:"font-color",currentShapeSettings:m({},l,{},!0)};f.currentShapeSettings.fillColor=i,this.trigger("shapeChange",f),this.editCompleteArgs=f},t.prototype.updatePenStrokeWidth=function(i){var r=m([],this.pointColl,[],!0);this.updateFreehandDrawColorChange();var n=m({},this.cropObj,{},!0),s={shapeSettingsObj:{}};this.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:s}});var a=s.shapeSettingsObj,l={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:l}});var h=l.currObj;h.objColl=m([],this.objColl,[],!0),h.pointColl=m([],this.pointColl,[],!0),h.afterCropActions=m([],this.afterCropActions,[],!0);var c={selPointColl:null};this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:c}}),h.selPointColl=m([],c.selPointColl,[],!0),this.pointColl=r,this.notify("selection",{prop:"setFreehandDrawCustomized",value:{isFreehandDrawCustomized:!0}}),this.setPenStroke(i);var u={bool:!1};if(this.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:u}}),u.bool){var p={penStrokeWidth:null};this.notify("freehand-draw",{prop:"getPenStrokeWidth",onPropertyChange:!1,value:{obj:p}}),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.notify("freehand-draw",{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:null,strokeWidth:p.penStrokeWidth}});var f={freehandSelectedIndex:null};this.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:f}}),this.pointColl[f.freehandSelectedIndex].strokeWidth=p.penStrokeWidth,this.notify("draw",{prop:"render-image",value:{isMouseWheel:null}}),this.notify("draw",{prop:"redrawDownScale"}),this.notify("freehand-draw",{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:null,strokeWidth:p.penStrokeWidth}}),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"freehanddrawCustomized",previousObj:h,previousObjColl:h.objColl,previousPointColl:h.pointColl,previousSelPointColl:h.selPointColl,previousCropObj:n,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}})}a.type=xi.FreehandDraw;var g={action:"stroke-width",currentShapeSettings:m({},a,{},!0)};g.currentShapeSettings.strokeWidth=this.activeObj.strokeSettings.strokeWidth,this.trigger("shapeChange",g),this.editCompleteArgs=g},t.prototype.updatePenStrokeColor=function(i){var r=m([],this.pointColl,[],!0);this.updateFreehandDrawColorChange();var n=m({},this.cropObj,{},!0),s={shapeSettingsObj:{}};this.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:s}});var a=s.shapeSettingsObj,l={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:l}});var h=l.currObj;h.objColl=m([],this.objColl,[],!0),h.pointColl=m([],this.pointColl,[],!0),h.afterCropActions=m([],this.afterCropActions,[],!0);var c={selPointColl:null};this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:c}}),h.selPointColl=m([],c.selPointColl,[],!0),this.pointColl=r,this.notify("selection",{prop:"setFreehandDrawCustomized",value:{isFreehandDrawCustomized:!0}}),this.activeObj.strokeSettings.strokeColor=i;var u={freehandSelectedIndex:null};this.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:u}}),u.freehandSelectedIndex!==null&&u.freehandSelectedIndex!==void 0&&(this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.notify("draw",{prop:"render-image",value:{isMouseWheel:null}}),this.notify("draw",{prop:"redrawDownScale"}),this.notify("freehand-draw",{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:null,strokeWidth:null}}));var p={bool:!1};if(this.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:p}}),p.bool){var f={freehandSelectedIndex:null};this.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:f}}),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.pointColl[f.freehandSelectedIndex].strokeColor=i,this.notify("freehand-draw",{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:i}}),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"freehanddrawCustomized",previousObj:h,previousObjColl:h.objColl,previousPointColl:h.pointColl,previousSelPointColl:h.selPointColl,previousCropObj:n,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}})}else this.togglePen||this.notify("selection",{prop:"redrawShape",value:{obj:this.activeObj}});a.type=xi.FreehandDraw;var g={action:"stroke-color",currentShapeSettings:m({},a,{},!0)};g.currentShapeSettings.strokeColor=i,this.trigger("shapeChange",g),this.editCompleteArgs=g},t.prototype.updateStrokeWidth=function(i,r,n){if(this.activeObj.shape&&(this.activeObj.shape!=="path"||this.activeObj.shape==="path"&&this.activeObj.pointColl.length>0)){var s={shapeSettingsObj:{}};this.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:s}});var a=s.shapeSettingsObj,l=!1,h=this.objColl.length;this.notify("shape",{prop:"pushActItemIntoObj"}),h!==this.objColl.length&&(l=!0);var c=m({},this.cropObj,{},!0),u={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:u}});var p=u.currObj;p.objColl=m([],this.objColl,[],!0),p.pointColl=m([],this.pointColl,[],!0),p.afterCropActions=m([],this.afterCropActions,[],!0);var f={selPointColl:null};this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:f}}),p.selPointColl=m([],f.selPointColl,[],!0),l&&this.objColl.pop(),this.activeObj.strokeSettings[r==="width"?n==="text"?"outlineWidth":"strokeWidth":"radius"]=parseInt(i,10),(this.activeObj.shape==="rectangle"||this.activeObj.shape==="ellipse")&&(this.activeObj.strokeSettings[r==="width"?n==="text"?"outlineWidth":"strokeWidth":"radius"]=parseInt(i,10)-1),this.activeObj.strokeSettings[r==="width"?n==="text"?"outlineWidth":"strokeWidth":"radius"]*=2,r==="width"?n==="text"?this.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:null,strokeColor:null,fillColor:null,strokeWidth:null,radius:null,outlineWidth:this.activeObj.strokeSettings.outlineWidth}}):this.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:null,strokeColor:null,fillColor:null,strokeWidth:this.activeObj.strokeSettings.strokeWidth,radius:null,outlineWidth:null}}):this.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:null,strokeColor:null,fillColor:null,strokeWidth:null,radius:this.activeObj.strokeSettings.radius}}),this.objColl.push(this.activeObj),(this.activeObj.activePoint.width!==0||this.activeObj.activePoint.height!==0)&&this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:p,previousObjColl:p.objColl,previousPointColl:p.pointColl,previousSelPointColl:p.selPointColl,previousCropObj:c,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}});var g={action:"stroke-width",currentShapeSettings:m({},a,{},!0)};g.currentShapeSettings[r==="width"?n==="text"?"outlineWidth":"strokeWidth":"radius"]=this.activeObj.strokeSettings[r==="width"?n==="text"?"outlineWidth":"strokeWidth":"radius"],this.trigger("shapeChange",g),this.editCompleteArgs=g}else this.activeObj.shape&&this.activeObj.shape==="path"&&this.activeObj.pointColl.length===0&&(this.activeObj.strokeSettings.strokeWidth=parseInt(i,10),this.activeObj.strokeSettings.strokeWidth*=2,r==="width"?n==="text"?this.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:null,strokeColor:null,fillColor:null,strokeWidth:null,radius:null,outlineWidth:this.activeObj.strokeSettings.outlineWidth}}):this.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:null,strokeColor:null,fillColor:null,strokeWidth:this.activeObj.strokeSettings.strokeWidth,radius:null,outlineWidth:null}}):this.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:null,strokeColor:null,fillColor:null,strokeWidth:null,radius:this.activeObj.strokeSettings.radius}}))},t.prototype.updateStrokeColor=function(i){var r={shapeSettingsObj:{}};this.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:r}});var n=r.shapeSettingsObj;if(this.activeObj.shape&&(this.activeObj.shape!=="path"||this.activeObj.shape==="path"&&this.activeObj.pointColl.length>0)){var s=!1,a=this.objColl.length;this.notify("shape",{prop:"pushActItemIntoObj"}),a!==this.objColl.length&&(s=!0);var l=m({},this.cropObj,{},!0),h={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:h}});var c=h.currObj;c.objColl=m([],this.objColl,[],!0),c.pointColl=m([],this.pointColl,[],!0),c.afterCropActions=m([],this.afterCropActions,[],!0);var u={selPointColl:null};this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:u}}),c.selPointColl=m([],u.selPointColl,[],!0),s&&this.objColl.pop(),this.activeObj.strokeSettings.strokeColor=i,this.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:null,strokeColor:this.activeObj.strokeSettings.strokeColor,fillColor:null,strokeWidth:null}}),this.togglePen||(this.objColl.push(this.activeObj),(this.activeObj.activePoint.width!==0||this.activeObj.activePoint.height!==0)&&this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:c,previousObjColl:c.objColl,previousPointColl:c.pointColl,previousSelPointColl:c.selPointColl,previousCropObj:l,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}}))}else this.activeObj.shape&&this.activeObj.shape==="path"&&this.activeObj.pointColl.length===0&&(this.activeObj.strokeSettings.strokeColor=i,this.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:null,strokeColor:this.activeObj.strokeSettings.strokeColor,fillColor:null,strokeWidth:null}}));var p={action:"stroke-color",currentShapeSettings:m({},n,{},!0)};p.currentShapeSettings.strokeColor=i,this.trigger("shapeChange",p),this.editCompleteArgs=p},t.prototype.updateFillColor=function(i){var r={shapeSettingsObj:{}};this.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:r}});var n=r.shapeSettingsObj,s=!1,a=this.objColl.length;this.notify("shape",{prop:"pushActItemIntoObj"}),a!==this.objColl.length&&(s=!0);var l=m({},this.cropObj,{},!0),h={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:h}});var c=h.currObj;c.objColl=m([],this.objColl,[],!0),c.pointColl=m([],this.pointColl,[],!0),c.afterCropActions=m([],this.afterCropActions,[],!0);var u={selPointColl:null};this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:u}}),c.selPointColl=m([],u.selPointColl,[],!0),s&&this.objColl.pop(),this.activeObj.strokeSettings.fillColor=i,this.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:null,strokeColor:null,fillColor:this.activeObj.strokeSettings.fillColor,strokeWidth:null}}),this.objColl.push(this.activeObj),(this.activeObj.activePoint.width!==0||this.activeObj.activePoint.height!==0)&&this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:c,previousObjColl:c.objColl,previousPointColl:c.pointColl,previousSelPointColl:c.selPointColl,previousCropObj:l,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}});var p={action:"fill-color",currentShapeSettings:m({},n,{},!0)};this.trigger("shapeChange",p),this.editCompleteArgs=p},t.prototype.horizontalFlip=function(i,r){var n,s;if(d(r)){d(this.activeObj.imageRatio)&&this.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),this.notify("shape",{prop:"pushActItemIntoObj"}),n=m({},this.cropObj,{},!0);var a={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:a}}),s=a.currObj,s.objColl=m([],this.objColl,[],!0),s.pointColl=m([],this.pointColl,[],!0),s.afterCropActions=m([],this.afterCropActions,[],!0);var l={selPointColl:null};this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:l}}),s.selPointColl=m([],l.selPointColl,[],!0),this.objColl.pop()}this.notify("toolbar",{prop:"refreshSlider"}),i.clearRect(0,0,this.activeObj.imageCanvas.width,this.activeObj.imageCanvas.height);var h=this.duplicateImage();this.notify("draw",{prop:"downScaleImgCanvas",onPropertyChange:!1,value:{ctx:this.activeObj.imageCanvas.getContext("2d"),isImgAnnotation:!0,isHFlip:!0,isVFlip:null}}),this.activeObj.activePoint=h,this.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}}),d(r)&&(this.objColl.push(this.activeObj),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"imageHFlip",previousObj:s,previousObjColl:s.objColl,previousPointColl:s.pointColl,previousSelPointColl:s.selPointColl,previousCropObj:n,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}}))},t.prototype.verticalFlip=function(i,r){var n,s;if(d(r)){d(this.activeObj.imageRatio)&&this.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),this.notify("shape",{prop:"pushActItemIntoObj"}),n=m({},this.cropObj,{},!0);var a={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:a}}),s=a.currObj,s.objColl=m([],this.objColl,[],!0),s.pointColl=m([],this.pointColl,[],!0),s.afterCropActions=m([],this.afterCropActions,[],!0);var l={selPointColl:null};this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:l}}),s.selPointColl=m([],l.selPointColl,[],!0),this.objColl.pop()}this.notify("toolbar",{prop:"refreshSlider"}),i.clearRect(0,0,this.activeObj.imageCanvas.width,this.activeObj.imageCanvas.height);var h=this.duplicateImage();this.notify("draw",{prop:"downScaleImgCanvas",onPropertyChange:!1,value:{ctx:this.activeObj.imageCanvas.getContext("2d"),isImgAnnotation:!0,isHFlip:null,isVFlip:!0}}),this.activeObj.activePoint=h,this.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}}),d(r)&&(this.objColl.push(this.activeObj),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"imageVFlip",previousObj:s,previousObjColl:s.objColl,previousPointColl:s.pointColl,previousSelPointColl:s.selPointColl,previousCropObj:n,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}}))},t.prototype.rotateImage=function(i){var r,n;d(this.activeObj.imageRatio)&&this.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),this.notify("shape",{prop:"pushActItemIntoObj"}),r=m({},this.cropObj,{},!0);var s={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:s}}),n=s.currObj,n.objColl=m([],this.objColl,[],!0),n.pointColl=m([],this.pointColl,[],!0),n.afterCropActions=m([],this.afterCropActions,[],!0);var a={selPointColl:null};this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:a}}),n.selPointColl=m([],a.selPointColl,[],!0),this.objColl.pop(),this.notify("toolbar",{prop:"refreshSlider"}),i==="rotleft"?this.activeObj.rotatedAngle-=90*(Math.PI/180):this.activeObj.rotatedAngle+=90*(Math.PI/180),this.notify("selection",{prop:"updPtCollForShpRot",onPropertyChange:!1,value:{obj:this.activeObj}}),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}}),this.objColl.push(this.activeObj),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"imageRotate",previousObj:n,previousObjColl:n.objColl,previousPointColl:n.pointColl,previousSelPointColl:n.selPointColl,previousCropObj:r,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}}),this.notify("toolbar",{prop:"destroy-qa-toolbar"}),this.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}})},t.prototype.pascalToSplitWords=function(i){i=i.charAt(0).toUpperCase()+i.slice(1);var r=i.match(/[A-Z][a-z]+/g);return d(r)?i:r.map(function(n){return n.charAt(0).toUpperCase()+n.slice(1)}).join(" ")},t.prototype.getCurrAdjustmentValue=function(i){var r=100,n={freehandSelectedIndex:null};if(this.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:n}}),i==="transparency"&&this.togglePen){var s={penOpacity:1};this.notify("freehand-draw",{prop:"getPenOpacity",onPropertyChange:!1,value:{obj:s}}),r=s.penOpacity*100}else if(i==="transparency"&&n.freehandSelectedIndex!==null&&n.freehandSelectedIndex!==void 0)r=this.pointColl[n.freehandSelectedIndex].opacity*100;else{var s={adjustmentLevel:null};this.notify("filter",{prop:"getAdjustmentLevel",onPropertyChange:!1,value:{obj:s}});var a={brightness:s.adjustmentLevel.brightness,contrast:s.adjustmentLevel.contrast,hue:s.adjustmentLevel.hue,saturation:s.adjustmentLevel.saturation,opacity:s.adjustmentLevel.opacity,blur:s.adjustmentLevel.blur,exposure:s.adjustmentLevel.exposure,transparency:s.adjustmentLevel.transparency,straighten:this.transform.straighten};r=a[""+i]}return r},t.prototype.transformSelect=function(i){this.transform.straighten===0&&(i==="rotateleft"||i==="rotateright")&&this.activeObj.shape&&(["crop-2:3","crop-3:2","crop-3:4","crop-4:3","crop-4:5","crop-5:4","crop-5:7","crop-7:5","crop-9:16","crop-16:9"].indexOf(this.activeObj.shape)!==-1||this.activeObj.shape.indexOf("crop-")!==-1&&this.activeObj.shape!=="crop-custom"&&this.activeObj.shape!=="crop-square"&&this.activeObj.shape!=="crop-circle")&&(this.activeObj.shape="crop-"+this.activeObj.shape.split("-")[1].split(":")[1]+":"+this.activeObj.shape.split("-")[1].split(":")[0],this.notify("toolbar",{prop:"performCropTransformClick",value:{shape:this.activeObj.shape,isTransform:!0}})),this.isCropToolbar=!0,this.allowDownScale=!1;var r=this.transform.straighten,n=m({},this.activeObj,{},!0),s=this.transform.zoomFactor;this.prevEventSelectionPoint=m({},this.activeObj,{},!0);var a={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:a}}),this.prevEventObjPoint=a.currObj,this.prevEventObjPoint.objColl=m([],this.objColl,[],!0),this.prevEventObjPoint.pointColl=m([],this.pointColl,[],!0),this.prevEventObjPoint.afterCropActions=m([],this.afterCropActions,[],!0);var l={selPointColl:null};if(this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:l}}),this.prevEventObjPoint.selPointColl=m([],l.selPointColl,[],!0),this.transform.straighten!==0){this.transform.straighten=0,this.straightenBaseImageCanvas();for(var h=0,c=this.objColl.length;h<c;h++){var u=this.objColl[h].shape;u!=="line"&&u!=="arrow"&&u!=="path"&&(this.objColl[h].rotatedAngle-=r*(Math.PI/180),this.notify("selection",{prop:"updPtCollForShpRot",onPropertyChange:!1,value:{obj:this.objColl[h]}}))}this.notify("draw",{prop:"render-image",value:{isMouseWheel:!1}}),this.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:null}})}this.setInitialZoomState();var p=m({},this.activeObj,{},!0);if(this.notify("crop",{prop:"setTransformCrop",onPropertyChange:!1,value:{bool:!0}}),this.cropSelectedState(),this.notify("crop",{prop:"setTransformCrop",onPropertyChange:!1,value:{bool:!1}}),this.notify("draw",{prop:"resetCurrentSelectionPoint"}),this.updateImageTransformColl(i),this.notify("transform",{prop:"performTransformation",value:{text:i}}),this.isCropTab=!0,this.notify("draw",{prop:"moveToSelectionRange",value:{type:i,activeObj:p}}),this.isStraightening&&(i==="horizontalflip"||i==="verticalflip")&&(this.notify("draw",{prop:"resetStraightenDestPoints"}),this.notify("draw",{prop:"setDestForStraighten"})),r!==0){this.transform.straighten=r,this.straightenBaseImageCanvas();for(var h=0,c=this.objColl.length;h<c;h++){var u=this.objColl[h].shape;u!=="line"&&u!=="arrow"&&u!=="path"&&(this.objColl[h].rotatedAngle+=r*(Math.PI/180),this.notify("selection",{prop:"updPtCollForShpRot",onPropertyChange:!1,value:{obj:this.objColl[h]}}))}this.notify("shape",{prop:"drawAnnotations",onPropertyChange:!1,value:{ctx:this.lowerContext,shape:"zoom",pen:"zoom",isPreventApply:null}}),this.notify("draw",{prop:"render-image",value:{isMouseWheel:!1}}),this.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:n}}),this.notify("draw",{prop:"setStraightenActObj",value:{activeObj:null}}),this.notify("draw",{prop:"setStraightenInitZoom",value:{zoomFactor:s}}),(this.isStraightening&&(i==="horizontalflip"||i==="verticalflip")&&d(this.transform.zoomFactor)||this.transform.zoomFactor===0)&&(this.transform.degree===0?this.transform.zoomFactor+=.025:this.transform.zoomFactor===0&&(this.transform.zoomFactor=null)),this.notify("draw",{prop:"zoomToSel",value:{activeObj:n,isToolbar:!1}})}this.isCropToolbar=!1;var f=this.element.querySelector(".e-ie-straighten-value-span");f&&(f.innerHTML=this.transform.straighten.toString()+"&#176")},t.prototype.getDefaultFilter=function(){return"brightness(1) contrast(100%) hue-rotate(0deg) saturate(100%) opacity(1) blur(0px) sepia(0%) grayscale(0%) invert(0%)"},t.prototype.setStraighten=function(i){var r={cancel:!1,previousDegree:this.transform.straighten,currentDegree:i};if(this.trigger("rotating",r),this.editCompleteArgs=r,!r.cancel){this.performStraighten(r);var n={action:"straighten",actionEventArgs:this.editCompleteArgs};this.triggerEditCompleteEvent(n)}},t.prototype.duplicateImage=function(){var i=m({},this.activeObj.activePoint,{},!0),r={width:0,height:0};return this.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:this.activeObj.imageElement.width,height:this.activeObj.imageElement.height,obj:r,isImgShape:null}}),this.activeObj.activePoint.width=r.width,this.activeObj.activePoint.height=r.height,i},t.prototype.performStraighten=function(i){var r=i.currentDegree,n=this.element.querySelector(".e-ie-straighten-value-span");n&&(n.innerHTML=r.toString()+"&#176");var s=m({},this.activeObj,null,!0);this.notify("freehand-draw",{prop:"setCenterSelPoints"}),this.transform.straighten=r,this.straightenPoint={x:this.activeObj.activePoint.startX+this.activeObj.activePoint.width/2,y:this.activeObj.activePoint.startY+this.activeObj.activePoint.height/2},this.straightenBaseImageCanvas();for(var a=0,l=this.objColl.length;a<l;a++){var h=this.objColl[a].shape;h!=="line"&&h!=="arrow"&&h!=="path"&&(this.objColl[a].rotatedAngle+=(this.transform.straighten-this.prevStraightenedDegree)*(Math.PI/180),this.notify("selection",{prop:"updPtCollForShpRot",onPropertyChange:!1,value:{obj:this.objColl[a]}}))}this.transform.degree%90===0&&this.transform.degree%180!==0?(this.transform.straighten===0&&(this.transform.straighten=360),this.notify("draw",{prop:"performPointZoom",onPropertyChange:!1,value:{x:this.activeObj.activePoint.startX+this.activeObj.activePoint.width/2,y:this.activeObj.activePoint.startY+this.activeObj.activePoint.height/2,type:"zoomIn",isResize:!0}}),this.notify("draw",{prop:"performPointZoom",onPropertyChange:!1,value:{x:this.activeObj.activePoint.startX+this.activeObj.activePoint.width/2,y:this.activeObj.activePoint.startY+this.activeObj.activePoint.height/2,type:"zoomOut",isResize:!0}}),this.transform.straighten===360&&(this.transform.straighten=0)):this.notify("draw",{prop:"render-image",value:{isMouseWheel:!0,isPreventClearRect:null,isFrame:null,isStraighten:!0}}),this.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:s}}),this.notify("draw",{prop:"zoomToSel",value:{activeObj:s,isToolbar:!0}}),this.notify("transform",{prop:"disableZoomOutBtn",value:{isZoomOut:!0}}),this.prevStraightenedDegree=this.transform.straighten},t.prototype.straightenBaseImageCanvas=function(){if(this.isImageLoaded){var i=this.getStraightenFlipState(),r=i==="horizontal"||i==="vertical"?-this.transform.straighten:this.transform.straighten,n=this.baseImgCanvas.getContext("2d");if(n.canvas.width!==this.lowerContext.canvas.width&&n.canvas.height!==this.lowerContext.canvas.height){var s={width:0,height:0};this.notify("crop",{prop:"calcRatio",onPropertyChange:!1,value:{obj:s,dimension:{width:n.canvas.width,height:n.canvas.height}}})}var a=void 0;a=this.getRotatedCanvasDim(this.baseImg.width,this.baseImg.height,this.transform.straighten),this.img.srcWidth=n.canvas.width=a.width,this.img.srcHeight=n.canvas.height=a.height;var l=n.canvas.width/2,h=n.canvas.height/2;n.clearRect(0,0,n.canvas.width,n.canvas.height),n.translate(l,h),n.rotate(r*Math.PI/180),n.drawImage(this.baseImg,-this.baseImg.width/2,-this.baseImg.height/2,this.baseImg.width,this.baseImg.height),n.setTransform(1,0,0,1,0,0);var c={width:0,height:0};this.notify("crop",{prop:"calcRatio",onPropertyChange:!1,value:{obj:c,dimension:{width:n.canvas.width,height:n.canvas.height}}})}},t.prototype.getRotatedCanvasDim=function(i,r,n){var s=n*Math.PI/180,a=Math.cos(s),l=Math.sin(s),h=Math.min(0,i*a,r*Math.cos(Math.PI/2-s),i*a+r*Math.cos(Math.PI/2-s)),c=Math.max(0,i*a,r*Math.cos(Math.PI/2-s),i*a+r*Math.cos(Math.PI/2-s)),u=Math.min(0,i*l,r*Math.sin(Math.PI/2-s),i*l+r*Math.sin(Math.PI/2-s)),p=Math.max(0,i*l,r*Math.sin(Math.PI/2-s),i*l+r*Math.sin(Math.PI/2-s));return{width:Math.ceil(c-h),height:Math.ceil(p-u)}},t.prototype.updateShapeOrder=function(i,r){var n=this.getObjFromId(i);if(n.shape&&(n.shape!=="path"||n.shape==="path"&&n.pointColl.length>0)||n&&n.id&&n.id.indexOf("pen")>-1){var s={shapeSettingsObj:{}};this.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:s}});var a=s.shapeSettingsObj;n.shape&&this.notify("shape",{prop:"pushActItemIntoObj"});var l=m({},this.cropObj,{},!0),h={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:h}});var c=h.currObj;c.objColl=m([],this.objColl,[],!0),c.pointColl=m([],this.pointColl,[],!0),c.afterCropActions=m([],this.afterCropActions,[],!0);var u={selPointColl:null};this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:u}}),c.selPointColl=m([],u.selPointColl,[],!0),n.shape&&this.objColl.pop(),this.notify("shape",{prop:"z-order",onPropertyChange:!1,value:{obj:n,value:r}}),n.shape&&(this.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:null,strokeColor:null,fillColor:null,strokeWidth:n.strokeSettings.strokeWidth}}),this.objColl.push(n)),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:c,previousObjColl:c.objColl,previousPointColl:c.pointColl,previousSelPointColl:c.selPointColl,previousCropObj:l,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),n.shape&&(this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}}),this.activeObj.order=n.order);var p={action:"stroke-width",previousShapeSettings:m({},a,{},!0),currentShapeSettings:m({},a,{},!0)};p.currentShapeSettings.strokeWidth=this.activeObj.strokeSettings.strokeWidth}else this.activeObj.shape&&this.activeObj.shape==="path"&&this.activeObj.pointColl.length===0&&this.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:null,strokeColor:null,fillColor:null,strokeWidth:this.activeObj.strokeSettings.strokeWidth}})},t.prototype.getStraightenFlipState=function(){var i="";if(this.rotateFlipColl.length>0)for(var r=0,n=this.rotateFlipColl.length;r<n;r++){var s=this.rotateFlipColl[r];s==="horizontal"?i+="horizontal":s==="vertical"&&(i+="vertical"),(i==="horizontalvertical"||i==="verticalhorizontal")&&(i="")}return i},t.prototype.initializeZoomSettings=function(){this.theme=d(this.theme)?"Bootstrap5":this.theme,(d(this.zoomSettings.zoomTrigger)||this.zoomSettings.zoomTrigger===0)&&(this.zoomSettings.zoomTrigger=et.MouseWheel|et.Pinch|et.Toolbar|et.Commands),d(this.selectionSettings.strokeColor)&&(this.selectionSettings.strokeColor=this.themeColl[this.theme].primaryColor),d(this.selectionSettings.fillColor)&&(this.selectionSettings.fillColor=this.themeColl[this.theme].secondaryColor)},t.prototype.initializeThemeColl=function(){this.themeColl={Bootstrap5:{primaryColor:"#0d6efd",secondaryColor:"#fff"},Bootstrap5Dark:{primaryColor:"#0d6efd",secondaryColor:"#fff"},Tailwind:{primaryColor:"#4f46e5",secondaryColor:"#fff"},TailwindDark:{primaryColor:"#22d3ee",secondaryColor:"#fff"},Fluent:{primaryColor:"#0078d4",secondaryColor:"#fff"},FluentDark:{primaryColor:"#0078d4",secondaryColor:"#fff"},Bootstrap4:{primaryColor:"#007bff",secondaryColor:"#fff"},Bootstrap:{primaryColor:"#317ab9",secondaryColor:"#fff"},BootstrapDark:{primaryColor:"#317ab9",secondaryColor:"#fff"},Material:{primaryColor:"#e3165b",secondaryColor:"#fff"},MaterialDark:{primaryColor:"#00b0ff",secondaryColor:"#fff"},Fabric:{primaryColor:"#0078d6",secondaryColor:"#fff"},FabricDark:{primaryColor:"#0074cc",secondaryColor:"#fff"},Highcontrast:{primaryColor:"#000000",secondaryColor:"#fff"},Material3:{primaryColor:"#6750a4",secondaryColor:"#fff"},Material3Dark:{primaryColor:"#d0bcff",secondaryColor:"#fff"},Fluent2:{primaryColor:"#0f6cbd",secondaryColor:"#fff"},Fluent2Dark:{primaryColor:"#115ea3",secondaryColor:"#fff"},Fluent2Highcontrast:{primaryColor:"#1aebff",secondaryColor:"#fff"},"Bootstrap5.3":{primaryColor:"#0d6efd",secondaryColor:"#fff"},"Bootstrap5.3Dark":{primaryColor:"#0d6efd",secondaryColor:"#fff"},Tailwind3:{primaryColor:"#4f46e5",secondaryColor:"#ffffff"},Tailwind3Dark:{primaryColor:"#6366f1",secondaryColor:"#ffffff03"}}},t.prototype.drawRedact=function(i,r,n,s,a,l){var h=!1,c=this.allowShape(r,n);return!this.disabled&&this.isImageLoaded&&(c||d(r)&&d(n))&&(h=!0,this.manageActiveAction(),this.notify("shape",{prop:"drawRedact",onPropertyChange:!1,value:{x:r,y:n,width:s,height:a,type:i,value:l}}),this.notify("draw",{prop:"redrawDownScale"})),h};var e;return ce([w("")],t.prototype,"cssClass",void 0),ce([w(!1)],t.prototype,"disabled",void 0),ce([w("100%")],t.prototype,"height",void 0),ce([w("Bootstrap5")],t.prototype,"theme",void 0),ce([w()],t.prototype,"toolbar",void 0),ce([w()],t.prototype,"toolbarTemplate",void 0),ce([w("100%")],t.prototype,"width",void 0),ce([w(!0)],t.prototype,"allowUndoRedo",void 0),ce([w(!0)],t.prototype,"showQuickAccessToolbar",void 0),ce([w()],t.prototype,"quickAccessToolbarTemplate",void 0),ce([w(!1)],t.prototype,"isReadOnly",void 0),ce([w(!1)],t.prototype,"enableRtl",void 0),ce([w(!1)],t.prototype,"enablePersistence",void 0),ce([it({},KD)],t.prototype,"finetuneSettings",void 0),ce([it({},ex)],t.prototype,"zoomSettings",void 0),ce([it({},tx)],t.prototype,"selectionSettings",void 0),ce([it({},ix)],t.prototype,"fontFamily",void 0),ce([it({},JD)],t.prototype,"uploadSettings",void 0),ce([Q()],t.prototype,"beforeSave",void 0),ce([Q()],t.prototype,"created",void 0),ce([Q()],t.prototype,"destroyed",void 0),ce([Q()],t.prototype,"zooming",void 0),ce([Q()],t.prototype,"panning",void 0),ce([Q()],t.prototype,"cropping",void 0),ce([Q()],t.prototype,"rotating",void 0),ce([Q()],t.prototype,"flipping",void 0),ce([Q()],t.prototype,"shapeChanging",void 0),ce([Q()],t.prototype,"selectionChanging",void 0),ce([Q()],t.prototype,"fileOpened",void 0),ce([Q()],t.prototype,"saved",void 0),ce([Q()],t.prototype,"toolbarCreated",void 0),ce([Q()],t.prototype,"toolbarUpdating",void 0),ce([Q()],t.prototype,"toolbarItemClicked",void 0),ce([Q()],t.prototype,"imageFiltering",void 0),ce([Q()],t.prototype,"finetuneValueChanging",void 0),ce([Q()],t.prototype,"click",void 0),ce([Q()],t.prototype,"shapeChange",void 0),ce([Q()],t.prototype,"quickAccessToolbarOpen",void 0),ce([Q()],t.prototype,"resizing",void 0),ce([Q()],t.prototype,"quickAccessToolbarItemClick",void 0),ce([Q()],t.prototype,"frameChange",void 0),ce([Q()],t.prototype,"editComplete",void 0),t=e=ce([Qe],t),t}(dt);var ku=function(o){return o.Horizontal="Horizontal",o.Vertical="Vertical",o}(ku||{}),xi=function(o){return o.Rectangle="Rectangle",o.Ellipse="Ellipse",o.Line="Line",o.Arrow="Arrow",o.Path="Path",o.Text="Text",o.FreehandDraw="FreehandDraw",o.Image="Image",o}(xi||{}),et=function(o){return o[o.MouseWheel=1]="MouseWheel",o[o.Pinch=2]="Pinch",o[o.Commands=4]="Commands",o[o.Toolbar=8]="Toolbar",o}(et||{});var kr=function(o){return o.Brightness="Brightness",o.Contrast="Contrast",o.Hue="Hue",o.Saturation="Saturation",o.Exposure="Exposure",o.Opacity="Opacity",o.Blur="Blur",o}(kr||{}),fo=function(o){return o.None="None",o.Arrow="Arrow",o.SolidArrow="SolidArrow",o.Circle="Circle",o.SolidCircle="SolidCircle",o.Square="Square",o.SolidSquare="SolidSquare",o.Bar="Bar",o}(fo||{});var ay=function(o){return o.Solid="Solid",o.Dashed="Dashed",o.Dotted="Dotted",o}(ay||{}),ly=function(o){return o.Blur="Blur",o.Pixelate="Pixelate",o}(ly||{}),rx=function(){function o(t){this.defToolbarItems=[],this.toolbarHeight=46,this.currToolbar="",this.preventZoomBtn=!1,this.currentToolbar="main",this.selFhdColor="#42a5f5",this.preventEnableDisableUr=!1,this.isAspectRatio=!0,this.isFrameToolbar=!1,this.presetColors={custom:["#000000","#f44336","#e91e63","#9c27b0","#673ab7","#2196f3","#03a9f4","#00bcd4","#009688","#ffeb3b","#ffffff","#ffebee","#fce4ec","#f3e5f5","#ede7f6","#e3f2fd","#e1f5fe","#e0f7fa","#e0f2f1","#fffde7","#f2f2f2","#ffcdd2","#f8bbd0","#e1bee7","#d1c4e9","#bbdefb","#b3e5fc","#b2ebf2","#b2dfdb","#fff9c4","#e6e6e6","#ef9a9a","#f48fb1","#ce93d8","#b39ddb","#90caf9","#81d4fa","#80deea","#80cbc4","#fff59d","#cccccc","#e57373","#f06292","#ba68c8","#9575cd","#64b5f6","#4fc3f7","#4dd0e1","#4db6ac","#fff176","#b3b3b3","#ef5350","#ec407a","#ab47bc","#7e57c2","#42a5f5","#29b6f6","#26c6da","#26a69a","#ffee58","#999999","#e53935","#d81b60","#8e24aa","#5e35b1","#1e88e5","#039be5","#00acc1","#00897b","#fdd835","#808080","#d32f2f","#c2185b","#7b1fa2","#512da8","#1976d2","#0288d1","#0097a7","#00796b","#fbc02d","#666666","#c62828","#ad1457","#6a1b9a","#4527a0","#1565c0","#0277bd","#00838f","#00695c","#f9a825","#4d4d4d","#b71c1c","#880e4f","#4a148c","#311b92","#0d47a1","#01579b","#006064","#004d40","#f57f17"]},this.isSlider=!1,this.currentQuality=1,this.imageQuality="highest",this.parent=t,this.addEventListener(),this.initLocale()}return o.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},o.prototype.addEventListener=function(){this.parent.on("toolbar",this.toolbar,this),this.parent.on("destroyed",this.destroy,this)},o.prototype.removeEventListener=function(){this.parent.off("toolbar",this.toolbar),this.parent.off("destroyed",this.destroy)},o.prototype.initLocale=function(){this.defaultLocale={Crop:"Crop",ZoomIn:"Zoom In",ZoomOut:"Zoom Out",Undo:"Undo",Redo:"Redo",Transform:"Transform",Annotation:"Annotation",Finetune:"Finetune",Brightness:"Brightness",Contrast:"Contrast",Hue:"Hue",Saturation:"Saturation",Opacity:"Opacity",Blur:"Blur",Sharpen:"Sharpen",Exposure:"Exposure",Filter:"Filter",Default:"Default",Chrome:"Chrome",Cold:"Cold",Warm:"Warm",Grayscale:"Grayscale",BlackAndWhite:"Black and White",Sepia:"Sepia",Invert:"Invert",Text:"Add Text",Pen:"Pen",Reset:"Reset",Save:"Save",Select:"Select",RotateLeft:"Rotate Left",RotateRight:"Rotate Right",HorizontalFlip:"Horizontal Flip",VerticalFlip:"Vertical Flip",OK:"Apply",Cancel:"Discard",FillColor:"Fill Color",StrokeColor:"Stroke Color",StrokeWidth:"Stroke Width",FontFamily:"Font Family",FontStyle:"Font Style",FontSize:"Font Size",FontColor:"Font Color",Pan:"Pan",Move:"Move",Load:"Load",Custom:"Custom",Square:"Square",Circle:"Circle",Ellipse:"Ellipse",Rectangle:"Rectangle",Line:"Line",Arrow:"Arrow",Path:"Path",Bold:"Bold",Italic:"Italic",BoldItalic:"Bold Italic",XSmall:"X-Small",Small:"Small",Medium:"Medium",Large:"Large",XLarge:"X-Large",ABC:"ABC",Browse:"Browse",Duplicate:"Duplicate",Remove:"Remove",EditText:"Edit Text",Start:"Start",End:"End",Bar:"Bar",ArrowSolid:"Arrow Solid",CircleSolid:"Circle Solid",SquareSolid:"Square Solid",None:"None",CropAndTransform:"Crop and Transform",CropSelection:"Crop Selection",Image:"Add Image",Transparency:"Transparency",Height:"Height",Width:"Width",AspectRatio:"Maintain aspect ratio",W:"W",H:"H",DragText:"Drag and drop your image here or",DropText:"Drop your image here or",BrowseText:"Browse here...",SupportText:"Supports:",Frame:"Frame",Mat:"Mat",Bevel:"Bevel",Inset:"Inset",Hook:"Hook",Color:"Color",Size:"Size",Offset:"Offset",Radius:"Radius",Amount:"Amount",Resize:"Resize",0:"0%",20:"20%",40:"40%",60:"60%",80:"80%",100:"100%",1:"1",2:"2",3:"3",4:"4",5:"5",Border:"Border",Solid:"Solid",Dashed:"Dashed",Dotted:"Dotted",GradientColor:"Gradient Color",ConfirmDialogHeader:"Confirm Save Changes",ConfirmDialogContent:"Do you want to save the changes you made to the image?",AlertDialogHeader:"Unsupported file",AlertDialogContent:"The selected file is unsupported.",MinMaxSize:"with file size between",MinMaxSizeAlert:"File size between",MinSize:"with minimum file size of",MinSizeAlert:"A minimum file size of",MaxSize:"with maximum file size of",MaxSizeAlert:"A maximum file size of",To:"to",Bytes:"bytes",Yes:"Yes",No:"No",ImageErrorDialogHeader:"Image Selection Error",ImageErrorDialogContent:"Please select only one image to open.",Straighten:"Straighten",NoOutline:"No outline",DlgOK:"OK",SaveAs:"Save As",ImageName:"Image name",Format:"Format",Quality:"Quality",Download:"Download",Close:"Close",ImageSize:"Image Size",QualityInfo:"The image quality option is only available for JPEG format",Good:"Good",Great:"Great",Highest:"Highest",BringForward:"Bring Forward",SendBackward:"Send Backward",SendToBack:"Send to Back",BringToFront:"Bring to Front",ZOrder:"Z-Order",Redact:"Redact",Pixelate:"Pixelate",BorderRadius:"Border Radius",TextOutlineColor:"Outline Color",TextOutlineWidth:"Outline Width",PixelSize:"Pixel Size",And:"and"},this.l10n=new yi("image-editor",this.defaultLocale,this.parent.locale)},o.prototype.toolbar=function(t){var e=this.parent;switch(this.updatePrivateVariables(),t.prop){case"create-toolbar":this.createToolbar();break;case"create-contextual-toolbar":this.createContextualToolbar();break;case"update-toolbar-items":this.updateToolbarItems();break;case"refresh-toolbar":this.refreshToolbar(t.value.type,t.value.isApplyBtn,t.value.isCropping,t.value.isZooming,t.value.cType);break;case"renderQAT":this.renderQAT(t.value.isPenEdit);break;case"enable-disable-btns":this.enableDisableTbrBtn();break;case"init-main-toolbar":this.initMainToolbar(t.value.isApplyBtn,t.value.isDevice,t.value.isOkBtn,t.value.isResize,t.value.isFrame,t.value.isMainToolbar);break;case"create-bottom-toolbar":this.createBottomToolbar();break;case"refresh-main-toolbar":this.refreshMainToolbar();break;case"create-qa-toolbar":this.createQuickAccessToolbar();break;case"destroy-qa-toolbar":this.destroyQuickAccessToolbar();break;case"zoom-up-handler":this.zoomBtnMouseUpHandler();break;case"refresh-dropdown-btn":this.refreshDropDownBtn(t.value.isDisabled);break;case"close-contextual-toolbar":this.closeContextualToolbar();break;case"destroy-bottom-toolbar":this.destroyBottomToolbar();break;case"destroy-top-toolbar":this.destroyTopToolbar();break;case"destroySubComponents":this.destroySubComponents();break;case"setLocale":this.l10n.setLocale(t.value.locale);break;case"setPreventZoomBtn":this.preventZoomBtn=t.value.isPrevent;break;case"getToolbarHeight":t.value.obj.toolbarHeight=this.toolbarHeight;break;case"setToolbarHeight":(d(e.toolbar)||e.toolbar&&e.toolbar.length>0&&e.toolbar.indexOf("Open")>-1)&&(this.toolbarHeight=t.value.height);break;case"setCurrentToolbar":this.currentToolbar=t.value.type;break;case"setSelectedFreehandColor":this.selFhdColor=t.value.color;break;case"setInitialAdjustmentValue":e.initialAdjustmentValue=t.value.value;break;case"getCanvasFilter":t.value.obj.canvasFilter=e.canvasFilter;break;case"getDefToolbarItems":t.value.obj.defToolbarItems=this.defToolbarItems;break;case"getPenStroke":this.getPenStroke(t.value.value);break;case"performDefToolbarClickAction":this.performDefTbrClick(t.value.type,t.value.isContextualToolbar,t.value.isDisabledAdjustment,t.value.isDisabledFilter,t.value.isFilterFinetune);break;case"setTempFilterProperties":e.setTempFilterProperties();break;case"refreshSlider":this.refreshSlider();break;case"getCurrAdjustmentValue":e.getCurrAdjustmentValue(t.value.type);break;case"setCurrAdjustmentValue":e.setCurrAdjustmentValue(t.value.type,t.value.value);break;case"refreshShapeDrawing":this.refreshShapeDrawing();break;case"setEnableDisableUndoRedo":this.preventEnableDisableUr=t.value.isPrevent;break;case"reset":this.reset();break;case"getLocaleText":t.value.obj.value=this.l10n.getConstant(t.value.obj.key);break;case"initResizeToolbar":this.initResizeToolbar();break;case"getFrameToolbar":t.value.obj.bool=this.isFrameToolbar;break;case"resizeClick":this.resizeClick();break;case"frameToolbarClick":this.frameToolbarClick();break;case"performCropTransformClick":this.performCropTransformClick(t.value.shape,t.value.isTransform);break;case"duplicateShape":this.duplicateShape(t.value.isPreventUndoRedo,!0);break;case"editText":this.editText();break;case"setInitialSize":this.initialSize=Number(t.value.value);break;case"widthPress":this.widthPress(t.value.e);break;case"heightPress":this.heightPress(t.value.e);break;case"widthAspectRatio":this.widthAspectRatio(t.value.e);break;case"heightAspectRatio":this.heightAspectRatio(t.value.e);break;case"cancelPan":this.cancelPan();break;case"zoomInBtnMouseDownHandler":this.zoomInBtnMouseDownHandler(t.value.event);break;case"zoomOutBtnMouseDownHandler":this.zoomOutBtnMouseDownHandler(t.value.event);break;case"drawDashedLine":this.drawDashedLine(t.value.context);break;case"saveDialogClosed":this.saveDialogClosed(t.value.id);break;case"getIndex":this.getIndex(t.value.item);break;case"getRectRadius":this.getRectRadius(t.value.text);break;case"applyPreviewFilter":this.applyPreviewFilter();break;case"renderSlider":this.renderSlider(t.value.type,t.value.isSelect);break;case"zoomInBtnClickHandler":this.zoomInBtnClickHandler(t.value.e);break;case"zoomOutBtnClickHandler":this.zoomOutBtnClickHandler(t.value.e);break;case"getAdjustmentToolbarItem":this.getAdjustmentToolbarItem();break;case"getFilterToolbarItem":this.getFilterToolbarItem();break;case"renderCropBtn":this.renderCropBtn();break}},o.prototype.updatePrivateVariables=function(){var t=this.parent;this.inMemoryCanvas=t.inMemoryCanvas,t.lowerCanvas&&(this.lowerContext=t.lowerCanvas.getContext("2d")),t.upperCanvas&&(this.upperContext=t.upperCanvas.getContext("2d")),this.inMemoryCanvas&&(this.inMemoryContext=this.inMemoryCanvas.getContext("2d"))},o.prototype.reset=function(){var t=this.parent;this.toolbarHeight=46,t.prevCurrSelectionPoint=null,this.zoomBtnHold=null,this.currToolbar="",t.cxtTbarHeight=null,this.currentToolbar="main",this.selFhdColor="#42a5f5",t.currentFilter="",this.preventZoomBtn=t.isCropToolbar=this.preventEnableDisableUr=this.isFrameToolbar=!1,t.initialAdjustmentValue=t.canvasFilter="brightness(1) contrast(100%) hue-rotate(0deg) saturate(100%) opacity(1) blur(0px) sepia(0%) grayscale(0%) invert(0%)",t.tempStraighten=0,t.isStraightening=!1},o.prototype.destroyTopToolbar=function(){var t=this.parent,e=document.getElementById(t.element.id+"_toolbar");this.isToolbar()&&e&&e.classList.contains("e-control")&&$(e,"toolbar").destroy()},o.prototype.destroyBottomToolbar=function(){var t=this.parent,e=document.getElementById(t.element.id+"_bottomToolbar");e&&e.classList.contains("e-control")&&$(e,"toolbar").destroy()},o.prototype.isToolbar=function(){var t=this.parent;return d(t.toolbar)||t.toolbar&&t.toolbar.length>0||!d(t.toolbarTemplate)},o.prototype.createToolbar=function(){var t=this,e=this.parent,i=e.element.id;if(d(e.toolbar)||e.toolbar&&e.toolbar.length>0){e.element.appendChild(e.createElement("div",{id:i+"_toolbarArea",className:"e-toolbar-area"}));var r={cssClass:"e-image-upload",align:"Left",type:"Input",tooltipText:this.l10n.getConstant("Browse"),template:new hn({allowedExtensions:e.uploadSettings.allowedExtensions,multiple:!1})};d(this.defToolbarItems)&&(this.defToolbarItems=[]),this.defToolbarItems.push(r);var n=document.getElementById(i+"_toolbarArea"),s=e.createElement("div",{id:i+"_toolbar"});n.appendChild(s);var a=[{cssClass:"e-image-upload",align:"Left",type:"Input",tooltipText:this.l10n.getConstant("Browse"),template:new hn({allowedExtensions:e.uploadSettings.allowedExtensions,multiple:!1,selected:function(){var u=document.getElementById(i+"_toolbar"),p=document.getElementById(i+"_bottomToolbar");e.disabled||(D.isDevice?(t.defToolbarItems.length>0&&u&&$(u,"toolbar").destroy(),p&&$(p,"toolbar").destroy(),t.initMainToolbar(!1,D.isDevice,null),t.createBottomToolbar()):(t.defToolbarItems.length>0&&u&&$(u,"toolbar").destroy(),t.initMainToolbar(!1,!1,null)))}})}],l=new Qt({items:a,width:"100%",created:function(){e.trigger("toolbarCreated",{toolbarType:"main"})},clicked:this.defToolbarClicked.bind(this)});l.appendTo("#"+i+"_toolbar"),this.createLeftToolbarControls();var h=document.getElementById(i+"_toolbar");if(s&&(this.toolbarHeight=h.clientHeight,e.toolbar&&e.toolbar.length>0&&e.toolbar.indexOf("Open")===-1)){var c=$(document.getElementById(e.element.id+"_toolbar"),"toolbar");c&&(c.destroy(),document.getElementById(e.element.id+"_toolbar").innerHTML="")}}else this.toolbarHeight=0},o.prototype.createContextualToolbar=function(){var t=this.parent,e=t.element.id;if(d(t.toolbar)||t.toolbar&&t.toolbar.length>0){var i=t.createElement("div",{id:e+"_contextualToolbarArea",className:"e-contextual-toolbar-wrapper e-hide"});i.style.position="absolute",t.element.appendChild(i);var r=document.getElementById(e+"_contextualToolbarArea"),n=t.createElement("div",{id:e+"_contextualToolbar"});r.appendChild(n)}},o.prototype.createBottomToolbar=function(){var t=this.parent,e=t.element.id;if(t.element.querySelector("#"+e+"_bottomToolbarArea")&&t.element.querySelector("#"+e+"_bottomToolbarArea").remove(),d(t.toolbar)||t.toolbar&&t.toolbar.length>0){if(t.element.appendChild(t.createElement("div",{id:e+"_bottomToolbarArea",className:"e-bottom-toolbar"})),!t.toolbarTemplate){var i=document.getElementById(e+"_bottomToolbarArea"),r=t.createElement("div",{id:e+"_bottomToolbar"});i.appendChild(r)}this.initBottomToolbar()}},o.prototype.createQuickAccessToolbar=function(){var t=this.parent,e=t.element.id;if(t.showQuickAccessToolbar){var i={cssClass:"e-image-upload",align:"Left",type:"Input",tooltipText:this.l10n.getConstant("Browse"),template:new hn({allowedExtensions:t.uploadSettings.allowedExtensions,multiple:!1})};d(this.defToolbarItems)&&(this.defToolbarItems=[]),this.defToolbarItems.push(i);var r=document.getElementById(e+"_quickAccessToolbarArea"),n=t.createElement("div",{id:e+"_quickAccessToolbar"});r.appendChild(n);var s=new Qt({clicked:this.defToolbarClicked.bind(this)});s.appendTo("#"+e+"_quickAccessToolbar")}},o.prototype.initMainToolbar=function(t,e,i,r,n,s,a){var l=this,h=this.parent,c=h.element.id;if(this.isToolbar()){var u=this.getLeftToolbarItem(i,r),p=this.getRightToolbarItem(i,s,a),f=this.getMainToolbarItem(t,n,a),g=this.getZoomToolbarItem();e?n||a?this.defToolbarItems=f:this.defToolbarItems=u.concat(p):this.defToolbarItems=u.concat(f,p,g);var v={toolbarType:"main",toolbarItems:this.defToolbarItems};if(h.trigger("toolbarUpdating",v),this.defToolbarItems=v.toolbarItems,this.defToolbarItems.length>0){var y=new Qt({width:"100%",items:this.defToolbarItems,clicked:this.defToolbarClicked.bind(this),created:function(){e||l.renderAnnotationBtn(),l.wireZoomBtnEvents(),h.trigger("toolbarCreated",{toolbarType:"main"})}});if(e&&n||e&&a?y.appendTo("#"+c+"_bottomToolbar"):y.appendTo("#"+c+"_toolbar"),this.createLeftToolbarControls(),this.enableDisableTbrBtn(),this.isToolbar()&&document.getElementById(c+"_toolbar")){var C=$(c+"_toolbar","toolbar");C.refreshOverflow()}}}},o.prototype.initBottomToolbar=function(){var t=this,e=this.parent,i=e.element.id;if(d(e.toolbar)||e.toolbar&&e.toolbar.length>0){var r=this.getMainToolbarItem(),n={toolbarType:"bottom-toolbar",toolbarItems:r};e.trigger("toolbarUpdating",n),r=n.toolbarItems;var s=new Qt({items:r,width:"100%",created:function(){t.renderAnnotationBtn(),t.renderCropBtn(),t.renderTransformBtn(),e.trigger("toolbarCreated",{toolbarType:"main"})},clicked:this.defToolbarClicked.bind(this)});if(s.appendTo("#"+i+"_bottomToolbar"),this.defToolbarItems.length>0&&document.getElementById(i+"_bottomToolbar")){var a=$(i+"_bottomToolbar","toolbar");a.refreshOverflow()}}},o.prototype.getLeftToolbarItem=function(t,e){var i=this.parent,r=i.element.id,n=[];(!t||e)&&(d(i.toolbar)||i.toolbar&&i.toolbar.indexOf("Open")>-1?(n.push({id:r+"_upload",cssClass:"e-image-upload",align:"Left",type:"Input",template:new hn({allowedExtensions:i.uploadSettings.allowedExtensions,multiple:!1})}),n.push({visible:!1,cssClass:"e-image-position e-btn e-flat",tooltipText:this.l10n.getConstant("Browse"),align:"Left"})):D.isDevice&&i.toolbar&&i.toolbar.indexOf("Open")===-1&&(n.push({visible:!1,id:r+"_upload",cssClass:"e-image-upload",align:"Left",type:"Input",template:new hn({allowedExtensions:i.uploadSettings.allowedExtensions,multiple:!1})}),n.push({visible:!1,cssClass:"e-image-position e-btn e-flat",tooltipText:this.l10n.getConstant("Browse"),align:"Left"}))),i.allowUndoRedo&&!e&&((d(i.toolbar)||i.toolbar&&i.toolbar.indexOf("Undo")>-1)&&n.push({id:r+"_undo",prefixIcon:"e-icons e-undo",cssClass:"top-icon e-undo",tooltipText:this.l10n.getConstant("Undo"),align:"Left"}),(d(i.toolbar)||i.toolbar&&i.toolbar.indexOf("Redo")>-1)&&n.push({id:r+"_redo",prefixIcon:"e-icons e-redo",cssClass:"top-icon e-redo",tooltipText:this.l10n.getConstant("Redo"),align:"Left"})),!this.preventZoomBtn&&(i.zoomSettings.zoomTrigger&et.Toolbar)===et.Toolbar&&!e&&((d(i.toolbar)||i.toolbar&&i.toolbar.indexOf("ZoomOut")>-1)&&n.push({id:r+"_zoomOut",prefixIcon:"e-icons e-zoom-out",cssClass:"top-icon e-dec-zoom",tooltipText:this.l10n.getConstant("ZoomOut"),align:"Left"}),(d(i.toolbar)||i.toolbar&&i.toolbar.indexOf("ZoomIn")>-1)&&n.push({id:r+"_zoomIn",prefixIcon:"e-icons e-zoom-in",cssClass:"top-icon e-inc-zoom",tooltipText:this.l10n.getConstant("ZoomIn"),align:"Left"}));for(var s=this.processToolbar("left"),a=0,l=s.length;a<l;a++)n.push(s[a]);return n},o.prototype.getRightToolbarItem=function(t,e,i){var r=this.parent,n=r.element.id,s=[];(t||i)&&(s.push({id:n+"_ok",prefixIcon:"e-icons e-check",cssClass:"top-icon e-tick",tooltipText:this.l10n.getConstant("OK"),align:"Right",tabIndex:0}),s.push({id:n+"_cancel",prefixIcon:"e-icons e-close",cssClass:"top-icon e-save",tooltipText:this.l10n.getConstant("Cancel"),align:"Right"})),(e||!D.isDevice)&&(d(r.toolbar)||r.toolbar&&r.toolbar.indexOf("Reset")>-1)&&s.push({id:n+"_reset",prefixIcon:"e-icons e-btn-reset",cssClass:"top-icon e-img-reset",tooltipText:this.l10n.getConstant("Reset"),align:"Right"}),t||(d(r.toolbar)||r.toolbar&&r.toolbar.indexOf("Save")>-1)&&s.push({id:n+"_save",prefixIcon:"e-icons e-btn-save",cssClass:"e-caret-hide top-icon e-save",tooltipText:this.l10n.getConstant("Save"),align:"Right"});for(var a=this.processToolbar("right"),l=0,h=a.length;l<h;l++)s.push(a[l]);return s},o.prototype.getMainToolbarItem=function(t,e,i){var r=this.parent,n=r.element.id,s=[];e?((d(r.toolbar)||!d(r.toolbar)&&r.toolbar.indexOf("None")>-1||r.toolbar.indexOf("Frame")>-1)&&s.push({id:n+"_none",prefixIcon:"e-icons e-frame-none",cssClass:"top-icon e-frame-none",tooltipText:this.l10n.getConstant("None"),align:"Center"}),(d(r.toolbar)||!d(r.toolbar)&&r.toolbar.indexOf("Mat")>-1||r.toolbar.indexOf("Frame")>-1)&&s.push({id:n+"_mat",prefixIcon:"e-icons e-frame-mat",cssClass:"top-icon e-frame-mat",tooltipText:this.l10n.getConstant("Mat"),align:"Center"}),(d(r.toolbar)||!d(r.toolbar)&&r.toolbar.indexOf("Bevel")>-1||r.toolbar.indexOf("Frame")>-1)&&s.push({id:n+"_bevel",prefixIcon:"e-icons e-frame-bevel",cssClass:"top-icon e-frame-bevel",tooltipText:this.l10n.getConstant("Bevel"),align:"Center"}),(d(r.toolbar)||!d(r.toolbar)&&r.toolbar.indexOf("Line")>-1||r.toolbar.indexOf("Frame")>-1)&&s.push({id:n+"_line",prefixIcon:"e-icons e-frame-line",cssClass:"top-icon e-frame-line",tooltipText:this.l10n.getConstant("Line"),align:"Center"}),(d(r.toolbar)||!d(r.toolbar)&&r.toolbar.indexOf("Inset")>-1||r.toolbar.indexOf("Frame")>-1)&&s.push({id:n+"_inset",prefixIcon:"e-icons e-frame-inset",cssClass:"top-icon e-frame-inset",tooltipText:this.l10n.getConstant("Inset"),align:"Center"}),(d(r.toolbar)||!d(r.toolbar)&&r.toolbar.indexOf("Hook")>-1||r.toolbar.indexOf("Frame")>-1)&&s.push({id:n+"_hook",prefixIcon:"e-icons e-frame-hook",cssClass:"top-icon e-frame-hook",tooltipText:this.l10n.getConstant("Hook"),align:"Center"})):i?(s.push({id:n+"_redactBlur",prefixIcon:"e-icons e-tint",cssClass:"top-icon e-opacity",tooltipText:this.l10n.getConstant("Blur"),align:"Center"}),s.push({id:n+"_pixelate",prefixIcon:"e-icons e-opacity",cssClass:"top-icon e-opacity",tooltipText:this.l10n.getConstant("Pixelate"),align:"Center"}),s.push({id:n+"_duplicate",prefixIcon:"e-icons e-order",cssClass:"top-icon e-order",tooltipText:this.l10n.getConstant("Duplicate"),align:"Center"}),s.push({id:n+"_remove",prefixIcon:"e-icons e-trash",cssClass:"top-icon e-trash",tooltipText:this.l10n.getConstant("Remove"),align:"Center"})):((d(r.toolbar)||r.toolbar&&r.toolbar.indexOf("Crop")>-1)&&s.push({id:n+"_cropTransform",prefixIcon:"e-icons e-crop",cssClass:"top-icon e-crop",tooltipText:this.l10n.getConstant("CropAndTransform"),align:"Center"}),(d(r.toolbar)||r.toolbar&&r.toolbar.indexOf("Annotate")>-1)&&s.push({id:n+"_annotation",tooltipText:this.l10n.getConstant("Annotation"),align:"Center",template:'<button id="'+n+'_annotationBtn"></button>'}),(d(r.toolbar)||r.toolbar&&r.toolbar.indexOf("Finetune")>-1)&&s.push({id:n+"_adjustment",prefixIcon:"e-icons e-adjustment",cssClass:"top-icon e-adjustment",tooltipText:this.l10n.getConstant("Finetune"),align:"Center"}),(d(r.toolbar)||r.toolbar&&r.toolbar.indexOf("Filter")>-1)&&s.push({id:n+"_filter",prefixIcon:"e-icons e-filters",cssClass:"top-icon e-filters",tooltipText:this.l10n.getConstant("Filter"),align:"Center"}),(d(r.toolbar)||!d(r.toolbar)&&r.toolbar.indexOf("Frame")>-1)&&s.push({id:n+"_frame",prefixIcon:"e-icons e-border-frame",cssClass:"top-icon e-border-frame",tooltipText:this.l10n.getConstant("Frame"),align:"Center"}),(d(r.toolbar)||!d(r.toolbar)&&r.toolbar.indexOf("Resize")>-1)&&s.push({id:n+"_resize",prefixIcon:"e-icons e-resize",cssClass:"top-icon e-resize",tooltipText:this.l10n.getConstant("Resize"),align:"Center"}),(d(r.toolbar)||!d(r.toolbar)&&r.toolbar.indexOf("Redact")>-1)&&s.push({id:n+"_redact",prefixIcon:"e-icons e-redact",cssClass:"top-icon e-opacity",tooltipText:this.l10n.getConstant("Redact"),align:"Center"}));for(var a=this.processToolbar("center"),l=0,h=a.length;l<h;l++)s.push(a[l]);return t&&(s.push({id:n+"_ok",prefixIcon:"e-icons e-check",cssClass:"top-icon e-tick",tooltipText:this.l10n.getConstant("OK"),align:"Right",tabIndex:0}),s.push({id:n+"_cancel",prefixIcon:"e-icons e-close",cssClass:"top-icon e-save",tooltipText:this.l10n.getConstant("Cancel"),align:"Right"})),s},o.prototype.getZoomToolbarItem=function(){var t=[];return t},o.prototype.updateContextualToolbar=function(t,e,i){var r=this.parent,n=r.element.id,s=r.element.querySelector("#"+n+"_toolbarArea"),a=r.element.querySelector("#"+n+"_contextualToolbarArea");if(a){if(a.classList.remove("e-hide"),a.style.left=s.offsetLeft+"px",t==="filter"){var l=document.getElementById(n+"_toolbar");l&&this.defToolbarItems.length>0&&$(l,"toolbar").destroy(),D.isDevice?this.initMainToolbar(!1,!0,!0):this.initMainToolbar(!0,null,null),this.refreshSlider(),this.initFilterToolbarItem()}else{var h=document.querySelector("#"+n+"_contextualToolbar");h.classList.contains("e-control")&&$(h,"toolbar").destroy(),this.refreshSlider(),t==="frame"?this.initFrameToolbarItem():this.renderSlider(e,i)}if(r.toolbarTemplate?this.toolbarHeight=r.element.querySelector("#"+n+"_toolbarArea").clientHeight:r.element.querySelector("#"+n+"_toolbar")&&(this.toolbarHeight=r.element.querySelector("#"+n+"_toolbar").clientHeight),r.toolbarHeight=this.toolbarHeight,D.isDevice){var c=a.offsetHeight+1,u=r.element.querySelector("#"+n+"_customizeWrapper");this.isFrameToolbar&&u&&(c=u.offsetHeight+2);var p=r.element.querySelector("#"+n+"_canvasWrapper").offsetHeight;if(a.style.top=this.toolbarHeight+1+p-c+"px",e==="straighten"){r.isStraightening=!0;var h=r.element.querySelector("#"+n+"_contextualToolbarArea");h.style.position==="absolute"&&(h.style.position="",r.element.insertBefore(h,r.element.querySelector("#"+n+"_bottomToolbarArea")),r.update(),i&&r.notify("draw",{prop:"select",onPropertyChange:!1,value:{type:this.getCropTextContent(document.getElementById(n+"_cropBtn")).toLowerCase(),startX:null,startY:null,width:null,height:null}}))}}else a.style.top=this.toolbarHeight+1+"px"}},o.prototype.processToolbar=function(t){var e=this.parent,i=[];if(e.toolbar)for(var r=0,n=e.toolbar.length;r<n;r++)typeof e.toolbar[r]=="object"&&(d(e.toolbar[r].align)?t==="left"&&i.push(e.toolbar[r]):e.toolbar[r].align.toLowerCase()===t&&i.push(e.toolbar[r]));return i},o.prototype.processSubToolbar=function(t){var e=[];if(t)for(var i=0,r=t.length;i<r;i++)typeof t[i]=="object"&&(t[i].align="Center",e.push(t[i]));return e},o.prototype.wireZoomBtnEvents=function(){var t=document.querySelector("#"+this.parent.element.id+"_zoomIn"),e=document.querySelector("#"+this.parent.element.id+"_zoomOut");t&&(t.addEventListener("mousedown",this.zoomInBtnMouseDownHandler.bind(this)),t.addEventListener("mouseup",this.zoomBtnMouseUpHandler.bind(this)),t.addEventListener("click",this.zoomInBtnClickHandler.bind(this))),e&&(e.addEventListener("mousedown",this.zoomOutBtnMouseDownHandler.bind(this)),e.addEventListener("mouseup",this.zoomBtnMouseUpHandler.bind(this)),e.addEventListener("click",this.zoomOutBtnClickHandler.bind(this)))},o.prototype.widthPress=function(t){if(t.keyCode===109){t.preventDefault();return}},o.prototype.heightPress=function(t){if(t.keyCode===109){t.preventDefault();return}},o.prototype.widthAspectRatio=function(t){if(!(t.keyCode===109||t.keyCode===9)){var e=this.parent,i=e.element.id,r=e.element.querySelector("#"+i+"_resizeHeight"),n=e.element.querySelector("#"+i+"_resizeWidth"),s=e.element.querySelector("#"+i+"_aspectratio"),a=e.img.destWidth,l=e.img.destHeight,h=parseFloat(r.value),c=h/(l/a),u=c%1>=.5||c%1<=-.5?Math.round(c):c<0?Math.ceil(c):Math.floor(c),p=$(n,"numerictextbox"),f=$(n,"numerictextbox");s&&(u!=null&&!isNaN(u)?d(p.value)?(p.placeholder=u+" px",n.placeholder=u.toString()+" px"):(p.value=u,n.value=u.toString()+" px"):d(p.value)?(p.placeholder="0 px",n.placeholder="0 px",d(f.value)&&!d(f.placeholder)&&(p.placeholder=""+e.img.srcWidth,n.placeholder=""+e.img.srcWidth)):(p.value=0,n.value="0 px"))}},o.prototype.heightAspectRatio=function(t){if(!(t.keyCode===109||t.keyCode===9)){var e=this.parent,i=e.element.id,r=e.element.querySelector("#"+i+"_resizeHeight"),n=e.element.querySelector("#"+i+"_resizeWidth"),s=e.element.querySelector("#"+i+"_aspectratio"),a=e.img.destWidth,l=e.img.destHeight,h=parseFloat(n.value),c=h/(a/l),u=c%1>=.5||c%1<=-.5?Math.round(c):c<0?Math.ceil(c):Math.floor(c),p=$(r,"numerictextbox"),f=$(n,"numerictextbox");s&&(isNaN(u)?d(p.value)?(p.placeholder="0 px",r.placeholder="0 px",d(f.value)&&!d(f.placeholder)&&(p.placeholder=""+e.img.srcHeight,r.placeholder=""+e.img.srcHeight)):(p.value=0,r.value="0 px"):d(p.value)?(p.placeholder=u+" px",r.placeholder=u.toString()+" px"):(p.value=u,r.value=u.toString()+" px"))}},o.prototype.getResizeToolbarItem=function(){var t=this.parent,e=t.element.id,i=!!(t.aspectWidth&&t.aspectHeight),r=this.parent.transform.degree%90===0&&this.parent.transform.degree%180!==0?Math.ceil(this.parent.img.srcHeight).toString():Math.ceil(this.parent.img.srcWidth).toString(),n=this.parent.transform.degree%90===0&&this.parent.transform.degree%180!==0?Math.ceil(this.parent.img.srcWidth).toString():Math.ceil(this.parent.img.srcHeight).toString(),s=[],a=document.createElement("span");a.innerHTML=this.l10n.getConstant("W"),s.push({id:e+"_width",cssClass:"e-ie-resize-width",template:a,align:"Center"}),s.push({id:e+"_resizeWidth",prefixIcon:"e-icons e-anti-clock-wise",tooltipText:this.l10n.getConstant("Width"),align:"Center",type:"Input",template:new ln({width:75,htmlAttributes:{maxLength:"4"},showSpinButton:!1,value:i?t.aspectWidth:null,placeholder:i?null:r,format:"###.## px"})});var l=document.createElement("span");return l.innerHTML=this.l10n.getConstant("H"),s.push({id:e+"_height",cssClass:"e-ie-resize-height",template:l,align:"Center"}),s.push({id:e+"_resizeHeight",prefixIcon:"e-icons e-clock-wise",tooltipText:this.l10n.getConstant("Height"),align:"Center",type:"Input",template:new ln({width:75,htmlAttributes:{maxLength:"4"},showSpinButton:!1,value:i?t.aspectHeight:null,placeholder:i?null:n,format:"###.## px"})}),this.isAspectRatio?(s.push({id:e+"_nonaspectratio",prefixIcon:"e-icons e-unlock",align:"Center",tooltipText:this.l10n.getConstant("AspectRatio"),type:"Button"}),this.isAspectRatio=!1):(s.push({id:e+"_aspectratio",prefixIcon:"e-icons e-lock",align:"Center",tooltipText:this.l10n.getConstant("AspectRatio"),type:"Button",tabIndex:0}),this.isAspectRatio=!0),D.isDevice||(s.push({id:e+"_ok",prefixIcon:"e-icons e-check",cssClass:"top-icon e-tick",tooltipText:this.l10n.getConstant("OK"),align:"Right",tabIndex:0}),s.push({id:e+"_cancel",prefixIcon:"e-icons e-close",cssClass:"top-icon e-save",tooltipText:this.l10n.getConstant("Cancel"),align:"Right"})),s},o.prototype.initResizeToolbar=function(){var t=this,e=this.parent,i=e.element.id,r=this.getLeftToolbarItem(!1,!0),n=this.getRightToolbarItem(),s=this.getResizeToolbarItem(),a=this.getZoomToolbarItem();D.isDevice?this.defToolbarItems=s:this.defToolbarItems=r.concat(a,s,n);var l={toolbarType:"resize",toolbarItems:this.defToolbarItems};e.trigger("toolbarUpdating",l),this.defToolbarItems=l.toolbarItems;var h=new Qt({width:"100%",items:this.defToolbarItems,clicked:this.defToolbarClicked.bind(this),created:function(){t.wireResizeBtnEvents(),e.trigger("toolbarCreated",{toolbarType:"shapes"}),D.isDevice?t.defToolbarItems.length>0&&!d(document.getElementById(i+"_bottomToolbar"))&&h.refreshOverflow():(t.createLeftToolbarControls(),t.defToolbarItems.length>0&&!d(document.getElementById(i+"_toolbar"))&&h.refreshOverflow())}});D.isDevice?h.appendTo("#"+i+"_bottomToolbar"):h.appendTo("#"+i+"_toolbar"),e.isResize=!1,this.enableDisableTbrBtn(),e.isResize=!0,e.notify("transform",{prop:"disableZoomOutBtn",value:{isZoomOut:!0}})},o.prototype.wireResizeBtnEvents=function(){var t=this.parent,e=t.element.id,i=t.element.querySelector("#"+e+"_resizeHeight"),r=t.element.querySelector("#"+e+"_resizeWidth");d(i)||(i.addEventListener("keydown",this.widthPress.bind(this)),r.addEventListener("keyup",this.heightAspectRatio.bind(this))),d(r)||(r.addEventListener("keydown",this.heightPress.bind(this)),i.addEventListener("keyup",this.widthAspectRatio.bind(this)))},o.prototype.enableDisableTbrBtn=function(){var t=this.parent,e=t.element.id;if(!this.preventEnableDisableUr){var i={appliedUndoRedoColl:[]};t.notify("undo-redo",{prop:"getAppliedUndoRedoColl",value:{obj:i}});var r={undoRedoStep:null};t.notify("undo-redo",{prop:"getUndoRedoStep",value:{obj:r}});var n=t.element.querySelector("#"+e+"_undo");n&&r.undoRedoStep===0?(n.classList.add("e-disabled"),n.parentElement.classList.add("e-overlay")):n&&r.undoRedoStep>0&&(n.classList.remove("e-disabled"),n.parentElement.classList.remove("e-overlay"));var s=t.element.querySelector("#"+e+"_redo");s&&r.undoRedoStep===i.appliedUndoRedoColl.length?(s.classList.add("e-disabled"),s.parentElement.classList.add("e-overlay")):(s&&r.undoRedoStep===0&&i.appliedUndoRedoColl.length>0||s&&r.undoRedoStep>0)&&(s.classList.remove("e-disabled"),s.parentElement.classList.remove("e-overlay"))}var a=document.querySelector("#"+e+"_zoomIn");a&&t.zoomSettings.zoomFactor>=t.zoomSettings.maxZoomFactor?(a.classList.add("e-disabled"),a.parentElement.classList.add("e-overlay")):a&&(a.classList.remove("e-disabled"),a.parentElement.classList.remove("e-overlay"));var l=document.querySelector("#"+e+"_zoomOut");l&&t.zoomSettings.zoomFactor<=t.zoomSettings.minZoomFactor?(l.classList.add("e-disabled"),l.parentElement.classList.add("e-overlay")):l&&(l.classList.remove("e-disabled"),l.parentElement.classList.remove("e-overlay"));var h=document.querySelector("#"+e+"_frame");h&&(t.currSelectionPoint&&t.currSelectionPoint.shape==="crop-circle"||t.isCircleCrop)?h.classList.add("e-overlay"):h&&h.classList.remove("e-overlay");var c=document.querySelector("#"+e+"_aspectratio");c&&(t.currSelectionPoint&&t.currSelectionPoint.shape==="crop-circle"||t.isCircleCrop)?c.classList.add("e-overlay"):c&&c.classList.remove("e-overlay")},o.prototype.createLeftToolbarControls=function(){var t=this.parent,e=t.element.id;if(this.defToolbarItems!==void 0&&this.defToolbarItems.length>0&&document.getElementById(e+"_toolbar")){var i=document.getElementById(e+"_toolbar").querySelector(".e-image-upload");if(i){var r=i.getElementsByTagName("input")[0],n=i.getElementsByTagName("button")[0];n.className="e-tbar-btn e-tbtn-txt top-icon",n.innerHTML="",n.title=this.l10n.getConstant("Browse"),n.appendChild(t.createElement("span",{className:"e-btn-icon e-icons e-upload-icon e-icon-left"})),r.onchange=this.fileSelect.bind(this,r)}}},o.prototype.fileSelect=function(t,e){var i=this.parent,r=t.files[0].type.split("/")[1],n=this.parent.getExtensionArray(),s=(r==="jpg"||r==="jpeg")&&(i.uploadSettings.allowedExtensions.indexOf("jpg")>-1||i.uploadSettings.allowedExtensions.indexOf("jpeg")>-1);this.fileName=t.files[0].name.split(".")[0];var a=t.files[0].size;this.parent.notify("toolbar",{prop:"setInitialSize",value:{value:t.files[0].size}}),(n.indexOf(r)>-1||s||r.indexOf("svg")>-1&&n.indexOf("svg")>-1)&&(!this.parent.uploadSettings.minFileSize||a>this.parent.uploadSettings.minFileSize)&&(!this.parent.uploadSettings.maxFileSize||a<this.parent.uploadSettings.maxFileSize)?this.parent.notify("draw",{prop:"fileSelect",value:{inputElement:t,args:e}}):(this.parent.isImageLoaded||(this.destroyTopToolbar(),this.createToolbar(),D.isDevice&&this.destroyBottomToolbar()),this.parent.showDialogPopup("unsupported",!(n.indexOf(r)>-1||s||r.indexOf("svg")>-1&&n.indexOf("svg")>-1)))},o.prototype.triggerTbarClickEvent=function(t){var e={item:t.item,originalEvent:t.event};this.parent.trigger("toolbarItemClicked",e)},o.prototype.renderAnnotationBtn=function(t){var e=this,i=this.parent,r=!1,n=[],s=i.element.id,a=["Ellipse","Arrow","Line","Rectangle","Pen","Path","Text","Image"];if(i.toolbar){for(var l=0;l<a.length;l++)if(i.toolbar.indexOf(a[l])!==-1){r=!0;break}}(d(i.toolbar)||!r||i.toolbar&&i.toolbar.indexOf("Pen")>-1)&&n.push({text:this.l10n.getConstant("Pen"),id:"pen",iconCss:"e-icons e-free-pen"}),(d(i.toolbar)||!r||i.toolbar&&i.toolbar.indexOf("Line")>-1)&&n.push({text:this.l10n.getConstant("Line"),id:"line",iconCss:"e-icons e-line"}),(d(i.toolbar)||!r||i.toolbar&&i.toolbar.indexOf("Rectangle")>-1)&&n.push({text:this.l10n.getConstant("Rectangle"),id:"rectangle",iconCss:"e-icons e-rectangle"}),(d(i.toolbar)||!r||i.toolbar&&i.toolbar.indexOf("Ellipse")>-1)&&n.push({text:this.l10n.getConstant("Ellipse"),id:"ellipse",iconCss:"e-icons e-circle"}),(d(i.toolbar)||!r||i.toolbar&&i.toolbar.indexOf("Arrow")>-1)&&n.push({text:this.l10n.getConstant("Arrow"),id:"arrow",iconCss:"e-icons e-arrow-right-up"}),(d(i.toolbar)||!r||i.toolbar&&i.toolbar.indexOf("Path")>-1)&&n.push({text:this.l10n.getConstant("Path"),id:"path",iconCss:"e-icons e-critical-path"}),(d(i.toolbar)||!r||i.toolbar&&i.toolbar.indexOf("Text")>-1)&&n.push({text:this.l10n.getConstant("Text"),id:"text",iconCss:"e-icons e-add-text"}),(d(i.toolbar)||!r||i.toolbar&&i.toolbar.indexOf("Image")>-1)&&n.push({text:this.l10n.getConstant("Image"),id:"image",iconCss:"e-icons e-image"});var h={freehandDrawSelectedId:null};i.notify("freehand-draw",{prop:"getFreehandDrawSelectedId",onPropertyChange:!1,value:{obj:h}});var c=D.isDevice?"#"+s+"_bottomToolbar #"+s:"#"+s;this.enableDisableCloneBtn(c,h);var u=t?this.getCurrentShapeIcon(i.activeObj.shape):"e-annotation",p=new Ye({items:n,iconCss:"e-icons "+u,cssClass:"e-image-popup",open:function(f){(i.currObjType.isFiltered||i.currObjType.isRedact)&&(i.okBtn(),i.element.querySelector("#"+s+"_annotationBtn").click()),D.isDevice&&(f.element.parentElement.style.top=p.element.getBoundingClientRect().top-f.element.parentElement.offsetHeight+"px"),i.activeObj.shape?document.getElementById(i.activeObj.shape).classList.add("e-selected"):i.togglePen&&document.getElementById("pen").classList.add("e-selected")},select:function(f){i.noPushUndo=!1,e.triggerTbarClickEvent(f),i.okBtn();var g=!1,v;i.activeObj.shape!==void 0&&(v=i.activeObj.shape.split("-")),(v===void 0&&i.currObjType.isCustomCrop||v!==void 0&&v[0]==="crop")&&(g=!0),i.currObjType.isCustomCrop=!1,(g||i.togglePan)&&(i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),e.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),e.refreshToolbar("main"));var y={currentFreehandDrawIndex:null};i.notify("freehand-draw",{prop:"getCurrentFreehandDrawIndex",value:{obj:y}});var C={shapeSettingsObj:{}},b,M,S=["ellipse","rectangle","text","image"],N;p.iconCss="e-icons "+e.getCurrentShapeIcon(f.item.id),i.notify("draw",{prop:"updateTempObjColl"}),i.notify("draw",{prop:"updateTempPointColl"});var x={penStrokeWidth:2};switch(f.item.id){case"pen":i.notify("freehand-draw",{prop:"getPenStrokeWidth",onPropertyChange:!1,value:{obj:x}}),i.notify("draw",{prop:"setTempStrokeWidth",value:{strokeWidth:x.penStrokeWidth}}),i.drawingShape=null,i.notify("draw",{prop:"setTempFreehandCounter",value:{tempFreehandCounter:i.freehandCounter}}),i.notify("draw",{prop:"setTempCurrentFreehandDrawIndex",value:{tempCurrentFreehandDrawIndex:y.currentFreehandDrawIndex}}),e.currentToolbar="pen",i.freeHandDraw(!0),i.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:C}}),b=C.shapeSettingsObj,i.notify("freehand-draw",{prop:"getPenStrokeWidth",onPropertyChange:!1,value:{obj:x}}),b.strokeWidth=x.penStrokeWidth,b.type=xi.FreehandDraw,M={cancel:!1,action:"insert",previousShapeSettings:b,currentShapeSettings:b},i.notify("freehand-draw",{prop:"triggerShapeChanging",value:{shapeChangingArgs:M}});break;case"text":e.currentToolbar="text",i.drawingShape=f.item.id,e.currentToolbar="text",e.setInitialShapeSettings(f),i.notify("selection",{prop:"annotate",value:{shape:f.item.id}}),i.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"text",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}});break;case"image":i.drawingShape=null,e.currentToolbar="shapes",i.element.querySelector("#"+s+"_fileUpload").click();break;case"ellipse":case"arrow":case"line":case"rectangle":case"path":i.drawingShape=f.item.id,e.currentToolbar="shapes",e.setInitialShapeSettings(f),i.notify("selection",{prop:"annotate",value:{shape:f.item.id}}),i.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"shapes",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}),i.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:C}}),b=C.shapeSettingsObj,N=S.indexOf(e.parent.activeObj.shape)===-1,M={cancel:!1,action:"insert",previousShapeSettings:b,currentShapeSettings:b,allowShapeOverflow:N},i.trigger("shapeChanging",M),i.editCompleteArgs=M,i.notify("shape",{prop:"updateShapeChangeEventArgs",value:{shapeSettings:M.currentShapeSettings}});break}e.updateToolbarItems();var A=i.togglePen;f.item.id==="pen"&&(i.togglePen=!1),i.notify("draw",{prop:"redrawDownScale"}),i.togglePen=A}});p.appendTo("#"+s+"_annotationBtn")},o.prototype.enableDisableCloneBtn=function(t,e){var i=this.parent,r=!1,n=Math.floor(i.activeObj.activePoint.width);i.activeObj.shape&&i.activeObj.shape==="text"&&i.activeObj.textSettings.fontSize===11&&(n===55||i.activeObj.textSettings.bold&&n===58)&&Math.floor(i.activeObj.activePoint.height)===11&&(r=!0);var s=document.querySelector(t+"_duplicate"),a=document.querySelector(t+"_remove"),l=document.querySelector(t+"_editText"),h=document.querySelector(t+"_zOrderBtn");r||i.activeObj.activePoint.width===0&&i.activeObj.activePoint.height===0&&(d(i.activeObj.pointColl)||i.activeObj.pointColl&&i.activeObj.pointColl.length===0)&&d(e.freehandDrawSelectedId)?(s&&s.classList.add("e-overlay"),a&&a.classList.add("e-overlay"),l&&l.classList.add("e-overlay"),h&&h.classList.add("e-overlay")):(s&&s.classList.remove("e-overlay"),a&&a.classList.remove("e-overlay"),l&&l.classList.remove("e-overlay"),h&&h.classList.remove("e-overlay")),h&&(i.shapeColl.length===0||e.freehandDrawSelectedId&&i.shapeColl.length===1)&&h.classList.add("e-overlay")},o.prototype.renderStraightenSlider=function(){var t=this.parent,e=t.element.id;if((d(t.toolbar)||t.toolbar&&t.toolbar.indexOf("Straightening")>-1)&&t.element.querySelector("#"+e+"_straightenSlider")){var i=this.createSlider(-45,45,t.cropObj.straighten,"straighten");i.appendTo("#"+e+"_straightenSlider");var r=i.element.querySelector(".e-handle");r&&!D.isDevice&&(r.addEventListener("mousedown",function(n){n.preventDefault(),n.stopPropagation()}),r.addEventListener("touchstart",function(n){n.preventDefault(),n.stopPropagation()}))}},o.prototype.renderCropBtn=function(t){var e=this,i=this.parent,r=[],n=!1,s=["CustomSelection","CircleSelection","SquareSelection","RatioSelection"];if(i.toolbar){for(var a=0;a<s.length;a++)if(i.toolbar.indexOf(s[a])!==-1){n=!0;break}}(d(i.toolbar)||!n||i.toolbar&&i.toolbar.indexOf("CustomSelection")>-1)&&r.push({text:this.l10n.getConstant("Custom"),id:"custom",iconCss:"e-icons e-custom"}),(d(i.toolbar)||!n||i.toolbar&&i.toolbar.indexOf("CircleSelection")>-1)&&r.push({text:this.l10n.getConstant("Circle"),id:"circle",iconCss:"e-icons e-circle"}),(d(i.toolbar)||!n||i.toolbar&&i.toolbar.indexOf("SquareSelection")>-1)&&r.push({text:this.l10n.getConstant("Square"),id:"square",iconCss:"e-icons e-square"}),(d(i.toolbar)||!n||i.toolbar&&i.toolbar.indexOf("RatioSelection")>-1)&&(r.push({text:"2:3",id:"2:3",iconCss:"e-icons e-custom-f"}),r.push({text:"3:2",id:"3:2",iconCss:"e-icons e-custom-a"}),r.push({text:"3:4",id:"3:4",iconCss:"e-icons e-custom-g"}),r.push({text:"4:3",id:"4:3",iconCss:"e-icons e-custom-b"}),r.push({text:"4:5",id:"4:5",iconCss:"e-icons e-custom-h"}),r.push({text:"5:4",id:"5:4",iconCss:"e-icons e-custom-c"}),r.push({text:"5:7",id:"5:7",iconCss:"e-icons e-custom-i"}),r.push({text:"7:5",id:"7:5",iconCss:"e-icons e-custom-d"}),r.push({text:"9:16",id:"9:16",iconCss:"e-icons e-custom-j"}),r.push({text:"16:9",id:"16:9",iconCss:"e-icons e-custom-e"}));var l,h;t?(l=this.getCurrentShapeIcon(t),h=t):i.activeObj.shape&&(i.activeObj.activePoint.width!==0||i.activeObj.activePoint.height!==0)||i.activeObj.shape==="path"&&i.activeObj.pointColl.length>0?(l=this.getCurrentShapeIcon(i.activeObj.shape),h=i.activeObj.shape):i.currSelectionPoint?(l=this.getCurrentShapeIcon(i.currSelectionPoint.shape),h=i.currSelectionPoint.shape):(l=r[0].iconCss,h=r[0].id);var c=new Ye({open:function(u){if(i.togglePan&&e.cancelPan(),D.isDevice&&(u.element.parentElement.style.top=c.element.getBoundingClientRect().top-u.element.parentElement.offsetHeight+"px"),i.activeObj.shape&&i.activeObj.shape.split("-").length>1){var p=document.getElementById(i.activeObj.shape.split("-")[1]);p&&(p.classList.add("e-selected"),p.focus())}i.notify("transform",{prop:"disableZoomOutBtn",value:{isZoomOut:!0}})},items:r,select:function(u){e.triggerTbarClickEvent(u),e.cropSelect(u),c.iconCss="e-icons "+e.getCurrentShapeIcon("crop-"+u.item.id),c.content=D.isDevice?null:i.toPascalCase(u.item.id)},iconCss:"e-icons "+l,cssClass:"e-image-popup e-ie-crop-ddb-popup",content:D.isDevice?null:i.toPascalCase(h.replace("crop-",""))});c.appendTo("#"+i.element.id+"_cropBtn")},o.prototype.renderTransformBtn=function(){var t=this,e=this.parent,i=[];(d(e.toolbar)||e.toolbar&&e.toolbar.indexOf("RotateLeft")>-1)&&i.push({text:this.l10n.getConstant("RotateLeft"),id:"rotateleft",iconCss:"e-icons e-anti-clock-wise"}),(d(e.toolbar)||e.toolbar&&e.toolbar.indexOf("RotateRight")>-1)&&i.push({text:this.l10n.getConstant("RotateRight"),id:"rotateright",iconCss:"e-icons e-clock-wise"}),(d(e.toolbar)||e.toolbar&&e.toolbar.indexOf("FlipHorizontal")>-1)&&i.push({text:this.l10n.getConstant("HorizontalFlip"),id:"horizontalflip",iconCss:"e-icons e-horizontal-flip"}),(d(e.toolbar)||e.toolbar&&e.toolbar.indexOf("FlipVertical")>-1)&&i.push({text:this.l10n.getConstant("VerticalFlip"),id:"verticalflip",iconCss:"e-icons e-vertical-flip"});var r=new Ye({open:function(n){if(D.isDevice){var s=n.element.parentElement,a=s.offsetHeight;s.style.display="none",s.style.top=r.element.getBoundingClientRect().top-a+"px",s.style.display="block"}},items:i,select:function(n){t.triggerTbarClickEvent(n),e.transformSelect.bind(t)},iconCss:"e-icons e-transform",cssClass:"e-image-popup"});r.appendTo("#"+e.element.id+"_transformBtn")},o.prototype.saveDialogPopup=function(){var t=this,e=this.parent,i=e.element.id,r=["Good","Great","Highest"];e.element.appendChild(e.createElement("div",{id:i+"_saveDialog"}));var n=e.createElement("div",{id:i+"_dialogContent"});n.style.display="flex";var s=n.appendChild(e.createElement("div",{id:i+"_dialogImgContent",className:"e-ie-dlg-img-content"}));s.appendChild(e.createElement("canvas",{id:i+"_imgPic",className:"e-ie-img-dlg-canvas"}));var a=s.appendChild(e.createElement("div",{id:i+"_imageNameContainer",className:"e-ie-img-size"}));a.appendChild(e.createElement("span",{id:i+"_imageNameLabel",className:"e-ie-quality-info"}));var l=n.appendChild(e.createElement("div",{id:i+"_dialogRightContent",className:"e-ie-dlg-right-content"})),h=l.appendChild(e.createElement("div",{id:i+"_namediv",className:"e-ie-img-save-name"}));h.appendChild(e.createElement("span",{id:i+"_labelImgname",className:"e-ie-img-label-name",innerHTML:this.l10n.getConstant("ImageName")})),h.appendChild(e.createElement("input",{id:i+"_imgNametext",className:"e-ie-img-input",attrs:{type:"text"}}));var c=l.appendChild(e.createElement("div",{id:i+"_imgNamediv",className:"e-ie-img-save-dlg"}));c.appendChild(e.createElement("span",{id:i+"_labelname",className:"e-ie-img-label-name",innerHTML:this.l10n.getConstant("Format")})),c.appendChild(e.createElement("button",{id:i+"_saveDropdownbtn",attrs:{tabindex:"1"}}));var u=l.appendChild(e.createElement("div",{id:i+"_imgQualitydiv",className:"e-ie-img-quality-name"})),p=e.createElement("div",{id:i+"_qualityContainer"});p.appendChild(e.createElement("span",{id:i+"_qualityLabel",className:"e-ie-img-quality-label",innerHTML:this.l10n.getConstant("Quality")})),p.appendChild(e.createElement("span",{id:i+"_qualityInfo",className:"e-circle-info e-icons e-ie-quality-span",attrs:{title:this.l10n.getConstant("QualityInfo")}}));var f=p.appendChild(e.createElement("div",{id:i+"_imgsizeSpan",className:"e-ie-img-size-value-span"}));f.appendChild(e.createElement("span",{id:i+"_imgsizeValueSpan",className:""})),u.appendChild(p);var g=e.createElement("div",{id:i+"_qualityOptionContainer",className:"e-ie-quality-option-container"}),v=u.appendChild(e.createElement("div",{id:i+"_qualityButtonGroup",className:"e-btn-group"}));r.forEach(function(C){var b=document.createElement("input");b.type="radio",b.id=i+"_"+C.toLowerCase(),b.name="quality",b.value=C.toLowerCase();var M=document.createElement("label");M.className="e-btn",M.htmlFor=C.toLowerCase(),M.textContent=t.l10n.getConstant(C),v.appendChild(b),v.appendChild(M)}),g.appendChild(v),g.appendChild(e.createElement("div",{id:i+"_qualitySlider",className:"e-ie-img-quality-slider"})),g.appendChild(e.createElement("button",{id:i+"_qualitybuttonIcon",className:"e-ie-img-icon-button",attrs:{type:"button"}})),u.appendChild(g),D.isDevice&&l.appendChild(e.createElement("span",{id:i+"_qualitySize",className:"e-ie-img-quality-size"})),e.element.querySelector("#"+i+"_saveDialog").style.display="block",e.element.appendChild(n);var y=new rn({target:e.element,header:this.l10n.getConstant("SaveAs"),closeOnEscape:!0,content:document.getElementById(i+"_dialogContent"),width:D.isDevice?"345px":"570px",isModal:!0,animationSettings:{effect:"Zoom"},beforeOpen:this.onBeforeopen(),close:this.saveDialogClosed.bind(this,i),cssClass:"e-ie-save-dialog",buttons:[{click:function(){y.hide()},buttonModel:{content:this.l10n.getConstant("Close"),cssClass:"e-save-cancel-btn"}},{click:function(){t.download(),y.hide(),t.isSlider=!1},buttonModel:{isPrimary:!0,content:this.l10n.getConstant("Download"),cssClass:"e-flat e-save-download-btn"}}]});y.appendTo("#"+i+"_saveDialog")},o.prototype.saveDialogClosed=function(t){$(document.getElementById(t+"_saveDropdownbtn"),"dropdownbutton")&&$(document.getElementById(t+"_saveDropdownbtn"),"dropdownbutton").destroy(),this.isSlider=!1,document.querySelector("#"+t+"_qualityButtonGroup")&&document.querySelector("#"+t+"_qualitySlider")&&(document.querySelector("#"+t+"_qualityButtonGroup").remove(),document.querySelector("#"+t+"_qualitySlider").remove(),document.querySelector("#"+t+"_imgsizeValueSpan").remove(),document.querySelector("#"+t+"_imageNameLabel").remove(),document.querySelector("#"+t+"_imgsizeSpan").remove()),document.getElementById(t+"_dialogContent").remove(),$(document.getElementById(t+"_saveDialog"),"dialog").destroy(),document.getElementById(t+"_saveDialog").remove()},o.prototype.onBeforeopen=function(){var t=this,e=this.parent,i=e.element.id,r={canvas:null},n=[{id:"jpeg",text:"JPEG"},{id:"png",text:"PNG"},{id:"svg",text:"SVG"},{id:"webp",text:"WebP"}],s=new Fm({placeholder:this.l10n.getConstant("ImageName")});s.appendTo("#"+i+"_imgNametext");var a=document.getElementById(i+"_imgQualitydiv"),l=document.getElementById(i+"_qualitySlider"),h=document.querySelector("#"+i+"_qualityButtonGroup"),c=document.querySelector("#"+i+"_qualitybuttonIcon"),u=document.querySelector("#"+i+"_imgsizeSpan"),p;D.isDevice?p=document.getElementById(i+"_qualitySize"):p=document.getElementById(i+"_imageNameLabel");var f={fileName:"",fileType:""};e.notify("draw",{prop:"getFileName",onPropertyChange:!1,value:{obj:f}}),this.fileType=f.fileType?f.fileType:"JPEG",e.notify("export",{prop:"exportToCanvas",value:{object:r}});var g=r.canvas,v=document.getElementById(i+"_imgPic");v.width=g.width,v.height=g.height;var y=new bi({iconCss:"e-icons e-settings"});y.appendTo("#"+i+"_qualitybuttonIcon");var C=document.getElementById(i+"_saveDropdownbtn");if(C){var b=document.createElement("span");b.innerHTML=this.fileType==="Webp"?"Webp":this.fileType.toUpperCase(),C&&C.appendChild(b);var M=new Ye({items:n,open:function(N){D.isDevice&&(N.element.parentElement.style.top=M.element.getBoundingClientRect().top-N.element.parentElement.offsetHeight+"px");var x=b.innerHTML;x!==""&&N.element.querySelector('[aria-label = "'+x+'"]').classList.add("e-selected-btn")},select:function(N){u.style.display="none",t.fileType=b.innerHTML=N.item.text,N.item.id!=="jpeg"?(a.style.display="none",p.style.display="block",t.updateImageSize(1,r.canvas,t.fileType),l&&(t.isSlider&&$(l,"slider").destroy(),l.style.display="none"),t.isSlider=!1):(a.style.display="block",ee([h],"e-hide"),l.style.display="none",p.style.display="block",t.updateImageSize(d(t.currentQuality)?1:t.currentQuality,r.canvas,t.fileType),document.getElementById(i+"_"+t.imageQuality).checked=!0)}});M.appendTo("#"+i+"_saveDropdownbtn");var S=document.getElementById(i+"_imgNametext");S.value=this.fileName?this.fileName:f.fileName,f.fileType&&f.fileType.toUpperCase()!=="JPEG"&&(a.style.display="none",u.style.display="none"),D.isDevice?(document.getElementById(i+"_dialogImgContent").style.display="none",document.getElementById(i+"_dialogRightContent").style.width="100%",this.updateImageSize(1,r.canvas,this.fileType)):this.updateImageSize(1,r.canvas,this.fileType)}document.getElementById(i+"_"+this.imageQuality).checked=!0,h.addEventListener("click",this.qualityBtnClickHandler.bind(this)),c.addEventListener("click",this.qualityBtnClickHandler.bind(this))},o.prototype.qualityBtnClickHandler=function(t){var e=this,i=this.parent,r=i.element.id,n=t.target,s={fileName:""},a={canvas:null},l={Good:.8,Great:.9,Highest:1},h=document.querySelector("#"+r+"_qualityButtonGroup"),c=document.querySelector("#"+r+"_qualitySlider"),u=document.querySelector("#"+r+"_qualityOptionContainer"),p=document.querySelector("#"+r+"_imgsizeSpan"),f=document.querySelector("#"+r+"_imgsizeValueSpan");if(i.notify("draw",{prop:"getFileName",onPropertyChange:!1,value:{obj:s}}),i.notify("export",{prop:"exportToCanvas",value:{object:a}}),t.currentTarget.id===r+"_qualitybuttonIcon"&&!this.isSlider){Z([h],"e-hide"),c.style.display="block",p.style.display="inline-block",u.style.display="flex";var g=new es({tooltip:{placement:"Before",isVisible:!0,format:"P0",showOn:"Focus"},min:.01,max:1,step:.01,value:this.currentQuality,type:"MinRange",width:D.isDevice?"80%":"190px",created:function(){e.updateImageSize(e.currentQuality,a.canvas,"jpeg"),f.innerHTML=Math.round(e.currentQuality*100).toString()},changed:function(v){e.currentQuality=v.value,f.innerHTML=Math.round(e.currentQuality*100).toString(),i.notify("export",{prop:"setImageQuality",value:{value:v.value}}),e.updateImageSize(v.value,a.canvas,"jpeg")}});g.appendTo("#"+r+"_qualitySlider"),g.element.parentElement.classList.add("e-ie-quality-slider"),this.isSlider=!0}else t.currentTarget.id===r+"_qualitybuttonIcon"&&this.isSlider?($(c,"slider").destroy(),c.style.display="none",p.style.display="none",ee([h],"e-hide"),u.style.display="block",this.isSlider=!1):l.hasOwnProperty(n.textContent)&&!this.isSlider&&(t.target.previousElementSibling.checked=!0,this.currentQuality=l[n.textContent],this.imageQuality=n.textContent.toLowerCase(),this.updateImageSize(l[n.textContent],a.canvas,"jpeg"))},o.prototype.updateImageSize=function(t,e,i){var r,n=this.parent,s=n.element.id,a=document.getElementById(s+"_imgPic"),l=a.getContext("2d"),h;if(D.isDevice?h=document.getElementById(s+"_qualitySize"):h=document.getElementById(s+"_imageNameLabel"),i.toLowerCase()==="jpeg")e.toBlob(function(C){if(r=Math.floor(C.size/1024),r>1e3){var b=r/1024;h.innerHTML=this.l10n.getConstant("ImageSize")+": "+b.toFixed(2)+" MB",r=+b.toFixed(2)}else h.innerHTML=this.l10n.getConstant("ImageSize")+": "+r.toFixed(2)+" KB",r=+r.toFixed(2);if(D.isDevice)a.style.display="none";else{var M=new Image;M.src=URL.createObjectURL(C),M.onload=function(){l.drawImage(M,0,0),URL.revokeObjectURL(M.src)}}this.fileSize=r}.bind(this),"image/jpeg",t);else if(!d(i)&&(i.toLowerCase()==="png"||i.toLowerCase()==="webp")){var c="image/"+i.toLowerCase();l.drawImage(e,0,0),e.toBlob(function(C){if(r=Math.floor(C.size/1024),r>1e3){var b=r/1024;h.innerHTML=this.l10n.getConstant("ImageSize")+": "+b.toFixed(2)+" MB",r=+b.toFixed(2)}else h.innerHTML=this.l10n.getConstant("ImageSize")+": "+r.toFixed(2)+" KB",r=+r.toFixed(2);D.isDevice&&(a.style.display="none"),this.fileSize=r}.bind(this),c,1)}else if(!d(i)&&i.toLowerCase()==="svg"){l.drawImage(e,0,0);var u=e.toDataURL("image/svg+xml"),p=u.split(",")[1],f=p.length,g=f,v=Math.floor(g/1024);if(v>1e3){var y=v/1024;h.innerHTML=this.l10n.getConstant("ImageSize")+": "+y.toFixed(2)+" MB",v=+y.toFixed(2)}else h.innerHTML=this.l10n.getConstant("ImageSize")+": "+v.toFixed(2)+" KB",v=+v.toFixed(2);D.isDevice&&(a.style.display="none"),this.fileSize=v}else if(D.isDevice)a.style.display="none";else if(l.drawImage(e,0,0),this.initialSize>1e3){var y=this.initialSize/1048576;h.innerHTML=this.l10n.getConstant("ImageSize")+": "+y.toFixed(2)+" MB"}else h.innerHTML=this.l10n.getConstant("ImageSize")+": "+this.initialSize.toFixed(2)+" KB"},o.prototype.download=function(){var t=this.parent,e=t.element.id;if(this.fileType==="JPEG"&&this.isSlider){var i=$(document.getElementById(e+"_qualitySlider"),"slider").value;t.notify("export",{prop:"setImageQuality",value:{value:i}})}else t.notify("export",{prop:"setImageQuality",value:{value:this.currentQuality}});var r=document.getElementById(e+"_imgNametext").value;t.export(this.fileType,r)},o.prototype.getCropTransformToolbarItem=function(){var t=this.parent,e=t.element.id,i=[];if(i.push({id:e+"_crop",tooltipText:this.l10n.getConstant("CropSelection"),align:"Center",template:'<button id="'+e+'_cropBtn"></button>'}),i.push({align:"Center",type:"Separator"}),(d(t.toolbar)||t.toolbar&&(t.toolbar.indexOf("Transform")>-1||t.toolbar.indexOf("RotateLeft")>-1))&&i.push({id:e+"_rotateLeft",prefixIcon:"e-icons e-anti-clock-wise",tooltipText:this.l10n.getConstant("RotateLeft"),align:"Center"}),(d(t.toolbar)||t.toolbar&&(t.toolbar.indexOf("Transform")>-1||t.toolbar.indexOf("RotateRight")>-1))&&i.push({id:e+"_rotateRight",prefixIcon:"e-icons e-clock-wise",tooltipText:this.l10n.getConstant("RotateRight"),align:"Center"}),i.length>2&&i.push({align:"Center",type:"Separator"}),(d(t.toolbar)||t.toolbar&&(t.toolbar.indexOf("Transform")>-1||t.toolbar.indexOf("HorizontalFlip")>-1))&&i.push({id:e+"_horizontalFlip",prefixIcon:"e-icons e-horizontal-flip",tooltipText:this.l10n.getConstant("HorizontalFlip"),align:"Center"}),(d(t.toolbar)||t.toolbar&&(t.toolbar.indexOf("Transform")>-1||t.toolbar.indexOf("VerticalFlip")>-1))&&i.push({id:e+"_verticalFlip",prefixIcon:"e-icons e-vertical-flip",tooltipText:this.l10n.getConstant("VerticalFlip"),align:"Center"}),(d(t.toolbar)||t.toolbar&&t.toolbar.indexOf("Straightening")>-1)&&!D.isDevice&&(i.push({align:"Center",type:"Separator"}),d(t.toolbar)||t.toolbar&&t.toolbar.indexOf("Straightening")>-1)){var r=document.createElement("span");r.innerHTML=this.l10n.getConstant("Straighten"),i.push({id:e+"_straightenSpan",cssClass:"e-ie-straighten-span",template:r,align:"Center"}),i.push({id:e+"_straighten",cssClass:"top-icon e-straighten",tooltipText:this.l10n.getConstant("Straighten"),align:"Center",type:"Input",template:'<div id="'+e+'_straightenSlider"></div>'});var n=document.createElement("span");n.innerHTML=t.transform.straighten.toString()+"&#176",i.push({id:e+"_straightenSpan",cssClass:"e-ie-straighten-value-span",template:n,align:"Center"})}return D.isDevice||(i.push({id:e+"_ok",prefixIcon:"e-icons e-check",cssClass:"top-icon e-tick",tooltipText:this.l10n.getConstant("OK"),align:"Right",tabIndex:0}),i.push({id:e+"_cancel",prefixIcon:"e-icons e-close",cssClass:"top-icon e-save",tooltipText:this.l10n.getConstant("Cancel"),align:"Right"})),i},o.prototype.getShapesToolbarItem=function(t){var e=this.parent,i=e.element.id,r=[];(d(e.toolbar)||e.toolbar)&&r.push({id:i+"_annotation",tooltipText:this.l10n.getConstant("Annotation"),align:"Center",template:'<button id="'+i+'_annotationBtn"></button>'}),t.indexOf("fillColor")>-1&&r.push({prefixIcon:"e-icons e-copy",id:i+"_fillcolor",cssClass:"top-icon e-fill",tooltipText:this.l10n.getConstant("FillColor"),align:"Center",type:"Input",template:'<button id="'+i+'_fillColorBtn"></button>'}),t.indexOf("strokeColor")>-1&&r.push({prefixIcon:"e-icons e-copy",id:i+"_strokecolor",cssClass:"top-icon e-stroke",tooltipText:this.l10n.getConstant("StrokeColor"),align:"Center",type:"Input",template:'<button id="'+i+'_borderColorBtn"></button>'}),t.indexOf("strokeWidth")>-1&&r.push({id:i+"_strokeWidth",cssClass:"top-icon e-size",tooltipText:this.l10n.getConstant("StrokeWidth"),align:"Center",type:"Input",template:'<button id="'+i+'_borderWidthBtn"></button>'}),t.indexOf("start")>-1&&r.push({id:i+"_start",cssClass:"top-icon e-size",tooltipText:this.l10n.getConstant("Start"),align:"Center",type:"Input",template:'<button id="'+i+'_startBtn"></button>'}),t.indexOf("borderRadius")>-1&&r.push({id:i+"_rectangleRadius",cssClass:"top-icon e-size",tooltipText:this.l10n.getConstant("BorderRadius"),align:"Center",type:"Input",template:'<button id="'+i+'_rectangleRadiusBtn"></button>'}),t.indexOf("end")>-1&&r.push({id:i+"_end",cssClass:"top-icon e-size",tooltipText:this.l10n.getConstant("End"),align:"Center",type:"Input",template:'<button id="'+i+'_endBtn"></button>'}),t.indexOf("flip")>-1&&(r.push({id:i+"_rotLeft",prefixIcon:"e-anti-clock-wise",tooltipText:this.l10n.getConstant("RotateLeft"),align:"Center"}),r.push({id:i+"_rotRight",prefixIcon:"e-clock-wise",tooltipText:this.l10n.getConstant("RotateRight"),align:"Center"}),r.push({id:i+"_hFlip",prefixIcon:"e-horizontal-flip",tooltipText:this.l10n.getConstant("HorizontalFlip"),align:"Center"}),r.push({id:i+"_vFlip",prefixIcon:"e-vertical-flip",tooltipText:this.l10n.getConstant("VerticalFlip"),align:"Center"})),t.indexOf("transparency")>-1&&(r.push({align:"Center",type:"Separator"}),r.push({id:i+"_transparency",prefixIcon:"e-opacity",tooltipText:this.l10n.getConstant("Opacity"),align:"Center"})),r.push({align:"Center",type:"Separator"}),t.indexOf("z-order")>-1&&r.push({id:i+"_zOrder",cssClass:"top-icon e-list-unordered-3",tooltipText:this.l10n.getConstant("ZOrder"),align:"Center",type:"Input",template:'<button id="'+i+'_zOrderBtn"></button>'}),t.indexOf("duplicate")>-1&&r.push({id:i+"_duplicate",prefixIcon:"e-icons e-order",cssClass:"top-icon e-order",tooltipText:this.l10n.getConstant("Duplicate"),align:"Center"}),t.indexOf("remove")>-1&&r.push({id:i+"_remove",prefixIcon:"e-icons e-trash",cssClass:"top-icon e-trash",tooltipText:this.l10n.getConstant("Remove"),align:"Center"}),t.indexOf("text")>-1&&r.push({id:i+"_editText",prefixIcon:"e-icons e-annotation-edit",cssClass:"top-icon e-annotation-edit",tooltipText:this.l10n.getConstant("EditText"),align:"Center"});for(var n=this.processSubToolbar(t),s=0,a=n.length;s<a;s++)r.push(n[s]);if(!D.isDevice){var l={shape:null};e.notify("selection",{prop:"getCurrentDrawingShape",value:{obj:l}}),l.shape!=="path"&&(r.push({id:i+"_ok",prefixIcon:"e-icons e-check",cssClass:"top-icon e-tick",tooltipText:this.l10n.getConstant("OK"),align:"Right",tabIndex:0}),r.push({id:i+"_cancel",prefixIcon:"e-icons e-close",cssClass:"top-icon e-save",tooltipText:this.l10n.getConstant("Cancel"),align:"Right"}))}return r},o.prototype.initCropTransformToolbar=function(t,e){var i=this,r=this.parent,n=r.element.id,s=this.getLeftToolbarItem(),a=this.getRightToolbarItem(),l=this.getCropTransformToolbarItem(),h=this.getZoomToolbarItem();D.isDevice?this.defToolbarItems=l:this.defToolbarItems=s.concat(h,l,a);var c={toolbarType:"crop-transform",toolbarItems:this.defToolbarItems};r.trigger("toolbarUpdating",c),this.defToolbarItems=c.toolbarItems;var u=new Qt({width:"100%",items:this.defToolbarItems,clicked:this.defToolbarClicked.bind(this),created:function(){i.renderCropBtn(t),i.renderStraightenSlider(),i.wireZoomBtnEvents(),r.trigger("toolbarCreated",{toolbarType:"shapes"}),D.isDevice?i.defToolbarItems.length>0&&document.getElementById(n+"_bottomToolbar")&&(u.refreshOverflow(),u.refreshOverflow(),u.refreshOverflow()):(i.createLeftToolbarControls(),i.defToolbarItems.length>0&&document.getElementById(n+"_toolbar")&&u.refreshOverflow()),document.getElementById(n+"_cropBtn")&&d(e)&&(D.isDevice||r.notify("draw",{prop:"select",onPropertyChange:!1,value:{type:i.getCropTextContent(document.getElementById(n+"_cropBtn")).toLowerCase(),startX:null,startY:null,width:null,height:null}}))}});D.isDevice?u.appendTo("#"+n+"_bottomToolbar"):u.appendTo("#"+n+"_toolbar");var p=r.element.querySelector("#"+n+"_straightenSlider");(d(r.toolbar)||r.toolbar&&r.toolbar.indexOf("Straightening")>-1)&&p&&p.parentElement.clientHeight>this.toolbarHeight&&(this.toolbarHeight=r.toolbarHeight=p.parentElement.clientHeight),this.enableDisableTbrBtn(),r.notify("transform",{prop:"disableZoomOutBtn",value:{isZoomOut:!0}})},o.prototype.getCropTextContent=function(t){if(t){var e={"e-custom":"Custom","e-circle":"Circle","e-square":"Square","e-custom-a":"3:2","e-custom-b":"4:3","e-custom-c":"5:4","e-custom-d":"7:5","e-custom-e":"16:9","e-custom-f":"2:3","e-custom-g":"3:4","e-custom-h":"4:5","e-custom-i":"5:7","e-custom-j":"9:16"},i=t.children[0].classList;for(var r in e)if(i.contains(r))return e[r]}return""},o.prototype.getCurrentShapeIcon=function(t){var e={rectangle:"e-rectangle",ellipse:"e-circle",line:"e-line",arrow:"e-arrow-right-up",path:"e-critical-path",text:"e-add-text",image:"e-image",pen:"e-free-pen","crop-custom":"e-custom","crop-circle":"e-circle","crop-square":"e-square","crop-3:2":"e-custom-a","crop-4:3":"e-custom-b","crop-5:4":"e-custom-c","crop-7:5":"e-custom-d","crop-16:9":"e-custom-e","crop-2:3":"e-custom-f","crop-3:4":"e-custom-g","crop-4:5":"e-custom-h","crop-5:7":"e-custom-i","crop-9:16":"e-custom-j"};return e[t]?e[t]:t&&t.indexOf("crop-")!==-1?"e-custom":"e-free-pen"},o.prototype.initShapesToolbarItem=function(t){var e=this,i=this.parent,r=i.element.id,n=this.getLeftToolbarItem(),s=this.getRightToolbarItem(),a=this.getShapesToolbarItem(t),l=this.getZoomToolbarItem();D.isDevice?this.defToolbarItems=a:this.defToolbarItems=n.concat(l,a,s);var h={toolbarType:i.activeObj.shape?i.activeObj.shape:"shapes",toolbarItems:this.defToolbarItems};i.trigger("toolbarUpdating",h),this.isToolbarString(h.toolbarItems)?(t=h.toolbarItems,this.excludeItems(h.toolbarItems)):this.defToolbarItems=h.toolbarItems;var c=new Qt({width:"100%",items:this.defToolbarItems,clicked:this.defToolbarClicked.bind(this),created:function(){e.renderAnnotationBtn(!0),e.createRectangleRadius(t),e.createShapeColor(t),e.createShapeBtn(t),e.createZOrderBtn(t),i.activeObj.shape==="arrow"&&(t.some(function(u){return u.toLowerCase().indexOf("start")>-1})&&e.createStartBtn(),t.some(function(u){return u.toLowerCase().indexOf("end")>-1})&&e.createEndBtn()),e.wireZoomBtnEvents(),i.trigger("toolbarCreated",{toolbarType:"shapes"}),D.isDevice?e.defToolbarItems.length>0&&document.getElementById(r+"_bottomToolbar")&&(c.refreshOverflow(),c.refreshOverflow(),c.refreshOverflow()):(e.createLeftToolbarControls(),e.defToolbarItems.length>0&&document.getElementById(r+"_toolbar")&&c.refreshOverflow())}});D.isDevice?c.appendTo("#"+r+"_bottomToolbar"):c.appendTo("#"+r+"_toolbar"),this.enableDisableTbrBtn()},o.prototype.createRectangleRadius=function(t){var e=this,i=this.parent,r=i.element.id;if(t.indexOf("borderRadius")>-1){var n=[{id:"1",text:this.l10n.getConstant("0")},{id:"2",text:this.l10n.getConstant("20")},{id:"3",text:this.l10n.getConstant("40")},{id:"4",text:this.l10n.getConstant("60")},{id:"5",text:this.l10n.getConstant("80")},{id:"6",text:this.l10n.getConstant("100")}],s=document.getElementById(r+"_rectangleRadiusBtn"),a=document.createElement("span");a.innerHTML=this.l10n.getConstant(i.frameObj.radius.toString()),a.className="e-shape-rectangle-radius",s.appendChild(a);var l=new Ye({items:n,open:function(h){if(D.isDevice){var c=h.element.parentElement;c.style.top=l.element.getBoundingClientRect().top-c.offsetHeight+"px"}var u=l.element.childNodes[0].textContent;u!==""&&h.element.querySelector('[aria-label = "'+u+'"]').classList.add("e-selected-btn")},select:function(h){if(e.triggerTbarClickEvent(h),a.textContent=h.item.text,i.updateStrokeWidth(h.item.id,"radius"),D.isDevice){if(document.getElementById(r+"_bottomToolbar")){var c=$(r+"_bottomToolbar","toolbar");c.refreshOverflow()}}else if(document.getElementById(r+"_toolbar")){var u=$(r+"_toolbar","toolbar");u.refreshOverflow()}i.notify("undo-redo",{prop:"updateUndoRedoStack",onPropertyChange:!1})}});l.appendTo("#"+r+"_rectangleRadiusBtn")}},o.prototype.beforeModeSwitch=function(t,e){this.popupLeft=t.element.offsetParent.style.left,t.mode==="Picker"?(e.showButtons=!0,e.dataBind(),t.element.querySelector(".e-apply").title=this.l10n.getConstant("Apply"),t.element.querySelector(".e-cancel").title=this.l10n.getConstant("Cancel"),t.element.querySelector(".e-mode-switch-btn").title=this.l10n.getConstant("StandardColors")):(e.showButtons=!1,e.dataBind(),t.element.querySelector(".e-mode-switch-btn").title=this.l10n.getConstant("MoreColors"))},o.prototype.createShapeColor=function(t){var e=this,i=this.parent,r=i.element.id;if(t.indexOf("fillColor")>-1){i.element.querySelector(".e-template.e-fill").appendChild(i.createElement("input",{id:r+"_shape_fill"}));var n=new hr({modeSwitcher:!0,noColor:!0,value:"",inline:!0,showButtons:!1,mode:"Palette",cssClass:"e-shape-fill-color",beforeModeSwitch:function(h){return e.beforeModeSwitch(h,n)},presetColors:{custom:["","#f44336","#e91e63","#9c27b0","#673ab7","#2196f3","#03a9f4","#00bcd4","#009688","#ffeb3b","#ffffff","#ffebee","#fce4ec","#f3e5f5","#ede7f6","#e3f2fd","#e1f5fe","#e0f7fa","#e0f2f1","#fffde7","#f2f2f2","#ffcdd2","#f8bbd0","#e1bee7","#d1c4e9","#bbdefb","#b3e5fc","#b2ebf2","#b2dfdb","#fff9c4","#e6e6e6","#ef9a9a","#f48fb1","#ce93d8","#b39ddb","#90caf9","#81d4fa","#80deea","#80cbc4","#fff59d","#cccccc","#e57373","#f06292","#ba68c8","#9575cd","#64b5f6","#4fc3f7","#4dd0e1","#4db6ac","#fff176","#b3b3b3","#ef5350","#ec407a","#ab47bc","#7e57c2","#42a5f5","#29b6f6","#26c6da","#26a69a","#ffee58","#999999","#e53935","#d81b60","#8e24aa","#5e35b1","#1e88e5","#039be5","#00acc1","#00897b","#fdd835","#808080","#d32f2f","#c2185b","#7b1fa2","#512da8","#1976d2","#0288d1","#0097a7","#00796b","#fbc02d","#666666","#c62828","#ad1457","#6a1b9a","#4527a0","#1565c0","#0277bd","#00838f","#00695c","#f9a825","#4d4d4d","#b71c1c","#880e4f","#4a148c","#311b92","#0d47a1","#01579b","#006064","#004d40","#f57f17"]},beforeTileRender:function(h){h.value===""&&h.element.classList.add("e-nocolor-item")},change:function(h){i.updateFillColor(h.value),h.currentValue.rgba===""?s.element.children[0].classList.add("e-nocolor-item"):(s.element.children[0].classList.remove("e-nocolor-item"),s.element.children[0].style.backgroundColor=h.currentValue.rgba),s.toggle(),i.notify("undo-redo",{prop:"updateUndoRedoStack",onPropertyChange:!1})},onModeSwitch:function(h){D.isDevice&&(h.element.parentElement.parentElement.style.left=e.popupLeft,h.element.parentElement.parentElement.style.top=s.element.getBoundingClientRect().top-h.element.parentElement.parentElement.offsetHeight+"px")},beforeClose:function(){s.toggle()}},"#"+r+"_shape_fill"),s=new Ye({open:function(h){var c=h.element.parentElement;D.isDevice&&(c.style.top=s.element.getBoundingClientRect().top-c.offsetHeight+"px",window.innerWidth<=520&&(c.style.left=i.element.offsetLeft+"px"))},target:".e-shape-fill-color",iconCss:"e-dropdownbtn-preview",cssClass:"e-ie-ddb-popup"},"#"+r+"_fillColorBtn");n.inline=!0,n.value=n.getValue(n.value,"rgba"),i.element.querySelector(".e-fill.e-template .e-dropdownbtn-preview").classList.add("e-nocolor-item")}if(t.indexOf("strokeColor")>-1){i.element.querySelector(".e-template.e-stroke").appendChild(i.createElement("input",{id:r+"_shape_stroke"}));var a=new hr({modeSwitcher:!0,noColor:!1,value:"#fff",inline:!0,showButtons:!1,mode:"Palette",cssClass:"e-shape-stroke-color",beforeModeSwitch:function(h){e.popupLeft=h.element.offsetParent.style.left,a.value=i.activeObj.strokeSettings.strokeColor!=="#fff"?i.activeObj.strokeSettings.strokeColor:"#008000ff",e.beforeModeSwitch(h,a)},presetColors:this.presetColors,change:function(h){i.updateStrokeColor(h.value),l.element.children[0].style.backgroundColor=h.currentValue.rgba,l.toggle(),i.notify("undo-redo",{prop:"updateUndoRedoStack",onPropertyChange:!1})},onModeSwitch:function(h){D.isDevice&&(h.element.parentElement.parentElement.style.left=e.popupLeft,h.element.parentElement.parentElement.style.top=l.element.getBoundingClientRect().top-h.element.parentElement.parentElement.offsetHeight+"px")},beforeClose:function(){l.toggle()}},"#"+r+"_shape_stroke"),l=new Ye({open:function(h){var c=h.element.parentElement;D.isDevice&&(c.style.top=l.element.getBoundingClientRect().top-c.offsetHeight+"px",window.innerWidth<=520&&(c.style.left=i.element.offsetLeft+"px"))},target:".e-shape-stroke-color",iconCss:"e-dropdownbtn-preview",cssClass:"e-ie-ddb-popup"},"#"+r+"_borderColorBtn");a.inline=!0,a.value=a.getValue(a.value,"rgba"),i.element.querySelector(".e-stroke.e-template .e-dropdownbtn-preview").style.background="#fff"}},o.prototype.createShapeBtn=function(t){var e=this,i=this.parent,r=i.element.id;if(t.indexOf("strokeWidth")>-1){var n=[{id:"1",text:this.l10n.getConstant("XSmall")},{id:"2",text:this.l10n.getConstant("Small")},{id:"3",text:this.l10n.getConstant("Medium")},{id:"4",text:this.l10n.getConstant("Large")},{id:"5",text:this.l10n.getConstant("XLarge")}];i.activeObj.shape&&(i.activeObj.shape==="rectangle"||i.activeObj.shape==="ellipse")&&(n=[{id:"1",text:this.l10n.getConstant("NoOutline")},{id:"2",text:this.l10n.getConstant("XSmall")},{id:"3",text:this.l10n.getConstant("Small")},{id:"4",text:this.l10n.getConstant("Medium")},{id:"5",text:this.l10n.getConstant("Large")},{id:"6",text:this.l10n.getConstant("XLarge")}]);var s=document.getElementById(r+"_borderWidthBtn"),a=document.createElement("span");a.innerHTML=this.l10n.getConstant("XSmall"),a.className="e-shape-stroke-width",s.appendChild(a);var l=new Ye({items:n,open:function(h){D.isDevice&&(h.element.parentElement.style.top=l.element.getBoundingClientRect().top-h.element.parentElement.offsetHeight+"px");var c=a.innerHTML;c!==""&&h.element.querySelector('[aria-label = "'+c+'"]').classList.add("e-selected-btn")},select:function(h){if(e.triggerTbarClickEvent(h),a.textContent=h.item.text,i.updateStrokeWidth(h.item.id,"width",i.activeObj.shape),D.isDevice){if(document.getElementById(r+"_bottomToolbar")){var c=$(r+"_bottomToolbar","toolbar");c.refreshOverflow()}}else if(document.getElementById(r+"_toolbar")){var u=$(r+"_toolbar","toolbar");u.refreshOverflow()}i.notify("undo-redo",{prop:"updateUndoRedoStack",onPropertyChange:!1})}});l.appendTo("#"+r+"_borderWidthBtn")}},o.prototype.createZOrderBtn=function(t){var e=this,i=this.parent,r=i.element.id;if(t.indexOf("z-order")>-1){var n=[{text:this.l10n.getConstant("BringForward"),id:"bringForward",iconCss:"e-icons e-bring-forward"},{text:this.l10n.getConstant("SendBackward"),id:"sendBackward",iconCss:"e-icons e-send-backward"},{text:this.l10n.getConstant("BringToFront"),id:"bringToFront",iconCss:"e-icons e-bring-to-front"},{text:this.l10n.getConstant("SendToBack"),id:"sendToBack",iconCss:"e-icons e-send-to-back"}],s=new Ye({items:n,iconCss:"e-icons e-layers",beforeOpen:function(a){document.getElementById(i.element.id+"_zOrderBtn").classList.contains("e-disabled")&&(a.cancel=!0);var l={freehandSelectedIndex:-1};i.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:l}});var h={order:null};i.notify("shape",{prop:"getHighestOrder",onPropertyChange:!1,value:{obj:h}});var c=i.activeObj.order?i.activeObj.order:i.getObjFromId(i.pointColl[l.freehandSelectedIndex].id).order;c&&c>=h.order?(a.items[0].disabled=!0,a.items[2].disabled=!0):(a.items[0].disabled=!1,a.items[2].disabled=!1),i.notify("shape",{prop:"getLowestOrder",onPropertyChange:!1,value:{obj:h}}),c&&c<=h.order?(a.items[1].disabled=!0,a.items[3].disabled=!0):(a.items[1].disabled=!1,a.items[3].disabled=!1)},open:function(a){D.isDevice&&(a.element.parentElement.style.top=s.element.getBoundingClientRect().top-a.element.parentElement.offsetHeight+"px")},select:function(a){e.triggerTbarClickEvent(a);var l={freehandDrawSelectedId:null};i.notify("freehand-draw",{prop:"getFreehandDrawSelectedId",onPropertyChange:!1,value:{obj:l}});var h=l.freehandDrawSelectedId?l.freehandDrawSelectedId:i.activeObj.currIndex;if(i.updateShapeOrder(h,a.item.id),D.isDevice){if(document.getElementById(r+"_bottomToolbar")){var c=$(r+"_bottomToolbar","toolbar");c.refreshOverflow()}}else if(document.getElementById(r+"_toolbar")){var u=$(r+"_toolbar","toolbar");u.refreshOverflow()}h.indexOf("shape")>-1?i.notify("undo-redo",{prop:"updateUndoRedoStack",onPropertyChange:!1}):h.indexOf("pen")>-1&&i.notify("undo-redo",{prop:"updateUndoRedoStack",value:{isPenDraw:!0}})}});s.appendTo("#"+r+"_zOrderBtn")}},o.prototype.createStartBtn=function(){var t=this,e=this.parent,i=e.element.id,r=[{id:"1",text:this.l10n.getConstant("None")},{id:"2",text:this.l10n.getConstant("Bar")},{id:"3",text:this.l10n.getConstant("Arrow")},{id:"4",text:this.l10n.getConstant("ArrowSolid")},{id:"5",text:this.l10n.getConstant("Circle")},{id:"6",text:this.l10n.getConstant("CircleSolid")},{id:"7",text:this.l10n.getConstant("Square")},{id:"8",text:this.l10n.getConstant("SquareSolid")}],n=document.getElementById(i+"_startBtn"),s=document.createElement("span");d(e.activeObj.start)&&(e.activeObj.start="none"),s.innerHTML=e.pascalToSplitWords(e.activeObj.start),s.className="e-shape-start",n.appendChild(s);var a=new Ye({items:r,open:function(l){D.isDevice&&(l.element.parentElement.style.top=a.element.getBoundingClientRect().top-l.element.parentElement.offsetHeight+"px");var h=s.innerHTML;h!==""&&l.element.querySelector('[aria-label = "'+h+'"]').classList.add("e-selected-btn")},select:function(l){var h={1:"none",2:"bar",3:"arrow",4:"arrowSolid",5:"circle",6:"circleSolid",7:"square",8:"squareSolid"};e.notify("selection",{prop:"setArrowShape",value:{type:"initial",shape:h[""+l.item.id]}}),t.triggerTbarClickEvent(l),s.textContent=l.item.text,e.updateArrow("startArrow",l.item.id),e.notify("undo-redo",{prop:"updateUndoRedoStack",onPropertyChange:!1})}});a.appendTo("#"+i+"_startBtn")},o.prototype.createEndBtn=function(){var t=this,e=this.parent,i=e.element.id,r=[{id:"1",text:this.l10n.getConstant("None")},{id:"2",text:this.l10n.getConstant("Bar")},{id:"3",text:this.l10n.getConstant("Arrow")},{id:"4",text:this.l10n.getConstant("ArrowSolid")},{id:"5",text:this.l10n.getConstant("Circle")},{id:"6",text:this.l10n.getConstant("CircleSolid")},{id:"7",text:this.l10n.getConstant("Square")},{id:"8",text:this.l10n.getConstant("SquareSolid")}],n=document.getElementById(i+"_endBtn"),s=document.createElement("span");d(e.activeObj.end)&&(e.activeObj.end="arrowSolid"),s.innerHTML=e.pascalToSplitWords(e.activeObj.end),s.className="e-shape-end",n.appendChild(s);var a=new Ye({items:r,open:function(l){D.isDevice&&(l.element.parentElement.style.top=a.element.getBoundingClientRect().top-l.element.parentElement.offsetHeight+"px");var h=s.innerHTML;h!==""&&l.element.querySelector('[aria-label = "'+h+'"]').classList.add("e-selected-btn")},select:function(l){var h={1:"none",2:"bar",3:"arrow",4:"arrowSolid",5:"circle",6:"circleSolid",7:"square",8:"squareSolid"};e.notify("selection",{prop:"setArrowShape",value:{type:"final",shape:h[""+l.item.id]}}),t.triggerTbarClickEvent(l),s.textContent=l.item.text,e.updateArrow("endArrow",l.item.id),e.notify("undo-redo",{prop:"updateUndoRedoStack",onPropertyChange:!1})}});a.appendTo("#"+i+"_endBtn")},o.prototype.getTextToolbarItem=function(t){var e=this.parent,i=e.element.id,r=[];(d(e.toolbar)||e.toolbar)&&r.push({id:i+"_annotation",tooltipText:this.l10n.getConstant("Annotation"),align:"Center",template:'<button id="'+i+'_annotationBtn"></button>'}),t.indexOf("fontFamily")>-1&&r.push({id:i+"_fontFamily",cssClass:"top-icon e-img-font-family",tooltipText:this.l10n.getConstant("FontFamily"),align:"Center",template:'<button id="'+i+'_fontFamilyBtn"></button>'}),t.indexOf("fontSize")>-1&&r.push({id:i+"_fontSize",cssClass:"top-icon e-img-font-size",tooltipText:this.l10n.getConstant("FontSize"),align:"Center",template:'<button id="'+i+'_fontSizeBtn"></button>'}),t.indexOf("fontColor")>-1&&r.push({cssClass:"top-icon e-text-font-color",id:i+"_text_strokecolor",tooltipText:this.l10n.getConstant("FontColor"),align:"Center",type:"Input",template:'<button id="'+i+'_fontColorBtn"></button>'}),t.indexOf("strokeColor")>-1&&r.push({cssClass:"top-icon e-stroke-text-font-color",id:i+"_stroke_text_color",tooltipText:this.l10n.getConstant("TextOutlineColor"),align:"Center",type:"Input",template:'<button id="'+i+'_strokeTextColorBtn"></button>'}),t.indexOf("fillColor")>-1&&r.push({cssClass:"top-icon e-text-background-color",id:i+"_text_backgroundcolor",tooltipText:this.l10n.getConstant("FillColor"),align:"Center",type:"Input",template:'<button id="'+i+'_bgColorBtn"></button>'}),t.indexOf("bold")>-1&&r.push({id:i+"_bold",prefixIcon:"e-icons e-bold",cssClass:"top-icon e-bold",tooltipText:this.l10n.getConstant("Bold"),align:"Center"}),t.indexOf("italic")>-1&&r.push({id:i+"_italic",prefixIcon:"e-icons e-italic",cssClass:"top-icon e-italic",tooltipText:this.l10n.getConstant("Italic"),align:"Center"}),t.indexOf("strokeWidth")>-1&&r.push({id:i+"_strokeWidth",cssClass:"top-icon e-size",tooltipText:this.l10n.getConstant("TextOutlineWidth"),align:"Center",type:"Input",template:'<button id="'+i+'_borderWidthBtn"></button>'}),t.indexOf("transparency")>-1&&r.push({id:i+"_transparency",prefixIcon:"e-opacity",tooltipText:this.l10n.getConstant("Opacity"),align:"Center"}),r.push({align:"Center",type:"Separator"}),t.indexOf("z-order")>-1&&r.push({id:i+"_zOrder",cssClass:"top-icon e-list-unordered-3",tooltipText:this.l10n.getConstant("ZOrder"),align:"Center",type:"Input",template:'<button id="'+i+'_zOrderBtn"></button>'}),t.indexOf("duplicate")>-1&&r.push({id:i+"_duplicate",prefixIcon:"e-icons e-order",cssClass:"top-icon e-order",tooltipText:this.l10n.getConstant("Duplicate"),align:"Center",disabled:e.textArea.style.display==="block"||e.textArea.style.display==="inline-block"}),t.indexOf("remove")>-1&&r.push({id:i+"_remove",prefixIcon:"e-icons e-trash",cssClass:"top-icon e-trash",tooltipText:this.l10n.getConstant("Remove"),align:"Center",disabled:e.textArea.style.display==="block"||e.textArea.style.display==="inline-block"}),t.indexOf("text")>-1&&r.push({id:i+"_editText",prefixIcon:"e-icons e-annotation-edit",cssClass:"top-icon e-annotation-edit",tooltipText:this.l10n.getConstant("EditText"),align:"Center",disabled:e.textArea.style.display==="block"||e.textArea.style.display==="inline-block"});for(var n=this.processSubToolbar(t),s=0,a=n.length;s<a;s++)r.push(n[s]);return D.isDevice||(r.push({id:i+"_ok",prefixIcon:"e-icons e-check",cssClass:"top-icon e-tick",tooltipText:this.l10n.getConstant("OK"),align:"Right",tabIndex:0}),r.push({id:i+"_cancel",prefixIcon:"e-icons e-close",cssClass:"top-icon e-save",tooltipText:this.l10n.getConstant("Cancel"),align:"Right"})),r},o.prototype.getFontFamilyItems=function(){var t=this.parent,e=[];return t.fontFamily&&t.fontFamily.items&&t.fontFamily.items.length>0?e=t.fontFamily.items:D.isDevice?e=[{id:"arial",text:"ABC"},{id:"calibri",text:"ABC"},{id:"georgia",text:"ABC"},{id:"roboto",text:"ABC"},{id:"tahoma",text:"ABC"}]:e=[{id:"arial",text:"Arial"},{id:"calibri",text:"Calibri"},{id:"georgia",text:"Georgia"},{id:"roboto",text:"Roboto"},{id:"tahoma",text:"Tahoma"}],e},o.prototype.initTextToolbarItem=function(t){var e=this,i=this.parent,r=i.element.id,n=this.getLeftToolbarItem(),s=this.getRightToolbarItem(),a=this.getTextToolbarItem(t),l=this.getZoomToolbarItem();D.isDevice?this.defToolbarItems=a:this.defToolbarItems=n.concat(l,a,s);var h={toolbarType:"text",toolbarItems:this.defToolbarItems};i.trigger("toolbarUpdating",h),this.isToolbarString(h.toolbarItems)?(t=h.toolbarItems,this.excludeItems(h.toolbarItems)):this.defToolbarItems=h.toolbarItems;var c=new Qt({width:"100%",items:this.defToolbarItems,clicked:this.defToolbarClicked.bind(this),created:function(){e.renderAnnotationBtn(!0),e.createTextColor(t),e.createStrokeTextColor(t),e.createShapeBtn(t),e.createBackgroundColor(t),e.createTextBtn(t),e.createZOrderBtn(t),e.wireZoomBtnEvents(),i.trigger("toolbarCreated",{toolbarType:"text"}),D.isDevice?e.defToolbarItems.length>0&&document.getElementById(r+"_bottomToolbar")&&(c.refreshOverflow(),c.refreshOverflow(),c.refreshOverflow()):(e.createLeftToolbarControls(),e.defToolbarItems.length>0&&document.getElementById(r+"_toolbar")&&c.refreshOverflow())}});D.isDevice?c.appendTo("#"+r+"_bottomToolbar"):c.appendTo("#"+r+"_toolbar"),this.enableDisableTbrBtn()},o.prototype.createTextColor=function(t){var e=this,i=this.parent,r=i.element.id;if(t.indexOf("fontColor")>-1&&i.element.querySelector(".e-template.e-text-font-color")){i.element.querySelector(".e-template.e-text-font-color").appendChild(i.createElement("input",{id:r+"_text_font"}));var n=new hr({modeSwitcher:!0,noColor:!1,value:"#fff",inline:!0,showButtons:!1,mode:"Palette",cssClass:"e-text-fontt-color",beforeModeSwitch:function(a){e.popupLeft=a.element.offsetParent.style.left,n.value=i.activeObj.strokeSettings.strokeColor!=="#fff"?i.activeObj.strokeSettings.strokeColor:"#008000ff",e.beforeModeSwitch(a,n)},presetColors:this.presetColors,change:function(a){i.updateFontColor(a.value,"Text"),s.element.children[0].style.backgroundColor=a.currentValue.rgba,s.toggle(),(i.activeObj.activePoint.width!==0||i.activeObj.activePoint.height!==0)&&i.notify("undo-redo",{prop:"updateUndoRedoStack",onPropertyChange:!1})},onModeSwitch:function(a){D.isDevice&&(a.element.parentElement.parentElement.style.left=e.popupLeft,a.element.parentElement.parentElement.style.top=s.element.getBoundingClientRect().top-a.element.parentElement.parentElement.offsetHeight+"px")},beforeClose:function(){s.toggle()}},"#"+r+"_text_font"),s=new Ye({open:function(a){var l=a.element.parentElement;D.isDevice&&(l.style.top=s.element.getBoundingClientRect().top-l.offsetHeight+"px",window.innerWidth<=520&&(l.style.left=i.element.offsetLeft+"px"))},target:".e-text-fontt-color",iconCss:"e-dropdownbtn-preview",cssClass:"e-ie-ddb-popup"},"#"+r+"_fontColorBtn");n.inline=!0,n.value=n.getValue(n.value,"rgba"),i.element.querySelector(".e-text-font-color.e-template .e-dropdownbtn-preview").style.background="#fff"}},o.prototype.createBackgroundColor=function(t){var e=this,i=this.parent,r=i.element.id;if(t.indexOf("fillColor")>-1&&i.element.querySelector(".e-template.e-text-background-color")){i.element.querySelector(".e-template.e-text-background-color").appendChild(i.createElement("input",{id:r+"_text_bgColor"}));var n=new hr({modeSwitcher:!0,noColor:!0,value:"",inline:!0,showButtons:!1,mode:"Palette",cssClass:"e-text-fontt-color",beforeModeSwitch:function(a){e.popupLeft=a.element.offsetParent.style.left,e.beforeModeSwitch(a,n)},presetColors:{custom:["","#f44336","#e91e63","#9c27b0","#673ab7","#2196f3","#03a9f4","#00bcd4","#009688","#ffeb3b","#ffffff","#ffebee","#fce4ec","#f3e5f5","#ede7f6","#e3f2fd","#e1f5fe","#e0f7fa","#e0f2f1","#fffde7","#f2f2f2","#ffcdd2","#f8bbd0","#e1bee7","#d1c4e9","#bbdefb","#b3e5fc","#b2ebf2","#b2dfdb","#fff9c4","#e6e6e6","#ef9a9a","#f48fb1","#ce93d8","#b39ddb","#90caf9","#81d4fa","#80deea","#80cbc4","#fff59d","#cccccc","#e57373","#f06292","#ba68c8","#9575cd","#64b5f6","#4fc3f7","#4dd0e1","#4db6ac","#fff176","#b3b3b3","#ef5350","#ec407a","#ab47bc","#7e57c2","#42a5f5","#29b6f6","#26c6da","#26a69a","#ffee58","#999999","#e53935","#d81b60","#8e24aa","#5e35b1","#1e88e5","#039be5","#00acc1","#00897b","#fdd835","#808080","#d32f2f","#c2185b","#7b1fa2","#512da8","#1976d2","#0288d1","#0097a7","#00796b","#fbc02d","#666666","#c62828","#ad1457","#6a1b9a","#4527a0","#1565c0","#0277bd","#00838f","#00695c","#f9a825","#4d4d4d","#b71c1c","#880e4f","#4a148c","#311b92","#0d47a1","#01579b","#006064","#004d40","#f57f17"]},beforeTileRender:function(a){a.value===""&&a.element.classList.add("e-nocolor-item")},change:function(a){i.updateFontColor(a.value,"Background"),a.currentValue.rgba===""?s.element.children[0].classList.add("e-nocolor-item"):(s.element.children[0].classList.remove("e-nocolor-item"),s.element.children[0].style.backgroundColor=a.currentValue.rgba),s.toggle(),(i.activeObj.activePoint.width!==0||i.activeObj.activePoint.height!==0)&&i.notify("undo-redo",{prop:"updateUndoRedoStack",onPropertyChange:!1})},onModeSwitch:function(a){D.isDevice&&(a.element.parentElement.parentElement.style.left=e.popupLeft,a.element.parentElement.parentElement.style.top=s.element.getBoundingClientRect().top-a.element.parentElement.parentElement.offsetHeight+"px")},beforeClose:function(){s.toggle()}},"#"+r+"_text_bgColor"),s=new Ye({open:function(a){var l=a.element.parentElement;D.isDevice&&(l.style.top=s.element.getBoundingClientRect().top-l.offsetHeight+"px",window.innerWidth<=520&&(l.style.left=i.element.offsetLeft+"px"))},target:".e-text-fontt-color",iconCss:"e-dropdownbtn-preview",cssClass:"e-ie-ddb-popup"},"#"+r+"_bgColorBtn");n.inline=!0,n.value=n.getValue(n.value,"rgba"),i.element.querySelector(".e-text-background-color.e-template .e-dropdownbtn-preview").style.background="#fff"}},o.prototype.createStrokeTextColor=function(t){var e=this,i=this.parent,r=i.element.id;if(t.indexOf("strokeColor")>-1&&i.element.querySelector(".e-template.e-stroke-text-font-color")){i.element.querySelector(".e-template.e-stroke-text-font-color").appendChild(i.createElement("input",{id:r+"_stroke_text"}));var n=new hr({modeSwitcher:!0,noColor:!0,value:"",inline:!0,showButtons:!1,mode:"Palette",cssClass:"e-text-fontt-color",beforeModeSwitch:function(a){e.popupLeft=a.element.offsetParent.style.left,e.beforeModeSwitch(a,n)},presetColors:{custom:["","#f44336","#e91e63","#9c27b0","#673ab7","#2196f3","#03a9f4","#00bcd4","#009688","#ffeb3b","#ffffff","#ffebee","#fce4ec","#f3e5f5","#ede7f6","#e3f2fd","#e1f5fe","#e0f7fa","#e0f2f1","#fffde7","#f2f2f2","#ffcdd2","#f8bbd0","#e1bee7","#d1c4e9","#bbdefb","#b3e5fc","#b2ebf2","#b2dfdb","#fff9c4","#e6e6e6","#ef9a9a","#f48fb1","#ce93d8","#b39ddb","#90caf9","#81d4fa","#80deea","#80cbc4","#fff59d","#cccccc","#e57373","#f06292","#ba68c8","#9575cd","#64b5f6","#4fc3f7","#4dd0e1","#4db6ac","#fff176","#b3b3b3","#ef5350","#ec407a","#ab47bc","#7e57c2","#42a5f5","#29b6f6","#26c6da","#26a69a","#ffee58","#999999","#e53935","#d81b60","#8e24aa","#5e35b1","#1e88e5","#039be5","#00acc1","#00897b","#fdd835","#808080","#d32f2f","#c2185b","#7b1fa2","#512da8","#1976d2","#0288d1","#0097a7","#00796b","#fbc02d","#666666","#c62828","#ad1457","#6a1b9a","#4527a0","#1565c0","#0277bd","#00838f","#00695c","#f9a825","#4d4d4d","#b71c1c","#880e4f","#4a148c","#311b92","#0d47a1","#01579b","#006064","#004d40","#f57f17"]},beforeTileRender:function(a){a.value===""&&a.element.classList.add("e-nocolor-item")},change:function(a){i.updateStrokeTextColor(a.value),a.currentValue.rgba===""?s.element.children[0].classList.add("e-nocolor-item"):(s.element.children[0].classList.remove("e-nocolor-item"),s.element.children[0].style.backgroundColor=a.currentValue.rgba),s.toggle(),(i.activeObj.activePoint.width!==0||i.activeObj.activePoint.height!==0)&&i.notify("undo-redo",{prop:"updateUndoRedoStack",onPropertyChange:!1})},onModeSwitch:function(a){D.isDevice&&(a.element.parentElement.parentElement.style.left=e.popupLeft,a.element.parentElement.parentElement.style.top=s.element.getBoundingClientRect().top-a.element.parentElement.parentElement.offsetHeight+"px")},beforeClose:function(){s.toggle()}},"#"+r+"_stroke_text"),s=new Ye({open:function(a){var l=a.element.parentElement;D.isDevice&&(l.style.top=s.element.getBoundingClientRect().top-l.offsetHeight+"px",window.innerWidth<=520&&(l.style.left=i.element.offsetLeft+"px"))},target:".e-text-fontt-color",iconCss:"e-dropdownbtn-preview",cssClass:"e-ie-ddb-popup"},"#"+r+"_strokeTextColorBtn");n.inline=!0,n.value=n.getValue(n.value,"rgba"),i.element.querySelector(".e-stroke-text-font-color.e-template .e-dropdownbtn-preview").style.background="#fff"}},o.prototype.createTextBtn=function(t){var e=this,i=this.parent,r=i.element.id;if(t.indexOf("fontFamily")>-1){var n=document.getElementById(r+"_fontFamilyBtn"),s=document.createElement("span");D.isDevice?(s.innerHTML="ABC",s.setAttribute("style","font-family: "+i.fontFamily.default.toLowerCase()+"'")):s.innerHTML=i.fontFamily.default,s.className="e-text-font-family",n&&n.appendChild(s);var a=new Ye({items:this.getFontFamilyItems(),cssClass:"e-font-family",createPopupOnClick:!0,beforeItemRender:function(p){p.element.setAttribute("style","font-family:"+p.element.id)},open:function(p){D.isDevice&&(p.element.parentElement.style.top=a.element.getBoundingClientRect().top-p.element.parentElement.offsetHeight+"px");var f;i.textArea.style.display==="block"||i.textArea.style.display==="inline-block"?f=i.textArea.style.fontFamily:f=i.activeObj.textSettings.fontFamily;var g=p.element.querySelector('[id *= "'+f.toLowerCase()+'"]');g&&g.classList.add("e-selected-btn")},select:function(p){e.triggerTbarClickEvent(p),s.textContent=p.item.text,D.isDevice&&s.setAttribute("style","font-family:"+p.item.id),i.updateFontFamily(p.item.id),i.notify("undo-redo",{prop:"updateUndoRedoStack",onPropertyChange:!1});var f=document.getElementById(i.element.id+"_toolbar");f&&f.classList.contains("e-control")&&$(f,"toolbar").refreshOverflow()}});a.appendTo("#"+r+"_fontFamilyBtn")}if(t.indexOf("fontSize")>-1){var l=document.getElementById(r+"_fontSizeBtn"),h=document.createElement("span"),c=i.getFontSizes();h.innerHTML=c[0].text,h.className="e-text-font-size",l.appendChild(h);var u=new Ye({cssClass:"e-font-size",items:c,open:function(p){D.isDevice&&(p.element.parentElement.style.top=u.element.getBoundingClientRect().top-p.element.parentElement.offsetHeight+"px");var f=h.innerHTML;p.element.querySelector('[aria-label *= "'+f+'"]').classList.add("e-selected-btn")},select:function(p){e.triggerTbarClickEvent(p),h.textContent=p.item.text,i.updateFontSize(p.item.text),i.notify("undo-redo",{prop:"updateUndoRedoStack",onPropertyChange:!1})}});u.appendTo("#"+r+"_fontSizeBtn")}},o.prototype.refreshToolbar=function(t,e,i,r,n,s,a){var l=this.parent,h=l.element.id;if(!(!l.isImageLoaded||l.isCropToolbar)){var c={},u,p;if(t!=="filter"&&t!=="color"){var f=document.getElementById(h+"_toolbar"),g=document.getElementById(h+"_customizeWrapper"),v=document.getElementById(h+"_bottomToolbar");if(g&&$(g,"toolbar")&&this.defToolbarItems.length>0&&($(g,"toolbar").destroy(),g.innerHTML=""),f&&f.classList.contains("e-control")&&this.defToolbarItems.length>0&&($(f,"toolbar").destroy(),f.innerHTML=""),f&&(this.defToolbarItems.length>0||l.toolbar&&l.toolbar.length>0&&l.toolbar.indexOf("Open")===-1)){var y=$(f,"toolbar");d(y)||(y.destroy(),document.getElementById(l.element.id+"_toolbar").innerHTML="")}v&&this.defToolbarItems.length>0&&v.className.indexOf("e-control")>-1&&($(v,"toolbar").destroy(),v.innerHTML="")}switch(this.refreshSlider(),document.querySelector(".e-slider-tooltip")&&document.querySelector(".e-slider-tooltip").remove(),this.isFrameToolbar=l.isCropTab=!1,t){case"main":D.isDevice?i?this.initMainToolbar(!1,!0,!0,!1,!1,!0):this.initMainToolbar(!1,!0,null,!1,!1,!0):(!D.isDevice||r)&&(r?this.initMainToolbar(e,D.isDevice,null):this.initMainToolbar(e,D.isDevice,null)),D.isDevice&&this.initBottomToolbar();break;case"shapes":if(l.isPublicMethod||(l.noPushUndo=!0),D.isDevice&&this.initMainToolbar(!1,!0,!0),l.activeObj.shape==="line"||l.activeObj.shape==="path"?c.toolbarItems=["strokeColor","strokeWidth","z-order","duplicate","remove"]:l.activeObj.shape==="arrow"?c.toolbarItems=["strokeColor","strokeWidth","start","end","z-order","duplicate","remove"]:l.activeObj.shape==="image"?c.toolbarItems=["flip","z-order","duplicate","remove","transparency"]:l.activeObj.shape==="rectangle"?c.toolbarItems=["fillColor","strokeColor","strokeWidth","borderRadius","z-order","duplicate","remove"]:c.toolbarItems=["fillColor","strokeColor","strokeWidth","z-order","duplicate","remove"],this.initShapesToolbarItem(c.toolbarItems),l.activeObj.shape==="image"){var C=m({},l.activeObj,{},!0);l.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),l.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}}),l.activeObj=C,l.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:l.activeObj,isCropRatio:null,points:null,isPreventDrag:!0}}),this.renderQAT(!1)}break;case"text":D.isDevice&&this.initMainToolbar(!1,!0,!0),c.toolbarItems=["fontFamily","fontSize","fontColor","fillColor","strokeColor","strokeWidth","bold","italic","z-order","duplicate","remove","text"],this.initTextToolbarItem(c.toolbarItems);break;case"pen":D.isDevice&&this.initMainToolbar(!1,!0,!0),c.toolbarItems=["strokeColor","strokeWidth","z-order","remove","transparency"],this.initPenToolbarItem(c.toolbarItems);break;case"adjustment":D.isDevice&&this.initMainToolbar(!1,!0,!0),this.initAdjustmentToolbarItem();break;case"filter":this.updateContextualToolbar(t);break;case"resize":(l.isCircleCrop||l.currSelectionPoint&&l.currSelectionPoint.shape==="crop-circle")&&(l.aspectHeight=l.aspectWidth,this.isAspectRatio=!1),this.initResizeToolbar(),D.isDevice&&this.initMainToolbar(!1,!0,!0,!0),u=l.element.querySelector("#"+h+"_aspectratio"),p=l.element.querySelector("#"+h+"_nonaspectratio"),l.aspectWidth&&l.aspectHeight&&(p?l.notify("transform",{prop:"resize",value:{width:l.aspectWidth,height:l.aspectHeight,isAspectRatio:!1}}):u&&l.notify("transform",{prop:"resize",value:{width:l.aspectWidth,height:null,isAspectRatio:!0}}));break;case"color":this.updateContextualToolbar(t,n);break;case"croptransform":d(a)&&(l.allowDownScale=!1,l.isCropTab=!0),D.isDevice&&this.initMainToolbar(!1,!0,!0),d(a)&&l.updateCropTransformItems(),this.initCropTransformToolbar(s,a),D.isDevice&&this.isToolbar()&&this.updateContextualToolbar("color","straighten",!0),l.isMaskImage&&this.refreshToolbar("main");break;case"frame":this.isFrameToolbar=!0,D.isDevice?(this.initMainToolbar(!1,!0,!0),this.initMainToolbar(!1,!0,!0,!1,!0)):this.initMainToolbar(!0,null,null,!1,!0);var b=l.element.querySelector("#"+h+"_"+l.frameObj.type);b&&b.classList.add("e-selected-btn"),l.frameObj.type!=="none"&&this.updateContextualToolbar(t,n),l.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}});break;case"redact":if(D.isDevice?(this.initMainToolbar(!1,!0,!0),this.initMainToolbar(!1,!0,!0,null,null,null,!0)):this.initMainToolbar(e,D.isDevice,null,null,null,null,!0),this.enableDisableTbrBtn(),l.activeObj.redactType==="blur"){var M=l.element.querySelector("#"+h+"_redactBlur");M&&M.classList.add("e-selected-btn")}else{var S=l.element.querySelector("#"+h+"_pixelate");S&&S.classList.add("e-selected-btn")}this.redactSlider(l.activeObj.redactType);break}this.refreshDropDownBtn(i),this.updateKBDNavigation(t),this.currToolbar=t}},o.prototype.updateRedactObj=function(){var t=this.parent,e=m([],t.objColl,[],!0);t.objColl=[];var i=m({},t.activeObj,{},!0);t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),t.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}}),t.objColl=e;for(var r=0;r<t.objColl.length;r++){var n=t.objColl[r];n.shape==="redact"&&(n.redactImage=t.createElement("canvas"),n.redactImage.width=n.activePoint.width,n.redactImage.height=n.activePoint.height,n.redactImage.getContext("2d").drawImage(t.lowerCanvas,n.activePoint.startX,n.activePoint.startY,n.activePoint.width,n.activePoint.height,0,0,n.redactImage.width,n.redactImage.height))}t.isCropTab=!1,t.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}}),t.isCropTab=!0,i&&t.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:i,isCropRatio:null,points:null,isPreventDrag:!0}});var s={panMove:null};t.notify("transform",{prop:"getPanMove",onPropertyChange:!1,value:{obj:s}}),s.panMove&&t.notify("transform",{prop:"drawPannedImage",onPropertyChange:!1,value:{xDiff:null,yDiff:null}})},o.prototype.updateKBDNavigation=function(t){var e=this.parent,i=e.element.id;if(!(!e.isKBDNavigation||this.currToolbar===t)&&this.isToolbar()){var r=e.element.querySelectorAll("#"+i+"_toolbar")[0],n=void 0,s;if(r){if(n=r.querySelector(".e-toolbar-center"),!n||!n.children[0])return;s=n.children[0].querySelector(".e-btn");var a=n.children[1];if(a&&(a=a.children[0]),a&&(a=a.children[0]),t==="resize"&&a&&(s=a),t==="filter"){var l=document.querySelector("#"+i+"_defaultCanvas");l&&setTimeout(function(){return l.focus()},50)}s&&(t==="main"?setTimeout(function(){return s.focus()},50):s.focus())}}},o.prototype.performCropTransformClick=function(t,e){var i=this.parent;d(e)&&(i.notify("draw",{prop:"setTempStraightenZoomDeg"}),i.tempStraighten=i.transform.straighten,(i.currObjType.isFiltered||i.currObjType.isRedact)&&i.okBtn(),i.isStraightening=!0),this.refreshToolbar("croptransform",null,null,null,null,t,e),d(e)&&(i.notify("draw",{prop:"setDestForStraighten"}),i.notify("draw",{prop:"setTempDestForStraighten"}))},o.prototype.getAdjustmentToolbarItem=function(){var t=[],e=this.parent,i=!1,r=e.element.id,n=["Brightness","Contrast","Hue","Saturation","Exposure","Opacity","Blur"];if(e.toolbar){for(var s=0;s<n.length;s++)if(e.toolbar.indexOf(n[s])!==-1){i=!0;break}}(d(e.toolbar)||!i||e.toolbar&&e.toolbar.indexOf("Brightness")>-1)&&t.push({id:r+"_brightness",prefixIcon:"e-icons e-brightness",cssClass:"top-icon e-brightness",tooltipText:this.l10n.getConstant("Brightness"),align:"Center"}),(d(e.toolbar)||!i||e.toolbar&&e.toolbar.indexOf("Contrast")>-1)&&t.push({id:r+"_contrast",prefixIcon:"e-icons e-contrast",cssClass:"top-icon e-contrast",tooltipText:this.l10n.getConstant("Contrast"),align:"Center"}),(d(e.toolbar)||!i||e.toolbar&&e.toolbar.indexOf("Hue")>-1)&&t.push({id:r+"_hue",prefixIcon:"e-icons e-fade",cssClass:"top-icon e-fade",tooltipText:this.l10n.getConstant("Hue"),align:"Center"}),(d(e.toolbar)||!i||e.toolbar&&e.toolbar.indexOf("Saturation")>-1)&&t.push({id:r+"_saturation",prefixIcon:"e-icons e-saturation",cssClass:"top-icon e-saturation",tooltipText:this.l10n.getConstant("Saturation"),align:"Center"}),(d(e.toolbar)||!i||e.toolbar&&e.toolbar.indexOf("Exposure")>-1)&&t.push({id:r+"_exposure",prefixIcon:"e-icons e-grain",cssClass:"top-icon e-grain",tooltipText:this.l10n.getConstant("Exposure"),align:"Center"}),(d(e.toolbar)||!i||e.toolbar&&e.toolbar.indexOf("Opacity")>-1)&&t.push({id:r+"_opacity",prefixIcon:"e-icons e-opacity",cssClass:"top-icon e-opacity",tooltipText:this.l10n.getConstant("Opacity"),align:"Center"}),(d(e.toolbar)||!i||e.toolbar&&e.toolbar.indexOf("Blur")>-1)&&t.push({id:r+"_blur",prefixIcon:"e-icons e-tint",cssClass:"top-icon e-tint",tooltipText:this.l10n.getConstant("Blur"),align:"Center"});for(var a=this.processToolbar("center"),s=0,l=a.length;s<l;s++)t.push(a[s]);return D.isDevice||(t.push({id:r+"_ok",prefixIcon:"e-icons e-check",cssClass:"top-icon e-tick",tooltipText:this.l10n.getConstant("OK"),align:"Right",tabIndex:0}),t.push({id:r+"_cancel",prefixIcon:"e-icons e-close",cssClass:"top-icon e-save",tooltipText:this.l10n.getConstant("Cancel"),align:"Right"})),t},o.prototype.getFrameToolbarItem=function(){var t=this.parent,e=t.element.id,i=[];return i.push({prefixIcon:"e-icons e-copy",id:e+"_frameColor",cssClass:"top-icon e-stroke",tooltipText:this.l10n.getConstant("Color"),align:"Center",type:"Input",template:"<span>"+this.l10n.getConstant("Color")+'</span><button id="'+e+'_frameColorBtn"></button>'}),i.push({prefixIcon:"e-icons e-copy",id:e+"_frameGradient",cssClass:"top-icon e-frame-stroke",tooltipText:this.l10n.getConstant("GradientColor"),align:"Center",type:"Input",template:"<span>"+this.l10n.getConstant("GradientColor")+'</span><button id="'+e+'_frameGradientColorBtn"></button>'}),i.push({id:e+"_frameSize",cssClass:"top-icon e-size",tooltipText:this.l10n.getConstant("Size"),align:"Center",type:"Input",template:"<span>"+this.l10n.getConstant("Size")+'</span><button id="'+e+'_frameSizeBtn"></button>'}),(t.frameObj.type==="line"||t.frameObj.type==="inset"||t.frameObj.type==="hook")&&i.push({id:e+"_frameInset",cssClass:"top-icon e-size",tooltipText:this.l10n.getConstant("Inset"),align:"Center",type:"Input",template:"<span>"+this.l10n.getConstant("Inset")+'</span><button id="'+e+'_frameInsetBtn"></button>'}),(t.frameObj.type==="line"||t.frameObj.type==="inset")&&i.push({id:e+"_frameOffset",cssClass:"top-icon e-size",tooltipText:this.l10n.getConstant("Offset"),align:"Center",type:"Input",template:"<span>"+this.l10n.getConstant("Offset")+'</span><button id="'+e+'_frameOffsetBtn"></button>'}),t.frameObj.type==="line"&&(i.push({id:e+"_frameRadius",cssClass:"top-icon e-size",tooltipText:this.l10n.getConstant("Radius"),align:"Center",type:"Input",template:"<span>"+this.l10n.getConstant("Radius")+'</span><button id="'+e+'_frameRadiusBtn"></button>'}),i.push({id:e+"_frameAmount",cssClass:"top-icon e-size",tooltipText:this.l10n.getConstant("Amount"),align:"Center",type:"Input",template:"<span>"+this.l10n.getConstant("Amount")+'</span><button id="'+e+'_frameAmountBtn"></button>'}),i.push({id:e+"_frameBorder",cssClass:"top-icon e-size",tooltipText:this.l10n.getConstant("Border"),align:"Center",type:"Input",template:"<span>"+this.l10n.getConstant("Border")+'</span><button id="'+e+'_frameBorderBtn"></button>'})),i},o.prototype.getFilterToolbarItem=function(){var t=[],e=this.parent,i=!1,r=e.element.id,n=["Default","Chrome","Cold","Warm","Grayscale","Sepia","Invert"];if(e.toolbar){for(var s=0;s<n.length;s++)if(e.toolbar.indexOf(n[s])!==-1){i=!0;break}}(d(e.toolbar)||!i||e.toolbar&&e.toolbar.indexOf("Default")>-1)&&t.push({id:r+"_default",prefixIcon:"e-icons e-none",cssClass:"top-icon e-none",tooltipText:this.l10n.getConstant("Default"),align:"Center",template:'<div class="filter-wrapper"><canvas id='+r+"_defaultCanvas tabindex=0></canvas><div><span>"+this.l10n.getConstant("Default")+"</span></div></div>"}),(d(e.toolbar)||!i||e.toolbar&&e.toolbar.indexOf("Chrome")>-1)&&t.push({id:r+"_chrome",prefixIcon:"e-icons e-none",cssClass:"top-icon e-none",tooltipText:this.l10n.getConstant("Chrome"),align:"Center",template:'<div class="filter-wrapper"><canvas id='+r+"_chromeCanvas></canvas><div><span>"+this.l10n.getConstant("Chrome")+"</span></div></div>"}),(d(e.toolbar)||!i||e.toolbar&&e.toolbar.indexOf("Cold")>-1)&&t.push({id:r+"_cold",prefixIcon:"e-icons e-none",cssClass:"top-icon e-none",tooltipText:this.l10n.getConstant("Cold"),align:"Center",template:'<div class="filter-wrapper"><canvas id='+r+"_coldCanvas></canvas><div><span>"+this.l10n.getConstant("Cold")+"</span></div></div>"}),(d(e.toolbar)||!i||e.toolbar&&e.toolbar.indexOf("Warm")>-1)&&t.push({id:r+"_warm",prefixIcon:"e-icons e-none",cssClass:"top-icon e-none",tooltipText:this.l10n.getConstant("Warm"),align:"Center",template:'<div class="filter-wrapper"><canvas id='+r+"_warmCanvas></canvas><div><span>"+this.l10n.getConstant("Warm")+"</span></div></div>"}),(d(e.toolbar)||!i||e.toolbar&&e.toolbar.indexOf("Grayscale")>-1)&&t.push({id:r+"_grayscale",prefixIcon:"e-icons e-none",cssClass:"top-icon e-none",tooltipText:this.l10n.getConstant("Grayscale"),align:"Center",template:'<div class="filter-wrapper"><canvas id='+r+"_grayscaleCanvas></canvas><div><span>"+this.l10n.getConstant("Grayscale")+"</span></div></div>"}),(d(e.toolbar)||!i||e.toolbar&&e.toolbar.indexOf("Sepia")>-1)&&t.push({id:r+"_sepia",prefixIcon:"e-icons e-none",cssClass:"top-icon e-none",tooltipText:this.l10n.getConstant("Sepia"),align:"Center",template:'<div class="filter-wrapper"><canvas id='+r+"_sepiaCanvas></canvas><div><span>"+this.l10n.getConstant("Sepia")+"</span></div></div>"}),(d(e.toolbar)||!i||e.toolbar&&e.toolbar.indexOf("Invert")>-1)&&t.push({id:r+"_invert",prefixIcon:"e-icons e-none",cssClass:"top-icon e-none",tooltipText:this.l10n.getConstant("Invert"),align:"Center",template:'<div class="filter-wrapper"><canvas id='+r+"_invertCanvas></canvas><div><span>"+this.l10n.getConstant("Invert")+"</span></div></div>"});for(var a=this.processToolbar("center"),s=0,l=a.length;s<l;s++)t.push(a[s]);return t},o.prototype.getPenToolbarItem=function(t){var e=this.parent,i=e.element.id,r=[];(d(e.toolbar)||e.toolbar)&&r.push({id:i+"_annotation",tooltipText:this.l10n.getConstant("Annotation"),align:"Center",template:'<button id="'+i+'_annotationBtn"></button>'}),t.indexOf("strokeColor")>-1&&r.push({prefixIcon:"e-icons e-copy",id:i+"_pen_strokecolor",cssClass:"top-icon e-pen-stroke-color",tooltipText:this.l10n.getConstant("StrokeColor"),align:"Center",type:"Input",template:'<button id="'+i+'_penColorBtn"></button>'}),t.indexOf("strokeWidth")>-1&&r.push({prefixIcon:"e-icons e-copy",id:i+"_pen_strokewidth",cssClass:"top-icon e-size",tooltipText:this.l10n.getConstant("StrokeWidth"),align:"Center",type:"Input",template:'<button id="'+i+'_penStrokeWidth"></button>'}),r.push({align:"Center",type:"Separator"}),t.indexOf("z-order")>-1&&r.push({id:i+"_zOrder",cssClass:"top-icon e-list-unordered-3",tooltipText:this.l10n.getConstant("ZOrder"),align:"Center",type:"Input",template:'<button id="'+i+'_zOrderBtn"></button>'}),t.indexOf("remove")>-1&&r.push({id:i+"_remove",prefixIcon:"e-icons e-trash",cssClass:"top-icon e-trash",tooltipText:this.l10n.getConstant("Remove"),align:"Center"});for(var n=this.processSubToolbar(t),s=0,a=n.length;s<a;s++)r.push(n[s]);return D.isDevice||(r.push({id:i+"_ok",prefixIcon:"e-icons e-check",cssClass:"top-icon e-tick",tooltipText:this.l10n.getConstant("OK"),align:"Right",tabIndex:0}),r.push({id:i+"_cancel",prefixIcon:"e-icons e-close",cssClass:"top-icon e-save",tooltipText:this.l10n.getConstant("Cancel"),align:"Right"})),r},o.prototype.initPenToolbarItem=function(t){var e=this,i=this.parent,r=i.element.id,n=this.getLeftToolbarItem(),s=this.getRightToolbarItem(),a=this.getPenToolbarItem(t),l=this.getZoomToolbarItem();D.isDevice?this.defToolbarItems=a:this.defToolbarItems=n.concat(l,a,s);var h={toolbarType:"pen",toolbarItems:this.defToolbarItems};i.trigger("toolbarUpdating",h),this.isToolbarString(h.toolbarItems)?(t=h.toolbarItems,this.excludeItems(h.toolbarItems)):this.defToolbarItems=h.toolbarItems;var c=new Qt({width:"100%",items:this.defToolbarItems,clicked:this.defToolbarClicked.bind(this),created:function(){e.renderAnnotationBtn(!0),e.createPenColor(t),e.createPenBtn(t),e.createZOrderBtn(t),e.wireZoomBtnEvents(),i.trigger("toolbarCreated",{toolbarType:"pen"}),D.isDevice?e.defToolbarItems.length>0&&document.getElementById(r+"_toolbar")&&(c.refreshOverflow(),c.refreshOverflow()):(e.createLeftToolbarControls(),e.defToolbarItems.length>0&&document.getElementById(r+"_toolbar")&&c.refreshOverflow())}});D.isDevice?c.appendTo("#"+r+"_bottomToolbar"):c.appendTo("#"+r+"_toolbar"),this.enableDisableTbrBtn()},o.prototype.createPenColor=function(t){var e=this,i=this.parent,r=i.element.id;if(t.indexOf("strokeColor")>-1){i.element.querySelector(".e-template.e-pen-stroke-color").appendChild(i.createElement("input",{id:r+"_pen_stroke"}));var n=i.activeObj.strokeSettings.strokeColor,s=new hr({modeSwitcher:!1,value:"#fff",showButtons:!1,mode:"Palette",cssClass:"e-pen-color",change:function(c){i.updatePenStrokeColor(c.currentValue.hex),e.selFhdColor=c.currentValue.hex,a.element.children[0].style.backgroundColor=c.currentValue.rgba,a.toggle(),i.notify("undo-redo",{prop:"updateUndoRedoStack",value:{isPenDraw:!0}})}},"#"+r+"_pen_stroke"),a=new Ye({open:function(c){var u=c.element.parentElement;D.isDevice&&(u.style.top=a.element.getBoundingClientRect().top-u.offsetHeight+"px",window.innerWidth<=520&&(u.style.left=i.element.offsetLeft+"px"))},target:".e-pen-color",iconCss:"e-dropdownbtn-preview",cssClass:"e-ie-ddb-popup"},"#"+r+"_penColorBtn");s.inline=!0,s.value=s.getValue(i.activeObj.strokeSettings.strokeColor,"rgba"),s.value==="null"&&(s.value=n);var l={tempFreeHandDrawEditingStyles:null};i.notify("freehand-draw",{prop:"getTempFreeHandDrawEditingStyles",value:{obj:l}});var h={freehandSelectedIndex:null};i.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:h}}),!d(h.freehandSelectedIndex)&&h.freehandSelectedIndex>-1?i.element.querySelector(".e-pen-stroke-color.e-template .e-dropdownbtn-preview").style.background=this.selFhdColor==="#42a5f5"?l.tempFreeHandDrawEditingStyles.strokeColor:i.pointColl[h.freehandSelectedIndex].strokeColor:i.element.querySelector(".e-pen-stroke-color.e-template .e-dropdownbtn-preview").style.background=s.value}},o.prototype.createPenBtn=function(t){var e=this,i=this.parent,r=i.element.id,n=[{id:"1",text:this.l10n.getConstant("XSmall")},{id:"2",text:this.l10n.getConstant("Small")},{id:"3",text:this.l10n.getConstant("Medium")},{id:"4",text:this.l10n.getConstant("Large")},{id:"5",text:this.l10n.getConstant("XLarge")}];if(t.indexOf("strokeWidth")>-1){var s=document.getElementById(r+"_penStrokeWidth"),a=document.createElement("span"),l={freehandSelectedIndex:null};if(i.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:l}}),!d(l.freehandSelectedIndex)&&l.freehandSelectedIndex>-1)a.innerHTML=this.getPenStroke(i.pointColl[l.freehandSelectedIndex].strokeWidth);else{var h={penStrokeWidth:2};i.notify("freehand-draw",{prop:"getPenStrokeWidth",onPropertyChange:!1,value:{obj:h}}),h.penStrokeWidth?a.innerHTML=this.getPenStroke(h.penStrokeWidth):a.innerHTML=this.l10n.getConstant("Small")}a.className="e-pen-stroke-width",s.appendChild(a);var c=new Ye({items:n,open:function(u){D.isDevice&&(u.element.parentElement.style.top=c.element.getBoundingClientRect().top-u.element.parentElement.offsetHeight+"px");var p=a.innerHTML;u.element.querySelector('[aria-label = "'+p+'"]').classList.add("e-selected-btn")},select:function(u){if(e.triggerTbarClickEvent(u),a.textContent=u.item.text,i.updatePenStrokeWidth(u.item.id),D.isDevice){if(document.getElementById(r+"_bottomToolbar")){var p=$(r+"_bottomToolbar","toolbar");p.refreshOverflow()}}else if(document.getElementById(r+"_toolbar")){var f=$(r+"_toolbar","toolbar");f.refreshOverflow()}var g={penStrokeWidth:null};i.notify("freehand-draw",{prop:"getPenStrokeWidth",onPropertyChange:!1,value:{obj:g}}),i.notify("undo-redo",{prop:"updateUndoRedoStack",value:{isPenDraw:!0}}),i.notify("freehand-draw",{prop:"setPenStrokeWidth",onPropertyChange:!1,value:{value:g.penStrokeWidth}})}});c.appendTo("#"+r+"_penStrokeWidth")}},o.prototype.getPenStroke=function(t){var e="",i={1:this.l10n.getConstant("XSmall"),2:this.l10n.getConstant("Small"),3:this.l10n.getConstant("Medium"),4:this.l10n.getConstant("Large"),5:this.l10n.getConstant("XLarge")};return t>=1&&t<=5&&(e=i[t]),e},o.prototype.initAdjustmentToolbarItem=function(){var t=this,e=this.parent,i=e.element.id,r=this.getLeftToolbarItem(null),n=this.getRightToolbarItem(),s=this.getAdjustmentToolbarItem(),a=this.getZoomToolbarItem();D.isDevice?this.defToolbarItems=s:this.defToolbarItems=r.concat(a,s,n);var l={toolbarType:"finetune",toolbarItems:this.defToolbarItems};e.trigger("toolbarUpdating",l),this.defToolbarItems=l.toolbarItems;var h=new Qt({width:"100%",items:this.defToolbarItems,clicked:this.defToolbarClicked.bind(this),created:function(){t.wireZoomBtnEvents(),D.isDevice||t.createLeftToolbarControls(),t.defToolbarItems.length>0&&document.getElementById(i+"_toolbar")&&h.refreshOverflow()}});D.isDevice?h.appendTo("#"+i+"_bottomToolbar"):h.appendTo("#"+i+"_toolbar"),this.enableDisableTbrBtn()},o.prototype.initFrameToolbarItem=function(){var t=this,e=this.parent,i=e.element.id,r=document.querySelector("#"+i+"_contextualToolbarArea"),n=document.querySelector("#"+i+"_frameWrapper");n?n.style.display="block":n=r.appendChild(e.createElement("div",{id:i+"_frameWrapper",className:"e-frame-wrapper",styles:"position: relative"})),n.appendChild(e.createElement("div",{id:i+"_customizeWrapper",styles:"position: absolute"}));var s=this.getFrameToolbarItem(),a={toolbarType:"frame",toolbarItems:s};e.trigger("toolbarUpdating",a),s=a.toolbarItems;var l=new Qt({width:"100%",items:s,clicked:this.defToolbarClicked.bind(this),created:function(){t.createFrameColor(),t.createFrameSize();var h=e.frameObj.type;h==="line"&&t.createFrameRadius(),(h==="line"||h==="inset"||h==="hook")&&t.createFrameInset(),(h==="line"||h==="inset")&&t.createFrameOffset(),h==="line"&&(t.createFrameAmount(),t.createFrameBorder()),t.createFrameGradientColor(),D.isDevice?t.defToolbarItems.length>0&&document.getElementById(i+"_bottomToolbar")&&(l.refreshOverflow(),l.refreshOverflow(),l.refreshOverflow()):(t.createLeftToolbarControls(),t.defToolbarItems.length>0&&document.getElementById(i+"_toolbar")&&l.refreshOverflow()),e.element.querySelector("#"+i+"_"+h).focus()}});l.appendTo("#"+i+"_customizeWrapper")},o.prototype.createFrameGradientColor=function(){var t=this.parent,e,i={frameChangeEventArgs:null},r=t.element.id;t.element.querySelector(".e-template.e-frame-stroke").appendChild(t.createElement("input",{id:r+"_frame_gradient_fill"}));var n=new hr({modeSwitcher:!1,noColor:!0,value:t.frameObj.gradientColor,showButtons:!1,mode:"Palette",cssClass:"e-frame-gradient-fill-color",change:function(a){e={type:t.toPascalCase(t.frameObj.type),color:t.frameObj.color,gradientColor:t.frameObj.gradientColor,size:t.frameObj.size,inset:t.frameObj.inset,offset:t.frameObj.offset,borderRadius:t.frameObj.radius,frameLineStyle:t.toPascalCase(t.frameObj.border),lineCount:t.frameObj.amount};var l=t.frameObj.gradientColor,h={currObj:{}};t.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:h}}),t.frameObj.gradientColor=a.currentValue.hex,t.notify("draw",{prop:"triggerFrameChange",value:{prevFrameSettings:e,obj:i}}),i.frameChangeEventArgs&&!i.frameChangeEventArgs.cancel?(t.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"frame",previousObj:h.currObj,previousObjColl:h.currObj.objColl,previousPointColl:h.currObj.pointColl,previousSelPointColl:h.currObj.selPointColl,previousCropObj:m({},t.cropObj,{},!0),previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),t.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}}),t.notify("draw",{prop:"redrawDownScale"}),a.currentValue.rgba===""?s.element.children[0].classList.add("e-nocolor-item"):(s.element.children[0].classList.remove("e-nocolor-item"),s.element.children[0].style.backgroundColor=a.currentValue.rgba),t.curFrameObjEvent={previousFrameSetting:i.frameChangeEventArgs.previousFrameSetting,currentFrameSetting:i.frameChangeEventArgs.currentFrameSetting},t.isFrameBtnClick=!0):t.frameObj.gradientColor=l,s.toggle()}},"#"+r+"_frame_gradient_fill"),s=new Ye({open:function(a){if(D.isDevice){var l=a.element.parentElement;l.style.top=s.element.getBoundingClientRect().top-l.offsetHeight+"px",window.innerWidth<=520&&(l.style.left=t.element.offsetLeft+"px")}},target:".e-frame-gradient-fill-color",iconCss:"e-dropdownbtn-preview",cssClass:"e-ie-ddb-popup"},"#"+r+"_frameGradientColorBtn");n.inline=!0,t.frameObj.gradientColor===""?t.element.querySelector(".e-frame-stroke.e-template .e-dropdownbtn-preview").classList.add("e-nocolor-item"):t.element.querySelector(".e-frame-stroke.e-template .e-dropdownbtn-preview").style.background=t.frameObj.gradientColor},o.prototype.createFrameColor=function(){var t=this.parent,e,i={frameChangeEventArgs:null},r=t.element.id;t.element.querySelector(".e-template.e-stroke").appendChild(t.createElement("input",{id:r+"_frame_fill"}));var n=new hr({modeSwitcher:!1,value:t.frameObj.color,showButtons:!1,mode:"Palette",cssClass:"e-frame-fill-color",change:function(a){e={type:t.toPascalCase(t.frameObj.type),color:t.frameObj.color,gradientColor:t.frameObj.gradientColor,size:t.frameObj.size,inset:t.frameObj.inset,offset:t.frameObj.offset,borderRadius:t.frameObj.radius,frameLineStyle:t.toPascalCase(t.frameObj.border),lineCount:t.frameObj.amount};var l=t.frameObj.color,h={currObj:{}};t.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:h}}),t.frameObj.color=a.currentValue.hex,t.notify("draw",{prop:"triggerFrameChange",value:{prevFrameSettings:e,obj:i}}),i.frameChangeEventArgs&&!i.frameChangeEventArgs.cancel?(t.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"frame",previousObj:h.currObj,previousObjColl:h.currObj.objColl,previousPointColl:h.currObj.pointColl,previousSelPointColl:h.currObj.selPointColl,previousCropObj:m({},t.cropObj,{},!0),previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),t.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}}),t.notify("draw",{prop:"redrawDownScale"}),a.currentValue.rgba===""?s.element.children[0].classList.add("e-nocolor-item"):(s.element.children[0].classList.remove("e-nocolor-item"),s.element.children[0].style.backgroundColor=a.currentValue.rgba),t.curFrameObjEvent={previousFrameSetting:i.frameChangeEventArgs.previousFrameSetting,currentFrameSetting:i.frameChangeEventArgs.currentFrameSetting},t.isFrameBtnClick=!0):t.frameObj.color=l,s.toggle()}},"#"+r+"_frame_fill"),s=new Ye({open:function(a){if(D.isDevice){var l=a.element.parentElement;l.style.top=s.element.getBoundingClientRect().top-l.offsetHeight+"px",window.innerWidth<=520&&(l.style.left=t.element.offsetLeft+"px")}},target:".e-frame-fill-color",iconCss:"e-dropdownbtn-preview",cssClass:"e-ie-ddb-popup"},"#"+r+"_frameColorBtn");n.inline=!0,t.element.querySelector(".e-stroke.e-template .e-dropdownbtn-preview").style.background=t.frameObj.color},o.prototype.createFrameSize=function(){var t=this,e=this.parent,i,r={frameChangeEventArgs:null},n=e.element.id,s=[{id:"1",text:this.l10n.getConstant("20")},{id:"2",text:this.l10n.getConstant("40")},{id:"3",text:this.l10n.getConstant("60")},{id:"4",text:this.l10n.getConstant("80")},{id:"5",text:this.l10n.getConstant("100")}],a=document.getElementById(n+"_frameSizeBtn"),l=document.createElement("span");l.innerHTML=this.l10n.getConstant(e.frameObj.size.toString()),l.className="e-frame-stroke-width",a.appendChild(l);var h=new Ye({items:s,open:function(c){if(D.isDevice){var u=c.element.parentElement;u.style.top=h.element.getBoundingClientRect().top-u.offsetHeight+"px"}var p=h.element.childNodes[0].textContent;p!==""&&c.element.querySelector('[aria-label = "'+p+'"]').classList.add("e-selected-btn")},select:function(c){t.triggerTbarClickEvent(c),i={type:e.toPascalCase(e.frameObj.type),color:e.frameObj.color,gradientColor:e.frameObj.gradientColor,size:e.frameObj.size,inset:e.frameObj.inset,offset:e.frameObj.offset,borderRadius:e.frameObj.radius,frameLineStyle:e.toPascalCase(e.frameObj.border),lineCount:e.frameObj.amount};var u=e.frameObj.size,p={currObj:{}};if(e.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:p}}),e.frameObj.size=parseInt(c.item.text,10),e.notify("draw",{prop:"triggerFrameChange",value:{prevFrameSettings:i,obj:r}}),r.frameChangeEventArgs&&!r.frameChangeEventArgs.cancel?(e.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"frame",previousObj:p.currObj,previousObjColl:p.currObj.objColl,previousPointColl:p.currObj.pointColl,previousSelPointColl:p.currObj.selPointColl,previousCropObj:m({},e.cropObj,{},!0),previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),e.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}}),e.notify("draw",{prop:"redrawDownScale"}),h.content=c.item.text,e.curFrameObjEvent={previousFrameSetting:r.frameChangeEventArgs.previousFrameSetting,currentFrameSetting:r.frameChangeEventArgs.currentFrameSetting},e.isFrameBtnClick=!0):e.frameObj.size=u,D.isDevice){if(document.getElementById(n+"_bottomToolbar")){var f=$(n+"_bottomToolbar","toolbar");f.refreshOverflow()}}else if(document.getElementById(n+"_toolbar")){var g=$(n+"_toolbar","toolbar");g.refreshOverflow()}}});h.appendTo("#"+n+"_frameSizeBtn")},o.prototype.createFrameInset=function(){var t=this,e=this.parent,i,r={frameChangeEventArgs:null},n=e.element.id,s=[{id:"1",text:this.l10n.getConstant("20")},{id:"2",text:this.l10n.getConstant("40")},{id:"3",text:this.l10n.getConstant("60")},{id:"4",text:this.l10n.getConstant("80")},{id:"5",text:this.l10n.getConstant("100")}],a=document.getElementById(n+"_frameInsetBtn"),l=document.createElement("span");l.innerHTML=this.l10n.getConstant(e.frameObj.inset.toString()),l.className="e-frame-inset",a.appendChild(l);var h=new Ye({items:s,open:function(c){if(D.isDevice){var u=c.element.parentElement;u.style.top=h.element.getBoundingClientRect().top-u.offsetHeight+"px"}var p=h.element.childNodes[0].textContent;p!==""&&c.element.querySelector('[aria-label = "'+p+'"]').classList.add("e-selected-btn")},select:function(c){t.triggerTbarClickEvent(c),i={type:e.toPascalCase(e.frameObj.type),color:e.frameObj.color,gradientColor:e.frameObj.gradientColor,size:e.frameObj.size,inset:e.frameObj.inset,offset:e.frameObj.offset,borderRadius:e.frameObj.radius,frameLineStyle:e.toPascalCase(e.frameObj.border),lineCount:e.frameObj.amount};var u=e.frameObj.inset,p={currObj:{}};if(e.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:p}}),e.frameObj.inset=parseInt(c.item.text,10),e.notify("draw",{prop:"triggerFrameChange",value:{prevFrameSettings:i,obj:r}}),r.frameChangeEventArgs&&!r.frameChangeEventArgs.cancel?(e.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"frame",previousObj:p.currObj,previousObjColl:p.currObj.objColl,previousPointColl:p.currObj.pointColl,previousSelPointColl:p.currObj.selPointColl,previousCropObj:m({},e.cropObj,{},!0),previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),e.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}}),e.notify("draw",{prop:"redrawDownScale"}),h.content=c.item.text,e.curFrameObjEvent={previousFrameSetting:r.frameChangeEventArgs.previousFrameSetting,currentFrameSetting:r.frameChangeEventArgs.currentFrameSetting},e.isFrameBtnClick=!0):e.frameObj.inset=u,D.isDevice){if(document.getElementById(n+"_bottomToolbar")){var f=$(n+"_bottomToolbar","toolbar");f.refreshOverflow()}}else if(document.getElementById(n+"_toolbar")){var g=$(n+"_toolbar","toolbar");g.refreshOverflow()}}});h.appendTo("#"+n+"_frameInsetBtn")},o.prototype.createFrameOffset=function(){var t=this,e=this.parent,i,r={frameChangeEventArgs:null},n=e.element.id,s=[{id:"1",text:this.l10n.getConstant("20")},{id:"2",text:this.l10n.getConstant("40")},{id:"3",text:this.l10n.getConstant("60")},{id:"4",text:this.l10n.getConstant("80")},{id:"5",text:this.l10n.getConstant("100")}],a=document.getElementById(n+"_frameOffsetBtn"),l=document.createElement("span");l.innerHTML=this.l10n.getConstant(e.frameObj.offset.toString()),l.className="e-frame-offset",a.appendChild(l);var h=new Ye({items:s,open:function(c){if(D.isDevice){var u=c.element.parentElement;u.style.top=h.element.getBoundingClientRect().top-u.offsetHeight+"px"}var p=h.element.childNodes[0].textContent;p!==""&&c.element.querySelector('[aria-label = "'+p+'"]').classList.add("e-selected-btn")},select:function(c){t.triggerTbarClickEvent(c),i={type:e.toPascalCase(e.frameObj.type),color:e.frameObj.color,gradientColor:e.frameObj.gradientColor,size:e.frameObj.size,inset:e.frameObj.inset,offset:e.frameObj.offset,borderRadius:e.frameObj.radius,lineCount:e.frameObj.amount,frameLineStyle:e.toPascalCase(e.frameObj.border)};var u=e.frameObj.offset,p={currObj:{}};if(e.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:p}}),e.frameObj.offset=parseInt(c.item.text,10),e.notify("draw",{prop:"triggerFrameChange",value:{prevFrameSettings:i,obj:r}}),r.frameChangeEventArgs&&!r.frameChangeEventArgs.cancel?(e.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"frame",previousObj:p.currObj,previousObjColl:p.currObj.objColl,previousPointColl:p.currObj.pointColl,previousSelPointColl:p.currObj.selPointColl,previousCropObj:m({},e.cropObj,{},!0),previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),e.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}}),e.notify("draw",{prop:"redrawDownScale"}),h.content=c.item.text,e.curFrameObjEvent={previousFrameSetting:r.frameChangeEventArgs.previousFrameSetting,currentFrameSetting:r.frameChangeEventArgs.currentFrameSetting},e.isFrameBtnClick=!0):e.frameObj.offset=u,D.isDevice){if(document.getElementById(n+"_bottomToolbar")){var f=$(n+"_bottomToolbar","toolbar");f.refreshOverflow()}}else if(document.getElementById(n+"_toolbar")){var g=$(n+"_toolbar","toolbar");g.refreshOverflow()}}});h.appendTo("#"+n+"_frameOffsetBtn")},o.prototype.createFrameRadius=function(){var t=this,e=this.parent,i,r={frameChangeEventArgs:null},n=e.element.id,s=[{id:"1",text:this.l10n.getConstant("0")},{id:"2",text:this.l10n.getConstant("20")},{id:"3",text:this.l10n.getConstant("40")},{id:"4",text:this.l10n.getConstant("60")},{id:"5",text:this.l10n.getConstant("80")},{id:"6",text:this.l10n.getConstant("100")}],a=document.getElementById(n+"_frameRadiusBtn"),l=document.createElement("span");l.innerHTML=this.l10n.getConstant(e.frameObj.radius.toString()),l.className="e-frame-radius",a.appendChild(l);var h=new Ye({items:s,open:function(c){if(D.isDevice){var u=c.element.parentElement;u.style.top=h.element.getBoundingClientRect().top-u.offsetHeight+"px"}var p=h.element.childNodes[0].textContent;p!==""&&c.element.querySelector('[aria-label = "'+p+'"]').classList.add("e-selected-btn")},select:function(c){t.triggerTbarClickEvent(c),i={type:e.toPascalCase(e.frameObj.type),color:e.frameObj.color,gradientColor:e.frameObj.gradientColor,size:e.frameObj.size,inset:e.frameObj.inset,offset:e.frameObj.offset,borderRadius:e.frameObj.radius,frameLineStyle:e.toPascalCase(e.frameObj.border),lineCount:e.frameObj.amount};var u=e.frameObj.radius,p={currObj:{}};if(e.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:p}}),e.frameObj.radius=parseInt(c.item.text,10),e.notify("draw",{prop:"triggerFrameChange",value:{prevFrameSettings:i,obj:r}}),r.frameChangeEventArgs&&!r.frameChangeEventArgs.cancel?(e.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"frame",previousObj:p.currObj,previousObjColl:p.currObj.objColl,previousPointColl:p.currObj.pointColl,previousSelPointColl:p.currObj.selPointColl,previousCropObj:m({},e.cropObj,{},!0),previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),e.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}}),e.notify("draw",{prop:"redrawDownScale"}),h.content=c.item.text,e.curFrameObjEvent={previousFrameSetting:r.frameChangeEventArgs.previousFrameSetting,currentFrameSetting:r.frameChangeEventArgs.currentFrameSetting},e.isFrameBtnClick=!0):e.frameObj.radius=u,D.isDevice){if(document.getElementById(n+"_bottomToolbar")){var f=$(n+"_bottomToolbar","toolbar");f.refreshOverflow()}}else if(document.getElementById(n+"_toolbar")){var g=$(n+"_toolbar","toolbar");g.refreshOverflow()}}});h.appendTo("#"+n+"_frameRadiusBtn")},o.prototype.createFrameAmount=function(){var t=this,e=this.parent,i,r={frameChangeEventArgs:null},n=e.element.id,s=[{id:"1",text:this.l10n.getConstant("1")},{id:"2",text:this.l10n.getConstant("2")},{id:"3",text:this.l10n.getConstant("3")},{id:"4",text:this.l10n.getConstant("4")},{id:"5",text:this.l10n.getConstant("5")}],a=document.getElementById(n+"_frameAmountBtn"),l=document.createElement("span");l.innerHTML=this.l10n.getConstant(e.frameObj.amount.toString()),l.className="e-frame-amount",a.appendChild(l);var h=new Ye({items:s,open:function(c){if(D.isDevice){var u=c.element.parentElement;u.style.top=h.element.getBoundingClientRect().top-u.offsetHeight+"px"}var p=h.element.childNodes[0].textContent;p!==""&&c.element.querySelector('[aria-label = "'+p+'"]').classList.add("e-selected-btn")},select:function(c){t.triggerTbarClickEvent(c),i={type:e.toPascalCase(e.frameObj.type),color:e.frameObj.color,gradientColor:e.frameObj.gradientColor,size:e.frameObj.size,inset:e.frameObj.inset,offset:e.frameObj.offset,borderRadius:e.frameObj.radius,lineCount:e.frameObj.amount,frameLineStyle:e.toPascalCase(e.frameObj.border)};var u=e.frameObj.amount,p={currObj:{}};if(e.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:p}}),e.frameObj.amount=parseInt(c.item.text,10),e.notify("draw",{prop:"triggerFrameChange",value:{prevFrameSettings:i,obj:r}}),r.frameChangeEventArgs&&!r.frameChangeEventArgs.cancel?(e.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"frame",previousObj:p.currObj,previousObjColl:p.currObj.objColl,previousPointColl:p.currObj.pointColl,previousSelPointColl:p.currObj.selPointColl,previousCropObj:m({},e.cropObj,{},!0),previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),e.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}}),e.notify("draw",{prop:"redrawDownScale"}),h.content=c.item.text,e.curFrameObjEvent={previousFrameSetting:r.frameChangeEventArgs.previousFrameSetting,currentFrameSetting:r.frameChangeEventArgs.currentFrameSetting},e.isFrameBtnClick=!0):e.frameObj.amount=u,D.isDevice){if(document.getElementById(n+"_bottomToolbar")){var f=$(n+"_bottomToolbar","toolbar");f.refreshOverflow()}}else if(document.getElementById(n+"_toolbar")){var g=$(n+"_toolbar","toolbar");g.refreshOverflow()}}});h.appendTo("#"+n+"_frameAmountBtn")},o.prototype.createFrameBorder=function(){var t=this,e=this.parent,i,r={frameChangeEventArgs:null},n=e.element.id,s=[{id:"1",text:this.l10n.getConstant("Solid")},{id:"2",text:this.l10n.getConstant("Dashed")},{id:"3",text:this.l10n.getConstant("Dotted")}],a=document.getElementById(n+"_frameBorderBtn"),l=document.createElement("span");l.innerHTML=this.l10n.getConstant(e.toPascalCase(e.frameObj.border)),l.className="e-frame-border",a.appendChild(l);var h=new Ye({items:s,open:function(c){if(D.isDevice){var u=c.element.parentElement;u.style.top=h.element.getBoundingClientRect().top-u.offsetHeight+"px"}var p=h.element.childNodes[0].textContent;p!==""&&c.element.querySelector('[aria-label = "'+p+'"]').classList.add("e-selected-btn")},select:function(c){t.triggerTbarClickEvent(c),i={lineCount:e.frameObj.amount,color:e.frameObj.color,borderRadius:e.frameObj.radius,gradientColor:e.frameObj.gradientColor,size:e.frameObj.size,inset:e.frameObj.inset,offset:e.frameObj.offset,frameLineStyle:e.toPascalCase(e.frameObj.border),type:e.toPascalCase(e.frameObj.type)};var u=e.frameObj.border,p={currObj:{}};if(e.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:p}}),e.frameObj.border=c.item.text.toLowerCase(),e.notify("draw",{prop:"triggerFrameChange",value:{prevFrameSettings:i,obj:r}}),r.frameChangeEventArgs&&!r.frameChangeEventArgs.cancel?(e.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"frame",previousObj:p.currObj,previousObjColl:p.currObj.objColl,previousPointColl:p.currObj.pointColl,previousSelPointColl:p.currObj.selPointColl,previousCropObj:m({},e.cropObj,{},!0),previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),e.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}}),e.notify("draw",{prop:"redrawDownScale"}),h.content=c.item.text,e.curFrameObjEvent={previousFrameSetting:r.frameChangeEventArgs.previousFrameSetting,currentFrameSetting:r.frameChangeEventArgs.currentFrameSetting},e.isFrameBtnClick=!0):e.frameObj.border=u,D.isDevice){if(document.getElementById(n+"_bottomToolbar")){var f=$(n+"_bottomToolbar","toolbar");f.refreshOverflow()}}else if(document.getElementById(n+"_toolbar")){var g=$(n+"_toolbar","toolbar");g.refreshOverflow()}}});h.appendTo("#"+n+"_frameBorderBtn")},o.prototype.initFilterToolbarItem=function(){var t=this,e=this.parent,i=e.element.id,r=this.getFilterToolbarItem(),n={toolbarType:"filter",toolbarItems:r};e.trigger("toolbarUpdating",n),r=n.toolbarItems,document.querySelector("#"+i+"_contextualToolbar").classList.contains("e-control")&&$(document.getElementById(i+"_contextualToolbar"),"toolbar").destroy();var s=new Qt({width:"100%",items:r,clicked:this.contextualToolbarClicked.bind(this),created:function(){t.updatePrivateVariables(),t.createCanvasFilter(),e.currentFilter===""&&(e.currentFilter=i+"_default");var a=document.querySelector("#"+i+"_headWrapper");a&&(a.style.display="none");var l=document.getElementById(e.currentFilter+"Canvas");l&&l.parentElement.parentElement.classList.add("e-selected"),t.enableDisableTbrBtn(),s.refreshOverflow()}});s.appendTo("#"+i+"_contextualToolbar")},o.prototype.drawDashedLine=function(t){t.beginPath(),t.setLineDash([5]),t.rect(10,10,280,130),t.stroke(),t.closePath()},o.prototype.createCanvasFilter=function(){var t=this.parent;_t(t.element),t.element.style.opacity="0.5";var e=t.getCurrentCanvasData();this.inMemoryCanvas.width=e.width,this.inMemoryCanvas.height=e.height,this.inMemoryContext.putImageData(e,0,0),this.updateFilterCanvas("_defaultCanvas","default"),this.updateFilterCanvas("_chromeCanvas","chrome"),this.updateFilterCanvas("_coldCanvas","cold"),this.updateFilterCanvas("_warmCanvas","warm"),this.updateFilterCanvas("_grayscaleCanvas","grayscale"),this.updateFilterCanvas("_sepiaCanvas","sepia"),this.updateFilterCanvas("_invertCanvas","invert"),xt(t.element),t.element.style.opacity="1",t.initialAdjustmentValue=this.lowerContext.filter},o.prototype.updateFilterCanvas=function(t,e){var i=this.parent,r=i.element.querySelector("#"+i.element.id+t);if(r){var n=r.getContext("2d");n=r.getContext("2d"),r.style.width="100px",r.style.height="100px",i.notify("filter",{prop:"updateAdj",value:{type:e,value:null,isPreview:!0,ctx:n}}),n.drawImage(this.inMemoryCanvas,0,0,300,150),i.isSafari&&i.notify("filter",{prop:"apply-filter",onPropertyChange:!1,value:{context:n}})}},o.prototype.getQuickAccessToolbarItem=function(t){var e=this.parent,i=e.element.id,r={cancel:!1,toolbarItems:[]},n=[];d(t)?(e.activeObj.shape==="image"&&n.push("Flip"),e.activeObj.shape!=="redact"&&n.push("BringToFront"),n.push("Clone"),n.push("Delete"),e.activeObj.shape==="text"&&n.push("EditText"),r.shape=e.toPascalCase(e.activeObj.shape)):t&&(n.push("BringToFront"),n.push("Delete"),r.shape="Freehand draw"),r.toolbarItems=m([],n,null,!0),e.trigger("quickAccessToolbarOpen",r);var s=[];if(r.cancel)s=[];else for(var a=0;a<r.toolbarItems.length;a++)switch(r.toolbarItems[a]){case"BringToFront":s.push({id:i+"_bringToFront",prefixIcon:"e-icons e-bring-to-front",tooltipText:this.l10n.getConstant("BringToFront"),align:"Left"});break;case"Clone":s.push({id:i+"_duplicate",prefixIcon:"e-icons e-order",cssClass:"top-icon e-order",tooltipText:this.l10n.getConstant("Duplicate"),align:"Left"});break;case"Delete":s.push({id:i+"_remove",prefixIcon:"e-icons e-trash",cssClass:"top-icon e-trash",tooltipText:this.l10n.getConstant("Remove"),align:"Left"});break;case"EditText":s.push({id:i+"_editText",prefixIcon:"e-icons e-annotation-edit",cssClass:"top-icon e-annotation-edit",tooltipText:this.l10n.getConstant("EditText"),align:"Left"});break;case"Flip":s.push({id:i+"_hFlip",prefixIcon:"e-icons e-horizontal-flip",tooltipText:this.l10n.getConstant("HorizontalFlip"),align:"Left"}),s.push({id:i+"_vFlip",prefixIcon:"e-icons e-vertical-flip",tooltipText:this.l10n.getConstant("VerticalFlip"),align:"Left"});break;default:s.push(r.toolbarItems[a]);break}return s},o.prototype.renderQAT=function(t){var e=this.parent,i=e.element.id;if(e.activeObj&&e.showQuickAccessToolbar){var r=document.getElementById(i+"_quickAccessToolbarArea");r&&(this.destroyQuickAccessToolbar(),r.style.display="block");var n=this.getQuickAccessToolbarItem(t);if(n.length===0)return;if(d(e.quickAccessToolbarTemplate)){var s=new Qt({items:n,clicked:this.quickAccessToolbarClicked.bind(this)});s.appendTo("#"+i+"_quickAccessToolbar")}var a=this.toolbarHeight&&this.toolbarHeight!==0?this.toolbarHeight:r.clientHeight,l=e.element.querySelector("#"+i+"_headWrapper");if(d(t)&&(e.activeObj.activePoint.width!==0||e.activeObj.activePoint.height!==0||e.activeObj.shape&&e.activeObj.shape==="path"&&e.activeObj.pointColl.length>0)){var h={order:null};e.notify("shape",{prop:"getHighestOrder",onPropertyChange:!1,value:{obj:h}}),e.activeObj.order>h.order&&document.getElementById(e.element.id+"_bringToFront")?document.getElementById(e.element.id+"_bringToFront").classList.add("e-overlay"):document.getElementById(e.element.id+"_bringToFront")&&document.getElementById(e.element.id+"_bringToFront").classList.remove("e-overlay"),r.style.width="auto",e.activeObj.activePoint.width=Math.abs(e.activeObj.activePoint.width),e.activeObj.activePoint.height=Math.abs(e.activeObj.activePoint.height);var c=e.activeObj.activePoint.startX<e.activeObj.activePoint.endX?e.activeObj.activePoint.startX:e.activeObj.activePoint.endX,u=e.activeObj.activePoint.startY<e.activeObj.activePoint.endY?e.activeObj.activePoint.startY:e.activeObj.activePoint.endY,p=e.activeObj.activePoint.width;if(e.activeObj.rotatedAngle!==0&&e.activeObj.shape!=="arrow"){var f={activePoint:null};e.notify("shape",{prop:"getSquarePointForRotatedShape",onPropertyChange:!1,value:{obj:e.activeObj,object:f}});var g=f.activePoint;c=g.startX,u=g.startY,p=g.width}else if(e.activeObj.shape==="path"){var v=e.getSquarePointForPath(e.activeObj);c=v.startX,u=v.startY,p=v.width}if(r.style.left=c+p/2-n.length*25+"px",parseFloat(r.style.left)+r.clientWidth/2!==c+p/2){var y=c+p/2-(parseFloat(r.style.left)+r.clientWidth/2);r.style.left=parseFloat(r.style.left)+y+"px"}l&&(a=l.offsetHeight+a),u-(a+a/1.5)<e.img.destTop?(r.style.top=e.img.destTop+"px",l&&(r.style.top=(e.img.destTop<0?0:e.img.destTop)+l.offsetHeight+"px")):(a=this.toolbarHeight,r.style.top=u-(a+a/1.5)+"px")}else if(t){var C={freehandSelectedIndex:-1};e.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:C}});var h={order:null};e.notify("shape",{prop:"getHighestOrder",onPropertyChange:!1,value:{obj:h}}),e.getObjFromId(e.pointColl[C.freehandSelectedIndex].id).order>=h.order&&document.getElementById(e.element.id+"_bringToFront")?document.getElementById(e.element.id+"_bringToFront").classList.add("e-overlay"):document.getElementById(e.element.id+"_bringToFront")&&document.getElementById(e.element.id+"_bringToFront").classList.remove("e-overlay");var b={activePoint:null};e.notify("freehand-draw",{prop:"getSqPtFD",value:{idx:C.freehandSelectedIndex,obj:b}});var g=b.activePoint;r.style.width="auto",r.style.left=g.startX+g.width/2-n.length*24+"px",g.startY-(a+a/1.5)<e.img.destTop?r.style.top=e.img.destTop+"px":r.style.top=g.startY-(a+a/1.5)+"px"}else r.style.display="none";parseFloat(r.style.top)<0&&(r.style.top="0px")}},o.prototype.refreshDropDownBtn=function(t){if(!d(t)){var e=this.parent,i=e.element.id,r=document.querySelector("#"+i+"_annotationBtn");r&&(t?(r.classList.add("e-disabled"),r.parentElement.classList.add("e-overlay")):(r.classList.remove("e-disabled"),r.parentElement.classList.remove("e-overlay")),$(r,"dropdown-btn").disabled=t);var n=document.querySelector("#"+i+"_transformBtn");n&&(t?(n.classList.add("e-disabled"),n.parentElement.classList.add("e-overlay")):(n.classList.remove("e-disabled"),n.parentElement.classList.remove("e-overlay")),$(n,"dropdown-btn").disabled=t);var s=document.querySelector("#"+i+"_adjustment");s&&(t?(s.classList.add("e-disabled"),s.parentElement.classList.add("e-overlay")):(s.classList.remove("e-disabled"),s.parentElement.classList.remove("e-overlay")),$(s,"btn").disabled=t);var a=document.querySelector("#"+i+"_filter");a&&(t?(a.classList.add("e-disabled"),a.parentElement.classList.add("e-overlay")):(a.classList.remove("e-disabled"),a.parentElement.classList.remove("e-overlay")),$(a,"btn").disabled=t)}},o.prototype.cropSelect=function(t){var e=this.parent;e.isCropTab=!0,d(e.transform.cropZoomFactor)&&(e.transform.cropZoomFactor=e.transform.zoomFactor,e.notify("draw",{prop:"setTempZoomFactor",onPropertyChange:!1,value:{tempZoomFactor:e.transform.zoomFactor}})),e.transform.zoomFactor=e.transform.cropZoomFactor;var i=t.item.id;this.currentToolbar="crop",e.currSelectionPoint=null,e.notify("draw",{prop:"setIsCropSelect",value:{bool:!0}});var r={prevObj:null};e.notify("crop",{prop:"getPreviousCropCurrentObj",value:{obj:r}}),e.notify("draw",{prop:"select",onPropertyChange:!1,value:{type:i,startX:null,startY:null,width:null,height:null}}),e.notify("crop",{prop:"setPreviousCropCurrentObj",value:{obj:r.prevObj}}),this.enableDisableTbrBtn(),e.notify("transform",{prop:"disableZoomOutBtn",value:{isZoomOut:!0}})},o.prototype.quickAccessToolbarClicked=function(t,e){var i=this.parent,r=i.element.id;if(t.item){var n=null,s={prevActObj:null},a={tempObj:null};i.notify("draw",{prop:"getPrevActObj",onPropertyChange:!1,value:{obj:s}}),i.notify("selection",{prop:"getTempActObj",onPropertyChange:!1,value:{obj:a}}),a.tempObj.activePoint.height=Math.abs(a.tempObj.activePoint.height);var l={isNewPath:null},h=void 0;i.notify("draw",{prop:"getNewPath",value:{obj:l}});var c=t.item.id.replace(r+"_","").toLowerCase(),u=void 0,p=void 0,f={freehandSelectedIndex:null},g=void 0,v=void 0,y={order:null};switch(c){case"duplicate":i.element.querySelector("#"+r+"_duplicate").classList.contains("e-overlay")||(this.refreshSlider(),!l.isNewPath&&JSON.stringify(a.tempObj)===JSON.stringify(i.activeObj)&&(n=!0),this.duplicateShape(n));break;case"remove":i.element.querySelector("#"+r+"_remove").classList.contains("e-overlay")||(i.noPushUndo=!1,this.refreshSlider(),i.notify("selection",{prop:"deleteItem",onPropertyChange:!1}));break;case"edittext":i.element.querySelector("#"+r+"_editText").classList.contains("e-overlay")||this.editText();break;case"rotleft":case"rotright":u=i.element.querySelector("#"+r+"_rotLeft"),p=i.element.querySelector("#"+r+"_rotRight"),(u&&!u.classList.contains("e-disabled")||p&&!p.classList.contains("e-disabled"))&&i.rotateImage(t.item.id.replace(r+"_","").toLowerCase()),i.notify("undo-redo",{prop:"updateUndoRedoStack",onPropertyChange:!1});break;case"hflip":i.element.querySelector("#"+r+"_hFlip").classList.contains("e-disabled")||(h=i.activeObj.imageCanvas.getContext("2d"),i.horizontalFlip(h)),i.notify("undo-redo",{prop:"updateUndoRedoStack",onPropertyChange:!1});break;case"vflip":i.element.querySelector("#"+r+"_vFlip").classList.contains("e-disabled")||(h=i.activeObj.imageCanvas.getContext("2d"),i.verticalFlip(h)),i.notify("undo-redo",{prop:"updateUndoRedoStack",onPropertyChange:!1});break;case"bringtofront":if(!i.element.querySelector("#"+r+"_bringToFront").classList.contains("e-overlay")){if(i.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:f}}),g=f.freehandSelectedIndex!==null?i.pointColl[f.freehandSelectedIndex].id:i.activeObj.currIndex,i.updateShapeOrder(g,c),v=!1,i.notify("shape",{prop:"getHighestOrder",onPropertyChange:!1,value:{obj:y}}),g.indexOf("pen")>-1){i.notify("shape",{prop:"updateShapeColl",onPropertyChange:!1});var C=i.getObjFromId(g).order;v=C>=y.order}else{var C=i.getObjFromId(g).order;v=C>y.order}v?document.getElementById(i.element.id+"_bringToFront").classList.add("e-overlay"):document.getElementById(i.element.id+"_bringToFront").classList.remove("e-overlay"),i.notify("undo-redo",{prop:"updateUndoRedoStack",onPropertyChange:!1})}break}(c==="duplicate"||c==="remove")&&i.notify("draw",{prop:"redrawDownScale"})}d(e)&&i.trigger("quickAccessToolbarItemClick",t)},o.prototype.editText=function(){var t=this.parent,e={x:t.activeObj.activePoint.startX,y:t.activeObj.activePoint.startY};if(this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.notify("selection",{prop:"setTempActObj",onPropertyChange:!1,value:{obj:m({},t.activeObj,{},!0)}}),t.notify("selection",{prop:"setInitialTextEdit",onPropertyChange:!1,value:{bool:!0}}),t.notify("draw",{prop:"setPrevActObj",onPropertyChange:!1,value:{prevActObj:m({},t.activeObj,{},!0)}}),t.activeObj.rotatedAngle!==0){var i={x:e.x,y:e.y};t.notify("shape",{prop:"getTextBoxPosition",onPropertyChange:!1,value:{obj:t.activeObj,object:i}}),e.x=i.x,e.y=i.y;var r={x:e.x,y:e.y};t.notify("shape",{prop:"setFlipState",onPropertyChange:!1,value:{x:e.x,y:e.y,obj:t.activeObj,object:r}}),e.x=r.x,e.y=r.y}var n=m({},t.activeObj,{},!0);t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),this.lowerContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1}),t.notify("draw",{prop:"redrawDownScale"}),t.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),t.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}}),t.activeObj=n,t.notify("shape",{prop:"renderTextArea",onPropertyChange:!1,value:{x:e.x,y:e.y,actObj:t.activeObj}}),d(t.activeObj.currIndex)&&t.notify("draw",{prop:"setShapeTextInsert",onPropertyChange:!1,value:{bool:!0}}),document.getElementById(t.element.id+"_quickAccessToolbarArea")&&(document.getElementById(t.element.id+"_quickAccessToolbarArea").style.display="none")},o.prototype.duplicateShape=function(t,e){var i=this.parent,r={activePoint:{startX:0,startY:0,endX:0,endY:0,width:0,height:0},flipObjColl:[],triangle:[],triangleRatio:[]};i.notify("selection",{prop:"setTempActObj",onPropertyChange:!1,value:{obj:r}});var n={prevActObj:null};i.notify("draw",{prop:"getPrevActObj",onPropertyChange:!1,value:{obj:n}});var s={isNewPath:null};i.notify("draw",{prop:"getNewPath",value:{obj:s}});var a,l=m({},i.activeObj,{},!0),h={order:null};i.notify("shape",{prop:"getHighestOrder",onPropertyChange:!1,value:{obj:h}}),l.order?(i.notify("shape",{prop:"updateShapeColl",onPropertyChange:!1}),l.order=h.order>l.order?h.order+1:l.order+1):(i.noPushUndo=!0,i.okBtn(),i.noPushUndo=!1,i.selectShape(l.currIndex),l.order=h.order>l.order?h.order+1:l.order+1),l.shape==="image"&&(a=m([],i.objColl,[],!0),i.notify("undo-redo",{prop:"updateUrObj",onPropertyChange:!1,value:{objColl:a}})),d(i.activeObj.currIndex)?i.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:t}}):n.prevActObj||e?(i.activeObj.currIndex=null,l.currIndex=null,i.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:t}})):i.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:!0}});var c=i.noPushUndo;if(i.noPushUndo=!1,i.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}),i.noPushUndo=c,a=m([],i.objColl,[],!0),l.activePoint.startX+=10,l.activePoint.startY-=10,l.activePoint.endX+=10,l.activePoint.endY-=10,l.shape==="path")for(var u=0;u<l.pointColl.length;u++)l.pointColl[u].x+=10,l.pointColl[u].y-=10;else l.shape==="image"&&(l.imageCanvas=i.createElement("canvas"));var p={id:"shape_"+(i.objColl.length+1)};if(i.notify("shape",{prop:"getNewShapeId",onPropertyChange:!1,value:{obj:p}}),l.currIndex=p.id,i.activeObj=m({},l,{},!0),i.activeObj.shape==="image"){var f=m({},l.activePoint,{},!0),g={width:0,height:0};i.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:i.activeObj.imageElement.width,height:i.activeObj.imageElement.height,obj:g,isImgShape:null}}),i.activeObj.activePoint.width=g.width,i.activeObj.activePoint.height=g.height,i.activeObj.isHorImageFlip&&i.activeObj.isVerImageFlip?(i.activeObj.isHorImageFlip=i.activeObj.isVerImageFlip=!1,i.notify("draw",{prop:"downScaleImgCanvas",onPropertyChange:!1,value:{ctx:l.imageCanvas.getContext("2d"),isImgAnnotation:!0,isHFlip:!0,isVFlip:!0}}),i.activeObj.isHorImageFlip=i.activeObj.isVerImageFlip=!0):i.activeObj.isHorImageFlip?(i.activeObj.isHorImageFlip=!1,i.notify("draw",{prop:"downScaleImgCanvas",onPropertyChange:!1,value:{ctx:l.imageCanvas.getContext("2d"),isImgAnnotation:!0,isHFlip:!0,isVFlip:null}}),i.activeObj.isHorImageFlip=!0):i.activeObj.isVerImageFlip?(i.activeObj.isVerImageFlip=!1,i.notify("draw",{prop:"downScaleImgCanvas",onPropertyChange:!1,value:{ctx:l.imageCanvas.getContext("2d"),isImgAnnotation:!0,isHFlip:null,isVFlip:!0}}),i.activeObj.isVerImageFlip=!0):i.notify("draw",{prop:"downScaleImgCanvas",onPropertyChange:!1,value:{ctx:l.imageCanvas.getContext("2d"),isImgAnnotation:!0,isHFlip:null,isVFlip:null}}),i.activeObj.activePoint=f}(i.activeObj.shape==="line"||i.activeObj.shape==="arrow")&&i.notify("shape",{prop:"setPointCollForLineArrow",onPropertyChange:!1,value:{obj:i.activeObj}}),i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:i.activeObj,isCropRatio:null,points:null,isPreventDrag:!0}}),i.notify("undo-redo",{prop:"updateUrObj",onPropertyChange:!1,value:{objColl:a}}),i.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:!0}}),i.noPushUndo=!1,i.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}),i.noPushUndo=!0,i.notify("selection",{prop:"redrawShape",onPropertyChange:!1,value:{obj:i.objColl[i.objColl.length-1]}});var v=i.element.id,y=D.isDevice?"#"+v+"_bottomToolbar #"+v:"#"+v,C={freehandDrawSelectedId:null};i.notify("freehand-draw",{prop:"getFreehandDrawSelectedId",onPropertyChange:!1,value:{obj:C}}),this.enableDisableCloneBtn(y,C),this.renderQAT(),i.activeObj.shape&&i.activeObj.shape==="redact"&&this.redactSlider(i.activeObj.redactType)},o.prototype.defToolbarClicked=function(t){var e=this.parent,i=e.element.id,r=!1,n=!1;if(!this.isFrameToolbar&&e.element.querySelector(".e-contextual-toolbar-wrapper")){e.element.querySelector(".e-contextual-toolbar-wrapper").classList.contains("e-hide")||(r=n=!0);var s={bool:e.isStraightening};(!D.isDevice||D.isDevice&&!s.bool)&&e.element.querySelector(".e-contextual-toolbar-wrapper").classList.add("e-hide")}if(t.item){var a=t.item.id.replace(i+"_","").toLowerCase();if(a==="duplicate"||a==="remove"||a==="edittext"||a==="hflip"||a==="vflip"||a==="rotleft"||a==="rotright")this.quickAccessToolbarClicked(t,!0),e.trigger("toolbarItemClicked",t);else{var l=!1,h=!1,c=document.querySelector("#"+i+"_adjustment");c&&c.classList.contains("e-disabled")&&(h=!0);var u=document.querySelector("#"+i+"_filter");u&&u.classList.contains("e-disabled")&&(l=!0),this.enableDisableTbrBtn(),this.performDefTbrClick(a,r,h,l,n),e.trigger("toolbarItemClicked",t),e.isStraightening&&e.notify("transform",{prop:"disableZoomOutBtn",value:{isZoomOut:!0}});var p=["undo","redo","cancel","aspectratio","nonaspectratio","save","duplicate","filter","frame","none","mat","bevel","line","inset","hook","resize","remove"];p.indexOf(a)!==-1&&e.notify("draw",{prop:"redrawDownScale"})}}},o.prototype.performDefTbrClick=function(t,e,i,r,n){var s=this.parent,a=s.element.id,l=s.element.querySelector("#"+a+"_zoomIn"),h=s.element.querySelector("#"+a+"_resizeHeight"),c=s.element.querySelector("#"+a+"_resizeWidth"),u=!1,p,f,g,v,y=!1;if(s.activeObj.shape!==void 0&&(f=s.activeObj.shape.split("-")),(f===void 0&&s.currObjType.isCustomCrop||f!==void 0&&f[0]==="crop")&&(u=!0),!s.disabled){switch(t){case"pan":s.currObjType.isCustomCrop=s.currObjType.isFiltered=!1,s.currObjType.isRedact=!1,s.currObjType.isUndoAction&&s.notify("undo-redo",{prop:"refreshUrc",value:{bool:null}}),u&&(s.currObjType.isCustomCrop=!1,s.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,s.upperCanvas.width,s.upperCanvas.height),this.refreshToolbar("main")),s.togglePan?(this.cancelPan(),s.notify("transform",{prop:"setDisablePan",onPropertyChange:!1,value:{bool:!0}}),this.currentToolbar==="pen"&&s.freeHandDraw(!0)):(p=s.element.querySelector(".e-img-pan .e-btn"),p&&p.classList.add("e-selected-btn"),s.pan(!0),s.notify("transform",{prop:"setDisablePan",onPropertyChange:!1,value:{bool:!1}})),l&&s.zoomSettings.zoomFactor>=s.zoomSettings.maxZoomFactor?(l.classList.add("e-disabled"),l.parentElement.classList.add("e-overlay")):l&&(l.classList.remove("e-disabled"),l.parentElement.classList.remove("e-overlay")),this.refreshToolbar("main");break;case"cancel":s.currObjType.isRedact&&(s.currObjType.isRedact=!1),this.isFrameToolbar&&s.element.querySelector(".e-contextual-toolbar-wrapper")&&!s.element.querySelector(".e-contextual-toolbar-wrapper").classList.contains("e-hide")&&s.element.querySelector(".e-contextual-toolbar-wrapper").classList.add("e-hide"),s.notify("draw",{prop:"performCancel",value:{isContextualToolbar:e,isFinalCancel:!0}});break;case"ok":D.isDevice&&this.isFrameToolbar&&s.element.querySelector(".e-contextual-toolbar-wrapper")&&!s.element.querySelector(".e-contextual-toolbar-wrapper").classList.contains("e-hide")&&s.element.querySelector(".e-contextual-toolbar-wrapper").classList.add("e-hide"),s.okBtn(null,!0),s.drawingShape=null,this.refreshDropDownBtn(!1),this.currentToolbar="main",s.isStraightening=!1,s.notify("draw",{prop:"resetTempObjColl"}),s.notify("draw",{prop:"resetTempPointColl"});break;case"crop":s.notify("transform",{prop:"disableZoomOutBtn",value:{isZoomOut:!0}}),D.isDevice&&this.updateContextualToolbar("color","straighten");break;case"reset":s.reset(),this.imageHeight=null,this.imageWidth=null,s.aspectHeight=null,s.aspectWidth=null,this.isAspectRatio=!0,this.currentToolbar="main";break;case"undo":s.noPushUndo=!1,(s.togglePen||s.drawingShape)&&(s.okBtn(),s.drawingShape=null),s.notify("undo-redo",{prop:"call-undo"});break;case"redo":s.noPushUndo=!1,(s.togglePen||s.drawingShape)&&(s.okBtn(),s.drawingShape=null),s.notify("undo-redo",{prop:"call-redo"});break;case"aspectratio":(!s.isCircleCrop&&d(s.currSelectionPoint)||s.currSelectionPoint&&s.currSelectionPoint.shape!=="crop-circle")&&($(c,"numerictextbox").value?(s.aspectWidth=$(c,"numerictextbox").value,s.aspectHeight=$(h,"numerictextbox").value,s.notify("transform",{prop:"resize",value:{width:s.aspectWidth,height:null,isAspectRatio:!0}})):$(h,"numerictextbox").value&&(s.aspectWidth=parseFloat($(c,"numerictextbox").placeholder),s.aspectHeight=$(h,"numerictextbox").value,s.notify("transform",{prop:"resize",value:{width:s.aspectWidth,height:s.aspectHeight,isAspectRatio:!0}})),s.resizeSrc={startX:s.img.srcLeft,startY:s.img.srcTop,width:s.img.srcWidth,height:s.img.srcHeight},this.refreshToolbar("resize"));break;case"nonaspectratio":($(c,"numerictextbox").value||$(h,"numerictextbox").value)&&(s.aspectWidth=$(c,"numerictextbox").value?$(c,"numerictextbox").value:parseFloat($(c,"numerictextbox").placeholder),s.aspectHeight=$(h,"numerictextbox").value?$(h,"numerictextbox").value:parseFloat($(h,"numerictextbox").placeholder),s.notify("transform",{prop:"resize",value:{width:s.aspectWidth,height:s.aspectHeight,isAspectRatio:!1}})),s.resizeSrc={startX:s.img.srcLeft,startY:s.img.srcTop,width:s.img.srcWidth,height:s.img.srcHeight},this.refreshToolbar("resize");break;case"resize":(s.currObjType.isFiltered||s.currObjType.isRedact)&&s.okBtn(),this.resizeClick();break;case"adjustment":i||((s.currObjType.isFiltered||s.currObjType.isRedact)&&s.okBtn(),this.refreshToolbar("adjustment"),s.setTempFilterProperties(),s.notify("draw",{prop:"updateFinetune"}),s.notify("filter",{prop:"setTempAdjVal"}),this.openSlider("brightness"));break;case"brightness":case"contrast":case"hue":case"saturation":case"opacity":case"blur":case"exposure":this.openSlider(t);break;case"filter":r||(_t(s.element),this.refreshToolbar("filter"),s.setTempFilterProperties(),xt(s.element));break;case"default":case"chrome":case"cold":case"warm":case"grayscale":case"blackandwhite":case"sepia":case"invert":case"sharpen":s.currObjType.isFiltered=!0,s.notify("filter",{prop:"applyImageFilter",value:{option:t}});break;case"upload":n&&s.element.querySelector(".e-contextual-toolbar-wrapper").classList.remove("e-hide");break;case"bold":s.notify("selection",{prop:"setInitialTextEdit",value:{bool:!1}}),s.activeObj.textSettings.bold&&s.activeObj.textSettings.italic?s.notify("shape",{prop:"applyFontStyle",onPropertyChange:!1,value:{item:"italic"}}):s.activeObj.textSettings.bold&&!s.activeObj.textSettings.italic?s.notify("shape",{prop:"applyFontStyle",onPropertyChange:!1,value:{item:"default"}}):!s.activeObj.textSettings.bold&&s.activeObj.textSettings.italic?s.notify("shape",{prop:"applyFontStyle",onPropertyChange:!1,value:{item:"bolditalic"}}):!s.activeObj.textSettings.bold&&!s.activeObj.textSettings.italic&&s.notify("shape",{prop:"applyFontStyle",onPropertyChange:!1,value:{item:"bold"}}),s.element.querySelector("#"+a+"_bold").classList.contains("e-selected-btn")?s.element.querySelector("#"+a+"_bold").classList.remove("e-selected-btn"):s.element.querySelector("#"+a+"_bold").classList.add("e-selected-btn"),(s.activeObj.activePoint.width!==0||s.activeObj.activePoint.height!==0)&&s.notify("undo-redo",{prop:"updateUndoRedoStack",onPropertyChange:!1});break;case"italic":s.notify("selection",{prop:"setInitialTextEdit",value:{bool:!1}}),s.activeObj.textSettings.bold&&s.activeObj.textSettings.italic?s.notify("shape",{prop:"applyFontStyle",onPropertyChange:!1,value:{item:"bold"}}):s.activeObj.textSettings.bold&&!s.activeObj.textSettings.italic?s.notify("shape",{prop:"applyFontStyle",onPropertyChange:!1,value:{item:"bolditalic"}}):!s.activeObj.textSettings.bold&&s.activeObj.textSettings.italic?s.notify("shape",{prop:"applyFontStyle",onPropertyChange:!1,value:{item:"default"}}):!s.activeObj.textSettings.bold&&!s.activeObj.textSettings.italic&&s.notify("shape",{prop:"applyFontStyle",onPropertyChange:!1,value:{item:"italic"}}),s.element.querySelector("#"+a+"_italic").classList.contains("e-selected-btn")?s.element.querySelector("#"+a+"_italic").classList.remove("e-selected-btn"):s.element.querySelector("#"+a+"_italic").classList.add("e-selected-btn"),(s.activeObj.activePoint.width!==0||s.activeObj.activePoint.height!==0)&&s.notify("undo-redo",{prop:"updateUndoRedoStack",onPropertyChange:!1});break;case"croptransform":this.performCropTransformClick();break;case"rotateleft":case"rotateright":case"horizontalflip":case"verticalflip":s.transformSelect(t),this.updateRedactObj(),(t==="rotateleft"||t==="rotateright")&&(s.notify("draw",{prop:"resetStraightenDestPoints"}),s.notify("draw",{prop:"setDestForStraighten"})),s.notify("transform",{prop:"disableZoomOutBtn",value:{isZoomOut:!0}}),D.isDevice&&this.updateContextualToolbar("color","straighten"),g=t==="rotateleft"||t==="rotateright"?"rotate":"flip",v={action:g,actionEventArgs:s.editCompleteArgs},s.triggerEditCompleteEvent(v);break;case"save":s.noPushUndo=!1,s.okBtn(),s.drawingShape=null,this.saveDialogPopup();break;case"transparency":this.updateContextualToolbar("transparency","transparency");break;case"frame":this.frameToolbarClick();break;case"none":case"mat":case"bevel":case"line":case"inset":case"hook":this.unselectFrameBtn(),s.element.querySelector("#"+a+"_"+t)&&s.element.querySelector("#"+a+"_"+t).classList.add("e-selected-btn"),s.frameObj.type=t,s.frameObj.size=20,s.frameObj.inset=20,s.frameObj.radius=0,s.frameObj.amount=1,t==="inset"?s.frameObj.offset=60:s.frameObj.offset=20,this.refreshToolbar("frame"),s.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}}),s.isFrameBtnClick=!0,s.curFrameObjEvent={previousFrameSetting:s.tempFrameObj,currentFrameSetting:s.frameObj},s.notify("draw",{prop:"triggerFrameChange",value:{prevFrameSettings:s.tempFrameObj,obj:{frameChangeEventArgs:null}}});break;case"redact":s.currObjType.isRedact=y=!0,s.drawingShape="redact",d(s.activeObj.redactBlur)&&(s.activeObj.redactBlur=20),d(s.activeObj.redactPixelate)&&(s.activeObj.redactPixelate=20),s.notify("selection",{prop:"annotate",value:{shape:"redact"}}),this.refreshToolbar("redact"),this.redactSlider(s.activeObj.redactType);break;case"pixelate":if(s.currObjType.isRedact=y=!0,s.drawingShape="redact",s.notify("selection",{prop:"annotate",value:{shape:"redact"}}),s.activeObj.redactType==="blur"&&this.updateRedactType("pixelate"),s.notify("shape",{prop:"setRedactType",onPropertyChange:!1,value:{redactType:"pixelate"}}),s.activeObj.redactType==="pixelate"){var C=s.element.querySelector("#"+a+"_pixelate"),b=s.element.querySelector("#"+a+"_redactBlur");C&&C.classList.add("e-selected-btn"),b&&b.classList.contains("e-selected-btn")&&b.classList.remove("e-selected-btn")}else{var b=s.element.querySelector("#"+a+"_redactBlur");b&&b.classList.add("e-selected-btn")}this.redactSlider(s.activeObj.redactType),(s.activeObj.activePoint.width!==0||s.activeObj.activePoint.height!==0)&&s.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:null,previousObjColl:null,previousPointColl:null,previousSelPointColl:null,previousCropObj:null,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}});break;case"redactblur":if(s.currObjType.isRedact=y=!0,s.drawingShape="redact",s.notify("selection",{prop:"annotate",value:{shape:"redact"}}),s.notify("shape",{prop:"setRedactType",onPropertyChange:!1,value:{redactType:"blur"}}),s.activeObj.redactType==="pixelate"&&this.updateRedactType("blur"),s.notify("shape",{prop:"setRedactType",onPropertyChange:!1,value:{redactType:"blur"}}),s.activeObj.redactType==="blur"){var b=s.element.querySelector("#"+a+"_redactBlur"),C=s.element.querySelector("#"+a+"_pixelate");b&&b.classList.add("e-selected-btn"),C&&C.classList.contains("e-selected-btn")&&C.classList.remove("e-selected-btn")}else{var C=s.element.querySelector("#"+a+"_pixelate");C&&C.classList.add("e-selected-btn")}this.redactSlider(s.activeObj.redactType),(s.activeObj.activePoint.width!==0||s.activeObj.activePoint.height!==0)&&s.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:null,previousObjColl:null,previousPointColl:null,previousSelPointColl:null,previousCropObj:null,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}});break}y&&(s.notify("draw",{prop:"updateTempObjColl"}),s.notify("draw",{prop:"updateTempPointColl"}))}},o.prototype.updateRedactType=function(t){var e=this.parent;e.activeObj.redactType=t,e.notify("shape",{prop:"setRedactType",value:{type:t}}),this.parent.objColl.push(e.activeObj),e.notify("selection",{prop:"redrawShape",value:{obj:e.objColl[e.objColl.length-1]}})},o.prototype.frameToolbarClick=function(){var t=this.parent,e=t.element.id,i=document.querySelector("#"+e+"_frame"),r,n,s;t.notify("draw",{prop:"updateCropSelection",onPropertyChange:!1}),(t.currObjType.isFiltered||t.currObjType.isRedact)&&t.okBtn(),i&&!i.classList.contains("e-overlay")&&(r=t.transform.zoomFactor,t.frameDestPoints=m({},t.img,{},!0),d(t.cxtTbarHeight)&&(n=m({},t.frameObj,{},!0),s=m({},t.tempFrameObj,{},!0),this.callFrameToolbar(),t.frameObj.type="mat",this.callFrameToolbar(),t.cxtTbarHeight=t.element.querySelector("#"+e+"_customizeWrapper").scrollHeight,t.frameObj=n,t.tempFrameObj=s),this.zoomToFrameRange(),t.tempFrameZoomLevel=r,D.isDevice?t.img.destTop-=t.cxtTbarHeight/2:t.img.destTop+=t.cxtTbarHeight/2,this.callFrameToolbar(),t.notify("draw",{prop:"triggerFrameChange",value:{prevFrameSettings:t.frameObj,obj:{frameChangeEventArgs:null}}}))},o.prototype.zoomToFrameRange=function(){var t=this.parent;this.isFrameToolbar=!1,t.notify("transform",{prop:"resetZoom",onPropertyChange:!1});for(var e=!0;e;){if(this.toolbarHeight+t.img.destTop>=this.toolbarHeight+t.cxtTbarHeight){e=!1;break}t.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-.1,zoomPoint:null,isResize:!0}})}this.isFrameToolbar=!0},o.prototype.resizeClick=function(){var t=this.parent;t.notify("draw",{prop:"updateCropSelection",onPropertyChange:!1}),t.upperCanvas.style.cursor="default",t.notify("transform",{prop:"updateResize",value:{bool:!1}}),this.isAspectRatio?this.isAspectRatio=!1:this.isAspectRatio=!0,t.isResize=!0,this.refreshToolbar("resize")},o.prototype.callFrameToolbar=function(){var t=this.parent;m(t.tempFrameObj,t.frameObj);var e={appliedUndoRedoColl:[]};if(t.notify("undo-redo",{prop:"getAppliedUndoRedoColl",value:{obj:e}}),e.appliedUndoRedoColl.length===0){var i={currObj:{}};t.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:i}}),t.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"frame",previousObj:i.currObj,previousObjColl:i.currObj.objColl,previousPointColl:i.currObj.pointColl,previousSelPointColl:i.currObj.selPointColl,previousCropObj:m({},t.cropObj,{},!0),previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}})}this.refreshToolbar("frame")},o.prototype.contextualToolbarClicked=function(t){var e=this.parent,i=e.element.querySelector(".e-contextual-toolbar-wrapper .e-toolbar-item.e-selected");i&&i.classList.remove("e-selected");var r=t.item.id.replace(e.element.id,"").split("_")[1],n={filter:e.toPascalCase(r),cancel:!1};e.trigger("imageFiltering",n),e.editCompleteArgs=n,!n.cancel&&(document.getElementById(t.item.id+"Canvas").parentElement.parentElement.classList.add("e-selected"),e.currObjType.isFiltered=!0,e.notify("filter",{prop:"applyImageFilter",value:{option:r.toLowerCase()}}),e.notify("draw",{prop:"redrawDownScale"}),e.currentFilter=t.item.id,this.enableDisableTbrBtn(),e.isFilterCanvasClick=!0,e.curFilterObjEvent=n)},o.prototype.refreshShapeDrawing=function(){var t=this.parent,e={shape:""};t.notify("selection",{prop:"getCurrentDrawingShape",onPropertyChange:!1,value:{obj:e}}),e.shape!==""&&(t.notify("selection",{prop:"setCurrentDrawingShape",onPropertyChange:!1,value:{value:""}}),t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.refreshToolbar("main",!1))},o.prototype.zoomInBtnClickHandler=function(t){if(t){var e=this.parent;if((e.zoomSettings.zoomTrigger&et.Toolbar)===et.Toolbar){e.noPushUndo=!1,e.currObjType.isFiltered&&e.okBtn();var i=e.drawingShape;if(e.drawingShape){var r=e.activeObj.currIndex;e.noPushUndo=!0,e.okBtn(),e.noPushUndo=!1,e.drawingShape=null,r&&e.selectShape(r)}if(this.refreshShapeDrawing(),D.isDevice&&t.type==="touchstart"){if(!t.returnValue)return;t.preventDefault()}var n=document.querySelector("#"+e.element.id+"_zoomIn");I.trigger(n,"click");var s={bool:!1};e.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:s}}),s.bool&&(e.notify("freehand-draw",{prop:"applyFhd",onPropertyChange:!1}),this.destroyQuickAccessToolbar()),e.isZoomBtnClick=!0,this.applyPreviewFilter(),e.currObjType.isFiltered=!1,e.currObjType.isRedact=!1,e.togglePen&&(e.currObjType.isZoomed=!0,e.freeHandDraw(!1),e.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}})),e.notify("draw",{prop:"resetCurrentSelectionPoint"}),e.drawingShape=i,e.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:.1,zoomPoint:null,isResize:null}}),e.notify("draw",{prop:"redrawDownScale"}),(e.isCropTab||e.activeObj.shape)&&(e.notify("draw",{prop:"setStraightenActObj",value:{activeObj:null}}),e.notify("freehand-draw",{prop:"resetStraightenPoint"})),e.isStraightening&&(e.notify("draw",{prop:"resetStraightenDestPoints"}),e.notify("draw",{prop:"setDestForStraighten"}));var a={action:"zoom-in",actionEventArgs:e.editCompleteArgs};e.triggerEditCompleteEvent(a),D.isDevice&&n.focus()}}},o.prototype.zoomOutBtnClickHandler=function(t){if(t){var e=this.parent;if((e.zoomSettings.zoomTrigger&et.Toolbar)===et.Toolbar){e.noPushUndo=!1,e.currObjType.isFiltered&&e.okBtn();var i=e.drawingShape;if(e.drawingShape){var r=e.activeObj.currIndex;e.noPushUndo=!0,e.okBtn(),e.noPushUndo=!1,e.drawingShape=null,r&&e.selectShape(r)}if(this.refreshShapeDrawing(),D.isDevice&&t.type==="touchstart"){if(!t.returnValue)return;t.preventDefault()}var n=document.querySelector("#"+e.element.id+"_zoomOut");I.trigger(n,"click");var s={bool:!1};e.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:s}}),s.bool&&(e.notify("freehand-draw",{prop:"applyFhd",onPropertyChange:!1}),this.destroyQuickAccessToolbar()),e.isZoomBtnClick=!0,this.applyPreviewFilter(),e.currObjType.isFiltered=!1,e.currObjType.isRedact=!1,e.togglePen&&(e.currObjType.isZoomed=!0,e.freeHandDraw(!1),e.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}})),e.notify("draw",{prop:"resetCurrentSelectionPoint"}),e.drawingShape=i,e.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-.1,zoomPoint:null,isResize:null}}),e.notify("draw",{prop:"redrawDownScale"}),(e.isCropTab||e.activeObj.shape)&&(e.notify("draw",{prop:"setStraightenActObj",value:{activeObj:null}}),e.notify("freehand-draw",{prop:"resetStraightenPoint"})),e.isStraightening&&(e.notify("draw",{prop:"resetStraightenDestPoints"}),e.notify("draw",{prop:"setDestForStraighten"}));var a={action:"zoom-out",actionEventArgs:e.editCompleteArgs};e.triggerEditCompleteEvent(a),D.isDevice&&n.focus()}}},o.prototype.zoomInBtnMouseDownHandler=function(t){t.preventDefault(),this.zoomBtnHold=setInterval(this.zoomInBtnClickHandler.bind(this),250)},o.prototype.zoomOutBtnMouseDownHandler=function(t){t.preventDefault(),this.zoomBtnHold=setInterval(this.zoomOutBtnClickHandler.bind(this),250)},o.prototype.zoomBtnMouseUpHandler=function(){clearInterval(this.zoomBtnHold),this.zoomBtnHold=0},o.prototype.closeContextualToolbar=function(){var t=this.parent,e=t.element.id,i=!1,r={bool:t.isStraightening};return(!D.isDevice||D.isDevice&&!r.bool)&&(t.element.querySelector("#"+e+"_contextualToolbar")&&!t.element.querySelector("#"+e+"_contextualToolbar").parentElement.classList.contains("e-hide")||t.element.querySelector("#"+e+"_headWrapper")&&!t.element.querySelector("#"+e+"_headWrapper").parentElement.classList.contains("e-hide"))&&(t.element.querySelector(".e-contextual-toolbar-wrapper").classList.add("e-hide"),t.okBtn(),this.refreshMainToolbar(),i=!0),i},o.prototype.destroyQuickAccessToolbar=function(){var t=this.parent,e=t.element.id,i=document.getElementById(e+"_quickAccessToolbar");i&&i.classList.contains("e-control")&&$(i,"toolbar").destroy();var r=document.getElementById(e+"_quickAccessToolbarArea");r&&(r.style.display="none")},o.prototype.renderSlider=function(t,e){var i=this.parent,r=i.element.id,n=document.querySelector("#"+r+"_contextualToolbarArea"),s=document.querySelector("#"+r+"_headWrapper"),a=document.querySelector("#"+r+"_labelWrapper");s&&(s.remove(),a.remove()),s=n.appendChild(i.createElement("div",{id:r+"_headWrapper",styles:"position: relative"})),t==="transparency"?a=s.appendChild(i.createElement("label",{id:r+"_labelWrapper",className:"e-ie-finetune-slider-label",styles:D.isDevice?"position: absolute; top: 31%; left: calc(50% - 150px); font-size: 15px; text-transform: capitalize; font-weight: 400;":"position: absolute; top: 31%; left: calc(50% - 220px); font-size: 15px; text-transform: capitalize; font-weight: 400;"})):a=s.appendChild(i.createElement("label",{id:r+"_labelWrapper",className:"e-ie-finetune-slider-label",styles:D.isDevice?"position: absolute; top: 31%; left: calc(50% - 160px); font-size: 15px; text-transform: capitalize; font-weight: 400;":"position: absolute; top: 25%; left: calc(50% - 226px); font-size: 15px; text-transform: capitalize; font-weight: 400;"})),a.textContent=this.l10n.getConstant(i.toPascalCase(t==="transparency"?"opacity":t));var l=s.appendChild(i.createElement("div",{id:r+"_sliderWrapper",className:"e-ie-finetune-slider-wrap",styles:"position: absolute"})),h=i.getCurrAdjustmentValue(t);e&&t==="straighten"&&D.isDevice&&(h=i.cropObj.straighten);var c,u,p;if(t==="brightness"||t==="contrast"||t==="saturation"||t==="exposure"?(i.finetuneSettings?t==="brightness"&&i.finetuneSettings.brightness?(c=i.finetuneSettings.brightness.min,u=i.finetuneSettings.brightness.max):t==="contrast"&&i.finetuneSettings.contrast?(c=i.finetuneSettings.contrast.min,u=i.finetuneSettings.contrast.max):t==="saturation"&&i.finetuneSettings.saturation?(c=i.finetuneSettings.saturation.min,u=i.finetuneSettings.saturation.max):t==="exposure"&&i.finetuneSettings.exposure?(c=i.finetuneSettings.exposure.min,u=i.finetuneSettings.exposure.max):(c=-100,u=100):(c=-100,u=100),p=this.createSlider(c,u,h,t)):t==="hue"||t==="blur"||t==="opacity"?(i.finetuneSettings?t==="hue"&&i.finetuneSettings.hue?(c=i.finetuneSettings.hue.min,u=i.finetuneSettings.hue.max):t==="blur"&&i.finetuneSettings.blur?(c=i.finetuneSettings.blur.min,u=i.finetuneSettings.blur.max):t==="opacity"&&i.finetuneSettings.opacity?(c=i.finetuneSettings.opacity.min,u=i.finetuneSettings.opacity.max):(c=0,u=100):(c=0,u=100),p=this.createSlider(c,u,h,t)):t==="transparency"?(c=0,u=100,p=this.createSlider(c,u,h,t)):t==="straighten"&&(c=-45,u=45,p=this.createSlider(c,u,h,t)),p.appendTo("#"+r+"_sliderWrapper"),l.style.left=(parseFloat(n.style.width)-parseFloat(p.width))/2+"px",t==="straighten"&&D.isDevice){var f=s.appendChild(i.createElement("label",{id:r+"_sLabelWrapper",className:"e-ie-straighten-value-span e-ie-finetune-value-span",styles:"position: absolute; top: 31%; margin-left: 20px; font-size: 15px; text-transform: capitalize; font-weight: 400;"}));f.innerHTML=i.transform.straighten.toString()+"&#176",l.parentElement.classList.add("e-straighten-slider")}t!=="straighten"&&(s.appendChild(i.createElement("label",{id:r+"_finetuneSpan",className:"e-ie-finetune-value-span",styles:D.isDevice?"position: absolute; top: 25%; margin-left: 20px; font-size: 15px; text-transform: capitalize; font-weight: 400;":"position: absolute; top: 25%; left: calc(50% + 190px); font-size: 15px; text-transform: capitalize; font-weight: 400;"})),l.parentElement.classList.add("e-finetune-slider"),t==="transparency"&&D.isDevice&&l.parentElement.classList.add("e-ie-device-transparency-slider"),this.updateFinetuneSpan(t))},o.prototype.createSlider=function(t,e,i,r){var n=this,s=this.parent,a=r==="straighten"?3:1;return new es({value:i,type:"MinRange",min:t,max:e,step:a,width:D.isDevice?"180px":r==="straighten"?"200px":"300px",cssClass:"e-slider",change:function(l){if(s.notify("selection",{prop:"setSliderActive",onPropertyChange:!1,value:{bool:!0}}),r==="transparency"){if(s.activeObj.shape){d(s.activeObj.imageRatio)&&s.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),s.notify("shape",{prop:"pushActItemIntoObj"});var h=m({},s.cropObj,{},!0),c={currObj:{}};s.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:c}});var u=c.currObj;u.objColl=m([],s.objColl,[],!0),u.pointColl=m([],s.pointColl,[],!0),u.afterCropActions=m([],s.afterCropActions,[],!0);var p={selPointColl:null};s.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:p}}),u.selPointColl=m([],p.selPointColl,[],!0),s.objColl.pop(),s.activeObj.opacity=l.value/100,n.upperContext.clearRect(0,0,s.upperCanvas.width,s.upperCanvas.height),s.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}}),s.objColl.push(s.activeObj),s.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:u,previousObjColl:u.objColl,previousPointColl:u.pointColl,previousSelPointColl:u.selPointColl,previousCropObj:h,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),s.notify("selection",{prop:"redrawShape",value:{obj:s.objColl[s.objColl.length-1]}}),n.updateFinetuneSpan(r)}}else r==="straighten"?s.setStraighten(l.value):(s.transform.zoomFactor&&s.transform.zoomFactor<0&&(s.isFinetuning=!0),s.notify("selection",{prop:"setSliding",value:{bool:!0}}),s.setCurrAdjustmentValue(r,l.value),n.updateFinetuneSpan(r),n.enableDisableTbrBtn(),s.isFinetuning=!1)},changed:function(){r!=="transparency"&&r!=="straighten"&&(s.notify("selection",{prop:"setSliding",value:{bool:!1}}),s.notify("draw",{prop:"redrawDownScale"})),s.notify("selection",{prop:"setSliderActive",onPropertyChange:!1,value:{bool:!1}}),r==="transparency"&&setTimeout(function(){s.notify("undo-redo",{prop:"updateUndoRedoStack",onPropertyChange:!1}),s.element.querySelector("#"+s.element.id+"_transparency").click()},50)}})},o.prototype.updateFinetuneSpan=function(t){var e=this.parent,i=e.element.querySelector(".e-ie-finetune-value-span");if(i){var r={adjustmentLevel:null};e.notify("filter",{prop:"getAdjustmentLevel",onPropertyChange:!1,value:{obj:r}}),i.innerHTML=Math.round(r.adjustmentLevel[t]).toString()}},o.prototype.applyPreviewFilter=function(){var t=this.parent;(document.querySelector("#"+t.element.id+"_sliderWrapper")||t.currObjType.isFiltered)&&(t.initialAdjustmentValue=this.lowerContext.filter,t.canvasFilter=this.lowerContext.filter,t.currObjType.isFiltered=!1)},o.prototype.unselectBtn=function(){for(var t=this.parent,e=t.element.id,i=["#"+e+"_brightness","#"+e+"_contrast","#"+e+"_hue","#"+e+"_saturation","#"+e+"_opacity","#"+e+"_blur","#"+e+"_exposure"],r=0,n=i;r<n.length;r++){var s=n[r],a=document.querySelector(s);if(a&&a.classList.contains("e-selected-btn")){a.classList.remove("e-selected-btn");break}}},o.prototype.openSlider=function(t){this.unselectBtn(),this.parent.currObjType.isFiltered=!0,this.refreshToolbar("color",null,null,null,t),document.getElementById(this.parent.element.id+"_"+t).classList.add("e-selected-btn")},o.prototype.refreshSlider=function(){var t=this.parent.element.id,e=document.querySelector("#"+t+"_sliderWrapper"),i=document.querySelector(".e-slider"),r=document.querySelector("#"+t+"_headWrapper");r&&(r.style.display="none"),e&&i&&(i.ej2_instances[0].destroy(),e.remove())},o.prototype.unselectFrameBtn=function(){for(var t=this.parent,e=t.element.id,i=["#"+e+"_none","#"+e+"_mat","#"+e+"_line","#"+e+"_inset","#"+e+"_bevel","#"+e+"_hook"],r=0,n=i;r<n.length;r++){var s=n[r],a=document.querySelector(s);if(a.classList.contains("e-selected-btn")){a.classList.remove("e-selected-btn");break}}},o.prototype.updateToolbarItems=function(){var t=this.parent,e=t.element.id;if(t.isImageLoaded&&this.isToolbar()){var i=t.element.querySelector(".e-fill.e-template .e-dropdownbtn-preview"),r=t.element.querySelector(".e-stroke.e-template .e-dropdownbtn-preview"),n=t.element.querySelector(".e-text-font-color.e-template .e-dropdownbtn-preview"),s=t.element.querySelector(".e-stroke-text-font-color.e-template .e-dropdownbtn-preview"),a=t.element.querySelector(".e-text-background-color.e-template .e-dropdownbtn-preview"),l=t.element.querySelector(".e-pen-stroke-color.e-template .e-dropdownbtn-preview"),h=t.element.querySelector(".e-shape-stroke-width"),c=t.element.querySelector(".e-shape-rectangle-radius"),u=t.element.querySelector(".e-text-font-family"),p=t.element.querySelector(".e-text-font-size"),f=t.element.querySelector("#"+e+"_bold"),g=t.element.querySelector("#"+e+"_italic");if(t.activeObj.strokeSettings&&t.activeObj.textSettings){if(d(t.activeObj.strokeSettings.strokeWidth)&&(t.activeObj.strokeSettings.strokeWidth=2),d(t.activeObj.strokeSettings.outlineWidth)&&(t.activeObj.strokeSettings.outlineWidth=2),i){var v=t.activeObj.strokeSettings.fillColor;t.activeObj.strokeSettings.fillColor===""?i.classList.add("e-nocolor-item"):(i.classList.remove("e-nocolor-item"),i.style.background=v),document.querySelector("#"+e+"_shape_fill")&&($(e+"_shape_fill","colorpicker").value=v)}if(r){var v=t.activeObj.strokeSettings.strokeColor;r.style.background=v,document.querySelector("#"+e+"_shape_stroke")&&($(e+"_shape_stroke","colorpicker").value=v)}if(n){var v=t.activeObj.strokeSettings.strokeColor;n.style.background=v,document.querySelector("#"+e+"_text_font")&&($(e+"_text_font","colorpicker").value=v)}if(s){var v=t.activeObj.strokeSettings.outlineColor;/^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6}|[0-9A-Fa-f]{8})$|^[a-zA-Z]+$/.test(t.activeObj.strokeSettings.outlineColor)?(s.classList.remove("e-nocolor-item"),s.style.background=v):s.classList.add("e-nocolor-item"),document.querySelector("#"+e+"_stroke_text")&&($(e+"_stroke_text","colorpicker").value=v)}if(a){var v=t.activeObj.strokeSettings.fillColor;t.activeObj.strokeSettings.fillColor===""||t.activeObj.strokeSettings.fillColor==="transparent"?a.classList.add("e-nocolor-item"):(a.classList.remove("e-nocolor-item"),a.style.background=v),document.querySelector("#"+e+"_text_bgColor")&&($(e+"_text_bgColor","colorpicker").value=v)}if(l){var v=t.activeObj.strokeSettings.strokeColor;l.style.background=v,document.querySelector("#"+e+"_pen_stroke")&&($(e+"_pen_stroke","colorpicker").value=v);var y={penOpacity:1};t.notify("freehand-draw",{prop:"getPenOpacity",onPropertyChange:!1,value:{obj:y}})}if(u&&(D.isDevice?u.setAttribute("style","font-family:"+t.activeObj.textSettings.fontFamily.toLowerCase()):u.textContent=t.activeObj.textSettings.fontFamily),p){for(var C=0;C<t.fontSizeColl.length;C++)if(parseInt(t.fontSizeColl[C].text,10)>=Math.round(t.activeObj.textSettings.fontSize)){p.textContent=(C+1).toString();break}else if(Math.round(t.activeObj.textSettings.fontSize)<parseInt(t.fontSizeColl[0].text,10)){p.textContent="1";break}else if(Math.round(t.activeObj.textSettings.fontSize)>parseInt(t.fontSizeColl[t.fontSizeColl.length-1].text,10)){p.textContent=(t.fontSizeColl.length-1+1).toString();break}}if(f&&(t.activeObj.textSettings.bold?f.classList.add("e-selected-btn"):f.classList.remove("e-selected-btn")),g&&(t.activeObj.textSettings.italic?g.classList.add("e-selected-btn"):g.classList.remove("e-selected-btn")),h){var b=t.activeObj.shape==="text"?t.activeObj.strokeSettings.outlineWidth:t.activeObj.strokeSettings.strokeWidth,M=Math.round(b).toString();h.textContent=this.getStrokeWidth(M)}if(c){var S=Math.round(t.activeObj.strokeSettings.radius).toString();c.textContent=this.getRectRadius(S)}}}},o.prototype.getStrokeWidth=function(t){var e,i=parseInt(t,10)/2;switch(i){case 0:e=this.l10n.getConstant("NoOutline");break;case 1:e=this.l10n.getConstant("XSmall");break;case 2:e=this.l10n.getConstant("Small");break;case 3:e=this.l10n.getConstant("Medium");break;case 4:e=this.l10n.getConstant("Large");break;case 5:e=this.l10n.getConstant("XLarge");break}return e},o.prototype.getRectRadius=function(t){var e,i=parseInt(t,10)/2;switch(i){case 0:e=this.l10n.getConstant("0");break;case 1:e=this.l10n.getConstant("20");break;case 2:e=this.l10n.getConstant("40");break;case 3:e=this.l10n.getConstant("60");break;case 4:e=this.l10n.getConstant("80");break;case 5:e=this.l10n.getConstant("100");break}return e},o.prototype.cancelPan=function(){var t=this.parent;t.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:!0}});var e=t.element.querySelector(".e-img-pan .e-btn");e&&e.classList.remove("e-selected-btn"),t.pan(!1)},o.prototype.refreshMainToolbar=function(){this.currToolbar!=="main"&&this.refreshToolbar("main")},o.prototype.destroySubComponents=function(){for(var t=this.parent,e=t.element.querySelectorAll("input.e-control"),i=t.element.querySelectorAll("button.e-control"),r=0,n=e.length;r<n;r++)e[r].classList.contains("e-color-picker")&&($(e[r],"color-picker").destroy(),K(ae("input#"+e[r].id,t.element)));for(var r=0,n=i.length;r<n;r++)i[r].classList.contains("e-dropdown-btn")?($(i[r],"dropdown-btn").destroy(),K(ae("button#"+i[r].id,t.element))):i[r].classList.contains("e-btn")&&($(i[r],"btn").destroy(),K(ae("button#"+i[r].id,t.element)))},o.prototype.setInitialShapeSettings=function(t){var e=this.parent;e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),e.currObjType.shape=t.item.id,e.activeObj.shape=e.currObjType.shape.toLowerCase(),e.currObjType.isDragging=e.currObjType.isCustomCrop=!1,e.activeObj.shapeDegree=e.transform.degree,e.activeObj.shapeFlip=e.transform.currFlipState,e.activeObj.textFlip=e.transform.currFlipState,e.activeObj.flipObjColl=[];var i={order:null};e.notify("shape",{prop:"getNewOrder",onPropertyChange:!1,value:{obj:i}}),e.activeObj.order=i.order},o.prototype.isToolbarString=function(t){for(var e=!1,i=0;i<t.length;i++)if(typeof t[i]=="string"){e=!0;break}return e},o.prototype.excludeItems=function(t){for(var e=[],i=0;i<t.length;i++){var r=this.getIndex(t[i]);r!==-1&&e.push(r)}for(var n=[],i=0;i<this.defToolbarItems.length;i++)this.defToolbarItems[i].align==="Center"&&!this.isSameIndex(e,i)&&this.defToolbarItems[i].id!==this.parent.element.id+"_annotation"&&n.push(i);for(var i=n.length-1;i>=0;i--)this.defToolbarItems.splice(n[i],1)},o.prototype.isSameIndex=function(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return!0;return!1},o.prototype.getIndex=function(t){var e=-1,i=!1;t==="rotateLeft"&&(t="rotLeft"),t==="rotateRight"&&(t="rotRight"),t==="horizontalFlip"&&(t="hflip"),t==="verticalFlip"&&(t="vflip"),t==="arrowStart"&&(t="start"),t==="arrowEnd"&&(t="end"),t==="fontColor"&&(t="strokeColor",i=!0);for(var r=0;r<this.defToolbarItems.length;r++){var n=this.defToolbarItems[r].id;if(n&&n.toLowerCase().indexOf(t.toLowerCase())!==-1){e=r;break}}return i&&(t="fontColor"),e},o.prototype.getModuleName=function(){return"toolbar-module"},o.prototype.redactSlider=function(t){var e=this.parent,i=e.element.id,r=e.element.querySelector("#"+i+"_toolbarArea"),n=e.element.querySelector("#"+i+"_contextualToolbarArea");if(n){n.classList.remove("e-hide"),n.style.left=r.offsetLeft+"px";var s=document.querySelector("#"+i+"_contextualToolbarArea"),a=document.querySelector("#"+i+"_headWrapper"),l=document.querySelector("#"+i+"_labelWrapper"),h=document.querySelector("#"+i+"_contextualToolbar");a&&(a.remove(),l.remove()),h&&(h.remove(),this.createContextualToolbar()),a=s.appendChild(e.createElement("div",{id:i+"_headWrapper",styles:"position: relative"})),l=a.appendChild(e.createElement("label",{id:i+"_labelWrapper",className:"e-ie-finetune-slider-label",styles:D.isDevice?"position: absolute; top: 31%; left: calc(50% - 160px); font-size: 15px; text-transform: capitalize; font-weight: 400;":"position: absolute; top: 25%; left: calc(50% - 226px); font-size: 15px; text-transform: capitalize; font-weight: 400;"}));var c=t==="blur"?this.l10n.getConstant("Blur"):this.l10n.getConstant("PixelSize");l.textContent=c;var u=a.appendChild(e.createElement("div",{id:i+"_sliderWrapper",className:"e-ie-finetune-slider-wrap",styles:"position: absolute"}));a.appendChild(e.createElement("label",{id:i+"_redactSpan",className:"e-ie-redact-value-span",styles:D.isDevice?"position: absolute; top: 30%; margin-left: 20px; font-size: 15px; text-transform: capitalize; font-weight: 400;":"position: absolute; top: 30%; left: calc(50% + 190px); font-size: 15px; text-transform: capitalize; font-weight: 400;"})),u.parentElement.classList.add("e-finetune-slider");var p=e.activeObj.redactType==="blur"?e.activeObj.redactBlur:e.activeObj.redactPixelate,f=new es({tooltip:{placement:"Before",isVisible:!0,showOn:"Focus"},min:10,max:100,step:1,value:p,type:"MinRange",width:D.isDevice?"130px":"300px",created:function(){e.element.querySelector(".e-ie-redact-value-span").innerText=p.toString()},change:function(C){e.element.querySelector(".e-ie-redact-value-span").innerText=C.value.toString(),e.activeObj.redactType==="blur"?e.activeObj.redactBlur=e.tempRedactBlur=C.value:e.activeObj.redactType==="pixelate"&&(e.activeObj.redactPixelate=e.tempRedactPixel=C.value),e.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:e.activeObj,isCropRatio:null,points:null,isPreventDrag:!0,saveContext:null,isPreventSelection:!0}})},changed:function(){setTimeout(function(){e.notify("undo-redo",{prop:"updateUndoRedoStack",onPropertyChange:!1})},50)}});if(f.appendTo("#"+i+"_sliderWrapper"),D.isDevice){var g=n.offsetHeight+1,v=e.element.querySelector("#"+i+"_customizeWrapper");this.isFrameToolbar&&v&&(g=v.offsetHeight+2);var y=e.element.querySelector("#"+i+"_canvasWrapper").offsetHeight;n.style.top=this.toolbarHeight+1+y-g+"px"}}},o}();var nx=["toolbarTemplate"];var sx=["beforeSave","click","created","cropping","destroyed","editComplete","fileOpened","finetuneValueChanging","flipping","frameChange","imageFiltering","panning","quickAccessToolbarItemClick","quickAccessToolbarOpen","resizing","rotating","saved","selectionChanging","shapeChange","shapeChanging","toolbarCreated","toolbarItemClicked","toolbarUpdating","zooming"],ox=[""],cr=class extends oy{constructor(t,e,i,r){super(),this.ngEle=t,this.srenderer=e,this.viewContainerRef=i,this.injector=r,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(sx),this.addTwoWay.call(this,ox),Un("currentInstance",this,this.viewContainerRef),this.context=new Sr}ngOnInit(){this.context.ngOnInit(this)}ngAfterViewInit(){this.context.ngAfterViewInit(this)}ngOnDestroy(){this.context.ngOnDestroy(this)}ngAfterContentChecked(){this.context.ngAfterContentChecked(this)}};cr.\u0275fac=function(t){return new(t||cr)(Dt(gi),Dt(Kr),Dt(Fi),Dt(mr))};cr.\u0275cmp=Gi({type:cr,selectors:[["ejs-imageeditor"]],contentQueries:function(t,e,i){if(t&1&&Ji(i,nx,5),t&2){let r;$t(r=Jt())&&(e.toolbarTemplate=r.first)}},inputs:{allowUndoRedo:"allowUndoRedo",cssClass:"cssClass",disabled:"disabled",enablePersistence:"enablePersistence",enableRtl:"enableRtl",finetuneSettings:"finetuneSettings",fontFamily:"fontFamily",height:"height",isReadOnly:"isReadOnly",locale:"locale",quickAccessToolbarTemplate:"quickAccessToolbarTemplate",selectionSettings:"selectionSettings",showQuickAccessToolbar:"showQuickAccessToolbar",theme:"theme",toolbar:"toolbar",toolbarTemplate:"toolbarTemplate",uploadSettings:"uploadSettings",width:"width",zoomSettings:"zoomSettings"},outputs:{beforeSave:"beforeSave",click:"click",created:"created",cropping:"cropping",destroyed:"destroyed",editComplete:"editComplete",fileOpened:"fileOpened",finetuneValueChanging:"finetuneValueChanging",flipping:"flipping",frameChange:"frameChange",imageFiltering:"imageFiltering",panning:"panning",quickAccessToolbarItemClick:"quickAccessToolbarItemClick",quickAccessToolbarOpen:"quickAccessToolbarOpen",resizing:"resizing",rotating:"rotating",saved:"saved",selectionChanging:"selectionChanging",shapeChange:"shapeChange",shapeChanging:"shapeChanging",toolbarCreated:"toolbarCreated",toolbarItemClicked:"toolbarItemClicked",toolbarUpdating:"toolbarUpdating",zooming:"zooming"},features:[yr],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0});Ni([tn()],cr.prototype,"toolbarTemplate",void 0);cr=Ni([ks([Sr])],cr);var hy=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=Zr({type:o}),o.\u0275inj=Gr({imports:[[xs]]}),o})();var lx=["footerTemplate"],hx=["header"],cy=["content"],uy=["*"],cx=["buttonModel","isFlat","type"],ux=["click"],px=(()=>{class o extends ev{constructor(e){super(),this.viewContainerRef=e,Un("currentInstance",this,this.viewContainerRef),this.registerEvents(ux),this.directivePropList=cx}}return o.\u0275fac=function(e){return new(e||o)(Dt(Fi))},o.\u0275dir=Wo({type:o,selectors:[["e-dialogbutton"]],inputs:{buttonModel:"buttonModel",isFlat:"isFlat",type:"type"},outputs:{click:"click"},features:[yr]}),o})(),dx=(()=>{class o extends tv{constructor(){super("buttons")}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275dir=Wo({type:o,selectors:[["e-buttons"]],contentQueries:function(e,i,r){if(e&1&&Ji(r,px,4),e&2){let n;$t(n=Jt())&&(i.children=n)}},features:[yr]}),o})();var fx=["beforeClose","beforeOpen","beforeSanitizeHtml","close","created","destroyed","drag","dragStart","dragStop","open","overlayClick","resizeStart","resizeStop","resizing","visibleChange"],gx=["visible"],Ai=class extends rn{constructor(t,e,i,r){super(),this.ngEle=t,this.srenderer=e,this.viewContainerRef=i,this.injector=r,this.tags=["buttons"],this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(fx),this.addTwoWay.call(this,gx),Un("currentInstance",this,this.viewContainerRef),this.containerContext=new Sr}ngOnInit(){this.containerContext.ngOnInit(this)}ngAfterViewInit(){this.containerContext.ngAfterViewInit(this)}ngOnDestroy(){this.containerContext.ngOnDestroy(this)}ngAfterContentChecked(){this.tagObjects[0].instance=this.childButtons,this.containerContext.ngAfterContentChecked(this)}};Ai.\u0275fac=function(t){return new(t||Ai)(Dt(gi),Dt(Kr),Dt(Fi),Dt(mr))};Ai.\u0275cmp=Gi({type:Ai,selectors:[["ejs-dialog"]],contentQueries:function(t,e,i){if(t&1&&(Ji(i,lx,5),Ji(i,hx,5),Ji(i,cy,5),Ji(i,dx,5)),t&2){let r;$t(r=Jt())&&(e.footerTemplate=r.first),$t(r=Jt())&&(e.header=r.first),$t(r=Jt())&&(e.content=r.first),$t(r=Jt())&&(e.childButtons=r.first)}},inputs:{allowDragging:"allowDragging",animationSettings:"animationSettings",buttons:"buttons",closeOnEscape:"closeOnEscape",content:"content",cssClass:"cssClass",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableResize:"enableResize",enableRtl:"enableRtl",footerTemplate:"footerTemplate",header:"header",height:"height",isModal:"isModal",locale:"locale",minHeight:"minHeight",position:"position",resizeHandles:"resizeHandles",showCloseIcon:"showCloseIcon",target:"target",visible:"visible",width:"width",zIndex:"zIndex"},outputs:{beforeClose:"beforeClose",beforeOpen:"beforeOpen",beforeSanitizeHtml:"beforeSanitizeHtml",close:"close",created:"created",destroyed:"destroyed",drag:"drag",dragStart:"dragStart",dragStop:"dragStop",open:"open",overlayClick:"overlayClick",resizeStart:"resizeStart",resizeStop:"resizeStop",resizing:"resizing",visibleChange:"visibleChange"},features:[yr],ngContentSelectors:uy,decls:1,vars:0,template:function(t,e){t&1&&(ws(),Ds(0))},encapsulation:2,changeDetection:0});Ni([tn()],Ai.prototype,"footerTemplate",void 0);Ni([tn()],Ai.prototype,"header",void 0);Ni([tn()],Ai.prototype,"content",void 0);Ai=Ni([ks([Sr])],Ai);var py=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=Zr({type:o}),o.\u0275inj=Gr({imports:[[xs]]}),o})();var vx=["afterClose","afterOpen","beforeClose","beforeCollision","beforeOpen","beforeRender","created","destroyed"],mx=[""],pn=class extends nn{constructor(t,e,i,r){super(),this.ngEle=t,this.srenderer=e,this.viewContainerRef=i,this.injector=r,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(vx),this.addTwoWay.call(this,mx),Un("currentInstance",this,this.viewContainerRef),this.containerContext=new Sr}ngOnInit(){this.containerContext.ngOnInit(this)}ngAfterViewInit(){this.containerContext.ngAfterViewInit(this)}ngOnDestroy(){this.containerContext.ngOnDestroy(this)}ngAfterContentChecked(){this.containerContext.ngAfterContentChecked(this)}};pn.\u0275fac=function(t){return new(t||pn)(Dt(gi),Dt(Kr),Dt(Fi),Dt(mr))};pn.\u0275cmp=Gi({type:pn,selectors:[["ejs-tooltip"]],contentQueries:function(t,e,i){if(t&1&&Ji(i,cy,5),t&2){let r;$t(r=Jt())&&(e.content=r.first)}},inputs:{animation:"animation",closeDelay:"closeDelay",container:"container",content:"content",cssClass:"cssClass",enableHtmlParse:"enableHtmlParse",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableRtl:"enableRtl",height:"height",htmlAttributes:"htmlAttributes",isSticky:"isSticky",locale:"locale",mouseTrail:"mouseTrail",offsetX:"offsetX",offsetY:"offsetY",openDelay:"openDelay",opensOn:"opensOn",position:"position",showTipPointer:"showTipPointer",target:"target",tipPointerPosition:"tipPointerPosition",width:"width",windowCollision:"windowCollision"},outputs:{afterClose:"afterClose",afterOpen:"afterOpen",beforeClose:"beforeClose",beforeCollision:"beforeCollision",beforeOpen:"beforeOpen",beforeRender:"beforeRender",created:"created",destroyed:"destroyed"},features:[yr],ngContentSelectors:uy,decls:1,vars:0,template:function(t,e){t&1&&(ws(),Ds(0))},encapsulation:2,changeDetection:0});Ni([tn()],pn.prototype,"content",void 0);pn=Ni([ks([Sr])],pn);var Cx=["id","description"],bx=["*"],dy=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275cmp=Gi({type:o,selectors:[["","id","description"]],standalone:!0,features:[ia],attrs:Cx,ngContentSelectors:bx,decls:2,vars:0,consts:[[1,"sb-description-body"]],template:function(i,r){i&1&&(ws(),gt(0,"div",0),Ds(1),ht())},encapsulation:2})}return o})();var Mx=["Dialog"],Ix=["ImageEditor"];function Sx(o,t){if(o&1){let e=_h();gt(0,"ejs-imageeditor",17,2),en("created",function(){gr(e);let r=ta();return vr(r.created())})("fileOpened",function(){gr(e);let r=ta();return vr(r.fileOpened())}),ht()}if(o&2){let e=ta();Ko("toolbar",e.toolbarItems)}}var fy=(()=>{class o{DialogInstance;ImageEditorInstance;toolbarItems=[];header="Edit Profile Image";showCloseIcon=!0;closeOnEscape=!0;width="340px";height="420px";visible=!1;animationSettings={effect:"None"};target=".control-section";position={X:"center",Y:100};imgSrc="";created=()=>{this.ImageEditorInstance.theme&&window.location.href.split("#")[1]&&(this.ImageEditorInstance.theme=window.location.href.split("#")[1].split("/")[1])};imageLoaded=()=>{if(this.imgSrc===""){let e=document.querySelector("#img-canvas"),i=document.querySelector("#demo-img"),r=e.getContext("2d");e.width=i.width<i.height?i.width:i.height,e.height=e.width,r.drawImage(i,0,0,e.width,e.height),document.querySelector(".e-profile").classList.remove("e-hide")}};dialogOpen=()=>{let e=document.querySelector("#demo-img");this.ImageEditorInstance.open(e.src)};dialogClose=()=>{let e=document.querySelector("#demo-img");this.ImageEditorInstance.open(e.src)};onOpenDialog=function(e){this.DialogInstance.show()};imageChanged=e=>{let r=window.URL.createObjectURL(e.target.files[0]);this.ImageEditorInstance.open(r.toString()),document.getElementById("img-upload").value=null,this.imgSrc=r.toString()};fileOpened=()=>{this.ImageEditorInstance.select("circle")};dlgOpenButtonClick=()=>{document.getElementById("img-upload").click()};dlgResetBtnClick=()=>{this.ImageEditorInstance.reset()};dlgRotateBtnClick=()=>{this.ImageEditorInstance.rotate(-90)};dlgDoneBtnClick=()=>{this.ImageEditorInstance.crop();let e=this.ImageEditorInstance.getImageData(),i=document.querySelector("#img-canvas"),r=i.getContext("2d"),n=document.querySelector(".e-profile"),s=n.appendChild(xe("canvas")),a=s.getContext("2d");if(s.width=e.width,s.height=e.height,a.putImageData(e,0,0),r.clearRect(0,0,i.width,i.height),r.drawImage(s,0,0,i.width,i.height),s.remove(),n.style.borderRadius="100%",i.style.backgroundColor="#fff",this.DialogInstance.hide(),this.imgSrc!==""){let l=document.querySelector("#demo-img");l.src=this.imgSrc}};dlgButtons=[{click:this.dlgOpenButtonClick.bind(this),buttonModel:{content:"Open",isPrimary:!1,cssClass:"e-custom-img-btn e-img-custom-open"}},{click:this.dlgResetBtnClick.bind(this),buttonModel:{content:"Reset",isPrimary:!1,cssClass:"e-custom-img-btn e-img-custom-reset"}},{click:this.dlgRotateBtnClick.bind(this),buttonModel:{content:"Rotate",isPrimary:!1,cssClass:"e-custom-img-btn e-img-custom-rotate"}},{click:this.dlgDoneBtnClick.bind(this),buttonModel:{content:"Apply",isPrimary:!0,cssClass:"e-custom-img-btn e-img-custom-apply"}}];canvasClicked=()=>{this.DialogInstance.show()};ngAfterViewInit(){document.getElementsByClassName("sb-desktop-wrapper")[0]&&(document.getElementsByClassName("sb-desktop-wrapper")[0].onclick=i=>{(i.target.className.indexOf("col-lg-12 control-section")>-1||i.target.className.indexOf("sb-content")>-1)&&this.DialogInstance.hide()})}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=Gi({type:o,selectors:[["app-root"]],viewQuery:function(i,r){if(i&1&&(Vh(Mx,5),Vh(Ix,5)),i&2){let n;$t(n=Jt())&&(r.DialogInstance=n.first),$t(n=Jt())&&(r.ImageEditorInstance=n.first)}},standalone:!0,features:[ia],decls:41,vars:8,consts:[["Dialog",""],["content",""],["ImageEditor",""],[2,"padding-left","20px"],[1,"col-lg-12","control-section","e-img-editor-sample"],[1,"e-profile","e-hide"],[1,"e-custom-wrapper"],["id","img-canvas",2,"max-width","200px","max-height","200px"],["alt","img","id","demo-img","crossorigin","anonymous","src","./../../assets/image-editor/images/profile.png",2,"display","none",3,"load"],["type","file","id","img-upload","accept","image/*",2,"display","none",3,"change"],["id","custom-edit",1,"e-custom-edit",3,"click"],[1,"e-custom-icon","sb-icons"],["id","profile-dialog",1,"e-img-editor-sample"],[3,"open","close","position","buttons","visible","header","showCloseIcon","target","width","height"],["id","description-section"],["id","description"],["target","_blank","href","http://ej2.syncfusion.com/angular/documentation/image-editor/getting-started"],[3,"created","fileOpened","toolbar"]],template:function(i,r){if(i&1){let n=_h();gt(0,"div",3)(1,"p"),Ut(2,"The Image Editor component provides built-in support to rotate an image using the rotate method and support to crop an image using the select and crop methods."),ht(),gt(3,"div",4)(4,"div",5)(5,"div",6),ea(6,"canvas",7),gt(7,"img",8),en("load",function(){return gr(n),vr(r.imageLoaded())}),ht(),gt(8,"input",9),en("change",function(a){return gr(n),vr(r.imageChanged(a))}),ht(),gt(9,"span",10),en("click",function(){return gr(n),vr(r.canvasClicked())}),ea(10,"span",11),ht()()(),gt(11,"div",12)(12,"ejs-dialog",13,0),en("open",function(){return gr(n),vr(r.dialogOpen())})("close",function(){return gr(n),vr(r.dialogClose())}),Yh(14,Sx,2,1,"ng-template",null,1,_f),ht()()(),gt(16,"div",14),Ut(17,"Description"),ht(),gt(18,"div",15)(19,"p"),Ut(20,"In this demo, Image Editor is rendered within a dialog and opens an image by passing its URL path to the open method of the Image Editor control."),ht(),gt(21,"p"),Ut(22," The following operations are supported in the Image Editor. : "),ht(),gt(23,"ul")(24,"li")(25,"b"),Ut(26,"Selection"),ht(),Ut(27," : Multiple selection options are available. The selection region can be a square or circle, customized to various aspect ratios, and customized by dragging and resizing."),ht(),gt(28,"li")(29,"b"),Ut(30,"Crop"),ht(),Ut(31," : The image can be cropped based on the selection."),ht(),gt(32,"li")(33,"b"),Ut(34,"Rotate"),ht(),Ut(35," : The image can be rotated both clockwise and anticlockwise by 90 degrees."),ht()(),gt(36,"p"),Ut(37," More information about Image Editor can be found in this "),gt(38,"a",16),Ut(39,"documentation"),ht(),Ut(40," section. "),ht()()()}i&2&&(pf(12),Ko("position",r.position)("buttons",r.dlgButtons)("visible",r.visible)("header",r.header)("showCloseIcon",r.showCloseIcon)("target",r.target)("width",r.width)("height",r.height))},dependencies:[py,Ai,hy,cr,dy],styles:[`ejs-imageeditor{display:block}.e-img-editor-sample,.e-img-editor-sample .control-wrapper{position:relative}.e-profile{width:200px;height:200px;position:absolute;left:50%;-webkit-transform:translate(-50%,30%);transform:translate(-50%,30%);border-radius:50%}.e-custom-wrapper{position:relative}.e-custom-edit{position:absolute;width:36px;height:36px;border-radius:50%;background-color:#00f;top:calc(100% - 54px);left:calc(100% - 47px)}.e-custom-icon:before{content:"\\e911";font-size:28px;color:#fff;left:5px;top:4px;line-height:initial;position:absolute}#custom-edit:hover{cursor:pointer}canvas#img-canvas{border-radius:50%;border:4px solid darkgrey}.e-profile .e-custom-img{display:none}#profile-dialog .e-dlg-content div{height:100%;width:100%}.e-img-custom-open{float:left;margin-left:0!important}.e-img-custom-reset{float:left}.tailwind .e-custom-icon:before,.tailwind-dark .e-custom-icon:before{top:6px}.e-bigger #profile-dialog .e-dlg-header{font-size:18px!important}.highcontrast .e-custom-img-btn,.fabric .e-custom-img-btn,.fabric-dark .e-custom-img-btn{padding:2px 10px!important}.e-bigger .e-custom-img-btn{font-size:14px!important;padding:6px 10px!important}.e-bigger.highcontrast .e-custom-img-btn,.e-bigger.fabric .e-custom-img-btn,.e-bigger.fabric-dark .e-custom-img-btn,.e-bigger.material .e-custom-img-btn,.e-bigger.material-dark .e-custom-img-btn{padding:3px 10px!important}.e-bigger.bootstrap .e-custom-img-btn,.e-bigger.bootstrap-dark .e-custom-img-btn{padding:1px 10px!important}.e-img-editor-sample .e-hide{display:none}.e-custom-img-btn,.material3 .e-custom-img-btn,.material3-dark .e-custom-img-btn,.e-bigger.material3 .e-custom-img-btn,.e-bigger.material3-dark .e-custom-img-btn{margin-left:3px!important}.control-section{min-height:450px}
`],encapsulation:2})}return o})();og(fy,ag).catch(o=>console.error(o));
