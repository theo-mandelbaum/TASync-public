!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("@syncfusion/ej2-charts"),require("@syncfusion/ej2-svg-base"),require("@syncfusion/ej2-base")):"function"==typeof define&&define.amd?define(["exports","@syncfusion/ej2-charts","@syncfusion/ej2-svg-base","@syncfusion/ej2-base"],r):r((e=e||self).ej={},e.ej2Charts,e.ej2SvgBase,e.ej2Base)}(this,function(e,a,D,u){"use strict";function r(){this.keywordIndex=void 0,this.chartYValues=[]}a.Chart.Inject(a.AreaSeries,a.StackingAreaSeries,a.BarSeries,a.PieSeries,a.StackingBarSeries,a.PolarSeries,a.ScatterSeries,a.BubbleSeries,a.RadarSeries,a.DateTime,a.ColumnSeries,a.StackingColumnSeries,a.LineSeries,a.StackingLineSeries,a.ErrorBar,a.Trendlines,a.SplineSeries,a.DataLabel,a.Category,a.Legend,a.Tooltip,a.Export),a.AccumulationChart.Inject(a.AccumulationLegend,a.PieSeries,a.AccumulationTooltip,a.AccumulationDataLabel),r.prototype.chartRender=function(e,r){this.keywordIndex=u.isNullOrUndefined(r)?0:r,this.chartType=e[m[this.keywordIndex]],this.isPieType="Pie"===this.chartType||"Doughnut"===this.chartType;var r=this.chartData(e,this.chartType),t={enableAnimation:!1,width:e[o[this.keywordIndex]]*(96/72)+"px",height:e[n[this.keywordIndex]]*(96/72)+"px"};this.isPieType?this.chart=new a.AccumulationChart(t):(this.chart=new a.Chart(t),this.chart.primaryXAxis=this.chartPrimaryXAxis(e[x[this.keywordIndex]],this.chartType),this.chart.primaryYAxis=this.chartPrimaryYAxis(e[h[this.keywordIndex]])),this.chart.series=this.chartSeries(e[w[this.keywordIndex]],r,this.chartType);for(var i=0;i<this.chart.series.length;i++)this.chart.series[parseInt(i.toString(),10)].animation.enable=!1;this.chart.title=e[c[this.keywordIndex]],this.chart.legendSettings=this.parseChartLegend(e[d[this.keywordIndex]])},r.prototype.convertChartToImage=function(c,y,p){var l=this;return new Promise(function(r,e){var t=l.getControlsValue([c],y,p),i=t.width,a=t.height,o=u.createElement("canvas"),n=Math.max(1,window.devicePixelRatio||1),s=(o.width=i*n,o.height=a*n,o.style.width=i+"px",o.style.height=a+"px",window.URL.createObjectURL(new Blob([(new XMLSerializer).serializeToString(t.svg)],{type:"image/svg+xml"}))),d=new Image,h=o.getContext("2d");h.scale(n,n),d.onload=function(){h.drawImage(d,0,0),window.URL.revokeObjectURL(s);var e=o.toDataURL("image/png");r(e)},d.onerror=function(){e("Invalid data")},d.src=s})},r.prototype.getControlsValue=function(e,i,r){var a=0,o=0,n=new D.SvgRenderer("").createSvg({id:"Image_Export",width:200,height:200});return e.map(function(e){var r,t;e&&(r=e.svgObject.cloneNode(!0),(t=e.renderer.createGroup({style:"transform: translateY("+o+"px)"})).appendChild(r),a=Math.max(e.availableSize.width,i),o+=e.availableSize.height,e.svgObject.outerHTML,n.appendChild(t))}),n.setAttribute("width",a+""),n.setAttribute("height",o+""),{width:a,height:o,svg:n}},r.prototype.officeChartType=function(e){var r="";switch(e){case"Area_Stacked":r="StackingArea";break;case"Area":r="Area";break;case"Area_Stacked_100":r="StackingArea100";break;case"Bar_Clustered":r="Bar";break;case"Bar_Stacked":r="StackingBar";break;case"Bar_Stacked_100":r="StackingBar100";break;case"Column_Clustered":r="Column";break;case"Column_Stacked":r="StackingColumn";break;case"Column_Stacked_100":r="StackingColumn100";break;case"Scatter_Markers":r="Scatter";break;case"Bubble":r="Bubble";break;case"Doughnut":case"Pie":r="Pie";break;case"Line_Stacked_100":case"Line_Markers_Stacked_100":r="StackingLine100";break;case"Line":case"Line_Markers":r="Line";break;case"Line_Stacked":case"Line_Markers_Stacked":r="StackingLine"}return r},r.prototype.chartSeries=function(e,r,t){for(var i=[],a=0;a<e.length;a++){var o=e[parseInt(a.toString(),10)],o=this.writeChartSeries(o,r,t,a);i.push(o)}return i},r.prototype.writeChartSeries=function(e,r,t,i){var a,o=this.officeChartType(t),n=e[I[this.keywordIndex]][parseInt(i.toString(),10)],s={};if(s.type=o,s.dataSource=r,s.name=e[l[this.keywordIndex]],s.xName="x",s.yName="y"+i,"Bubble"===t&&(s.size="size"+i),this.isPieType?(s.pointColorMapping="color","Doughnut"===t&&(s.innerRadius="75%",s.radius="70%")):(u.isNullOrUndefined(n)&&(n=e[I[this.keywordIndex]][0]),a=this.chartFormat(n,o),s.fill=a,u.isNullOrUndefined(n[S[this.keywordIndex]][v[this.keywordIndex]])||(s.pointColorMapping="color")),"Line_Markers"!==t&&"Line_Markers_Stacked"!==t&&"Line_Markers_Stacked_100"!==t||(s.marker={visible:!0}),e.hasOwnProperty(g[this.keywordIndex])&&(this.isPieType?s.dataLabel=this.parseDataLabels(e[g[this.keywordIndex]]):((r={}).dataLabel=this.parseDataLabels(e[g[this.keywordIndex]]),s.marker=r)),e.hasOwnProperty(f[this.keywordIndex])&&(i=e[f[this.keywordIndex]],s.errorBar=this.parseErrorBars(i)),e.hasOwnProperty(p[this.keywordIndex]))for(var d=e[p[this.keywordIndex]],h=[],c=0;c<d.length;c++){var y=d[parseInt(c.toString(),10)],y=this.parseTrendLines(y,a);h.push(y),s.trendlines=h}return s},r.prototype.parseDataLabels=function(e){var r={visible:!0};return this.isPieType?"BestFit"===e[i[this.keywordIndex]]||"Inside"===e[i[this.keywordIndex]]?r.position="Inside":r.position="Outside":r.position=this.dataLabelPosition(e[i[this.keywordIndex]]),r},r.prototype.parseErrorBars=function(e){var r={visible:!0};return r.type=e[y[this.keywordIndex]],r.direction=e[C[this.keywordIndex]],"Cap"===e[O[this.keywordIndex]]?r.errorBarCap={width:1}:r.errorBarCap={width:0},r},r.prototype.parseTrendLines=function(e,r){var t={};return t.type=e[y[this.keywordIndex]],t.name=e[L[this.keywordIndex]],t.forwardForecast=e[U[this.keywordIndex]],t.backwardForecast=e[F[this.keywordIndex]],"NaN"===e[_[this.keywordIndex]]?t.intercept=0:t.intercept=e[_[this.keywordIndex]],t.fill=r,t},r.prototype.dataLabelPosition=function(e){var r="Auto";switch(e){case"Outside":r="Outer";break;case"Center":r="Middle";break;case"Inside":r="Top";break;case"OutsideBase":r="Bottom"}return r},r.prototype.chartFormat=function(e,r){return("Line"===r||"StackingLine"===r||"StackingLine100"===r?e[t[this.keywordIndex]]:e[S[this.keywordIndex]])[b[this.keywordIndex]]},r.prototype.chartPrimaryXAxis=function(e,r){var t={},i=(e[c[this.keywordIndex]]&&(t.title=e[c[this.keywordIndex]]),this.chartCategoryType(e[z[this.keywordIndex]]));return"DateTime"===(t.valueType=i)&&(t.intervalType="Days",t.labelFormat="M/d/yyyy",t.edgeLabelPlacement="Shift"),"Scatter_Markers"!==r&&"Bubble"!==r||this.checkAndSetAxisValue(t,e),this.parseBoolValue(e[T[this.keywordIndex]])&&(t.majorGridLines={width:1}),this.parseBoolValue(e[A[this.keywordIndex]])&&(t.minorTicksPerInterval=4),t},r.prototype.chartCategoryType=function(e){var r="";switch(e){case"Time":r="DateTime";break;case"Automatic":r="Category"}return r},r.prototype.chartPrimaryYAxis=function(e){var r={};return e[c[this.keywordIndex]]&&(r.title=e[c[this.keywordIndex]]),this.checkAndSetAxisValue(r,e),e[T[this.keywordIndex]]&&(r.majorGridLines={width:1}),e[A[this.keywordIndex]]&&(r.minorTicksPerInterval=4),r},r.prototype.checkAndSetAxisValue=function(e,r){var t;0!==r[j[this.keywordIndex]]&&(e.minimum=r[j[this.keywordIndex]]),0!==r[M[this.keywordIndex]]&&(e.maximum=r[M[this.keywordIndex]]),0!==r[B[this.keywordIndex]]&&((t=r[R[this.keywordIndex]])&&this.parseBoolValue(t)?(t=this.calculateMajorUnit(this.chartYValues))<10&&("Bar_Stacked_100"===this.chartType||"Line_Stacked_100"===this.chartType||"Column_Stacked_100"===this.chartType||"Line_Markers_Stacked_100"===this.chartType||"Area_Stacked_100"===this.chartType)?e.interval=10:e.interval=t:e.interval=r[B[this.keywordIndex]])},r.prototype.calculateMajorUnit=function(e){if(e&&0<e.length){for(var r=Number.MIN_VALUE,t=Number.MAX_VALUE,i=0;i<e.length;i++){var a=e[parseInt(i.toString(),10)];r<a&&(r=a),a<t&&(t=a)}return this.roundToNiceNumber((r-t)/1.5)}return 1},r.prototype.roundToNiceNumber=function(e){var r=Math.floor(Math.log(e)/Math.log(10)),r=Math.pow(10,r),e=e/r;return e<1.5?+r:e<3?2*r:e<7?5*r:10*r},r.prototype.chartData=function(e,r){for(var t=e[s[this.keywordIndex]],i=[],a=0;a<t.length;a++){var o=t[parseInt(a.toString(),10)],o=this.chartPlotData(o,e,r,a);i.push(o)}return i},r.prototype.chartPlotData=function(e,r,t,i){var a,o,n,s=this,d={},h=r[w[this.keywordIndex]];"m/d/yyyy"===r[x[this.keywordIndex]][Y[this.keywordIndex]]?(n=e[N[this.keywordIndex]].split("/"),a=Number(n[0]),o=Number(n[1]),n=Number(n[2]),d.x=new Date(n,a-1,o)):d.x=e[N[this.keywordIndex]];for(var c=0;c<h.length;c++){var y,p,l=e[k[this.keywordIndex]][parseInt(c.toString(),10)];u.isNullOrUndefined(l)||(y=l[E[this.keywordIndex]],this.chartYValues.push(y),d["y"+c]=y,"Bubble"===t&&(d["size"+c]=l[G[this.keywordIndex]])),"Pie"!==r[m[this.keywordIndex]]&&"Doughnut"!==r[m[this.keywordIndex]]&&"Column_Stacked"!==r[m[this.keywordIndex]]||(l=(y=h[parseInt(c.toString(),10)])[I[this.keywordIndex]].find(function(e){return e[P[s.keywordIndex]]===i}),u.isNullOrUndefined(l)?1<y[I[this.keywordIndex]].length&&0===y[I[this.keywordIndex]][parseInt(i.toString(),10)][P[this.keywordIndex]]?(l=y[I[this.keywordIndex]][parseInt(i.toString(),10)],p=this.chartFormat(l,t),"Column_Stacked"!==r[m[this.keywordIndex]]?d.color=p:d["color"+c]=p):u.isNullOrUndefined(y[V[this.keywordIndex]])||u.isNullOrUndefined(y[V[this.keywordIndex]][S[this.keywordIndex]])||7<y[V[this.keywordIndex]][S[this.keywordIndex]][b[this.keywordIndex]].length&&(p=this.getColor(y[V[this.keywordIndex]][S[this.keywordIndex]][b[this.keywordIndex]]),"Column_Stacked"!==r[m[this.keywordIndex]]?d.color=p:d["color"+c]=p):(p=this.chartFormat(l,t),"Column_Stacked"!==r[m[this.keywordIndex]]?d.color=p:d["color"+c]=p))}return d},r.prototype.getColor=function(e){return 0<e.length&&"#"===e[0]&&7<e.length?e.substr(0,7):e},r.prototype.parseChartLegend=function(e){var r={},e=e[i[this.keywordIndex]];return(e="Corner"===e?"right":e)?(r.visible=!0,r.position=e.charAt(0).toUpperCase()+e.slice(1)):r.visible=!1,r},r.prototype.parseBoolValue=function(e){return"string"==typeof e||e instanceof String?!u.isNullOrUndefined(e)&&"f"!==e&&"0"!==e&&"off"!==e&&"false"!==e:1===e||!0===e},r.prototype.destroy=function(){this.chart&&this.chart.destroy(),this.chart=void 0,this.chartYValues&&(this.chartYValues=[]),this.chartYValues=void 0};var o=["width","w"],n=["height","h"],k=["chartData","chd"],s=["chartCategory","c"],w=["chartSeries","cs"],d=["chartLegend","cl"],x=["chartPrimaryCategoryAxis","cpca"],h=["chartPrimaryValueAxis","cpva"],c=["chartTitle","ctt"],m=["chartType","ct"],p=["trendLines","tl"],I=["dataPoints","dp"],l=["seriesName","sn"],g=["dataLabel","sl"],f=["errorBar","eb"],S=["fill","f"],t=["line","l"],b=["rgb","rgb"],P=["id","i"],v=["foreColor","fc"],i=["position","p"],y=["type","t"],L=["name","n"],C=["direction","dir"],O=["endStyle","est"],U=["forward","fw"],F=["backward","bw"],_=["intercept","itr"],z=["categoryType","ct"],T=["hasMajorGridLines","hmajgl"],A=["hasMinorGridLines","hmingl"],B=["majorUnit","maju"],R=["isAutoMajor","iam"],M=["maximumValue","maxv"],j=["minimumValue","minv"],N=["categoryXName","cx"],Y=["numberFormat","nf"],E=["yValue","y"],G=["size","sz"],V=["seriesFormat","sf"];e.ChartComponent=r,e.backwardProperty=F,e.categoryTypeProperty=z,e.categoryXNameProperty=N,e.chartCategoryProperty=s,e.chartDataProperty=k,e.chartLegendProperty=d,e.chartPrimaryCategoryAxisProperty=x,e.chartPrimaryValueAxisProperty=h,e.chartSeriesProperty=w,e.chartTitleProperty=c,e.chartTypeProperty=m,e.dataLabelProperty=g,e.dataPointsProperty=I,e.directionProperty=C,e.endStyleProperty=O,e.errorBarProperty=f,e.fillProperty=S,e.foreColorProperty=v,e.forwardProperty=U,e.hasMajorGridLinesProperty=T,e.hasMinorGridLinesProperty=A,e.heightProperty=n,e.idProperty=P,e.interceptProperty=_,e.isAutoMajorProperty=R,e.lineProperty=t,e.majorUnitProperty=B,e.maximumValueProperty=M,e.minimumValueProperty=j,e.nameProperty=L,e.numberFormatProperty=Y,e.positionProperty=i,e.rgbProperty=b,e.seriesFormatProperty=V,e.seriesNameProperty=l,e.sizeProperty=G,e.trendLinesProperty=p,e.typeProperty=y,e.widthProperty=o,e.yValueProperty=E,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ej2-office-chart.umd.min.js.map
