this.ej=this.ej||{},this.ej.interactivechat=function(e,t,s,i,o,r){"use strict";var n=function(){var e=function(t,s){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(t,s)};return function(t,s){function i(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(i.prototype=s.prototype,new i)}}(),a=function(e,t,s,i){var o,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,s,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(n=(r<3?o(n):r>3?o(t,s,n):o(t,s))||n);return r>3&&n&&Object.defineProperty(t,s,n),n},p=function(e){function s(){return null!==e&&e.apply(this,arguments)||this}return n(s,e),a([t.Property("")],s.prototype,"iconCss",void 0),a([t.Property()],s.prototype,"text",void 0),a([t.Property("Button")],s.prototype,"type",void 0),a([t.Property("Left")],s.prototype,"align",void 0),a([t.Property(!0)],s.prototype,"visible",void 0),a([t.Property(!1)],s.prototype,"disabled",void 0),a([t.Property("")],s.prototype,"tooltip",void 0),a([t.Property("")],s.prototype,"cssClass",void 0),a([t.Property(null)],s.prototype,"template",void 0),a([t.Property(-1)],s.prototype,"tabIndex",void 0),s}(t.ChildProperty),l=function(e){function s(){return null!==e&&e.apply(this,arguments)||this}return n(s,e),a([t.Collection([],p)],s.prototype,"items",void 0),a([t.Event()],s.prototype,"itemClicked",void 0),s}(t.ChildProperty),h=function(e){function s(t,s){return e.call(this,t,s)||this}return n(s,e),s.prototype.preRender=function(){},s.prototype.getModuleName=function(){return"interactivechatBase"},s.prototype.getPersistData=function(){return this.addOnPersist([])},s.prototype.render=function(){},s.prototype.setDimension=function(e,s,i){e.style.width=t.isNullOrUndefined(s)?e.style.width:t.formatUnit(s),e.style.height=t.isNullOrUndefined(i)?e.style.height:t.formatUnit(i)},s.prototype.addCssClass=function(e,t){t&&e.classList.add(t)},s.prototype.addRtlClass=function(e,t){t&&e.classList.add("e-rtl")},s.prototype.updateCssClass=function(e,s,i){i&&t.removeClass([e],i.trim().split(" ")),s&&t.addClass([e],s.trim().split(" "))},s.prototype.updateHeader=function(e,t,s){e?(t.hidden=!1,s.style.height=""):(t.hidden=!0,s.style.height="100%")},s.prototype.renderViewSections=function(e,t,s){var i=this.createElement("div",{className:t});e.appendChild(i);var o=this.createElement("div",{className:s});e.appendChild(o)},s.prototype.createViewComponents=function(e){var t=this.createElement("div",{className:"e-views"}),s=this.createElement("div",{className:"e-view-container"});t.appendChild(s),e.appendChild(t)},s.prototype.updateScroll=function(e){e.scrollTo(0,e.scrollHeight)},s.prototype.getElement=function(e){var t;switch(e){case"footer":t="e-footer";break;case"contentContainer":t="e-content-container";break;case"outputElement":t="e-content";break;default:t=""}return this.createElement("div",{className:t})},s.prototype.createSuggestionElement=function(e){var t=this.createElement("div",{className:"e-suggestions"}),s=this.createElement("div",{className:"e-suggestion-header"}),i=this.createElement("div",{className:"e-suggestion-list"});return e&&t.appendChild(s),t.appendChild(i),{suggestionContainer:t,suggestionHeaderElement:s,suggestionListElement:i}},s.prototype.renderSuggestions=function(e,t,s,i,o,r){var n=!!s;if(e&&e.length>0){var a=this.createSuggestionElement(t),p=a.suggestionContainer,l=a.suggestionHeaderElement,h=a.suggestionListElement;this.suggestionsElement=p;var d="e-suggestions "+(n?"e-suggestion-item-template":"");this.suggestionsElement.className=d,this.suggestionHeader=l;var c=h;this.renderSuggestionList(e,c,n,i,s,o,r),t&&(this.suggestionHeader.innerHTML=t),this.suggestionsElement.append(c),this.content.append(this.suggestionsElement)}},s.prototype.renderSuggestionList=function(e,s,i,o,r,n,a){var p=this,l=this.createElement("ul",{attrs:{tabindex:"-1"}});e.forEach(function(s,h){var d,c=p.createElement("li");if(t.attributes(c,{tabindex:"0"}),t.EventHandler.add(c,"click",a,p),t.EventHandler.add(c,"keydown",p.suggestionItemHandler,p),i){var m=(d={index:h},d[o]=e[parseInt(h.toString(),10)],d);p.updateContent(r,c,m,n)}else c.innerHTML=s;l.append(c)}),s.appendChild(l)},s.prototype.suggestionItemHandler=function(e){"Enter"!==e.key||e.shiftKey||this.onSuggestionClick(e)},s.prototype.renderBannerView=function(e,t,s){if(e){var i="emptyChatTemplate"===s?"e-empty-chat-template":"e-banner-view",o=this.createElement("div",{className:i});this.updateContent(e,o,{},s),t.prepend(o)}},s.prototype.updateContent=function(e,s,i,o){this.isReact&&this.clearTemplate([o]);var r=!(this.isReact||this.isVue),n=this.getTemplateFunction(e,r);"string"==typeof n?s.innerHTML=n:t.append(n(i,this),s),this.renderReactTemplates()},s.prototype.renderFooterContent=function(e,t,s,i,o,r,n){if(e)return this.updateContent(e,t,{},"footerTemplate"),null;var a=this.createElement("textarea",{className:n});return t.appendChild(a),this.renderFooter(a,s,i,o,r)},s.prototype.renderFooter=function(e,t,s,o,r){void 0===o&&(o=!1);var n=new i.TextArea({rows:r,cols:300,cssClass:r>=10?"show-scrollbar":"hide-scrollbar",placeholder:s,resizeMode:"None",value:t,showClearButton:o});return n.appendTo(e),n},s.prototype.renderSendIcon=function(e,t){var s=this.createElement("span",{attrs:{class:e,role:"button","aria-label":"Submit",tabindex:"0"}});return t.appendChild(s),s},s.prototype.appendChildren=function(e){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];e.append.apply(e,t)},s.prototype.insertBeforeChildren=function(e){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];e.prepend.apply(e,t)},s.prototype.wireFooterEvents=function(e,s,i){e&&t.EventHandler.add(e,"click",this.onSendIconClick,this),s&&!i&&t.EventHandler.add(s,"keydown",this.footerKeyHandler,this)},s.prototype.unWireFooterEvents=function(e,s,i){e&&t.EventHandler.remove(e,"click",this.onSendIconClick),s&&!i&&t.EventHandler.remove(s,"keydown",this.footerKeyHandler)},s.prototype.removeAndNullify=function(e){e&&(t.isNullOrUndefined(e.parentNode)?e.innerHTML="":t.remove(e))},s.prototype.destroyAndNullify=function(e){e&&(e.destroy(),e=null)},s.prototype.getTemplateFunction=function(e,s){if("string"==typeof e){var i="";try{var o=t.select(e);o?(i="SCRIPT"===o.tagName?o.innerHTML:o.outerHTML,s=!1):i=e}catch(t){i=e}return s?i:t.compile(i)}return t.compile(e)},s.prototype.onPropertyChanged=function(e,t){},a([t.Event()],s.prototype,"created",void 0),s=a([t.NotifyPropertyChanges],s)}(t.Component),d=function(){var e=function(t,s){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(t,s)};return function(t,s){function i(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(i.prototype=s.prototype,new i)}}(),c=function(e,t,s,i){var o,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,s,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(n=(r<3?o(n):r>3?o(t,s,n):o(t,s))||n);return r>3&&n&&Object.defineProperty(t,s,n),n},m="e-aiassist-header-text e-assist-view-header",u=function(e){function s(){return null!==e&&e.apply(this,arguments)||this}return d(s,e),c([t.Property(null)],s.prototype,"prompt",void 0),c([t.Property("")],s.prototype,"response",void 0),c([t.Property(null)],s.prototype,"isResponseHelpful",void 0),s}(t.ChildProperty);!function(e){e.Assist="Assist",e.Custom="Custom"}(e.AssistViewType||(e.AssistViewType={}));var g=function(e){function s(){return null!==e&&e.apply(this,arguments)||this}return d(s,e),c([t.Property("Assist")],s.prototype,"type",void 0),c([t.Property("")],s.prototype,"name",void 0),c([t.Property()],s.prototype,"iconCss",void 0),c([t.Property()],s.prototype,"viewTemplate",void 0),s}(t.ChildProperty),y=function(e){function s(){return null!==e&&e.apply(this,arguments)||this}return d(s,e),c([t.Property("100%")],s.prototype,"width",void 0),c([t.Collection([],p)],s.prototype,"items",void 0),c([t.Event()],s.prototype,"itemClicked",void 0),s}(t.ChildProperty),v=function(e){function s(){return null!==e&&e.apply(this,arguments)||this}return d(s,e),c([t.Property("100%")],s.prototype,"width",void 0),c([t.Collection([],p)],s.prototype,"items",void 0),c([t.Event()],s.prototype,"itemClicked",void 0),s}(t.ChildProperty),f=function(e){function i(t,s){var i=e.call(this,t,s)||this;return i.toolbarItems=[],i.displayContents=[],i.preTagElements=[],i}return d(i,e),i.prototype.preRender=function(){this.element.id||(this.element.id=t.getUniqueID("e-"+this.getModuleName()))},i.prototype.getDirective=function(){return"EJS-AIASSISTVIEW"},i.prototype.getModuleName=function(){return"aiassistview"},i.prototype.getPersistData=function(){return this.addOnPersist([])},i.prototype.render=function(){this.renderPromptView()},i.prototype.renderPromptView=function(){this.setDimension(this.element,this.width,this.height),this.renderViews(),this.renderToolbar(),this.updateTextAreaObject(),this.wireEvents()},i.prototype.renderToolbar=function(){this.updateHeaderToolbar(),this.assistViewTemplateIndex<0?this.displayContents.unshift(this.contentWrapper):this.displayContents.unshift(this.assistCustomSection),this.previousElement=this.displayContents[this.activeView],this.renderHeaderToolbar(),this.viewWrapper=this.element.querySelector(".e-view-content"),this.updateActiveView(),this.addCssClass(this.element,this.cssClass),this.updateHeader(this.showHeader,this.toolbarHeader,this.viewWrapper),this.aiAssistViewRendered=!0,this.addRtlClass(this.element,this.enableRtl)},i.prototype.renderViews=function(){this.assistViewTemplateIndex=-1,this.aiAssistViewRendered=!1,this.isAssistView=!1,this.isOutputRenderingStop=!1,this.isResponseRequested=!1,this.renderViewSections(this.element,"e-view-header","e-view-content");var e,t,s=!1,i=1;if(this.views.length>0)for(var o=0;o<this.views.length;o++)"assist"!==this.views[parseInt(o.toString(),10)].type.toLocaleLowerCase()||s?"custom"===this.views[parseInt(o.toString(),10)].type.toLocaleLowerCase()&&(t=this.createElement("div",{className:"e-customview-content-section-"+i+" e-custom-view"}),this.getContextObject("customViewTemplate",t,-1,o),this.displayContents.push(t),this.toolbarItems.push({text:this.views[parseInt(o.toString(),10)].name||"",prefixIcon:this.views[parseInt(o.toString(),10)].iconCss||"",cssClass:"e-aiassist-header-text e-custom-view-header",htmlAttributes:{"data-index":this.element.id+"_view_"+i.toString()}}),i++):(e={text:this.views[parseInt(o.toString(),10)].name||"AI Assist",prefixIcon:this.views[parseInt(o.toString(),10)].iconCss||"e-icons e-assistview-icon",cssClass:m,htmlAttributes:{"data-index":this.element.id+"_view_0"}},this.toolbarItems.unshift(e),this.views[parseInt(o.toString(),10)].viewTemplate&&(this.assistViewTemplateIndex=o),s=!0,this.isAssistView=!0);0!==this.views.length&&s||(e={text:"AI Assist",prefixIcon:"e-icons e-assistview-icon",cssClass:m,htmlAttributes:{"data-index":this.element.id+"_view_0"}},this.toolbarItems.unshift(e),s=!0),this.assistViewTemplateIndex>=0&&this.views[this.assistViewTemplateIndex].viewTemplate?(this.assistCustomSection=this.createElement("div",{attrs:{class:"e-assistview-content-section","data-index":this.element.id+"_view_0"}}),this.getContextObject("assistViewTemplate",this.assistCustomSection,-1,this.assistViewTemplateIndex)):this.renderDefaultView()},i.prototype.renderHeaderToolbar=function(){var e=this;this.toolbar=new s.Toolbar({items:this.toolbarItems,height:"100%",enableRtl:this.enableRtl,clicked:function(t){var s={item:{type:t.item.type,text:t.item.text,iconCss:t.item.prefixIcon,cssClass:t.item.cssClass,tooltip:t.item.tooltipText,template:t.item.template,disabled:t.item.disabled,visible:t.item.visible,align:t.item.align,tabIndex:t.item.tabIndex},event:t.originalEvent,cancel:!1};if(e.toolbarSettings.itemClicked&&e.toolbarSettings.itemClicked.call(e,s),!s.cancel&&t.item.htmlAttributes&&parseInt(t.item.htmlAttributes["data-index"].split(e.element.id+"_view_")[1],10)!==e.activeView){var i=e.isProtectedOnChange;e.isProtectedOnChange=!0;var o=e.getIndex(e.activeView);e.activeView=parseInt(t.item.htmlAttributes["data-index"].split(e.element.id+"_view_")[1],10),e.updateActiveView(o),e.isProtectedOnChange=i}}}),this.toolbarHeader=this.element.querySelector(".e-view-header");var t=this.createElement("div");this.toolbar.appendTo(t),this.toolbar.element.setAttribute("aria-label","assist-view-toolbar-header"),this.toolbarHeader.appendChild(t)},i.prototype.updateHeaderToolbar=function(){if(this.toolbarSettings.items.length>0){var e=this.toolbarSettings.items.map(function(e){return{type:e.type,template:e.template,disabled:e.disabled,cssClass:e.cssClass,visible:e.visible,tooltipText:e.tooltip,prefixIcon:e.iconCss,text:e.text,align:e.align}});this.toolbarItems=this.toolbarItems.concat(e)}},i.prototype.getIndex=function(e){return e>this.views.length-(this.isAssistView?1:0)||e<0?0:e},i.prototype.updateActiveView=function(e){var t=this.getIndex(this.activeView);this.aiAssistViewRendered?e!==t&&(this.removePreviousView(e,t),this.appendView(t)):(this.appendView(t),this.toolbar.tbarEle[parseInt(t.toString(),10)]&&this.toolbar.tbarEle[parseInt(t.toString(),10)].classList.add("e-active")),this.previousElement=this.displayContents[parseInt(t.toString(),10)]},i.prototype.appendView=function(e){0===e&&this.assistViewTemplateIndex<0?this.viewWrapper.append(this.contentWrapper,this.stopResponding,this.footer):0===e&&this.assistViewTemplateIndex>=0?this.viewWrapper.append(this.assistCustomSection):this.viewWrapper.append(this.displayContents[parseInt(e.toString(),10)])},i.prototype.removePreviousView=function(e,t){this.viewWrapper.removeChild(this.previousElement),0===e&&this.assistViewTemplateIndex<0&&(this.viewWrapper.removeChild(this.stopResponding),this.viewWrapper.removeChild(this.footer)),this.toolbar.tbarEle[parseInt(t.toString(),10)]&&this.toolbar.tbarEle[parseInt(t.toString(),10)].classList.add("e-active"),e>=0&&this.toolbar.tbarEle[parseInt(e.toString(),10)]&&this.toolbar.tbarEle[parseInt(e.toString(),10)].classList.remove("e-active")},i.prototype.renderDefaultView=function(){var e=this.element.querySelector(".e-view-content");this.createViewComponents(e),this.contentWrapper=this.element.querySelector(".e-views"),this.contentWrapper.setAttribute("data-index",this.element.id+"_view_0");var t=this.element.querySelector(".e-view-container");this.content=this.getElement("contentContainer"),this.footer=this.getElement("footer");var s="e-footer "+(this.footerTemplate?"e-footer-template":"");this.footer.className=s,this.renderContent(),this.renderAssistViewFooter(),this.renderBannerView(this.bannerTemplate,t,"bannerTemplate"),t.append(this.content),this.renderStopResponding()},i.prototype.renderStopResponding=function(){this.stopResponding=this.createElement("div",{attrs:{class:"e-stop-response",tabIndex:"0","aria-label":"Stop Responding",role:"button"}});var e=this.createElement("span",{className:"e-icons e-assist-stop"});this.stopRespondingContent=this.createElement("span",{className:"e-stop-response-text"}),this.l10n=new t.L10n("aiassistview",{stopResponseText:"Stop Responding"},this.locale),this.updateStopRespondingTitle(),this.appendChildren(this.stopResponding,e,this.stopRespondingContent)},i.prototype.updateStopRespondingTitle=function(){this.l10n.setLocale(this.locale),this.stopRespondingContent.textContent=this.l10n.getConstant("stopResponseText")},i.prototype.renderContent=function(){this.renderSuggestions(this.promptSuggestions,this.promptSuggestionsHeader,this.promptSuggestionItemTemplate,"promptSuggestion","promptSuggestionItemTemplate",this.onSuggestionClick),this.renderOutputContent(),this.outputElement&&this.renderSkeleton()},i.prototype.renderOutputContent=function(e){var t=this;if(this.outputElement=this.getElement("outputElement"),0===this.responseToolbarSettings.items.length){var s=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.responseToolbarSettings.items=[{iconCss:"e-icons e-assist-copy",tooltip:"Copy",cssClass:"check"},{iconCss:"e-icons e-assist-like",tooltip:"Like"},{iconCss:"e-icons e-assist-dislike",tooltip:"Dislike"}],this.isProtectedOnChange=s}this.prompts&&this.prompts.forEach(function(e,s){t.renderOutputContainer(e.prompt,e.response,s)}),this.suggestionsElement&&this.content.contains(this.suggestionsElement)?this.content.insertBefore(this.outputElement,this.suggestionsElement):this.content.appendChild(this.outputElement),e&&(this.aiAssistViewRendered=!0)},i.prototype.renderAssistViewFooter=function(){this.textareaObj=this.renderFooterContent(this.footerTemplate,this.footer,this.prompt,this.promptPlaceholder,this.showClearButton,this.getRowCount(""),"e-assist-textarea");this.footerTemplate||(this.sendIcon=this.renderSendIcon("e-assist-send e-icons disabled",this.footer)),this.textareaObj&&(this.textareaObj.input=this.handleInput.bind(this),this.activateSendIcon(this.textareaObj.value.length))},i.prototype.handleInput=function(e){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.prompt=e.value,this.isProtectedOnChange=t,this.activateSendIcon(e.value.length),this.updateTextAreaObject();var s={value:e.value,previousValue:e.previousValue,event:e.event,element:this.textareaObj.element};this.trigger("promptChanged",s)},i.prototype.updateTextAreaObject=function(){if(!t.isNullOrUndefined(this.textareaObj)){var e=this.textareaObj.element;e.style.height="auto",e.style.height=e.scrollHeight+"px"}},i.prototype.getRowCount=function(e){var t=e.split("\n").length;return t<10?t>=1?t:1:10},i.prototype.activateSendIcon=function(e){this.sendIcon.classList.toggle("disabled",0===e),this.sendIcon.classList.toggle("enabled",e>0)},i.prototype.footerKeyHandler=function(e){this.keyHandler(e,"footer")},i.prototype.stopResponseKeyHandler=function(e){this.keyHandler(e,"stopresponse")},i.prototype.wireEvents=function(){this.wireFooterEvents(this.sendIcon,this.footer,this.footerTemplate),this.stopResponding&&(t.EventHandler.add(this.stopResponding,"click",this.respondingStopper,this),t.EventHandler.add(this.stopResponding,"keydown",this.stopResponseKeyHandler,this)),t.EventHandler.add(window,"resize",this.updateTextAreaObject,this)},i.prototype.unWireEvents=function(){this.unWireFooterEvents(this.sendIcon,this.footer,this.footerTemplate),this.stopResponding&&(t.EventHandler.remove(this.stopResponding,"click",this.respondingStopper),t.EventHandler.remove(this.stopResponding,"keydown",this.stopResponseKeyHandler)),t.EventHandler.remove(window,"resize",this.updateTextAreaObject),this.detachCodeCopyEventHandler()},i.prototype.detachCodeCopyEventHandler=function(){this.preTagElements.forEach(function(e){var s=e.preTag,i=e.handler,o=s.querySelector(".e-code-copy");t.EventHandler.remove(o,"click",i)}),this.preTagElements=[]},i.prototype.keyHandler=function(e,t){if("Enter"===e.key&&!e.shiftKey)switch(t){case"footer":e.preventDefault(),this.isResponseRequested||this.onSendIconClick();break;case"stopresponse":this.respondingStopper(e)}},i.prototype.respondingStopper=function(e){this.isOutputRenderingStop=!0,this.isResponseRequested=!1,this.lastStreamPrompt="",this.outputElement.hasChildNodes&&this.element.querySelector(".e-loading-body")&&this.outputElement.removeChild(this.skeletonContainer),this.stopResponding.classList.remove("e-btn-active");var t=this.prompts?this.prompts.length-1:-1,s={event:e,prompt:t>=0?this.prompts[parseInt(t.toString(),10)].prompt:"",dataIndex:this.prompts?this.prompts.length-1:-1};this.trigger("stopRespondingClick",s)},i.prototype.onSuggestionClick=function(e){this.suggestionsElement.hidden=!0;var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.prompt=e.target.innerText,this.isProtectedOnChange=t,this.onSendIconClick()},i.prototype.onSendIconClick=function(){if(!this.isResponseRequested&&this.prompt.trim()){this.isResponseRequested=!0,this.lastStreamPrompt="",this.suggestionsElement&&(this.suggestionsElement.hidden=!0),this.isOutputRenderingStop=!1,this.stopResponding.classList.add("e-btn-active"),this.addPrompt(),this.createOutputElement();var e={cancel:!1,responseToolbarItems:this.responseToolbarSettings.items,prompt:this.prompt,promptSuggestions:this.promptSuggestions};if(!this.footerTemplate){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.prompt=this.textareaObj.value="",this.textareaObj.dataBind(),this.isProtectedOnChange=t,this.updateTextAreaObject(),this.activateSendIcon(this.textareaObj.value.length)}this.trigger("promptRequest",e),this.contentWrapper&&this.scrollToBottom()}},i.prototype.addPrompt=function(){var e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.prompts=this.prompts.concat([{prompt:this.prompt,response:"",isResponseHelpful:null}]),this.isProtectedOnChange=e},i.prototype.getContextObject=function(e,t,s,i){var o,r={},n=s>=0?s:-1,a=s>=0?this.prompts[parseInt(n.toString(),10)].prompt:"",p=s>=0?this.prompts[parseInt(n.toString(),10)].response:"";switch(e.toLowerCase()){case"promptitemtemplate":o=this.promptItemTemplate,r={prompt:a,toolbarItems:this.promptToolbarSettings.items,index:n};break;case"responseitemtemplate":o=this.responseItemTemplate,r={prompt:a,response:p,index:n,toolbarItems:this.responseToolbarSettings.items};break;case"customviewtemplate":case"assistviewtemplate":o=this.views[parseInt(i.toString(),10)].viewTemplate||""}this.updateContent(o,t,r,e)},i.prototype.createOutputElement=function(){this.outputSuggestionEle=this.createElement("div",{attrs:{id:"e-prompt-item_"+(this.prompts.length-1),class:"e-prompt-container "+(this.promptItemTemplate?"e-prompt-item-template":"")}}),this.renderPrompt(this.prompt,this.prompts.length-1),this.outputElement.append(this.outputSuggestionEle,this.skeletonContainer),this.skeletonContainer.hidden=!1},i.prototype.renderOutputContainer=function(e,t,s,i,o){var r=this.createElement("div",{attrs:{id:"e-response-item_"+s,class:"e-output-container "+(this.responseItemTemplate?"e-response-item-template":"")}});this.renderOutput(r,e,t,i,s,o),e&&this.outputElement.append(this.outputSuggestionEle),this.outputElement.append(r),this.stopResponding&&o&&this.stopResponding.classList.remove("e-btn-active"),this.isOutputRenderingStop||this.content.contains(this.suggestionsElement)||!this.suggestionsElement||this.content.append(this.suggestionsElement)},i.prototype.renderOutput=function(e,s,i,o,r,n){var a=this.createElement("span",{className:"e-output-icon e-icons "+(this.responseIconCss||this.isAssistView&&this.views[0].iconCss||"e-assistview-icon")}),p=this.createElement("div",{className:"e-output"});this.aiAssistViewRendered&&!o||t.isNullOrUndefined(s)||(this.outputSuggestionEle=this.createElement("div",{attrs:{id:"e-prompt-item_"+r,class:"e-prompt-container "+(this.promptItemTemplate?"e-prompt-item-template":"")}}),this.renderPrompt(s,r));var l={prompt:s,response:i};l.response?this.responseItemTemplate?(this.getContextObject("responseItemTemplate",p,r),this.outputElement.querySelector(".e-skeleton")&&this.outputElement.removeChild(this.skeletonContainer),this.contentFooterEle&&this.contentFooterEle.classList.remove("e-assist-toolbar-active"),this.renderOutputToolbarItems(r,n),p.append(this.contentFooterEle),e.append(p)):(this.renderOutputTextContainer(l.response,p,r,!1,n),e.append(a,p)):this.aiAssistViewRendered&&(this.outputElement.querySelector(".e-skeleton")&&this.outputElement.removeChild(this.skeletonContainer),this.suggestionsElement&&(this.suggestionsElement.hidden=!1))},i.prototype.renderOutputTextContainer=function(e,s,i,o,r){var n=this;this.contentFooterEle&&this.contentFooterEle.classList.remove("e-assist-toolbar-active"),this.outputContentBodyEle=this.createElement("div",{attrs:{class:"e-content-body",tabindex:"0"}}),o||(this.outputContentBodyEle.innerHTML=e,Array.from(this.outputContentBodyEle.querySelectorAll("pre")).forEach(function(e){var s=document.createElement("span");s.className="e-icons e-code-copy e-assist-copy",e.insertBefore(s,e.firstChild),n.preTagElements.push({preTag:e,handler:n.getCopyHandler(e)}),t.EventHandler.add(s,"click",n.preTagElements[n.preTagElements.length-1].handler)})),this.renderOutputToolbarItems(i,r),this.appendChildren(s,this.outputContentBodyEle,this.contentFooterEle)},i.prototype.getCopyHandler=function(e){return function(){var t=e.innerText;window.navigator.clipboard.writeText(t);var s=e.querySelector(".e-code-copy");s.className="e-icons e-code-copy e-assist-check",setTimeout(function(){s.className="e-icons e-code-copy e-assist-copy"},1e3)}},i.prototype.renderOutputToolbarItems=function(e,t){this.contentFooterEle=this.createElement("div",{className:"e-content-footer e-assist-toolbar-active"});var s=this.createElement("div");this.renderResponseToolbar(e),this.aiAssistViewRendered&&(this.outputElement.querySelector(".e-skeleton")&&this.outputElement.removeChild(this.skeletonContainer),t&&this.suggestionsElement&&(this.suggestionsElement.hidden=!1)),this.responseToolbarEle.appendTo(s),this.responseToolbarEle.element.setAttribute("aria-label","response-toolbar-"+e),this.contentFooterEle.appendChild(s)},i.prototype.renderResponseToolbar=function(e){var t=this,i=this.responseToolbarSettings.items.map(function(s){var i={type:s.type,visible:s.visible,disabled:s.disabled,tooltipText:s.tooltip,template:s.template,prefixIcon:s.iconCss,text:s.text,cssClass:s.cssClass,align:s.align,width:t.responseToolbarSettings.width};return"e-icons e-assist-like"===i.prefixIcon&&t.prompts[parseInt(e.toString(),10)].isResponseHelpful?i.prefixIcon="e-icons e-assist-like-filled":"e-icons e-assist-dislike"===i.prefixIcon&&!1===t.prompts[parseInt(e.toString(),10)].isResponseHelpful&&(i.prefixIcon="e-icons e-assist-dislike-filled"),i});this.responseToolbarEle=new s.Toolbar({items:i,clicked:function(s){var i={item:{type:s.item.type,text:s.item.text,iconCss:s.item.prefixIcon,cssClass:s.item.cssClass,tooltip:s.item.tooltipText,template:s.item.template,disabled:s.item.disabled,visible:s.item.visible,align:s.item.align,tabIndex:s.item.tabIndex},event:s.originalEvent,cancel:!1,dataIndex:e};t.responseToolbarSettings.itemClicked&&t.responseToolbarSettings.itemClicked.call(t,i),i.cancel||t.handleItemClick(s,e)}})},i.prototype.getClipBoardContent=function(e){var t=document.createElement("div");t.innerHTML=e,t.style.top="0",t.style.left="0",t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([t.innerHTML],{type:"text/html"}),"text/plain":new Blob([t.innerText],{type:"text/plain"})})]),document.body.removeChild(t)},i.prototype.handleItemClick=function(e,t){var s=this;e.item.controlParent.element.querySelector(".e-assist-dislike"),"e-icons e-assist-copy"===e.item.prefixIcon&&(this.getClipBoardContent(this.prompts[parseInt(t.toString(),10)].response),e.item.prefixIcon="e-icons e-assist-check",this.responseToolbarEle.dataBind(),setTimeout(function(){e.item.prefixIcon="e-icons e-assist-copy",s.responseToolbarEle.dataBind()},1e3));var i=e.item.prefixIcon,o="e-icons e-assist-like-filled"===i||"e-icons e-assist-like"===i,r="e-icons e-assist-dislike-filled"===i||"e-icons e-assist-dislike"===i;if(o||r){var n=null;o?n=!0!==this.prompts[parseInt(t.toString(),10)].isResponseHelpful||null:r&&(n=!1===this.prompts[parseInt(t.toString(),10)].isResponseHelpful&&null);var a=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.prompts[parseInt(t.toString(),10)].isResponseHelpful=n;var p=this.prompts[parseInt(t.toString(),10)],l=e.item.controlParent.items;o?!0===p.isResponseHelpful?(e.item.prefixIcon="e-icons e-assist-like-filled",l&&l.length>2&&(l[2].prefixIcon="e-icons e-assist-dislike")):e.item.prefixIcon="e-icons e-assist-like":r&&(!1===p.isResponseHelpful?(e.item.prefixIcon="e-icons e-assist-dislike-filled",l&&l.length>1&&(l[1].prefixIcon="e-icons e-assist-like")):e.item.prefixIcon="e-icons e-assist-dislike"),this.responseToolbarEle.dataBind(),this.isProtectedOnChange=a}},i.prototype.renderPrompt=function(e,t){var s=this.createElement("div",{attrs:{class:"e-prompt-text",tabindex:"0"}}),i=this.createElement("div",{className:"e-prompt-content"}),o=this.createElement("div",{className:"e-prompt-toolbar"}),r=this.createElement("div"),n=this.createElement("span",{className:this.promptIconCss?"e-prompt-icon e-icons "+this.promptIconCss:""});this.promptItemTemplate?this.getContextObject("promptItemTemplate",this.outputSuggestionEle,t):(s.innerHTML=e,this.appendChildren(i,s),this.promptIconCss&&i.appendChild(n),this.outputSuggestionEle.append(i)),this.renderPromptToolbar(r,t),o.append(r),this.appendChildren(this.outputSuggestionEle,o)},i.prototype.renderPromptToolbar=function(e,t){var i=this,o=[];if(0===this.promptToolbarSettings.items.length){o=[{prefixIcon:"e-icons e-assist-edit",tooltipText:"Edit"},{prefixIcon:"e-icons e-assist-copy",tooltipText:"Copy"}];var r=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.promptToolbarSettings.items=[{iconCss:"e-icons e-assist-edit",tooltip:"Edit"},{iconCss:"e-icons e-assist-copy",tooltip:"Copy"}],this.isProtectedOnChange=r}else o=this.promptToolbarSettings.items.map(function(e){return{type:e.type,template:e.template,disabled:e.disabled,cssClass:e.cssClass,visible:e.visible,tooltipText:e.tooltip,prefixIcon:e.iconCss,text:e.text,align:e.align,width:i.promptToolbarSettings.width}});this.promptToolbarEle=new s.Toolbar({items:o,clicked:function(e){var s={item:{type:e.item.type,text:e.item.text,iconCss:e.item.prefixIcon,cssClass:e.item.cssClass,tooltip:e.item.tooltipText,template:e.item.template,disabled:e.item.disabled,visible:e.item.visible,align:e.item.align,tabIndex:e.item.tabIndex},event:e.originalEvent,cancel:!1,dataIndex:t};i.promptToolbarSettings.itemClicked&&i.promptToolbarSettings.itemClicked.call(i,s),s.cancel||("e-icons e-assist-edit"===e.item.prefixIcon&&i.onEditIconClick(t),"e-icons e-assist-copy"===e.item.prefixIcon&&(i.getClipBoardContent(i.prompts[parseInt(t.toString(),10)].prompt),e.item.prefixIcon="e-icons e-assist-check",i.promptToolbarEle.dataBind(),setTimeout(function(){e.item.prefixIcon="e-icons e-assist-copy",i.promptToolbarEle.dataBind()},1e3)))}}),this.promptToolbarEle.appendTo(e),this.promptToolbarEle.element.setAttribute("aria-label","prompt-toolbar-"+t)},i.prototype.renderSkeleton=function(){this.skeletonContainer=this.createElement("div",{className:"e-output-container"});var e=this.createElement("div",{className:"e-output",styles:"width: 70%;"}),t=this.createElement("span",{className:"e-output-icon e-skeleton e-skeleton-text e-shimmer-wave"}),s=this.createElement("div",{className:"e-loading-body"}),i=this.createElement("div",{className:"e-loading-footer"}),o=[this.createElement("div",{className:"e-skeleton e-skeleton-text e-shimmer-wave",styles:"width: 100%; height: 15px;"}),this.createElement("div",{className:"e-skeleton e-skeleton-text e-shimmer-wave",styles:"width: 75%; height: 15px;"}),this.createElement("div",{className:"e-skeleton e-skeleton-text e-shimmer-wave",styles:"width: 50%; height: 15px;"})],r=o[0],n=o[1],a=o[2],p=[this.createElement("div",{className:"e-skeleton e-skeleton-text e-shimmer-wave",styles:"width: 100%; height: 30px;"})][0];this.appendChildren(s,r,n,a),i.append(p),this.appendChildren(e,s,i),this.appendChildren(this.skeletonContainer,t,e)},i.prototype.onEditIconClick=function(e){if(this.textareaObj){this.suggestionsElement&&(this.suggestionsElement.hidden=!0);var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.textareaObj.value=this.prompt=this.prompts[parseInt(e.toString(),10)].prompt,this.textareaObj.dataBind(),this.updateTextAreaObject(),this.textareaObj.focusIn(),this.isProtectedOnChange=t,this.activateSendIcon(this.prompt.length)}},i.prototype.updateIcons=function(e,s){void 0===s&&(s=!1);var i;this.outputElement&&(s?(e="e-prompt-icon e-icons "+e,i=this.outputElement.querySelectorAll(".e-prompt-icon")):(e=" e-output-icon e-icons "+e,i=this.outputElement.querySelectorAll(".e-output-icon")));for(var o=0;o<(i&&i.length);o++)t.removeClass([i[parseInt(o.toString(),10)]],i[parseInt(o.toString(),10)].classList.toString().trim().split(" ")),t.addClass([i[parseInt(o.toString(),10)]],e.trim().split(" "))},i.prototype.updateToolbarSettings=function(e){for(var t=this.views.length;t<this.toolbarItems.length;t++)e.items[parseInt((0).toString(),10)]===this.toolbarItems[parseInt(t.toString(),10)]&&this.toolbarItems.splice(t,1);this.updateHeaderToolbar(),this.toolbar.items=this.toolbarItems},i.prototype.updateResponse=function(e,t,s,i){if(!this.responseItemTemplate&&i){var o=i.querySelector(".e-content-body");o&&(o.innerHTML=e)}else this.renderOutputContainer(void 0,e,t,!1,s)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.unWireEvents(),this.destroyAndNullify(this.textareaObj),this.destroyAndNullify(this.responseToolbarEle),this.destroyAndNullify(this.promptToolbarEle),this.destroyAndNullify(this.toolbar),this.destroyAssistView(),t.remove(this.viewWrapper),this.viewWrapper=null,this.aiAssistViewRendered=null,this.assistViewTemplateIndex=null,this.toolbarItems=[],this.displayContents=[],this.isOutputRenderingStop=null,this.isResponseRequested=null,this.suggestionHeader=null,this.previousElement=null,this.assistCustomSection=null,this.preTagElements=[],this.toolbarSettings=this.promptToolbarSettings=this.responseToolbarSettings={},this.cssClass&&t.removeClass([this.element],this.cssClass.split(" ")),this.element.classList.remove("e-rtl")},i.prototype.destroyAssistView=function(){for(var e=0,t=["toolbarHeader","sendIcon","suggestions","skeletonContainer","outputElement","outputSuggestionEle","contentFooterEle","footer","assistCustomSection","content","stopRespondingContent","stopResponding","contentWrapper"];e<t.length;e++){var s=t[e];this.removeAndNullify(this[s]),this[s]=null}},i.prototype.executePrompt=function(e){if(!t.isNullOrUndefined(e)&&e.trim().length>0){var s=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.prompt=e,this.isProtectedOnChange=s,this.onSendIconClick()}},i.prototype.addPromptResponse=function(e,s){void 0===s&&(s=!0);var i=this.isProtectedOnChange;if(this.isProtectedOnChange=!0,!this.isOutputRenderingStop){var o=this.element.querySelector("#e-response-item_"+(this.prompts.length-1)),r=this.prompts[this.prompts.length-1];if("string"==typeof e&&(this.isResponseRequested||(this.prompts=this.prompts.concat([{prompt:null,response:null,isResponseHelpful:null}]),r=this.prompts[this.prompts.length-1]),r.response=e,this.updateResponse(r.response,this.prompts.length-1,s,o)),"object"==typeof e){var n={prompt:e.prompt,response:e.response,isResponseHelpful:t.isNullOrUndefined(e.isResponseHelpful)?null:e.isResponseHelpful};this.prompt===n.prompt||this.lastStreamPrompt===n.prompt?(r.response=n.response,r.isResponseHelpful=n.isResponseHelpful,this.updateResponse(r.response,this.prompts.length-1,s,o)):(this.prompts=this.prompts.concat([n]),this.renderOutputContainer(n.prompt,n.response,this.prompts.length-1,!0,s)),s||(this.lastStreamPrompt=n.prompt)}s&&this.stopResponding&&this.stopResponding.classList.remove("e-btn-active"),this.isResponseRequested=!s}this.isProtectedOnChange=i},i.prototype.scrollToBottom=function(){this.updateScroll(this.contentWrapper)},i.prototype.onPropertyChanged=function(e,s){for(var i=0,o=Object.keys(e);i<o.length;i++)switch(o[i]){case"width":case"height":this.setDimension(this.element,this.width,this.height);break;case"cssClass":this.updateCssClass(this.element,e.cssClass,s.cssClass);break;case"promptIconCss":this.updateIcons(e.promptIconCss,!0);break;case"responseIconCss":this.updateIcons(e.responseIconCss);break;case"showHeader":this.updateHeader(this.showHeader,this.toolbarHeader,this.viewWrapper);break;case"promptSuggestions":this.suggestionsElement&&this.suggestionsElement.remove(),this.isOutputRenderingStop||this.renderSuggestions(this.promptSuggestions,this.promptSuggestionsHeader,this.promptSuggestionItemTemplate,"promptSuggestion","promptSuggestionItemTemplate",this.onSuggestionClick);break;case"showClearButton":this.textareaObj.showClearButton=this.showClearButton;break;case"promptPlaceholder":this.textareaObj.placeholder=this.promptPlaceholder;break;case"promptSuggestionsHeader":this.suggestionHeader.innerHTML=this.promptSuggestionsHeader,this.element.querySelector(".e-suggestions .e-suggestion-header")||this.suggestionsElement.append(this.suggestionHeader);break;case"activeView":var r=this.getIndex(s.activeView);this.updateActiveView(r);break;case"enableRtl":this.element.classList[this.enableRtl?"add":"remove"]("e-rtl"),t.isNullOrUndefined(this.toolbar)||(this.toolbar.enableRtl=this.enableRtl,this.toolbar.dataBind());break;case"toolbarSettings":this.updateToolbarSettings(s.toolbarSettings);break;case"promptToolbarSettings":case"responseToolbarSettings":case"prompts":this.isOutputRenderingStop=!1,this.outputElement&&t.remove(this.outputElement),this.stopResponding&&this.stopResponding.classList.remove("e-btn-active"),this.aiAssistViewRendered=!1,this.renderOutputContent(!0),this.detachCodeCopyEventHandler();break;case"prompt":this.footerTemplate||(this.textareaObj.value=this.prompt,this.textareaObj.dataBind(),this.updateTextAreaObject());break;case"locale":this.assistViewTemplateIndex<0&&this.updateStopRespondingTitle()}},c([t.Property("")],i.prototype,"prompt",void 0),c([t.Property("Type prompt for assistance...")],i.prototype,"promptPlaceholder",void 0),c([t.Collection([],u)],i.prototype,"prompts",void 0),c([t.Property([])],i.prototype,"promptSuggestions",void 0),c([t.Property("")],i.prototype,"promptSuggestionsHeader",void 0),c([t.Property(!0)],i.prototype,"showHeader",void 0),c([t.Complex({items:[]},l)],i.prototype,"toolbarSettings",void 0),c([t.Property(0)],i.prototype,"activeView",void 0),c([t.Property(null)],i.prototype,"promptIconCss",void 0),c([t.Property(null)],i.prototype,"responseIconCss",void 0),c([t.Property("100%")],i.prototype,"width",void 0),c([t.Property("100%")],i.prototype,"height",void 0),c([t.Property("")],i.prototype,"cssClass",void 0),c([t.Collection([],g)],i.prototype,"views",void 0),c([t.Complex({width:null,items:[]},y)],i.prototype,"promptToolbarSettings",void 0),c([t.Complex({width:null,items:[]},v)],i.prototype,"responseToolbarSettings",void 0),c([t.Property(!1)],i.prototype,"showClearButton",void 0),c([t.Property("")],i.prototype,"footerTemplate",void 0),c([t.Property("")],i.prototype,"promptItemTemplate",void 0),c([t.Property("")],i.prototype,"responseItemTemplate",void 0),c([t.Property("")],i.prototype,"promptSuggestionItemTemplate",void 0),c([t.Property("")],i.prototype,"bannerTemplate",void 0),c([t.Event()],i.prototype,"promptRequest",void 0),c([t.Event()],i.prototype,"promptChanged",void 0),c([t.Event()],i.prototype,"stopRespondingClick",void 0),i=c([t.NotifyPropertyChanges],i)}(h),C=function(){var e=function(t,s){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(t,s)};return function(t,s){function i(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(i.prototype=s.prototype,new i)}}(),b=function(){return(b=Object.assign||function(e){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)},T=function(e,t,s,i){var o,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,s,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(n=(r<3?o(n):r>3?o(t,s,n):o(t,s))||n);return r>3&&n&&Object.defineProperty(t,s,n),n},w=function(e){function s(){return null!==e&&e.apply(this,arguments)||this}return C(s,e),T([t.Property("")],s.prototype,"iconCss",void 0),T([t.Property("")],s.prototype,"text",void 0),T([t.Property("")],s.prototype,"tooltip",void 0),s}(t.ChildProperty),S=function(e){function s(){return null!==e&&e.apply(this,arguments)||this}return C(s,e),T([t.Property("")],s.prototype,"id",void 0),T([t.Property("Default")],s.prototype,"user",void 0),T([t.Property("")],s.prototype,"avatarUrl",void 0),T([t.Property("")],s.prototype,"avatarBgColor",void 0),T([t.Property("")],s.prototype,"cssClass",void 0),s}(t.ChildProperty),E=function(e){function s(){return null!==e&&e.apply(this,arguments)||this}return C(s,e),T([t.Property("")],s.prototype,"id",void 0),T([t.Property("")],s.prototype,"text",void 0),T([t.Complex({},S)],s.prototype,"author",void 0),T([t.Property("")],s.prototype,"timeStamp",void 0),T([t.Property("")],s.prototype,"timeStampFormat",void 0),T([t.Complex({},w)],s.prototype,"status",void 0),s}(t.ChildProperty),I=function(e){function i(t,s){var i=e.call(this,t,s)||this;return i.multiplier=3,i}return C(i,e),i.prototype.preRender=function(){this.element.id||(this.element.id=t.getUniqueID("e-"+this.getModuleName()))},i.prototype.getDirective=function(){return"EJS-CHATUI"},i.prototype.getModuleName=function(){return"chat-ui"},i.prototype.getPersistData=function(){return this.addOnPersist([])},i.prototype.render=function(){this.renderChatUIView()},i.prototype.renderChatUIView=function(){this.intl=new t.Internationalization,this.setDimension(this.element,this.width,this.height),this.renderViewSections(this.element,"e-chat-header","e-chat-content"),this.viewWrapper=this.element.querySelector(".e-chat-content"),this.chatHeader=this.element.querySelector(".e-chat-header"),this.renderChatHeader(),this.renderChatContentElement(),this.renderChatSuggestionsElement(),this.renderChatFooterContent(),this.addCssClass(this.element,this.cssClass),this.addRtlClass(this.element,this.enableRtl),this.updateHeader(this.showHeader,this.chatHeader,this.viewWrapper),(t.isNullOrUndefined(this.messages)||this.messages.length<=0)&&(this.renderBannerView(this.emptyChatTemplate,this.messageWrapper,"emptyChatTemplate"),this.isEmptyChatTemplateRendered=!t.isNullOrUndefined(this.messageWrapper.querySelector(".e-empty-chat-template"))),this.wireEvents(),this.renderTypingIndicator(),this.updateScrollPosition(!1,0)},i.prototype.updateScrollPosition=function(e,t){var s=this;this.isReact||this.isAngular?setTimeout(function(){e?s.handleAutoScroll():s.scrollToBottom()},t):this.scrollToBottom()},i.prototype.renderChatHeader=function(){if(this.headerText){var e=this.createElement("div",{className:"e-header"});if(this.headerIconCss){var t=this.createElement("span",{className:"e-header-icon e-icons "+this.headerIconCss});e.appendChild(t)}var s=this.createElement("div",{className:"e-header-text"});s.innerHTML=this.headerText,e.appendChild(s),this.chatHeader.appendChild(e),this.renderChatHeaderToolbar(e)}},i.prototype.renderChatHeaderToolbar=function(e){var i=this;if(!t.isNullOrUndefined(this.headerToolbar)&&this.headerToolbar.items.length>0){var o=this.createElement("div",{className:"e-chat-toolbar"}),r=this.headerToolbar.items.map(function(e){return{type:e.type,template:e.template,disabled:e.disabled,cssClass:e.cssClass,visible:e.visible,tooltipText:e.tooltip,prefixIcon:e.iconCss,text:e.text,align:e.align}});this.toolbar=new s.Toolbar({items:r,height:"100%",enableRtl:this.enableRtl,clicked:function(e){var t={item:{type:e.item.type,text:e.item.text,iconCss:e.item.prefixIcon,cssClass:e.item.cssClass,tooltip:e.item.tooltipText,template:e.item.template,disabled:e.item.disabled,visible:e.item.visible,align:e.item.align,tabIndex:e.item.tabIndex},event:e.originalEvent,cancel:!1};i.headerToolbar.itemClicked&&i.headerToolbar.itemClicked.call(i,t)}}),this.toolbar.appendTo(o),e.appendChild(o)}},i.prototype.updateHeaderToolbar=function(){var e=this.chatHeader.querySelector(".e-header");if(t.isNullOrUndefined(this.toolbar))this.renderChatHeaderToolbar(e);else{var s=this.headerToolbar.items.map(function(e){return{type:e.type,template:e.template,disabled:e.disabled,cssClass:e.cssClass,visible:e.visible,tooltipText:e.tooltip,prefixIcon:e.iconCss,text:e.text,align:e.align}});this.toolbar.items=s}},i.prototype.renderChatContentElement=function(){this.messageWrapper=this.createElement("div",{className:"e-message-wrapper",attrs:{tabindex:"0"}}),this.viewWrapper.prepend(this.messageWrapper),this.content=this.createElement("div",{className:"e-typing-suggestions"}),this.viewWrapper.append(this.content),this.renderScrollDown(),this.setChatMsgId(),this.renderMessageGroup(this.messageWrapper)},i.prototype.setChatMsgId=function(){var e=this;if(this.messages&&this.messages.length>0){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.messages=this.messages.map(function(t,s){return b({},t,{id:t.id||e.element.id+"-message-"+(s+1)})}),this.isProtectedOnChange=t}},i.prototype.renderScrollDown=function(){var e=this.createElement("button",{id:"scrollDownButton"});this.downArrowIcon=new r.Fab({iconCss:"e-icons e-chat-scroll-down",position:"BottomRight",target:this.content,isPrimary:!1}),this.downArrowIcon.appendTo(e)},i.prototype.loadBatch=function(){for(var e=this.startIndex-1;e>=0;e--){var t=e,s=e===this.messages.length-1?-1:t+1;this.updateMessageTimeFormats(this.messages[parseInt(e.toString(),10)],t);var i=this.getMessageDate(t);if(i.setHours(0,0,0,0),Math.min(t,s)>=0){var o=this.getMessageDate(s);if(o.setHours(0,0,0,0),i.getTime()===o.getTime()){var r=this.messageWrapper.querySelectorAll(".e-timebreak")[0];r&&r.remove()}}this.renderGroup(this.messageWrapper,this.messages[parseInt(e.toString(),10)],!0,t,s),this.showTimeBreak&&this.messageWrapper.prepend(this.createTimebreakElement(i));var n=window.innerHeight*this.multiplier;if(this.startIndex=e,this.messageWrapper.scrollHeight>n)break}},i.prototype.renderMessageGroup=function(e){var t=this;if(this.loadOnDemand){if(this.messages&&this.messages.length<=0)return;o.createSpinner({target:this.messageWrapper}),this.startIndex=this.messages.length,this.loadBatch()}else this.messages.forEach(function(s,i){t.renderGroup(e,s,!1,i,i-1)})},i.prototype.isTimeBreakAdded=function(e,t){return t?e.firstElementChild.classList.contains("e-timebreak"):e.lastElementChild.classList.contains("e-timebreak")},i.prototype.getLastUser=function(e){return e>=0?this.messages[parseInt(e.toString(),10)].author.id:""},i.prototype.renderGroup=function(e,t,s,i,o){var r;if(s||(this.updateMessageTimeFormats(t,i),this.handleTimeBreak(o,i,s)),t.author.id===this.user.id){var n=this.showTimeBreak&&this.isTimeBreakAdded(e,s);if(t.author.id!==this.getLastUser(o)||n)r=this.createElement("div",{className:"e-message-group e-right "+(this.messageTemplate?"e-message-item-template":"")}),this.manageChatContent(s,e,r),this.addGroupItems(t,r,!1,!0,i,s);else{var a=this.element.querySelectorAll(".e-message-group.e-right").length;r=this.element.querySelectorAll(".e-message-group.e-right")[s?0:a-1],this.addGroupItems(t,r,!1,!0,i,s)}}else if(this.getLastUser(o)!==t.author.id||this.isTimeVaries(i,o)){r=this.createElement("div",{className:"e-message-group e-left "+(this.messageTemplate?"e-message-item-template":"")});var p=this.createAvatarIcon(t.author,!1);this.messageTemplate||r.prepend(p),this.manageChatContent(s,e,r),this.loadOnDemand?this.loadLeftGroupOnDemand(t,s,i,r):(this.createLeftGroupItems(r,t,i),this.addGroupItems(t,r,!0,!1,i,s))}else{var l=this.element.querySelectorAll(".e-message-group.e-left").length;r=this.element.querySelectorAll(".e-message-group.e-left")[s?0:l-1],s?this.loadLeftGroupOnDemand(t,s,i,r):this.addGroupItems(t,r,!1,!1,i,s)}},i.prototype.isTimeVaries=function(e,t){var s=this.getMessageDate(e);s.setHours(0,0,0,0);var i=this.getMessageDate(t);return i.setHours(0,0,0,0),s.getTime()!==i.getTime()},i.prototype.loadLeftGroupOnDemand=function(e,t,s,i){(!!this.messages[parseInt((s-1).toString(),10)]?this.messages[parseInt((s-1).toString(),10)].author.id:"")!==e.author.id||this.isTimeVaries(s,s-1)?(this.addGroupItems(e,i,!0,!1,s,t),this.createLeftGroupItems(i,e,s)):this.addGroupItems(e,i,!1,!1,s,t)},i.prototype.createLeftGroupItems=function(e,t,s){if(!this.messageTemplate){var i=this.createElement("div",{className:"e-message-header-container"}),o=this.createElement("div",{className:"e-message-header"});o.innerHTML=t.author.user;var r=this.getTimeStampElement(t.timeStamp?t.timeStamp:new Date,t.timeStampFormat,s);this.appendChildren(i,o,r),this.insertBeforeChildren(e,i)}},i.prototype.createAvatarIcon=function(e,s){var i=e.user.trim(),o=i.split(" "),r=o.length>1?""+o[0][0]+o[o.length-1][0]:i[0],n=this.createElement(t.isNullOrUndefined(e.avatarUrl)||""===e.avatarUrl?"span":"img",{className:" "+(s?"e-user-icon":"e-message-icon")+" "+e.cssClass});return e.avatarBgColor&&(n.style.backgroundColor=e.avatarBgColor),t.isNullOrUndefined(e.avatarUrl)||""===e.avatarUrl?n.innerHTML=r:(n.src=e.avatarUrl,n.alt=i),n},i.prototype.getTimeStampElement=function(e,t,s){var i=this.getFormattedTime(e,t);return this.createElement("div",{className:"e-time",innerHTML:this.showTimeStamp?i:""})},i.prototype.updateTimeFormats=function(e,t,s){if(this.messages[parseInt(s.toString(),10)]){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.messages[parseInt(s.toString(),10)].timeStamp=this.intl.parseDate(t,{format:"dd/MM/yyyy hh:mm a"}),this.messages[parseInt(s.toString(),10)].timeStampFormat=e,this.isProtectedOnChange=i}},i.prototype.getFormattedTime=function(e,t){return e="string"==typeof e?new Date(e):e,this.intl.formatDate(e,{format:this.getFormat(t)})},i.prototype.getFormat=function(e){return!t.isNullOrUndefined(e)&&e.length>0?e:!t.isNullOrUndefined(this.timeStampFormat)&&this.timeStampFormat.length?this.timeStampFormat:"dd/MM/yyyy hh:mm a"},i.prototype.addGroupItems=function(e,t,s,i,o,r){var n=this.createElement("div",{className:"e-message-item",id:""+e.id}),a=this.createElement("div",{className:"e-status-wrapper"}),p=this.getTimeStampElement(e.timeStamp?e.timeStamp:new Date,e.timeStampFormat,o),l=this.createElement("div",{className:"e-text",innerHTML:e.text});if(this.messageTemplate)this.getContextObject("messageTemplate",t,o,e);else{if(s||n.appendChild(p),i){var h=this.createElement("div",{className:"e-status-item"}),d=this.createElement("span",{attrs:{class:"e-status-icon "+(e.status?e.status.iconCss:""),title:""+(e.status?e.status.tooltip:"")}}),c=this.createElement("div",{innerHTML:e.status?e.status.text:"",className:"e-status-text"});this.appendChildren(h,l,d),this.appendChildren(a,h,c),n.appendChild(a)}else n.appendChild(l);this.manageChatContent(r,t,n)}},i.prototype.manageChatContent=function(e,t,s){e?t.prepend(s):t.appendChild(s)},i.prototype.createTimebreakElement=function(e){var t=this.createElement("div",{className:"e-timebreak "+(this.timeBreakTemplate?"e-timebreak-template":"")}),s=this.getFormattedTime(e,"MMMM d, yyyy");if(this.timeBreakTemplate)this.getContextObject("timeBreakTemplate",t,null,null,e);else{var i=this.createElement("span",{className:"e-timestamp"});i.innerHTML=s,t.appendChild(i)}return t},i.prototype.handleTimeBreak=function(e,t,s){if(this.showTimeBreak){var i=this.getMessageDate(t);if(i.setHours(0,0,0,0),-1===e)this.messageWrapper.appendChild(this.createTimebreakElement(i));else if(t>0){var o=this.getMessageDate(e);o.setHours(0,0,0,0),i.getTime()===o.getTime()||s||this.messageWrapper.appendChild(this.createTimebreakElement(i))}}},i.prototype.renderNewMessage=function(e,t){if(this.isEmptyChatTemplateRendered){var s=this.messageWrapper.querySelector(".e-empty-chat-template");this.messageWrapper.removeChild(s),this.isEmptyChatTemplateRendered=!1}this.renderGroup(this.messageWrapper,e,!1,t,t-1)},i.prototype.loadMoreMessages=function(){var e=this;if(!(this.startIndex<=0)){var t=this.messageWrapper.scrollHeight-this.messageWrapper.scrollTop;o.showSpinner(this.messageWrapper),setTimeout(function(){o.hideSpinner(e.messageWrapper),e.loadBatch(),e.messageWrapper.scrollTop=e.messageWrapper.scrollHeight-t},1e3)}},i.prototype.updateMessageTimeFormats=function(e,t){var s=this.getFormattedTime(e.timeStamp?e.timeStamp:new Date,"dd/MM/yyyy hh:mm a");this.updateTimeFormats(e.timeStampFormat,s,t)},i.prototype.getMessageDate=function(e){return new Date(this.messages[parseInt(e.toString(),10)].timeStamp)},i.prototype.renderChatSuggestionsElement=function(){!t.isNullOrUndefined(this.suggestions)&&this.suggestions.length>0&&this.renderSuggestions(this.suggestions,null,this.suggestionTemplate,"suggestion","suggestionTemplate",this.onSuggestionClick)},i.prototype.handleSuggestionUpdate=function(){this.suggestionsElement&&this.suggestionsElement.remove(),!t.isNullOrUndefined(this.suggestions)&&this.suggestions.length>0&&this.renderSuggestions(this.suggestions,null,this.suggestionTemplate,"suggestion","suggestionTemplate",this.onSuggestionClick),this.toggleScrollIcon()},i.prototype.onSuggestionClick=function(e){this.suggestionsElement.hidden=!0,this.textareaObj.value=e.target.innerText,this.onSendIconClick(e)},i.prototype.renderChatFooterContent=function(){this.footer=this.getElement("footer");var e="e-footer "+(this.footerTemplate?"e-footer-template":"");this.footer.className=e,this.renderChatFooter(),this.viewWrapper.append(this.footer),this.updateFooter(this.showFooter,this.footer)},i.prototype.renderChatFooter=function(){var e=this;this.textareaObj=this.renderFooterContent(this.footerTemplate,this.footer,"",this.placeholder,!1,this.getRowCount(""),"e-chat-textarea");this.footerTemplate||(this.sendIcon=this.renderSendIcon("e-chat-send e-icons disabled",this.footer)),this.textareaObj&&(this.textareaObj.input=this.handleInput.bind(this),this.textareaObj.blur=function(t){return e.triggerUserTyping(t.event,t.value)},t.isNullOrUndefined(this.textareaObj.value)||this.activateSendIcon(this.textareaObj.value.length))},i.prototype.handleInput=function(e){this.triggerUserTyping(e.event,e.value),this.activateSendIcon(e.value.length),this.updateTextAreaObject(e.value)},i.prototype.triggerUserTyping=function(e,t){var s={event:e,message:t,user:this.user,isTyping:"blur"!==e.type&&t.length>0};this.trigger("userTyping",s)},i.prototype.renderTypingIndicator=function(){var e=this;if(this.l10n=new t.L10n("chat-ui",{oneUserTyping:"{0} is typing",twoUserTyping:"{0} and {1} are typing",threeUserTyping:"{0}, {1}, and {2} other are typing",multipleUsersTyping:"{0}, {1}, and {2} others are typing"},this.locale),this.indicatorWrapper&&this.indicatorWrapper.remove(),this.typingUsers&&0!==this.typingUsers.length){if(this.indicatorWrapper=this.createElement("div",{className:"e-typing-indicator "+(this.typingUsersTemplate?"e-typing-indicator-template":"")}),this.typingUsersTemplate)this.getContextObject("typingUsersTemplate",this.indicatorWrapper,null,null,null);else{this.typingUsers.slice(0,3).forEach(function(t){var s=e.createAvatarIcon(t,!0);e.indicatorWrapper.appendChild(s)});var s=this.createElement("span",{className:"e-user-text"});this.indicatorWrapper.appendChild(s),this.updateUserText();for(var i=this.createElement("div",{className:"e-indicator-wrapper"}),o=0;o<3;o++){var r=this.createElement("span",{className:"e-indicator"});this.appendChildren(i,r)}this.indicatorWrapper.appendChild(i)}this.content.prepend(this.indicatorWrapper)}},i.prototype.updateUserText=function(){var e=this;if(!this.typingUsersTemplate){this.l10n.setLocale(this.locale);var t=this.typingUsers.filter(function(t){return t.user!==e.user.user}).map(function(e){return e.user}),s=this.getTypingMessage(t);this.indicatorWrapper.querySelector(".e-user-text").innerHTML=s}},i.prototype.getTypingMessage=function(e){if(e.length>=3)return this.l10n.getConstant(e.length>3?"multipleUsersTyping":"threeUserTyping").replace("{0}",e[0].toString()).replace("{1}",e[1].toString()).replace("{2}",(e.length-2).toString());var t=this.l10n.getConstant(2===e.length?"twoUserTyping":"oneUserTyping");return 2===e.length?t.replace("{0}",e[0].toString()).replace("{1}",e[1].toString()):t.replace("{0}",e[0].toString())},i.prototype.updateTypingUsers=function(e){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.typingUsers=e,this.isProtectedOnChange=t,this.renderTypingIndicator()},i.prototype.updateTextAreaObject=function(e){var t=this.getRowCount(e);this.textareaObj.rows=t,this.textareaObj.cssClass=t>=10?"show-scrollbar":"hide-scrollbar"},i.prototype.getRowCount=function(e){var t=e.split("\n").length;return t<10?t>=1?t:1:10},i.prototype.activateSendIcon=function(e){this.sendIcon.classList.toggle("disabled",0===e),this.sendIcon.classList.toggle("enabled",e>0)},i.prototype.updateHeaderIcon=function(){var e=this.element.querySelector(".e-header-icon");if(e)e.className="e-header-icon e-icons "+this.headerIconCss;else{var t=this.element.querySelector(".e-header");if(t){var s=this.createElement("span",{className:"e-header-icon e-icons "+this.headerIconCss});t.prepend(s)}}},i.prototype.updateHeaderText=function(){if(this.headerText){var e=this.element.querySelector(".e-header-text");e&&(e.innerHTML=this.headerText)}},i.prototype.renderUpdatedMessage=function(){this.messageWrapper.innerHTML="",this.setChatMsgId(),this.renderMessageGroup(this.messageWrapper)},i.prototype.onSendIconClick=function(e){var t=this;if(this.textareaObj.value.trim()){var s={id:this.element.id+"-message-"+(this.messages.length+1),author:this.user,text:this.textareaObj.value},i=this.isProtectedOnChange;this.textareaObj.value="",this.activateSendIcon(this.textareaObj.value.length);var o={cancel:!1,message:s};this.triggerUserTyping(e,""),this.trigger("messageSend",o,function(e){e.cancel||(s=e.message,t.isProtectedOnChange=!0,t.messages=t.messages.concat([s]),t.isProtectedOnChange=i,t.renderNewMessage(s,t.messages.length-1))}),this.suggestionsElement&&(this.suggestionsElement.hidden=!1),this.updateScrollPosition(!1,5)}},i.prototype.getContextObject=function(e,t,s,i,o){var r,n={};switch(e.toLowerCase()){case"messagetemplate":r=this.messageTemplate,n={message:i,index:s};break;case"timebreaktemplate":r=this.timeBreakTemplate,n={messageDate:o};break;case"typinguserstemplate":r=this.typingUsersTemplate,n={users:this.typingUsers}}this.updateContent(r,t,n,e)},i.prototype.handleAutoScroll=function(){this.isScrollAtBottom&&this.updateScroll(this.messageWrapper),this.autoScrollToBottom&&this.updateScroll(this.messageWrapper),this.toggleScrollIcon()},i.prototype.footerKeyHandler=function(e){this.keyHandler(e,"footer")},i.prototype.scrollBottomKeyHandler=function(e){this.keyHandler(e,"scrollBottom")},i.prototype.keyHandler=function(e,t){if("Enter"===e.key&&!e.shiftKey)switch(t){case"footer":e.preventDefault(),this.onSendIconClick(e),this.updateTextAreaObject(this.textareaObj.value);break;case"scrollBottom":this.scrollToBottom()}},i.prototype.updateFooter=function(e,t){t.hidden=!e},i.prototype.handleScroll=function(){var e=this.checkScrollAtBottom();if(e){this.toggleClassName(this.downArrowIcon.element,e,"downArrow");var t=this.element.querySelector(".e-suggestions");t&&(this.toggleClassName(t,e,"suggestion"),e&&this.isScrollAtBottom||this.updateScroll(this.messageWrapper))}this.loadOnDemand&&0===this.messageWrapper.scrollTop&&(this.multiplier+=this.multiplier,this.loadMoreMessages()),this.isScrollAtBottom=e},i.prototype.checkScrollAtBottom=function(){var e=Math.floor(this.messageWrapper.scrollTop);return Math.floor(this.messageWrapper.scrollHeight)-e<=Math.floor(this.messageWrapper.clientHeight)+5},i.prototype.toggleClassName=function(e,t,s){switch(s){case"downArrow":e.classList.toggle("e-arrowdown-hide",t),e.classList.toggle("e-arrowdown-show",!t);break;case"suggestion":e.classList.toggle("e-show-suggestions",t),e.classList.toggle("e-hide-suggestions",!t);break;case"scroll":e.classList.toggle("e-scroll-smooth",!t)}},i.prototype.toggleScrollIcon=function(){var e=this.checkScrollAtBottom();this.toggleClassName(this.downArrowIcon.element,e,"downArrow");var t=this.element.querySelector(".e-suggestions");t&&(this.toggleClassName(t,e,"suggestion"),e&&this.updateScroll(this.messageWrapper)),this.isScrollAtBottom=e},i.prototype.scrollBtnClick=function(){this.toggleClassName(this.messageWrapper,!1,"scroll"),this.scrollToBottom(),this.toggleClassName(this.messageWrapper,!0,"scroll")},i.prototype.updateMessageItem=function(e,t){if(e.author||e.timeStamp||this.messageTemplate)return void this.renderUpdatedMessage();var s=this.messageWrapper.querySelector("#"+t);if(s){e.id&&(s.id=e.id);var i=s.querySelector(".e-text");if(i&&e.text&&(i.innerHTML=e.text),e.status){var o=s.querySelector(".e-status-text");o&&e.status.text&&(o.innerHTML=e.status.text);var r=s.querySelector(".e-status-icon");if(r&&e.status.iconCss){var n=e.status.iconCss;r.className="e-status-icon "+n,e.status.tooltip&&(r.title=e.status.tooltip)}}}},i.prototype.wireEvents=function(){this.wireFooterEvents(this.sendIcon,this.footer,this.footerTemplate),t.EventHandler.add(this.messageWrapper,"scroll",this.handleScroll,this),t.EventHandler.add(this.downArrowIcon.element,"click",this.scrollBtnClick,this),t.EventHandler.add(this.downArrowIcon.element,"keydown",this.scrollBottomKeyHandler,this)},i.prototype.unwireEvents=function(){this.unWireFooterEvents(this.sendIcon,this.footer,this.footerTemplate),t.EventHandler.remove(this.messageWrapper,"scroll",this.handleScroll),t.EventHandler.remove(this.downArrowIcon.element,"click",this.scrollBtnClick),t.EventHandler.remove(this.downArrowIcon.element,"keydown",this.scrollBottomKeyHandler)},i.prototype.destroyChatUI=function(){for(var e=0,t=["content","sendIcon","footer","indicatorWrapper","messageWrapper","viewWrapper","chatHeader"];e<t.length;e++){var s=t[e];this.removeAndNullify(this[s]),this[s]=null}},i.prototype.scrollToBottom=function(){this.updateScroll(this.messageWrapper),this.toggleScrollIcon()},i.prototype.addMessage=function(e){if(!t.isNullOrUndefined(e)){var s=this.isProtectedOnChange;if(this.isProtectedOnChange=!0,"string"==typeof e){i={id:this.element.id+"-message-"+(this.messages.length+1),author:this.user,text:e,timeStamp:new Date,timeStampFormat:this.timeStampFormat};this.messages=this.messages.concat([i]),this.renderNewMessage(i,this.messages.length-1)}else{var i=b({},e,{id:e.id||this.element.id+"-message-"+(this.messages.length+1)});this.messages=this.messages.concat([i]),this.renderNewMessage(i,this.messages.length-1)}this.updateScrollPosition(!0,5),this.isProtectedOnChange=s}},i.prototype.updateMessage=function(e,t){var s=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.messages=this.messages.map(function(s){return s.id===t?b({},s,e):s}),this.updateMessageItem(e,t),this.isProtectedOnChange=s},i.prototype.scrollToMessage=function(e){var t=this.messageWrapper.querySelector("#"+e);t&&t.scrollIntoView({behavior:"smooth",block:"start"})},i.prototype.focus=function(){this.textareaObj&&this.textareaObj.focusIn()},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.unwireEvents(),this.cssClass&&t.removeClass([this.element],this.cssClass.split(" ")),this.element.classList.remove("e-rtl"),this.destroyAndNullify(this.textareaObj),this.destroyAndNullify(this.downArrowIcon),this.destroyAndNullify(this.toolbar),this.destroyChatUI(),this.intl=null},i.prototype.onPropertyChanged=function(e,s){for(var i=0,o=Object.keys(e);i<o.length;i++)switch(o[i]){case"width":case"height":this.setDimension(this.element,this.width,this.height);break;case"placeholder":this.textareaObj&&(this.textareaObj.placeholder=this.placeholder);break;case"cssClass":this.updateCssClass(this.element,e.cssClass,s.cssClass);break;case"enableRtl":this.element.classList[this.enableRtl?"add":"remove"]("e-rtl"),t.isNullOrUndefined(this.toolbar)||(this.toolbar.enableRtl=this.enableRtl,this.toolbar.dataBind());break;case"showHeader":this.updateHeader(this.showHeader,this.chatHeader,this.viewWrapper);break;case"headerText":this.updateHeaderText();break;case"headerIconCss":this.updateHeaderIcon();break;case"messages":this.renderUpdatedMessage(),this.updateScrollPosition(!0,5);break;case"user":var r={id:e.user.id,user:e.user.user,avatarUrl:e.user.avatarUrl,avatarBgColor:e.user.avatarBgColor,cssClass:e.user.cssClass};this.user=b({},this.user,r);break;case"showTimeStamp":case"timeStampFormat":case"showTimeBreak":this.messages.length>0&&this.renderUpdatedMessage();break;case"showFooter":this.updateFooter(this.showFooter,this.footer);break;case"autoScrollToBottom":this.handleAutoScroll();break;case"suggestions":this.handleSuggestionUpdate();break;case"typingUsers":this.updateTypingUsers(this.typingUsers);break;case"locale":if(!this.typingUsers||0===this.typingUsers.length)return;this.updateUserText();break;case"headerToolbar":this.updateHeaderToolbar();break;case"currencyCode":this.refresh()}},T([t.Property("100%")],i.prototype,"width",void 0),T([t.Property("100%")],i.prototype,"height",void 0),T([t.Complex({},S)],i.prototype,"user",void 0),T([t.Property("Chat")],i.prototype,"headerText",void 0),T([t.Property("")],i.prototype,"headerIconCss",void 0),T([t.Property("Type your message")],i.prototype,"placeholder",void 0),T([t.Property("")],i.prototype,"cssClass",void 0),T([t.Property(!0)],i.prototype,"showHeader",void 0),T([t.Property(!0)],i.prototype,"showFooter",void 0),T([t.Complex({items:[]},l)],i.prototype,"headerToolbar",void 0),T([t.Property([])],i.prototype,"suggestions",void 0),T([t.Property(!1)],i.prototype,"showTimeBreak",void 0),T([t.Collection([],E)],i.prototype,"messages",void 0),T([t.Collection([],S)],i.prototype,"typingUsers",void 0),T([t.Property("dd/MM/yyyy hh:mm a")],i.prototype,"timeStampFormat",void 0),T([t.Property(!0)],i.prototype,"showTimeStamp",void 0),T([t.Property(!1)],i.prototype,"autoScrollToBottom",void 0),T([t.Property(!1)],i.prototype,"loadOnDemand",void 0),T([t.Property("")],i.prototype,"suggestionTemplate",void 0),T([t.Property("")],i.prototype,"footerTemplate",void 0),T([t.Property("")],i.prototype,"emptyChatTemplate",void 0),T([t.Property("")],i.prototype,"messageTemplate",void 0),T([t.Property("")],i.prototype,"timeBreakTemplate",void 0),T([t.Property("")],i.prototype,"typingUsersTemplate",void 0),T([t.Event()],i.prototype,"messageSend",void 0),T([t.Event()],i.prototype,"userTyping",void 0),i=T([t.NotifyPropertyChanges],i)}(h);return e.AIAssistView=f,e.AssistView=g,e.ChatUI=I,e.InterActiveChatBase=h,e.Message=E,e.MessageStatus=w,e.Prompt=u,e.PromptToolbarSettings=y,e.ResponseToolbarSettings=v,e.ToolbarItem=p,e.ToolbarSettings=l,e.User=S,e}({},ej.base,ej.navigations,ej.inputs,ej.popups,ej.buttons),this.ejs=ej;
//# sourceMappingURL=ej2-interactive-chat.min.js.map
