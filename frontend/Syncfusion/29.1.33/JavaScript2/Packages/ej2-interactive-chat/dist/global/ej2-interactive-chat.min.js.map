{"version":3,"file":"ej2-interactive-chat.min.js","sources":["../../src/interactive-chat-base/interactive-chat-base.js","../../src/ai-assistview/ai-assistview.js","../../src/chat-ui/chat-ui.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, select, compile, NotifyPropertyChanges, isNullOrUndefined as isNOU, formatUnit, Event, append, addClass, removeClass, Property, ChildProperty, Collection } from '@syncfusion/ej2-base';\nimport { attributes, EventHandler, remove } from '@syncfusion/ej2-base';\nimport { TextArea } from '@syncfusion/ej2-inputs';\n/**\n * Represents a toolbar item model in the component.\n */\nvar ToolbarItem = /** @class */ (function (_super) {\n    __extends(ToolbarItem, _super);\n    function ToolbarItem() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('')\n    ], ToolbarItem.prototype, \"iconCss\", void 0);\n    __decorate([\n        Property()\n    ], ToolbarItem.prototype, \"text\", void 0);\n    __decorate([\n        Property('Button')\n    ], ToolbarItem.prototype, \"type\", void 0);\n    __decorate([\n        Property('Left')\n    ], ToolbarItem.prototype, \"align\", void 0);\n    __decorate([\n        Property(true)\n    ], ToolbarItem.prototype, \"visible\", void 0);\n    __decorate([\n        Property(false)\n    ], ToolbarItem.prototype, \"disabled\", void 0);\n    __decorate([\n        Property('')\n    ], ToolbarItem.prototype, \"tooltip\", void 0);\n    __decorate([\n        Property('')\n    ], ToolbarItem.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(null)\n    ], ToolbarItem.prototype, \"template\", void 0);\n    __decorate([\n        Property(-1)\n    ], ToolbarItem.prototype, \"tabIndex\", void 0);\n    return ToolbarItem;\n}(ChildProperty));\nexport { ToolbarItem };\n/**\n * Represents the settings for the toolbar in the component.\n */\nvar ToolbarSettings = /** @class */ (function (_super) {\n    __extends(ToolbarSettings, _super);\n    function ToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], ToolbarItem)\n    ], ToolbarSettings.prototype, \"items\", void 0);\n    __decorate([\n        Event()\n    ], ToolbarSettings.prototype, \"itemClicked\", void 0);\n    return ToolbarSettings;\n}(ChildProperty));\nexport { ToolbarSettings };\n/**\n * ChatBase component act as base class.\n */\nvar InterActiveChatBase = /** @class */ (function (_super) {\n    __extends(InterActiveChatBase, _super);\n    /**\n     * * Constructor for Base class\n     *\n     * @param {InterActiveChatBaseModel} options - Specifies the Base model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function InterActiveChatBase(options, element) {\n        return _super.call(this, options, element) || this;\n    }\n    /**\n     * This method is abstract member of the Component<HTMLElement>.\n     *\n     * @private\n     * @returns {void}\n     */\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    InterActiveChatBase.prototype.preRender = function () {\n    };\n    /**\n     * This method is abstract member of the Component<HTMLElement>.\n     *\n     * @private\n     * @returns {string} - It returns the current module name.\n     */\n    InterActiveChatBase.prototype.getModuleName = function () {\n        return 'interactivechatBase';\n    };\n    /**\n     * This method is abstract member of the Component<HTMLElement>.\n     *\n     * @private\n     * @returns {string} - It returns the persisted data.\n     */\n    InterActiveChatBase.prototype.getPersistData = function () {\n        return this.addOnPersist([]);\n    };\n    /**\n     * This method is abstract member of the Component<HTMLElement>.\n     *\n     * @private\n     * @returns {void}\n     */\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    InterActiveChatBase.prototype.render = function () {\n    };\n    /* To calculate the width when change via set model */\n    InterActiveChatBase.prototype.setDimension = function (element, width, height) {\n        element.style.width = !isNOU(width) ? formatUnit(width) : element.style.width;\n        element.style.height = !isNOU(height) ? formatUnit(height) : element.style.height;\n    };\n    InterActiveChatBase.prototype.addCssClass = function (element, cssClass) {\n        if (cssClass) {\n            element.classList.add(cssClass);\n        }\n    };\n    InterActiveChatBase.prototype.addRtlClass = function (element, isRtl) {\n        if (isRtl) {\n            element.classList.add('e-rtl');\n        }\n    };\n    InterActiveChatBase.prototype.updateCssClass = function (element, newClass, oldClass) {\n        if (oldClass) {\n            removeClass([element], oldClass.trim().split(' '));\n        }\n        if (newClass) {\n            addClass([element], newClass.trim().split(' '));\n        }\n    };\n    InterActiveChatBase.prototype.updateHeader = function (showHeader, headerElement, viewWrapper) {\n        if (!showHeader) {\n            headerElement.hidden = true;\n            viewWrapper.style.height = '100%';\n        }\n        else {\n            headerElement.hidden = false;\n            viewWrapper.style.height = '';\n        }\n    };\n    InterActiveChatBase.prototype.renderViewSections = function (element, headerClassName, viewClassName) {\n        var headerWrapper = this.createElement('div', { className: headerClassName });\n        element.appendChild(headerWrapper);\n        var viewWrapper = this.createElement('div', { className: viewClassName });\n        element.appendChild(viewWrapper);\n    };\n    InterActiveChatBase.prototype.createViewComponents = function (viewWrapper) {\n        var contentWrapper = this.createElement('div', { className: 'e-views' });\n        var viewContainer = this.createElement('div', { className: 'e-view-container' });\n        contentWrapper.appendChild(viewContainer);\n        viewWrapper.appendChild(contentWrapper);\n    };\n    InterActiveChatBase.prototype.updateScroll = function (scrollElement) {\n        scrollElement.scrollTo(0, scrollElement.scrollHeight);\n    };\n    InterActiveChatBase.prototype.getElement = function (element) {\n        var className;\n        switch (element) {\n            case 'footer':\n                className = 'e-footer';\n                break;\n            case 'contentContainer':\n                className = 'e-content-container';\n                break;\n            case 'outputElement':\n                className = 'e-content';\n                break;\n            default:\n                className = '';\n                break;\n        }\n        return this.createElement('div', { className: className });\n    };\n    InterActiveChatBase.prototype.createSuggestionElement = function (suggestionHeader) {\n        var suggestionContainer = this.createElement('div', { className: 'e-suggestions' });\n        var suggestionHeaderElement = this.createElement('div', { className: 'e-suggestion-header' });\n        var suggestionListElement = this.createElement('div', { className: 'e-suggestion-list' });\n        if (suggestionHeader) {\n            suggestionContainer.appendChild(suggestionHeaderElement);\n        }\n        suggestionContainer.appendChild(suggestionListElement);\n        return { suggestionContainer: suggestionContainer, suggestionHeaderElement: suggestionHeaderElement, suggestionListElement: suggestionListElement };\n    };\n    InterActiveChatBase.prototype.renderSuggestions = function (suggestionsArray, suggestionHeader, suggestionTemplate, contextName, templateName, onSuggestionClick) {\n        var isSuggestionTemplate = suggestionTemplate ? true : false;\n        if (suggestionsArray && suggestionsArray.length > 0) {\n            var _a = this.createSuggestionElement(suggestionHeader), suggestionContainer = _a.suggestionContainer, suggestionHeaderElement = _a.suggestionHeaderElement, suggestionListElement = _a.suggestionListElement;\n            this.suggestionsElement = suggestionContainer;\n            var suggestionContainerClass = \"e-suggestions \" + (isSuggestionTemplate ? 'e-suggestion-item-template' : '');\n            this.suggestionsElement.className = suggestionContainerClass;\n            this.suggestionHeader = suggestionHeaderElement;\n            var suggestionList = suggestionListElement;\n            this.renderSuggestionList(suggestionsArray, suggestionList, isSuggestionTemplate, contextName, suggestionTemplate, templateName, onSuggestionClick);\n            if (suggestionHeader) {\n                this.suggestionHeader.innerHTML = suggestionHeader;\n            }\n            this.suggestionsElement.append(suggestionList);\n            this.content.append(this.suggestionsElement);\n        }\n    };\n    InterActiveChatBase.prototype.renderSuggestionList = function (suggestionsArray, suggestionWrapper, isSuggestionTemplate, contextName, suggestionTemplate, templateName, onSuggestionClick) {\n        var _this = this;\n        var suggestionsListElement = this.createElement('ul', { attrs: { 'tabindex': '-1' } });\n        suggestionsArray.forEach(function (suggestion, i) {\n            var _a;\n            var suggestionList = _this.createElement('li');\n            attributes(suggestionList, { 'tabindex': '0' });\n            EventHandler.add(suggestionList, 'click', onSuggestionClick, _this);\n            EventHandler.add(suggestionList, 'keydown', _this.suggestionItemHandler, _this);\n            if (isSuggestionTemplate) {\n                var suggestionContext = (_a = { index: i }, _a[contextName] = suggestionsArray[parseInt(i.toString(), 10)], _a);\n                _this.updateContent(suggestionTemplate, suggestionList, suggestionContext, templateName);\n            }\n            else {\n                suggestionList.innerHTML = suggestion;\n            }\n            suggestionsListElement.append(suggestionList);\n        });\n        suggestionWrapper.appendChild(suggestionsListElement);\n    };\n    InterActiveChatBase.prototype.suggestionItemHandler = function (event) {\n        if (event.key === 'Enter' && !event.shiftKey) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.onSuggestionClick(event);\n        }\n    };\n    InterActiveChatBase.prototype.renderBannerView = function (bannerTemplate, parentElement, templateName) {\n        if (bannerTemplate) {\n            var className = templateName === 'emptyChatTemplate' ? 'e-empty-chat-template' : 'e-banner-view';\n            var introContainer = this.createElement('div', { className: className });\n            this.updateContent(bannerTemplate, introContainer, {}, templateName);\n            parentElement.prepend(introContainer);\n        }\n    };\n    InterActiveChatBase.prototype.updateContent = function (template, contentElement, context, templateName) {\n        if (this.isReact) {\n            this.clearTemplate([templateName]);\n        }\n        var notCompile = !(this.isReact || this.isVue);\n        var ctn = this.getTemplateFunction(template, notCompile);\n        if (typeof ctn === 'string') {\n            contentElement.innerHTML = ctn;\n        }\n        else {\n            append(ctn(context, this), contentElement);\n        }\n        this.renderReactTemplates();\n    };\n    InterActiveChatBase.prototype.renderFooterContent = function (footerTemplate, footer, prompt, promptPlaceholder, showClearButton, rowCount, className) {\n        if (footerTemplate) {\n            this.updateContent(footerTemplate, footer, {}, 'footerTemplate');\n            return null;\n        }\n        else {\n            var textareaEle = this.createElement('textarea', { className: className });\n            footer.appendChild(textareaEle);\n            return this.renderFooter(textareaEle, prompt, promptPlaceholder, showClearButton, rowCount);\n        }\n    };\n    InterActiveChatBase.prototype.renderFooter = function (textareaElement, prompt, promptPlaceholder, showClearButton, rowCount) {\n        if (showClearButton === void 0) { showClearButton = false; }\n        var textareaObj = new TextArea({\n            rows: rowCount,\n            cols: 300,\n            cssClass: rowCount >= 10 ? 'show-scrollbar' : 'hide-scrollbar',\n            placeholder: promptPlaceholder,\n            resizeMode: 'None',\n            value: prompt,\n            showClearButton: showClearButton\n        });\n        textareaObj.appendTo(textareaElement);\n        return textareaObj;\n    };\n    InterActiveChatBase.prototype.renderSendIcon = function (sendIconClass, footer) {\n        var sendIcon = this.createElement('span', { attrs: { class: sendIconClass, role: 'button', 'aria-label': 'Submit', tabindex: '0' } });\n        footer.appendChild(sendIcon);\n        return sendIcon;\n    };\n    InterActiveChatBase.prototype.appendChildren = function (target) {\n        var children = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            children[_i - 1] = arguments[_i];\n        }\n        target.append.apply(target, children);\n    };\n    InterActiveChatBase.prototype.insertBeforeChildren = function (target) {\n        var children = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            children[_i - 1] = arguments[_i];\n        }\n        target.prepend.apply(target, children);\n    };\n    InterActiveChatBase.prototype.wireFooterEvents = function (sendIcon, footer, footerTemplate) {\n        if (sendIcon) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            EventHandler.add(sendIcon, 'click', this.onSendIconClick, this);\n        }\n        if (footer && !footerTemplate) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            EventHandler.add(footer, 'keydown', this.footerKeyHandler, this);\n        }\n    };\n    InterActiveChatBase.prototype.unWireFooterEvents = function (sendIcon, footer, footerTemplate) {\n        if (sendIcon) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            EventHandler.remove(sendIcon, 'click', this.onSendIconClick);\n        }\n        if (footer && !footerTemplate) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            EventHandler.remove(footer, 'keydown', this.footerKeyHandler);\n        }\n    };\n    InterActiveChatBase.prototype.removeAndNullify = function (element) {\n        if (element) {\n            if (!isNOU(element.parentNode)) {\n                remove(element);\n            }\n            else {\n                element.innerHTML = '';\n            }\n        }\n    };\n    // eslint-disable-next-line  @typescript-eslint/no-explicit-any\n    InterActiveChatBase.prototype.destroyAndNullify = function (obj) {\n        if (obj) {\n            obj.destroy();\n            obj = null;\n        }\n    };\n    /**\n     * Gets template content based on the template property value.\n     *\n     * @param {string | Function} template - Template property value.\n     * @param {boolean} notCompile - Compile property value.\n     * @returns {Function} - Return template function.\n     * @hidden\n     */\n    InterActiveChatBase.prototype.getTemplateFunction = function (template, notCompile) {\n        if (typeof template === 'string') {\n            var content = '';\n            try {\n                var tempEle = select(template);\n                if (tempEle) {\n                    //Return innerHTML incase of jsrenderer script else outerHTML\n                    content = tempEle.tagName === 'SCRIPT' ? tempEle.innerHTML : tempEle.outerHTML;\n                    notCompile = false;\n                }\n                else {\n                    content = template;\n                }\n            }\n            catch (e) {\n                content = template;\n            }\n            return notCompile ? content : compile(content);\n        }\n        else {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            return compile(template);\n        }\n    };\n    /**\n     * This method is abstract member of the Component<HTMLElement>.\n     *\n     * @param  {InterActiveChatBaseModel} newProp - Specifies new properties\n     * @param  {InterActiveChatBaseModel} oldProp - Specifies old properties\n     * @private\n     * @returns {void}\n     */\n    // eslint-disable-next-line @typescript-eslint/no-empty-function, @typescript-eslint/no-unused-vars\n    InterActiveChatBase.prototype.onPropertyChanged = function (newProp, oldProp) {\n    };\n    __decorate([\n        Event()\n    ], InterActiveChatBase.prototype, \"created\", void 0);\n    InterActiveChatBase = __decorate([\n        NotifyPropertyChanges\n    ], InterActiveChatBase);\n    return InterActiveChatBase;\n}(Component));\nexport { InterActiveChatBase };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n///<reference path='../interactive-chat-base/interactive-chat-base-model.d.ts'/>\nimport { EventHandler, Property, NotifyPropertyChanges, Collection, Event, remove, L10n } from '@syncfusion/ej2-base';\nimport { ChildProperty, getUniqueID, isNullOrUndefined as isNOU, Complex, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { InterActiveChatBase, ToolbarSettings, ToolbarItem } from '../interactive-chat-base/interactive-chat-base';\nvar ASSISTHEADER = 'e-aiassist-header-text e-assist-view-header';\n/* eslint-enable @typescript-eslint/no-misused-new, no-redeclare */\n/**\n * The prompts property maps the list of the prompts and binds the data to the suggestions.\n */\nvar Prompt = /** @class */ (function (_super) {\n    __extends(Prompt, _super);\n    function Prompt() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(null)\n    ], Prompt.prototype, \"prompt\", void 0);\n    __decorate([\n        Property('')\n    ], Prompt.prototype, \"response\", void 0);\n    __decorate([\n        Property(null)\n    ], Prompt.prototype, \"isResponseHelpful\", void 0);\n    return Prompt;\n}(ChildProperty));\nexport { Prompt };\n/**\n * Specifies the type of assist view.\n */\nexport var AssistViewType;\n(function (AssistViewType) {\n    /**\n     * Represents the default assist view type.\n     */\n    AssistViewType[\"Assist\"] = \"Assist\";\n    /**\n     * Represents a custom assist view type.\n     */\n    AssistViewType[\"Custom\"] = \"Custom\";\n})(AssistViewType || (AssistViewType = {}));\n/**\n * The assistView property maps the customized AiAssistView.\n */\nvar AssistView = /** @class */ (function (_super) {\n    __extends(AssistView, _super);\n    function AssistView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Assist')\n    ], AssistView.prototype, \"type\", void 0);\n    __decorate([\n        Property('')\n    ], AssistView.prototype, \"name\", void 0);\n    __decorate([\n        Property()\n    ], AssistView.prototype, \"iconCss\", void 0);\n    __decorate([\n        Property()\n    ], AssistView.prototype, \"viewTemplate\", void 0);\n    return AssistView;\n}(ChildProperty));\nexport { AssistView };\n/**\n * The promptToolbarSettings property maps the list of the promptToolbarSettings and binds the data to the prompt.\n */\nvar PromptToolbarSettings = /** @class */ (function (_super) {\n    __extends(PromptToolbarSettings, _super);\n    function PromptToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('100%')\n    ], PromptToolbarSettings.prototype, \"width\", void 0);\n    __decorate([\n        Collection([], ToolbarItem)\n    ], PromptToolbarSettings.prototype, \"items\", void 0);\n    __decorate([\n        Event()\n    ], PromptToolbarSettings.prototype, \"itemClicked\", void 0);\n    return PromptToolbarSettings;\n}(ChildProperty));\nexport { PromptToolbarSettings };\n/**\n * The responseToolbarSettings property maps the list of the responseToolbarSettings and binds the data to the output items.\n */\nvar ResponseToolbarSettings = /** @class */ (function (_super) {\n    __extends(ResponseToolbarSettings, _super);\n    function ResponseToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('100%')\n    ], ResponseToolbarSettings.prototype, \"width\", void 0);\n    __decorate([\n        Collection([], ToolbarItem)\n    ], ResponseToolbarSettings.prototype, \"items\", void 0);\n    __decorate([\n        Event()\n    ], ResponseToolbarSettings.prototype, \"itemClicked\", void 0);\n    return ResponseToolbarSettings;\n}(ChildProperty));\nexport { ResponseToolbarSettings };\n/**\n * The `AIAssistView` component is designed to enhance user interaction by integrating AI driven assistance features.\n * It provides a seamless interface for incorporating suggestions & AI responses.\n *\n * ```html\n *  <div id='defaultAIAssistView'></div>\n * ```\n * ```typescript\n *  let aiAssistObj: AIAssistView = new AIAssistView();\n *  aiAssistObj.appendTo('#defaultAIAssistView');\n * ```\n */\nvar AIAssistView = /** @class */ (function (_super) {\n    __extends(AIAssistView, _super);\n    /**\n     * Constructor for creating the component\n     *\n     * @param {AIAssistViewModel} options - Specifies the AIAssistViewModel model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function AIAssistView(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.toolbarItems = [];\n        _this.displayContents = [];\n        _this.preTagElements = [];\n        return _this;\n    }\n    /**\n     * Initialize the event handler\n     *\n     * @private\n     * @returns {void}\n     */\n    AIAssistView.prototype.preRender = function () {\n        if (!this.element.id) {\n            this.element.id = getUniqueID('e-' + this.getModuleName());\n        }\n    };\n    AIAssistView.prototype.getDirective = function () {\n        return 'EJS-AIASSISTVIEW';\n    };\n    /**\n     * To get component name.\n     *\n     * @returns {string} - It returns the current module name.\n     * @private\n     */\n    AIAssistView.prototype.getModuleName = function () {\n        return 'aiassistview';\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @private\n     * @returns {string} - It returns the persisted data.\n     */\n    AIAssistView.prototype.getPersistData = function () {\n        return this.addOnPersist([]);\n    };\n    AIAssistView.prototype.render = function () {\n        this.renderPromptView();\n    };\n    AIAssistView.prototype.renderPromptView = function () {\n        this.setDimension(this.element, this.width, this.height);\n        this.renderViews();\n        this.renderToolbar();\n        this.updateTextAreaObject();\n        this.wireEvents();\n    };\n    AIAssistView.prototype.renderToolbar = function () {\n        this.updateHeaderToolbar();\n        if (this.assistViewTemplateIndex < 0) {\n            this.displayContents.unshift(this.contentWrapper);\n        }\n        else {\n            this.displayContents.unshift(this.assistCustomSection);\n        }\n        this.previousElement = this.displayContents[this.activeView];\n        this.renderHeaderToolbar();\n        this.viewWrapper = this.element.querySelector('.e-view-content');\n        this.updateActiveView();\n        this.addCssClass(this.element, this.cssClass);\n        this.updateHeader(this.showHeader, this.toolbarHeader, this.viewWrapper);\n        this.aiAssistViewRendered = true;\n        this.addRtlClass(this.element, this.enableRtl);\n    };\n    AIAssistView.prototype.renderViews = function () {\n        this.assistViewTemplateIndex = -1;\n        this.aiAssistViewRendered = false;\n        this.isAssistView = false;\n        this.isOutputRenderingStop = false;\n        this.isResponseRequested = false;\n        this.renderViewSections(this.element, 'e-view-header', 'e-view-content');\n        var isAssistViewAssigned = false;\n        var assistView;\n        var customViewTemplate;\n        var customViewCount = 1;\n        if (this.views.length > 0) {\n            for (var index = 0; index < this.views.length; index++) {\n                if (this.views[parseInt(index.toString(), 10)].type.toLocaleLowerCase() === 'assist' && !isAssistViewAssigned) {\n                    assistView = {\n                        text: this.views[parseInt(index.toString(), 10)].name || 'AI Assist',\n                        prefixIcon: this.views[parseInt(index.toString(), 10)].iconCss || 'e-icons e-assistview-icon',\n                        cssClass: ASSISTHEADER,\n                        htmlAttributes: { 'data-index': this.element.id + '_view_0' }\n                    };\n                    this.toolbarItems.unshift(assistView);\n                    if (this.views[parseInt(index.toString(), 10)].viewTemplate) {\n                        this.assistViewTemplateIndex = index;\n                    }\n                    isAssistViewAssigned = true;\n                    this.isAssistView = true;\n                }\n                else if (this.views[parseInt(index.toString(), 10)].type.toLocaleLowerCase() === 'custom') {\n                    customViewTemplate = this.createElement('div', { className: 'e-customview-content-section-' + customViewCount + ' e-custom-view' });\n                    this.getContextObject('customViewTemplate', customViewTemplate, -1, index);\n                    this.displayContents.push(customViewTemplate);\n                    this.toolbarItems.push({\n                        text: this.views[parseInt(index.toString(), 10)].name || '',\n                        prefixIcon: this.views[parseInt(index.toString(), 10)].iconCss || '',\n                        cssClass: 'e-aiassist-header-text e-custom-view-header',\n                        htmlAttributes: { 'data-index': this.element.id + '_view_' + customViewCount.toString() }\n                    });\n                    customViewCount++;\n                }\n            }\n        }\n        if (this.views.length === 0 || !isAssistViewAssigned) {\n            assistView = {\n                text: 'AI Assist',\n                prefixIcon: 'e-icons e-assistview-icon',\n                cssClass: ASSISTHEADER,\n                htmlAttributes: { 'data-index': this.element.id + '_view_0' }\n            };\n            this.toolbarItems.unshift(assistView);\n            isAssistViewAssigned = true;\n        }\n        if (this.assistViewTemplateIndex >= 0 && this.views[this.assistViewTemplateIndex].viewTemplate) {\n            this.assistCustomSection = this.createElement('div', { attrs: { class: 'e-assistview-content-section', 'data-index': this.element.id + '_view_0' } });\n            this.getContextObject('assistViewTemplate', this.assistCustomSection, -1, this.assistViewTemplateIndex);\n        }\n        else {\n            this.renderDefaultView();\n        }\n    };\n    AIAssistView.prototype.renderHeaderToolbar = function () {\n        var _this = this;\n        this.toolbar = new Toolbar({\n            items: this.toolbarItems,\n            height: '100%',\n            enableRtl: this.enableRtl,\n            clicked: function (args) {\n                var eventItemArgs = {\n                    type: args.item.type,\n                    text: args.item.text,\n                    iconCss: args.item.prefixIcon,\n                    cssClass: args.item.cssClass,\n                    tooltip: args.item.tooltipText,\n                    template: args.item.template,\n                    disabled: args.item.disabled,\n                    visible: args.item.visible,\n                    align: args.item.align,\n                    tabIndex: args.item.tabIndex\n                };\n                var eventArgs = {\n                    item: eventItemArgs,\n                    event: args.originalEvent,\n                    cancel: false\n                };\n                if (_this.toolbarSettings.itemClicked) {\n                    _this.toolbarSettings.itemClicked.call(_this, eventArgs);\n                }\n                if (!eventArgs.cancel) {\n                    if (args.item.htmlAttributes) {\n                        var currentIndex = parseInt(args.item.htmlAttributes['data-index'].split(_this.element.id + '_view_')[1], 10);\n                        if (currentIndex !== _this.activeView) {\n                            var prevOnChange = _this.isProtectedOnChange;\n                            _this.isProtectedOnChange = true;\n                            var previousIndex = _this.getIndex(_this.activeView);\n                            _this.activeView = parseInt(args.item.htmlAttributes['data-index'].split(_this.element.id + '_view_')[1], 10);\n                            _this.updateActiveView(previousIndex);\n                            _this.isProtectedOnChange = prevOnChange;\n                        }\n                    }\n                }\n            }\n        });\n        this.toolbarHeader = this.element.querySelector('.e-view-header');\n        var toolbarEle = this.createElement('div');\n        this.toolbar.appendTo(toolbarEle);\n        this.toolbar.element.setAttribute('aria-label', 'assist-view-toolbar-header');\n        this.toolbarHeader.appendChild(toolbarEle);\n    };\n    AIAssistView.prototype.updateHeaderToolbar = function () {\n        if (this.toolbarSettings.items.length > 0) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            var pushToolbar = this.toolbarSettings.items.map(function (item) { return ({\n                type: item.type,\n                template: item.template,\n                disabled: item.disabled,\n                cssClass: item.cssClass,\n                visible: item.visible,\n                tooltipText: item.tooltip,\n                prefixIcon: item.iconCss,\n                text: item.text,\n                align: item.align\n            }); });\n            this.toolbarItems = this.toolbarItems.concat(pushToolbar);\n        }\n    };\n    AIAssistView.prototype.getIndex = function (currentIndex) {\n        return (((currentIndex) > (this.views.length - (this.isAssistView ? 1 : 0))) || (currentIndex < 0)) ?\n            0 : currentIndex;\n    };\n    AIAssistView.prototype.updateActiveView = function (previousIndex) {\n        var activeViewIndex = this.getIndex(this.activeView);\n        if (!this.aiAssistViewRendered) {\n            this.appendView(activeViewIndex);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            if (this.toolbar.tbarEle[parseInt(activeViewIndex.toString(), 10)]) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                this.toolbar.tbarEle[parseInt(activeViewIndex.toString(), 10)].classList.add('e-active');\n            }\n        }\n        else if (previousIndex !== activeViewIndex) {\n            this.removePreviousView(previousIndex, activeViewIndex);\n            this.appendView(activeViewIndex);\n        }\n        this.previousElement = this.displayContents[parseInt(activeViewIndex.toString(), 10)];\n    };\n    AIAssistView.prototype.appendView = function (activeViewIndex) {\n        //updating the new view section according to the activeView property\n        if (activeViewIndex === 0 && this.assistViewTemplateIndex < 0) {\n            this.viewWrapper.append(this.contentWrapper, this.stopResponding, this.footer);\n        }\n        else if (activeViewIndex === 0 && this.assistViewTemplateIndex >= 0) {\n            this.viewWrapper.append(this.assistCustomSection);\n        }\n        else {\n            this.viewWrapper.append(this.displayContents[parseInt(activeViewIndex.toString(), 10)]);\n        }\n    };\n    AIAssistView.prototype.removePreviousView = function (previousIndex, activeViewIndex) {\n        // removing the previously binded element\n        this.viewWrapper.removeChild(this.previousElement);\n        if (previousIndex === 0 && this.assistViewTemplateIndex < 0) {\n            this.viewWrapper.removeChild(this.stopResponding);\n            this.viewWrapper.removeChild(this.footer);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.toolbar.tbarEle[parseInt(activeViewIndex.toString(), 10)]) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.toolbar.tbarEle[parseInt(activeViewIndex.toString(), 10)].classList.add('e-active');\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (previousIndex >= 0 && this.toolbar.tbarEle[parseInt(previousIndex.toString(), 10)]) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.toolbar.tbarEle[parseInt(previousIndex.toString(), 10)].classList.remove('e-active');\n        }\n    };\n    AIAssistView.prototype.renderDefaultView = function () {\n        var viewWrapper = this.element.querySelector('.e-view-content');\n        this.createViewComponents(viewWrapper);\n        this.contentWrapper = this.element.querySelector('.e-views');\n        this.contentWrapper.setAttribute('data-index', this.element.id + '_view_0');\n        var contentContainer = this.element.querySelector('.e-view-container');\n        this.content = this.getElement('contentContainer');\n        this.footer = this.getElement('footer');\n        var footerClass = \"e-footer \" + (this.footerTemplate ? 'e-footer-template' : '');\n        this.footer.className = footerClass;\n        this.renderContent();\n        this.renderAssistViewFooter();\n        this.renderBannerView(this.bannerTemplate, contentContainer, 'bannerTemplate');\n        contentContainer.append(this.content);\n        this.renderStopResponding();\n    };\n    AIAssistView.prototype.renderStopResponding = function () {\n        this.stopResponding = this.createElement('div', { attrs: { class: 'e-stop-response', tabIndex: '0', 'aria-label': 'Stop Responding', role: 'button' } });\n        var stopRespondingIcon = this.createElement('span', { className: 'e-icons e-assist-stop' });\n        this.stopRespondingContent = this.createElement('span', { className: 'e-stop-response-text' });\n        this.l10n = new L10n('aiassistview', { stopResponseText: 'Stop Responding' }, this.locale);\n        this.updateStopRespondingTitle();\n        this.appendChildren(this.stopResponding, stopRespondingIcon, this.stopRespondingContent);\n    };\n    AIAssistView.prototype.updateStopRespondingTitle = function () {\n        this.l10n.setLocale(this.locale);\n        this.stopRespondingContent.textContent = this.l10n.getConstant('stopResponseText');\n    };\n    AIAssistView.prototype.renderContent = function () {\n        this.renderSuggestions(this.promptSuggestions, this.promptSuggestionsHeader, this.promptSuggestionItemTemplate, 'promptSuggestion', 'promptSuggestionItemTemplate', this.onSuggestionClick);\n        this.renderOutputContent();\n        if (this.outputElement) {\n            this.renderSkeleton();\n        }\n    };\n    AIAssistView.prototype.renderOutputContent = function (isMethodCall) {\n        var _this = this;\n        this.outputElement = this.getElement('outputElement');\n        if (this.responseToolbarSettings.items.length === 0) {\n            var prevOnChange = this.isProtectedOnChange;\n            this.isProtectedOnChange = true;\n            this.responseToolbarSettings.items = [\n                { iconCss: 'e-icons e-assist-copy', tooltip: 'Copy', cssClass: 'check' },\n                { iconCss: 'e-icons e-assist-like', tooltip: 'Like' },\n                { iconCss: 'e-icons e-assist-dislike', tooltip: 'Dislike' }\n            ];\n            this.isProtectedOnChange = prevOnChange;\n        }\n        if (this.prompts) {\n            this.prompts.forEach(function (prompt, i) {\n                _this.renderOutputContainer(prompt.prompt, prompt.response, i);\n            });\n        }\n        if (this.suggestionsElement && this.content.contains(this.suggestionsElement)) {\n            this.content.insertBefore(this.outputElement, this.suggestionsElement);\n        }\n        else {\n            this.content.appendChild(this.outputElement);\n        }\n        if (isMethodCall) {\n            this.aiAssistViewRendered = true;\n        }\n    };\n    AIAssistView.prototype.renderAssistViewFooter = function () {\n        this.textareaObj = this.renderFooterContent(this.footerTemplate, this.footer, this.prompt, this.promptPlaceholder, this.showClearButton, this.getRowCount(''), 'e-assist-textarea');\n        var sendIconClass = 'e-assist-send e-icons disabled';\n        if (!this.footerTemplate) {\n            this.sendIcon = this.renderSendIcon(sendIconClass, this.footer);\n        }\n        if (this.textareaObj) {\n            this.textareaObj.input = this.handleInput.bind(this);\n            this.activateSendIcon(this.textareaObj.value.length);\n        }\n    };\n    AIAssistView.prototype.handleInput = function (args) {\n        var prevOnChange = this.isProtectedOnChange;\n        this.isProtectedOnChange = true;\n        this.prompt = args.value;\n        this.isProtectedOnChange = prevOnChange;\n        this.activateSendIcon(args.value.length);\n        this.updateTextAreaObject();\n        var eventArgs = {\n            value: args.value,\n            previousValue: args.previousValue,\n            event: args.event,\n            element: this.textareaObj.element\n        };\n        this.trigger('promptChanged', eventArgs);\n    };\n    AIAssistView.prototype.updateTextAreaObject = function () {\n        if (isNOU(this.textareaObj)) {\n            return;\n        }\n        var textarea = this.textareaObj.element;\n        textarea.style.height = 'auto';\n        textarea.style.height = textarea.scrollHeight + 'px';\n    };\n    AIAssistView.prototype.getRowCount = function (textValue) {\n        var lines = textValue.split('\\n').length;\n        return (lines < 10 ? (lines >= 1 ? lines : 1) : 10);\n    };\n    AIAssistView.prototype.activateSendIcon = function (value) {\n        this.sendIcon.classList.toggle('disabled', value === 0);\n        this.sendIcon.classList.toggle('enabled', value > 0);\n    };\n    AIAssistView.prototype.footerKeyHandler = function (e) {\n        this.keyHandler(e, 'footer');\n    };\n    AIAssistView.prototype.stopResponseKeyHandler = function (e) {\n        this.keyHandler(e, 'stopresponse');\n    };\n    AIAssistView.prototype.wireEvents = function () {\n        this.wireFooterEvents(this.sendIcon, this.footer, this.footerTemplate);\n        if (this.stopResponding) {\n            EventHandler.add(this.stopResponding, 'click', this.respondingStopper, this);\n            EventHandler.add(this.stopResponding, 'keydown', this.stopResponseKeyHandler, this);\n        }\n        EventHandler.add(window, 'resize', this.updateTextAreaObject, this);\n    };\n    AIAssistView.prototype.unWireEvents = function () {\n        this.unWireFooterEvents(this.sendIcon, this.footer, this.footerTemplate);\n        if (this.stopResponding) {\n            EventHandler.remove(this.stopResponding, 'click', this.respondingStopper);\n            EventHandler.remove(this.stopResponding, 'keydown', this.stopResponseKeyHandler);\n        }\n        EventHandler.remove(window, 'resize', this.updateTextAreaObject);\n        this.detachCodeCopyEventHandler();\n    };\n    AIAssistView.prototype.detachCodeCopyEventHandler = function () {\n        this.preTagElements.forEach(function (_a) {\n            var preTag = _a.preTag, handler = _a.handler;\n            var copyIcon = preTag.querySelector('.e-code-copy');\n            EventHandler.remove(copyIcon, 'click', handler);\n        });\n        this.preTagElements = [];\n    };\n    AIAssistView.prototype.keyHandler = function (event, value) {\n        if (event.key === 'Enter' && !event.shiftKey) {\n            switch (value) {\n                case 'footer':\n                    event.preventDefault();\n                    if (!this.isResponseRequested) {\n                        this.onSendIconClick();\n                    }\n                    break;\n                case 'stopresponse':\n                    this.respondingStopper(event);\n                    break;\n            }\n        }\n    };\n    AIAssistView.prototype.respondingStopper = function (event) {\n        this.isOutputRenderingStop = true;\n        this.isResponseRequested = false;\n        this.lastStreamPrompt = '';\n        if (this.outputElement.hasChildNodes) {\n            var skeletonElement = this.element.querySelector('.e-loading-body');\n            if (skeletonElement) {\n                this.outputElement.removeChild(this.skeletonContainer);\n            }\n        }\n        this.stopResponding.classList.remove('e-btn-active');\n        var promptIndex = this.prompts ? this.prompts.length - 1 : -1;\n        var eventArgs = {\n            event: event,\n            prompt: promptIndex >= 0 ? this.prompts[parseInt(promptIndex.toString(), 10)].prompt : '',\n            dataIndex: this.prompts ? this.prompts.length - 1 : -1\n        };\n        this.trigger('stopRespondingClick', eventArgs);\n    };\n    AIAssistView.prototype.onSuggestionClick = function (e) {\n        this.suggestionsElement.hidden = true;\n        var prevOnChange = this.isProtectedOnChange;\n        this.isProtectedOnChange = true;\n        this.prompt = e.target.innerText;\n        this.isProtectedOnChange = prevOnChange;\n        this.onSendIconClick();\n    };\n    AIAssistView.prototype.onSendIconClick = function () {\n        if (this.isResponseRequested || !this.prompt.trim()) {\n            return;\n        }\n        this.isResponseRequested = true;\n        this.lastStreamPrompt = '';\n        if (this.suggestionsElement) {\n            this.suggestionsElement.hidden = true;\n        }\n        this.isOutputRenderingStop = false;\n        this.stopResponding.classList.add('e-btn-active');\n        this.addPrompt();\n        this.createOutputElement();\n        var eventArgs = {\n            cancel: false,\n            responseToolbarItems: this.responseToolbarSettings.items,\n            prompt: this.prompt,\n            promptSuggestions: this.promptSuggestions\n        };\n        if (!this.footerTemplate) {\n            var prevOnChange = this.isProtectedOnChange;\n            this.isProtectedOnChange = true;\n            this.prompt = this.textareaObj.value = '';\n            this.textareaObj.dataBind();\n            this.isProtectedOnChange = prevOnChange;\n            this.updateTextAreaObject();\n            this.activateSendIcon(this.textareaObj.value.length);\n        }\n        this.trigger('promptRequest', eventArgs);\n        if (this.contentWrapper) {\n            this.scrollToBottom();\n        }\n    };\n    AIAssistView.prototype.addPrompt = function () {\n        var prevOnChange = this.isProtectedOnChange;\n        this.isProtectedOnChange = true;\n        this.prompts = this.prompts.concat([{ prompt: this.prompt, response: '', isResponseHelpful: null }]);\n        this.isProtectedOnChange = prevOnChange;\n    };\n    AIAssistView.prototype.getContextObject = function (templateName, contentElement, index, arrayPosition) {\n        var template;\n        var context = {};\n        var contextIndex = index >= 0 ? index : -1;\n        var contextPrompt = index >= 0 ? this.prompts[parseInt(contextIndex.toString(), 10)].prompt : '';\n        var contextOutput = index >= 0 ? this.prompts[parseInt(contextIndex.toString(), 10)].response : '';\n        switch (templateName.toLowerCase()) {\n            case 'promptitemtemplate': {\n                template = this.promptItemTemplate;\n                context = { prompt: contextPrompt, toolbarItems: this.promptToolbarSettings.items, index: contextIndex };\n                break;\n            }\n            case 'responseitemtemplate': {\n                template = this.responseItemTemplate;\n                context = {\n                    prompt: contextPrompt,\n                    response: contextOutput,\n                    index: contextIndex,\n                    toolbarItems: this.responseToolbarSettings.items\n                };\n                break;\n            }\n            case 'customviewtemplate':\n            case 'assistviewtemplate': {\n                template = this.views[parseInt(arrayPosition.toString(), 10)].viewTemplate || '';\n                break;\n            }\n        }\n        this.updateContent(template, contentElement, context, templateName);\n    };\n    AIAssistView.prototype.createOutputElement = function () {\n        this.outputSuggestionEle = this.createElement('div', { attrs: { id: \"e-prompt-item_\" + (this.prompts.length - 1), class: \"e-prompt-container \" + (this.promptItemTemplate ? 'e-prompt-item-template' : '') } });\n        this.renderPrompt(this.prompt, this.prompts.length - 1);\n        this.outputElement.append(this.outputSuggestionEle, this.skeletonContainer);\n        this.skeletonContainer.hidden = false;\n    };\n    AIAssistView.prototype.renderOutputContainer = function (promptText, outputText, index, isMethodCall, isFinalUpdate) {\n        var outputContainer = this.createElement('div', { attrs: { id: \"e-response-item_\" + index, class: \"e-output-container \" + (this.responseItemTemplate ? 'e-response-item-template' : '') } });\n        this.renderOutput(outputContainer, promptText, outputText, isMethodCall, index, isFinalUpdate);\n        if (promptText) {\n            this.outputElement.append(this.outputSuggestionEle);\n        }\n        this.outputElement.append(outputContainer);\n        if (this.stopResponding && isFinalUpdate) {\n            this.stopResponding.classList.remove('e-btn-active');\n        }\n        if (!this.isOutputRenderingStop && !this.content.contains(this.suggestionsElement) && this.suggestionsElement) {\n            this.content.append(this.suggestionsElement);\n        }\n    };\n    AIAssistView.prototype.renderOutput = function (outputContainer, promptText, outputText, isMethodCall, index, isFinalUpdate) {\n        var promptIcon = this.createElement('span', {\n            className: 'e-output-icon e-icons ' + (this.responseIconCss || (this.isAssistView && this.views[0].iconCss) || 'e-assistview-icon')\n        });\n        var aiOutputEle = this.createElement('div', { className: 'e-output' });\n        if (!this.aiAssistViewRendered || isMethodCall) {\n            if (!isNOU(promptText)) {\n                this.outputSuggestionEle = this.createElement('div', { attrs: { id: \"e-prompt-item_\" + index, class: \"e-prompt-container \" + (this.promptItemTemplate ? 'e-prompt-item-template' : '') } });\n                this.renderPrompt(promptText, index);\n            }\n        }\n        var lastPrompt = { prompt: promptText, response: outputText };\n        if (lastPrompt.response) {\n            if (this.responseItemTemplate) {\n                this.getContextObject('responseItemTemplate', aiOutputEle, index);\n                if (this.outputElement.querySelector('.e-skeleton')) {\n                    this.outputElement.removeChild(this.skeletonContainer);\n                }\n                if (this.contentFooterEle) {\n                    this.contentFooterEle.classList.remove('e-assist-toolbar-active');\n                }\n                this.renderOutputToolbarItems(index, isFinalUpdate);\n                aiOutputEle.append(this.contentFooterEle);\n                outputContainer.append(aiOutputEle);\n            }\n            else {\n                this.renderOutputTextContainer(lastPrompt.response, aiOutputEle, index, false, isFinalUpdate);\n                outputContainer.append(promptIcon, aiOutputEle);\n            }\n        }\n        else if (this.aiAssistViewRendered) {\n            if (this.outputElement.querySelector('.e-skeleton')) {\n                this.outputElement.removeChild(this.skeletonContainer);\n            }\n            if (this.suggestionsElement) {\n                this.suggestionsElement.hidden = false;\n            }\n        }\n    };\n    AIAssistView.prototype.renderOutputTextContainer = function (response, aiOutputEle, index, isMethodCall, isFinalUpdate) {\n        var _this = this;\n        if (this.contentFooterEle) {\n            this.contentFooterEle.classList.remove('e-assist-toolbar-active');\n        }\n        this.outputContentBodyEle = this.createElement('div', { attrs: { class: 'e-content-body', tabindex: '0' } });\n        if (!isMethodCall) {\n            this.outputContentBodyEle.innerHTML = response;\n            var preTags = Array.from(this.outputContentBodyEle.querySelectorAll('pre'));\n            preTags.forEach(function (preTag) {\n                var copyIcon = document.createElement('span');\n                copyIcon.className = 'e-icons e-code-copy e-assist-copy';\n                preTag.insertBefore(copyIcon, preTag.firstChild);\n                _this.preTagElements.push({ preTag: preTag, handler: _this.getCopyHandler(preTag) });\n                EventHandler.add(copyIcon, 'click', _this.preTagElements[_this.preTagElements.length - 1].handler);\n            });\n        }\n        this.renderOutputToolbarItems(index, isFinalUpdate);\n        this.appendChildren(aiOutputEle, this.outputContentBodyEle, this.contentFooterEle);\n    };\n    AIAssistView.prototype.getCopyHandler = function (preTag) {\n        return function () {\n            var preText = preTag.innerText;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            window.navigator.clipboard.writeText(preText);\n            var copyIcon = preTag.querySelector('.e-code-copy');\n            copyIcon.className = 'e-icons e-code-copy e-assist-check';\n            setTimeout(function () {\n                copyIcon.className = 'e-icons e-code-copy e-assist-copy';\n            }, 1000);\n        };\n    };\n    AIAssistView.prototype.renderOutputToolbarItems = function (index, isFinalUpdate) {\n        this.contentFooterEle = this.createElement('div', { className: 'e-content-footer e-assist-toolbar-active' });\n        var footerContent = this.createElement('div');\n        this.renderResponseToolbar(index);\n        if (this.aiAssistViewRendered) {\n            if (this.outputElement.querySelector('.e-skeleton')) {\n                this.outputElement.removeChild(this.skeletonContainer);\n            }\n            if (isFinalUpdate && this.suggestionsElement) {\n                this.suggestionsElement.hidden = false;\n            }\n        }\n        this.responseToolbarEle.appendTo(footerContent);\n        this.responseToolbarEle.element.setAttribute('aria-label', \"response-toolbar-\" + index);\n        this.contentFooterEle.appendChild(footerContent);\n    };\n    AIAssistView.prototype.renderResponseToolbar = function (index) {\n        var _this = this;\n        var pushToolbar = this.responseToolbarSettings.items.map(function (item) {\n            var toolbarItem = {\n                type: item.type,\n                visible: item.visible,\n                disabled: item.disabled,\n                tooltipText: item.tooltip,\n                template: item.template,\n                prefixIcon: item.iconCss,\n                text: item.text,\n                cssClass: item.cssClass,\n                align: item.align,\n                width: _this.responseToolbarSettings.width\n            };\n            if (toolbarItem.prefixIcon === 'e-icons e-assist-like' && _this.prompts[parseInt(index.toString(), 10)].isResponseHelpful) {\n                toolbarItem.prefixIcon = 'e-icons e-assist-like-filled';\n            }\n            else if (toolbarItem.prefixIcon === 'e-icons e-assist-dislike' && _this.prompts[parseInt(index.toString(), 10)].isResponseHelpful === false) {\n                toolbarItem.prefixIcon = 'e-icons e-assist-dislike-filled';\n            }\n            return toolbarItem;\n        });\n        this.responseToolbarEle = new Toolbar({\n            items: pushToolbar,\n            clicked: function (args) {\n                var eventItemArgs = {\n                    type: args.item.type,\n                    text: args.item.text,\n                    iconCss: args.item.prefixIcon,\n                    cssClass: args.item.cssClass,\n                    tooltip: args.item.tooltipText,\n                    template: args.item.template,\n                    disabled: args.item.disabled,\n                    visible: args.item.visible,\n                    align: args.item.align,\n                    tabIndex: args.item.tabIndex\n                };\n                var eventArgs = {\n                    item: eventItemArgs,\n                    event: args.originalEvent,\n                    cancel: false,\n                    dataIndex: index\n                };\n                if (_this.responseToolbarSettings.itemClicked) {\n                    _this.responseToolbarSettings.itemClicked.call(_this, eventArgs);\n                }\n                if (!eventArgs.cancel) {\n                    _this.handleItemClick(args, index);\n                }\n            }\n        });\n    };\n    AIAssistView.prototype.getClipBoardContent = function (value) {\n        var tempElement = document.createElement('div');\n        tempElement.innerHTML = value;\n        tempElement.style.top = '0';\n        tempElement.style.left = '0';\n        tempElement.style.position = 'fixed';\n        tempElement.style.opacity = '0';\n        document.body.appendChild(tempElement);\n        navigator.clipboard.write([\n            new ClipboardItem({\n                'text/html': new Blob([tempElement.innerHTML], { type: 'text/html' }),\n                'text/plain': new Blob([tempElement.innerText], { type: 'text/plain' })\n            })\n        ]);\n        document.body.removeChild(tempElement);\n    };\n    AIAssistView.prototype.handleItemClick = function (args, index) {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        args.item.controlParent.element.querySelector('.e-assist-dislike');\n        if (args.item.prefixIcon === 'e-icons e-assist-copy') {\n            this.getClipBoardContent(this.prompts[parseInt(index.toString(), 10)].response);\n            args.item.prefixIcon = 'e-icons e-assist-check';\n            this.responseToolbarEle.dataBind();\n            setTimeout(function () {\n                args.item.prefixIcon = 'e-icons e-assist-copy';\n                _this.responseToolbarEle.dataBind();\n            }, 1000);\n        }\n        var icon = args.item.prefixIcon;\n        var isLikeInteracted = icon === 'e-icons e-assist-like-filled' || icon === 'e-icons e-assist-like';\n        var isDislikeInteracted = icon === 'e-icons e-assist-dislike-filled' || icon === 'e-icons e-assist-dislike';\n        if (isLikeInteracted || isDislikeInteracted) {\n            var isHelpful = null;\n            if (isLikeInteracted) {\n                isHelpful = this.prompts[parseInt(index.toString(), 10)].isResponseHelpful === true ? null : true;\n            }\n            else if (isDislikeInteracted) {\n                isHelpful = this.prompts[parseInt(index.toString(), 10)].isResponseHelpful === false ? null : false;\n            }\n            var prevOnChange = this.isProtectedOnChange;\n            this.isProtectedOnChange = true;\n            this.prompts[parseInt(index.toString(), 10)].isResponseHelpful = isHelpful;\n            var promptItem = this.prompts[parseInt(index.toString(), 10)];\n            // eslint-disable-next-line  @typescript-eslint/no-explicit-any\n            var controlParentItems = args.item.controlParent.items;\n            if (isLikeInteracted) {\n                if (promptItem.isResponseHelpful === true) {\n                    args.item.prefixIcon = 'e-icons e-assist-like-filled';\n                    if (controlParentItems && controlParentItems.length > 2) {\n                        controlParentItems[2].prefixIcon = 'e-icons e-assist-dislike';\n                    }\n                }\n                else {\n                    args.item.prefixIcon = 'e-icons e-assist-like';\n                }\n            }\n            else if (isDislikeInteracted) {\n                if (promptItem.isResponseHelpful === false) {\n                    args.item.prefixIcon = 'e-icons e-assist-dislike-filled';\n                    if (controlParentItems && controlParentItems.length > 1) {\n                        controlParentItems[1].prefixIcon = 'e-icons e-assist-like';\n                    }\n                }\n                else {\n                    args.item.prefixIcon = 'e-icons e-assist-dislike';\n                }\n            }\n            this.responseToolbarEle.dataBind();\n            this.isProtectedOnChange = prevOnChange;\n        }\n    };\n    AIAssistView.prototype.renderPrompt = function (promptText, promptIndex) {\n        var outputPrompt = this.createElement('div', { attrs: { class: 'e-prompt-text', tabindex: '0' } });\n        var promptContent = this.createElement('div', { className: 'e-prompt-content' });\n        var promptToolbarContainer = this.createElement('div', { className: 'e-prompt-toolbar' });\n        var promptToolbar = this.createElement('div');\n        var userIcon = this.createElement('span', { className: this.promptIconCss ? 'e-prompt-icon e-icons '\n                + this.promptIconCss : '' });\n        if (this.promptItemTemplate) {\n            this.getContextObject('promptItemTemplate', this.outputSuggestionEle, promptIndex);\n        }\n        else {\n            outputPrompt.innerHTML = promptText;\n            this.appendChildren(promptContent, outputPrompt);\n            if (this.promptIconCss) {\n                promptContent.appendChild(userIcon);\n            }\n            this.outputSuggestionEle.append(promptContent);\n        }\n        this.renderPromptToolbar(promptToolbar, promptIndex);\n        promptToolbarContainer.append(promptToolbar);\n        this.appendChildren(this.outputSuggestionEle, promptToolbarContainer);\n    };\n    AIAssistView.prototype.renderPromptToolbar = function (element, promptIndex) {\n        var _this = this;\n        var pushToolbar = [];\n        if (this.promptToolbarSettings.items.length === 0) {\n            pushToolbar = [\n                { prefixIcon: 'e-icons e-assist-edit', tooltipText: 'Edit' },\n                { prefixIcon: 'e-icons e-assist-copy', tooltipText: 'Copy' }\n            ];\n            var prevOnChange = this.isProtectedOnChange;\n            this.isProtectedOnChange = true;\n            this.promptToolbarSettings.items = [\n                { iconCss: 'e-icons e-assist-edit', tooltip: 'Edit' },\n                { iconCss: 'e-icons e-assist-copy', tooltip: 'Copy' }\n            ];\n            this.isProtectedOnChange = prevOnChange;\n        }\n        else {\n            pushToolbar = this.promptToolbarSettings.items.map(function (item) { return ({\n                type: item.type,\n                template: item.template,\n                disabled: item.disabled,\n                cssClass: item.cssClass,\n                visible: item.visible,\n                tooltipText: item.tooltip,\n                prefixIcon: item.iconCss,\n                text: item.text,\n                align: item.align,\n                width: _this.promptToolbarSettings.width\n            }); });\n        }\n        this.promptToolbarEle = new Toolbar({\n            items: pushToolbar,\n            clicked: function (args) {\n                var eventItemArgs = {\n                    type: args.item.type,\n                    text: args.item.text,\n                    iconCss: args.item.prefixIcon,\n                    cssClass: args.item.cssClass,\n                    tooltip: args.item.tooltipText,\n                    template: args.item.template,\n                    disabled: args.item.disabled,\n                    visible: args.item.visible,\n                    align: args.item.align,\n                    tabIndex: args.item.tabIndex\n                };\n                var eventArgs = {\n                    item: eventItemArgs,\n                    event: args.originalEvent,\n                    cancel: false,\n                    dataIndex: promptIndex\n                };\n                if (_this.promptToolbarSettings.itemClicked) {\n                    _this.promptToolbarSettings.itemClicked.call(_this, eventArgs);\n                }\n                if (!eventArgs.cancel) {\n                    if (args.item.prefixIcon === 'e-icons e-assist-edit') {\n                        _this.onEditIconClick(promptIndex);\n                    }\n                    if (args.item.prefixIcon === 'e-icons e-assist-copy') {\n                        _this.getClipBoardContent(_this.prompts[parseInt(promptIndex.toString(), 10)].prompt);\n                        args.item.prefixIcon = 'e-icons e-assist-check';\n                        _this.promptToolbarEle.dataBind();\n                        setTimeout(function () {\n                            args.item.prefixIcon = 'e-icons e-assist-copy';\n                            _this.promptToolbarEle.dataBind();\n                        }, 1000);\n                    }\n                }\n            }\n        });\n        this.promptToolbarEle.appendTo(element);\n        this.promptToolbarEle.element.setAttribute('aria-label', \"prompt-toolbar-\" + promptIndex);\n    };\n    AIAssistView.prototype.renderSkeleton = function () {\n        this.skeletonContainer = this.createElement('div', { className: 'e-output-container' });\n        var outputViewWrapper = this.createElement('div', { className: 'e-output', styles: 'width: 70%;' });\n        var skeletonIconEle = this.createElement('span', { className: 'e-output-icon e-skeleton e-skeleton-text e-shimmer-wave' });\n        var skeletonBodyEle = this.createElement('div', { className: 'e-loading-body' });\n        var skeletonFooterEle = this.createElement('div', { className: 'e-loading-footer' });\n        var _a = [\n            this.createElement('div', { className: 'e-skeleton e-skeleton-text e-shimmer-wave', styles: 'width: 100%; height: 15px;' }),\n            this.createElement('div', { className: 'e-skeleton e-skeleton-text e-shimmer-wave', styles: 'width: 75%; height: 15px;' }),\n            this.createElement('div', { className: 'e-skeleton e-skeleton-text e-shimmer-wave', styles: 'width: 50%; height: 15px;' })\n        ], skeletonLine1 = _a[0], skeletonLine2 = _a[1], skeletonLine3 = _a[2];\n        var footerSkeleton = [\n            this.createElement('div', { className: 'e-skeleton e-skeleton-text e-shimmer-wave', styles: 'width: 100%; height: 30px;' })\n        ][0];\n        this.appendChildren(skeletonBodyEle, skeletonLine1, skeletonLine2, skeletonLine3);\n        skeletonFooterEle.append(footerSkeleton);\n        this.appendChildren(outputViewWrapper, skeletonBodyEle, skeletonFooterEle);\n        this.appendChildren(this.skeletonContainer, skeletonIconEle, outputViewWrapper);\n    };\n    AIAssistView.prototype.onEditIconClick = function (promptIndex) {\n        if (this.textareaObj) {\n            if (this.suggestionsElement) {\n                this.suggestionsElement.hidden = true;\n            }\n            var prevOnChange = this.isProtectedOnChange;\n            this.isProtectedOnChange = true;\n            this.textareaObj.value = this.prompt = this.prompts[parseInt(promptIndex.toString(), 10)].prompt;\n            this.textareaObj.dataBind();\n            this.updateTextAreaObject();\n            this.textareaObj.focusIn();\n            this.isProtectedOnChange = prevOnChange;\n            this.activateSendIcon(this.prompt.length);\n        }\n    };\n    AIAssistView.prototype.updateIcons = function (newCss, isPromptIconCss) {\n        if (isPromptIconCss === void 0) { isPromptIconCss = false; }\n        var elements;\n        if (this.outputElement) {\n            if (isPromptIconCss) {\n                newCss = 'e-prompt-icon e-icons ' + newCss;\n                elements = this.outputElement.querySelectorAll('.e-prompt-icon');\n            }\n            else {\n                newCss = ' e-output-icon e-icons ' + newCss;\n                elements = this.outputElement.querySelectorAll('.e-output-icon');\n            }\n        }\n        for (var index = 0; index < (elements && elements.length); index++) {\n            removeClass([elements[parseInt(index.toString(), 10)]], elements[parseInt(index.toString(), 10)].classList.toString().trim().split(' '));\n            addClass([elements[parseInt(index.toString(), 10)]], newCss.trim().split(' '));\n        }\n    };\n    AIAssistView.prototype.updateToolbarSettings = function (previousToolbar) {\n        var previousToolbarIndex = 0;\n        for (var index = this.views.length; index < this.toolbarItems.length; index++) {\n            if (previousToolbar.items[parseInt(previousToolbarIndex.toString(), 10)] === this.toolbarItems[parseInt(index.toString(), 10)]) {\n                this.toolbarItems.splice(index, 1);\n            }\n        }\n        this.updateHeaderToolbar();\n        this.toolbar.items = this.toolbarItems;\n    };\n    AIAssistView.prototype.updateResponse = function (response, index, isFinalUpdate, responseItem) {\n        if (!this.responseItemTemplate && responseItem) {\n            var outputContentBodyEle = responseItem.querySelector('.e-content-body');\n            if (outputContentBodyEle) {\n                outputContentBodyEle.innerHTML = response;\n            }\n        }\n        else {\n            this.renderOutputContainer(undefined, response, index, false, isFinalUpdate);\n        }\n    };\n    AIAssistView.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.unWireEvents();\n        this.destroyAndNullify(this.textareaObj);\n        this.destroyAndNullify(this.responseToolbarEle);\n        this.destroyAndNullify(this.promptToolbarEle);\n        this.destroyAndNullify(this.toolbar);\n        this.destroyAssistView();\n        //private html elements nullify\n        remove(this.viewWrapper);\n        this.viewWrapper = null;\n        this.aiAssistViewRendered = null;\n        this.assistViewTemplateIndex = null;\n        this.toolbarItems = [];\n        this.displayContents = [];\n        this.isOutputRenderingStop = null;\n        this.isResponseRequested = null;\n        this.suggestionHeader = null;\n        this.previousElement = null;\n        this.assistCustomSection = null;\n        this.preTagElements = [];\n        // properties nullify\n        this.toolbarSettings = this.promptToolbarSettings = this.responseToolbarSettings = {};\n        if (this.cssClass) {\n            removeClass([this.element], this.cssClass.split(' '));\n        }\n        this.element.classList.remove('e-rtl');\n    };\n    AIAssistView.prototype.destroyAssistView = function () {\n        var properties = [\n            'toolbarHeader',\n            'sendIcon',\n            'suggestions',\n            'skeletonContainer',\n            'outputElement',\n            'outputSuggestionEle',\n            'contentFooterEle',\n            'footer',\n            'assistCustomSection',\n            'content',\n            'stopRespondingContent',\n            'stopResponding',\n            'contentWrapper'\n        ];\n        for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\n            var prop = properties_1[_i];\n            var element = prop;\n            this.removeAndNullify(this[element]);\n            this[element] = null;\n        }\n    };\n    /**\n     * Executes the specified prompt in the AIAssistView component. The method accepts a string representing the prompt.\n     *\n     * @param {string} prompt - The prompt text to be executed. It must be a non-empty string.\n     *\n     * @returns {void}\n     */\n    AIAssistView.prototype.executePrompt = function (prompt) {\n        if (!isNOU(prompt) && prompt.trim().length > 0) {\n            var prevOnChange = this.isProtectedOnChange;\n            this.isProtectedOnChange = true;\n            this.prompt = prompt;\n            this.isProtectedOnChange = prevOnChange;\n            this.onSendIconClick();\n        }\n    };\n    /**\n     * Adds a response to the last prompt or appends a new prompt data in the AIAssistView component.\n     *\n     * @param {string | Object} outputResponse - The response to be added. Can be a string representing the response or an object containing both the prompt and the response.\n     * - If `outputResponse` is a string, it updates the response for the last prompt in the prompts collection.\n     * - If `outputResponse` is an object, it can either update the response of an existing prompt if the prompt matches or append a new prompt data.\n     * @param {boolean} isFinalUpdate - Indicates whether this response is the final one, to hide the stop response button.\n     * @returns {void}\n     */\n    AIAssistView.prototype.addPromptResponse = function (outputResponse, isFinalUpdate) {\n        if (isFinalUpdate === void 0) { isFinalUpdate = true; }\n        var prevOnChange = this.isProtectedOnChange;\n        this.isProtectedOnChange = true;\n        if (!this.isOutputRenderingStop) {\n            var responseItem = this.element.querySelector(\"#e-response-item_\" + (this.prompts.length - 1));\n            var lastPrompt = this.prompts[this.prompts.length - 1];\n            if (typeof outputResponse === 'string') {\n                if (!this.isResponseRequested) {\n                    this.prompts = this.prompts.concat([{ prompt: null, response: null, isResponseHelpful: null }]);\n                    lastPrompt = this.prompts[this.prompts.length - 1];\n                }\n                lastPrompt.response = outputResponse;\n                this.updateResponse(lastPrompt.response, this.prompts.length - 1, isFinalUpdate, responseItem);\n            }\n            if (typeof outputResponse === 'object') {\n                var tPrompt = {\n                    prompt: outputResponse.prompt,\n                    response: outputResponse.response,\n                    isResponseHelpful: isNOU(outputResponse.isResponseHelpful) ? null :\n                        outputResponse.isResponseHelpful\n                };\n                if (this.prompt === tPrompt.prompt || this.lastStreamPrompt === tPrompt.prompt) {\n                    lastPrompt.response = tPrompt.response;\n                    lastPrompt.isResponseHelpful = tPrompt.isResponseHelpful;\n                    this.updateResponse(lastPrompt.response, this.prompts.length - 1, isFinalUpdate, responseItem);\n                }\n                else {\n                    this.prompts = this.prompts.concat([tPrompt]);\n                    this.renderOutputContainer(tPrompt.prompt, tPrompt.response, this.prompts.length - 1, true, isFinalUpdate);\n                }\n                if (!isFinalUpdate) {\n                    this.lastStreamPrompt = tPrompt.prompt;\n                }\n            }\n            if (isFinalUpdate && this.stopResponding) {\n                this.stopResponding.classList.remove('e-btn-active');\n            }\n            this.isResponseRequested = !isFinalUpdate;\n        }\n        this.isProtectedOnChange = prevOnChange;\n    };\n    /**\n     * Scrolls the view to the bottom to display the most recent response in the AIAssistView component.\n     * This method programmatically scrolls the view to the bottom,\n     * typically used when new responses are added or to refocus on the latest response.\n     *\n     * @returns {void}\n     */\n    AIAssistView.prototype.scrollToBottom = function () {\n        this.updateScroll(this.contentWrapper);\n    };\n    /**\n     * Called if any of the property value is changed.\n     *\n     * @param  {AIAssistViewModel} newProp - Specifies new properties\n     * @param  {AIAssistViewModel} oldProp - Specifies old properties\n     * @returns {void}\n     * @private\n     */\n    AIAssistView.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'width':\n                case 'height':\n                    this.setDimension(this.element, this.width, this.height);\n                    break;\n                case 'cssClass':\n                    this.updateCssClass(this.element, newProp.cssClass, oldProp.cssClass);\n                    break;\n                case 'promptIconCss':\n                    this.updateIcons(newProp.promptIconCss, true);\n                    break;\n                case 'responseIconCss':\n                    this.updateIcons(newProp.responseIconCss);\n                    break;\n                case 'showHeader':\n                    this.updateHeader(this.showHeader, this.toolbarHeader, this.viewWrapper);\n                    break;\n                case 'promptSuggestions':\n                    if (this.suggestionsElement) {\n                        this.suggestionsElement.remove();\n                    }\n                    if (!this.isOutputRenderingStop) {\n                        this.renderSuggestions(this.promptSuggestions, this.promptSuggestionsHeader, this.promptSuggestionItemTemplate, 'promptSuggestion', 'promptSuggestionItemTemplate', this.onSuggestionClick);\n                    }\n                    break;\n                case 'showClearButton':\n                    this.textareaObj.showClearButton = this.showClearButton;\n                    break;\n                case 'promptPlaceholder':\n                    this.textareaObj.placeholder = this.promptPlaceholder;\n                    break;\n                case 'promptSuggestionsHeader': {\n                    this.suggestionHeader.innerHTML = this.promptSuggestionsHeader;\n                    var suggestionHeaderElem = this.element.querySelector('.e-suggestions .e-suggestion-header');\n                    if (!suggestionHeaderElem) {\n                        this.suggestionsElement.append(this.suggestionHeader);\n                    }\n                    break;\n                }\n                case 'activeView': {\n                    var previousViewIndex = this.getIndex(oldProp.activeView);\n                    this.updateActiveView(previousViewIndex);\n                    break;\n                }\n                case 'enableRtl':\n                    this.element.classList[this.enableRtl ? 'add' : 'remove']('e-rtl');\n                    if (!isNOU(this.toolbar)) {\n                        this.toolbar.enableRtl = this.enableRtl;\n                        this.toolbar.dataBind();\n                    }\n                    break;\n                case 'toolbarSettings':\n                    this.updateToolbarSettings(oldProp.toolbarSettings);\n                    break;\n                case 'promptToolbarSettings':\n                case 'responseToolbarSettings':\n                case 'prompts':\n                    this.isOutputRenderingStop = false;\n                    if (this.outputElement) {\n                        remove(this.outputElement);\n                    }\n                    if (this.stopResponding) {\n                        this.stopResponding.classList.remove('e-btn-active');\n                    }\n                    this.aiAssistViewRendered = false;\n                    this.renderOutputContent(true);\n                    this.detachCodeCopyEventHandler();\n                    break;\n                case 'prompt':\n                    if (!this.footerTemplate) {\n                        this.textareaObj.value = this.prompt;\n                        this.textareaObj.dataBind();\n                        this.updateTextAreaObject();\n                    }\n                    break;\n                case 'locale':\n                    if (this.assistViewTemplateIndex < 0) {\n                        this.updateStopRespondingTitle();\n                    }\n                    break;\n            }\n        }\n    };\n    __decorate([\n        Property('')\n    ], AIAssistView.prototype, \"prompt\", void 0);\n    __decorate([\n        Property('Type prompt for assistance...')\n    ], AIAssistView.prototype, \"promptPlaceholder\", void 0);\n    __decorate([\n        Collection([], Prompt)\n    ], AIAssistView.prototype, \"prompts\", void 0);\n    __decorate([\n        Property([])\n    ], AIAssistView.prototype, \"promptSuggestions\", void 0);\n    __decorate([\n        Property('')\n    ], AIAssistView.prototype, \"promptSuggestionsHeader\", void 0);\n    __decorate([\n        Property(true)\n    ], AIAssistView.prototype, \"showHeader\", void 0);\n    __decorate([\n        Complex({ items: [] }, ToolbarSettings)\n    ], AIAssistView.prototype, \"toolbarSettings\", void 0);\n    __decorate([\n        Property(0)\n    ], AIAssistView.prototype, \"activeView\", void 0);\n    __decorate([\n        Property(null)\n    ], AIAssistView.prototype, \"promptIconCss\", void 0);\n    __decorate([\n        Property(null)\n    ], AIAssistView.prototype, \"responseIconCss\", void 0);\n    __decorate([\n        Property('100%')\n    ], AIAssistView.prototype, \"width\", void 0);\n    __decorate([\n        Property('100%')\n    ], AIAssistView.prototype, \"height\", void 0);\n    __decorate([\n        Property('')\n    ], AIAssistView.prototype, \"cssClass\", void 0);\n    __decorate([\n        Collection([], AssistView)\n    ], AIAssistView.prototype, \"views\", void 0);\n    __decorate([\n        Complex({ width: null, items: [] }, PromptToolbarSettings)\n    ], AIAssistView.prototype, \"promptToolbarSettings\", void 0);\n    __decorate([\n        Complex({ width: null, items: [] }, ResponseToolbarSettings)\n    ], AIAssistView.prototype, \"responseToolbarSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], AIAssistView.prototype, \"showClearButton\", void 0);\n    __decorate([\n        Property('')\n    ], AIAssistView.prototype, \"footerTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], AIAssistView.prototype, \"promptItemTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], AIAssistView.prototype, \"responseItemTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], AIAssistView.prototype, \"promptSuggestionItemTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], AIAssistView.prototype, \"bannerTemplate\", void 0);\n    __decorate([\n        Event()\n    ], AIAssistView.prototype, \"promptRequest\", void 0);\n    __decorate([\n        Event()\n    ], AIAssistView.prototype, \"promptChanged\", void 0);\n    __decorate([\n        Event()\n    ], AIAssistView.prototype, \"stopRespondingClick\", void 0);\n    AIAssistView = __decorate([\n        NotifyPropertyChanges\n    ], AIAssistView);\n    return AIAssistView;\n}(InterActiveChatBase));\nexport { AIAssistView };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n///<reference path='../interactive-chat-base/interactive-chat-base-model.d.ts'/>\nimport { NotifyPropertyChanges, Property, getUniqueID, isNullOrUndefined as isNOU, EventHandler, L10n } from '@syncfusion/ej2-base';\nimport { Internationalization, ChildProperty, Collection, removeClass, Event, Complex } from '@syncfusion/ej2-base';\nimport { InterActiveChatBase, ToolbarSettings } from '../interactive-chat-base/interactive-chat-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\nimport { Fab } from '@syncfusion/ej2-buttons';\nvar MessageStatus = /** @class */ (function (_super) {\n    __extends(MessageStatus, _super);\n    function MessageStatus() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('')\n    ], MessageStatus.prototype, \"iconCss\", void 0);\n    __decorate([\n        Property('')\n    ], MessageStatus.prototype, \"text\", void 0);\n    __decorate([\n        Property('')\n    ], MessageStatus.prototype, \"tooltip\", void 0);\n    return MessageStatus;\n}(ChildProperty));\nexport { MessageStatus };\n/**\n * Represents a user model for a messages in the chatUI component.\n */\nvar User = /** @class */ (function (_super) {\n    __extends(User, _super);\n    function User() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('')\n    ], User.prototype, \"id\", void 0);\n    __decorate([\n        Property('Default')\n    ], User.prototype, \"user\", void 0);\n    __decorate([\n        Property('')\n    ], User.prototype, \"avatarUrl\", void 0);\n    __decorate([\n        Property('')\n    ], User.prototype, \"avatarBgColor\", void 0);\n    __decorate([\n        Property('')\n    ], User.prototype, \"cssClass\", void 0);\n    return User;\n}(ChildProperty));\nexport { User };\n/**\n *  Represents a model for a messages in the chatUI component.\n */\nvar Message = /** @class */ (function (_super) {\n    __extends(Message, _super);\n    function Message() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('')\n    ], Message.prototype, \"id\", void 0);\n    __decorate([\n        Property('')\n    ], Message.prototype, \"text\", void 0);\n    __decorate([\n        Complex({}, User)\n    ], Message.prototype, \"author\", void 0);\n    __decorate([\n        Property('')\n    ], Message.prototype, \"timeStamp\", void 0);\n    __decorate([\n        Property('')\n    ], Message.prototype, \"timeStampFormat\", void 0);\n    __decorate([\n        Complex({}, MessageStatus)\n    ], Message.prototype, \"status\", void 0);\n    return Message;\n}(ChildProperty));\nexport { Message };\nvar ChatUI = /** @class */ (function (_super) {\n    __extends(ChatUI, _super);\n    /**\n     * Constructor for creating the component\n     *\n     * @param {ChatUIModel} options - Specifies the ChatUIModel model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function ChatUI(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.multiplier = 3;\n        return _this;\n    }\n    /**\n     * Initialize the event handler\n     *\n     * @private\n     * @returns {void}\n     */\n    ChatUI.prototype.preRender = function () {\n        if (!this.element.id) {\n            this.element.id = getUniqueID('e-' + this.getModuleName());\n        }\n    };\n    ChatUI.prototype.getDirective = function () {\n        return 'EJS-CHATUI';\n    };\n    /**\n     * To get component name.\n     *\n     * @returns {string} - It returns the current module name.\n     * @private\n     */\n    ChatUI.prototype.getModuleName = function () {\n        return 'chat-ui';\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @private\n     * @returns {string} - It returns the persisted data.\n     */\n    ChatUI.prototype.getPersistData = function () {\n        return this.addOnPersist([]);\n    };\n    ChatUI.prototype.render = function () {\n        this.renderChatUIView();\n    };\n    ChatUI.prototype.renderChatUIView = function () {\n        this.intl = new Internationalization();\n        this.setDimension(this.element, this.width, this.height);\n        this.renderViewSections(this.element, 'e-chat-header', 'e-chat-content');\n        this.viewWrapper = this.element.querySelector('.e-chat-content');\n        this.chatHeader = this.element.querySelector('.e-chat-header');\n        this.renderChatHeader();\n        this.renderChatContentElement();\n        this.renderChatSuggestionsElement();\n        this.renderChatFooterContent();\n        this.addCssClass(this.element, this.cssClass);\n        this.addRtlClass(this.element, this.enableRtl);\n        this.updateHeader(this.showHeader, this.chatHeader, this.viewWrapper);\n        if (isNOU(this.messages) || this.messages.length <= 0) {\n            this.renderBannerView(this.emptyChatTemplate, this.messageWrapper, 'emptyChatTemplate');\n            this.isEmptyChatTemplateRendered = isNOU(this.messageWrapper.querySelector('.e-empty-chat-template')) ? false : true;\n        }\n        this.wireEvents();\n        this.renderTypingIndicator();\n        this.updateScrollPosition(false, 0);\n    };\n    ChatUI.prototype.updateScrollPosition = function (isMethodCall, timeDelay) {\n        var _this = this;\n        if (this.isReact || this.isAngular) {\n            setTimeout(function () {\n                if (isMethodCall) {\n                    _this.handleAutoScroll();\n                }\n                else {\n                    _this.scrollToBottom();\n                }\n            }, timeDelay);\n        }\n        else {\n            this.scrollToBottom();\n        }\n    };\n    ChatUI.prototype.renderChatHeader = function () {\n        if (this.headerText) {\n            var headerContainer = this.createElement('div', { className: 'e-header' });\n            if (this.headerIconCss) {\n                var iconElement = this.createElement('span', { className: \"e-header-icon e-icons \" + this.headerIconCss });\n                headerContainer.appendChild(iconElement);\n            }\n            var headerTextElement = this.createElement('div', { className: 'e-header-text' });\n            headerTextElement.innerHTML = this.headerText;\n            headerContainer.appendChild(headerTextElement);\n            this.chatHeader.appendChild(headerContainer);\n            this.renderChatHeaderToolbar(headerContainer);\n        }\n    };\n    ChatUI.prototype.renderChatHeaderToolbar = function (headerContainer) {\n        var _this = this;\n        if (!isNOU(this.headerToolbar) && this.headerToolbar.items.length > 0) {\n            var toolbarEle = this.createElement('div', { className: 'e-chat-toolbar' });\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            var pushToolbar = this.headerToolbar.items.map(function (item) { return ({\n                type: item.type,\n                template: item.template,\n                disabled: item.disabled,\n                cssClass: item.cssClass,\n                visible: item.visible,\n                tooltipText: item.tooltip,\n                prefixIcon: item.iconCss,\n                text: item.text,\n                align: item.align\n            }); });\n            this.toolbar = new Toolbar({\n                items: pushToolbar,\n                height: '100%',\n                enableRtl: this.enableRtl,\n                clicked: function (args) {\n                    var eventItemArgs = {\n                        type: args.item.type,\n                        text: args.item.text,\n                        iconCss: args.item.prefixIcon,\n                        cssClass: args.item.cssClass,\n                        tooltip: args.item.tooltipText,\n                        template: args.item.template,\n                        disabled: args.item.disabled,\n                        visible: args.item.visible,\n                        align: args.item.align,\n                        tabIndex: args.item.tabIndex\n                    };\n                    var eventArgs = {\n                        item: eventItemArgs,\n                        event: args.originalEvent,\n                        cancel: false\n                    };\n                    if (_this.headerToolbar.itemClicked) {\n                        _this.headerToolbar.itemClicked.call(_this, eventArgs);\n                    }\n                }\n            });\n            this.toolbar.appendTo(toolbarEle);\n            headerContainer.appendChild(toolbarEle);\n        }\n    };\n    ChatUI.prototype.updateHeaderToolbar = function () {\n        var headerContainer = this.chatHeader.querySelector('.e-header');\n        if (!isNOU(this.toolbar)) {\n            var pushToolbar = this.headerToolbar.items.map(function (item) { return ({\n                type: item.type,\n                template: item.template,\n                disabled: item.disabled,\n                cssClass: item.cssClass,\n                visible: item.visible,\n                tooltipText: item.tooltip,\n                prefixIcon: item.iconCss,\n                text: item.text,\n                align: item.align\n            }); });\n            this.toolbar.items = pushToolbar;\n        }\n        else {\n            this.renderChatHeaderToolbar(headerContainer);\n        }\n    };\n    ChatUI.prototype.renderChatContentElement = function () {\n        this.messageWrapper = this.createElement('div', { className: 'e-message-wrapper', attrs: { 'tabindex': '0' } });\n        this.viewWrapper.prepend(this.messageWrapper);\n        this.content = this.createElement('div', { className: 'e-typing-suggestions' });\n        this.viewWrapper.append(this.content);\n        this.renderScrollDown();\n        this.setChatMsgId();\n        this.renderMessageGroup(this.messageWrapper);\n    };\n    ChatUI.prototype.setChatMsgId = function () {\n        var _this = this;\n        if (this.messages && this.messages.length > 0) {\n            var prevOnChange = this.isProtectedOnChange;\n            this.isProtectedOnChange = true;\n            this.messages = this.messages.map(function (msg, index) {\n                return __assign({}, msg, { id: msg.id || _this.element.id + \"-message-\" + (index + 1) });\n            });\n            this.isProtectedOnChange = prevOnChange;\n        }\n    };\n    ChatUI.prototype.renderScrollDown = function () {\n        var scrollDownButton = this.createElement('button', { id: 'scrollDownButton' });\n        this.downArrowIcon = new Fab({\n            iconCss: 'e-icons e-chat-scroll-down',\n            position: 'BottomRight',\n            target: this.content,\n            isPrimary: false\n        });\n        this.downArrowIcon.appendTo(scrollDownButton);\n    };\n    ChatUI.prototype.loadBatch = function () {\n        for (var i = this.startIndex - 1; i >= 0; i--) {\n            var currIndex = i; // To pass the actual index of the reversed item.\n            var prevIndex = i === this.messages.length - 1 ? -1 : currIndex + 1;\n            this.updateMessageTimeFormats(this.messages[parseInt(i.toString(), 10)], currIndex);\n            var currentMessageDate = this.getMessageDate(currIndex);\n            currentMessageDate.setHours(0, 0, 0, 0);\n            if (Math.min(currIndex, prevIndex) >= 0) {\n                var lastMessageDate = this.getMessageDate(prevIndex);\n                lastMessageDate.setHours(0, 0, 0, 0);\n                if (currentMessageDate.getTime() === lastMessageDate.getTime()) {\n                    var prevTimeBreak = this.messageWrapper.querySelectorAll('.e-timebreak')[0];\n                    if (prevTimeBreak) {\n                        prevTimeBreak.remove();\n                    }\n                }\n            }\n            this.renderGroup(this.messageWrapper, this.messages[parseInt(i.toString(), 10)], true, currIndex, prevIndex);\n            if (this.showTimeBreak) {\n                this.messageWrapper.prepend(this.createTimebreakElement(currentMessageDate));\n            }\n            var viewportHeight = window.innerHeight;\n            var loadHeight = viewportHeight * this.multiplier;\n            this.startIndex = i;\n            if (this.messageWrapper.scrollHeight > loadHeight) {\n                break;\n            }\n        }\n    };\n    ChatUI.prototype.renderMessageGroup = function (chatContentWrapper) {\n        var _this = this;\n        if (this.loadOnDemand) {\n            if (this.messages && this.messages.length <= 0) {\n                return;\n            }\n            createSpinner({ target: this.messageWrapper });\n            this.startIndex = this.messages.length;\n            this.loadBatch();\n        }\n        else {\n            this.messages.forEach(function (msg, i) {\n                _this.renderGroup(chatContentWrapper, msg, false, i, i - 1);\n            });\n        }\n    };\n    ChatUI.prototype.isTimeBreakAdded = function (chatContentWrapper, loadOldChat) {\n        return loadOldChat ?\n            chatContentWrapper.firstElementChild.classList.contains('e-timebreak') :\n            chatContentWrapper.lastElementChild.classList.contains('e-timebreak');\n    };\n    ChatUI.prototype.getLastUser = function (prevIndex) {\n        if (prevIndex >= 0) {\n            return this.messages[parseInt(prevIndex.toString(), 10)].author.id;\n        }\n        return '';\n    };\n    ChatUI.prototype.renderGroup = function (chatContentWrapper, msg, loadOldChat, index, prevIndex) {\n        var messageGroup;\n        if (!loadOldChat) {\n            this.updateMessageTimeFormats(msg, index);\n            this.handleTimeBreak(prevIndex, index, loadOldChat);\n        }\n        if (msg.author.id === this.user.id) {\n            var hasTimeBreak = this.showTimeBreak && this.isTimeBreakAdded(chatContentWrapper, loadOldChat);\n            if ((msg.author.id !== this.getLastUser(prevIndex)) || hasTimeBreak) {\n                messageGroup = this.createElement('div', { className: \"e-message-group e-right \" + (this.messageTemplate ? 'e-message-item-template' : '') });\n                this.manageChatContent(loadOldChat, chatContentWrapper, messageGroup);\n                this.addGroupItems(msg, messageGroup, false, true, index, loadOldChat);\n            }\n            else {\n                var length_1 = this.element.querySelectorAll('.e-message-group.e-right').length;\n                messageGroup = this.element.querySelectorAll('.e-message-group.e-right')[loadOldChat ? 0 : length_1 - 1];\n                this.addGroupItems(msg, messageGroup, false, true, index, loadOldChat);\n            }\n        }\n        else {\n            if (this.getLastUser(prevIndex) !== msg.author.id || this.isTimeVaries(index, prevIndex)) {\n                messageGroup = this.createElement('div', { className: \"e-message-group e-left \" + (this.messageTemplate ? 'e-message-item-template' : '') });\n                var avatarElement = this.createAvatarIcon(msg.author, false);\n                if (!this.messageTemplate) {\n                    messageGroup.prepend(avatarElement);\n                }\n                this.manageChatContent(loadOldChat, chatContentWrapper, messageGroup);\n                if (this.loadOnDemand) {\n                    this.loadLeftGroupOnDemand(msg, loadOldChat, index, messageGroup);\n                }\n                else {\n                    this.createLeftGroupItems(messageGroup, msg, index);\n                    this.addGroupItems(msg, messageGroup, true, false, index, loadOldChat);\n                }\n            }\n            else {\n                var length_2 = this.element.querySelectorAll('.e-message-group.e-left').length;\n                messageGroup = this.element.querySelectorAll('.e-message-group.e-left')[loadOldChat ? 0 : length_2 - 1];\n                if (!loadOldChat) {\n                    this.addGroupItems(msg, messageGroup, false, false, index, loadOldChat);\n                }\n                else {\n                    this.loadLeftGroupOnDemand(msg, loadOldChat, index, messageGroup);\n                }\n            }\n        }\n    };\n    ChatUI.prototype.isTimeVaries = function (index, prevIndex) {\n        var currentMessageDate = this.getMessageDate(index);\n        currentMessageDate.setHours(0, 0, 0, 0);\n        var lastMessageDate = this.getMessageDate(prevIndex);\n        lastMessageDate.setHours(0, 0, 0, 0);\n        return currentMessageDate.getTime() !== lastMessageDate.getTime();\n    };\n    ChatUI.prototype.loadLeftGroupOnDemand = function (msg, loadOldChat, index, messageGroup) {\n        // To check if the previous author is the same as the current author. If not, create a group header.\n        var isAnyMsgPresent = this.messages[parseInt((index - 1).toString(), 10)] ? true : false;\n        var prevAuthorId = isAnyMsgPresent ? this.messages[parseInt((index - 1).toString(), 10)].author.id : '';\n        var shouldCreateHeader = prevAuthorId !== msg.author.id ? true : false;\n        if (shouldCreateHeader || this.isTimeVaries(index, index - 1)) {\n            this.addGroupItems(msg, messageGroup, true, false, index, loadOldChat);\n            this.createLeftGroupItems(messageGroup, msg, index);\n        }\n        else {\n            this.addGroupItems(msg, messageGroup, false, false, index, loadOldChat);\n        }\n    };\n    ChatUI.prototype.createLeftGroupItems = function (messageGroup, msg, index) {\n        if (this.messageTemplate) {\n            return;\n        }\n        var userHeaderContainer = this.createElement('div', {\n            className: 'e-message-header-container'\n        });\n        var userHeader = this.createElement('div', {\n            className: 'e-message-header'\n        });\n        userHeader.innerHTML = msg.author.user;\n        var timeSpan = this.getTimeStampElement(msg.timeStamp\n            ? msg.timeStamp\n            : new Date(), msg.timeStampFormat, index);\n        this.appendChildren(userHeaderContainer, userHeader, timeSpan);\n        this.insertBeforeChildren(messageGroup, userHeaderContainer);\n    };\n    ChatUI.prototype.createAvatarIcon = function (author, isTypingUser) {\n        var userName = author.user.trim();\n        var nameParts = userName.split(' ');\n        var initials = nameParts.length > 1\n            ? \"\" + nameParts[0][0] + nameParts[nameParts.length - 1][0]\n            : userName[0];\n        var avatarIcon = this.createElement((!isNOU(author.avatarUrl) && author.avatarUrl !== '') ? 'img' : 'span', { className: \" \" + (!isTypingUser ? 'e-message-icon' : 'e-user-icon') + \" \" + author.cssClass });\n        if (author.avatarBgColor) {\n            avatarIcon.style.backgroundColor = author.avatarBgColor;\n        }\n        if (!isNOU(author.avatarUrl) && author.avatarUrl !== '') {\n            avatarIcon.src = author.avatarUrl;\n            avatarIcon.alt = userName;\n        }\n        else {\n            avatarIcon.innerHTML = initials;\n        }\n        return avatarIcon;\n    };\n    ChatUI.prototype.getTimeStampElement = function (timeStamp, timeStampFormat, index) {\n        var formattedTime = this.getFormattedTime(timeStamp, timeStampFormat);\n        return this.createElement('div', {\n            className: 'e-time',\n            innerHTML: this.showTimeStamp ? formattedTime : ''\n        });\n    };\n    ChatUI.prototype.updateTimeFormats = function (timeStampFormat, fullTime, index) {\n        if (this.messages[parseInt(index.toString(), 10)]) {\n            var prevOnChange = this.isProtectedOnChange;\n            this.isProtectedOnChange = true;\n            this.messages[parseInt(index.toString(), 10)].timeStamp = this.intl.parseDate(fullTime, { format: 'dd/MM/yyyy hh:mm a' });\n            this.messages[parseInt(index.toString(), 10)].timeStampFormat = timeStampFormat;\n            this.isProtectedOnChange = prevOnChange;\n        }\n    };\n    ChatUI.prototype.getFormattedTime = function (timeStamp, timeStampFormat) {\n        timeStamp = typeof timeStamp === 'string' ? new Date(timeStamp) : timeStamp;\n        return this.intl.formatDate(timeStamp, { format: this.getFormat(timeStampFormat) });\n    };\n    ChatUI.prototype.getFormat = function (timeStampFormat) {\n        var hasValue = !isNOU(timeStampFormat) && timeStampFormat.length > 0;\n        return hasValue ? timeStampFormat\n            : (!isNOU(this.timeStampFormat) && this.timeStampFormat.length) ? this.timeStampFormat : 'dd/MM/yyyy hh:mm a';\n    };\n    ChatUI.prototype.addGroupItems = function (msg, messageGroup, isUserTimeStampRendered, showStatus, index, loadOldChat) {\n        var messageItem = this.createElement('div', { className: 'e-message-item', id: \"\" + msg.id });\n        var messageStatusWrapper = this.createElement('div', { className: 'e-status-wrapper' });\n        var timeSpan = this.getTimeStampElement(msg.timeStamp ? msg.timeStamp : new Date(), msg.timeStampFormat, index);\n        var textElement = this.createElement('div', {\n            className: 'e-text',\n            innerHTML: msg.text\n        });\n        if (this.messageTemplate) {\n            this.getContextObject('messageTemplate', messageGroup, index, msg);\n        }\n        else {\n            if (!isUserTimeStampRendered) {\n                messageItem.appendChild(timeSpan);\n            }\n            if (showStatus) {\n                var messageElement = this.createElement('div', { className: 'e-status-item' });\n                var statusIcon = this.createElement('span', { attrs: { class: \"e-status-icon \" + (msg.status ? msg.status.iconCss : ''), title: \"\" + (msg.status ? msg.status.tooltip : '') } });\n                var statusText = this.createElement('div', { innerHTML: msg.status ? msg.status.text : '', className: 'e-status-text' });\n                this.appendChildren(messageElement, textElement, statusIcon);\n                this.appendChildren(messageStatusWrapper, messageElement, statusText);\n                messageItem.appendChild(messageStatusWrapper);\n            }\n            else {\n                messageItem.appendChild(textElement);\n            }\n            this.manageChatContent(loadOldChat, messageGroup, messageItem);\n        }\n    };\n    ChatUI.prototype.manageChatContent = function (loadOldChat, parentItem, ChildItem) {\n        if (loadOldChat) {\n            parentItem.prepend(ChildItem);\n        }\n        else {\n            parentItem.appendChild(ChildItem);\n        }\n    };\n    ChatUI.prototype.createTimebreakElement = function (date) {\n        var timebreakDiv = this.createElement('div', { className: \"e-timebreak \" + (this.timeBreakTemplate ? 'e-timebreak-template' : '') });\n        var formattedTime = this.getFormattedTime(date, 'MMMM d, yyyy');\n        if (this.timeBreakTemplate) {\n            this.getContextObject('timeBreakTemplate', timebreakDiv, null, null, date);\n        }\n        else {\n            var timeStampEle = this.createElement('span', { className: 'e-timestamp' });\n            timeStampEle.innerHTML = formattedTime;\n            timebreakDiv.appendChild(timeStampEle);\n        }\n        return timebreakDiv;\n    };\n    ChatUI.prototype.handleTimeBreak = function (lastMsgIndex, index, loadOldChat) {\n        if (!this.showTimeBreak) {\n            return;\n        }\n        var currentMessageDate = this.getMessageDate(index);\n        currentMessageDate.setHours(0, 0, 0, 0);\n        if (lastMsgIndex === -1) {\n            this.messageWrapper.appendChild(this.createTimebreakElement(currentMessageDate));\n        }\n        else if (index > 0) {\n            var lastMessageDate = this.getMessageDate(lastMsgIndex);\n            lastMessageDate.setHours(0, 0, 0, 0);\n            if ((currentMessageDate.getTime() !== lastMessageDate.getTime()) && !loadOldChat) {\n                this.messageWrapper.appendChild(this.createTimebreakElement(currentMessageDate));\n            }\n        }\n    };\n    ChatUI.prototype.renderNewMessage = function (msg, index) {\n        if (this.isEmptyChatTemplateRendered) {\n            var introContainer = this.messageWrapper.querySelector('.e-empty-chat-template');\n            this.messageWrapper.removeChild(introContainer);\n            this.isEmptyChatTemplateRendered = false;\n        }\n        this.renderGroup(this.messageWrapper, msg, false, index, index - 1);\n    };\n    ChatUI.prototype.loadMoreMessages = function () {\n        var _this = this;\n        if (this.startIndex <= 0) {\n            return;\n        }\n        var currentScrollOffset = this.messageWrapper.scrollHeight - this.messageWrapper.scrollTop;\n        showSpinner(this.messageWrapper);\n        setTimeout(function () {\n            hideSpinner(_this.messageWrapper);\n            _this.loadBatch();\n            _this.messageWrapper.scrollTop = _this.messageWrapper.scrollHeight - currentScrollOffset;\n        }, 1000);\n    };\n    ChatUI.prototype.updateMessageTimeFormats = function (msg, index) {\n        var fullTime = this.getFormattedTime(msg.timeStamp\n            ? msg.timeStamp\n            : new Date(), 'dd/MM/yyyy hh:mm a');\n        this.updateTimeFormats(msg.timeStampFormat, fullTime, index);\n    };\n    ChatUI.prototype.getMessageDate = function (index) {\n        return new Date(this.messages[parseInt(index.toString(), 10)].timeStamp);\n    };\n    ChatUI.prototype.renderChatSuggestionsElement = function () {\n        if (!isNOU(this.suggestions) && this.suggestions.length > 0) {\n            this.renderSuggestions(this.suggestions, null, this.suggestionTemplate, 'suggestion', 'suggestionTemplate', this.onSuggestionClick);\n        }\n    };\n    ChatUI.prototype.handleSuggestionUpdate = function () {\n        if (this.suggestionsElement) {\n            this.suggestionsElement.remove();\n        }\n        if (!isNOU(this.suggestions) && this.suggestions.length > 0) {\n            this.renderSuggestions(this.suggestions, null, this.suggestionTemplate, 'suggestion', 'suggestionTemplate', this.onSuggestionClick);\n        }\n        this.toggleScrollIcon();\n    };\n    ChatUI.prototype.onSuggestionClick = function (e) {\n        this.suggestionsElement.hidden = true;\n        this.textareaObj.value = e.target.innerText;\n        this.onSendIconClick(e);\n    };\n    ChatUI.prototype.renderChatFooterContent = function () {\n        this.footer = this.getElement('footer');\n        var footerClass = \"e-footer \" + (this.footerTemplate ? 'e-footer-template' : '');\n        this.footer.className = footerClass;\n        this.renderChatFooter();\n        this.viewWrapper.append(this.footer);\n        this.updateFooter(this.showFooter, this.footer);\n    };\n    ChatUI.prototype.renderChatFooter = function () {\n        var _this = this;\n        this.textareaObj = this.renderFooterContent(this.footerTemplate, this.footer, '', this.placeholder, false, this.getRowCount(''), 'e-chat-textarea');\n        var sendIconClass = 'e-chat-send e-icons disabled';\n        if (!this.footerTemplate) {\n            this.sendIcon = this.renderSendIcon(sendIconClass, this.footer);\n        }\n        if (this.textareaObj) {\n            this.textareaObj.input = this.handleInput.bind(this);\n            this.textareaObj.blur = function (args) { return _this.triggerUserTyping(args.event, args.value); };\n            if (!isNOU(this.textareaObj.value)) {\n                this.activateSendIcon(this.textareaObj.value.length);\n            }\n        }\n    };\n    ChatUI.prototype.handleInput = function (args) {\n        this.triggerUserTyping(args.event, args.value);\n        this.activateSendIcon(args.value.length);\n        this.updateTextAreaObject(args.value);\n    };\n    ChatUI.prototype.triggerUserTyping = function (event, value) {\n        var eventArgs = {\n            event: event,\n            message: value,\n            user: this.user,\n            isTyping: event.type === 'blur' ? false : value.length > 0 ? true : false\n        };\n        this.trigger('userTyping', eventArgs);\n    };\n    ChatUI.prototype.renderTypingIndicator = function () {\n        var _this = this;\n        this.l10n = new L10n('chat-ui', {\n            oneUserTyping: '{0} is typing',\n            twoUserTyping: '{0} and {1} are typing',\n            threeUserTyping: '{0}, {1}, and {2} other are typing',\n            multipleUsersTyping: '{0}, {1}, and {2} others are typing'\n        }, this.locale);\n        if (this.indicatorWrapper) {\n            this.indicatorWrapper.remove();\n        }\n        if (!this.typingUsers || this.typingUsers.length === 0) {\n            return;\n        }\n        this.indicatorWrapper = this.createElement('div', {\n            className: \"e-typing-indicator \" + (this.typingUsersTemplate ? 'e-typing-indicator-template' : '')\n        });\n        if (this.typingUsersTemplate) {\n            this.getContextObject('typingUsersTemplate', this.indicatorWrapper, null, null, null);\n        }\n        else {\n            this.typingUsers.slice(0, 3).forEach(function (user) {\n                var avatarElement = _this.createAvatarIcon(user, true);\n                _this.indicatorWrapper.appendChild(avatarElement);\n            });\n            var typingMessage = this.createElement('span', { className: 'e-user-text' });\n            this.indicatorWrapper.appendChild(typingMessage);\n            this.updateUserText();\n            var indicatorContainer = this.createElement('div', { className: 'e-indicator-wrapper' });\n            for (var i = 0; i < 3; i++) {\n                var indicator = this.createElement('span', {\n                    className: 'e-indicator'\n                });\n                this.appendChildren(indicatorContainer, indicator);\n            }\n            this.indicatorWrapper.appendChild(indicatorContainer);\n        }\n        this.content.prepend(this.indicatorWrapper);\n    };\n    ChatUI.prototype.updateUserText = function () {\n        var _this = this;\n        if (this.typingUsersTemplate) {\n            return;\n        }\n        this.l10n.setLocale(this.locale);\n        var userNames = this.typingUsers.filter(function (user) { return user.user !== _this.user.user; })\n            .map(function (user) { return user.user; });\n        var displayText = this.getTypingMessage(userNames);\n        var typingMessage = this.indicatorWrapper.querySelector('.e-user-text');\n        typingMessage.innerHTML = displayText;\n    };\n    ChatUI.prototype.getTypingMessage = function (userNames) {\n        if (userNames.length >= 3) {\n            return this.l10n.getConstant(userNames.length > 3 ? 'multipleUsersTyping' : 'threeUserTyping')\n                .replace('{0}', userNames[0].toString())\n                .replace('{1}', userNames[1].toString())\n                .replace('{2}', (userNames.length - 2).toString());\n        }\n        else {\n            var userTemplate = this.l10n.getConstant(userNames.length === 2 ? 'twoUserTyping' : 'oneUserTyping');\n            return userNames.length === 2\n                ? userTemplate.replace('{0}', userNames[0].toString()).replace('{1}', userNames[1].toString())\n                : userTemplate.replace('{0}', userNames[0].toString());\n        }\n    };\n    ChatUI.prototype.updateTypingUsers = function (users) {\n        var prevOnChange = this.isProtectedOnChange;\n        this.isProtectedOnChange = true;\n        this.typingUsers = users;\n        this.isProtectedOnChange = prevOnChange;\n        this.renderTypingIndicator();\n    };\n    ChatUI.prototype.updateTextAreaObject = function (textValue) {\n        var rowCount = this.getRowCount(textValue);\n        this.textareaObj.rows = rowCount;\n        this.textareaObj.cssClass = (rowCount >= 10) ? 'show-scrollbar' : 'hide-scrollbar';\n    };\n    ChatUI.prototype.getRowCount = function (textValue) {\n        var lines = textValue.split('\\n').length;\n        return (lines < 10 ? (lines >= 1 ? lines : 1) : 10);\n    };\n    ChatUI.prototype.activateSendIcon = function (value) {\n        this.sendIcon.classList.toggle('disabled', value === 0);\n        this.sendIcon.classList.toggle('enabled', value > 0);\n    };\n    ChatUI.prototype.updateHeaderIcon = function () {\n        var existingIconElement = this.element.querySelector('.e-header-icon');\n        if (existingIconElement) {\n            existingIconElement.className = \"e-header-icon e-icons \" + this.headerIconCss;\n        }\n        else {\n            var headerContainer = this.element.querySelector('.e-header');\n            if (headerContainer) {\n                var iconElement = this.createElement('span', {\n                    className: \"e-header-icon e-icons \" + this.headerIconCss\n                });\n                headerContainer.prepend(iconElement);\n            }\n        }\n    };\n    ChatUI.prototype.updateHeaderText = function () {\n        if (this.headerText) {\n            var headerTextEle = this.element.querySelector('.e-header-text');\n            if (headerTextEle) {\n                headerTextEle.innerHTML = this.headerText;\n            }\n        }\n    };\n    ChatUI.prototype.renderUpdatedMessage = function () {\n        this.messageWrapper.innerHTML = '';\n        this.setChatMsgId();\n        this.renderMessageGroup(this.messageWrapper);\n    };\n    ChatUI.prototype.onSendIconClick = function (event) {\n        var _this = this;\n        if (!this.textareaObj.value.trim()) {\n            return;\n        }\n        var newMessageObj = {\n            id: this.element.id + \"-message-\" + (this.messages.length + 1),\n            author: this.user,\n            text: this.textareaObj.value\n        };\n        var prevOnChange = this.isProtectedOnChange;\n        this.textareaObj.value = '';\n        this.activateSendIcon(this.textareaObj.value.length);\n        var eventArgs = {\n            cancel: false,\n            message: newMessageObj\n        };\n        this.triggerUserTyping(event, '');\n        this.trigger('messageSend', eventArgs, function (args) {\n            if (args.cancel) {\n                return;\n            }\n            newMessageObj = args.message;\n            _this.isProtectedOnChange = true;\n            _this.messages = _this.messages.concat([newMessageObj]);\n            _this.isProtectedOnChange = prevOnChange;\n            _this.renderNewMessage(newMessageObj, (_this.messages.length - 1));\n        });\n        if (this.suggestionsElement) {\n            this.suggestionsElement.hidden = false;\n        }\n        // To prevent the issue where scrolling does not move to the bottom in the `messageTemplate` case on Angular and React platforms.\n        this.updateScrollPosition(false, 5);\n    };\n    ChatUI.prototype.getContextObject = function (templateName, contentElement, index, message, currentMessagedate) {\n        var template;\n        var context = {};\n        switch (templateName.toLowerCase()) {\n            case 'messagetemplate': {\n                template = this.messageTemplate;\n                context = { message: message, index: index };\n                break;\n            }\n            case 'timebreaktemplate': {\n                template = this.timeBreakTemplate;\n                context = { messageDate: currentMessagedate };\n                break;\n            }\n            case 'typinguserstemplate': {\n                template = this.typingUsersTemplate;\n                context = { users: this.typingUsers };\n                break;\n            }\n        }\n        this.updateContent(template, contentElement, context, templateName);\n    };\n    ChatUI.prototype.handleAutoScroll = function () {\n        if (this.isScrollAtBottom) {\n            this.updateScroll(this.messageWrapper);\n        }\n        if (this.autoScrollToBottom) {\n            this.updateScroll(this.messageWrapper);\n        }\n        this.toggleScrollIcon();\n    };\n    ChatUI.prototype.footerKeyHandler = function (e) {\n        this.keyHandler(e, 'footer');\n    };\n    ChatUI.prototype.scrollBottomKeyHandler = function (e) {\n        this.keyHandler(e, 'scrollBottom');\n    };\n    ChatUI.prototype.keyHandler = function (event, value) {\n        if (event.key === 'Enter' && !event.shiftKey) {\n            switch (value) {\n                case 'footer':\n                    event.preventDefault();\n                    this.onSendIconClick(event);\n                    this.updateTextAreaObject(this.textareaObj.value);\n                    break;\n                case 'scrollBottom':\n                    this.scrollToBottom();\n                    break;\n            }\n        }\n    };\n    ChatUI.prototype.updateFooter = function (showFooter, footerElement) {\n        if (!showFooter) {\n            footerElement.hidden = true;\n        }\n        else {\n            footerElement.hidden = false;\n        }\n    };\n    ChatUI.prototype.handleScroll = function () {\n        var atBottom = this.checkScrollAtBottom();\n        if (atBottom) {\n            this.toggleClassName(this.downArrowIcon.element, atBottom, 'downArrow');\n            var suggestionEle = this.element.querySelector('.e-suggestions');\n            if (suggestionEle) {\n                this.toggleClassName(suggestionEle, atBottom, 'suggestion');\n                if (!atBottom || !this.isScrollAtBottom) {\n                    this.updateScroll(this.messageWrapper);\n                }\n            }\n        }\n        if (this.loadOnDemand && this.messageWrapper.scrollTop === 0) {\n            this.multiplier += this.multiplier;\n            this.loadMoreMessages();\n        }\n        this.isScrollAtBottom = atBottom;\n    };\n    ChatUI.prototype.checkScrollAtBottom = function () {\n        var scrollThreshold = 5;\n        var scrollTop = Math.floor(this.messageWrapper.scrollTop);\n        var scrollHeight = Math.floor(this.messageWrapper.scrollHeight);\n        var clientHeight = Math.floor(this.messageWrapper.clientHeight);\n        return scrollHeight - scrollTop <= clientHeight + scrollThreshold;\n    };\n    ChatUI.prototype.toggleClassName = function (element, atBottom, name) {\n        switch (name) {\n            case 'downArrow':\n                element.classList.toggle('e-arrowdown-hide', atBottom);\n                element.classList.toggle('e-arrowdown-show', !atBottom);\n                break;\n            case 'suggestion':\n                element.classList.toggle('e-show-suggestions', atBottom);\n                element.classList.toggle('e-hide-suggestions', !atBottom);\n                break;\n            case 'scroll':\n                element.classList.toggle('e-scroll-smooth', !atBottom);\n                break;\n        }\n    };\n    ChatUI.prototype.toggleScrollIcon = function () {\n        var atBottom = this.checkScrollAtBottom();\n        this.toggleClassName(this.downArrowIcon.element, atBottom, 'downArrow');\n        var suggestionEle = this.element.querySelector('.e-suggestions');\n        if (suggestionEle) {\n            this.toggleClassName(suggestionEle, atBottom, 'suggestion');\n            if (atBottom) {\n                this.updateScroll(this.messageWrapper);\n            }\n        }\n        this.isScrollAtBottom = atBottom;\n    };\n    ChatUI.prototype.scrollBtnClick = function () {\n        this.toggleClassName(this.messageWrapper, false, 'scroll');\n        this.scrollToBottom();\n        this.toggleClassName(this.messageWrapper, true, 'scroll');\n    };\n    ChatUI.prototype.updateMessageItem = function (message, msgId) {\n        if (message.author || message.timeStamp || this.messageTemplate) {\n            this.renderUpdatedMessage();\n            return;\n        }\n        var messageItem = this.messageWrapper.querySelector(\"#\" + msgId);\n        if (!messageItem) {\n            return;\n        }\n        if (message.id) {\n            messageItem.id = message.id;\n        }\n        var textElement = messageItem.querySelector('.e-text');\n        if (textElement && message.text) {\n            textElement.innerHTML = message.text;\n        }\n        if (message.status) {\n            var statusTextElement = messageItem.querySelector('.e-status-text');\n            if (statusTextElement && message.status.text) {\n                statusTextElement.innerHTML = message.status.text;\n            }\n            var statusIconElement = messageItem.querySelector('.e-status-icon');\n            if (statusIconElement && message.status.iconCss) {\n                var iconCss = message.status.iconCss;\n                statusIconElement.className = \"e-status-icon \" + iconCss;\n                if (message.status.tooltip) {\n                    statusIconElement.title = message.status.tooltip;\n                }\n            }\n        }\n    };\n    ChatUI.prototype.wireEvents = function () {\n        this.wireFooterEvents(this.sendIcon, this.footer, this.footerTemplate);\n        EventHandler.add(this.messageWrapper, 'scroll', this.handleScroll, this);\n        EventHandler.add(this.downArrowIcon.element, 'click', this.scrollBtnClick, this);\n        EventHandler.add(this.downArrowIcon.element, 'keydown', this.scrollBottomKeyHandler, this);\n    };\n    ChatUI.prototype.unwireEvents = function () {\n        this.unWireFooterEvents(this.sendIcon, this.footer, this.footerTemplate);\n        EventHandler.remove(this.messageWrapper, 'scroll', this.handleScroll);\n        EventHandler.remove(this.downArrowIcon.element, 'click', this.scrollBtnClick);\n        EventHandler.remove(this.downArrowIcon.element, 'keydown', this.scrollBottomKeyHandler);\n    };\n    ChatUI.prototype.destroyChatUI = function () {\n        var properties = [\n            'content',\n            'sendIcon',\n            'footer',\n            'indicatorWrapper',\n            'messageWrapper',\n            'viewWrapper',\n            'chatHeader'\n        ];\n        for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\n            var prop = properties_1[_i];\n            var element = prop;\n            this.removeAndNullify(this[element]);\n            this[element] = null;\n        }\n    };\n    /**\n     * Scrolls to the last message in the conversation area of the Chat UI component.\n     * This method allows programmatic control to ensure the chat view is scrolled to the bottom, typically used when new messages are added or to refocus on the most recent conversation.\n     *\n     * @returns {void}\n     */\n    ChatUI.prototype.scrollToBottom = function () {\n        this.updateScroll(this.messageWrapper);\n        this.toggleScrollIcon();\n    };\n    /**\n     * Appends a new message to the end of the Chat UI conversation area.\n     * This method adds the specified message as the latest entry in the chat:\n     *\n     * @function addMessage\n     * @param {string | MessageModel} message - The message to be added to the conversation. Accepts either a plain text string or a `MessageModel` object.\n     * - If `message` is a string, a `MessageModel` will be automatically created with the current user’s details, and the message will be appended.\n     * - If `message` is an instance of `MessageModel`, it can represent a message from either the current user or another participant and will be appended directly.\n     * @returns {void} No return value.\n     */\n    ChatUI.prototype.addMessage = function (message) {\n        if (isNOU(message)) {\n            return;\n        }\n        var prevOnChange = this.isProtectedOnChange;\n        this.isProtectedOnChange = true;\n        if (typeof message === 'string') {\n            var newMessageObj = {\n                id: this.element.id + \"-message-\" + (this.messages.length + 1),\n                author: this.user,\n                text: message,\n                timeStamp: new Date(),\n                timeStampFormat: this.timeStampFormat\n            };\n            this.messages = this.messages.concat([newMessageObj]);\n            this.renderNewMessage(newMessageObj, (this.messages.length - 1));\n        }\n        else {\n            var newMessageObj = __assign({}, message, { id: message.id || this.element.id + \"-message-\" + (this.messages.length + 1) });\n            this.messages = this.messages.concat([newMessageObj]);\n            this.renderNewMessage(newMessageObj, (this.messages.length - 1));\n        }\n        // To prevent the issue where scrolling does not move to the bottom in the `messageTemplate` case on Angular and React platforms.\n        this.updateScrollPosition(true, 5);\n        this.isProtectedOnChange = prevOnChange;\n    };\n    /**\n     * Updates an existing message in the Chat UI component.\n     * This method allows for modifying a message that has already been added to the conversation.\n     * It requires the unique identifier of the message to be updated and the new message content as a `MessageModel`.\n     *\n     * @function updateMessage\n     * @param {MessageModel} message - The updated message content represented as a `MessageModel`.\n     * @param {string} msgId - The unique identifier of the message to be updated.\n     * @returns {void} No return value.\n     */\n    ChatUI.prototype.updateMessage = function (message, msgId) {\n        var prevOnChange = this.isProtectedOnChange;\n        this.isProtectedOnChange = true;\n        this.messages = this.messages.map(function (messageItem) {\n            return messageItem.id === msgId ? __assign({}, messageItem, message) : messageItem;\n        });\n        this.updateMessageItem(message, msgId);\n        this.isProtectedOnChange = prevOnChange;\n    };\n    /**\n     * Scrolls to a specific message in the Chat UI component based on the provided message ID.\n     * Locates the message with the specified ID and scrolls it to the view.\n     *\n     * @function scrollToMessage\n     * @param {string} messageId - The unique identifier of the message to navigate to the corresponding message rendered in the chat UI.\n     * @returns {void}.\n     */\n    ChatUI.prototype.scrollToMessage = function (messageId) {\n        var messageElement = this.messageWrapper.querySelector(\"#\" + messageId);\n        if (!messageElement) {\n            return;\n        }\n        messageElement.scrollIntoView({\n            behavior: 'smooth',\n            block: 'start'\n        });\n    };\n    /**\n     * Sets focus for the input textarea in the Chat UI component.\n     * Ensures that user input is directed to the chat input field.\n     *\n     * @function focus\n     * @returns {void}.\n     */\n    ChatUI.prototype.focus = function () {\n        if (this.textareaObj) {\n            this.textareaObj.focusIn();\n        }\n    };\n    ChatUI.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.unwireEvents();\n        if (this.cssClass) {\n            removeClass([this.element], this.cssClass.split(' '));\n        }\n        this.element.classList.remove('e-rtl');\n        this.destroyAndNullify(this.textareaObj);\n        this.destroyAndNullify(this.downArrowIcon);\n        this.destroyAndNullify(this.toolbar);\n        this.destroyChatUI();\n        this.intl = null;\n    };\n    /**\n     * Called if any of the property value is changed.\n     *\n     * @param  {ChatUIModel} newProp - Specifies new properties\n     * @param  {ChatUIModel} oldProp - Specifies old properties\n     * @returns {void}\n     * @private\n     */\n    ChatUI.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'width':\n                case 'height':\n                    this.setDimension(this.element, this.width, this.height);\n                    break;\n                case 'placeholder':\n                    if (this.textareaObj) {\n                        this.textareaObj.placeholder = this.placeholder;\n                    }\n                    break;\n                case 'cssClass':\n                    this.updateCssClass(this.element, newProp.cssClass, oldProp.cssClass);\n                    break;\n                case 'enableRtl':\n                    this.element.classList[this.enableRtl ? 'add' : 'remove']('e-rtl');\n                    if (!isNOU(this.toolbar)) {\n                        this.toolbar.enableRtl = this.enableRtl;\n                        this.toolbar.dataBind();\n                    }\n                    break;\n                case 'showHeader':\n                    this.updateHeader(this.showHeader, this.chatHeader, this.viewWrapper);\n                    break;\n                case 'headerText':\n                    this.updateHeaderText();\n                    break;\n                case 'headerIconCss':\n                    this.updateHeaderIcon();\n                    break;\n                case 'messages': {\n                    this.renderUpdatedMessage();\n                    // To prevent the issue where scrolling does not move to the bottom in the `messageTemplate` case on Angular and React platforms.\n                    this.updateScrollPosition(true, 5);\n                    break;\n                }\n                case 'user': {\n                    var newUser = {\n                        id: newProp.user.id,\n                        user: newProp.user.user,\n                        avatarUrl: newProp.user.avatarUrl,\n                        avatarBgColor: newProp.user.avatarBgColor,\n                        cssClass: newProp.user.cssClass\n                    };\n                    this.user = __assign({}, this.user, newUser);\n                    break;\n                }\n                case 'showTimeStamp':\n                case 'timeStampFormat':\n                case 'showTimeBreak':\n                    if (this.messages.length > 0) {\n                        this.renderUpdatedMessage();\n                    }\n                    break;\n                case 'showFooter':\n                    this.updateFooter(this.showFooter, this.footer);\n                    break;\n                case 'autoScrollToBottom':\n                    this.handleAutoScroll();\n                    break;\n                case 'suggestions':\n                    this.handleSuggestionUpdate();\n                    break;\n                case 'typingUsers':\n                    this.updateTypingUsers(this.typingUsers);\n                    break;\n                case 'locale':\n                    if (!this.typingUsers || this.typingUsers.length === 0) {\n                        return;\n                    }\n                    this.updateUserText();\n                    break;\n                case 'headerToolbar':\n                    this.updateHeaderToolbar();\n                    break;\n                case 'currencyCode':\n                    this.refresh();\n                    break;\n            }\n        }\n    };\n    __decorate([\n        Property('100%')\n    ], ChatUI.prototype, \"width\", void 0);\n    __decorate([\n        Property('100%')\n    ], ChatUI.prototype, \"height\", void 0);\n    __decorate([\n        Complex({}, User)\n    ], ChatUI.prototype, \"user\", void 0);\n    __decorate([\n        Property('Chat')\n    ], ChatUI.prototype, \"headerText\", void 0);\n    __decorate([\n        Property('')\n    ], ChatUI.prototype, \"headerIconCss\", void 0);\n    __decorate([\n        Property('Type your message…')\n    ], ChatUI.prototype, \"placeholder\", void 0);\n    __decorate([\n        Property('')\n    ], ChatUI.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(true)\n    ], ChatUI.prototype, \"showHeader\", void 0);\n    __decorate([\n        Property(true)\n    ], ChatUI.prototype, \"showFooter\", void 0);\n    __decorate([\n        Complex({ items: [] }, ToolbarSettings)\n    ], ChatUI.prototype, \"headerToolbar\", void 0);\n    __decorate([\n        Property([])\n    ], ChatUI.prototype, \"suggestions\", void 0);\n    __decorate([\n        Property(false)\n    ], ChatUI.prototype, \"showTimeBreak\", void 0);\n    __decorate([\n        Collection([], Message)\n    ], ChatUI.prototype, \"messages\", void 0);\n    __decorate([\n        Collection([], User)\n    ], ChatUI.prototype, \"typingUsers\", void 0);\n    __decorate([\n        Property('dd/MM/yyyy hh:mm a')\n    ], ChatUI.prototype, \"timeStampFormat\", void 0);\n    __decorate([\n        Property(true)\n    ], ChatUI.prototype, \"showTimeStamp\", void 0);\n    __decorate([\n        Property(false)\n    ], ChatUI.prototype, \"autoScrollToBottom\", void 0);\n    __decorate([\n        Property(false)\n    ], ChatUI.prototype, \"loadOnDemand\", void 0);\n    __decorate([\n        Property('')\n    ], ChatUI.prototype, \"suggestionTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], ChatUI.prototype, \"footerTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], ChatUI.prototype, \"emptyChatTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], ChatUI.prototype, \"messageTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], ChatUI.prototype, \"timeBreakTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], ChatUI.prototype, \"typingUsersTemplate\", void 0);\n    __decorate([\n        Event()\n    ], ChatUI.prototype, \"messageSend\", void 0);\n    __decorate([\n        Event()\n    ], ChatUI.prototype, \"userTyping\", void 0);\n    ChatUI = __decorate([\n        NotifyPropertyChanges\n    ], ChatUI);\n    return ChatUI;\n}(InterActiveChatBase));\nexport { ChatUI };\n"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","this","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","ToolbarItem","_super","apply","Property","ChildProperty","ToolbarSettings","Collection","Event","InterActiveChatBase","options","element","call","preRender","getModuleName","getPersistData","addOnPersist","render","setDimension","width","height","style","isNOU","formatUnit","addCssClass","cssClass","classList","add","addRtlClass","isRtl","updateCssClass","newClass","oldClass","removeClass","trim","split","addClass","updateHeader","showHeader","headerElement","viewWrapper","hidden","renderViewSections","headerClassName","viewClassName","headerWrapper","createElement","className","appendChild","createViewComponents","contentWrapper","viewContainer","updateScroll","scrollElement","scrollTo","scrollHeight","getElement","createSuggestionElement","suggestionHeader","suggestionContainer","suggestionHeaderElement","suggestionListElement","renderSuggestions","suggestionsArray","suggestionTemplate","contextName","templateName","onSuggestionClick","isSuggestionTemplate","_a","suggestionsElement","suggestionContainerClass","suggestionList","renderSuggestionList","innerHTML","append","content","suggestionWrapper","_this","suggestionsListElement","attrs","tabindex","forEach","suggestion","attributes","EventHandler","suggestionItemHandler","suggestionContext","index","parseInt","toString","updateContent","event","shiftKey","renderBannerView","bannerTemplate","parentElement","introContainer","prepend","template","contentElement","context","isReact","clearTemplate","notCompile","isVue","ctn","getTemplateFunction","renderReactTemplates","renderFooterContent","footerTemplate","footer","prompt","promptPlaceholder","showClearButton","rowCount","textareaEle","renderFooter","textareaElement","textareaObj","TextArea","rows","cols","placeholder","resizeMode","value","appendTo","renderSendIcon","sendIconClass","sendIcon","class","role","aria-label","appendChildren","children","_i","insertBeforeChildren","wireFooterEvents","onSendIconClick","footerKeyHandler","unWireFooterEvents","remove","removeAndNullify","parentNode","destroyAndNullify","obj","destroy","tempEle","select","tagName","outerHTML","e","compile","onPropertyChanged","newProp","oldProp","NotifyPropertyChanges","Component","ASSISTHEADER","Prompt","AssistViewType","AssistView","PromptToolbarSettings","ResponseToolbarSettings","AIAssistView","toolbarItems","displayContents","preTagElements","id","getUniqueID","getDirective","renderPromptView","renderViews","renderToolbar","updateTextAreaObject","wireEvents","updateHeaderToolbar","assistViewTemplateIndex","unshift","assistCustomSection","previousElement","activeView","renderHeaderToolbar","querySelector","updateActiveView","toolbarHeader","aiAssistViewRendered","enableRtl","isAssistView","isOutputRenderingStop","isResponseRequested","assistView","customViewTemplate","isAssistViewAssigned","customViewCount","views","type","toLocaleLowerCase","getContextObject","push","text","name","prefixIcon","iconCss","htmlAttributes","data-index","viewTemplate","renderDefaultView","toolbar","Toolbar","items","clicked","args","eventArgs","item","tooltip","tooltipText","disabled","visible","align","tabIndex","originalEvent","cancel","toolbarSettings","itemClicked","prevOnChange","isProtectedOnChange","previousIndex","getIndex","toolbarEle","setAttribute","pushToolbar","map","concat","currentIndex","activeViewIndex","removePreviousView","appendView","tbarEle","stopResponding","removeChild","contentContainer","footerClass","renderContent","renderAssistViewFooter","renderStopResponding","stopRespondingIcon","stopRespondingContent","l10n","L10n","stopResponseText","locale","updateStopRespondingTitle","setLocale","textContent","getConstant","promptSuggestions","promptSuggestionsHeader","promptSuggestionItemTemplate","renderOutputContent","outputElement","renderSkeleton","isMethodCall","responseToolbarSettings","prompts","renderOutputContainer","response","contains","insertBefore","getRowCount","input","handleInput","bind","activateSendIcon","previousValue","trigger","textarea","textValue","lines","toggle","keyHandler","stopResponseKeyHandler","respondingStopper","window","unWireEvents","detachCodeCopyEventHandler","preTag","handler","copyIcon","preventDefault","lastStreamPrompt","hasChildNodes","skeletonContainer","promptIndex","dataIndex","innerText","addPrompt","createOutputElement","responseToolbarItems","dataBind","scrollToBottom","isResponseHelpful","arrayPosition","contextIndex","contextPrompt","contextOutput","toLowerCase","promptItemTemplate","promptToolbarSettings","responseItemTemplate","outputSuggestionEle","renderPrompt","promptText","outputText","isFinalUpdate","outputContainer","renderOutput","promptIcon","responseIconCss","aiOutputEle","lastPrompt","contentFooterEle","renderOutputToolbarItems","renderOutputTextContainer","outputContentBodyEle","from","querySelectorAll","document","firstChild","getCopyHandler","preText","navigator","clipboard","writeText","setTimeout","footerContent","renderResponseToolbar","responseToolbarEle","toolbarItem","handleItemClick","getClipBoardContent","tempElement","top","left","position","opacity","body","write","ClipboardItem","text/html","Blob","text/plain","controlParent","icon","isLikeInteracted","isDislikeInteracted","isHelpful","promptItem","controlParentItems","outputPrompt","promptContent","promptToolbarContainer","promptToolbar","userIcon","promptIconCss","renderPromptToolbar","promptToolbarEle","onEditIconClick","outputViewWrapper","styles","skeletonIconEle","skeletonBodyEle","skeletonFooterEle","skeletonLine1","skeletonLine2","skeletonLine3","footerSkeleton","focusIn","updateIcons","newCss","isPromptIconCss","elements","updateToolbarSettings","previousToolbar","splice","updateResponse","responseItem","undefined","destroyAssistView","properties_1","executePrompt","addPromptResponse","outputResponse","tPrompt","keys","previousViewIndex","Complex","__assign","assign","t","s","n","MessageStatus","User","Message","ChatUI","multiplier","renderChatUIView","intl","Internationalization","chatHeader","renderChatHeader","renderChatContentElement","renderChatSuggestionsElement","renderChatFooterContent","messages","emptyChatTemplate","messageWrapper","isEmptyChatTemplateRendered","renderTypingIndicator","updateScrollPosition","timeDelay","isAngular","handleAutoScroll","headerText","headerContainer","headerIconCss","iconElement","headerTextElement","renderChatHeaderToolbar","headerToolbar","renderScrollDown","setChatMsgId","renderMessageGroup","msg","scrollDownButton","downArrowIcon","Fab","isPrimary","loadBatch","startIndex","currIndex","prevIndex","updateMessageTimeFormats","currentMessageDate","getMessageDate","setHours","Math","min","lastMessageDate","getTime","prevTimeBreak","renderGroup","showTimeBreak","createTimebreakElement","loadHeight","innerHeight","chatContentWrapper","loadOnDemand","createSpinner","isTimeBreakAdded","loadOldChat","firstElementChild","lastElementChild","getLastUser","author","messageGroup","handleTimeBreak","user","hasTimeBreak","messageTemplate","manageChatContent","addGroupItems","length_1","isTimeVaries","avatarElement","createAvatarIcon","loadLeftGroupOnDemand","createLeftGroupItems","length_2","userHeaderContainer","userHeader","timeSpan","getTimeStampElement","timeStamp","Date","timeStampFormat","isTypingUser","userName","nameParts","initials","avatarIcon","avatarUrl","avatarBgColor","backgroundColor","src","alt","formattedTime","getFormattedTime","showTimeStamp","updateTimeFormats","fullTime","parseDate","format","formatDate","getFormat","isUserTimeStampRendered","showStatus","messageItem","messageStatusWrapper","textElement","messageElement","statusIcon","status","title","statusText","parentItem","ChildItem","date","timebreakDiv","timeBreakTemplate","timeStampEle","lastMsgIndex","renderNewMessage","loadMoreMessages","currentScrollOffset","scrollTop","showSpinner","hideSpinner","suggestions","handleSuggestionUpdate","toggleScrollIcon","renderChatFooter","updateFooter","showFooter","blur","triggerUserTyping","message","isTyping","oneUserTyping","twoUserTyping","threeUserTyping","multipleUsersTyping","indicatorWrapper","typingUsers","typingUsersTemplate","slice","typingMessage","updateUserText","indicatorContainer","indicator","userNames","filter","displayText","getTypingMessage","replace","userTemplate","updateTypingUsers","users","updateHeaderIcon","existingIconElement","updateHeaderText","headerTextEle","renderUpdatedMessage","newMessageObj","currentMessagedate","messageDate","isScrollAtBottom","autoScrollToBottom","scrollBottomKeyHandler","footerElement","handleScroll","atBottom","checkScrollAtBottom","toggleClassName","suggestionEle","floor","clientHeight","scrollBtnClick","updateMessageItem","msgId","statusTextElement","statusIconElement","unwireEvents","destroyChatUI","addMessage","updateMessage","scrollToMessage","messageId","scrollIntoView","behavior","block","focus","newUser","refresh"],"mappings":"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"}