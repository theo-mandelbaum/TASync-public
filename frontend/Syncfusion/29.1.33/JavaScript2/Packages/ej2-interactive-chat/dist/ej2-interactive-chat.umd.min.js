!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@syncfusion/ej2-base"),require("@syncfusion/ej2-navigations"),require("@syncfusion/ej2-inputs"),require("@syncfusion/ej2-popups"),require("@syncfusion/ej2-buttons")):"function"==typeof define&&define.amd?define(["exports","@syncfusion/ej2-base","@syncfusion/ej2-navigations","@syncfusion/ej2-inputs","@syncfusion/ej2-popups","@syncfusion/ej2-buttons"],t):t((e=e||self).ej={},e.ej2Base,e.ej2Navigations,e.ej2Inputs,e.ej2Popups,e.ej2Buttons)}(this,function(e,c,r,M,o,U){"use strict";i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])}))(e,t)};var i,t,s=function(e,t){function s(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)},n=function(e,t,s,i){var o,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,s,i);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(n=(r<3?o(n):3<r?o(t,s,n):o(t,s))||n);return 3<r&&n&&Object.defineProperty(t,s,n),n},a=(t=c.ChildProperty,s(p,t),n([c.Property("")],p.prototype,"iconCss",void 0),n([c.Property()],p.prototype,"text",void 0),n([c.Property("Button")],p.prototype,"type",void 0),n([c.Property("Left")],p.prototype,"align",void 0),n([c.Property(!0)],p.prototype,"visible",void 0),n([c.Property(!1)],p.prototype,"disabled",void 0),n([c.Property("")],p.prototype,"tooltip",void 0),n([c.Property("")],p.prototype,"cssClass",void 0),n([c.Property(null)],p.prototype,"template",void 0),n([c.Property(-1)],p.prototype,"tabIndex",void 0),p);function p(){return null!==t&&t.apply(this,arguments)||this}l=c.ChildProperty,s(d,l),n([c.Collection([],a)],d.prototype,"items",void 0),n([c.Event()],d.prototype,"itemClicked",void 0);var l,h=d;function d(){return null!==l&&l.apply(this,arguments)||this}m=c.Component,s(u,m),u.prototype.preRender=function(){},u.prototype.getModuleName=function(){return"interactivechatBase"},u.prototype.getPersistData=function(){return this.addOnPersist([])},u.prototype.render=function(){},u.prototype.setDimension=function(e,t,s){e.style.width=c.isNullOrUndefined(t)?e.style.width:c.formatUnit(t),e.style.height=c.isNullOrUndefined(s)?e.style.height:c.formatUnit(s)},u.prototype.addCssClass=function(e,t){t&&e.classList.add(t)},u.prototype.addRtlClass=function(e,t){t&&e.classList.add("e-rtl")},u.prototype.updateCssClass=function(e,t,s){s&&c.removeClass([e],s.trim().split(" ")),t&&c.addClass([e],t.trim().split(" "))},u.prototype.updateHeader=function(e,t,s){e?(t.hidden=!1,s.style.height=""):(t.hidden=!0,s.style.height="100%")},u.prototype.renderViewSections=function(e,t,s){t=this.createElement("div",{className:t}),e.appendChild(t),t=this.createElement("div",{className:s});e.appendChild(t)},u.prototype.createViewComponents=function(e){var t=this.createElement("div",{className:"e-views"}),s=this.createElement("div",{className:"e-view-container"});t.appendChild(s),e.appendChild(t)},u.prototype.updateScroll=function(e){e.scrollTo(0,e.scrollHeight)},u.prototype.getElement=function(e){var t;switch(e){case"footer":t="e-footer";break;case"contentContainer":t="e-content-container";break;case"outputElement":t="e-content";break;default:t=""}return this.createElement("div",{className:t})},u.prototype.createSuggestionElement=function(e){var t=this.createElement("div",{className:"e-suggestions"}),s=this.createElement("div",{className:"e-suggestion-header"}),i=this.createElement("div",{className:"e-suggestion-list"});return e&&t.appendChild(s),t.appendChild(i),{suggestionContainer:t,suggestionHeaderElement:s,suggestionListElement:i}},u.prototype.renderSuggestions=function(e,t,s,i,o,r){var n,a,p,l=!!s;e&&0<e.length&&(p=(a=this.createSuggestionElement(t)).suggestionContainer,n=a.suggestionHeaderElement,a=a.suggestionListElement,this.suggestionsElement=p,this.suggestionsElement.className="e-suggestions "+(l?"e-suggestion-item-template":""),this.suggestionHeader=n,this.renderSuggestionList(e,p=a,l,i,s,o,r),t&&(this.suggestionHeader.innerHTML=t),this.suggestionsElement.append(p),this.content.append(this.suggestionsElement))},u.prototype.renderSuggestionList=function(o,e,r,n,a,p,l){var h=this,d=this.createElement("ul",{attrs:{tabindex:"-1"}});o.forEach(function(e,t){var s,i=h.createElement("li");c.attributes(i,{tabindex:"0"}),c.EventHandler.add(i,"click",l,h),c.EventHandler.add(i,"keydown",h.suggestionItemHandler,h),r?((s={index:t})[n]=o[parseInt(t.toString(),10)],h.updateContent(a,i,s,p)):i.innerHTML=e,d.append(i)}),e.appendChild(d)},u.prototype.suggestionItemHandler=function(e){"Enter"!==e.key||e.shiftKey||this.onSuggestionClick(e)},u.prototype.renderBannerView=function(e,t,s){var i;e&&(i=this.createElement("div",{className:"emptyChatTemplate"===s?"e-empty-chat-template":"e-banner-view"}),this.updateContent(e,i,{},s),t.prepend(i))},u.prototype.updateContent=function(e,t,s,i){this.isReact&&this.clearTemplate([i]);i=!(this.isReact||this.isVue),e=this.getTemplateFunction(e,i);"string"==typeof e?t.innerHTML=e:c.append(e(s,this),t),this.renderReactTemplates()},u.prototype.renderFooterContent=function(e,t,s,i,o,r,n){return e?(this.updateContent(e,t,{},"footerTemplate"),null):(e=this.createElement("textarea",{className:n}),t.appendChild(e),this.renderFooter(e,s,i,o,r))},u.prototype.renderFooter=function(e,t,s,i,o){o=new M.TextArea({rows:o,cols:300,cssClass:10<=o?"show-scrollbar":"hide-scrollbar",placeholder:s,resizeMode:"None",value:t,showClearButton:i=void 0===i?!1:i});return o.appendTo(e),o},u.prototype.renderSendIcon=function(e,t){e=this.createElement("span",{attrs:{class:e,role:"button","aria-label":"Submit",tabindex:"0"}});return t.appendChild(e),e},u.prototype.appendChildren=function(e){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];e.append.apply(e,t)},u.prototype.insertBeforeChildren=function(e){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];e.prepend.apply(e,t)},u.prototype.wireFooterEvents=function(e,t,s){e&&c.EventHandler.add(e,"click",this.onSendIconClick,this),t&&!s&&c.EventHandler.add(t,"keydown",this.footerKeyHandler,this)},u.prototype.unWireFooterEvents=function(e,t,s){e&&c.EventHandler.remove(e,"click",this.onSendIconClick),t&&!s&&c.EventHandler.remove(t,"keydown",this.footerKeyHandler)},u.prototype.removeAndNullify=function(e){e&&(c.isNullOrUndefined(e.parentNode)?e.innerHTML="":c.remove(e))},u.prototype.destroyAndNullify=function(e){e&&e.destroy()},u.prototype.getTemplateFunction=function(t,e){if("string"!=typeof t)return c.compile(t);var s="";try{var i=c.select(t);i?(s="SCRIPT"===i.tagName?i.innerHTML:i.outerHTML,e=!1):s=t}catch(e){s=t}return e?s:c.compile(s)},u.prototype.onPropertyChanged=function(e,t){},n([c.Event()],u.prototype,"created",void 0);var m,s=n([c.NotifyPropertyChanges],u);function u(e,t){return m.call(this,e,t)||this}W=function(e,t){return(W=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])}))(e,t)};var W,g,n=function(e,t){function s(){this.constructor=e}W(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)},y=function(e,t,s,i){var o,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,s,i);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(n=(r<3?o(n):3<r?o(t,s,n):o(t,s))||n);return 3<r&&n&&Object.defineProperty(t,s,n),n},L="e-aiassist-header-text e-assist-view-header",V=(g=c.ChildProperty,n(v,g),y([c.Property(null)],v.prototype,"prompt",void 0),y([c.Property("")],v.prototype,"response",void 0),y([c.Property(null)],v.prototype,"isResponseHelpful",void 0),v);function v(){return null!==g&&g.apply(this,arguments)||this}(C=e.AssistViewType||(e.AssistViewType={})).Assist="Assist",C.Custom="Custom";f=c.ChildProperty,n(b,f),y([c.Property("Assist")],b.prototype,"type",void 0),y([c.Property("")],b.prototype,"name",void 0),y([c.Property()],b.prototype,"iconCss",void 0),y([c.Property()],b.prototype,"viewTemplate",void 0);var f,C=b;function b(){return null!==f&&f.apply(this,arguments)||this}T=c.ChildProperty,n(w,T),y([c.Property("100%")],w.prototype,"width",void 0),y([c.Collection([],a)],w.prototype,"items",void 0),y([c.Event()],w.prototype,"itemClicked",void 0);var T,F=w;function w(){return null!==T&&T.apply(this,arguments)||this}S=c.ChildProperty,n(E,S),y([c.Property("100%")],E.prototype,"width",void 0),y([c.Collection([],a)],E.prototype,"items",void 0),y([c.Event()],E.prototype,"itemClicked",void 0);var S,q=E;function E(){return null!==S&&S.apply(this,arguments)||this}n(I,D=s),I.prototype.preRender=function(){this.element.id||(this.element.id=c.getUniqueID("e-"+this.getModuleName()))},I.prototype.getDirective=function(){return"EJS-AIASSISTVIEW"},I.prototype.getModuleName=function(){return"aiassistview"},I.prototype.getPersistData=function(){return this.addOnPersist([])},I.prototype.render=function(){this.renderPromptView()},I.prototype.renderPromptView=function(){this.setDimension(this.element,this.width,this.height),this.renderViews(),this.renderToolbar(),this.updateTextAreaObject(),this.wireEvents()},I.prototype.renderToolbar=function(){this.updateHeaderToolbar(),this.assistViewTemplateIndex<0?this.displayContents.unshift(this.contentWrapper):this.displayContents.unshift(this.assistCustomSection),this.previousElement=this.displayContents[this.activeView],this.renderHeaderToolbar(),this.viewWrapper=this.element.querySelector(".e-view-content"),this.updateActiveView(),this.addCssClass(this.element,this.cssClass),this.updateHeader(this.showHeader,this.toolbarHeader,this.viewWrapper),this.aiAssistViewRendered=!0,this.addRtlClass(this.element,this.enableRtl)},I.prototype.renderViews=function(){this.assistViewTemplateIndex=-1,this.aiAssistViewRendered=!1,this.isAssistView=!1,this.isOutputRenderingStop=!1,this.isResponseRequested=!1,this.renderViewSections(this.element,"e-view-header","e-view-content");var e,t,s=!1,i=1;if(0<this.views.length)for(var o=0;o<this.views.length;o++)"assist"!==this.views[parseInt(o.toString(),10)].type.toLocaleLowerCase()||s?"custom"===this.views[parseInt(o.toString(),10)].type.toLocaleLowerCase()&&(t=this.createElement("div",{className:"e-customview-content-section-"+i+" e-custom-view"}),this.getContextObject("customViewTemplate",t,-1,o),this.displayContents.push(t),this.toolbarItems.push({text:this.views[parseInt(o.toString(),10)].name||"",prefixIcon:this.views[parseInt(o.toString(),10)].iconCss||"",cssClass:"e-aiassist-header-text e-custom-view-header",htmlAttributes:{"data-index":this.element.id+"_view_"+i.toString()}}),i++):(e={text:this.views[parseInt(o.toString(),10)].name||"AI Assist",prefixIcon:this.views[parseInt(o.toString(),10)].iconCss||"e-icons e-assistview-icon",cssClass:L,htmlAttributes:{"data-index":this.element.id+"_view_0"}},this.toolbarItems.unshift(e),this.views[parseInt(o.toString(),10)].viewTemplate&&(this.assistViewTemplateIndex=o),this.isAssistView=s=!0);0!==this.views.length&&s||(e={text:"AI Assist",prefixIcon:"e-icons e-assistview-icon",cssClass:L,htmlAttributes:{"data-index":this.element.id+"_view_0"}},this.toolbarItems.unshift(e),s=!0),0<=this.assistViewTemplateIndex&&this.views[this.assistViewTemplateIndex].viewTemplate?(this.assistCustomSection=this.createElement("div",{attrs:{class:"e-assistview-content-section","data-index":this.element.id+"_view_0"}}),this.getContextObject("assistViewTemplate",this.assistCustomSection,-1,this.assistViewTemplateIndex)):this.renderDefaultView()},I.prototype.renderHeaderToolbar=function(){var i=this,e=(this.toolbar=new r.Toolbar({items:this.toolbarItems,height:"100%",enableRtl:this.enableRtl,clicked:function(e){var t,s={item:{type:e.item.type,text:e.item.text,iconCss:e.item.prefixIcon,cssClass:e.item.cssClass,tooltip:e.item.tooltipText,template:e.item.template,disabled:e.item.disabled,visible:e.item.visible,align:e.item.align,tabIndex:e.item.tabIndex},event:e.originalEvent,cancel:!1};i.toolbarSettings.itemClicked&&i.toolbarSettings.itemClicked.call(i,s),s.cancel||e.item.htmlAttributes&&parseInt(e.item.htmlAttributes["data-index"].split(i.element.id+"_view_")[1],10)!==i.activeView&&(s=i.isProtectedOnChange,i.isProtectedOnChange=!0,t=i.getIndex(i.activeView),i.activeView=parseInt(e.item.htmlAttributes["data-index"].split(i.element.id+"_view_")[1],10),i.updateActiveView(t),i.isProtectedOnChange=s)}}),this.toolbarHeader=this.element.querySelector(".e-view-header"),this.createElement("div"));this.toolbar.appendTo(e),this.toolbar.element.setAttribute("aria-label","assist-view-toolbar-header"),this.toolbarHeader.appendChild(e)},I.prototype.updateHeaderToolbar=function(){var e;0<this.toolbarSettings.items.length&&(e=this.toolbarSettings.items.map(function(e){return{type:e.type,template:e.template,disabled:e.disabled,cssClass:e.cssClass,visible:e.visible,tooltipText:e.tooltip,prefixIcon:e.iconCss,text:e.text,align:e.align}}),this.toolbarItems=this.toolbarItems.concat(e))},I.prototype.getIndex=function(e){return e>this.views.length-(this.isAssistView?1:0)||e<0?0:e},I.prototype.updateActiveView=function(e){var t=this.getIndex(this.activeView);this.aiAssistViewRendered?e!==t&&(this.removePreviousView(e,t),this.appendView(t)):(this.appendView(t),this.toolbar.tbarEle[parseInt(t.toString(),10)]&&this.toolbar.tbarEle[parseInt(t.toString(),10)].classList.add("e-active")),this.previousElement=this.displayContents[parseInt(t.toString(),10)]},I.prototype.appendView=function(e){0===e&&this.assistViewTemplateIndex<0?this.viewWrapper.append(this.contentWrapper,this.stopResponding,this.footer):0===e&&0<=this.assistViewTemplateIndex?this.viewWrapper.append(this.assistCustomSection):this.viewWrapper.append(this.displayContents[parseInt(e.toString(),10)])},I.prototype.removePreviousView=function(e,t){this.viewWrapper.removeChild(this.previousElement),0===e&&this.assistViewTemplateIndex<0&&(this.viewWrapper.removeChild(this.stopResponding),this.viewWrapper.removeChild(this.footer)),this.toolbar.tbarEle[parseInt(t.toString(),10)]&&this.toolbar.tbarEle[parseInt(t.toString(),10)].classList.add("e-active"),0<=e&&this.toolbar.tbarEle[parseInt(e.toString(),10)]&&this.toolbar.tbarEle[parseInt(e.toString(),10)].classList.remove("e-active")},I.prototype.renderDefaultView=function(){var e=this.element.querySelector(".e-view-content"),e=(this.createViewComponents(e),this.contentWrapper=this.element.querySelector(".e-views"),this.contentWrapper.setAttribute("data-index",this.element.id+"_view_0"),this.element.querySelector(".e-view-container")),t=(this.content=this.getElement("contentContainer"),this.footer=this.getElement("footer"),"e-footer "+(this.footerTemplate?"e-footer-template":""));this.footer.className=t,this.renderContent(),this.renderAssistViewFooter(),this.renderBannerView(this.bannerTemplate,e,"bannerTemplate"),e.append(this.content),this.renderStopResponding()},I.prototype.renderStopResponding=function(){this.stopResponding=this.createElement("div",{attrs:{class:"e-stop-response",tabIndex:"0","aria-label":"Stop Responding",role:"button"}});var e=this.createElement("span",{className:"e-icons e-assist-stop"});this.stopRespondingContent=this.createElement("span",{className:"e-stop-response-text"}),this.l10n=new c.L10n("aiassistview",{stopResponseText:"Stop Responding"},this.locale),this.updateStopRespondingTitle(),this.appendChildren(this.stopResponding,e,this.stopRespondingContent)},I.prototype.updateStopRespondingTitle=function(){this.l10n.setLocale(this.locale),this.stopRespondingContent.textContent=this.l10n.getConstant("stopResponseText")},I.prototype.renderContent=function(){this.renderSuggestions(this.promptSuggestions,this.promptSuggestionsHeader,this.promptSuggestionItemTemplate,"promptSuggestion","promptSuggestionItemTemplate",this.onSuggestionClick),this.renderOutputContent(),this.outputElement&&this.renderSkeleton()},I.prototype.renderOutputContent=function(e){var t,s=this;this.outputElement=this.getElement("outputElement"),0===this.responseToolbarSettings.items.length&&(t=this.isProtectedOnChange,this.isProtectedOnChange=!0,this.responseToolbarSettings.items=[{iconCss:"e-icons e-assist-copy",tooltip:"Copy",cssClass:"check"},{iconCss:"e-icons e-assist-like",tooltip:"Like"},{iconCss:"e-icons e-assist-dislike",tooltip:"Dislike"}],this.isProtectedOnChange=t),this.prompts&&this.prompts.forEach(function(e,t){s.renderOutputContainer(e.prompt,e.response,t)}),this.suggestionsElement&&this.content.contains(this.suggestionsElement)?this.content.insertBefore(this.outputElement,this.suggestionsElement):this.content.appendChild(this.outputElement),e&&(this.aiAssistViewRendered=!0)},I.prototype.renderAssistViewFooter=function(){this.textareaObj=this.renderFooterContent(this.footerTemplate,this.footer,this.prompt,this.promptPlaceholder,this.showClearButton,this.getRowCount(""),"e-assist-textarea");this.footerTemplate||(this.sendIcon=this.renderSendIcon("e-assist-send e-icons disabled",this.footer)),this.textareaObj&&(this.textareaObj.input=this.handleInput.bind(this),this.activateSendIcon(this.textareaObj.value.length))},I.prototype.handleInput=function(e){var t=this.isProtectedOnChange,t=(this.isProtectedOnChange=!0,this.prompt=e.value,this.isProtectedOnChange=t,this.activateSendIcon(e.value.length),this.updateTextAreaObject(),{value:e.value,previousValue:e.previousValue,event:e.event,element:this.textareaObj.element});this.trigger("promptChanged",t)},I.prototype.updateTextAreaObject=function(){var e;c.isNullOrUndefined(this.textareaObj)||((e=this.textareaObj.element).style.height="auto",e.style.height=e.scrollHeight+"px")},I.prototype.getRowCount=function(e){e=e.split("\n").length;return e<10?1<=e?e:1:10},I.prototype.activateSendIcon=function(e){this.sendIcon.classList.toggle("disabled",0===e),this.sendIcon.classList.toggle("enabled",0<e)},I.prototype.footerKeyHandler=function(e){this.keyHandler(e,"footer")},I.prototype.stopResponseKeyHandler=function(e){this.keyHandler(e,"stopresponse")},I.prototype.wireEvents=function(){this.wireFooterEvents(this.sendIcon,this.footer,this.footerTemplate),this.stopResponding&&(c.EventHandler.add(this.stopResponding,"click",this.respondingStopper,this),c.EventHandler.add(this.stopResponding,"keydown",this.stopResponseKeyHandler,this)),c.EventHandler.add(window,"resize",this.updateTextAreaObject,this)},I.prototype.unWireEvents=function(){this.unWireFooterEvents(this.sendIcon,this.footer,this.footerTemplate),this.stopResponding&&(c.EventHandler.remove(this.stopResponding,"click",this.respondingStopper),c.EventHandler.remove(this.stopResponding,"keydown",this.stopResponseKeyHandler)),c.EventHandler.remove(window,"resize",this.updateTextAreaObject),this.detachCodeCopyEventHandler()},I.prototype.detachCodeCopyEventHandler=function(){this.preTagElements.forEach(function(e){var t=e.preTag,e=e.handler,t=t.querySelector(".e-code-copy");c.EventHandler.remove(t,"click",e)}),this.preTagElements=[]},I.prototype.keyHandler=function(e,t){if("Enter"===e.key&&!e.shiftKey)switch(t){case"footer":e.preventDefault(),this.isResponseRequested||this.onSendIconClick();break;case"stopresponse":this.respondingStopper(e)}},I.prototype.respondingStopper=function(e){this.isOutputRenderingStop=!0,this.isResponseRequested=!1,this.lastStreamPrompt="",this.outputElement.hasChildNodes&&this.element.querySelector(".e-loading-body")&&this.outputElement.removeChild(this.skeletonContainer),this.stopResponding.classList.remove("e-btn-active");var t=this.prompts?this.prompts.length-1:-1,e={event:e,prompt:0<=t?this.prompts[parseInt(t.toString(),10)].prompt:"",dataIndex:this.prompts?this.prompts.length-1:-1};this.trigger("stopRespondingClick",e)},I.prototype.onSuggestionClick=function(e){this.suggestionsElement.hidden=!0;var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.prompt=e.target.innerText,this.isProtectedOnChange=t,this.onSendIconClick()},I.prototype.onSendIconClick=function(){var e,t;!this.isResponseRequested&&this.prompt.trim()&&(this.isResponseRequested=!0,this.lastStreamPrompt="",this.suggestionsElement&&(this.suggestionsElement.hidden=!0),this.isOutputRenderingStop=!1,this.stopResponding.classList.add("e-btn-active"),this.addPrompt(),this.createOutputElement(),e={cancel:!1,responseToolbarItems:this.responseToolbarSettings.items,prompt:this.prompt,promptSuggestions:this.promptSuggestions},this.footerTemplate||(t=this.isProtectedOnChange,this.isProtectedOnChange=!0,this.prompt=this.textareaObj.value="",this.textareaObj.dataBind(),this.isProtectedOnChange=t,this.updateTextAreaObject(),this.activateSendIcon(this.textareaObj.value.length)),this.trigger("promptRequest",e),this.contentWrapper)&&this.scrollToBottom()},I.prototype.addPrompt=function(){var e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.prompts=this.prompts.concat([{prompt:this.prompt,response:"",isResponseHelpful:null}]),this.isProtectedOnChange=e},I.prototype.getContextObject=function(e,t,s,i){var o,r={},n=0<=s?s:-1,a=0<=s?this.prompts[parseInt(n.toString(),10)].prompt:"",p=0<=s?this.prompts[parseInt(n.toString(),10)].response:"";switch(e.toLowerCase()){case"promptitemtemplate":o=this.promptItemTemplate,r={prompt:a,toolbarItems:this.promptToolbarSettings.items,index:n};break;case"responseitemtemplate":o=this.responseItemTemplate,r={prompt:a,response:p,index:n,toolbarItems:this.responseToolbarSettings.items};break;case"customviewtemplate":case"assistviewtemplate":o=this.views[parseInt(i.toString(),10)].viewTemplate||""}this.updateContent(o,t,r,e)},I.prototype.createOutputElement=function(){this.outputSuggestionEle=this.createElement("div",{attrs:{id:"e-prompt-item_"+(this.prompts.length-1),class:"e-prompt-container "+(this.promptItemTemplate?"e-prompt-item-template":"")}}),this.renderPrompt(this.prompt,this.prompts.length-1),this.outputElement.append(this.outputSuggestionEle,this.skeletonContainer),this.skeletonContainer.hidden=!1},I.prototype.renderOutputContainer=function(e,t,s,i,o){var r=this.createElement("div",{attrs:{id:"e-response-item_"+s,class:"e-output-container "+(this.responseItemTemplate?"e-response-item-template":"")}});this.renderOutput(r,e,t,i,s,o),e&&this.outputElement.append(this.outputSuggestionEle),this.outputElement.append(r),this.stopResponding&&o&&this.stopResponding.classList.remove("e-btn-active"),this.isOutputRenderingStop||this.content.contains(this.suggestionsElement)||!this.suggestionsElement||this.content.append(this.suggestionsElement)},I.prototype.renderOutput=function(e,t,s,i,o,r){var n=this.createElement("span",{className:"e-output-icon e-icons "+(this.responseIconCss||this.isAssistView&&this.views[0].iconCss||"e-assistview-icon")}),a=this.createElement("div",{className:"e-output"}),i=(this.aiAssistViewRendered&&!i||c.isNullOrUndefined(t)||(this.outputSuggestionEle=this.createElement("div",{attrs:{id:"e-prompt-item_"+o,class:"e-prompt-container "+(this.promptItemTemplate?"e-prompt-item-template":"")}}),this.renderPrompt(t,o)),{prompt:t,response:s});i.response?this.responseItemTemplate?(this.getContextObject("responseItemTemplate",a,o),this.outputElement.querySelector(".e-skeleton")&&this.outputElement.removeChild(this.skeletonContainer),this.contentFooterEle&&this.contentFooterEle.classList.remove("e-assist-toolbar-active"),this.renderOutputToolbarItems(o,r),a.append(this.contentFooterEle),e.append(a)):(this.renderOutputTextContainer(i.response,a,o,!1,r),e.append(n,a)):this.aiAssistViewRendered&&(this.outputElement.querySelector(".e-skeleton")&&this.outputElement.removeChild(this.skeletonContainer),this.suggestionsElement)&&(this.suggestionsElement.hidden=!1)},I.prototype.renderOutputTextContainer=function(e,t,s,i,o){var r=this;this.contentFooterEle&&this.contentFooterEle.classList.remove("e-assist-toolbar-active"),this.outputContentBodyEle=this.createElement("div",{attrs:{class:"e-content-body",tabindex:"0"}}),i||(this.outputContentBodyEle.innerHTML=e,Array.from(this.outputContentBodyEle.querySelectorAll("pre")).forEach(function(e){var t=document.createElement("span");t.className="e-icons e-code-copy e-assist-copy",e.insertBefore(t,e.firstChild),r.preTagElements.push({preTag:e,handler:r.getCopyHandler(e)}),c.EventHandler.add(t,"click",r.preTagElements[r.preTagElements.length-1].handler)})),this.renderOutputToolbarItems(s,o),this.appendChildren(t,this.outputContentBodyEle,this.contentFooterEle)},I.prototype.getCopyHandler=function(s){return function(){var e=s.innerText,t=(window.navigator.clipboard.writeText(e),s.querySelector(".e-code-copy"));t.className="e-icons e-code-copy e-assist-check",setTimeout(function(){t.className="e-icons e-code-copy e-assist-copy"},1e3)}},I.prototype.renderOutputToolbarItems=function(e,t){this.contentFooterEle=this.createElement("div",{className:"e-content-footer e-assist-toolbar-active"});var s=this.createElement("div");this.renderResponseToolbar(e),this.aiAssistViewRendered&&(this.outputElement.querySelector(".e-skeleton")&&this.outputElement.removeChild(this.skeletonContainer),t)&&this.suggestionsElement&&(this.suggestionsElement.hidden=!1),this.responseToolbarEle.appendTo(s),this.responseToolbarEle.element.setAttribute("aria-label","response-toolbar-"+e),this.contentFooterEle.appendChild(s)},I.prototype.renderResponseToolbar=function(s){var i=this,e=this.responseToolbarSettings.items.map(function(e){e={type:e.type,visible:e.visible,disabled:e.disabled,tooltipText:e.tooltip,template:e.template,prefixIcon:e.iconCss,text:e.text,cssClass:e.cssClass,align:e.align,width:i.responseToolbarSettings.width};return"e-icons e-assist-like"===e.prefixIcon&&i.prompts[parseInt(s.toString(),10)].isResponseHelpful?e.prefixIcon="e-icons e-assist-like-filled":"e-icons e-assist-dislike"===e.prefixIcon&&!1===i.prompts[parseInt(s.toString(),10)].isResponseHelpful&&(e.prefixIcon="e-icons e-assist-dislike-filled"),e});this.responseToolbarEle=new r.Toolbar({items:e,clicked:function(e){var t={item:{type:e.item.type,text:e.item.text,iconCss:e.item.prefixIcon,cssClass:e.item.cssClass,tooltip:e.item.tooltipText,template:e.item.template,disabled:e.item.disabled,visible:e.item.visible,align:e.item.align,tabIndex:e.item.tabIndex},event:e.originalEvent,cancel:!1,dataIndex:s};i.responseToolbarSettings.itemClicked&&i.responseToolbarSettings.itemClicked.call(i,t),t.cancel||i.handleItemClick(e,s)}})},I.prototype.getClipBoardContent=function(e){var t=document.createElement("div");t.innerHTML=e,t.style.top="0",t.style.left="0",t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([t.innerHTML],{type:"text/html"}),"text/plain":new Blob([t.innerText],{type:"text/plain"})})]),document.body.removeChild(t)},I.prototype.handleItemClick=function(e,t){var s,i,o=this,r=(e.item.controlParent.element.querySelector(".e-assist-dislike"),"e-icons e-assist-copy"===e.item.prefixIcon&&(this.getClipBoardContent(this.prompts[parseInt(t.toString(),10)].response),e.item.prefixIcon="e-icons e-assist-check",this.responseToolbarEle.dataBind(),setTimeout(function(){e.item.prefixIcon="e-icons e-assist-copy",o.responseToolbarEle.dataBind()},1e3)),e.item.prefixIcon),n="e-icons e-assist-like-filled"===r||"e-icons e-assist-like"===r,r="e-icons e-assist-dislike-filled"===r||"e-icons e-assist-dislike"===r;(n||r)&&(i=null,n?i=!0!==this.prompts[parseInt(t.toString(),10)].isResponseHelpful||null:r&&(i=!1===this.prompts[parseInt(t.toString(),10)].isResponseHelpful&&null),s=this.isProtectedOnChange,this.isProtectedOnChange=!0,this.prompts[parseInt(t.toString(),10)].isResponseHelpful=i,i=this.prompts[parseInt(t.toString(),10)],t=e.item.controlParent.items,n?!0===i.isResponseHelpful?(e.item.prefixIcon="e-icons e-assist-like-filled",t&&2<t.length&&(t[2].prefixIcon="e-icons e-assist-dislike")):e.item.prefixIcon="e-icons e-assist-like":r&&(!1===i.isResponseHelpful?(e.item.prefixIcon="e-icons e-assist-dislike-filled",t&&1<t.length&&(t[1].prefixIcon="e-icons e-assist-like")):e.item.prefixIcon="e-icons e-assist-dislike"),this.responseToolbarEle.dataBind(),this.isProtectedOnChange=s)},I.prototype.renderPrompt=function(e,t){var s=this.createElement("div",{attrs:{class:"e-prompt-text",tabindex:"0"}}),i=this.createElement("div",{className:"e-prompt-content"}),o=this.createElement("div",{className:"e-prompt-toolbar"}),r=this.createElement("div"),n=this.createElement("span",{className:this.promptIconCss?"e-prompt-icon e-icons "+this.promptIconCss:""});this.promptItemTemplate?this.getContextObject("promptItemTemplate",this.outputSuggestionEle,t):(s.innerHTML=e,this.appendChildren(i,s),this.promptIconCss&&i.appendChild(n),this.outputSuggestionEle.append(i)),this.renderPromptToolbar(r,t),o.append(r),this.appendChildren(this.outputSuggestionEle,o)},I.prototype.renderPromptToolbar=function(e,s){var t,i=this,o=[];0===this.promptToolbarSettings.items.length?(o=[{prefixIcon:"e-icons e-assist-edit",tooltipText:"Edit"},{prefixIcon:"e-icons e-assist-copy",tooltipText:"Copy"}],t=this.isProtectedOnChange,this.isProtectedOnChange=!0,this.promptToolbarSettings.items=[{iconCss:"e-icons e-assist-edit",tooltip:"Edit"},{iconCss:"e-icons e-assist-copy",tooltip:"Copy"}],this.isProtectedOnChange=t):o=this.promptToolbarSettings.items.map(function(e){return{type:e.type,template:e.template,disabled:e.disabled,cssClass:e.cssClass,visible:e.visible,tooltipText:e.tooltip,prefixIcon:e.iconCss,text:e.text,align:e.align,width:i.promptToolbarSettings.width}}),this.promptToolbarEle=new r.Toolbar({items:o,clicked:function(e){var t={item:{type:e.item.type,text:e.item.text,iconCss:e.item.prefixIcon,cssClass:e.item.cssClass,tooltip:e.item.tooltipText,template:e.item.template,disabled:e.item.disabled,visible:e.item.visible,align:e.item.align,tabIndex:e.item.tabIndex},event:e.originalEvent,cancel:!1,dataIndex:s};i.promptToolbarSettings.itemClicked&&i.promptToolbarSettings.itemClicked.call(i,t),t.cancel||("e-icons e-assist-edit"===e.item.prefixIcon&&i.onEditIconClick(s),"e-icons e-assist-copy"===e.item.prefixIcon&&(i.getClipBoardContent(i.prompts[parseInt(s.toString(),10)].prompt),e.item.prefixIcon="e-icons e-assist-check",i.promptToolbarEle.dataBind(),setTimeout(function(){e.item.prefixIcon="e-icons e-assist-copy",i.promptToolbarEle.dataBind()},1e3)))}}),this.promptToolbarEle.appendTo(e),this.promptToolbarEle.element.setAttribute("aria-label","prompt-toolbar-"+s)},I.prototype.renderSkeleton=function(){this.skeletonContainer=this.createElement("div",{className:"e-output-container"});var e=this.createElement("div",{className:"e-output",styles:"width: 70%;"}),t=this.createElement("span",{className:"e-output-icon e-skeleton e-skeleton-text e-shimmer-wave"}),s=this.createElement("div",{className:"e-loading-body"}),i=this.createElement("div",{className:"e-loading-footer"}),o=[this.createElement("div",{className:"e-skeleton e-skeleton-text e-shimmer-wave",styles:"width: 100%; height: 15px;"}),this.createElement("div",{className:"e-skeleton e-skeleton-text e-shimmer-wave",styles:"width: 75%; height: 15px;"}),this.createElement("div",{className:"e-skeleton e-skeleton-text e-shimmer-wave",styles:"width: 50%; height: 15px;"})],r=o[0],n=o[1],o=o[2],a=this.createElement("div",{className:"e-skeleton e-skeleton-text e-shimmer-wave",styles:"width: 100%; height: 30px;"});this.appendChildren(s,r,n,o),i.append(a),this.appendChildren(e,s,i),this.appendChildren(this.skeletonContainer,t,e)},I.prototype.onEditIconClick=function(e){var t;this.textareaObj&&(this.suggestionsElement&&(this.suggestionsElement.hidden=!0),t=this.isProtectedOnChange,this.isProtectedOnChange=!0,this.textareaObj.value=this.prompt=this.prompts[parseInt(e.toString(),10)].prompt,this.textareaObj.dataBind(),this.updateTextAreaObject(),this.textareaObj.focusIn(),this.isProtectedOnChange=t,this.activateSendIcon(this.prompt.length))},I.prototype.updateIcons=function(e,t){var s;void 0===t&&(t=!1),this.outputElement&&(s=t?(e="e-prompt-icon e-icons "+e,this.outputElement.querySelectorAll(".e-prompt-icon")):(e=" e-output-icon e-icons "+e,this.outputElement.querySelectorAll(".e-output-icon")));for(var i=0;i<(s&&s.length);i++)c.removeClass([s[parseInt(i.toString(),10)]],s[parseInt(i.toString(),10)].classList.toString().trim().split(" ")),c.addClass([s[parseInt(i.toString(),10)]],e.trim().split(" "))},I.prototype.updateToolbarSettings=function(e){for(var t=this.views.length;t<this.toolbarItems.length;t++)e.items[parseInt(0..toString(),10)]===this.toolbarItems[parseInt(t.toString(),10)]&&this.toolbarItems.splice(t,1);this.updateHeaderToolbar(),this.toolbar.items=this.toolbarItems},I.prototype.updateResponse=function(e,t,s,i){!this.responseItemTemplate&&i?(i=i.querySelector(".e-content-body"))&&(i.innerHTML=e):this.renderOutputContainer(void 0,e,t,!1,s)},I.prototype.destroy=function(){D.prototype.destroy.call(this),this.unWireEvents(),this.destroyAndNullify(this.textareaObj),this.destroyAndNullify(this.responseToolbarEle),this.destroyAndNullify(this.promptToolbarEle),this.destroyAndNullify(this.toolbar),this.destroyAssistView(),c.remove(this.viewWrapper),this.viewWrapper=null,this.aiAssistViewRendered=null,this.assistViewTemplateIndex=null,this.toolbarItems=[],this.displayContents=[],this.isOutputRenderingStop=null,this.isResponseRequested=null,this.suggestionHeader=null,this.previousElement=null,this.assistCustomSection=null,this.preTagElements=[],this.toolbarSettings=this.promptToolbarSettings=this.responseToolbarSettings={},this.cssClass&&c.removeClass([this.element],this.cssClass.split(" ")),this.element.classList.remove("e-rtl")},I.prototype.destroyAssistView=function(){for(var e=0,t=["toolbarHeader","sendIcon","suggestions","skeletonContainer","outputElement","outputSuggestionEle","contentFooterEle","footer","assistCustomSection","content","stopRespondingContent","stopResponding","contentWrapper"];e<t.length;e++){var s=t[e];this.removeAndNullify(this[s]),this[s]=null}},I.prototype.executePrompt=function(e){var t;!c.isNullOrUndefined(e)&&0<e.trim().length&&(t=this.isProtectedOnChange,this.isProtectedOnChange=!0,this.prompt=e,this.isProtectedOnChange=t,this.onSendIconClick())},I.prototype.addPromptResponse=function(e,t){void 0===t&&(t=!0);var s,i,o=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.isOutputRenderingStop||(s=this.element.querySelector("#e-response-item_"+(this.prompts.length-1)),i=this.prompts[this.prompts.length-1],"string"==typeof e&&(this.isResponseRequested||(this.prompts=this.prompts.concat([{prompt:null,response:null,isResponseHelpful:null}]),i=this.prompts[this.prompts.length-1]),i.response=e,this.updateResponse(i.response,this.prompts.length-1,t,s)),"object"==typeof e&&(e={prompt:e.prompt,response:e.response,isResponseHelpful:c.isNullOrUndefined(e.isResponseHelpful)?null:e.isResponseHelpful},this.prompt===e.prompt||this.lastStreamPrompt===e.prompt?(i.response=e.response,i.isResponseHelpful=e.isResponseHelpful,this.updateResponse(i.response,this.prompts.length-1,t,s)):(this.prompts=this.prompts.concat([e]),this.renderOutputContainer(e.prompt,e.response,this.prompts.length-1,!0,t)),t||(this.lastStreamPrompt=e.prompt)),t&&this.stopResponding&&this.stopResponding.classList.remove("e-btn-active"),this.isResponseRequested=!t),this.isProtectedOnChange=o},I.prototype.scrollToBottom=function(){this.updateScroll(this.contentWrapper)},I.prototype.onPropertyChanged=function(e,t){for(var s=0,i=Object.keys(e);s<i.length;s++)switch(i[s]){case"width":case"height":this.setDimension(this.element,this.width,this.height);break;case"cssClass":this.updateCssClass(this.element,e.cssClass,t.cssClass);break;case"promptIconCss":this.updateIcons(e.promptIconCss,!0);break;case"responseIconCss":this.updateIcons(e.responseIconCss);break;case"showHeader":this.updateHeader(this.showHeader,this.toolbarHeader,this.viewWrapper);break;case"promptSuggestions":this.suggestionsElement&&this.suggestionsElement.remove(),this.isOutputRenderingStop||this.renderSuggestions(this.promptSuggestions,this.promptSuggestionsHeader,this.promptSuggestionItemTemplate,"promptSuggestion","promptSuggestionItemTemplate",this.onSuggestionClick);break;case"showClearButton":this.textareaObj.showClearButton=this.showClearButton;break;case"promptPlaceholder":this.textareaObj.placeholder=this.promptPlaceholder;break;case"promptSuggestionsHeader":this.suggestionHeader.innerHTML=this.promptSuggestionsHeader,this.element.querySelector(".e-suggestions .e-suggestion-header")||this.suggestionsElement.append(this.suggestionHeader);break;case"activeView":var o=this.getIndex(t.activeView);this.updateActiveView(o);break;case"enableRtl":this.element.classList[this.enableRtl?"add":"remove"]("e-rtl"),c.isNullOrUndefined(this.toolbar)||(this.toolbar.enableRtl=this.enableRtl,this.toolbar.dataBind());break;case"toolbarSettings":this.updateToolbarSettings(t.toolbarSettings);break;case"promptToolbarSettings":case"responseToolbarSettings":case"prompts":this.isOutputRenderingStop=!1,this.outputElement&&c.remove(this.outputElement),this.stopResponding&&this.stopResponding.classList.remove("e-btn-active"),this.aiAssistViewRendered=!1,this.renderOutputContent(!0),this.detachCodeCopyEventHandler();break;case"prompt":this.footerTemplate||(this.textareaObj.value=this.prompt,this.textareaObj.dataBind(),this.updateTextAreaObject());break;case"locale":this.assistViewTemplateIndex<0&&this.updateStopRespondingTitle()}},y([c.Property("")],I.prototype,"prompt",void 0),y([c.Property("Type prompt for assistance...")],I.prototype,"promptPlaceholder",void 0),y([c.Collection([],V)],I.prototype,"prompts",void 0),y([c.Property([])],I.prototype,"promptSuggestions",void 0),y([c.Property("")],I.prototype,"promptSuggestionsHeader",void 0),y([c.Property(!0)],I.prototype,"showHeader",void 0),y([c.Complex({items:[]},h)],I.prototype,"toolbarSettings",void 0),y([c.Property(0)],I.prototype,"activeView",void 0),y([c.Property(null)],I.prototype,"promptIconCss",void 0),y([c.Property(null)],I.prototype,"responseIconCss",void 0),y([c.Property("100%")],I.prototype,"width",void 0),y([c.Property("100%")],I.prototype,"height",void 0),y([c.Property("")],I.prototype,"cssClass",void 0),y([c.Collection([],C)],I.prototype,"views",void 0),y([c.Complex({width:null,items:[]},F)],I.prototype,"promptToolbarSettings",void 0),y([c.Complex({width:null,items:[]},q)],I.prototype,"responseToolbarSettings",void 0),y([c.Property(!1)],I.prototype,"showClearButton",void 0),y([c.Property("")],I.prototype,"footerTemplate",void 0),y([c.Property("")],I.prototype,"promptItemTemplate",void 0),y([c.Property("")],I.prototype,"responseItemTemplate",void 0),y([c.Property("")],I.prototype,"promptSuggestionItemTemplate",void 0),y([c.Property("")],I.prototype,"bannerTemplate",void 0),y([c.Event()],I.prototype,"promptRequest",void 0),y([c.Event()],I.prototype,"promptChanged",void 0),y([c.Event()],I.prototype,"stopRespondingClick",void 0);var D,n=y([c.NotifyPropertyChanges],I);function I(e,t){e=D.call(this,e,t)||this;return e.toolbarItems=[],e.displayContents=[],e.preTagElements=[],e}_=function(e,t){return(_=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])}))(e,t)};var _,x,y=function(e,t){function s(){this.constructor=e}_(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)},O=function(){return(O=Object.assign||function(e){for(var t,s=1,i=arguments.length;s<i;s++)for(var o in t=arguments[s])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},P=function(e,t,s,i){var o,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,s,i);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(n=(r<3?o(n):3<r?o(t,s,n):o(t,s))||n);return 3<r&&n&&Object.defineProperty(t,s,n),n},G=(x=c.ChildProperty,y(k,x),P([c.Property("")],k.prototype,"iconCss",void 0),P([c.Property("")],k.prototype,"text",void 0),P([c.Property("")],k.prototype,"tooltip",void 0),k);function k(){return null!==x&&x.apply(this,arguments)||this}H=c.ChildProperty,y(N,H),P([c.Property("")],N.prototype,"id",void 0),P([c.Property("Default")],N.prototype,"user",void 0),P([c.Property("")],N.prototype,"avatarUrl",void 0),P([c.Property("")],N.prototype,"avatarBgColor",void 0),P([c.Property("")],N.prototype,"cssClass",void 0);var H,R=N;function N(){return null!==H&&H.apply(this,arguments)||this}A=c.ChildProperty,y(j,A),P([c.Property("")],j.prototype,"id",void 0),P([c.Property("")],j.prototype,"text",void 0),P([c.Complex({},R)],j.prototype,"author",void 0),P([c.Property("")],j.prototype,"timeStamp",void 0),P([c.Property("")],j.prototype,"timeStampFormat",void 0),P([c.Complex({},G)],j.prototype,"status",void 0);var A,K=j;function j(){return null!==A&&A.apply(this,arguments)||this}y(B,z=s),B.prototype.preRender=function(){this.element.id||(this.element.id=c.getUniqueID("e-"+this.getModuleName()))},B.prototype.getDirective=function(){return"EJS-CHATUI"},B.prototype.getModuleName=function(){return"chat-ui"},B.prototype.getPersistData=function(){return this.addOnPersist([])},B.prototype.render=function(){this.renderChatUIView()},B.prototype.renderChatUIView=function(){this.intl=new c.Internationalization,this.setDimension(this.element,this.width,this.height),this.renderViewSections(this.element,"e-chat-header","e-chat-content"),this.viewWrapper=this.element.querySelector(".e-chat-content"),this.chatHeader=this.element.querySelector(".e-chat-header"),this.renderChatHeader(),this.renderChatContentElement(),this.renderChatSuggestionsElement(),this.renderChatFooterContent(),this.addCssClass(this.element,this.cssClass),this.addRtlClass(this.element,this.enableRtl),this.updateHeader(this.showHeader,this.chatHeader,this.viewWrapper),(c.isNullOrUndefined(this.messages)||this.messages.length<=0)&&(this.renderBannerView(this.emptyChatTemplate,this.messageWrapper,"emptyChatTemplate"),this.isEmptyChatTemplateRendered=!c.isNullOrUndefined(this.messageWrapper.querySelector(".e-empty-chat-template"))),this.wireEvents(),this.renderTypingIndicator(),this.updateScrollPosition(!1,0)},B.prototype.updateScrollPosition=function(e,t){var s=this;this.isReact||this.isAngular?setTimeout(function(){e?s.handleAutoScroll():s.scrollToBottom()},t):this.scrollToBottom()},B.prototype.renderChatHeader=function(){var e,t;this.headerText&&(e=this.createElement("div",{className:"e-header"}),this.headerIconCss&&(t=this.createElement("span",{className:"e-header-icon e-icons "+this.headerIconCss}),e.appendChild(t)),(t=this.createElement("div",{className:"e-header-text"})).innerHTML=this.headerText,e.appendChild(t),this.chatHeader.appendChild(e),this.renderChatHeaderToolbar(e))},B.prototype.renderChatHeaderToolbar=function(e){var t,s,i=this;!c.isNullOrUndefined(this.headerToolbar)&&0<this.headerToolbar.items.length&&(t=this.createElement("div",{className:"e-chat-toolbar"}),s=this.headerToolbar.items.map(function(e){return{type:e.type,template:e.template,disabled:e.disabled,cssClass:e.cssClass,visible:e.visible,tooltipText:e.tooltip,prefixIcon:e.iconCss,text:e.text,align:e.align}}),this.toolbar=new r.Toolbar({items:s,height:"100%",enableRtl:this.enableRtl,clicked:function(e){e={item:{type:e.item.type,text:e.item.text,iconCss:e.item.prefixIcon,cssClass:e.item.cssClass,tooltip:e.item.tooltipText,template:e.item.template,disabled:e.item.disabled,visible:e.item.visible,align:e.item.align,tabIndex:e.item.tabIndex},event:e.originalEvent,cancel:!1};i.headerToolbar.itemClicked&&i.headerToolbar.itemClicked.call(i,e)}}),this.toolbar.appendTo(t),e.appendChild(t))},B.prototype.updateHeaderToolbar=function(){var e=this.chatHeader.querySelector(".e-header");c.isNullOrUndefined(this.toolbar)?this.renderChatHeaderToolbar(e):(e=this.headerToolbar.items.map(function(e){return{type:e.type,template:e.template,disabled:e.disabled,cssClass:e.cssClass,visible:e.visible,tooltipText:e.tooltip,prefixIcon:e.iconCss,text:e.text,align:e.align}}),this.toolbar.items=e)},B.prototype.renderChatContentElement=function(){this.messageWrapper=this.createElement("div",{className:"e-message-wrapper",attrs:{tabindex:"0"}}),this.viewWrapper.prepend(this.messageWrapper),this.content=this.createElement("div",{className:"e-typing-suggestions"}),this.viewWrapper.append(this.content),this.renderScrollDown(),this.setChatMsgId(),this.renderMessageGroup(this.messageWrapper)},B.prototype.setChatMsgId=function(){var e,s=this;this.messages&&0<this.messages.length&&(e=this.isProtectedOnChange,this.isProtectedOnChange=!0,this.messages=this.messages.map(function(e,t){return O({},e,{id:e.id||s.element.id+"-message-"+(t+1)})}),this.isProtectedOnChange=e)},B.prototype.renderScrollDown=function(){var e=this.createElement("button",{id:"scrollDownButton"});this.downArrowIcon=new U.Fab({iconCss:"e-icons e-chat-scroll-down",position:"BottomRight",target:this.content,isPrimary:!1}),this.downArrowIcon.appendTo(e)},B.prototype.loadBatch=function(){for(var e=this.startIndex-1;0<=e;e--){var t=e,s=e===this.messages.length-1?-1:t+1,i=(this.updateMessageTimeFormats(this.messages[parseInt(e.toString(),10)],t),this.getMessageDate(t));i.setHours(0,0,0,0),0<=Math.min(t,s)&&((o=this.getMessageDate(s)).setHours(0,0,0,0),i.getTime()===o.getTime())&&(o=this.messageWrapper.querySelectorAll(".e-timebreak")[0])&&o.remove(),this.renderGroup(this.messageWrapper,this.messages[parseInt(e.toString(),10)],!0,t,s),this.showTimeBreak&&this.messageWrapper.prepend(this.createTimebreakElement(i));var o=window.innerHeight*this.multiplier;if(this.startIndex=e,this.messageWrapper.scrollHeight>o)break}},B.prototype.renderMessageGroup=function(s){var i=this;this.loadOnDemand?this.messages&&this.messages.length<=0||(o.createSpinner({target:this.messageWrapper}),this.startIndex=this.messages.length,this.loadBatch()):this.messages.forEach(function(e,t){i.renderGroup(s,e,!1,t,t-1)})},B.prototype.isTimeBreakAdded=function(e,t){return(t?e.firstElementChild:e.lastElementChild).classList.contains("e-timebreak")},B.prototype.getLastUser=function(e){return 0<=e?this.messages[parseInt(e.toString(),10)].author.id:""},B.prototype.renderGroup=function(e,t,s,i,o){var r,n;s||(this.updateMessageTimeFormats(t,i),this.handleTimeBreak(o,i,s)),t.author.id===this.user.id?(n=this.showTimeBreak&&this.isTimeBreakAdded(e,s),t.author.id!==this.getLastUser(o)||n?(r=this.createElement("div",{className:"e-message-group e-right "+(this.messageTemplate?"e-message-item-template":"")}),this.manageChatContent(s,e,r)):(n=this.element.querySelectorAll(".e-message-group.e-right").length,r=this.element.querySelectorAll(".e-message-group.e-right")[s?0:n-1]),this.addGroupItems(t,r,!1,!0,i,s)):this.getLastUser(o)!==t.author.id||this.isTimeVaries(i,o)?(r=this.createElement("div",{className:"e-message-group e-left "+(this.messageTemplate?"e-message-item-template":"")}),n=this.createAvatarIcon(t.author,!1),this.messageTemplate||r.prepend(n),this.manageChatContent(s,e,r),this.loadOnDemand?this.loadLeftGroupOnDemand(t,s,i,r):(this.createLeftGroupItems(r,t,i),this.addGroupItems(t,r,!0,!1,i,s))):(o=this.element.querySelectorAll(".e-message-group.e-left").length,r=this.element.querySelectorAll(".e-message-group.e-left")[s?0:o-1],s?this.loadLeftGroupOnDemand(t,s,i,r):this.addGroupItems(t,r,!1,!1,i,s))},B.prototype.isTimeVaries=function(e,t){e=this.getMessageDate(e),e.setHours(0,0,0,0),t=this.getMessageDate(t);return t.setHours(0,0,0,0),e.getTime()!==t.getTime()},B.prototype.loadLeftGroupOnDemand=function(e,t,s,i){(!!this.messages[parseInt((s-1).toString(),10)]?this.messages[parseInt((s-1).toString(),10)].author.id:"")!==e.author.id||this.isTimeVaries(s,s-1)?(this.addGroupItems(e,i,!0,!1,s,t),this.createLeftGroupItems(i,e,s)):this.addGroupItems(e,i,!1,!1,s,t)},B.prototype.createLeftGroupItems=function(e,t,s){var i,o;this.messageTemplate||(i=this.createElement("div",{className:"e-message-header-container"}),(o=this.createElement("div",{className:"e-message-header"})).innerHTML=t.author.user,t=this.getTimeStampElement(t.timeStamp||new Date,t.timeStampFormat,s),this.appendChildren(i,o,t),this.insertBeforeChildren(e,i))},B.prototype.createAvatarIcon=function(e,t){var s=e.user.trim(),i=s.split(" "),i=1<i.length?""+i[0][0]+i[i.length-1][0]:s[0],t=this.createElement(c.isNullOrUndefined(e.avatarUrl)||""===e.avatarUrl?"span":"img",{className:" "+(t?"e-user-icon":"e-message-icon")+" "+e.cssClass});return e.avatarBgColor&&(t.style.backgroundColor=e.avatarBgColor),c.isNullOrUndefined(e.avatarUrl)||""===e.avatarUrl?t.innerHTML=i:(t.src=e.avatarUrl,t.alt=s),t},B.prototype.getTimeStampElement=function(e,t,s){e=this.getFormattedTime(e,t);return this.createElement("div",{className:"e-time",innerHTML:this.showTimeStamp?e:""})},B.prototype.updateTimeFormats=function(e,t,s){var i;this.messages[parseInt(s.toString(),10)]&&(i=this.isProtectedOnChange,this.isProtectedOnChange=!0,this.messages[parseInt(s.toString(),10)].timeStamp=this.intl.parseDate(t,{format:"dd/MM/yyyy hh:mm a"}),this.messages[parseInt(s.toString(),10)].timeStampFormat=e,this.isProtectedOnChange=i)},B.prototype.getFormattedTime=function(e,t){return e="string"==typeof e?new Date(e):e,this.intl.formatDate(e,{format:this.getFormat(t)})},B.prototype.getFormat=function(e){return!c.isNullOrUndefined(e)&&0<e.length?e:!c.isNullOrUndefined(this.timeStampFormat)&&this.timeStampFormat.length?this.timeStampFormat:"dd/MM/yyyy hh:mm a"},B.prototype.addGroupItems=function(e,t,s,i,o,r){var n=this.createElement("div",{className:"e-message-item",id:""+e.id}),a=this.createElement("div",{className:"e-status-wrapper"}),p=this.getTimeStampElement(e.timeStamp||new Date,e.timeStampFormat,o),l=this.createElement("div",{className:"e-text",innerHTML:e.text});this.messageTemplate?this.getContextObject("messageTemplate",t,o,e):(s||n.appendChild(p),i?(o=this.createElement("div",{className:"e-status-item"}),s=this.createElement("span",{attrs:{class:"e-status-icon "+(e.status?e.status.iconCss:""),title:""+(e.status?e.status.tooltip:"")}}),p=this.createElement("div",{innerHTML:e.status?e.status.text:"",className:"e-status-text"}),this.appendChildren(o,l,s),this.appendChildren(a,o,p),n.appendChild(a)):n.appendChild(l),this.manageChatContent(r,t,n))},B.prototype.manageChatContent=function(e,t,s){e?t.prepend(s):t.appendChild(s)},B.prototype.createTimebreakElement=function(e){var t=this.createElement("div",{className:"e-timebreak "+(this.timeBreakTemplate?"e-timebreak-template":"")}),s=this.getFormattedTime(e,"MMMM d, yyyy");return this.timeBreakTemplate?this.getContextObject("timeBreakTemplate",t,null,null,e):((e=this.createElement("span",{className:"e-timestamp"})).innerHTML=s,t.appendChild(e)),t},B.prototype.handleTimeBreak=function(e,t,s){var i;this.showTimeBreak&&((i=this.getMessageDate(t)).setHours(0,0,0,0),-1===e?this.messageWrapper.appendChild(this.createTimebreakElement(i)):0<t&&((t=this.getMessageDate(e)).setHours(0,0,0,0),i.getTime()===t.getTime()||s||this.messageWrapper.appendChild(this.createTimebreakElement(i))))},B.prototype.renderNewMessage=function(e,t){var s;this.isEmptyChatTemplateRendered&&(s=this.messageWrapper.querySelector(".e-empty-chat-template"),this.messageWrapper.removeChild(s),this.isEmptyChatTemplateRendered=!1),this.renderGroup(this.messageWrapper,e,!1,t,t-1)},B.prototype.loadMoreMessages=function(){var e,t=this;this.startIndex<=0||(e=this.messageWrapper.scrollHeight-this.messageWrapper.scrollTop,o.showSpinner(this.messageWrapper),setTimeout(function(){o.hideSpinner(t.messageWrapper),t.loadBatch(),t.messageWrapper.scrollTop=t.messageWrapper.scrollHeight-e},1e3))},B.prototype.updateMessageTimeFormats=function(e,t){var s=this.getFormattedTime(e.timeStamp||new Date,"dd/MM/yyyy hh:mm a");this.updateTimeFormats(e.timeStampFormat,s,t)},B.prototype.getMessageDate=function(e){return new Date(this.messages[parseInt(e.toString(),10)].timeStamp)},B.prototype.renderChatSuggestionsElement=function(){!c.isNullOrUndefined(this.suggestions)&&0<this.suggestions.length&&this.renderSuggestions(this.suggestions,null,this.suggestionTemplate,"suggestion","suggestionTemplate",this.onSuggestionClick)},B.prototype.handleSuggestionUpdate=function(){this.suggestionsElement&&this.suggestionsElement.remove(),!c.isNullOrUndefined(this.suggestions)&&0<this.suggestions.length&&this.renderSuggestions(this.suggestions,null,this.suggestionTemplate,"suggestion","suggestionTemplate",this.onSuggestionClick),this.toggleScrollIcon()},B.prototype.onSuggestionClick=function(e){this.suggestionsElement.hidden=!0,this.textareaObj.value=e.target.innerText,this.onSendIconClick(e)},B.prototype.renderChatFooterContent=function(){this.footer=this.getElement("footer");var e="e-footer "+(this.footerTemplate?"e-footer-template":"");this.footer.className=e,this.renderChatFooter(),this.viewWrapper.append(this.footer),this.updateFooter(this.showFooter,this.footer)},B.prototype.renderChatFooter=function(){var t=this;this.textareaObj=this.renderFooterContent(this.footerTemplate,this.footer,"",this.placeholder,!1,this.getRowCount(""),"e-chat-textarea");this.footerTemplate||(this.sendIcon=this.renderSendIcon("e-chat-send e-icons disabled",this.footer)),this.textareaObj&&(this.textareaObj.input=this.handleInput.bind(this),this.textareaObj.blur=function(e){return t.triggerUserTyping(e.event,e.value)},c.isNullOrUndefined(this.textareaObj.value)||this.activateSendIcon(this.textareaObj.value.length))},B.prototype.handleInput=function(e){this.triggerUserTyping(e.event,e.value),this.activateSendIcon(e.value.length),this.updateTextAreaObject(e.value)},B.prototype.triggerUserTyping=function(e,t){e={event:e,message:t,user:this.user,isTyping:"blur"!==e.type&&0<t.length};this.trigger("userTyping",e)},B.prototype.renderTypingIndicator=function(){var t=this;if(this.l10n=new c.L10n("chat-ui",{oneUserTyping:"{0} is typing",twoUserTyping:"{0} and {1} are typing",threeUserTyping:"{0}, {1}, and {2} other are typing",multipleUsersTyping:"{0}, {1}, and {2} others are typing"},this.locale),this.indicatorWrapper&&this.indicatorWrapper.remove(),this.typingUsers&&0!==this.typingUsers.length){if(this.indicatorWrapper=this.createElement("div",{className:"e-typing-indicator "+(this.typingUsersTemplate?"e-typing-indicator-template":"")}),this.typingUsersTemplate)this.getContextObject("typingUsersTemplate",this.indicatorWrapper,null,null,null);else{this.typingUsers.slice(0,3).forEach(function(e){e=t.createAvatarIcon(e,!0);t.indicatorWrapper.appendChild(e)});for(var e=this.createElement("span",{className:"e-user-text"}),s=(this.indicatorWrapper.appendChild(e),this.updateUserText(),this.createElement("div",{className:"e-indicator-wrapper"})),i=0;i<3;i++){var o=this.createElement("span",{className:"e-indicator"});this.appendChildren(s,o)}this.indicatorWrapper.appendChild(s)}this.content.prepend(this.indicatorWrapper)}},B.prototype.updateUserText=function(){var e,t=this;this.typingUsersTemplate||(this.l10n.setLocale(this.locale),e=this.typingUsers.filter(function(e){return e.user!==t.user.user}).map(function(e){return e.user}),e=this.getTypingMessage(e),this.indicatorWrapper.querySelector(".e-user-text").innerHTML=e)},B.prototype.getTypingMessage=function(e){var t;return 3<=e.length?this.l10n.getConstant(3<e.length?"multipleUsersTyping":"threeUserTyping").replace("{0}",e[0].toString()).replace("{1}",e[1].toString()).replace("{2}",(e.length-2).toString()):(t=this.l10n.getConstant(2===e.length?"twoUserTyping":"oneUserTyping"),2===e.length?t.replace("{0}",e[0].toString()).replace("{1}",e[1].toString()):t.replace("{0}",e[0].toString()))},B.prototype.updateTypingUsers=function(e){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.typingUsers=e,this.isProtectedOnChange=t,this.renderTypingIndicator()},B.prototype.updateTextAreaObject=function(e){e=this.getRowCount(e);this.textareaObj.rows=e,this.textareaObj.cssClass=10<=e?"show-scrollbar":"hide-scrollbar"},B.prototype.getRowCount=function(e){e=e.split("\n").length;return e<10?1<=e?e:1:10},B.prototype.activateSendIcon=function(e){this.sendIcon.classList.toggle("disabled",0===e),this.sendIcon.classList.toggle("enabled",0<e)},B.prototype.updateHeaderIcon=function(){var e,t=this.element.querySelector(".e-header-icon");t?t.className="e-header-icon e-icons "+this.headerIconCss:(t=this.element.querySelector(".e-header"))&&(e=this.createElement("span",{className:"e-header-icon e-icons "+this.headerIconCss}),t.prepend(e))},B.prototype.updateHeaderText=function(){var e;this.headerText&&(e=this.element.querySelector(".e-header-text"))&&(e.innerHTML=this.headerText)},B.prototype.renderUpdatedMessage=function(){this.messageWrapper.innerHTML="",this.setChatMsgId(),this.renderMessageGroup(this.messageWrapper)},B.prototype.onSendIconClick=function(e){var t,s,i,o=this;this.textareaObj.value.trim()&&(t={id:this.element.id+"-message-"+(this.messages.length+1),author:this.user,text:this.textareaObj.value},s=this.isProtectedOnChange,this.textareaObj.value="",this.activateSendIcon(this.textareaObj.value.length),i={cancel:!1,message:t},this.triggerUserTyping(e,""),this.trigger("messageSend",i,function(e){e.cancel||(t=e.message,o.isProtectedOnChange=!0,o.messages=o.messages.concat([t]),o.isProtectedOnChange=s,o.renderNewMessage(t,o.messages.length-1))}),this.suggestionsElement&&(this.suggestionsElement.hidden=!1),this.updateScrollPosition(!1,5))},B.prototype.getContextObject=function(e,t,s,i,o){var r,n={};switch(e.toLowerCase()){case"messagetemplate":r=this.messageTemplate,n={message:i,index:s};break;case"timebreaktemplate":r=this.timeBreakTemplate,n={messageDate:o};break;case"typinguserstemplate":r=this.typingUsersTemplate,n={users:this.typingUsers}}this.updateContent(r,t,n,e)},B.prototype.handleAutoScroll=function(){this.isScrollAtBottom&&this.updateScroll(this.messageWrapper),this.autoScrollToBottom&&this.updateScroll(this.messageWrapper),this.toggleScrollIcon()},B.prototype.footerKeyHandler=function(e){this.keyHandler(e,"footer")},B.prototype.scrollBottomKeyHandler=function(e){this.keyHandler(e,"scrollBottom")},B.prototype.keyHandler=function(e,t){if("Enter"===e.key&&!e.shiftKey)switch(t){case"footer":e.preventDefault(),this.onSendIconClick(e),this.updateTextAreaObject(this.textareaObj.value);break;case"scrollBottom":this.scrollToBottom()}},B.prototype.updateFooter=function(e,t){t.hidden=!e},B.prototype.handleScroll=function(){var e,t=this.checkScrollAtBottom();t&&(this.toggleClassName(this.downArrowIcon.element,t,"downArrow"),e=this.element.querySelector(".e-suggestions"))&&(this.toggleClassName(e,t,"suggestion"),t&&this.isScrollAtBottom||this.updateScroll(this.messageWrapper)),this.loadOnDemand&&0===this.messageWrapper.scrollTop&&(this.multiplier+=this.multiplier,this.loadMoreMessages()),this.isScrollAtBottom=t},B.prototype.checkScrollAtBottom=function(){var e=Math.floor(this.messageWrapper.scrollTop);return Math.floor(this.messageWrapper.scrollHeight)-e<=Math.floor(this.messageWrapper.clientHeight)+5},B.prototype.toggleClassName=function(e,t,s){switch(s){case"downArrow":e.classList.toggle("e-arrowdown-hide",t),e.classList.toggle("e-arrowdown-show",!t);break;case"suggestion":e.classList.toggle("e-show-suggestions",t),e.classList.toggle("e-hide-suggestions",!t);break;case"scroll":e.classList.toggle("e-scroll-smooth",!t)}},B.prototype.toggleScrollIcon=function(){var e=this.checkScrollAtBottom(),t=(this.toggleClassName(this.downArrowIcon.element,e,"downArrow"),this.element.querySelector(".e-suggestions"));t&&(this.toggleClassName(t,e,"suggestion"),e)&&this.updateScroll(this.messageWrapper),this.isScrollAtBottom=e},B.prototype.scrollBtnClick=function(){this.toggleClassName(this.messageWrapper,!1,"scroll"),this.scrollToBottom(),this.toggleClassName(this.messageWrapper,!0,"scroll")},B.prototype.updateMessageItem=function(e,t){var s;e.author||e.timeStamp||this.messageTemplate?this.renderUpdatedMessage():(t=this.messageWrapper.querySelector("#"+t))&&(e.id&&(t.id=e.id),(s=t.querySelector(".e-text"))&&e.text&&(s.innerHTML=e.text),e.status)&&((s=t.querySelector(".e-status-text"))&&e.status.text&&(s.innerHTML=e.status.text),s=t.querySelector(".e-status-icon"))&&e.status.iconCss&&(t=e.status.iconCss,s.className="e-status-icon "+t,e.status.tooltip)&&(s.title=e.status.tooltip)},B.prototype.wireEvents=function(){this.wireFooterEvents(this.sendIcon,this.footer,this.footerTemplate),c.EventHandler.add(this.messageWrapper,"scroll",this.handleScroll,this),c.EventHandler.add(this.downArrowIcon.element,"click",this.scrollBtnClick,this),c.EventHandler.add(this.downArrowIcon.element,"keydown",this.scrollBottomKeyHandler,this)},B.prototype.unwireEvents=function(){this.unWireFooterEvents(this.sendIcon,this.footer,this.footerTemplate),c.EventHandler.remove(this.messageWrapper,"scroll",this.handleScroll),c.EventHandler.remove(this.downArrowIcon.element,"click",this.scrollBtnClick),c.EventHandler.remove(this.downArrowIcon.element,"keydown",this.scrollBottomKeyHandler)},B.prototype.destroyChatUI=function(){for(var e=0,t=["content","sendIcon","footer","indicatorWrapper","messageWrapper","viewWrapper","chatHeader"];e<t.length;e++){var s=t[e];this.removeAndNullify(this[s]),this[s]=null}},B.prototype.scrollToBottom=function(){this.updateScroll(this.messageWrapper),this.toggleScrollIcon()},B.prototype.addMessage=function(e){var t;c.isNullOrUndefined(e)||(t=this.isProtectedOnChange,this.isProtectedOnChange=!0,e="string"==typeof e?{id:this.element.id+"-message-"+(this.messages.length+1),author:this.user,text:e,timeStamp:new Date,timeStampFormat:this.timeStampFormat}:O({},e,{id:e.id||this.element.id+"-message-"+(this.messages.length+1)}),this.messages=this.messages.concat([e]),this.renderNewMessage(e,this.messages.length-1),this.updateScrollPosition(!0,5),this.isProtectedOnChange=t)},B.prototype.updateMessage=function(t,s){var e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.messages=this.messages.map(function(e){return e.id===s?O({},e,t):e}),this.updateMessageItem(t,s),this.isProtectedOnChange=e},B.prototype.scrollToMessage=function(e){e=this.messageWrapper.querySelector("#"+e);e&&e.scrollIntoView({behavior:"smooth",block:"start"})},B.prototype.focus=function(){this.textareaObj&&this.textareaObj.focusIn()},B.prototype.destroy=function(){z.prototype.destroy.call(this),this.unwireEvents(),this.cssClass&&c.removeClass([this.element],this.cssClass.split(" ")),this.element.classList.remove("e-rtl"),this.destroyAndNullify(this.textareaObj),this.destroyAndNullify(this.downArrowIcon),this.destroyAndNullify(this.toolbar),this.destroyChatUI(),this.intl=null},B.prototype.onPropertyChanged=function(e,t){for(var s=0,i=Object.keys(e);s<i.length;s++)switch(i[s]){case"width":case"height":this.setDimension(this.element,this.width,this.height);break;case"placeholder":this.textareaObj&&(this.textareaObj.placeholder=this.placeholder);break;case"cssClass":this.updateCssClass(this.element,e.cssClass,t.cssClass);break;case"enableRtl":this.element.classList[this.enableRtl?"add":"remove"]("e-rtl"),c.isNullOrUndefined(this.toolbar)||(this.toolbar.enableRtl=this.enableRtl,this.toolbar.dataBind());break;case"showHeader":this.updateHeader(this.showHeader,this.chatHeader,this.viewWrapper);break;case"headerText":this.updateHeaderText();break;case"headerIconCss":this.updateHeaderIcon();break;case"messages":this.renderUpdatedMessage(),this.updateScrollPosition(!0,5);break;case"user":var o={id:e.user.id,user:e.user.user,avatarUrl:e.user.avatarUrl,avatarBgColor:e.user.avatarBgColor,cssClass:e.user.cssClass};this.user=O({},this.user,o);break;case"showTimeStamp":case"timeStampFormat":case"showTimeBreak":0<this.messages.length&&this.renderUpdatedMessage();break;case"showFooter":this.updateFooter(this.showFooter,this.footer);break;case"autoScrollToBottom":this.handleAutoScroll();break;case"suggestions":this.handleSuggestionUpdate();break;case"typingUsers":this.updateTypingUsers(this.typingUsers);break;case"locale":if(!this.typingUsers||0===this.typingUsers.length)return;this.updateUserText();break;case"headerToolbar":this.updateHeaderToolbar();break;case"currencyCode":this.refresh()}},P([c.Property("100%")],B.prototype,"width",void 0),P([c.Property("100%")],B.prototype,"height",void 0),P([c.Complex({},R)],B.prototype,"user",void 0),P([c.Property("Chat")],B.prototype,"headerText",void 0),P([c.Property("")],B.prototype,"headerIconCss",void 0),P([c.Property("Type your message")],B.prototype,"placeholder",void 0),P([c.Property("")],B.prototype,"cssClass",void 0),P([c.Property(!0)],B.prototype,"showHeader",void 0),P([c.Property(!0)],B.prototype,"showFooter",void 0),P([c.Complex({items:[]},h)],B.prototype,"headerToolbar",void 0),P([c.Property([])],B.prototype,"suggestions",void 0),P([c.Property(!1)],B.prototype,"showTimeBreak",void 0),P([c.Collection([],K)],B.prototype,"messages",void 0),P([c.Collection([],R)],B.prototype,"typingUsers",void 0),P([c.Property("dd/MM/yyyy hh:mm a")],B.prototype,"timeStampFormat",void 0),P([c.Property(!0)],B.prototype,"showTimeStamp",void 0),P([c.Property(!1)],B.prototype,"autoScrollToBottom",void 0),P([c.Property(!1)],B.prototype,"loadOnDemand",void 0),P([c.Property("")],B.prototype,"suggestionTemplate",void 0),P([c.Property("")],B.prototype,"footerTemplate",void 0),P([c.Property("")],B.prototype,"emptyChatTemplate",void 0),P([c.Property("")],B.prototype,"messageTemplate",void 0),P([c.Property("")],B.prototype,"timeBreakTemplate",void 0),P([c.Property("")],B.prototype,"typingUsersTemplate",void 0),P([c.Event()],B.prototype,"messageSend",void 0),P([c.Event()],B.prototype,"userTyping",void 0);var z,y=P([c.NotifyPropertyChanges],B);function B(e,t){e=z.call(this,e,t)||this;return e.multiplier=3,e}e.AIAssistView=n,e.AssistView=C,e.ChatUI=y,e.InterActiveChatBase=s,e.Message=K,e.MessageStatus=G,e.Prompt=V,e.PromptToolbarSettings=F,e.ResponseToolbarSettings=q,e.ToolbarItem=a,e.ToolbarSettings=h,e.User=R,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ej2-interactive-chat.umd.min.js.map
