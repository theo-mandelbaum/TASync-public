{"version":3,"file":"ej2-interactive-chat.umd.min.js","sources":["../src/interactive-chat-base/interactive-chat-base.js","../src/ai-assistview/ai-assistview.js","../src/chat-ui/chat-ui.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, select, compile, NotifyPropertyChanges, isNullOrUndefined as isNOU, formatUnit, Event, append, addClass, removeClass, Property, ChildProperty, Collection } from '@syncfusion/ej2-base';\nimport { attributes, EventHandler, remove } from '@syncfusion/ej2-base';\nimport { TextArea } from '@syncfusion/ej2-inputs';\n/**\n * Represents a toolbar item model in the component.\n */\nvar ToolbarItem = /** @class */ (function (_super) {\n    __extends(ToolbarItem, _super);\n    function ToolbarItem() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('')\n    ], ToolbarItem.prototype, \"iconCss\", void 0);\n    __decorate([\n        Property()\n    ], ToolbarItem.prototype, \"text\", void 0);\n    __decorate([\n        Property('Button')\n    ], ToolbarItem.prototype, \"type\", void 0);\n    __decorate([\n        Property('Left')\n    ], ToolbarItem.prototype, \"align\", void 0);\n    __decorate([\n        Property(true)\n    ], ToolbarItem.prototype, \"visible\", void 0);\n    __decorate([\n        Property(false)\n    ], ToolbarItem.prototype, \"disabled\", void 0);\n    __decorate([\n        Property('')\n    ], ToolbarItem.prototype, \"tooltip\", void 0);\n    __decorate([\n        Property('')\n    ], ToolbarItem.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(null)\n    ], ToolbarItem.prototype, \"template\", void 0);\n    __decorate([\n        Property(-1)\n    ], ToolbarItem.prototype, \"tabIndex\", void 0);\n    return ToolbarItem;\n}(ChildProperty));\nexport { ToolbarItem };\n/**\n * Represents the settings for the toolbar in the component.\n */\nvar ToolbarSettings = /** @class */ (function (_super) {\n    __extends(ToolbarSettings, _super);\n    function ToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], ToolbarItem)\n    ], ToolbarSettings.prototype, \"items\", void 0);\n    __decorate([\n        Event()\n    ], ToolbarSettings.prototype, \"itemClicked\", void 0);\n    return ToolbarSettings;\n}(ChildProperty));\nexport { ToolbarSettings };\n/**\n * ChatBase component act as base class.\n */\nvar InterActiveChatBase = /** @class */ (function (_super) {\n    __extends(InterActiveChatBase, _super);\n    /**\n     * * Constructor for Base class\n     *\n     * @param {InterActiveChatBaseModel} options - Specifies the Base model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function InterActiveChatBase(options, element) {\n        return _super.call(this, options, element) || this;\n    }\n    /**\n     * This method is abstract member of the Component<HTMLElement>.\n     *\n     * @private\n     * @returns {void}\n     */\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    InterActiveChatBase.prototype.preRender = function () {\n    };\n    /**\n     * This method is abstract member of the Component<HTMLElement>.\n     *\n     * @private\n     * @returns {string} - It returns the current module name.\n     */\n    InterActiveChatBase.prototype.getModuleName = function () {\n        return 'interactivechatBase';\n    };\n    /**\n     * This method is abstract member of the Component<HTMLElement>.\n     *\n     * @private\n     * @returns {string} - It returns the persisted data.\n     */\n    InterActiveChatBase.prototype.getPersistData = function () {\n        return this.addOnPersist([]);\n    };\n    /**\n     * This method is abstract member of the Component<HTMLElement>.\n     *\n     * @private\n     * @returns {void}\n     */\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    InterActiveChatBase.prototype.render = function () {\n    };\n    /* To calculate the width when change via set model */\n    InterActiveChatBase.prototype.setDimension = function (element, width, height) {\n        element.style.width = !isNOU(width) ? formatUnit(width) : element.style.width;\n        element.style.height = !isNOU(height) ? formatUnit(height) : element.style.height;\n    };\n    InterActiveChatBase.prototype.addCssClass = function (element, cssClass) {\n        if (cssClass) {\n            element.classList.add(cssClass);\n        }\n    };\n    InterActiveChatBase.prototype.addRtlClass = function (element, isRtl) {\n        if (isRtl) {\n            element.classList.add('e-rtl');\n        }\n    };\n    InterActiveChatBase.prototype.updateCssClass = function (element, newClass, oldClass) {\n        if (oldClass) {\n            removeClass([element], oldClass.trim().split(' '));\n        }\n        if (newClass) {\n            addClass([element], newClass.trim().split(' '));\n        }\n    };\n    InterActiveChatBase.prototype.updateHeader = function (showHeader, headerElement, viewWrapper) {\n        if (!showHeader) {\n            headerElement.hidden = true;\n            viewWrapper.style.height = '100%';\n        }\n        else {\n            headerElement.hidden = false;\n            viewWrapper.style.height = '';\n        }\n    };\n    InterActiveChatBase.prototype.renderViewSections = function (element, headerClassName, viewClassName) {\n        var headerWrapper = this.createElement('div', { className: headerClassName });\n        element.appendChild(headerWrapper);\n        var viewWrapper = this.createElement('div', { className: viewClassName });\n        element.appendChild(viewWrapper);\n    };\n    InterActiveChatBase.prototype.createViewComponents = function (viewWrapper) {\n        var contentWrapper = this.createElement('div', { className: 'e-views' });\n        var viewContainer = this.createElement('div', { className: 'e-view-container' });\n        contentWrapper.appendChild(viewContainer);\n        viewWrapper.appendChild(contentWrapper);\n    };\n    InterActiveChatBase.prototype.updateScroll = function (scrollElement) {\n        scrollElement.scrollTo(0, scrollElement.scrollHeight);\n    };\n    InterActiveChatBase.prototype.getElement = function (element) {\n        var className;\n        switch (element) {\n            case 'footer':\n                className = 'e-footer';\n                break;\n            case 'contentContainer':\n                className = 'e-content-container';\n                break;\n            case 'outputElement':\n                className = 'e-content';\n                break;\n            default:\n                className = '';\n                break;\n        }\n        return this.createElement('div', { className: className });\n    };\n    InterActiveChatBase.prototype.createSuggestionElement = function (suggestionHeader) {\n        var suggestionContainer = this.createElement('div', { className: 'e-suggestions' });\n        var suggestionHeaderElement = this.createElement('div', { className: 'e-suggestion-header' });\n        var suggestionListElement = this.createElement('div', { className: 'e-suggestion-list' });\n        if (suggestionHeader) {\n            suggestionContainer.appendChild(suggestionHeaderElement);\n        }\n        suggestionContainer.appendChild(suggestionListElement);\n        return { suggestionContainer: suggestionContainer, suggestionHeaderElement: suggestionHeaderElement, suggestionListElement: suggestionListElement };\n    };\n    InterActiveChatBase.prototype.renderSuggestions = function (suggestionsArray, suggestionHeader, suggestionTemplate, contextName, templateName, onSuggestionClick) {\n        var isSuggestionTemplate = suggestionTemplate ? true : false;\n        if (suggestionsArray && suggestionsArray.length > 0) {\n            var _a = this.createSuggestionElement(suggestionHeader), suggestionContainer = _a.suggestionContainer, suggestionHeaderElement = _a.suggestionHeaderElement, suggestionListElement = _a.suggestionListElement;\n            this.suggestionsElement = suggestionContainer;\n            var suggestionContainerClass = \"e-suggestions \" + (isSuggestionTemplate ? 'e-suggestion-item-template' : '');\n            this.suggestionsElement.className = suggestionContainerClass;\n            this.suggestionHeader = suggestionHeaderElement;\n            var suggestionList = suggestionListElement;\n            this.renderSuggestionList(suggestionsArray, suggestionList, isSuggestionTemplate, contextName, suggestionTemplate, templateName, onSuggestionClick);\n            if (suggestionHeader) {\n                this.suggestionHeader.innerHTML = suggestionHeader;\n            }\n            this.suggestionsElement.append(suggestionList);\n            this.content.append(this.suggestionsElement);\n        }\n    };\n    InterActiveChatBase.prototype.renderSuggestionList = function (suggestionsArray, suggestionWrapper, isSuggestionTemplate, contextName, suggestionTemplate, templateName, onSuggestionClick) {\n        var _this = this;\n        var suggestionsListElement = this.createElement('ul', { attrs: { 'tabindex': '-1' } });\n        suggestionsArray.forEach(function (suggestion, i) {\n            var _a;\n            var suggestionList = _this.createElement('li');\n            attributes(suggestionList, { 'tabindex': '0' });\n            EventHandler.add(suggestionList, 'click', onSuggestionClick, _this);\n            EventHandler.add(suggestionList, 'keydown', _this.suggestionItemHandler, _this);\n            if (isSuggestionTemplate) {\n                var suggestionContext = (_a = { index: i }, _a[contextName] = suggestionsArray[parseInt(i.toString(), 10)], _a);\n                _this.updateContent(suggestionTemplate, suggestionList, suggestionContext, templateName);\n            }\n            else {\n                suggestionList.innerHTML = suggestion;\n            }\n            suggestionsListElement.append(suggestionList);\n        });\n        suggestionWrapper.appendChild(suggestionsListElement);\n    };\n    InterActiveChatBase.prototype.suggestionItemHandler = function (event) {\n        if (event.key === 'Enter' && !event.shiftKey) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.onSuggestionClick(event);\n        }\n    };\n    InterActiveChatBase.prototype.renderBannerView = function (bannerTemplate, parentElement, templateName) {\n        if (bannerTemplate) {\n            var className = templateName === 'emptyChatTemplate' ? 'e-empty-chat-template' : 'e-banner-view';\n            var introContainer = this.createElement('div', { className: className });\n            this.updateContent(bannerTemplate, introContainer, {}, templateName);\n            parentElement.prepend(introContainer);\n        }\n    };\n    InterActiveChatBase.prototype.updateContent = function (template, contentElement, context, templateName) {\n        if (this.isReact) {\n            this.clearTemplate([templateName]);\n        }\n        var notCompile = !(this.isReact || this.isVue);\n        var ctn = this.getTemplateFunction(template, notCompile);\n        if (typeof ctn === 'string') {\n            contentElement.innerHTML = ctn;\n        }\n        else {\n            append(ctn(context, this), contentElement);\n        }\n        this.renderReactTemplates();\n    };\n    InterActiveChatBase.prototype.renderFooterContent = function (footerTemplate, footer, prompt, promptPlaceholder, showClearButton, rowCount, className) {\n        if (footerTemplate) {\n            this.updateContent(footerTemplate, footer, {}, 'footerTemplate');\n            return null;\n        }\n        else {\n            var textareaEle = this.createElement('textarea', { className: className });\n            footer.appendChild(textareaEle);\n            return this.renderFooter(textareaEle, prompt, promptPlaceholder, showClearButton, rowCount);\n        }\n    };\n    InterActiveChatBase.prototype.renderFooter = function (textareaElement, prompt, promptPlaceholder, showClearButton, rowCount) {\n        if (showClearButton === void 0) { showClearButton = false; }\n        var textareaObj = new TextArea({\n            rows: rowCount,\n            cols: 300,\n            cssClass: rowCount >= 10 ? 'show-scrollbar' : 'hide-scrollbar',\n            placeholder: promptPlaceholder,\n            resizeMode: 'None',\n            value: prompt,\n            showClearButton: showClearButton\n        });\n        textareaObj.appendTo(textareaElement);\n        return textareaObj;\n    };\n    InterActiveChatBase.prototype.renderSendIcon = function (sendIconClass, footer) {\n        var sendIcon = this.createElement('span', { attrs: { class: sendIconClass, role: 'button', 'aria-label': 'Submit', tabindex: '0' } });\n        footer.appendChild(sendIcon);\n        return sendIcon;\n    };\n    InterActiveChatBase.prototype.appendChildren = function (target) {\n        var children = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            children[_i - 1] = arguments[_i];\n        }\n        target.append.apply(target, children);\n    };\n    InterActiveChatBase.prototype.insertBeforeChildren = function (target) {\n        var children = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            children[_i - 1] = arguments[_i];\n        }\n        target.prepend.apply(target, children);\n    };\n    InterActiveChatBase.prototype.wireFooterEvents = function (sendIcon, footer, footerTemplate) {\n        if (sendIcon) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            EventHandler.add(sendIcon, 'click', this.onSendIconClick, this);\n        }\n        if (footer && !footerTemplate) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            EventHandler.add(footer, 'keydown', this.footerKeyHandler, this);\n        }\n    };\n    InterActiveChatBase.prototype.unWireFooterEvents = function (sendIcon, footer, footerTemplate) {\n        if (sendIcon) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            EventHandler.remove(sendIcon, 'click', this.onSendIconClick);\n        }\n        if (footer && !footerTemplate) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            EventHandler.remove(footer, 'keydown', this.footerKeyHandler);\n        }\n    };\n    InterActiveChatBase.prototype.removeAndNullify = function (element) {\n        if (element) {\n            if (!isNOU(element.parentNode)) {\n                remove(element);\n            }\n            else {\n                element.innerHTML = '';\n            }\n        }\n    };\n    // eslint-disable-next-line  @typescript-eslint/no-explicit-any\n    InterActiveChatBase.prototype.destroyAndNullify = function (obj) {\n        if (obj) {\n            obj.destroy();\n            obj = null;\n        }\n    };\n    /**\n     * Gets template content based on the template property value.\n     *\n     * @param {string | Function} template - Template property value.\n     * @param {boolean} notCompile - Compile property value.\n     * @returns {Function} - Return template function.\n     * @hidden\n     */\n    InterActiveChatBase.prototype.getTemplateFunction = function (template, notCompile) {\n        if (typeof template === 'string') {\n            var content = '';\n            try {\n                var tempEle = select(template);\n                if (tempEle) {\n                    //Return innerHTML incase of jsrenderer script else outerHTML\n                    content = tempEle.tagName === 'SCRIPT' ? tempEle.innerHTML : tempEle.outerHTML;\n                    notCompile = false;\n                }\n                else {\n                    content = template;\n                }\n            }\n            catch (e) {\n                content = template;\n            }\n            return notCompile ? content : compile(content);\n        }\n        else {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            return compile(template);\n        }\n    };\n    /**\n     * This method is abstract member of the Component<HTMLElement>.\n     *\n     * @param  {InterActiveChatBaseModel} newProp - Specifies new properties\n     * @param  {InterActiveChatBaseModel} oldProp - Specifies old properties\n     * @private\n     * @returns {void}\n     */\n    // eslint-disable-next-line @typescript-eslint/no-empty-function, @typescript-eslint/no-unused-vars\n    InterActiveChatBase.prototype.onPropertyChanged = function (newProp, oldProp) {\n    };\n    __decorate([\n        Event()\n    ], InterActiveChatBase.prototype, \"created\", void 0);\n    InterActiveChatBase = __decorate([\n        NotifyPropertyChanges\n    ], InterActiveChatBase);\n    return InterActiveChatBase;\n}(Component));\nexport { InterActiveChatBase };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n///<reference path='../interactive-chat-base/interactive-chat-base-model.d.ts'/>\nimport { EventHandler, Property, NotifyPropertyChanges, Collection, Event, remove, L10n } from '@syncfusion/ej2-base';\nimport { ChildProperty, getUniqueID, isNullOrUndefined as isNOU, Complex, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { InterActiveChatBase, ToolbarSettings, ToolbarItem } from '../interactive-chat-base/interactive-chat-base';\nvar ASSISTHEADER = 'e-aiassist-header-text e-assist-view-header';\n/* eslint-enable @typescript-eslint/no-misused-new, no-redeclare */\n/**\n * The prompts property maps the list of the prompts and binds the data to the suggestions.\n */\nvar Prompt = /** @class */ (function (_super) {\n    __extends(Prompt, _super);\n    function Prompt() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(null)\n    ], Prompt.prototype, \"prompt\", void 0);\n    __decorate([\n        Property('')\n    ], Prompt.prototype, \"response\", void 0);\n    __decorate([\n        Property(null)\n    ], Prompt.prototype, \"isResponseHelpful\", void 0);\n    return Prompt;\n}(ChildProperty));\nexport { Prompt };\n/**\n * Specifies the type of assist view.\n */\nexport var AssistViewType;\n(function (AssistViewType) {\n    /**\n     * Represents the default assist view type.\n     */\n    AssistViewType[\"Assist\"] = \"Assist\";\n    /**\n     * Represents a custom assist view type.\n     */\n    AssistViewType[\"Custom\"] = \"Custom\";\n})(AssistViewType || (AssistViewType = {}));\n/**\n * The assistView property maps the customized AiAssistView.\n */\nvar AssistView = /** @class */ (function (_super) {\n    __extends(AssistView, _super);\n    function AssistView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Assist')\n    ], AssistView.prototype, \"type\", void 0);\n    __decorate([\n        Property('')\n    ], AssistView.prototype, \"name\", void 0);\n    __decorate([\n        Property()\n    ], AssistView.prototype, \"iconCss\", void 0);\n    __decorate([\n        Property()\n    ], AssistView.prototype, \"viewTemplate\", void 0);\n    return AssistView;\n}(ChildProperty));\nexport { AssistView };\n/**\n * The promptToolbarSettings property maps the list of the promptToolbarSettings and binds the data to the prompt.\n */\nvar PromptToolbarSettings = /** @class */ (function (_super) {\n    __extends(PromptToolbarSettings, _super);\n    function PromptToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('100%')\n    ], PromptToolbarSettings.prototype, \"width\", void 0);\n    __decorate([\n        Collection([], ToolbarItem)\n    ], PromptToolbarSettings.prototype, \"items\", void 0);\n    __decorate([\n        Event()\n    ], PromptToolbarSettings.prototype, \"itemClicked\", void 0);\n    return PromptToolbarSettings;\n}(ChildProperty));\nexport { PromptToolbarSettings };\n/**\n * The responseToolbarSettings property maps the list of the responseToolbarSettings and binds the data to the output items.\n */\nvar ResponseToolbarSettings = /** @class */ (function (_super) {\n    __extends(ResponseToolbarSettings, _super);\n    function ResponseToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('100%')\n    ], ResponseToolbarSettings.prototype, \"width\", void 0);\n    __decorate([\n        Collection([], ToolbarItem)\n    ], ResponseToolbarSettings.prototype, \"items\", void 0);\n    __decorate([\n        Event()\n    ], ResponseToolbarSettings.prototype, \"itemClicked\", void 0);\n    return ResponseToolbarSettings;\n}(ChildProperty));\nexport { ResponseToolbarSettings };\n/**\n * The `AIAssistView` component is designed to enhance user interaction by integrating AI driven assistance features.\n * It provides a seamless interface for incorporating suggestions & AI responses.\n *\n * ```html\n *  <div id='defaultAIAssistView'></div>\n * ```\n * ```typescript\n *  let aiAssistObj: AIAssistView = new AIAssistView();\n *  aiAssistObj.appendTo('#defaultAIAssistView');\n * ```\n */\nvar AIAssistView = /** @class */ (function (_super) {\n    __extends(AIAssistView, _super);\n    /**\n     * Constructor for creating the component\n     *\n     * @param {AIAssistViewModel} options - Specifies the AIAssistViewModel model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function AIAssistView(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.toolbarItems = [];\n        _this.displayContents = [];\n        _this.preTagElements = [];\n        return _this;\n    }\n    /**\n     * Initialize the event handler\n     *\n     * @private\n     * @returns {void}\n     */\n    AIAssistView.prototype.preRender = function () {\n        if (!this.element.id) {\n            this.element.id = getUniqueID('e-' + this.getModuleName());\n        }\n    };\n    AIAssistView.prototype.getDirective = function () {\n        return 'EJS-AIASSISTVIEW';\n    };\n    /**\n     * To get component name.\n     *\n     * @returns {string} - It returns the current module name.\n     * @private\n     */\n    AIAssistView.prototype.getModuleName = function () {\n        return 'aiassistview';\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @private\n     * @returns {string} - It returns the persisted data.\n     */\n    AIAssistView.prototype.getPersistData = function () {\n        return this.addOnPersist([]);\n    };\n    AIAssistView.prototype.render = function () {\n        this.renderPromptView();\n    };\n    AIAssistView.prototype.renderPromptView = function () {\n        this.setDimension(this.element, this.width, this.height);\n        this.renderViews();\n        this.renderToolbar();\n        this.updateTextAreaObject();\n        this.wireEvents();\n    };\n    AIAssistView.prototype.renderToolbar = function () {\n        this.updateHeaderToolbar();\n        if (this.assistViewTemplateIndex < 0) {\n            this.displayContents.unshift(this.contentWrapper);\n        }\n        else {\n            this.displayContents.unshift(this.assistCustomSection);\n        }\n        this.previousElement = this.displayContents[this.activeView];\n        this.renderHeaderToolbar();\n        this.viewWrapper = this.element.querySelector('.e-view-content');\n        this.updateActiveView();\n        this.addCssClass(this.element, this.cssClass);\n        this.updateHeader(this.showHeader, this.toolbarHeader, this.viewWrapper);\n        this.aiAssistViewRendered = true;\n        this.addRtlClass(this.element, this.enableRtl);\n    };\n    AIAssistView.prototype.renderViews = function () {\n        this.assistViewTemplateIndex = -1;\n        this.aiAssistViewRendered = false;\n        this.isAssistView = false;\n        this.isOutputRenderingStop = false;\n        this.isResponseRequested = false;\n        this.renderViewSections(this.element, 'e-view-header', 'e-view-content');\n        var isAssistViewAssigned = false;\n        var assistView;\n        var customViewTemplate;\n        var customViewCount = 1;\n        if (this.views.length > 0) {\n            for (var index = 0; index < this.views.length; index++) {\n                if (this.views[parseInt(index.toString(), 10)].type.toLocaleLowerCase() === 'assist' && !isAssistViewAssigned) {\n                    assistView = {\n                        text: this.views[parseInt(index.toString(), 10)].name || 'AI Assist',\n                        prefixIcon: this.views[parseInt(index.toString(), 10)].iconCss || 'e-icons e-assistview-icon',\n                        cssClass: ASSISTHEADER,\n                        htmlAttributes: { 'data-index': this.element.id + '_view_0' }\n                    };\n                    this.toolbarItems.unshift(assistView);\n                    if (this.views[parseInt(index.toString(), 10)].viewTemplate) {\n                        this.assistViewTemplateIndex = index;\n                    }\n                    isAssistViewAssigned = true;\n                    this.isAssistView = true;\n                }\n                else if (this.views[parseInt(index.toString(), 10)].type.toLocaleLowerCase() === 'custom') {\n                    customViewTemplate = this.createElement('div', { className: 'e-customview-content-section-' + customViewCount + ' e-custom-view' });\n                    this.getContextObject('customViewTemplate', customViewTemplate, -1, index);\n                    this.displayContents.push(customViewTemplate);\n                    this.toolbarItems.push({\n                        text: this.views[parseInt(index.toString(), 10)].name || '',\n                        prefixIcon: this.views[parseInt(index.toString(), 10)].iconCss || '',\n                        cssClass: 'e-aiassist-header-text e-custom-view-header',\n                        htmlAttributes: { 'data-index': this.element.id + '_view_' + customViewCount.toString() }\n                    });\n                    customViewCount++;\n                }\n            }\n        }\n        if (this.views.length === 0 || !isAssistViewAssigned) {\n            assistView = {\n                text: 'AI Assist',\n                prefixIcon: 'e-icons e-assistview-icon',\n                cssClass: ASSISTHEADER,\n                htmlAttributes: { 'data-index': this.element.id + '_view_0' }\n            };\n            this.toolbarItems.unshift(assistView);\n            isAssistViewAssigned = true;\n        }\n        if (this.assistViewTemplateIndex >= 0 && this.views[this.assistViewTemplateIndex].viewTemplate) {\n            this.assistCustomSection = this.createElement('div', { attrs: { class: 'e-assistview-content-section', 'data-index': this.element.id + '_view_0' } });\n            this.getContextObject('assistViewTemplate', this.assistCustomSection, -1, this.assistViewTemplateIndex);\n        }\n        else {\n            this.renderDefaultView();\n        }\n    };\n    AIAssistView.prototype.renderHeaderToolbar = function () {\n        var _this = this;\n        this.toolbar = new Toolbar({\n            items: this.toolbarItems,\n            height: '100%',\n            enableRtl: this.enableRtl,\n            clicked: function (args) {\n                var eventItemArgs = {\n                    type: args.item.type,\n                    text: args.item.text,\n                    iconCss: args.item.prefixIcon,\n                    cssClass: args.item.cssClass,\n                    tooltip: args.item.tooltipText,\n                    template: args.item.template,\n                    disabled: args.item.disabled,\n                    visible: args.item.visible,\n                    align: args.item.align,\n                    tabIndex: args.item.tabIndex\n                };\n                var eventArgs = {\n                    item: eventItemArgs,\n                    event: args.originalEvent,\n                    cancel: false\n                };\n                if (_this.toolbarSettings.itemClicked) {\n                    _this.toolbarSettings.itemClicked.call(_this, eventArgs);\n                }\n                if (!eventArgs.cancel) {\n                    if (args.item.htmlAttributes) {\n                        var currentIndex = parseInt(args.item.htmlAttributes['data-index'].split(_this.element.id + '_view_')[1], 10);\n                        if (currentIndex !== _this.activeView) {\n                            var prevOnChange = _this.isProtectedOnChange;\n                            _this.isProtectedOnChange = true;\n                            var previousIndex = _this.getIndex(_this.activeView);\n                            _this.activeView = parseInt(args.item.htmlAttributes['data-index'].split(_this.element.id + '_view_')[1], 10);\n                            _this.updateActiveView(previousIndex);\n                            _this.isProtectedOnChange = prevOnChange;\n                        }\n                    }\n                }\n            }\n        });\n        this.toolbarHeader = this.element.querySelector('.e-view-header');\n        var toolbarEle = this.createElement('div');\n        this.toolbar.appendTo(toolbarEle);\n        this.toolbar.element.setAttribute('aria-label', 'assist-view-toolbar-header');\n        this.toolbarHeader.appendChild(toolbarEle);\n    };\n    AIAssistView.prototype.updateHeaderToolbar = function () {\n        if (this.toolbarSettings.items.length > 0) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            var pushToolbar = this.toolbarSettings.items.map(function (item) { return ({\n                type: item.type,\n                template: item.template,\n                disabled: item.disabled,\n                cssClass: item.cssClass,\n                visible: item.visible,\n                tooltipText: item.tooltip,\n                prefixIcon: item.iconCss,\n                text: item.text,\n                align: item.align\n            }); });\n            this.toolbarItems = this.toolbarItems.concat(pushToolbar);\n        }\n    };\n    AIAssistView.prototype.getIndex = function (currentIndex) {\n        return (((currentIndex) > (this.views.length - (this.isAssistView ? 1 : 0))) || (currentIndex < 0)) ?\n            0 : currentIndex;\n    };\n    AIAssistView.prototype.updateActiveView = function (previousIndex) {\n        var activeViewIndex = this.getIndex(this.activeView);\n        if (!this.aiAssistViewRendered) {\n            this.appendView(activeViewIndex);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            if (this.toolbar.tbarEle[parseInt(activeViewIndex.toString(), 10)]) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                this.toolbar.tbarEle[parseInt(activeViewIndex.toString(), 10)].classList.add('e-active');\n            }\n        }\n        else if (previousIndex !== activeViewIndex) {\n            this.removePreviousView(previousIndex, activeViewIndex);\n            this.appendView(activeViewIndex);\n        }\n        this.previousElement = this.displayContents[parseInt(activeViewIndex.toString(), 10)];\n    };\n    AIAssistView.prototype.appendView = function (activeViewIndex) {\n        //updating the new view section according to the activeView property\n        if (activeViewIndex === 0 && this.assistViewTemplateIndex < 0) {\n            this.viewWrapper.append(this.contentWrapper, this.stopResponding, this.footer);\n        }\n        else if (activeViewIndex === 0 && this.assistViewTemplateIndex >= 0) {\n            this.viewWrapper.append(this.assistCustomSection);\n        }\n        else {\n            this.viewWrapper.append(this.displayContents[parseInt(activeViewIndex.toString(), 10)]);\n        }\n    };\n    AIAssistView.prototype.removePreviousView = function (previousIndex, activeViewIndex) {\n        // removing the previously binded element\n        this.viewWrapper.removeChild(this.previousElement);\n        if (previousIndex === 0 && this.assistViewTemplateIndex < 0) {\n            this.viewWrapper.removeChild(this.stopResponding);\n            this.viewWrapper.removeChild(this.footer);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.toolbar.tbarEle[parseInt(activeViewIndex.toString(), 10)]) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.toolbar.tbarEle[parseInt(activeViewIndex.toString(), 10)].classList.add('e-active');\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (previousIndex >= 0 && this.toolbar.tbarEle[parseInt(previousIndex.toString(), 10)]) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.toolbar.tbarEle[parseInt(previousIndex.toString(), 10)].classList.remove('e-active');\n        }\n    };\n    AIAssistView.prototype.renderDefaultView = function () {\n        var viewWrapper = this.element.querySelector('.e-view-content');\n        this.createViewComponents(viewWrapper);\n        this.contentWrapper = this.element.querySelector('.e-views');\n        this.contentWrapper.setAttribute('data-index', this.element.id + '_view_0');\n        var contentContainer = this.element.querySelector('.e-view-container');\n        this.content = this.getElement('contentContainer');\n        this.footer = this.getElement('footer');\n        var footerClass = \"e-footer \" + (this.footerTemplate ? 'e-footer-template' : '');\n        this.footer.className = footerClass;\n        this.renderContent();\n        this.renderAssistViewFooter();\n        this.renderBannerView(this.bannerTemplate, contentContainer, 'bannerTemplate');\n        contentContainer.append(this.content);\n        this.renderStopResponding();\n    };\n    AIAssistView.prototype.renderStopResponding = function () {\n        this.stopResponding = this.createElement('div', { attrs: { class: 'e-stop-response', tabIndex: '0', 'aria-label': 'Stop Responding', role: 'button' } });\n        var stopRespondingIcon = this.createElement('span', { className: 'e-icons e-assist-stop' });\n        this.stopRespondingContent = this.createElement('span', { className: 'e-stop-response-text' });\n        this.l10n = new L10n('aiassistview', { stopResponseText: 'Stop Responding' }, this.locale);\n        this.updateStopRespondingTitle();\n        this.appendChildren(this.stopResponding, stopRespondingIcon, this.stopRespondingContent);\n    };\n    AIAssistView.prototype.updateStopRespondingTitle = function () {\n        this.l10n.setLocale(this.locale);\n        this.stopRespondingContent.textContent = this.l10n.getConstant('stopResponseText');\n    };\n    AIAssistView.prototype.renderContent = function () {\n        this.renderSuggestions(this.promptSuggestions, this.promptSuggestionsHeader, this.promptSuggestionItemTemplate, 'promptSuggestion', 'promptSuggestionItemTemplate', this.onSuggestionClick);\n        this.renderOutputContent();\n        if (this.outputElement) {\n            this.renderSkeleton();\n        }\n    };\n    AIAssistView.prototype.renderOutputContent = function (isMethodCall) {\n        var _this = this;\n        this.outputElement = this.getElement('outputElement');\n        if (this.responseToolbarSettings.items.length === 0) {\n            var prevOnChange = this.isProtectedOnChange;\n            this.isProtectedOnChange = true;\n            this.responseToolbarSettings.items = [\n                { iconCss: 'e-icons e-assist-copy', tooltip: 'Copy', cssClass: 'check' },\n                { iconCss: 'e-icons e-assist-like', tooltip: 'Like' },\n                { iconCss: 'e-icons e-assist-dislike', tooltip: 'Dislike' }\n            ];\n            this.isProtectedOnChange = prevOnChange;\n        }\n        if (this.prompts) {\n            this.prompts.forEach(function (prompt, i) {\n                _this.renderOutputContainer(prompt.prompt, prompt.response, i);\n            });\n        }\n        if (this.suggestionsElement && this.content.contains(this.suggestionsElement)) {\n            this.content.insertBefore(this.outputElement, this.suggestionsElement);\n        }\n        else {\n            this.content.appendChild(this.outputElement);\n        }\n        if (isMethodCall) {\n            this.aiAssistViewRendered = true;\n        }\n    };\n    AIAssistView.prototype.renderAssistViewFooter = function () {\n        this.textareaObj = this.renderFooterContent(this.footerTemplate, this.footer, this.prompt, this.promptPlaceholder, this.showClearButton, this.getRowCount(''), 'e-assist-textarea');\n        var sendIconClass = 'e-assist-send e-icons disabled';\n        if (!this.footerTemplate) {\n            this.sendIcon = this.renderSendIcon(sendIconClass, this.footer);\n        }\n        if (this.textareaObj) {\n            this.textareaObj.input = this.handleInput.bind(this);\n            this.activateSendIcon(this.textareaObj.value.length);\n        }\n    };\n    AIAssistView.prototype.handleInput = function (args) {\n        var prevOnChange = this.isProtectedOnChange;\n        this.isProtectedOnChange = true;\n        this.prompt = args.value;\n        this.isProtectedOnChange = prevOnChange;\n        this.activateSendIcon(args.value.length);\n        this.updateTextAreaObject();\n        var eventArgs = {\n            value: args.value,\n            previousValue: args.previousValue,\n            event: args.event,\n            element: this.textareaObj.element\n        };\n        this.trigger('promptChanged', eventArgs);\n    };\n    AIAssistView.prototype.updateTextAreaObject = function () {\n        if (isNOU(this.textareaObj)) {\n            return;\n        }\n        var textarea = this.textareaObj.element;\n        textarea.style.height = 'auto';\n        textarea.style.height = textarea.scrollHeight + 'px';\n    };\n    AIAssistView.prototype.getRowCount = function (textValue) {\n        var lines = textValue.split('\\n').length;\n        return (lines < 10 ? (lines >= 1 ? lines : 1) : 10);\n    };\n    AIAssistView.prototype.activateSendIcon = function (value) {\n        this.sendIcon.classList.toggle('disabled', value === 0);\n        this.sendIcon.classList.toggle('enabled', value > 0);\n    };\n    AIAssistView.prototype.footerKeyHandler = function (e) {\n        this.keyHandler(e, 'footer');\n    };\n    AIAssistView.prototype.stopResponseKeyHandler = function (e) {\n        this.keyHandler(e, 'stopresponse');\n    };\n    AIAssistView.prototype.wireEvents = function () {\n        this.wireFooterEvents(this.sendIcon, this.footer, this.footerTemplate);\n        if (this.stopResponding) {\n            EventHandler.add(this.stopResponding, 'click', this.respondingStopper, this);\n            EventHandler.add(this.stopResponding, 'keydown', this.stopResponseKeyHandler, this);\n        }\n        EventHandler.add(window, 'resize', this.updateTextAreaObject, this);\n    };\n    AIAssistView.prototype.unWireEvents = function () {\n        this.unWireFooterEvents(this.sendIcon, this.footer, this.footerTemplate);\n        if (this.stopResponding) {\n            EventHandler.remove(this.stopResponding, 'click', this.respondingStopper);\n            EventHandler.remove(this.stopResponding, 'keydown', this.stopResponseKeyHandler);\n        }\n        EventHandler.remove(window, 'resize', this.updateTextAreaObject);\n        this.detachCodeCopyEventHandler();\n    };\n    AIAssistView.prototype.detachCodeCopyEventHandler = function () {\n        this.preTagElements.forEach(function (_a) {\n            var preTag = _a.preTag, handler = _a.handler;\n            var copyIcon = preTag.querySelector('.e-code-copy');\n            EventHandler.remove(copyIcon, 'click', handler);\n        });\n        this.preTagElements = [];\n    };\n    AIAssistView.prototype.keyHandler = function (event, value) {\n        if (event.key === 'Enter' && !event.shiftKey) {\n            switch (value) {\n                case 'footer':\n                    event.preventDefault();\n                    if (!this.isResponseRequested) {\n                        this.onSendIconClick();\n                    }\n                    break;\n                case 'stopresponse':\n                    this.respondingStopper(event);\n                    break;\n            }\n        }\n    };\n    AIAssistView.prototype.respondingStopper = function (event) {\n        this.isOutputRenderingStop = true;\n        this.isResponseRequested = false;\n        this.lastStreamPrompt = '';\n        if (this.outputElement.hasChildNodes) {\n            var skeletonElement = this.element.querySelector('.e-loading-body');\n            if (skeletonElement) {\n                this.outputElement.removeChild(this.skeletonContainer);\n            }\n        }\n        this.stopResponding.classList.remove('e-btn-active');\n        var promptIndex = this.prompts ? this.prompts.length - 1 : -1;\n        var eventArgs = {\n            event: event,\n            prompt: promptIndex >= 0 ? this.prompts[parseInt(promptIndex.toString(), 10)].prompt : '',\n            dataIndex: this.prompts ? this.prompts.length - 1 : -1\n        };\n        this.trigger('stopRespondingClick', eventArgs);\n    };\n    AIAssistView.prototype.onSuggestionClick = function (e) {\n        this.suggestionsElement.hidden = true;\n        var prevOnChange = this.isProtectedOnChange;\n        this.isProtectedOnChange = true;\n        this.prompt = e.target.innerText;\n        this.isProtectedOnChange = prevOnChange;\n        this.onSendIconClick();\n    };\n    AIAssistView.prototype.onSendIconClick = function () {\n        if (this.isResponseRequested || !this.prompt.trim()) {\n            return;\n        }\n        this.isResponseRequested = true;\n        this.lastStreamPrompt = '';\n        if (this.suggestionsElement) {\n            this.suggestionsElement.hidden = true;\n        }\n        this.isOutputRenderingStop = false;\n        this.stopResponding.classList.add('e-btn-active');\n        this.addPrompt();\n        this.createOutputElement();\n        var eventArgs = {\n            cancel: false,\n            responseToolbarItems: this.responseToolbarSettings.items,\n            prompt: this.prompt,\n            promptSuggestions: this.promptSuggestions\n        };\n        if (!this.footerTemplate) {\n            var prevOnChange = this.isProtectedOnChange;\n            this.isProtectedOnChange = true;\n            this.prompt = this.textareaObj.value = '';\n            this.textareaObj.dataBind();\n            this.isProtectedOnChange = prevOnChange;\n            this.updateTextAreaObject();\n            this.activateSendIcon(this.textareaObj.value.length);\n        }\n        this.trigger('promptRequest', eventArgs);\n        if (this.contentWrapper) {\n            this.scrollToBottom();\n        }\n    };\n    AIAssistView.prototype.addPrompt = function () {\n        var prevOnChange = this.isProtectedOnChange;\n        this.isProtectedOnChange = true;\n        this.prompts = this.prompts.concat([{ prompt: this.prompt, response: '', isResponseHelpful: null }]);\n        this.isProtectedOnChange = prevOnChange;\n    };\n    AIAssistView.prototype.getContextObject = function (templateName, contentElement, index, arrayPosition) {\n        var template;\n        var context = {};\n        var contextIndex = index >= 0 ? index : -1;\n        var contextPrompt = index >= 0 ? this.prompts[parseInt(contextIndex.toString(), 10)].prompt : '';\n        var contextOutput = index >= 0 ? this.prompts[parseInt(contextIndex.toString(), 10)].response : '';\n        switch (templateName.toLowerCase()) {\n            case 'promptitemtemplate': {\n                template = this.promptItemTemplate;\n                context = { prompt: contextPrompt, toolbarItems: this.promptToolbarSettings.items, index: contextIndex };\n                break;\n            }\n            case 'responseitemtemplate': {\n                template = this.responseItemTemplate;\n                context = {\n                    prompt: contextPrompt,\n                    response: contextOutput,\n                    index: contextIndex,\n                    toolbarItems: this.responseToolbarSettings.items\n                };\n                break;\n            }\n            case 'customviewtemplate':\n            case 'assistviewtemplate': {\n                template = this.views[parseInt(arrayPosition.toString(), 10)].viewTemplate || '';\n                break;\n            }\n        }\n        this.updateContent(template, contentElement, context, templateName);\n    };\n    AIAssistView.prototype.createOutputElement = function () {\n        this.outputSuggestionEle = this.createElement('div', { attrs: { id: \"e-prompt-item_\" + (this.prompts.length - 1), class: \"e-prompt-container \" + (this.promptItemTemplate ? 'e-prompt-item-template' : '') } });\n        this.renderPrompt(this.prompt, this.prompts.length - 1);\n        this.outputElement.append(this.outputSuggestionEle, this.skeletonContainer);\n        this.skeletonContainer.hidden = false;\n    };\n    AIAssistView.prototype.renderOutputContainer = function (promptText, outputText, index, isMethodCall, isFinalUpdate) {\n        var outputContainer = this.createElement('div', { attrs: { id: \"e-response-item_\" + index, class: \"e-output-container \" + (this.responseItemTemplate ? 'e-response-item-template' : '') } });\n        this.renderOutput(outputContainer, promptText, outputText, isMethodCall, index, isFinalUpdate);\n        if (promptText) {\n            this.outputElement.append(this.outputSuggestionEle);\n        }\n        this.outputElement.append(outputContainer);\n        if (this.stopResponding && isFinalUpdate) {\n            this.stopResponding.classList.remove('e-btn-active');\n        }\n        if (!this.isOutputRenderingStop && !this.content.contains(this.suggestionsElement) && this.suggestionsElement) {\n            this.content.append(this.suggestionsElement);\n        }\n    };\n    AIAssistView.prototype.renderOutput = function (outputContainer, promptText, outputText, isMethodCall, index, isFinalUpdate) {\n        var promptIcon = this.createElement('span', {\n            className: 'e-output-icon e-icons ' + (this.responseIconCss || (this.isAssistView && this.views[0].iconCss) || 'e-assistview-icon')\n        });\n        var aiOutputEle = this.createElement('div', { className: 'e-output' });\n        if (!this.aiAssistViewRendered || isMethodCall) {\n            if (!isNOU(promptText)) {\n                this.outputSuggestionEle = this.createElement('div', { attrs: { id: \"e-prompt-item_\" + index, class: \"e-prompt-container \" + (this.promptItemTemplate ? 'e-prompt-item-template' : '') } });\n                this.renderPrompt(promptText, index);\n            }\n        }\n        var lastPrompt = { prompt: promptText, response: outputText };\n        if (lastPrompt.response) {\n            if (this.responseItemTemplate) {\n                this.getContextObject('responseItemTemplate', aiOutputEle, index);\n                if (this.outputElement.querySelector('.e-skeleton')) {\n                    this.outputElement.removeChild(this.skeletonContainer);\n                }\n                if (this.contentFooterEle) {\n                    this.contentFooterEle.classList.remove('e-assist-toolbar-active');\n                }\n                this.renderOutputToolbarItems(index, isFinalUpdate);\n                aiOutputEle.append(this.contentFooterEle);\n                outputContainer.append(aiOutputEle);\n            }\n            else {\n                this.renderOutputTextContainer(lastPrompt.response, aiOutputEle, index, false, isFinalUpdate);\n                outputContainer.append(promptIcon, aiOutputEle);\n            }\n        }\n        else if (this.aiAssistViewRendered) {\n            if (this.outputElement.querySelector('.e-skeleton')) {\n                this.outputElement.removeChild(this.skeletonContainer);\n            }\n            if (this.suggestionsElement) {\n                this.suggestionsElement.hidden = false;\n            }\n        }\n    };\n    AIAssistView.prototype.renderOutputTextContainer = function (response, aiOutputEle, index, isMethodCall, isFinalUpdate) {\n        var _this = this;\n        if (this.contentFooterEle) {\n            this.contentFooterEle.classList.remove('e-assist-toolbar-active');\n        }\n        this.outputContentBodyEle = this.createElement('div', { attrs: { class: 'e-content-body', tabindex: '0' } });\n        if (!isMethodCall) {\n            this.outputContentBodyEle.innerHTML = response;\n            var preTags = Array.from(this.outputContentBodyEle.querySelectorAll('pre'));\n            preTags.forEach(function (preTag) {\n                var copyIcon = document.createElement('span');\n                copyIcon.className = 'e-icons e-code-copy e-assist-copy';\n                preTag.insertBefore(copyIcon, preTag.firstChild);\n                _this.preTagElements.push({ preTag: preTag, handler: _this.getCopyHandler(preTag) });\n                EventHandler.add(copyIcon, 'click', _this.preTagElements[_this.preTagElements.length - 1].handler);\n            });\n        }\n        this.renderOutputToolbarItems(index, isFinalUpdate);\n        this.appendChildren(aiOutputEle, this.outputContentBodyEle, this.contentFooterEle);\n    };\n    AIAssistView.prototype.getCopyHandler = function (preTag) {\n        return function () {\n            var preText = preTag.innerText;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            window.navigator.clipboard.writeText(preText);\n            var copyIcon = preTag.querySelector('.e-code-copy');\n            copyIcon.className = 'e-icons e-code-copy e-assist-check';\n            setTimeout(function () {\n                copyIcon.className = 'e-icons e-code-copy e-assist-copy';\n            }, 1000);\n        };\n    };\n    AIAssistView.prototype.renderOutputToolbarItems = function (index, isFinalUpdate) {\n        this.contentFooterEle = this.createElement('div', { className: 'e-content-footer e-assist-toolbar-active' });\n        var footerContent = this.createElement('div');\n        this.renderResponseToolbar(index);\n        if (this.aiAssistViewRendered) {\n            if (this.outputElement.querySelector('.e-skeleton')) {\n                this.outputElement.removeChild(this.skeletonContainer);\n            }\n            if (isFinalUpdate && this.suggestionsElement) {\n                this.suggestionsElement.hidden = false;\n            }\n        }\n        this.responseToolbarEle.appendTo(footerContent);\n        this.responseToolbarEle.element.setAttribute('aria-label', \"response-toolbar-\" + index);\n        this.contentFooterEle.appendChild(footerContent);\n    };\n    AIAssistView.prototype.renderResponseToolbar = function (index) {\n        var _this = this;\n        var pushToolbar = this.responseToolbarSettings.items.map(function (item) {\n            var toolbarItem = {\n                type: item.type,\n                visible: item.visible,\n                disabled: item.disabled,\n                tooltipText: item.tooltip,\n                template: item.template,\n                prefixIcon: item.iconCss,\n                text: item.text,\n                cssClass: item.cssClass,\n                align: item.align,\n                width: _this.responseToolbarSettings.width\n            };\n            if (toolbarItem.prefixIcon === 'e-icons e-assist-like' && _this.prompts[parseInt(index.toString(), 10)].isResponseHelpful) {\n                toolbarItem.prefixIcon = 'e-icons e-assist-like-filled';\n            }\n            else if (toolbarItem.prefixIcon === 'e-icons e-assist-dislike' && _this.prompts[parseInt(index.toString(), 10)].isResponseHelpful === false) {\n                toolbarItem.prefixIcon = 'e-icons e-assist-dislike-filled';\n            }\n            return toolbarItem;\n        });\n        this.responseToolbarEle = new Toolbar({\n            items: pushToolbar,\n            clicked: function (args) {\n                var eventItemArgs = {\n                    type: args.item.type,\n                    text: args.item.text,\n                    iconCss: args.item.prefixIcon,\n                    cssClass: args.item.cssClass,\n                    tooltip: args.item.tooltipText,\n                    template: args.item.template,\n                    disabled: args.item.disabled,\n                    visible: args.item.visible,\n                    align: args.item.align,\n                    tabIndex: args.item.tabIndex\n                };\n                var eventArgs = {\n                    item: eventItemArgs,\n                    event: args.originalEvent,\n                    cancel: false,\n                    dataIndex: index\n                };\n                if (_this.responseToolbarSettings.itemClicked) {\n                    _this.responseToolbarSettings.itemClicked.call(_this, eventArgs);\n                }\n                if (!eventArgs.cancel) {\n                    _this.handleItemClick(args, index);\n                }\n            }\n        });\n    };\n    AIAssistView.prototype.getClipBoardContent = function (value) {\n        var tempElement = document.createElement('div');\n        tempElement.innerHTML = value;\n        tempElement.style.top = '0';\n        tempElement.style.left = '0';\n        tempElement.style.position = 'fixed';\n        tempElement.style.opacity = '0';\n        document.body.appendChild(tempElement);\n        navigator.clipboard.write([\n            new ClipboardItem({\n                'text/html': new Blob([tempElement.innerHTML], { type: 'text/html' }),\n                'text/plain': new Blob([tempElement.innerText], { type: 'text/plain' })\n            })\n        ]);\n        document.body.removeChild(tempElement);\n    };\n    AIAssistView.prototype.handleItemClick = function (args, index) {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        args.item.controlParent.element.querySelector('.e-assist-dislike');\n        if (args.item.prefixIcon === 'e-icons e-assist-copy') {\n            this.getClipBoardContent(this.prompts[parseInt(index.toString(), 10)].response);\n            args.item.prefixIcon = 'e-icons e-assist-check';\n            this.responseToolbarEle.dataBind();\n            setTimeout(function () {\n                args.item.prefixIcon = 'e-icons e-assist-copy';\n                _this.responseToolbarEle.dataBind();\n            }, 1000);\n        }\n        var icon = args.item.prefixIcon;\n        var isLikeInteracted = icon === 'e-icons e-assist-like-filled' || icon === 'e-icons e-assist-like';\n        var isDislikeInteracted = icon === 'e-icons e-assist-dislike-filled' || icon === 'e-icons e-assist-dislike';\n        if (isLikeInteracted || isDislikeInteracted) {\n            var isHelpful = null;\n            if (isLikeInteracted) {\n                isHelpful = this.prompts[parseInt(index.toString(), 10)].isResponseHelpful === true ? null : true;\n            }\n            else if (isDislikeInteracted) {\n                isHelpful = this.prompts[parseInt(index.toString(), 10)].isResponseHelpful === false ? null : false;\n            }\n            var prevOnChange = this.isProtectedOnChange;\n            this.isProtectedOnChange = true;\n            this.prompts[parseInt(index.toString(), 10)].isResponseHelpful = isHelpful;\n            var promptItem = this.prompts[parseInt(index.toString(), 10)];\n            // eslint-disable-next-line  @typescript-eslint/no-explicit-any\n            var controlParentItems = args.item.controlParent.items;\n            if (isLikeInteracted) {\n                if (promptItem.isResponseHelpful === true) {\n                    args.item.prefixIcon = 'e-icons e-assist-like-filled';\n                    if (controlParentItems && controlParentItems.length > 2) {\n                        controlParentItems[2].prefixIcon = 'e-icons e-assist-dislike';\n                    }\n                }\n                else {\n                    args.item.prefixIcon = 'e-icons e-assist-like';\n                }\n            }\n            else if (isDislikeInteracted) {\n                if (promptItem.isResponseHelpful === false) {\n                    args.item.prefixIcon = 'e-icons e-assist-dislike-filled';\n                    if (controlParentItems && controlParentItems.length > 1) {\n                        controlParentItems[1].prefixIcon = 'e-icons e-assist-like';\n                    }\n                }\n                else {\n                    args.item.prefixIcon = 'e-icons e-assist-dislike';\n                }\n            }\n            this.responseToolbarEle.dataBind();\n            this.isProtectedOnChange = prevOnChange;\n        }\n    };\n    AIAssistView.prototype.renderPrompt = function (promptText, promptIndex) {\n        var outputPrompt = this.createElement('div', { attrs: { class: 'e-prompt-text', tabindex: '0' } });\n        var promptContent = this.createElement('div', { className: 'e-prompt-content' });\n        var promptToolbarContainer = this.createElement('div', { className: 'e-prompt-toolbar' });\n        var promptToolbar = this.createElement('div');\n        var userIcon = this.createElement('span', { className: this.promptIconCss ? 'e-prompt-icon e-icons '\n                + this.promptIconCss : '' });\n        if (this.promptItemTemplate) {\n            this.getContextObject('promptItemTemplate', this.outputSuggestionEle, promptIndex);\n        }\n        else {\n            outputPrompt.innerHTML = promptText;\n            this.appendChildren(promptContent, outputPrompt);\n            if (this.promptIconCss) {\n                promptContent.appendChild(userIcon);\n            }\n            this.outputSuggestionEle.append(promptContent);\n        }\n        this.renderPromptToolbar(promptToolbar, promptIndex);\n        promptToolbarContainer.append(promptToolbar);\n        this.appendChildren(this.outputSuggestionEle, promptToolbarContainer);\n    };\n    AIAssistView.prototype.renderPromptToolbar = function (element, promptIndex) {\n        var _this = this;\n        var pushToolbar = [];\n        if (this.promptToolbarSettings.items.length === 0) {\n            pushToolbar = [\n                { prefixIcon: 'e-icons e-assist-edit', tooltipText: 'Edit' },\n                { prefixIcon: 'e-icons e-assist-copy', tooltipText: 'Copy' }\n            ];\n            var prevOnChange = this.isProtectedOnChange;\n            this.isProtectedOnChange = true;\n            this.promptToolbarSettings.items = [\n                { iconCss: 'e-icons e-assist-edit', tooltip: 'Edit' },\n                { iconCss: 'e-icons e-assist-copy', tooltip: 'Copy' }\n            ];\n            this.isProtectedOnChange = prevOnChange;\n        }\n        else {\n            pushToolbar = this.promptToolbarSettings.items.map(function (item) { return ({\n                type: item.type,\n                template: item.template,\n                disabled: item.disabled,\n                cssClass: item.cssClass,\n                visible: item.visible,\n                tooltipText: item.tooltip,\n                prefixIcon: item.iconCss,\n                text: item.text,\n                align: item.align,\n                width: _this.promptToolbarSettings.width\n            }); });\n        }\n        this.promptToolbarEle = new Toolbar({\n            items: pushToolbar,\n            clicked: function (args) {\n                var eventItemArgs = {\n                    type: args.item.type,\n                    text: args.item.text,\n                    iconCss: args.item.prefixIcon,\n                    cssClass: args.item.cssClass,\n                    tooltip: args.item.tooltipText,\n                    template: args.item.template,\n                    disabled: args.item.disabled,\n                    visible: args.item.visible,\n                    align: args.item.align,\n                    tabIndex: args.item.tabIndex\n                };\n                var eventArgs = {\n                    item: eventItemArgs,\n                    event: args.originalEvent,\n                    cancel: false,\n                    dataIndex: promptIndex\n                };\n                if (_this.promptToolbarSettings.itemClicked) {\n                    _this.promptToolbarSettings.itemClicked.call(_this, eventArgs);\n                }\n                if (!eventArgs.cancel) {\n                    if (args.item.prefixIcon === 'e-icons e-assist-edit') {\n                        _this.onEditIconClick(promptIndex);\n                    }\n                    if (args.item.prefixIcon === 'e-icons e-assist-copy') {\n                        _this.getClipBoardContent(_this.prompts[parseInt(promptIndex.toString(), 10)].prompt);\n                        args.item.prefixIcon = 'e-icons e-assist-check';\n                        _this.promptToolbarEle.dataBind();\n                        setTimeout(function () {\n                            args.item.prefixIcon = 'e-icons e-assist-copy';\n                            _this.promptToolbarEle.dataBind();\n                        }, 1000);\n                    }\n                }\n            }\n        });\n        this.promptToolbarEle.appendTo(element);\n        this.promptToolbarEle.element.setAttribute('aria-label', \"prompt-toolbar-\" + promptIndex);\n    };\n    AIAssistView.prototype.renderSkeleton = function () {\n        this.skeletonContainer = this.createElement('div', { className: 'e-output-container' });\n        var outputViewWrapper = this.createElement('div', { className: 'e-output', styles: 'width: 70%;' });\n        var skeletonIconEle = this.createElement('span', { className: 'e-output-icon e-skeleton e-skeleton-text e-shimmer-wave' });\n        var skeletonBodyEle = this.createElement('div', { className: 'e-loading-body' });\n        var skeletonFooterEle = this.createElement('div', { className: 'e-loading-footer' });\n        var _a = [\n            this.createElement('div', { className: 'e-skeleton e-skeleton-text e-shimmer-wave', styles: 'width: 100%; height: 15px;' }),\n            this.createElement('div', { className: 'e-skeleton e-skeleton-text e-shimmer-wave', styles: 'width: 75%; height: 15px;' }),\n            this.createElement('div', { className: 'e-skeleton e-skeleton-text e-shimmer-wave', styles: 'width: 50%; height: 15px;' })\n        ], skeletonLine1 = _a[0], skeletonLine2 = _a[1], skeletonLine3 = _a[2];\n        var footerSkeleton = [\n            this.createElement('div', { className: 'e-skeleton e-skeleton-text e-shimmer-wave', styles: 'width: 100%; height: 30px;' })\n        ][0];\n        this.appendChildren(skeletonBodyEle, skeletonLine1, skeletonLine2, skeletonLine3);\n        skeletonFooterEle.append(footerSkeleton);\n        this.appendChildren(outputViewWrapper, skeletonBodyEle, skeletonFooterEle);\n        this.appendChildren(this.skeletonContainer, skeletonIconEle, outputViewWrapper);\n    };\n    AIAssistView.prototype.onEditIconClick = function (promptIndex) {\n        if (this.textareaObj) {\n            if (this.suggestionsElement) {\n                this.suggestionsElement.hidden = true;\n            }\n            var prevOnChange = this.isProtectedOnChange;\n            this.isProtectedOnChange = true;\n            this.textareaObj.value = this.prompt = this.prompts[parseInt(promptIndex.toString(), 10)].prompt;\n            this.textareaObj.dataBind();\n            this.updateTextAreaObject();\n            this.textareaObj.focusIn();\n            this.isProtectedOnChange = prevOnChange;\n            this.activateSendIcon(this.prompt.length);\n        }\n    };\n    AIAssistView.prototype.updateIcons = function (newCss, isPromptIconCss) {\n        if (isPromptIconCss === void 0) { isPromptIconCss = false; }\n        var elements;\n        if (this.outputElement) {\n            if (isPromptIconCss) {\n                newCss = 'e-prompt-icon e-icons ' + newCss;\n                elements = this.outputElement.querySelectorAll('.e-prompt-icon');\n            }\n            else {\n                newCss = ' e-output-icon e-icons ' + newCss;\n                elements = this.outputElement.querySelectorAll('.e-output-icon');\n            }\n        }\n        for (var index = 0; index < (elements && elements.length); index++) {\n            removeClass([elements[parseInt(index.toString(), 10)]], elements[parseInt(index.toString(), 10)].classList.toString().trim().split(' '));\n            addClass([elements[parseInt(index.toString(), 10)]], newCss.trim().split(' '));\n        }\n    };\n    AIAssistView.prototype.updateToolbarSettings = function (previousToolbar) {\n        var previousToolbarIndex = 0;\n        for (var index = this.views.length; index < this.toolbarItems.length; index++) {\n            if (previousToolbar.items[parseInt(previousToolbarIndex.toString(), 10)] === this.toolbarItems[parseInt(index.toString(), 10)]) {\n                this.toolbarItems.splice(index, 1);\n            }\n        }\n        this.updateHeaderToolbar();\n        this.toolbar.items = this.toolbarItems;\n    };\n    AIAssistView.prototype.updateResponse = function (response, index, isFinalUpdate, responseItem) {\n        if (!this.responseItemTemplate && responseItem) {\n            var outputContentBodyEle = responseItem.querySelector('.e-content-body');\n            if (outputContentBodyEle) {\n                outputContentBodyEle.innerHTML = response;\n            }\n        }\n        else {\n            this.renderOutputContainer(undefined, response, index, false, isFinalUpdate);\n        }\n    };\n    AIAssistView.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.unWireEvents();\n        this.destroyAndNullify(this.textareaObj);\n        this.destroyAndNullify(this.responseToolbarEle);\n        this.destroyAndNullify(this.promptToolbarEle);\n        this.destroyAndNullify(this.toolbar);\n        this.destroyAssistView();\n        //private html elements nullify\n        remove(this.viewWrapper);\n        this.viewWrapper = null;\n        this.aiAssistViewRendered = null;\n        this.assistViewTemplateIndex = null;\n        this.toolbarItems = [];\n        this.displayContents = [];\n        this.isOutputRenderingStop = null;\n        this.isResponseRequested = null;\n        this.suggestionHeader = null;\n        this.previousElement = null;\n        this.assistCustomSection = null;\n        this.preTagElements = [];\n        // properties nullify\n        this.toolbarSettings = this.promptToolbarSettings = this.responseToolbarSettings = {};\n        if (this.cssClass) {\n            removeClass([this.element], this.cssClass.split(' '));\n        }\n        this.element.classList.remove('e-rtl');\n    };\n    AIAssistView.prototype.destroyAssistView = function () {\n        var properties = [\n            'toolbarHeader',\n            'sendIcon',\n            'suggestions',\n            'skeletonContainer',\n            'outputElement',\n            'outputSuggestionEle',\n            'contentFooterEle',\n            'footer',\n            'assistCustomSection',\n            'content',\n            'stopRespondingContent',\n            'stopResponding',\n            'contentWrapper'\n        ];\n        for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\n            var prop = properties_1[_i];\n            var element = prop;\n            this.removeAndNullify(this[element]);\n            this[element] = null;\n        }\n    };\n    /**\n     * Executes the specified prompt in the AIAssistView component. The method accepts a string representing the prompt.\n     *\n     * @param {string} prompt - The prompt text to be executed. It must be a non-empty string.\n     *\n     * @returns {void}\n     */\n    AIAssistView.prototype.executePrompt = function (prompt) {\n        if (!isNOU(prompt) && prompt.trim().length > 0) {\n            var prevOnChange = this.isProtectedOnChange;\n            this.isProtectedOnChange = true;\n            this.prompt = prompt;\n            this.isProtectedOnChange = prevOnChange;\n            this.onSendIconClick();\n        }\n    };\n    /**\n     * Adds a response to the last prompt or appends a new prompt data in the AIAssistView component.\n     *\n     * @param {string | Object} outputResponse - The response to be added. Can be a string representing the response or an object containing both the prompt and the response.\n     * - If `outputResponse` is a string, it updates the response for the last prompt in the prompts collection.\n     * - If `outputResponse` is an object, it can either update the response of an existing prompt if the prompt matches or append a new prompt data.\n     * @param {boolean} isFinalUpdate - Indicates whether this response is the final one, to hide the stop response button.\n     * @returns {void}\n     */\n    AIAssistView.prototype.addPromptResponse = function (outputResponse, isFinalUpdate) {\n        if (isFinalUpdate === void 0) { isFinalUpdate = true; }\n        var prevOnChange = this.isProtectedOnChange;\n        this.isProtectedOnChange = true;\n        if (!this.isOutputRenderingStop) {\n            var responseItem = this.element.querySelector(\"#e-response-item_\" + (this.prompts.length - 1));\n            var lastPrompt = this.prompts[this.prompts.length - 1];\n            if (typeof outputResponse === 'string') {\n                if (!this.isResponseRequested) {\n                    this.prompts = this.prompts.concat([{ prompt: null, response: null, isResponseHelpful: null }]);\n                    lastPrompt = this.prompts[this.prompts.length - 1];\n                }\n                lastPrompt.response = outputResponse;\n                this.updateResponse(lastPrompt.response, this.prompts.length - 1, isFinalUpdate, responseItem);\n            }\n            if (typeof outputResponse === 'object') {\n                var tPrompt = {\n                    prompt: outputResponse.prompt,\n                    response: outputResponse.response,\n                    isResponseHelpful: isNOU(outputResponse.isResponseHelpful) ? null :\n                        outputResponse.isResponseHelpful\n                };\n                if (this.prompt === tPrompt.prompt || this.lastStreamPrompt === tPrompt.prompt) {\n                    lastPrompt.response = tPrompt.response;\n                    lastPrompt.isResponseHelpful = tPrompt.isResponseHelpful;\n                    this.updateResponse(lastPrompt.response, this.prompts.length - 1, isFinalUpdate, responseItem);\n                }\n                else {\n                    this.prompts = this.prompts.concat([tPrompt]);\n                    this.renderOutputContainer(tPrompt.prompt, tPrompt.response, this.prompts.length - 1, true, isFinalUpdate);\n                }\n                if (!isFinalUpdate) {\n                    this.lastStreamPrompt = tPrompt.prompt;\n                }\n            }\n            if (isFinalUpdate && this.stopResponding) {\n                this.stopResponding.classList.remove('e-btn-active');\n            }\n            this.isResponseRequested = !isFinalUpdate;\n        }\n        this.isProtectedOnChange = prevOnChange;\n    };\n    /**\n     * Scrolls the view to the bottom to display the most recent response in the AIAssistView component.\n     * This method programmatically scrolls the view to the bottom,\n     * typically used when new responses are added or to refocus on the latest response.\n     *\n     * @returns {void}\n     */\n    AIAssistView.prototype.scrollToBottom = function () {\n        this.updateScroll(this.contentWrapper);\n    };\n    /**\n     * Called if any of the property value is changed.\n     *\n     * @param  {AIAssistViewModel} newProp - Specifies new properties\n     * @param  {AIAssistViewModel} oldProp - Specifies old properties\n     * @returns {void}\n     * @private\n     */\n    AIAssistView.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'width':\n                case 'height':\n                    this.setDimension(this.element, this.width, this.height);\n                    break;\n                case 'cssClass':\n                    this.updateCssClass(this.element, newProp.cssClass, oldProp.cssClass);\n                    break;\n                case 'promptIconCss':\n                    this.updateIcons(newProp.promptIconCss, true);\n                    break;\n                case 'responseIconCss':\n                    this.updateIcons(newProp.responseIconCss);\n                    break;\n                case 'showHeader':\n                    this.updateHeader(this.showHeader, this.toolbarHeader, this.viewWrapper);\n                    break;\n                case 'promptSuggestions':\n                    if (this.suggestionsElement) {\n                        this.suggestionsElement.remove();\n                    }\n                    if (!this.isOutputRenderingStop) {\n                        this.renderSuggestions(this.promptSuggestions, this.promptSuggestionsHeader, this.promptSuggestionItemTemplate, 'promptSuggestion', 'promptSuggestionItemTemplate', this.onSuggestionClick);\n                    }\n                    break;\n                case 'showClearButton':\n                    this.textareaObj.showClearButton = this.showClearButton;\n                    break;\n                case 'promptPlaceholder':\n                    this.textareaObj.placeholder = this.promptPlaceholder;\n                    break;\n                case 'promptSuggestionsHeader': {\n                    this.suggestionHeader.innerHTML = this.promptSuggestionsHeader;\n                    var suggestionHeaderElem = this.element.querySelector('.e-suggestions .e-suggestion-header');\n                    if (!suggestionHeaderElem) {\n                        this.suggestionsElement.append(this.suggestionHeader);\n                    }\n                    break;\n                }\n                case 'activeView': {\n                    var previousViewIndex = this.getIndex(oldProp.activeView);\n                    this.updateActiveView(previousViewIndex);\n                    break;\n                }\n                case 'enableRtl':\n                    this.element.classList[this.enableRtl ? 'add' : 'remove']('e-rtl');\n                    if (!isNOU(this.toolbar)) {\n                        this.toolbar.enableRtl = this.enableRtl;\n                        this.toolbar.dataBind();\n                    }\n                    break;\n                case 'toolbarSettings':\n                    this.updateToolbarSettings(oldProp.toolbarSettings);\n                    break;\n                case 'promptToolbarSettings':\n                case 'responseToolbarSettings':\n                case 'prompts':\n                    this.isOutputRenderingStop = false;\n                    if (this.outputElement) {\n                        remove(this.outputElement);\n                    }\n                    if (this.stopResponding) {\n                        this.stopResponding.classList.remove('e-btn-active');\n                    }\n                    this.aiAssistViewRendered = false;\n                    this.renderOutputContent(true);\n                    this.detachCodeCopyEventHandler();\n                    break;\n                case 'prompt':\n                    if (!this.footerTemplate) {\n                        this.textareaObj.value = this.prompt;\n                        this.textareaObj.dataBind();\n                        this.updateTextAreaObject();\n                    }\n                    break;\n                case 'locale':\n                    if (this.assistViewTemplateIndex < 0) {\n                        this.updateStopRespondingTitle();\n                    }\n                    break;\n            }\n        }\n    };\n    __decorate([\n        Property('')\n    ], AIAssistView.prototype, \"prompt\", void 0);\n    __decorate([\n        Property('Type prompt for assistance...')\n    ], AIAssistView.prototype, \"promptPlaceholder\", void 0);\n    __decorate([\n        Collection([], Prompt)\n    ], AIAssistView.prototype, \"prompts\", void 0);\n    __decorate([\n        Property([])\n    ], AIAssistView.prototype, \"promptSuggestions\", void 0);\n    __decorate([\n        Property('')\n    ], AIAssistView.prototype, \"promptSuggestionsHeader\", void 0);\n    __decorate([\n        Property(true)\n    ], AIAssistView.prototype, \"showHeader\", void 0);\n    __decorate([\n        Complex({ items: [] }, ToolbarSettings)\n    ], AIAssistView.prototype, \"toolbarSettings\", void 0);\n    __decorate([\n        Property(0)\n    ], AIAssistView.prototype, \"activeView\", void 0);\n    __decorate([\n        Property(null)\n    ], AIAssistView.prototype, \"promptIconCss\", void 0);\n    __decorate([\n        Property(null)\n    ], AIAssistView.prototype, \"responseIconCss\", void 0);\n    __decorate([\n        Property('100%')\n    ], AIAssistView.prototype, \"width\", void 0);\n    __decorate([\n        Property('100%')\n    ], AIAssistView.prototype, \"height\", void 0);\n    __decorate([\n        Property('')\n    ], AIAssistView.prototype, \"cssClass\", void 0);\n    __decorate([\n        Collection([], AssistView)\n    ], AIAssistView.prototype, \"views\", void 0);\n    __decorate([\n        Complex({ width: null, items: [] }, PromptToolbarSettings)\n    ], AIAssistView.prototype, \"promptToolbarSettings\", void 0);\n    __decorate([\n        Complex({ width: null, items: [] }, ResponseToolbarSettings)\n    ], AIAssistView.prototype, \"responseToolbarSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], AIAssistView.prototype, \"showClearButton\", void 0);\n    __decorate([\n        Property('')\n    ], AIAssistView.prototype, \"footerTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], AIAssistView.prototype, \"promptItemTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], AIAssistView.prototype, \"responseItemTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], AIAssistView.prototype, \"promptSuggestionItemTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], AIAssistView.prototype, \"bannerTemplate\", void 0);\n    __decorate([\n        Event()\n    ], AIAssistView.prototype, \"promptRequest\", void 0);\n    __decorate([\n        Event()\n    ], AIAssistView.prototype, \"promptChanged\", void 0);\n    __decorate([\n        Event()\n    ], AIAssistView.prototype, \"stopRespondingClick\", void 0);\n    AIAssistView = __decorate([\n        NotifyPropertyChanges\n    ], AIAssistView);\n    return AIAssistView;\n}(InterActiveChatBase));\nexport { AIAssistView };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n///<reference path='../interactive-chat-base/interactive-chat-base-model.d.ts'/>\nimport { NotifyPropertyChanges, Property, getUniqueID, isNullOrUndefined as isNOU, EventHandler, L10n } from '@syncfusion/ej2-base';\nimport { Internationalization, ChildProperty, Collection, removeClass, Event, Complex } from '@syncfusion/ej2-base';\nimport { InterActiveChatBase, ToolbarSettings } from '../interactive-chat-base/interactive-chat-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\nimport { Fab } from '@syncfusion/ej2-buttons';\nvar MessageStatus = /** @class */ (function (_super) {\n    __extends(MessageStatus, _super);\n    function MessageStatus() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('')\n    ], MessageStatus.prototype, \"iconCss\", void 0);\n    __decorate([\n        Property('')\n    ], MessageStatus.prototype, \"text\", void 0);\n    __decorate([\n        Property('')\n    ], MessageStatus.prototype, \"tooltip\", void 0);\n    return MessageStatus;\n}(ChildProperty));\nexport { MessageStatus };\n/**\n * Represents a user model for a messages in the chatUI component.\n */\nvar User = /** @class */ (function (_super) {\n    __extends(User, _super);\n    function User() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('')\n    ], User.prototype, \"id\", void 0);\n    __decorate([\n        Property('Default')\n    ], User.prototype, \"user\", void 0);\n    __decorate([\n        Property('')\n    ], User.prototype, \"avatarUrl\", void 0);\n    __decorate([\n        Property('')\n    ], User.prototype, \"avatarBgColor\", void 0);\n    __decorate([\n        Property('')\n    ], User.prototype, \"cssClass\", void 0);\n    return User;\n}(ChildProperty));\nexport { User };\n/**\n *  Represents a model for a messages in the chatUI component.\n */\nvar Message = /** @class */ (function (_super) {\n    __extends(Message, _super);\n    function Message() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('')\n    ], Message.prototype, \"id\", void 0);\n    __decorate([\n        Property('')\n    ], Message.prototype, \"text\", void 0);\n    __decorate([\n        Complex({}, User)\n    ], Message.prototype, \"author\", void 0);\n    __decorate([\n        Property('')\n    ], Message.prototype, \"timeStamp\", void 0);\n    __decorate([\n        Property('')\n    ], Message.prototype, \"timeStampFormat\", void 0);\n    __decorate([\n        Complex({}, MessageStatus)\n    ], Message.prototype, \"status\", void 0);\n    return Message;\n}(ChildProperty));\nexport { Message };\nvar ChatUI = /** @class */ (function (_super) {\n    __extends(ChatUI, _super);\n    /**\n     * Constructor for creating the component\n     *\n     * @param {ChatUIModel} options - Specifies the ChatUIModel model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function ChatUI(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.multiplier = 3;\n        return _this;\n    }\n    /**\n     * Initialize the event handler\n     *\n     * @private\n     * @returns {void}\n     */\n    ChatUI.prototype.preRender = function () {\n        if (!this.element.id) {\n            this.element.id = getUniqueID('e-' + this.getModuleName());\n        }\n    };\n    ChatUI.prototype.getDirective = function () {\n        return 'EJS-CHATUI';\n    };\n    /**\n     * To get component name.\n     *\n     * @returns {string} - It returns the current module name.\n     * @private\n     */\n    ChatUI.prototype.getModuleName = function () {\n        return 'chat-ui';\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @private\n     * @returns {string} - It returns the persisted data.\n     */\n    ChatUI.prototype.getPersistData = function () {\n        return this.addOnPersist([]);\n    };\n    ChatUI.prototype.render = function () {\n        this.renderChatUIView();\n    };\n    ChatUI.prototype.renderChatUIView = function () {\n        this.intl = new Internationalization();\n        this.setDimension(this.element, this.width, this.height);\n        this.renderViewSections(this.element, 'e-chat-header', 'e-chat-content');\n        this.viewWrapper = this.element.querySelector('.e-chat-content');\n        this.chatHeader = this.element.querySelector('.e-chat-header');\n        this.renderChatHeader();\n        this.renderChatContentElement();\n        this.renderChatSuggestionsElement();\n        this.renderChatFooterContent();\n        this.addCssClass(this.element, this.cssClass);\n        this.addRtlClass(this.element, this.enableRtl);\n        this.updateHeader(this.showHeader, this.chatHeader, this.viewWrapper);\n        if (isNOU(this.messages) || this.messages.length <= 0) {\n            this.renderBannerView(this.emptyChatTemplate, this.messageWrapper, 'emptyChatTemplate');\n            this.isEmptyChatTemplateRendered = isNOU(this.messageWrapper.querySelector('.e-empty-chat-template')) ? false : true;\n        }\n        this.wireEvents();\n        this.renderTypingIndicator();\n        this.updateScrollPosition(false, 0);\n    };\n    ChatUI.prototype.updateScrollPosition = function (isMethodCall, timeDelay) {\n        var _this = this;\n        if (this.isReact || this.isAngular) {\n            setTimeout(function () {\n                if (isMethodCall) {\n                    _this.handleAutoScroll();\n                }\n                else {\n                    _this.scrollToBottom();\n                }\n            }, timeDelay);\n        }\n        else {\n            this.scrollToBottom();\n        }\n    };\n    ChatUI.prototype.renderChatHeader = function () {\n        if (this.headerText) {\n            var headerContainer = this.createElement('div', { className: 'e-header' });\n            if (this.headerIconCss) {\n                var iconElement = this.createElement('span', { className: \"e-header-icon e-icons \" + this.headerIconCss });\n                headerContainer.appendChild(iconElement);\n            }\n            var headerTextElement = this.createElement('div', { className: 'e-header-text' });\n            headerTextElement.innerHTML = this.headerText;\n            headerContainer.appendChild(headerTextElement);\n            this.chatHeader.appendChild(headerContainer);\n            this.renderChatHeaderToolbar(headerContainer);\n        }\n    };\n    ChatUI.prototype.renderChatHeaderToolbar = function (headerContainer) {\n        var _this = this;\n        if (!isNOU(this.headerToolbar) && this.headerToolbar.items.length > 0) {\n            var toolbarEle = this.createElement('div', { className: 'e-chat-toolbar' });\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            var pushToolbar = this.headerToolbar.items.map(function (item) { return ({\n                type: item.type,\n                template: item.template,\n                disabled: item.disabled,\n                cssClass: item.cssClass,\n                visible: item.visible,\n                tooltipText: item.tooltip,\n                prefixIcon: item.iconCss,\n                text: item.text,\n                align: item.align\n            }); });\n            this.toolbar = new Toolbar({\n                items: pushToolbar,\n                height: '100%',\n                enableRtl: this.enableRtl,\n                clicked: function (args) {\n                    var eventItemArgs = {\n                        type: args.item.type,\n                        text: args.item.text,\n                        iconCss: args.item.prefixIcon,\n                        cssClass: args.item.cssClass,\n                        tooltip: args.item.tooltipText,\n                        template: args.item.template,\n                        disabled: args.item.disabled,\n                        visible: args.item.visible,\n                        align: args.item.align,\n                        tabIndex: args.item.tabIndex\n                    };\n                    var eventArgs = {\n                        item: eventItemArgs,\n                        event: args.originalEvent,\n                        cancel: false\n                    };\n                    if (_this.headerToolbar.itemClicked) {\n                        _this.headerToolbar.itemClicked.call(_this, eventArgs);\n                    }\n                }\n            });\n            this.toolbar.appendTo(toolbarEle);\n            headerContainer.appendChild(toolbarEle);\n        }\n    };\n    ChatUI.prototype.updateHeaderToolbar = function () {\n        var headerContainer = this.chatHeader.querySelector('.e-header');\n        if (!isNOU(this.toolbar)) {\n            var pushToolbar = this.headerToolbar.items.map(function (item) { return ({\n                type: item.type,\n                template: item.template,\n                disabled: item.disabled,\n                cssClass: item.cssClass,\n                visible: item.visible,\n                tooltipText: item.tooltip,\n                prefixIcon: item.iconCss,\n                text: item.text,\n                align: item.align\n            }); });\n            this.toolbar.items = pushToolbar;\n        }\n        else {\n            this.renderChatHeaderToolbar(headerContainer);\n        }\n    };\n    ChatUI.prototype.renderChatContentElement = function () {\n        this.messageWrapper = this.createElement('div', { className: 'e-message-wrapper', attrs: { 'tabindex': '0' } });\n        this.viewWrapper.prepend(this.messageWrapper);\n        this.content = this.createElement('div', { className: 'e-typing-suggestions' });\n        this.viewWrapper.append(this.content);\n        this.renderScrollDown();\n        this.setChatMsgId();\n        this.renderMessageGroup(this.messageWrapper);\n    };\n    ChatUI.prototype.setChatMsgId = function () {\n        var _this = this;\n        if (this.messages && this.messages.length > 0) {\n            var prevOnChange = this.isProtectedOnChange;\n            this.isProtectedOnChange = true;\n            this.messages = this.messages.map(function (msg, index) {\n                return __assign({}, msg, { id: msg.id || _this.element.id + \"-message-\" + (index + 1) });\n            });\n            this.isProtectedOnChange = prevOnChange;\n        }\n    };\n    ChatUI.prototype.renderScrollDown = function () {\n        var scrollDownButton = this.createElement('button', { id: 'scrollDownButton' });\n        this.downArrowIcon = new Fab({\n            iconCss: 'e-icons e-chat-scroll-down',\n            position: 'BottomRight',\n            target: this.content,\n            isPrimary: false\n        });\n        this.downArrowIcon.appendTo(scrollDownButton);\n    };\n    ChatUI.prototype.loadBatch = function () {\n        for (var i = this.startIndex - 1; i >= 0; i--) {\n            var currIndex = i; // To pass the actual index of the reversed item.\n            var prevIndex = i === this.messages.length - 1 ? -1 : currIndex + 1;\n            this.updateMessageTimeFormats(this.messages[parseInt(i.toString(), 10)], currIndex);\n            var currentMessageDate = this.getMessageDate(currIndex);\n            currentMessageDate.setHours(0, 0, 0, 0);\n            if (Math.min(currIndex, prevIndex) >= 0) {\n                var lastMessageDate = this.getMessageDate(prevIndex);\n                lastMessageDate.setHours(0, 0, 0, 0);\n                if (currentMessageDate.getTime() === lastMessageDate.getTime()) {\n                    var prevTimeBreak = this.messageWrapper.querySelectorAll('.e-timebreak')[0];\n                    if (prevTimeBreak) {\n                        prevTimeBreak.remove();\n                    }\n                }\n            }\n            this.renderGroup(this.messageWrapper, this.messages[parseInt(i.toString(), 10)], true, currIndex, prevIndex);\n            if (this.showTimeBreak) {\n                this.messageWrapper.prepend(this.createTimebreakElement(currentMessageDate));\n            }\n            var viewportHeight = window.innerHeight;\n            var loadHeight = viewportHeight * this.multiplier;\n            this.startIndex = i;\n            if (this.messageWrapper.scrollHeight > loadHeight) {\n                break;\n            }\n        }\n    };\n    ChatUI.prototype.renderMessageGroup = function (chatContentWrapper) {\n        var _this = this;\n        if (this.loadOnDemand) {\n            if (this.messages && this.messages.length <= 0) {\n                return;\n            }\n            createSpinner({ target: this.messageWrapper });\n            this.startIndex = this.messages.length;\n            this.loadBatch();\n        }\n        else {\n            this.messages.forEach(function (msg, i) {\n                _this.renderGroup(chatContentWrapper, msg, false, i, i - 1);\n            });\n        }\n    };\n    ChatUI.prototype.isTimeBreakAdded = function (chatContentWrapper, loadOldChat) {\n        return loadOldChat ?\n            chatContentWrapper.firstElementChild.classList.contains('e-timebreak') :\n            chatContentWrapper.lastElementChild.classList.contains('e-timebreak');\n    };\n    ChatUI.prototype.getLastUser = function (prevIndex) {\n        if (prevIndex >= 0) {\n            return this.messages[parseInt(prevIndex.toString(), 10)].author.id;\n        }\n        return '';\n    };\n    ChatUI.prototype.renderGroup = function (chatContentWrapper, msg, loadOldChat, index, prevIndex) {\n        var messageGroup;\n        if (!loadOldChat) {\n            this.updateMessageTimeFormats(msg, index);\n            this.handleTimeBreak(prevIndex, index, loadOldChat);\n        }\n        if (msg.author.id === this.user.id) {\n            var hasTimeBreak = this.showTimeBreak && this.isTimeBreakAdded(chatContentWrapper, loadOldChat);\n            if ((msg.author.id !== this.getLastUser(prevIndex)) || hasTimeBreak) {\n                messageGroup = this.createElement('div', { className: \"e-message-group e-right \" + (this.messageTemplate ? 'e-message-item-template' : '') });\n                this.manageChatContent(loadOldChat, chatContentWrapper, messageGroup);\n                this.addGroupItems(msg, messageGroup, false, true, index, loadOldChat);\n            }\n            else {\n                var length_1 = this.element.querySelectorAll('.e-message-group.e-right').length;\n                messageGroup = this.element.querySelectorAll('.e-message-group.e-right')[loadOldChat ? 0 : length_1 - 1];\n                this.addGroupItems(msg, messageGroup, false, true, index, loadOldChat);\n            }\n        }\n        else {\n            if (this.getLastUser(prevIndex) !== msg.author.id || this.isTimeVaries(index, prevIndex)) {\n                messageGroup = this.createElement('div', { className: \"e-message-group e-left \" + (this.messageTemplate ? 'e-message-item-template' : '') });\n                var avatarElement = this.createAvatarIcon(msg.author, false);\n                if (!this.messageTemplate) {\n                    messageGroup.prepend(avatarElement);\n                }\n                this.manageChatContent(loadOldChat, chatContentWrapper, messageGroup);\n                if (this.loadOnDemand) {\n                    this.loadLeftGroupOnDemand(msg, loadOldChat, index, messageGroup);\n                }\n                else {\n                    this.createLeftGroupItems(messageGroup, msg, index);\n                    this.addGroupItems(msg, messageGroup, true, false, index, loadOldChat);\n                }\n            }\n            else {\n                var length_2 = this.element.querySelectorAll('.e-message-group.e-left').length;\n                messageGroup = this.element.querySelectorAll('.e-message-group.e-left')[loadOldChat ? 0 : length_2 - 1];\n                if (!loadOldChat) {\n                    this.addGroupItems(msg, messageGroup, false, false, index, loadOldChat);\n                }\n                else {\n                    this.loadLeftGroupOnDemand(msg, loadOldChat, index, messageGroup);\n                }\n            }\n        }\n    };\n    ChatUI.prototype.isTimeVaries = function (index, prevIndex) {\n        var currentMessageDate = this.getMessageDate(index);\n        currentMessageDate.setHours(0, 0, 0, 0);\n        var lastMessageDate = this.getMessageDate(prevIndex);\n        lastMessageDate.setHours(0, 0, 0, 0);\n        return currentMessageDate.getTime() !== lastMessageDate.getTime();\n    };\n    ChatUI.prototype.loadLeftGroupOnDemand = function (msg, loadOldChat, index, messageGroup) {\n        // To check if the previous author is the same as the current author. If not, create a group header.\n        var isAnyMsgPresent = this.messages[parseInt((index - 1).toString(), 10)] ? true : false;\n        var prevAuthorId = isAnyMsgPresent ? this.messages[parseInt((index - 1).toString(), 10)].author.id : '';\n        var shouldCreateHeader = prevAuthorId !== msg.author.id ? true : false;\n        if (shouldCreateHeader || this.isTimeVaries(index, index - 1)) {\n            this.addGroupItems(msg, messageGroup, true, false, index, loadOldChat);\n            this.createLeftGroupItems(messageGroup, msg, index);\n        }\n        else {\n            this.addGroupItems(msg, messageGroup, false, false, index, loadOldChat);\n        }\n    };\n    ChatUI.prototype.createLeftGroupItems = function (messageGroup, msg, index) {\n        if (this.messageTemplate) {\n            return;\n        }\n        var userHeaderContainer = this.createElement('div', {\n            className: 'e-message-header-container'\n        });\n        var userHeader = this.createElement('div', {\n            className: 'e-message-header'\n        });\n        userHeader.innerHTML = msg.author.user;\n        var timeSpan = this.getTimeStampElement(msg.timeStamp\n            ? msg.timeStamp\n            : new Date(), msg.timeStampFormat, index);\n        this.appendChildren(userHeaderContainer, userHeader, timeSpan);\n        this.insertBeforeChildren(messageGroup, userHeaderContainer);\n    };\n    ChatUI.prototype.createAvatarIcon = function (author, isTypingUser) {\n        var userName = author.user.trim();\n        var nameParts = userName.split(' ');\n        var initials = nameParts.length > 1\n            ? \"\" + nameParts[0][0] + nameParts[nameParts.length - 1][0]\n            : userName[0];\n        var avatarIcon = this.createElement((!isNOU(author.avatarUrl) && author.avatarUrl !== '') ? 'img' : 'span', { className: \" \" + (!isTypingUser ? 'e-message-icon' : 'e-user-icon') + \" \" + author.cssClass });\n        if (author.avatarBgColor) {\n            avatarIcon.style.backgroundColor = author.avatarBgColor;\n        }\n        if (!isNOU(author.avatarUrl) && author.avatarUrl !== '') {\n            avatarIcon.src = author.avatarUrl;\n            avatarIcon.alt = userName;\n        }\n        else {\n            avatarIcon.innerHTML = initials;\n        }\n        return avatarIcon;\n    };\n    ChatUI.prototype.getTimeStampElement = function (timeStamp, timeStampFormat, index) {\n        var formattedTime = this.getFormattedTime(timeStamp, timeStampFormat);\n        return this.createElement('div', {\n            className: 'e-time',\n            innerHTML: this.showTimeStamp ? formattedTime : ''\n        });\n    };\n    ChatUI.prototype.updateTimeFormats = function (timeStampFormat, fullTime, index) {\n        if (this.messages[parseInt(index.toString(), 10)]) {\n            var prevOnChange = this.isProtectedOnChange;\n            this.isProtectedOnChange = true;\n            this.messages[parseInt(index.toString(), 10)].timeStamp = this.intl.parseDate(fullTime, { format: 'dd/MM/yyyy hh:mm a' });\n            this.messages[parseInt(index.toString(), 10)].timeStampFormat = timeStampFormat;\n            this.isProtectedOnChange = prevOnChange;\n        }\n    };\n    ChatUI.prototype.getFormattedTime = function (timeStamp, timeStampFormat) {\n        timeStamp = typeof timeStamp === 'string' ? new Date(timeStamp) : timeStamp;\n        return this.intl.formatDate(timeStamp, { format: this.getFormat(timeStampFormat) });\n    };\n    ChatUI.prototype.getFormat = function (timeStampFormat) {\n        var hasValue = !isNOU(timeStampFormat) && timeStampFormat.length > 0;\n        return hasValue ? timeStampFormat\n            : (!isNOU(this.timeStampFormat) && this.timeStampFormat.length) ? this.timeStampFormat : 'dd/MM/yyyy hh:mm a';\n    };\n    ChatUI.prototype.addGroupItems = function (msg, messageGroup, isUserTimeStampRendered, showStatus, index, loadOldChat) {\n        var messageItem = this.createElement('div', { className: 'e-message-item', id: \"\" + msg.id });\n        var messageStatusWrapper = this.createElement('div', { className: 'e-status-wrapper' });\n        var timeSpan = this.getTimeStampElement(msg.timeStamp ? msg.timeStamp : new Date(), msg.timeStampFormat, index);\n        var textElement = this.createElement('div', {\n            className: 'e-text',\n            innerHTML: msg.text\n        });\n        if (this.messageTemplate) {\n            this.getContextObject('messageTemplate', messageGroup, index, msg);\n        }\n        else {\n            if (!isUserTimeStampRendered) {\n                messageItem.appendChild(timeSpan);\n            }\n            if (showStatus) {\n                var messageElement = this.createElement('div', { className: 'e-status-item' });\n                var statusIcon = this.createElement('span', { attrs: { class: \"e-status-icon \" + (msg.status ? msg.status.iconCss : ''), title: \"\" + (msg.status ? msg.status.tooltip : '') } });\n                var statusText = this.createElement('div', { innerHTML: msg.status ? msg.status.text : '', className: 'e-status-text' });\n                this.appendChildren(messageElement, textElement, statusIcon);\n                this.appendChildren(messageStatusWrapper, messageElement, statusText);\n                messageItem.appendChild(messageStatusWrapper);\n            }\n            else {\n                messageItem.appendChild(textElement);\n            }\n            this.manageChatContent(loadOldChat, messageGroup, messageItem);\n        }\n    };\n    ChatUI.prototype.manageChatContent = function (loadOldChat, parentItem, ChildItem) {\n        if (loadOldChat) {\n            parentItem.prepend(ChildItem);\n        }\n        else {\n            parentItem.appendChild(ChildItem);\n        }\n    };\n    ChatUI.prototype.createTimebreakElement = function (date) {\n        var timebreakDiv = this.createElement('div', { className: \"e-timebreak \" + (this.timeBreakTemplate ? 'e-timebreak-template' : '') });\n        var formattedTime = this.getFormattedTime(date, 'MMMM d, yyyy');\n        if (this.timeBreakTemplate) {\n            this.getContextObject('timeBreakTemplate', timebreakDiv, null, null, date);\n        }\n        else {\n            var timeStampEle = this.createElement('span', { className: 'e-timestamp' });\n            timeStampEle.innerHTML = formattedTime;\n            timebreakDiv.appendChild(timeStampEle);\n        }\n        return timebreakDiv;\n    };\n    ChatUI.prototype.handleTimeBreak = function (lastMsgIndex, index, loadOldChat) {\n        if (!this.showTimeBreak) {\n            return;\n        }\n        var currentMessageDate = this.getMessageDate(index);\n        currentMessageDate.setHours(0, 0, 0, 0);\n        if (lastMsgIndex === -1) {\n            this.messageWrapper.appendChild(this.createTimebreakElement(currentMessageDate));\n        }\n        else if (index > 0) {\n            var lastMessageDate = this.getMessageDate(lastMsgIndex);\n            lastMessageDate.setHours(0, 0, 0, 0);\n            if ((currentMessageDate.getTime() !== lastMessageDate.getTime()) && !loadOldChat) {\n                this.messageWrapper.appendChild(this.createTimebreakElement(currentMessageDate));\n            }\n        }\n    };\n    ChatUI.prototype.renderNewMessage = function (msg, index) {\n        if (this.isEmptyChatTemplateRendered) {\n            var introContainer = this.messageWrapper.querySelector('.e-empty-chat-template');\n            this.messageWrapper.removeChild(introContainer);\n            this.isEmptyChatTemplateRendered = false;\n        }\n        this.renderGroup(this.messageWrapper, msg, false, index, index - 1);\n    };\n    ChatUI.prototype.loadMoreMessages = function () {\n        var _this = this;\n        if (this.startIndex <= 0) {\n            return;\n        }\n        var currentScrollOffset = this.messageWrapper.scrollHeight - this.messageWrapper.scrollTop;\n        showSpinner(this.messageWrapper);\n        setTimeout(function () {\n            hideSpinner(_this.messageWrapper);\n            _this.loadBatch();\n            _this.messageWrapper.scrollTop = _this.messageWrapper.scrollHeight - currentScrollOffset;\n        }, 1000);\n    };\n    ChatUI.prototype.updateMessageTimeFormats = function (msg, index) {\n        var fullTime = this.getFormattedTime(msg.timeStamp\n            ? msg.timeStamp\n            : new Date(), 'dd/MM/yyyy hh:mm a');\n        this.updateTimeFormats(msg.timeStampFormat, fullTime, index);\n    };\n    ChatUI.prototype.getMessageDate = function (index) {\n        return new Date(this.messages[parseInt(index.toString(), 10)].timeStamp);\n    };\n    ChatUI.prototype.renderChatSuggestionsElement = function () {\n        if (!isNOU(this.suggestions) && this.suggestions.length > 0) {\n            this.renderSuggestions(this.suggestions, null, this.suggestionTemplate, 'suggestion', 'suggestionTemplate', this.onSuggestionClick);\n        }\n    };\n    ChatUI.prototype.handleSuggestionUpdate = function () {\n        if (this.suggestionsElement) {\n            this.suggestionsElement.remove();\n        }\n        if (!isNOU(this.suggestions) && this.suggestions.length > 0) {\n            this.renderSuggestions(this.suggestions, null, this.suggestionTemplate, 'suggestion', 'suggestionTemplate', this.onSuggestionClick);\n        }\n        this.toggleScrollIcon();\n    };\n    ChatUI.prototype.onSuggestionClick = function (e) {\n        this.suggestionsElement.hidden = true;\n        this.textareaObj.value = e.target.innerText;\n        this.onSendIconClick(e);\n    };\n    ChatUI.prototype.renderChatFooterContent = function () {\n        this.footer = this.getElement('footer');\n        var footerClass = \"e-footer \" + (this.footerTemplate ? 'e-footer-template' : '');\n        this.footer.className = footerClass;\n        this.renderChatFooter();\n        this.viewWrapper.append(this.footer);\n        this.updateFooter(this.showFooter, this.footer);\n    };\n    ChatUI.prototype.renderChatFooter = function () {\n        var _this = this;\n        this.textareaObj = this.renderFooterContent(this.footerTemplate, this.footer, '', this.placeholder, false, this.getRowCount(''), 'e-chat-textarea');\n        var sendIconClass = 'e-chat-send e-icons disabled';\n        if (!this.footerTemplate) {\n            this.sendIcon = this.renderSendIcon(sendIconClass, this.footer);\n        }\n        if (this.textareaObj) {\n            this.textareaObj.input = this.handleInput.bind(this);\n            this.textareaObj.blur = function (args) { return _this.triggerUserTyping(args.event, args.value); };\n            if (!isNOU(this.textareaObj.value)) {\n                this.activateSendIcon(this.textareaObj.value.length);\n            }\n        }\n    };\n    ChatUI.prototype.handleInput = function (args) {\n        this.triggerUserTyping(args.event, args.value);\n        this.activateSendIcon(args.value.length);\n        this.updateTextAreaObject(args.value);\n    };\n    ChatUI.prototype.triggerUserTyping = function (event, value) {\n        var eventArgs = {\n            event: event,\n            message: value,\n            user: this.user,\n            isTyping: event.type === 'blur' ? false : value.length > 0 ? true : false\n        };\n        this.trigger('userTyping', eventArgs);\n    };\n    ChatUI.prototype.renderTypingIndicator = function () {\n        var _this = this;\n        this.l10n = new L10n('chat-ui', {\n            oneUserTyping: '{0} is typing',\n            twoUserTyping: '{0} and {1} are typing',\n            threeUserTyping: '{0}, {1}, and {2} other are typing',\n            multipleUsersTyping: '{0}, {1}, and {2} others are typing'\n        }, this.locale);\n        if (this.indicatorWrapper) {\n            this.indicatorWrapper.remove();\n        }\n        if (!this.typingUsers || this.typingUsers.length === 0) {\n            return;\n        }\n        this.indicatorWrapper = this.createElement('div', {\n            className: \"e-typing-indicator \" + (this.typingUsersTemplate ? 'e-typing-indicator-template' : '')\n        });\n        if (this.typingUsersTemplate) {\n            this.getContextObject('typingUsersTemplate', this.indicatorWrapper, null, null, null);\n        }\n        else {\n            this.typingUsers.slice(0, 3).forEach(function (user) {\n                var avatarElement = _this.createAvatarIcon(user, true);\n                _this.indicatorWrapper.appendChild(avatarElement);\n            });\n            var typingMessage = this.createElement('span', { className: 'e-user-text' });\n            this.indicatorWrapper.appendChild(typingMessage);\n            this.updateUserText();\n            var indicatorContainer = this.createElement('div', { className: 'e-indicator-wrapper' });\n            for (var i = 0; i < 3; i++) {\n                var indicator = this.createElement('span', {\n                    className: 'e-indicator'\n                });\n                this.appendChildren(indicatorContainer, indicator);\n            }\n            this.indicatorWrapper.appendChild(indicatorContainer);\n        }\n        this.content.prepend(this.indicatorWrapper);\n    };\n    ChatUI.prototype.updateUserText = function () {\n        var _this = this;\n        if (this.typingUsersTemplate) {\n            return;\n        }\n        this.l10n.setLocale(this.locale);\n        var userNames = this.typingUsers.filter(function (user) { return user.user !== _this.user.user; })\n            .map(function (user) { return user.user; });\n        var displayText = this.getTypingMessage(userNames);\n        var typingMessage = this.indicatorWrapper.querySelector('.e-user-text');\n        typingMessage.innerHTML = displayText;\n    };\n    ChatUI.prototype.getTypingMessage = function (userNames) {\n        if (userNames.length >= 3) {\n            return this.l10n.getConstant(userNames.length > 3 ? 'multipleUsersTyping' : 'threeUserTyping')\n                .replace('{0}', userNames[0].toString())\n                .replace('{1}', userNames[1].toString())\n                .replace('{2}', (userNames.length - 2).toString());\n        }\n        else {\n            var userTemplate = this.l10n.getConstant(userNames.length === 2 ? 'twoUserTyping' : 'oneUserTyping');\n            return userNames.length === 2\n                ? userTemplate.replace('{0}', userNames[0].toString()).replace('{1}', userNames[1].toString())\n                : userTemplate.replace('{0}', userNames[0].toString());\n        }\n    };\n    ChatUI.prototype.updateTypingUsers = function (users) {\n        var prevOnChange = this.isProtectedOnChange;\n        this.isProtectedOnChange = true;\n        this.typingUsers = users;\n        this.isProtectedOnChange = prevOnChange;\n        this.renderTypingIndicator();\n    };\n    ChatUI.prototype.updateTextAreaObject = function (textValue) {\n        var rowCount = this.getRowCount(textValue);\n        this.textareaObj.rows = rowCount;\n        this.textareaObj.cssClass = (rowCount >= 10) ? 'show-scrollbar' : 'hide-scrollbar';\n    };\n    ChatUI.prototype.getRowCount = function (textValue) {\n        var lines = textValue.split('\\n').length;\n        return (lines < 10 ? (lines >= 1 ? lines : 1) : 10);\n    };\n    ChatUI.prototype.activateSendIcon = function (value) {\n        this.sendIcon.classList.toggle('disabled', value === 0);\n        this.sendIcon.classList.toggle('enabled', value > 0);\n    };\n    ChatUI.prototype.updateHeaderIcon = function () {\n        var existingIconElement = this.element.querySelector('.e-header-icon');\n        if (existingIconElement) {\n            existingIconElement.className = \"e-header-icon e-icons \" + this.headerIconCss;\n        }\n        else {\n            var headerContainer = this.element.querySelector('.e-header');\n            if (headerContainer) {\n                var iconElement = this.createElement('span', {\n                    className: \"e-header-icon e-icons \" + this.headerIconCss\n                });\n                headerContainer.prepend(iconElement);\n            }\n        }\n    };\n    ChatUI.prototype.updateHeaderText = function () {\n        if (this.headerText) {\n            var headerTextEle = this.element.querySelector('.e-header-text');\n            if (headerTextEle) {\n                headerTextEle.innerHTML = this.headerText;\n            }\n        }\n    };\n    ChatUI.prototype.renderUpdatedMessage = function () {\n        this.messageWrapper.innerHTML = '';\n        this.setChatMsgId();\n        this.renderMessageGroup(this.messageWrapper);\n    };\n    ChatUI.prototype.onSendIconClick = function (event) {\n        var _this = this;\n        if (!this.textareaObj.value.trim()) {\n            return;\n        }\n        var newMessageObj = {\n            id: this.element.id + \"-message-\" + (this.messages.length + 1),\n            author: this.user,\n            text: this.textareaObj.value\n        };\n        var prevOnChange = this.isProtectedOnChange;\n        this.textareaObj.value = '';\n        this.activateSendIcon(this.textareaObj.value.length);\n        var eventArgs = {\n            cancel: false,\n            message: newMessageObj\n        };\n        this.triggerUserTyping(event, '');\n        this.trigger('messageSend', eventArgs, function (args) {\n            if (args.cancel) {\n                return;\n            }\n            newMessageObj = args.message;\n            _this.isProtectedOnChange = true;\n            _this.messages = _this.messages.concat([newMessageObj]);\n            _this.isProtectedOnChange = prevOnChange;\n            _this.renderNewMessage(newMessageObj, (_this.messages.length - 1));\n        });\n        if (this.suggestionsElement) {\n            this.suggestionsElement.hidden = false;\n        }\n        // To prevent the issue where scrolling does not move to the bottom in the `messageTemplate` case on Angular and React platforms.\n        this.updateScrollPosition(false, 5);\n    };\n    ChatUI.prototype.getContextObject = function (templateName, contentElement, index, message, currentMessagedate) {\n        var template;\n        var context = {};\n        switch (templateName.toLowerCase()) {\n            case 'messagetemplate': {\n                template = this.messageTemplate;\n                context = { message: message, index: index };\n                break;\n            }\n            case 'timebreaktemplate': {\n                template = this.timeBreakTemplate;\n                context = { messageDate: currentMessagedate };\n                break;\n            }\n            case 'typinguserstemplate': {\n                template = this.typingUsersTemplate;\n                context = { users: this.typingUsers };\n                break;\n            }\n        }\n        this.updateContent(template, contentElement, context, templateName);\n    };\n    ChatUI.prototype.handleAutoScroll = function () {\n        if (this.isScrollAtBottom) {\n            this.updateScroll(this.messageWrapper);\n        }\n        if (this.autoScrollToBottom) {\n            this.updateScroll(this.messageWrapper);\n        }\n        this.toggleScrollIcon();\n    };\n    ChatUI.prototype.footerKeyHandler = function (e) {\n        this.keyHandler(e, 'footer');\n    };\n    ChatUI.prototype.scrollBottomKeyHandler = function (e) {\n        this.keyHandler(e, 'scrollBottom');\n    };\n    ChatUI.prototype.keyHandler = function (event, value) {\n        if (event.key === 'Enter' && !event.shiftKey) {\n            switch (value) {\n                case 'footer':\n                    event.preventDefault();\n                    this.onSendIconClick(event);\n                    this.updateTextAreaObject(this.textareaObj.value);\n                    break;\n                case 'scrollBottom':\n                    this.scrollToBottom();\n                    break;\n            }\n        }\n    };\n    ChatUI.prototype.updateFooter = function (showFooter, footerElement) {\n        if (!showFooter) {\n            footerElement.hidden = true;\n        }\n        else {\n            footerElement.hidden = false;\n        }\n    };\n    ChatUI.prototype.handleScroll = function () {\n        var atBottom = this.checkScrollAtBottom();\n        if (atBottom) {\n            this.toggleClassName(this.downArrowIcon.element, atBottom, 'downArrow');\n            var suggestionEle = this.element.querySelector('.e-suggestions');\n            if (suggestionEle) {\n                this.toggleClassName(suggestionEle, atBottom, 'suggestion');\n                if (!atBottom || !this.isScrollAtBottom) {\n                    this.updateScroll(this.messageWrapper);\n                }\n            }\n        }\n        if (this.loadOnDemand && this.messageWrapper.scrollTop === 0) {\n            this.multiplier += this.multiplier;\n            this.loadMoreMessages();\n        }\n        this.isScrollAtBottom = atBottom;\n    };\n    ChatUI.prototype.checkScrollAtBottom = function () {\n        var scrollThreshold = 5;\n        var scrollTop = Math.floor(this.messageWrapper.scrollTop);\n        var scrollHeight = Math.floor(this.messageWrapper.scrollHeight);\n        var clientHeight = Math.floor(this.messageWrapper.clientHeight);\n        return scrollHeight - scrollTop <= clientHeight + scrollThreshold;\n    };\n    ChatUI.prototype.toggleClassName = function (element, atBottom, name) {\n        switch (name) {\n            case 'downArrow':\n                element.classList.toggle('e-arrowdown-hide', atBottom);\n                element.classList.toggle('e-arrowdown-show', !atBottom);\n                break;\n            case 'suggestion':\n                element.classList.toggle('e-show-suggestions', atBottom);\n                element.classList.toggle('e-hide-suggestions', !atBottom);\n                break;\n            case 'scroll':\n                element.classList.toggle('e-scroll-smooth', !atBottom);\n                break;\n        }\n    };\n    ChatUI.prototype.toggleScrollIcon = function () {\n        var atBottom = this.checkScrollAtBottom();\n        this.toggleClassName(this.downArrowIcon.element, atBottom, 'downArrow');\n        var suggestionEle = this.element.querySelector('.e-suggestions');\n        if (suggestionEle) {\n            this.toggleClassName(suggestionEle, atBottom, 'suggestion');\n            if (atBottom) {\n                this.updateScroll(this.messageWrapper);\n            }\n        }\n        this.isScrollAtBottom = atBottom;\n    };\n    ChatUI.prototype.scrollBtnClick = function () {\n        this.toggleClassName(this.messageWrapper, false, 'scroll');\n        this.scrollToBottom();\n        this.toggleClassName(this.messageWrapper, true, 'scroll');\n    };\n    ChatUI.prototype.updateMessageItem = function (message, msgId) {\n        if (message.author || message.timeStamp || this.messageTemplate) {\n            this.renderUpdatedMessage();\n            return;\n        }\n        var messageItem = this.messageWrapper.querySelector(\"#\" + msgId);\n        if (!messageItem) {\n            return;\n        }\n        if (message.id) {\n            messageItem.id = message.id;\n        }\n        var textElement = messageItem.querySelector('.e-text');\n        if (textElement && message.text) {\n            textElement.innerHTML = message.text;\n        }\n        if (message.status) {\n            var statusTextElement = messageItem.querySelector('.e-status-text');\n            if (statusTextElement && message.status.text) {\n                statusTextElement.innerHTML = message.status.text;\n            }\n            var statusIconElement = messageItem.querySelector('.e-status-icon');\n            if (statusIconElement && message.status.iconCss) {\n                var iconCss = message.status.iconCss;\n                statusIconElement.className = \"e-status-icon \" + iconCss;\n                if (message.status.tooltip) {\n                    statusIconElement.title = message.status.tooltip;\n                }\n            }\n        }\n    };\n    ChatUI.prototype.wireEvents = function () {\n        this.wireFooterEvents(this.sendIcon, this.footer, this.footerTemplate);\n        EventHandler.add(this.messageWrapper, 'scroll', this.handleScroll, this);\n        EventHandler.add(this.downArrowIcon.element, 'click', this.scrollBtnClick, this);\n        EventHandler.add(this.downArrowIcon.element, 'keydown', this.scrollBottomKeyHandler, this);\n    };\n    ChatUI.prototype.unwireEvents = function () {\n        this.unWireFooterEvents(this.sendIcon, this.footer, this.footerTemplate);\n        EventHandler.remove(this.messageWrapper, 'scroll', this.handleScroll);\n        EventHandler.remove(this.downArrowIcon.element, 'click', this.scrollBtnClick);\n        EventHandler.remove(this.downArrowIcon.element, 'keydown', this.scrollBottomKeyHandler);\n    };\n    ChatUI.prototype.destroyChatUI = function () {\n        var properties = [\n            'content',\n            'sendIcon',\n            'footer',\n            'indicatorWrapper',\n            'messageWrapper',\n            'viewWrapper',\n            'chatHeader'\n        ];\n        for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\n            var prop = properties_1[_i];\n            var element = prop;\n            this.removeAndNullify(this[element]);\n            this[element] = null;\n        }\n    };\n    /**\n     * Scrolls to the last message in the conversation area of the Chat UI component.\n     * This method allows programmatic control to ensure the chat view is scrolled to the bottom, typically used when new messages are added or to refocus on the most recent conversation.\n     *\n     * @returns {void}\n     */\n    ChatUI.prototype.scrollToBottom = function () {\n        this.updateScroll(this.messageWrapper);\n        this.toggleScrollIcon();\n    };\n    /**\n     * Appends a new message to the end of the Chat UI conversation area.\n     * This method adds the specified message as the latest entry in the chat:\n     *\n     * @function addMessage\n     * @param {string | MessageModel} message - The message to be added to the conversation. Accepts either a plain text string or a `MessageModel` object.\n     * - If `message` is a string, a `MessageModel` will be automatically created with the current user’s details, and the message will be appended.\n     * - If `message` is an instance of `MessageModel`, it can represent a message from either the current user or another participant and will be appended directly.\n     * @returns {void} No return value.\n     */\n    ChatUI.prototype.addMessage = function (message) {\n        if (isNOU(message)) {\n            return;\n        }\n        var prevOnChange = this.isProtectedOnChange;\n        this.isProtectedOnChange = true;\n        if (typeof message === 'string') {\n            var newMessageObj = {\n                id: this.element.id + \"-message-\" + (this.messages.length + 1),\n                author: this.user,\n                text: message,\n                timeStamp: new Date(),\n                timeStampFormat: this.timeStampFormat\n            };\n            this.messages = this.messages.concat([newMessageObj]);\n            this.renderNewMessage(newMessageObj, (this.messages.length - 1));\n        }\n        else {\n            var newMessageObj = __assign({}, message, { id: message.id || this.element.id + \"-message-\" + (this.messages.length + 1) });\n            this.messages = this.messages.concat([newMessageObj]);\n            this.renderNewMessage(newMessageObj, (this.messages.length - 1));\n        }\n        // To prevent the issue where scrolling does not move to the bottom in the `messageTemplate` case on Angular and React platforms.\n        this.updateScrollPosition(true, 5);\n        this.isProtectedOnChange = prevOnChange;\n    };\n    /**\n     * Updates an existing message in the Chat UI component.\n     * This method allows for modifying a message that has already been added to the conversation.\n     * It requires the unique identifier of the message to be updated and the new message content as a `MessageModel`.\n     *\n     * @function updateMessage\n     * @param {MessageModel} message - The updated message content represented as a `MessageModel`.\n     * @param {string} msgId - The unique identifier of the message to be updated.\n     * @returns {void} No return value.\n     */\n    ChatUI.prototype.updateMessage = function (message, msgId) {\n        var prevOnChange = this.isProtectedOnChange;\n        this.isProtectedOnChange = true;\n        this.messages = this.messages.map(function (messageItem) {\n            return messageItem.id === msgId ? __assign({}, messageItem, message) : messageItem;\n        });\n        this.updateMessageItem(message, msgId);\n        this.isProtectedOnChange = prevOnChange;\n    };\n    /**\n     * Scrolls to a specific message in the Chat UI component based on the provided message ID.\n     * Locates the message with the specified ID and scrolls it to the view.\n     *\n     * @function scrollToMessage\n     * @param {string} messageId - The unique identifier of the message to navigate to the corresponding message rendered in the chat UI.\n     * @returns {void}.\n     */\n    ChatUI.prototype.scrollToMessage = function (messageId) {\n        var messageElement = this.messageWrapper.querySelector(\"#\" + messageId);\n        if (!messageElement) {\n            return;\n        }\n        messageElement.scrollIntoView({\n            behavior: 'smooth',\n            block: 'start'\n        });\n    };\n    /**\n     * Sets focus for the input textarea in the Chat UI component.\n     * Ensures that user input is directed to the chat input field.\n     *\n     * @function focus\n     * @returns {void}.\n     */\n    ChatUI.prototype.focus = function () {\n        if (this.textareaObj) {\n            this.textareaObj.focusIn();\n        }\n    };\n    ChatUI.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.unwireEvents();\n        if (this.cssClass) {\n            removeClass([this.element], this.cssClass.split(' '));\n        }\n        this.element.classList.remove('e-rtl');\n        this.destroyAndNullify(this.textareaObj);\n        this.destroyAndNullify(this.downArrowIcon);\n        this.destroyAndNullify(this.toolbar);\n        this.destroyChatUI();\n        this.intl = null;\n    };\n    /**\n     * Called if any of the property value is changed.\n     *\n     * @param  {ChatUIModel} newProp - Specifies new properties\n     * @param  {ChatUIModel} oldProp - Specifies old properties\n     * @returns {void}\n     * @private\n     */\n    ChatUI.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'width':\n                case 'height':\n                    this.setDimension(this.element, this.width, this.height);\n                    break;\n                case 'placeholder':\n                    if (this.textareaObj) {\n                        this.textareaObj.placeholder = this.placeholder;\n                    }\n                    break;\n                case 'cssClass':\n                    this.updateCssClass(this.element, newProp.cssClass, oldProp.cssClass);\n                    break;\n                case 'enableRtl':\n                    this.element.classList[this.enableRtl ? 'add' : 'remove']('e-rtl');\n                    if (!isNOU(this.toolbar)) {\n                        this.toolbar.enableRtl = this.enableRtl;\n                        this.toolbar.dataBind();\n                    }\n                    break;\n                case 'showHeader':\n                    this.updateHeader(this.showHeader, this.chatHeader, this.viewWrapper);\n                    break;\n                case 'headerText':\n                    this.updateHeaderText();\n                    break;\n                case 'headerIconCss':\n                    this.updateHeaderIcon();\n                    break;\n                case 'messages': {\n                    this.renderUpdatedMessage();\n                    // To prevent the issue where scrolling does not move to the bottom in the `messageTemplate` case on Angular and React platforms.\n                    this.updateScrollPosition(true, 5);\n                    break;\n                }\n                case 'user': {\n                    var newUser = {\n                        id: newProp.user.id,\n                        user: newProp.user.user,\n                        avatarUrl: newProp.user.avatarUrl,\n                        avatarBgColor: newProp.user.avatarBgColor,\n                        cssClass: newProp.user.cssClass\n                    };\n                    this.user = __assign({}, this.user, newUser);\n                    break;\n                }\n                case 'showTimeStamp':\n                case 'timeStampFormat':\n                case 'showTimeBreak':\n                    if (this.messages.length > 0) {\n                        this.renderUpdatedMessage();\n                    }\n                    break;\n                case 'showFooter':\n                    this.updateFooter(this.showFooter, this.footer);\n                    break;\n                case 'autoScrollToBottom':\n                    this.handleAutoScroll();\n                    break;\n                case 'suggestions':\n                    this.handleSuggestionUpdate();\n                    break;\n                case 'typingUsers':\n                    this.updateTypingUsers(this.typingUsers);\n                    break;\n                case 'locale':\n                    if (!this.typingUsers || this.typingUsers.length === 0) {\n                        return;\n                    }\n                    this.updateUserText();\n                    break;\n                case 'headerToolbar':\n                    this.updateHeaderToolbar();\n                    break;\n                case 'currencyCode':\n                    this.refresh();\n                    break;\n            }\n        }\n    };\n    __decorate([\n        Property('100%')\n    ], ChatUI.prototype, \"width\", void 0);\n    __decorate([\n        Property('100%')\n    ], ChatUI.prototype, \"height\", void 0);\n    __decorate([\n        Complex({}, User)\n    ], ChatUI.prototype, \"user\", void 0);\n    __decorate([\n        Property('Chat')\n    ], ChatUI.prototype, \"headerText\", void 0);\n    __decorate([\n        Property('')\n    ], ChatUI.prototype, \"headerIconCss\", void 0);\n    __decorate([\n        Property('Type your message…')\n    ], ChatUI.prototype, \"placeholder\", void 0);\n    __decorate([\n        Property('')\n    ], ChatUI.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(true)\n    ], ChatUI.prototype, \"showHeader\", void 0);\n    __decorate([\n        Property(true)\n    ], ChatUI.prototype, \"showFooter\", void 0);\n    __decorate([\n        Complex({ items: [] }, ToolbarSettings)\n    ], ChatUI.prototype, \"headerToolbar\", void 0);\n    __decorate([\n        Property([])\n    ], ChatUI.prototype, \"suggestions\", void 0);\n    __decorate([\n        Property(false)\n    ], ChatUI.prototype, \"showTimeBreak\", void 0);\n    __decorate([\n        Collection([], Message)\n    ], ChatUI.prototype, \"messages\", void 0);\n    __decorate([\n        Collection([], User)\n    ], ChatUI.prototype, \"typingUsers\", void 0);\n    __decorate([\n        Property('dd/MM/yyyy hh:mm a')\n    ], ChatUI.prototype, \"timeStampFormat\", void 0);\n    __decorate([\n        Property(true)\n    ], ChatUI.prototype, \"showTimeStamp\", void 0);\n    __decorate([\n        Property(false)\n    ], ChatUI.prototype, \"autoScrollToBottom\", void 0);\n    __decorate([\n        Property(false)\n    ], ChatUI.prototype, \"loadOnDemand\", void 0);\n    __decorate([\n        Property('')\n    ], ChatUI.prototype, \"suggestionTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], ChatUI.prototype, \"footerTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], ChatUI.prototype, \"emptyChatTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], ChatUI.prototype, \"messageTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], ChatUI.prototype, \"timeBreakTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], ChatUI.prototype, \"typingUsersTemplate\", void 0);\n    __decorate([\n        Event()\n    ], ChatUI.prototype, \"messageSend\", void 0);\n    __decorate([\n        Event()\n    ], ChatUI.prototype, \"userTyping\", void 0);\n    ChatUI = __decorate([\n        NotifyPropertyChanges\n    ], ChatUI);\n    return ChatUI;\n}(InterActiveChatBase));\nexport { ChatUI };\n"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","_super","__extends","__","this","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","ToolbarItem","ChildProperty","Property","apply","ToolbarSettings","Collection","Event","Component","InterActiveChatBase","preRender","getModuleName","getPersistData","addOnPersist","render","setDimension","element","width","height","style","isNOU","formatUnit","addCssClass","cssClass","classList","add","addRtlClass","isRtl","updateCssClass","newClass","oldClass","removeClass","trim","split","addClass","updateHeader","showHeader","headerElement","viewWrapper","hidden","renderViewSections","headerClassName","viewClassName","headerWrapper","createElement","className","appendChild","createViewComponents","contentWrapper","viewContainer","updateScroll","scrollElement","scrollTo","scrollHeight","getElement","createSuggestionElement","suggestionHeader","suggestionContainer","suggestionHeaderElement","suggestionListElement","renderSuggestions","suggestionsArray","suggestionTemplate","contextName","templateName","onSuggestionClick","suggestionList","isSuggestionTemplate","_a","suggestionsElement","renderSuggestionList","innerHTML","append","content","suggestionWrapper","_this","suggestionsListElement","attrs","tabindex","forEach","suggestion","attributes","EventHandler","suggestionItemHandler","index","parseInt","toString","updateContent","event","shiftKey","renderBannerView","bannerTemplate","parentElement","introContainer","prepend","template","contentElement","context","isReact","clearTemplate","notCompile","isVue","ctn","getTemplateFunction","renderReactTemplates","renderFooterContent","footerTemplate","footer","prompt","promptPlaceholder","showClearButton","rowCount","textareaEle","renderFooter","textareaElement","textareaObj","TextArea","rows","cols","placeholder","resizeMode","value","appendTo","renderSendIcon","sendIconClass","sendIcon","class","role","aria-label","appendChildren","children","_i","insertBeforeChildren","wireFooterEvents","onSendIconClick","footerKeyHandler","unWireFooterEvents","remove","removeAndNullify","parentNode","destroyAndNullify","obj","destroy","compile","tempEle","select","tagName","outerHTML","e","onPropertyChanged","newProp","oldProp","NotifyPropertyChanges","options","call","ASSISTHEADER","Prompt","AssistViewType","AssistView","PromptToolbarSettings","ResponseToolbarSettings","AIAssistView","id","getUniqueID","getDirective","renderPromptView","renderViews","renderToolbar","updateTextAreaObject","wireEvents","updateHeaderToolbar","assistViewTemplateIndex","displayContents","unshift","assistCustomSection","previousElement","activeView","renderHeaderToolbar","querySelector","updateActiveView","toolbarHeader","aiAssistViewRendered","enableRtl","isAssistView","isOutputRenderingStop","isResponseRequested","assistView","customViewTemplate","isAssistViewAssigned","customViewCount","views","type","toLocaleLowerCase","getContextObject","push","toolbarItems","text","name","prefixIcon","iconCss","htmlAttributes","data-index","viewTemplate","renderDefaultView","toolbarEle","toolbar","Toolbar","items","clicked","args","previousIndex","eventArgs","item","tooltip","tooltipText","disabled","visible","align","tabIndex","originalEvent","cancel","toolbarSettings","itemClicked","prevOnChange","isProtectedOnChange","getIndex","setAttribute","pushToolbar","map","concat","currentIndex","activeViewIndex","removePreviousView","appendView","tbarEle","stopResponding","removeChild","contentContainer","footerClass","renderContent","renderAssistViewFooter","renderStopResponding","stopRespondingIcon","stopRespondingContent","l10n","L10n","stopResponseText","locale","updateStopRespondingTitle","setLocale","textContent","getConstant","promptSuggestions","promptSuggestionsHeader","promptSuggestionItemTemplate","renderOutputContent","outputElement","renderSkeleton","isMethodCall","responseToolbarSettings","prompts","renderOutputContainer","response","contains","insertBefore","getRowCount","input","handleInput","bind","activateSendIcon","previousValue","trigger","textarea","textValue","lines","toggle","keyHandler","stopResponseKeyHandler","respondingStopper","window","unWireEvents","detachCodeCopyEventHandler","preTagElements","preTag","handler","copyIcon","preventDefault","lastStreamPrompt","hasChildNodes","skeletonContainer","promptIndex","dataIndex","innerText","addPrompt","createOutputElement","responseToolbarItems","dataBind","scrollToBottom","isResponseHelpful","arrayPosition","contextIndex","contextPrompt","contextOutput","toLowerCase","promptItemTemplate","promptToolbarSettings","responseItemTemplate","outputSuggestionEle","renderPrompt","promptText","outputText","isFinalUpdate","outputContainer","renderOutput","promptIcon","responseIconCss","aiOutputEle","lastPrompt","contentFooterEle","renderOutputToolbarItems","renderOutputTextContainer","outputContentBodyEle","from","querySelectorAll","document","firstChild","getCopyHandler","preText","navigator","clipboard","writeText","setTimeout","footerContent","renderResponseToolbar","responseToolbarEle","toolbarItem","handleItemClick","getClipBoardContent","tempElement","top","left","position","opacity","body","write","ClipboardItem","text/html","Blob","text/plain","promptItem","icon","controlParent","isLikeInteracted","isDislikeInteracted","isHelpful","controlParentItems","outputPrompt","promptContent","promptToolbarContainer","promptToolbar","userIcon","promptIconCss","renderPromptToolbar","promptToolbarEle","onEditIconClick","outputViewWrapper","styles","skeletonIconEle","skeletonBodyEle","skeletonFooterEle","skeletonLine1","skeletonLine2","skeletonLine3","footerSkeleton","focusIn","updateIcons","newCss","isPromptIconCss","elements","updateToolbarSettings","previousToolbar","splice","updateResponse","responseItem","undefined","destroyAssistView","properties_1","executePrompt","addPromptResponse","outputResponse","tPrompt","keys","previousViewIndex","Complex","__assign","assign","t","s","n","MessageStatus","User","Message","ChatUI","renderChatUIView","intl","Internationalization","chatHeader","renderChatHeader","renderChatContentElement","renderChatSuggestionsElement","renderChatFooterContent","messages","emptyChatTemplate","messageWrapper","isEmptyChatTemplateRendered","renderTypingIndicator","updateScrollPosition","timeDelay","isAngular","handleAutoScroll","headerContainer","headerTextElement","headerText","headerIconCss","iconElement","renderChatHeaderToolbar","headerToolbar","renderScrollDown","setChatMsgId","renderMessageGroup","msg","scrollDownButton","downArrowIcon","Fab","isPrimary","loadBatch","startIndex","currIndex","prevIndex","currentMessageDate","updateMessageTimeFormats","getMessageDate","setHours","Math","min","lastMessageDate","getTime","prevTimeBreak","renderGroup","showTimeBreak","createTimebreakElement","loadHeight","innerHeight","multiplier","chatContentWrapper","loadOnDemand","createSpinner","isTimeBreakAdded","loadOldChat","firstElementChild","lastElementChild","getLastUser","author","messageGroup","avatarElement","handleTimeBreak","user","hasTimeBreak","messageTemplate","manageChatContent","length_1","addGroupItems","isTimeVaries","createAvatarIcon","loadLeftGroupOnDemand","createLeftGroupItems","length_2","userHeaderContainer","userHeader","timeSpan","getTimeStampElement","timeStamp","Date","timeStampFormat","isTypingUser","userName","nameParts","initials","avatarIcon","avatarUrl","avatarBgColor","backgroundColor","src","alt","formattedTime","getFormattedTime","showTimeStamp","updateTimeFormats","fullTime","parseDate","format","formatDate","getFormat","isUserTimeStampRendered","showStatus","messageItem","messageStatusWrapper","textElement","messageElement","statusIcon","status","title","statusText","parentItem","ChildItem","date","timebreakDiv","timeBreakTemplate","timeStampEle","lastMsgIndex","renderNewMessage","loadMoreMessages","currentScrollOffset","scrollTop","showSpinner","hideSpinner","suggestions","handleSuggestionUpdate","toggleScrollIcon","renderChatFooter","updateFooter","showFooter","blur","triggerUserTyping","message","isTyping","oneUserTyping","twoUserTyping","threeUserTyping","multipleUsersTyping","indicatorWrapper","typingUsers","typingUsersTemplate","slice","typingMessage","indicatorContainer","updateUserText","indicator","displayText","userNames","filter","getTypingMessage","userTemplate","replace","updateTypingUsers","users","updateHeaderIcon","existingIconElement","updateHeaderText","headerTextEle","renderUpdatedMessage","newMessageObj","currentMessagedate","messageDate","isScrollAtBottom","autoScrollToBottom","scrollBottomKeyHandler","footerElement","handleScroll","suggestionEle","atBottom","checkScrollAtBottom","toggleClassName","floor","clientHeight","scrollBtnClick","updateMessageItem","msgId","statusIconElement","statusTextElement","unwireEvents","destroyChatUI","addMessage","updateMessage","scrollToMessage","messageId","scrollIntoView","behavior","block","focus","newUser","refresh"],"mappings":"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"}