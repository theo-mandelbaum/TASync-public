{"version":3,"file":"ej2-drawings.min.js","sources":["../../src/drawing/primitives/matrix.js","../../src/drawing/utility/dom-util.js","../../src/drawing/utility/base-util.js","../../src/drawing/utility/path-util.js","../../src/drawing/rendering/canvas-renderer.js","../../src/drawing/rendering/svg-renderer.js","../../src/drawing/utility/diagram-util.js","../../src/drawing/core/appearance.js","../../src/drawing/enum/enum.js","../../src/drawing/primitives/size.js","../../src/drawing/primitives/rect.js","../../src/drawing/core/elements/drawing-element.js","../../src/drawing/core/containers/container.js","../../src/drawing/core/elements/text-element.js","../../src/drawing/core/containers/canvas.js","../../src/drawing/core/elements/image-element.js","../../src/drawing/core/elements/path-element.js","../../src/drawing/primitives/point.js","../../src/drawing/rendering/renderer.js"],"sourcesContent":["/**\n * Matrix module is used to transform points based on offsets, angle\n */\n/** @private */\nexport var MatrixTypes;\n(function (MatrixTypes) {\n    MatrixTypes[MatrixTypes[\"Identity\"] = 0] = \"Identity\";\n    MatrixTypes[MatrixTypes[\"Translation\"] = 1] = \"Translation\";\n    MatrixTypes[MatrixTypes[\"Scaling\"] = 2] = \"Scaling\";\n    MatrixTypes[MatrixTypes[\"Unknown\"] = 4] = \"Unknown\";\n})(MatrixTypes || (MatrixTypes = {}));\n/** @private */\nvar Matrix = /** @class */ (function () {\n    function Matrix(m11, m12, m21, m22, offsetX, offsetY, type) {\n        this.m11 = m11;\n        this.m12 = m12;\n        this.m21 = m21;\n        this.m22 = m22;\n        this.offsetX = offsetX;\n        this.offsetY = offsetY;\n        // if (type === undefined) {\n        //     this.type = MatrixTypes.Unknown;\n        // } else {\n        //     this.type = type;\n        // }\n        this.type = type;\n    }\n    return Matrix;\n}());\nexport { Matrix };\n/** @private */\nexport function identityMatrix() {\n    return new Matrix(1, 0, 0, 1, 0, 0, MatrixTypes.Identity);\n}\n/** @private */\nexport function transformPointByMatrix(matrix, point) {\n    var pt = multiplyPoint(matrix, point.x, point.y);\n    return { x: Math.round(pt.x * 100) / 100, y: Math.round(pt.y * 100) / 100 };\n}\n/** @private */\nexport function transformPointsByMatrix(matrix, points) {\n    var transformedPoints = [];\n    for (var _i = 0, points_1 = points; _i < points_1.length; _i++) {\n        var point = points_1[_i];\n        transformedPoints.push(transformPointByMatrix(matrix, point));\n    }\n    return transformedPoints;\n}\n/** @private */\nexport function rotateMatrix(matrix, angle, centerX, centerY) {\n    angle %= 360.0;\n    multiplyMatrix(matrix, createRotationRadians(angle * 0.017453292519943295, centerX ? centerX : 0, centerY ? centerY : 0));\n}\n/** @private */\nexport function scaleMatrix(matrix, scaleX, scaleY, centerX, centerY) {\n    if (centerX === void 0) { centerX = 0; }\n    if (centerY === void 0) { centerY = 0; }\n    multiplyMatrix(matrix, createScaling(scaleX, scaleY, centerX, centerY));\n}\n/** @private */\nexport function translateMatrix(matrix, offsetX, offsetY) {\n    if (matrix.type & MatrixTypes.Identity) {\n        matrix.type = MatrixTypes.Translation;\n        setMatrix(matrix, 1.0, 0.0, 0.0, 1.0, offsetX, offsetY);\n        return;\n    }\n    if (matrix.type & MatrixTypes.Unknown) {\n        matrix.offsetX += offsetX;\n        matrix.offsetY += offsetY;\n        return;\n    }\n    matrix.offsetX += offsetX;\n    matrix.offsetY += offsetY;\n    matrix.type |= MatrixTypes.Translation;\n}\n/** @private */\nfunction createScaling(scaleX, scaleY, centerX, centerY) {\n    var result = identityMatrix();\n    result.type = !(centerX || centerY) ? MatrixTypes.Scaling : MatrixTypes.Scaling | MatrixTypes.Translation;\n    setMatrix(result, scaleX, 0.0, 0.0, scaleY, centerX - scaleX * centerX, centerY - scaleY * centerY);\n    return result;\n}\n/** @private */\nfunction createRotationRadians(angle, centerX, centerY) {\n    var result = identityMatrix();\n    var num = Math.sin(angle);\n    var num2 = Math.cos(angle);\n    var offsetX = centerX * (1.0 - num2) + centerY * num;\n    var offsetY = centerY * (1.0 - num2) - centerX * num;\n    result.type = MatrixTypes.Unknown;\n    setMatrix(result, num2, num, -num, num2, offsetX, offsetY);\n    return result;\n}\n/** @private */\nfunction multiplyPoint(matrix, x, y) {\n    switch (matrix.type) {\n        case MatrixTypes.Identity: break;\n        case MatrixTypes.Translation:\n            x += matrix.offsetX;\n            y += matrix.offsetY;\n            break;\n        case MatrixTypes.Scaling:\n            x *= matrix.m11;\n            y *= matrix.m22;\n            break;\n        case MatrixTypes.Translation | MatrixTypes.Scaling:\n            x *= matrix.m11;\n            x += matrix.offsetX;\n            y *= matrix.m22;\n            y += matrix.offsetY;\n            break;\n        default:\n            var num = y * matrix.m21 + matrix.offsetX;\n            var num2 = x * matrix.m12 + matrix.offsetY;\n            x *= matrix.m11;\n            x += num;\n            y *= matrix.m22;\n            y += num2;\n            break;\n    }\n    return { x: x, y: y };\n}\n/** @private */\nexport function multiplyMatrix(matrix1, matrix2) {\n    var type = matrix1.type;\n    var type2 = matrix2.type;\n    if (type2 === MatrixTypes.Identity) {\n        return;\n    }\n    if (type === MatrixTypes.Identity) {\n        assignMatrix(matrix1, matrix2);\n        matrix1.type = matrix2.type;\n        return;\n    }\n    if (type2 === MatrixTypes.Translation) {\n        matrix1.offsetX += matrix2.offsetX;\n        matrix1.offsetY += matrix2.offsetY;\n        if (type !== MatrixTypes.Unknown) {\n            matrix1.type |= MatrixTypes.Translation;\n        }\n        return;\n    }\n    if (type !== MatrixTypes.Translation) {\n        var num = type << 4 | type2;\n        switch (num) {\n            case 34:\n                matrix1.m11 *= matrix2.m11;\n                matrix1.m22 *= matrix2.m22;\n                return;\n            case 35:\n                matrix1.m11 *= matrix2.m11;\n                matrix1.m22 *= matrix2.m22;\n                matrix1.offsetX = matrix2.offsetX;\n                matrix1.offsetY = matrix2.offsetY;\n                matrix1.type = (MatrixTypes.Translation | MatrixTypes.Scaling);\n                return;\n            case 36: break;\n            default:\n                {\n                    switch (num) {\n                        case 50:\n                            matrix1.m11 *= matrix2.m11;\n                            matrix1.m22 *= matrix2.m22;\n                            matrix1.offsetX *= matrix2.m11;\n                            matrix1.offsetY *= matrix2.m22;\n                            return;\n                        case 51:\n                            matrix1.m11 *= matrix2.m11;\n                            matrix1.m22 *= matrix2.m22;\n                            matrix1.offsetX = matrix2.m11 * matrix1.offsetX + matrix2.offsetX;\n                            matrix1.offsetY = matrix2.m22 * matrix1.offsetY + matrix2.offsetY;\n                            return;\n                        case 52: break;\n                        default:\n                            switch (num) {\n                                case 66:\n                                case 67:\n                                case 68: break;\n                                default: return;\n                            }\n                            break;\n                    }\n                    break;\n                }\n        }\n        var result = identityMatrix();\n        var m11New = matrix1.m11 * matrix2.m11 + matrix1.m12 * matrix2.m21;\n        var m12New = matrix1.m11 * matrix2.m12 + matrix1.m12 * matrix2.m22;\n        var m21New = matrix1.m21 * matrix2.m11 + matrix1.m22 * matrix2.m21;\n        var m22New = matrix1.m21 * matrix2.m12 + matrix1.m22 * matrix2.m22;\n        var offsetX_1 = matrix1.offsetX * matrix2.m11 + matrix1.offsetY * matrix2.m21 + matrix2.offsetX;\n        var offsetY_1 = matrix1.offsetX * matrix2.m12 + matrix1.offsetY * matrix2.m22 + matrix2.offsetY;\n        setMatrix(result, m11New, m12New, m21New, m22New, offsetX_1, offsetY_1);\n        if (result.m21 || result.m12) {\n            result.type = MatrixTypes.Unknown;\n        }\n        else {\n            if (result.m11 && result.m11 !== 1.0 || result.m22 && result.m22 !== 1.0) {\n                result.type = MatrixTypes.Scaling;\n            }\n            if (result.offsetX || result.offsetY) {\n                result.type |= MatrixTypes.Translation;\n            }\n            if ((result.type & (MatrixTypes.Translation | MatrixTypes.Scaling)) === MatrixTypes.Identity) {\n                result.type = MatrixTypes.Identity;\n            }\n            result.type = MatrixTypes.Scaling | MatrixTypes.Translation;\n        }\n        assignMatrix(matrix1, result);\n        matrix1.type = result.type;\n        return;\n    }\n    var offsetX = matrix1.offsetX;\n    var offsetY = matrix1.offsetY;\n    matrix1.offsetX = offsetX * matrix2.m11 + offsetY * matrix2.m21 + matrix2.offsetX;\n    matrix1.offsetY = offsetX * matrix2.m12 + offsetY * matrix2.m22 + matrix2.offsetY;\n    if (type2 === MatrixTypes.Unknown) {\n        matrix1.type = MatrixTypes.Unknown;\n        return;\n    }\n    matrix1.type = (MatrixTypes.Translation | MatrixTypes.Scaling);\n}\n/** @private */\nfunction setMatrix(mat, m11, m12, m21, m22, x, y) {\n    mat.m11 = m11;\n    mat.m12 = m12;\n    mat.m21 = m21;\n    mat.m22 = m22;\n    mat.offsetX = x;\n    mat.offsetY = y;\n}\n/** @private */\nfunction assignMatrix(matrix1, matrix2) {\n    matrix1.m11 = matrix2.m11;\n    matrix1.m12 = matrix2.m12;\n    matrix1.m21 = matrix2.m21;\n    matrix1.m22 = matrix2.m22;\n    matrix1.offsetX = matrix2.offsetX;\n    matrix1.offsetY = matrix2.offsetY;\n    matrix1.type = matrix2.type;\n}\n","import { Rect } from '../primitives/rect';\nimport { Size } from '../primitives/size';\nimport { whiteSpaceToString, wordBreakToString, textAlignToString, bBoxText, bBoxTextHeight } from './base-util';\nimport { identityMatrix, transformPointByMatrix, rotateMatrix } from '../primitives/matrix';\nimport { createElement, Browser } from '@syncfusion/ej2-base';\n/**\n * Defines the functionalities that need to access DOM\n */\nexport function getChildNode(node) {\n    var child;\n    var collection = [];\n    if (Browser.info.name === 'msie' || Browser.info.name === 'edge') {\n        for (var i = 0; i < node.childNodes.length; i++) {\n            child = node.childNodes[parseInt(i.toString(), 10)];\n            if (child.nodeType === 1) {\n                collection.push(child);\n            }\n        }\n    }\n    else {\n        collection = node.children;\n    }\n    return collection;\n}\nexport function translatePoints(element, points) {\n    var translatedPts = [];\n    for (var _i = 0, points_1 = points; _i < points_1.length; _i++) {\n        var point = points_1[_i];\n        var pt1 = {\n            x: element.offsetX - element.actualSize.width * element.pivot.x + point.x,\n            y: element.offsetY - element.actualSize.height * element.pivot.y + point.y\n        };\n        var matrix = void 0;\n        var angle = element.rotateAngle + element.parentTransform;\n        if (angle) {\n            matrix = identityMatrix();\n            rotateMatrix(matrix, angle, element.offsetX, element.offsetY);\n        }\n        if (matrix) {\n            pt1 = transformPointByMatrix(matrix, pt1);\n        }\n        translatedPts.push(pt1);\n    }\n    return translatedPts;\n}\n/** @private */\nexport function measurePath(data) {\n    var path = 'pathTable';\n    // eslint-disable-next-line\n    if (!window[path]) {\n        // eslint-disable-next-line\n        window[path] = {};\n    }\n    if (data) {\n        var measureElement = 'measureElement';\n        // eslint-disable-next-line\n        window[measureElement].style.visibility = 'visible';\n        // eslint-disable-next-line\n        var svg = window[measureElement].children[2];\n        var element = getChildNode(svg)[0];\n        element.setAttribute('d', data);\n        //let bounds: SVGRect = element.getBBox();\n        var bounds = void 0;\n        // eslint-disable-next-line\n        if (window[path][data]) {\n            // eslint-disable-next-line\n            bounds = window[path][data];\n        }\n        else {\n            // eslint-disable-next-line\n            window[path][data] = bounds = element.getBBox();\n            if ((bounds.x === 0 || bounds.y === 0) && (bounds.width === 0 || bounds.height === 0)) {\n                // eslint-disable-next-line\n                window[path][data] = bounds = getBBox(data);\n            }\n        }\n        var svgBounds = new Rect(bounds.x, bounds.y, bounds.width, bounds.height);\n        // eslint-disable-next-line\n        window[measureElement].style.visibility = 'hidden';\n        return svgBounds;\n    }\n    return new Rect(0, 0, 0, 0);\n}\n// tslint:disable-next-line\nfunction getBBox(path) {\n    var xmin = 0;\n    var xmax = 0;\n    var ymin = 0;\n    var ymax = 0;\n    // tslint:disable-next-line\n    var currentValue;\n    // tslint:disable-next-line\n    var currentpath = path;\n    currentpath = currentpath.replace(/[a-z].*/g, ' ').replace(/[\\sA-Z]+/gi, ' ').trim().split(' ');\n    for (var i = 0; i < currentpath.length; i++) {\n        if (currentpath[parseInt(i.toString(), 10)].length > 1) {\n            currentValue = currentpath[parseInt(i.toString(), 10)].split(',');\n            xmin = xmax = currentValue[0];\n            ymin = ymax = currentValue[1];\n        }\n    }\n    for (var i = 0; i < currentpath.length; i++) {\n        currentValue = currentpath[parseInt(i.toString(), 10)].split(',');\n        if (!currentValue[1]) {\n            currentValue[0] = xmin;\n            currentValue[1] = ymin;\n        }\n        xmin = Math.min(xmin, currentValue[0]);\n        xmax = Math.max(xmax, currentValue[0]);\n        ymin = Math.min(ymin, currentValue[1]);\n        ymax = Math.max(ymax, currentValue[1]);\n    }\n    return { x: xmin, y: ymin, width: xmax - xmin, height: ymax - ymin };\n}\nfunction getTextOptions(element, maxWidth) {\n    var options = {\n        fill: element.style.fill, stroke: element.style.strokeColor, angle: element.rotateAngle + element.parentTransform,\n        pivotX: element.pivot.x, pivotY: element.pivot.y, strokeWidth: element.style.strokeWidth,\n        dashArray: element.style.strokeDashArray, opacity: element.style.opacity,\n        visible: element.visible, id: element.id,\n        width: maxWidth || element.actualSize.width, height: element.actualSize.height,\n        x: element.offsetX - element.actualSize.width * element.pivot.x + 0.5,\n        y: element.offsetY - element.actualSize.height * element.pivot.y + 0.5\n    };\n    options.fontSize = element.style.fontSize;\n    options.fontFamily = element.style.fontFamily;\n    options.textOverflow = element.style.textOverflow;\n    options.textDecoration = element.style.textDecoration;\n    options.doWrap = element.doWrap;\n    options.whiteSpace = whiteSpaceToString(element.style.whiteSpace, element.style.textWrapping);\n    options.content = element.content;\n    options.textWrapping = element.style.textWrapping;\n    options.breakWord = wordBreakToString(element.style.textWrapping);\n    options.textAlign = textAlignToString(element.style.textAlign);\n    options.color = element.style.color;\n    options.italic = element.style.italic;\n    options.bold = element.style.bold;\n    options.dashArray = '';\n    options.strokeWidth = 0;\n    options.fill = '';\n    return options;\n}\n/** @private */\nfunction wrapSvgText(text, textValue, maxHeight, pageHeight) {\n    var childNodes = [];\n    var k = 0;\n    var txtValue;\n    var bounds1;\n    var content = textValue || text.content;\n    if (text.whiteSpace !== 'nowrap' && text.whiteSpace !== 'pre') {\n        if (text.breakWord === 'breakall') {\n            txtValue = '';\n            txtValue += content[0];\n            for (k = 0; k < content.length; k++) {\n                bounds1 = bBoxText(txtValue, text);\n                if (bounds1 >= text.width && txtValue.length > 0) {\n                    childNodes[childNodes.length] = { text: txtValue, x: 0, dy: 0, width: bounds1 };\n                    txtValue = '';\n                }\n                else {\n                    txtValue = txtValue + (content[k + 1] || '');\n                    // if (txtValue.indexOf('\\n') > -1) {\n                    //     txtValue = txtValue.replace('\\n', '');\n                    // }\n                    var width = bBoxText(txtValue, text);\n                    if ((Math.ceil(width) + 2 >= text.width && txtValue.length > 0) || (txtValue.indexOf('\\n') > -1)) {\n                        childNodes[childNodes.length] = { text: txtValue, x: 0, dy: 0, width: width };\n                        txtValue = '';\n                    }\n                    if (k === content.length - 1 && txtValue.length > 0) {\n                        childNodes[childNodes.length] = { text: txtValue, x: 0, dy: 0, width: width };\n                        txtValue = '';\n                    }\n                }\n            }\n        }\n        else {\n            childNodes = wordWrapping(text, textValue, maxHeight, pageHeight);\n        }\n    }\n    else {\n        childNodes[childNodes.length] = { text: content, x: 0, dy: 0, width: bBoxText(content, text) };\n    }\n    return childNodes;\n}\n/** @private */\nfunction wordWrapping(text, textValue, maxHeight, pageHeight) {\n    var childNodes = [];\n    var txtValue = '';\n    var j = 0;\n    var i = 0;\n    var wrap = text.whiteSpace !== 'nowrap' ? true : false;\n    var content = textValue || text.content;\n    var bounds1;\n    var eachLine = content.split('\\n');\n    var txt;\n    var words;\n    var newText;\n    var existingWidth;\n    var existingText;\n    for (j = 0; j < eachLine.length; j++) {\n        txt = '';\n        words = text.textWrapping !== 'NoWrap' ? eachLine[parseInt(j.toString(), 10)].split(' ') : eachLine;\n        for (i = 0; i < words.length; i++) {\n            bounds1 = bBoxText(words[parseInt(i.toString(), 10)], text);\n            if (bounds1 > text.width && words[parseInt(i.toString(), 10)].length > 0 && text.textWrapping !== 'NoWrap') {\n                if (eachLine.length > 1) {\n                    words[parseInt(i.toString(), 10)] = words[parseInt(i.toString(), 10)] + '\\n';\n                }\n                text.content = words[parseInt(i.toString(), 10)];\n                childNodes = wrapText(text, txtValue, childNodes, maxHeight, pageHeight);\n            }\n            else {\n                txtValue += (((i !== 0 || words.length === 1) && wrap && txtValue.length > 0) ? ' ' : '') + words[parseInt(i.toString(), 10)];\n                newText = txtValue + (words[i + 1] || '');\n                var width = bBoxText(newText, text);\n                if (eachLine.length > 1 && i === words.length - 1) {\n                    txtValue = txtValue + '\\n';\n                }\n                if (Math.floor(width) > text.width - 2 && txtValue.length > 0) {\n                    textValue = txtValue;\n                    childNodes[childNodes.length] = {\n                        text: (txtValue.indexOf('\\n') === -1 && i !== words.length - 1) ? txtValue + ' ' : textValue, x: 0, dy: 0,\n                        width: newText === txtValue ? width : (txtValue === existingText) ? existingWidth : bBoxText(txtValue, text)\n                    };\n                    txtValue = '';\n                }\n                else {\n                    if (i === words.length - 1) {\n                        childNodes[childNodes.length] = { text: txtValue, x: 0, dy: 0, width: width };\n                        txtValue = '';\n                    }\n                }\n                existingText = newText;\n                existingWidth = width;\n            }\n        }\n    }\n    return childNodes;\n}\n/** @private */\nfunction wrapText(txt, textValue, childNode, maxHeight, pageHeight) {\n    var k = 0;\n    var txtValue;\n    var bounds1;\n    var content = textValue || txt.content;\n    txtValue = '';\n    var freeTextHeight = txt.y;\n    var height = 0;\n    txtValue += content[0];\n    var isFreeTextHeightAllowed;\n    for (k = 0; k < content.length; k++) {\n        bounds1 = bBoxText(txtValue, txt);\n        if (bounds1 >= txt.width && txtValue.length > 0) {\n            childNode[childNode.length] = { text: txtValue, x: 0, dy: 0, width: bounds1 };\n            txtValue = '';\n        }\n        else {\n            txtValue = txtValue + (content[k + 1] || '');\n            var width = bBoxText(txtValue, txt);\n            if ((Math.ceil(width) + 2 >= txt.width && txtValue.length > 0) || (txtValue.indexOf('\\n') > -1)) {\n                txtValue = txtValue.slice(0, -1);\n                height = height + bBoxTextHeight(txtValue, txt);\n                freeTextHeight += height;\n                width = bBoxText(txtValue, txt);\n                isFreeTextHeightAllowed = ((maxHeight === undefined || maxHeight === null || height <= maxHeight) &&\n                    (pageHeight === undefined || pageHeight === null || freeTextHeight <= pageHeight));\n                if (isFreeTextHeightAllowed) {\n                    childNode[childNode.length] = { text: txtValue, x: 0, dy: 0, width: width };\n                }\n                txtValue = content[k + 1] || '';\n                freeTextHeight += height;\n            }\n            isFreeTextHeightAllowed = ((maxHeight === undefined || maxHeight === null || height <= maxHeight) &&\n                (pageHeight === undefined || pageHeight === null || freeTextHeight <= pageHeight));\n            if (k === content.length - 1 && txtValue.length > 0 && isFreeTextHeightAllowed) {\n                childNode[childNode.length] = { text: txtValue, x: 0, dy: 0, width: width };\n                txtValue = '';\n            }\n        }\n    }\n    return childNode;\n}\nfunction wrapSvgTextAlign(text, childNodes) {\n    var wrapBounds = { x: 0, width: 0 };\n    var k = 0;\n    var txtWidth;\n    var width;\n    for (k = 0; k < childNodes.length; k++) {\n        txtWidth = childNodes[parseInt(k.toString(), 10)].width;\n        width = txtWidth;\n        if (text.textAlign === 'left') {\n            txtWidth = 0;\n        }\n        else if (text.textAlign === 'center') {\n            if (txtWidth > text.width && (text.textOverflow === 'Ellipsis' || text.textOverflow === 'Clip')) {\n                txtWidth = 0;\n            }\n            else {\n                txtWidth = -txtWidth / 2;\n            }\n        }\n        else if (text.textAlign === 'right') {\n            txtWidth = -txtWidth;\n        }\n        else {\n            txtWidth = childNodes.length > 1 ? 0 : -txtWidth / 2;\n        }\n        childNodes[parseInt(k.toString(), 10)].dy = text.fontSize * 1.2;\n        childNodes[parseInt(k.toString(), 10)].x = txtWidth;\n        if (!wrapBounds) {\n            wrapBounds = {\n                x: txtWidth,\n                width: width\n            };\n        }\n        else {\n            wrapBounds.x = Math.min(wrapBounds.x, txtWidth);\n            wrapBounds.width = Math.max(wrapBounds.width, width);\n        }\n    }\n    return wrapBounds;\n}\n/** @private */\nexport function measureText(text, style, content, maxWidth, maxHeight, pageHeight, textValue) {\n    var bounds = new Size(0, 0);\n    var childNodes;\n    var wrapBounds;\n    var options = getTextOptions(text, maxWidth);\n    text.childNodes = childNodes = wrapSvgText(options, textValue, maxHeight, pageHeight);\n    text.wrapBounds = wrapBounds = wrapSvgTextAlign(options, childNodes);\n    bounds.width = wrapBounds.width;\n    if (text.wrapBounds.width >= maxWidth && options.textOverflow !== 'Wrap') {\n        bounds.width = maxWidth;\n    }\n    bounds.height = childNodes.length * text.style.fontSize * 1.2;\n    return bounds;\n}\n/** @private */\nexport function getDiagramElement(elementId, contentId) {\n    var diagramElement;\n    var element;\n    if (contentId && (typeof document !== 'undefined')) {\n        element = document.getElementById(contentId);\n    }\n    diagramElement = (element) ? element.querySelector('#' + elementId) : (typeof document !== 'undefined') ? document.getElementById(elementId) : null;\n    return diagramElement;\n}\n/** @private */\nexport function createHtmlElement(elementType, attribute) {\n    var element = createElement(elementType);\n    setAttributeHtml(element, attribute);\n    return element;\n}\n/** @private */\nexport function setAttributeHtml(element, attributes) {\n    var keys = Object.keys(attributes);\n    for (var i = 0; i < keys.length; i++) {\n        if (keys[parseInt(i.toString(), 10)] === 'style') {\n            element.style.cssText = attributes[keys[parseInt(i.toString(), 10)]];\n        }\n        else {\n            element.setAttribute(keys[parseInt(i.toString(), 10)], attributes[keys[parseInt(i.toString(), 10)]]);\n        }\n    }\n}\n/**\n * @private\n */\nexport function getAdornerLayerSvg(diagramId, index) {\n    var adornerLayerSvg = null;\n    var diagramElement = getDiagramElement(diagramId + index + '_diagramAdornerLayer');\n    var elementcoll;\n    if (diagramElement) {\n        elementcoll = diagramElement.getElementsByClassName('e-adorner-layer' + index);\n        adornerLayerSvg = elementcoll[0];\n    }\n    return adornerLayerSvg;\n}\n/** @private */\nexport function getSelectorElement(diagramId, index) {\n    var adornerLayer = null;\n    var adornerSvg = getAdornerLayerSvg(diagramId, index);\n    if (adornerSvg) {\n        adornerLayer = adornerSvg.getElementById(diagramId + '_SelectorElement');\n    }\n    return adornerLayer;\n}\n/** @private */\nexport function createMeasureElements() {\n    var measureElement = 'measureElement';\n    // eslint-disable-next-line\n    if (!window[measureElement]) {\n        var divElement = createHtmlElement('div', {\n            id: 'measureElement',\n            style: 'visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;'\n        });\n        var text = createHtmlElement('span', { 'style': 'display:inline-block ; line-height: normal' });\n        divElement.appendChild(text);\n        var imageElement = void 0;\n        imageElement = createHtmlElement('img', {});\n        divElement.appendChild(imageElement);\n        if (typeof document !== 'undefined') {\n            var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n            svg.setAttribute('xlink', 'http://www.w3.org/1999/xlink');\n            divElement.appendChild(svg);\n            var element = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n            svg.appendChild(element);\n            var data = document.createTextNode('');\n            var tSpan = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n            tSpan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\n            svg.appendChild(tSpan);\n            // eslint-disable-next-line\n            window[measureElement] = divElement;\n            // eslint-disable-next-line\n            window[measureElement].usageCount = 1;\n            document.body.appendChild(divElement);\n        }\n    }\n    else {\n        // eslint-disable-next-line\n        window[measureElement].usageCount += 1;\n    }\n}\n/** @private */\nexport function measureImage(source, contentSize) {\n    var measureElement = 'measureElement';\n    // eslint-disable-next-line\n    window[measureElement].style.visibility = 'visible';\n    // eslint-disable-next-line\n    var imageElement = window[measureElement].children[1];\n    imageElement.setAttribute('src', source);\n    var bounds = imageElement.getBoundingClientRect();\n    var width = bounds.width;\n    var height = bounds.height;\n    contentSize = new Size(width, height);\n    // eslint-disable-next-line\n    window[measureElement].style.visibility = 'hidden';\n    return contentSize;\n}\n","import { Rect } from '../primitives/rect';\nimport { identityMatrix, transformPointByMatrix, rotateMatrix } from '../primitives/matrix';\nimport { getChildNode } from './dom-util';\nimport { Size } from '../primitives/size';\n/**\n * Implements the basic functionalities\n */\n/** @private */\nexport function randomId() {\n    var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz';\n    var id = '';\n    var num;\n    for (var i = 0; i < 5; i++) {\n        if ('crypto' in window && 'getRandomValues' in crypto) {\n            var count = new Uint16Array(1);\n            // tslint:disable-next-line:no-any\n            var intCrypto = window.msCrypto || window.crypto;\n            num = intCrypto.getRandomValues(count)[0] % (chars.length - 1);\n        }\n        else {\n            num = Math.floor(Math.random() * chars.length);\n        }\n        if (i === 0 && num < 10) {\n            i--;\n            continue;\n        }\n        id += chars.substring(num, num + 1);\n    }\n    return id;\n}\n/** @private */\nexport function cornersPointsBeforeRotation(ele) {\n    var bounds = new Rect();\n    var top = ele.offsetY - ele.actualSize.height * ele.pivot.y;\n    var bottom = ele.offsetY + ele.actualSize.height * (1 - ele.pivot.y);\n    var left = ele.offsetX - ele.actualSize.width * ele.pivot.x;\n    var right = ele.offsetX + ele.actualSize.width * (1 - ele.pivot.x);\n    var topLeft = { x: left, y: top };\n    var topCenter = { x: (left + right) / 2, y: top };\n    var topRight = { x: right, y: top };\n    var middleLeft = { x: left, y: (top + bottom) / 2 };\n    var middleRight = { x: right, y: (top + bottom) / 2 };\n    var bottomLeft = { x: left, y: bottom };\n    var bottomCenter = { x: (left + right) / 2, y: bottom };\n    var bottomRight = { x: right, y: bottom };\n    bounds = Rect.toBounds([topLeft, topRight, bottomLeft, bottomRight]);\n    return bounds;\n}\n/** @private */\nexport function rotateSize(size, angle) {\n    var matrix = identityMatrix();\n    rotateMatrix(matrix, angle, 0, 0);\n    var topLeft = transformPointByMatrix(matrix, { x: 0, y: 0 });\n    var topRight = transformPointByMatrix(matrix, { x: size.width, y: 0 });\n    var bottomLeft = transformPointByMatrix(matrix, { x: 0, y: size.height });\n    var bottomRight = transformPointByMatrix(matrix, { x: size.width, y: size.height });\n    var minX = Math.min(topLeft.x, topRight.x, bottomLeft.x, bottomRight.x);\n    var minY = Math.min(topLeft.y, topRight.y, bottomLeft.y, bottomRight.y);\n    var maxX = Math.max(topLeft.x, topRight.x, bottomLeft.x, bottomRight.x);\n    var maxY = Math.max(topLeft.y, topRight.y, bottomLeft.y, bottomRight.y);\n    return new Size(maxX - minX, maxY - minY);\n}\n/** @private */\nexport function getBounds(element) {\n    var bounds = new Rect();\n    var corners;\n    corners = cornersPointsBeforeRotation(element);\n    var middleLeft = corners.middleLeft;\n    var topCenter = corners.topCenter;\n    var bottomCenter = corners.bottomCenter;\n    var middleRight = corners.middleRight;\n    var topLeft = corners.topLeft;\n    var topRight = corners.topRight;\n    var bottomLeft = corners.bottomLeft;\n    var bottomRight = corners.bottomRight;\n    element.corners = {\n        topLeft: topLeft, topCenter: topCenter, topRight: topRight, middleLeft: middleLeft,\n        middleRight: middleRight, bottomLeft: bottomLeft, bottomCenter: bottomCenter, bottomRight: bottomRight\n    };\n    if (element.rotateAngle !== 0 || element.parentTransform !== 0) {\n        var matrix = identityMatrix();\n        rotateMatrix(matrix, element.rotateAngle + element.parentTransform, element.offsetX, element.offsetY);\n        element.corners.topLeft = topLeft = transformPointByMatrix(matrix, topLeft);\n        element.corners.topCenter = topCenter = transformPointByMatrix(matrix, topCenter);\n        element.corners.topRight = topRight = transformPointByMatrix(matrix, topRight);\n        element.corners.middleLeft = middleLeft = transformPointByMatrix(matrix, middleLeft);\n        element.corners.middleRight = middleRight = transformPointByMatrix(matrix, middleRight);\n        element.corners.bottomLeft = bottomLeft = transformPointByMatrix(matrix, bottomLeft);\n        element.corners.bottomCenter = bottomCenter = transformPointByMatrix(matrix, bottomCenter);\n        element.corners.bottomRight = bottomRight = transformPointByMatrix(matrix, bottomRight);\n        //Set corners based on rotate angle\n    }\n    bounds = Rect.toBounds([topLeft, topRight, bottomLeft, bottomRight]);\n    element.corners.left = bounds.left;\n    element.corners.right = bounds.right;\n    element.corners.top = bounds.top;\n    element.corners.bottom = bounds.bottom;\n    element.corners.center = bounds.center;\n    element.corners.width = bounds.width;\n    element.corners.height = bounds.height;\n    return bounds;\n}\n/** @private */\nexport function textAlignToString(value) {\n    var state = '';\n    switch (value) {\n        case 'Center':\n            state = 'center';\n            break;\n        case 'Left':\n            state = 'left';\n            break;\n        case 'Right':\n            state = 'right';\n            break;\n    }\n    return state;\n}\n/** @private */\nexport function wordBreakToString(value) {\n    var state = '';\n    switch (value) {\n        case 'Wrap':\n            state = 'breakall';\n            break;\n        case 'NoWrap':\n            state = 'keepall';\n            break;\n        case 'WrapWithOverflow':\n            state = 'normal';\n            break;\n        case 'LineThrough':\n            state = 'line-through';\n            break;\n    }\n    return state;\n}\nexport function bBoxText(textContent, options) {\n    var measureElement = 'measureElement';\n    // eslint-disable-next-line\n    window[measureElement].style.visibility = 'visible';\n    // eslint-disable-next-line\n    var svg = window[measureElement].children[2];\n    var text = getChildNode(svg)[1];\n    text.textContent = textContent;\n    text.setAttribute('style', 'font-size:' + options.fontSize + 'px; font-family:'\n        + options.fontFamily + ';font-weight:' + (options.bold ? 'bold' : 'normal'));\n    var bBox = text.getBBox().width;\n    // eslint-disable-next-line\n    window[measureElement].style.visibility = 'hidden';\n    return bBox;\n}\n/** @private */\nexport function bBoxTextHeight(textContent, options) {\n    var measureElement = 'measureElement';\n    // eslint-disable-next-line\n    window[measureElement].style.visibility = 'visible';\n    // eslint-disable-next-line\n    var svg = window[measureElement].children[2];\n    var text = getChildNode(svg)[1];\n    text.textContent = textContent;\n    text.setAttribute('style', 'font-size:' + options.fontSize + 'px; font-family:'\n        + options.fontFamily + ';font-weight:' + (options.bold ? 'bold' : 'normal'));\n    var bBox = text.getBBox().height;\n    // eslint-disable-next-line\n    window[measureElement].style.visibility = 'hidden';\n    return bBox;\n}\n/** @private */\nexport function middleElement(i, j) {\n    var m = 0;\n    m = (i + j) / 2;\n    return m;\n}\n/** @private */\nexport function whiteSpaceToString(value, wrap) {\n    if (wrap === 'NoWrap' && value === 'PreserveAll') {\n        return 'pre';\n    }\n    var state = '';\n    switch (value) {\n        case 'CollapseAll':\n            state = 'nowrap';\n            break;\n        case 'CollapseSpace':\n            state = 'pre-line';\n            break;\n        case 'PreserveAll':\n            state = 'pre-wrap';\n            break;\n    }\n    return state;\n}\n/** @private */\nexport function rotatePoint(angle, pivotX, pivotY, point) {\n    if (angle !== 0) {\n        var matrix = identityMatrix();\n        rotateMatrix(matrix, angle, pivotX, pivotY);\n        return transformPointByMatrix(matrix, point);\n    }\n    return point;\n}\n/** @private */\nexport function getOffset(topLeft, obj) {\n    var offX = topLeft.x + obj.desiredSize.width * obj.pivot.x;\n    var offY = topLeft.y + obj.desiredSize.height * obj.pivot.y;\n    return {\n        x: offX, y: offY\n    };\n}\n","/**\n * These utility methods help to process the data and to convert it to desired dimensions\n */\n/** @private */\nexport function processPathData(data) {\n    var collection = [];\n    var j;\n    var arrayCollection = parsePathData(data);\n    if (arrayCollection.length > 0) {\n        for (var i = 0; i < arrayCollection.length; i++) {\n            var ob = arrayCollection[parseInt(i.toString(), 10)];\n            var char = '';\n            char = ob[0];\n            switch (char.toLowerCase()) {\n                case 'm':\n                    for (j = 1; j < ob.length; j++) {\n                        collection.push({ command: char, x: ob[parseInt(j.toString(), 10)], y: ob[j + 1] });\n                        j = j + 1;\n                        if (char === 'm') {\n                            char = 'l';\n                        }\n                        else if (char === 'M') {\n                            char = 'L';\n                        }\n                    }\n                    break;\n                case 'l':\n                case 't':\n                    for (j = 1; j < ob.length; j++) {\n                        collection.push({ command: char, x: ob[parseInt(j.toString(), 10)], y: ob[j + 1] });\n                        j = j + 1;\n                    }\n                    break;\n                case 'h':\n                    for (j = 1; j < ob.length; j++) {\n                        collection.push({ command: char, x: ob[parseInt(j.toString(), 10)] });\n                    }\n                    break;\n                case 'v':\n                    for (j = 1; j < ob.length; j++) {\n                        collection.push({ command: char, y: ob[parseInt(j.toString(), 10)] });\n                    }\n                    break;\n                case 'z':\n                    collection.push({ command: char });\n                    break;\n                case 'c':\n                    for (j = 1; j < ob.length; j++) {\n                        collection.push({\n                            command: char, x1: ob[parseInt(j.toString(), 10)], y1: ob[j + 1], x2: ob[j + 2], y2: ob[j + 3], x: ob[j + 4], y: ob[j + 5]\n                        });\n                        j = j + 5;\n                    }\n                    break;\n                case 's':\n                    for (j = 1; j < ob.length; j++) {\n                        collection.push({ command: char, x2: ob[parseInt(j.toString(), 10)], y2: ob[j + 1], x: ob[j + 2], y: ob[j + 3] });\n                        j = j + 3;\n                    }\n                    break;\n                case 'q':\n                    for (j = 1; j < ob.length; j++) {\n                        collection.push({ command: char, x1: ob[parseInt(j.toString(), 10)], y1: ob[j + 1], x: ob[j + 2], y: ob[j + 3] });\n                        j = j + 3;\n                    }\n                    break;\n                case 'a':\n                    for (j = 1; j < ob.length; j++) {\n                        collection.push({\n                            command: char, r1: ob[parseInt(j.toString(), 10)], r2: ob[j + 1], angle: ob[j + 2], largeArc: ob[j + 3],\n                            sweep: ob[j + 4], x: ob[j + 5], y: ob[j + 6]\n                        });\n                        j = j + 6;\n                    }\n                    break;\n            }\n        }\n    }\n    return collection;\n}\n/** @private */\nexport function parsePathData(data) {\n    var tokenizer = /([a-z]+)|([+-]?(?:\\d+\\.?\\d*|\\.\\d+))/gi;\n    var current = [];\n    var commands = [];\n    var match = {};\n    tokenizer.lastIndex = 0;\n    var isExponential = false;\n    match = tokenizer.exec(data);\n    while (match) {\n        if (match[1] === 'e') {\n            var s1 = '';\n            isExponential = true;\n        }\n        else if (match[1]) {\n            if (match[1].toLowerCase() === 'zm') {\n                if (current.length) {\n                    commands.push(current);\n                }\n                commands.push(['Z']);\n                current = [match[1].substring(1, 2)];\n            }\n            else {\n                if (current.length) {\n                    commands.push(current);\n                }\n                current = [match[1]];\n            }\n            isExponential = false;\n        }\n        else {\n            if (!current.length) {\n                current = [];\n            }\n            if (!isExponential) {\n                current.push(Number(match[2]));\n            }\n            isExponential = false;\n        }\n        match = tokenizer.exec(data);\n    }\n    if (current.length) {\n        commands.push(current);\n    }\n    return commands;\n}\n/**\n * Used to find the path for rounded rect\n */\nexport function getRectanglePath(cornerRadius, height, width) {\n    if (cornerRadius > height / 2) {\n        cornerRadius = height / 2;\n    }\n    if (cornerRadius > width / 2) {\n        cornerRadius = width / 2;\n    }\n    var x = 0;\n    var y = 0;\n    var path = '';\n    var points = [{ x: x + cornerRadius, y: y }, { x: x + width - cornerRadius, y: y },\n        { x: x + width, y: y + cornerRadius }, { x: x + width, y: y + height - cornerRadius },\n        { x: x + width - cornerRadius, y: y + height }, { x: x + cornerRadius, y: y + height },\n        { x: x, y: y + height - cornerRadius }, { x: x, y: y + cornerRadius }\n    ];\n    var corners = [{ x: x + width, y: y }, { x: x + width, y: y + height }, { x: x, y: y + height }, { x: x, y: y }];\n    var corner = 0;\n    var point2;\n    var next;\n    path = 'M' + points[0].x + ' ' + points[0].y;\n    var i;\n    for (i = 0; i < points.length; i = i + 2) {\n        point2 = points[i + 1];\n        path += 'L' + point2.x + ' ' + point2.y;\n        next = points[i + 2] || points[0];\n        // eslint-disable-next-line\n        path += 'Q' + corners[corner].x + ' ' + corners[corner].y + ' ' + next.x + ' ' + next.y;\n        corner++;\n    }\n    return path;\n}\n/** @private */\nexport function pathSegmentCollection(collection) {\n    var x0;\n    var y0;\n    var x1;\n    var y1;\n    var x2;\n    var y2;\n    var x;\n    var y;\n    var length;\n    var i;\n    var initx;\n    var inity;\n    var segments = [];\n    for (x = 0, y = 0, i = 0, length = collection.length; i < length; ++i) {\n        var obj = collection[parseInt(i.toString(), 10)];\n        var seg = obj;\n        var char = '';\n        char = seg.command;\n        if ('y1' in seg) {\n            y1 = seg.y1;\n        }\n        if ('y2' in seg) {\n            y2 = seg.y2;\n        }\n        if ('x1' in seg) {\n            x1 = seg.x1;\n        }\n        if ('x2' in seg) {\n            x2 = seg.x2;\n        }\n        if ('x' in seg) {\n            x = seg.x;\n        }\n        if ('y' in seg) {\n            y = seg.y;\n        }\n        var prev = segments[segments.length - 1];\n        switch (char) {\n            case 'M':\n                segments.push({ command: 'M', x: x, y: y });\n                break;\n            case 'L':\n                segments.push({ command: 'L', x0: x0, y0: y0, x: x, y: y });\n                break;\n            case 'H':\n                segments.push({ command: 'L', x0: x0, y0: y0, x: x, y: y0 });\n                break;\n            case 'V':\n                segments.push({ command: 'L', x0: x0, y0: y0, x: x0, y: y });\n                break;\n            case 'C':\n                segments.push({ command: 'C', x0: x0, y0: y0, x1: x1, y1: y1, x2: x2, y2: y2, x: x, y: y });\n                break;\n            case 'S':\n                if (prev) {\n                    var ctrl = void 0;\n                    if (prev.command === 'C' || prev.command === 'S') {\n                        ctrl = { x: prev.x2, y: prev.y2 };\n                    }\n                    else {\n                        ctrl = { x: x0, y: y0 };\n                    }\n                    var cpt2 = { x: 2 * x0 - ctrl.x, y: 2 * y0 - ctrl.y };\n                    segments.push({ command: 'C', x0: x0, y0: y0, x1: cpt2.x, y1: cpt2.y, x2: x2, y2: y2, x: x, y: y });\n                }\n                break;\n            case 'Q':\n                //ctx.quadraticCurveTo(x1, y1, x, y);\n                segments.push({ command: 'Q', x0: x0, y0: y0, x1: x1, y1: y1, x: x, y: y });\n                break;\n            case 'T':\n                if (prev) {\n                    var ctrl = void 0;\n                    if (prev.command === 'Q') {\n                        ctrl = { x: prev.x1, y: prev.y1 };\n                    }\n                    else {\n                        ctrl = { x: x0, y: y0 };\n                    }\n                    var cpt2 = { x: 2 * x0 - ctrl.x, y: 2 * y0 - ctrl.y };\n                    segments.push({ command: 'Q', x0: x0, y0: y0, x1: cpt2.x, y1: cpt2.y, x: x, y: y });\n                }\n                break;\n            case 'A':\n                var newSeg = seg;\n                newSeg.command = 'A';\n                segments.push(newSeg);\n                break;\n            case 'Z':\n            case 'z':\n                segments.push({ command: 'Z' });\n                x = x0;\n                y = y0;\n                break;\n        }\n        if (char === 'M' || char === 'm') {\n            initx = x;\n            inity = y;\n        }\n        x0 = x;\n        y0 = y;\n    }\n    return segments;\n}\n/** @private */\nexport function transformPath(arr, sX, sY, s, bX, bY, iX, iY) {\n    var x0;\n    var y0;\n    var x1;\n    var y1;\n    var x2;\n    var y2;\n    var x;\n    var y;\n    var length;\n    var i;\n    var newSeg;\n    for (x = 0, y = 0, i = 0, length = arr.length; i < length; ++i) {\n        var obj = arr[parseInt(i.toString(), 10)];\n        var seg = obj;\n        var char = seg.command;\n        if ('x' in seg) {\n            x = seg.x;\n        }\n        if ('y' in seg) {\n            y = seg.y;\n        }\n        if ('y1' in seg) {\n            y1 = seg.y1;\n        }\n        if ('y2' in seg) {\n            y2 = seg.y2;\n        }\n        if ('x1' in seg) {\n            x1 = seg.x1;\n        }\n        if ('x2' in seg) {\n            x2 = seg.x2;\n        }\n        if (s) {\n            if (x !== undefined) {\n                x = scalePathData(x, sX, bX, iX);\n            }\n            if (y !== undefined) {\n                y = scalePathData(y, sY, bY, iY);\n            }\n            if (x1 !== undefined) {\n                x1 = scalePathData(x1, sX, bX, iX);\n            }\n            if (y1 !== undefined) {\n                y1 = scalePathData(y1, sY, bY, iY);\n            }\n            if (x2 !== undefined) {\n                x2 = scalePathData(x2, sX, bX, iX);\n            }\n            if (y2 !== undefined) {\n                y2 = scalePathData(y2, sY, bY, iY);\n            }\n        }\n        else {\n            if (x !== undefined) {\n                x = Number((x + sX).toFixed(2));\n            }\n            if (y !== undefined) {\n                y = Number((y + sY).toFixed(2));\n            }\n            if (x1 !== undefined) {\n                x1 = Number((x1 + sX).toFixed(2));\n            }\n            if (y1 !== undefined) {\n                y1 = Number((y1 + sY).toFixed(2));\n            }\n            if (x2 !== undefined) {\n                x2 = Number((x2 + sX).toFixed(2));\n            }\n            if (y2 !== undefined) {\n                y2 = Number((y2 + sY).toFixed(2));\n            }\n        }\n        var scaledPath = { x: x, y: y, x1: x1, y1: y1, x2: x2, y2: y2, r1: seg.r1, r2: seg.r2 };\n        newSeg = updatedSegment(seg, char, scaledPath, s, sX, sY);\n        if (newSeg) {\n            arr[parseInt(i.toString(), 10)] = newSeg;\n        }\n        // Record the start of a subpath\n        if (char === 'M' || char === 'm') {\n            x0 = x;\n            y0 = y;\n        }\n    }\n    var pathData = getPathString(arr);\n    return pathData;\n}\n/** @private */\nexport function updatedSegment(segment, char, obj, isScale, sX, sY) {\n    switch (char) {\n        case 'M':\n            segment.x = obj.x;\n            segment.y = obj.y;\n            break;\n        case 'L':\n            segment.x = obj.x;\n            segment.y = obj.y;\n            break;\n        case 'H':\n            segment.x = obj.x;\n            break;\n        case 'V':\n            segment.y = obj.y;\n            break;\n        case 'C':\n            segment.x = obj.x;\n            segment.y = obj.y;\n            segment.x1 = obj.x1;\n            segment.y1 = obj.y1;\n            segment.x2 = obj.x2;\n            segment.y2 = obj.y2;\n            break;\n        case 'S':\n            segment.x = obj.x;\n            segment.y = obj.y;\n            segment.x2 = obj.x2;\n            segment.y2 = obj.y2;\n            break;\n        case 'Q':\n            segment.x = obj.x;\n            segment.y = obj.y;\n            segment.x1 = obj.x1;\n            segment.y1 = obj.y1;\n            break;\n        case 'T':\n            segment.x = obj.x;\n            segment.y = obj.y;\n            break;\n        case 'A':\n            var r1 = obj.r1;\n            var r2 = obj.r2;\n            if (isScale) {\n                obj.r1 = r1 = (r1 * sX);\n                obj.r2 = r2 = (r2 * sY);\n            }\n            segment.x = obj.x;\n            segment.y = obj.y;\n            segment.r1 = obj.r1;\n            segment.r2 = obj.r2;\n            break;\n        case 'z':\n        case 'Z':\n            segment = { command: 'Z' };\n            break;\n    }\n    return segment;\n}\n/** @private */\nexport function scalePathData(val, scaleFactor, oldOffset, newOffset) {\n    if (val !== oldOffset) {\n        if (newOffset !== oldOffset) {\n            val = (((val * scaleFactor) - (Number(oldOffset) * scaleFactor - Number(oldOffset)))\n                + (newOffset - Number(oldOffset)));\n        }\n        else {\n            val = ((Number(val) * scaleFactor) - (Number(oldOffset) * scaleFactor - Number(oldOffset)));\n        }\n    }\n    else {\n        if (newOffset !== oldOffset) {\n            val = newOffset;\n        }\n    }\n    return Number(val.toFixed(2));\n}\n/** @private */\nexport function splitArrayCollection(arrayCollection) {\n    var x0;\n    var y0;\n    var x1;\n    var y1;\n    var x2;\n    var y2;\n    var x;\n    var y;\n    var length;\n    var i;\n    for (x = 0, y = 0, i = 0, length = arrayCollection.length; i < length; ++i) {\n        var path = arrayCollection[parseInt(i.toString(), 10)];\n        var seg = path;\n        var char = seg.command;\n        if (/[MLHVCSQTA]/.test(char)) {\n            if ('x' in seg) {\n                seg.x = x = seg.x;\n            }\n            if ('y' in seg) {\n                seg.y = y = seg.y;\n            }\n        }\n        else {\n            if ('x1' in seg) {\n                seg.x1 = x1 = x + seg.x1;\n            }\n            if ('x2' in seg) {\n                seg.x2 = x2 = x + seg.x2;\n            }\n            if ('y1' in seg) {\n                seg.y1 = y1 = y + seg.y1;\n            }\n            if ('y2' in seg) {\n                seg.y2 = y2 = y + seg.y2;\n            }\n            if ('x' in seg) {\n                seg.x = x += seg.x;\n            }\n            if ('y' in seg) {\n                seg.y = y += seg.y;\n            }\n            var newSeg = void 0;\n            switch (char) {\n                case 'm':\n                case 'M':\n                    newSeg = { command: 'M', x: x, y: y };\n                    break;\n                case 'l':\n                case 'L':\n                    newSeg = { command: 'L', x: x, y: y };\n                    break;\n                case 'h':\n                case 'H':\n                    newSeg = { command: 'H', x: x };\n                    break;\n                case 'v':\n                case 'V':\n                    newSeg = { command: 'V', y: y };\n                    break;\n                case 'c':\n                case 'C':\n                    newSeg = { command: 'C', x: x, y: y, x1: x1, y1: y1, x2: x2, y2: y2 };\n                    break;\n                case 's':\n                case 'S':\n                    newSeg = { command: 'S', x: x, y: y, x2: x2, y2: y2 };\n                    break;\n                case 'q':\n                case 'Q':\n                    newSeg = { command: 'Q', x: x, y: y, x1: x1, y1: y1 };\n                    break;\n                case 't':\n                case 'T':\n                    newSeg = { command: 'T', x: x, y: y };\n                    break;\n                case 'a':\n                case 'A':\n                    newSeg = { command: 'A', x: x, y: y };\n                    newSeg.r1 = seg.r1;\n                    newSeg.r2 = seg.r2;\n                    newSeg.angle = seg.angle;\n                    newSeg.largeArc = seg.largeArc;\n                    newSeg.sweep = seg.sweep;\n                    break;\n                case 'z':\n                case 'Z':\n                    newSeg = { command: 'Z' };\n                    x = x0;\n                    y = y0;\n                    newSeg = arrayCollection[parseInt(i.toString(), 10)];\n                    break;\n            }\n            if (newSeg) {\n                arrayCollection[parseInt(i.toString(), 10)] = newSeg;\n            }\n        }\n        if (char === 'M' || char === 'm') {\n            x0 = x;\n            y0 = y;\n        }\n    }\n    return arrayCollection;\n}\n/** @private */\nexport function getPathString(arrayCollection) {\n    var getNewString = '';\n    var i;\n    for (i = 0; i < arrayCollection.length; i++) {\n        if (i === 0) {\n            getNewString += getString(arrayCollection[parseInt(i.toString(), 10)]);\n        }\n        else {\n            getNewString += ' ' + getString(arrayCollection[parseInt(i.toString(), 10)]);\n        }\n    }\n    return getNewString;\n}\n/** @private */\nexport function getString(obj) {\n    var string = '';\n    switch (obj.command) {\n        case 'Z':\n        case 'z':\n            string = obj.command;\n            break;\n        case 'M':\n        case 'm':\n        case 'L':\n        case 'l':\n            string = obj.command + ' ' + obj.x + ' ' + obj.y;\n            break;\n        case 'C':\n        case 'c':\n            string = obj.command + ' ' + obj.x1 + ' ' + obj.y1 + ' ' + obj.x2 + ' ' + obj.y2 + ' ' + obj.x + ' ' + obj.y;\n            break;\n        case 'Q':\n        case 'q':\n            string = obj.command + ' ' + obj.x1 + ' ' + obj.y1 + ' ' + obj.x + ' ' + obj.y;\n            break;\n        case 'A':\n        case 'a':\n            var cmd = obj.command;\n            var ang = obj.angle;\n            var l = (obj.largeArc ? '1' : '0');\n            var s = (obj.sweep ? '1' : '0');\n            string = cmd + ' ' + obj.r1 + ' ' + obj.r2 + ' ' + ang + ' ' + l + ' ' + s + ' ' + obj.x + ' ' + obj.y;\n            break;\n        case 'H':\n        case 'h':\n            string = obj.command + ' ' + obj.x;\n            break;\n        case 'V':\n        case 'v':\n            string = obj.command + ' ' + obj.y;\n            break;\n        case 'S':\n        case 's':\n            string = obj.command + ' ' + obj.x2 + ' ' + obj.y2 + ' ' + obj.x + ' ' + obj.y;\n            break;\n        case 'T':\n        case 't':\n            string = obj.command + ' ' + obj.x + ' ' + obj.y;\n    }\n    return string;\n}\n","import { Size } from './../primitives/size';\nimport { pathSegmentCollection, getRectanglePath, processPathData } from './../utility/path-util';\n// import { overFlow } from './../utility/base-util';\nimport { createHtmlElement } from './../utility/dom-util';\n/**\n * Canvas Renderer\n */\n/** @private */\nvar CanvasRenderer = /** @class */ (function () {\n    function CanvasRenderer() {\n        /** @private */\n        this.imageList = {};\n    }\n    /**   @private  */\n    CanvasRenderer.getContext = function (canvas) {\n        return canvas.getContext('2d');\n    };\n    CanvasRenderer.prototype.setStyle = function (canvas, style) {\n        var ctx = CanvasRenderer.getContext(canvas);\n        if (style.fill === 'none') {\n            style.fill = 'transparent';\n        }\n        if (style.stroke === 'none') {\n            style.stroke = 'transparent';\n        }\n        ctx.strokeStyle = style.stroke;\n        ctx.lineWidth = style.strokeWidth;\n        if (style.strokeWidth === 0) {\n            ctx.strokeStyle = 'transparent';\n        }\n        ctx.globalAlpha = style.opacity;\n        var dashArray = [];\n        if (style.dashArray) {\n            dashArray = this.parseDashArray(style.dashArray);\n        }\n        ctx.setLineDash(dashArray);\n        ctx.fillStyle = style.fill;\n    };\n    CanvasRenderer.prototype.rotateContext = function (canvas, angle, x, y) {\n        var ctx = CanvasRenderer.getContext(canvas);\n        ctx.translate(x, y);\n        ctx.rotate(angle * Math.PI / 180);\n        ctx.translate(-x, -y);\n    };\n    CanvasRenderer.prototype.setFontStyle = function (canvas, text) {\n        var ctx = CanvasRenderer.getContext(canvas);\n        var font = '';\n        if (text.italic) {\n            font += 'italic ';\n        }\n        if (text.bold) {\n            font += 'bold ';\n        }\n        font += (text.fontSize) + 'px ';\n        font += text.fontFamily;\n        ctx.font = font;\n    };\n    /**   @private  */\n    CanvasRenderer.prototype.parseDashArray = function (dashArray) {\n        var dashes = [];\n        var separator = dashArray.indexOf(' ') !== -1 ? ' ' : ',';\n        var splittedDashes = dashArray.split(separator);\n        for (var _i = 0, splittedDashes_1 = splittedDashes; _i < splittedDashes_1.length; _i++) {\n            var i = splittedDashes_1[_i];\n            dashes.push(Number(i));\n        }\n        return dashes;\n    };\n    //Rendering Part\n    /**   @private  */\n    CanvasRenderer.prototype.drawRectangle = function (canvas, options) {\n        if (options.visible === true) {\n            if (options.cornerRadius) {\n                options.data = getRectanglePath(options.cornerRadius, options.height, options.width);\n                this.drawPath(canvas, options);\n            }\n            else {\n                var ctx = CanvasRenderer.getContext(canvas);\n                ctx.save();\n                ctx.beginPath();\n                var cornerRadius = options.cornerRadius;\n                var pivotX = options.x + options.width * options.pivotX;\n                var pivotY = options.y + options.height * options.pivotY;\n                this.rotateContext(canvas, options.angle, pivotX, pivotY);\n                this.setStyle(canvas, options);\n                ctx.rect(options.x, options.y, options.width, options.height);\n                ctx.fillRect(options.x, options.y, options.width, options.height);\n                ctx.fill();\n                ctx.stroke();\n                ctx.closePath();\n                ctx.restore();\n            }\n        }\n    };\n    /**   @private  */\n    CanvasRenderer.prototype.drawPath = function (canvas, options) {\n        var collection = [];\n        collection = processPathData(options.data);\n        collection = pathSegmentCollection(collection);\n        var ctx = CanvasRenderer.getContext(canvas);\n        ctx.save();\n        ctx.beginPath();\n        var pivotY = options.y + options.height * options.pivotY;\n        var pivotX = options.x + options.width * options.pivotX;\n        this.rotateContext(canvas, options.angle, pivotX, pivotY);\n        this.setStyle(canvas, options);\n        ctx.translate(options.x, options.y);\n        this.renderPath(canvas, options, collection);\n        ctx.fill();\n        ctx.translate(-options.x, -options.y);\n        ctx.stroke();\n        ctx.restore();\n    };\n    /**   @private  */\n    CanvasRenderer.prototype.renderPath = function (canvas, options, collection) {\n        if (options.visible === true) {\n            var ctx = CanvasRenderer.getContext(canvas);\n            var x0 = void 0;\n            var y0 = void 0;\n            var x1 = void 0;\n            var y1 = void 0;\n            var x2 = void 0;\n            var y2 = void 0;\n            var x = void 0;\n            var y = void 0;\n            var length_1;\n            var i = void 0;\n            var newSeg = void 0;\n            var segs = collection;\n            for (x = 0, y = 0, i = 0, length_1 = segs.length; i < length_1; ++i) {\n                var obj = segs[parseInt(i.toString(), 10)];\n                var seg = obj;\n                var char = seg.command;\n                if ('x1' in seg) {\n                    x1 = seg.x1;\n                }\n                if ('x2' in seg) {\n                    x2 = seg.x2;\n                }\n                if ('y1' in seg) {\n                    y1 = seg.y1;\n                }\n                if ('y2' in seg) {\n                    y2 = seg.y2;\n                }\n                if ('x' in seg) {\n                    x = seg.x;\n                }\n                if ('y' in seg) {\n                    y = seg.y;\n                }\n                switch (char) {\n                    case 'M':\n                        ctx.moveTo(x, y);\n                        seg.x = x;\n                        seg.y = y;\n                        break;\n                    case 'L':\n                        ctx.lineTo(x, y);\n                        seg.x = x;\n                        seg.y = y;\n                        break;\n                    case 'C':\n                        ctx.bezierCurveTo(x1, y1, x2, y2, x, y);\n                        seg.x = x;\n                        seg.y = y;\n                        seg.x1 = x1;\n                        seg.y1 = y1;\n                        seg.x2 = x2;\n                        seg.y2 = y2;\n                        break;\n                    case 'Q':\n                        ctx.quadraticCurveTo(x1, y1, x, y);\n                        seg.x = x;\n                        seg.y = y;\n                        seg.x1 = x1;\n                        seg.y1 = y1;\n                        break;\n                    case 'A':\n                        var curr = { x: x0, y: y0 };\n                        var rx = seg.r1;\n                        var ry = seg.r2;\n                        var xAxisRotation = seg.angle * (Math.PI / 180.0);\n                        var largeArc = seg.largeArc;\n                        var sweep = seg.sweep;\n                        var cp = { x: x, y: y };\n                        var currp = {\n                            x: Math.cos(xAxisRotation) * (curr.x - cp.x) / 2.0 + Math.sin(xAxisRotation) * (curr.y - cp.y) / 2.0,\n                            y: -Math.sin(xAxisRotation) * (curr.x - cp.x) / 2.0 + Math.cos(xAxisRotation) * (curr.y - cp.y) / 2.0\n                        };\n                        var l = Math.pow(currp.x, 2) / Math.pow(rx, 2) + Math.pow(currp.y, 2) / Math.pow(ry, 2);\n                        if (l > 1) {\n                            rx *= Math.sqrt(l);\n                            ry *= Math.sqrt(l);\n                        }\n                        var k = (Math.pow(ry, 2) * Math.pow(currp.x, 2));\n                        var s = (largeArc === sweep ? -1 : 1) * Math.sqrt(((Math.pow(rx, 2) * Math.pow(ry, 2)) - (Math.pow(rx, 2) * Math.pow(currp.y, 2)) - k) /\n                            (Math.pow(rx, 2) * Math.pow(currp.y, 2) + Math.pow(ry, 2) * Math.pow(currp.x, 2)));\n                        if (isNaN(s)) {\n                            s = 0;\n                        }\n                        var cpp = { x: s * rx * currp.y / ry, y: s * -ry * currp.x / rx };\n                        var centp = {\n                            x: (curr.x + cp.x) / 2.0 + Math.cos(xAxisRotation) * cpp.x - Math.sin(xAxisRotation) * cpp.y,\n                            y: (curr.y + cp.y) / 2.0 + Math.sin(xAxisRotation) * cpp.x + Math.cos(xAxisRotation) * cpp.y\n                        };\n                        var a1 = this.a([1, 0], [(currp.x - cpp.x) / rx, (currp.y - cpp.y) / ry]);\n                        var u = [(currp.x - cpp.x) / rx, (currp.y - cpp.y) / ry];\n                        var v = [(-currp.x - cpp.x) / rx, (-currp.y - cpp.y) / ry];\n                        var ad = this.a(u, v);\n                        if (this.r(u, v) <= -1) {\n                            ad = Math.PI;\n                        }\n                        if (this.r(u, v) >= 1) {\n                            ad = 0;\n                        }\n                        var dir = !sweep ? -1.0 : 1.0;\n                        var ah = a1 + dir * (ad / 2.0);\n                        var halfWay = {\n                            x: centp.x + rx * Math.cos(ah),\n                            y: centp.y + ry * Math.sin(ah)\n                        };\n                        seg.centp = centp;\n                        seg.xAxisRotation = xAxisRotation;\n                        seg.rx = rx;\n                        seg.ry = ry;\n                        seg.a1 = a1;\n                        seg.ad = ad;\n                        seg.sweep = sweep;\n                        if (ctx != null) {\n                            var ra = rx > ry ? rx : ry;\n                            var sx = rx > ry ? 1 : rx / ry;\n                            var sy = rx > ry ? ry / rx : 1;\n                            ctx.save();\n                            ctx.translate(centp.x, centp.y);\n                            ctx.rotate(xAxisRotation);\n                            ctx.scale(sx, sy);\n                            ctx.arc(0, 0, ra, a1, a1 + ad, !sweep);\n                            ctx.scale(1 / sx, 1 / sy);\n                            ctx.rotate(-xAxisRotation);\n                            ctx.translate(-centp.x, -centp.y);\n                            ctx.restore();\n                        }\n                        break;\n                    case 'Z':\n                    case 'z':\n                        ctx.closePath();\n                        x = x0;\n                        y = y0;\n                        break;\n                }\n                x0 = x;\n                y0 = y;\n            }\n        }\n    };\n    /**   @private  */\n    CanvasRenderer.prototype.drawText = function (canvas, options) {\n        if (options.content && options.visible === true) {\n            var ctx = CanvasRenderer.getContext(canvas);\n            ctx.save();\n            this.setStyle(canvas, options);\n            var pivotX = options.x + options.width * options.pivotX;\n            var pivotY = options.y + options.height * options.pivotY;\n            this.rotateContext(canvas, options.angle, pivotX, pivotY);\n            this.setFontStyle(canvas, options);\n            var i = 0;\n            var childNodes = [];\n            childNodes = options.childNodes;\n            var wrapBounds = options.wrapBounds;\n            ctx.fillStyle = options.color;\n            if (wrapBounds) {\n                var position = this.labelAlign(options, wrapBounds, childNodes);\n                for (i = 0; i < childNodes.length; i++) {\n                    var child = childNodes[parseInt(i.toString(), 10)];\n                    if (child.text !== '\\n') {\n                        var offsetX = position.x + child.x - wrapBounds.x;\n                        var offsetY = position.y + child.dy * i + ((options.fontSize) * 0.8);\n                        // if (wrapBounds.width > options.width && options.textOverflow !== 'Wrap') {\n                        //     child.text = overFlow(child.text, options);\n                        // }\n                        ctx.fillText(child.text, offsetX, offsetY);\n                        if (options.textDecoration === 'Underline'\n                            || options.textDecoration === 'Overline'\n                            || options.textDecoration === 'LineThrough') {\n                            var startPointX = offsetX;\n                            var startPointY = void 0;\n                            var textlength = ctx.measureText(child.text).width;\n                            var endPointX = offsetX + textlength;\n                            var endPointY = void 0;\n                            switch (options.textDecoration) {\n                                case 'Underline':\n                                    startPointY = offsetY + 2;\n                                    endPointY = offsetY + 2;\n                                    break;\n                                case 'Overline':\n                                    startPointY = (position.y + child.dy * i);\n                                    endPointY = (position.y + child.dy * i);\n                                    break;\n                                case 'LineThrough':\n                                    startPointY = ((offsetY + position.y + child.dy * i) / 2) + 2;\n                                    endPointY = ((offsetY + position.y + child.dy * i) / 2) + 2;\n                            }\n                            ctx.beginPath();\n                            ctx.moveTo(startPointX, startPointY);\n                            ctx.lineTo(endPointX, endPointY);\n                            ctx.strokeStyle = options.color;\n                            ctx.lineWidth = options.fontSize * .08;\n                            ctx.globalAlpha = options.opacity;\n                            ctx.stroke();\n                        }\n                    }\n                }\n            }\n            ctx.restore();\n        }\n    };\n    //end region\n    // vector magnitude\n    CanvasRenderer.prototype.m = function (v) { return Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2)); };\n    // ratio between two vectors\n    CanvasRenderer.prototype.r = function (u, v) { return (u[0] * v[0] + u[1] * v[1]) / (this.m(u) * this.m(v)); };\n    // angle between two vectors\n    CanvasRenderer.prototype.a = function (u, v) { return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(this.r(u, v)); };\n    CanvasRenderer.prototype.getMeetOffset = function (arg, res, dest) {\n        var max = Math.max(res, dest);\n        var min = Math.min(res, dest);\n        switch (arg) {\n            case 'min': return 0;\n            case 'mid': return (max - min) / 2;\n            case 'max': return max - min;\n            default: return 0;\n        }\n    };\n    CanvasRenderer.prototype.getSliceOffset = function (arg, res, dest, src) {\n        switch (arg) {\n            case 'min': return 0;\n            case 'mid': return (res - dest) / 2 * src / res;\n            case 'max': return (res - dest) * src / res;\n            default: return 0;\n        }\n    };\n    CanvasRenderer.prototype.image = function (ctx, image, x, y, width, height, alignOptions, annotationCallback) {\n        ctx.beginPath();\n        var srcWidth = image.width;\n        var srcHeight = image.height;\n        var destinationW = width;\n        var destinationH = height;\n        var resultWidth = 0;\n        var resultHeight = 0;\n        ctx.globalAlpha = alignOptions.opacity;\n        if (alignOptions && alignOptions.alignment !== 'None') {\n            var xalign = alignOptions.alignment.toLowerCase().substr(1, 3);\n            var yalign = alignOptions.alignment.toLowerCase().substr(5, 3);\n            if (alignOptions.scale === 'Slice') {\n                var a = function () {\n                    resultWidth = destinationW;\n                    resultHeight = srcHeight * destinationW / srcWidth;\n                };\n                var b = function () {\n                    resultWidth = srcWidth * destinationH / srcHeight;\n                    resultHeight = destinationH;\n                };\n                if (destinationW > destinationH) {\n                    a();\n                    if (destinationH > resultHeight) {\n                        b();\n                    }\n                }\n                else if (destinationW === destinationH) {\n                    if (srcWidth > srcHeight) {\n                        b();\n                    }\n                    else {\n                        a();\n                    }\n                }\n                else {\n                    b();\n                    if (destinationW > resultWidth) {\n                        a();\n                    }\n                }\n                var x1 = this.getSliceOffset(xalign, resultWidth, destinationW, srcWidth);\n                var y1 = this.getSliceOffset(yalign, resultHeight, destinationH, srcHeight);\n                var sWidth = srcWidth - x1;\n                var sHeight = srcHeight - y1;\n                var dWidth = resultWidth - (x1 * (resultWidth / srcWidth));\n                var dHeight = resultHeight - (y1 * (resultHeight / srcHeight));\n                var canvas1 = createHtmlElement('canvas', { 'width': width.toString(), 'height': height.toString() });\n                var ctx1 = canvas1.getContext('2d');\n                ctx.clearRect(x, y, dWidth, dHeight);\n                ctx1.drawImage(image, x1, y1, sWidth, sHeight, 0, 0, dWidth, dHeight);\n                ctx.clearRect(x, y, width, height);\n                ctx.drawImage(canvas1, x, y, width, height);\n            }\n            else if (alignOptions.scale === 'Meet') {\n                var srcRatio = (srcHeight / srcWidth);\n                var destRatio = (destinationH / destinationW);\n                resultWidth = destRatio > srcRatio ? destinationW : destinationH / srcRatio;\n                resultHeight = destRatio > srcRatio ? destinationW * srcRatio : destinationH;\n                x += this.getMeetOffset(xalign, resultWidth, destinationW);\n                y += this.getMeetOffset(yalign, resultHeight, destinationH);\n                ctx.clearRect(x, y, resultWidth, resultHeight);\n                ctx.drawImage(image, 0, 0, srcWidth, srcHeight, x, y, resultWidth, resultHeight);\n            }\n            else {\n                ctx.clearRect(x, y, width, height);\n                ctx.drawImage(image, x, y, width, height);\n            }\n        }\n        else {\n            if (image.complete) {\n                var canvasId = ctx.canvas.id;\n                if (this.imageList[canvasId]) {\n                    var existingImageIndex = this.isExistingImage(canvasId, this.imageList, alignOptions);\n                    if (existingImageIndex !== -1) {\n                        this.updateImageList(existingImageIndex, this.imageList, canvasId);\n                    }\n                    this.updateCanvasList(this.imageList, canvasId);\n                }\n                //ctx.clearRect(x, y, width, height);\n                ctx.drawImage(image, x, y, width, height);\n            }\n            else {\n                var proxy_1 = this;\n                var transform_1 = ctx.getTransform();\n                image.onload = null;\n                var canvasId = ctx.canvas.id;\n                if (!this.imageList[canvasId]) {\n                    this.imageList[canvasId] = [];\n                }\n                var existingImageIndex = this.isExistingImage(canvasId, this.imageList, alignOptions);\n                var newImageEntry = { id: alignOptions.id, image: image, canvasId: canvasId };\n                if (existingImageIndex !== -1) {\n                    this.updateImageList(existingImageIndex, this.imageList, canvasId);\n                }\n                this.imageList[canvasId].push(newImageEntry);\n                image.onload = function () {\n                    var lastIndex = alignOptions.id.lastIndexOf('_content');\n                    var annotationID = lastIndex !== -1 ? alignOptions.id.substring(0, lastIndex) : alignOptions.id;\n                    var annotationObject = true;\n                    if (annotationCallback !== undefined && !annotationCallback(annotationID)) {\n                        annotationObject = false;\n                    }\n                    if (annotationObject) {\n                        ctx.setTransform(transform_1.a, transform_1.b, transform_1.c, transform_1.d, transform_1.e, transform_1.f);\n                        //ctx.clearRect(x, y, width, height);\n                        //ctx.drawImage(image, x, y, width, height);\n                        var canvasIdValue = ctx.canvas.id;\n                        if (proxy_1.imageList[canvasIdValue]) {\n                            var existingImageIndex_1 = proxy_1.isExistingImage(canvasIdValue, proxy_1.imageList, alignOptions);\n                            if (existingImageIndex_1 !== -1) {\n                                proxy_1.updateImageList(existingImageIndex_1, proxy_1.imageList, canvasIdValue);\n                                ctx.drawImage(image, x, y, width, height);\n                            }\n                            proxy_1.updateCanvasList(proxy_1.imageList, canvasIdValue);\n                        }\n                    }\n                };\n            }\n        }\n        ctx.closePath();\n    };\n    CanvasRenderer.prototype.isExistingImage = function (canvasId, imageList, alignOptions) {\n        return imageList[canvasId].findIndex(function (imageObject) { return imageObject.id === alignOptions.id; });\n    };\n    CanvasRenderer.prototype.updateImageList = function (existingImageIndex, imageList, canvasId) {\n        imageList[canvasId][existingImageIndex].image.onload = null;\n        imageList[canvasId].splice(existingImageIndex, 1);\n    };\n    CanvasRenderer.prototype.updateCanvasList = function (imageList, canvasId) {\n        if (imageList[canvasId] && imageList[canvasId].length === 0) {\n            delete imageList[canvasId];\n        }\n    };\n    // text utility\n    CanvasRenderer.prototype.loadImage = function (ctx, obj, canvas, pivotX, pivotY, annotationCallback, annotationType) {\n        this.rotateContext(canvas, obj.angle, pivotX, pivotY);\n        var image;\n        if (window.customStampCollection && window.customStampCollection.get(obj.printID)) {\n            image = window.customStampCollection.get(obj.printID);\n        }\n        else {\n            // Check if it is a sticky note type annotation\n            if (window && window.stickyNote && window.stickyNote.src && annotationType && annotationType == 'StickyNotes') {\n                image = window.stickyNote;\n            }\n            else {\n                // Create a new Image and set the source\n                image = new Image();\n                image.src = obj.source;\n            }\n        }\n        this.image(ctx, image, obj.x, obj.y, obj.width, obj.height, obj, annotationCallback);\n    };\n    /**   @private  */\n    CanvasRenderer.prototype.drawImage = function (canvas, obj, parentSvg, fromPalette, annotationCallback, annotationType) {\n        var _this = this;\n        if (obj.visible) {\n            var ctx_1 = CanvasRenderer.getContext(canvas);\n            ctx_1.save();\n            var pivotX_1 = obj.x + obj.width * obj.pivotX;\n            var pivotY_1 = obj.y + obj.height * obj.pivotY;\n            var imageObj = new Image();\n            imageObj.src = obj.source;\n            var id = ctx_1.canvas.id.split('_');\n            var value = id[id.length - 1] === ('diagram' || 'diagramLayer') ? true : false;\n            /**\n             *  Since Clipping portion for node with slice option is not calculated properly\n             * if (obj.sourceX !== undefined && obj.sourceY !== undefined && obj.sourceWidth !== undefined\n             *  && obj.sourceHeight !== undefined) {\n             *  ctx.drawImage(imageObj, obj.sourceX, obj.sourceY, obj.sourceWidth, obj.sourceHeight, obj.x, obj.y, obj.width, obj.height);\n             *  } else {\n             *             ctx.drawImage(imageObj, obj.x, obj.y, obj.width, obj.height);\n             * }\n             */\n            if (!fromPalette) {\n                this.loadImage(ctx_1, obj, canvas, pivotX_1, pivotY_1, annotationCallback, annotationType);\n            }\n            else {\n                imageObj.onload = function () {\n                    _this.loadImage(ctx_1, obj, canvas, pivotX_1, pivotY_1);\n                };\n            }\n            ctx_1.restore();\n        }\n    };\n    /**   @private  */\n    CanvasRenderer.prototype.labelAlign = function (text, wrapBounds, childNodes) {\n        var bounds = new Size(wrapBounds.width, childNodes.length * (text.fontSize * 1.2));\n        var position = { x: 0, y: 0 };\n        var labelX = text.x;\n        var labelY = text.y;\n        var offsetx = text.width * 0.5;\n        var offsety = text.height * 0.5;\n        var pointx = offsetx;\n        var pointy = offsety;\n        if (text.textAlign === 'left') {\n            pointx = 0;\n        }\n        else if (text.textAlign === 'center') {\n            if (wrapBounds.width > text.width && (text.textOverflow === 'Ellipsis' || text.textOverflow === 'Clip')) {\n                pointx = 0;\n            }\n            else {\n                pointx = text.width * 0.5;\n            }\n        }\n        else if (text.textAlign === 'right') {\n            pointx = (text.width * 1);\n        }\n        position.x = labelX + pointx + (wrapBounds ? wrapBounds.x : 0);\n        position.y = labelY + pointy - bounds.height / 2;\n        return position;\n    };\n    return CanvasRenderer;\n}());\nexport { CanvasRenderer };\nexport function refreshDiagramElements(canvas, drawingObjects, renderer, annotationCallback, annotationType) {\n    for (var i = 0; i < drawingObjects.length; i++) {\n        renderer.renderElement(drawingObjects[parseInt(i.toString(), 10)], canvas, undefined, undefined, undefined, undefined, undefined, undefined, annotationCallback, annotationType);\n    }\n}\n","import { Size } from './../primitives/size';\nimport { CanvasRenderer } from './../rendering/canvas-renderer';\nimport { processPathData, pathSegmentCollection } from '../utility/path-util';\n/**\n * SVG Renderer\n */\n/** @private */\nvar SvgRenderer = /** @class */ (function () {\n    function SvgRenderer() {\n    }\n    /**   @private  */\n    SvgRenderer.prototype.parseDashArray = function (dashArray) {\n        var dashes = [];\n        return dashes;\n    };\n    /**   @private  */\n    SvgRenderer.prototype.drawRectangle = function (svg, options, diagramId, onlyRect, isSelector, parentSvg, ariaLabel) {\n        var id;\n        if (options.id === svg.id) {\n            id = options.id + '_container';\n        }\n        else {\n            id = options.id;\n        }\n        var rect;\n        if (!rect || isSelector) {\n            rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n            svg.appendChild(rect);\n        }\n        var attr = {\n            'id': id, 'x': options.x.toString(), 'y': options.y.toString(), 'width': options.width.toString(),\n            'height': options.height.toString(), 'visibility': options.visible ? 'visible' : 'hidden',\n            'transform': 'rotate(' + options.angle + ','\n                + (options.x + options.width * options.pivotX) + ',' + (options.y + options.height * options.pivotY) + ')',\n            'rx': options.cornerRadius || 0, 'ry': options.cornerRadius || 0, 'opacity': options.opacity,\n            'aria-label': ariaLabel ? ariaLabel : ''\n        };\n        if (options.class) {\n            attr['class'] = options.class;\n        }\n        var poiterEvents = 'pointer-events';\n        if (!ariaLabel) {\n            // eslint-disable-next-line\n            attr[poiterEvents] = 'none';\n        }\n        setAttributeSvg(rect, attr);\n        this.setSvgStyle(rect, options, diagramId);\n    };\n    /**   @private  */\n    SvgRenderer.prototype.updateSelectionRegion = function (gElement, options) {\n        var rect;\n        rect = gElement.parentNode.getElementById(options.id);\n        var attr;\n        attr = {\n            'id': options.id, 'x': options.x.toString(), 'y': options.y.toString(), 'width': options.width.toString(),\n            'height': options.height.toString(), 'transform': 'rotate(' + options.angle + ','\n                + (options.x + options.width * options.pivotX) + ',' + (options.y + options.height * options.pivotY) + ')',\n            class: 'e-diagram-selected-region'\n        };\n        if (!rect) {\n            rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n            gElement.appendChild(rect);\n        }\n        this.setSvgStyle(rect, options);\n        setAttributeSvg(rect, attr);\n    };\n    /**   @private  */\n    SvgRenderer.prototype.createGElement = function (elementType, attribute) {\n        var gElement = createSvgElement(elementType, attribute);\n        return gElement;\n    };\n    /** @private */\n    SvgRenderer.prototype.drawCircle = function (gElement, options, enableSelector, ariaLabel) {\n        var circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n        this.setSvgStyle(circle, options);\n        var classval = options.class || '';\n        if (!enableSelector) {\n            classval += ' e-disabled';\n        }\n        var attr = {\n            'id': options.id,\n            'cx': options.centerX,\n            'cy': options.centerY,\n            'r': options.radius,\n            'visibility': options.visible ? 'visible' : 'hidden',\n            'class': classval,\n            'aria-label': ariaLabel ? ariaLabel['aria-label'] : ''\n        };\n        var pointerEvents = 'pointer-events';\n        if (attr['aria-label'] === '') {\n            // eslint-disable-next-line\n            attr[pointerEvents] = 'none';\n        }\n        circle.style.display = options.visible ? 'block' : 'none';\n        setAttributeSvg(circle, attr);\n        gElement.appendChild(circle);\n    };\n    /**   @private  */\n    SvgRenderer.prototype.setSvgStyle = function (svg, style, diagramId) {\n        if (style.canApplyStyle || style.canApplyStyle === undefined) {\n            if (style.fill === 'none') {\n                style.fill = 'transparent';\n            }\n            if (style.stroke === 'none') {\n                style.stroke = 'transparent';\n            }\n            var dashArray = [];\n            var fill = void 0;\n            if (style.dashArray !== undefined) {\n                var canvasRenderer = new CanvasRenderer();\n                dashArray = canvasRenderer.parseDashArray(style.dashArray);\n            }\n            fill = style.fill;\n            if (style.stroke) {\n                svg.setAttribute('stroke', style.stroke);\n            }\n            if (style.strokeWidth !== undefined && style.strokeWidth !== null) {\n                svg.setAttribute('stroke-width', style.strokeWidth.toString());\n            }\n            if (dashArray) {\n                svg.setAttribute('stroke-dasharray', dashArray.toString());\n            }\n            if (fill) {\n                svg.setAttribute('fill', fill);\n            }\n        }\n    };\n    //end region\n    // text utility\n    /**   @private  */\n    SvgRenderer.prototype.svgLabelAlign = function (text, wrapBound, childNodes) {\n        var bounds = new Size(wrapBound.width, childNodes.length * (text.fontSize * 1.2));\n        var pos = { x: 0, y: 0 };\n        var x = 0;\n        var y = 1.2;\n        var offsetX = text.width * 0.5;\n        var offsety = text.height * 0.5;\n        var pointX = offsetX;\n        var pointY = offsety;\n        if (text.textAlign === 'left') {\n            pointX = 0;\n        }\n        else if (text.textAlign === 'center') {\n            if (wrapBound.width > text.width && (text.textOverflow === 'Ellipsis' || text.textOverflow === 'Clip')) {\n                pointX = 0;\n            }\n            else {\n                pointX = text.width * 0.5;\n            }\n        }\n        else if (text.textAlign === 'right') {\n            pointX = (text.width * 1);\n        }\n        pos.x = x + pointX + (wrapBound ? wrapBound.x : 0);\n        pos.y = y + pointY - bounds.height / 2;\n        return pos;\n    };\n    /** @private */\n    SvgRenderer.prototype.drawLine = function (gElement, options) {\n        var line = document.createElementNS('http://www.w3.org/2000/svg', 'line');\n        this.setSvgStyle(line, options);\n        var pivotX = options.x + options.width * options.pivotX;\n        var pivotY = options.y + options.height * options.pivotY;\n        var kk = '';\n        var attr = {\n            'id': options.id,\n            'x1': options.startPoint.x + options.x,\n            'y1': options.startPoint.y + options.y,\n            'x2': options.endPoint.x + options.x,\n            'y2': options.endPoint.y + options.y,\n            'stroke': options.stroke,\n            'stroke-width': options.strokeWidth.toString(), 'opacity': options.opacity.toString(),\n            'transform': 'rotate(' + options.angle + ' ' + pivotX + ' ' + pivotY + ')',\n            'visibility': options.visible ? 'visible' : 'hidden',\n        };\n        if (options.class) {\n            attr['class'] = options.class;\n        }\n        setAttributeSvg(line, attr);\n        gElement.appendChild(line);\n    };\n    /**   @private  */\n    SvgRenderer.prototype.drawPath = function (svg, options, diagramId, isSelector, parentSvg, ariaLabel) {\n        var id;\n        var x = Math.floor((Math.random() * 10) + 1);\n        id = svg.id + '_shape' + x.toString();\n        var collection = [];\n        collection = processPathData(options.data);\n        collection = pathSegmentCollection(collection);\n        var shadowElement;\n        if (parentSvg) {\n            shadowElement = parentSvg.getElementById(options.id + '_groupElement_shadow');\n            if (shadowElement) {\n                shadowElement.parentNode.removeChild(shadowElement);\n            }\n        }\n        var path;\n        if (parentSvg) {\n            path = parentSvg.getElementById(options.id);\n        }\n        if (!path || isSelector) {\n            path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n            svg.appendChild(path);\n        }\n        this.renderPath(path, options, collection);\n        var attr = {\n            'id': options.id, 'transform': 'rotate(' + options.angle + ',' + (options.x + options.width * options.pivotX) + ','\n                + (options.y + options.height * options.pivotY) + ')' + 'translate(' + (options.x) + ',' + (options.y) + ')',\n            'visibility': options.visible ? 'visible' : 'hidden', 'opacity': options.opacity,\n            'aria-label': ariaLabel ? ariaLabel : ''\n        };\n        if (options.class) {\n            attr['class'] = options.class;\n        }\n        setAttributeSvg(path, attr);\n        this.setSvgStyle(path, options, diagramId);\n    };\n    /**   @private  */\n    SvgRenderer.prototype.renderPath = function (svg, options, collection) {\n        var x1;\n        var y1;\n        var x2;\n        var y2;\n        var x;\n        var y;\n        var length;\n        var i;\n        var segments = collection;\n        var d = '';\n        for (x = 0, y = 0, i = 0, length = segments.length; i < length; ++i) {\n            var obj = segments[parseInt(i.toString(), 10)];\n            var segment = obj;\n            var char = segment.command;\n            if ('x1' in segment) {\n                x1 = segment.x1;\n            }\n            if ('x2' in segment) {\n                x2 = segment.x2;\n            }\n            if ('y1' in segment) {\n                y1 = segment.y1;\n            }\n            if ('y2' in segment) {\n                y2 = segment.y2;\n            }\n            if ('x' in segment) {\n                x = segment.x;\n            }\n            if ('y' in segment) {\n                y = segment.y;\n            }\n            switch (char) {\n                case 'M':\n                    d = d + 'M' + x.toString() + ',' + y.toString() + ' ';\n                    break;\n                case 'L':\n                    d = d + 'L' + x.toString() + ',' + y.toString() + ' ';\n                    break;\n                case 'C':\n                    d = d + 'C' + x1.toString() + ',' + y1.toString() + ',' + x2.toString() + ',' + y2.toString() + ',';\n                    d += x.toString() + ',' + y.toString() + ' ';\n                    break;\n                case 'Q':\n                    d = d + 'Q' + x1.toString() + ',' + y1.toString() + ',' + x.toString() + ',' + y.toString() + ' ';\n                    break;\n                case 'A':\n                    d = d + 'A' + segment.r1.toString() + ',' + segment.r2.toString() + ',' + segment.angle.toString() + ',';\n                    d += segment.largeArc.toString() + ',' + segment.sweep + ',' + x.toString() + ',' + y.toString() + ' ';\n                    break;\n                case 'Z':\n                case 'z':\n                    d = d + 'Z' + ' ';\n                    break;\n            }\n        }\n        svg.setAttribute('d', d);\n    };\n    return SvgRenderer;\n}());\nexport { SvgRenderer };\n/** @private */\nexport function setAttributeSvg(svg, attributes) {\n    var keys = Object.keys(attributes);\n    for (var i = 0; i < keys.length; i++) {\n        if (keys[parseInt(i.toString(), 10)] === 'style') {\n            svg.style.cssText = attributes[keys[parseInt(i.toString(), 10)]];\n        }\n        else {\n            svg.setAttribute(keys[parseInt(i.toString(), 10)], attributes[keys[parseInt(i.toString(), 10)]]);\n        }\n    }\n}\n/** @private */\nexport function createSvgElement(elementType, attribute) {\n    var element = document.createElementNS('http://www.w3.org/2000/svg', elementType);\n    setAttributeSvg(element, attribute);\n    return element;\n}\n/** @private */\nexport function createSvg(id, width, height) {\n    var svgObj = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    setAttributeSvg(svgObj, { 'id': id, 'width': width, 'height': height });\n    return svgObj;\n}\nexport function getParentSvg(element, targetElement, canvas) {\n    if (element && element.id) {\n        if (targetElement && targetElement === 'selector') {\n            return this.pdfViewer.adornerSvgLayer;\n        }\n    }\n    return canvas;\n}\n","import { identityMatrix, rotateMatrix, transformPointByMatrix } from './../primitives/matrix';\nimport { Container } from './../core/containers/container';\nimport { StrokeStyle } from './../core/appearance';\nimport { Point } from './../primitives/point';\nimport { TextElement } from '../core/elements/text-element';\nimport { rotatePoint } from './base-util';\n/**\n * Implements the drawing functionalities\n */\n/** @private */\nexport function findNearestPoint(reference, start, end) {\n    var shortestPoint;\n    var shortest = Point.findLength(start, reference);\n    var shortest1 = Point.findLength(end, reference);\n    if (shortest > shortest1) {\n        shortestPoint = end;\n    }\n    else {\n        shortestPoint = start;\n    }\n    var angleBWStAndEnd = Point.findAngle(start, end);\n    var angleBWStAndRef = Point.findAngle(shortestPoint, reference);\n    var r = Point.findLength(shortestPoint, reference);\n    var vaAngle = angleBWStAndRef + ((angleBWStAndEnd - angleBWStAndRef) * 2);\n    return {\n        x: (shortestPoint.x + r * Math.cos(vaAngle * Math.PI / 180)),\n        y: (shortestPoint.y + r * Math.sin(vaAngle * Math.PI / 180))\n    };\n}\n/** @private */\nexport function findElementUnderMouse(obj, position, padding) {\n    return findTargetElement(obj.wrapper, position, padding);\n}\n/** @private */\nexport function findTargetElement(container, position, padding) {\n    for (var i = container.children.length - 1; i >= 0; i--) {\n        var element = container.children[parseInt(i.toString(), 10)];\n        if (element && element.bounds.containsPoint(position, 0)) {\n            if (element instanceof Container) {\n                var target = this.findTargetElement(element, position);\n                if (target) {\n                    return target;\n                }\n            }\n            if (element.bounds.containsPoint(position, 0)) {\n                return element;\n            }\n        }\n    }\n    if (container.bounds.containsPoint(position, padding) && container.style.fill !== 'none') {\n        return container;\n    }\n    return null;\n}\n/** @private */\nexport function intersect3(lineUtil1, lineUtil2) {\n    var point = { x: 0, y: 0 };\n    var l1 = lineUtil1;\n    var l2 = lineUtil2;\n    var d = (l2.y2 - l2.y1) * (l1.x2 - l1.x1) - (l2.x2 - l2.x1) * (l1.y2 - l1.y1);\n    var na = (l2.x2 - l2.x1) * (l1.y1 - l2.y1) - (l2.y2 - l2.y1) * (l1.x1 - l2.x1);\n    var nb = (l1.x2 - l1.x1) * (l1.y1 - l2.y1) - (l1.y2 - l1.y1) * (l1.x1 - l2.x1);\n    if (d === 0) {\n        return { enabled: false, intersectPt: point };\n    }\n    var ua = na / d;\n    var ub = nb / d;\n    if (ua >= 0 && ua <= 1 && ub >= 0 && ub <= 1) {\n        point.x = l1.x1 + (ua * (l1.x2 - l1.x1));\n        point.y = l1.y1 + (ua * (l1.y2 - l1.y1));\n        return { enabled: true, intersectPt: point };\n    }\n    return { enabled: false, intersectPt: point };\n}\n/** @private */\nexport function intersect2(start1, end1, start2, end2) {\n    var point = { x: 0, y: 0 };\n    var lineUtil1 = getLineSegment(start1.x, start1.y, end1.x, end1.y);\n    var lineUtil2 = getLineSegment(start2.x, start2.y, end2.x, end2.y);\n    var line3 = intersect3(lineUtil1, lineUtil2);\n    if (line3.enabled) {\n        return line3.intersectPt;\n    }\n    else {\n        return point;\n    }\n}\n/** @private */\nexport function getLineSegment(x1, y1, x2, y2) {\n    return { 'x1': Number(x1) || 0, 'y1': Number(y1) || 0, 'x2': Number(x2) || 0, 'y2': Number(y2) || 0 };\n}\n/** @private */\nexport function getPoints(element, corners, padding) {\n    var line = [];\n    padding = padding || 0;\n    var left = { x: corners.topLeft.x - padding, y: corners.topLeft.y };\n    var right = { x: corners.topRight.x + padding, y: corners.topRight.y };\n    var top = { x: corners.bottomRight.x, y: corners.bottomRight.y - padding };\n    var bottom = { x: corners.bottomLeft.x, y: corners.bottomLeft.y + padding };\n    line.push(left);\n    line.push(right);\n    line.push(top);\n    line.push(bottom);\n    return line;\n}\n/** @private */\nexport function getBezierDirection(src, tar) {\n    if (Math.abs(tar.x - src.x) > Math.abs(tar.y - src.y)) {\n        return src.x < tar.x ? 'right' : 'left';\n    }\n    else {\n        return src.y < tar.y ? 'bottom' : 'top';\n    }\n}\n/** @private */\nexport function updateStyle(changedObject, target) {\n    //since text style model is the super set of shape style model, we used text style model\n    var style = target.style;\n    var textElement = target;\n    for (var _i = 0, _a = Object.keys(changedObject); _i < _a.length; _i++) {\n        var key = _a[_i];\n        switch (key) {\n            case 'fill':\n                style.fill = changedObject.fill;\n                if (style instanceof StrokeStyle) {\n                    /* tslint:disable:no-string-literal */\n                    style['fill'] = 'transparent';\n                }\n                break;\n            case 'textOverflow':\n                style.textOverflow = changedObject.textOverflow;\n                break;\n            case 'opacity':\n                style.opacity = changedObject.opacity;\n                break;\n            case 'strokeColor':\n                style.strokeColor = changedObject.strokeColor;\n                break;\n            case 'strokeDashArray':\n                style.strokeDashArray = changedObject.strokeDashArray;\n                break;\n            case 'strokeWidth':\n                style.strokeWidth = changedObject.strokeWidth;\n                break;\n            case 'bold':\n                style.bold = changedObject.bold;\n                break;\n            case 'color':\n                style.color = changedObject.color;\n                break;\n            case 'textWrapping':\n                style.textWrapping = changedObject.textWrapping;\n                break;\n            case 'fontFamily':\n                style.fontFamily = changedObject.fontFamily;\n                break;\n            case 'fontSize':\n                style.fontSize = changedObject.fontSize;\n                break;\n            case 'italic':\n                style.italic = changedObject.italic;\n                break;\n            case 'textAlign':\n                style.textAlign = changedObject.textAlign;\n                break;\n            case 'whiteSpace':\n                style.whiteSpace = changedObject.whiteSpace;\n                break;\n            case 'textDecoration':\n                style.textDecoration = changedObject.textDecoration;\n                break;\n        }\n    }\n    if (target instanceof TextElement) {\n        textElement.refreshTextElement();\n    }\n}\n/** @private */\nexport function scaleElement(element, sw, sh, refObject) {\n    if (element.width !== undefined && element.height !== undefined) {\n        element.width *= sw;\n        element.height *= sh;\n    }\n    if (element instanceof Container) {\n        var matrix = identityMatrix();\n        var width = refObject.width || refObject.actualSize.width;\n        var height = refObject.height || refObject.actualSize.height;\n        if (width !== undefined && height !== undefined) {\n            var x = refObject.offsetX - width * refObject.pivot.x;\n            var y = refObject.offsetY - height * refObject.pivot.y;\n            var refPoint = {\n                x: x + width * refObject.pivot.x,\n                y: y + height * refObject.pivot.y\n            };\n            refPoint = rotatePoint(refObject.rotateAngle, refObject.offsetX, refObject.offsetY, refPoint);\n            rotateMatrix(matrix, -refObject.rotateAngle, refPoint.x, refPoint.y);\n            //    scaleMatrix(matrix, sw, sh, refPoint.x, refPoint.y);\n            rotateMatrix(matrix, refObject.rotateAngle, refPoint.x, refPoint.y);\n            for (var _i = 0, _a = element.children; _i < _a.length; _i++) {\n                var child = _a[_i];\n                if (child.width !== undefined && child.height !== undefined) {\n                    var newPosition = transformPointByMatrix(matrix, { x: child.offsetX, y: child.offsetY });\n                    child.offsetX = newPosition.x;\n                    child.offsetY = newPosition.y;\n                    scaleElement(child, sw, sh, refObject);\n                }\n            }\n        }\n    }\n}\n/** @private */\nexport function contains(mousePosition, corner, padding) {\n    if (mousePosition.x >= corner.x - padding && mousePosition.x <= corner.x + padding) {\n        if (mousePosition.y >= corner.y - padding && mousePosition.y <= corner.y + padding) {\n            return true;\n        }\n    }\n    return false;\n}\n/** @private */\nexport function getPoint(x, y, w, h, angle, offsetX, offsetY, cornerPoint) {\n    var pivot = { x: 0, y: 0 };\n    var trans = identityMatrix();\n    rotateMatrix(trans, angle, offsetX, offsetY);\n    switch (cornerPoint.x) {\n        case 0:\n            switch (cornerPoint.y) {\n                case 0:\n                    pivot = transformPointByMatrix(trans, ({ x: x, y: y }));\n                    break;\n                case 0.5:\n                    pivot = transformPointByMatrix(trans, ({ x: x, y: y + h / 2 }));\n                    break;\n                case 1:\n                    pivot = transformPointByMatrix(trans, ({ x: x, y: y + h }));\n                    break;\n            }\n            break;\n        case 0.5:\n            switch (cornerPoint.y) {\n                case 0:\n                    pivot = transformPointByMatrix(trans, ({ x: x + w / 2, y: y }));\n                    break;\n                case 0.5:\n                    pivot = transformPointByMatrix(trans, ({ x: x + w / 2, y: y + h / 2 }));\n                    break;\n                case 1:\n                    pivot = transformPointByMatrix(trans, ({ x: x + w / 2, y: y + h }));\n                    break;\n            }\n            break;\n        case 1:\n            switch (cornerPoint.y) {\n                case 0:\n                    pivot = transformPointByMatrix(trans, ({ x: x + w, y: y }));\n                    break;\n                case 0.5:\n                    pivot = transformPointByMatrix(trans, ({ x: x + w, y: y + h / 2 }));\n                    break;\n                case 1:\n                    pivot = transformPointByMatrix(trans, ({ x: x + w, y: y + h }));\n                    break;\n            }\n            break;\n    }\n    return { x: pivot.x, y: pivot.y };\n}\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty, Collection, ComplexFactory } from '@syncfusion/ej2-base';\n/**   @private  */\nvar getGradientType = function (obj) {\n    switch (obj.type) {\n        case 'Linear':\n            return LinearGradient;\n        case 'Radial':\n            return RadialGradient;\n        default:\n            return LinearGradient;\n    }\n};\n/**\n * Layout Model module defines the styles and types to arrange objects in containers\n */\nvar Thickness = /** @class */ (function () {\n    function Thickness(left, right, top, bottom) {\n        this.left = left;\n        this.right = right;\n        this.top = top;\n        this.bottom = bottom;\n    }\n    return Thickness;\n}());\nexport { Thickness };\n/**\n * Defines the space to be left between an object and its immediate parent\n */\nvar Margin = /** @class */ (function (_super) {\n    __extends(Margin, _super);\n    function Margin() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(0)\n    ], Margin.prototype, \"left\", void 0);\n    __decorate([\n        Property(0)\n    ], Margin.prototype, \"right\", void 0);\n    __decorate([\n        Property(0)\n    ], Margin.prototype, \"top\", void 0);\n    __decorate([\n        Property(0)\n    ], Margin.prototype, \"bottom\", void 0);\n    return Margin;\n}(ChildProperty));\nexport { Margin };\n/**\n * Defines the different colors and the region of color transitions\n * ```html\n * <div id='diagram'></div>\n * ```\n * ```typescript\n * let stopscol: StopModel[] = [];\n * let stops1: StopModel = { color: 'white', offset: 0, opacity: 0.7 };\n * stopscol.push(stops1);\n * let stops2: StopModel = { color: 'red', offset: 0, opacity: 0.3 };\n * stopscol.push(stops2);\n * let gradient: RadialGradientModel = { cx: 50, cy: 50, fx: 50, fy: 50, stops: stopscol, type: 'Radial' };\n * let nodes: NodeModel[] = [{ id: 'node1', width: 100, height: 100,\n * style: { gradient: gradient }\n * }];\n * let diagram: Diagram = new Diagram({\n * ...\n *   nodes: nodes,\n * ...\n * });\n * diagram.appendTo('#diagram');\n * ```\n */\nvar Stop = /** @class */ (function (_super) {\n    __extends(Stop, _super);\n    function Stop() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * @private\n     * Returns the name of class Stop\n     */\n    Stop.prototype.getClassName = function () {\n        return 'Stop';\n    };\n    __decorate([\n        Property('')\n    ], Stop.prototype, \"color\", void 0);\n    __decorate([\n        Property(0)\n    ], Stop.prototype, \"offset\", void 0);\n    __decorate([\n        Property(1)\n    ], Stop.prototype, \"opacity\", void 0);\n    return Stop;\n}(ChildProperty));\nexport { Stop };\n/**\n * Paints the node with a smooth transition from one color to another color\n */\nvar Gradient = /** @class */ (function (_super) {\n    __extends(Gradient, _super);\n    function Gradient() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], Stop)\n    ], Gradient.prototype, \"stops\", void 0);\n    __decorate([\n        Property('None')\n    ], Gradient.prototype, \"type\", void 0);\n    __decorate([\n        Property('')\n    ], Gradient.prototype, \"id\", void 0);\n    return Gradient;\n}(ChildProperty));\nexport { Gradient };\n/**\n * Defines the linear gradient of styles\n * ```html\n * <div id='diagram'></div>\n * ```\n * ```typescript\n * let stopscol: StopModel[] = [];\n * let stops1: StopModel = { color: 'white', offset: 0, opacity: 0.7 };\n * stopscol.push(stops1);\n * let stops2: StopModel = { color: 'red', offset: 0, opacity: 0.3 };\n * stopscol.push(stops2);\n * let gradient: LinearGradientModel = { x1: 0, x2: 50, y1: 0, y2: 50, stops: stopscol, type: 'Linear' };\n * let nodes: NodeModel[] = [{ id: 'node1', width: 100, height: 100,\n * style: { gradient: gradient }\n * }];\n * let diagram: Diagram = new Diagram({\n * ...\n *   nodes: nodes,\n * ...\n * });\n * diagram.appendTo('#diagram');\n * ```\n */\n/**\n * Paints the node with linear color transitions\n */\nvar LinearGradient = /** @class */ (function (_super) {\n    __extends(LinearGradient, _super);\n    function LinearGradient() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(0)\n    ], LinearGradient.prototype, \"x1\", void 0);\n    __decorate([\n        Property(0)\n    ], LinearGradient.prototype, \"x2\", void 0);\n    __decorate([\n        Property(0)\n    ], LinearGradient.prototype, \"y1\", void 0);\n    __decorate([\n        Property(0)\n    ], LinearGradient.prototype, \"y2\", void 0);\n    return LinearGradient;\n}(Gradient));\nexport { LinearGradient };\n/**\n * A focal point defines the beginning of the gradient, and a circle defines the end point of the gradient\n * ```html\n * <div id='diagram'></div>\n * ```\n * ```typescript\n * let stopscol: StopModel[] = [];\n * let stops1: StopModel = { color: 'white', offset: 0, opacity: 0.7 };\n * stopscol.push(stops1);\n * let stops2: StopModel = { color: 'red', offset: 0, opacity: 0.3 };\n * stopscol.push(stops2);\n * let gradient: RadialGradientModel = { cx: 50, cy: 50, fx: 50, fy: 50, stops: stopscol, type: 'Radial' };\n * let nodes: NodeModel[] = [{ id: 'node1', width: 100, height: 100,\n * style: { gradient: gradient }\n * }];\n * let diagram: Diagram = new Diagram({\n * ...\n *   nodes: nodes,\n * ...\n * });\n * diagram.appendTo('#diagram');\n * ```\n */\nvar RadialGradient = /** @class */ (function (_super) {\n    __extends(RadialGradient, _super);\n    function RadialGradient() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(0)\n    ], RadialGradient.prototype, \"cx\", void 0);\n    __decorate([\n        Property(0)\n    ], RadialGradient.prototype, \"cy\", void 0);\n    __decorate([\n        Property(0)\n    ], RadialGradient.prototype, \"fx\", void 0);\n    __decorate([\n        Property(0)\n    ], RadialGradient.prototype, \"fy\", void 0);\n    __decorate([\n        Property(50)\n    ], RadialGradient.prototype, \"r\", void 0);\n    return RadialGradient;\n}(Gradient));\nexport { RadialGradient };\n/**\n * Defines the style of shape/path\n */\nvar ShapeStyle = /** @class */ (function (_super) {\n    __extends(ShapeStyle, _super);\n    function ShapeStyle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('white')\n    ], ShapeStyle.prototype, \"fill\", void 0);\n    __decorate([\n        Property('black')\n    ], ShapeStyle.prototype, \"strokeColor\", void 0);\n    __decorate([\n        Property('')\n    ], ShapeStyle.prototype, \"strokeDashArray\", void 0);\n    __decorate([\n        Property(1)\n    ], ShapeStyle.prototype, \"strokeWidth\", void 0);\n    __decorate([\n        Property(1)\n    ], ShapeStyle.prototype, \"opacity\", void 0);\n    __decorate([\n        ComplexFactory(getGradientType)\n    ], ShapeStyle.prototype, \"gradient\", void 0);\n    return ShapeStyle;\n}(ChildProperty));\nexport { ShapeStyle };\n/**\n * Defines the stroke style of a path\n */\nvar StrokeStyle = /** @class */ (function (_super) {\n    __extends(StrokeStyle, _super);\n    function StrokeStyle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('transparent')\n    ], StrokeStyle.prototype, \"fill\", void 0);\n    return StrokeStyle;\n}(ShapeStyle));\nexport { StrokeStyle };\n/**\n * Defines the appearance of text\n * ```html\n * <div id='diagram'></div>\n * ```\n * ```typescript\n * let style: TextStyleModel = { strokeColor: 'black', opacity: 0.5, strokeWidth: 1 };\n * let node: NodeModel;\n * node = {\n * ...\n * id: 'node', width: 100, height: 100, offsetX: 100, offsetY: 100,\n * annotations : [{\n * content: 'text', style: style }];\n * ...\n * };\n * let diagram: Diagram = new Diagram({\n * ...\n *   nodes: [node],\n * ...\n * });\n * diagram.appendTo('#diagram');\n * ```\n */\nvar TextStyle = /** @class */ (function (_super) {\n    __extends(TextStyle, _super);\n    function TextStyle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('black')\n    ], TextStyle.prototype, \"color\", void 0);\n    __decorate([\n        Property('Arial')\n    ], TextStyle.prototype, \"fontFamily\", void 0);\n    __decorate([\n        Property(12)\n    ], TextStyle.prototype, \"fontSize\", void 0);\n    __decorate([\n        Property(false)\n    ], TextStyle.prototype, \"italic\", void 0);\n    __decorate([\n        Property(false)\n    ], TextStyle.prototype, \"bold\", void 0);\n    __decorate([\n        Property('CollapseSpace')\n    ], TextStyle.prototype, \"whiteSpace\", void 0);\n    __decorate([\n        Property('WrapWithOverflow')\n    ], TextStyle.prototype, \"textWrapping\", void 0);\n    __decorate([\n        Property('Center')\n    ], TextStyle.prototype, \"textAlign\", void 0);\n    __decorate([\n        Property('None')\n    ], TextStyle.prototype, \"textDecoration\", void 0);\n    __decorate([\n        Property('Wrap')\n    ], TextStyle.prototype, \"textOverflow\", void 0);\n    __decorate([\n        Property('transparent')\n    ], TextStyle.prototype, \"fill\", void 0);\n    return TextStyle;\n}(ShapeStyle));\nexport { TextStyle };\n","/**\n * enum module defines the public enumerations\n */\n/**\n * Defines the container/canvas transform\n * Self - Sets the transform type as Self\n * Parent - Sets the transform type as Parent\n */\nexport var RotateTransform;\n(function (RotateTransform) {\n    /** Self - Sets the transform type as Self */\n    RotateTransform[RotateTransform[\"Self\"] = 1] = \"Self\";\n    /** Parent - Sets the transform type as Parent */\n    RotateTransform[RotateTransform[\"Parent\"] = 2] = \"Parent\";\n})(RotateTransform || (RotateTransform = {}));\n/** Enables/Disables The element actions\n * None - Diables all element actions are none\n * ElementIsPort - Enable element action is port\n * ElementIsGroup - Enable element action as Group\n * @private\n */\nexport var ElementAction;\n(function (ElementAction) {\n    /** Disables all element actions are none  */\n    ElementAction[ElementAction[\"None\"] = 0] = \"None\";\n    /** Enable the element action is Port  */\n    ElementAction[ElementAction[\"ElementIsPort\"] = 2] = \"ElementIsPort\";\n    /** Enable the element action as Group  */\n    ElementAction[ElementAction[\"ElementIsGroup\"] = 4] = \"ElementIsGroup\";\n})(ElementAction || (ElementAction = {}));\n/**\n * Defines the constraints to enable/disable certain features of connector.\n * * None - Interaction of the connectors cannot be done.\n * * Select - Selects the connector.\n * * Delete - Delete the connector.\n * * Drag - Drag the connector.\n * * DragSourceEnd - Drag the source end of the connector.\n * * DragTargetEnd - Drag the target end of the connector.\n * * DragSegmentThump - Drag the segment thumb of the connector.\n * * AllowDrop - Allow to drop a node.\n * * Bridging - Creates bridge  on intersection of two connectors.\n * * BridgeObstacle -\n * * InheritBridging - Creates bridge  on intersection of two connectors.\n * * PointerEvents - Sets the pointer events.\n * * Tooltip - Displays a tooltip for the connectors.\n * * InheritToolTip - Displays a tooltip for the connectors.\n * * Interaction - Features of the connector used for interaction.\n * * ReadOnly - Enables ReadOnly\n * * Default - Default features of the connector.\n * @aspNumberEnum\n * @IgnoreSingular\n */\nexport var ConnectorConstraints;\n(function (ConnectorConstraints) {\n    /** Disable all connector Constraints. */\n    ConnectorConstraints[ConnectorConstraints[\"None\"] = 1] = \"None\";\n    /** Enables connector to be selected. */\n    ConnectorConstraints[ConnectorConstraints[\"Select\"] = 2] = \"Select\";\n    /** Enables connector to be Deleted. */\n    ConnectorConstraints[ConnectorConstraints[\"Delete\"] = 4] = \"Delete\";\n    /** Enables connector to be Dragged. */\n    ConnectorConstraints[ConnectorConstraints[\"Drag\"] = 8] = \"Drag\";\n    /** Enables connectors source end to be selected. */\n    ConnectorConstraints[ConnectorConstraints[\"DragSourceEnd\"] = 16] = \"DragSourceEnd\";\n    /** Enables connectors target end to be selected. */\n    ConnectorConstraints[ConnectorConstraints[\"DragTargetEnd\"] = 32] = \"DragTargetEnd\";\n    /** Enables control point and end point of every segment in a connector for editing. */\n    ConnectorConstraints[ConnectorConstraints[\"DragSegmentThumb\"] = 64] = \"DragSegmentThumb\";\n    /** Enables AllowDrop constraints to the  connector. */\n    ConnectorConstraints[ConnectorConstraints[\"AllowDrop\"] = 128] = \"AllowDrop\";\n    /** Enables bridging to the connector. */\n    ConnectorConstraints[ConnectorConstraints[\"Bridging\"] = 256] = \"Bridging\";\n    /** Enables or Disables Bridge Obstacles with overlapping of connectors. */\n    ConnectorConstraints[ConnectorConstraints[\"BridgeObstacle\"] = 512] = \"BridgeObstacle\";\n    /** Enables bridging to the connector. */\n    ConnectorConstraints[ConnectorConstraints[\"InheritBridging\"] = 1024] = \"InheritBridging\";\n    /** Used to set the pointer events. */\n    ConnectorConstraints[ConnectorConstraints[\"PointerEvents\"] = 2048] = \"PointerEvents\";\n    /** Enables or disables tool tip for the connectors */\n    ConnectorConstraints[ConnectorConstraints[\"Tooltip\"] = 4096] = \"Tooltip\";\n    /** Enables or disables tool tip for the connectors */\n    ConnectorConstraints[ConnectorConstraints[\"InheritTooltip\"] = 8192] = \"InheritTooltip\";\n    /** Enables Interaction. */\n    ConnectorConstraints[ConnectorConstraints[\"Interaction\"] = 4218] = \"Interaction\";\n    /** Enables ReadOnly */\n    ConnectorConstraints[ConnectorConstraints[\"ReadOnly\"] = 16384] = \"ReadOnly\";\n    /** Enables all constraints. */\n    ConnectorConstraints[ConnectorConstraints[\"Default\"] = 11838] = \"Default\";\n})(ConnectorConstraints || (ConnectorConstraints = {}));\n/** Enables/Disables the handles of the selector\n * Rotate - Enable Rotate Thumb\n * ConnectorSource - Enable Connector source point\n * ConnectorTarget - Enable Connector target point\n * ResizeNorthEast - Enable ResizeNorthEast Resize\n * ResizeEast - Enable ResizeEast Resize\n * ResizeSouthEast - Enable ResizeSouthEast Resize\n * ResizeSouth - Enable ResizeSouth Resize\n * ResizeSouthWest - Enable ResizeSouthWest Resize\n * ResizeWest - Enable ResizeWest Resize\n * ResizeNorthWest - Enable ResizeNorthWest Resize\n * ResizeNorth - Enable ResizeNorth Resize\n * Default - Enables all constraints\n * @private\n */\nexport var ThumbsConstraints;\n(function (ThumbsConstraints) {\n    /** Enable Rotate Thumb  */\n    ThumbsConstraints[ThumbsConstraints[\"Rotate\"] = 2] = \"Rotate\";\n    /** Enable Connector source point  */\n    ThumbsConstraints[ThumbsConstraints[\"ConnectorSource\"] = 4] = \"ConnectorSource\";\n    /** Enable Connector target point  */\n    ThumbsConstraints[ThumbsConstraints[\"ConnectorTarget\"] = 8] = \"ConnectorTarget\";\n    /** Enable ResizeNorthEast Resize  */\n    ThumbsConstraints[ThumbsConstraints[\"ResizeNorthEast\"] = 16] = \"ResizeNorthEast\";\n    /** Enable ResizeEast Resize  */\n    ThumbsConstraints[ThumbsConstraints[\"ResizeEast\"] = 32] = \"ResizeEast\";\n    /** Enable ResizeSouthEast Resize */\n    ThumbsConstraints[ThumbsConstraints[\"ResizeSouthEast\"] = 64] = \"ResizeSouthEast\";\n    /** Enable ResizeSouth Resize */\n    ThumbsConstraints[ThumbsConstraints[\"ResizeSouth\"] = 128] = \"ResizeSouth\";\n    /** Enable ResizeSouthWest Resize */\n    ThumbsConstraints[ThumbsConstraints[\"ResizeSouthWest\"] = 256] = \"ResizeSouthWest\";\n    /** Enable ResizeWest Resize */\n    ThumbsConstraints[ThumbsConstraints[\"ResizeWest\"] = 512] = \"ResizeWest\";\n    /** Enable ResizeNorthWest Resize */\n    ThumbsConstraints[ThumbsConstraints[\"ResizeNorthWest\"] = 1024] = \"ResizeNorthWest\";\n    /** Enable ResizeNorth Resize */\n    ThumbsConstraints[ThumbsConstraints[\"ResizeNorth\"] = 2048] = \"ResizeNorth\";\n    /** Enables all constraints */\n    ThumbsConstraints[ThumbsConstraints[\"Default\"] = 4094] = \"Default\";\n})(ThumbsConstraints || (ThumbsConstraints = {}));\n/**\n * Defines the visibility of the selector handles\n * None - Hides all the selector elements\n * ConnectorSourceThumb - Shows/hides the source thumb of the connector\n * ConnectorTargetThumb - Shows/hides the target thumb of the connector\n * ResizeSouthEast - Shows/hides the bottom right resize handle of the selector\n * ResizeSouthWest - Shows/hides the bottom left resize handle of the selector\n * ResizeNorthEast - Shows/hides the top right resize handle of the selector\n * ResizeNorthWest - Shows/hides the top left resize handle of the selector\n * ResizeEast - Shows/hides the middle right resize handle of the selector\n * ResizeWest - Shows/hides the middle left resize handle of the selector\n * ResizeSouth - Shows/hides the bottom center resize handle of the selector\n * ResizeNorth - Shows/hides the top center resize handle of the selector\n * Rotate - Shows/hides the rotate handle of the selector\n * UserHandles - Shows/hides the user handles of the selector\n * Resize - Shows/hides all resize handles of the selector\n * @aspNumberEnum\n * @IgnoreSingular\n */\nexport var SelectorConstraints;\n(function (SelectorConstraints) {\n    /** Hides all the selector elements */\n    SelectorConstraints[SelectorConstraints[\"None\"] = 1] = \"None\";\n    /** Shows/hides the source thumb of the connector */\n    SelectorConstraints[SelectorConstraints[\"ConnectorSourceThumb\"] = 2] = \"ConnectorSourceThumb\";\n    /** Shows/hides the target thumb of the connector */\n    SelectorConstraints[SelectorConstraints[\"ConnectorTargetThumb\"] = 4] = \"ConnectorTargetThumb\";\n    /** Shows/hides the bottom right resize handle of the selector */\n    SelectorConstraints[SelectorConstraints[\"ResizeSouthEast\"] = 8] = \"ResizeSouthEast\";\n    /** Shows/hides the bottom left resize handle of the selector */\n    SelectorConstraints[SelectorConstraints[\"ResizeSouthWest\"] = 16] = \"ResizeSouthWest\";\n    /** Shows/hides the top right resize handle of the selector */\n    SelectorConstraints[SelectorConstraints[\"ResizeNorthEast\"] = 32] = \"ResizeNorthEast\";\n    /** Shows/hides the top left resize handle of the selector */\n    SelectorConstraints[SelectorConstraints[\"ResizeNorthWest\"] = 64] = \"ResizeNorthWest\";\n    /** Shows/hides the middle right resize handle of the selector  */\n    SelectorConstraints[SelectorConstraints[\"ResizeEast\"] = 128] = \"ResizeEast\";\n    /** Shows/hides the middle left resize handle of the selector */\n    SelectorConstraints[SelectorConstraints[\"ResizeWest\"] = 256] = \"ResizeWest\";\n    /** Shows/hides the bottom center resize handle of the selector */\n    SelectorConstraints[SelectorConstraints[\"ResizeSouth\"] = 512] = \"ResizeSouth\";\n    /** Shows/hides the top center resize handle of the selector */\n    SelectorConstraints[SelectorConstraints[\"ResizeNorth\"] = 1024] = \"ResizeNorth\";\n    /**  Shows/hides the rotate handle of the selector */\n    SelectorConstraints[SelectorConstraints[\"Rotate\"] = 2048] = \"Rotate\";\n    /** Shows/hides the user handles of the selector */\n    SelectorConstraints[SelectorConstraints[\"UserHandle\"] = 4096] = \"UserHandle\";\n    /** Shows/hides the default tooltip of nodes and connectors */\n    SelectorConstraints[SelectorConstraints[\"ToolTip\"] = 8192] = \"ToolTip\";\n    /** Shows/hides all resize handles of the selector */\n    SelectorConstraints[SelectorConstraints[\"ResizeAll\"] = 2046] = \"ResizeAll\";\n    /** Shows all handles of the selector  */\n    SelectorConstraints[SelectorConstraints[\"All\"] = 16382] = \"All\";\n})(SelectorConstraints || (SelectorConstraints = {}));\n/** @private */\nexport var NoOfSegments;\n(function (NoOfSegments) {\n    NoOfSegments[NoOfSegments[\"Zero\"] = 0] = \"Zero\";\n    NoOfSegments[NoOfSegments[\"One\"] = 1] = \"One\";\n    NoOfSegments[NoOfSegments[\"Two\"] = 2] = \"Two\";\n    NoOfSegments[NoOfSegments[\"Three\"] = 3] = \"Three\";\n    NoOfSegments[NoOfSegments[\"Four\"] = 4] = \"Four\";\n    NoOfSegments[NoOfSegments[\"Five\"] = 5] = \"Five\";\n})(NoOfSegments || (NoOfSegments = {}));\n","/**\n * Size defines and processes the size(width/height) of the objects\n */\nvar Size = /** @class */ (function () {\n    function Size(width, height) {\n        this.width = width;\n        this.height = height;\n    }\n    // /**   @private  */\n    // public isEmpty(): boolean {\n    //     return this.height === 0 && this.width === 0;\n    // }\n    /**   @private  */\n    Size.prototype.clone = function () {\n        return new Size(this.width, this.height);\n    };\n    return Size;\n}());\nexport { Size };\n","/**\n * Rect defines and processes rectangular regions\n */\nvar Rect = /** @class */ (function () {\n    function Rect(x, y, width, height) {\n        /**\n         * Sets the x-coordinate of the starting point of a rectangular region\n         * @default 0\n         */\n        this.x = Number.MAX_VALUE;\n        /**\n         * Sets the y-coordinate of the starting point of a rectangular region\n         * @default 0\n         */\n        this.y = Number.MAX_VALUE;\n        /**\n         * Sets the width of a rectangular region\n         * @default 0\n         */\n        this.width = 0;\n        /**\n         * Sets the height of a rectangular region\n         * @default 0\n         */\n        this.height = 0;\n        if (x === undefined || y === undefined) {\n            x = y = Number.MAX_VALUE;\n            width = height = 0;\n        }\n        else {\n            if (width === undefined) {\n                width = 0;\n            }\n            if (height === undefined) {\n                height = 0;\n            }\n        }\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n    }\n    Object.defineProperty(Rect.prototype, \"left\", {\n        /**   @private  */\n        get: function () {\n            return this.x;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Rect.prototype, \"right\", {\n        /**   @private  */\n        get: function () {\n            return this.x + this.width;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Rect.prototype, \"top\", {\n        /**   @private  */\n        get: function () {\n            return this.y;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Rect.prototype, \"bottom\", {\n        /**   @private  */\n        get: function () {\n            return this.y + this.height;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Rect.prototype, \"topLeft\", {\n        /**   @private  */\n        get: function () {\n            return { x: this.left, y: this.top };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Rect.prototype, \"topRight\", {\n        /**   @private  */\n        get: function () {\n            return { x: this.right, y: this.top };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Rect.prototype, \"bottomLeft\", {\n        /**   @private  */\n        get: function () {\n            return { x: this.left, y: this.bottom };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Rect.prototype, \"bottomRight\", {\n        /**   @private  */\n        get: function () {\n            return { x: this.right, y: this.bottom };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Rect.prototype, \"middleLeft\", {\n        /**   @private  */\n        get: function () {\n            return { x: this.left, y: this.y + this.height / 2 };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Rect.prototype, \"middleRight\", {\n        /**   @private  */\n        get: function () {\n            return { x: this.right, y: this.y + this.height / 2 };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Rect.prototype, \"topCenter\", {\n        /**   @private  */\n        get: function () {\n            return { x: this.x + this.width / 2, y: this.top };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Rect.prototype, \"bottomCenter\", {\n        /**   @private  */\n        get: function () {\n            return { x: this.x + this.width / 2, y: this.bottom };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Rect.prototype, \"center\", {\n        /**   @private  */\n        get: function () {\n            return { x: this.x + this.width / 2, y: this.y + this.height / 2 };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**   @private  */\n    Rect.prototype.equals = function (rect1, rect2) {\n        return rect1.x === rect2.x && rect1.y === rect2.y && rect1.width === rect2.width && rect1.height === rect2.height;\n    };\n    /**   @private  */\n    Rect.prototype.uniteRect = function (rect) {\n        var right = Math.max(Number.NaN === this.right || this.x === Number.MAX_VALUE ? rect.right : this.right, rect.right);\n        var bottom = Math.max(Number.NaN === this.bottom || this.y === Number.MAX_VALUE ? rect.bottom : this.bottom, rect.bottom);\n        this.x = Math.min(this.left, rect.left);\n        this.y = Math.min(this.top, rect.top);\n        this.width = right - this.x;\n        this.height = bottom - this.y;\n        return this;\n    };\n    /**   @private  */\n    Rect.prototype.unitePoint = function (point) {\n        if (this.x === Number.MAX_VALUE) {\n            this.x = point.x;\n            this.y = point.y;\n            return;\n        }\n        var x = Math.min(this.left, point.x);\n        var y = Math.min(this.top, point.y);\n        var right = Math.max(this.right, point.x);\n        var bottom = Math.max(this.bottom, point.y);\n        this.x = x;\n        this.y = y;\n        this.width = right - this.x;\n        this.height = bottom - this.y;\n    };\n    Rect.prototype.intersection = function (rect) {\n        if (this.intersects(rect)) {\n            var left = Math.max(this.left, rect.left);\n            var top_1 = Math.max(this.top, rect.top);\n            var right = Math.min(this.right, rect.right);\n            var bottom = Math.min(this.bottom, rect.bottom);\n            return new Rect(left, top_1, right - left, bottom - top_1);\n        }\n        return Rect.empty;\n    };\n    /**   @private  */\n    Rect.prototype.Inflate = function (padding) {\n        this.x -= padding;\n        this.y -= padding;\n        this.width += padding * 2;\n        this.height += padding * 2;\n        return this;\n    };\n    // public Inflate(size: Size): Rect {\n    //    this.x -= size.Width;\n    //    this.y -= size.Height;\n    //    this.width += size.Width * 2;\n    //    this.height += size.Height * 2;\n    //    return this;\n    // }\n    // public inflate(width: number, height: number): void {\n    //     this.x -= width;\n    //     this.y -= height;\n    //     this.width += width * 2;\n    //     this.height += height * 2;\n    // }\n    /**   @private  */\n    Rect.prototype.intersects = function (rect) {\n        if (this.right < rect.left || this.left > rect.right || this.top > rect.bottom || this.bottom < rect.top) {\n            return false;\n        }\n        return true;\n    };\n    /**   @private  */\n    Rect.prototype.containsRect = function (rect) {\n        return this.left <= rect.left && this.right >= rect.right && this.top <= rect.top && this.bottom >= rect.bottom;\n    };\n    /**   @private  */\n    Rect.prototype.containsPoint = function (point, padding) {\n        if (padding === void 0) { padding = 0; }\n        return this.left - padding <= point.x && this.right + padding >= point.x\n            && this.top - padding <= point.y && this.bottom + padding >= point.y;\n    };\n    Rect.prototype.toPoints = function () {\n        var points = [];\n        points.push(this.topLeft);\n        points.push(this.topRight);\n        points.push(this.bottomLeft);\n        points.push(this.bottomRight);\n        return points;\n    };\n    /**   @private  */\n    Rect.toBounds = function (points) {\n        var rect = new Rect();\n        for (var _i = 0, points_1 = points; _i < points_1.length; _i++) {\n            var pt = points_1[_i];\n            rect.unitePoint(pt);\n        }\n        return rect;\n    };\n    Rect.prototype.scale = function (scaleX, scaleY) {\n        this.width *= scaleX;\n        this.height *= scaleY;\n    };\n    Rect.prototype.offset = function (offsetX, offsetY) {\n        this.x += offsetX;\n        this.y += offsetY;\n    };\n    /**   @private  */\n    Rect.empty = new Rect(Number.MAX_VALUE, Number.MIN_VALUE, 0, 0);\n    return Rect;\n}());\nexport { Rect };\n","import { RotateTransform, ElementAction } from '../../enum/enum';\nimport { Size } from '../../primitives/size';\nimport { Rect } from '../../primitives/rect';\nimport { getBounds } from '../../utility/base-util';\n/**\n * DiagramElement module defines the basic unit of diagram\n */\nvar DrawingElement = /** @class */ (function () {\n    function DrawingElement() {\n        /**\n         * Sets/Gets the reference point of the element\n         * ```html\n         * <div id='diagram'></div>\n         * ```\n         * ```typescript\n         * let stackPanel: StackPanel = new StackPanel();\n         * stackPanel.offsetX = 300; stackPanel.offsetY = 200;\n         * stackPanel.width = 100; stackPanel.height = 100;\n         * stackPanel.style.fill = 'red';\n         * stackPanel.pivot = { x: 0.5, y: 0.5 };\n         * let diagram: Diagram = new Diagram({\n         * ...\n         * basicElements: [stackPanel],\n         * ...\n         * });\n         * diagram.appendTo('#diagram');\n         * ```\n         */\n        this.pivot = { x: 0.5, y: 0.5 };\n        this.rotateValue = { x: 0, y: 0, angle: 0 };\n        /**\n         * Sets or gets whether the content of the element needs to be measured\n         */\n        this.isDirt = true;\n        /**\n         * Sets/Gets the x-coordinate of the element\n         */\n        this.offsetX = 0;\n        /**\n         * Sets/Gets the y-coordinate of the element\n         */\n        this.offsetY = 0;\n        /**\n         * Set the corner of the element\n         */\n        this.cornerRadius = 0;\n        /**\n         * Sets/Gets the minimum height of the element\n         */\n        this.minHeight = undefined;\n        /**\n         * Sets/Gets the minimum width of the element\n         */\n        this.minWidth = undefined;\n        /**\n         * Sets/Gets the maximum width of the element\n         */\n        this.maxWidth = undefined;\n        /**\n         * Sets/Gets the maximum height of the element\n         */\n        this.maxHeight = undefined;\n        /**\n         * Sets/Gets the width of the element\n         */\n        this.width = undefined;\n        /**\n         * Sets/Gets the height of the element\n         */\n        this.height = undefined;\n        /**\n         * Sets/Gets how the element has to be horizontally arranged with respect to its immediate parent\n         * * Stretch - Stretches the diagram element throughout its immediate parent\n         * * Left - Aligns the diagram element at the left of its immediate parent\n         * * Right - Aligns the diagram element at the right of its immediate parent\n         * * Center - Aligns the diagram element at the center of its immediate parent\n         * * Auto - Aligns the diagram element based on the characteristics of its immediate parent\n         */\n        this.horizontalAlignment = 'Auto';\n        /**\n         * Sets/Gets how the element has to be vertically arranged with respect to its immediate parent\n         * * Stretch - Stretches the diagram element throughout its immediate parent\n         * * Top - Aligns the diagram element at the top of its immediate parent\n         * * Bottom - Aligns the diagram element at the bottom of its immediate parent\n         * * Center - Aligns the diagram element at the center of its immediate parent\n         * * Auto - Aligns the diagram element based on the characteristics of its immediate parent\n         */\n        this.verticalAlignment = 'Auto';\n        /**\n         * Sets or gets whether the content of the element to be visible\n         */\n        this.visible = true;\n        /**\n         * Sets/Gets the rotate angle of the element\n         */\n        this.rotateAngle = 0;\n        /**\n         * Sets/Gets the margin of the element\n         */\n        this.margin = { left: 0, right: 0, top: 0, bottom: 0 };\n        /**\n         * Sets whether the element has to be aligned with respect to a point/with respect to its immediate parent\n         * * Point - Diagram elements will be aligned with respect to a point\n         * * Object - Diagram elements will be aligned with respect to its immediate parent\n         */\n        this.relativeMode = 'Point';\n        /**\n         * Sets whether the element has to be transformed based on its parent or not\n         * * Self - Sets the transform type as Self\n         * * Parent - Sets the transform type as Parent\n         */\n        /** @private */\n        this.transform = RotateTransform.Self | RotateTransform.Parent;\n        /**\n         * Sets the style of the element\n         */\n        this.style = { fill: 'white', strokeColor: 'black', opacity: 1, strokeWidth: 1 };\n        /**\n         * Gets the minimum size that is required by the element\n         */\n        this.desiredSize = new Size();\n        /**\n         * Gets the size that the element will be rendered\n         */\n        this.actualSize = new Size();\n        /**\n         * Gets the rotate angle that is set to the immediate parent of the element\n         */\n        this.parentTransform = 0;\n        /** @private */\n        this.preventContainer = false;\n        /**\n         * Gets/Sets the boundary of the element\n         */\n        this.bounds = new Rect(0, 0, 0, 0);\n        /**\n         * Defines whether the element has to be measured or not\n         */\n        this.staticSize = false;\n        /**\n         * check whether the element is rect or not\n         */\n        /** @private */\n        this.isRectElement = false;\n        /** @private */\n        this.isCalculateDesiredSize = true;\n        /**\n         * Defines whether the element is group or port\n         */\n        /** @private */\n        this.elementActions = ElementAction.None;\n        //private variables\n        this.position = undefined;\n        this.unitMode = undefined;\n        /**   @private  */\n        this.float = false;\n        this.floatingBounds = undefined;\n    }\n    // public constructor() {\n    //     this.id = randomId();\n    // }\n    /**\n     * Sets the offset of the element with respect to its parent\n     * @param x\n     * @param y\n     * @param mode\n     */\n    DrawingElement.prototype.setOffsetWithRespectToBounds = function (x, y, mode) {\n        this.unitMode = mode;\n        this.position = { x: x, y: y };\n    };\n    /**\n     * Gets the position of the element with respect to its parent\n     * @param size\n     */\n    DrawingElement.prototype.getAbsolutePosition = function (size) {\n        if (this.position !== undefined) {\n            if (this.unitMode === 'Absolute') {\n                return this.position;\n            }\n            else {\n                return {\n                    x: this.position.x * size.width, y: this.position.y * size.height\n                };\n            }\n        }\n        return undefined;\n    };\n    Object.defineProperty(DrawingElement.prototype, \"outerBounds\", {\n        get: function () {\n            return this.floatingBounds || this.bounds;\n        },\n        /**\n         * used to set the outer bounds value\n         * @private\n         */\n        set: function (bounds) {\n            this.floatingBounds = bounds;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Measures the minimum space that the element requires\n     * @param availableSize\n     */\n    DrawingElement.prototype.measure = function (availableSize) {\n        var width = this.width !== undefined ? this.width : (availableSize.width || 0) - this.margin.left - this.margin.right;\n        var height = this.height !== undefined ? this.height : (availableSize.height || 0) - this.margin.top - this.margin.bottom;\n        this.desiredSize = new Size(width, height);\n        if (this.isCalculateDesiredSize) {\n            this.desiredSize = this.validateDesiredSize(this.desiredSize, availableSize);\n        }\n        return this.desiredSize;\n    };\n    /**\n     * Arranges the element\n     * @param desiredSize\n     */\n    DrawingElement.prototype.arrange = function (desiredSize) {\n        this.actualSize = desiredSize;\n        this.updateBounds();\n        return this.actualSize;\n    };\n    /**\n     * Updates the bounds of the element\n     */\n    DrawingElement.prototype.updateBounds = function () {\n        this.bounds = getBounds(this);\n    };\n    /**\n     * Validates the size of the element with respect to its minimum and maximum size\n     * @param desiredSize\n     * @param availableSize\n     */\n    DrawingElement.prototype.validateDesiredSize = function (desiredSize, availableSize) {\n        //Empty canvas\n        if (this.isRectElement && !this.width && !this.minWidth && !this.maxWidth) {\n            desiredSize.width = 50;\n        }\n        if (this.isRectElement && !this.height && !this.minHeight && !this.maxHeight) {\n            desiredSize.height = 50;\n        }\n        if (desiredSize === undefined || this.width !== undefined &&\n            this.height !== undefined) {\n            desiredSize = desiredSize || new Size();\n            desiredSize.width = this.width === undefined ? (availableSize.width || 0)\n                - this.margin.left - this.margin.right : this.width;\n            desiredSize.height = this.height === undefined ? (availableSize.height || 0)\n                - this.margin.top - this.margin.bottom : this.height;\n        }\n        //Considering min values\n        if (this.minWidth !== undefined) {\n            desiredSize.width = Math.max(desiredSize.width, this.minWidth);\n        }\n        if (this.minHeight !== undefined) {\n            desiredSize.height = Math.max(desiredSize.height, this.minHeight);\n        }\n        //Considering max values\n        if (this.maxWidth !== undefined) {\n            desiredSize.width = Math.min(desiredSize.width, this.maxWidth);\n        }\n        if (this.maxHeight !== undefined) {\n            desiredSize.height = Math.min(desiredSize.height, this.maxHeight);\n        }\n        return desiredSize;\n    };\n    return DrawingElement;\n}());\nexport { DrawingElement };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { DrawingElement } from '../elements/drawing-element';\nimport { Size } from '../../primitives/size';\nimport { Rect } from '../../primitives/rect';\nimport { rotatePoint, getOffset } from '../../utility/base-util';\n/**\n * Container module is used to group related objects\n */\nvar Container = /** @class */ (function (_super) {\n    __extends(Container, _super);\n    function Container() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        //private members    \n        _this.desiredBounds = undefined;\n        /** @private */\n        _this.measureChildren = true;\n        /**   @private  */\n        _this.prevRotateAngle = 0;\n        return _this;\n    }\n    /**\n     * returns whether the container has child elements or not\n     */\n    Container.prototype.hasChildren = function () {\n        if (this.children !== undefined && this.children.length > 0) {\n            return true;\n        }\n        return false;\n    };\n    /**\n     * Measures the minimum space that the container requires\n     *\n     * @param availableSize\n     */\n    Container.prototype.measure = function (availableSize) {\n        // measure the element and find the desired size\n        this.desiredBounds = undefined;\n        var desired = undefined;\n        var child;\n        var center = { x: 0, y: 0 };\n        var y;\n        var x;\n        var childBounds;\n        if (this.hasChildren()) {\n            //Measuring the children\n            for (var i = 0; i < this.children.length; i++) {\n                child = this.children[parseInt(i.toString(), 10)];\n                if (child.horizontalAlignment === 'Stretch' && !availableSize.width) {\n                    availableSize.width = child.bounds.width;\n                }\n                if (child.verticalAlignment === 'Stretch' && !availableSize.height) {\n                    availableSize.height = child.bounds.height;\n                }\n                var force = child.horizontalAlignment === 'Stretch' || child.verticalAlignment === 'Stretch';\n                if (this.measureChildren || force || (child instanceof Container && child.measureChildren !== undefined)) {\n                    child.measure(availableSize);\n                }\n                childBounds = this.GetChildrenBounds(child);\n                if (child.horizontalAlignment !== 'Stretch' && child.verticalAlignment !== 'Stretch') {\n                    if (this.desiredBounds === undefined) {\n                        this.desiredBounds = childBounds;\n                    }\n                    else {\n                        this.desiredBounds.uniteRect(childBounds);\n                    }\n                }\n                else if (this.actualSize && !this.actualSize.width && !this.actualSize.height &&\n                    !child.preventContainer && child.horizontalAlignment === 'Stretch' && child.verticalAlignment === 'Stretch') {\n                    if (this.desiredBounds === undefined) {\n                        this.desiredBounds = child.bounds;\n                    }\n                    else {\n                        this.desiredBounds.uniteRect(child.bounds);\n                    }\n                }\n            }\n            if (this.desiredBounds !== undefined && this.rotateAngle !== 0) {\n                var offsetPt = {\n                    x: this.desiredBounds.x + this.desiredBounds.width * this.pivot.x,\n                    y: this.desiredBounds.y + this.desiredBounds.height * this.pivot.y\n                };\n                var newPoint = rotatePoint(this.rotateAngle, undefined, undefined, offsetPt);\n                this.desiredBounds.x = newPoint.x - this.desiredBounds.width * this.pivot.x;\n                this.desiredBounds.y = newPoint.y - this.desiredBounds.height * this.pivot.y;\n            }\n            if (this.desiredBounds) {\n                desired = new Size(this.desiredBounds.width, this.desiredBounds.height);\n            }\n        }\n        desired = this.validateDesiredSize(desired, availableSize);\n        this.stretchChildren(desired);\n        this.desiredSize = desired;\n        return desired;\n    };\n    /**\n     * Measures the minimum space that the container requires\n     *\n     * @param availableSize\n     * @param pageHeight\n     * @private\n     */\n    Container.prototype.measureFreeText = function (availableSize, pageHeight) {\n        // measure the element and find the desired size\n        this.desiredBounds = undefined;\n        var desired = undefined;\n        var child;\n        var center = { x: 0, y: 0 };\n        var y;\n        var x;\n        var childBounds;\n        if (this.hasChildren()) {\n            //Measuring the children\n            for (var i = 0; i < this.children.length; i++) {\n                child = this.children[parseInt(i.toString(), 10)];\n                if (child.horizontalAlignment === 'Stretch' && !availableSize.width) {\n                    availableSize.width = child.bounds.width;\n                }\n                if (child.verticalAlignment === 'Stretch' && !availableSize.height) {\n                    availableSize.height = child.bounds.height;\n                }\n                var force = child.horizontalAlignment === 'Stretch' || child.verticalAlignment === 'Stretch';\n                if (this.measureChildren || force || (child instanceof Container && child.measureChildren !== undefined)) {\n                    child.measure(availableSize);\n                }\n                childBounds = this.GetChildrenBounds(child);\n                if (child.horizontalAlignment !== 'Stretch' && child.verticalAlignment !== 'Stretch') {\n                    if (this.desiredBounds === undefined) {\n                        this.desiredBounds = childBounds;\n                    }\n                    else {\n                        this.desiredBounds.uniteRect(childBounds);\n                    }\n                }\n                else if (this.actualSize && !this.actualSize.width && !this.actualSize.height &&\n                    !child.preventContainer && child.horizontalAlignment === 'Stretch' && child.verticalAlignment === 'Stretch') {\n                    if (this.desiredBounds === undefined) {\n                        this.desiredBounds = child.bounds;\n                    }\n                    else {\n                        this.desiredBounds.uniteRect(child.bounds);\n                    }\n                }\n            }\n            if (this.desiredBounds !== undefined && this.rotateAngle !== 0) {\n                var offsetPt = {\n                    x: this.desiredBounds.x + this.desiredBounds.width * this.pivot.x,\n                    y: this.desiredBounds.y + this.desiredBounds.height * this.pivot.y\n                };\n                var newPoint = rotatePoint(this.rotateAngle, undefined, undefined, offsetPt);\n                this.desiredBounds.x = newPoint.x - this.desiredBounds.width * this.pivot.x;\n                this.desiredBounds.y = newPoint.y - this.desiredBounds.height * this.pivot.y;\n            }\n            if (this.desiredBounds) {\n                desired = new Size(this.desiredBounds.width, this.desiredBounds.height);\n            }\n        }\n        desired = this.validateDesiredSize(desired, availableSize);\n        this.stretchChildren(desired);\n        this.desiredSize = desired;\n        return desired;\n    };\n    /**\n     * Arranges the container and its children\n     * @param desiredSize\n     */\n    Container.prototype.arrange = function (desiredSize) {\n        var child;\n        var bounds;\n        var childBounds = this.desiredBounds;\n        if (childBounds) {\n            var x = this.offsetX;\n            var y = this.offsetY;\n            this.offsetX = childBounds.x + childBounds.width * this.pivot.x;\n            this.offsetY = childBounds.y + childBounds.height * this.pivot.y;\n            // container has rotateAngle\n            if (this.hasChildren()) {\n                //Measuring the children\n                for (var i = 0; i < this.children.length; i++) {\n                    child = this.children[parseInt(i.toString(), 10)];\n                    var arrange = false;\n                    if (child.horizontalAlignment === 'Stretch') {\n                        child.offsetX = this.offsetX;\n                        child.parentTransform = this.parentTransform + this.rotateAngle;\n                        arrange = true;\n                    }\n                    if (child.verticalAlignment === 'Stretch') {\n                        child.offsetY = this.offsetY;\n                        child.parentTransform = this.parentTransform + this.rotateAngle;\n                        arrange = true;\n                    }\n                    if (arrange || this.measureChildren || (child instanceof Container && child.measureChildren !== undefined)) {\n                        child.arrange(child.desiredSize);\n                    }\n                }\n            }\n        }\n        this.actualSize = desiredSize;\n        this.updateBounds();\n        this.prevRotateAngle = this.rotateAngle;\n        return desiredSize;\n    };\n    //protected methods\n    /**\n     * Stretches the child elements based on the size of the container\n     * @param size\n     */\n    Container.prototype.stretchChildren = function (size) {\n        if (this.hasChildren()) {\n            for (var _i = 0, _a = this.children; _i < _a.length; _i++) {\n                var child = _a[_i];\n                if (child.horizontalAlignment === 'Stretch' || child.desiredSize.width === undefined) {\n                    child.desiredSize.width = size.width - child.margin.left - child.margin.right;\n                }\n                if (child.verticalAlignment === 'Stretch' || child.desiredSize.height === undefined) {\n                    child.desiredSize.height = size.height - child.margin.top - child.margin.bottom;\n                }\n                if (child instanceof Container) {\n                    child.stretchChildren(child.desiredSize);\n                }\n            }\n        }\n    };\n    /**\n     * Finds the offset of the child element with respect to the container\n     * @param child\n     * @param center\n     */\n    Container.prototype.findChildOffsetFromCenter = function (child, center) {\n        var topLeft = { x: center.x - child.desiredSize.width / 2, y: center.y - child.desiredSize.height / 2 };\n        var offset = getOffset(topLeft, child);\n        //Rotate based on child rotate angle\n        offset = rotatePoint(child.rotateAngle, center.x, center.y, offset);\n        //Rotate based on parent pivot\n        offset = rotatePoint(this.rotateAngle + this.parentTransform, this.offsetX, this.offsetY, offset);\n        child.offsetX = offset.x;\n        child.offsetY = offset.y;\n    };\n    //private methods - check its need\n    Container.prototype.GetChildrenBounds = function (child) {\n        var childBounds;\n        var childSize;\n        childSize = child.desiredSize.clone();\n        var diffAngle = child.rotateAngle - this.rotateAngle;\n        var refPoint = { x: child.offsetX, y: child.offsetY };\n        var left = refPoint.x - childSize.width * child.pivot.x;\n        var top = refPoint.y - childSize.height * child.pivot.y;\n        var right = left + childSize.width;\n        var bottom = top + childSize.height;\n        var topLeft = { x: left, y: top };\n        var topRight = { x: right, y: top };\n        var bottomLeft = { x: left, y: bottom };\n        var bottomRight = { x: right, y: bottom };\n        topLeft = rotatePoint(child.rotateAngle, child.offsetX, child.offsetY, topLeft);\n        topRight = rotatePoint(child.rotateAngle, child.offsetX, child.offsetY, topRight);\n        bottomLeft = rotatePoint(child.rotateAngle, child.offsetX, child.offsetY, bottomLeft);\n        bottomRight = rotatePoint(child.rotateAngle, child.offsetX, child.offsetY, bottomRight);\n        if (this.rotateAngle !== 0) {\n            topLeft = rotatePoint(-this.rotateAngle, undefined, undefined, topLeft);\n            topRight = rotatePoint(-this.rotateAngle, undefined, undefined, topRight);\n            bottomLeft = rotatePoint(-this.rotateAngle, undefined, undefined, bottomLeft);\n            bottomRight = rotatePoint(-this.rotateAngle, undefined, undefined, bottomRight);\n        }\n        return Rect.toBounds([topLeft, topRight, bottomLeft, bottomRight]);\n    };\n    return Container;\n}(DrawingElement));\nexport { Container };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Size } from '../../primitives/size';\nimport { DrawingElement } from './drawing-element';\nimport { measureText } from './../../utility/dom-util';\n/**\n * TextElement is used to display text/annotations\n */\nvar TextElement = /** @class */ (function (_super) {\n    __extends(TextElement, _super);\n    /**\n     * set the id for each element\n     */\n    function TextElement() {\n        var _this = _super.call(this) || this;\n        /**\n         * sets or gets the image source\n         */\n        _this.textContent = '';\n        /** @private */\n        _this.canMeasure = true;\n        /** @private */\n        _this.canConsiderBounds = true;\n        /** @private */\n        _this.doWrap = true;\n        _this.textNodes = [];\n        /**\n         * Defines the appearance of the text element\n         */\n        _this.style = {\n            color: 'black', fill: 'transparent', strokeColor: 'black',\n            strokeWidth: 1, fontFamily: 'Arial', fontSize: 12, whiteSpace: 'CollapseSpace',\n            textWrapping: 'WrapWithOverflow', textAlign: 'Center', italic: false, bold: false,\n            textDecoration: 'None', strokeDashArray: '', opacity: 1,\n            textOverflow: 'Wrap'\n        };\n        _this.style.fill = 'transparent';\n        _this.style.strokeColor = 'transparent';\n        return _this;\n    }\n    Object.defineProperty(TextElement.prototype, \"content\", {\n        /**\n         * gets the content for the text element\n         */\n        get: function () {\n            return this.textContent;\n        },\n        /**\n         * sets the content for the text element\n         */\n        set: function (value) {\n            if (this.textContent !== value) {\n                this.textContent = value;\n                this.isDirt = true;\n                this.doWrap = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TextElement.prototype, \"childNodes\", {\n        /**\n         * sets the content for the text element\n         */\n        get: function () {\n            return this.textNodes;\n        },\n        /**\n         * gets the content for the text element\n         */\n        set: function (value) {\n            this.textNodes = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TextElement.prototype, \"wrapBounds\", {\n        /**\n         * gets the wrapBounds for the text\n         */\n        get: function () {\n            return this.textWrapBounds;\n        },\n        /**\n         * sets the wrapBounds for the text\n         */\n        set: function (value) {\n            this.textWrapBounds = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /** @private */\n    TextElement.prototype.refreshTextElement = function () {\n        this.isDirt = true;\n    };\n    /**\n     * Measures the minimum size that is required for the text element\n     * @param availableSize\n     * @private\n     */\n    TextElement.prototype.measureFreeText = function (availableSize, pageHeight) {\n        var size;\n        if (this.isDirt && this.canMeasure) {\n            size = measureText(this, this.style, this.content, this.width || availableSize.width, availableSize.height, pageHeight);\n        }\n        else {\n            size = this.desiredSize;\n        }\n        if (this.width === undefined || this.height === undefined) {\n            this.desiredSize = new Size(size.width, size.height);\n        }\n        else {\n            this.desiredSize = new Size(this.width, this.height);\n        }\n        this.desiredSize = this.validateDesiredSize(this.desiredSize, availableSize);\n        return this.desiredSize;\n    };\n    /**\n     * Measures the minimum size that is required for the text element\n     * @param availableSize\n     */\n    TextElement.prototype.measure = function (availableSize) {\n        var size;\n        if (this.isDirt && this.canMeasure) {\n            size = measureText(this, this.style, this.content, this.width || availableSize.width);\n        }\n        else {\n            size = this.desiredSize;\n        }\n        if (this.width === undefined || this.height === undefined) {\n            this.desiredSize = new Size(size.width, size.height);\n        }\n        else {\n            this.desiredSize = new Size(this.width, this.height);\n        }\n        this.desiredSize = this.validateDesiredSize(this.desiredSize, availableSize);\n        return this.desiredSize;\n    };\n    /**\n     * Arranges the text element\n     * @param desiredSize\n     */\n    TextElement.prototype.arrange = function (desiredSize) {\n        if (desiredSize.width !== this.actualSize.width || desiredSize.height !== this.actualSize.height || this.isDirt) {\n            this.doWrap = true;\n        }\n        this.actualSize = desiredSize;\n        this.updateBounds();\n        this.isDirt = false;\n        return this.actualSize;\n    };\n    return TextElement;\n}(DrawingElement));\nexport { TextElement };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Container } from './container';\nimport { RotateTransform } from '../../enum/enum';\nimport { Size } from '../../primitives/size';\nimport { Rect } from '../../primitives/rect';\nimport { TextElement } from '../elements/text-element';\nimport { identityMatrix, rotateMatrix, transformPointByMatrix } from '../../primitives/matrix';\nimport { rotateSize } from '../../utility/base-util';\n/**\n * Canvas module is used to define a plane(canvas) and to arrange the children based on margin\n */\nvar Canvas = /** @class */ (function (_super) {\n    __extends(Canvas, _super);\n    function Canvas() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**\n         * Not applicable for canvas\n         *  @private\n         */\n        _this.measureChildren = undefined;\n        return _this;\n    }\n    /**\n     * Measures the minimum space that the canvas requires\n     * @param availableSize\n     * @param pageHeight\n     * @private\n     */\n    Canvas.prototype.measureFreeText = function (availableSize, pageHeight) {\n        var desired = undefined;\n        var desiredBounds = undefined;\n        if (this.hasChildren()) {\n            //Measuring the children\n            for (var _i = 0, _a = this.children; _i < _a.length; _i++) {\n                var child = _a[_i];\n                if (child instanceof TextElement) {\n                    if (child.canMeasure) {\n                        availableSize.width = availableSize.width || this.maxWidth || this.minWidth;\n                        child.measureFreeText(availableSize, pageHeight);\n                    }\n                    else {\n                        break;\n                    }\n                }\n                else if (!(child instanceof TextElement)) {\n                    child.measure(availableSize);\n                }\n                var childSize = child.desiredSize.clone();\n                if (child.rotateAngle !== 0) {\n                    childSize = rotateSize(childSize, child.rotateAngle);\n                }\n                var right = childSize.width + child.margin.right;\n                var bottom = childSize.height + child.margin.bottom;\n                var childBounds = new Rect(child.margin.left, child.margin.top, right, bottom);\n                if (child.float) {\n                    var position = child.getAbsolutePosition(childSize);\n                    if (position !== undefined) {\n                        continue;\n                    }\n                }\n                if ((!(child instanceof TextElement)) || (child instanceof TextElement && child.canConsiderBounds)) {\n                    if (desiredBounds === undefined) {\n                        desiredBounds = childBounds;\n                    }\n                    else {\n                        desiredBounds.uniteRect(childBounds);\n                    }\n                }\n            }\n            if (desiredBounds) {\n                var leftMargin = 0;\n                var topMargin = 0;\n                leftMargin = Math.max(desiredBounds.left, 0);\n                topMargin = Math.max(desiredBounds.top, 0);\n                desired = new Size(desiredBounds.width + leftMargin, desiredBounds.height + topMargin);\n            }\n        }\n        desired = _super.prototype.validateDesiredSize.call(this, desired, availableSize);\n        _super.prototype.stretchChildren.call(this, desired);\n        this.desiredSize = desired;\n        return desired;\n    };\n    /**\n     * Measures the minimum space that the canvas requires\n     * @param availableSize\n     */\n    Canvas.prototype.measure = function (availableSize) {\n        var desired = undefined;\n        var desiredBounds = undefined;\n        if (this.hasChildren()) {\n            //Measuring the children\n            for (var _i = 0, _a = this.children; _i < _a.length; _i++) {\n                var child = _a[_i];\n                if (child instanceof TextElement) {\n                    if (child.canMeasure) {\n                        availableSize.width = availableSize.width || this.maxWidth || this.minWidth;\n                        child.measure(availableSize);\n                    }\n                    else {\n                        break;\n                    }\n                }\n                else if (!(child instanceof TextElement)) {\n                    child.measure(availableSize);\n                }\n                var childSize = child.desiredSize.clone();\n                if (child.rotateAngle !== 0) {\n                    childSize = rotateSize(childSize, child.rotateAngle);\n                }\n                var right = childSize.width + child.margin.right;\n                var bottom = childSize.height + child.margin.bottom;\n                var childBounds = new Rect(child.margin.left, child.margin.top, right, bottom);\n                if (child.float) {\n                    var position = child.getAbsolutePosition(childSize);\n                    if (position !== undefined) {\n                        continue;\n                    }\n                }\n                if ((!(child instanceof TextElement)) || (child instanceof TextElement && child.canConsiderBounds)) {\n                    if (desiredBounds === undefined) {\n                        desiredBounds = childBounds;\n                    }\n                    else {\n                        desiredBounds.uniteRect(childBounds);\n                    }\n                }\n            }\n            if (desiredBounds) {\n                var leftMargin = 0;\n                var topMargin = 0;\n                leftMargin = Math.max(desiredBounds.left, 0);\n                topMargin = Math.max(desiredBounds.top, 0);\n                desired = new Size(desiredBounds.width + leftMargin, desiredBounds.height + topMargin);\n            }\n        }\n        desired = _super.prototype.validateDesiredSize.call(this, desired, availableSize);\n        _super.prototype.stretchChildren.call(this, desired);\n        this.desiredSize = desired;\n        return desired;\n    };\n    /**\n     * Arranges the child elements of the canvas\n     */\n    Canvas.prototype.arrange = function (desiredSize) {\n        this.outerBounds = new Rect();\n        if (this.hasChildren()) {\n            var y = void 0;\n            var x = void 0;\n            y = this.offsetY - desiredSize.height * this.pivot.y;\n            x = this.offsetX - desiredSize.width * this.pivot.x;\n            for (var _i = 0, _a = this.children; _i < _a.length; _i++) {\n                var child = _a[_i];\n                if ((child.transform & RotateTransform.Parent) !== 0) {\n                    child.parentTransform = this.parentTransform + this.rotateAngle;\n                    var childSize = child.desiredSize.clone();\n                    var topLeft = void 0;\n                    var center = { x: 0, y: 0 };\n                    var childX = x;\n                    var childY = y;\n                    if (child.relativeMode === 'Point') {\n                        var position = child.getAbsolutePosition(desiredSize);\n                        if (position !== undefined) {\n                            childX += position.x;\n                            childY += position.y;\n                        }\n                    }\n                    if (child.relativeMode === 'Object') {\n                        topLeft = this.alignChildBasedOnParent(child, childSize, desiredSize, childX, childY);\n                    }\n                    else {\n                        topLeft = this.alignChildBasedOnaPoint(child, childX, childY);\n                    }\n                    center = { x: topLeft.x + childSize.width / 2, y: topLeft.y + childSize.height / 2 };\n                    if (child.rotateValue) {\n                        var rotateValue = {\n                            x: this.offsetX + (child.rotateValue.x || 0),\n                            y: this.offsetY + (child.rotateValue.y || 0)\n                        };\n                        var centerPoint = { x: this.offsetX, y: this.offsetY };\n                        var angle = child.rotateValue.angle | 0;\n                        var matrix = identityMatrix();\n                        rotateMatrix(matrix, angle, centerPoint.x, centerPoint.y);\n                        center = transformPointByMatrix(matrix, rotateValue);\n                    }\n                    _super.prototype.findChildOffsetFromCenter.call(this, child, center);\n                }\n                if ((child.horizontalAlignment === 'Stretch' || child.verticalAlignment === 'Stretch')) {\n                    child.arrange(desiredSize);\n                }\n                else {\n                    if (child instanceof TextElement && child.canMeasure) {\n                        child.arrange(child.desiredSize);\n                        this.outerBounds.uniteRect(child.outerBounds);\n                    }\n                    else if (!(child instanceof TextElement)) {\n                        child.arrange(child.desiredSize);\n                        this.outerBounds.uniteRect(child.outerBounds);\n                    }\n                }\n            }\n        }\n        this.actualSize = desiredSize;\n        this.updateBounds();\n        this.outerBounds.uniteRect(this.bounds);\n        return desiredSize;\n    };\n    /**\n     * Aligns the child element based on its parent\n     * @param child\n     * @param childSize\n     * @param parentSize\n     * @param x\n     * @param y\n     */\n    Canvas.prototype.alignChildBasedOnParent = function (child, childSize, parentSize, x, y) {\n        switch (child.horizontalAlignment) {\n            case 'Auto':\n            case 'Left':\n                x += child.margin.left;\n                break;\n            case 'Right':\n                x += parentSize.width - childSize.width - child.margin.right;\n                break;\n            case 'Stretch':\n            case 'Center':\n                x += parentSize.width / 2 - childSize.width / 2;\n                break;\n        }\n        switch (child.verticalAlignment) {\n            case 'Auto':\n            case 'Top':\n                y += child.margin.top;\n                break;\n            case 'Bottom':\n                y += parentSize.height - childSize.height - child.margin.bottom;\n                break;\n            case 'Stretch':\n            case 'Center':\n                y += parentSize.height / 2 - childSize.height / 2;\n                break;\n        }\n        return { x: x, y: y };\n    };\n    /**\n     * Aligns the child elements based on a point\n     * @param child\n     * @param x\n     * @param y\n     */\n    Canvas.prototype.alignChildBasedOnaPoint = function (child, x, y) {\n        x += child.margin.left - child.margin.right;\n        y += child.margin.top - child.margin.bottom;\n        switch (child.horizontalAlignment) {\n            case 'Auto':\n            case 'Left':\n                x = x;\n                break;\n            case 'Stretch':\n            case 'Center':\n                x -= child.desiredSize.width * child.pivot.x;\n                break;\n            case 'Right':\n                x -= child.desiredSize.width;\n                break;\n        }\n        switch (child.verticalAlignment) {\n            case 'Auto':\n            case 'Top':\n                y = y;\n                break;\n            case 'Stretch':\n            case 'Center':\n                y -= child.desiredSize.height * child.pivot.y;\n                break;\n            case 'Bottom':\n                y -= child.desiredSize.height;\n                break;\n        }\n        return { x: x, y: y };\n    };\n    return Canvas;\n}(Container));\nexport { Canvas };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Size } from '../../primitives/size';\nimport { DrawingElement } from './drawing-element';\nimport { measureImage } from './../../utility/dom-util';\n/**\n * ImageElement defines a basic image elements\n */\nvar ImageElement = /** @class */ (function (_super) {\n    __extends(ImageElement, _super);\n    /**\n     * set the id for each element\n     */\n    function ImageElement() {\n        var _this = _super.call(this) || this;\n        /**\n         * sets or gets the image source\n         */\n        _this.imageSource = '';\n        /**\n         * sets or gets the print id\n         * @private\n         */\n        _this.printID = '';\n        /**\n         * sets scaling factor of the image\n         */\n        _this.imageScale = 'None';\n        /**\n         * sets the alignment of the image\n         */\n        _this.imageAlign = 'None';\n        /**\n         * Sets how to stretch the image\n         */\n        _this.stretch = 'Stretch';\n        return _this;\n    }\n    Object.defineProperty(ImageElement.prototype, \"source\", {\n        /**\n         * Gets the source for the image element\n         */\n        get: function () {\n            return this.imageSource;\n        },\n        /**\n         * Sets the source for the image element\n         */\n        set: function (value) {\n            this.imageSource = value;\n            this.isDirt = true;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Measures minimum space that is required to render the image\n     * @param availableSize\n     */\n    ImageElement.prototype.measure = function (availableSize) {\n        if (this.isDirt && (this.stretch !== 'Stretch' || this.width === undefined && this.height === undefined)) {\n            this.contentSize = measureImage(this.source, this.contentSize);\n            this.isDirt = false;\n        }\n        if (this.width !== undefined && this.height !== undefined) {\n            this.desiredSize = new Size(this.width, this.height);\n            this.contentSize = this.desiredSize;\n        }\n        else {\n            this.desiredSize = this.contentSize;\n        }\n        this.desiredSize = this.validateDesiredSize(this.desiredSize, availableSize);\n        return this.desiredSize;\n    };\n    /**\n     * Arranges the image\n     * @param desiredSize\n     */\n    ImageElement.prototype.arrange = function (desiredSize) {\n        this.actualSize = new Size(this.desiredSize.width, this.desiredSize.height);\n        this.updateBounds();\n        return this.actualSize;\n    };\n    return ImageElement;\n}(DrawingElement));\nexport { ImageElement };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Size } from '../../primitives/size';\nimport { DrawingElement } from './drawing-element';\nimport { Rect } from '../../primitives/rect';\nimport { measurePath } from './../../utility/dom-util';\nimport { processPathData, splitArrayCollection, transformPath, getPathString } from '../../utility/path-util';\n/**\n * PathElement takes care of how to align the path based on offsetX and offsetY\n */\nvar PathElement = /** @class */ (function (_super) {\n    __extends(PathElement, _super);\n    /**\n     * set the id for each element\n     */\n    function PathElement() {\n        var _this = _super.call(this) || this;\n        /**\n         * Gets or sets the geometry of the path element\n         */\n        _this.pathData = '';\n        /**\n         * Gets/Sets whether the path has to be transformed to fit the given x,y, width, height\n         */\n        _this.transformPath = true;\n        /**\n         * Gets/Sets the equivalent path, that will have the origin as 0,0\n         */\n        _this.absolutePath = '';\n        /**   @private  */\n        _this.canMeasurePath = false;\n        //Private variables\n        /**   @private  */\n        _this.absoluteBounds = new Rect();\n        return _this;\n    }\n    Object.defineProperty(PathElement.prototype, \"data\", {\n        /**\n         * Gets the geometry of the path element\n         */\n        get: function () {\n            return this.pathData;\n        },\n        /**\n         * Sets the geometry of the path element\n         */\n        set: function (value) {\n            if (this.pathData !== value) {\n                this.pathData = value;\n                this.isDirt = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Measures the minimum space that is required to render the element\n     * @param availableSize\n     */\n    PathElement.prototype.measure = function (availableSize) {\n        //Performance issue - Avoiding measuring the connector path\n        if (this.staticSize && this.width !== undefined && this.height !== undefined) {\n            this.absoluteBounds = new Rect(this.offsetX - this.width * this.pivot.x, this.offsetY - this.height * this.pivot.y, this.width, this.height);\n        }\n        else if (this.isDirt && (this.transformPath || (this.width === undefined || this.height === undefined))\n            && (!this.absoluteBounds || this.absoluteBounds.height === 0) || this.canMeasurePath) {\n            //Measure the element only whent the path data is changed/ size is not specified\n            this.absoluteBounds = measurePath(this.data ? this.data : '');\n        }\n        if (this.width === undefined) {\n            this.desiredSize = new Size(this.absoluteBounds.width, this.height || this.absoluteBounds.height);\n        }\n        else if (this.height === undefined) {\n            this.desiredSize = new Size(this.width || this.absoluteBounds.width, this.absoluteBounds.height);\n        }\n        else {\n            this.desiredSize = new Size(this.width, this.height);\n        }\n        this.desiredSize = this.validateDesiredSize(this.desiredSize, availableSize);\n        this.canMeasurePath = false;\n        return this.desiredSize;\n    };\n    /**\n     * Arranges the path element\n     * @param desiredSize\n     */\n    PathElement.prototype.arrange = function (desiredSize) {\n        if (this.isDirt || this.actualSize.width !== desiredSize.width || this.actualSize.height !== desiredSize.height) {\n            this.isDirt = true;\n            this.absolutePath = this.updatePath(this.data, this.absoluteBounds, desiredSize);\n            if (!this.staticSize) {\n                this.points = null;\n            }\n        }\n        this.actualSize = this.desiredSize;\n        this.updateBounds();\n        this.isDirt = false;\n        return this.actualSize;\n    };\n    /**\n     * Translates the path to 0,0 and scales the path based on the actual size\n     * @param pathData\n     * @param bounds\n     * @param actualSize\n     */\n    PathElement.prototype.updatePath = function (pathData, bounds, actualSize) {\n        var isScale = false;\n        var newPathString = '';\n        var scaleX = -bounds.x;\n        var scaleY = -bounds.y;\n        var arrayCollection = [];\n        if (actualSize.width !== bounds.width || actualSize.height !== bounds.height) {\n            scaleX = actualSize.width / Number(bounds.width ? bounds.width : 1);\n            scaleY = actualSize.height / Number(bounds.height ? bounds.height : 1);\n            isScale = true;\n        }\n        arrayCollection = processPathData(pathData);\n        arrayCollection = splitArrayCollection(arrayCollection);\n        if ((isScale || this.isDirt) && this.transformPath) {\n            newPathString = transformPath(arrayCollection, scaleX, scaleY, isScale, bounds.x, bounds.y, 0, 0);\n        }\n        else {\n            newPathString = getPathString(arrayCollection);\n        }\n        isScale = false;\n        return newPathString;\n    };\n    return PathElement;\n}(DrawingElement));\nexport { PathElement };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Defines and processes coordinates\n */\nvar Point = /** @class */ (function (_super) {\n    __extends(Point, _super);\n    function Point() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**   @private  */\n    Point.equals = function (point1, point2) {\n        if (point1 === point2) {\n            return true;\n        }\n        if (!point1 || !point2) {\n            return false;\n        }\n        return !point1 || !point2 || point1.x === point2.x && point1.y === point2.y;\n    };\n    /**\n     * check whether the points are given\n     */\n    Point.isEmptyPoint = function (point) {\n        if (point.x && point.y) {\n            return false;\n        }\n        return true;\n    };\n    /**   @private  */\n    Point.transform = function (point, angle, length) {\n        var pt = { x: 0, y: 0 };\n        pt.x = Math.round((point.x + length * Math.cos(angle * Math.PI / 180)) * 100) / 100;\n        pt.y = Math.round((point.y + length * Math.sin(angle * Math.PI / 180)) * 100) / 100;\n        return pt;\n    };\n    /**   @private  */\n    Point.findLength = function (s, e) {\n        var length = Math.sqrt(Math.pow((s.x - e.x), 2) + Math.pow((s.y - e.y), 2));\n        return length;\n    };\n    /**   @private  */\n    Point.findAngle = function (point1, point2) {\n        var angle = Math.atan2(point2.y - point1.y, point2.x - point1.x);\n        angle = (180 * angle / Math.PI);\n        angle %= 360;\n        if (angle < 0) {\n            angle += 360;\n        }\n        return angle;\n    };\n    /**   @private  */\n    Point.distancePoints = function (pt1, pt2) {\n        return Math.sqrt(Math.pow(pt2.x - pt1.x, 2) + Math.pow(pt2.y - pt1.y, 2));\n    };\n    /**   @private  */\n    Point.getLengthFromListOfPoints = function (points) {\n        var length = 0;\n        for (var j = 0; j < points.length - 1; j++) {\n            length += this.distancePoints(points[parseInt(j.toString(), 10)], points[j + 1]);\n        }\n        return length;\n    };\n    /**   @private  */\n    Point.adjustPoint = function (source, target, isStart, length) {\n        var pt = isStart ? { x: source.x, y: source.y } : { x: target.x, y: target.y };\n        var angle;\n        if (source.x === target.x) {\n            if (source.y < target.y && isStart || source.y > target.y && !isStart) {\n                pt.y += length;\n            }\n            else {\n                pt.y -= length;\n            }\n        }\n        else if (source.y === target.y) {\n            if (source.x < target.x && isStart || source.x > target.x && !isStart) {\n                pt.x += length;\n            }\n            else {\n                pt.x -= length;\n            }\n        }\n        else {\n            if (isStart) {\n                angle = this.findAngle(source, target);\n                pt = this.transform(source, angle, length);\n            }\n            else {\n                angle = this.findAngle(target, source);\n                pt = this.transform(target, angle, length);\n            }\n        }\n        return pt;\n    };\n    /**   @private  */\n    Point.direction = function (pt1, pt2) {\n        if (Math.abs(pt2.x - pt1.x) > Math.abs(pt2.y - pt1.y)) {\n            return pt1.x < pt2.x ? 'Right' : 'Left';\n        }\n        else {\n            return pt1.y < pt2.y ? 'Bottom' : 'Top';\n        }\n    };\n    /**\n     * @private\n     * Returns the name of class Point\n     */\n    Point.prototype.getClassName = function () {\n        return 'Point';\n    };\n    __decorate([\n        Property(0)\n    ], Point.prototype, \"x\", void 0);\n    __decorate([\n        Property(0)\n    ], Point.prototype, \"y\", void 0);\n    return Point;\n}(ChildProperty));\nexport { Point };\n","import { PathElement } from '../core/elements/path-element';\nimport { TextElement } from '../core/elements/text-element';\nimport { Container } from '../core/containers/container';\nimport { wordBreakToString, whiteSpaceToString, textAlignToString } from '../utility/base-util';\nimport { getDiagramElement } from '../utility/dom-util';\nimport { CanvasRenderer } from './canvas-renderer';\nimport { ImageElement } from '../core/elements/image-element';\n/**\n * Renderer module is used to render basic diagram elements\n */\n/** @private */\nvar DrawingRenderer = /** @class */ (function () {\n    function DrawingRenderer(name, isSvgMode) {\n        /**   @private  */\n        this.renderer = null;\n        // private svgRenderer: SvgRenderer;\n        /** @private */\n        this.isSvgMode = true;\n        this.diagramId = name;\n        this.element = getDiagramElement(this.diagramId);\n        this.isSvgMode = isSvgMode;\n        this.renderer = new CanvasRenderer();\n        //  this.svgRenderer = new SvgRenderer();\n    }\n    // /** @private */\n    // public setLayers(): void {\n    //     this.adornerSvgLayer = this.element.getElementsByClassName('e-adorner-layer')[0] as SVGSVGElement;\n    // }\n    /**   @private  */\n    DrawingRenderer.prototype.renderElement = function (element, canvas, htmlLayer, transform, parentSvg, createParent, fromPalette, indexValue, annotationCallback, annotationType) {\n        var isElement = true;\n        if (element instanceof Container) {\n            isElement = false;\n            this.renderContainer(element, canvas, htmlLayer, transform, parentSvg, createParent, fromPalette, indexValue, annotationCallback, annotationType);\n        }\n        else if (element instanceof ImageElement) {\n            this.renderImageElement(element, canvas, transform, parentSvg, fromPalette, annotationCallback, annotationType);\n        }\n        else if (element instanceof PathElement) {\n            this.renderPathElement(element, canvas, transform, parentSvg, fromPalette);\n        }\n        else if (element instanceof TextElement) {\n            this.renderTextElement(element, canvas, transform, parentSvg, fromPalette);\n        }\n        else {\n            this.renderRect(element, canvas, transform, parentSvg);\n        }\n    };\n    /**   @private  */\n    DrawingRenderer.prototype.renderImageElement = function (element, canvas, transform, parentSvg, fromPalette, annotationCallback, annotationType) {\n        var options = this.getBaseAttributes(element, transform);\n        options.cornerRadius = 0;\n        this.renderer.drawRectangle(canvas, options);\n        // let sx: number; let sy: number;\n        var imageWidth;\n        var imageHeight;\n        var sourceWidth;\n        var sourceHeight;\n        if (element.stretch === 'Stretch') {\n            imageWidth = element.actualSize.width;\n            imageHeight = element.actualSize.height;\n        }\n        else {\n            var contentWidth = element.contentSize.width;\n            var contentHeight = element.contentSize.height;\n            var widthRatio = options.width / contentWidth;\n            var heightRatio = options.height / contentHeight;\n            var ratio = void 0;\n            switch (element.stretch) {\n                case 'Meet':\n                    ratio = Math.min(widthRatio, heightRatio);\n                    imageWidth = contentWidth * ratio;\n                    imageHeight = contentHeight * ratio;\n                    options.x += Math.abs(options.width - imageWidth) / 2;\n                    options.y += Math.abs(options.height - imageHeight) / 2;\n                    break;\n                case 'Slice':\n                    widthRatio = options.width / contentWidth;\n                    heightRatio = options.height / contentHeight;\n                    ratio = Math.max(widthRatio, heightRatio);\n                    imageWidth = contentWidth * ratio;\n                    imageHeight = contentHeight * ratio;\n                    sourceWidth = options.width / imageWidth * contentWidth;\n                    sourceHeight = options.height / imageHeight * contentHeight;\n                    break;\n                case 'None':\n                    imageWidth = contentWidth;\n                    imageHeight = contentHeight;\n                    break;\n            }\n        }\n        options.width = imageWidth;\n        options.height = imageHeight;\n        //Commented for code coverage\n        //(options as ImageAttributes).sourceX = sx;\n        //(options as ImageAttrib                                                                           utes).sourceY = sy;\n        options.sourceWidth = sourceWidth;\n        options.sourceHeight = sourceHeight;\n        options.source = element.source;\n        options.alignment = element.imageAlign;\n        options.scale = element.imageScale;\n        options.printID = element.printID;\n        this.renderer.drawImage(canvas, options, parentSvg, fromPalette, annotationCallback, annotationType);\n    };\n    /**   @private  */\n    DrawingRenderer.prototype.renderPathElement = function (element, canvas, transform, parentSvg, fromPalette) {\n        var options = this.getBaseAttributes(element, transform);\n        options.data = element.absolutePath;\n        options.data = element.absolutePath;\n        var ariaLabel = element.id;\n        if (!this.isSvgMode) {\n            options.x = options.x;\n            options.y = options.y;\n        }\n        this.renderer.drawPath(canvas, options);\n    };\n    /**   @private  */\n    DrawingRenderer.prototype.renderTextElement = function (element, canvas, transform, parentSvg, fromPalette) {\n        var options = this.getBaseAttributes(element, transform);\n        options.cornerRadius = 0;\n        options.whiteSpace = whiteSpaceToString(element.style.whiteSpace, element.style.textWrapping);\n        options.content = element.content;\n        options.breakWord = wordBreakToString(element.style.textWrapping);\n        options.textAlign = textAlignToString(element.style.textAlign);\n        options.color = element.style.color;\n        options.italic = element.style.italic;\n        options.bold = element.style.bold;\n        options.fontSize = element.style.fontSize;\n        options.fontFamily = element.style.fontFamily;\n        options.textOverflow = element.style.textOverflow;\n        options.textDecoration = element.style.textDecoration;\n        options.doWrap = element.doWrap;\n        options.wrapBounds = element.wrapBounds;\n        options.childNodes = element.childNodes;\n        options.dashArray = '';\n        options.strokeWidth = 0;\n        options.fill = element.style.fill;\n        var ariaLabel = element.content ? element.content : element.id;\n        this.renderer.drawRectangle(canvas, options);\n        this.renderer.drawText(canvas, options);\n    };\n    /**   @private  */\n    DrawingRenderer.prototype.renderContainer = function (group, canvas, htmlLayer, transform, parentSvg, createParent, fromPalette, indexValue, annotationCallback, annotationType) {\n        transform = { tx: 0, ty: 0, scale: 1 };\n        var svgParent = { svg: parentSvg, g: canvas };\n        if (this.diagramId) {\n            parentSvg = parentSvg;\n        }\n        this.renderRect(group, canvas, transform, parentSvg);\n        if (group.hasChildren()) {\n            var parentG = void 0;\n            var svgParent_1;\n            for (var _i = 0, _a = group.children; _i < _a.length; _i++) {\n                var child = _a[_i];\n                this.renderElement(child, parentG || canvas, htmlLayer, transform, parentSvg, true, fromPalette, indexValue, annotationCallback, annotationType);\n            }\n        }\n    };\n    /**   @private  */\n    DrawingRenderer.prototype.renderRect = function (element, canvas, transform, parentSvg) {\n        var options = this.getBaseAttributes(element, transform);\n        options.cornerRadius = element.cornerRadius || 0;\n        var ariaLabel = element.id;\n        this.renderer.drawRectangle(canvas, options);\n    };\n    /**   @private  */\n    DrawingRenderer.prototype.getBaseAttributes = function (element, transform) {\n        var options = {\n            width: element.actualSize.width, height: element.actualSize.height,\n            x: element.offsetX - element.actualSize.width * element.pivot.x + 0.5,\n            y: element.offsetY - element.actualSize.height * element.pivot.y + 0.5,\n            fill: element.style.fill, stroke: element.style.strokeColor, angle: element.rotateAngle + element.parentTransform,\n            pivotX: element.pivot.x, pivotY: element.pivot.y, strokeWidth: element.style.strokeWidth,\n            dashArray: element.style.strokeDashArray || '', opacity: element.style.opacity,\n            visible: element.visible, id: element.id, gradient: element.style.gradient,\n        };\n        if (transform) {\n            options.x += transform.tx;\n            options.y += transform.ty;\n        }\n        return options;\n    };\n    return DrawingRenderer;\n}());\nexport { DrawingRenderer };\n"],"names":["identityMatrix","Matrix","MatrixTypes","Identity","transformPointByMatrix","matrix","point","pt","multiplyPoint","x","y","Math","round","transformPointsByMatrix","points","transformedPoints","_i","points_1","length","push","rotateMatrix","angle","centerX","centerY","multiplyMatrix","createRotationRadians","scaleMatrix","scaleX","scaleY","createScaling","translateMatrix","offsetX","offsetY","type","Translation","setMatrix","Unknown","result","Scaling","num","sin","num2","cos","m11","m22","m21","m12","matrix1","matrix2","type2","assignMatrix","mat","getChildNode","node","child","collection","Browser","info","name","i","childNodes","parseInt","toString","nodeType","children","translatePoints","element","translatedPts","pt1","actualSize","width","pivot","height","rotateAngle","parentTransform","measurePath","data","path","window","style","visibility","setAttribute","bounds","getBBox","svgBounds","Rect","currentValue","xmin","xmax","ymin","ymax","currentpath","replace","trim","split","min","max","getTextOptions","maxWidth","options","fill","stroke","strokeColor","pivotX","pivotY","strokeWidth","dashArray","strokeDashArray","opacity","visible","id","fontSize","fontFamily","textOverflow","textDecoration","doWrap","whiteSpace","whiteSpaceToString","textWrapping","content","breakWord","wordBreakToString","textAlign","textAlignToString","color","italic","bold","wrapSvgText","text","textValue","maxHeight","pageHeight","txtValue","bounds1","k","bBoxText","dy","ceil","indexOf","wordWrapping","words","newText","existingWidth","existingText","j","wrap","eachLine","wrapText","floor","txt","childNode","freeTextHeight","isFreeTextHeightAllowed","bBoxTextHeight","slice","undefined","wrapSvgTextAlign","txtWidth","wrapBounds","measureText","Size","getDiagramElement","elementId","contentId","document","getElementById","querySelector","createHtmlElement","elementType","attribute","createElement","setAttributeHtml","attributes","keys","Object","cssText","getAdornerLayerSvg","diagramId","index","adornerLayerSvg","diagramElement","getElementsByClassName","getSelectorElement","adornerLayer","adornerSvg","createMeasureElements","usageCount","divElement","appendChild","imageElement","svg","createElementNS","createTextNode","tSpan","setAttributeNS","body","measureImage","source","contentSize","getBoundingClientRect","randomId","chars","crypto","count","Uint16Array","msCrypto","getRandomValues","random","substring","cornersPointsBeforeRotation","ele","top","bottom","left","right","topLeft","topRight","bottomLeft","bottomRight","toBounds","rotateSize","size","minX","minY","maxX","maxY","getBounds","corners","middleLeft","topCenter","bottomCenter","middleRight","center","value","state","textContent","bBox","middleElement","rotatePoint","getOffset","obj","desiredSize","processPathData","arrayCollection","parsePathData","ob","char","toLowerCase","command","x1","y1","x2","y2","r1","r2","largeArc","sweep","tokenizer","current","commands","match","lastIndex","isExponential","exec","Number","getRectanglePath","cornerRadius","point2","next","corner","pathSegmentCollection","x0","y0","segments","seg","prev","ctrl","cpt2","newSeg","transformPath","arr","sX","sY","s","bX","bY","iX","iY","scalePathData","toFixed","updatedSegment","getPathString","segment","isScale","val","scaleFactor","oldOffset","newOffset","splitArrayCollection","test","getNewString","getString","string","cmd","ang","l","refreshDiagramElements","canvas","drawingObjects","renderer","annotationCallback","annotationType","renderElement","setAttributeSvg","createSvgElement","createSvg","svgObj","getParentSvg","targetElement","this","pdfViewer","adornerSvgLayer","findNearestPoint","reference","start","end","shortestPoint","Point","findLength","angleBWStAndEnd","findAngle","angleBWStAndRef","r","vaAngle","PI","findElementUnderMouse","position","padding","findTargetElement","wrapper","container","containsPoint","Container","target","intersect3","lineUtil1","lineUtil2","l1","l2","d","na","nb","enabled","intersectPt","ua","ub","intersect2","start1","end1","start2","end2","line3","getLineSegment","getPoints","line","getBezierDirection","src","tar","abs","updateStyle","changedObject","textElement","_a","StrokeStyle","TextElement","refreshTextElement","scaleElement","sw","sh","refObject","refPoint","newPosition","contains","mousePosition","getPoint","w","h","cornerPoint","trans","__extends","extendStatics","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","key","desc","c","arguments","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","getGradientType","LinearGradient","RadialGradient","Thickness","Margin","_super","apply","Property","ChildProperty","Stop","getClassName","Gradient","Collection","ShapeStyle","ComplexFactory","TextStyle","RotateTransform","ElementAction","ConnectorConstraints","ThumbsConstraints","SelectorConstraints","NoOfSegments","clone","MAX_VALUE","get","enumerable","configurable","equals","rect1","rect2","uniteRect","rect","NaN","unitePoint","intersection","intersects","top_1","empty","Inflate","containsRect","toPoints","scale","offset","MIN_VALUE","DrawingElement","rotateValue","isDirt","minHeight","minWidth","horizontalAlignment","verticalAlignment","margin","relativeMode","transform","Self","Parent","preventContainer","staticSize","isRectElement","isCalculateDesiredSize","elementActions","None","unitMode","float","floatingBounds","setOffsetWithRespectToBounds","mode","getAbsolutePosition","set","measure","availableSize","validateDesiredSize","arrange","updateBounds","_this","desiredBounds","measureChildren","prevRotateAngle","hasChildren","childBounds","desired","force","GetChildrenBounds","offsetPt","newPoint","stretchChildren","measureFreeText","findChildOffsetFromCenter","childSize","call","canMeasure","canConsiderBounds","textNodes","textWrapBounds","Canvas","leftMargin","topMargin","outerBounds","childX","childY","alignChildBasedOnParent","alignChildBasedOnaPoint","centerPoint","parentSize","ImageElement","imageSource","printID","imageScale","imageAlign","stretch","PathElement","pathData","absolutePath","canMeasurePath","absoluteBounds","updatePath","newPathString","point1","isEmptyPoint","e","sqrt","pow","atan2","distancePoints","pt2","getLengthFromListOfPoints","adjustPoint","isStart","direction","CanvasRenderer","imageList","getContext","setStyle","ctx","strokeStyle","lineWidth","globalAlpha","parseDashArray","setLineDash","fillStyle","rotateContext","translate","rotate","setFontStyle","font","dashes","separator","splittedDashes_1","drawRectangle","drawPath","save","beginPath","fillRect","closePath","restore","renderPath","length_1","segs","moveTo","lineTo","bezierCurveTo","quadraticCurveTo","curr","rx","ry","xAxisRotation","cp","currp","isNaN","cpp","centp","a1","a","u","v","ad","ah","ra","sx","sy","arc","drawText","labelAlign","fillText","startPointX","startPointY","endPointX","endPointY","m","acos","getMeetOffset","arg","res","dest","getSliceOffset","image","alignOptions","srcWidth","srcHeight","destinationW","destinationH","resultWidth","resultHeight","alignment","xalign","substr","yalign","sWidth","sHeight","dWidth","dHeight","canvas1","ctx1","clearRect","drawImage","srcRatio","destRatio","complete","canvasId","existingImageIndex","isExistingImage","updateImageList","updateCanvasList","proxy_1","transform_1","getTransform","onload","newImageEntry","lastIndexOf","annotationID","annotationObject","setTransform","f","canvasIdValue","existingImageIndex_1","findIndex","imageObject","splice","loadImage","customStampCollection","stickyNote","Image","parentSvg","fromPalette","ctx_1","pivotX_1","pivotY_1","imageObj","labelX","labelY","pointx","pointy","DrawingRenderer","isSvgMode","htmlLayer","createParent","indexValue","renderContainer","renderImageElement","renderPathElement","renderTextElement","renderRect","getBaseAttributes","imageWidth","imageHeight","sourceWidth","sourceHeight","contentWidth","contentHeight","widthRatio","heightRatio","ratio","group","tx","ty","gradient","SvgRenderer","onlyRect","isSelector","ariaLabel","attr","aria-label","class","setSvgStyle","updateSelectionRegion","gElement","parentNode","createGElement","drawCircle","enableSelector","circle","classval","cx","cy","radius","display","canApplyStyle","svgLabelAlign","wrapBound","pos","pointX","pointY","drawLine","startPoint","endPoint","stroke-width","shadowElement","removeChild"],"mappings":"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"}