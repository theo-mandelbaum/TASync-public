!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@syncfusion/ej2-base"),require("@syncfusion/ej2-svg-base"),require("@syncfusion/ej2-data"),require("@syncfusion/ej2-pdf-export")):"function"==typeof define&&define.amd?define(["exports","@syncfusion/ej2-base","@syncfusion/ej2-svg-base","@syncfusion/ej2-data","@syncfusion/ej2-pdf-export"],t):t((e=e||self).ej={},e.ej2Base,e.ej2SvgBase,e.ej2Data,e.ej2PdfExport)}(this,function(e,Y,k,C,_){"use strict";M=function(e,t){return(M=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};var M,L=function(e,t){function i(){this.constructor=e}M(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},W=function(e,t){this.width=e,this.height=t};function P(e,t){return"string"!=typeof e?e:Y.isNullOrUndefined(e)?null:-1!==e.indexOf("%")?t/100*parseInt(e,10):parseInt(e,10)}function w(e){e.element.style.height=Y.isNullOrUndefined(e.height)?"auto":e.height,e.element.style.width=Y.isNullOrUndefined(e.width)?"auto":e.width,e.element.style.setProperty("display","block");var t=e.element.clientWidth,i=e.element.clientHeight,o="string"==typeof e.element.style.width?P(e.element.style.width,t):e.element.style.width,n="string"==typeof e.element.style.height?P(e.element.style.height,i):e.element.style.height;new W(0,0);return"0px"===e.width||"0%"===e.width||"0%"===e.height||"0px"===e.height?new W(0,0):new W(P(e.width,t)||t||o||600,P(e.height,i)||i||n||(e.isDevice?Math.min(window.innerWidth,window.innerHeight):450))}function N(e){e.renderer=new k.SvgRenderer(e.element.id),e.availableSize=w(e),e.svgObject=e.renderer.createSvg({id:e.element.id+"_svg",width:e.availableSize.width,height:e.availableSize.height}),"0px"!==e.width&&"0%"!==e.width&&"0%"!==e.height&&"0px"!==e.height||(e.svgObject.setAttribute("height","0"),e.svgObject.setAttribute("width","0"))}function F(e,t,i){var o=i.getBoundingClientRect(),n=i.ownerDocument.defaultView.pageXOffset,l=i.ownerDocument.defaultView.pageYOffset,a=i.ownerDocument.documentElement.clientTop,i=i.ownerDocument.documentElement.clientLeft,n=o.left+n-i,i=o.top+l-a;return new T(e-n,t-i)}function z(e){return e*(Math.PI/180)}function j(e){return e*(180/Math.PI)}function A(e,t,i,o,n){var l,a,r,s=new W(n.mapAreaRect.width,n.mapAreaRect.height),d=n.baseMapBounds.longitude,p=n.baseMapBounds.latitude,h=z(e),m=z(t),c=Y.isNullOrUndefined(n.projectionType)?"Mercator":n.projectionType,u=n.isTileMap?256*Math.pow(2,1):Y.isNullOrUndefined(i)?Math.min(s.width,s.height):Math.min(s.width,s.height)*i;if("Normal"===o.geometryType)y=Y.isNullOrUndefined(i)?t:Math.abs((t-d.min)*i),b=Y.isNullOrUndefined(i)?e:Math.abs((p.max-e)*i);else if("Geographic"===o.geometryType){switch(c){case"Mercator":var g=new J(u/2,u/2),y=g.x+t*(u/360),f=te(Math.sin(z(e)),-.9999,.9999),b=g.y+.5*Math.log((1+f)/(1-f))*-(u/(2*Math.PI));break;case"Winkel3":r=((l=H(m,h)).x+m/(Math.PI/2))/2,a=(l.y+h)/2;break;case"Miller":r=m,a=1.25*Math.log(Math.tan(Math.PI/4+.4*h));break;case"Eckert3":r=2/(S=Math.sqrt(Math.PI*(4+Math.PI)))*m*(1+Math.sqrt(1-4*h*h/(Math.PI*Math.PI))),a=4/S*h;break;case"AitOff":r=(l=H(m,h)).x,a=l.y;break;case"Eckert5":r=m*(1+Math.cos(h))/Math.sqrt(2+Math.PI),a=2*h/Math.sqrt(2+Math.PI);break;case"Equirectangular":r=m,a=h;break;case"Eckert6":for(var S=(1+Math.PI/2)*Math.sin(h),v=1/0,x=0;x<10&&1e-6<Math.abs(v);x++)h-=v=(h+Math.sin(h)-S)/(1+Math.cos(h));S=Math.sqrt(2+Math.PI),r=m*(1+Math.cos(h))/S,a=2*h/S}y="Mercator"===c?y:X(V(n,j(r)),3),b="Mercator"===c?b:-X(G(n,j(a)),3)}return new J(y,b)}function D(o,n,l,e){var a="";return!Y.isNullOrUndefined(e)&&1<e.length&&(Array.prototype.forEach.call(e,function(e,t){var i=e.latitude,e=e.longitude,i=o.isTileMap?R(new T(e,i),n,o.tileTranslatePoint,!0):A(i,e,n,l,o);a+=0===t?"M "+i.x+" "+i.y:" L "+i.x+" "+i.y}),a+=" z "),a}function R(e,t,i,o){var t=256*Math.pow(2,t),n=(e.x+180)/360,l=Math.sin(e.y*Math.PI/180),l=.5-Math.log((1+l)/(1-l))/(4*Math.PI),a=e.x,e=e.y;return o&&(a=n*t+.5+i.x,e=l*t+.5+i.y),{x:a,y:e}}function V(e,t){var i=e.baseMapBounds.longitude,e=Y.isNullOrUndefined(e.baseSize)?e.mapAreaRect.width:e.mapAreaRect.width+Math.abs(e.baseSize.width-e.mapAreaRect.width)/2;return Math.round(e*(t-i.min)/(i.max-i.min)*100)/100}function G(e,t){var i=e.baseMapBounds.latitude;return Math.round(e.mapAreaRect.height*(t-i.min)/(i.max-i.min)*100)/100}function H(e,t){var i=Math.cos(t),o=$(ee(i*Math.cos(e/=2)));return new J(2*i*Math.sin(e)*o,Math.sin(t)*o)}function X(e,t){t=Math.pow(10,t);return Math.round(e*t)/t}function $(e){return e/Math.sin(e)}function ee(e){return Math.acos(e)}function te(e,t,i){return Y.isNullOrUndefined(t)||(e=Math.max(e,t)),e=Y.isNullOrUndefined(i)?e:Math.min(e,i)}function ie(e,t,i,o){Y.createElement("a",{attrs:{download:e+"."+t.toLocaleLowerCase(),href:i}}).dispatchEvent(new MouseEvent(o?"click":"move",{view:window,bubbles:!1,cancelable:!0}))}function oe(e,t){this.x=e,this.y=t}function ne(e,t){this.latitude=e,this.longitude=t}var J=function(e,t){this.x=e,this.y=t},le=function(e,t){this.min=e,this.max=t},ae=function(e,t){this.latitude=new le(e.min,e.max),this.longitude=new le(t.min,t.max)};function q(e,t){var i=document.getElementById("mapsmeasuretext");return null===i&&((i=document.createElement("text")).id="mapsmeasuretext",document.body.appendChild(i)),i.innerText=e,i.style.cssText="position: absolute; font-size: "+("number"==typeof t.size?t.size+"px":t.size)+"; font-weight: "+t.fontWeight+"; font-style: "+t.fontStyle+"; font-family: "+t.fontFamily+"; visibility: hidden; top: -100; left: 0; whiteSpace: nowrap; lineHeight: normal",new W(i.clientWidth,i.clientHeight)}function re(e,t){var i=document.createElement("canvas").getContext("2d");i.font=t.fontStyle+" "+t.fontWeight+" "+("number"==typeof t.size?t.size+"px":t.size)+" "+t.fontFamily;i=i.measureText(e).width,e=parseFloat(t.size)||16;return new W(i,e)}var se,de=function(e,t,i,o,n,l,a){void 0===l&&(l=""),this.transform="",this.baseLine="auto",this.id=e,this.text=n,this.transform=l,this.anchor=o,this.x=t,this.y=i,this.baseLine=a},B=function(e,t,i,o,n,l,a,r){this.id=e,this["fill-opacity"]=n,this["stroke-opacity"]=l,this.fill=t,this.stroke=o,this["stroke-width"]=i,this["stroke-dasharray"]=a,this.d=r},pe=function(e,t,i){this.r=e,this.g=t,this.b=i},Q=(L(he,se=B),he);function he(e,t,i,o,n,l,a,r,s){e=se.call(this,e,t,i.width,i.color,o,i.opacity)||this;return e.y=n.y,e.x=n.x,e.height=n.height,e.width=n.width,e.rx=l||0,e.ry=a||0,e.transform=r||"",e["stroke-dasharray"]=s,e["fill-opacity"]=o,e["stroke-opacity"]=i.opacity,e}L(ue,me=B);var me,ce=ue;function ue(e,t,i,o,n,l,a,r){e=me.call(this,e,t,i.width,i.color,o,i.opacity,r)||this;return e.cy=l,e.cx=n,e.r=a,e["stroke-dasharray"]=r,e["fill-opacity"]=o,e["stroke-opacity"]=i.opacity,e}L(fe,ge=B);var ge,ye=fe;function fe(e,t,i,o,n,l,a,r){e=ge.call(this,e,i,o,n,l=void 0===l?1:l,a=void 0===a?1:a,r=void 0===r?"":r)||this;return e.points=t,e}L(ve,be=ye);var be,Se=ve;function ve(e,t,i,o,n,l,a,r){return be.call(this,e,t,i,o,n,l=void 0===l?1:l,a=void 0===a?1:a,r=void 0===r?"":r)||this}L(Ce,xe=B);var xe,L=Ce;function Ce(e,t,i,o,n,l,a,r){e=xe.call(this,e,i,o,n,l=void 0===l?1:l,a=void 0===a?1:a,r=void 0===r?"":r)||this;return e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e}function Oe(e,t,i,o){this.x1=e,this.y1=t,this.x2=i,this.y2=o}function _e(e,t,i,o,n,l,a,r,s){void 0===l&&(l="userSpaceOnUse"),void 0===a&&(a="userSpaceOnUse"),void 0===r&&(r=""),void 0===s&&(s=""),this.id=e,this.x=t,this.y=i,this.width=o,this.height=n,this.patternUnits=l,this.patternContentUnits=a,this.patternTransform=r,this.href=s}var T=function(e,t){this.x=e,this.y=t},K=function(e,t,i,o){this.x=e,this.y=t,this.width=i,this.height=o};function Me(e,t,i,o,n){void 0===n&&(n=!1);var l,i={id:e.id,x:e.x,y:e.y,fill:i,"font-size":t.size,"font-style":t.fontStyle,"font-family":t.fontFamily,"font-weight":t.fontWeight,"text-anchor":e.anchor,transform:e.transform,opacity:t.opacity,"dominant-baseline":e.baseLine},a="string"==typeof e.text||"number"==typeof e.text?e.text:n?e.text[e.text.length-1]:e.text[0],r=new k.SvgRenderer(""),s=r.createText(i,a);if(s.style["user-select"]="none",s.style["font-family"]=t.fontFamily,s.style["font-size"]=t.size,s.style["font-weight"]=t.fontWeight,s.style["font-color"]=t.color,s.style["-moz-user-select"]="none",s.style["-webkit-touch-callout"]="none",s.style["-webkit-user-select"]="none",s.style["-khtml-user-select"]="none",s.style["-ms-user-select"]="none",s.style["-o-user-select"]="none","string"!=typeof e.text&&1<e.text.length)for(var d=1,p=e.text.length;d<p;d++)l=q(e.text[d],t).height,l=r.createTSpan({x:e.x,id:e.id,y:e.y+(n?-d*l:d*l)},n?e.text[e.text.length-(d+1)]:e.text[d]),s.appendChild(l);return o.appendChild(s),s}function Le(e,t,i,o,n,l){for(var a=Y.createElement("div",{id:t,className:n.element.id+"_marker_template_element"}),r=(a.style.cssText="position: absolute;pointer-events: auto;",e.length);0<r;)a.appendChild(e[0]),r--;if(!n.isReact||"function"!==l){for(var s=a.innerHTML,d=Object.keys(i),p=RegExp,h=0;h<d.length;h++)"object"==typeof i[d[h]]?s=we(s,"",i,n):"latitude"!==d[h].toLowerCase()&&"longitude"!==d[h].toLowerCase()&&(s=s.replace(new p("{{:"+d[h]+"}}","g"),i[d[h].toString()]));a.innerHTML=s}return a}function Pe(e,t){t=t.format&&!isNaN(Number(e))?t.intl.getNumberFormat({format:t.format,useGrouping:t.useGroupingSeparator})(Number(e)):e;return t}function we(e,t,i,o){for(var n=""===e?t:e,l=""===e?n.split("${"):n.split("{{:"),a=RegExp,r=0;r<l.length;r++)if(-1<l[r].indexOf("}}")&&-1<l[r].indexOf(".")||-1<l[r].indexOf("}")&&-1<l[r].search("."))for(var s,d=""===e?l[r].split("}"):l[r].split("}}"),p=0;p<d.length;p++)-1<d[p].indexOf(".")&&(s=U(i,d[p]).toString(),n=""===e?n.split("${"+d[p]+"}").join(Pe(s,o)):n.replace(new a("{{:"+d[p]+"}}","g"),s));return n}function Te(e,t,i){for(var o=(Y.isNullOrUndefined(e.childElementCount)?e[0]:e).outerHTML,n=Object.keys(i),l=RegExp,a=0;a<n.length;a++)o=o.replace(new l("{{:"+n[a]+"}}","g"),i[n[a].toString()]);e=Y.createElement("div",{id:t,innerHTML:o});return e.style.position="absolute",e}function Ie(e,t,i,o,n,l,a){var r,s,d=n.size,p=n.borderColor,h=parseFloat(n.borderWidth),m=parseFloat(n.borderOpacity),c=n.fill,u=n.dashArray,g={color:p,width:h,opacity:m},n=n.opacity,h=new B(o,c,h,p,n,m,u,"");return d.width="string"==typeof d.width?parseInt(d.width,10):d.width,d.height="string"==typeof d.height?parseInt(d.height,10):d.height,"Circle"===e?(p=(d.width+d.height)/4,m=new ce(o,c,g,n,i.x,i.y,p,u),a.renderer.drawCircle(m)):"Rectangle"===e?(r=i.x-d.width/2,s=i.y-d.height/2,p=new Q(o,c,g,n,new K(r,s,d.width,d.height),null,null,"",u),a.renderer.drawRectangle(p)):"Image"===e?(r=i.x-d.width/2,s=i.y-(-1<o.indexOf("cluster")?d.height/2:d.height),Y.merge(h,{href:t,height:d.height,width:d.width,x:r,y:s}),a.renderer.drawImage(h)):Xe(a,e,h,d,i,l)}function U(e,t){if(!Y.isNullOrUndefined(e)&&!Y.isNullOrUndefined(t)){var i=t.replace(/\[/g,".").replace(/\]/g,"").split(".");if(1===i.length)e=e[i[0]];else for(var o=0;o<i.length&&!Y.isNullOrUndefined(e);o++)e=e[i[o]]}return e}function ke(e,t){var i=!Y.isNullOrUndefined(e.colorValuePath)&&-1<e.colorValuePath.indexOf(".")?U(t,e.colorValuePath).toString():t[e.colorValuePath];return e.fill=Y.isNullOrUndefined(e.colorValuePath)||Y.isNullOrUndefined(i)?e.fill:-1<e.colorValuePath.indexOf(".")?U(t,e.colorValuePath).toString():t[e.colorValuePath],e}function Ne(e,t){return Y.isNullOrUndefined(e.shapeValuePath)||Y.isNullOrUndefined(t[e.shapeValuePath])?(Ee(e,t),ze(e,t)):(Ee(e,t),"Image"===t[e.shapeValuePath]&&ze(e,t)),e}function Fe(e,t){return-1<e.indexOf(".")?U(t,e).toString():t[e]}function Ee(e,t){Y.isNullOrUndefined(e.shapeValuePath)||(t=Fe(e.shapeValuePath,t),e.shape=Y.isNullOrUndefined(t)||""===t.toString()?e.shape:t)}function ze(e,t){Y.isNullOrUndefined(e.imageUrlValuePath)||(t=Fe(e.imageUrlValuePath,t),e.imageUrl=Y.isNullOrUndefined(t)?e.imageUrl:t)}function Be(s,d,p,h,m,c,n,l,a,u,r){var g,y,f,b,S,v,x,C=[],O=[],_=0,M=0,L=s.markerSettings[m],P=0,w=[],T=!r&&s.markerClusterSettings.allowClustering?s.markerClusterSettings:L.clusterSettings,I=T.labelStyle,k=p.renderer.createGroup({id:p.element.id+"_LayerIndex_"+h+"_markerCluster"}),N={cancel:!1,name:Ro,fill:T.fill,height:T.height,width:T.width,imageUrl:T.imageUrl,shape:T.shape,data:void 0,maps:p,cluster:T,border:T.border},F=p.element.getBoundingClientRect(),E=(p.isTileMap?new Object:lt(p,s,!1),p.isTileMap||(x=p.mapLayerPanel.calculateFactor(s)),!1),z=p.isTileMap?p.tileZoomLevel:p.mapScaleValue,B=L.clusterSettings.allowClustering||s.markerClusterSettings.allowClustering&&1<s.markerSettings.length?d.querySelectorAll("[id*='LayerIndex_"+h+"_MarkerIndex_"+m+"']:not([id*='_Group'])"):d.childNodes;return p.trigger("markerClusterRendering",N,function(e){for(Array.prototype.forEach.call(B,function(e,i){var t,o,n,l,a,r;w=[],"hidden"!==e.style.visibility?(g=(v=e).getBoundingClientRect(),w.push(i),Y.isNullOrUndefined(g)||(t=0<p.markerModule.zoomedMarkerCluster.length&&p.markerModule.zoomedMarkerCluster[h]&&p.markerModule.zoomedMarkerCluster[h][i]&&0<p.markerModule.zoomedMarkerCluster[h][i].length||0<p.markerModule.initialMarkerCluster.length&&p.markerModule.initialMarkerCluster[h]&&p.markerModule.initialMarkerCluster[h][i]&&0<p.markerModule.initialMarkerCluster[h][i].length?(p.previousScale<z?p.markerModule.zoomedMarkerCluster:p.markerModule.initialMarkerCluster)[h][i]:null,Y.isNullOrUndefined(t)||0===t.length||L.clusterSettings.allowClustering?Array.prototype.forEach.call(B,function(e,t){i+1<=t&&"hidden"!==e.style.visibility&&Ue(e,g,C,w,t)}):Array.prototype.forEach.call(t,function(e){var t;i!==e&&(t=document.getElementById(p.element.id+"_LayerIndex_"+h+"_MarkerIndex_"+m+"_dataIndex_"+e))&&"hidden"!==t.style.visibility&&Ue(t,g,C,w,e)}),Ae(p,z,h,i,w),_=g.left+g.width/2,M=g.top+g.height,0<C.length&&(w=w.filter(function(e,t,i){return i.indexOf(e)===t}),_-=F.left,M-=p.availableSize.height<=F.height?F.top:F.bottom-F.top,t=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10),o=parseInt(e.id.split("_MarkerIndex_")[1].split("_")[0],10),l=(n=s.markerSettings[o]).dataSource[t],a=Y.isNullOrUndefined(n.longitudeValuePath)?Y.isNullOrUndefined(l.longitude)?Y.isNullOrUndefined(l.Longitude)?0:parseFloat(l.Longitude):parseFloat(l.longitude):Number(U(l,n.longitudeValuePath)),l=Y.isNullOrUndefined(n.latitudeValuePath)?Y.isNullOrUndefined(l.latitude)?Y.isNullOrUndefined(l.Latitude)?0:parseFloat(l.Latitude):parseFloat(l.latitude):Number(U(l,n.latitudeValuePath)),p.isTileMap?p.isTileMap&&(r=R(new J(a,l),p.tileZoomLevel,p.tileTranslatePoint,!0)):r=A(l,a,x,s,p),e.style.visibility="hidden",N.cancel?(S={size:new W(T.width,T.height),fill:T.fill,borderColor:T.border.color,borderWidth:T.border.width,opacity:T.opacity,dashArray:T.dashArray,imageUrl:T.imageUrl,shape:T.shape}).borderOpacity=(Y.isNullOrUndefined(T.border.opacity)?T:T.border).opacity:(S={size:new W(N.width,N.height),fill:N.fill,borderColor:N.border.color,borderWidth:N.border.width,opacity:T.opacity,dashArray:T.dashArray,imageUrl:N.imageUrl,shape:N.shape}).borderOpacity=(Y.isNullOrUndefined(N.border.opacity)?T:N.border).opacity,_=p.isTileMap||-1<d.id.indexOf("_Markers_Group")?_:_+3.75-N.width/2,M=p.isTileMap||-1<d.id.indexOf("_Markers_Group")?M:M-N.height/2,M=p.isTileMap?(_=r.x,r.y):(_=(r.x+(Y.isNullOrUndefined(p.translatePoint)||0===p.translatePoint.x||p.isResize?u.location:p.translatePoint).x)*(Y.isNullOrUndefined(p.scale)?u:p).scale+n.offset.x,(r.y+(Y.isNullOrUndefined(p.translatePoint)||0===p.translatePoint.y||p.isResize?u.location:p.translatePoint).y)*(Y.isNullOrUndefined(p.scale)?u:p).scale+n.offset.y),l=p.element.id+"_LayerIndex_"+h+"_MarkerIndex_"+o+"_dataIndex_"+t+"_cluster_"+P,a=p.element.id+"_LayerIndex_"+h+"_MarkerIndex_"+o+"_dataIndex_"+t+"_cluster_"+P+"_datalabel_"+P,P++,(e=Ie(S.shape,S.imageUrl,{x:0,y:0},l,S,c,p)).setAttribute("transform","translate( "+_+" "+M+" )"),"Balloon"===N.shape?e.children[0].textContent=w.toString():e.textContent=w.toString(),f=new de(a,0,3.75,"middle",(C.length+1).toString(),"",""),(f=Me(f,I,I.color,c)).setAttribute("transform","translate( "+_+" "+M+" )"),r=parseFloat(e.id.split("_MarkerIndex_")[1]),n.clusterSettings.allowClustering&&r===o||s.markerClusterSettings.allowClustering&&1<s.markerSettings.length&&r===o?(k.appendChild(e),k.appendChild(f)):(k.appendChild(f),k.appendChild(e)))),C=[]):Ae(p,z,h,i,w),E=!0}),n.appendChild(k),p.svgObject.appendChild(n),p.element.appendChild(p.svgObject),T.allowDeepClustering&&!r&&Array.prototype.forEach.call(k.childNodes,function(e,t){if("hidden"!==e.style.visibility&&(g=(v=e).getBoundingClientRect(),!(Y.isNullOrUndefined(g)||-1<v.id.indexOf("_datalabel_")))){for(var i=t+1;i<k.childElementCount;i++)"hidden"!==k.childNodes[i].style.visibility&&(b=k.childNodes[i],y=b.getBoundingClientRect(),Y.isNullOrUndefined(y)||-1<b.id.indexOf("_datalabel_")||g.left>y.right||g.right<y.left||g.top>y.bottom||g.bottom<y.top||(O.push(b),O.push(k.childNodes[i-1]),k.childNodes[i].style.visibility="hidden",n=Y.isNullOrUndefined(k.childNodes[i+1])?null:parseFloat(k.childNodes[i+1].id.split("_MarkerIndex_")[1]),L.clusterSettings.allowClustering&&n===m||s.markerClusterSettings.allowClustering&&1<s.markerSettings.length&&n===m?k.childNodes[i+1].style.visibility="hidden":(n=parseFloat(k.childNodes[i-1].id.split("_MarkerIndex_")[1]),k.childNodes[i-1].style.visibility=n===m?"hidden":k.childNodes[i-1].style.visibility),w.push(i)));if(0<O.length){v=e;for(var o=0;o<O.length;o++){"g"===v.tagName?v.childNodes[0].textContent=v.childNodes[0].textContent+","+O[o].textContent:v.textContent=v.textContent+","+O[o].textContent;var n=parseFloat(k.childNodes[t+1].id.split("_MarkerIndex_")[1]);L.clusterSettings.allowClustering&&n===m||s.markerClusterSettings.allowClustering&&1<s.markerSettings.length&&n===m?k.childNodes[t+1].textContent=(+k.childNodes[t+1].textContent+ +O[o+1].textContent).toString():(n=parseFloat(k.childNodes[t-1].id.split("_MarkerIndex_")[1]),k.childNodes[t-1].textContent=n===m?(+k.childNodes[t-1].textContent+ +O[o+1].textContent).toString():k.childNodes[t-1].textContent),o++}}O=[]}});0<k.childNodes.length;){var t=parseFloat(k.childNodes[0].id.split("_MarkerIndex_")[1]);L.clusterSettings.allowClustering&&t===m||s.markerClusterSettings.allowClustering&&1<s.markerSettings.length&&t===m?c.insertBefore(k.childNodes[0],null):t===m&&c.insertBefore(k.childNodes[0],c.firstChild)}l||Z(p.element.id+"_Secondary_Element").appendChild(c);var i=document.getElementById(p.element.id+"_LayerIndex_"+h+"_Polygon_Group"),o=document.getElementById(p.element.id+"_LayerIndex_"+h+"_Polygons_Group"),i=(Y.isNullOrUndefined(i)&&!p.isTileMap?n.insertBefore(c,n.firstChild):p.isTileMap?Y.isNullOrUndefined(o)?Y.isNullOrUndefined(i)?n.insertBefore(c,n.firstChild):i.insertAdjacentElement("afterend",c):o.insertAdjacentElement("afterend",c):n.appendChild(c),document.getElementById(p.element.id+"_LayerIndex_"+h+"_markerCluster"));Y.isNullOrUndefined(i)||i.remove(),a&&(o=document.getElementById(p.element.id+"_Layer_Collections"),i=document.getElementById(p.element.id+"_LayerIndex_"+(h+1)),Y.isNullOrUndefined(o)||Y.isNullOrUndefined(i)?Y.isNullOrUndefined(o)||o.appendChild(n):o.insertBefore(n,i))}),E}function Ae(e,t,i,o,n){var l;1===t?(l=!Y.isNullOrUndefined(e.markerModule.initialMarkerCluster[i][o])&&1<n.length?n:[],e.markerModule.initialMarkerCluster[i][o]=l,l=!Y.isNullOrUndefined(e.markerModule.zoomedMarkerCluster[i][o])&&1<n.length?n:[],e.markerModule.zoomedMarkerCluster[i][o]=l):1<t&&(e.markerModule.zoomedMarkerCluster[i][o]=1<n.length?n:[])}function Ue(e,t,i,o,n){var l=e.getBoundingClientRect();Y.isNullOrUndefined(l)||t.left>l.right||t.right<l.left||t.top>l.bottom||t.bottom<l.top||(i.push(l),e.style.visibility="hidden",o.push(n))}function Ze(e,t){for(var i,o=e[0].layerIndex,n=e[0].targetClusterIndex,l=e[0].markerIndex,a=e[0].dataIndex,r=t.element.id+"_LayerIndex_"+o+"_MarkerIndex_"+l,a=r+"_dataIndex_"+a+"_cluster_"+n,s="Balloon"===t.layers[o].markerClusterSettings.shape?E(a+"_Group"):E(a),a=E(a+"_datalabel_"+n),d=(s.setAttribute("visibility","visible"),a.setAttribute("visibility","visible"),e[0].data.length),p=0;p<d;p++)(i=E(r+"_dataIndex_"+e[0].data[p].index+"_Group")?E(r+"_dataIndex_"+e[0].data[p].index+"_Group"):E(r+"_dataIndex_"+e[0].data[p].index)).style.visibility="hidden",-1<i.id.indexOf("Group")&&(E(r+"_dataIndex_"+e[0].data[p].index).style.visibility="hidden");I(t.element.id+"_LayerIndex_"+o+"_MarkerIndex_"+l+"_markerClusterConnectorLine")}function je(e,t,i,o){for(var n=e[0].layerIndex,l=e[0].markerIndex,a=e[0].targetClusterIndex,r=e[0].dataIndex,s=o?E:i.querySelector.bind(i),d=o?"":"#",p=t.element.id+"_LayerIndex_"+n+"_MarkerIndex_"+l,h=t.layers[n],m=!t.markerModule.allowInnerClusterSetting(h)&&h.markerClusterSettings.allowClustering?h.markerClusterSettings:h.markerSettings[l].clusterSettings,h=h.markerSettings[l],c=p+"_dataIndex_"+r+"_cluster_"+a,u="Balloon"===m.shape?s(d+c+"_Group"):s(d+c),c=s(d+c+"_datalabel_"+a),g=(u.setAttribute("visibility","hidden"),c.setAttribute("visibility","hidden"),s(d+p+"_dataIndex_"+r+"_Group")?s(d+p+"_dataIndex_"+r+"_Group"):s(d+p+"_dataIndex_"+r)),y=(-1<g.parentElement.id.indexOf("Template_Group")?g.getBoundingClientRect():h).height,f=(-1<g.parentElement.id.indexOf("Template_Group")?g.getBoundingClientRect():h).width,b=+u.getAttribute("transform").split("translate(")[1].trim().split(" ")[0],S=+u.getAttribute("transform").split("translate(")[1].trim().split(" ")[1].split(")")[0].trim(),v=(f="string"==typeof f?parseFloat(f):f)+5,x=6.28*v,C=0,O=Math.round(x/f),_=(C+=O,e[0].data.length),M=Math.round(y/x*100),L=(_<O?100/_:M)/100*360,P=_<O?45:0,w=1,T="M "+b+" "+S+" ",I="",k=0;k<_;k++){if(C===k||360<=Math.round(P)){for(P=0,x=6.28*(v=(f+5)*++w),O=Math.round(x/y),M=Math.round(y/x*100);M*O<100;)O++;L=M/100*360,C+=O}var N=b+v*Math.sin(2*Math.PI*P/360),F=S+v*Math.cos(2*Math.PI*P/360);I+=T+"L "+N+" "+F+" ",-1<(g=s(d+p+"_dataIndex_"+e[0].data[k].index+"_Group")?s(d+p+"_dataIndex_"+e[0].data[k].index+"_Group"):s(d+p+"_dataIndex_"+e[0].data[k].index)).parentElement.id.indexOf("Template_Group")&&(g.style.transform="",g.style.left=t.isTileMap?N-f/2+"px":N-f/2-10+"px",g.style.top=t.isTileMap?F-y/2+"px":F-y/2-10+"px"),g.setAttribute("transform","translate( "+N+" "+F+")"),g.style.visibility="visible",-1<g.id.indexOf("Group")&&(s(d+p+"_dataIndex_"+e[0].data[k].index).style.visibility="visible"),P+=L}a=m.connectorLineSettings,c={d:I,id:t.element.id+"_LayerIndex_"+n+"_MarkerIndex_"+l+"_dataIndex_"+r+"_markerClusterConnectorLine",stroke:a.color,"fill-opacity":a.opacity,"stroke-opacity":a.opacity,"stroke-width":a.width};i=o?s(t.element.id+"_Markers_Group"):i;i=s(t.element.id+"_LayerIndex_"+n).querySelector("#"+i.id);u=t.renderer.createGroup({id:t.element.id+"_LayerIndex_"+n+"_MarkerIndex_"+l+"_markerClusterConnectorLine"});u.appendChild(t.renderer.drawPath(c)),"Balloon"===h.shape?i.insertBefore(u,i.querySelector("#"+p+"_dataIndex_0_Group")):i.insertBefore(u,i.querySelector("#"+p+"_dataIndex_0"))}function De(e,t,i,o,n,l,a,r,s,d,p){var h={size:new W(e.width,e.height),fill:e.fill,borderColor:e.border.color,borderWidth:e.border.width,opacity:t.opacity,dashArray:t.dashArray,borderOpacity:(Y.isNullOrUndefined(e.border.opacity)?t:e.border).opacity},e=(I(a),Ie(e.shape,e.imageUrl,{x:0,y:0},a,h,p,d)),a=(d.isTileMap?n.x:(n.x+l.x)*s)+(Y.isNullOrUndefined(r)||Y.isNullOrUndefined(r.x)?0:r.x),h=(d.isTileMap?n.y:(n.y+l.y)*s)+(Y.isNullOrUndefined(r)||Y.isNullOrUndefined(r.y)?0:r.y),l=(e.setAttribute("transform","translate( "+a+" "+h+" )"),Ve(d.selectedMarkerElementId,d.markerSelectionClass,e,"MarkerselectionMapStyle"),d.legendSettings.toggleLegendSettings.enable&&"Markers"===d.legendSettings.type&&(n=parseInt(e.id.split("_LayerIndex_")[1],10),Ge(d.toggledElementId,"g"===e.tagName?e.children[0]:e,d.legendSettings.toggleLegendSettings.applyShapeSettings?d.layers[n].shapeSettings:d.legendSettings.toggleLegendSettings)),p.appendChild(e),i.length-1===o?"marker":null),s=new J(a,h);return(0<t.animationDuration||"Enable"===Y.animationMode)&&bt(e,t.animationDelay,t.animationDuration,s,d,l),p}function Re(e,t,i,o,n,l,a,r,s,d,p){if((t=pt(e.template,p))&&t(o,p,e.template,p.element.id+"_MarkerTemplate"+n,!1).length){for(var h=Le(t(o,p,e.template,p.element.id+"_MarkerTemplate"+n,!1),i,o,0,p,typeof e.template),m=0;m<h.children.length;m++)h.children[m].style.pointerEvents="auto";h.style.left=(p.isTileMap?a.x:(a.x+r.x)*s)+d.x-(p.isTileMap?0:p.mapAreaRect.x)+"px",h.style.top=(p.isTileMap?a.y:(a.y+r.y)*s)+d.y-(p.isTileMap?0:p.mapAreaRect.y)+"px",h.style.transform="translate(-50%, -50%)",l.appendChild(h)}return l}function Ve(e,t,i,o){if(e)for(var n=0;n<e.length;n++)i.getAttribute("id")===e[n]&&(0!==n&&"g"!==i.tagName||(Y.isNullOrUndefined(t)||Y.isNullOrUndefined(t.id)||document.body.appendChild(t),-1<i.id.indexOf("_MarkerIndex_")&&0<i.childElementCount&&i.children[0].setAttribute("class",o)),i.setAttribute("class",o))}function Ge(e,t,i){if(!Y.isNullOrUndefined(e)&&0<e.length)for(var o=0;o<e.length;o++)e[o]===t.id&&(t.setAttribute("fill",i.fill),t.setAttribute("stroke",i.border.color),t.setAttribute("fill-opacity",i.opacity.toString()),t.setAttribute("stroke-opacity",(Y.isNullOrUndefined(i.border.opacity)?i:i.border).opacity.toString()),t.setAttribute("stroke-width",(Y.isNullOrUndefined(i.border.width)?0:i.border.width).toString()))}function He(e,t,i,o,n,l,a){E(e)||((e=Y.createElement("style",{id:e})).innerText="."+t+"{fill:"+i+";opacity:"+o+";stroke-width:"+l+";stroke:"+n+";}",a.shapeSelectionClass=e,document.body.appendChild(e))}function s(e,t){return t&&t.appendChild(e),e}function We(e,t,i){return s(e.renderer.drawCircle(t),i)}function qe(e,t,i){return s(e.renderer.drawRectangle(t),i)}function Xe(e,t,i,o,n,l){var a;switch(t){case"Balloon":a=Ye(e,i,o,n,"Marker",l);break;case"Cross":i.d="M "+n.x+" "+(n.y-o.height/2)+" L "+n.x+" "+(n.y+o.height/2)+" M "+(n.x-o.width/2)+" "+n.y+" L "+(n.x+o.width/2)+" "+n.y;break;case"Diamond":i.d="M "+n.x+" "+(n.y-o.height/2)+" L "+(n.x+o.width/2)+" "+n.y+" L "+n.x+" "+(n.y+o.height/2)+" L "+(n.x-o.width/2)+" "+n.y+" Z";break;case"Star":i.d="M "+(n.x+o.width/3)+" "+(n.y+o.height/2)+" L "+(n.x-o.width/2)+" "+(n.y-o.height/6)+" L "+(n.x+o.width/2)+" "+(n.y-o.height/6)+" L "+(n.x-o.width/3)+" "+(n.y+o.height/2)+" L "+n.x+" "+(n.y-o.height/2)+" L "+(n.x+o.width/3)+" "+(n.y+o.height/2)+" Z";break;case"Triangle":i.d="M "+n.x+" "+(n.y-o.height/2)+" L "+(n.x+o.width/2)+" "+(n.y+o.height/2)+" L "+(n.x-o.width/2)+" "+(n.y+o.height/2)+" Z";break;case"HorizontalLine":i.d=" M "+(n.x-o.width/2)+" "+n.y+" L "+(n.x+o.width/2)+" "+n.y;break;case"VerticalLine":i.d="M "+n.x+" "+(n.y-o.height/2)+" L "+n.x+" "+(n.y+o.height/2);break;case"InvertedTriangle":i.d="M "+(n.x-o.width/2)+" "+(n.y-o.height/2)+" L "+(n.x+o.width/2)+" "+(n.y-o.height/2)+" L "+n.x+" "+(n.y+o.height/2)+" Z";break;case"Pentagon":for(var r,s,d=0;d<5;d++)r=o.width/2*Math.cos(Math.PI/180*(72*d)),s=o.height/2*Math.sin(Math.PI/180*(72*d)),i.d+=(0===d?"M ":"L ")+(n.x+r)+" "+(n.y+s);i.d+=" Z"}return"Cross"!==t&&"HorizontalLine"!==t&&"VerticalLine"!==t||(i.stroke="transparent"===i.stroke?i.fill:i.stroke),"Balloon"===t?a:e.renderer.drawPath(i)}function Ye(e,t,i,o,n,l){var a=i.width,r=i.height,a=(o.x-=a/2,o.y-=-1<t.id.indexOf("cluster")?r/2:-1<t.id.indexOf("Legend")?r/1.25:r,t.d="M15,0C8.8,0,3.8,5,3.8,11.2C3.8,17.5,9.4,24.4,15,30c5.6-5.6,11.2-12.5,11.2-18.8C26.2,5,21.2,0,15,0z M15,16c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S17.8,16,15,16z",e.renderer.drawPath(t)),r=i.width/30,i=i.height/30;return a.setAttribute("transform","translate("+o.x+", "+o.y+") scale("+r+", "+i+")"),"Marker"===n?(s(a,o=e.renderer.createGroup({id:t.id+"_Group"})),s(o,l)):a}function Je(e,t,i,o,n){if(!Y.isNullOrUndefined(t)&&!Y.isNullOrUndefined(e)&&!Y.isNullOrUndefined(i))for(var l=0;l<e.length;l++){var a=-1<i.indexOf(".")?U(e[l],i):e[l][i],r=Qe(a,o,t);if((!Y.isNullOrUndefined(a)&&isNaN(t[r])&&"string"==typeof a?a.toLowerCase():a)===(!Y.isNullOrUndefined(t[r])&&isNaN(t[r])?t[r].toLowerCase():t[r]))return l}return null}function Qe(e,t,i){if(!Y.isNullOrUndefined(e)&&!Y.isNullOrUndefined(i)&&!Y.isNullOrUndefined(t))for(var o="[object Array]"===Object.prototype.toString.call(t)?t:[t],n=0;n<o.length;n++)if((Y.isNullOrUndefined(e)||"string"!=typeof e?e:e.toLowerCase())===(!Y.isNullOrUndefined(i[o[n]])&&isNaN(i[o[n]])?i[o[n]].toLowerCase():i[o[n]]))return o[n];return null}function Ke(e,t,i){for(var o=[],n=0;n<e.length;n++){var l=e[n];t<=l.y&&i>=l.y&&o.push(l)}return o}function $e(e,t,i,o,n){return n===o?(t-e)/100+e:(t-e)/100*(100/(n-o)*(i-o))+e}function et(e,t,i){if(!e.length)return null;for(var o,n,l,a,r=e.length,s=0,d=0,p=0,h=0;h<=r-1;h++)o=e[h].x,n="Mercator"===t||"Normal"===i?e[h].y:-e[h].y,a=h===r-1?(l=e[0].x,"Mercator"===t||"Normal"===i?e[0].y:-e[0].y):(l=e[h+1].x,"Mercator"===t||"Normal"===i?e[h+1].y:-e[h+1].y),s+=Math.abs(o*a-l*n),d+=Math.abs((o+l)*(o*a-l*n)),p+=Math.abs((n+a)*(o*a-l*n));s*=.5;for(var m=e.some(function(e){return e.x<5&&e.y<5})&&"Normal"===i?6:4,d=0!==s?1/(m*s)*d:0,p=0!==s?1/(m*s)*p:0,c={x:0,y:0},u={x:0,y:0},g={x:0,y:0},y={x:0,y:0},f={x:0,y:0},b={x:0,y:0},S={x:0,y:0},v={x:0,y:0},x=0,h=0;h<=r-1;h++){var C=e[h];C.y="Mercator"===t||"Normal"===i?C.y:-C.y,C.y>p?C.x<d&&d-C.x<d-f.x?f={x:C.x,y:C.y}:C.x>d&&(0===b.x||C.x-d<b.x-d)&&(b={x:C.x,y:C.y}):C.x<d&&d-C.x<d-S.x?S={x:C.x,y:C.y}:C.x>d&&(0===v.x||C.x-d<v.x-d)&&(v={x:C.x,y:C.y}),x=b.y-v.y+(b.y-v.y)/4,C.x>d?C.y<p&&p-C.y<p-c.y?c={x:C.x,y:C.y}:C.y>p&&(0===u.y||C.y-p<u.y-p)&&(u={x:C.x,y:C.y}):C.y<p&&p-C.y<p-g.y?g={x:C.x,y:C.y}:C.y>p&&(0===y.y||C.y-p<y.y-p)&&(y={x:C.x,y:C.y})}return{x:d,y:p,rightMin:c,rightMax:u,leftMin:g,leftMax:y,points:e,topMax:v,topMin:S,bottomMax:b,bottomMin:f,height:x}}function tt(e){var t=!1;return"[object Array]"===Object.prototype.toString.call(e)&&Array.prototype.forEach.call(e,function(e){Y.isNullOrUndefined(e.geometry)||"Path"!==e.geometry.type||(t=!0)}),t}function it(e,t,i,o,n,l){var a=t;if(e<(o=Y.isNullOrUndefined(o)?(n?re:q)(t,i).width:o))for(var r=t.length-1;0<=r;--r)if((o=(n?re:q)(a=t.substring(0,r)+"...",i).width)<=e||a.length<4)return a.length<4&&(a=" "),Y.isNullOrUndefined(l)||l.push(o),a;return Y.isNullOrUndefined(l)||l.push(o),a}function ot(e,t,i,o){var n;switch(t){case"Near":n=e.x;break;case"Center":n="title"===o?e.width/2-i.width/2:e.x+e.width/2-i.width/2;break;case"Far":n="title"===o?e.width-e.y-i.width:e.x+e.width-i.width}t="title"===o?e.y+i.height/2:e.y+e.height/2+i.height/2;return new J(n,t)}function I(e){e=document.getElementById(e);return e?Y.remove(e):null}function nt(e,t){var i=A(e.minLatOfGivenLocation,e.minLongOfGivenLocation,e.mapLayerPanel.calculateFactor(t),t,e),t=A(e.maxLatOfGivenLocation,e.maxLongOfGivenLocation,e.mapLayerPanel.calculateFactor(t),t,e),e=(i.x+t.x)/2,i=(i.y+t.y)/2;return new J(e,i)}function lt(e,t,i){var o,n,l,a,r=e.zoomSettings.zoomFactor,s=e.centerPosition,d=s.latitude,p=s.longitude,h=!Y.isNullOrUndefined(e.centerLatOfGivenLocation)&&!Y.isNullOrUndefined(e.centerLongOfGivenLocation)&&e.zoomNotApplied,m=(Y.isNullOrUndefined(e.mapScaleValue)&&(e.mapScaleValue=r),e.zoomSettings.shouldZoomInitially&&e.zoomSettings.enable&&(e.mapScaleValue=n=r=(e.zoomSettings.shouldZoomInitially||e.enablePersistence)&&1===e.scale?e.scale:Y.isNullOrUndefined(e.markerZoomFactor)?1:e.markerZoomedState?e.markerZoomFactor:parseInt(e.scale.toString()),e.markerZoomedState&&e.mapScaleValue!==e.markerZoomFactor&&!e.enablePersistence&&(e.mapScaleValue=r=e.markerZoomFactor),!e.markerZoomedState||Y.isNullOrUndefined(e.markerCenterLatitude)||Y.isNullOrUndefined(e.markerCenterLongitude)||(d=e.markerCenterLatitude,p=e.markerCenterLongitude)),h&&(e.mapScaleValue=n=r=e.scaleOfGivenLocation),Y.isNullOrUndefined(e.baseMapRectBounds)?null:e.baseMapRectBounds.min),c=Y.isNullOrUndefined(e.baseMapRectBounds)?null:e.baseMapRectBounds.max,u=i?1:e.mapScaleValue,g=(Y.isNullOrUndefined(e.currentShapeDataLength)&&!Y.isNullOrUndefined(t.shapeData)&&(e.currentShapeDataLength=Y.isNullOrUndefined(t.shapeData.features)?Y.isNullOrUndefined(t.shapeData.geometries)?0:t.shapeData.geometries.length:t.shapeData.features.length),e.totalRect&&e.legendSettings.visible?e.totalRect:e.mapAreaRect),y=e.availableSize;return Y.isNullOrUndefined(m)||Y.isNullOrUndefined(c)||(o=Math.abs(c.x-m.x),c=Math.abs(m.y-c.y),i=i?1:1===e.markerZoomFactor?e.mapScaleValue:r,s=e.zoomSettings.shouldZoomInitially&&e.markerZoomedState&&!e.zoomPersistence?e.markerZoomCenterPoint:e.centerPosition,!Y.isNullOrUndefined(p)&&0!==p&&!Y.isNullOrUndefined(d)&&0!==d||h?(r=((o+Math.abs(e.mapAreaRect.width-o))/2+e.mapAreaRect.x)/i,s=((c+Math.abs(e.mapAreaRect.height-c))/2+e.mapAreaRect.y)/i,i=h?nt(e,t):A(d,p,e.mapLayerPanel.calculateFactor(t),t,e),n=Y.isNullOrUndefined(e.previousProjection)||e.previousProjection!==e.projectionType||e.isMarkerZoomCompleted?(l=-i.x+r,a=-i.y+s,u):(1!==Math.floor(e.scale)&&e.zoomSettings.shouldZoomInitially||e.zoomNotApplied?(l=-i.x+r,a=-i.y+s):e.zoomSettings.shouldZoomInitially||e.zoomNotApplied?(l=-i.x+r,a=-i.y+s,n=u):(l=e.zoomTranslatePoint.x,a=e.zoomTranslatePoint.y),e.mapScaleValue)):Y.isNullOrUndefined(e.previousProjection)||e.previousProjection!==e.projectionType?(0!==c&&0!==o&&c!==o||(o=g.width/2,c=g.height),n=parseFloat(Math.min(g.width/o,g.height/c).toFixed(2)),h=0!==m.x&&"layers"===e.translateType?y.width-g.width:0,l=g.x+(-m.x+(g.width/2-(o*=n=1.05<n?1:n)/2))-h,a=g.y+(-m.y+(g.height/2-(c*=n)/2)),e.previousTranslate=new J(l,a)):e.zoomSettings.shouldZoomInitially||1!==e.markerZoomFactor||1!==e.mapScaleValue?(n=e.mapScaleValue<1?e.mapScaleValue+1:e.mapScaleValue,e.mapScaleValue=e.zoomSettings.enable&&1!==e.mapScaleValue?e.mapScaleValue:1,e.currentShapeDataLength!==(Y.isNullOrUndefined(t.shapeData.features)?t.shapeData.geometries:t.shapeData.features).length&&"SubLayer"!==t.type?(d=parseFloat(Math.min(g.height/c,g.width/o).toFixed(2)),a=g.y+(-m.y+(g.height/2-(c*=d)/2)),l=g.x+(-m.x+(g.width/2-(o*=n=d)/2))):e.availableSize.height===e.heightBeforeRefresh&&e.widthBeforeRefresh===e.availableSize.width||Y.isNullOrUndefined(e.translatePoint)||Y.isNullOrUndefined(e.previousTranslate)?Y.isNullOrUndefined(e.previousProjection)||!(1===e.mapScaleValue||e.mapScaleValue<=1.05)||e.zoomModule.isDragZoom?(l=e.zoomTranslatePoint.x,a=e.zoomTranslatePoint.y,n=e.scale):(n=parseFloat(Math.min(g.width/o,g.height/c).toFixed(2)),l=g.x+(-m.x+(g.width/2-(o*=n=1.05<n?1:n)/2)),a=g.y+(-m.y+(g.height/2-(c*=n)/2))):(p=parseFloat(Math.min(g.width/o,g.height/c).toFixed(2)),r=o,i=c,s=g.x+(-m.x+(g.width/2-(r*=p)/2)),u=g.y+(-m.y+(g.height/2-(i*=p)/2)),y=(e.translatePoint.x-e.previousTranslate.x)/e.widthBeforeRefresh,h=(e.translatePoint.y-e.previousTranslate.y)/e.heightBeforeRefresh,l=s+y*e.availableSize.width,a=u+h*e.availableSize.height,e.previousTranslate=new J(s,u),e.zoomTranslatePoint.x=l,e.zoomTranslatePoint.y=a)):(n=parseFloat(Math.min(g.width/o,g.height/c).toFixed(2)),a=g.y+(-m.y+(g.height/2-(c*=n)/2)),l=g.x+(-m.x+(g.width/2-(o*=n)/2))),Y.isNullOrUndefined(e.translatePoint))||(l=e.enablePersistence&&0!==e.translatePoint.x&&!e.zoomNotApplied?e.translatePoint.x:l,a=e.enablePersistence&&0!==e.translatePoint.y&&!e.zoomNotApplied?e.translatePoint.y:a),n=e.enablePersistence?1<=e.mapScaleValue?e.mapScaleValue:1:n,e.widthBeforeRefresh=e.availableSize.width,e.heightBeforeRefresh=e.availableSize.height,{scale:n,location:new J(l,a)}}function at(e,t,i){var o,n,l=e.zoomSettings.zoomFactor,a=e.centerPosition,r=a.latitude,a=a.longitude,s=!Y.isNullOrUndefined(e.centerLongOfGivenLocation)&&!Y.isNullOrUndefined(e.centerLatOfGivenLocation)&&e.zoomNotApplied,d=(Y.isNullOrUndefined(e.previousCenterLatitude)&&Y.isNullOrUndefined(e.previousCenterLongitude)?(e.previousCenterLatitude=e.centerPosition.latitude,e.previousCenterLongitude=e.centerPosition.longitude):e.previousCenterLatitude!==e.centerPosition.latitude&&e.previousCenterLongitude!==e.centerPosition.longitude?(e.centerPositionChanged=!0,e.previousCenterLatitude=e.centerPosition.latitude,e.previousCenterLongitude=e.centerPosition.longitude):e.centerPositionChanged=!1,(Y.isNullOrUndefined(e.mapScaleValue)||l>e.mapScaleValue)&&(e.isReset&&1===e.mapScaleValue?e.mapScaleValue=e.mapScaleValue:!Y.isNullOrUndefined(e.mapScaleValue)&&e.mapScaleValue<=e.scale?e.mapScaleValue=e.scale:e.mapScaleValue=l),e.mapScaleValue=1!==e.zoomSettings.zoomFactor&&e.zoomSettings.zoomFactor===e.mapScaleValue||e.zoomSettings.zoomFactor===e.mapScaleValue||e.centerPositionChanged?e.zoomSettings.zoomFactor:e.mapScaleValue,e.zoomSettings.shouldZoomInitially&&!e.isZoomByPosition&&(e.mapScaleValue=l=b=(e.enablePersistence||e.zoomSettings.shouldZoomInitially)&&1===e.scale?e.scale:Y.isNullOrUndefined(e.markerZoomFactor)?e.mapScaleValue:e.markerZoomFactor,l=e.mapScaleValue,Y.isNullOrUndefined(e.markerCenterLatitude)||Y.isNullOrUndefined(e.markerCenterLongitude)||(r=e.markerCenterLatitude,a=e.markerCenterLongitude)),s&&(e.mapScaleValue=b=l=e.scaleOfGivenLocation),i?1:e.mapScaleValue),p=e.mapAreaRect,h=e.baseMapRectBounds.min,m=e.baseMapRectBounds.max,c=i?1:e.mapScaleValue,u=Math.abs(m.x-h.x),m=Math.abs(h.y-m.y);if(!Y.isNullOrUndefined(a)&&0!==a&&!Y.isNullOrUndefined(r)&&0!==r||s){var g=(m+Math.abs(e.mapAreaRect.height-m))/2/c,y=(u+Math.abs(e.mapAreaRect.width-u))/2/c,c=s?nt(e,t):A(r,a,e.mapLayerPanel.calculateFactor(t),t,e);Y.isNullOrUndefined(e.zoomTranslatePoint)&&Y.isNullOrUndefined(e.previousProjection)||e.zoomNotApplied?(o=-c.x+y+e.mapAreaRect.x/d,n=-c.y+g+e.mapAreaRect.y/d):e.previousProjection!==e.projectionType?(o=-c.x+y,n=-c.y+g):(e.isZoomByPosition&&(e.zoomTranslatePoint.x=-c.x+y,e.zoomTranslatePoint.y=-c.y+g),o=e.zoomTranslatePoint.x,n=e.zoomTranslatePoint.y,l=d),Y.isNullOrUndefined(e.translatePoint)||(n=e.enablePersistence&&0!==e.translatePoint.y&&!e.zoomNotApplied?e.translatePoint.y:n,o=e.enablePersistence&&0!==e.translatePoint.x&&!e.zoomNotApplied?e.translatePoint.x:o),b=0!==l?l:1}else{var s=0===e.zoomSettings.zoomFactor?1:e.zoomSettings.zoomFactor,f=e.zoomSettings.maxZoom,b=s=f<s?f:s,r=0===e.mapScaleValue?1:e.mapScaleValue>f?f:e.mapScaleValue,y=p.x+(-h.x+(p.width/2-u/2)),g=p.y+(-h.y+(p.height/2-m/2));if(!Y.isNullOrUndefined(e.zoomTranslatePoint)||!Y.isNullOrUndefined(e.previousProjection))if(e.previousProjection!==e.projectionType){var S=[];S.push({x:y,y:g});for(var v=1;v<f;v++){var x=S[v-1].x-(p.width/v-p.width/(v+1))/2,C=S[v-1].y-(p.height/v-p.height/(v+1))/2;S.push({x:x,y:C})}y=S[s-1].x,g=S[s-1].y}else y=e.zoomTranslatePoint.x,g=e.zoomTranslatePoint.y,s!==r&&(b=r);Y.isNullOrUndefined(e.translatePoint)||(o=e.enablePersistence&&0!==e.translatePoint.x&&!e.zoomNotApplied?e.translatePoint.x:y,n=e.enablePersistence&&0!==e.translatePoint.y&&!e.zoomNotApplied?e.translatePoint.y:g)}return b=e.enablePersistence?0===e.mapScaleValue?1:e.mapScaleValue:b,e.widthBeforeRefresh=e.availableSize.width,e.heightBeforeRefresh=e.availableSize.height,{scale:i?1:b,location:new J(o,n)}}function rt(e){e.tileZoomScale=e.tileZoomLevel=Math.floor(e.availableSize.height/512)+1;var t=256*Math.pow(2,e.tileZoomLevel);e.tileTranslatePoint.x=e.availableSize.width/2-t/2,e.tileTranslatePoint.y=e.availableSize.height/2-t/2+20,e.previousTileWidth=e.availableSize.width,e.previousTileHeight=e.availableSize.height}function Z(e){return document.getElementById(e)}function st(e){return"string"==typeof e?parseFloat(e):e}function dt(e,t){return e.formatFunction=e.intl.getNumberFormat({format:e.format,useGrouping:e.useGroupingSeparator}),e.formatFunction(t)}function pt(t,e){var i=null;try{"function"!=typeof t&&document.querySelectorAll(t).length?i=Y.compile(document.querySelector(t).innerHTML.trim()):(e.isVue||e.isVue3||"function"==typeof t)&&(i=Y.compile(t))}catch(e){i=Y.compile(t)}return i}function E(e){return document.getElementById(e)}function ht(e,t){var i,o=parseInt(e.split("_LayerIndex_")[1].split("_")[0],10),e=parseInt(e.split("_shapeIndex_")[1].split("_")[0],10),t=t.layersCollection[o],o=t.layerData[e].property;return{shapeData:o,data:i=t.dataSource?t.dataSource[Je(t.dataSource,o,t.shapeDataPath,t.shapePropertyPath)]:i}}function mt(e,t,i,o){var n=ht(e,i),l={color:t.border.color,opacity:t.border.opacity,width:t.border.width},a=t.enableMultiSelect?{cancel:!1,name:o,fill:t.fill,opacity:t.opacity,border:l,shapeData:n.shapeData,data:n.data,target:e,maps:i,shapeDataCollection:i.shapeSelectionItem}:{cancel:!1,name:o,fill:t.fill,opacity:t.opacity,border:l,shapeData:n.shapeData,data:n.data,target:e,maps:i};return i.trigger(o,a,function(){a.border.opacity=(Y.isNullOrUndefined(a.border.opacity)?a:a.border).opacity}),a}function ct(e){return document.getElementsByClassName(e)}function O(e,t){var i=null;return i=document.getElementById(t)?document.getElementById(t).querySelector("#"+e):i}function ut(e,t,i,o){for(var n,l=o.layers[e].shapeData.features,a=0;a<l.length;a++)if(l[a].properties.name===t){n=o.element.id+"_LayerIndex_"+e+"_shapeIndex_"+a+"_dataIndex_undefined";break}return E(n)}function gt(e,t,i){e=Y.createElement("style",{id:e});return e.innerText="."+t+"{fill:"+i.fill+";fill-opacity:"+(Y.isNullOrUndefined(i.opacity)?"1":i.opacity.toString())+";stroke-opacity:"+(Y.isNullOrUndefined(i.border.opacity)?"1":i.border.opacity.toString())+";stroke-width:"+i.border.width.toString()+";stroke:"+i.border.color+";}",e}function yt(e,t,i){e=E(e);Y.isNullOrUndefined(e)||(e.innerText="."+t+"{fill:"+i.fill+";fill-opacity:"+(Y.isNullOrUndefined(i.opacity)?"1":i.opacity.toString())+";stroke-width:"+i.border.width.toString()+";stroke-opacity:"+(Y.isNullOrUndefined(i.border.opacity)?"1":i.border.opacity.toString())+";stroke:"+i.border.color+"}")}function ft(t,i,e,o,n){var l={color:t.border.color,width:t.border.width/i.scale,opacity:t.border.opacity},a={opacity:t.opacity,fill:t.fill,border:l,name:on,target:e.id,cancel:!1,shapeData:o,data:n,maps:i};i.trigger("itemSelection",a,function(e){a.border.opacity=(Y.isNullOrUndefined(t.border.opacity)?t:t.border).opacity,i.shapeSelectionItem.push(a.shapeData),E("ShapeselectionMap")?yt("ShapeselectionMap","ShapeselectionMapStyle",a):document.body.appendChild(gt("ShapeselectionMap","ShapeselectionMapStyle",a))})}function x(e){e.removeAttribute("class")}function bt(i,e,t,o,n,l,a){void 0===a&&(a=0);var r=o.x,s=o.y,d=0,p=i.getAttribute("transform")||"";new Y.Animation({}).animate(i,{duration:0===t&&"Enable"===Y.animationMode?1e3:t,delay:e,progress:function(e){var t;e.timeStamp>e.delay&&!n.zoomModule.isPanningInProgress?(n.isTileMap&&0===d&&(t=document.querySelector(".GroupElement"),Y.isNullOrUndefined(t)||(t.style.display="block")),d=(e.timeStamp-e.delay)/e.duration,i.setAttribute("transform","translate( "+(r-a*d)+" "+(s-a*d)+" ) scale("+d+")")):n.zoomModule.isPanningInProgress&&(p=i.getAttribute("transform"))},end:function(e){n.zoomModule.isPanningInProgress||i.setAttribute("transform",p),n.zoomModule.isPanningInProgress=!1,l&&n.trigger($o,{cancel:!1,name:$o,element:l,maps:n})}})}function St(e){I(e)}function vt(e,t,i,o,n,l,a,r,s){for(var d=F(i,o,r),d=(Y.isNullOrUndefined(d)||(i=d.x,o=d.y),document.getElementById(a)),p=q(e,{fontFamily:"Segoe UI",size:"8px",fontStyle:"Normal",fontWeight:"Regular"}).width,h=e.split(" "),m=h[0].length,c=1;c<h.length;c++)m<h[c].length&&(m=h[c].length);d||((d=Y.createElement("div",{id:a})).style.cssText='background-color: rgb(255, 255, 255) !important; color:black !important; position:absolute;border:1px solid rgb(0, 0, 0); padding-left:5px;font-size:12px; font-family: "Segoe UI"; text-align:center'),i<n-p||(n-p<i&&i<n-8*m?p=n-i:n-8*m<=i&&(p<i?i-=p:(p=i,i=0)));t=t.split("px");xt(d,e,i,o,t,p,n,r),d.clientHeight+2*parseInt(t[0],10)>l&&(p=i,i=0),xt(d,e,i,o,t,p,n,r),s&&setTimeout(St,5e3,a)}function xt(e,t,i,o,n,l,a,r){e.innerText=t,e.style.top=-1!==e.id.indexOf("_Legend")?(parseInt(n[0],10)+o).toString()+"px":(2*parseInt(n[0],10)).toString()+"px",e.style.left=i.toString()+"px",e.style.width=l.toString()+"px",e.style.maxWidth=a.toString()+"px",e.style.wordWrap="break-word",r.appendChild(e)}function Ct(e,t,i,o,n){var l=E(e),a=Ot(n.borderColor),r=Ot(n.fontColor),i="top:"+i.toString()+"px;left:"+o.toString()+"px;color:"+(r?"rgba("+r.r+","+r.g+","+r.b+","+n.fontOpacity+")":n.fontColor)+";background:"+n.fill+";z-index: 2;position:absolute;border:"+n.borderWidth+"px solid "+(a?"rgba("+a.r+","+a.g+","+a.b+","+n.borderOpacity+")":n.borderColor)+";font-family:"+n.fontFamily+";font-style:"+n.fontStyle+";font-weight:"+n.fontWeight+";font-size:"+n.fontSize+";border-radius:"+n.borderWidth+"px;";!l&&n.visible?((l=Y.createElement("div",{id:e})).innerHTML=Y.SanitizeHtmlHelper.sanitize("&nbsp;"+t+"&nbsp;"),l.style.cssText=i,document.body.appendChild(l)):n.visible&&(l.innerHTML=Y.SanitizeHtmlHelper.sanitize("&nbsp;"+t+"&nbsp;"),l.style.cssText=i)}function Ot(e){var t,i;return-1!==e.indexOf("#")&&-1===e.toLowerCase().indexOf("rgb")?(i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e))?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null:-1!==e.toLowerCase().indexOf("rgb")?(i=e.match(/\d+/g).map(function(e){return parseInt(e,10)}))?{r:i[0],g:i[1],b:i[2]}:null:((t=document.createElement("div")).style.color=e,i=window.getComputedStyle(document.body.appendChild(t)).color.match(/\d+/g).map(function(e){return parseInt(e,10)}),document.body.removeChild(t),i?{r:i[0],g:i[1],b:i[2]}:null)}function _t(e,t,i,o,n){var l=new k.SvgRenderer(""),e=Mt(e,i,t,n,o);return l["draw"+e.functionName](e.renderOption)}function Mt(e,t,i,o,n){var l,a="Path",r=t.width,s=t.height,d=e.x,p=e.y,h=e.x+-r/2,m=e.y+-s/2;switch(o.stroke="HorizontalLine"===i||"VerticalLine"===i||"Cross"===i?o.fill:o.stroke,o["stroke-width"]=0!==o["stroke-width"]||"HorizontalLine"!==i&&"VerticalLine"!==i&&"Cross"!==i?o["stroke-width"]:1,i){case"Circle":case"Bubble":a="Ellipse",Y.merge(o,{rx:r/2,ry:s/2,cx:d,cy:p});break;case"VerticalLine":Y.merge(o,{d:l="M "+d+" "+(p+s/2)+" L "+d+" "+(p+-s/2)});break;case"HorizontalLine":Y.merge(o,{d:l="M "+d+" "+p+" L "+(d+r/2)+" "+p});break;case"Diamond":Y.merge(o,{d:l="M "+h+" "+p+" L "+d+" "+(p+-s/2)+" L "+(d+r/2)+" "+p+" L "+d+" "+(p+s/2)+" L "+h+" "+p+" z"});break;case"Rectangle":Y.merge(o,{d:l="M "+h+" "+(p+-s/2)+" L "+(d+r/2)+" "+(p+-s/2)+" L "+(d+r/2)+" "+(p+s/2)+" L "+h+" "+(p+s/2)+" L "+h+" "+(p+-s/2)+" z"});break;case"Triangle":Y.merge(o,{d:l="M "+h+" "+(p+s/2)+" L "+d+" "+(p+-s/2)+" L "+(d+r/2)+" "+(p+s/2)+" L "+h+" "+(p+s/2)+" z"});break;case"InvertedTriangle":Y.merge(o,{d:l="M "+(d+r/2)+" "+(p-s/2)+" L "+d+" "+(p+s/2)+" L "+(d-r/2)+" "+(p-s/2)+" L "+(d+r/2)+" "+(p-s/2)+" z"});break;case"Pentagon":for(var c,u,g=0;g<=5;g++)c=r/2*Math.cos(Math.PI/180*(72*g)),u=r/2*Math.sin(Math.PI/180*(72*g)),l=0===g?"M "+(d+c)+" "+(p+u)+" ":l.concat("L "+(d+c)+" "+(p+u)+" ");l=l.concat("Z"),Y.merge(o,{d:l});break;case"Star":l="M "+(e.x+t.width/3)+" "+(e.y+t.height/2)+" L "+(e.x-t.width/2)+" "+(e.y-t.height/6)+" L "+(e.x+t.width/2)+" "+(e.y-t.height/6)+" L "+(e.x-t.width/3)+" "+(e.y+t.height/2)+" L "+e.x+" "+(e.y-t.height/2)+" L "+(e.x+t.width/3)+" "+(e.y+t.height/2)+" Z",Y.merge(o,{d:l});break;case"Cross":Y.merge(o,{d:l="M "+h+" "+p+" L "+(d+r/2)+" "+p+" M "+d+" "+(p+s/2)+" L "+d+" "+(p+-s/2)});break;case"Image":a="Image",Y.merge(o,{href:n,height:s,width:r,x:h,y:m})}return{renderOption:o,functionName:a}}function Lt(e,t){t.appendChild(e);var i=e.offsetWidth,o=e.offsetHeight;return t.removeChild(e),new W(i,o)}function Pt(e,t,i,o){for(var n,l=0;l<e.childElementCount;l++)if(-1<(n=e.childNodes[l]).id.indexOf("_NavigationGroup"))wt(n,t,i,o);else if(-1<n.id.indexOf("_Polygons_Group"))for(var a=0;a<n.childElementCount;a++){var r=o.layersCollection[t].polygonSettings.polygons[parseInt(n.children[a].id.split("_PolygonIndex_")[1])].borderWidth;n.children[a].setAttribute("stroke-width",(r/i).toString())}else{var s,d=void 0,p=o.layersCollection[t].shapeSettings.borderWidthValuePath,h=o.layersCollection[t].shapeSettings.border.width,m=o.layersCollection[t].shapeSettings.circleRadius,d=o.layersCollection[t].shapeSettings.borderWidthValuePath&&null!==(s=Je(o.layersCollection[t].dataSource,o.layersCollection[t].layerData[l].property,o.layersCollection[t].shapeDataPath,o.layersCollection[t].shapePropertyPath,o.layersCollection[t]))&&o.layersCollection[t].dataSource[s][p]||(Y.isNullOrUndefined(h)?0:h);n.setAttribute("stroke-width",(d/i).toString()),(-1<e.id.indexOf("_Point")||-1<e.id.indexOf("_MultiPoint"))&&n.setAttribute("r",(m/i).toString())}}function wt(e,t,i,o){for(var n,l,a=0;a<e.childElementCount;a++)"path"===(l=e.childNodes[a]).tagName&&(n=o.layersCollection[t].navigationLineSettings[parseFloat(l.id.split("_NavigationIndex_")[1].split("_")[0])].width,l.setAttribute("stroke-width",(n/i).toString()))}function Tt(e){for(var t=[],i=e.touches,o=0;o<i.length;o++)t.push({pageX:i[o].pageX,pageY:i[o].pageY});return t}function It(e,t){e=kt(e[0],e[1]);return kt(t[0],t[1])/e}function kt(e,t){var i=e.pageX-t.pageX,e=e.pageY-t.pageY;return Math.sqrt(i*i+e*e)}function Nt(e,t){var t=t.element.getBoundingClientRect(),i=t.top+document.defaultView.pageXOffset,o=t.left+document.defaultView.pageYOffset;return Array.prototype.slice.call(e).map(function(e){return{x:e.pageX-o,y:e.pageY-i}})}function Ft(e){return{x:e.map(function(e){return e.x}).reduce(Et)/e.length,y:e.map(function(e){return e.y}).reduce(Et)/e.length}}function Et(e,t){return e+t}function zt(e,t,i,o,n,l,a){var r,s,d,p,h,m,c,u,g=a.previousPoint,y=a.previousScale,f=n-y,b=new T(0,0);n===y?e.setAttribute("transform","scale( "+n+" ) translate( "+o.x+" "+o.y+" )"):(h=o,d=(m=g).x===h.x?null:(h.y-m.y)/(h.x-m.x),h=g,p=null===(m=d)?h.x:h.y-m*h.x,c=o.x-g.x,u=o.y-g.y,Bt(e,0,i,function(e){e.timeStamp>e.delay&&(r=(e.timeStamp-e.delay)/e.duration,s=y+r*f,b.x=g.x+r*c/(s/n),b.y=null==d?g.y+r*u:d*b.x+p,e.element.setAttribute("transform","scale( "+s+" ) translate( "+b.x+" "+b.y+" )"),a.translatePoint=b,a.scale=s,a.zoomModule.processTemplate(o.x,o.y,s,a))},function(){a.translatePoint=o,a.scale=n,e.setAttribute("transform","scale( "+n+" ) translate( "+o.x+" "+o.y+" )"),a.zoomModule.processTemplate(o.x,o.y,n,a)}))}function Bt(t,e,i,o,n){function l(e){(e-=r=r||e)<i?(o.call(a,{element:t,delay:0,timeStamp:e,duration:i}),window.requestAnimationFrame(l)):(window.cancelAnimationFrame(s),n.call(a,{element:t}),-1<t.id.indexOf("Marker")&&(Z(t.id.split("_Layer")[0]+"_Markers_Group").style.cssText="visibility:visible"))}var a=this,r=null,s=(i="Disable"===Y.animationMode?0:i,window.requestAnimationFrame(l))}function At(e,t,i,o,n){this.dataOptions=e,this.type=t||"GET",this.async=i||!0,this.contentType=o,this.sendData=n}var Ut;function Zt(e,t,i,o){var n,l=e.getAttribute("transform").split(" "),a=(2===l.length&&(l[2]=l[1].split(")")[0],l[1]=l[0].split("(")[1]),new T(parseInt(l[1],10),parseInt(l[2],10))),r=o.x-a.x,s=o.y-a.y,d=new T(0,0);Bt(e,0,i,function(e){e.timeStamp>e.delay&&(n=(e.timeStamp-e.delay)/e.duration,d.x=a.x+n*r,d.y=a.y+n*s,e.element.setAttribute("transform","translate( "+d.x+" "+d.y+" )"))},function(){e.setAttribute("transform","translate( "+o.x+" "+o.y+" )")})}function jt(e,t){var i=Y.isNullOrUndefined(t.shouldZoomPreviousFactor)?null:t.shouldZoomPreviousFactor,o=Y.isNullOrUndefined(t.shouldZoomCurrentFactor)?null:t.shouldZoomCurrentFactor;Y.isNullOrUndefined(o)?!Y.isNullOrUndefined(i)&&Y.isNullOrUndefined(o)&&t.shouldZoomPreviousFactor!==e?t.shouldZoomCurrentFactor=e:t.shouldZoomPreviousFactor=e:(t.shouldZoomCurrentFactor=null,t.shouldZoomPreviousFactor=null)}function Dt(e,t,i,o,n,l,a,r){var s,d=a.zoomSettings.maxZoom,p=Math.sin(t*Math.PI/180),p=Math.log((1+p)/(1-p))/2,p=Math.max(Math.min(p,Math.PI),-Math.PI)/2,h=Math.sin(e*Math.PI/180),h=Math.log((1+h)/(1-h))/2,h=Math.max(Math.min(h,Math.PI),-Math.PI)/2,t=(a.zoomNotApplied&&!a.isTileMap&&(t=Math.abs((a.baseMapBounds.latitude.max-a.baseMapBounds.latitude.min)/(t-e)),e=Math.abs((a.baseMapBounds.longitude.max-a.baseMapBounds.longitude.min)/(o-i)),s=r?(t+e)/2:Math.min(t,e)),(p-h)/Math.PI),e=o-i,p=(e<0?360+e:e)/360,h=Math.log(l/256/t)/Math.LN2,o=Math.log(n/256/p)/Math.LN2,i=a.zoomNotApplied&&!a.isTileMap?s:r&&!a.isTileMap?(h+o)/2:Math.min(h,o),e=Math.min(i,d);return e=a.isTileMap||!a.zoomNotApplied?Math.floor(e):e,a.isTileMap||jt(e,a),e}function Rt(e){var t,e=Y.isNullOrUndefined(e.result)?e.actual:e.result;return Y.isNullOrUndefined(e.length)?Y.isNullOrUndefined(e.Items)||(t=e.Items):t=e,t}(t=Ut=Ut||{}).mapsTitleFont={size:"14px",fontWeight:null,color:"#424242",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},t.mapsSubTitleFont={size:"13px",fontWeight:null,color:"#424242",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},t.tooltipLabelFont={size:"12px",fontWeight:"Regular",color:null,fontStyle:"Regular",fontFamily:null},t.legendTitleFont={size:"12px",fontWeight:"Medium",color:null,fontStyle:"Medium",fontFamily:null},t.legendLabelFont={size:"13px",fontWeight:"Medium",color:null,fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},t.dataLabelFont={size:null,fontWeight:"Medium",color:"#000000",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"};Vt=function(e,t){return(Vt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};var Vt,Gt,t=function(e,t){function i(){this.constructor=e}Vt(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=function(e,t,i,o){var n,l=arguments.length,a=l<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;0<=r;r--)(n=e[r])&&(a=(l<3?n(a):3<l?n(t,i,a):n(t,i))||a);return 3<l&&a&&Object.defineProperty(t,i,a),a},Ht=(Gt=Y.ChildProperty,t(Wt,Gt),i([Y.Property("")],Wt.prototype,"content",void 0),i([Y.Property("0px")],Wt.prototype,"x",void 0),i([Y.Property("0px")],Wt.prototype,"y",void 0),i([Y.Property("None")],Wt.prototype,"verticalAlignment",void 0),i([Y.Property("None")],Wt.prototype,"horizontalAlignment",void 0),i([Y.Property("-1")],Wt.prototype,"zIndex",void 0),Wt);function Wt(){return null!==Gt&&Gt.apply(this,arguments)||this}qt=Y.ChildProperty,t(Yt,qt),i([Y.Property("Start")],Yt.prototype,"position",void 0),i([Y.Property("false")],Yt.prototype,"showArrow",void 0),i([Y.Property(2)],Yt.prototype,"size",void 0),i([Y.Property("black")],Yt.prototype,"color",void 0),i([Y.Property(0)],Yt.prototype,"offSet",void 0);var qt,Xt=Yt;function Yt(){return null!==qt&&qt.apply(this,arguments)||this}Jt=Y.ChildProperty,t(Kt,Jt),i([Y.Property(null)],Kt.prototype,"size",void 0),i([Y.Property(null)],Kt.prototype,"color",void 0),i([Y.Property("Roboto, Noto, Sans-serif")],Kt.prototype,"fontFamily",void 0),i([Y.Property("Medium")],Kt.prototype,"fontWeight",void 0),i([Y.Property("Medium")],Kt.prototype,"fontStyle",void 0),i([Y.Property(1)],Kt.prototype,"opacity",void 0);var Jt,Qt=Kt;function Kt(){return null!==Jt&&Jt.apply(this,arguments)||this}$t=Y.ChildProperty,t(o,$t),i([Y.Property("transparent")],o.prototype,"fill",void 0),i([Y.Property(null)],o.prototype,"color",void 0),i([Y.Property(1)],o.prototype,"borderOpacity",void 0),i([Y.Property(1)],o.prototype,"borderWidth",void 0),i([Y.Property(null)],o.prototype,"borderColor",void 0),i([Y.Property(null)],o.prototype,"radius",void 0),i([Y.Property(null)],o.prototype,"selectionColor",void 0),i([Y.Property(null)],o.prototype,"highlightColor",void 0),i([Y.Property(5)],o.prototype,"padding",void 0),i([Y.Property(1)],o.prototype,"opacity",void 0),i([Y.Property(["ZoomIn","ZoomOut","Reset"])],o.prototype,"toolbarItems",void 0);var $t,ei=o;function o(){return null!==$t&&$t.apply(this,arguments)||this}ti=Y.ChildProperty,t(n,ti),i([Y.Property(!0)],n.prototype,"visible",void 0),i([Y.Property("white")],n.prototype,"fill",void 0),i([Y.Property(1)],n.prototype,"borderOpacity",void 0),i([Y.Property(1)],n.prototype,"borderWidth",void 0),i([Y.Property("#707070")],n.prototype,"borderColor",void 0),i([Y.Property("black")],n.prototype,"fontColor",void 0),i([Y.Property("")],n.prototype,"fontFamily",void 0),i([Y.Property("")],n.prototype,"fontStyle",void 0),i([Y.Property("")],n.prototype,"fontWeight",void 0),i([Y.Property("")],n.prototype,"fontSize",void 0),i([Y.Property(1)],n.prototype,"fontOpacity",void 0);var ti,ii=n;function n(){return null!==ti&&ti.apply(this,arguments)||this}oi=Y.ChildProperty,t(li,oi),i([Y.Property("transparent")],li.prototype,"backgroundColor",void 0),i([Y.Property(1)],li.prototype,"borderOpacity",void 0),i([Y.Property(1)],li.prototype,"borderWidth",void 0),i([Y.Property("transparent")],li.prototype,"borderColor",void 0),i([Y.Property("Far")],li.prototype,"horizontalAlignment",void 0),i([Y.Property("Near")],li.prototype,"verticalAlignment",void 0),i([Y.Property("Horizontal")],li.prototype,"orientation",void 0),i([Y.Complex({},ei)],li.prototype,"buttonSettings",void 0),i([Y.Complex({},ii)],li.prototype,"tooltipSettings",void 0);var oi,ni=li;function li(){return null!==oi&&oi.apply(this,arguments)||this}ai=Y.ChildProperty,t(ri,ai),i([Y.Property("")],ri.prototype,"color",void 0),i([Y.Property(0)],ri.prototype,"width",void 0),i([Y.Property(null)],ri.prototype,"opacity",void 0);var ai,l=ri;function ri(){return null!==ai&&ai.apply(this,arguments)||this}si=Y.ChildProperty,t(pi,si),i([Y.Property(null)],pi.prototype,"latitude",void 0),i([Y.Property(null)],pi.prototype,"longitude",void 0);var si,di=pi;function pi(){return null!==si&&si.apply(this,arguments)||this}hi=Y.ChildProperty,t(ci,hi),i([Y.Property(!1)],ci.prototype,"visible",void 0),i([Y.Property("")],ci.prototype,"template",void 0),i([Y.Property("")],ci.prototype,"fill",void 0),i([Y.Complex({color:null,width:1},l)],ci.prototype,"border",void 0),i([Y.Complex({fontFamily:null,size:null,fontWeight:null},Qt)],ci.prototype,"textStyle",void 0),i([Y.Property(null)],ci.prototype,"format",void 0),i([Y.Property(null)],ci.prototype,"valuePath",void 0),i([Y.Property(2e3)],ci.prototype,"duration",void 0);var hi,mi=ci;function ci(){return null!==hi&&hi.apply(this,arguments)||this}ui=Y.ChildProperty,t(yi,ui),i([Y.Property(!1)],yi.prototype,"visible",void 0),i([Y.Property("")],yi.prototype,"fill",void 0),i([Y.Complex({color:null,width:1},l)],yi.prototype,"border",void 0),i([Y.Complex({fontFamily:null,size:null,fontWeight:null},Qt)],yi.prototype,"textStyle",void 0),i([Y.Property(2e3)],yi.prototype,"duration",void 0);var ui,gi=yi;function yi(){return null!==ui&&ui.apply(this,arguments)||this}fi=Y.ChildProperty,t(Si,fi),i([Y.Property(10)],Si.prototype,"left",void 0),i([Y.Property(10)],Si.prototype,"right",void 0),i([Y.Property(10)],Si.prototype,"top",void 0),i([Y.Property(10)],Si.prototype,"bottom",void 0);var fi,bi=Si;function Si(){return null!==fi&&fi.apply(this,arguments)||this}vi=Y.ChildProperty,t(Ci,vi),i([Y.Property("#000000")],Ci.prototype,"color",void 0),i([Y.Property(1)],Ci.prototype,"width",void 0),i([Y.Property(1)],Ci.prototype,"opacity",void 0);var vi,xi=Ci;function Ci(){return null!==vi&&vi.apply(this,arguments)||this}Oi=Y.ChildProperty,t(a,Oi),i([Y.Property(!1)],a.prototype,"allowClustering",void 0),i([Y.Property(!0)],a.prototype,"allowDeepClustering",void 0),i([Y.Complex({color:"transparent",width:1},l)],a.prototype,"border",void 0),i([Y.Property("#D2691E")],a.prototype,"fill",void 0),i([Y.Property(1)],a.prototype,"opacity",void 0),i([Y.Property("Rectangle")],a.prototype,"shape",void 0),i([Y.Property(12)],a.prototype,"width",void 0),i([Y.Property(12)],a.prototype,"height",void 0),i([Y.Property(new J(0,0))],a.prototype,"offset",void 0),i([Y.Property("")],a.prototype,"imageUrl",void 0),i([Y.Property("")],a.prototype,"dashArray",void 0),i([Y.Complex({},Qt)],a.prototype,"labelStyle",void 0),i([Y.Property(!1)],a.prototype,"allowClusterExpand",void 0),i([Y.Complex({},xi)],a.prototype,"connectorLineSettings",void 0);var Oi,_i=a;function a(){return null!==Oi&&Oi.apply(this,arguments)||this}Mi=Y.ChildProperty,t(Pi,Mi);var Mi,Li=Pi;function Pi(){return null!==Mi&&Mi.apply(this,arguments)||this}wi=Y.ChildProperty,t(Ii,wi),i([Y.Property(null)],Ii.prototype,"from",void 0),i([Y.Property(null)],Ii.prototype,"to",void 0),i([Y.Property(null)],Ii.prototype,"value",void 0),i([Y.Property(null)],Ii.prototype,"color",void 0),i([Y.Property(null)],Ii.prototype,"minOpacity",void 0),i([Y.Property(null)],Ii.prototype,"maxOpacity",void 0),i([Y.Property(null)],Ii.prototype,"label",void 0),i([Y.Property(!0)],Ii.prototype,"showLegend",void 0);var wi,Ti=Ii;function Ii(){return null!==wi&&wi.apply(this,arguments)||this}ki=Y.ChildProperty,t(Fi,ki),i([Y.Property(null)],Fi.prototype,"latitude",void 0),i([Y.Property(null)],Fi.prototype,"longitude",void 0);var ki,Ni=Fi;function Fi(){return null!==ki&&ki.apply(this,arguments)||this}Ei=Y.ChildProperty,t(Bi,Ei),i([Y.Property(null)],Bi.prototype,"shapePath",void 0),i([Y.Property(null)],Bi.prototype,"shapeValue",void 0);var Ei,zi=Bi;function Bi(){return null!==Ei&&Ei.apply(this,arguments)||this}Ai=Y.ChildProperty,t(Zi,Ai),i([Y.Property(!1)],Zi.prototype,"enable",void 0),i([Y.Property(null)],Zi.prototype,"fill",void 0),i([Y.Property(1)],Zi.prototype,"opacity",void 0),i([Y.Property(!1)],Zi.prototype,"enableMultiSelect",void 0),i([Y.Complex({color:"transparent",width:0},l)],Zi.prototype,"border",void 0);var Ai,Ui=Zi;function Zi(){return null!==Ai&&Ai.apply(this,arguments)||this}ji=Y.ChildProperty,t(Ri,ji),i([Y.Property(null)],Ri.prototype,"fill",void 0),i([Y.Property(!1)],Ri.prototype,"enable",void 0),i([Y.Property(1)],Ri.prototype,"opacity",void 0),i([Y.Complex({color:"transparent",width:0},l)],Ri.prototype,"border",void 0);var ji,Di=Ri;function Ri(){return null!==ji&&ji.apply(this,arguments)||this}Vi=Y.ChildProperty,t(Hi,Vi),i([Y.Property(1)],Hi.prototype,"borderWidth",void 0),i([Y.Property(1)],Hi.prototype,"borderOpacity",void 0),i([Y.Property(1)],Hi.prototype,"opacity",void 0),i([Y.Property("#FF471A")],Hi.prototype,"borderColor",void 0),i([Y.Property("#FF471A")],Hi.prototype,"fill",void 0),i([Y.Property([])],Hi.prototype,"points",void 0),i([Y.Property("")],Hi.prototype,"tooltipText",void 0),i([Y.Property("")],Hi.prototype,"tooltipTemplate",void 0);var Vi,Gi=Hi;function Hi(){return null!==Vi&&Vi.apply(this,arguments)||this}Wi=Y.ChildProperty,t(Xi,Wi),i([Y.Collection([],Gi)],Xi.prototype,"polygons",void 0),i([Y.Complex({},Ui)],Xi.prototype,"selectionSettings",void 0),i([Y.Complex({},Di)],Xi.prototype,"highlightSettings",void 0),i([Y.Complex({},gi)],Xi.prototype,"tooltipSettings",void 0);var Wi,qi=Xi;function Xi(){return null!==Wi&&Wi.apply(this,arguments)||this}Yi=Y.ChildProperty,t(Qi,Yi),i([Y.Property(!1)],Qi.prototype,"visible",void 0),i([Y.Property(1)],Qi.prototype,"width",void 0),i([Y.Property(null)],Qi.prototype,"longitude",void 0),i([Y.Property(null)],Qi.prototype,"latitude",void 0),i([Y.Property("")],Qi.prototype,"dashArray",void 0),i([Y.Property("black")],Qi.prototype,"color",void 0),i([Y.Property(0)],Qi.prototype,"angle",void 0),i([Y.Complex({showArrow:!1,position:"Start",size:5,color:"black"},Xt)],Qi.prototype,"arrowSettings",void 0),i([Y.Complex({},Ui)],Qi.prototype,"selectionSettings",void 0),i([Y.Complex({},Di)],Qi.prototype,"highlightSettings",void 0);var Yi,Ji=Qi;function Qi(){return null!==Yi&&Yi.apply(this,arguments)||this}Ki=Y.ChildProperty,t(r,Ki),i([Y.Complex({},l)],r.prototype,"border",void 0),i([Y.Property(!1)],r.prototype,"visible",void 0),i([Y.Property([])],r.prototype,"dataSource",void 0),i([Y.Property()],r.prototype,"query",void 0),i([Y.Property(1e3)],r.prototype,"animationDuration",void 0),i([Y.Property(0)],r.prototype,"animationDelay",void 0),i([Y.Property("")],r.prototype,"fill",void 0),i([Y.Property(10)],r.prototype,"minRadius",void 0),i([Y.Property(20)],r.prototype,"maxRadius",void 0),i([Y.Property(1)],r.prototype,"opacity",void 0),i([Y.Property(null)],r.prototype,"valuePath",void 0),i([Y.Property("Circle")],r.prototype,"bubbleType",void 0),i([Y.Property(null)],r.prototype,"colorValuePath",void 0),i([Y.Collection([],Ti)],r.prototype,"colorMapping",void 0),i([Y.Complex({},mi)],r.prototype,"tooltipSettings",void 0),i([Y.Complex({},Ui)],r.prototype,"selectionSettings",void 0),i([Y.Complex({},Di)],r.prototype,"highlightSettings",void 0);var Ki,$i=r;function r(){return null!==Ki&&Ki.apply(this,arguments)||this}eo=Y.ChildProperty,t(io,eo),i([Y.Property("")],io.prototype,"text",void 0),i([Y.Property("")],io.prototype,"description",void 0);var eo,to=io;function io(){return null!==eo&&eo.apply(this,arguments)||this}t(lo,oo=to),i([Y.Complex({size:null,fontWeight:null,fontFamily:null},Qt)],lo.prototype,"textStyle",void 0),i([Y.Property("Center")],lo.prototype,"alignment",void 0);var oo,no=lo;function lo(){return null!==oo&&oo.apply(this,arguments)||this}t(so,ao=to),i([Y.Complex({size:null,fontWeight:null,fontFamily:null},Qt)],so.prototype,"textStyle",void 0),i([Y.Property("Center")],so.prototype,"alignment",void 0),i([Y.Complex({},no)],so.prototype,"subtitleSettings",void 0);var ao,ro=so;function so(){return null!==ao&&ao.apply(this,arguments)||this}po=Y.ChildProperty,t(d,po),i([Y.Property(!1)],d.prototype,"enable",void 0),i([Y.Property(!0)],d.prototype,"enablePanning",void 0),i([Y.Property(!0)],d.prototype,"enableSelectionZooming",void 0),i([Y.Property(!0)],d.prototype,"mouseWheelZoom",void 0),i([Y.Property(!1)],d.prototype,"doubleClickZoom",void 0),i([Y.Property(!0)],d.prototype,"pinchZooming",void 0),i([Y.Property(!1)],d.prototype,"zoomOnClick",void 0),i([Y.Property(1)],d.prototype,"zoomFactor",void 0),i([Y.Property(10)],d.prototype,"maxZoom",void 0),i([Y.Property(1)],d.prototype,"minZoom",void 0),i([Y.Property(!1)],d.prototype,"shouldZoomInitially",void 0),i([Y.Property(!0)],d.prototype,"resetToInitial",void 0),i([Y.Complex({},ni)],d.prototype,"toolbarSettings",void 0);var po,ho=d;function d(){return null!==po&&po.apply(this,arguments)||this}mo=Y.ChildProperty,t(uo,mo),i([Y.Property(!1)],uo.prototype,"enable",void 0),i([Y.Property(!0)],uo.prototype,"applyShapeSettings",void 0),i([Y.Property(1)],uo.prototype,"opacity",void 0),i([Y.Property("")],uo.prototype,"fill",void 0),i([Y.Complex({color:"",width:0},l)],uo.prototype,"border",void 0);var mo,co=uo;function uo(){return null!==mo&&mo.apply(this,arguments)||this}go=Y.ChildProperty,t(p,go),i([Y.Property(!1)],p.prototype,"useMarkerShape",void 0),i([Y.Property(!1)],p.prototype,"toggleVisibility",void 0),i([Y.Property(!1)],p.prototype,"visible",void 0),i([Y.Property("transparent")],p.prototype,"background",void 0),i([Y.Property("Layers")],p.prototype,"type",void 0),i([Y.Property(!1)],p.prototype,"invertedPointer",void 0),i([Y.Property("After")],p.prototype,"labelPosition",void 0),i([Y.Property("None")],p.prototype,"labelDisplayMode",void 0),i([Y.Property("Circle")],p.prototype,"shape",void 0),i([Y.Property("")],p.prototype,"width",void 0),i([Y.Property("")],p.prototype,"height",void 0),i([Y.Complex({fontFamily:null,fontWeight:null},Qt)],p.prototype,"textStyle",void 0),i([Y.Property(15)],p.prototype,"shapeWidth",void 0),i([Y.Property(15)],p.prototype,"shapeHeight",void 0),i([Y.Property(10)],p.prototype,"shapePadding",void 0),i([Y.Complex({color:null,width:0},l)],p.prototype,"border",void 0),i([Y.Complex({color:"#000000",width:0},l)],p.prototype,"shapeBorder",void 0),i([Y.Complex({},to)],p.prototype,"title",void 0),i([Y.Complex({size:null,color:Ut.legendTitleFont.color,fontStyle:Ut.legendTitleFont.fontStyle,fontWeight:null,fontFamily:null},Qt)],p.prototype,"titleStyle",void 0),i([Y.Property("Bottom")],p.prototype,"position",void 0),i([Y.Property("Center")],p.prototype,"alignment",void 0),i([Y.Property("None")],p.prototype,"orientation",void 0),i([Y.Property({x:0,y:0})],p.prototype,"location",void 0),i([Y.Property(null)],p.prototype,"fill",void 0),i([Y.Property(1)],p.prototype,"opacity",void 0),i([Y.Property("Default")],p.prototype,"mode",void 0),i([Y.Property(null)],p.prototype,"showLegendPath",void 0),i([Y.Property(null)],p.prototype,"valuePath",void 0),i([Y.Property(!1)],p.prototype,"removeDuplicateLegend",void 0),i([Y.Complex({},co)],p.prototype,"toggleLegendSettings",void 0);var go,yo=p;function p(){return null!==go&&go.apply(this,arguments)||this}fo=Y.ChildProperty,t(h,fo),i([Y.Property(!1)],h.prototype,"visible",void 0),i([Y.Complex({width:0,color:"transparent"},l)],h.prototype,"border",void 0),i([Y.Property("black")],h.prototype,"fill",void 0),i([Y.Property(1)],h.prototype,"opacity",void 0),i([Y.Property(5)],h.prototype,"rx",void 0),i([Y.Property(5)],h.prototype,"ry",void 0),i([Y.Complex({fontWeight:null},Qt)],h.prototype,"textStyle",void 0),i([Y.Property("")],h.prototype,"labelPath",void 0),i([Y.Property("None")],h.prototype,"smartLabelMode",void 0),i([Y.Property("None")],h.prototype,"intersectionAction",void 0),i([Y.Property("")],h.prototype,"template",void 0),i([Y.Property(0)],h.prototype,"animationDuration",void 0);var fo,bo=h;function h(){return null!==fo&&fo.apply(this,arguments)||this}So=Y.ChildProperty,t(m,So),i([Y.Property(null)],m.prototype,"fill",void 0),i([Y.Property([])],m.prototype,"palette",void 0),i([Y.Property(5)],m.prototype,"circleRadius",void 0),i([Y.Complex({width:null,color:null},l)],m.prototype,"border",void 0),i([Y.Property("")],m.prototype,"dashArray",void 0),i([Y.Property(1)],m.prototype,"opacity",void 0),i([Y.Property(null)],m.prototype,"colorValuePath",void 0),i([Y.Property(null)],m.prototype,"borderColorValuePath",void 0),i([Y.Property(null)],m.prototype,"borderWidthValuePath",void 0),i([Y.Property(null)],m.prototype,"valuePath",void 0),i([Y.Collection([],Ti)],m.prototype,"colorMapping",void 0),i([Y.Property(!1)],m.prototype,"autofill",void 0);var So,vo=m;function m(){return null!==So&&So.apply(this,arguments)||this}xo=Y.ChildProperty,t(c,xo),i([Y.Complex({color:"transparent",width:1},l)],c.prototype,"border",void 0),i([Y.Property(null)],c.prototype,"dashArray",void 0),i([Y.Property(!1)],c.prototype,"visible",void 0),i([Y.Property(!1)],c.prototype,"enableDrag",void 0),i([Y.Property("#FF471A")],c.prototype,"fill",void 0),i([Y.Property(null)],c.prototype,"heightValuePath",void 0),i([Y.Property(null)],c.prototype,"widthValuePath",void 0),i([Y.Property(10)],c.prototype,"height",void 0),i([Y.Property(10)],c.prototype,"width",void 0),i([Y.Property(1)],c.prototype,"opacity",void 0),i([Y.Property(null)],c.prototype,"colorValuePath",void 0),i([Y.Property(null)],c.prototype,"shapeValuePath",void 0),i([Y.Property(null)],c.prototype,"imageUrlValuePath",void 0),i([Y.Property("Balloon")],c.prototype,"shape",void 0),i([Y.Property("")],c.prototype,"legendText",void 0),i([Y.Property(new J(0,0))],c.prototype,"offset",void 0),i([Y.Property("")],c.prototype,"imageUrl",void 0),i([Y.Property(null)],c.prototype,"template",void 0),i([Y.Property([])],c.prototype,"dataSource",void 0),i([Y.Property()],c.prototype,"query",void 0),i([Y.Complex({},mi)],c.prototype,"tooltipSettings",void 0),i([Y.Property(1e3)],c.prototype,"animationDuration",void 0),i([Y.Property(0)],c.prototype,"animationDelay",void 0),i([Y.Complex({},Ui)],c.prototype,"selectionSettings",void 0),i([Y.Complex({},Di)],c.prototype,"highlightSettings",void 0),i([Y.Property(null)],c.prototype,"latitudeValuePath",void 0),i([Y.Property(null)],c.prototype,"longitudeValuePath",void 0),i([Y.Collection([],Ni)],c.prototype,"initialMarkerSelection",void 0),i([Y.Complex({},_i)],c.prototype,"clusterSettings",void 0);var xo,Co=c;function c(){return null!==xo&&xo.apply(this,arguments)||this}t(Mo,Oo=Co);var Oo,_o=Mo;function Mo(e,t,i,o){return Oo.call(this,e,t,i,o)||this}Lo=Y.ChildProperty,t(u,Lo),i([Y.Property(null)],u.prototype,"shapeData",void 0),i([Y.Property()],u.prototype,"query",void 0),i([Y.Complex({},vo)],u.prototype,"shapeSettings",void 0),i([Y.Property([])],u.prototype,"dataSource",void 0),i([Y.Property("Layer")],u.prototype,"type",void 0),i([Y.Property("Geographic")],u.prototype,"geometryType",void 0),i([Y.Property("")],u.prototype,"urlTemplate",void 0),i([Y.Property(!0)],u.prototype,"visible",void 0),i([Y.Property("name")],u.prototype,"shapeDataPath",void 0),i([Y.Property("name")],u.prototype,"shapePropertyPath",void 0),i([Y.Property(0)],u.prototype,"animationDuration",void 0),i([Y.Collection([],_o)],u.prototype,"markerSettings",void 0),i([Y.Complex({},_i)],u.prototype,"markerClusterSettings",void 0),i([Y.Complex({},bo)],u.prototype,"dataLabelSettings",void 0),i([Y.Collection([],$i)],u.prototype,"bubbleSettings",void 0),i([Y.Collection([],Ji)],u.prototype,"navigationLineSettings",void 0),i([Y.Complex({},qi)],u.prototype,"polygonSettings",void 0),i([Y.Complex({},mi)],u.prototype,"tooltipSettings",void 0),i([Y.Complex({},Ui)],u.prototype,"selectionSettings",void 0),i([Y.Complex({},Di)],u.prototype,"highlightSettings",void 0),i([Y.Complex({},co)],u.prototype,"toggleLegendSettings",void 0),i([Y.Collection([],zi)],u.prototype,"initialShapeSelection",void 0);var Lo,Po=u;function u(){var e=null!==Lo&&Lo.apply(this,arguments)||this;return e.isBaseLayer=!1,e}var wo,To=function(e,t,i,o,n,l,a){void 0===i&&(i=256),void 0===o&&(o=256),void 0===n&&(n=0),void 0===l&&(l=0),void 0===a&&(a=null),this.x=e,this.y=t,this.top=n,this.left=l,this.height=i,this.width=o,this.src=a},t=(wo=Y.ChildProperty,t(Io,wo),i([Y.Property(null)],Io.prototype,"background",void 0),i([Y.Complex({color:"transparent",width:1},l)],Io.prototype,"border",void 0),Io);function Io(){return null!==wo&&wo.apply(this,arguments)||this}var ko="click",No="onclick",Fo="rightClick",Eo="doubleClick",zo="resize",Bo="tooltipRender",Ao="shapeSelected",Uo="shapeHighlight",Zo="layerRendering",jo="shapeRendering",Do="markerRendering",Ro="markerClusterRendering",Vo="markerClick",Go="markerDragStart",Ho="markerClusterClick",Wo="markerMouseMove",qo="mouseMove",Xo="markerClusterMouseMove",Yo="dataLabelRendering",Jo="bubbleRendering",Qo="bubbleClick",Ko="bubbleMouseMove",$o="animationComplete",en="legendRendering",tn="annotationRendering",on="itemSelection",nn="itemHighlight",ln="beforePrint",an="pan",rn=(sn.prototype.getBingMap=function(e,t,i,o,n,l){for(var a="",r=Math.min(this.maps.tileZoomLevel,parseInt(this.maxZoom,10));0<r;r--){var s=0,d=1<<r-1;0!=(e.x&d)&&s++,0!=(e.y&d)&&(s+=2),a=a+""+s}return Y.isNullOrUndefined(l)?"":(l=l[Math.min(parseInt(a.substr(a.length-1,1),10),l.length)],(n=n.replace("{quadkey}",a).replace("{subdomain}",l))+"&mkt="+o+"&ur=IN&Key="+t)},sn.prototype.destroy=function(){this.maps=null,this.subDomains=[]},sn);function sn(e){this.maps=e}pn.prototype.getShapeColorMapping=function(e,t,i){var o=e.colorValuePath||e.valuePath,t=!Y.isNullOrUndefined(o)&&-1<o.indexOf(".")?U(t,o):t[o],o=Number(t),e=this.getColorByValue(e.colorMapping,o,t);return Y.isNullOrUndefined(e)?i:e},pn.prototype.getColorByValue=function(e,t,i){if(isNaN(t)&&Y.isNullOrUndefined(i))return null;for(var o,n="",l=0,a=e;l<a.length;l++){var r=a[l];(!Y.isNullOrUndefined(r.from)&&!Y.isNullOrUndefined(r.to)&&t>=r.from&&t<=r.to||r.value===i)&&(n="[object Array]"===Object.prototype.toString.call(r.color)?Y.isNullOrUndefined(r.value)?this.getColor(r,t):r.color[0]:r.color),(t>=r.from&&t<=r.to||r.value===i)&&!Y.isNullOrUndefined(r.minOpacity)&&!Y.isNullOrUndefined(r.maxOpacity)&&n&&(o=this.deSaturationColor(r,n,t,i)),(""===n||Y.isNullOrUndefined(n))&&Y.isNullOrUndefined(r.from)&&Y.isNullOrUndefined(r.to)&&Y.isNullOrUndefined(r.minOpacity)&&Y.isNullOrUndefined(r.maxOpacity)&&Y.isNullOrUndefined(r.value)&&(n="[object Array]"===Object.prototype.toString.call(r.color)?r.color[0]:r.color)}return{fill:n||(e.length?null:i),opacity:o}},pn.prototype.deSaturationColor=function(e,t,i,o){var n=1;return n=i>=e.from&&i<=e.to||e.value===o?(isNaN(i)?e.from/(e.to-e.from):(i-e.from)/(e.to-e.from))*(e.maxOpacity-e.minOpacity)+e.minOpacity:n},pn.prototype.rgbToHex=function(e,t,i){return"#"+this.componentToHex(e)+this.componentToHex(t)+this.componentToHex(i)},pn.prototype.componentToHex=function(e){e=e.toString(16);return 1===e.length?"0"+e:e},pn.prototype.getColor=function(e,t){return Number(t)===e.from?e.color[0]:Number(t)===e.to?e.color[e.color.length-1]:(t=this.getGradientColor(Number(t),e),this.rgbToHex(t.r,t.g,t.b))},pn.prototype.getGradientColor=function(e,t){var i=t.from,o=t.to,n=0,l=o-i,n=(e-i)/l;if(t.color.length<=2)r="#"===t.color[0].charAt(0)?t.color[0]:this._colorNameToHex(t.color[0]),s="#"===t.color[t.color.length-1].charAt(0)?t.color[t.color.length-1]:this._colorNameToHex(t.color[t.color.length-1]);else{for(var a,r="#"===t.color[0].charAt(0)?t.color[0]:this._colorNameToHex(t.color[0]),s="#"===t.color[t.color.length-1].charAt(0)?t.color[t.color.length-1]:this._colorNameToHex(t.color[t.color.length-1]),d=l/(t.color.length-1),p=t.color.length-1,h=[],m=1;m<p;m++)a={b:i+m*d,color:t.color[m]},h.push(a);for(var c=0;c<h.length;c++)i<=e&&e<=h[c].b&&0===c?(s="#"===h[c].color.charAt(0)?h[c].color:this._colorNameToHex(h[c].color),n=e<h[c].b?1-Math.abs((e-h[c].b)/d):(e-h[c].b)/d):h[c].b<=e&&e<=o&&c===h.length-1&&(r="#"===h[c].color.charAt(0)?h[c].color:this._colorNameToHex(h[c].color),n=e<h[c].b?1-Math.abs((e-h[c].b)/d):(e-h[c].b)/d),c!==h.length-1&&c<h.length&&h[c].b<=e&&e<=h[c+1].b&&(r="#"===h[c].color.charAt(0)?h[c].color:this._colorNameToHex(h[c].color),s="#"===h[c+1].color.charAt(0)?h[c+1].color:this._colorNameToHex(h[c+1].color),n=Math.abs(e-h[c+1].b)/d)}return this.getPercentageColor(n,r,s)},pn.prototype.getPercentageColor=function(e,t,i){var i=i.split("#")[1],t=t.split("#")[1],o=this.getPercentage(e,parseInt(t.substr(0,2),16),parseInt(i.substr(0,2),16)),n=this.getPercentage(e,parseInt(t.substr(2,2),16),parseInt(i.substr(2,2),16)),e=this.getPercentage(e,parseInt(t.substr(4,2),16),parseInt(i.substr(4,2),16));return new pe(o,n,e)},pn.prototype.getPercentage=function(e,t,i){return Math.round(t+(i-t)*e)},pn.prototype._colorNameToHex=function(e){var t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",orchid:"#da70d6",papayawhip:"#ffefd5",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return"[object Array]"!==Object.prototype.toString.call(e)&&void 0!==t[e.toLowerCase()]?t[e.toLowerCase()]:e};var dn=pn;function pn(e){}g.prototype.measureLayerPanel=function(){var e,i=this,t=this.mapObject.layersCollection,o=this.mapObject.mapAreaRect,n=Z(this.mapObject.element.id+"_Secondary_Element");this.mapObject.isTileMap&&n&&(this.tileSvgObject=this.mapObject.renderer.createSvg({id:this.mapObject.element.id+"_Tile_SVG",width:o.width,height:o.height}),(e=Y.createElement("div",{id:this.mapObject.element.id+"_Tile_SVG_Parent"})).style.cssText="position: absolute; height: "+o.height+"px; width: "+o.width+"px;",e.appendChild(this.tileSvgObject),n.appendChild(e)),this.layerGroup=this.mapObject.renderer.createGroup({id:this.mapObject.element.id+"_Layer_Collections","clip-path":"url(#"+this.mapObject.element.id+"_MapArea_ClipRect)"}),this.clipRectElement=this.mapObject.renderer.drawClipPath(new Q(this.mapObject.element.id+"_MapArea_ClipRect","transparent",{width:1,color:"Gray"},1,{x:this.mapObject.isTileMap?0:o.x,y:this.mapObject.isTileMap?0:o.y,width:o.width,height:o.height})),this.layerGroup.appendChild(this.clipRectElement),this.mapObject.baseMapBounds=null,this.mapObject.baseMapRectBounds=null,this.mapObject.baseSize=null,Array.prototype.forEach.call(t,function(e,t){i.currentLayer=e,i.processLayers(e,t)}),Y.isNullOrUndefined(this.mapObject.legendModule)||"Float"!==this.mapObject.legendSettings.position||(this.mapObject.isTileMap?this.layerGroup:this.mapObject.svgObject).appendChild(this.mapObject.legendModule.legendGroup)},g.prototype.renderTileLayer=function(e,t,i,o){e.currentFactor=e.calculateFactor(t),e.mapObject.defaultState=!(1!==e.mapObject.zoomSettings.zoomFactor&&!Y.isNullOrUndefined(e.mapObject.tileZoomLevel)&&1!==e.mapObject.tileZoomLevel),Y.isNullOrUndefined(e.mapObject.previousCenterLatitude)&&Y.isNullOrUndefined(e.mapObject.previousCenterLongitude)&&!e.mapObject.isZoomByPosition?(e.mapObject.previousCenterLatitude=e.mapObject.centerPosition.latitude,e.mapObject.previousCenterLongitude=e.mapObject.centerPosition.longitude):e.mapObject.previousCenterLatitude!==e.mapObject.centerPosition.latitude&&e.mapObject.previousCenterLongitude!==e.mapObject.centerPosition.longitude||e.mapObject.isZoomByPosition?(e.mapObject.centerPositionChanged=!0,e.mapObject.previousCenterLatitude=e.mapObject.centerPosition.latitude,e.mapObject.previousCenterLongitude=e.mapObject.centerPosition.longitude):e.mapObject.centerPositionChanged=!1;var n,t=new J(e.mapObject.centerPosition.longitude,e.mapObject.centerPosition.latitude),l=t,t=(this.mapObject.isTileMap&&e.mapObject.markerModule&&e.mapObject.zoomSettings.enable&&(e.mapObject.markerModule.calculateZoomCenterPositionAndFactor(this.mapObject.layersCollection),Y.isNullOrUndefined(this.mapObject.markerCenterLatitude)||Y.isNullOrUndefined(this.mapObject.markerCenterLongitude)||e.mapObject.isZoomByPosition||(l=new J(e.mapObject.markerCenterLongitude,e.mapObject.markerCenterLatitude))),t=!e.mapObject.zoomSettings.shouldZoomInitially&&e.mapObject.centerPosition.longitude&&e.mapObject.centerPosition.latitude&&!e.mapObject.zoomPersistence&&e.mapObject.defaultState?new J(e.mapObject.centerPosition.longitude,e.mapObject.centerPosition.latitude):e.mapObject.zoomSettings.shouldZoomInitially&&e.mapObject.markerZoomedState&&!e.mapObject.zoomPersistence&&!Y.isNullOrUndefined(e.mapObject.markerZoomCenterPoint)?new J(e.mapObject.markerZoomCenterPoint.longitude,e.mapObject.markerZoomCenterPoint.latitude):{x:null,y:null},e.mapObject.zoomSettings.shouldZoomInitially&&!e.mapObject.isZoomByPosition?Y.isNullOrUndefined(e.mapObject.markerZoomFactor)?1:e.mapObject.markerZoomFactor:e.mapObject.zoomSettings.zoomFactor),t=e.mapObject.enablePersistence?Y.isNullOrUndefined(e.mapObject.mapScaleValue)?Y.isNullOrUndefined(e.mapObject.markerZoomFactor)?e.mapObject.zoomSettings.zoomFactor:e.mapObject.markerZoomFactor:e.mapObject.mapScaleValue:t;t=e.mapObject.zoomSettings.enable?t:e.mapObject.zoomSettings.zoomFactor,e.mapObject.defaultState=1===(t=0<t?t:1),!e.mapObject.markerZoomedState&&e.mapObject.zoomSettings.shouldZoomInitially&&1===e.mapObject.zoomSettings.zoomFactor&&(e.mapObject.defaultState=!0),Y.isNullOrUndefined(e.mapObject.tileZoomLevel)?(e.mapObject.tileZoomLevel=t,e.mapObject.previousZoomFactor=t):this.mapObject.isReset&&1===e.mapObject.tileZoomLevel&&!e.mapObject.zoomSettings.shouldZoomInitially?(n=e.mapObject.tileZoomLevel,e.mapObject.tileZoomLevel=n):1!==e.mapObject.zoomSettings.zoomFactor||e.mapObject.zoomSettings.shouldZoomInitially?(e.mapObject.previousZoomFactor=e.mapObject.tileZoomLevel,e.mapObject.tileZoomLevel=e.mapObject.defaultState&&e.mapObject.zoomSettings.enable?e.mapObject.tileZoomLevel:e.mapObject.zoomSettings.shouldZoomInitially||e.mapObject.centerPositionChanged?t:e.mapObject.previousZoomFactor!==e.mapObject.zoomSettings.zoomFactor?e.mapObject.zoomSettings.zoomFactor:e.mapObject.tileZoomLevel,e.mapObject.tileZoomLevel=1===t&&0===e.mapObject.zoomSettings.zoomFactor?t:e.mapObject.tileZoomLevel,!Y.isNullOrUndefined(e.mapObject.tileTranslatePoint)&&(e.mapObject.markerZoomFactor!==e.mapObject.mapScaleValue||Y.isNullOrUndefined(e.mapObject.markerZoomFactor)&&Y.isNullOrUndefined(e.mapObject.mapScaleValue))&&(e.mapObject.zoomSettings.zoomFactor<=1||e.mapObject.previousZoomFactor!==e.mapObject.zoomSettings.zoomFactor)&&(e.mapObject.tileTranslatePoint.x=0,e.mapObject.tileTranslatePoint.y=0)):e.mapObject.defaultState&&(e.mapObject.previousZoomFactor=e.mapObject.tileZoomLevel,e.mapObject.tileZoomLevel=t,Y.isNullOrUndefined(e.mapObject.tileTranslatePoint)||(e.mapObject.tileTranslatePoint.x=0,e.mapObject.tileTranslatePoint.y=0)),t<=1&&!Y.isNullOrUndefined(e.mapObject.height)&&!e.mapObject.zoomSettings.shouldZoomInitially&&e.mapObject.tileZoomLevel===e.mapObject.tileZoomScale&&this.mapObject.initialCheck&&rt(this.mapObject),Y.isNullOrUndefined(e.mapObject.centerLatOfGivenLocation)||Y.isNullOrUndefined(e.mapObject.centerLongOfGivenLocation)||!e.mapObject.zoomNotApplied||(Y.isNullOrUndefined(l)||(l.y=e.mapObject.centerLatOfGivenLocation,l.x=e.mapObject.centerLongOfGivenLocation),e.mapObject.tileZoomLevel=e.mapObject.mapScaleValue=e.mapObject.scaleOfGivenLocation),e.mapObject.tileTranslatePoint=e.panTileMap(e.mapObject.availableSize.width,e.mapObject.availableSize.height,l),this.mapObject.zoomSettings.resetToInitial&&this.mapObject.initialCheck&&!Y.isNullOrUndefined(e.mapObject.height)&&512<this.mapObject.availableSize.height&&(this.mapObject.applyZoomReset=!0,this.mapObject.initialZoomLevel=Math.floor(this.mapObject.availableSize.height/512),n=256*Math.pow(2,this.mapObject.initialZoomLevel),Y.isNullOrUndefined(this.mapObject.initialTileTranslate)||(this.mapObject.initialTileTranslate.x=this.mapObject.availableSize.width/2-n/2,this.mapObject.initialTileTranslate.y=this.mapObject.availableSize.height/2-n/2+20)),e.generateTiles(e.mapObject.tileZoomLevel,e.mapObject.tileTranslatePoint,null,o),Y.isNullOrUndefined(e.mapObject.previousZoomFactor)||e.mapObject.previousZoomFactor===e.mapObject.zoomSettings.zoomFactor||(e.mapObject.previousZoomFactor=e.mapObject.zoomSettings.zoomFactor),e.mapObject.polygonModule&&(t=e.mapObject.polygonModule.polygonRender(this.mapObject,i,e.mapObject.tileZoomLevel),Y.isNullOrUndefined(t)||e.layerObject.appendChild(t)),e.mapObject.navigationLineModule&&(l=e.mapObject.navigationLineModule.renderNavigation(e.currentLayer,e.mapObject.tileZoomLevel,i),Y.isNullOrUndefined(l)||e.layerObject.appendChild(l)),e.mapObject.markerModule&&e.mapObject.markerModule.markerRender(this.mapObject,e.layerObject,i,e.mapObject.tileZoomLevel,null),e.translateLayerElements(e.layerObject),e.layerGroup.appendChild(e.layerObject)},g.prototype.processLayers=function(o,n){var l=this;if(this.layerObject=this.mapObject.renderer.createGroup({id:this.mapObject.element.id+"_LayerIndex_"+n}),!this.mapObject.enablePersistence){var e=this.mapObject.getModuleName()+this.mapObject.element.id;if(-1===navigator.userAgent.indexOf("Edge")){var t=void 0;try{t=window.localStorage}catch(e){t=null}!Y.isNullOrUndefined(t)&&window.localStorage.getItem(e)&&window.localStorage.removeItem(e)}}var a={cancel:!1,name:Zo,index:n,layer:o,maps:this.mapObject,visible:o.visible};this.mapObject.trigger("layerRendering",a,function(e){var t,i;!a.cancel&&a.visible&&(Y.isNullOrUndefined(o.shapeData)&&!Y.isNullOrUndefined(o.urlTemplate)&&""!==o.urlTemplate?!Y.isNullOrUndefined(o.urlTemplate)&&-1<o.urlTemplate.indexOf("quadkey")?(t=new rn(l.mapObject),l.bingMapCalculation(o,n,l,t)):l.renderTileLayer(l,o,n):Y.isNullOrUndefined(o.shapeData)||Y.isNullOrUndefined(o.shapeData.geometries)&&Y.isNullOrUndefined(o.shapeData.features)||(t=!Y.isNullOrUndefined(o.shapeData.geometries)&&0<o.shapeData.geometries.length?o.shapeData.geometries:o.shapeData.features,o.layerData=[],i=o.shapeData.bbox,!Y.isNullOrUndefined(i)&&o.isBaseLayer?l.mapObject.baseMapBounds=new ae({min:i[0][1],max:i[1][1]},{min:i[0][0],max:i[1][0]}):Y.isNullOrUndefined(l.mapObject.baseMapBounds)&&!tt(t)&&l.calculateRectBounds(t),l.calculatePathCollection(n,t)))}),this.mapObject.isTileMap?this.tileSvgObject&&(this.tileSvgObject.appendChild(this.layerGroup),this.mapObject.baseMapBounds=null):this.mapObject.svgObject.appendChild(this.layerGroup)},g.prototype.bingMapCalculation=function(e,t,i,o){o.imageUrl=e.urlTemplate,o.subDomains=["t0","t1","t2","t3"],o.maxZoom="21",i.mapObject.bingMap=o,i.renderTileLayer(i,e,t,o),this.mapObject.arrangeTemplate(),this.mapObject.zoomModule&&this.mapObject.previousScale!==this.mapObject.scale&&this.mapObject.zoomModule.applyTransform(this.mapObject,!1,!0)},g.prototype.bubbleCalculation=function(e,t){if(null!=e.dataSource&&null!=e)for(var i=e.dataSource,o=0;o<i.length;o++){var n=!Y.isNullOrUndefined(e.valuePath)&&-1<e.valuePath.indexOf(".")?Number(U(e.dataSource[o],e.valuePath)):parseFloat(e.dataSource[o][e.valuePath]);isNaN(n)||(0!==o?n>t.max?t.max=n:n<t.min&&(t.min=n):t.max=t.min=n)}},g.prototype.calculatePathCollection=function(f,b){var S=this,v=(this.groupElements=[],tt(b)||(this.currentFactor=this.calculateFactor(this.currentLayer)),this.rectBounds=null,this.currentLayer.shapeSettings),x=(Array.prototype.forEach.call(b,function(e){var t,i,o;Y.isNullOrUndefined(e.geometry)&&Y.isNullOrUndefined(e.coordinates)||(t=(Y.isNullOrUndefined(e.geometry)?e:e.geometry).type,i=(Y.isNullOrUndefined(e.geometry)?e:e.geometry).coordinates,o=e.geometry,e=e.properties,S.generatePoints(t,i,o,e))}),this.currentLayer.rectBounds=this.rectBounds,Y.isNullOrUndefined(this.mapObject.baseMapRectBounds)&&this.currentLayer.isBaseLayer&&(this.mapObject.baseMapRectBounds=this.rectBounds),!Y.isNullOrUndefined(v.palette)&&1<v.palette.length?v.palette:function(e){var t;switch(e.toLowerCase()){case"tailwind":t=["#0369A1","#14B8A6","#15803D","#334155","#5A61F6","#65A30D","#8B5CF6","#9333EA","#F59E0B","#F97316"];break;case"tailwinddark":t=["#10B981","#22D3EE","#2DD4BF","#4ADE80","#8B5CF6","#E879F9","#F472B6","#F87171","#F97316","#FCD34D"];break;case"tailwind3":t=["#2F4074","#03B4B4","#0D72DE","#FF5733","#D63384","#F39C12","#EF291F","#91C822"];break;case"tailwind3dark":t=["#8029F1","#1ABC9C","#0D72DE","#FF5733","#D63384","#F39C12","#EF291F","#91C822"];break;case"fluent":t=["#614570","#4C6FB1","#CC6952","#3F579A","#4EA09B","#6E7A89","#D4515C","#E6AF5D","#639751","#9D4D69"];break;case"fluentdark":t=["#8AB113","#2A72D5","#43B786","#584EC6","#E85F9C","#6E7A89","#EA6266","#EBA844","#26BC7A","#BC4870"];break;case"material3":t=["#6200EE","#E77A16","#82C100","#7107DC","#05BB3D","#D21020","#FAD200","#0085FF","#9204EA","#08EE9B"];break;case"material3dark":t=["#4EAAFF","#FA4EAB","#FFF500","#17EA58","#38FFE7","#FF9E45","#B3F32F","#B93CE4","#FC5664","#9B55FF"];break;case"fluent2":t=["#6200EE","#09AF74","#0076E5","#CB3587","#E7910F","#0364DE","#66CD15","#F3A93C","#107C10","#C19C00"];break;case"fluent2dark":case"fluent2highcontrast":t=["#9BB449","#2A72D5","#43B786","#3F579A","#584EC6","#E85F9C","#6E7A89","#EA6266","#0B6A0B","#C19C00"];break;case"bootstrap5":case"bootstrap5dark":t=["#6610F2","#6f42C1","#D63384","#DC3545","#FD7E14","#FFC107","#198754","#0DCAF0"];break;default:t=["#B5E485","#7BC1E8","#DF819C","#EC9B79","#78D0D3","#D6D572","#9178E3","#A1E5B4","#87A4B4","#E4C16C"]}return t}(this.mapObject.theme)),C=Y.createElement("div",{id:this.mapObject.element.id+"_LayerIndex_"+f+"_Label_Template_Group",className:this.mapObject.element.id+"_template"});if(C.style.cssText="pointer-events: none; overflow: hidden; position: absolute;top:"+this.mapObject.mapAreaRect.y+"px;left:"+this.mapObject.mapAreaRect.x+"px;height:"+this.mapObject.mapAreaRect.height+"px;width:"+this.mapObject.mapAreaRect.width+"px;",0!==this.currentLayer.layerData.length)for(var e=function(r){function e(o){var n,l="Polygon"===(l=Y.isNullOrUndefined(m._isMultiPolygon)?(Y.isNullOrUndefined(m.type)?m[0]:m).type:"MultiPolygon")||"MultiPolygon"===l?"Polygon":l;if(o.cancel?(o.fill=u,o.border.color=v.border.color||S.mapObject.themeStyle.shapeBorderColor,o.border.width=v.border.width):(o.fill="#A6A6A6"===o.fill?o.shape.fill||S.mapObject.themeStyle.shapeFill:o.fill,o.border.color=("transparent"===o.border.color?o.shape:o).border.color,o.border.width=(0===o.border.width?o.shape:o).border.width,Y.isNullOrUndefined(v.borderColorValuePath)&&(h.color=o.border.color),Y.isNullOrUndefined(v.borderWidthValuePath)&&(h.width=o.border.width)),o.border.opacity=Y.isNullOrUndefined(o.border.opacity)?y:o.border.opacity,S.groupElements.length<1)p=S.mapObject.renderer.createGroup({id:S.mapObject.element.id+"_LayerIndex_"+f+"_"+l+"_Group",transform:""}),S.groupElements.push(p);else for(var e=0;e<S.groupElements.length;e++){var t=S.groupElements[e];if(-1<t.id.indexOf(l)){p=t;break}if(e>=S.groupElements.length-1){p=S.mapObject.renderer.createGroup({id:S.mapObject.element.id+"_LayerIndex_"+f+"_"+l+"_Group"}),S.groupElements.push(p);break}}switch(l){case"Polygon":m._isMultiPolygon?c=S.generateMultiPolygonPath(m):(c+="M"+m[0].point.x+" "+m[0].point.y,m.map(function(e){c+=" L "+e.point.x+" "+e.point.y})),3<(c+=" z ").length&&(s=new B(g,o.fill,o.border.width,o.border.color,y,o.border.opacity,v.dashArray,c),n=S.mapObject.renderer.drawPath(s));break;case"LineString":m.map(function(e,t){c+=0===t?"M "+e.point.x+" "+e.point.y:"L"+e.point.x+" , "+e.point.y+" "}),3<c.length&&(s=new B(g,"transparent",Y.isNullOrUndefined(o.border.width)?1:o.border.width,Y.isNullOrUndefined(o.fill)?o.border.color:o.fill,y,o.border.opacity,v.dashArray,c),n=S.mapObject.renderer.drawPath(s));break;case"MultiLineString":m.map(function(e){e.map(function(e,t){c+=0===t?"M "+e.point.x+" "+e.point.y:"L"+e.point.x+" , "+e.point.y+" "})}),3<c.length&&(s=new B(g,"transparent",Y.isNullOrUndefined(o.border.width)?1:o.border.width,Y.isNullOrUndefined(o.fill)?o.border.color:o.fill,y,o.border.opacity,v.dashArray,c),n=S.mapObject.renderer.drawPath(s));break;case"Point":var i=m.point,a="SubLayer"!==S.mapObject.layers[f].type?v.circleRadius:v.circleRadius/(S.mapObject.isTileMap?S.mapObject.scale:S.currentFactor);d=new ce(g,o.fill,o.border,y,i.x,i.y,a,v.dashArray),n=S.mapObject.renderer.drawCircle(d);break;case"MultiPoint":m.map(function(e,t){var e=e.point,i="SubLayer"!==S.mapObject.layers[f].type?v.circleRadius:v.circleRadius/(S.mapObject.isTileMap?S.mapObject.scale:S.currentFactor);d=new ce(g+"_multiLine_"+t,o.fill,o.border,y,e.x,e.y,i,v.dashArray),n=S.mapObject.renderer.drawCircle(d),S.pathAttributeCalculate(p,n,l,m)});break;case"Path":c=m.point,s=new B(g,o.fill,o.border.width,o.border.color,y,o.border.opacity,v.dashArray,c),n=S.mapObject.renderer.drawPath(s)}Y.isNullOrUndefined(n)||"MultiPoint"===l||S.pathAttributeCalculate(p,n,l,m),r===S.currentLayer.layerData.length-1&&S.layerFeatures(f,x,b,C)}var s,d,p,t=void 0,h={color:v.border.color||o.mapObject.themeStyle.shapeBorderColor,width:v.border.width,opacity:v.border.opacity},m=o.currentLayer.layerData[r],c="",u=v.autofill?x[r%x.length]:v.fill||o.mapObject.themeStyle.shapeFill,g=(null===v.colorValuePath||Y.isNullOrUndefined(m.property)||(null!==(t=Je(o.currentLayer.dataSource,m.property,o.currentLayer.shapeDataPath,o.currentLayer.shapePropertyPath,o.currentLayer))&&0===v.colorMapping.length?u=-1<o.currentLayer.shapeSettings.colorValuePath.indexOf(".")?U(o.currentLayer.dataSource[t],v.colorValuePath):o.currentLayer.dataSource[t][v.colorValuePath]:m.property[v.colorValuePath]&&0===o.currentLayer.dataSource.length&&0===v.colorMapping.length&&(u=-1<o.currentLayer.shapeSettings.colorValuePath.indexOf(".")?U(m.property,v.colorValuePath):m.property[v.colorValuePath]),u=Y.isNullOrUndefined(u)?v.fill||o.mapObject.themeStyle.shapeFill:u),o.mapObject.element.id+"_LayerIndex_"+f+"_shapeIndex_"+r+"_dataIndex_"+t),i=o.getShapeColorMapping(o.currentLayer,m.property,u),u="[object Object]"!==Object.prototype.toString.call(i)||Y.isNullOrUndefined(i.fill)?u:i.fill,y=((o.currentLayer.shapeSettings.borderColorValuePath||o.currentLayer.shapeSettings.borderWidthValuePath)&&null!==(t=Je(o.currentLayer.dataSource,m.property,o.currentLayer.shapeDataPath,o.currentLayer.shapePropertyPath,o.currentLayer))&&(o.currentLayer.dataSource[t][v.borderColorValuePath]&&(h.color=o.currentLayer.dataSource[t][v.borderColorValuePath]),o.currentLayer.dataSource[t][v.borderWidthValuePath])&&(h.width=o.currentLayer.dataSource[t][v.borderWidthValuePath]),("[object Object]"!==Object.prototype.toString.call(i)||Y.isNullOrUndefined(i.opacity)?v:i).opacity),i={cancel:!1,name:jo,index:r,data:o.currentLayer.dataSource?o.currentLayer.dataSource[t]:null,maps:o.mapObject,shape:v,fill:u,border:{width:h.width,color:h.color,opacity:h.opacity}};e.bind(o),o.mapObject.trigger("shapeRendering",i,e)},o=this,t=0;t<this.currentLayer.layerData.length;t++)e(t);else this.layerFeatures(f,x,b,C)},g.prototype.pathAttributeCalculate=function(e,t,i,o){for(var n,l="[object Array]"===Object.prototype.toString.call(this.currentLayer.shapePropertyPath)?this.currentLayer.shapePropertyPath:[this.currentLayer.shapePropertyPath],a=0;a<l.length;a++)if(!Y.isNullOrUndefined(o.property)){n=l[a];break}t.setAttribute("aria-label",Y.isNullOrUndefined(o.property)?"":o.property[n]),this.currentLayer.selectionSettings.enable||this.currentLayer.highlightSettings.enable?(t.tabIndex=this.mapObject.tabIndex,t.setAttribute("role","button"),t.style.cursor=this.currentLayer.highlightSettings.enable&&!this.currentLayer.selectionSettings.enable?"default":"pointer"):t.setAttribute("role","region"),"LineString"!==i&&"MultiLineString"!==i||(t.style.cssText="outline:none"),Ve(this.mapObject.selectedElementId,this.mapObject.shapeSelectionClass,t,"ShapeselectionMapStyle"),this.mapObject.legendSettings.toggleLegendSettings.enable&&"Layers"===this.mapObject.legendSettings.type&&Ge(this.mapObject.toggledElementId,t,this.mapObject.legendSettings.toggleLegendSettings.applyShapeSettings?this.currentLayer.shapeSettings:this.mapObject.legendSettings.toggleLegendSettings),e.appendChild(t)},g.prototype.layerFeatures=function(n,l,e,i){var a,r=this;if(this.mapObject.polygonModule&&this.groupElements.push(this.mapObject.polygonModule.polygonRender(this.mapObject,n,this.mapObject.isTileMap?Math.floor(this.currentFactor):this.currentFactor)),this.currentLayer.bubbleSettings.length&&this.mapObject.bubbleModule)for(var s,t=this.currentLayer.bubbleSettings.length,d=this,o=0;o<t;o++)!function(i){s=d.currentLayer.bubbleSettings[i],a=d.mapObject.renderer.createGroup({id:d.mapObject.element.id+"_LayerIndex_"+n+"_bubble_Group_"+i});var o={min:0,max:0},e=(d.bubbleCalculation(s,o),s.dataSource);d.mapObject.bubbleModule.bubbleCollection=[],!Y.isNullOrUndefined(e)&&0<e.length&&(e.map(function(e,t){r.renderBubble(r.currentLayer,e,l[t%l.length],o,i,t,a,n,s)}),d.groupElements.push(a))}(o);this.mapObject.markerModule&&!this.mapObject.isTileMap&&this.mapObject.zoomSettings.enable&&this.mapObject.markerModule.calculateZoomCenterPositionAndFactor(this.mapObject.layersCollection);var p,h=this.mapObject.renderer.createGroup({id:this.mapObject.element.id+"_LayerIndex_"+n+"_dataLableIndex_Group"});h.style.pointerEvents="none",this.mapObject.dataLabelModule&&this.currentLayer.dataLabelSettings.visible&&(p=[],Array.prototype.forEach.call(e,function(e,t){r.renderLabel(r.currentLayer,n,e,h,t,i,p)}),this.groupElements.push(h)),this.mapObject.navigationLineModule&&this.groupElements.push(this.mapObject.navigationLineModule.renderNavigation(this.currentLayer,this.currentFactor,n)),Y.isNullOrUndefined(this.groupElements)||Y.isNullOrUndefined(this.layerObject)||this.groupElements.map(function(e){Y.isNullOrUndefined(e)||r.layerObject.appendChild(e)}),this.mapObject.markerModule&&this.mapObject.markerModule.markerRender(this.mapObject,this.layerObject,n,this.mapObject.isTileMap?Math.floor(this.currentFactor):this.currentFactor,null),this.translateLayerElements(this.layerObject),this.layerGroup.appendChild(this.layerObject)},g.prototype.renderLabel=function(e,t,i,o,n,l,a){this.mapObject.dataLabelModule.renderLabel(e,t,i,e.layerData,o,l,n,a)},g.prototype.generateMultiPolygonPath=function(e){for(var t="",i=0;i<e.length;i++)t+="M"+e[i][0].point.x+" "+e[i][0].point.y,e[i].map(function(e){t+=" L "+e.point.x+" "+e.point.y});return t},g.prototype.renderBubble=function(e,t,i,o,n,l,a,r,s){if(Y.isNullOrUndefined(this.mapObject.bubbleModule)||!s.visible)return null;i=s.fill||i,this.mapObject.bubbleModule.id=this.mapObject.element.id+"_LayerIndex_"+r+"_BubbleIndex_"+n+"_dataIndex_"+l,this.mapObject.bubbleModule.renderBubble(s,t,i,o,n,l,r,e,a,this.mapObject.bubbleModule.id)},g.prototype.getShapeColorMapping=function(e,t,i){var o;return i=i||e.shapeSettings.fill,0===e.shapeSettings.colorMapping.length&&Y.isNullOrUndefined(e.dataSource)||(t=Je(e.dataSource,t,e.shapeDataPath,e.shapePropertyPath),o=new dn(this.mapObject),Y.isNullOrUndefined(e.dataSource))||Y.isNullOrUndefined(e.dataSource[t])?i:o.getShapeColorMapping(e.shapeSettings,e.dataSource[t],i)},g.prototype.generatePoints=function(e,t,i,o){var n=this,l=[];switch(e.toLowerCase()){case"polygon":0<(l=this.calculatePolygonBox(t[0])).length&&(l.property=o,l.type=e,l._isMultiPolygon=!1,this.currentLayer.layerData.push(l));break;case"multipolygon":for(var a=[],r=0;r<t.length;r++)for(var s=0;s<t[r].length;s++)0<(l=this.calculatePolygonBox(t[r][s])).length&&a.push(l);a.property=o,a.type=e,a._isMultiPolygon=!0,this.currentLayer.layerData.push(a);break;case"linestring":var d=Y.isNullOrUndefined(this.currentLayer.shapeSettings.border.width)?1:"string"==typeof this.currentLayer.shapeSettings.border.width?parseInt(this.currentLayer.shapeSettings.border.width,10):this.currentLayer.shapeSettings.border.width;t.map(function(e){c=e[1],u=e[0];e=A(c,u,n.currentFactor,n.currentLayer,n.mapObject);n.calculateBox(e,d),l.push({point:e,lat:c,lng:u})}),l.property=o,l.type=e,this.currentLayer.layerData.push(l);break;case"multilinestring":var p=Y.isNullOrUndefined(this.currentLayer.shapeSettings.border.width)?1:"string"==typeof this.currentLayer.shapeSettings.border.width?parseInt(this.currentLayer.shapeSettings.border.width,10):this.currentLayer.shapeSettings.border.width,h=[];t.map(function(e){l=[],e.map(function(e){c=e[1],u=e[0];e=A(c,u,n.currentFactor,n.currentLayer,n.mapObject);n.calculateBox(e,p),l.push({point:e,lat:c,lng:u})}),h.push(l)}),h.property=o,h.type=e,this.currentLayer.layerData.push(h);break;case"point":var m=(Y.isNullOrUndefined(this.currentLayer.shapeSettings.border.width)?1:"string"==typeof this.currentLayer.shapeSettings.border.width?parseInt(this.currentLayer.shapeSettings.border.width,10):this.currentLayer.shapeSettings.border.width)+2*this.currentLayer.shapeSettings.circleRadius,c=t[1],u=t[0],g=A(c,u,this.currentFactor,this.currentLayer,this.mapObject);this.calculateBox(g,m),this.currentLayer.layerData.push({point:g,type:e,lat:c,lng:u,property:o});break;case"multipoint":var y=(Y.isNullOrUndefined(this.currentLayer.shapeSettings.border.width)?1:"string"==typeof this.currentLayer.shapeSettings.border.width?parseInt(this.currentLayer.shapeSettings.border.width,10):this.currentLayer.shapeSettings.border.width)+2*this.currentLayer.shapeSettings.circleRadius,l=[];t.map(function(e){c=e[1],u=e[0];e=A(c,u,n.currentFactor,n.currentLayer,n.mapObject);n.calculateBox(e,y),l.push({point:e,lat:c,lng:u})}),l.property=o,l.type=e,this.currentLayer.layerData.push(l);break;case"path":this.currentLayer.layerData.push({point:i.d,type:e,property:o})}},g.prototype.calculateBox=function(e,t){Y.isNullOrUndefined(this.rectBounds)?this.rectBounds={min:{x:e.x-t,y:e.y-t},max:{x:e.x+t,y:e.y+t}}:(this.rectBounds.min.x=Math.min(this.rectBounds.min.x,e.x-t),this.rectBounds.min.y=Math.min(this.rectBounds.min.y,e.y-t),this.rectBounds.max.x=Math.max(this.rectBounds.max.x,e.x+t),this.rectBounds.max.y=Math.max(this.rectBounds.max.y,e.y+t))},g.prototype.calculateFactor=function(e){var t,i,o=1,n=this.mapObject.baseMapBounds,l=new W(this.mapObject.mapAreaRect.width,this.mapObject.mapAreaRect.height-5);return n?(i=A(n.latitude.min,n.longitude.min,null,e,this.mapObject),t=(n=A(n.latitude.max,n.longitude.max,null,e,this.mapObject)).y-i.y,i=n.x-i.x,0!==t&&0!==i||(i=l.width/2,t=l.height)):t=i=500,e=t<l.height?parseFloat(Math.abs(100*Number(l.height/Number(t.toString()+"e+1"))).toString().split(".")[0])/10:l.height/t,o=i<l.width?parseFloat(Math.abs(100*Number(l.width/Number(i.toString()+"e+1"))).toString().split(".")[0])/10:l.width/i,Math.min(o,e)},g.prototype.translateLayerElements=function(e){if(this.mapObject.translateType="layer",Y.isNullOrUndefined(this.mapObject.baseMapRectBounds)){if(this.mapObject.isTileMap&&!Y.isNullOrUndefined(this.mapObject.scale))for(var t=0;t<e.childElementCount;t++)-1<(s=e.childNodes[t]).id.indexOf("_Markers_Group")||-1<s.id.indexOf("_bubble_Group")||-1<s.id.indexOf("_dataLableIndex_Group")||-1<s.id.indexOf("_line_Group")||-1===s.id.indexOf("_Polygons_Group")&&(r="scale( "+this.mapObject.scale+" ) translate( "+this.mapObject.translatePoint.x+" "+this.mapObject.translatePoint.y+" ) ",s.setAttribute("transform",r))}else{var i="Disable"===Y.animationMode?0:0===this.currentLayer.animationDuration&&"Enable"===Y.animationMode?1e3:this.currentLayer.animationDuration,o=0!==i||Y.isNullOrUndefined(this.mapObject.zoomModule),n=(this.mapObject.baseTranslatePoint=this.mapObject.zoomTranslatePoint,void 0),n=(1<this.mapObject.zoomSettings.zoomFactor&&!Y.isNullOrUndefined(this.mapObject.zoomModule)?at:lt)(this.mapObject,this.currentLayer,o),l=this.mapObject.previousScale=n.scale,a=this.mapObject.previousPoint=n.location;this.mapObject.baseTranslatePoint=this.mapObject.translatePoint=a,this.mapObject.baseScale=this.mapObject.scale=l;for(var r,s,d=0;d<e.childElementCount;d++)-1<(s=e.childNodes[d]).id.indexOf("_Markers_Group")||-1<s.id.indexOf("_bubble_Group")||-1<s.id.indexOf("_dataLableIndex_Group")||(r="scale( "+l+" ) translate( "+a.x+" "+a.y+" ) ",s.setAttribute("transform",r),0<i&&!Y.isNullOrUndefined(this.mapObject.zoomModule)&&(n=(1<this.mapObject.zoomSettings.zoomFactor?at:lt)(this.mapObject,this.currentLayer),this.mapObject.scale=n.scale,this.mapObject.zoomTranslatePoint=this.mapObject.translatePoint=n.location))}},g.prototype.calculateRectBounds=function(e){var o=this;Array.prototype.forEach.call(e,function(e){if(!Y.isNullOrUndefined(e.geometry)||!Y.isNullOrUndefined(e.coordinates)){var t=(Y.isNullOrUndefined(e.geometry)?e:e.geometry).type,i=(Y.isNullOrUndefined(e.geometry)?e:e.geometry).coordinates;switch(t.toLowerCase()){case"polygon":o.calculateRectBox(i[0]);break;case"multipolygon":i.map(function(e){o.calculateRectBox(e[0])});break;case"multilinestring":i.map(function(e){e.map(function(e,t){o.calculateRectBox(e,"multilinestring",0===t)})});break;case"linestring":i.map(function(e,t){o.calculateRectBox(e,"linestring",0===t)});break;case"point":o.calculateRectBox(i,"point");break;case"multipoint":i.map(function(e,t){o.calculateRectBox(e,"multipoint",0===t)})}}})},g.prototype.calculatePolygonBox=function(e){var o=this,n=[],l=this.mapObject.baseMapBounds;return e.map(function(e){var t,i=e[1],e=e[0];e>=l.longitude.min&&e<=l.longitude.max&&i>=l.latitude.min&&i<=l.latitude.max&&(t=A(i,e,o.currentFactor,o.currentLayer,o.mapObject),Y.isNullOrUndefined(o.rectBounds)?o.rectBounds={min:{x:t.x,y:t.y},max:{x:t.x,y:t.y}}:(o.rectBounds.min.x=Math.min(o.rectBounds.min.x,t.x),o.rectBounds.min.y=Math.min(o.rectBounds.min.y,t.y),o.rectBounds.max.x=Math.max(o.rectBounds.max.x,t.x),o.rectBounds.max.y=Math.max(o.rectBounds.max.y,t.y)),n.push({point:t,lat:i,lng:e}))}),n},g.prototype.calculateRectBox=function(e,t,i){var o=this;"linestring"!==t&&"multilinestring"!==t&&"point"!==t&&"multipoint"!==t?Array.prototype.forEach.call(e,function(e){Y.isNullOrUndefined(o.mapObject.baseMapBounds)?o.mapObject.baseMapBounds=new ae({min:e[1],max:e[1]},{min:e[0],max:e[0]}):(o.mapObject.baseMapBounds.latitude.min=Math.min(o.mapObject.baseMapBounds.latitude.min,e[1]),o.mapObject.baseMapBounds.latitude.max=Math.max(o.mapObject.baseMapBounds.latitude.max,e[1]),o.mapObject.baseMapBounds.longitude.min=Math.min(o.mapObject.baseMapBounds.longitude.min,e[0]),o.mapObject.baseMapBounds.longitude.max=Math.max(o.mapObject.baseMapBounds.longitude.max,e[0]))}):(i||"point"===t)&&Y.isNullOrUndefined(this.mapObject.baseMapBounds)?this.mapObject.baseMapBounds=new ae({min:e[1],max:e[1]},{min:e[0],max:e[0]}):(this.mapObject.baseMapBounds.latitude.min=Math.min(this.mapObject.baseMapBounds.latitude.min,e[1]),this.mapObject.baseMapBounds.latitude.max=Math.max(this.mapObject.baseMapBounds.latitude.max,e[1]),this.mapObject.baseMapBounds.longitude.min=Math.min(this.mapObject.baseMapBounds.longitude.min,e[0]),this.mapObject.baseMapBounds.longitude.max=Math.max(this.mapObject.baseMapBounds.longitude.max,e[0]))},g.prototype.generateTiles=function(e,t,i,o,n,l){var a,r=this.mapObject.locale,s=this.mapObject.availableSize,d=(this.tiles=[],u=a=Math.pow(2,e),0),p=0,h=(t.x+256*u<s.width&&(d=0<t.x?Math.ceil(t.x/256):0,p=t.x+256*u<s.width?Math.ceil((s.width-(t.x+256*u))/256):0),u+=d+p,"Pan"===i?(u=this.horizontalPanXCount>=u?this.horizontalPanXCount:u,this.horizontalPan=!1):(this.horizontalPanXCount=u,this.horizontalPan=!0),this.mapObject.layers[this.mapObject.baseLayerIndex]),m=(this.urlTemplate=h.urlTemplate,Math.min(a,(-t.y+s.height)/256+1)),c=Math.min(u,(-t.x+s.width+256*p)/256+1),u=-(t.x+256*d+256)/256,g=-(t.y+256)/256;o=o||this.bing||this.mapObject.bingMap;for(var y=Math.round(u);y<Math.round(c);y++)for(var f=Math.round(g);f<Math.round(m);f++){var b,S=256*y+t.x,v=256*f+t.y;-256<S&&S<=s.width&&-256<v&&v<s.height&&0<=f&&((b=new To((y<0?y%a+a:y)%a,f)).left=Math.round(S),b.top=Math.round(v),o&&!Y.isNullOrUndefined(h.urlTemplate)&&""!==h.urlTemplate&&-1<h.urlTemplate.indexOf("quadkey")?b.src=o.getBingMap(b,"","",r,o.imageUrl,o.subDomains):(o=null,b.src=this.urlTemplate.replace("level",e.toString()).replace("tileX",b.x.toString()).replace("tileY",b.y.toString())),this.tiles.push(b))}Y.isNullOrUndefined(i)||(1<i.indexOf("wheel")?(this.animateToZoomX=this.mapObject.availableSize.width/2-n.x-10,this.animateToZoomY=-n.y):(this.animateToZoomX=-10,this.animateToZoomY=10-(this.mapObject.availableSize.height/2+11.5)));for(var x=Y.extend([],this.tiles,[],!0),C=0,O=this.mapObject.layers;C<O.length;C++){var _=O[C];if("SubLayer"===_.type&&_.visible&&(Y.isNullOrUndefined(_.shapeData)&&!Y.isNullOrUndefined(_.urlTemplate)&&""!==_.urlTemplate))for(var M=0,L=x;M<L.length;M++){var P=L[M],w=Y.extend({},P,{},!0);_.urlTemplate.indexOf("quadkey")?(o=new rn(this.mapObject),w.src=o.getBingMap(w,"","",r,o.imageUrl,o.subDomains)):w.src=_.urlTemplate.replace("level",e.toString()).replace("tileX",P.x.toString()).replace("tileY",P.y.toString()),this.tiles.push(w)}}(this.mapObject.previousScale!==this.mapObject.scale||this.mapObject.isReset||this.mapObject.isZoomByPosition||this.mapObject.zoomNotApplied)&&this.arrangeTiles(i,this.animateToZoomX,this.animateToZoomY,l)},g.prototype.arrangeTiles=function(n,e,t,l){var i,a=this,r=(void 0===l&&(l=!1),document.getElementById(this.mapObject.element.id+"_tile_parent")),s=document.getElementById(this.mapObject.element.id+"_tiles");l?(i=document.getElementById(this.mapObject.element.id+"_animates_tiles"),Y.isNullOrUndefined(i)&&(i=Y.createElement("div",{id:this.mapObject.element.id+"_animates_tiles"})),this.tileProcess(n,i,l),s.appendChild(i)):(i=void 0,i=Y.isNullOrUndefined(n)||"Pan"===n||(this.tileAnimation(n,e,t),"Disable"===Y.animationMode)?0:0===this.mapObject.layersCollection[0].animationDuration&&"Enable"===Y.animationMode?1e3:this.mapObject.layersCollection[0].animationDuration,setTimeout(function(){var e;if(r&&(r.style.zIndex="1"),s&&(s.style.zIndex="0"),!document.getElementById(a.mapObject.element.id+"_animated_tiles")&&r?(e=Y.createElement("div",{id:a.mapObject.element.id+"_animated_tiles"}),r.appendChild(e)):"Pan"!==n&&s&&r?(s.appendChild(r.children[0]),a.mapObject.isAddLayer||Y.isNullOrUndefined(document.getElementById(a.mapObject.element.id+"_animated_tiles"))||(document.getElementById(a.mapObject.element.id+"_animated_tiles").id=a.mapObject.element.id+"_animated_tiles_old"),e=Y.createElement("div",{id:a.mapObject.element.id+"_animated_tiles"}),r.appendChild(e)):e=r?r.children[0]:null,a.tileProcess(n,e,l),!Y.isNullOrUndefined(a.mapObject.currentTiles))for(var t=a.tiles.length;t<e.childElementCount;t++){for(var i=!1,o=0;o<a.mapObject.currentTiles.childElementCount;o++)i||a.mapObject.currentTiles.children[o].id!==e.children[t].id||(i=!0);i?e.children[t].style.display="none":e.removeChild(e.children[t])}},i))},g.prototype.tileProcess=function(e,t,i){for(var o=0;o<this.tiles.length;o++){var n,l,a=this.tiles[o],r=null,s=this.mapObject.element.id;"Pan"===e?(l=document.getElementById(s+"_tile_"+o),n=!1,r=Y.isNullOrUndefined(l)?(n=!0,l=Y.createElement("div",{id:s+"_tile_"+o}),Y.createElement("img")):(l.style.removeProperty("display"),l.children[0]),!n&&r&&r.src!==a.src&&(r.src=a.src),l.style.position="absolute",l.style.left=a.left+"px",l.style.top=a.top+"px",l.style.height=a.height+"px",l.style.width=a.width+"px",n&&(r.setAttribute("height","256px"),r.setAttribute("width","256px"),r.setAttribute("src",a.src),r.setAttribute("alt",this.mapObject.getLocalizedLabel("ImageNotFound")),r.style.setProperty("user-select","none"),l.appendChild(r),t.appendChild(l))):((r=Y.createElement("img")).setAttribute("height","256px"),r.setAttribute("width","256px"),r.setAttribute("src",a.src),r.style.setProperty("user-select","none"),r.setAttribute("alt",this.mapObject.getLocalizedLabel("ImageNotFound")),(l=Y.createElement("div",{id:s+"_tile_"+o})).style.position="absolute",l.style.left=a.left+"px",l.style.top=a.top+"px",l.style.height=a.height+"px",l.style.width=a.width+"px",l.appendChild(r),t&&t.appendChild(l)),!i&&o===this.tiles.length-1&&document.getElementById(this.mapObject.element.id+"_animated_tiles_old")&&I(this.mapObject.element.id+"_animated_tiles_old")}},g.prototype.tileAnimation=function(e,t,i){var o=document.getElementById(this.mapObject.element.id+"_tile_parent"),n=document.getElementById(this.mapObject.element.id+"_animated_tiles"),l=document.getElementById(this.mapObject.element.id+"_tiles"),a="2";if(0===e.indexOf("ZoomOut")||"Reset"===e){for(l.style.zIndex="1",o.style.zIndex="0";1<=l.childElementCount;)l.removeChild(l.children[0]);t=0,i=document.getElementById(this.mapObject.element.id+"_tile_parent").getClientRects()[0].height/4,a=0===e.indexOf("ZoomOut")?"0.5":"0.2"}Y.isNullOrUndefined(n)||(n.style.transition="Disable"===Y.animationMode?"0ms":0===this.mapObject.layersCollection[0].animationDuration&&"Enable"===Y.animationMode?"1000ms":this.mapObject.layersCollection[0].animationDuration+"ms",n.style.transform="translate("+t+"px, "+i+"px) scale("+a+")")},g.prototype.panTileMap=function(e,t,i){this.mapObject.tileZoomLevel<=this.mapObject.tileZoomScale&&this.mapObject.initialCheck&&(this.mapObject.tileZoomLevel=this.mapObject.tileZoomScale);var o=this.mapObject.tileZoomLevel,n=256*Math.pow(2,o),l=e/2-n/2,a=t/2-n/2,r=R(i,o,{x:l,y:a},this.isMapCoordinates),s=this.mapObject.zoomNotApplied?0:20;return l-=r.x-e/2,a=a-(r.y-t/2)+s,this.mapObject.scale=Math.pow(2,o-1),(Y.isNullOrUndefined(this.mapObject.tileTranslatePoint)||0===this.mapObject.tileTranslatePoint.y&&0===this.mapObject.tileTranslatePoint.x||Y.isNullOrUndefined(this.mapObject.previousTileWidth)||Y.isNullOrUndefined(this.mapObject.previousTileHeight))&&(this.mapObject.previousTileWidth=e,this.mapObject.previousTileHeight=t),Y.isNullOrUndefined(this.mapObject.tileTranslatePoint)||!Y.isNullOrUndefined(i.x)||1!==this.mapObject.zoomSettings.zoomFactor&&this.mapObject.zoomSettings.zoomFactor===o&&this.mapObject.defaultState||e===this.mapObject.previousTileWidth&&t===this.mapObject.previousTileHeight||(r=l-(this.mapObject.previousTileWidth/2-n/2),i=a-(this.mapObject.previousTileHeight/2-n/2+s),this.mapObject.tileTranslatePoint.x=this.mapObject.tileTranslatePoint.x+r,this.mapObject.tileTranslatePoint.y=this.mapObject.tileTranslatePoint.y+i),Y.isNullOrUndefined(this.mapObject.tileTranslatePoint)||this.mapObject.zoomNotApplied||(0===this.mapObject.tileTranslatePoint.x||this.mapObject.tileTranslatePoint.x===l||this.mapObject.centerPositionChanged||(l=this.mapObject.tileTranslatePoint.x),0===this.mapObject.tileTranslatePoint.y)||this.mapObject.tileTranslatePoint.y===a||this.mapObject.centerPositionChanged||(a=this.mapObject.tileTranslatePoint.y),this.mapObject.translatePoint=new J((l-.01*this.mapObject.zoomSettings.zoomFactor)/this.mapObject.scale,(a-.01*this.mapObject.zoomSettings.zoomFactor)/this.mapObject.scale),this.mapObject.previousTileWidth=e,this.mapObject.previousTileHeight=t,new J(l,a)},g.prototype.destroy=function(){this.mapObject=null,this.groupElements=[],this.layerObject=null,this.currentLayer=null,this.rectBounds=null,this.tiles=[],this.clipRectElement=null,this.tileSvgObject=null,this.ajaxModule=null,this.ajaxResponse=[],this.layerGroup=null,Y.isNullOrUndefined(this.bing)||this.bing.destroy(),this.bing=null};var hn=g;function g(e){this.isMapCoordinates=!0,this.horizontalPan=!1,this.horizontalPanXCount=0,this.mapObject=e,this.ajaxModule=new Y.Fetch,this.ajaxResponse=[]}cn.prototype.renderAnnotationElements=function(){var i=this,e=this.map.element.id+"_Secondary_Element",o=Y.createElement("div",{id:this.map.element.id+"_Annotations_Group"});o.style.position="absolute",o.style.top="0px",o.style.left="0px",this.map.annotations.map(function(e,t){null!==e.content&&i.createAnnotationTemplate(o,e,t)}),0<o.childElementCount&&!Y.isNullOrUndefined(Z(e))&&Z(e).appendChild(o),this.map.renderReactTemplates()},cn.prototype.createAnnotationTemplate=function(e,t,o){var n,l,a=this,i=this.map,r=i.availableSize,s=Y.createElement("div",{id:i.element.id+"_Annotation_"+o}),d=(s.style.cssText="position: absolute; z-index:"+t.zIndex+";",{cancel:!1,name:tn,content:t.content,annotation:t}),p=(this.map.trigger(tn,d,function(e){if(!d.cancel)if((n=pt(d.content,a.map))&&n(a.map,a.map,d.content,a.map.element.id+"_ContentTemplate_"+o).length)for(var t=(l=Array.prototype.slice.call(n(a.map,a.map,d.content,a.map.element.id+"_ContentTemplate_"+o))).length,i=0;i<t;i++)s.appendChild(l[i]);else s.appendChild(Y.createElement("div",{innerHTML:d.content}))}),Lt(s.cloneNode(!0),i.element)),h=i.element.getBoundingClientRect(),m=i.svgObject.getBoundingClientRect(),c=Math.abs(m.left-h.left),u=Math.abs(m.top-h.top),i=Y.isNullOrUndefined(t.x)?"0%":t.x,h=Y.isNullOrUndefined(t.y)?"0%":t.y,g=-1<i.indexOf("%")?r.width/100*parseFloat(i):parseFloat(i),y=-1<h.indexOf("%")?r.height/100*parseFloat(h):parseFloat(h);switch(c="None"===t.horizontalAlignment?c+g:c,u="None"===t.verticalAlignment?u+y:u,t.verticalAlignment){case"Near":u+=y;break;case"Center":u=u+y+(m.height/2-p.height/2);break;case"Far":u=u+m.height+y-p.height}switch(t.horizontalAlignment){case"Near":c+=g;break;case"Center":c=c+g+(m.width/2-p.width/2);break;case"Far":c=c+m.width+g-p.width}s.style.left=c+"px",s.style.top=u+"px",e.appendChild(s)},cn.prototype.getModuleName=function(){return"Annotations"},cn.prototype.destroy=function(){this.map=null};var mn=cn;function cn(e){this.map=e}un=function(e,t){return(un=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};var un,gn,i=function(e,t){function i(){this.constructor=e}un(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},y=function(e,t,i,o){var n,l=arguments.length,a=l<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;0<=r;r--)(n=e[r])&&(a=(l<3?n(a):3<l?n(t,i,a):n(t,i))||a);return 3<l&&a&&Object.defineProperty(t,i,a),a},i=(gn=Y.Component,i(f,gn),Object.defineProperty(f.prototype,"isShapeSelected",{get:function(){return this.mapSelect},enumerable:!0,configurable:!0}),f.prototype.mergePersistMapsData=function(){var e;try{i=window.localStorage}catch(e){i=null}if(Y.isNullOrUndefined(i)||(e=window.localStorage.getItem(this.getModuleName()+this.element.id)),!Y.isNullOrUndefined(e)&&""!==e){var t=JSON.parse(e),i=Object.keys(t);this.isProtectedOnChange=!0;for(var o=0,n=i;o<n.length;o++){var l=n[o];"object"!=typeof this[l]||Y.isNullOrUndefined(this[l])?this[l]=t[l]:Y.extend(this[l],t[l])}this.isProtectedOnChange=!1}},f.prototype.getLocalizedLabel=function(e){return this.localeObject.getConstant(e)},f.prototype.preRender=function(){this.isDevice=Y.Browser.isDevice,this.initPrivateVariable(),this.allowServerDataBinding=!1,this.unWireEVents(),this.wireEVents(),this.setCulture()},f.prototype.renderElements=function(){this.isDestroyed||(this.trigger("load",{maps:this}),this.createSVG(),this.findBaseAndSubLayers(),!Y.isNullOrUndefined(this.markerModule)&&this.markerModule.getMapsInstance()&&this.markerModule.initializeMarkerClusterList(),this.createSecondaryElement(),this.addTabIndex(),this.themeStyle=function(e){var t,i;switch(e.toLowerCase()){case"materialdark":i="#303030";break;case"fabricdark":i="#201F1F";break;case"bootstrapdark":i="#1A1A1A"}switch(e.toLowerCase()){case"materialdark":case"fabricdark":case"bootstrapdark":t={backgroundColor:i,areaBackgroundColor:i,titleFontColor:"#FFFFFF",titleFontSize:"14px",subTitleFontColor:"#FFFFFF",legendTitleFontColor:"#DADADA",legendTextColor:"#DADADA",dataLabelFontColor:"#DADADA",tooltipFontColor:"#FFFFFF",tooltipFillColor:"#363F4C",zoomFillColor:"#FFFFFF",labelFontFamily:"Roboto, Noto, Sans-serif",fontFamily:"Roboto, Noto, Sans-serif",fontSize:"12px",legendFontSize:"12px",fontWeight:"Medium",titleFontWeight:"Medium",zoomSelectionColor:"#e61576",shapeFill:"#A6A6A6",shapeBorderColor:"#000000",rectangleZoomFillColor:"#d3d3d3",rectangleZoomFillOpacity:.5,rectangleZoomBorderColor:"#009900",legendBorderColor:"#000000",legendBorderWidth:0,tooltipBorderColor:"transparent",zoomButtonRadius:30};break;case"highcontrast":t={backgroundColor:"#000000",areaBackgroundColor:"#000000",titleFontColor:"#FFFFFF",titleFontSize:"14px",subTitleFontColor:"#FFFFFF",legendTitleFontColor:"#FFFFFF",legendTextColor:"#FFFFFF",dataLabelFontColor:"#000000",tooltipFontColor:"#000000",tooltipFillColor:"#ffffff",zoomFillColor:"#FFFFFF",fontFamily:"Roboto, Noto, Sans-serif",fontSize:"12px",legendFontSize:"12px",fontWeight:"Medium",labelFontFamily:"Roboto, Noto, Sans-serif",titleFontWeight:"Medium",zoomSelectionColor:"#e61576",shapeFill:"#A6A6A6",shapeBorderColor:"#000000",rectangleZoomFillColor:"#d3d3d3",rectangleZoomFillOpacity:.5,rectangleZoomBorderColor:"#009900",legendBorderColor:"#000000",legendBorderWidth:0,tooltipBorderColor:"transparent",zoomButtonRadius:30};break;case"bootstrap4":t={backgroundColor:"#FFFFFF",areaBackgroundColor:"#FFFFFF",titleFontColor:"#212529",subTitleFontColor:"#212529",legendTitleFontColor:"#212529",legendTextColor:"#212529",dataLabelFontColor:"#212529",tooltipFontColor:"#FFFFFF",tooltipFillColor:"#000000",zoomFillColor:"#5B6269",fontFamily:"HelveticaNeue-Medium",fontSize:"12px",fontWeight:"Medium",titleFontSize:"16px",legendFontSize:"14px",tooltipFillOpacity:1,tooltipTextOpacity:.9,labelFontFamily:"HelveticaNeue-Medium",titleFontWeight:"Medium",zoomSelectionColor:"#e61576",shapeFill:"#A6A6A6",shapeBorderColor:"#000000",rectangleZoomFillColor:"#d3d3d3",rectangleZoomFillOpacity:.5,rectangleZoomBorderColor:"#009900",legendBorderColor:"#000000",legendBorderWidth:0,tooltipBorderColor:"transparent",zoomButtonRadius:30};break;case"tailwind":t={backgroundColor:"rgba(255,255,255, 0.0)",areaBackgroundColor:"rgba(255,255,255, 0.0)",titleFontColor:"#374151",subTitleFontColor:"#374151",legendTitleFontColor:"#374151",legendTextColor:"#6B7280",dataLabelFontColor:"#505967",tooltipFontColor:"#F9FAFB",tooltipFillColor:"#111827",zoomFillColor:"#6b7280",fontFamily:"Inter",fontSize:"12px",fontWeight:"Medium",titleFontSize:"14px",legendFontSize:"12px",tooltipFillOpacity:1,tooltipTextOpacity:.9,labelFontFamily:"Inter",titleFontWeight:"500",zoomSelectionColor:"#374151",shapeFill:"#E5E7EB",shapeBorderColor:"#000000",rectangleZoomFillColor:"#d3d3d3",rectangleZoomFillOpacity:.5,rectangleZoomBorderColor:"#009900",legendBorderColor:"#000000",legendBorderWidth:0,tooltipBorderColor:"transparent",zoomButtonRadius:30};break;case"tailwinddark":t={backgroundColor:"rgba(255,255,255, 0.0)",areaBackgroundColor:"rgba(255,255,255, 0.0)",titleFontColor:"#D1D5DB",subTitleFontColor:"#D1D5DB",legendTitleFontColor:"#D1D5DB",legendTextColor:"#D1D5DB",dataLabelFontColor:"#D1D5DB",tooltipFontColor:"#1F2937",tooltipFillColor:"#F9FAFB",zoomFillColor:"#D1D5DB",fontFamily:"Inter",fontSize:"12px",fontWeight:"Medium",titleFontSize:"14px",legendFontSize:"12px",tooltipFillOpacity:1,tooltipTextOpacity:.9,labelFontFamily:"Inter",titleFontWeight:"500",zoomSelectionColor:"#F3F4F6",shapeFill:"#374151",shapeBorderColor:"#000000",rectangleZoomFillColor:"#d3d3d3",rectangleZoomFillOpacity:.5,rectangleZoomBorderColor:"#009900",legendBorderColor:"#000000",legendBorderWidth:0,tooltipBorderColor:"transparent",zoomButtonRadius:30};break;case"tailwind3":t={backgroundColor:"rgba(255,255,255, 0.0)",areaBackgroundColor:"rgba(255,255,255, 0.0)",titleFontColor:"#111827",subTitleFontColor:"#111827",legendTitleFontColor:"#111827",legendTextColor:"#6B7280",dataLabelFontColor:"#111827",tooltipFontColor:"#F9FAFB",tooltipFillColor:"#111827",zoomFillColor:"#374151",fontFamily:"Inter",fontSize:"12px",fontWeight:"400",titleFontSize:"14px",legendFontSize:"12px",tooltipFillOpacity:1,tooltipTextOpacity:1,labelFontFamily:"Inter",titleFontWeight:"500",zoomSelectionColor:"#6B7280",shapeFill:"#F3F4F6",shapeBorderColor:"#E5E7EB",rectangleZoomFillColor:"#818CF8",rectangleZoomFillOpacity:.3,rectangleZoomBorderColor:"#4F46E5",legendBorderColor:"#E5E7EB",legendBorderWidth:0,tooltipBorderColor:"#111827",zoomButtonRadius:32};break;case"tailwind3dark":t={backgroundColor:"rgba(255,255,255, 0.0)",areaBackgroundColor:"rgba(255,255,255, 0.0)",titleFontColor:"#FFFFFF",subTitleFontColor:"#FFFFFF",legendTitleFontColor:"#FFFFFF",legendTextColor:"#9CA3AF",dataLabelFontColor:"#FFFFFF",tooltipFontColor:"#1F2937",tooltipFillColor:"#F9FAFB",zoomFillColor:"#D1D5DB",fontFamily:"Inter",fontSize:"12px",fontWeight:"400",titleFontSize:"14px",legendFontSize:"12px",tooltipFillOpacity:1,tooltipTextOpacity:1,labelFontFamily:"Inter",titleFontWeight:"600",zoomSelectionColor:"#9CA3AF",shapeFill:"#282F3C",shapeBorderColor:"#282F3C",rectangleZoomFillColor:"#3730A3",rectangleZoomFillOpacity:.3,rectangleZoomBorderColor:"#6366F1",legendBorderColor:"#282F3C",legendBorderWidth:0,tooltipBorderColor:"#F9FAFB",zoomButtonRadius:30};break;case"bootstrap5":t={backgroundColor:"transparent",areaBackgroundColor:"transparent",titleFontColor:"#212529",subTitleFontColor:"#212529",legendTitleFontColor:"#212529",legendTextColor:"#212529",dataLabelFontColor:"#212529",tooltipFontColor:"#FFFFFF",tooltipFillColor:"#000000",zoomFillColor:"#6E757D",fontFamily:"Segoe UI",fontSize:"10px",fontWeight:"400",titleFontSize:"14px",subTitleFontSize:"12px",legendFontSize:"10px",tooltipFillOpacity:.9,tooltipTextOpacity:1,labelFontFamily:"Segoe UI",titleFontWeight:"400",zoomSelectionColor:"#212529",zoomBorderColor:"#DEE2E6",shapeFill:"#E9ECEF",shapeBorderColor:"#DEE2E6",zoomButtonRadius:32,rectangleZoomBorderColor:"#0D6EFD",rectangleZoomFillColor:"#86B7FE",rectangleZoomFillOpacity:.3,legendBorderColor:"#000000",legendBorderWidth:0,tooltipBorderColor:"transparent"};break;case"bootstrap5dark":t={backgroundColor:"transparent",areaBackgroundColor:"transparent",titleFontColor:"#DEE2E6",subTitleFontColor:"#DEE2E6",legendTitleFontColor:"#DEE2E6",legendTextColor:"#DEE2E6",dataLabelFontColor:"#DEE2E6",tooltipFontColor:"#212529",tooltipFillColor:"#FFFFFF",zoomFillColor:"#ADB5BD",fontFamily:"Segoe UI",fontSize:"10px",fontWeight:"400",titleFontSize:"14px",subTitleFontSize:"12px",legendFontSize:"10px",tooltipFillOpacity:.9,tooltipTextOpacity:1,labelFontFamily:"Segoe UI",titleFontWeight:"400",zoomSelectionColor:"#F8F9FA",zoomBorderColor:"#495057",shapeFill:"#343A40",shapeBorderColor:"#495057",zoomButtonRadius:32,rectangleZoomFillColor:"#86B7FE",rectangleZoomBorderColor:"#0D6EFD",rectangleZoomFillOpacity:.3,legendBorderColor:"#000000",legendBorderWidth:0,tooltipBorderColor:"transparent"};break;case"fluent":t={backgroundColor:"rgba(255,255,255, 0.0)",areaBackgroundColor:"rgba(255,255,255, 0.0)",titleFontColor:"#201F1E",subTitleFontColor:"#201F1E",legendTitleFontColor:"#201F1E",legendTextColor:"#201F1E",dataLabelFontColor:"#201F1E",tooltipFontColor:"#323130",tooltipFillColor:"#FFFFFF",zoomFillColor:"#A19F9D",fontFamily:"Segoe UI",fontSize:"12px",fontWeight:"Medium",titleFontSize:"14px",legendFontSize:"12px",tooltipFillOpacity:1,tooltipTextOpacity:1,labelFontFamily:"Segoe UI",titleFontWeight:"600",zoomSelectionColor:"#323130",shapeFill:"#F3F2F1",shapeBorderColor:"#000000",rectangleZoomFillColor:"#d3d3d3",rectangleZoomFillOpacity:.5,rectangleZoomBorderColor:"#009900",legendBorderColor:"#000000",legendBorderWidth:0,tooltipBorderColor:"transparent",zoomButtonRadius:30};break;case"fluentdark":t={backgroundColor:"rgba(255,255,255, 0.0)",areaBackgroundColor:"rgba(255,255,255, 0.0)",titleFontColor:"#F3F2F1",subTitleFontColor:"#F3F2F1",legendTitleFontColor:"#F3F2F1",legendTextColor:"#F3F2F1",dataLabelFontColor:"#F3F2F1",tooltipFontColor:"#F3F2F1",tooltipFillColor:"#252423",zoomFillColor:"#484644",fontFamily:"Segoe UI",fontSize:"12px",fontWeight:"Medium",titleFontSize:"14px",legendFontSize:"12px",tooltipFillOpacity:1,tooltipTextOpacity:1,labelFontFamily:"Segoe UI",titleFontWeight:"600",zoomSelectionColor:"#F3F2F1",shapeFill:"#252423",shapeBorderColor:"#000000",rectangleZoomFillColor:"#d3d3d3",rectangleZoomFillOpacity:.5,rectangleZoomBorderColor:"#009900",legendBorderColor:"#000000",legendBorderWidth:0,tooltipBorderColor:"transparent",zoomButtonRadius:30};break;case"material3":t={backgroundColor:"transparent",areaBackgroundColor:"transparent",titleFontColor:"#1C1B1F",subTitleFontColor:"#1C1B1F",legendTitleFontColor:"#1C1B1F",legendTextColor:"#49454E",dataLabelFontColor:"#1C1B1F",tooltipFontColor:"#F4EFF4",tooltipFillColor:"#313033",zoomFillColor:"#49454E",fontFamily:"Roboto",fontSize:"14px",titleFontSize:"16px",subTitleFontSize:"14px",legendFontSize:"12px",tooltipFillOpacity:1,tooltipTextOpacity:1,labelFontFamily:"Roboto",titleFontWeight:"500",fontWeight:"400",zoomSelectionColor:"#49454E",shapeFill:"#E7E0EC",shapeBorderColor:"#000000",rectangleZoomFillColor:"#6750A4",rectangleZoomFillOpacity:.24,rectangleZoomBorderColor:"#6750A4",legendBorderColor:"#000000",legendBorderWidth:0,tooltipBorderColor:"transparent",zoomButtonRadius:30};break;case"material3dark":t={backgroundColor:"transparent",areaBackgroundColor:"transparent",titleFontColor:"#E6E1E5",subTitleFontColor:"#E6E1E5",legendTitleFontColor:"#E6E1E5",legendTextColor:"#CAC4D0",dataLabelFontColor:"#E6E1E5",tooltipFontColor:"#313033",tooltipFillColor:"#E6E1E5",zoomFillColor:"#E6E1E5",fontFamily:"Roboto",fontSize:"14px",titleFontSize:"16px",subTitleFontSize:"14px",legendFontSize:"12px",tooltipFillOpacity:1,tooltipTextOpacity:1,labelFontFamily:"Roboto",titleFontWeight:"500",fontWeight:"400",zoomSelectionColor:"#E6E1E5",shapeFill:"#49454F",shapeBorderColor:"#000000",rectangleZoomFillColor:"#D0BCFF",rectangleZoomFillOpacity:.24,rectangleZoomBorderColor:"#D0BCFF",legendBorderColor:"#000000",legendBorderWidth:0,tooltipBorderColor:"transparent",zoomButtonRadius:30};break;case"fluent2":t={backgroundColor:"transparent",areaBackgroundColor:"transparent",titleFontColor:"#242424",subTitleFontColor:"#242424",legendTitleFontColor:"#242424",legendTextColor:"#242424",dataLabelFontColor:"#242424",tooltipFontColor:"#242424",tooltipFillColor:"#FFFFFF",zoomFillColor:"#D1D1D1",fontFamily:"Segoe UI",fontSize:"10px",fontWeight:"400",titleFontSize:"14px",subTitleFontSize:"12px",legendFontSize:"12px",tooltipFillOpacity:1,tooltipTextOpacity:1,labelFontFamily:"Segoe UI",titleFontWeight:"600",zoomSelectionColor:"#242424",shapeFill:"#E6E6E6",shapeBorderColor:"#EBEBEB",rectangleZoomFillColor:"#B4D6FA",rectangleZoomFillOpacity:.25,rectangleZoomBorderColor:"#0F6CBD",legendBorderColor:"#000000",legendBorderWidth:0,tooltipBorderColor:"transparent",zoomButtonRadius:32};break;case"fluent2dark":t={backgroundColor:"transparent",areaBackgroundColor:"transparent",titleFontColor:"#FFFFFF",subTitleFontColor:"#FFFFFF",legendTitleFontColor:"#FFFFFF",legendTextColor:"#FFFFFF",dataLabelFontColor:"#FFFFFF",tooltipFontColor:"#FFFFFF",tooltipFillColor:"#292929",zoomFillColor:"#666",fontFamily:"Segoe UI",fontSize:"10px",fontWeight:"400",titleFontSize:"14px",subTitleFontSize:"12px",legendFontSize:"12px",tooltipFillOpacity:1,tooltipTextOpacity:1,labelFontFamily:"Segoe UI",titleFontWeight:"600",zoomSelectionColor:"#FFFFFF",shapeFill:"#333333",shapeBorderColor:"#000000",rectangleZoomFillColor:"#0E4775",rectangleZoomFillOpacity:.25,rectangleZoomBorderColor:"#0E4775",legendBorderColor:"#000000",legendBorderWidth:0,tooltipBorderColor:"transparent",zoomButtonRadius:32};break;case"fluent2highcontrast":t={backgroundColor:"transparent",areaBackgroundColor:"transparent",titleFontColor:"#FFFFFF",subTitleFontColor:"#FFFFFF",legendTitleFontColor:"#FFFFFF",legendTextColor:"#FFFFFF",dataLabelFontColor:"#FFFFFF",tooltipFontColor:"#FFFFFF",tooltipFillColor:"#000000",zoomFillColor:"#3FF23F",fontFamily:"Segoe UI",fontSize:"10px",fontWeight:"400",titleFontSize:"14px",subTitleFontSize:"12px",legendFontSize:"12px",tooltipFillOpacity:1,tooltipTextOpacity:1,labelFontFamily:"Segoe UI",titleFontWeight:"600",zoomSelectionColor:"#FFFFFF",zoomBorderColor:"#FFFFFF",shapeFill:"#FFFFFF",shapeBorderColor:"#FFFFFF",rectangleZoomFillColor:"#1AEBFF",rectangleZoomFillOpacity:.25,rectangleZoomBorderColor:"#1AEBFF",legendBorderColor:"#FFFFFF",legendBorderWidth:1,tooltipBorderColor:"#FFF",zoomButtonRadius:32};break;default:t={backgroundColor:"#FFFFFF",areaBackgroundColor:"#FFFFFF",titleFontColor:"#424242",titleFontSize:"14px",subTitleFontColor:"#424242",legendTitleFontColor:"#757575",legendTextColor:"#757575",dataLabelFontColor:"#000000",tooltipFontColor:"#FFFFFF",tooltipFillColor:"#000000",zoomFillColor:"#737373",labelFontFamily:"Roboto, Noto, Sans-serif",fontFamily:"Roboto, Noto, Sans-serif",fontSize:"12px",legendFontSize:"12px",fontWeight:"Medium",titleFontWeight:"Medium",zoomSelectionColor:"#e61576",shapeFill:"#A6A6A6",shapeBorderColor:"#000000",rectangleZoomFillColor:"#d3d3d3",rectangleZoomFillOpacity:.5,rectangleZoomBorderColor:"#009900",legendBorderColor:"#000000",legendBorderWidth:0,tooltipBorderColor:"transparent",zoomButtonRadius:30}}return t}(this.theme),this.renderBorder(),this.renderTitle(this.titleSettings,"title",null,null),this.renderArea(),this.processRequestJsonData(),this.renderComplete(),this.isAddLayer=!!this.isTileMap&&this.isAddLayer)},f.prototype.render=function(){this.renderElements()},f.prototype.processRequestJsonData=function(){var o,n,l=this,a=this.layersCollection.length-1;this.serverProcess={request:0,response:0},Array.prototype.forEach.call(this.layersCollection,function(i,e){if(i.shapeData instanceof C.DataManager?(l.serverProcess.request++,n=i.shapeData,o=i.query instanceof C.Query?i.query:new C.Query,n.executeQuery(o).then(function(e){l.processResponseJsonData("DataManager",e,i,"ShapeData")})):(i.shapeData instanceof At||i.shapeData)&&!Y.isNullOrUndefined(i.shapeData.dataOptions)&&l.processAjaxRequest(i,i.shapeData,"ShapeData"),i.dataSource instanceof C.DataManager&&(l.serverProcess.request++,n=i.dataSource,o=i.query instanceof C.Query?i.query:new C.Query,n.executeQuery(o).then(function(e){i.dataSource=Rt(e)})),0<i.markerSettings.length)for(var t=0;t<i.markerSettings.length;t++)!function(t){i.markerSettings[t].dataSource instanceof C.DataManager&&(l.serverProcess.request++,n=i.markerSettings[t].dataSource,o=i.markerSettings[t].query instanceof C.Query?i.markerSettings[t].query:new C.Query,n.executeQuery(o).then(function(e){i.markerSettings[t].dataSource=Rt(e)}))}(t);if(0<i.bubbleSettings.length)for(t=0;t<i.bubbleSettings.length;t++)!function(t){i.bubbleSettings[t].dataSource instanceof C.DataManager&&(l.serverProcess.request++,n=i.bubbleSettings[t].dataSource,o=i.bubbleSettings[t].query instanceof C.Query?i.bubbleSettings[t].query:new C.Query,n.executeQuery(o).then(function(e){i.bubbleSettings[t].dataSource=Rt(e)}))}(t);(i.dataSource instanceof At||!Y.isNullOrUndefined(i.dataSource)&&!Y.isNullOrUndefined(i.dataSource.dataOptions))&&l.processAjaxRequest(i,i.dataSource,"DataSource"),l.serverProcess.request===l.serverProcess.response&&a===e&&l.processResponseJsonData(null)})},f.prototype.processAjaxRequest=function(o,e,n){var l=this,t=(this.serverProcess.request++,new Y.Fetch(e.dataOptions,e.type,e.contentType));t.onSuccess=function(e){var t,i;Y.isNullOrUndefined(e.type)||"application/octet-stream"!==e.type?l.processResponseJsonData("Fetch",e,o,n):(t=new FileReader,i=l,t.onload=function(){e=JSON.parse(t.result.toString()),i.processResponseJsonData("Fetch",e,o,n)},t.readAsText(e))},t.send(e.sendData)},f.prototype.processResponseJsonData=function(e,t,i,o){if(this.serverProcess.response++,e&&("ShapeData"===o?i.shapeData="DataManager"===e?Rt(t):t:i.dataSource="DataManager"===e?Rt(t):t),Y.isNullOrUndefined(e)||this.serverProcess.request!==this.serverProcess.response)Y.isNullOrUndefined(e)&&this.renderMap();else{var n=this.layersCollection;this.layersCollection=[];for(var l=0;l<n.length;l++)n[l].isBaseLayer&&this.layersCollection.push(n[l]);for(var a=0;a<n.length;a++)n[a].isBaseLayer||this.layersCollection.push(n[a]);this.renderMap()}},f.prototype.renderMap=function(){this.legendModule&&this.legendSettings.visible&&this.legendModule.renderLegend(),this.createTile(),this.zoomSettings.enable&&this.zoomModule&&this.zoomModule.createZoomingToolbars(),Y.isNullOrUndefined(this.dataLabelModule)||(this.dataLabelModule.dataLabelCollections=[]),this.mapLayerPanel.measureLayerPanel(),Y.isNullOrUndefined(this.svgObject)||this.element.appendChild(this.svgObject),this.setSecondaryElementPosition();for(var e,t,i,o,n,l,a=0;a<this.layers.length;a++){if(this.layers[a].selectionSettings&&this.layers[a].selectionSettings.enable&&0<this.layers[a].initialShapeSelection.length&&this.checkInitialRender){for(var r=this.layers[a].selectionSettings.enableMultiSelect,s=(this.layers[a].selectionSettings.enableMultiSelect=r||!0,this.layers[a].initialShapeSelection),d=0;d<this.layers[a].initialShapeSelection.length;d++)this.shapeSelection(a,s[d].shapePath,s[d].shapeValue,!0);this.layers[a].selectionSettings.enableMultiSelect=r,a===this.layers.length-1&&(this.checkInitialRender=!1)}if(!this.isResize)for(var p=0;p<this.layers[a].markerSettings.length;p++)if(this.layers[a].markerSettings[p].selectionSettings&&this.layers[a].markerSettings[p].selectionSettings.enable&&0<this.layers[a].markerSettings[p].initialMarkerSelection.length)for(var h=this.layers[a].markerSettings[p].initialMarkerSelection,d=0;d<h.length;d++)this.markerInitialSelection(a,p,this.layers[a].markerSettings[p],h[d].latitude,h[d].longitude)}Y.isNullOrUndefined(document.getElementById(this.element.id+"_tile_parent"))||(n=this.svgObject.getBoundingClientRect(),e=document.getElementById(this.element.id),t=document.getElementById(this.element.id+"_tile_parent"),i=document.getElementById(this.element.id+"_tiles"),l=t.getBoundingClientRect(),o=void 0,o=parseFloat(t.style.left),n=n.bottom-l.bottom-e.offsetTop,l=parseFloat(t.style.top),l=n<=11?l:Y.isNullOrUndefined(this.legendModule)||"Bottom"!==this.legendSettings.position?2*l:this.mapAreaRect.y,o=!(n<=11)&&Y.isNullOrUndefined(this.legendModule)?2*o:o,t.style.top=l+"px",t.style.left=o+"px",i.style.top=l+"px",i.style.left=o+"px",!Y.isNullOrUndefined(this.legendModule)&&0<this.legendModule.totalPages.length&&(t.style.height=i.style.height=this.legendModule.legendTotalRect.height+"px",t.style.width=i.style.width=this.legendModule.legendTotalRect.width+"px")),this.arrangeTemplate(),this.annotationsModule&&"0px"!==this.width&&"0px"!==this.height&&"0%"!==this.width&&"0%"!==this.height&&this.annotationsModule.renderAnnotationElements(),this.element.style.outline="none",this.element.style.position="relative";for(a=0;a<document.getElementsByTagName("path").length-1;a++)-1<document.getElementsByTagName("path")[a].id.indexOf("shapeIndex")&&(document.getElementsByTagName("path")[a].style.outline="none");this.zoomingChange(),this.zoomModule&&this.isDevice&&this.zoomModule.removeToolbarOpacity(this.isTileMap?Math.round(this.tileZoomLevel):this.mapScaleValue,this.element.id+"_Zooming_"),this.isZoomByPosition||this.zoomNotApplied||this.triggerZoomEvent(),this.isResize=!1},f.prototype.triggerZoomEvent=function(){var e=this.getMinMaxLatitudeLongitude(),e={maps:this,isResized:this.isResize,minLatitude:e.minLatitude,maxLatitude:e.maxLatitude,minLongitude:e.minLongitude,maxLongitude:e.maxLongitude,cancel:!1,name:"Loaded"};this.trigger("loaded",e)},f.prototype.markerSelection=function(e,t,i,o){var n={color:e.border.color,width:e.border.width/t.scale,opacity:e.border.opacity},n={opacity:e.opacity,fill:e.fill,border:n,target:i.id,cancel:!1,data:o,maps:t};E("MarkerselectionMap")?yt("MarkerselectionMap","MarkerselectionMapStyle",n):document.body.appendChild(gt("MarkerselectionMap","MarkerselectionMapStyle",n)),0!==this.selectedMarkerElementId.length&&!e.enableMultiSelect||("g"===i.tagName?(i.children[0].setAttribute("class","MarkerselectionMapStyle"),this.selectedMarkerElementId.push(i.children[0].id)):(i.setAttribute("class","MarkerselectionMapStyle"),this.selectedMarkerElementId.push(i.id)))},f.prototype.markerInitialSelection=function(e,t,i,o,n){var l=i.selectionSettings;if(l.enable)for(var a=0;a<i.dataSource.length;a++){var r,s=i.dataSource[a];s.latitude===o&&s.longitude===n&&(r=this.element.id+"_LayerIndex_"+e+"_MarkerIndex_"+t+"_dataIndex_"+a,this.markerSelection(l,this,E(r),s))}},f.prototype.renderArea=function(){var e=this.mapsArea.border.width,t=this.mapsArea.background;(0<e||t||this.themeStyle.areaBackgroundColor)&&(e={opacity:Y.isNullOrUndefined(this.mapsArea.border.opacity)?1:this.mapsArea.border.opacity,color:this.mapsArea.border.color,width:this.mapsArea.border.width},t=new Q(this.element.id+"_MapAreaBorder",t||this.themeStyle.areaBackgroundColor,e,1,this.mapAreaRect),this.svgObject.appendChild(this.renderer.drawRectangle(t)))},f.prototype.addTabIndex=function(){this.element.setAttribute("aria-label",this.description||"Maps Element"),this.element.setAttribute("role","region"),this.element.tabIndex=this.tabIndex},f.prototype.setSecondaryElementPosition=function(){var e=Z(this.element.id+"_Secondary_Element"),t=this.element.getBoundingClientRect(),i=Z(this.element.id+"_svg");Y.isNullOrUndefined(i)||(i=i.getBoundingClientRect(),e.style.left=Math.max(i.left-t.left,0)+"px",e.style.top=Math.max(i.top-t.top,0)+"px")},f.prototype.zoomingChange=function(){if(Z(this.element.id+"_Layer_Collections")&&this.zoomModule&&(this.zoomModule.layerCollectionEle=Z(this.element.id+"_Layer_Collections")),this.isTileMap&&Z(this.element.id+"_Tile_SVG")&&Z(this.element.id+"_tile_parent")){var e=Z(this.element.id+"_tile_parent"),t=Z(this.element.id+"_Tile_SVG"),i=Z(this.element.id+"_Tile_SVG_Parent"),o=e.getBoundingClientRect(),n=t.getBoundingClientRect(),l=o.left-n.left,a=o.top-n.top,r=(i.style.left=l+"px",i.style.top=a+"px",!Y.isNullOrUndefined(this.legendModule)&&0<this.legendModule.totalPages.length&&(e.style.width=t.style.width=this.legendModule.legendTotalRect.width.toString(),e.style.height=t.style.height=this.legendModule.legendTotalRect.height.toString(),i.style.width=this.legendModule.legendTotalRect.width+"px",i.style.height=this.legendModule.legendTotalRect.height+"px"),document.getElementsByClassName("template"));if(!Y.isNullOrUndefined(r)&&0<r.length)for(var s=0;s<r.length;s++){var d=r[s];d.style.left=l+"px",d.style.top=a+"px"}}if(0<=this.zoomSettings.zoomFactor){this.zoomModule&&this.zoomModule.toolBarGroup&&this.zoomSettings.enable&&this.zoomModule.alignToolBar();var p=document.getElementById(this.element.id+"_Layer_Collections");if(!Y.isNullOrUndefined(p)&&0<p.childElementCount)for(s=0;s<p.childNodes.length;s++){var h=p.childNodes[s];if("g"===h.tagName&&-1===h.id.indexOf("_Legend_Group"))for(var m=parseFloat(h.id.split("_LayerIndex_")[1].split("_")[0]),c=0;c<h.childNodes.length;c++){var u=h.childNodes[c];-1<u.id.indexOf("_Markers_Group")||-1<u.id.indexOf("_bubble_Group")||-1<u.id.indexOf("_dataLableIndex_Group")||Pt(u,m,this.scale,this)}}this.zoomModule&&(this.previousScale!==this.scale||this.zoomNotApplied||this.isZoomByPosition)&&this.zoomModule.applyTransform(this,!1,!0)}},f.prototype.createSecondaryElement=function(){var e;Y.isNullOrUndefined(document.getElementById(this.element.id+"_Secondary_Element"))&&((e=Y.createElement("div",{id:this.element.id+"_Secondary_Element"})).style.cssText="position: relative;z-index:2;",this.element.appendChild(e))},f.prototype.getMinMaxLatitudeLongitude=function(){var e,t=document.getElementById(this.element.id);return Y.isNullOrUndefined(t)?{minLatitude:0,maxLatitude:0,minLongitude:0,maxLongitude:0}:(t=t.getBoundingClientRect(),e=st(this.margin.left),e=this.isTileMap?this.pointToLatLong(this.mapAreaRect.x-e,-this.mapAreaRect.y):this.getGeoLocation(0,this.mapAreaRect.x+t.left,this.mapAreaRect.y),t=this.isTileMap?this.pointToLatLong(this.mapAreaRect.width,this.mapAreaRect.height-this.mapAreaRect.y):this.getGeoLocation(0,this.mapAreaRect.x+t.left+this.mapAreaRect.width,this.mapAreaRect.y+this.mapAreaRect.height),{minLatitude:e.latitude,maxLatitude:t.latitude,minLongitude:e.longitude,maxLongitude:t.longitude})},f.prototype.arrangeTemplate=function(){var l=this,e=(document.getElementById(this.element.id+"_Legend_Border")&&(document.getElementById(this.element.id+"_Legend_Border").style.pointerEvents="none"),document.getElementsByClassName(this.element.id+"_template"));!Y.isNullOrUndefined(e)&&0<e.length&&Z(this.element.id+"_Layer_Collections")&&!this.isTileMap&&Array.prototype.forEach.call(e,function(e){var t,i,o=0,n=0;!Y.isNullOrUndefined(e)&&0<e.childElementCount&&(t=Z(l.element.id+"_Layer_Collections").getBoundingClientRect(),i=Z(e.id).getBoundingClientRect(),-1===e.id.indexOf("Marker")&&(o=l.isTileMap?0:t.left<i.left?-Math.abs(i.left-t.left):Math.abs(i.left-t.left),n=l.isTileMap?0:t.top<i.top?-Math.abs(i.top-t.top):Math.abs(i.top-t.top)),Array.prototype.forEach.call(e.childNodes,function(e){-1===e.id.indexOf("Marker")&&(e.style.left=parseFloat(e.style.left)+o+"px",e.style.top=parseFloat(e.style.top)+n+"px",e.style.transform="translate(-50%, -50%)")}))})},f.prototype.createTile=function(){var e,t,i=this.layersCollection[0];i.isBaseLayer&&!Y.isNullOrUndefined(i.urlTemplate)&&""!==i.urlTemplate&&Y.isNullOrUndefined(i.shapeData)&&(I(this.element.id+"_tile_parent"),I(this.element.id+"_tiles"),I("animated_tiles"),i=Y.createElement("div",{id:this.element.id+"_tile_parent"}),e=st(this.margin.right),i.style.cssText="position: absolute; left: "+this.mapAreaRect.x+"px; right: "+e+"px; top: "+(this.mapAreaRect.y+0)+"px; height: "+this.mapAreaRect.height+"px; width: "+this.mapAreaRect.width+"px; overflow: hidden;",(t=Y.createElement("div",{id:this.element.id+"_tiles"})).style.cssText="position: absolute; left: "+this.mapAreaRect.x+"px;  right: "+e+"px; top: "+(this.mapAreaRect.y+0)+"px; height: "+this.mapAreaRect.height+"px; width: "+this.mapAreaRect.width+"px; overflow: hidden;",this.element.appendChild(i),this.element.appendChild(t))},f.prototype.initPrivateVariable=function(){var e;""===this.element.id&&(e=document.getElementsByClassName("e-maps").length,this.element.id="maps_control_"+e),this.renderer=new k.SvgRenderer(this.element.id),this.mapLayerPanel=new hn(this)},f.prototype.findBaseAndSubLayers=function(){var t=this,e=this.baseLayerIndex,i=[],o=[];this.layersCollection=[],Array.prototype.forEach.call(this.layers,function(e){("Layer"===e.type?i:o).push(e)});for(var n=0;n<i.length;n++){var l=i[n];if(l.visible&&e===n){l.isBaseLayer=!0,this.isTileMap=!!Y.isNullOrUndefined(l.shapeData),this.layersCollection.push(l);break}if(n===i.length-1){this.layersCollection.push(i[0]);break}}o.map(function(e){e.visible&&t.layersCollection.push(e)})},f.prototype.renderBorder=function(){var e,t=this.border.width,i=this.svgObject.querySelector("#"+this.element.id+"_MapBorder");(0<t||this.background||this.themeStyle.backgroundColor)&&Y.isNullOrUndefined(i)?(e={opacity:Y.isNullOrUndefined(this.border.opacity)?1:this.border.opacity,color:this.border.color,width:this.border.width},e=new Q(this.element.id+"_MapBorder",this.background||this.themeStyle.backgroundColor,e,1,new K(t/2,t/2,this.availableSize.width-t,this.availableSize.height-t)),this.svgObject.appendChild(this.renderer.drawRectangle(e))):i.setAttribute("fill",this.background||this.themeStyle.backgroundColor)},f.prototype.renderTitle=function(e,t,i,o){var n,l,a,r={size:e.textStyle.size,color:e.textStyle.color,fontFamily:e.textStyle.fontFamily,fontWeight:e.textStyle.fontWeight,fontStyle:e.textStyle.fontStyle,opacity:e.textStyle.opacity},s=st(this.margin.top),d=st(this.margin.bottom),p=st(this.margin.left),h=st(this.margin.right),h=Math.abs(p+h-this.availableSize.width);r.fontFamily=(Y.isNullOrUndefined(r.fontFamily)?this.themeStyle:r).fontFamily,r.fontWeight=r.fontWeight||this.themeStyle.titleFontWeight,r.size="title"===t?r.size||this.themeStyle.titleFontSize:r.size||this.themeStyle.subTitleFontSize||Ut.mapsSubTitleFont.size,e.text?(Y.isNullOrUndefined(o)&&(o=this.renderer.createGroup({id:this.element.id+"_Title_Group"})),a=q(l=it(h,e.text,r),r),i=ot(Y.isNullOrUndefined(i)?new K(p,s,this.availableSize.width,this.availableSize.height):i,Y.isNullOrUndefined(e.alignment)?"Center":e.alignment,a,t),l=new de(this.element.id+"_Map_"+t,i.x,i.y,"start",l),i=new K(i.x,i.y,a.width,a.height),(a=Me(l,r,r.color||("title"===t?this.themeStyle.titleFontColor:this.themeStyle.subTitleFontColor),o)).setAttribute("aria-label",e.text),a.setAttribute("role","region"),("title"!==t||e.subtitleSettings.text)&&"subtitle"!==t||(n=Math.abs(i.y+d-this.availableSize.height),this.mapAreaRect=new K(p,i.y+10,h,n-10)),"subtitle"!==t&&e.subtitleSettings.text?this.renderTitle(e.subtitleSettings,"subtitle",i,o):this.svgObject.appendChild(o)):(n=Math.abs(s+d-this.availableSize.height),this.mapAreaRect=new K(p,s,h,n))},f.prototype.createSVG=function(){this.removeSvg(),N(this)},f.prototype.removeSvg=function(){if(I(this.element.id+"_Secondary_Element"),I(this.element.id+"_tile_parent"),I(this.element.id+"_tiles"),this.svgObject){for(;0<this.svgObject.childNodes.length;)this.svgObject.removeChild(this.svgObject.firstChild);!this.svgObject.hasChildNodes()&&this.svgObject.parentNode&&Y.remove(this.svgObject)}this.clearTemplate()},f.prototype.wireEVents=function(){Y.EventHandler.add(this.element,"click",this.mapsOnClick,this),Y.EventHandler.add(this.element,"contextmenu",this.mapsOnRightClick,this),Y.EventHandler.add(this.element,"dblclick",this.mapsOnDoubleClick,this),Y.EventHandler.add(this.element,Y.Browser.touchStartEvent,this.mouseDownOnMap,this),Y.EventHandler.add(this.element,Y.Browser.touchMoveEvent,this.mouseMoveOnMap,this),Y.EventHandler.add(this.element,Y.Browser.touchEndEvent,this.mouseEndOnMap,this),Y.EventHandler.add(this.element,"pointerleave mouseleave",this.mouseLeaveOnMap,this),Y.EventHandler.add(this.element,"keydown",this.keyDownHandler,this),Y.EventHandler.add(this.element,"keyup",this.keyUpHandler,this),this.resizeEvent=this.mapsOnResize.bind(this),window.addEventListener(Y.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resizeEvent)},f.prototype.unWireEVents=function(){Y.EventHandler.remove(this.element,"click",this.mapsOnClick),Y.EventHandler.remove(this.element,"contextmenu",this.mapsOnRightClick),Y.EventHandler.remove(this.element,"dblclick",this.mapsOnDoubleClick),Y.EventHandler.remove(this.element,Y.Browser.touchStartEvent,this.mouseDownOnMap),Y.EventHandler.remove(this.element,Y.Browser.touchMoveEvent,this.mouseMoveOnMap),Y.EventHandler.remove(this.element,Y.Browser.touchEndEvent,this.mouseEndOnMap),Y.EventHandler.remove(this.element,"pointerleave mouseleave",this.mouseLeaveOnMap),Y.EventHandler.remove(this.element,"keydown",this.keyDownHandler),Y.EventHandler.remove(this.element,"keyup",this.keyUpHandler),window.removeEventListener(Y.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resizeEvent)},f.prototype.mouseLeaveOnMap=function(e){0<document.getElementsByClassName("highlightMapStyle").length&&this.legendModule&&(this.legendModule.removeShapeHighlightCollection(),x(document.getElementsByClassName("highlightMapStyle")[0]))},f.prototype.keyUpHandler=function(e){var t=e.target.id;this.isTileMap&&this.removeTileMap(),"Tab"===e.code&&-1<t.indexOf("_LayerIndex_")&&-1<t.indexOf("shapeIndex")?this.keyboardHighlightSelection(t,e):-1===t.indexOf("_LayerIndex_")&&-1===t.indexOf("shapeIndex")&&0<ct("highlightMapStyle").length&&(x(ct("highlightMapStyle")[0]),this.legendSettings.visible)&&this.legendModule&&this.legendModule.removeShapeHighlightCollection()},f.prototype.keyboardHighlightSelection=function(e,t){var i=t.type,o=parseInt(e.split("_LayerIndex_")[1].split("_")[0],10),n=parseInt(e.split("_shapeIndex_")[1].split("_")[0],10),n=this.layers[o].shapeData.features.length>n?this.layers[o].shapeData.features[n].properties:null,e=parseInt(e.split("_dataIndex_")[1].split("_")[0],10),e=Y.isNullOrUndefined(e)?null:this.layers[o].dataSource[e];this.layers[o].selectionSettings.enable&&"keydown"===i&&this.selectionModule?(this.selectionModule.selectionsettings=this.layers[o].selectionSettings,this.selectionModule.selectionType="Shape",this.selectionModule.selectElement(t.target,o,e,n)):this.highlightModule&&this.layers[o].highlightSettings.enable&&"keyup"===i&&!t.target.classList.contains("ShapeselectionMapStyle")&&(this.highlightModule.highlightSettings=this.layers[o].highlightSettings,this.highlightModule.handleHighlight(t.target,o,e,n))},f.prototype.keyDownHandler=function(e){var t,i=this.zoomModule,o=e.target.id;"ArrowUp"!==e.code&&"ArrowDown"!==e.code&&"ArrowLeft"!==e.code&&"ArrowRight"!==e.code||!i||(t=document.getElementById(this.element.id+"_animated_tiles"),this.isTileMap&&!Y.isNullOrUndefined(t)&&(this.currentTiles=t.cloneNode(!0))),this.zoomSettings.enable&&i&&("+"===e.key||"Equal"===e.code)?i.performZoomingByToolBar("zoomin"):this.zoomSettings.enable&&i&&("-"===e.key||"Minus"===e.code)?i.performZoomingByToolBar("zoomout"):this.zoomSettings.enable&&i&&82===e.keyCode?(i.performZoomingByToolBar("reset"),i.isPanModeEnabled=!1):this.zoomSettings.enable&&this.zoomSettings.enablePanning&&i&&("ArrowUp"===e.code||"ArrowDown"===e.code)?(e.preventDefault(),i.mouseDownLatLong.x=0,i.mouseMoveLatLong.y=this.mapAreaRect.height/7,i.panning("None",i.mouseDownLatLong.x,"ArrowUp"===e.code?-i.mouseMoveLatLong.y:i.mouseMoveLatLong.y,e),i.mouseDownLatLong.y=i.mouseMoveLatLong.y):this.zoomSettings.enable&&this.zoomSettings.enablePanning&&i&&("ArrowLeft"===e.code||"ArrowRight"===e.code)?(e.preventDefault(),i.mouseDownLatLong.y=0,i.mouseMoveLatLong.x=this.mapAreaRect.width/7,i.panning("None","ArrowLeft"===e.code?-i.mouseMoveLatLong.x:i.mouseMoveLatLong.x,i.mouseDownLatLong.y,e),i.mouseDownLatLong.x=i.mouseMoveLatLong.x):"Enter"===e.code&&(o=e.target.id,e.preventDefault(),this.legendModule&&(-1<o.indexOf("_Left_Page_Rect")||-1<o.indexOf("_Right_Page_Rect"))&&(this.mapAreaRect=this.legendModule.initialMapAreaRect,this.legendModule.currentPage=-1<o.indexOf("_Left_Page_")?this.legendModule.currentPage-1:this.legendModule.currentPage+1,this.legendModule.legendGroup=this.renderer.createGroup({id:this.element.id+"_Legend_Group"}),this.legendModule.drawLegendItem(this.legendModule.currentPage),t=document.getElementById(this.element.id+"_Paging_Text").textContent.split("/").map(Number),-1<o.indexOf("_Left_Page_Rect")?(1!==t[0]&&e.target.focus(),e.target.style.outlineColor=t[0]-1!==t[1]?"":"transparent"):-1<o.indexOf("_Right_Page_Rect")&&(t[0]!==t[1]&&e.target.focus(),e.target.style.outlineColor=t[0]!==t[1]+1?"":"transparent"),O(this.element.id+"_Legend_Border",this.element.id))&&(O(this.element.id+"_Legend_Border",this.element.id).style.pointerEvents="none"),-1<o.indexOf("shapeIndex"))&&this.keyboardHighlightSelection(o,e),this.zoomModule&&this.zoomModule.removeToolbarOpacity(this.isTileMap?Math.round(this.tileZoomLevel):this.mapScaleValue,this.mouseMoveId)},f.prototype.SelectedElement=function(e){var t=!1;return t="ShapeselectionMapStyle"===e.getAttribute("class")?!0:t},f.prototype.mapsOnClick=function(t){var e,i,o=this,n=t.target,l=n.id,a=null,r=null;this.mouseClickEvent={x:t.x,y:t.y},-1===n.id.indexOf("_ToolBar")&&(e=this.getClickLocation(l,t.pageX,t.pageY,n,t.layerX,t.layerY),Y.isNullOrUndefined(e)||(a=e.latitude,r=e.longitude),i={cancel:!1,name:ko,target:l,x:t.clientX,y:t.clientY,latitude:a,longitude:r,isShapeSelected:this.SelectedElement(n)},this.onclick?(i.name=No,this.trigger("onclick",i,function(e){o.clickHandler(t,i,n)})):this.trigger("click",i,function(e){o.clickHandler(t,i,n)})),this.zoomModule&&(this.zoomModule.removeToolbarOpacity(this.isTileMap?Math.round(this.tileZoomLevel):this.mapScaleValue,l),this.isDevice)&&this.zoomModule.removeToolbarClass("","","","","")},f.prototype.clickHandler=function(e,t,i){-1<i.id.indexOf("shapeIndex")&&(this.mergeCluster(),E(this.element.id+"_mapsTooltip"))&&-1<this.mapsTooltipModule.tooltipTargetID.indexOf("_MarkerIndex_")&&I(this.element.id+"_mapsTooltip"),this.markerModule&&this.markerModule.markerClusterClick(e),t.cancel||this.notify(ko,i),t.cancel||-1===i.id.indexOf("shapeIndex")||this.triggerShapeSelection(i)},f.prototype.triggerShapeSelection=function(e){var t=parseInt(e.id.split("_LayerIndex_")[1].split("_")[0],10),t=mt(e.id,this.layers[t].selectionSettings,this,Ao);t.cancel||!this.selectionModule||Y.isNullOrUndefined(this.shapeSelected)?t.cancel&&this.selectionModule&&Y.isNullOrUndefined(t.data)&&(x(e),this.selectionModule.removedSelectionList(e)):yt(this.selectionModule.selectionType+"selectionMap",this.selectionModule.selectionType+"selectionMapStyle",t)},f.prototype.getMarkerClickLocation=function(e,t,i,o,n,l){document.getElementById(this.element.id+"_svg").style.cursor="grabbing";var a=E(n.targetId),r=this.getClickLocation(n.targetId,e,t,a,i,o),s=this.isTileMap?R(new T(r.longitude,r.latitude),this.tileZoomLevel,this.tileTranslatePoint,!0):A(r.latitude,r.longitude,this.mapLayerPanel.currentFactor,this.layersCollection[n.layerIndex],this),d=this.translatePoint,p=this.isTileMap?s.x:(s.x+d.x)*this.scale,s=this.isTileMap?s.y:(s.y+d.y)*this.scale;return("Balloon"!==this.markerDragArgument.shape?a:a.parentElement).setAttribute("transform","translate( "+p+" "+s+" )"),l&&(d=this.layers[n.layerIndex].markerSettings[n.markerIndex],r=this.getClickLocation(n.targetId,e-d.offset.x,t-d.offset.y,a,i-d.offset.x,o-d.offset.y)),r},f.prototype.getClickLocation=function(e,t,i,o,n,l,a){var r,s,d,p=0;return-1===e.indexOf("_LayerIndex_")||this.isTileMap||Y.isNullOrUndefined(a)&&(parseInt(this.mouseDownEvent.x,10)!==parseInt(this.mouseClickEvent.x,10)||parseInt(this.mouseDownEvent.y,10)!==parseInt(this.mouseClickEvent.y,10))?this.isTileMap&&(!Y.isNullOrUndefined(a)||parseInt(this.mouseDownEvent.x,10)===parseInt(this.mouseClickEvent.x,10)&&parseInt(this.mouseDownEvent.y,10)===parseInt(this.mouseClickEvent.y,10))&&(r=this.getTileGeoLocation(n,l)):(p=parseFloat(e.split("_LayerIndex_")[1].split("_")[0]),"Normal"===this.layers[p].geometryType?-1<e.indexOf("_shapeIndex_")?(n=F(t,i,-1<(a=o.parentElement).id.indexOf("_Point_Group")||-1<a.id.indexOf("_LineString_Group")||-1<a.id.indexOf("_MultiLineString_Group")||-1<a.id.indexOf("_Polygon_Group")?a.parentElement:a),l=this.mapLayerPanel.currentFactor*this.mapScaleValue,s=Math.abs(-this.baseMapBounds.longitude.min*l),d=Math.abs(this.baseMapBounds.latitude.max*l),r={latitude:Math.abs(this.baseMapBounds.latitude.max-n.y/l),longitude:Math.abs(n.x/l+this.baseMapBounds.longitude.min)},this.baseMapBounds.longitude.min<0&&s>n.x&&(r.longitude=-r.longitude),this.baseMapBounds.latitude.min<0&&d>n.y&&(r.latitude=-r.latitude)):-1<e.indexOf("_MarkerIndex_")&&this.markerModule&&!this.markerDragArgument?(o=parseInt(e.split("_MarkerIndex_")[1].split("_")[0],10),a=parseInt(e.split("_dataIndex_")[1].split("_")[0],10),r=isNaN(o)||isNaN(a)?{latitude:null,longitude:null}:{latitude:(l=this.layers[p].markerSettings[o].dataSource[a]).latitude,longitude:l.longitude}):-1<e.indexOf("_MarkerIndex_")&&this.markerModule&&this.markerDragArgument?(n=document.getElementById(this.element.id+"_LayerIndex_"+this.markerDragArgument.layerIndex).getBoundingClientRect(),o=new T(t>n.left?Math.abs(n.left-t):0,i>n.top?Math.abs(n.top-i):0),s=Math.abs(-this.baseMapBounds.longitude.min*this.mapLayerPanel.currentFactor),d=Math.abs(this.baseMapBounds.latitude.max*this.mapLayerPanel.currentFactor),r={latitude:Math.abs(this.baseMapBounds.latitude.max-o.y/(this.mapLayerPanel.currentFactor*this.scale)),longitude:Math.abs(o.x/(this.mapLayerPanel.currentFactor*this.scale)+this.baseMapBounds.longitude.min)},this.baseMapBounds.longitude.min<0&&s>o.x&&(r.longitude=-r.longitude),this.baseMapBounds.latitude.min<0&&d>o.y&&(r.latitude=-r.latitude)):r={latitude:null,longitude:null}:r=this.getGeoLocation(p,t,i)),r},f.prototype.removeTileMap=function(){var e=document.getElementById(this.element.id+"_animated_tiles");if(!Y.isNullOrUndefined(this.currentTiles)&&e.childElementCount<this.currentTiles.childElementCount)for(var t=e.childElementCount-1;t>=this.currentTiles.childElementCount;t--)e.removeChild(e.children[t]);this.currentTiles=null},f.prototype.mouseEndOnMap=function(e){var t,i,o=0,n=0;return-1!==e.type.indexOf("touch")?(this.isTouch=!0,o=t=e.changedTouches[0].pageX,n=(i=e.changedTouches[0].pageY)-(this.isTileMap?10:0),this.mouseClickEvent={x:t,y:i}):(this.isTouch="touch"===e.pointerType,t=e.pageX,i=e.pageY,o=e.layerX,n=e.layerY-(this.isTileMap?10:0)),this.isTileMap&&this.removeTileMap(),this.isTouch&&(this.titleTooltip(e,t,i,!0),Y.isNullOrUndefined(this.legendModule)||this.legendTooltip(e,e.pageX,e.pageY,!0)),this.notify(Y.Browser.touchEndEvent,e),e.cancelable&&!this.isTouch&&e.preventDefault(),Y.isNullOrUndefined(this.markerDragArgument)?document.getElementById(this.element.id+"_svg").style.cursor="auto":(e=this.markerDragArgument,this.mouseClickEvent.x=this.mouseDownEvent.x,this.mouseClickEvent.y=this.mouseDownEvent.y,o=this.getMarkerClickLocation(t,i,o,n,this.markerDragArgument,!0),n=this.layers[e.layerIndex].markerSettings[e.markerIndex],document.getElementById(this.element.id+"_svg").style.cursor=n.enableDrag?"pointer":"grabbing",t={name:"markerDragEnd",x:t,y:i,latitude:o.latitude,longitude:o.longitude,layerIndex:e.layerIndex,markerIndex:e.markerIndex,dataIndex:e.dataIndex},Y.isNullOrUndefined(n.latitudeValuePath)&&Y.isNullOrUndefined(n.longitudeValuePath)?(i=n.dataSource[e.dataIndex],Y.isNullOrUndefined(i.Longitude)||Y.isNullOrUndefined(i.Latitude)?(n.dataSource[e.dataIndex].latitude=t.latitude,n.dataSource[e.dataIndex].longitude=t.longitude):(n.dataSource[e.dataIndex].Latitude=t.latitude,n.dataSource[e.dataIndex].Longitude=t.longitude)):(n.dataSource[e.dataIndex][n.latitudeValuePath]=t.latitude,n.dataSource[e.dataIndex][n.longitudeValuePath]=t.longitude),this.markerDragId="",this.markerDragArgument=null,this.trigger("markerDragEnd",t)),this.zoomModule&&this.isDevice&&(this.zoomModule.removeToolbarOpacity(this.isTileMap?Math.round(this.tileZoomLevel):this.scale,this.element.id+"_Zooming_"),this.zoomModule.removeToolbarClass("","","","","")),!1},f.prototype.mouseDownOnMap=function(e){this.mouseDownEvent={x:e.x,y:e.y},-1!==e.type.indexOf("touch")&&e.changedTouches&&(this.mouseDownEvent={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}),this.isDevice&&!Y.isNullOrUndefined(this.mapsTooltipModule)&&this.mapsTooltipModule.renderTooltip(e);var t=e.target,i=(this.markerDragId=t.id,document.getElementById(this.element.id+"_animated_tiles"));this.isTileMap&&!Y.isNullOrUndefined(i)&&(this.currentTiles=i.cloneNode(!0)),-1===t.id.indexOf("_ToolBar")&&(i=this.markerModule,(-1<t.id.indexOf("shapeIndex")||-1<t.id.indexOf("Tile"))&&this.mergeCluster(),i&&(i.markerClick(e),i.markerClusterClick(e)),this.bubbleModule)&&this.bubbleModule.bubbleClick(e),this.notify(Y.Browser.touchStartEvent,e)},f.prototype.mergeCluster=function(){this.markerModule&&0<this.markerModule.sameMarkerData.length&&(!this.zoomModule||this.zoomModule.isSingleClick)&&(Ze(this.markerModule.sameMarkerData,this),this.markerModule.sameMarkerData=[])},f.prototype.mapsOnRightClick=function(e){var t=e.target,i=t.id,o=null,n=null;this.mouseClickEvent=this.mouseDownEvent={x:e.x,y:e.y},-1===t.id.indexOf("_ToolBar")&&(t=this.getClickLocation(i,e.pageX,e.pageY,t,e.layerX,e.layerY),Y.isNullOrUndefined(t)||(o=t.latitude,n=t.longitude),t={cancel:!1,name:Fo,target:i,x:e.clientX,y:e.clientY,latitude:o,longitude:n,isShapeSelected:!1},this.trigger("rightClick",t))},f.prototype.mapsOnDoubleClick=function(e){this.notify("dblclick",e);var t,i=e.target,o=i.id,n=null,l=null;-1===i.id.indexOf("_ToolBar")&&(-1===i.id.indexOf("_LayerIndex_")||this.isTileMap||this.mouseDownEvent.x!==e.clientX||this.mouseDownEvent.y!==e.clientY?this.isTileMap&&this.mouseDownEvent.x===e.clientX&&this.mouseDownEvent.y===e.clientY&&(n=(t=this.getTileGeoLocation(e.layerX,e.layerY)).latitude,l=t.longitude):(i=parseFloat(i.id.split("_LayerIndex_")[1].split("_")[0]),n=(t=this.getGeoLocation(i,e.layerX,e.layerY)).latitude,l=t.longitude),i={cancel:!1,name:Eo,x:e.clientX,y:e.clientY,target:o,latitude:n,longitude:l,isShapeSelected:null},this.trigger("doubleClick",i))},f.prototype.mouseMoveOnMap=function(e){var t;e.type,t=e.target,this.mouseMoveEvent(e),this.markerModule&&(this.markerModule.markerMove(e),this.markerModule.markerClusterMouseMove(e)),this.bubbleModule&&this.bubbleModule.bubbleMove(e),-1===t.id.indexOf("MarkerIndex")&&(document.getElementById(this.element.id+"_svg").style.cursor="auto"),this.onMouseMove(e),this.notify(Y.Browser.touchMoveEvent,e)},f.prototype.mouseMoveEvent=function(e){var t=e.target.id;t=(t=this.isTileMap?this.getTileGeoLocation(e.layerX,e.layerY):(t=-1<t.indexOf("_LayerIndex_")?parseInt(t.split("_LayerIndex_")[1].split("_")[0],10):this.baseLayerIndex,this.getGeoLocation(t,e.clientX,e.clientY)),{x:e.clientX,y:e.clientY,latitude:t.latitude,longitude:t.longitude,target:e.target}),this.trigger(qo,t)},f.prototype.onMouseMove=function(e){var t,i,o,n=e.target,n=(this.mouseMoveId=n.id,0),l=0;return-1===e.type.indexOf("touch")?(t=e.pageX,i=e.pageY,n=e.layerX,l=e.layerY-(this.isTileMap?10:0),this.titleTooltip(e,e.pageX,e.pageY),Y.isNullOrUndefined(this.legendModule)||this.legendTooltip(e,e.pageX,e.pageY,!0)):(n=t=(o=e.touches)[0].clientX,l=i=o[0].clientY-(this.isTileMap?10:0)),Y.isNullOrUndefined(this.markerDragArgument)||(o=this.markerDragArgument,this.mouseClickEvent.x=this.mouseDownEvent.x,this.mouseClickEvent.y=this.mouseDownEvent.y,this.getMarkerClickLocation(t,i,n,l,o,!1)),this.zoomModule&&this.zoomModule.removeToolbarOpacity(this.isTileMap?Math.round(this.tileZoomLevel):this.scale,e.target.id),!1},f.prototype.legendTooltip=function(e,t,i,o){for(var n,l,a=e.target.id,r=(this.legendModule.currentPage,e.target.id.split("_Index_")[1]),s=this.legendModule.totalPages.length<=this.legendModule.currentPage?this.legendModule.totalPages.length-1:this.legendModule.currentPage<0?0:this.legendModule.currentPage,d=(0!==this.legendModule.totalPages.length?this.legendModule.totalPages[s].Collection:this.legendModule.totalPages).length,p=0;p<d;p++)n=(l=this.legendModule.totalPages[s].Collection[p]).DisplayText,a=e.target.id,r=e.target.id.split("_Index_")[1],a===this.element.id+"_Legend_Text_Index_"+r&&-1<e.target.textContent.indexOf("...")&&l.idIndex===parseInt(r,10)&&vt(n,this.legendSettings.textStyle.size,t,i,this.element.offsetWidth,this.element.offsetHeight,this.element.id+"_EJ2_Legend_Text_Tooltip",E(this.element.id+"_Secondary_Element"),o);a!==this.element.id+"_Legend_Text_Index_"+r&&I(this.element.id+"_EJ2_Legend_Text_Tooltip")},f.prototype.titleTooltip=function(e,t,i,o){var n=e.target.id;n===this.element.id+"_LegendTitle"&&-1<e.target.textContent.indexOf("...")?vt(this.legendSettings.title.text,this.legendSettings.titleStyle.size,t,i,this.element.offsetWidth,this.element.offsetHeight,this.element.id+"_EJ2_LegendTitle_Tooltip",E(this.element.id+"_Secondary_Element"),o):I(this.element.id+"_EJ2_LegendTitle_Tooltip"),n===this.element.id+"_Map_title"&&-1<e.target.textContent.indexOf("...")?vt(this.titleSettings.text,this.titleSettings.textStyle.size||this.themeStyle.titleFontSize,t,i,this.element.offsetWidth,this.element.offsetHeight,this.element.id+"_EJ2_Title_Tooltip",E(this.element.id+"_Secondary_Element"),o):I(this.element.id+"_EJ2_Title_Tooltip")},f.prototype.mapsOnResize=function(e){var t,i=this;return this.isDestroyed||this.isExportInitialTileMap||(t={cancel:!(this.isResize=this.isReset=!0),name:zo,previousSize:this.availableSize,currentSize:w(this),maps:this},this.trigger(zo,t),t.cancel)||(this.resizeTo&&clearTimeout(this.resizeTo),!Y.isNullOrUndefined(this.element)&&this.element.classList.contains("e-maps")&&(this.resizeTo=setTimeout(function(){i.unWireEVents(),i.createSVG(),i.refreshing=!0,i.wireEVents(),i.render(),i.refreshing=!1},500))),!1},f.prototype.zoomByPosition=function(e,t){var i;this.isDestroyed||(this.zoomNotApplied=this.isMarkerZoomCompleted=!1,i=this.zoomSettings.zoomFactor===t,this.previousProjection=null,!this.isTileMap&&this.zoomModule?(Y.isNullOrUndefined(e)?this.zoomSettings.zoomFactor=t:(this.zoomSettings.zoomFactor=t,i=this.centerPosition.latitude===e.latitude&&this.centerPosition.longitude===e.longitude||i,this.centerPosition=e),this.isZoomByPosition=!0,this.mapScaleValue=null):this.zoomModule&&(this.tileZoomLevel=this.zoomSettings.zoomFactor=t,i=this.centerPosition.latitude===e.latitude&&this.centerPosition.longitude===e.longitude||i,this.centerPosition=e,this.isZoomByPosition=!0),i&&this.refresh())},f.prototype.panByDirection=function(e,t){if(!this.isDestroyed){var i=0,o=0;switch(e){case"Left":i=-this.mapAreaRect.width/7;break;case"Right":i=this.mapAreaRect.width/7;break;case"Top":o=-this.mapAreaRect.height/7;break;case"Bottom":o=this.mapAreaRect.height/7}this.zoomModule&&this.zoomModule.panning(e,i,o,t)}},f.prototype.addLayer=function(e){var t;this.isDestroyed||((t=this.layers).push(e),this.isAddLayer=!0,this.layers=t)},f.prototype.removeLayer=function(e){var t;this.isDestroyed||((t=this.layers).splice(e,1),this.layers=t)},f.prototype.addMarker=function(e,t){if(!this.isDestroyed&&!Y.isNullOrUndefined(this.markerModule))if(Y.isNullOrUndefined(e)||Y.isNullOrUndefined(t)){for(var i=0;i<this.layers.length;i++){o=document.getElementById(this.element.id+"_LayerIndex_"+i);this.markerModule.zoomedMarkerCluster[i]=[],this.markerModule.initialMarkerCluster[i]=[],this.markerModule.markerRender(this,o,i,this.isTileMap?this.tileZoomLevel:this.mapLayerPanel.currentFactor,null)}this.arrangeTemplate()}else{var o=document.getElementById(this.element.id+"_LayerIndex_"+e);if(0<t.length&&o){for(var n=0,l=t;n<l.length;n++){var a=l[n];this.layersCollection[e].markerSettings.push(new _o(this,"markerSettings",a))}this.markerModule.markerRender(this,o,e,this.isTileMap?this.tileZoomLevel:this.mapLayerPanel.currentFactor,"AddMarker"),this.arrangeTemplate()}}},f.prototype.shapeSelection=function(e,t,i,o){if(!this.isDestroyed&&!Y.isNullOrUndefined(this.layers[e])){var n=void 0,l=void 0,a=Array.isArray(t)?t:Array(t),r=(Y.isNullOrUndefined(o)&&(o=!0),this.layers[e].selectionSettings);if(!r.enableMultiSelect&&this.legendSelection&&o&&this.removeShapeSelection(),"SubLayer"===this.layers[e].type)for(var s=0;s<this.layersCollection.length;s++)if(this.layersCollection[s].shapeData===this.layers[e].shapeData){l=s;break}if(!Y.isNullOrUndefined(r)&&r.enable)for(var d=void 0,p=this.layers[e].shapeData.features,s=0;s<p.length;s++)for(var h=0;h<a.length;h++){var m=void 0;if((!Y.isNullOrUndefined(p[s].properties[a[h]])&&isNaN(p[s].properties[a[h]])?p[s].properties[a[h]].toLowerCase():p[s].properties[a[h]])===(Y.isNullOrUndefined(i)||"string"!=typeof i?i:i.toLowerCase())){Y.isNullOrUndefined(this.layers[e].shapeSettings.colorValuePath)||(m=Je(this.layers[e].dataSource,p[s].properties,this.layers[e].shapeDataPath,this.layers[e].shapePropertyPath,this.layers[e]));var c=this.layers[e];if(0<=this.baseLayerIndex&&c.isBaseLayer?d=0:"SubLayer"===this.layers[e].type&&(d=l),n=E(this.element.id+"_LayerIndex_"+d+"_shapeIndex_"+s+"_dataIndex_"+m),Y.isNullOrUndefined(m)&&Y.isNullOrUndefined(n)&&(n=E(this.element.id+"_LayerIndex_"+e+"_shapeIndex_"+s+"_dataIndex_null")),c=parseInt(n.id.split("_shapeIndex_")[1].split("_")[0],10),m=this.layers[e].shapeData.features.length>c?this.layers[e].shapeData.features[c].properties:null,c=parseInt(n.id.split("_dataIndex_")[1].split("_")[0],10),c=Y.isNullOrUndefined(c)?null:this.layers[e].dataSource[c],o){ft(r,this,n,m,c),this.shapeSelectionClass=E("ShapeselectionMap"),this.legendSettings.visible&&-1===n.id.indexOf("_MarkerIndex_")&&this.legendModule.shapeHighLightAndSelection(n,c,r,"selection",e);var u=!this.legendSettings.visible||this.legendModule.shapeToggled;if(u&&(n.setAttribute("class","ShapeselectionMapStyle"),-1===this.selectedElementId.indexOf(n.getAttribute("id"))&&this.selectedElementId.push(n.getAttribute("id")),!r.enableMultiSelect))return}else this.legendSelection=!r.enableMultiSelect&&!this.legendSelection||this.legendSelection,this.legendSettings.visible&&-1===n.id.indexOf("_MarkerIndex_")&&"ShapeselectionMapStyle"===n.getAttribute("class")&&this.legendModule.shapeHighLightAndSelection(n,c,r,"selection",e),(u=!this.legendSettings.visible||this.legendModule.shapeToggled)&&(x(n),-1!==(m=this.selectedElementId.indexOf(n.getAttribute("id"))))&&(this.selectedElementId.splice(m,1),!r.enableMultiSelect)&&this.legendSelection&&0<this.selectedElementId.length&&this.removeShapeSelection()}}}},f.prototype.zoomToCoordinates=function(e,t,i,o){var n,l,a,r;this.isDestroyed||(l=n=void 0,r=this.isMarkerZoomCompleted=!1,this.centerPosition={latitude:null,longitude:null},this.isZoomByPosition=!1,(Y.isNullOrUndefined(i)&&Y.isNullOrUndefined(o)||Y.isNullOrUndefined(e)&&Y.isNullOrUndefined(t))&&(e=Y.isNullOrUndefined(e)?0:e,t=Y.isNullOrUndefined(e)?0:t,i=Y.isNullOrUndefined(i)?e:i,o=Y.isNullOrUndefined(o)?t:o,r=!0),i<e&&(e=(a=[i,e])[0],i=a[1]),o<t&&(t=(a=[o,t])[0],o=a[1]),l=r?(n=e+i,t+o):(n=(e+i)/2,(t+o)/2),this.centerLatOfGivenLocation=n,this.centerLongOfGivenLocation=l,this.minLatOfGivenLocation=e,this.minLongOfGivenLocation=t,this.maxLatOfGivenLocation=i,this.maxLongOfGivenLocation=o,this.zoomNotApplied=!0,this.scaleOfGivenLocation=Dt(e,i,t,o,this.mapAreaRect.width,this.mapAreaRect.height,this,!0),a=this.getMinMaxLatitudeLongitude(),r={cancel:!1,name:"zoom",type:"zoomIn",maps:this,tileTranslatePoint:{},translatePoint:{},tileZoomLevel:this.isTileMap?{previous:this.tileZoomLevel,current:this.scaleOfGivenLocation}:{},scale:this.isTileMap?{previous:this.tileZoomLevel,current:this.scaleOfGivenLocation}:{previous:this.scale,current:this.scaleOfGivenLocation},minLatitude:a.minLatitude,maxLatitude:a.maxLatitude,minLongitude:a.minLongitude,maxLongitude:a.maxLongitude},this.trigger("zoom",r),this.refresh())},f.prototype.removeShapeSelection=function(){for(var e=this.selectedElementId.length,t=0;t<e;t++)x(Z(this.selectedElementId[0])),this.selectedElementId.splice(0,1);if(this.legendSettings.visible)for(var i=this.legendSelectionCollection.length,t=0;t<i;t++)x(Z(this.legendSelectionCollection[t].legendElement.id)),this.selectedLegendElementId.splice(0,1);this.shapeSelectionItem=[],this.legendSelectionCollection=[]},f.prototype.setCulture=function(){this.intl=new Y.Internationalization,this.setLocaleConstants(),this.localeObject=new Y.L10n(this.getModuleName(),this.defaultLocalConstants,this.locale)},f.prototype.setLocaleConstants=function(){this.defaultLocalConstants={ZoomIn:"Zoom in",Zoom:"Zoom",ZoomOut:"Zoom out",Pan:"Pan",Reset:"Reset",ImageNotFound:"Image Not Found"}},f.prototype.destroy=function(){this.unWireEVents(),Y.isNullOrUndefined(this.mapsTooltipModule)||this.mapsTooltipModule.removeEventListener(),Y.isNullOrUndefined(this.zoomModule)||this.zoomModule.removeEventListener(),Y.isNullOrUndefined(this.legendModule)||this.legendModule.removeEventListener(),Y.isNullOrUndefined(this.selectionModule)||this.selectionModule.removeEventListener(),Y.isNullOrUndefined(this.highlightModule)||this.highlightModule.removeEventListener(),Y.isNullOrUndefined(this.bingMap)||this.bingMap.destroy(),gn.prototype.destroy.call(this),this.shapeSelectionItem=[],this.toggledElementId=[],this.toggledLegendId=[],this.legendSelectionCollection=[],this.selectedLegendElementId=[],this.selectedNavigationElementId=[],this.selectedBubbleElementId=[],this.selectedMarkerElementId=[],this.selectedElementId=[],this.dataLabelShape=[],this.zoomShapeCollection=[],this.zoomLabelPositions=[],this.mouseDownEvent={x:null,y:null},this.mouseClickEvent={x:null,y:null},this.formatFunction=null,this.localeObject=null,this.defaultLocalConstants=null,this.intl=null,this.mapAreaRect=null,this.layersCollection=null,this.themeStyle=null,this.totalRect=null,this.baseSize=null,this.baseMapBounds=null,this.baseMapRectBounds=null,this.baseTranslatePoint=null,this.baseTileTranslatePoint=null,this.markerZoomCenterPoint=null,this.currentTiles=null,this.serverProcess=null,this.toolbarProperties=null,this.zoomLabelPositions=null,this.resizeEvent=null,this.availableSize=null,document.getElementById("mapsmeasuretext")&&document.getElementById("mapsmeasuretext").remove(),this.removeSvg(),this.svgObject=null,this.mapLayerPanel=null,this.renderer=null,this.translatePoint=null,this.tileTranslatePoint=null,this.previousPoint=null,this.dataLabelShape=[],this.zoomShapeCollection=[],this.selectedElementId=[],this.selectedMarkerElementId=[],this.selectedBubbleElementId=[],this.shapeSelectionClass=null,this.markerSelectionClass=null,this.bubbleSelectionClass=null,this.navigationSelectionClass=null,this.selectedNavigationElementId=[],this.polygonSelectionClass=null,this.selectedPolygonElementId=[],this.legendSelectionClass=null,this.previousTranslate=null,this.initialTileTranslate=null,this.markerDragArgument=null},f.prototype.getModuleName=function(){return"maps"},f.prototype.getPersistData=function(){return this.addOnPersist(["translatePoint","zoomSettings","mapScaleValue","tileTranslatePoint","baseTranslatePoint","scale","zoomPersistence","defaultState","markerZoomedState","initialCheck","initialZoomLevel","initialTileTranslate","applyZoomReset","markerZoomFactor"])},f.prototype.onPropertyChanged=function(e,t){if(!this.isDestroyed){for(var i=!1,o=!1,n=!1,l=0,a=Object.keys(e);l<a.length;l++){var r=a[l];switch(r){case"background":this.renderBorder();break;case"height":case"width":case"layers":case"projectionType":case"centerPosition":case"legendSettings":case"baseLayerIndex":if("layers"===r)for(var n=!0,s=Object.keys(e.layers).length,d=0;d<s;d++)if(!Y.isNullOrUndefined(e.layers[d]))for(var p=0,h=Object.keys(e.layers[d]);p<h.length;p++){var m=h[p];Y.isNullOrUndefined(this.layers[d].shapeData)&&!Y.isNullOrUndefined(this.layers[d].urlTemplate)&&""!==this.layers[d].urlTemplate?this.isReset=!0:"markerSettings"===m&&(o=!0)}i=!0;break;case"zoomSettings":Y.isNullOrUndefined(t.zoomSettings)||(i=!(e.zoomSettings.zoomFactor!==t.zoomSettings.zoomFactor&&!n||(e.zoomSettings.shouldZoomInitially!==t.zoomSettings.shouldZoomInitially?(this.zoomSettings.zoomFactor=1,this.previousProjection=null,this.scale=this.isMarkerZoomCompleted?null:this.scale,this.isMarkerZoomCompleted=!e.zoomSettings.shouldZoomInitially):e.zoomSettings.enable!==t.zoomSettings.enable&&(this.zoomSettings.zoomFactor=1),0)));break;case"locale":case"currencyCode":gn.prototype.refresh.call(this)}}i&&(e.layers&&o?(I(this.element.id+"_Markers_Group"),this.isTileMap?this.mapLayerPanel.renderTileLayer(this.mapLayerPanel,this.layers.currentFactor,this.layers.length-1):this.render()):(this.createSVG(),this.renderElements()))}},f.prototype.requiredModules=function(){var e=[],t=this.findVisibleLayers(this.layers),i=!1;return this.annotations.map(function(e){i=null!=e.content}),this.isBubbleVisible()&&e.push({member:"Bubble",args:[this],name:"Bubble"}),t.highlight&&e.push({member:"Highlight",args:[this],name:"Highlight"}),t.selection&&e.push({member:"Selection",args:[this],name:"Selection"}),this.legendSettings.visible&&e.push({member:"Legend",args:[this],name:"Legend"}),(this.zoomSettings.enable||this.zoomSettings.zoomFactor>this.zoomSettings.minZoom)&&e.push({member:"Zoom",args:[this],name:"Zoom"}),this.isMarkersVisible()&&e.push({member:"Marker",args:[this],name:"Marker"}),this.isDataLabelVisible()&&e.push({member:"DataLabel",args:[this],name:"DataLabel"}),this.isNavigationVisible()&&e.push({member:"NavigationLine",args:[this],name:"NavigationLine"}),this.isPolygonVisible()&&e.push({member:"Polygon",args:[this],name:"Polygon"}),t.tooltip&&e.push({member:"MapsTooltip",args:[this],name:"MapsTooltip"}),i&&e.push({member:"Annotations",args:[this,mn],name:"Annotations"}),this.allowPrint&&e.push({member:"Print",args:[this],name:"Print"}),this.allowImageExport&&e.push({member:"ImageExport",args:[this],name:"ImageExport"}),this.allowPdfExport&&e.push({member:"PdfExport",args:[this],name:"PdfExport"}),e},f.prototype.isMarkersVisible=function(){var i=!1;return Array.prototype.forEach.call(this.layers,function(e){for(var t=0;t<e.markerSettings.length;t++)if(e.markerSettings[t].visible){i=!0;break}}),i},f.prototype.isDataLabelVisible=function(){for(var e=!1,t=0;t<this.layers.length;t++)if(this.layers[t].dataLabelSettings.visible){e=!0;break}return e},f.prototype.isNavigationVisible=function(){var i=!1;return Array.prototype.forEach.call(this.layers,function(e){for(var t=0;t<e.navigationLineSettings.length;t++)if(e.navigationLineSettings[t].visible){i=!0;break}}),i},f.prototype.isPolygonVisible=function(){var i=!1;return Array.prototype.forEach.call(this.layers,function(e){for(var t=0;t<e.polygonSettings.polygons.length;t++)if(0<e.polygonSettings.polygons.length){i=!0;break}}),i},f.prototype.isBubbleVisible=function(){for(var e=!1,t=0,i=this.layers;t<i.length;t++){var o=i[t];if(this.getBubbleVisible(o)){e=!0;break}}return e},f.prototype.getBubbleVisible=function(e){for(var t=!1,i=0,o=e.bubbleSettings;i<o.length;i++)if(o[i].visible){t=!0;break}return t},f.prototype.print=function(e){this.allowPrint&&this.printModule&&!this.isDestroyed&&this.printModule.print(this,e)},f.prototype.export=function(t,i,o,n){var l=this;if(!this.isDestroyed){if(Y.isNullOrUndefined(n)&&(n=!0),"PDF"!==t&&this.allowImageExport&&this.imageExportModule)return new Promise(function(e){e(l.imageExportModule.export(l,t,i,n))});if(this.allowPdfExport&&this.pdfExportModule)return new Promise(function(e){e(l.pdfExportModule.export(l,t,i,n,o))})}return null},f.prototype.getBingUrlTemplate=function(i){var e;return e=this.isDestroyed?e:new Promise(function(t){var e=new Y.Fetch({url:i});e.onSuccess=function(e){e=e.resourceSets[0].resources[0];t(e.imageUrl)},e.send()})},f.prototype.findVisibleLayers=function(e,t,i,o,n,l){void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===o&&(o=!1),void 0===n&&(n=!1),void 0===l&&(l=!1);for(var a=0,r=e;a<r.length;a++){var s=r[a];if(t=s.visible||t,s.visible){for(var d=s.bubbleSettings,p=s.markerSettings,h=s.polygonSettings,m=0,c=s.navigationLineSettings;m<c.length;m++){var u=c[m];u.visible&&(n=!Y.isNullOrUndefined(u.highlightSettings)&&u.highlightSettings.enable||n,l=!Y.isNullOrUndefined(u.selectionSettings)&&u.selectionSettings.enable||l)}for(var g=0,y=h.polygons;g<y.length;g++){var f=y[g];!Y.isNullOrUndefined(f.points)&&0<f.points.length&&(n=s.polygonSettings.highlightSettings.enable||n,l=s.polygonSettings.selectionSettings.enable||l,o=s.polygonSettings.tooltipSettings.visible||o)}for(var b=0,S=p;b<S.length;b++){var v=S[b];if(v.visible&&(o=v.tooltipSettings.visible||o,n=v.selectionSettings.enable||n,l=v.highlightSettings.enable||l),o)break}for(var x=0,C=d;x<C.length;x++){var O=C[x];if(O.visible&&(o=O.tooltipSettings.visible||o,n=O.selectionSettings.enable||n,l=O.highlightSettings.enable||l),o)break}o=s.tooltipSettings.visible||o,n=s.selectionSettings.enable||n,l=s.highlightSettings.enable||l}if(t&&i&&o)break}return{layer:t,bubble:i,tooltip:o,selection:n,highlight:l}},f.prototype.getGeoLocation=function(e,t,i){var o,n,l=null,a=null;return this.isDestroyed||this.isTileMap||(n=document.getElementById(this.element.id),o=this.element.getBoundingClientRect(),t=t-n.offsetLeft-(o.left-n.offsetLeft)-window.scrollX,i=i-n.offsetTop-(o.top-n.offsetTop)-window.scrollY,n=(o=lt(this,this.layersCollection[e],!1).location).x*this.scale,e=o.y*this.scale,o=Math.min(this.mapAreaRect.height,this.mapAreaRect.width)*this.mapLayerPanel.currentFactor*this.scale,t=this.clip(t-n,0,o-1)/o-.5,n=.5-this.clip(i-e,0,o-1)/o,l=90-360*Math.atan(Math.exp(2*-n*Math.PI))/Math.PI,a=360*t),{latitude:l,longitude:a}},f.prototype.clip=function(e,t,i){return Math.min(Math.max(e,t),i)},f.prototype.getTileGeoLocation=function(e,t){var i,o=null,n=null;return this.isTileMap&&(i=document.getElementById(this.element.id+"_tile_parent"),this.isDestroyed||Y.isNullOrUndefined(i)||(o=(e=this.pointToLatLong(e+this.mapAreaRect.x-i.offsetLeft,t+this.mapAreaRect.y-i.offsetTop)).latitude,n=e.longitude)),{latitude:o,longitude:n}},f.prototype.pointToLatLong=function(e,t){var i,o=0,n=0;return this.isDestroyed||Y.isNullOrUndefined(this.translatePoint)||(t=Y.isNullOrUndefined(this.markerDragArgument)?t:t+10,i=256*Math.pow(2,this.tileZoomLevel),e=this.clip(e-this.translatePoint.x*this.scale,0,i-1)/i-.5,t=.5-this.clip(t-this.translatePoint.y*this.scale,0,i-1)/i,o=90-360*Math.atan(Math.exp(2*-t*Math.PI))/Math.PI,n=360*e),{latitude:o,longitude:n}},y([Y.Property(null)],f.prototype,"background",void 0),y([Y.Property(!1)],f.prototype,"useGroupingSeparator",void 0),y([Y.Property(null)],f.prototype,"format",void 0),y([Y.Property(null)],f.prototype,"width",void 0),y([Y.Property(null)],f.prototype,"height",void 0),y([Y.Property("MouseMove")],f.prototype,"tooltipDisplayMode",void 0),y([Y.Property(!1)],f.prototype,"allowPrint",void 0),y([Y.Property(!1)],f.prototype,"allowImageExport",void 0),y([Y.Property(!1)],f.prototype,"allowPdfExport",void 0),y([Y.Complex({},ro)],f.prototype,"titleSettings",void 0),y([Y.Complex({},ho)],f.prototype,"zoomSettings",void 0),y([Y.Complex({},yo)],f.prototype,"legendSettings",void 0),y([Y.Collection([],Po)],f.prototype,"layers",void 0),y([Y.Collection([],Ht)],f.prototype,"annotations",void 0),y([Y.Complex({},bi)],f.prototype,"margin",void 0),y([Y.Complex({color:"#DDDDDD",width:0},l)],f.prototype,"border",void 0),y([Y.Property("Material")],f.prototype,"theme",void 0),y([Y.Property("Mercator")],f.prototype,"projectionType",void 0),y([Y.Property(0)],f.prototype,"baseLayerIndex",void 0),y([Y.Property(null)],f.prototype,"description",void 0),y([Y.Property(0)],f.prototype,"tabIndex",void 0),y([Y.Complex({latitude:null,longitude:null},di)],f.prototype,"centerPosition",void 0),y([Y.Complex({},t)],f.prototype,"mapsArea",void 0),y([Y.Event()],f.prototype,"load",void 0),y([Y.Event()],f.prototype,"beforePrint",void 0),y([Y.Event()],f.prototype,"loaded",void 0),y([Y.Event()],f.prototype,"click",void 0),y([Y.Event()],f.prototype,"onclick",void 0),y([Y.Event()],f.prototype,"doubleClick",void 0),y([Y.Event()],f.prototype,"rightClick",void 0),y([Y.Event()],f.prototype,"resize",void 0),y([Y.Event()],f.prototype,"tooltipRender",void 0),y([Y.Event()],f.prototype,"legendRendering",void 0),y([Y.Event()],f.prototype,"tooltipRenderComplete",void 0),y([Y.Event()],f.prototype,"shapeSelected",void 0),y([Y.Event()],f.prototype,"itemSelection",void 0),y([Y.Event()],f.prototype,"itemHighlight",void 0),y([Y.Event()],f.prototype,"shapeHighlight",void 0),y([Y.Event()],f.prototype,"layerRendering",void 0),y([Y.Event()],f.prototype,"shapeRendering",void 0),y([Y.Event()],f.prototype,"markerRendering",void 0),y([Y.Event()],f.prototype,"markerClusterRendering",void 0),y([Y.Event()],f.prototype,"markerClick",void 0),y([Y.Event()],f.prototype,"markerDragStart",void 0),y([Y.Event()],f.prototype,"markerDragEnd",void 0),y([Y.Event()],f.prototype,"markerClusterClick",void 0),y([Y.Event()],f.prototype,"markerClusterMouseMove",void 0),y([Y.Event()],f.prototype,"markerMouseMove",void 0),y([Y.Event()],f.prototype,"mouseMove",void 0),y([Y.Event()],f.prototype,"dataLabelRendering",void 0),y([Y.Event()],f.prototype,"bubbleRendering",void 0),y([Y.Event()],f.prototype,"bubbleClick",void 0),y([Y.Event()],f.prototype,"bubbleMouseMove",void 0),y([Y.Event()],f.prototype,"animationComplete",void 0),y([Y.Event()],f.prototype,"annotationRendering",void 0),y([Y.Event()],f.prototype,"zoom",void 0),y([Y.Event()],f.prototype,"pan",void 0),y([Y.Event()],f.prototype,"panComplete",void 0),y([Y.Event()],f.prototype,"zoomComplete",void 0),y([Y.NotifyPropertyChanges],f));function f(e,t){e=gn.call(this,e,t)||this;return e.isTileMap=!1,e.isResize=!1,e.isReset=!1,e.baseSize=new W(0,0),e.translatePoint=new J(0,0),e.baseTranslatePoint=new J(0,0),e.zoomTranslatePoint=new J(0,0),e.markerZoomedState=!0,e.zoomPersistence=!1,e.defaultState=!0,e.centerPositionChanged=!1,e.markerNullCount=0,e.tileTranslatePoint=new J(0,0),e.baseTileTranslatePoint=new J(0,0),e.isDevice=!1,e.staticMapZoom=e.zoomSettings.enable?e.zoomSettings.zoomFactor:0,e.zoomNotApplied=!1,e.dataLabelShape=[],e.zoomShapeCollection=[],e.zoomLabelPositions=[],e.mouseDownEvent={x:null,y:null},e.mouseClickEvent={x:null,y:null},e.selectedElementId=[],e.selectedMarkerElementId=[],e.selectedBubbleElementId=[],e.selectedNavigationElementId=[],e.selectedPolygonElementId=[],e.selectedLegendElementId=[],e.legendSelectionCollection=[],e.shapeSelections=!0,e.legendSelection=!0,e.toggledLegendId=[],e.toggledElementId=[],e.checkInitialRender=!0,e.initialTileTranslate=new J(0,0),e.isMarkerZoomCompleted=!1,e.markerDragId="",e.initialCheck=!0,e.applyZoomReset=!1,e.markerClusterExpandCheck=!1,e.markerClusterExpand=!1,e.mouseMoveId="",e.shapeSelectionItem=[],e.markerDragArgument=null,Y.setValue("mergePersistData",e.mergePersistMapsData,e),e}yn.prototype.renderBubble=function(l,e,t,i,a,r,s,d,p,h){var m=this,o=d.layerData,n=l.colorValuePath,c=!Y.isNullOrUndefined(n)&&-1<n.indexOf(".")?U(e,l.colorValuePath):e[n],n=!Y.isNullOrUndefined(n)&&-1<n.indexOf(".")?Number(U(e,l.colorValuePath)):Number(e[n]),u=!Y.isNullOrUndefined(l.valuePath)&&-1<l.valuePath.indexOf(".")?Number(U(e,l.valuePath)):Number(e[l.valuePath]);if(isNaN(u)&&isNaN(n)&&Y.isNullOrUndefined(c))return null;for(var g=$e(l.minRadius,l.maxRadius,u,i.min,i.max),u=new dn(this.maps).getColorByValue(l.colorMapping,n,c),i="[object Object]"!==Object.prototype.toString.call(u)||Y.isNullOrUndefined(u.fill)?t:u.fill,y=("[object Object]"!==Object.prototype.toString.call(u)||Y.isNullOrUndefined(u.opacity)?l:u).opacity,f=[[]],b=(this.maps.translateType="bubble",0),S=0,v=0,x=0,C=o.length;x<C;x++){var O=(O=o[x]).property,_=Qe(e[d.shapeDataPath],d.shapePropertyPath,O);if((!Y.isNullOrUndefined(e[d.shapeDataPath])&&isNaN(e[d.shapeDataPath])?e[d.shapeDataPath].toLowerCase():e[d.shapeDataPath])===(!Y.isNullOrUndefined(O[_])&&isNaN(O[_])?O[_].toLowerCase():O[_])&&"LineString"!==o[x].type&&"MultiLineString"!==o[x].type&&"Point"!==o[x].type&&"MultiPoint"!==o[x].type)if(o[x]._isMultiPolygon)for(var M=o[x],L=0;L<M.length;L++)f.push(this.getPoints(M[L],[])),S<(v=f[f.length-1].length)&&(S=v,b=f.length-1);else f.push(this.getPoints(o[x],[])),S<(v=f[f.length-1].length)&&(S=v,b=f.length-1)}var P,n=this.maps.projectionType,c={color:l.border.color,opacity:l.border.opacity,width:l.border.width},t=et(f[b],n,d.geometryType);if(l.visible){if(Y.isNullOrUndefined(t)){u=f.length-1;if(!f[u].x||!f[u].y)return;P={cancel:!1,name:Jo,border:c,cx:f[u].x,cy:f[u].y,data:e,fill:i,maps:this.maps,radius:g}}else n="Mercator"===this.maps.projectionType?t.y:-t.y,P={cancel:!1,name:Jo,border:c,cx:t.x,cy:n,data:e,fill:i,maps:this.maps,radius:g};this.maps.trigger("bubbleRendering",P,function(e){var t,i,o,n;!P.cancel&&(P.border.opacity=Y.isNullOrUndefined(P.border.opacity)?y:P.border.opacity,t="Circle"===l.bubbleType?(t=new ce(h,P.fill,P.border,y,0,0,P.radius,null),We(m.maps,t,p)):(t="Mercator"===m.maps.projectionType?P.cy-g:P.cy+g,o=new Q(h,P.fill,P.border,y,new K(0,0,2*g,2*g),2,2),P.cx-=g,P.cy=t,qe(m.maps,o,p)),Ve(m.maps.selectedBubbleElementId,m.maps.bubbleSelectionClass,t,"BubbleselectionMapStyle"),m.bubbleCollection.push({LayerIndex:s,BubbleIndex:a,DataIndex:r,element:t,center:{x:P.cx,y:P.cy}}),o=0!==d.animationDuration||"Enable"===Y.animationMode||Y.isNullOrUndefined(m.maps.zoomModule),o=(1<m.maps.zoomSettings.zoomFactor&&!Y.isNullOrUndefined(m.maps.zoomModule)&&!m.maps.isTileMap?at:lt)(m.maps,d,o),i=l.dataSource,n=o.scale,o=o.location,o=new T(m.maps.isTileMap?(P.cx+m.maps.translatePoint.x)*m.maps.tileZoomLevel:(P.cx+o.x)*n,m.maps.isTileMap?(P.cy+m.maps.translatePoint.y)*m.maps.tileZoomLevel:(P.cy+o.y)*n),t.setAttribute("transform","translate( "+o.x+" "+o.y+" )"),n=i.length-1===r?"bubble":null,"Square"===l.bubbleType?(o.x+=g,o.y+=g*("Mercator"===m.maps.projectionType?1:-1)):g=0,0<l.animationDuration||"Enable"===Y.animationMode)&&bt(t,l.animationDelay,l.animationDuration,o,m.maps,n,g)})}},yn.prototype.getPoints=function(e,t){return Y.isNullOrUndefined(e.map)?t=e.point:e.map(function(e){t.push(new J(e.point.x,e.point.y))}),t},yn.prototype.bubbleClick=function(e){var t,i=e.target.id;-1===i.indexOf("_LayerIndex_")||(t=this.getbubble(i),Y.isNullOrUndefined(t))||(t={cancel:!1,name:Qo,data:t,maps:this.maps,target:i,x:e.clientX,y:e.clientY},this.maps.trigger(Qo,t))},yn.prototype.getbubble=function(e){var t=e.split("_LayerIndex_"),i=parseInt(t[1].split("_")[0],10);if(-1<e.indexOf("_BubbleIndex_")){e=this.maps.layers[i],i=parseInt(t[1].split("_BubbleIndex_")[1],10),t=parseInt(t[1].split("_BubbleIndex_")[1].split("_dataIndex_")[1],10);if(!isNaN(i))return e.bubbleSettings[i].dataSource[t]}return null},yn.prototype.bubbleMove=function(e){var t,i=e.target.id;-1===i.indexOf("_LayerIndex_")||(t=this.getbubble(i),Y.isNullOrUndefined(t))||(t={cancel:!1,name:Ko,data:t,maps:this.maps,target:i,x:e.clientX,y:e.clientY},this.maps.trigger(Ko,t))},yn.prototype.getModuleName=function(){return"Bubble"},yn.prototype.destroy=function(){this.bubbleCollection=[],this.maps=null};y=yn;function yn(e){this.id="",this.maps=e,this.bubbleCollection=[]}b.prototype.getMapsInstance=function(){return this.maps},b.prototype.markerRender=function(u,g,y,f,b){var S=this,v=0,x=0,C=!1,O=0,_=(u.translateType="marker",u.layersCollection[y]),M=g.querySelectorAll("#"+u.element.id+"_Markers_Group");0<M.length?(this.markerSVGObject=M[0],this.markerSVGObject.innerHTML="",C=!0):this.markerSVGObject=u.renderer.createGroup({id:u.element.id+"_Markers_Group",class:"GroupElement"}),this.markerSVGObject.style.pointerEvents="auto";var L,P,e=Z(u.element.id+"_Secondary_Element").querySelectorAll("#"+u.element.id+"_LayerIndex_"+y+"_Markers_Template_Group"),w=(e&&0<e.length&&0<e[0].childElementCount?((L=Z(u.element.id+"_LayerIndex_"+y+"_Markers_Template_Group")).innerHTML="",C=!0):(L=Y.createElement("div",{id:u.element.id+"_LayerIndex_"+y+"_Markers_Template_Group",className:u.element.id+"_template"})).style.cssText="overflow: hidden; position: absolute;pointer-events: none;top:"+u.mapAreaRect.y+"px;left:"+u.mapAreaRect.x+"px;height:"+u.mapAreaRect.height+"px;width:"+u.mapAreaRect.width+"px;",this.allowInnerClusterSetting(_)),e=0!==_.animationDuration||"Enable"===Y.animationMode||Y.isNullOrUndefined(u.zoomModule);u.isTileMap||(P=(!Y.isNullOrUndefined(u.zoomModule)&&1<u.zoomSettings.zoomFactor?at:lt)(u,_,e)),Array.prototype.forEach.call(_.markerSettings,function(h,m){var c=h.dataSource;v=0,Y.isNullOrUndefined(h.dataSource)||Array.prototype.forEach.call(c,function(s,d){u.markerNullCount=0<m&&0===d?0:u.markerNullCount;var p={cancel:!1,name:Do,fill:h.fill,height:Y.isNullOrUndefined(h.heightValuePath)||Y.isNullOrUndefined(s[h.heightValuePath])?h.height:s[h.heightValuePath],width:Y.isNullOrUndefined(h.widthValuePath)||Y.isNullOrUndefined(s[h.widthValuePath])?h.width:s[h.widthValuePath],imageUrl:h.imageUrl,shape:h.shape,template:h.template,data:s,maps:u,marker:h,border:h.border,colorValuePath:h.colorValuePath,shapeValuePath:h.shapeValuePath,imageUrlValuePath:h.imageUrlValuePath};u.trigger("markerRendering",p,function(e){p=Ne(p=ke(p,s),s);var t=Y.isNullOrUndefined(h.longitudeValuePath)?Y.isNullOrUndefined(s.longitude)?Y.isNullOrUndefined(s.Longitude)?null:parseFloat(s.Longitude):parseFloat(s.longitude):Number(U(s,h.longitudeValuePath)),i=Y.isNullOrUndefined(h.latitudeValuePath)?Y.isNullOrUndefined(s.latitude)?Y.isNullOrUndefined(s.Latitude)?null:parseFloat(s.Latitude):parseFloat(s.latitude):Number(U(s,h.latitudeValuePath)),o=h.offset,n=(p.cancel||!h.visible||Y.isNullOrUndefined(t)||Y.isNullOrUndefined(i)||(n=u.element.id+"_LayerIndex_"+y+"_MarkerIndex_"+m+"_dataIndex_"+d,l=u.isTileMap?R(new T(t,i),f,u.tileTranslatePoint,!0):A(i,t,f,_,u),u.isTileMap&&(P="SubLayer"===_.type&&Y.isNullOrUndefined(u.zoomModule)?l=R(new T(t,i),u.tileZoomLevel,u.tileTranslatePoint,!0):new Object),r=("AddMarker"===b?u:P).scale,a="AddMarker"===b?u.translatePoint:P.location,!p.template||isNaN(l.x)||isNaN(l.y)?p.template||isNaN(l.x)||isNaN(l.y)||(C=!0,v++,De(p,h,c,d,l,a,n,o,r,u,S.markerSVGObject)):(C=!1,O++,Re(p,void 0,n,s,m,L,l,a,r,o,u),u.renderReactTemplates())),x+=isNaN(i)||isNaN(t)?1:0,O+=p.cancel?1:0,v+=p.cancel?1:0,u.markerNullCount=Y.isNullOrUndefined(t)||Y.isNullOrUndefined(i)?u.markerNullCount+1:u.markerNullCount,c.length-u.markerNullCount),l=!1,a=h.clusterSettings.allowClustering||_.markerClusterSettings.allowClustering&&1<_.markerSettings.length?S.markerSVGObject.querySelectorAll("[id*='LayerIndex_"+y+"_MarkerIndex_"+m+"']:not([id*='_Group'])"):S.markerSVGObject.childNodes,r=S.markerSVGObject.childNodes===a?O:0;a.length===n-r-x&&"Template"!==b&&(0===M.length&&g.appendChild(S.markerSVGObject),h.clusterSettings.allowClustering||!w&&_.markerClusterSettings.allowClustering)&&(0===M.length&&(u.svgObject.appendChild(S.markerSVGObject),u.element.appendChild(u.svgObject)),-1!==_.urlTemplate.indexOf("openstreetmap")&&Y.isNullOrUndefined(_.shapeData)&&u.zoomSettings.enable?(l=Be(_,S.markerSVGObject,u,y,m,S.markerSVGObject,g,!0,!1,null,w),0===M.length&&g.appendChild(S.markerSVGObject)):l=Be(_,S.markerSVGObject,u,y,m,S.markerSVGObject,g,!0,!1,P,w),u.renderReactTemplates()),(h.clusterSettings.allowClustering||_.markerClusterSettings.allowClustering&&1<_.markerSettings.length?L.querySelectorAll("[id*='LayerIndex_"+y+"_MarkerIndex_"+m+"']:not([id*='_Group'])"):L.childNodes).length===n-v-x&&Z(u.element.id+"_Secondary_Element")&&(C||Z(u.element.id+"_Secondary_Element").appendChild(L),u.checkInitialRender&&(h.clusterSettings.allowClustering||!w&&_.markerClusterSettings.allowClustering)&&!l&&(Be(_,L,u,y,m,S.markerSVGObject,g,!1,!1,P,w),u.renderReactTemplates()),_.markerClusterSettings.allowClustering)&&0<M.length&&Z(u.element.id+"_Layer_Collections").appendChild(g)})})})},b.prototype.calculateIndividualLayerMarkerZoomLevel=function(e,t,i){var o=Math.abs(this.maps.baseMapBounds.latitude.max-this.maps.baseMapBounds.latitude.min),n=Math.abs(this.maps.baseMapBounds.longitude.max-this.maps.baseMapBounds.longitude.min),t=Math.floor(Math.log(t/o)),o=(t=i<t?i:t,i<(o=Math.floor(Math.log(e/n)))?i:o),e=Math.min(t,o),n=Math.min(e,i-1);return this.maps.isTileMap||jt(n,this.maps),n},b.prototype.calculateZoomCenterPositionAndFactor=function(e){var o,n,l,a,t,i,r,s,d,p;Y.isNullOrUndefined(this.maps)||(this.maps.zoomSettings.shouldZoomInitially&&this.maps.markerModule?(r=i=t=void 0,s=this.maps.zoomSettings.maxZoom,d=this.maps.mapAreaRect.width,p=this.maps.mapAreaRect.height,this.maps.markerZoomedState=this.maps.markerZoomedState||(!Y.isNullOrUndefined(this.maps.markerZoomFactor)&&1<this.maps.markerZoomFactor?this.maps.markerZoomedState:!this.maps.markerZoomedState),this.maps.defaultState=this.maps.markerZoomedState?!this.maps.markerZoomedState:this.maps.defaultState,Array.prototype.forEach.call(e,function(e){0!==e.markerSettings.length&&Array.prototype.forEach.call(e.markerSettings,function(e){e=e.dataSource;!Y.isNullOrUndefined(e)&&0<e.length&&Array.prototype.forEach.call(e,function(e,t){var i=Y.isNullOrUndefined(e.latitude)?Y.isNullOrUndefined(e.Latitude)?null:parseFloat(e.Latitude):parseFloat(e.latitude),e=Y.isNullOrUndefined(e.longitude)?Y.isNullOrUndefined(e.Longitude)?null:parseFloat(e.Longitude):parseFloat(e.longitude);Y.isNullOrUndefined(i)||Y.isNullOrUndefined(e)||(o=Y.isNullOrUndefined(o)&&0===t?e:o,n=Y.isNullOrUndefined(n)&&0===t?i:n,l=Y.isNullOrUndefined(l)&&0===t?i:l,a=Y.isNullOrUndefined(a)&&0===t?e:a,e<o&&(o=e),i<l&&(l=i),a<e&&(a=e),n<i&&(n=i))})})}),Y.isNullOrUndefined(l)||Y.isNullOrUndefined(o)||Y.isNullOrUndefined(a)||Y.isNullOrUndefined(n)||(i=(l+n)/2,r=(o+a)/2,this.maps.markerCenterLatitude=i,this.maps.markerCenterLongitude=r,(Y.isNullOrUndefined(this.maps.markerZoomCenterPoint)||this.maps.markerZoomedState)&&(this.maps.markerZoomCenterPoint={latitude:i,longitude:r}),e=void 0,this.maps.isTileMap||0===this.maps.baseMapRectBounds.min.x?(t=Dt(l,n,o,a,d,p,this.maps,!1),this.maps.isTileMap?e=!Y.isNullOrUndefined(this.maps.markerZoomFactor)&&!Y.isNullOrUndefined(this.maps.mapScaleValue)&&1<this.maps.mapScaleValue&&1!==this.maps.markerZoomFactor?this.maps.mapScaleValue:t:(e=!Y.isNullOrUndefined(this.maps.mapScaleValue)&&1!==Math.floor(this.maps.scale)&&this.maps.mapScaleValue!==t&&Y.isNullOrUndefined(this.maps.shouldZoomCurrentFactor)?this.maps.mapScaleValue:t)!==this.maps.mapScaleValue||1!==this.maps.markerZoomFactor&&1!==this.maps.mapScaleValue||this.maps.enablePersistence||(e=t)):(t=this.calculateIndividualLayerMarkerZoomLevel(d,p,s),e=!Y.isNullOrUndefined(this.maps.mapScaleValue)&&this.maps.mapScaleValue!==t?this.maps.mapScaleValue:t),this.maps.markerZoomFactor=e)):(this.maps.markerZoomedState=!1,1<this.maps.markerZoomFactor&&(this.maps.markerCenterLatitude=null,this.maps.markerCenterLongitude=null,this.maps.markerZoomFactor=1,this.maps.enablePersistence||(this.maps.mapScaleValue=1)),this.maps.isTileMap&&!this.maps.enablePersistence&&this.maps.mapScaleValue<=1&&(this.maps.tileZoomLevel=0===this.maps.mapScaleValue?this.maps.isZoomByPosition?this.maps.tileZoomLevel:1:this.maps.mapScaleValue,1!==this.maps.mapScaleValue||1!==this.maps.markerZoomFactor||Y.isNullOrUndefined(this.maps.tileTranslatePoint)||(this.maps.tileTranslatePoint.x=0,this.maps.tileTranslatePoint.y=0))))},b.prototype.markerClick=function(e){var t,i,o,n,l,a,r=e.target.id;-1===(r=-1===r.indexOf(this.maps.element.id)&&(t=e.target.closest("."+this.maps.element.id+"_marker_template_element"),!Y.isNullOrUndefined(t))&&-1<t.id.indexOf("_MarkerIndex_")?t.id:r).indexOf("_LayerIndex_")||0<r.indexOf("_cluster_")||(t=this.getMarker(r),Y.isNullOrUndefined(t))||(t.marker.enableDrag&&(document.getElementById(this.maps.element.id+"_svg").style.cursor="grabbing"),a={cancel:!1,name:Vo,data:t.data,maps:this.maps,marker:t.marker,target:r,x:e.clientX,y:e.clientY,latitude:t.data.latitude||t.data.Latitude,longitude:t.data.longitude||t.data.Longitude,value:t.data.name},this.maps.trigger(Vo,a),!t.marker.enableDrag)||(a=!1,i=parseInt(r.split("_LayerIndex_")[1].split("_")[0],10),o=parseInt(r.split("_MarkerIndex_")[1].split("_")[0],10),n=parseInt(r.split("_dataIndex_")[1].split("_")[0],10),l=this.maps.layers[i].markerSettings[o],a=0<this.sameMarkerData.length?0<this.sameMarkerData[0].data.filter(function(e){return e.index===n}).length&&this.sameMarkerData[0].layerIndex===i&&this.sameMarkerData[0].markerIndex===o:a)||(a={name:Go,x:e.clientX,y:e.clientY,latitude:t.data.latitude||t.data.Latitude,longitude:t.data.longitude||t.data.Longitude,layerIndex:i,markerIndex:o,dataIndex:n},this.maps.trigger(Go,a),this.maps.markerDragArgument={targetId:r,x:e.clientX,y:e.clientY,latitude:t.data.latitude||t.data.Latitude,longitude:t.data.longitude||t.data.Longitude,shape:Y.isNullOrUndefined(l.shapeValuePath)?l.shape:l.dataSource[n][l.shapeValuePath],layerIndex:i,markerIndex:o,dataIndex:n})},b.prototype.markerClusterClick=function(e){var t,i=e.target.id;-1===i.indexOf("_LayerIndex_")||-1===i.indexOf("_cluster_")||(t=this.getMarker(i),Y.isNullOrUndefined(t))||(0<t.clusterCollection.length&&this.maps.markerClusterExpand&&(E(this.maps.element.id+"_mapsTooltip")&&-1<this.maps.mapsTooltipModule.tooltipTargetID.indexOf("_MarkerIndex_")&&I(this.maps.element.id+"_mapsTooltip"),0<this.sameMarkerData.length&&!this.maps.markerClusterExpandCheck?(this.maps.markerClusterExpandCheck=!0,Ze(this.sameMarkerData,this.maps)):(this.sameMarkerData=t.clusterCollection,this.maps.markerClusterExpandCheck=!1,je(this.sameMarkerData,this.maps,this.markerSVGObject,!0))),i={cancel:!1,name:Ho,data:t,maps:this.maps,target:i,x:e.clientX,y:e.clientY,latitude:t.data.latitude||t.data.Latitude,longitude:t.data.longitude||t.data.Longitude,markerClusterCollection:t.markCollection},this.maps.trigger(Ho,i))},b.prototype.getMarker=function(e){var t=e.split("_LayerIndex_"),i=parseInt(t[1].split("_")[0],10),o=this.maps.layers[i],n=[],l=[];if(-1<e.indexOf("_MarkerIndex_")){var a=parseInt(t[1].split("_MarkerIndex_")[1].split("_")[0],10),t=parseInt(t[1].split("_dataIndex_")[1].split("_")[0],10),r=o.markerSettings[a],s=this.allowInnerClusterSetting(o);if(this.maps.markerClusterExpand=(!s&&o.markerClusterSettings.allowClustering?o.markerClusterSettings:r.clusterSettings).allowClusterExpand,!isNaN(a)){var d=r.dataSource[t],p=[];if(!r.template&&-1<e.indexOf("_cluster_")&&this.maps.markerClusterExpand&&Array.prototype.forEach.call(r.dataSource,function(e,t){e.latitude===d.latitude&&e.longitude===d.longitude&&p.push({data:d,index:t})}),-1<e.indexOf("_cluster_")){for(var s=!s&&o.markerClusterSettings.allowClustering?o.markerClusterSettings:o.markerSettings[a].clusterSettings,o=document.getElementById(-1<e.indexOf("_datalabel_")?"Balloon"===s.shape?e.split("_datalabel_")[0]+"_Group":e.split("_datalabel_")[0]:"Balloon"===s.shape?e+"_Group":e),s=("Balloon"===s.shape?o.children[0]:o).textContent.split(",").map(Number),p=[],h=0,m=s;h<m.length;h++){var c=m[h];p.push({data:r.dataSource[c],index:c}),n.push(r.dataSource[c])}l.push({data:p,layerIndex:i,markerIndex:a,dataIndex:t,targetClusterIndex:+(-1<e.split("_cluster_")[1].indexOf("_datalabel_")?e.split("_cluster_")[1].split("_datalabel_")[0]:e.split("_cluster_")[1]),isClusterSame:!1})}return{marker:r,data:d,clusterCollection:l,markCollection:n}}}return null},b.prototype.markerMove=function(e){var t,i=e.target.id;-1===i.indexOf("_LayerIndex_")||0<i.indexOf("_cluster_")||(t=this.getMarker(i),Y.isNullOrUndefined(t))||(t.marker.enableDrag&&(document.getElementById(this.maps.element.id+"_svg").style.cursor=Y.isNullOrUndefined(this.maps.markerDragArgument)?"pointer":"grabbing"),t={cancel:!1,name:Wo,data:t.data,maps:this.maps,target:i,x:e.clientX,y:e.clientY},this.maps.trigger(Wo,t))},b.prototype.markerClusterMouseMove=function(e){var t,i=e.target.id;-1===i.indexOf("_LayerIndex_")||-1===i.indexOf("_cluster_")||(t=this.getMarker(i),this.maps.markerClusterExpand&&(e.target.style.cursor="pointer"),Y.isNullOrUndefined(t))||(t={cancel:!1,name:Xo,data:t.data,maps:this.maps,target:i,x:e.clientX,y:e.clientY},this.maps.trigger(Xo,t))},b.prototype.allowInnerClusterSetting=function(e){for(var t=!1,i=0;i<e.markerSettings.length;i++)if(e.markerSettings[i].clusterSettings.allowClustering){t=!0;break}return t},b.prototype.initializeMarkerClusterList=function(){for(var e=0;e<this.maps.layers.length;e++)this.initialMarkerCluster[e]=[],this.zoomedMarkerCluster[e]=[]},b.prototype.getModuleName=function(){return"Marker"},b.prototype.destroy=function(){this.maps=null,this.markerSVGObject=null,this.sameMarkerData=[],this.initialMarkerCluster=[],this.zoomedMarkerCluster=[]};var fn=b;function b(e){this.maps=e,this.sameMarkerData=[],this.initialMarkerCluster=[],this.zoomedMarkerCluster=[]}Sn.prototype.polygonRender=function(n,l,a){var r=n.layersCollection[l],s=n.renderer.createGroup({id:n.element.id+"_LayerIndex_"+l+"_Polygons_Group"});return r.polygonSettings.polygons.map(function(e,t){var i=n.renderer.createGroup({id:n.element.id+"_LayerIndex_"+l+"_Polygons_Group_"+t}),o=e.points;!Y.isNullOrUndefined(e.points)&&0<e.points.length&&(o=D(n,a,r,o),t=new B(n.element.id+"_LayerIndex_"+l+"_PolygonIndex_"+t,e.fill,e.borderWidth/a,e.borderColor,e.opacity,e.borderOpacity,"",o),e=n.renderer.drawPath(t),Ve(n.selectedPolygonElementId,n.polygonSelectionClass,e,"PolygonselectionMapStyle"),i.appendChild(e),s.appendChild(i))}),s},Sn.prototype.getModuleName=function(){return"Polygon"},Sn.prototype.destroy=function(){};var bn=Sn;function Sn(e){}xn.prototype.getDataLabel=function(e,t,i,o){for(var n,l=0;l<(Y.isNullOrUndefined(e)?0:e.length);l++){var a=e[l],r=!Y.isNullOrUndefined(a[o])&&isNaN(a[o])&&"string"==typeof a[o]?a[o].toLowerCase():a[o];if(i=Y.isNullOrUndefined(i)||"string"!=typeof i?i:i.toString(),r===(Y.isNullOrUndefined(i)||"string"!=typeof i?i:i.toLowerCase())){n=a;break}}return n},xn.prototype.renderLabel=function(g,y,e,t,D,f,b,S){var v,x,C,O,R,V,G,p,_,M=this,i=g.dataLabelSettings,L=g.dataLabelSettings.textStyle,P=g.dataLabelSettings,o=g.dataLabelSettings.labelPath,w=[[]],T=0,n=0,I=e,k="",l=0,H=!1,h=e.properties,N=this.maps.element.id+"_LayerIndex_"+y+"_shapeIndex_"+b+"_LabelIndex_"+b,F=new J(0,0),a=t[b],m=(L.fontFamily="material"!==this.maps.theme.toLowerCase()?this.maps.themeStyle.labelFontFamily:L.fontFamily,L.fontWeight=L.fontWeight||this.maps.themeStyle.fontWeight,L.size=L.size||this.maps.themeStyle.fontSize,e=Y.isNullOrUndefined(a)?null:a.property,"[object Array]"===Object.prototype.toString.call(g.shapePropertyPath)?g.shapePropertyPath:[g.shapePropertyPath]),e=0!==g.animationDuration||"Enable"===Y.animationMode||Y.isNullOrUndefined(this.maps.zoomModule),e=this.maps.isTileMap?new Object:(1<this.maps.zoomSettings.zoomFactor&&!Y.isNullOrUndefined(this.maps.zoomModule)?at:lt)(this.maps,g,e),E=(this.maps.isTileMap?this.maps:e).scale,z=this.maps.isTileMap?this.maps.translatePoint:e.location,B=this.maps.zoomTranslatePoint,A=Y.isNullOrUndefined(this.maps.scale)?1:Math.floor(this.maps.scale),U=this.maps.zoomSettings.enable&&!Y.isNullOrUndefined(this.maps.zoomShapeCollection)&&0<this.maps.zoomShapeCollection.length&&!this.maps.isAddLayer;this.maps.translateType="labels";for(var r=0;r<m.length&&!(h[m[r]]&&(p=m[r],O=this.getDataLabel(g.dataSource,g.shapeDataPath,I.properties[p],g.shapeDataPath)));r++);if(O=this.getDataLabel(g.dataSource,g.shapeDataPath,I.properties[p],g.shapeDataPath),!Y.isNullOrUndefined(a)&&!Y.isNullOrUndefined(a.property))if(w=[[]],t[b]._isMultiPolygon||"Point"===t[b].type||"MultiPoint"===t[b].type){if("Point"!==t[b].type&&"MultiPoint"!==t[b].type)for(var c=t[b],r=0;r<c.length;r++)w.push(this.getPoint(c[r],[])),n<(l=w[w.length-1].length)&&(n=l,T=w.length-1)}else w.push(this.getPoint(t[b],[])),n<(l=w[w.length-1].length)&&(n=l,T=w.length-1);if(k=Y.isNullOrUndefined(O)?I.properties[o]:Y.isNullOrUndefined(O[o])?I.properties[o]||O[g.shapeDataPath]:O[o].toString(),"[object Array]"===Object.prototype.toString.call(g.shapePropertyPath)&&Y.isNullOrUndefined(k)&&!Y.isNullOrUndefined(g.dataSource)&&0===g.dataSource.length)for(var s=0;s<g.shapePropertyPath.length;s++)if(I.properties[g.shapePropertyPath[s]]){k=I.properties[g.shapePropertyPath[s]];break}Y.isNullOrUndefined(k)&&""!==g.dataLabelSettings.template&&0===g.dataSource.length&&(k=I.properties[g.shapePropertyPath]);var Z,W=k=Y.isNullOrUndefined(k)&&!Y.isNullOrUndefined(g.dataSource)&&0<g.dataSource.length?"":k,q=this.maps.projectionType,X=Z=et(w[T],q,g.geometryType);if(!Y.isNullOrUndefined(k)&&!Y.isNullOrUndefined(Z)){if(U&&1<A&&!this.maps.zoomNotApplied&&""===i.template){if(0<y)for(var d=0;d<this.maps.zoomLabelPositions.length;d++)if(this.maps.zoomLabelPositions[d].dataLabelText===k){R=b,b=d,H=!0;break}V=Z.x,G=Z.y,Z.x=(Z.x+B.x)*E,Z.y=(Z.y+B.y)*E}Z.y="Mercator"===this.maps.projectionType||"Normal"===g.geometryType?Z.y:-Z.y,Y.isNullOrUndefined(this.maps.format)||isNaN(Number(k))||isNaN(parseFloat(k))||this.maps.useGroupingSeparator&&(k=dt(this.maps,parseFloat(k)),Y.isNullOrUndefined(O)||(O[o]=k));var j={name:Yo,maps:this.maps,cancel:!1,border:{color:i.border.color,width:i.border.width,opacity:i.border.opacity},datalabel:i,fill:i.fill,template:i.template,text:k,offsetX:0,offsetY:0};this.maps.trigger("dataLabelRendering",j,function(e){if(!j.cancel){var t,i=U&&1<A&&!M.maps.zoomNotApplied&&M.maps.zoomShapeCollection.length>b?M.maps.dataLabelShape[b]*E:(Z.rightMax.x-Z.leftMax.x)*E,o=(Y.isNullOrUndefined(M.maps.dataLabelShape)||M.maps.isReset||(_=X.rightMax.x-X.leftMax.x,M.maps.dataLabelShape.push(_)),re(k=j.text===k||j.cancel?k:j.text,L)),n=k,l=o,a=Z.y-o.height/2,r=Z.y+o.height/2,s=(Z.y+z.y)*E-o.height/2,d=(Z.y+z.y)*E+o.height/2,a=(5<(a=Ke(w[T],a,r)).length&&"MultiPolygon"!==I.geometry.type&&"MultiPolygon"!==I.type&&(r=et(a,q,g.geometryType),U&&1<A&&!M.maps.zoomNotApplied&&""===j.template&&(r.x=(M.maps.zoomLabelPositions[b].location.x+B.x)*E,r.y=(M.maps.zoomLabelPositions[b].location.y+B.y)*E),V=r.x,Z.x=r.x,i=U&&1<A&&!M.maps.zoomNotApplied&&M.maps.zoomShapeCollection.length>b?M.maps.dataLabelShape[b]*E:0<(r.rightMax.x-r.leftMax.x)*E?(r.rightMax.x-r.leftMax.x)*E:i),(Z.x+z.x)*E+o.width/2),r=(Z.x+z.x)*E-o.width/2;if(M.value[b]={rightWidth:a,leftWidth:r,heightTop:s,heightBottom:d},""!==j.template){a=(_=pt(j.template,M.maps))?_(Y.isNullOrUndefined(O)?I.properties:O,M.maps,j.template,M.maps.element.id+"_LabelTemplate",!1):document.createElement("div");a.innerHTML=_?"":j.template,t=Te(a,N,Y.isNullOrUndefined(O)?I.properties:O),M.maps.isTileMap?(t.style.left=(Z.x+z.x)*E-o.width/2+"px",t.style.top=(Z.y+z.y)*E-o.height+"px"):(t.style.left=Math.abs(M.maps.baseMapRectBounds.min.x-Z.x)*E+e.offsetX+"px",t.style.top=Math.abs(M.maps.baseMapRectBounds.min.y-Z.y)*E+e.offsetY+"px"),f.appendChild(t)}else{r=Y.isNullOrUndefined(P.smartLabelMode)?"None":P.smartLabelMode.toString(),s=("Trim"===r&&(l=re(n=it(i,"number"==typeof k?k.toString():k,L,null,!0),L),v=new de(N,F.x,F.y,"middle",n,"","")),"None"===r&&(v=new de(N,F.x,F.y,"middle",k,"","")),"Hide"===r&&(k=i>=o.width?k:"",v=new de(N,F.x,F.y,"middle",k,"","")),Y.isNullOrUndefined(v)||(k=v.text),Y.isNullOrUndefined(P.intersectionAction)?"None":P.intersectionAction.toString());if("Hide"===s){for(var p=0;p<S.length;p++)if(!Y.isNullOrUndefined(S[p])&&!(M.value[b].leftWidth>S[p].rightWidth||M.value[b].rightWidth<S[p].leftWidth||M.value[b].heightTop>S[p].heightBottom||M.value[b].heightBottom<S[p].heightTop)){k="";break}S.push(M.value[b]),v=new de(N,F.x,F.y,"middle",k,"","")}var h,m,c;if("Trim"===s){for(var u=0;u<S.length;u++)if(!Y.isNullOrUndefined(S[u]))if(S[u].rightWidth<M.value[b].leftWidth||S[u].leftWidth>M.value[b].rightWidth||S[u].heightBottom<M.value[b].heightTop||S[u].heightTop>M.value[b].heightBottom)n=k,0;else{if(M.value[b].leftWidth>S[u].leftWidth){n=it((i=S[u].rightWidth-M.value[b].leftWidth)-(M.value[b].rightWidth-M.value[b].leftWidth),k,L,null,!0);break}if(M.value[b].leftWidth<S[u].leftWidth){i=M.value[b].rightWidth-S[u].leftWidth,n=it(Math.abs(i-(M.value[b].rightWidth-M.value[b].leftWidth)),k,L,null,!0);break}}l=re(n,L),S.push(M.value[b]),v=new de(N,F.x,F.y,"middle",n,"","")}"None"===s&&(v=new de(N,F.x,F.y,"middle",k,"","")),1<n.length&&1<(d=j.border).width&&(a=j.fill,r=P.opacity,s=P.rx,h=P.ry,c=m=void 0,c=U&&1<A&&!M.maps.zoomNotApplied?(m=Z.x-o.width/2,Z.y-o.height/2-5):(m=(Z.x+z.x)*E-o.width/2,(Z.y+z.y)*E-o.height/2),d.opacity=Y.isNullOrUndefined(d.opacity)?r:d.opacity,a=new Q(M.maps.element.id+"_LayerIndex_"+y+"_shapeIndex_"+b+"_rectIndex_"+b,a,d,r,new K(m+e.offsetX,c+e.offsetY,o.width,o.height),s,h),(C=M.maps.renderer.drawRectangle(a)).setAttribute("visibility",0<g.dataLabelSettings.animationDuration||"Enable"===Y.animationMode?"hidden":"visibile"),D.appendChild(C)),(x=Me(v,L,L.color||M.maps.themeStyle.dataLabelFontColor,D)).setAttribute("aria-label",k),x.setAttribute("role","region"),x.setAttribute("visibility",0<g.dataLabelSettings.animationDuration||"Enable"===Y.animationMode?"hidden":"visibile"),U&&1<A&&!M.maps.zoomNotApplied?(x.setAttribute("transform","translate( "+(Z.x+e.offsetX)+" "+(Z.y+e.offsetY)+" )"),Z.x=V,Z.y=G):x.setAttribute("transform","translate( "+((Z.x+z.x)*E+e.offsetX)+" "+((Z.y+z.y)*E+l.height/2+e.offsetY)+" )"),D.appendChild(x)}M.dataLabelCollections.push({location:{x:Z.x+e.offsetX,y:Z.y+e.offsetY},element:Y.isNullOrUndefined(t)?x:t,layerIndex:y,shapeIndex:H?R:b,labelIndex:H?R:b,dataLabelText:W}),0<f.childElementCount&&!M.maps.element.contains(f)&&(document.getElementById(M.maps.element.id+"_Secondary_Element").appendChild(f),M.maps.renderReactTemplates()),!(0<g.dataLabelSettings.animationDuration||"Enable"===Y.animationMode)||Y.isNullOrUndefined(x)||(M.datalabelAnimate(x,P.animationDuration,L.opacity,!1),Y.isNullOrUndefined(C))||M.datalabelAnimate(C,P.animationDuration,P.opacity,!0)}})}},xn.prototype.datalabelAnimate=function(t,e,i,o){var n;new Y.Animation({}).animate(t,{duration:0===e&&"Enable"===Y.animationMode?1e3:e,delay:0,progress:function(e){e.timeStamp>e.delay&&(n=(e.timeStamp-e.delay)/e.duration,t.setAttribute("style","user-select: none; visibility: visible;"),t.setAttribute(o?"fill-opacity":"opacity",(i*n).toString()))},end:function(){t.style.visibility="visible",t.setAttribute(o?"fill-opacity":"opacity",i.toString())}})},xn.prototype.getPoint=function(e,t){return"MultiLineString"===e.type?Array.prototype.forEach.call(e,function(e){Array.prototype.forEach.call(e,function(e){t.push(new J(e.point.x,e.point.y))})}):Array.prototype.forEach.call(e,function(e){t.push(new J(e.point.x,e.point.y))}),t},xn.prototype.getModuleName=function(){return"DataLabel"},xn.prototype.destroy=function(){this.dataLabelCollections=[],this.value=null,this.maps=null};var vn=xn;function xn(e){this.value={rightWidth:0,leftWidth:0,heightTop:0,heightBottom:0},this.maps=e,this.dataLabelCollections=[]}On.prototype.renderNavigation=function(e,t,i){if(!Y.isNullOrUndefined(this.maps))for(var o,n,l,a,r,s,d,p,h=void 0,m=e.navigationLineSettings,c=[],u=void 0,g=void 0,y=void 0,f=void 0,b=void 0,S=void 0,v=void 0,x=void 0,C=void 0,O=void 0,_=void 0,M=this.maps.renderer.createGroup({id:this.maps.element.id+"_LayerIndex_"+i+"_line_Group"}),L=0;L<m.length;L++){if(n=m[L].latitude,o=m[L].longitude,l=!Y.isNullOrUndefined(m[L].visible)&&m[L].visible,u=Y.isNullOrUndefined(m[L].angle)?0:m[L].angle,a=m[L].width||1,r=m[L].color,s=m[L].dashArray,p=m[L].arrowSettings,d=!Y.isNullOrUndefined(p)&&p.showArrow,!Y.isNullOrUndefined(o)&&!Y.isNullOrUndefined(n)&&o.length===n.length&&l)for(var P=0;P<o.length;P++){var w=this.maps.isTileMap?R(new J(o[P],n[P]),t,this.maps.tileTranslatePoint,!0):A(n[P],o[P],t,e,this.maps);c.push(w)}for(var _=this.maps.renderer.createGroup({id:this.maps.element.id+"_LayerIndex_"+i+"_NavigationGroup"+L}),T=0;T<c.length-1;T++){var I,k,N,F,u=1<(u=u<-1?-1:u)?1:u,E=this.maps.element.id+"_LayerIndex_"+i+"_NavigationIndex_"+L+"_Line"+T,z=this.convertRadius(c[T],c[T+1]);u<=1&&0<u&&(y=0,c[T].x>c[T+1].x)&&(y=1),-1<=u&&u<0&&c[T].x>c[T+(y=1)].x&&(y=0),d&&(f=p.color,b=Y.isNullOrUndefined(p.size)?0:p.size,O=Y.isNullOrUndefined(p.offSet)?0:p.offSet,I=Math.round(b/2),v="Start"===(S=p.position)?"url(#triangle"+L+")":null,x="End"===S?"url(#triangle"+L+")":null,0!==C&&0===u&&(C="Start"===S?O:-O),C=Y.isNullOrUndefined(C)?0:C,k=this.maps.element.id+"_triangle",(N=this.maps.renderer.createDefs()).innerHTML+='<marker id="triangle'+L+'"></marker>',(F=N.querySelector("#triangle"+L)).setAttribute("markerWidth",b.toString()),F.setAttribute("markerHeight",b.toString()),F.setAttribute("refX",(I-C).toString()),F.setAttribute("refY",I.toString()),F.setAttribute("orient","auto"),g=new B(k,f,a,r,1,1,s,"M 0,0  L 0,"+b+" L "+I+", "+I+" Z"),h=this.maps.renderer.drawPath(g),F.appendChild(h),N.appendChild(F),_.appendChild(N)),k=0===(u=Math.abs(u))?"M "+c[T].x+","+c[T].y+"L "+c[T+1].x+","+c[T+1].y+" ":"M "+c[T].x+","+c[T].y+" A "+(z/2+(1-u)*z/(10*u))+" "+(z/2+(1-u)*z/(10*u))+" 0,0,"+y+" , "+c[T+1].x+","+c[T+1].y+" ",g=new B(E,"none",a,r,1,1,s,k),h=this.maps.renderer.drawPath(g),Y.isNullOrUndefined(S)||("Start"===S?h.setAttribute("marker-start",v):h.setAttribute("marker-end",x)),Ve(this.maps.selectedNavigationElementId,this.maps.navigationSelectionClass,h,"navigationlineselectionMapStyle"),_.appendChild(h),M.appendChild(_)}c=[]}return M},On.prototype.convertRadius=function(e,t){var i=t.x-e.x,t=t.y-e.y;return Math.sqrt(Math.pow(i,2)+Math.pow(t,2))},On.prototype.getModuleName=function(){return"NavigationLine"},On.prototype.destroy=function(){this.maps=null};var Cn=On;function On(e){this.maps=e}S.prototype.renderLegend=function(){this.legendRenderingCollections=[],this.legendCollection=[],this.totalPages=[],this.widthIncrement=0,this.heightIncrement=0,this.defsElement=this.maps.renderer.createDefs(),this.maps.svgObject.appendChild(this.defsElement),this.initialMapAreaRect=this.maps.mapAreaRect,this.calculateLegendBounds(),this.drawLegend()},S.prototype.calculateLegendBounds=function(){var h=this,e=this.maps,m=e.legendSettings,t=(this.legendCollection=[],e.mapAreaRect.y);if(this.legendRenderingCollections=[],Array.prototype.forEach.call(e.layersCollection,function(e,t){if(!Y.isNullOrUndefined(e.shapeData)){var i=e.shapeData.features,o=e.shapeDataPath,n=e.shapePropertyPath,l=e.dataSource,a=void 0,r=void 0;if("Layers"===m.type&&e.visible)a=e.shapeSettings.colorValuePath,r=e.shapeSettings.colorMapping,h.getLegends(t,i,r,l,o,a,n);else if("Bubbles"===m.type)for(var s=0,d=e.bubbleSettings;s<d.length;s++){var p=d[s];p.visible&&(a=p.colorValuePath,r=p.colorMapping,l=p.dataSource,h.getLegends(t,i,r,l,o,a,n))}}"Markers"===m.type&&h.getMarkersLegendCollections(t,e.markerSettings)}),0<this.legendCollection.length)for(var i=0;i<this.legendCollection.length;i++){var o=this.legendCollection[i],n={name:en,cancel:!1,fill:o.fill,shape:m.shape,shapeBorder:m.shapeBorder,text:"number"==typeof o.text?o.text.toString():o.text};e.trigger("legendRendering",n),o.fill=n.fill,o.shape=n.shape,o.shapeBorder=n.shapeBorder,o.text=n.text,n.cancel&&(this.legendCollection.splice(i,1),i--)}var l=e.legendSettings.title.text,B=e.legendSettings.titleStyle;if(0<this.legendCollection.length){var a,A,U,Z=m.mode,r=0,s=0,d=m.shapePadding,p=m.shapeHeight,c=m.shapeWidth,u=[],g=[],y=m.position,j=m.labelDisplayMode,f="None"===m.orientation?"Top"===y||"Bottom"===y?"Horizontal":"Vertical":m.orientation,b=1<m.width.length?-1<m.width.indexOf("%")?e.availableSize.width/100*parseInt(m.width,10):parseInt(m.width,10):null,S=1<m.height.length?-1<m.height.indexOf("%")?e.availableSize.height/100*parseInt(m.height,10):parseInt(m.height,10):null,v=0,x=0,D=q(l,B);if("Interactive"===Z){for(var R=m.textStyle,y=this.legendCollection.length,C="Horizontal"===f?Y.isNullOrUndefined(b)?e.mapAreaRect.width/y:b/y:Y.isNullOrUndefined(b)?25:b,O="Horizontal"===f?Y.isNullOrUndefined(S)?25:S:Y.isNullOrUndefined(S)?e.mapAreaRect.height/y:S/y,_=(x=D.height+10,m.labelPosition),M=v=0,V=0,L=0,P=0,w=0,G=0,i=0;i<this.legendCollection.length;i++){var v="Horizontal"===f?v+C:v,x="Horizontal"===f?x:x+O,T=this.legendCollection[i].text,I=new W(0,0);if("None"===j?I=q(T,R):"Trim"===j?I=q(T=it("Horizontal"===f?C:O,T,R),R):T="","Left"===m.position||"Right"===m.position||"Float"===m.position)for(var H=0;H<this.legendCollection.length;H++){var k=q((o=this.legendCollection[H]).text,m.textStyle);this.textMaxWidth=Math.max(this.textMaxWidth,k.width)}w=Math.max(w,I.height),G=Math.max(G,I.width),0<I.width&&0<I.height&&(V="Horizontal"===f?(M=v+C/2,"After"===_?x+O+I.height/2+10:x-10):(M="After"===_?v-this.textMaxWidth/2-10:v+C+this.textMaxWidth/2+10,x+O/2+I.height/4)),0===i?(L="Horizontal"!==f&&"After"===_?M-this.textMaxWidth/2:v,P="Horizontal"!==f||"After"===_?x:V-I.height/2,1===this.legendCollection.length&&(b="Horizontal"===f?Math.abs(v+C-L):C+this.textMaxWidth+10,S="Horizontal"===f?O+w/2+10:Math.abs(x+O-P))):i===this.legendCollection.length-1&&(b="Horizontal"===f?Math.abs(v+C-L):C+this.textMaxWidth+10,S="Horizontal"===f?O+w/2+10:Math.abs(x+O-P)),this.legendRenderingCollections.push({fill:this.legendCollection[i].fill,x:v,y:x,width:C,height:O,text:T,textX:M,textY:V,textWidth:I.width,textHeight:I.height,shapeBorder:this.legendCollection[i].shapeBorder})}1===this.legendCollection.length&&(S=w+10,b=C),this.legendItemRect={x:L,y:P,width:b,height:S}}else{for(var b=Y.isNullOrUndefined(b)?e.mapAreaRect.width:b,S=Y.isNullOrUndefined(S)?e.mapAreaRect.height:S,N=0,i=this.page=0;i<this.legendCollection.length;i++){var F,E,z,o=this.legendCollection[i],k=(Y.isNullOrUndefined(this.totalPages[this.page])&&(this.totalPages[this.page]={Page:this.page+1,Collection:[]}),q(o.text,m.textStyle));this.textMaxWidth=Math.max(this.textMaxWidth,k.width),0===i?(v=r=10+c/2,x=s=t+D.height+(p>k.height?p/2:k.height/4)):(F=k.height>p?k.height:p,"Horizontal"===f?s=(z=g[N-1].x+g[N-1].width+10+c)+d+k.width>b?S<(E=(g[N-1].y>u[N-1].y+p/2?g[N-1].y:u[N-1].y+p/2)+t)+F?(this.getPageChanged(),N=0,u=[],g=[],r=v,x):(r=u[0].x,E+F/2):(r=z-c/2,u[N-1].y):S<(E=g[N-1].y>u[N-1].y+p/2?g[N-1].y:u[N-1].y+p/2)+t+F?(z=g[N-1].x+this.textMaxWidth+10)+d+k.width>b?(r=v,s=x,g=[],u=[],this.getPageChanged(),N=0):(r=z+c/2,s=u[0].y):(r=u[N-1].x,s=E+10+p/2)),F=r+c/2+d,a=s+k.height/4,u.push({x:r,y:s}),g.push({x:F,y:a,width:k.width,height:k.height/2}),this.totalPages[this.page].Collection.push({DisplayText:o.text,ImageSrc:o.imageSrc,Shape:{x:r,y:s},Text:{x:F,y:a},Fill:o.fill,legendShape:o.shape,shapeBorder:o.shapeBorder,idIndex:i,Rect:{x:u[N].x-c/2,y:u[N].y-p/2<a-k.height?u[N].y-p/2:a-k.height,width:Math.abs(u[N].x-c/2-(F+k.width)),height:p>k.height?p:k.height}}),N++}l=this.totalPages[0].Collection;Array.prototype.forEach.call(l,function(e,t){e=new K(e.Rect.x,e.Rect.y,e.Rect.width,e.Rect.height);0===t&&(A=e.x,U=e.y),h.widthIncrement=Math.max(h.widthIncrement,Math.abs(A-(e.x+e.width))),h.heightIncrement=Math.max(h.heightIncrement,Math.abs(U-(e.y+e.height)))}),b=this.widthIncrement<b?this.widthIncrement:b,S=this.heightIncrement<S?this.heightIncrement:S,this.legendItemRect={x:l[0].Rect.x,y:l[0].Rect.y,width:b,height:S}}}},S.prototype.getLegends=function(e,t,i,o,n,l,a){this.getRangeLegendCollection(e,t,i,o,n,l,a),this.getEqualLegendCollection(e,t,i,o,n,l,a),this.getDataLegendCollection(e,t,i,o,n,l,a)},S.prototype.getPageChanged=function(){this.page++,Y.isNullOrUndefined(this.totalPages[this.page])&&(this.totalPages[this.page]={Page:this.page+1,Collection:[]})},S.prototype.legendTextTrim=function(e,t,i,o){var n=t,l=o-q(t,i).width;if(e<o)for(var a=t.length-1;0<=a;--a)if(l+q(n=t.substring(0,a)+"...",i).width<=e||n.length<4)return n=n.length<4?" ":n;return n},S.prototype.drawLegend=function(){var e=this.maps,t=e.legendSettings,i=e.renderer,o={size:t.textStyle.size,color:t.textStyle.color,fontFamily:t.textStyle.fontFamily,fontWeight:t.textStyle.fontWeight,fontStyle:t.textStyle.fontStyle,opacity:t.textStyle.opacity};if(this.legendGroup=i.createGroup({id:e.element.id+"_Legend_Group"}),"Interactive"===t.mode)for(var n=0;n<this.legendRenderingCollections.length;n++){var l=e.element.id+"_Legend_Index_"+n,a=e.element.id+"_Legend_Index_"+n+"_Text",r=this.legendRenderingCollections[n],s=new K(r.x,r.y,r.width,r.height),d=(0===n&&this.renderLegendBorder(),new J(r.textX,r.textY)),l=(o.color=null!==o.color?o.color:this.maps.themeStyle.legendTextColor,new Q(l,r.fill,r.shapeBorder,t.opacity,s)),s=new de(a,d.x,d.y,"middle",r.text,"",""),a=(o.fontFamily=(Y.isNullOrUndefined(o.fontFamily)?this.maps.themeStyle:o).fontFamily,o.size=o.size||e.themeStyle.legendFontSize,Me(s,o,o.color,this.legendGroup)),d=(a.setAttribute("aria-label",r.text),a.setAttribute("role","region"),i.drawRectangle(l));this.legendGroup.appendChild(d),!e.legendSettings.toggleLegendSettings.enable||"Layers"!==t.type&&"Markers"!==t.type||this.maintainLegendToggle(n,d,a),this.legendToggle()}else this.drawLegendItem(this.currentPage)},S.prototype.drawLegendItem=function(e){var t=this.maps,i=t.legendSettings,o=new W(i.shapeWidth,i.shapeHeight),n=t.renderer,l=i.shape;if(0<=e&&e<this.totalPages.length){O(this.legendGroup.id,this.maps.element.id)&&Y.remove(O(this.legendGroup.id,this.maps.element.id));for(var a=0;a<this.totalPages[e].Collection.length;a++){var r,s,d=this.totalPages[e].Collection[a],p=d.shapeBorder,h=n.createGroup({id:t.element.id+"_Legend_Index_"+d.idIndex}),m=d.DisplayText,c="HorizontalLine"===i.shape||"VerticalLine"===i.shape||"Cross"===i.shape?Y.isNullOrUndefined(i.fill)?"#000000":i.fill:p.color,u=("HorizontalLine"===i.shape||"VerticalLine"===i.shape||"Cross"===i.shape)&&0===p.width?1:p.width,g=t.element.id+"_Legend_Shape_Index_"+d.idIndex,y=t.element.id+"_Legend_Text_Index_"+d.idIndex,f=new J(d.Shape.x,d.Shape.y-4),b=new J(d.Text.x,d.Text.y-4),g=new B(g,d.Fill,u,c,i.opacity,(Y.isNullOrUndefined(p.opacity)?i:p).opacity,""),u={fontFamily:i.textStyle.fontFamily,fontStyle:i.textStyle.fontStyle,fontWeight:i.textStyle.fontWeight,size:i.textStyle.size,color:i.textStyle.color,opacity:i.textStyle.opacity},c=(u.color=null!==u.color?u.color:this.maps.themeStyle.legendTextColor,u.fontFamily=(Y.isNullOrUndefined(u.fontFamily)?this.maps.themeStyle:u).fontFamily,u.size=u.size||t.themeStyle.legendFontSize,u.fontWeight=u.fontWeight||t.themeStyle.fontWeight,0===a&&this.renderLegendBorder(),"Markers"===i.type&&i.useMarkerShape&&(c=this.legendCollection[d.idIndex].data[0],p=t.layers[c.layerIndex].markerSettings[c.markerIndex],l=Y.isNullOrUndefined(p.dataSource[c.dataIndex][p.shapeValuePath])||""===p.dataSource[c.dataIndex][p.shapeValuePath]?p.shape:p.dataSource[c.dataIndex][p.shapeValuePath]),"Balloon"===l?h.appendChild(Ye(t,g,o,{x:f.x,y:f.y+5},"Legend")):h.appendChild(_t(f,l,o,d.ImageSrc,g)),d.Rect.x+d.Rect.width),p=(c>this.legendBorderRect.width&&(m=this.legendTextTrim(this.legendBorderRect.width,m,u,c)),Me(new de(y,b.x,b.y,"start",m,"",""),u,u.color,h));p.setAttribute("aria-label",m),p.setAttribute("role","region"),this.legendGroup.appendChild(h),!t.legendSettings.toggleLegendSettings.enable||"Layers"!==i.type&&"Markers"!==i.type||(f=h.childNodes[0],this.maintainLegendToggle(d.idIndex,f,p)),a===this.totalPages[e].Collection.length-1&&(g=void 0,0!==this.page&&(b=q(c=e+1+"/"+this.totalPages.length,y=i.textStyle),u=this.legendItemRect.x+this.legendItemRect.width-b.width-20-20+2,h=(m=this.legendItemRect.x+this.legendItemRect.width)-10-b.width/2-5-4,d=this.legendItemRect.y+this.legendItemRect.height+2.5+10,g=n.createGroup({id:t.element.id+"_Legend_Paging_Group"}),f=n.createGroup({id:t.element.id+"_Legend_Left_Paging_Group"}),p=n.createGroup({id:t.element.id+"_Legend_Right_Paging_Group"}),r=" M "+m+" "+d+" L "+(m-10)+" "+(d-5)+" L "+(m-10)+" "+(d+5)+" z ",s=new B(t.element.id+"_Left_Page",this.maps.themeStyle.legendTextColor,0,this.maps.themeStyle.legendTextColor,e+1===1?.5:1,1,""," M "+u+" "+d+" L "+(10+u)+" "+(d-5)+" L "+(10+u)+" "+(d+5)+" z "),f.appendChild(n.drawPath(s)),s=new Q(t.element.id+"_Left_Page_Rect","transparent",{},1,new K(u-5,d-10,20,20),null,null,"",""),(u=n.drawRectangle(s)).setAttribute("aria-label","Navigate to the previous legend items"),u.setAttribute("role","button"),u.tabIndex=e+1===1?-1:t.tabIndex,e+1===1?(u.style.cursor="default",u.style.setProperty("outline","none")):(u.style.cursor="pointer",u.style.removeProperty("outline")),f.appendChild(u),this.wireEvents(f),s=new B(t.element.id+"_Right_Page",this.maps.themeStyle.legendTextColor,0,this.maps.themeStyle.legendTextColor,e+1===this.totalPages.length?.5:1,1,"",r),p.appendChild(n.drawPath(s)),r=new Q(t.element.id+"_Right_Page_Rect","transparent",{},1,new K(m-10-5,d-10,20,20),null,null,"",""),(u=n.drawRectangle(r)).setAttribute("aria-label","Navigate to the next legend items"),u.setAttribute("role","button"),u.tabIndex=e+1===this.totalPages.length?-1:t.tabIndex,e+1===this.totalPages.length?(u.style.cursor="default",u.style.setProperty("outline","none")):(u.style.cursor="pointer",u.style.removeProperty("outline")),p.appendChild(u),this.wireEvents(p),g.appendChild(f),g.appendChild(p),s={id:t.element.id+"_Paging_Text",x:h,y:d+b.height/4,fill:this.maps.themeStyle.legendTextColor,"font-size":"14px","font-style":y.fontStyle,"font-family":y.fontFamily,"font-weight":y.fontWeight,"text-anchor":"middle",transform:"",opacity:1,"dominant-baseline":""},(m=n.createText(s,c)).style.cssText="user-select: none;",m.setAttribute("aria-label",c),m.setAttribute("role","region"),g.appendChild(m),this.legendGroup.appendChild(g)),this.legendToggle())}}},S.prototype.maintainLegendToggle=function(e,t,i){var o;this.maps.legendSettings.toggleLegendSettings.enable&&!Y.isNullOrUndefined(this.maps.toggledLegendId)&&-1<this.maps.toggledLegendId.indexOf(e)&&!Y.isNullOrUndefined(this.maps.toggledElementId)&&0<this.maps.toggledElementId.length&&(e=this.legendCollection[e].data,this.maps.legendSettings.toggleLegendSettings.applyShapeSettings?(o=e[e.length-1].layerIndex,this.setToggleAttributes(i,t,this.maps.layers[o].shapeSettings.fill,this.maps.layers[o].shapeSettings.opacity,this.maps.layers[o].shapeSettings.border.color||this.maps.themeStyle.shapeBorderColor,Y.isNullOrUndefined(this.maps.layers[o].shapeSettings.border.width)?0:this.maps.layers[o].shapeSettings.border.width,(Y.isNullOrUndefined(this.maps.layers[o].shapeSettings.border.opacity)?this.maps.layers[o].shapeSettings:this.maps.layers[o].shapeSettings.border).opacity,this.maps.layers[o].shapeSettings.fill)):this.setToggleAttributes(i,t,this.maps.legendSettings.toggleLegendSettings.fill,this.maps.legendSettings.toggleLegendSettings.opacity,this.maps.legendSettings.toggleLegendSettings.border.color,this.maps.legendSettings.toggleLegendSettings.border.width,(Y.isNullOrUndefined(this.maps.legendSettings.toggleLegendSettings.border.opacity)?this.maps.legendSettings.toggleLegendSettings:this.maps.legendSettings.toggleLegendSettings.border).opacity,this.maps.legendSettings.toggleLegendSettings.fill),e._isVisible=!1)},S.prototype.legendHighLightAndSelection=function(e,t){var i="Default"===this.maps.legendSettings.mode?document.getElementById(e.id.replace("Shape","Text")):document.getElementById(e.id+"_Text"),o=this.maps.legendModule.legendCollection,n=!Y.isNullOrUndefined(o[0].data[0].layerIndex)&&this.maps.layers[o[0].data[0].layerIndex].selectionSettings.enableMultiSelect,l=0,a=!0,r=parseFloat(e.id.charAt(e.id.length-1)),s=(this.updateLegendElement(),this.maps.toggledLegendId.indexOf(r));if(this.maps.legendSettings.toggleLegendSettings.enable&&"highlight"===t&&-1!==s)return-1!==(s=this.getIndexofLegend(this.legendHighlightCollection,e))&&this.legendHighlightCollection.splice(s,1),this.removeLegendHighlightCollection(),null;if("selection"===t){if(this.shapeHighlightCollection=[],this.maps.shapeSelections||n||(this.removeAllSelections(),this.maps.shapeSelections=!0),0<this.maps.legendSelectionCollection.length&&(n||this.maps.shapeSelections))for(var d=0;d<this.maps.legendSelectionCollection.length;d++){if(e===this.maps.legendSelectionCollection[d].legendElement){this.maps.legendSelectionCollection[d].legendElement=e,a=!1,this.removeLegendSelectionCollection(this.maps.legendSelectionCollection[d].legendElement),this.maps.selectedLegendElementId.splice(this.maps.selectedLegendElementId.indexOf(r),1),this.maps.legendSelectionCollection.splice(d,1),this.maps.legendSelection=!(0<this.maps.legendSelectionCollection.length);break}if(!n)if(1<this.maps.legendSelectionCollection.length){for(var p=0;p<this.maps.legendSelectionCollection.length;p++)this.removeLegendSelectionCollection(this.maps.legendSelectionCollection[p].legendElement);this.maps.legendSelectionCollection=[]}else this.removeLegendSelectionCollection(this.maps.legendSelectionCollection[d].legendElement),this.maps.legendSelectionCollection.splice(d,1)}}else{if(0<this.maps.legendSelectionCollection.length)for(d=0;d<this.maps.legendSelectionCollection.length;d++){if((-1<e.id.indexOf("_Legend_Shape")||e.id.indexOf("_Legend_Index"))&&e===this.maps.legendSelectionCollection[d].legendElement){a=!1;break}this.removeLegendHighlightCollection()}this.removeLegendHighlightCollection()}if(a)for(var h=0;h<o.length;h++){var m="Interactive"===this.maps.legendSettings.mode?parseFloat(e.id.split("_Legend_Index_")[1]):parseFloat(e.id.split("_Legend_Shape_Index_")[1]);if(i.textContent===o[h].text&&0<o[h].data.length&&m===h){var c=this.maps.layers[o[h].data[0].layerIndex],m=void 0,u=void 0,g=void 0;if(Y.isNullOrUndefined(c)||(m=("selection"===t?c.selectionSettings:c.highlightSettings).enable,u=void 0,u="selection"===t?c.selectionSettings:c.highlightSettings,g=o[h].data),m)for(var y=0;y<g.length;y++){var f=void 0,b=g[y].shapeIndex,S=g[y].layerIndex,v=g[y].dataIndex;if(null!==(f=-1===(x=g[y].pointIndex)?document.getElementById(this.maps.element.id+"_LayerIndex_"+S+"_shapeIndex_"+b+"_dataIndex_"+v):document.getElementById(this.maps.element.id+"_LayerIndex_"+S+"_shapeIndex_"+b+"_dataIndex_"+v+"_multiLine_"+x))){var x,C,O=!0;if(null!==this.maps.legendSelectionCollection)for(var _=0;_<this.maps.legendSelectionCollection.length;_++)if(this.maps.legendSelectionCollection[_].legendElement===e){O=!1;break}"highlight"===t&&O?(0===y&&(this.legendHighlightCollection=[],this.pushCollection(e,this.legendHighlightCollection,o[h],c.shapeSettings)),S=this.legendHighlightCollection.length,b=this.legendHighlightCollection[S-1].legendOldFill,this.legendHighlightCollection[S-1].MapShapeCollection.Elements.push(f),v=this.legendHighlightCollection[S-1].MapShapeCollection.Elements.length-1,x=f.getAttribute("fill"),C=f.getAttribute("fill-opacity"),this.legendHighlightCollection[S-1].shapeOldFillColor.push(x),this.legendHighlightCollection[S-1].shapeOldOpacity=C,x=this.legendHighlightCollection[S-1].shapeOldFillColor[v],C=this.legendHighlightCollection[S-1].shapeOldOpacity,this.shapePreviousColor=this.legendHighlightCollection[S-1].shapeOldFillColor,this.setColor(f,Y.isNullOrUndefined(u.fill)?x:u.fill,Y.isNullOrUndefined(u.opacity)?C:u.opacity.toString(),u.border.color,u.border.width.toString(),"highlight"),this.setColor(e,Y.isNullOrUndefined(u.fill)?b:u.fill,Y.isNullOrUndefined(u.opacity)?C:u.opacity.toString(),u.border.color,u.border.width.toString(),"highlight")):"selection"===t&&(this.legendHighlightCollection=[],this.maps.legendSelectionClass=u,0===y&&(this.pushCollection(e,this.maps.legendSelectionCollection,o[h],c.shapeSettings),n||0!==this.maps.selectedLegendElementId.length&&(this.maps.selectedLegendElementId=[]),this.maps.selectedLegendElementId.push(h)),l=this.maps.legendSelectionCollection.length,v=this.maps.legendSelectionCollection[l-1].legendOldFill,this.maps.legendSelectionCollection[l-1].MapShapeCollection.Elements.push(f),this.maps.legendSelectionCollection[l-1].shapeOldFillColor=this.shapePreviousColor,this.setColor(e,Y.isNullOrUndefined(u.fill)?v:u.fill,u.opacity.toString(),u.border.color,u.border.width.toString(),"selection"),this.setColor(f,Y.isNullOrUndefined(u.fill)?v:u.fill,u.opacity.toString(),u.border.color,u.border.width.toString(),"selection"),-1===this.maps.selectedElementId.indexOf(f.getAttribute("id"))&&this.maps.selectedElementId.push(f.getAttribute("id")),y===g.length-1)&&(this.maps.legendSelection=!1,this.removeLegend(this.maps.legendSelectionCollection))}}}}},S.prototype.setColor=function(e,t,i,o,n,l){var a=-1<e.parentElement.id.indexOf("LineString");"selection"===l?(He(a?"LineselectionMap":"ShapeselectionMap",a?"LineselectionMapStyle":"ShapeselectionMapStyle",a?"transparent":t,i,a?t:o,n,this.maps),e.setAttribute("class",a?"LineselectionMapStyle":"ShapeselectionMapStyle")):(e.setAttribute("fill",a?"transparent":t),e.setAttribute("fill-opacity",i),e.setAttribute("stroke",a?t:o),e.setAttribute("stroke-width",(Number(n)/this.maps.scale).toString()))},S.prototype.pushCollection=function(e,t,i,o){t.push({legendElement:e,legendOldFill:i.fill,legendOldOpacity:i.opacity,legendOldBorderColor:i.borderColor,legendOldBorderWidth:i.borderWidth,shapeOpacity:o.opacity,shapeOldBorderColor:o.border.color||this.maps.themeStyle.shapeBorderColor,shapeOldBorderWidth:o.border.width});e=t.length;t[e-1].MapShapeCollection={Elements:[]},t[e-1].shapeOldFillColor=[],t[e-1].shapeOldOpacity=null},S.prototype.removeLegend=function(e){for(var t=0;t<e.length;t++)for(var i=e[t],o=(this.setColor(i.legendElement,i.legendOldFill,i.legendOldOpacity,i.legendOldBorderColor,i.legendOldBorderWidth,"highlight"),i.MapShapeCollection.Elements.length),n=0;n<o;n++){var l=-1!==i.legendOldFill.indexOf("url")?i.shapeOldFillColor[n]:i.legendOldFill,a=Y.isNullOrUndefined(i.shapeOldOpacity)?i.shapeOpacity:i.shapeOldOpacity;this.setColor(i.MapShapeCollection.Elements[n],l,a,i.shapeOldBorderColor,i.shapeOldBorderWidth,"highlight")}},S.prototype.removeLegendHighlightCollection=function(){0<this.legendHighlightCollection.length&&(this.removeLegend(this.legendHighlightCollection),this.legendHighlightCollection=[])},S.prototype.removeLegendSelectionCollection=function(e){if(0<this.maps.legendSelectionCollection.length){x(e);for(var t=this.shapesOfLegend(e),i=t.length,o=0;o<i;o++){var n=E(t[o]);"ShapeselectionMapStyle"!==n.getAttribute("class")&&"LineselectionMapStyle"!==n.getAttribute("class")||(x(n),-1!==(n=this.maps.selectedElementId.indexOf(n.id))&&this.maps.selectedElementId.splice(n,1))}}},S.prototype.removeShapeHighlightCollection=function(){if(0<this.shapeHighlightCollection.length)for(var e=0;e<this.shapeHighlightCollection.length;e++){for(var t=this.shapeHighlightCollection[e],i=!0,o=0;o<this.maps.legendSelectionCollection.length;o++)this.maps.legendSelectionCollection[o].legendElement===t.legendElement&&(i=!1);i&&this.setColor(t.legendElement,t.legendOldFill,t.legendOldOpacity,t.legendOldBorderColor,t.legendOldBorderWidth,"highlight")}},S.prototype.shapeHighLightAndSelection=function(e,t,i,o,n){if(void 0!==t){this.updateLegendElement(),this.shapeToggled=!0;var l=this.maps.legendModule.legendCollection,a=this.legendIndexOnShape(t,n),r=this.shapeDataOnLegend(e),t=this.maps.toggledLegendId.indexOf(a.actualIndex);if(this.maps.legendSettings.toggleLegendSettings.enable&&-1!==t)return this.shapeToggled=!1,this.legendHighlightCollection=[],-1!==(t=this.getIndexofLegend(this.shapeHighlightCollection,r.LegendEle))&&this.shapeHighlightCollection.splice(t,1),this.removeShapeHighlightCollection(),null;if(void 0===a.currentIndex&&void 0===a.actualIndex)return this.removeShapeHighlightCollection(),null;if(void 0!==a.currentIndex||"selection"!==o||this.maps.layers[n].selectionSettings.enableMultiSelect||"ShapeselectionMapStyle"===e.getAttribute("class")||(this.maps.legendSelection=!1),"selection"!==o||this.maps.layers[n].selectionSettings.enableMultiSelect||this.maps.legendSelection||(this.removeAllSelections(),this.maps.legendSelection=!0),void 0===a.currentIndex){if("selection"===o&&void 0!==a.actualIndex){for(var s=0,d=0;d<r.Elements.length;d++)"ShapeselectionMapStyle"===r.Elements[d].getAttribute("class")&&s++;t=this.maps.selectedLegendElementId.indexOf(a.actualIndex);-1===t?(this.maps.selectedLegendElementId.push(a.actualIndex),this.maps.legendSelectionClass=i):s<=1&&("ShapeselectionMapStyle"===e.getAttribute("class")||"LineselectionMapStyle"===e.getAttribute("class"))&&(!this.maps.layers[n].selectionSettings.enableMultiSelect||s<=1&&("ShapeselectionMapStyle"===e.getAttribute("class")||"LineselectionMapStyle"===e.getAttribute("class")))&&this.maps.selectedLegendElementId.splice(t,1)}return this.removeShapeHighlightCollection(),null}var t=l[a.actualIndex].text,p=void 0,h=void 0,m=("Default"===this.maps.legendSettings.mode?void 0!==a.currentIndex&&(p=document.getElementById(this.maps.element.id+"_Legend_Text_Index_"+a.actualIndex).textContent,h=document.getElementById(this.maps.element.id+"_Legend_Shape_Index_"+a.actualIndex)):(p=document.getElementById(this.maps.element.id+"_Legend_Index_"+a.actualIndex+"_Text").textContent,h=document.getElementById(this.maps.element.id+"_Legend_Index_"+a.actualIndex)),this.oldShapeElement=r.LegendEle,this.maps.legendSelectionCollection.length);if(t===p){var c=!0;if(this.maps.legendSelectionCollection)for(d=0;d<this.maps.legendSelectionCollection.length;d++)if(this.maps.legendSelectionCollection[d].legendElement===r.LegendEle){c=!1;break}if("highlight"===o&&c){(void 0===(g=this.isTargetSelected(r,this.shapeHighlightCollection))||g&&!g.IsSelected)&&this.pushCollection(h,this.shapeHighlightCollection,l[a.actualIndex],this.maps.layers[n].shapeSettings);for(var u=0;u<this.shapeHighlightCollection.length;u++)r.LegendEle.id===this.shapeHighlightCollection[u].legendElement.id&&(this.shapeHighlightCollection[u].legendElement=r.LegendEle);if(0<m)for(u=0;u<m;u++){if(r.LegendEle===this.maps.legendSelectionCollection[u].legendElement){this.maps.legendSelectionCollection[u].legendElement=r.LegendEle,this.removeShapeHighlightCollection();break}u===m-1&&(this.removeShapeHighlightCollection(),this.setColor(h,Y.isNullOrUndefined(i.fill)?h.getAttribute("fill"):i.fill,i.opacity.toString(),i.border.color,i.border.width.toString(),"highlight"))}else this.removeShapeHighlightCollection(),this.setColor(h,Y.isNullOrUndefined(i.fill)?h.getAttribute("fill"):i.fill,Y.isNullOrUndefined(i.opacity)?"1":i.opacity.toString(),i.border.color,i.border.width.toString(),"highlight")}else if("selection"===o){var g=this.isTargetSelected(r,this.maps.legendSelectionCollection);if(0<m)for(var y,f,u=0;u<this.maps.legendSelectionCollection.length;)r.LegendEle===this.maps.legendSelectionCollection[u].legendElement||i.enableMultiSelect?u++:(y=this.maps.legendSelectionCollection[u],f=this.maps.selectedLegendElementId.indexOf(a.actualIndex),this.maps.selectedLegendElementId.splice(f,1),this.maps.legendSelectionCollection.splice(u,1),x(y.legendElement),this.maps.shapeSelections=!0,u=0);if(g&&g.IsSelected&&("ShapeselectionMapStyle"===e.getAttribute("class")||"LineselectionMapStyle"===e.getAttribute("class"))){var b=0;if(i.enableMultiSelect)for(d=0;d<r.Elements.length;d++)e.getAttribute("class")===r.Elements[d].getAttribute("class")&&b++;b<=1&&(i.enableMultiSelect||this.maps.legendSelection)&&(this.maps.selectedLegendElementId.splice(this.maps.selectedLegendElementId.indexOf(a.actualIndex),1),Y.isNullOrUndefined(r.LegendEle)||x(r.LegendEle),this.maps.legendSelectionCollection.splice(g.SelectionIndex,1),this.maps.shapeSelections=!0)}else{void 0!==g&&(!g||g.IsSelected)||Y.isNullOrUndefined(h)||-1===(S=this.getIndexofLegend(this.maps.legendSelectionCollection,h))&&this.pushCollection(h,this.maps.legendSelectionCollection,l[a.actualIndex],this.maps.layers[n].shapeSettings);for(var S,v=!0,d=0;d<this.maps.selectedLegendElementId.length;d++)a.actualIndex===this.maps.selectedLegendElementId[d]&&(v=!1);v&&this.maps.selectedLegendElementId.push(a.actualIndex),this.maps.legendSelectionClass=i,this.removeLegend(this.shapeHighlightCollection),Y.isNullOrUndefined(h)||(this.setColor(h,Y.isNullOrUndefined(i.fill)?h.getAttribute("fill"):i.fill,Y.isNullOrUndefined(i.opacity)?"1":i.opacity.toString(),i.border.color,i.border.width.toString(),"selection"),S=this.getIndexofLegend(this.maps.legendSelectionCollection,h),this.maps.legendSelectionCollection[S].MapShapeCollection.Elements.push(e)),this.maps.shapeSelections=!1}}else 0<document.getElementsByClassName("highlightMapStyle").length&&(this.removeShapeHighlightCollection(),x(document.getElementsByClassName("highlightMapStyle")[0]))}}else this.removeShapeHighlightCollection()},S.prototype.isTargetSelected=function(e,t){for(var i,o=0;o<t.length;o++)Y.isNullOrUndefined(e.LegendEle.getAttribute("id"))||e.LegendEle.getAttribute("id")!==t[o].legendElement.getAttribute("id")||(i={IsSelected:!0,SelectionIndex:o});return i},S.prototype.updateLegendElement=function(){for(var e=0;e<this.maps.legendSelectionCollection.length;e++)document.getElementById(this.maps.legendSelectionCollection[e].legendElement.id)&&(this.maps.legendSelectionCollection[e].legendElement=document.getElementById(this.maps.legendSelectionCollection[e].legendElement.id))},S.prototype.getIndexofLegend=function(e,t){return e.map(function(e){return e.legendElement}).indexOf(t)},S.prototype.removeAllSelections=function(){for(var e=0;e<this.maps.selectedElementId.length;e++)x(i=document.getElementById(this.maps.selectedElementId[e]));for(var t=0;t<this.maps.selectedLegendElementId.length;t++){var i=("Interactive"===this.maps.legendSettings.mode?this.maps.element.id+"_Legend_Index_":this.maps.element.id+"_Legend_Shape_Index_")+this.maps.selectedLegendElementId[t],o=document.getElementById(i);Y.isNullOrUndefined(o)||x(document.getElementById(i))}this.maps.legendSelectionCollection=[],this.maps.selectedLegendElementId=[],this.maps.selectedElementId=[]},S.prototype.legendIndexOnShape=function(e,t){for(var i,o,n,l=e[this.maps.layers[t].shapeDataPath],a=this.maps.legendSettings.mode,r=this.maps.legendModule.legendCollection,s=("Default"===a&&!Y.isNullOrUndefined(this.maps.legendModule.totalPages)&&0<this.maps.legendModule.totalPages.length&&(n=this.maps.legendModule.totalPages[this.maps.legendModule.currentPage].Collection),"Default"!==a||Y.isNullOrUndefined(n)?1:n.length),d=0;d<r.length;d++){for(var p=r[d].data,h=0;h<s;h++)if("Default"!==a||r[d].text===n[h].DisplayText)for(var m=0;m<p.length;m++)l===p[m].name&&(i=h);for(m=0;m<p.length;m++)l===p[m].name&&(o=d)}return{currentIndex:i,actualIndex:o}},S.prototype.shapeDataOnLegend=function(e){for(var t=this.maps.legendModule.legendCollection,i=this.maps.legendSettings,o=0;o<t.length;o++){for(var n=t[o].data,l=!1,a=[],r={Elements:[]},s=0;s<n.length;s++){var d,p=void 0,h=n[s].shapeIndex,m=n[s].layerIndex,c=n[s].dataIndex;e===(p=-1===(d=n[s].pointIndex)?document.getElementById(this.maps.element.id+"_LayerIndex_"+m+"_shapeIndex_"+h+"_dataIndex_"+c):document.getElementById(this.maps.element.id+"_LayerIndex_"+m+"_shapeIndex_"+h+"_dataIndex_"+c+"_multiLine_"+d))&&(l=!0),a.push(p)}if(l)return Y.isNullOrUndefined(r.LegendEle)&&(r.LegendEle="Default"===i.mode?document.getElementById(this.maps.element.id+"_Legend_Shape_Index_"+o):document.getElementById(this.maps.element.id+"_Legend_Index_"+o)),r.Elements=a,r}return null},S.prototype.shapesOfLegend=function(e){for(var e=parseFloat(e.id.charAt(e.id.length-1)),t=this.maps.legendModule.legendCollection[e].data,i=[],o=0;o<t.length;o++){var n,l=void 0,a=t[o].shapeIndex,r=t[o].layerIndex,s=t[o].dataIndex,l=-1===(n=t[o].pointIndex)?document.getElementById(this.maps.element.id+"_LayerIndex_"+r+"_shapeIndex_"+a+"_dataIndex_"+s):document.getElementById(this.maps.element.id+"_LayerIndex_"+r+"_shapeIndex_"+a+"_dataIndex_"+s+"_multiLine_"+n);Y.isNullOrUndefined(l)||i.push(l.id)}return i},S.prototype.legendToggle=function(){var e=this.maps,t=e.legendSettings;if(this.maps.selectedLegendElementId)for(var i=0;i<this.maps.selectedLegendElementId.length;i++){var o="Interactive"===t.mode?this.maps.element.id+"_Legend_Index_":this.maps.element.id+"_Legend_Shape_Index_",n=e.svgObject.querySelector("#"+o+this.maps.selectedLegendElementId[i]);if(!Y.isNullOrUndefined(n)){o=Y.isNullOrUndefined(this.maps.legendSelectionClass.fill)?n.getAttribute("fill"):this.maps.legendSelectionClass.fill;this.setColor(n,o,this.maps.legendSelectionClass.opacity.toString(),this.maps.legendSelectionClass.border.color,this.maps.legendSelectionClass.border.width.toString(),"selection");for(var l=0;l<this.maps.legendSelectionCollection.length;l++)this.maps.legendSelectionCollection[l].legendElement.id===n.id&&(this.maps.legendSelectionCollection[l].legendElement=n);-1===this.getIndexofLegend(this.maps.legendSelectionCollection,n)&&(o=this.maps.legendModule.legendCollection[this.maps.selectedLegendElementId[i]].data[i].layerIndex,this.pushCollection(n,this.maps.legendSelectionCollection,this.maps.legendModule.legendCollection[this.maps.selectedLegendElementId[i]],this.maps.layers[o].shapeSettings))}}if(this.maps.toggledLegendId)for(i=0;i<this.maps.toggledLegendId.length;i++){var a="Interactive"===t.mode?"#"+this.maps.element.id+"_Legend_Index_"+this.maps.toggledLegendId[i]+"_Text":"#"+this.maps.element.id+"_Legend_Text_Index_"+this.maps.toggledLegendId[i],a=e.svgObject.querySelector(a),a=(Y.isNullOrUndefined(a)||a.setAttribute("fill","#E5E5E5"),"Interactive"===t.mode?"#"+this.maps.element.id+"_Legend_Index_"+this.maps.toggledLegendId[i]:"#"+this.maps.element.id+"_Legend_Shape_Index_"+this.maps.toggledLegendId[i]),a=e.svgObject.querySelector(a);Y.isNullOrUndefined(a)||a.setAttribute("fill","#E5E5E5")}},S.prototype.renderLegendBorder=function(){var e=this.maps,t=e.legendSettings,i=t.title.text,o={fontFamily:t.titleStyle.fontFamily,fontStyle:t.titleStyle.fontStyle,fontWeight:t.titleStyle.fontWeight,size:t.titleStyle.size,color:t.titleStyle.color,opacity:t.titleStyle.opacity},n=it(this.legendItemRect.width+20,i,o),l=q(n,o),a=(this.legendBorderRect=new K(this.legendItemRect.x-10,this.legendItemRect.y-10-l.height,this.legendItemRect.width+20,this.legendItemRect.height+20+l.height+("Interactive"!==t.mode&&0!==this.page?10:0)),{color:t.border.color||this.maps.themeStyle.legendBorderColor,opacity:t.border.opacity,width:t.border.width||this.maps.themeStyle.legendBorderWidth}),a=(a.opacity=Y.isNullOrUndefined(a.opacity)?1:a.opacity,new Q(e.element.id+"_Legend_Border",t.background,a,1,this.legendBorderRect,null,null,"",""));this.legendGroup.appendChild(e.renderer.drawRectangle(a)),this.getLegendAlignment(e,this.legendBorderRect.width,this.legendBorderRect.height,t),this.legendGroup.setAttribute("transform","translate( "+(this.translate.x+-this.legendBorderRect.x)+" "+(this.translate.y+-this.legendBorderRect.y)+" )"),"Float"!==t.position&&e.svgObject.appendChild(this.legendGroup),i&&(o.color=null!==o.color?o.color:this.maps.themeStyle.legendTitleFontColor,o.fontFamily=(Y.isNullOrUndefined(o.fontFamily)?this.maps.themeStyle:o).fontFamily,o.size=Y.isNullOrUndefined(o.size)?this.maps.themeStyle.subTitleFontSize||Ut.legendTitleFont.size:o.size,o.fontWeight=Y.isNullOrUndefined(o.fontWeight)?this.maps.themeStyle.titleFontWeight||Ut.legendTitleFont.fontWeight:o.fontWeight,(a=Me(new de(e.element.id+"_LegendTitle",this.legendItemRect.x+this.legendItemRect.width/2,this.legendItemRect.y-l.height/2-5,"middle",n,""),o,o.color,this.legendGroup)).setAttribute("aria-label",i),a.setAttribute("role","region"))},S.prototype.changeNextPage=function(e){this.currentPage=-1<e.target.id.indexOf("_Left_Page_")?this.currentPage-1:this.currentPage+1,this.legendGroup=this.maps.renderer.createGroup({id:this.maps.element.id+"_Legend_Group"}),this.maps.mapAreaRect=this.initialMapAreaRect,this.drawLegendItem(this.currentPage),Y.isNullOrUndefined(this.maps.legendModule)||"Float"!==this.maps.legendSettings.position||(this.maps.isTileMap?this.maps.mapLayerPanel.layerGroup:this.maps.svgObject).appendChild(this.maps.legendModule.legendGroup),O(this.maps.element.id+"_Legend_Border",this.maps.element.id)&&(O(this.maps.element.id+"_Legend_Border",this.maps.element.id).style.pointerEvents="none")},S.prototype.getLegendAlignment=function(e,t,i,o){var n,l,a=Y.extend({},e.mapAreaRect,void 0,!0),r=a.x,s=a.y,d=a.height,p=a.width,h=e.availableSize.width,m=e.availableSize.height,c=Y.isNullOrUndefined(o.location.x)?0:"string"==typeof o.location.x&&-1<o.location.x.indexOf("%")?e.availableSize.width/100*parseFloat(o.location.x):"string"==typeof o.location.x?parseFloat(o.location.x):o.location.x,u=Y.isNullOrUndefined(o.location.y)?0:"string"==typeof o.location.y&&-1<o.location.y.indexOf("%")?e.availableSize.height/100*parseFloat(o.location.y):"string"==typeof o.location.y?parseFloat(o.location.y):o.location.y;if("Float"===o.position)this.translate=e.isTileMap?new J(c,u+2.5):new J(c+e.mapAreaRect.x,u+e.mapAreaRect.y),this.legendTotalRect=e.mapAreaRect;else{switch(o.position){case"Top":case"Bottom":a.height="Top"===o.position?d-i:d-i-20,n=h/2-t/2,l="Top"===o.position?s:s+a.height,a.y="Top"===o.position?s+i+(e.isTileMap?5:10):s-5;break;case"Left":case"Right":a.width=p-t-e.mapAreaRect.x,n="Left"===o.position?r+5:r+a.width+10,l=m/2-i/2,a.x="Left"===o.position?r+t+10:r}switch(o.alignment){case"Near":"Top"===o.position||"Bottom"===o.position?n=a.x-("Interactive"===o.mode?10:0):l=a.y-(o.height&&o.width||"Interactive"!==o.mode?0:e.mapAreaRect.x);break;case"Far":"Top"===o.position||"Bottom"===o.position?n=h-t-("Interactive"===o.mode?0:10):l=m-i-("Default"===o.mode?10:0)}(o.height||o.width)&&"Interactive"!==o.mode?this.legendTotalRect=e.mapAreaRect=e.totalRect=a:(e.totalRect=null,(o.height||o.width)&&"Interactive"===o.mode&&(e.totalRect=a),this.legendTotalRect=e.mapAreaRect=a),"Left"===o.position&&(e.mapAreaRect.width=a.width),this.translate=new J(n,l)}},S.prototype.getMarkersLegendCollections=function(d,e){var p=this;Array.prototype.forEach.call(e,function(a,r){var e=a.dataSource,s=a.legendText;Array.prototype.forEach.call(e,function(e,t){var i,o=!!Y.isNullOrUndefined(e[p.maps.legendSettings.showLegendPath])||e[p.maps.legendSettings.showLegendPath],n=!Y.isNullOrUndefined(e.latitude)||!Y.isNullOrUndefined(e.Latitude)||!Y.isNullOrUndefined(e[a.latitudeValuePath]),l=!Y.isNullOrUndefined(e.longitude)||!Y.isNullOrUndefined(e.Longitude)||!Y.isNullOrUndefined(e[a.longitudeValuePath]);a.visible&&o&&n&&l&&(a.template&&(n=pt(a.template,p.maps)(p.maps),(Y.isNullOrUndefined(n.childElementCount)?n[0]:n).querySelector("img").src),l=Y.isNullOrUndefined(e[s])?"":e[s],n=Y.isNullOrUndefined(a.colorValuePath)?a.fill:e[a.colorValuePath],i=[],p.maps.legendSettings.removeDuplicateLegend?i.push(p.getMarkerLegendData(d,l,n)):i.push({layerIndex:d,markerIndex:r,dataIndex:t,value:n,name:l,shape:Y.isNullOrUndefined(a.shapeValuePath)||Y.isNullOrUndefined(e[a.shapeValuePath])||""===e[a.shapeValuePath]?(p.maps.legendSettings.useMarkerShape?a:p.maps.legendSettings).shape:e[a.shapeValuePath]}),p.getOverallLegendItemsCollection(l,n,i,o))})})},S.prototype.getMarkerLegendData=function(n,l,a){var r=this,s=[];return this.maps.layers[n].markerSettings.map(function(e,o){e=e.dataSource;Array.prototype.forEach.call(e,function(e,t){var i=r.maps.layers[n].markerSettings[o];l!==e[i.legendText]&&""!==l||a!==(e[i.colorValuePath]||i.fill)||s.push({layerIndex:n,markerIndex:o,dataIndex:t,value:a,name:l,shape:Y.isNullOrUndefined(i.shapeValuePath)?i.shape:e[i.shapeValuePath]})})}),s},S.prototype.getRangeLegendCollection=function(l,a,e,t,r,s,d){for(var i,p=this,h=0,m=this.maps.legendSettings.fill,c=[],u=this,o=0,n=e;o<n.length;o++)!function(o){var n,e;Y.isNullOrUndefined(o.from)||Y.isNullOrUndefined(o.to)||(i=Y.isNullOrUndefined(o.label)?o.from+" - "+o.to:o.label,n=!(c=[]),!Y.isNullOrUndefined(t)&&0<t.length&&Array.prototype.forEach.call(t,function(e,t){var i=-1<s.indexOf(".")?Number(U(e,s)):parseFloat(e[s]);i>=o.from&&i<=o.to&&(n=!0,c.push(p.getLegendData(l,t,e,r,a,d,i)))}),n||c.push({layerIndex:l,shapeIndex:null,dataIndex:null,name:null,value:null}),e=Y.isNullOrUndefined(m)?"[object Array]"===Object.prototype.toString.call(o.color)?Y.isNullOrUndefined(o.value)?u.legendGradientColor(o,h):o.color[0]:o.color:m,h++,u.getOverallLegendItemsCollection(i,e,c,o.showLegend))}(n[o])},S.prototype.getOverallLegendItemsCollection=function(e,t,i,o){var n=[],l=this.maps.legendSettings;if(0<i.length&&o){for(var a=0;a<i.length;a++){var r=i[a];if(0<r.length)for(var s=0;s<r.length;s++)n.push(r[s]);else n.push(i[a]);n._isVisible=!0}if(!!this.maps.legendSettings.removeDuplicateLegend&&this.removeDuplicates(this.legendCollection,e,t))for(a=0;a<this.legendCollection.length;a++)this.legendCollection[a].text===e&&this.legendCollection[a].fill===t&&this.legendCollection[a].data.push(n[0]);else this.legendCollection.push({text:e,fill:t,data:n,opacity:l.opacity,borderColor:l.shapeBorder.color,borderWidth:l.shapeBorder.width})}},S.prototype.removeDuplicates=function(e,t,i){for(var o=!1,n=0;n<e.length;n++)if((e[n].text===t||""===e[n].text)&&e[n].fill===i){o=!0;break}return o},S.prototype.getEqualLegendCollection=function(r,s,d,p,h,m,c){for(var u,g=this,y=this.maps.legendSettings.fill,f=[],b=[],S=[],v=[],x=this,e=0,t=d;e<t.length;e++)!function(o){if(Y.isNullOrUndefined(o.value)){var n;Y.isNullOrUndefined(o.minOpacity)&&Y.isNullOrUndefined(o.maxOpacity)&&Y.isNullOrUndefined(o.value)&&Y.isNullOrUndefined(o.from)&&Y.isNullOrUndefined(o.to)&&!Y.isNullOrUndefined(o.color)&&(Array.prototype.forEach.call(p,function(e,t){for(var i=-1<m.indexOf(".")?U(e,m):e[m],o=0;o<S.length;o++)i===S[o]&&v.push(g.getLegendData(r,t,e,h,s,c,i))}),0===S.length&&(n=!1,Array.prototype.forEach.call(p,function(e,t){n=!1;for(var i=e[m],o=0;o<d.length;o++)Y.isNullOrUndefined(i)||isNaN(i)?n=n||!1:i>=d[o].from&&i<=d[o].to&&(n=!0);n||v.push(g.getLegendData(r,t,e,h,s,c,i))})),u=Y.isNullOrUndefined(o.label)?"Others":o.label,a="[object Array]"===Object.prototype.toString.call(o.color)?o.color[0]:o.color,x.getOverallLegendItemsCollection(u,a,v,o.showLegend))}else{u=Y.isNullOrUndefined(o.label)?o.value:o.label;var l=!(b=[]);!Y.isNullOrUndefined(p)&&0<p.length&&Array.prototype.forEach.call(p,function(e,t){var i=m&&-1<m.indexOf(".")?U(e,m):e[m];i===o.value?(l=!0,-1===f.indexOf(i)&&f.push(i),b.push(g.getLegendData(r,t,e,h,s,c,i))):-1===S.indexOf(i)&&S.push(i)});for(var e=0;e<f.length;e++)for(var t,i=0;i<S.length;i++)f[e]===S[i]&&(t=S.indexOf(f[e]),S.splice(t,1));l||b.push({layerIndex:r,shapeIndex:null,dataIndex:null,name:null,value:null});var a=Y.isNullOrUndefined(y)?"[object Array]"===Object.prototype.toString.call(o.color)?o.color[0]:o.color:y;x.getOverallLegendItemsCollection(u,a,b,o.showLegend)}}(t[e])},S.prototype.getDataLegendCollection=function(a,r,s,e,d,p,h){var m,c=this,u=this.maps.legendSettings.fill,g=this.maps.legendSettings.valuePath;Y.isNullOrUndefined(p)||Y.isNullOrUndefined(e)||Array.prototype.forEach.call(e,function(e,t){var i=!!Y.isNullOrUndefined(c.maps.legendSettings.showLegendPath)||!Y.isNullOrUndefined(e[c.maps.legendSettings.showLegendPath])&&e[c.maps.legendSettings.showLegendPath],o=-1<p.indexOf(".")?U(e,p):e[p],n=[],l=Y.isNullOrUndefined(u)?o:u;Y.isNullOrUndefined(o)||0!==s.length||Y.isNullOrUndefined(g)&&Y.isNullOrUndefined(d)||(m=Y.isNullOrUndefined(e[g])?-1<d.indexOf(".")?U(e,d):e[d]:-1<g.indexOf(".")?U(e,g):e[g],n.push(c.getLegendData(a,t,e,d,r,h,o))),c.getOverallLegendItemsCollection(m,l,n,i)})},S.prototype.interactiveHandler=function(e){var e=e.target,i=this.maps.legendSettings,o=this.maps.element.id+"_Interactive_Legend",t="Layers"===i.type?"_shapeIndex_":"Markers"===i.type?"_MarkerIndex_":"_BubbleIndex_";if(1<e.id.indexOf(t)){var n=parseFloat(e.id.split("_LayerIndex_")[1].split("_")[0]),l=parseFloat(e.id.split(/_dataIndex_/i)[1].split("_")[0]),a=void 0,r=void 0,s=void 0,t=(Y.isNullOrUndefined(O(o,this.maps.element.id))||Y.remove(O(o,this.maps.element.id)),this.maps.layersCollection[n]),t="Layers"===i.type?t.visible:"Markers"===i.type?t.markerSettings[parseFloat(e.id.split("_MarkerIndex_")[1].split("_")[0])].visible:this.maps.getBubbleVisible(this.maps.layersCollection[n]);if(i.visible&&0<this.legendRenderingCollections.length&&"Interactive"===i.mode&&t)for(var d=this.maps.svgObject.getBoundingClientRect(),p=0;p<this.legendCollection.length;p++){var h=this.legendCollection[p],m=O(this.maps.element.id+"_Legend_Index_"+p,this.maps.element.id),c=m.getBoundingClientRect(),u=new K(Math.abs(c.left-d.left),Math.abs(c.top-d.top),c.width,c.height),a=m.getAttribute("fill"),r=i.shapeBorder.color,s=i.shapeBorder.width;if(!Y.isNullOrUndefined(h.data))for(var g=h.data,y=this,f=0;f<g.length;f++)if("break"===function(e){var t;if(l===g[e].dataIndex&&n===g[e].layerIndex)return y.renderInteractivePointer(i,a,r,o,s,u),t=O(o,y.maps.element.id),y.maps.isDevice&&!Y.isNullOrUndefined(t)&&(clearTimeout(y.arrowTimer),y.arrowTimer=setTimeout(function(){Y.isNullOrUndefined(t.parentNode)||Y.remove(t)},2e3)),"break"}(f))break}}else Y.isNullOrUndefined(O(o,this.maps.element.id))||Y.remove(O(o,this.maps.element.id))},S.prototype.renderInteractivePointer=function(e,t,i,o,n,l){var a,r,s="None"===e.orientation?"Top"===e.position||"Bottom"===e.position?"Horizontal":"Vertical":e.orientation,l=(l.y="Float"===e.position&&this.maps.isTileMap?l.y-this.maps.mapAreaRect.y:l.y,s="Horizontal"===s?e.invertedPointer?" M "+(a=l.x+l.width/2-("Float"===e.position&&this.maps.isTileMap?this.maps.mapAreaRect.x:0))+" "+(r=l.y+l.height)+" L "+(a-10)+" "+(r+10)+" L "+(a+10)+" "+(r+10)+" Z ":" M "+(a=l.x+l.width/2-("Float"===e.position&&this.maps.isTileMap?this.maps.mapAreaRect.x:0))+" "+(r=l.y)+" L "+(a-10)+" "+(r-10)+" L "+(a+10)+" "+(r-10)+" Z ":e.invertedPointer?" M "+(a=l.x-("Float"===e.position&&this.maps.isTileMap?this.maps.mapAreaRect.x:0))+" "+(r=l.y+l.height/2)+" L "+(a-10)+" "+(r-10)+" L "+(a-10)+" "+(r+10)+" z ":" M "+(a=l.x+l.width-("Float"===e.position&&this.maps.isTileMap?this.maps.mapAreaRect.x:0))+" "+(r=l.y+l.height/2)+" L "+(a+10)+" "+(r-10)+" L "+(a+10)+" "+(r+10)+" z ",new B(o,t,n,i,1,1,"",s));("Float"===e.position&&this.maps.isTileMap?this.maps.mapLayerPanel.layerGroup:this.maps.svgObject).appendChild(this.maps.renderer.drawPath(l))},S.prototype.wireEvents=function(e){Y.EventHandler.add(e,Y.Browser.touchStartEvent,this.changeNextPage,this)},S.prototype.addEventListener=function(){this.maps.isDestroyed||(this.maps.on(Y.Browser.touchMoveEvent,this.interactiveHandler,this),this.maps.on(Y.Browser.touchEndEvent,this.interactiveHandler,this),this.maps.on(ko,this.legendClick,this))},S.prototype.markerToggleSelection=function(e,t,i,o){e.setAttribute("fill",this.legendCollection[o].fill),e.setAttribute("stroke",this.maps.layers[t].markerSettings[i].border.color),e.setAttribute("fill-opacity",this.maps.layers[t].markerSettings[i].opacity.toString()),e.setAttribute("stroke-width",this.maps.layers[t].markerSettings[i].border.width.toString()),e.setAttribute("stroke-opacity",(Y.isNullOrUndefined(this.maps.layers[t].markerSettings[i].border.opacity)?this.maps.layers[t].markerSettings[i]:this.maps.layers[t].markerSettings[i].border).opacity.toString());o=this.maps.toggledElementId.indexOf(e.id);-1!==o&&this.maps.toggledElementId.splice(o,1)},S.prototype.bubbleToggleSelection=function(e,t,i,o){e.setAttribute("fill",this.legendCollection[o].fill),e.setAttribute("stroke",this.maps.layers[t].bubbleSettings[i].border.color),e.setAttribute("fill-opacity",this.maps.layers[t].bubbleSettings[i].opacity.toString()),e.setAttribute("stroke-width",this.maps.layers[t].bubbleSettings[i].border.width.toString()),e.setAttribute("stroke-opacity",(Y.isNullOrUndefined(this.maps.layers[t].bubbleSettings[i].border.opacity)?this.maps.layers[t].bubbleSettings[i]:this.maps.layers[t].bubbleSettings[i].border).opacity.toString())},S.prototype.legendClick=function(e){var t,i,o=this.maps.legendSettings.toggleLegendSettings.fill,n=this.maps.legendSettings.toggleLegendSettings.opacity,l=this.maps.legendSettings.toggleLegendSettings.border.color,a=this.maps.legendSettings.toggleLegendSettings.border.width,r=(Y.isNullOrUndefined(this.maps.legendSettings.toggleLegendSettings.border.opacity)?this.maps.legendSettings.toggleLegendSettings:this.maps.legendSettings.toggleLegendSettings.border).opacity;if(!Y.isNullOrUndefined(e.parentNode)&&-1<e.parentNode.id.indexOf(this.maps.element.id+"_Legend_Index_")){var s=void 0,d=parseFloat(e.parentElement.id.substr((this.maps.element.id+"_Legend_Index_").length)),p=(f=this.legendCollection[d].data)._isVisible,h=void 0;if(this.maps.legendSettings.toggleLegendSettings.enable&&("Bubbles"===this.maps.legendSettings.type||"Markers"===this.maps.legendSettings.type))for(var m=0;m<this.maps.layers.length;m++)for(var c=0;c<("Bubbles"===this.maps.legendSettings.type?this.maps.layers[m].bubbleSettings:this.maps.layers[m].markerSettings).length;c++){for(var u=0;u<f.length;u++){h=this.legendCollection[d].data[u],s="Bubbles"===this.maps.legendSettings.type?O(this.maps.element.id+"_LayerIndex_"+h.layerIndex+"_BubbleIndex_"+c+"_dataIndex_"+h.dataIndex,this.maps.element.id):O(this.maps.element.id+"_LayerIndex_"+h.layerIndex+"_MarkerIndex_"+h.markerIndex+"_dataIndex_"+h.dataIndex,this.maps.element.id),Y.isNullOrUndefined(h.shape)||"Balloon"!==h.shape||(s=(s="Bubbles"===this.maps.legendSettings.type?O(this.maps.element.id+"_LayerIndex_"+h.layerIndex+"_BubbleIndex_"+c+"_dataIndex_"+h.dataIndex+"_Group",this.maps.element.id):O(this.maps.element.id+"_LayerIndex_"+h.layerIndex+"_MarkerIndex_"+h.markerIndex+"_dataIndex_"+h.dataIndex+"_Group",this.maps.element.id)).children[0]);var g=this.maps.toggledLegendId.indexOf(d);p&&null!==s?(this.maps.legendSettings.toggleLegendSettings.applyShapeSettings?(s.setAttribute("fill",this.maps.layers[m].shapeSettings.fill),s.setAttribute("stroke",this.maps.layers[m].shapeSettings.border.color||this.maps.themeStyle.shapeBorderColor),s.setAttribute("fill-opacity",this.maps.layers[m].shapeSettings.opacity.toString()),s.setAttribute("stroke-width",(Y.isNullOrUndefined(this.maps.layers[m].shapeSettings.border.width)?0:this.maps.layers[m].shapeSettings.border.width).toString()),s.setAttribute("stroke-opacity",(Y.isNullOrUndefined(this.maps.layers[m].shapeSettings.border.opacity)?this.maps.layers[m].shapeSettings:this.maps.layers[m].shapeSettings.border).opacity.toString())):(s.setAttribute("fill",o),s.setAttribute("fill-opacity",n.toString()),s.setAttribute("stroke",l),s.setAttribute("stroke-width",a.toString()),s.setAttribute("stroke-opacity",r.toString())),"Markers"===this.maps.legendSettings.type&&(-1===g&&this.maps.toggledLegendId.push(d),-1===this.maps.toggledElementId.indexOf(s.id))&&this.maps.toggledElementId.push(s.id),null!==e&&(t=O(this.maps.element.id+"_Legend_Shape_Index_"+d,this.maps.element.id),i=O(this.maps.element.id+"_Legend_Text_Index_"+d,this.maps.element.id),this.maps.legendSettings.toggleLegendSettings.applyShapeSettings?this.setToggleAttributes(i,t,this.maps.layers[m].shapeSettings.fill,this.maps.layers[m].shapeSettings.opacity,this.maps.layers[m].shapeSettings.border.color||this.maps.themeStyle.shapeBorderColor,Y.isNullOrUndefined(this.maps.layers[m].shapeSettings.border.width)?0:this.maps.layers[m].shapeSettings.border.width,(Y.isNullOrUndefined(this.maps.layers[m].shapeSettings.border.opacity)?this.maps.layers[m].shapeSettings:this.maps.layers[m].shapeSettings.border).opacity,this.maps.layers[m].shapeSettings.fill):this.setToggleAttributes(i,t,o,n,l,a,r,o))):("Markers"===this.maps.legendSettings.type?(-1!==g&&0===u&&this.maps.toggledLegendId.splice(g,1),this.markerToggleSelection(s,m,c,d)):this.bubbleToggleSelection(s,m,c,d),null!==e&&(t=O(this.maps.element.id+"_Legend_Shape_Index_"+d,this.maps.element.id),i=O(this.maps.element.id+"_Legend_Text_Index_"+d,this.maps.element.id),this.setToggleAttributes(i,t,this.legendCollection[d].fill,this.legendCollection[d].opacity,this.legendCollection[d].shapeBorder.color,this.legendCollection[d].shapeBorder.width,this.legendCollection[d].shapeBorder.opacity,this.maps.legendSettings.textStyle.color),"HorizontalLine"!==this.maps.legendSettings.shape&&"VerticalLine"!==this.maps.legendSettings.shape&&"Cross"!==this.maps.legendSettings.shape||t.setAttribute("stroke",this.legendCollection[d].fill)))}f._isVisible=!p}if("Layers"===this.maps.legendSettings.type&&this.maps.legendSettings.toggleLegendSettings.enable){var y=void 0;this.removeCollections(e,d),-1!==(g=this.maps.toggledLegendId.indexOf(d))&&(p=!1);for(c=0;c<this.maps.layers.length;c++)for(u=0;u<f.length;u++){h=this.legendCollection[d].data[u];null!==(y=O(this.maps.element.id+"_LayerIndex_"+h.layerIndex+"_shapeIndex_"+h.shapeIndex+"_dataIndex_"+h.dataIndex,this.maps.element.id))&&(C=this.maps.toggledElementId.indexOf(y.id),p?(0===u&&this.maps.toggledLegendId.push(d),-1===C&&this.maps.toggledElementId.push(y.id),this.maps.legendSettings.toggleLegendSettings.applyShapeSettings?(y.setAttribute("fill",this.maps.layers[c].shapeSettings.fill),y.setAttribute("fill-opacity",this.maps.layers[c].shapeSettings.opacity.toString()),y.setAttribute("stroke",this.maps.layers[c].shapeSettings.border.color||this.maps.themeStyle.shapeBorderColor),y.setAttribute("stroke-width",(Y.isNullOrUndefined(this.maps.layers[c].shapeSettings.border.width)?0:this.maps.layers[c].shapeSettings.border.width).toString()),y.setAttribute("stroke-opacity",(Y.isNullOrUndefined(this.maps.layers[c].shapeSettings.border.opacity)?this.maps.layers[c].shapeSettings:this.maps.layers[c].shapeSettings.border).opacity.toString())):(y.setAttribute("fill",o),y.setAttribute("fill-opacity",n.toString()),y.setAttribute("stroke",l),y.setAttribute("stroke-width",a.toString()),y.setAttribute("stroke-opacity",r.toString())),null!==e&&(i=O(this.maps.element.id+"_Legend_Text_Index_"+d,this.maps.element.id),t=O(this.maps.element.id+"_Legend_Shape_Index_"+d,this.maps.element.id),this.maps.legendSettings.toggleLegendSettings.applyShapeSettings?this.setToggleAttributes(i,t,this.maps.layers[c].shapeSettings.fill,this.maps.layers[c].shapeSettings.opacity,this.maps.layers[c].shapeSettings.border.color||this.maps.themeStyle.shapeBorderColor,Y.isNullOrUndefined(this.maps.layers[c].shapeSettings.border.width)?0:this.maps.layers[c].shapeSettings.border.width,(Y.isNullOrUndefined(this.maps.layers[c].shapeSettings.border.opacity)?this.maps.layers[c].shapeSettings:this.maps.layers[c].shapeSettings.border).opacity,this.maps.layers[c].shapeSettings.fill):this.setToggleAttributes(i,t,o,n,l,a,r,o))):(-1!==g&&0===u&&this.maps.toggledLegendId.splice(g,1),-1!==C&&this.maps.toggledElementId.splice(C,1),y.setAttribute("fill",this.legendCollection[d].fill),y.setAttribute("stroke-opacity",(Y.isNullOrUndefined(this.maps.layers[c].shapeSettings.border.opacity)?this.maps.layers[c].shapeSettings:this.maps.layers[c].shapeSettings.border).opacity.toString()),y.setAttribute("stroke-width",(Y.isNullOrUndefined(this.maps.layers[c].shapeSettings.border.width)?0:this.maps.layers[c].shapeSettings.border.width).toString()),y.setAttribute("fill-opacity",this.maps.layers[c].shapeSettings.opacity.toString()),y.setAttribute("stroke",this.maps.layers[c].shapeSettings.border.color||this.maps.themeStyle.shapeBorderColor),null!==e&&(i=O(this.maps.element.id+"_Legend_Text_Index_"+d,this.maps.element.id),t=O(this.maps.element.id+"_Legend_Shape_Index_"+d,this.maps.element.id),this.setToggleAttributes(i,t,this.legendCollection[d].fill,this.legendCollection[d].opacity,this.legendCollection[d].shapeBorder.color,this.legendCollection[d].shapeBorder.width,this.legendCollection[d].shapeBorder.opacity,"#757575"))))}f._isVisible=!p}}else if(!Y.isNullOrUndefined(e.id)&&(-1<e.id.indexOf(this.maps.element.id+"_Legend_Shape_Index")||-1!==e.id.indexOf(this.maps.element.id+"_Legend_Index"))&&this.maps.legendSettings.visible&&-1===e.id.indexOf("_Text")){var f,b=void 0,d=parseFloat(e.id.split(this.maps.element.id+"_Legend_Index_")[1]),S=void 0,p=(f=this.legendCollection[d].data)._isVisible;if(("Bubbles"===this.maps.legendSettings.type||"Markers"===this.maps.legendSettings.type)&&this.maps.legendSettings.toggleLegendSettings.enable)for(g=this.maps.toggledLegendId.indexOf(d),m=0;m<this.maps.layers.length;m++)for(c=0;c<("Bubbles"===this.maps.legendSettings.type?this.maps.layers[m].bubbleSettings:this.maps.layers[m].markerSettings).length;c++){for(u=0;u<f.length;u++){S=this.legendCollection[d].data[u],b="Bubbles"===this.maps.legendSettings.type?O(this.maps.element.id+"_LayerIndex_"+S.layerIndex+"_BubbleIndex_"+c+"_dataIndex_"+S.dataIndex,this.maps.element.id):O(this.maps.element.id+"_LayerIndex_"+S.layerIndex+"_MarkerIndex_"+c+"_dataIndex_"+S.dataIndex,this.maps.element.id);Y.isNullOrUndefined(S.shape)||"Balloon"!==S.shape||(b=(b="Bubbles"===this.maps.legendSettings.type?O(this.maps.element.id+"_LayerIndex_"+S.layerIndex+"_BubbleIndex_"+c+"_dataIndex_"+S.dataIndex+"_Group",this.maps.element.id):O(this.maps.element.id+"_LayerIndex_"+S.layerIndex+"_MarkerIndex_"+c+"_dataIndex_"+S.dataIndex+"_Group",this.maps.element.id)).children[0]),p&&null!==b?("Markers"===this.maps.legendSettings.type&&(-1===g&&this.maps.toggledLegendId.push(d),-1===this.maps.toggledElementId.indexOf(b.id))&&this.maps.toggledElementId.push(b.id),this.maps.legendSettings.toggleLegendSettings.applyShapeSettings?(b.setAttribute("fill",this.maps.layers[m].shapeSettings.fill),b.setAttribute("stroke",this.maps.layers[m].shapeSettings.border.color||this.maps.themeStyle.shapeBorderColor),b.setAttribute("stroke-width",(Y.isNullOrUndefined(this.maps.layers[m].shapeSettings.border.width)?0:this.maps.layers[m].shapeSettings.border.width).toString()),b.setAttribute("stroke-opacity",(Y.isNullOrUndefined(this.maps.layers[m].shapeSettings.border.opacity)?this.maps.layers[m].shapeSettings:this.maps.layers[m].shapeSettings.border).opacity.toString()),b.setAttribute("fill-opacity",this.maps.layers[m].shapeSettings.opacity.toString())):(b.setAttribute("fill",o),b.setAttribute("fill-opacity",n.toString()),b.setAttribute("stroke",l),b.setAttribute("stroke-width",a.toString()),b.setAttribute("stroke-opacity",r.toString())),null!==e&&(i=O(this.maps.element.id+"_Legend_Index_"+d+"_Text",this.maps.element.id),t=O(this.maps.element.id+"_Legend_Index_"+d,this.maps.element.id),this.maps.legendSettings.toggleLegendSettings.applyShapeSettings?this.setToggleAttributes(i,t,this.maps.layers[m].shapeSettings.fill,this.maps.layers[m].shapeSettings.opacity,this.maps.layers[m].shapeSettings.border.color||this.maps.themeStyle.shapeBorderColor,Y.isNullOrUndefined(this.maps.layers[m].shapeSettings.border.width)?0:this.maps.layers[m].shapeSettings.border.width,(Y.isNullOrUndefined(this.maps.layers[m].shapeSettings.border.opacity)?this.maps.layers[m].shapeSettings:this.maps.layers[m].shapeSettings.border).opacity,this.maps.layers[m].shapeSettings.fill):this.setToggleAttributes(i,t,o,n,l,a,r,o))):("Markers"===this.maps.legendSettings.type?(-1!==g&&0===u&&this.maps.toggledLegendId.splice(g,1),this.markerToggleSelection(b,m,c,d)):this.bubbleToggleSelection(b,m,c,d),null!==e&&((t=O(this.maps.element.id+"_Legend_Index_"+d,this.maps.element.id)).setAttribute("fill",this.legendCollection[d].fill),t.setAttribute("fill-opacity",this.legendCollection[d].opacity),t.setAttribute("stroke",this.legendCollection[d].shapeBorder.color),t.setAttribute("stroke-width",this.legendCollection[d].shapeBorder.width),t.setAttribute("stroke-opacity",this.legendCollection[d].shapeBorder.opacity),(i=O(this.maps.element.id+"_Legend_Index_"+d+"_Text",this.maps.element.id)).setAttribute("fill",this.maps.legendSettings.textStyle.color)))}f._isVisible=!p}if("Layers"===this.maps.legendSettings.type&&this.maps.legendSettings.toggleLegendSettings.enable){var v=void 0,x=(this.removeCollections(e,d),this.maps.toggledLegendId.indexOf(d));-1!==x&&(p=!1);for(m=0;m<this.maps.layers.length;m++)for(var C,u=0;u<f.length;u++)S=this.legendCollection[d].data[u],null!==(v=O(this.maps.element.id+"_LayerIndex_"+S.layerIndex+"_shapeIndex_"+S.shapeIndex+"_dataIndex_"+S.dataIndex,this.maps.element.id))&&(C=this.maps.toggledElementId.indexOf(v.id),p?(0===u&&this.maps.toggledLegendId.push(d),-1===C&&this.maps.toggledElementId.push(v.id),this.maps.legendSettings.toggleLegendSettings.applyShapeSettings?(v.setAttribute("fill",this.maps.layers[0].shapeSettings.fill),v.setAttribute("stroke",this.maps.layers[0].shapeSettings.border.color||this.maps.themeStyle.shapeBorderColor),v.setAttribute("fill-opacity",this.maps.layers[m].shapeSettings.opacity.toString()),v.setAttribute("stroke-width",(Y.isNullOrUndefined(this.maps.layers[m].shapeSettings.border.width)?0:this.maps.layers[m].shapeSettings.border.width).toString()),v.setAttribute("stroke-opacity",(Y.isNullOrUndefined(this.maps.layers[m].shapeSettings.border.opacity)?this.maps.layers[m].shapeSettings:this.maps.layers[m].shapeSettings.border).opacity.toString())):(v.setAttribute("fill",o),v.setAttribute("fill-opacity",n.toString()),v.setAttribute("stroke",l),v.setAttribute("stroke-width",a.toString()),v.setAttribute("stroke-opacity",r.toString())),null!==e&&(t=O(this.maps.element.id+"_Legend_Index_"+d,this.maps.element.id),i=O(this.maps.element.id+"_Legend_Index_"+d+"_Text",this.maps.element.id),this.maps.legendSettings.toggleLegendSettings.applyShapeSettings?this.setToggleAttributes(i,t,this.maps.layers[0].shapeSettings.fill,this.maps.layers[m].shapeSettings.opacity,this.maps.layers[0].shapeSettings.border.color||this.maps.themeStyle.shapeBorderColor,Y.isNullOrUndefined(this.maps.layers[m].shapeSettings.border.width)?0:this.maps.layers[m].shapeSettings.border.width,(Y.isNullOrUndefined(this.maps.layers[m].shapeSettings.border.opacity)?this.maps.layers[m].shapeSettings:this.maps.layers[m].shapeSettings.border).opacity,this.maps.layers[0].shapeSettings.fill):this.setToggleAttributes(i,t,o,n,l,a,r,o))):(-1!==x&&0===u&&this.maps.toggledLegendId.splice(x,1),-1!==C&&this.maps.toggledElementId.splice(C,1),v.setAttribute("fill-opacity",this.maps.layers[m].shapeSettings.opacity.toString()),v.setAttribute("stroke-width",(Y.isNullOrUndefined(this.maps.layers[m].shapeSettings.border.width)?0:this.maps.layers[m].shapeSettings.border.width).toString()),v.setAttribute("stroke",this.maps.layers[0].shapeSettings.border.color||this.maps.themeStyle.shapeBorderColor),v.setAttribute("stroke-opacity",(Y.isNullOrUndefined(this.maps.layers[m].shapeSettings.border.opacity)?this.maps.layers[m].shapeSettings:this.maps.layers[m].shapeSettings.border).opacity.toString()),v.setAttribute("fill",this.legendCollection[d].fill),null!==e&&(i=O(this.maps.element.id+"_Legend_Index_"+d+"_Text",this.maps.element.id),t=O(this.maps.element.id+"_Legend_Index_"+d,this.maps.element.id),this.setToggleAttributes(i,t,this.legendCollection[d].fill,this.legendCollection[d].opacity,this.legendCollection[d].shapeBorder.color,this.legendCollection[d].shapeBorder.width,this.legendCollection[d].shapeBorder.opacity,"#757575"))));f._isVisible=!p}}},S.prototype.removeCollections=function(e,t){this.removeLegendSelectionCollection(e);var i=this.getIndexofLegend(this.maps.legendSelectionCollection,e);-1!==i&&this.maps.legendSelectionCollection.splice(i,1);-1!==this.getIndexofLegend(this.legendHighlightCollection,e)&&this.legendHighlightCollection.splice(i,1);i=this.getIndexofLegend(this.shapeHighlightCollection,e),-1!==i&&this.shapeHighlightCollection.splice(i,1),e=this.maps.selectedLegendElementId.indexOf(t);-1!==e&&this.maps.selectedLegendElementId.splice(e,1)},S.prototype.removeEventListener=function(){if(!this.maps.isDestroyed){this.maps.off(Y.Browser.touchMoveEvent,this.interactiveHandler),this.maps.off(Y.Browser.touchEndEvent,this.interactiveHandler),this.maps.off(ko,this.legendClick);var e=document.getElementById(this.maps.element.id+"_Legend_Paging_Group");if(e)for(var t=0;t<e.childElementCount;t++)Y.EventHandler.remove(e.childNodes[t],Y.Browser.touchStartEvent,this.changeNextPage)}},S.prototype.getLegendData=function(e,t,i,o,n,l,a){var r=[];if("[object Array]"===Object.prototype.toString.call(n))for(var s=0;s<n.length;s++){var d=n[s],p=-1<o.indexOf(".")?U(i,o):i[o],h=Qe(i[o],l,d.properties),p=Y.isNullOrUndefined(p)||"string"!=typeof p?p:p.toLowerCase();if((!Y.isNullOrUndefined(d.properties[h])&&isNaN(d.properties[h])?d.properties[h].toLowerCase():d.properties[h])===p)if("MultiPoint"!==d.geometry.type)r.push({layerIndex:e,shapeIndex:s,dataIndex:t,name:i[o],value:a,pointIndex:-1});else for(var m=0;m<d.geometry.coordinates.length;m++)r.push({layerIndex:e,shapeIndex:s,dataIndex:t,name:i[o],value:a,pointIndex:m})}return r},S.prototype.setToggleAttributes=function(e,t,i,o,n,l,a,r){e.setAttribute("fill",r),t.setAttribute("fill",i),t.setAttribute("fill-opacity",o.toString()),t.setAttribute("stroke",n),t.setAttribute("stroke-width",l.toString()),Y.isNullOrUndefined(a)||t.setAttribute("stroke-opacity",a.toString())},S.prototype.legendGradientColor=function(e,t){var i="http://www.w3.org/2000/svg";if(!Y.isNullOrUndefined(e.color)&&"object"==typeof e.color){var o=document.createElementNS(i,"linearGradient"),n=this.maps.legendSettings.position,l="Top"===n||"Bottom"===n?"100":"0",n="Top"===n||"Bottom"===n?"0":"100";o.setAttribute("id","linear_"+t+"_"+this.maps.element.id),o.setAttribute("x1","0%"),o.setAttribute("y1","0%"),o.setAttribute("x2",l+"%"),o.setAttribute("y2",n+"%");for(var a=0;a<e.color.length;a++){var r=100/(e.color.length-1),s=document.createElementNS(i,"stop");s.setAttribute("offset",a*r+"%"),s.setAttribute("stop-color",e.color[a]),s.setAttribute("stop-opacity",1..toString()),o.appendChild(s)}this.legendLinearGradient=o;l="url(#linear_"+t+"_"+this.maps.element.id+")";this.defsElement.appendChild(o),n=l}return n},S.prototype.getModuleName=function(){return"Legend"},S.prototype.destroy=function(){this.legendCollection=[],this.legendRenderingCollections=[],this.translate=null,this.legendBorderRect=null,this.initialMapAreaRect=null,this.legendTotalRect=null,this.totalPages=[],this.legendItemRect=null,this.legendGroup=null,this.shapeHighlightCollection=[],this.legendHighlightCollection=[],this.shapePreviousColor=[],this.selectedNonLegendShapes=[],this.legendLinearGradient=null,this.currentLayer=null,this.defsElement=null,this.legendElement=[],this.oldShapeElement=null,this.maps.refreshing||(this.maps=null)};var _n=S;function S(e){this.legendBorderRect=new K(0,0,0,0),this.initialMapAreaRect=new K(0,0,0,0),this.legendTotalRect=new K(0,0,0,0),this.totalPages=[],this.page=0,this.currentPage=0,this.legendItemRect=new K(0,0,0,0),this.heightIncrement=0,this.widthIncrement=0,this.textMaxWidth=0,this.shapeHighlightCollection=[],this.legendHighlightCollection=[],this.shapePreviousColor=[],this.selectedNonLegendShapes=[],this.shapeToggled=!0,this.legendElement=null,this.maps=e,this.addEventListener()}Ln.prototype.addEventListener=function(){this.maps.isDestroyed||(this.maps.on(Y.Browser.touchMoveEvent,this.mouseMove,this),this.maps.on(Y.Browser.touchStartEvent,this.mouseMove,this))},Ln.prototype.removeEventListener=function(){this.maps.isDestroyed||(this.maps.off(Y.Browser.touchMoveEvent,this.mouseMove),this.maps.off(Y.Browser.touchStartEvent,this.mouseMove))},Ln.prototype.addHighlight=function(e,t,i){e=ut(e,t,0,this.maps);i?this.mapHighlight(e,null,null):x(e)},Ln.prototype.mouseMove=function(e){var t,i,o,n,l,a=e.target,e="touch"===e.pointerType||"2"===e.pointerType||-1<e.type.indexOf("touch");(-1!==a.id.indexOf("LayerIndex")||-1<a.id.indexOf("NavigationIndex"))&&"ShapeselectionMapStyle"!==a.getAttribute("class")&&!e&&"MarkerselectionMapStyle"!==a.getAttribute("class")&&"BubbleselectionMapStyle"!==a.getAttribute("class")&&"navigationlineselectionMapStyle"!==a.getAttribute("class")&&"PolygonselectionMapStyle"!==a.getAttribute("class")&&"LineselectionMapStyle"!==a.getAttribute("class")?(i=parseInt(a.id.split("_LayerIndex_")[1].split("_")[0],10),n=o=t=e=void 0,-1<a.id.indexOf("shapeIndex")?(o=parseInt(a.id.split("_shapeIndex_")[1].split("_")[0],10),e=this.maps.layers[i].shapeData.features&&!Y.isNullOrUndefined(this.maps.layersCollection[i].layerData[o])?this.maps.layersCollection[i].layerData[o].property:null,n=parseInt(a.id.split("_dataIndex_")[1].split("_")[0],10),t=Y.isNullOrUndefined(n)?null:this.maps.layers[i].dataSource[n],this.highlightSettings=this.maps.layers[i].highlightSettings):-1<a.id.indexOf("BubbleIndex")?(o=parseInt(a.id.split("_BubbleIndex_")[1].split("_")[0],10),n=parseInt(a.id.split("_dataIndex_")[1].split("_")[0],10),t=this.maps.layers[i].bubbleSettings[o].dataSource[n],this.highlightSettings=this.maps.layers[i].bubbleSettings[o].highlightSettings):-1<a.id.indexOf("MarkerIndex")?(o=parseInt(a.id.split("_MarkerIndex_")[1].split("_")[0],10),n=parseInt(a.id.split("_dataIndex_")[1].split("_")[0],10),t=this.maps.layers[i].markerSettings[o].dataSource[n],this.highlightSettings=this.maps.layers[i].markerSettings[o].highlightSettings):-1<a.id.indexOf("_PolygonIndex_")?(n=parseInt(a.id.split("_PolygonIndex_")[1].split("_")[0],10),t=this.maps.layers[i].polygonSettings.polygons[n].points,this.highlightSettings=this.maps.layers[i].polygonSettings.highlightSettings):(l=parseInt(a.id.split("_NavigationIndex_")[1].split("_")[0],10),i=parseInt(a.id.split("_LayerIndex_")[1].split("_")[0],10),e=null,t={latitude:this.maps.layers[i].navigationLineSettings[l].latitude,longitude:this.maps.layers[i].navigationLineSettings[l].longitude},this.highlightSettings=this.maps.layers[i].navigationLineSettings[l].highlightSettings),this.highlightSettings.enable?this.handleHighlight(a,i,t,e):(o=document.getElementsByClassName("highlightMapStyle")[0],Y.isNullOrUndefined(o)||(x(o),-1<o.id.indexOf("NavigationIndex")&&(l=parseInt(o.id.split("_NavigationIndex_")[1].split("_")[0],10),n=parseInt(o.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10),o.setAttribute("stroke-width",this.maps.layers[n].navigationLineSettings[l].width.toString()),o.setAttribute("stroke",this.maps.layers[n].navigationLineSettings[l].color))))):0<ct("highlightMapStyle").length?(-1<(a=ct("highlightMapStyle")[0]).id.indexOf("NavigationIndex")&&(l=parseInt(a.id.split("_NavigationIndex_")[1].split("_")[0],10),i=parseInt(a.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10),a.setAttribute("stroke-width",this.maps.layers[i].navigationLineSettings[l].width.toString()),a.setAttribute("stroke",this.maps.layers[i].navigationLineSettings[l].color)),x(a),this.maps.legendSettings.visible&&this.maps.legendModule&&this.maps.legendModule.removeShapeHighlightCollection()):(-1!==a.id.indexOf(this.maps.element.id+"_Legend_Shape_Index")||-1!==a.id.indexOf(this.maps.element.id+"_Legend_Index"))&&this.maps.legendModule&&this.maps.legendSettings.visible&&-1===a.id.indexOf("_Text")?this.maps.legendModule.legendHighLightAndSelection(a,"highlight"):this.maps.legendSettings.visible&&this.maps.legendModule&&this.maps.legendModule.removeLegendHighlightCollection()},Ln.prototype.handleHighlight=function(e,t,i,o){this.maps.legendSettings.visible&&-1===e.id.indexOf("_MarkerIndex_")&&this.maps.legendModule&&"Layers"===this.maps.legendSettings.type&&this.maps.legendModule.shapeHighLightAndSelection(e,i,this.highlightSettings,"highlight",t),-1<e.id.indexOf("shapeIndex")&&this.maps.legendSettings.visible&&this.maps.legendModule&&!this.maps.legendModule.shapeToggled||this.mapHighlight(e,o,i)},Ln.prototype.mapHighlight=function(e,t,i){var o=this,n=parseInt(e.id.split("_LayerIndex_")[1].split("_")[0],10),l=!1,n=(-1<e.id.indexOf("MarkerIndex")&&(a=parseInt(e.id.split("_MarkerIndex_")[1].split("_")[0],10),l=this.maps.layers[n].markerSettings[a].highlightSettings.enable),-1!==e.parentElement.id.indexOf("LineString")&&this.highlightSettings.fill||this.highlightSettings.border.color),a=-1===e.parentElement.id.indexOf("LineString")?this.highlightSettings.border.width/(l?1:this.maps.scale):this.highlightSettings.border.width/this.maps.scale,l=(Y.isNullOrUndefined(this.highlightSettings.border.opacity)?this.highlightSettings:this.highlightSettings.border).opacity,r={opacity:this.highlightSettings.opacity,fill:-1===e.parentElement.id.indexOf("LineString")?-1===e.id.indexOf("NavigationIndex")?Y.isNullOrUndefined(this.highlightSettings.fill)?e.getAttribute("fill"):this.highlightSettings.fill:"none":"transparent",border:{color:n,width:a,opacity:l},cancel:!1},s={opacity:r.opacity,fill:r.fill,border:{color:n,width:a,opacity:l},name:Uo,target:e.id,cancel:!1,shapeData:t,data:i,maps:this.maps},d=(-1<e.id.indexOf("shapeIndex")&&this.maps.trigger(Uo,s,function(){}),{opacity:r.opacity,fill:r.fill,border:{color:n,width:a,opacity:l},name:nn,target:e.id,cancel:!1,shapeData:t,data:i,maps:this.maps});this.maps.trigger(nn,d,function(){d.cancel=(r.cancel!==d.cancel?d:-1<e.id.indexOf("shapeIndex")?s:r).cancel,d.fill=(r.fill!==d.fill?d:-1<e.id.indexOf("shapeIndex")?s:r).fill,d.opacity=(r.opacity!==d.opacity?d:-1<e.id.indexOf("shapeIndex")?s:r).opacity,d.border.color=(r.border.color!==d.border.color?d:-1<e.id.indexOf("shapeIndex")?s:r).border.color,d.border.width=(r.border.width!==d.border.width?d:-1<e.id.indexOf("shapeIndex")?s:r).border.width,d.border.opacity=(r.border.opacity!==d.border.opacity?d:-1<e.id.indexOf("shapeIndex")?s:r).border.opacity,o.highlightMap(e,d)})},Ln.prototype.highlightMap=function(e,t){var i,o,n;"highlightMapStyle"===e.getAttribute("class")||t.cancel||(0<ct("highlightMapStyle").length&&(x(i=ct("highlightMapStyle")[0]),-1<i.id.indexOf("NavigationIndex"))&&(o=parseInt(i.id.split("_NavigationIndex_")[1].split("_")[0],10),n=parseInt(i.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10),i.setAttribute("stroke-width",this.maps.layers[n].navigationLineSettings[o].width.toString()),i.setAttribute("stroke",this.maps.layers[n].navigationLineSettings[o].color)),E("highlightMap")?yt("highlightMap","highlightMapStyle",t):document.body.appendChild(gt("highlightMap","highlightMapStyle",t)),e.setAttribute("class","highlightMapStyle"))},Ln.prototype.getModuleName=function(){return"Highlight"},Ln.prototype.destroy=function(){this.highlightSettings=null,this.maps.refreshing||(this.maps=null)};var Mn=Ln;function Ln(e){this.maps=e,this.addEventListener()}wn.prototype.addEventListener=function(){this.maps.isDestroyed||this.maps.on(ko,this.mouseClick,this)},wn.prototype.removeEventListener=function(){this.maps.isDestroyed||this.maps.off(ko,this.mouseClick)},wn.prototype.mouseClick=function(e){var t,i,o,n,l;!Y.isNullOrUndefined(e.type)&&-1!==e.type.indexOf("touch")&&Y.isNullOrUndefined(e.id)&&(e=e.target),!Y.isNullOrUndefined(e.id)&&(-1<e.id.indexOf("LayerIndex")||-1<e.id.indexOf("NavigationIndex"))?(i=n=o=l=void 0,t=parseInt(e.id.split("_LayerIndex_")[1].split("_")[0],10),-1<e.id.indexOf("shapeIndex")?(n=parseInt(e.id.split("_shapeIndex_")[1].split("_")[0],10),l=!Y.isNullOrUndefined(this.maps.layers[t].shapeData.features)&&this.maps.layers[t].shapeData.features.length>n?this.maps.layers[t].shapeData.features[n].properties:!Y.isNullOrUndefined(this.maps.layers[t].shapeData.geometries)&&this.maps.layers[t].shapeData.geometries.length>n?this.maps.layers[t].shapeData.geometries[n].properties:null,i=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10),o=Y.isNullOrUndefined(i)?null:this.maps.layers[t].dataSource[i],this.selectionsettings=this.maps.layers[t].selectionSettings,this.selectionType="Shape"):-1<e.id.indexOf("BubbleIndex")?(n=parseInt(e.id.split("_BubbleIndex_")[1].split("_")[0],10),i=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10),o=this.maps.layers[t].bubbleSettings[n].dataSource[i],this.selectionsettings=this.maps.layers[t].bubbleSettings[n].selectionSettings,this.selectionType="Bubble"):-1<e.id.indexOf("MarkerIndex")?(n=parseInt(e.id.split("_MarkerIndex_")[1].split("_")[0],10),i=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10),o=this.maps.layers[t].markerSettings[n].dataSource[i],this.selectionsettings=this.maps.layers[t].markerSettings[n].selectionSettings,this.selectionType="Marker"):-1<e.id.indexOf("_PolygonIndex_")?(i=parseInt(e.id.split("_PolygonIndex_")[1].split("_")[0],10),o=this.maps.layers[t].polygonSettings.polygons[i].points,this.selectionsettings=this.maps.layers[t].polygonSettings.selectionSettings,this.selectionType="Polygon"):-1<e.id.indexOf("NavigationIndex")&&(n=parseInt(e.id.split("_NavigationIndex_")[1].split("_")[0],10),l=null,o={latitude:this.maps.layers[t].navigationLineSettings[n].latitude,longitude:this.maps.layers[t].navigationLineSettings[n].longitude},this.selectionsettings=this.maps.layers[t].navigationLineSettings[n].selectionSettings,this.selectionType="navigationline"),!Y.isNullOrUndefined(this.selectionsettings)&&this.selectionsettings.enable&&this.selectElement(e,t,o,l)):this.maps.legendSettings.visible&&!this.maps.legendSettings.toggleLegendSettings.enable&&this.maps.legendModule&&!Y.isNullOrUndefined(e.id)&&-1===e.id.indexOf("_Text")&&(-1<e.id.indexOf(this.maps.element.id+"_Legend_Shape_Index")||-1!==e.id.indexOf(this.maps.element.id+"_Legend_Index"))&&this.maps.legendModule.legendHighLightAndSelection(e,"selection")},wn.prototype.selectElement=function(e,t,i,o){this.maps.mapSelect=!!e,this.maps.legendModule&&this.maps.legendSettings.visible&&-1===e.id.indexOf("_MarkerIndex_")&&this.maps.legendModule.shapeHighLightAndSelection(e,i,this.selectionsettings,"selection",t),-1<e.id.indexOf("shapeIndex")&&this.maps.legendSettings.visible&&this.maps.legendModule&&!this.maps.legendModule.shapeToggled||this.selectMap(e,o,i)},wn.prototype.addSelection=function(e,t,i){e=ut(e,t,0,this.maps);i?this.selectMap(e,null,null):x(e)},wn.prototype.selectMap=function(h,e,t){var m=this,c=-1<h.parentElement.id.indexOf("LineString"),i={color:c&&this.selectionsettings.fill||this.selectionsettings.border.color,width:c?this.selectionsettings.border.width/this.maps.scale:this.selectionsettings.border.width/("Marker"===this.selectionType?1:this.maps.scale),opacity:this.selectionsettings.border.opacity},u={opacity:this.selectionsettings.opacity,fill:c?"transparent":"navigationline"!==this.selectionType?this.selectionsettings.fill:"none",border:i,name:on,target:h.id,cancel:!1,shapeData:e,data:t,maps:this.maps};this.maps.trigger("itemSelection",u,function(e){if(u.border.opacity=(Y.isNullOrUndefined(m.selectionsettings.border.opacity)?m.selectionsettings:m.selectionsettings.border).opacity,!u.cancel)if(h.getAttribute("class")===m.selectionType+"selectionMapStyle"||"LineselectionMapStyle"===h.getAttribute("class")){x(h),m.removedSelectionList(h);for(var t=0;t<m.maps.shapeSelectionItem.length;t++)if(m.maps.shapeSelectionItem[t]===u.shapeData){m.maps.shapeSelectionItem.splice(t,1);break}-1<h.id.indexOf("NavigationIndex")&&(o=parseInt(h.id.split("_NavigationIndex_")[1].split("_")[0],10),n=parseInt(h.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10),h.setAttribute("stroke-width",m.maps.layers[n].navigationLineSettings[o].width.toString()),h.setAttribute("stroke",m.maps.layers[n].navigationLineSettings[o].color))}else{var i=Z(m.maps.element.id+"_Layer_Collections");if(!m.selectionsettings.enableMultiSelect&&(0<i.getElementsByClassName(m.selectionType+"selectionMapStyle").length||0<i.getElementsByClassName("LineselectionMapStyle").length)){for(var o,n,l=i.getElementsByClassName(m.selectionType+"selectionMapStyle").length,a=void 0,r=0;r<l;r++)x(a=i.getElementsByClassName(m.selectionType+"selectionMapStyle")[0]),m.removedSelectionList(a);if(0<i.getElementsByClassName("LineselectionMapStyle").length)for(l=i.getElementsByClassName("LineselectionMapStyle").length,r=0;r<l;r++)x(a=i.getElementsByClassName("LineselectionMapStyle")[0]),m.removedSelectionList(a);if("Shape"===m.selectionType){m.maps.shapeSelectionItem=[];for(var s=m.maps.selectedElementId.length,d=0;d<s;d++){x(a=i.getElementsByClassName(m.selectionType+"selectionMapStyle")[0]);var p=m.maps.selectedElementId.indexOf(a.getAttribute("id"));m.maps.selectedElementId.splice(p,1)}}-1<a.id.indexOf("NavigationIndex")&&(o=parseInt(h.id.split("_NavigationIndex_")[1].split("_")[0],10),n=parseInt(h.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10),a.setAttribute("stroke-width",m.maps.layers[n].navigationLineSettings[o].width.toString()),a.setAttribute("stroke",m.maps.layers[n].navigationLineSettings[o].color))}c?(E("LineselectionMap")?yt("LineselectionMap","LineselectionMapStyle",u):document.body.appendChild(gt("LineselectionMap","LineselectionMapStyle",u)),h.setAttribute("class","LineselectionMapStyle")):(E(m.selectionType+"selectionMap")?yt(m.selectionType+"selectionMap",m.selectionType+"selectionMapStyle",u):document.body.appendChild(gt(m.selectionType+"selectionMap",m.selectionType+"selectionMapStyle",u)),h.setAttribute("class",m.selectionType+"selectionMapStyle")),"ShapeselectionMapStyle"===h.getAttribute("class")&&(m.maps.shapeSelectionClass=E(m.selectionType+"selectionMap"),m.maps.selectedElementId.push(h.getAttribute("id")),m.maps.shapeSelectionItem.push(u.shapeData)),"MarkerselectionMapStyle"===h.getAttribute("class")&&(m.maps.markerSelectionClass=E(m.selectionType+"selectionMap"),m.maps.selectedMarkerElementId.push(h.getAttribute("id"))),"BubbleselectionMapStyle"===h.getAttribute("class")&&(m.maps.bubbleSelectionClass=E(m.selectionType+"selectionMap"),m.maps.selectedBubbleElementId.push(h.getAttribute("id"))),"navigationlineselectionMapStyle"===h.getAttribute("class")&&(m.maps.navigationSelectionClass=E(m.selectionType+"selectionMap"),m.maps.selectedNavigationElementId.push(h.getAttribute("id"))),"PolygonselectionMapStyle"===h.getAttribute("class")&&(m.maps.polygonSelectionClass=E(m.selectionType+"selectionMap"),m.maps.selectedPolygonElementId.push(h.getAttribute("id")))}})},wn.prototype.removedSelectionList=function(e){"Shape"===this.selectionType&&this.maps.selectedElementId.splice(this.maps.selectedElementId.indexOf(e.getAttribute("id")),1),"Bubble"===this.selectionType&&this.maps.selectedBubbleElementId.splice(this.maps.selectedBubbleElementId.indexOf(e.getAttribute("id")),1),"Marker"===this.selectionType&&this.maps.selectedMarkerElementId.splice(this.maps.selectedMarkerElementId.indexOf(e.getAttribute("id")),1),"navigationline"===this.selectionType&&this.maps.selectedBubbleElementId.splice(this.maps.selectedBubbleElementId.indexOf(e.getAttribute("id")),1),"Polygon"===this.selectionType&&this.maps.selectedPolygonElementId.splice(this.maps.selectedPolygonElementId.indexOf(e.getAttribute("id")),1)},wn.prototype.getModuleName=function(){return"Selection"},wn.prototype.destroy=function(){this.selectionsettings=null,this.maps.refreshing||(this.maps=null)};var Pn=wn;function wn(e){this.maps=e,this.addEventListener()}In.prototype.renderTooltip=function(i){var o,e,t,n,l=this,a=(u=(-1!==i.type.indexOf("touch")?(this.isTouch=!0,c=i.changedTouches[0].pageX,i.changedTouches[0]):(this.isTouch="touch"===i.pointerType,c=i.pageX,i)).pageY,i.target),r=(-1===a.id.indexOf(this.maps.element.id)&&(m=a.closest("."+this.maps.element.id+"_marker_template_element"),!Y.isNullOrUndefined(m))&&-1<m.id.indexOf("_MarkerIndex_")&&(a=m),""),s=a.id,d=[],p=-1<s.indexOf("_LayerIndex_")&&parseFloat(s.split("_LayerIndex_")[1].split("_")[0]),h=this.maps.layersCollection[p],m=[],c=F(c,u,this.maps.svgObject),u=(this.tooltipTargetID=s,null),g=null,y=this.maps.getClickLocation(s,i.pageX,i.pageY,a,i.layerX,i.layerY,"tooltip"),f=(Y.isNullOrUndefined(y)||(u=y.latitude,g=y.longitude),-1<s.indexOf("_PolygonIndex_"));if((-1<s.indexOf("_shapeIndex_")||-1<s.indexOf("_MarkerIndex_")||-1<s.indexOf("_BubbleIndex_")||-1<s.indexOf("_PolygonIndex_"))&&null===this.maps.markerDragArgument){if(-1<s.indexOf("_PolygonIndex_")){var y=parseInt(s.split("_PolygonIndex_")[1].split("_")[0],10),b=h.polygonSettings.tooltipSettings,S=h.polygonSettings.polygons[y],v=b.textStyle,x=b.fill;m.push(S.tooltipText)}else if(-1<s.indexOf("_shapeIndex_")){var C=h.tooltipSettings,y=parseInt(s.split("_shapeIndex_")[1].split("_")[0],10);if(Y.isNullOrUndefined(h.layerData)||Y.isNullOrUndefined(h.layerData[y]))return;var O=h.layerData[y].property,_=!1,M="[object Array]"===Object.prototype.toString.call(h.shapePropertyPath)?h.shapePropertyPath:[h.shapePropertyPath];if(!Y.isNullOrUndefined(M)){for(var L=0;L<M.length;L++)if(!Y.isNullOrUndefined(h.dataSource)&&!Y.isNullOrUndefined(h.shapeDataPath))for(var P=0;P<h.dataSource.length;P++){var w=h.dataSource[P],T=-1<h.shapeDataPath.indexOf(".")?U(w,h.shapeDataPath):w[h.shapeDataPath];if((!Y.isNullOrUndefined(T)&&isNaN(w[h.shapeDataPath])?T.toLowerCase():T)===(!Y.isNullOrUndefined(O[M[L]])&&isNaN(O[M[L]])?O[M[L]].toLowerCase():O[M[L]])){_=!0,p=P,L=M.length;break}}if(p=_?p:null,h.dataSource&&0<h.dataSource.length){if(!Y.isNullOrUndefined(h.dataSource[p]))for(e in d=JSON.parse(JSON.stringify(h.dataSource[p])),O)d.hasOwnProperty(e)||(d[e]=O[e])}else d=O}!C.visible||(Y.isNullOrUndefined(p)||isNaN(p))&&Y.isNullOrUndefined(O)||(h.tooltipSettings.format?r=this.formatter(h.tooltipSettings.format,d):(y=Qe(h.shapeDataPath,h.shapePropertyPath,O),r=Y.isNullOrUndefined(h.dataSource)||Y.isNullOrUndefined(p)?O[y]:Pe(-1<C.valuePath.indexOf(".")?U(h.dataSource[p],C.valuePath):h.dataSource[p][C.valuePath],this.maps),Y.isNullOrUndefined(r)&&!Y.isNullOrUndefined(C.valuePath)&&(r=-1<C.valuePath.indexOf(".")?U(O,C.valuePath):O[C.valuePath])))}else-1<s.indexOf("_MarkerIndex_")?(y=parseInt(s.split("_MarkerIndex_")[1].split("_")[0],10),I=parseInt(s.split("_MarkerIndex_")[1].split("_")[2],10),t=h.markerSettings[y],C=t.tooltipSettings,d=t.dataSource[I],C.visible&&!isNaN(y)&&(t.tooltipSettings.format?r=this.formatter(t.tooltipSettings.format,t.dataSource[I]):"function"!=typeof t.template&&t.template&&!t.tooltipSettings.valuePath?r=t.template.split(">")[1].split("<")[0]:Y.isNullOrUndefined(t.tooltipSettings.valuePath)||(r=Pe(-1<t.tooltipSettings.valuePath.indexOf(".")?U(t.dataSource[I],t.tooltipSettings.valuePath):t.dataSource[I][t.tooltipSettings.valuePath],this.maps)))):-1<s.indexOf("_BubbleIndex_")&&(y=parseInt(s.split("_BubbleIndex_")[1].split("_")[0],10),I=parseInt(s.split("_BubbleIndex_")[1].split("_")[2],10),t=h.bubbleSettings[y],C=t.tooltipSettings,d=t.dataSource[I],C.visible)&&!isNaN(I)&&(t.tooltipSettings.format?r=this.formatter(t.tooltipSettings.format,t.dataSource[I]):Y.isNullOrUndefined(t.tooltipSettings.valuePath)||(r=Pe(-1<t.tooltipSettings.valuePath.indexOf(".")?U(t.dataSource[I],t.tooltipSettings.valuePath):t.dataSource[I][t.tooltipSettings.valuePath],this.maps)));(f?b:C).visible&&(document.getElementById(this.tooltipId)?o=document.getElementById(this.tooltipId):(o=Y.createElement("div",{id:this.maps.element.id+"_mapsTooltip",className:"EJ2-maps-Tooltip"}),Y.isNullOrUndefined(f?S.tooltipTemplate:C.template)||(f?""===S.tooltipTemplate:""===C.template)||"MouseMove"===this.maps.tooltipDisplayMode?o.style.cssText="position: absolute;pointer-events:none;":o.style.position="absolute",document.getElementById(this.maps.element.id+"_Secondary_Element").appendChild(o)),f?S.tooltipTemplate:C.template,(f?null!==S.tooltipTemplate:null!==C.template)&&1===Object.keys((f?S.tooltipTemplate:C.template,f?S.tooltipTemplate:C.template)).length&&(f?S.tooltipTemplate=S.tooltipTemplate[Object.keys(S.tooltipTemplate)[0]]:C.template=C.template[Object.keys(C.template)[0]]),y={location:c,text:m,data:d=this.setTooltipContent(C,d),textStyle:{color:(f?v:C.textStyle).color,fontFamily:(f?v:C.textStyle).fontFamily,fontStyle:(f?v:C.textStyle).fontStyle,fontWeight:(f?v:C.textStyle).fontWeight,opacity:(f?v:C.textStyle).opacity,size:(f?v:C.textStyle).size},template:f?S.tooltipTemplate:C.template},""!==(n={cancel:!1,name:Bo,options:y,fill:f?x:C.fill,maps:this.maps,latitude:u,longitude:g,element:a,eventArgs:i,content:f?Y.isNullOrUndefined(S.tooltipText)?"":S.tooltipText:Y.isNullOrUndefined(r)?"":r.toString()}).content||""!==n.options.template?this.maps.trigger(Bo,n,function(e){var t;n.cancel||Y.isNullOrUndefined(r)||-1!==s.indexOf("_cluster_")||-1!==s.indexOf("_dataLabel_")?l.clearTooltip(i.target):(l.maps.isProtectedOnChange=!0,n.options.textStyle.size=n.options.textStyle.size||l.maps.themeStyle.fontSize,n.options.textStyle.color=n.options.textStyle.color||l.maps.themeStyle.tooltipFontColor,n.options.textStyle.fontFamily=n.options.textStyle.fontFamily||l.maps.themeStyle.fontFamily,n.options.textStyle.fontWeight=n.options.textStyle.fontWeight||l.maps.themeStyle.fontWeight,n.options.textStyle.opacity=n.options.textStyle.opacity||l.maps.themeStyle.tooltipTextOpacity,t=f?{color:b.border.color||l.maps.themeStyle.tooltipBorderColor,width:b.border.width,opacity:b.border.opacity}:{color:C.border.color||l.maps.themeStyle.tooltipBorderColor,width:C.border.width,opacity:C.border.opacity},n.cancel?l.svgTooltip=new k.Tooltip({theme:l.maps.theme,enable:!0,header:"",data:C.data,template:C.template,content:n.content.toString()!==r.toString()?[n.content.toString()]:[r.toString()],shapes:[],location:C.location,palette:[void 0],areaBounds:l.maps.mapAreaRect,textStyle:C.textStyle,availableSize:l.maps.availableSize,fill:C.fill||l.maps.themeStyle.tooltipFillColor,enableShadow:!0,border:t}):l.svgTooltip=new k.Tooltip({theme:l.maps.theme,enable:!0,header:"",data:n.options.data,template:n.options.template,content:n.content.toString()!==r.toString()?[n.content.toString()]:[r.toString()],shapes:[],location:n.options.location,palette:[void 0],areaBounds:l.maps.mapAreaRect,textStyle:n.options.textStyle,availableSize:l.maps.availableSize,fill:n.fill||l.maps.themeStyle.tooltipFillColor,enableShadow:!0,border:t}),(l.maps.isVue||l.maps.isVue3)&&(l.svgTooltip.controlInstance=l.maps),l.svgTooltip.opacity=l.maps.themeStyle.tooltipFillOpacity||l.svgTooltip.opacity,l.svgTooltip.appendTo(o),l.maps.renderReactTemplates(),l.maps.isDevice&&(t=(-1<s.indexOf("_MarkerIndex_")||-1<s.indexOf("_BubbleIndex_")||-1<s.indexOf("_shapeIndex_")?C:b).duration,null!==(t=!Y.isNullOrUndefined(t)&&0<t?t:t<0?2e3:null))&&(clearTimeout(l.tooltipTimer),l.tooltipTimer=setTimeout(l.removeTooltip.bind(l),t)))}):this.clearTooltip(i.target),this.svgTooltip&&this.maps.trigger("tooltipRenderComplete",{cancel:!1,name:"tooltipRenderComplete",maps:this.maps,options:y,element:this.svgTooltip.element}),this.svgTooltip)?this.maps.trigger("tooltipRenderComplete",{cancel:!1,name:"tooltipRenderComplete",maps:this.maps,options:y,element:this.svgTooltip.element}):this.clearTooltip(i.target)}else{var I=i.target.closest("#"+this.maps.element.id+"_mapsTooltipparent_template");Y.isNullOrUndefined(I)&&this.clearTooltip(i.target)}},In.prototype.setTooltipContent=function(e,t){t=Y.extend({},t,null,!0);return this.maps.format&&!isNaN(Number(t[e.valuePath]))?t[e.valuePath]=dt(this.maps,Number(t[e.valuePath])):t=Object.keys(t).length?t:void 0,t},In.prototype.formatter=function(e,t){void 0===t&&(t={});for(var i=0,o=Object.keys(t);i<o.length;i++){var n=o[i];e="object"==typeof t[n]?we("",e,t,this.maps):e.split("${"+n+"}").join(Pe(t[n],this.maps))}return e},In.prototype.mouseUpHandler=function(e){Y.isNullOrUndefined(this.maps)||(this.renderTooltip(e),"MouseMove"===this.maps.tooltipDisplayMode&&(clearTimeout(this.tooltipTimer),this.tooltipTimer=setTimeout(this.removeTooltip.bind(this),2e3)))},In.prototype.removeTooltip=function(){var e=!1;return 0<document.getElementsByClassName("EJ2-maps-Tooltip").length&&(Y.remove(document.getElementsByClassName("EJ2-maps-Tooltip")[0]),e=!0),e},In.prototype.clearTooltip=function(e){e=e.closest("#"+this.maps.element.id+"_mapsTooltipparent_template");Y.isNullOrUndefined(e)&&this.removeTooltip()&&this.maps.clearTemplate()},In.prototype.addEventListener=function(){this.maps.isDestroyed||("DoubleClick"===this.maps.tooltipDisplayMode?this.maps.on("dblclick",this.renderTooltip,this):"Click"===this.maps.tooltipDisplayMode?this.maps.on(Y.Browser.touchEndEvent,this.mouseUpHandler,this):this.maps.on(Y.Browser.touchMoveEvent,this.renderTooltip,this),this.maps.on(Y.Browser.touchCancelEvent,this.removeTooltip,this),this.maps.element.addEventListener("contextmenu",this.removeTooltip))},In.prototype.removeEventListener=function(){this.maps.isDestroyed||("DoubleClick"===this.maps.tooltipDisplayMode?this.maps.off("dblclick",this.renderTooltip):"Click"===this.maps.tooltipDisplayMode?this.maps.off(Y.Browser.touchEndEvent,this.mouseUpHandler):this.maps.off(Y.Browser.touchMoveEvent,this.renderTooltip),this.maps.off(Y.Browser.touchCancelEvent,this.removeTooltip),this.maps.element.removeEventListener("contextmenu",this.removeTooltip))},In.prototype.getModuleName=function(){return"MapsTooltip"},In.prototype.destroy=function(){Y.isNullOrUndefined(this.svgTooltip)||(this.svgTooltip.destroy(),this.svgTooltip.controlInstance=null,I(this.maps.element.id+"_mapsTooltip")),this.svgTooltip=null,this.maps.refreshing||(this.maps=null)};var Tn=In;function In(e){this.maps=e,this.tooltipId=this.maps.element.id+"_mapsTooltip",this.addEventListener()}v.prototype.performZooming=function(e,t,i,o){var n,l,a,r,s,d,p,h=this,m=(void 0===o&&(o=!1),this.maps),c=(m.previousProjection=t<=1.5?void 0:m.projectionType,m.defaultState=!1,m.initialCheck=!1,m.markerZoomedState=m.isMarkerZoomCompleted=!1,m.zoomPersistence=m.enablePersistence,m.tileZoomLevel),u=m.zoomSettings.maxZoom,g=m.zoomSettings.minZoom,y=(t=t<=u?t:u,!0);switch(i.toLowerCase()){case"zoomin":y=t<=this.maps.zoomSettings.maxZoom;break;case"zoomout":y=t>=this.maps.zoomSettings.minZoom}y&&(n=m.previousScale=m.scale,l=m.tileTranslatePoint,m.isTileMap||!("ZoomIn"===i?g<=t&&t<=u:g<=t)&&!m.isReset?m.isTileMap&&g<=t&&t<=u&&(this.getTileTranslatePosition(c,t,e,i),m.tileZoomLevel=t,m.zoomSettings.zoomFactor=t,m.scale=Math.pow(2,t-1),"ZoomOut"===i&&m.zoomSettings.resetToInitial&&m.applyZoomReset&&t<=m.initialZoomLevel&&(m.initialCheck=!0,m.zoomPersistence=!1,m.tileTranslatePoint.x=m.initialTileTranslate.x,m.tileTranslatePoint.y=m.initialTileTranslate.y,t=m.tileZoomLevel=m.mapScaleValue=m.initialZoomLevel,m.scale=Math.pow(2,t-1)),m.mapScaleValue=isNaN(m.mapScaleValue)?1:m.mapScaleValue,m.translatePoint.y=(m.tileTranslatePoint.y-.01*m.mapScaleValue)/m.scale,m.translatePoint.x=(m.tileTranslatePoint.x-.01*m.mapScaleValue)/m.scale,this.triggerZoomEvent(l,c,i)?(m.translatePoint=m.tileTranslatePoint=new J(0,0),m.scale=m.previousScale,m.tileZoomLevel=c,m.zoomSettings.zoomFactor=m.previousScale):(document.querySelector(".GroupElement")&&(document.querySelector(".GroupElement").style.display="none"),document.getElementById(this.maps.element.id+"_LayerIndex_1")&&(document.getElementById(this.maps.element.id+"_LayerIndex_1").style.display="none"),this.markerLineAnimation(m),m.mapLayerPanel.generateTiles(t,m.tileTranslatePoint,i+"wheel",null,e),g=0===this.maps.layersCollection[0].animationDuration&&"Enable"===Y.animationMode?1e3:this.maps.layersCollection[0].animationDuration,setTimeout(function(){h.applyTransform(h.maps,o),document.getElementById(h.maps.element.id+"_LayerIndex_1")&&(document.getElementById(h.maps.element.id+"_LayerIndex_1").style.display="block")},g))):(u=m.mapAreaRect,g=m.baseMapRectBounds.min,r=m.baseMapRectBounds.max,a=Math.abs(g.x-r.x),r=Math.abs(g.y-r.y),d=s=void 0,t<1.2&&"Eckert5"!==m.projectionType?(0!==a&&0!==r&&a!==r||(a=u.width/2,r=u.height),t=parseFloat(Math.min(u.width/a,u.height/r).toFixed(2)),m.translatePoint=this.calculateInitalZoomTranslatePoint(t=1.05<t?1:t,a,r,u,g,m)):(s=(p=m.translatePoint).x-(u.width/n-u.width/t)/(u.width/e.x),d=p.y-(u.height/n-u.height/t)/(u.height/e.y),s=(p=Math.abs(m.baseMapRectBounds.max.y-m.baseMapRectBounds.min.y)*t)<m.mapAreaRect.height?u.x+(-g.x+(u.width/2-a/2)):s,d=p<m.mapAreaRect.height?u.y+(-g.y+(u.height/2-r/2)):d,m.translatePoint=new J(s,d)),m.scale=t,m.zoomTranslatePoint=m.translatePoint,this.triggerZoomEvent(l,c,i)?(m.translatePoint=m.previousPoint,m.scale=m.mapScaleValue=m.previousScale):this.applyTransform(m,o)),this.triggerZoomComplete(m,c,i)),this.maps.zoomNotApplied=!1,this.maps.isDevice&&this.removeToolbarOpacity(m.isTileMap?Math.round(m.tileZoomLevel):m.scale,m.element.id+"_Zooming_")},v.prototype.calculateInitalZoomTranslatePoint=function(e,t,i,o,n,l){l=0!==n.x&&"layers"===l.translateType?l.availableSize.width-o.width:0,t=o.x+(-n.x+(o.width/2-(t*=e)/2))-l,l=o.y+(-n.y+(o.height/2-(i*=e)/2));return new J(t,l)},v.prototype.triggerZoomEvent=function(e,t,i){var o=this.maps,n=(o.isTileMap&&(o.mapScaleValue=Y.isNullOrUndefined(o.mapScaleValue)?1:o.mapScaleValue,o.translatePoint.y=(o.tileTranslatePoint.y-.01*o.mapScaleValue)/o.scale,o.translatePoint.x=(o.tileTranslatePoint.x-.01*o.mapScaleValue)/o.scale),this.maps.getMinMaxLatitudeLongitude()),e=o.isTileMap?{cancel:!1,name:"zoom",type:i,maps:o,tileTranslatePoint:{previous:e,current:o.tileTranslatePoint},translatePoint:{previous:o.previousPoint,current:o.translatePoint},tileZoomLevel:{previous:t,current:o.tileZoomLevel},scale:{previous:o.previousScale,current:o.scale},minLatitude:n.minLatitude,maxLatitude:n.maxLatitude,minLongitude:n.minLongitude,maxLongitude:n.maxLongitude}:{cancel:!1,name:"zoom",type:i,maps:o,tileTranslatePoint:{},translatePoint:{previous:o.previousPoint,current:o.translatePoint},tileZoomLevel:{},scale:{previous:o.previousScale,current:o.scale},minLatitude:n.minLatitude,maxLatitude:n.maxLatitude,minLongitude:n.minLongitude,maxLongitude:n.maxLongitude};return o.trigger("zoom",e),e.cancel},v.prototype.getTileTranslatePosition=function(e,t,i,o){var n=this.maps,o="ZoomOut"!==o&&"Reset"===o&&1<t?0:10,l=n.availableSize,e=256*Math.pow(2,e),a=256*Math.pow(2,t),r=(i.x-n.tileTranslatePoint.x)/e*100,e=(i.y-n.tileTranslatePoint.y)/e*100;n.tileTranslatePoint.x=1===t?l.width/2-256:i.x-r*a/100,n.tileTranslatePoint.y=1===t?l.height/2-256+2*o:i.y-e*a/100},v.prototype.getTileTranslate=function(e,t){var i=this.maps,t="ZoomOut"!==t&&"Reset"===t&&1<e?0:10,o=i.availableSize,n=256*Math.pow(2,e),l=o.width/2-n/2,n=o.height/2-n/2,a=R(new T(this.pinchStartLatLong.longitude,this.pinchStartLatLong.latitude),e,{x:l,y:n},!0),a=(l-=a.x-o.width/2,n=n-(a.y-o.height/2)+t,Math.pow(2,e-1));i.tileTranslatePoint.x=l,i.tileTranslatePoint.y=n,i.translatePoint.x=(l-.01*this.tileZoomLevel)/a,i.translatePoint.y=(n-.01*this.tileZoomLevel)/a},v.prototype.performRectZooming=function(){this.isDragZoom=!0;var e,t,i,o,n=this.maps,l=n.availableSize,a=(n.previousProjection=n.projectionType,n.tileZoomLevel),r=n.tileTranslatePoint,s=this.zoomingRect,d=n.zoomSettings.maxZoom,p=n.zoomSettings.minZoom;0<s.height&&0<s.width&&(o=this.zoomingRect.x+this.zoomingRect.width/2,t=this.zoomingRect.y+this.zoomingRect.height/2,i=void 0,n.isTileMap?(i=a+Math.round(a+(l.width/s.width+l.height/s.height)/2),n.zoomSettings.zoomFactor=i=p<=i&&i<=d?i:d,this.getTileTranslatePosition(a,i,{x:o,y:t}),n.tileZoomLevel=i,n.translatePoint.x=(n.tileTranslatePoint.x-.5*Math.pow(2,i))/Math.pow(2,i),n.translatePoint.y=(n.tileTranslatePoint.y-.5*Math.pow(2,i))/Math.pow(2,i),n.scale=Math.pow(2,i),(e=this.triggerZoomEvent(r,a,""))?(n.translatePoint=n.tileTranslatePoint=new J(0,0),n.scale=n.tileZoomLevel=n.zoomSettings.zoomFactor=a):n.mapLayerPanel.generateTiles(i,n.tileTranslatePoint)):(i=(i=(p=n.previousScale=n.scale)+Math.round((l.width/s.width+l.height/s.height)/2))<this.maps.zoomSettings.maxZoom?i:this.maps.zoomSettings.maxZoom,s=n.previousPoint=n.translatePoint,i<=d&&(d=s.x-(l.width/p-l.width/i)/(l.width/o),o=s.y-(l.height/p-l.height/i)/(l.height/t),n.translatePoint=new J(d,o)),n.scale=i<this.maps.zoomSettings.maxZoom?i:this.maps.zoomSettings.maxZoom,(e=this.triggerZoomEvent(r,a,""))&&(n.translatePoint=n.previousPoint,n.scale=n.previousScale),n.zoomTranslatePoint=n.translatePoint),e||(n.mapScaleValue=i,this.applyTransform(n,!1,!0),this.maps.zoomNotApplied=!1,this.zoomingRect=null)),this.isZoomFinal=this.isZoomSelection&&Math.round(n.scale)===this.maps.zoomSettings.maxZoom,this.triggerZoomComplete(n,a,""),this.removeToolbarOpacity(n.scale,this.maps.element.id+"_Zooming_")},v.prototype.setInteraction=function(e){this.lastScale=1,this.interaction=e},v.prototype.updateInteraction=function(){2===this.fingers?this.setInteraction("zoom"):this.setInteraction(null)},v.prototype.tilePinchingProcess=function(e){this.tileZoomLevel=Math.round(e),this.getTileTranslate(this.tileZoomLevel),this.maps.mapLayerPanel.generateTiles(this.tileZoomLevel,this.maps.tileTranslatePoint,null,null,null,!0)},v.prototype.performPinchZooming=function(e){var t,i=this.maps,o=i.tileZoomLevel,n=this.pinchFactor,l=i.tileTranslatePoint;if(this.maps.mergeCluster(),i.isTileMap){this.isPinchZooming=!0;var a=this.touchCenter,r=this.getMousePosition(this.touchMoveList[0].pageX,this.touchMoveList[0].pageY),s=this.getMousePosition(this.touchMoveList[1].pageX,this.touchMoveList[1].pageY),r=Math.sqrt(Math.pow(r.x-s.x,2)+Math.pow(r.y-s.y,2)),s=r/this.startDistance;if(!Y.isNullOrUndefined(this.pinchDistance)){var d=Math.log2(s*(256*Math.pow(2,o))/256),d=Math.min(i.zoomSettings.maxZoom,Math.max(i.zoomSettings.minZoom,d)),s=this.pinchDistance>r?o*s:d,p=!1,h=(this.pinchDistance>r?(d=s%1,p=!0):this.pinchDistance<r&&(d=s%1+1),Math.ceil(s));if(h>i.zoomSettings.minZoom&&h<=i.zoomSettings.maxZoom){var m=document.getElementById(i.element.id),m=(m&&(m.style.overflow="hidden"),this.tileZoomLevel=h,a.x/(i.mapAreaRect.width-i.mapAreaRect.x)*100),h=a.y/(i.mapAreaRect.height-i.mapAreaRect.y)*100,c=document.getElementById(i.element.id+"_tile_parent"),u=document.getElementById(i.element.id+"_tiles"),g=(u||((u=document.createElement("div")).id=i.element.id+"_tiles",i.element.appendChild(u),this.copyStyles(c,u),u.style.zIndex="0"),u.style.visibility="hidden",c.style.transformOrigin=m+"% "+h+"%",c.style.transform="scale("+d+")",document.getElementById(i.element.id+"_Tile_SVG_Parent"));if(g.style.transformOrigin=m+"% "+h+"%",g.style.transform="scale("+d+")",(!this.isCancellation&&s%1<=.2&&.1<=s%1&&!p||s%1<=.9&&p)&&((m=document.getElementById(i.element.id+"_animates_tiles"))||((m=document.createElement("div")).id=i.element.id+"_animates_tiles",m.classList.add(this.tileZoomLevel.toString()),u.appendChild(m)),0===m.childElementCount)&&(this.pinchZoomScale=p?Math.floor(s):Math.ceil(s),this.tilePinchingProcess(this.pinchZoomScale),this.isCancellation=!0),(this.isCancellation&&.99<=s%1&&!p||s%1<=.1&&p)&&""!==c.style.transformOrigin&&this.isCancellation){c.style.transformOrigin="",c.style.transform="",g.style.transformOrigin="",g.style.transform="",this.pinchTileZoomScale=p?Math.floor(s):Math.ceil(s),this.getTileTranslate(this.pinchTileZoomScale);for(var y=document.getElementById(i.element.id+"_animated_tiles"),f=document.getElementById(i.element.id+"_animates_tiles");y.firstChild;)y.removeChild(y.firstChild);if(Array.from(f.children).forEach(function(e){y.appendChild(e.cloneNode(!0))}),document.getElementById(i.element.id+"_animated_tiles").className=this.pinchTileZoomScale.toFixed(0),f)for(;f.firstChild;)f.removeChild(f.firstChild);this.isCancellation=!1,i.mapScaleValue=this.pinchTileZoomScale,i.scale=Math.pow(2,this.pinchTileZoomScale-1),this.applyTransform(i)}}}this.pinchDistance=r}else{var h=i.mapAreaRect,d=(i.isMarkerZoomCompleted=!1,i.previousScale=i.scale,i.previousPoint=i.translatePoint,i.previousProjection=i.projectionType,It(this.touchStartList,this.touchMoveList)),a=Ft(Nt(this.touchMoveList,this.maps)),u=d/this.lastScale,m=(this.lastScale=d,this.pinchFactor*=u,this.pinchFactor=Math.min(this.maps.zoomSettings.maxZoom,Math.max(this.pinchFactor,this.maps.zoomSettings.minZoom)),i.baseMapRectBounds.min),c=i.baseMapRectBounds.max,g=Math.abs(m.y-c.y),p=Math.abs(m.x-c.x),s=i.translatePoint,r=void 0,d=void 0;n<1.2&&"Eckert5"!==i.projectionType?(0!==p&&0!==g&&p!==g||(p=h.width/2,g=h.height),n=parseFloat(Math.min(h.width/p,h.height/g).toFixed(2)),i.translatePoint=this.calculateInitalZoomTranslatePoint(n=1.05<n?1:n,p,g,h,m,i)):(u=Math.abs(i.baseMapRectBounds.max.y-i.baseMapRectBounds.min.y)*n,r=s.x-(h.width/i.scale-h.width/n)/(h.width/a.x),d=s.y-(h.height/i.scale-h.height/n)/(h.height/a.y),r=u<i.mapAreaRect.height?h.x+(-m.x+(h.width/2-p/2)):r,d=u<i.mapAreaRect.height?h.y+(-m.y+(h.height/2-g/2)):d,i.translatePoint=new J(r,d)),i.scale=n,(t=this.triggerZoomEvent(l,o,""))&&(i.translatePoint=i.previousPoint,i.scale=i.previousScale)}i.isTileMap||(i.mapScaleValue=n,t||this.applyTransform(i),this.triggerZoomComplete(i,o,"")),Y.Browser.isDevice&&this.removeToolbarOpacity(i.isTileMap?Math.round(i.tileZoomLevel):i.scale,i.element.id+"_Zooming_")},v.prototype.copyStyles=function(e,t){var i=window.getComputedStyle(e);Array.from(i).forEach(function(e){t.style[e]=i.getPropertyValue(e)})},v.prototype.getTouchCenterPoint=function(){for(var e=[],t=0;t<this.touchMoveList.length;t++)e.push(this.getMousePosition(this.touchMoveList[t].pageX,this.touchMoveList[t].pageY));return{x:(e[0].x+e[1].x)/2,y:(e[0].y+e[1].y)/2}},v.prototype.triggerZoomComplete=function(e,t,i){var o,n;e.zoomSettings.enable&&(n=void 0,e.isTileMap&&(e.mapScaleValue=Y.isNullOrUndefined(e.mapScaleValue)?1:e.mapScaleValue,e.translatePoint.y=(e.tileTranslatePoint.y-.01*e.mapScaleValue)/e.scale,e.translatePoint.x=(e.tileTranslatePoint.x-.01*e.mapScaleValue)/e.scale),o=this.maps.getMinMaxLatitudeLongitude(),n=e.isTileMap?{cancel:!1,name:"zoomComplete",type:i,maps:e,tileTranslatePoint:{previous:e.tileTranslatePoint,current:e.tileTranslatePoint},translatePoint:{previous:e.previousPoint,current:e.translatePoint},tileZoomLevel:{previous:t,current:e.tileZoomLevel},scale:{previous:e.previousScale,current:e.scale},minLatitude:o.minLatitude,maxLatitude:o.maxLatitude,minLongitude:o.minLongitude,maxLongitude:o.maxLongitude}:{cancel:!1,name:"zoomComplete",type:i,maps:e,tileTranslatePoint:{},translatePoint:{previous:e.previousPoint,current:e.translatePoint},tileZoomLevel:{},scale:{previous:e.previousScale,current:e.scale},minLatitude:o.minLatitude,maxLatitude:o.maxLatitude,minLongitude:o.minLongitude,maxLongitude:o.maxLongitude},this.maps.trigger("zoomComplete",n))},v.prototype.drawZoomRectangle=function(){var e=this.maps,t=this.mouseDownPoints,i=this.mouseMovePoints,o={width:1,color:this.maps.themeStyle.rectangleZoomBorderColor},n=Math.abs(i.x-t.x),l=Math.abs(i.y-t.y),a=i.x>t.x?t.x:t.x-n,i=i.y>t.y?t.y:t.y-l;a>e.mapAreaRect.x&&a<e.mapAreaRect.x+e.mapAreaRect.width&&i>e.mapAreaRect.y&&i<e.mapAreaRect.y+e.mapAreaRect.height&&(this.zoomingRect=new K(a,i,n,l),(t=e.renderer.createSvg({id:e.element.id+"_Selection_Rect_Zooming",width:e.availableSize.width,height:e.availableSize.height,style:"position: absolute;"})).style.position="absolute",a=new Q(e.element.id+"_ZoomRect",this.maps.themeStyle.rectangleZoomFillColor,o,this.maps.themeStyle.rectangleZoomFillOpacity,this.zoomingRect,0,0,"","3"),t.appendChild(e.renderer.drawRectangle(a)),Z(e.element.id+"_Secondary_Element").appendChild(t))},v.prototype.animateTransform=function(e,t,i,o,n){var l=0===this.currentLayer.animationDuration&&"Enable"===Y.animationMode?1e3:this.currentLayer.animationDuration;!t||0===l||this.maps.isTileMap?this.maps.isTileMap&&-1<e.id.indexOf("_Polygons_Group")||e.setAttribute("transform","scale("+n+") translate( "+i+" "+o+" )"):this.maps.isTileMap||zt(e,0,l,new T(i,o),n,this.maps.mapAreaRect,this.maps)},v.prototype.applyTransform=function(f,b,S,v){var x,C,O=this,_=(this.templateCount=0,f.scale),M=f.translatePoint.x,L=f.translatePoint.y,P=0;if(f.zoomShapeCollection=[],this.isPanningInProgress=v||!1,document.getElementById(f.element.id+"_mapsTooltip")&&I(f.element.id+"_mapsTooltip"),f.isTileMap){var e=document.getElementById(f.element.id+"_svg");if(e)for(var t=0;t<f.layers.length;t++){var i=e.querySelector("#"+f.element.id+"_LayerIndex_"+t);i&&e.removeChild(i)}}if(this.layerCollectionEle){for(var o=function(e){var u=w.layerCollectionEle.childNodes[e];if("g"===u.tagName){w.templateCount++,w.index=-1<u.id.indexOf("_LayerIndex_")&&parseFloat(u.id.split("_LayerIndex_")[1].split("_")[0]),w.currentLayer=f.layersCollection[w.index];for(var g=f.mapLayerPanel.calculateFactor(w.currentLayer),t=u.childElementCount,y=document.getElementById(f.element.id+"_LayerIndex_"+w.index+"_Markers_Template_Group"),i=0;i<t;i++)!function(e){var t,i,l,a,r=u.childNodes[e];if(-1<r.id.indexOf("_Markers_Group")||-1<r.id.indexOf("_bubble_Group")||-1<r.id.indexOf("_dataLableIndex_Group"))if(-1<r.id.indexOf("_Markers_Group"))w.isPanModeEnabled&&v||Y.isNullOrUndefined(r.childNodes[0])&&Y.isNullOrUndefined(y.childNodes[0])||(t=(Y.isNullOrUndefined(r.childNodes[0])?y:r).childNodes[0],w.markerTranslates(t,g,M,L,_,"Marker",u)),r=u.childNodes[e],Y.isNullOrUndefined(r)||-1===r.id.indexOf("Markers")||(Array.prototype.forEach.call(r.childNodes,function(e,t){O.markerTranslate(e,g,M,L,_,"Marker",S);var i=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10),o=parseInt(e.id.split("_MarkerIndex_")[1].split("_")[0],10);if(0<O.currentLayer.markerSettings[o].initialMarkerSelection.length)for(var n=O.currentLayer.markerSettings[o].dataSource[i],l=0;l<O.currentLayer.markerSettings[o].initialMarkerSelection.length;l++)O.currentLayer.markerSettings[o].initialMarkerSelection[l].latitude!==n.latitude&&O.currentLayer.markerSettings[o].initialMarkerSelection[l].longitude!==n.longitude||f.markerSelection(O.currentLayer.markerSettings[o].selectionSettings,f,r.children[t],O.currentLayer.markerSettings[o].dataSource[i]);!(0<O.currentLayer.animationDuration||"Enable"===Y.animationMode||(0<f.layersCollection[0].animationDuration||"Enable"===Y.animationMode)&&"SubLayer"===O.currentLayer.type)||O.isPanModeEnabled||f.isTileMap||(C=b?C:"visibility:hidden",Y.isNullOrUndefined(C))||(r.style.cssText=C)}),w.isPanModeEnabled&&0<f.markerModule.sameMarkerData.length?je(f.markerModule.sameMarkerData,f,r,!0):0<f.markerModule.sameMarkerData.length&&(f.markerModule.sameMarkerData=[],document.getElementById(f.element.id+"_mapsTooltip"))&&I(f.element.id+"_mapsTooltip"),document.getElementById(f.element.id+"_mapsTooltip")&&f.mapsTooltipModule.tooltipTargetID.indexOf("_MarkerIndex_")&&!w.isPanModeEnabled&&(t=f.mapsTooltipModule,e=r.querySelector("#"+t.tooltipTargetID),Y.isNullOrUndefined(e)||("hidden"===e.style.visibility?I(f.element.id+"_mapsTooltip"):(i=parseFloat(e.getAttribute("transform").split("(")[1].split(")")[0].split(" ")[1]),e=parseFloat(e.getAttribute("transform").split("(")[1].split(")")[0].split(" ")[2]),f.isTileMap&&(i+=+E(f.element.id+"_tile_parent").style.left.split("px")[0],e+=+E(f.element.id+"_tile_parent").style.top.split("px")[0]),t.svgTooltip.location.x=i,t.svgTooltip.location.y=e,t.svgTooltip.enableAnimation=!1))));else if(-1<r.id.indexOf("_bubble_Group"))for(var o=void 0,n=0;n<r.childElementCount;n++){o=r.childNodes[n],x=parseFloat(o.id.split("_LayerIndex_")[1].split("_")[0]);for(var s=parseFloat(o.id.split("_BubbleIndex_")[1].split("_")[0]),d=parseFloat(o.id.split("_BubbleIndex_")[1].split("_")[2]),p=0;p<f.bubbleModule.bubbleCollection.length;p++){var h=f.bubbleModule.bubbleCollection[p];if(h.LayerIndex===x&&h.BubbleIndex===s&&h.DataIndex===d){var m=h.center.x,h=h.center.y,m=(m+M)*_,h=(h+L)*_,c=0===w.currentLayer.animationDuration&&"Enable"===Y.animationMode?1e3:w.currentLayer.animationDuration;S&&0!==c?Zt(o,0,c,new T(m,h)):o.setAttribute("transform","translate( "+m+" "+h+" )");break}}}else-1<r.id.indexOf("_dataLableIndex_Group")&&!Y.isNullOrUndefined(f.layers[w.index])&&(f.zoomLabelPositions=[],f.zoomLabelPositions=f.dataLabelModule.dataLabelCollections,l=!f.isTileMap&&S,a=[],Array.prototype.forEach.call(r.childNodes,function(e,t){var i,o,n;-1<r.childNodes[t].id.indexOf("_LabelIndex_")&&(n=parseFloat(r.childNodes[t].id.split("_LabelIndex_")[1].split("_")[0]),o=r.childNodes[t].id,f.zoomShapeCollection.push(o),O.dataLabelTranslate(r.childNodes[t],g,M,L,_,"DataLabel",l,P,v,a),P++,o=f.layers[O.index].dataLabelSettings.border,0<t)&&1<o.width&&-1<r.childNodes[t-1].id.indexOf("_rectIndex_")&&!Y.isNullOrUndefined(f.zoomLabelPositions[n])&&(o=(f.zoomLabelPositions[n].location.x+M)*_,n=(f.zoomLabelPositions[n].location.y+L)*_,i=q(r.childNodes[t].textContent,f.layers[O.index].dataLabelSettings.textStyle),t=r.childNodes[t-1],o=o-i.width/2,n=n-i.height/2-5,t.setAttribute("x",o),t.setAttribute("y",n))}));else f.isTileMap&&-1<r.id.indexOf("_line_Group")?(r.remove(),0<u.children.length&&u.children[0]?u.insertBefore(f.navigationLineModule.renderNavigation(w.currentLayer,w.isPinchZooming?w.pinchZoomScale:f.tileZoomLevel,w.index),u.children[1]):u.appendChild(f.navigationLineModule.renderNavigation(w.currentLayer,w.isPinchZooming?w.pinchZoomScale:f.tileZoomLevel,w.index))):f.isTileMap&&-1<r.id.indexOf("_Polygons_Group")?0<w.currentLayer.polygonSettings.polygons.length&&(w.currentLayer.polygonSettings.polygons.map(function(e,t){e=e.points,e=D(f,O.isPinchZooming?O.pinchZoomScale:f.tileZoomLevel,O.currentLayer,e),t=document.getElementById(f.element.id+"_LayerIndex_"+O.index+"_PolygonIndex_"+t);Y.isNullOrUndefined(t)||t.setAttribute("d",e)}),document.getElementById(f.element.id+"_LayerIndex_"+w.index+"_Polygons_Group").style.visibility=""):-1===r.id.indexOf("Legend")&&(Pt(r,w.index,_,f),f.zoomTranslatePoint=f.translatePoint,w.animateTransform(r,S,M,L,_))}(i)}f.arrangeTemplate()},w=this,n=0;n<this.layerCollectionEle.childElementCount;n++)o(n);Y.isNullOrUndefined(this.currentLayer)||S&&0!==this.currentLayer.animationDuration&&!f.isTileMap||this.processTemplate(M,L,_,f)}},v.prototype.markerTranslates=function(e,c,u,g,y,f,b){var S=this,v=0,x=0,C=0,O=parseInt((e||b).id.split("_LayerIndex_")[1].split("_")[0],10),_=this.maps.renderer.createGroup({id:this.maps.element.id+"_Markers_Group",class:"GroupElement"}),e=(_.style.pointerEvents="auto",document.getElementById(_.id)&&I(_.id),this.maps.mapAreaRect),M=Y.createElement("div",{id:this.maps.element.id+"_LayerIndex_"+O+"_Markers_Template_Group",className:"template"}),L=(M.style.cssText="overflow: hidden; position: absolute;pointer-events: none;top:"+e.y+"px;left:"+e.x+"px;height:"+e.height+"px;width:"+e.width+"px;",document.getElementById(M.id)&&I(M.id),this.maps.layersCollection[O]),P=this.maps.markerModule.allowInnerClusterSetting(L);Array.prototype.forEach.call(L.markerSettings,function(p,h){x=C=0;var m=p.dataSource;Y.isNullOrUndefined(m)||Array.prototype.forEach.call(m,function(r,s){S.maps.markerNullCount=0<=h&&0===s?0:S.maps.markerNullCount;var d={template:p.template,data:r,maps:S.maps,marker:p,cancel:!1,name:Do,fill:p.fill,colorValuePath:p.colorValuePath,shapeValuePath:p.shapeValuePath,height:Y.isNullOrUndefined(p.heightValuePath)||Y.isNullOrUndefined(r[p.heightValuePath])?p.height:r[p.heightValuePath],width:Y.isNullOrUndefined(p.widthValuePath)||Y.isNullOrUndefined(r[p.widthValuePath])?p.width:r[p.widthValuePath],imageUrl:p.imageUrl,imageUrlValuePath:p.imageUrlValuePath,shape:p.shape,border:p.border};d=ke(d=Ne(d,r),r),S.maps.trigger("markerRendering",d,function(e){p.shapeValuePath!==d.shapeValuePath&&(d=Ne(d,r)),p.colorValuePath!==d.colorValuePath&&(d=ke(d,r));var t,i=Y.isNullOrUndefined(p.latitudeValuePath)?Y.isNullOrUndefined(r.latitude)?Y.isNullOrUndefined(r.Latitude)?null:r.Latitude:parseFloat(r.latitude):Number(U(r,p.latitudeValuePath)),o=Y.isNullOrUndefined(p.longitudeValuePath)?Y.isNullOrUndefined(r.longitude)?Y.isNullOrUndefined(r.Longitude)?null:r.Longitude:parseFloat(r.longitude):Number(U(r,p.longitudeValuePath)),n=p.offset,l=(d.cancel||!p.visible||Y.isNullOrUndefined(o)||Y.isNullOrUndefined(i)||(l=S.maps.element.id+"_LayerIndex_"+O+"_MarkerIndex_"+h+"_dataIndex_"+s,a=S.maps.isTileMap?R(new T(o,i),S.isPinchZooming?S.pinchZoomScale:S.maps.tileZoomLevel,S.maps.tileTranslatePoint,!0):A(i,o,c,L,S.maps),t={x:u,y:g},!d.template||isNaN(a.x)||isNaN(a.y)?d.template||isNaN(a.x)||isNaN(a.y)||(x++,De(d,p,m,s,a,t,l,n,y,S.maps,_)):(C++,Re(d,void 0,l,r,h,M,a,t,y,n,S.maps))),v+=isNaN(i)||isNaN(o)?1:0,C+=d.cancel?1:0,x+=d.cancel?1:0,S.maps.markerNullCount=Y.isNullOrUndefined(i)||Y.isNullOrUndefined(o)?S.maps.markerNullCount+1:S.maps.markerNullCount,m.length-S.maps.markerNullCount),a=!1;(p.clusterSettings.allowClustering||L.markerClusterSettings.allowClustering&&1<L.markerSettings.length?_.querySelectorAll("[id*='LayerIndex_"+O+"_MarkerIndex_"+h+"']:not([id*='_Group'])"):_.childNodes).length===l-C-v&&"Template"!==f&&(S.maps.isTileMap?(t=document.getElementById(S.maps.element.id+"_LayerIndex_"+O+"_Polygons_Group"),n=document.getElementById(S.maps.element.id+"_LayerIndex_"+O+"_Polygon_Group"),Y.isNullOrUndefined(t)?Y.isNullOrUndefined(n)?b.insertBefore(_,b.firstElementChild):n.insertAdjacentElement("afterend",_):t.insertAdjacentElement("afterend",_)):b.appendChild(_),L.markerSettings[h].clusterSettings.allowClustering||!P&&L.markerClusterSettings.allowClustering)&&(S.maps.svgObject.appendChild(_),S.maps.element.appendChild(S.maps.svgObject),a=Be(L,_,S.maps,O,h,_,b,!0,!0,null,P)),(p.clusterSettings.allowClustering||L.markerClusterSettings.allowClustering&&1<L.markerSettings.length?M.querySelectorAll("[id*='LayerIndex_"+O+"_MarkerIndex_"+h+"']:not([id*='_Group'])"):M.childNodes).length===l-x-v&&Z(S.maps.element.id+"_Secondary_Element")&&(Z(S.maps.element.id+"_Secondary_Element").appendChild(M),1<=y)&&(p.clusterSettings.allowClustering||!P&&L.markerClusterSettings.allowClustering)&&!a&&Be(L,M,S.maps,O,h,_,b,!1,!0,null,P)})})})},v.prototype.processTemplate=function(e,t,i,o){for(var n=0,l=0;l<this.templateCount;l++){var a=o.mapLayerPanel.calculateFactor(this.currentLayer),r=Z(o.element.id+"_LayerIndex_"+l+"_Markers_Template_Group"),s=Z(o.element.id+"_LayerIndex_"+l+"_Label_Template_Group"),d=Z(o.element.id+"_LayerIndex_"+l+"_Polygons_Group");if(!Y.isNullOrUndefined(r)&&0<r.childElementCount){r.style.visibility="visible";for(var p=0;p<r.childElementCount;p++)this.markerTranslate(r.childNodes[p],a,e,t,i,"Template")}if(!Y.isNullOrUndefined(s)&&0<s.childElementCount)for(p=0;p<s.childElementCount;p++)this.dataLabelTranslate(s.childNodes[p],a,e,t,i,"Template",!1,n),n++;if(!Y.isNullOrUndefined(d))for(p=0;p<d.childElementCount;p++){var h=o.layersCollection[l].polygonSettings.polygons[p].borderWidth;d.childNodes[p].childNodes[0].setAttribute("stroke-width",(h/i).toString())}}},v.prototype.dataLabelTranslate=function(e,t,i,o,n,l,a,r,s,d){void 0===a&&(a=!1);var p,h=this.maps.dataLabelModule.dataLabelCollections,m=this.maps.layers[this.index].dataLabelSettings.textStyle,c=parseFloat(e.id.split("_LayerIndex_")[1].split("_")[0]),u=parseFloat(e.id.split("_shapeIndex_")[1].split("_")[0]),g=(-1<e.id.indexOf("_LabelIndex_")&&(f=parseFloat(e.id.split("_LabelIndex_")[1].split("_")[0])),0===this.currentLayer.animationDuration&&"Enable"===Y.animationMode?1e3:this.currentLayer.animationDuration),h=h[r],y=r;if(h.layerIndex===c&&h.shapeIndex===u&&h.labelIndex===f){r=h.location.x,c=h.location.y;if("Template"===l){var u=0,f=0;f=this.maps.isTileMap?(u=(r+i)*n-(b=q(p=h.dataLabelText,m)).width/2,(c+o)*n-b.height):(l=Z(this.maps.element.id+"_Layer_Collections"),r=Math.abs(this.maps.baseMapRectBounds.min.x-r)*n,c=Math.abs(this.maps.baseMapRectBounds.min.y-c)*n,l=l.getBoundingClientRect(),S=e.parentElement.getBoundingClientRect(),u=r+(l.left-S.left),c+(l.top-S.top)),e.style.left=u+"px",e.style.top=f+"px"}else{if(r=(r+i)*n,c=(c+o)*n,p=h.dataLabelText,a&&0!==g||e.setAttribute("transform","translate( "+r+" "+c+" )"),(Y.isNullOrUndefined(s)||!s)&&("None"!==this.maps.layers[this.index].dataLabelSettings.smartLabelMode||"None"!==this.maps.layers[this.index].dataLabelSettings.intersectionAction)){var b,l=c-(b=re(p,m)).height/2,S=c+b.height/2,v={rightWidth:r+b.width/2,leftWidth:r-b.width/2,heightTop:l,heightBottom:S},x=("Hide"===this.maps.layers[this.index].dataLabelSettings.smartLabelMode&&(_=1<n?this.maps.dataLabelShape[y]*n>=b.width?p:"":this.maps.dataLabelShape[y]>=b.width?p:"",e.textContent=_),[]);if("Trim"===this.maps.layers[this.index].dataLabelSettings.smartLabelMode&&(_=it(1<n?this.maps.dataLabelShape[y]*n:this.maps.dataLabelShape[y],p,m,b.width,!0,x),e.textContent=_),"Hide"===this.maps.layers[this.index].dataLabelSettings.intersectionAction){for(var C=0;C<d.length;C++)if(!Y.isNullOrUndefined(d[C])){if(!(v.leftWidth>d[C].rightWidth||v.rightWidth<d[C].leftWidth||v.heightTop>d[C].heightBottom||v.heightBottom<d[C].heightTop)){e.textContent=_="";break}_=Y.isNullOrUndefined(_)?p:_,e.textContent=_}d.push(v)}if("Trim"===this.maps.layers[this.index].dataLabelSettings.intersectionAction){for(var O,_,M=0;M<d.length;M++)if(!Y.isNullOrUndefined(d[M]))if(v.rightWidth<d[M].leftWidth||v.leftWidth>d[M].rightWidth||v.heightBottom<d[M].heightTop||v.heightTop>d[M].heightBottom)O=Y.isNullOrUndefined(_)?p:_,1<n&&(w=0<x.length?x[0]:b.width,O=it(this.maps.dataLabelShape[y]*n,O,m,w,!0)),e.textContent=O;else{if(v.leftWidth>d[M].leftWidth){O=it(P=(L=d[M].rightWidth-v.leftWidth)-(v.rightWidth-v.leftWidth),_=Y.isNullOrUndefined(_)?p:_,m,w=0<x.length?x[0]:b.width,!0),e.textContent=O;break}if(v.leftWidth<d[M].leftWidth){var L=v.rightWidth-d[M].leftWidth,P=Math.abs(L-(v.rightWidth-v.leftWidth)),w=(_=Y.isNullOrUndefined(_)?p:_,0<x.length?x[0]:b.width);O=it(P,_,m,w,!0),e.textContent=O;break}}d.push(v),Y.isNullOrUndefined(O)&&(O=it(this.maps.dataLabelShape[y]*n,p,m,b.width,!0),e.textContent=O)}}(a||0<g)&&Zt(e,0,g,new T(r,c))}}},v.prototype.markerTranslate=function(e,t,i,o,n,l,a){void 0===a&&(a=!1);var r,s,d=parseInt(e.id.split("_LayerIndex_")[1].split("_")[0],10),p=parseInt(e.id.split("_MarkerIndex_")[1].split("_")[0],10),h=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10),d=this.maps.layersCollection[d],p=d.markerSettings[p];Y.isNullOrUndefined(p)||Y.isNullOrUndefined(p.dataSource)||Y.isNullOrUndefined(p.dataSource[h])||(s=Y.isNullOrUndefined(p.longitudeValuePath)?Y.isNullOrUndefined(p.dataSource[h].longitude)?Y.isNullOrUndefined(p.dataSource[h].Longitude)?0:parseFloat(p.dataSource[h].Longitude):parseFloat(p.dataSource[h].longitude):Number(U(p.dataSource[h],p.longitudeValuePath)),h=Y.isNullOrUndefined(p.latitudeValuePath)?Y.isNullOrUndefined(p.dataSource[h].latitude)?Y.isNullOrUndefined(p.dataSource[h].Latitude)?0:parseFloat(p.dataSource[h].Latitude):parseFloat(p.dataSource[h].latitude):Number(U(p.dataSource[h],p.latitudeValuePath)),r=0===this.currentLayer.animationDuration&&"Enable"===Y.animationMode?1e3:this.currentLayer.animationDuration,h=this.maps.isTileMap?R(new J(s,h),this.isPinchZooming?this.pinchZoomScale:this.maps.tileZoomLevel,this.maps.tileTranslatePoint,!0):A(h,s,t,d,this.maps),this.maps.isTileMap?"Template"===l?(e.style.left=h.x+p.offset.x+"px",e.style.top=h.y+p.offset.y+"px"):(h.x+=p.offset.x,h.y+=p.offset.y,e.setAttribute("transform","translate( "+h.x+" "+h.y+" )")):"Template"===l?0<r?(h.x=Math.abs(this.maps.baseMapRectBounds.min.x-h.x)*n,h.y=Math.abs(this.maps.baseMapRectBounds.min.y-h.y)*n,s=Z(this.maps.element.id+"_Layer_Collections").getBoundingClientRect(),t=e.parentElement.getBoundingClientRect(),e.style.left=h.x+(s.left-t.left)+p.offset.x+"px",e.style.top=h.y+(s.top-t.top)+p.offset.y+"px",e.style.transform="translate(-50%, -50%)"):(e.style.left=(h.x+i)*n+p.offset.x-this.maps.mapAreaRect.x+"px",e.style.top=(h.y+o)*n+p.offset.y-this.maps.mapAreaRect.y+"px"):(h.x=(h.x+i)*n+p.offset.x,h.y=(h.y+o)*n+p.offset.y,a&&0!==r?Zt(e,0,r,h):e.setAttribute("transform","translate( "+h.x+" "+h.y+" )")))},v.prototype.markerLineAnimation=function(e){if(e.isTileMap)for(var t=0;t<e.layersCollection.length;t++){var i=Z(this.maps.element.id+"_LayerIndex_"+t+"_Markers_Template_Group"),o=Z(this.maps.element.id+"_LayerIndex_"+t+"_line_Group"),n=Z(this.maps.element.id+"_LayerIndex_"+t+"_Polygons_Group");Y.isNullOrUndefined(i)||(i.style.visibility="hidden"),Y.isNullOrUndefined(o)||(o.style.visibility="hidden"),Y.isNullOrUndefined(n)||(n.style.visibility="hidden")}},v.prototype.panning=function(e,t,i,o){var n,l,a,r,s,d=this.maps,p=this.mouseDownPoints,h=this.mouseMovePoints,m=d.scale,c=(d.markerZoomedState=!1,d.zoomPersistence=d.enablePersistence,d.defaultState=!1,d.initialCheck=!1,d.translatePoint),u=d.tileTranslatePoint,p=(t=Y.isNullOrUndefined(t)?p.x-h.x:t,i=Y.isNullOrUndefined(i)?p.y-h.y:i,-1<o.type.indexOf("mouse")||-1<o.type.indexOf("key")?o.layerX:o.touches[0].pageX),h=-1<o.type.indexOf("mouse")||-1<o.type.indexOf("key")?o.layerY:o.touches[0].pageY;this.maps.mergeCluster(),d.isTileMap?1<this.maps.tileZoomLevel&&(n=d.tileTranslatePoint.x-t,l=d.tileTranslatePoint.y-i,d.tileTranslatePoint.x=n,d.tileTranslatePoint.y=l,(-10<d.tileTranslatePoint.y&&i<0||d.tileTranslatePoint.y<-256*(Math.pow(2,this.maps.tileZoomLevel)-2)&&0<i)&&(d.tileTranslatePoint.x=n+t,d.tileTranslatePoint.y=l+i),d.translatePoint.x=d.tileTranslatePoint.x/d.scale,d.translatePoint.y=d.tileTranslatePoint.y/d.scale,o=this.maps.getTileGeoLocation(p,h),r=this.maps.getMinMaxLatitudeLongitude(),s={cancel:!1,name:an,maps:d,tileTranslatePoint:{previous:u,current:d.tileTranslatePoint},translatePoint:{previous:c,current:d.translatePoint},scale:d.scale,tileZoomLevel:d.tileZoomLevel,latitude:o.latitude,longitude:o.longitude,minLatitude:r.minLatitude,maxLatitude:r.maxLatitude,minLongitude:r.minLongitude,maxLongitude:r.maxLongitude},d.trigger(an,s),d.mapLayerPanel.generateTiles(d.tileZoomLevel,d.tileTranslatePoint,"Pan"),this.applyTransform(d,!1,!1,!0),d.translatePoint.x=(d.tileTranslatePoint.x-t)/d.scale,d.translatePoint.y=(d.tileTranslatePoint.y-i)/d.scale):(u=st(d.margin.top),o=document.getElementById(d.element.id+"_Legend_Group"),o=Y.isNullOrUndefined(o)?0:o.getClientRects()[0].height,n=c.x-t/m,l=c.y-i/m,m=Z(d.element.id+"_Layer_Collections").getBoundingClientRect(),a=Z(d.element.id+"_svg").getBoundingClientRect(),t=t<0?m.left<=a.left+d.mapAreaRect.x:m.left+m.width+d.mapAreaRect.x>=a.width,i=i<0?m.top<=a.top+d.mapAreaRect.y:m.top+m.height+o+u>=a.top+a.height,m=this.maps.getGeoLocation(this.maps.layersCollection.length-1,p,h),r=this.maps.getMinMaxLatitudeLongitude(),s={cancel:!1,name:an,maps:d,tileTranslatePoint:{},translatePoint:{previous:c,current:new J(n,l)},scale:d.scale,tileZoomLevel:d.tileZoomLevel,latitude:m.latitude,longitude:m.longitude,minLatitude:r.minLatitude,maxLatitude:r.maxLatitude,minLongitude:r.minLongitude,maxLongitude:r.maxLongitude},d.trigger(an,s),s.cancel||(t&&i?(d.translatePoint=new J(n,l),this.applyTransform(d,!1,!1,!0)):t?(d.translatePoint=new J(n,d.translatePoint.y),this.applyTransform(d,!1,!1,!0)):i&&(d.translatePoint=new J(d.translatePoint.x,l),this.applyTransform(d,!1,!1,!0))),this.maps.zoomNotApplied=!1),d.zoomTranslatePoint=d.translatePoint,this.mouseDownPoints=this.mouseMovePoints,this.isSingleClick=!1},v.prototype.toolBarZooming=function(e,t){var i,o,n,l,a,r=this,s=this.maps,d=(s.initialCheck=s.isMarkerZoomCompleted=!1,s.defaultState="Reset"===t&&1===e&&!(s.zoomSettings.resetToInitial&&s.applyZoomReset)||"ZoomOut"===t&&1===e,s.tileZoomLevel),p=s.previousScale=s.scale,h=(s.markerZoomedState=!1,s.zoomPersistence=s.enablePersistence,s.mapScaleValue=e,s.zoomSettings.maxZoom),m=s.zoomSettings.minZoom,c=s.mapAreaRect,u=s.previousPoint=s.translatePoint,g=s.tileTranslatePoint;this.maps.mergeCluster(),s.previousProjection="Reset"===t?void 0:s.projectionType,e="ZoomOut"===t&&1===Math.round(e)?1:e,e=(e="Reset"===t?m:0===Math.round(e)?1:e)<m&&"ZoomIn"===t?m+1:e,!s.isTileMap&&("ZoomIn"===t?m<=e&&Math.round(e)<=h:m<=e||s.isReset)?(i=s.baseMapRectBounds.min,o=s.baseMapRectBounds.max,a=Math.abs(o.x-i.x),o=Math.abs(i.y-o.y),l=n=void 0,e<1.2&&"Eckert5"!==s.projectionType?(0!==o&&0!==a&&o!==a||(a=c.width/2,o=c.height),e=parseFloat(Math.min(c.width/a,c.height/o).toFixed(2)),s.translatePoint=this.calculateInitalZoomTranslatePoint(e=1.05<e?1:e,a,o,c,i,s)):(n=u.x-(c.width/p-c.width/e)/2,l=u.y-(c.height/p-c.height/e)/2,n=(u=Math.abs(s.baseMapRectBounds.max.y-s.baseMapRectBounds.min.y)*e)<s.mapAreaRect.height?c.x+(-i.x+(c.width/2-a/2)):n,l=u<s.mapAreaRect.height?c.y+(-i.y+(c.height/2-o/2)):l,s.translatePoint=new J(n,l)),s.zoomTranslatePoint=s.translatePoint,s.scale=e,this.triggerZoomEvent(g,d,t)?(s.translatePoint=s.zoomTranslatePoint=s.previousPoint,s.scale=s.previousScale):this.applyTransform(s,!1,!0)):s.isTileMap&&(m<=e&&e<=h||s.isReset)&&(p=d<m&&!s.isReset?m:e,s.scale=Math.pow(2,p-1),s.tileZoomLevel=p,s.previousScale===s.scale&&!s.isReset||(s.zoomSettings.zoomFactor=e,a={x:s.availableSize.width/2,y:s.availableSize.height/2},this.getTileTranslatePosition(d,p,a,t),(s.zoomSettings.resetToInitial&&s.applyZoomReset&&"Reset"===t||"ZoomOut"===t&&s.zoomSettings.resetToInitial&&s.applyZoomReset&&p<=s.initialZoomLevel)&&(s.initialCheck=!0,s.zoomPersistence=!1,s.tileTranslatePoint.x=s.initialTileTranslate.x,s.tileTranslatePoint.y=s.initialTileTranslate.y,p=s.tileZoomLevel=s.mapScaleValue=s.initialZoomLevel),this.triggerZoomEvent(g,d,t)?(s.translatePoint=s.tileTranslatePoint=new J(0,0),s.scale=s.previousScale,s.tileZoomLevel=d,s.zoomSettings.zoomFactor=s.previousScale):(s.translatePoint.y=(s.tileTranslatePoint.y-.01*s.mapScaleValue)/s.scale,s.translatePoint.x=(s.tileTranslatePoint.x-.01*s.mapScaleValue)/s.scale,document.getElementById(this.maps.element.id+"_LayerIndex_1")&&(document.getElementById(this.maps.element.id+"_LayerIndex_1").style.display="none"),document.querySelector(".GroupElement")&&(document.querySelector(".GroupElement").style.display="none"),this.markerLineAnimation(s),s.mapLayerPanel.generateTiles(p,s.tileTranslatePoint,t),u=0===this.maps.layersCollection[0].animationDuration&&"Enable"===Y.animationMode?1e3:this.maps.layersCollection[0].animationDuration,setTimeout(function(){r.applyTransform(r.maps,!1,!0),document.getElementById(r.maps.element.id+"_LayerIndex_1")&&(document.getElementById(r.maps.element.id+"_LayerIndex_1").style.display="block"),r.maps.isAddLayer=!1},u))),this.maps.zoomNotApplied=!1),this.triggerZoomComplete(s,d,t)},v.prototype.createZoomingToolbars=function(){for(var e=this.maps,t=(this.toolBarGroup=e.renderer.createGroup({id:e.element.id+"_Zooming_KitCollection",opacity:"fluentdark"===e.theme.toLowerCase()?.6:.3}),15),i=15,o=e.zoomSettings.toolbarSettings,n=e.zoomSettings.toolbarSettings.buttonSettings,l=(this.maps.toolbarProperties={toolBarOrientation:o.orientation,highlightColor:n.highlightColor,selectionColor:n.selectionColor,horizontalAlignment:o.horizontalAlignment,verticalAlignment:o.verticalAlignment,color:n.color,shapeOpacity:n.opacity,borderOpacity:n.borderOpacity},n.radius||e.themeStyle.zoomButtonRadius),a=l/4,r=l/4,s=l/2,d=n.padding,p=this.maps.toolbarProperties.toolBarOrientation,h=e.zoomSettings.toolbarSettings.buttonSettings.toolbarItems.map(function(e){return e}),t=l/4+n.borderWidth/2+d,i=l/4+n.borderWidth/2+d,m=('<filter id="chart_shadow" height="130%"><feGaussianBlur in="SourceAlpha" stdDeviation="5"/>'+'<feOffset dx="-3" dy="4" result="offsetblur"/><feComponentTransfer><feFuncA type="linear" slope="1"/>'+'</feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>',h.length),c="Horizontal"===p?m*l+m*d+d+m*n.borderWidth:l+n.borderWidth+2*d,p="Horizontal"===p?l+n.borderWidth+2*d:m*l+m*d+d+m*n.borderWidth,m=e.renderer.createDefs(),m=(m.innerHTML='<filter id="chart_shadow" height="130%"><feGaussianBlur in="SourceAlpha" stdDeviation="5"/><feOffset dx="-3" dy="4" result="offsetblur"/><feComponentTransfer><feFuncA type="linear" slope="1"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>',this.toolBarGroup.appendChild(m),e.renderer.drawRectangle(new Q(e.element.id+"_Zooming_Rect",o.backgroundColor,{color:o.borderColor,width:o.borderWidth,opacity:o.borderOpacity},o.borderOpacity,new K(o.borderWidth/2,o.borderWidth/2,c-o.borderWidth,p-o.borderWidth),0,0))),u=(this.toolBarGroup.appendChild(m),(l-n.borderWidth/2)/30),g=0;g<h.length;g++){0!==g&&(t="Horizontal"===e.toolbarProperties.toolBarOrientation?t+(l+d)+n.borderWidth:t,i="Horizontal"===e.toolbarProperties.toolBarOrientation?i:i+(l+d)+n.borderWidth);var y=h[g],f=Y.isNullOrUndefined(this.maps.toolbarProperties.color)?this.maps.themeStyle.zoomFillColor:this.maps.toolbarProperties.color,b=n.borderColor||this.maps.themeStyle.zoomBorderColor||this.maps.themeStyle.zoomFillColor,S=(this.currentToolbarEle=e.renderer.createGroup({id:e.element.id+"_Zooming_ToolBar_"+y+"_Group",transform:"translate( "+t+" "+i+" ) "}),this.currentToolbarEle.setAttribute("class","e-maps-toolbar"),this.currentToolbarEle.appendChild(e.renderer.drawCircle(new ce(e.element.id+"_Zooming_ToolBar_"+y+"_Rect",n.fill,{color:b,width:n.borderWidth,opacity:n.borderOpacity},n.opacity,a,r,s,""))),""),v=n.fill;switch(this.selectionColor=this.maps.toolbarProperties.selectionColor||this.maps.themeStyle.zoomSelectionColor,y.toLowerCase()){case"zoom":var x=void 0,C=void 0,C=(S=(S="M0.001,14.629L1.372,16l4.571-4.571v-0.685l0.228-0.274c1.051,0.868,2.423,1.417,3.885,1.417c3.291,0,")+"5.943-2.651,5.943-5.943S13.395,0,10.103,0S4.16,2.651,4.16,5.943c0,1.508,0.503,2.834,1.417,3.885l-0.274,0.228H4.571"+"L0.001,14.629L0.001,14.629z M5.943,5.943c0-2.285,1.828-4.114,4.114-4.114s4.114,1.828,4.114,",this.currentToolbarEle.setAttribute("class",this.maps.zoomSettings.enableSelectionZooming?"e-maps-toolbar":""),(!this.maps.zoomSettings.enablePanning||this.maps.zoomSettings.enableSelectionZooming)&&(!this.maps.zoomSettings.enablePanning||!this.maps.zoomSettings.enableSelectionZooming)&&(this.maps.zoomSettings.enablePanning||this.maps.zoomSettings.enableSelectionZooming)?!this.maps.zoomSettings.enablePanning&&this.maps.zoomSettings.enableSelectionZooming?(x=this.maps.themeStyle.zoomFillColor,f):(x=this.selectionColor,this.selectionColor):(x=v,f)),x=e.renderer.drawPath(new B(e.element.id+"_Zooming_ToolBar_"+y,x,1,C,1,1,null,S+"4.114s-1.828,4.114-4.114,4.114S5.943,8.229,5.943,5.943z"));x.setAttribute("transform","scale( "+u+","+u+" )"),this.currentToolbarEle.appendChild(x),this.zoomElements=this.currentToolbarEle,this.wireEvents(this.currentToolbarEle,this.performToolBarAction);break;case"zoomin":C=e.renderer.drawPath(new B(e.element.id+"_Zooming_ToolBar_"+y+"_Path",v,3,f,1,1,null,S="M 8, 0 L 8, 16 M 0, 8 L 16, 8"));C.setAttribute("transform","scale( "+u+","+u+" )"),this.currentToolbarEle.appendChild(C),this.wireEvents(this.currentToolbarEle,this.performToolBarAction);break;case"zoomout":x=e.renderer.drawPath(new B(e.element.id+"_Zooming_ToolBar_"+y,v,3,f,1,1,null,S="M 0, 8 L 16, 8"));x.setAttribute("transform","scale( "+u+","+u+" )"),this.currentToolbarEle.appendChild(x),this.wireEvents(this.currentToolbarEle,this.performToolBarAction);break;case"pan":var O=void 0,_=(S="M5,3h2.3L7.275,5.875h1.4L8.65,3H11L8,0L5,3z M3,11V8.7l2.875,0.025v-1.4L3,7.35V5L0,8L3,",S+="11z M11,13H8.7l0.025-2.875h-1.4L7.35,13H5l3,3L11,13z M13,5v2.3l-2.875-0.025v1.4L13,8.65V11l3-3L13,5z",this.currentToolbarEle.setAttribute("class",this.maps.zoomSettings.enablePanning?"e-maps-toolbar":""),this.maps.zoomSettings.enablePanning&&this.maps.zoomModule.isDragZoom?O=this.selectionColor||this.maps.themeStyle.zoomFillColor:this.maps.zoomSettings.enablePanning?O=v||this.maps.themeStyle.zoomFillColor:(O=this.selectionColor||this.maps.themeStyle.zoomFillColor,this.currentToolbarEle.setAttribute("class","")),e.renderer.drawPath(new B(e.element.id+"_Zooming_ToolBar_"+y,O,1,f,1,1,null,S)));_.setAttribute("transform","scale( "+u+","+u+" )"),this.currentToolbarEle.appendChild(_),this.panColor=O,this.panElements=this.currentToolbarEle,this.wireEvents(this.currentToolbarEle,this.performToolBarAction);break;case"reset":S=(S="M12.364,8h-2.182l2.909,3.25L16,8h-2.182c0-3.575-2.618-6.5-5.818-6.5c-1.128,0-2.218,0.366-3.091,")+"1.016l1.055,1.178C6.581,3.328,7.272,3.125,8,3.125C10.4,3.125,12.363,5.319,12.364,8L12.364,8z M11.091,"+"13.484l-1.055-1.178C9.419,12.672,8.728,12.875,8,12.875c-2.4,0-4.364-2.194-4.364-4.875h2.182L2.909,4.75L0,8h2.182c0,";_=e.renderer.drawPath(new B(e.element.id+"_Zooming_ToolBar_"+y,v,null,f,1,1,null,S+"3.575,2.618,6.5,5.818,6.5C9.128,14.5,10.219,14.134,11.091,13.484L11.091,13.484z"));_.setAttribute("transform","scale( "+u+","+u+" )"),this.currentToolbarEle.appendChild(_),this.wireEvents(this.currentToolbarEle,this.performToolBarAction)}this.toolBarGroup.appendChild(this.currentToolbarEle)}},v.prototype.performToolBarAction=function(e){var t=e.target,i=(e.stopImmediatePropagation(),"touch"===e.pointerType||"2"===e.pointerType||-1<e.type.indexOf("touch")),t=t.id.split("_Zooming_ToolBar_")[1].split("_")[0],o=!0;switch(t.toLowerCase()){case"zoomin":o=(this.maps.isTileMap?this.maps.tileZoomLevel:this.maps.scale)+1<=this.maps.zoomSettings.maxZoom;break;case"zoomout":var n=this.maps.isTileMap?this.maps.tileZoomLevel:this.maps.scale,o="Miller"===this.maps.projectionType||"Winkel3"===this.maps.projectionType||"AitOff"===this.maps.projectionType?Math.round(n)-1>=this.maps.zoomSettings.minZoom:n-1>=this.maps.zoomSettings.minZoom;break;case"reset":o=Math.round(this.maps.isTileMap?this.maps.tileZoomLevel:this.maps.scale)!==this.maps.zoomSettings.minZoom}i&&o?(this.handled=!0,this.performZoomingByToolBar(t)):"mousedown"!==e.type&&"pointerdown"!==e.type||this.handled||!o?this.handled=!1:(this.handled=!1,this.performZoomingByToolBar(t))},v.prototype.performZoomingByToolBar=function(e){var t=this.maps,i=(t.isReset=!1,0),o=this.fillColor||this.maps.themeStyle.zoomFillColor;switch(e.toLowerCase()){case"zoom":this.panColor=o,this.zoomColor=this.maps.zoomSettings.enableSelectionZooming?this.selectionColor:o,this.applySelection(this.zoomElements,this.zoomColor),this.applySelection(this.panElements,this.panColor),this.isPan=!1,this.isZoomSelection=this.maps.zoomSettings.enableSelectionZooming;break;case"pan":this.panColor=this.maps.zoomSettings.enablePanning?this.selectionColor:o,this.zoomColor=o,this.maps.zoomSettings.enablePanning?this.applySelection(this.zoomElements,this.fillColor||o):this.applySelection(this.zoomElements,this.selectionColor),this.applySelection(this.panElements,this.panColor),this.isPan=this.maps.zoomSettings.enablePanning,this.isZoomSelection=!1;break;case"zoomin":t.staticMapZoom=t.tileZoomLevel,0<t.staticMapZoom&&t.staticMapZoom<t.zoomSettings.maxZoom&&(t.staticMapZoom+=1),t.isTileMap&&t.tileZoomLevel>=t.zoomSettings.minZoom&&t.tileZoomLevel<t.zoomSettings.maxZoom?this.toolBarZooming(t.tileZoomLevel+1,"ZoomIn"):t.isTileMap||this.toolBarZooming(t.scale+1,"ZoomIn"),i=this.maps.isTileMap?Math.round(this.maps.tileZoomLevel):Math.round(this.maps.mapScaleValue),this.isZoomSelection||(i===t.zoomSettings.maxZoom||1<i||1===i&&this.maps.isTileMap?(this.applySelection(this.zoomElements,o),this.applySelection(this.panElements,t.zoomSettings.enablePanning?this.selectionColor:o)):1!==i||this.maps.isTileMap||(this.applySelection(this.zoomElements,o),this.applySelection(this.panElements,o)));break;case"zoomout":t.staticMapZoom=t.tileZoomLevel,t.markerCenterLatitude=null,t.markerCenterLongitude=null,this.toolBarZooming((t.isTileMap?t.tileZoomLevel:t.scale)-1,"ZoomOut"),i=this.maps.isTileMap?Math.round(this.maps.tileZoomLevel):Math.round(this.maps.mapScaleValue),!this.isPan&&this.isZoomSelection?(this.panColor=o,this.zoomColor=this.selectionColor,this.applySelection(this.zoomElements,this.selectionColor),this.applySelection(this.panElements,this.panColor)):i<=1&&!t.isTileMap?this.applySelection(this.panElements,o):this.applySelection(this.panElements,t.zoomSettings.enablePanning?this.selectionColor:o);break;case"reset":t.staticMapZoom=t.zoomSettings.enable?t.zoomSettings.zoomFactor:0,t.markerCenterLatitude=null,t.markerCenterLongitude=null,this.isZoomSelection=!1,this.isPan=t.zoomSettings.enablePanning,this.toolBarZooming(t.zoomSettings.minZoom,"Reset"),this.isPan&&!this.isZoomSelection||!this.isPan&&this.isZoomSelection?this.maps.zoomSettings.enablePanning?(this.applySelection(this.zoomElements,o),this.applySelection(this.panElements,this.selectionColor)):(this.applySelection(this.zoomElements,this.selectionColor),this.applySelection(this.panElements,o)):this.isPan||this.isZoomSelection||(this.applySelection(this.zoomElements,o),this.applySelection(this.panElements,o))}this.panningStyle(e.toLowerCase())},v.prototype.panningStyle=function(e){var t=Z(this.maps.element.id+"_svg");"pan"===e||this.isPanModeEnabled&&"reset"!==e?t.setAttribute("class","e-maps-panning"):t.setAttribute("class","")},v.prototype.applySelection=function(e,t){if(e)for(var i,o=0;o<e.childElementCount;o++)"circle"!==(i=e.childNodes[o]).tagName&&(i.setAttribute("fill",-1<e.id.indexOf("Pan")?t:"transparent"),i.setAttribute("stroke",t))},v.prototype.showTooltip=function(e){var t=e.target.id.split("_Zooming_ToolBar_")[1].split("_")[0],i=this.maps.zoomSettings.toolbarSettings.tooltipSettings,i={visible:i.visible,fill:i.fill,borderOpacity:i.borderOpacity,borderWidth:i.borderWidth,borderColor:i.borderColor,fontColor:i.fontColor,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,fontSize:i.fontSize||"10px",fontOpacity:i.fontOpacity};i.fontFamily=this.maps.themeStyle.fontFamily,this.isTouch||(Ct("EJ2_Map_Toolbar_Tip",this.maps.getLocalizedLabel(t),e.pageY+10,e.pageX+10,i),this.maps.isDevice&&(clearTimeout(this.clearTimeout),this.clearTimeout=setTimeout(this.removeTooltip.bind(this),2e3)))},v.prototype.removeTooltip=function(){Z("EJ2_Map_Toolbar_Tip")&&Y.remove(Z("EJ2_Map_Toolbar_Tip"))},v.prototype.alignToolBar=function(){var e=this.maps,t=Y.createElement("div",{id:e.element.id+"_ToolBar"}),i=(t.style.cssText="position:absolute;z-index:2",e.renderer.createSvg({id:e.element.id+"_Zooming_ToolBar",width:10,height:10})),o=(i.appendChild(this.toolBarGroup),t.appendChild(i),Z(e.element.id+"_Secondary_Element")&&Z(e.element.id+"_Secondary_Element").appendChild(t),this.toolBarGroup.getBoundingClientRect()),n=(i.setAttribute("height",(o.height+e.zoomSettings.toolbarSettings.borderWidth).toString()),i.setAttribute("width",(o.width+e.zoomSettings.toolbarSettings.borderWidth).toString()),Y.isNullOrUndefined(e.totalRect)?e.mapAreaRect:e.totalRect),l=0,a=0;switch(e.toolbarProperties.verticalAlignment){case"Near":a=n.y;break;case"Center":a=n.height/2-o.height/2;break;case"Far":a=n.height-o.height-10}switch(e.toolbarProperties.horizontalAlignment){case"Near":l=n.x;break;case"Center":l=n.width/2-o.width/2;break;case"Far":l=Y.isNullOrUndefined(e.legendModule)||"Left"!==e.legendSettings.position?n.width-o.width-10:n.width+n.x-o.width-10}t.style.left=l+"px",t.style.top=a+"px";var i=this.maps.toolbarProperties.highlightColor||this.maps.themeStyle.zoomSelectionColor,i=" .e-maps-toolbar:hover > circle { stroke:"+i+"; } .e-maps-toolbar:hover > path { fill: "+i+" ;  stroke: "+i+"; }.e-maps-toolbar:hover { cursor: pointer; } .e-maps-cursor-disable:hover { cursor: not-allowed; } .e-maps-panning:hover { cursor: pointer; } .e-maps-popup-close { display: block; opacity: 0; }",r=document.createElement("style");r.appendChild(document.createTextNode(i)),t.appendChild(r)},v.prototype.removeToolbarOpacity=function(e,t){var i;!Y.isNullOrUndefined(this.maps)&&this.maps.zoomModule&&this.maps.zoomSettings.enable&&(Z(this.maps.element.id+"_Zooming_KitCollection")&&-1<t.indexOf(this.maps.element.id+"_Zooming_")?(this.maps.isDevice?(Z(this.maps.element.id+"_Zooming_KitCollection").setAttribute("opacity","1"),this.removeToolbarClass("","","","","")):this.removeToolbarClass(this.maps.zoomSettings.enableSelectionZooming?"e-maps-toolbar":"","e-maps-toolbar","e-maps-toolbar",this.maps.zoomSettings.enablePanning?"e-maps-toolbar":"","e-maps-toolbar"),t=this.maps.toolbarProperties.shapeOpacity,i=this.maps.toolbarProperties.borderOpacity,this.maps.isTileMap&&(e<=1.1||this.maps.zoomSettings.minZoom===e)?(this.maps.isDevice||this.removeToolbarClass(this.maps.zoomSettings.enableSelectionZooming?"e-maps-toolbar":"","e-maps-toolbar","",this.maps.zoomSettings.enablePanning?"e-maps-toolbar":"",""),this.maps.zoomSettings.enablePanning&&this.removePanColor(this.maps.toolbarProperties.selectionColor||this.maps.themeStyle.zoomSelectionColor),this.isZoomSelection&&this.maps.zoomSettings.enableSelectionZooming&&!this.maps.isReset&&(this.removeZoomColor(this.maps.toolbarProperties.selectionColor||this.maps.themeStyle.zoomSelectionColor),this.removePanColor(this.maps.toolbarProperties.color||this.maps.themeStyle.zoomFillColor)),this.removeZoomOpacity(this.maps.zoomSettings.enableSelectionZooming?t:.3,this.maps.zoomSettings.enableSelectionZooming?i:.3,t,i,.3,.3,this.maps.zoomSettings.enablePanning?t:.3,this.maps.zoomSettings.enablePanning?i:.3,.3,.3)):e<=1.1||this.maps.zoomSettings.minZoom===e?(this.maps.isDevice||this.removeToolbarClass(this.maps.zoomSettings.enableSelectionZooming?"e-maps-toolbar":"","e-maps-toolbar","","",""),!this.isZoomSelection&&this.maps.zoomSettings.enablePanning&&this.removePanColor(this.maps.toolbarProperties.color||this.maps.themeStyle.zoomFillColor),this.isZoomSelection&&this.maps.zoomSettings.enableSelectionZooming&&!this.maps.isReset&&(this.removeZoomColor(this.maps.toolbarProperties.selectionColor||this.maps.themeStyle.zoomSelectionColor),this.removePanColor(this.maps.toolbarProperties.color||this.maps.themeStyle.zoomFillColor)),this.removeZoomOpacity(this.maps.zoomSettings.enableSelectionZooming?t:.3,this.maps.zoomSettings.enableSelectionZooming?i:.3,t,i,.3,.3,.3,.3,.3,.3)):e<this.maps.zoomSettings.maxZoom?(this.maps.isDevice||this.removeToolbarClass(this.maps.zoomSettings.enableSelectionZooming?"e-maps-toolbar":"","e-maps-toolbar","e-maps-toolbar",this.maps.zoomSettings.enablePanning?"e-maps-toolbar":"","e-maps-toolbar"),this.maps.zoomModule.isZoomFinal?this.maps.zoomModule.isZoomFinal=!1:this.removeZoomOpacity(this.maps.zoomSettings.enableSelectionZooming?t:.3,this.maps.zoomSettings.enableSelectionZooming?i:.3,t,i,t,i,this.maps.zoomSettings.enablePanning?t:.3,this.maps.zoomSettings.enablePanning?i:.3,t,i),this.isZoomSelection&&this.maps.zoomSettings.enableSelectionZooming?(this.removeZoomColor(this.maps.toolbarProperties.selectionColor||this.maps.themeStyle.zoomSelectionColor),this.maps.zoomModule.isPan&&this.maps.zoomSettings.enablePanning&&this.removePanColor(this.maps.toolbarProperties.color||this.maps.themeStyle.zoomFillColor)):!this.isZoomSelection&&this.maps.zoomSettings.enablePanning&&(this.removePanColor(this.maps.toolbarProperties.selectionColor||this.maps.themeStyle.zoomSelectionColor),this.maps.zoomSettings.enableSelectionZooming)&&this.removeZoomColor(this.maps.toolbarProperties.color||this.maps.themeStyle.zoomFillColor)):(this.maps.isDevice||this.removeToolbarClass("","","e-maps-toolbar",this.maps.zoomSettings.enablePanning?"e-maps-toolbar":"","e-maps-toolbar"),this.removeZoomOpacity(.3,.3,.3,.3,t,i,this.maps.zoomSettings.enablePanning?t:.3,this.maps.zoomSettings.enablePanning?i:.3,t,i),this.maps.zoomSettings.enableSelectionZooming&&this.removeZoomColor(this.maps.toolbarProperties.color||this.maps.themeStyle.zoomFillColor),!this.isZoomSelection&&this.maps.zoomSettings.enablePanning&&this.removePanColor(this.maps.toolbarProperties.selectionColor||this.maps.themeStyle.zoomSelectionColor))):this.maps.isDevice||(this.removePanColor(this.maps.toolbarProperties.color||this.maps.themeStyle.zoomFillColor),this.removeZoomColor(this.maps.toolbarProperties.color||this.maps.themeStyle.zoomFillColor),this.removeZoomOpacity(1,1,1,1,1,1,1,1,1,1)))},v.prototype.setOpacity=function(e,t,i,o){Z(this.maps.element.id+e)&&(Z(this.maps.element.id+e).setAttribute("stroke-opacity",i.toString()),Z(this.maps.element.id+e).setAttribute("fill-opacity",i.toString()),Z(this.maps.element.id+t).setAttribute("stroke-opacity",o.toString()),Z(this.maps.element.id+t).setAttribute("fill-opacity",o.toString()))},v.prototype.removeZoomOpacity=function(e,t,i,o,n,l,a,r,s,d){this.setOpacity("_Zooming_ToolBar_Zoom_Rect","_Zooming_ToolBar_Zoom",t,e),this.setOpacity("_Zooming_ToolBar_ZoomIn_Rect","_Zooming_ToolBar_ZoomIn_Path",o,i),this.setOpacity("_Zooming_ToolBar_ZoomOut_Rect","_Zooming_ToolBar_ZoomOut",l,n),this.setOpacity("_Zooming_ToolBar_Pan_Rect","_Zooming_ToolBar_Pan",r,a),this.setOpacity("_Zooming_ToolBar_Reset_Rect","_Zooming_ToolBar_Reset",d,s)},v.prototype.removeToolbarClass=function(e,t,i,o,n){Z(this.maps.element.id+"_Zooming_KitCollection")&&(document.getElementById(this.maps.element.id+"_Zooming_ToolBar_ZoomIn_Group")&&Z(this.maps.element.id+"_Zooming_ToolBar_ZoomIn_Group").setAttribute("class",t),document.getElementById(this.maps.element.id+"_Zooming_ToolBar_ZoomOut_Group")&&Z(this.maps.element.id+"_Zooming_ToolBar_ZoomOut_Group").setAttribute("class",i),document.getElementById(this.maps.element.id+"_Zooming_ToolBar_Reset_Group")&&Z(this.maps.element.id+"_Zooming_ToolBar_Reset_Group").setAttribute("class",n),document.getElementById(this.maps.element.id+"_Zooming_ToolBar_Zoom_Group")&&this.maps.zoomSettings.enableSelectionZooming&&Z(this.maps.element.id+"_Zooming_ToolBar_Zoom_Group").setAttribute("class",e),document.getElementById(this.maps.element.id+"_Zooming_ToolBar_Pan_Group"))&&this.maps.zoomSettings.enablePanning&&Z(this.maps.element.id+"_Zooming_ToolBar_Pan_Group").setAttribute("class",o)},v.prototype.removePanColor=function(e){Z(this.maps.element.id+"_Zooming_ToolBar_Pan_Rect")&&this.maps.zoomSettings.enablePanning&&(Z(this.maps.element.id+"_Zooming_ToolBar_Pan").setAttribute("fill",e),Z(this.maps.element.id+"_Zooming_ToolBar_Pan").setAttribute("stroke",e))},v.prototype.removeZoomColor=function(e){Z(this.maps.element.id+"_Zooming_ToolBar_Zoom_Rect")&&this.maps.zoomSettings.enableSelectionZooming&&(Z(this.maps.element.id+"_Zooming_ToolBar_Zoom").setAttribute("fill","transparent"),Z(this.maps.element.id+"_Zooming_ToolBar_Zoom").setAttribute("stroke",e))},v.prototype.wireEvents=function(e,t){Y.EventHandler.add(e,Y.Browser.touchStartEvent,t,this),Y.EventHandler.add(e,"mouseover",this.showTooltip,this),Y.EventHandler.add(e,"mouseout",this.removeTooltip,this)},v.prototype.mapMouseWheel=function(e){var t,i,o,n,l;this.maps.zoomSettings.enable&&this.maps.zoomSettings.mouseWheelZoom&&((t=this.maps).markerZoomedState=!1,t.zoomPersistence=t.enablePersistence,i=this.getMousePosition(e.pageX,e.pageY),n=t.tileZoomLevel,l=t.scale,o=t.zoomSettings.maxZoom,n=t.isTileMap?n:l,this.maps.mergeCluster(),i.x>t.mapAreaRect.x&&i.x<t.mapAreaRect.x+t.mapAreaRect.width&&i.y>t.mapAreaRect.y&&i.y<t.mapAreaRect.y+t.mapAreaRect.height&&(e.preventDefault(),"ZoomIn"==(l="mozilla"!==this.browserName||this.isPointer?0<e.wheelDelta/120?"ZoomIn":"ZoomOut":0<-e.detail/3?"ZoomIn":"ZoomOut")?(t.mapScaleValue=n+1,t.isTileMap?(t.staticMapZoom=t.tileZoomLevel,0<t.staticMapZoom&&t.staticMapZoom<o&&(t.staticMapZoom+=1,this.performZooming(i,n+1,l,!0))):this.performZooming(i,n+1,l,!0)):(t.mapScaleValue=n-1,t.isReset=t.mapScaleValue<1,t.staticMapZoom=t.tileZoomLevel,1===t.mapScaleValue&&(t.markerCenterLatitude=null,t.markerCenterLongitude=null),1<t.staticMapZoom&&t.staticMapZoom<o&&--t.staticMapZoom,this.performZooming(i,n-1,l,!0))),this.removeToolbarOpacity(t.mapScaleValue,this.maps.isDevice?this.maps.element.id+"_Zooming_":(Y.isNullOrUndefined(e.target)?this.maps.element:e.target).id))},v.prototype.doubleClick=function(e){var t=e.pageX,i=e.pageY,o=e.target.closest("#"+this.maps.element.id+"_mapsTooltipparent_template");this.maps.zoomSettings.enable&&this.maps.zoomSettings.doubleClickZoom&&!(-1<e.target.id.indexOf("_Zooming_"))&&Y.isNullOrUndefined(o)&&(e=this.getMousePosition(t,i),t=(o=this.maps).tileZoomLevel,i=o.scale,o.mapScaleValue=o.mapScaleValue+1,t=o.isTileMap?t:i,e.x>o.mapAreaRect.x)&&e.x<o.mapAreaRect.x+o.mapAreaRect.width&&e.y>o.mapAreaRect.y&&e.y<o.mapAreaRect.y+o.mapAreaRect.height&&this.performZooming(e,t+1,"ZoomIn")},v.prototype.mouseDownHandler=function(e){var t,i,o=null,n=(this.isPinchZooming=!1,e.target,"touchstart"===e.type?(this.isTouch=!0,o=e.touches,e.target,i=o[0].pageX,t=o[0].pageY):(i=e.pageX,t=e.pageY,e.target),this.isTouch||e.preventDefault(),this.maps.zoomSettings.enablePanning?this.isPan=this.isPanModeEnabled=!this.isZoomSelection:this.isPan=this.isPanModeEnabled=this.panColor!==this.selectionColor?this.maps.zoomSettings.enablePanning:this.zoomColor===this.selectionColor,this.mouseDownLatLong={x:i,y:t},this.maps.isTileMap?Math.round(this.maps.tileZoomLevel):Math.round(this.maps.mapScaleValue));this.rectZoomingStart=this.isZoomSelection&&n<this.maps.zoomSettings.maxZoom&&this.maps.zoomSettings.enable,this.mouseDownPoints=this.getMousePosition(i,t),this.isTouch&&null!==o&&(this.firstMove=!0,this.pinchFactor=this.maps.scale,this.fingers=o.length),this.maps.isTileMap&&this.isTouch&&1<e.touches.length&&(n=this.getMousePosition(e.touches[0].pageX,e.touches[0].pageY),i=this.getMousePosition(e.touches[1].pageX,e.touches[1].pageY),this.startDistance=Math.sqrt(Math.pow(n.x-i.x,2)+Math.pow(n.y-i.y,2)),this.touchCenter={x:(n.x+i.x)/2,y:(n.y+i.y)/2},this.pinchStartLatLong=this.maps.pointToLatLong((n.x+i.x)/2,(n.y+i.y)/2),this.isCancellation=!1,this.pinchTileZoomScale=this.maps.tileZoomLevel,this.pinchDistance=null),this.isSingleClick=!0},v.prototype.mouseMoveHandler=function(e){var t,i,o,n=this.maps,l=null,a=this.maps.zoomSettings;"touchmove"===e.type?(this.isTouch=!0,o=e.target,t=(l=e.touches)[0].pageX,i=l[0].pageY):(t=e.pageX,i=e.pageY,o=e.target),Z(n.element.id+"_Zooming_KitCollection")&&(-1<o.id.indexOf("_Zooming_")?Z(n.element.id+"_Zooming_KitCollection").setAttribute("opacity","1"):n.isDevice||Z(n.element.id+"_Zooming_KitCollection").setAttribute("opacity","fluentdark"===n.theme.toLowerCase()?"0.6":"0.3")),this.isTouch&&this.maps.zoomSettings.enable&&this.maps.zoomSettings.pinchZooming&&null!==l&&(this.firstMove&&2===l.length?(this.rectZoomingStart=!1,this.updateInteraction(),this.touchStartList=Tt(e)):2===l.length&&2===this.touchStartList.length&&(this.touchMoveList=Tt(e),e.cancelable&&e.preventDefault(),this.rectZoomingStart=!1,this.performPinchZooming(e)),this.firstMove=!1),this.mouseMovePoints=this.getMousePosition(t,i),!this.isPinchZooming&&a.enable&&this.isPanModeEnabled&&-1===this.maps.markerDragId.indexOf("_MarkerIndex_")&&(Y.Browser.isDevice&&1<=l.length||!Y.Browser.isDevice)&&(e.preventDefault(),this.maps.element.style.cursor="pointer",this.mouseMoveLatLong={x:t,y:i},this.mouseDownLatLong.x!==this.mouseMoveLatLong.x)&&this.mouseDownLatLong.y!==this.mouseMoveLatLong.y&&(this.maps.zoomSettings.enablePanning&&this.panning("None",null,null,e),this.mouseDownLatLong.x=t,this.mouseDownLatLong.y=i),this.isPinchZooming||this.isTouch&&(null===l||1!==l.length)||!this.rectZoomingStart||(e.preventDefault(),o=this.maps.isTileMap?Math.round(this.maps.tileZoomLevel):Math.round(this.maps.mapScaleValue),this.maps.zoomSettings.enableSelectionZooming&&o<this.maps.zoomSettings.maxZoom?this.drawZoomRectangle():(this.rectZoomingStart=!1,this.isPan=!0))},v.prototype.mouseUpHandler=function(e){this.rectZoomingStart=!1,this.isSingleClick=!!this.isSingleClick,this.isTouch=!1,this.touchStartList=[],this.touchMoveList=[],this.lastScale=1,this.isCancellation=!1,this.maps.element.style.cursor="auto",this.isPinchZooming&&this.maps.isTileMap&&(this.isPinchZooming=!1,t=document.getElementById(this.maps.element.id+"_tile_parent"),o=document.getElementById(this.maps.element.id+"_Tile_SVG_Parent"),t.style.transformOrigin="",t.style.transform="",o.style.transformOrigin="",o.style.transform="",this.maps.tileZoomLevel=this.maps.mapScaleValue=this.maps.zoomSettings.zoomFactor=this.pinchZoomScale,this.maps.scale=Math.pow(2,this.pinchZoomScale-1),this.tileZoomLevel=Math.round(this.pinchZoomScale),this.getTileTranslate(this.tileZoomLevel),this.maps.mapLayerPanel.generateTiles(this.tileZoomLevel,this.maps.tileTranslatePoint),this.applyTransform(this.maps),document.getElementById(this.maps.element.id+"_animates_tiles"))&&document.getElementById(this.maps.element.id+"_animates_tiles").remove(),this.isPanModeEnabled&&this.maps.zoomSettings.enablePanning&&!Y.isNullOrUndefined(this.maps.previousPoint)&&(this.maps.isTileMap?this.isPanningInProgress:this.maps.translatePoint.x!==this.maps.previousPoint.x&&this.maps.translatePoint.y!==this.maps.previousPoint.y)&&(o=t=void 0,l=a=0,i=e.target,e=void(-1!==e.type.indexOf("touch")?(a=t=e.changedTouches[0].pageX,l=(o=e.changedTouches[0].pageY)-(this.maps.isTileMap?10:0),e.target,this.maps.mouseClickEvent={x:t,y:o}):(t=e.pageX,o=e.pageY,a=e.layerX,l=e.layerY-(this.maps.isTileMap?10:0),e.target)),n=this.maps.getMinMaxLatitudeLongitude(),e=this.maps.isTileMap?(a=this.maps.getTileGeoLocation(a,l),{cancel:!1,name:"panComplete",maps:this.maps,tileTranslatePoint:{previous:this.maps.tileTranslatePoint,current:this.maps.tileTranslatePoint},translatePoint:{previous:this.maps.previousPoint,current:this.maps.translatePoint},scale:this.maps.scale,tileZoomLevel:this.maps.tileZoomLevel,latitude:a.latitude,longitude:a.longitude,minLatitude:n.minLatitude,maxLatitude:n.maxLatitude,minLongitude:n.minLongitude,maxLongitude:n.maxLongitude}):(this.maps.mouseClickEvent.x=this.maps.mouseDownEvent.x,this.maps.mouseClickEvent.y=this.maps.mouseDownEvent.y,l=this.maps.getClickLocation(i.id,t,o,i,t,o),{cancel:!1,name:"panComplete",maps:this.maps,tileTranslatePoint:{},translatePoint:{previous:this.maps.previousPoint,current:this.maps.translatePoint},scale:this.maps.scale,tileZoomLevel:this.maps.tileZoomLevel,latitude:Y.isNullOrUndefined(l)?0:l.latitude,longitude:Y.isNullOrUndefined(l)?0:l.longitude,minLatitude:n.minLatitude,maxLatitude:n.maxLatitude,minLongitude:n.minLongitude,maxLongitude:n.maxLongitude}),this.maps.trigger("panComplete",e)),this.isPanModeEnabled=!1,this.isPanningInProgress=!1;var t,i,o,n,l,a=Z(this.maps.element.id+"_Selection_Rect_Zooming");a&&this.maps.zoomSettings.enable&&this.maps.zoomSettings.enableSelectionZooming&&(Y.remove(a),this.performRectZooming()),this.mouseMoveLatLong={x:0,y:0},this.mouseDownLatLong={x:0,y:0},this.pinchDistance=null},v.prototype.mouseCancelHandler=function(e){this.isPanModeEnabled=!1,this.isTouch=!1,this.rectZoomingStart=!1;var t=Z(this.maps.element.id+"_Selection_Rect_Zooming");t&&this.maps.zoomSettings.enable&&(Y.remove(t),this.performRectZooming())},v.prototype.click=function(e){var t,i=this.maps,o=e.target.closest("#"+this.maps.element.id+"_mapsTooltipparent_template");if(i.markerModule&&0<i.markerModule.sameMarkerData.length||-1<e.target.id.indexOf("MarkerIndex")&&-1===e.target.id.indexOf("cluster")||!Y.isNullOrUndefined(o))return null;!this.isSingleClick||!i.zoomSettings.zoomOnClick||-1<e.target.id.indexOf("_Zooming_")||i.zoomSettings.doubleClickZoom||this.zoomColor===this.selectionColor||(o=e.pageX,e=e.pageY,o=this.getMousePosition(o,e),e=i.tileZoomLevel,t=i.scale,i.mapScaleValue=i.mapScaleValue+1,e=i.isTileMap?e:t,o.x>i.mapAreaRect.x&&o.x<i.mapAreaRect.x+i.mapAreaRect.width&&o.y>i.mapAreaRect.y&&o.y<i.mapAreaRect.y+i.mapAreaRect.height&&this.performZooming(o,e+1,"ZoomIn"))},v.prototype.getMousePosition=function(e,t){var i=this.maps,o=i.element.getBoundingClientRect(),n=i.element.ownerDocument.defaultView.pageXOffset,l=i.element.ownerDocument.defaultView.pageYOffset,a=i.element.ownerDocument.documentElement.clientTop,i=i.element.ownerDocument.documentElement.clientLeft,n=o.left+n-i,i=o.top+l-a;return new J(Math.abs(e-n),Math.abs(t-i))},v.prototype.addEventListener=function(){this.maps.isDestroyed||(Y.EventHandler.add(this.maps.element,this.wheelEvent,this.mapMouseWheel,this),Y.EventHandler.add(this.maps.element,"click",this.click,this),Y.EventHandler.add(this.maps.element,"dblclick",this.doubleClick,this),this.maps.on(Y.Browser.touchMoveEvent,this.mouseMoveHandler,this),this.maps.on(Y.Browser.touchStartEvent,this.mouseDownHandler,this),this.maps.on(Y.Browser.touchEndEvent,this.mouseUpHandler,this),Y.EventHandler.add(this.maps.element,this.cancelEvent,this.mouseCancelHandler,this))},v.prototype.removeEventListener=function(){if(!this.maps.isDestroyed){Y.EventHandler.remove(this.maps.element,this.wheelEvent,this.mapMouseWheel),Y.EventHandler.remove(this.maps.element,"click",this.click),Y.EventHandler.remove(this.maps.element,"dblclick",this.doubleClick),this.maps.off(Y.Browser.touchMoveEvent,this.mouseMoveHandler),this.maps.off(Y.Browser.touchStartEvent,this.mouseDownHandler),this.maps.off(Y.Browser.touchEndEvent,this.mouseUpHandler),Y.EventHandler.remove(this.maps.element,this.cancelEvent,this.mouseCancelHandler);var e=document.getElementById(this.maps.element.id+"_Zooming_KitCollection");if(e)for(var t=0;t<e.childNodes.length;t++)"g"===e.childNodes[t].tagName&&(Y.EventHandler.add(e.childNodes[t],Y.Browser.touchStartEvent,this.performToolBarAction),Y.EventHandler.add(e.childNodes[t],"mouseover",this.showTooltip),Y.EventHandler.add(e.childNodes[t],"mouseout",this.removeTooltip))}},v.prototype.getModuleName=function(){return"Zoom"},v.prototype.destroy=function(){this.toolBarGroup=null,this.currentToolbarEle=null,this.zoomingRect=null,this.zoomElements=null,this.panElements=null,this.baseTranslatePoint=null,this.touchStartList=null,this.touchMoveList=null,this.previousTouchMoveList=null,this.mouseDownPoints=null,this.mouseMovePoints=null,this.startTouches=[],this.mouseDownLatLong=null,this.mouseMoveLatLong=null,this.layerCollectionEle=null,this.currentLayer=null,this.pinchDistance=null,this.maps.refreshing||(this.maps=null)};var kn=v;function v(e){this.isPanModeEnabled=!1,this.mouseEnter=!1,this.isTouch=!1,this.rectZoomingStart=!1,this.browserName=Y.Browser.info.name,this.isPointer=Y.Browser.isPointer,this.handled=!1,this.isPanningInProgress=!1,this.isPan=!1,this.isZoomFinal=!1,this.isZoomSelection=!1,this.pinchFactor=1,this.startTouches=[],this.isCancellation=!1,this.pinchTileZoomScale=1,this.tileZoomLevel=1,this.pinchZoomScale=1,this.isPinchZooming=!1,this.mouseDownLatLong={x:0,y:0},this.mouseMoveLatLong={x:0,y:0},this.isSingleClick=!1,this.maps=e,this.wheelEvent="mozilla"!==this.browserName||this.isPointer?"mousewheel":"DOMMouseScroll",this.cancelEvent=this.isPointer?"pointerleave":"mouseleave",this.selectionColor=this.maps.zoomSettings.toolbarSettings.buttonSettings.selectionColor,this.fillColor=this.maps.zoomSettings.toolbarSettings.buttonSettings.color,this.addEventListener()}Fn.prototype.print=function(e,t){var i=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),o=(i.moveTo(0,0),i.resizeTo(screen.availWidth,screen.availHeight),{cancel:!1,htmlContent:this.getHTMLContent(e,t),name:ln});e.trigger("beforePrint",o,function(e){o.cancel||Y.print(o.htmlContent,i)})},Fn.prototype.getHTMLContent=function(e,t){var i,o=Y.createElement("div"),n=e.element.cloneNode(!0),l=e.isTileMap?n.getElementsByTagName("svg")[1]:n.getElementsByTagName("svg")[0];if(Y.isNullOrUndefined(l)||(l=l.childNodes[0],Y.isNullOrUndefined(l))||(i=l.getAttribute("fill"),"Tailwind"!==e.theme&&"Tailwind3"!==e.theme&&"Bootstrap5"!==e.theme&&"Fluent"!==e.theme&&"Material3"!==e.theme&&"Fluent2"!==e.theme||"rgba(255,255,255, 0.0)"!==i&&"transparent"!==i?"TailwindDark"!==e.theme&&"Tailwind3Dark"!==e.theme&&"Bootstrap5Dark"!==e.theme&&"FluentDark"!==e.theme&&"Material3Dark"!==e.theme&&"Fluent2Dark"!==e.theme&&"Fluent2HighContrast"!==e.theme||"rgba(255,255,255, 0.0)"!==i&&"transparent"!==i||l.setAttribute("fill","rgba(0, 0, 0, 1)"):l.setAttribute("fill","rgba(255,255,255, 1)")),e.isTileMap)for(var a=0;a<n.childElementCount;a++)if(n.children[a].id===e.element.id+"_tile_parent"){n.children[a].style.removeProperty("height"),n.children[a].style.removeProperty("width"),n.children[a].style.removeProperty("top"),n.children[a].style.removeProperty("left"),n.children[a].style.removeProperty("right"),n.children[a].style.removeProperty("overflow");var r=document.getElementById(e.element.id+"_Tile_SVG_Parent");n.children[a].children[0].style.overflow="hidden",n.children[a].children[0].style.position="absolute",n.children[a].children[0].style.height=r.style.height,n.children[a].children[0].style.width=r.style.width,n.children[a].children[0].style.left=r.style.left,n.children[a].children[0].style.top=r.style.top;break}return t?t instanceof Array?Array.prototype.forEach.call(t,function(e){o.appendChild(E(e).cloneNode(!0))}):t instanceof Element?o.appendChild(t.cloneNode(!0)):o.appendChild(E(t).cloneNode(!0)):o.appendChild(n),o},Fn.prototype.getModuleName=function(){return"Print"},Fn.prototype.destroy=function(){};var Nn=Fn;function Fn(e){}zn.prototype.export=function(f,b,S,v){return new Promise(function(n,e){var l,a=Y.createElement("canvas",{id:"ej2-canvas",attrs:{width:f.availableSize.width.toString(),height:f.availableSize.height.toString()}}),r=!(-1<Y.Browser.userAgent.toString().indexOf("HeadlessChrome")),s=document.getElementById(f.element.id+"_Tile_SVG_Parent"),t=Z(f.element.id+"_svg").cloneNode(!0),d=t.childNodes[0].getAttribute("fill"),p=("Tailwind"!==f.theme&&"Tailwind3"!==f.theme&&"Bootstrap5"!==f.theme&&"Fluent"!==f.theme&&"Material3"!==f.theme&&"Fluent2"!==f.theme||"rgba(255,255,255, 0.0)"!==d&&"transparent"!==d?"TailwindDark"!==f.theme&&"Tailwind3Dark"!==f.theme&&"Bootstrap5Dark"!==f.theme&&"FluentDark"!==f.theme&&"Material3Dark"!==f.theme&&"Fluent2Dark"!==f.theme&&"Fluent2HighContrast"!==f.theme||"rgba(255,255,255, 0.0)"!==d&&"transparent"!==d||t.childNodes[0].setAttribute("fill","rgba(0, 0, 0, 1)"):t.childNodes[0].setAttribute("fill","rgba(255,255,255, 1)"),o=f.isTileMap?(l=Z(f.element.id+"_Tile_SVG").cloneNode(!0),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+t.outerHTML+l.outerHTML+"</svg>"):'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+t.outerHTML+"</svg>",window.URL.createObjectURL(new Blob("SVG"===b?[o]:[(new XMLSerializer).serializeToString(t)],{type:"image/svg+xml"})));if("SVG"===b)v?ie(S,b,p,r):n(null);else{var i=new Image,h=a.getContext("2d");if(f.isTileMap){f.isExportInitialTileMap=!0;for(var o=document.getElementById(f.element.id+"_MapAreaBorder"),m=parseFloat(o.getAttribute("y")),c=parseFloat(o.getAttribute("x")),u=new XMLHttpRequest,g=f.mapLayerPanel.tiles.length,y=0;y<=g+1;y++)!function(t){var i=document.getElementById(f.element.id+"_tile_"+(t-1)),o=new Image,e=(o.crossOrigin="Anonymous",f.background||(!("Tailwind"!==f.theme&&"Tailwind3"!==f.theme&&"Bootstrap5"!==f.theme&&"Fluent"!==f.theme&&"Material3"!==f.theme||"rgba(255,255,255, 0.0)"!==d&&"transparent"!==d)||"TailwindDark"!==f.theme&&"Tailwind3Dark"!==f.theme&&"Bootstrap5Dark"!==f.theme&&"FluentDark"!==f.theme&&"Material3Dark"!==f.theme||"rgba(255,255,255, 0.0)"!==d&&"transparent"!==d?"#ffffff":"#000000")),e=(h.fillStyle=e,h.fillRect(0,0,f.availableSize.width,f.availableSize.height),h.font=f.titleSettings.textStyle.size+" Arial",document.getElementById(f.element.id+"_Map_title"));Y.isNullOrUndefined(e)||(h.fillStyle=e.getAttribute("fill"),h.fillText(f.titleSettings.text,parseFloat(e.getAttribute("x")),parseFloat(e.getAttribute("y")))),o.onload=function(){var e;0===t||t===g+1?0===t?(h.setTransform(1,0,0,1,0,0),h.rect(0,m,parseFloat(s.style.width),parseFloat(s.style.height)),h.clip()):h.setTransform(1,0,0,1,c,m):h.setTransform(1,0,0,1,parseFloat(i.style.left)+c,parseFloat(i.style.top)+m),h.drawImage(o,0,0),t===g+1&&(localStorage.setItem("local-canvasImage",a.toDataURL("image/png")),e=localStorage.getItem("local-canvasImage"),v?(ie(S,b,e,r),localStorage.removeItem("local-canvasImage"),f.isExportInitialTileMap=!1):(f.isExportInitialTileMap=!1,"PNG"===b?n(e):"JPEG"===b&&n(a.toDataURL("image/jpeg"))))},0===t||t===g+1?0===t?o.src=p:setTimeout(function(){o.src=window.URL.createObjectURL(new Blob([(new XMLSerializer).serializeToString(l)],{type:"image/svg+xml"}))},300):(u.open("GET",i.children[0].getAttribute("src"),!0),u.send(),o.src=i.children[0].getAttribute("src"))}(y)}else i.onload=function(){h.drawImage(i,0,0),window.URL.revokeObjectURL(p),v?ie(S,b,a.toDataURL("image/png").replace("image/png","image/octet-stream"),r):"PNG"===b?n(a.toDataURL("image/png")):"JPEG"===b&&n(a.toDataURL("image/jpeg"))},i.src=p}})},zn.prototype.getModuleName=function(){return"ImageExport"},zn.prototype.destroy=function(){};var En=zn;function zn(e){}An.prototype.export=function(g,y,f,b,S){return new Promise(function(n){g.isTileMap&&(g.isExportInitialTileMap=!0);var l=Y.createElement("canvas",{id:"ej2-canvas",attrs:{width:g.availableSize.width.toString(),height:g.availableSize.height.toString()}}),a=(S=Y.isNullOrUndefined(S)?_.PdfPageOrientation.Landscape:S,document.getElementById(g.element.id+"_Tile_SVG_Parent")),e=g.svgObject.cloneNode(!0),r=e.childNodes[0].getAttribute("fill"),s=("Tailwind"!==g.theme&&"Tailwind3"!==g.theme&&"Bootstrap5"!==g.theme&&"Fluent"!==g.theme&&"Material3"!==g.theme&&"Fluent2"!==g.theme||"rgba(255,255,255, 0.0)"!==r&&"transparent"!==r?"TailwindDark"!==g.theme&&"Tailwind3Dark"!==g.theme&&"Bootstrap5Dark"!==g.theme&&"FluentDark"!==g.theme&&"Material3Dark"!==g.theme&&"Fluent2Dark"!==g.theme&&"Fluent2HighContrast"!==g.theme||"rgba(255,255,255, 0.0)"!==r&&"transparent"!==r||e.childNodes[0].setAttribute("fill","rgba(0, 0, 0, 1)"):e.childNodes[0].setAttribute("fill","rgba(255,255,255, 1)"),window.URL.createObjectURL(new Blob("SVG"===y?[void 0]:[(new XMLSerializer).serializeToString(e)],{type:"image/svg+xml"}))),d=new _.PdfDocument,t=new Image,p=l.getContext("2d");if(g.isTileMap)for(var e=document.getElementById(g.element.id+"_MapAreaBorder"),h=parseFloat(e.getAttribute("y")),m=parseFloat(e.getAttribute("x")),c=new XMLHttpRequest,u=g.mapLayerPanel.tiles.length,i=0;i<=u+1;i++)!function(t){var i=document.getElementById(g.element.id+"_tile_"+(t-1)),o=new Image,e=(o.crossOrigin="Anonymous",g.background||(!("Tailwind"!==g.theme&&"Tailwind3"!==g.theme&&"Bootstrap5"!==g.theme&&"Fluent"!==g.theme&&"Material3"!==g.theme||"rgba(255,255,255, 0.0)"!==r&&"transparent"!==r)||"TailwindDark"!==g.theme&&"Tailwind3Dark"!==g.theme&&"Bootstrap5Dark"!==g.theme&&"FluentDark"!==g.theme&&"Material3Dark"!==g.theme||"rgba(255,255,255, 0.0)"!==r&&"transparent"!==r?"#ffffff":"#000000")),e=(p.fillStyle=e,p.fillRect(0,0,g.availableSize.width,g.availableSize.height),p.font=g.titleSettings.textStyle.size+" Arial",document.getElementById(g.element.id+"_Map_title"));Y.isNullOrUndefined(e)||(p.fillStyle=e.getAttribute("fill"),p.fillText(g.titleSettings.text,parseFloat(e.getAttribute("x")),parseFloat(e.getAttribute("y")))),o.onload=function(){var e;0===t||t===u+1?0===t?(p.setTransform(1,0,0,1,0,0),p.rect(0,h,parseFloat(a.style.width),parseFloat(a.style.height)),p.clip()):p.setTransform(1,0,0,1,m,h):p.setTransform(1,0,0,1,parseFloat(i.style.left)+m,parseFloat(i.style.top)+h),p.drawImage(o,0,0),t===u+1&&"PDF"===y&&(localStorage.setItem("saved-image-example",l.toDataURL("image/jpeg")),e=localStorage.getItem("saved-image-example"),d.pageSettings.orientation=S,e=e.slice(e.indexOf(",")+1),d.pages.add().graphics.drawImage(new _.PdfBitmap(e),0,0,g.availableSize.width-60,g.availableSize.height),g.isExportInitialTileMap=!1,b?(d.save(f+".pdf"),d.destroy()):n(null))},0===t||t===u+1?0===t?o.src=s:setTimeout(function(){var e=document.getElementById(g.element.id+"_Tile_SVG");o.src=window.URL.createObjectURL(new Blob([(new XMLSerializer).serializeToString(e)],{type:"image/svg+xml"}))},300):(c.open("GET",i.children[0].getAttribute("src"),!0),c.send(),o.src=i.children[0].getAttribute("src"))}(i);else t.onload=function(){var e;p.drawImage(t,0,0),window.URL.revokeObjectURL(s),"PDF"===y&&(e=l.toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream"),d.pageSettings.orientation=S,e=e.slice(e.indexOf(",")+1),d.pages.add().graphics.drawImage(new _.PdfBitmap(e),0,0,g.availableSize.width-60,g.availableSize.height),b?(d.save(f+".pdf"),d.destroy()):n(null))},t.src=s})},An.prototype.getModuleName=function(){return"PdfExport"},An.prototype.destroy=function(){};var Bn=An;function An(){}e.Annotation=Ht,e.Annotations=mn,e.Arrow=Xt,e.BingMap=rn,e.Border=l,e.Bubble=y,e.BubbleSettings=$i,e.CenterPosition=di,e.CircleOption=ce,e.ColorMapping=dn,e.ColorMappingSettings=Ti,e.ColorValue=pe,e.CommonTitleSettings=to,e.ConnectorLineSettings=xi,e.Coordinate=ne,e.DataLabel=vn,e.DataLabelSettings=bo,e.Font=Qt,e.GeoLocation=ae,e.Highlight=Mn,e.HighlightSettings=Di,e.ImageExport=En,e.InitialMarkerSelectionSettings=Ni,e.InitialShapeSelectionSettings=zi,e.Internalize=dt,e.LayerPanel=hn,e.LayerSettings=Po,e.Legend=_n,e.LegendSettings=yo,e.Line=Oe,e.LineOption=L,e.MapAjax=At,e.MapLocation=T,e.Maps=i,e.MapsAreaSettings=t,e.MapsTooltip=Tn,e.Margin=bi,e.Marker=fn,e.MarkerBase=Co,e.MarkerClusterData=Li,e.MarkerClusterSettings=_i,e.MarkerSettings=_o,e.MinMax=le,e.NavigationLine=Cn,e.NavigationLineSettings=Ji,e.PathOption=B,e.PatternOptions=_e,e.PdfExport=Bn,e.Point=J,e.Polygon=bn,e.PolygonOption=ye,e.PolygonSetting=Gi,e.PolygonSettings=qi,e.PolygonTooltipSettings=gi,e.PolylineOption=Se,e.Print=Nn,e.Rect=K,e.RectOption=Q,e.RelativePoint=oe,e.Selection=Pn,e.SelectionSettings=Ui,e.ShapeSettings=vo,e.Size=W,e.SubTitleSettings=no,e.TextOption=de,e.Tile=To,e.TitleSettings=ro,e.ToggleLegendSettings=co,e.TooltipSettings=mi,e.Zoom=kn,e.ZoomSettings=ho,e.ZoomToolbarButtonSettings=ei,e.ZoomToolbarSettings=ni,e.ZoomToolbarTooltipSettings=ii,e.acos=ee,e.aitoff=H,e.animate=Bt,e.animationComplete=$o,e.annotationRendering=tn,e.appendShape=s,e.beforePrint=ln,e.bubbleClick=Qo,e.bubbleMouseMove=Ko,e.bubbleRendering=Jo,e.calculateBound=te,e.calculateCenterFromPixel=nt,e.calculatePolygonPath=D,e.calculateScale=It,e.calculateShapes=Xe,e.calculateSize=w,e.calculateZoomLevel=Dt,e.changeBorderWidth=Pt,e.changeNavaigationLineWidth=wt,e.checkPropertyPath=Qe,e.checkShapeDataFields=Je,e.click=ko,e.clusterSeparate=je,e.clusterTemplate=Be,e.compareZoomFactor=jt,e.convertElement=Le,e.convertElementFromLabel=Te,e.convertGeoToPoint=A,e.convertStringToValue=we,e.convertTileLatLongToPoint=R,e.createStyle=gt,e.createSvg=N,e.createTooltip=Ct,e.customizeStyle=yt,e.dataLabelRendering=Yo,e.degreesToRadians=z,e.doubleClick=Eo,e.drawBalloon=Ye,e.drawCircle=We,e.drawCross=function(e,t,i,o,n){return t.d="M "+o.x+" "+(o.y-i.height/2)+" L "+o.x+" "+(o.y+i.height/2)+" M "+(o.x-i.width/2)+" "+o.y+" L "+(o.x+i.width/2)+" "+o.y,s(e.renderer.drawPath(t),n)},e.drawDiamond=function(e,t,i,o,n){return t.d="M "+o.x+" "+(o.y-i.height/2)+" L "+(o.x+i.width/2)+" "+o.y+" L "+o.x+" "+(o.y+i.height/2)+" L "+(o.x-i.width/2)+" "+o.y+" Z",s(e.renderer.drawPath(t),n)},e.drawHorizontalLine=function(e,t,i,o,n){return t.d=" M "+(o.x-i.width/2)+" "+o.y+" L "+(o.x+i.width/2)+" "+o.y,s(e.renderer.drawPath(t),n)},e.drawLine=function(e,t,i){return s(e.renderer.drawLine(t),i)},e.drawPath=function(e,t,i){return s(e.renderer.drawPath(t),i)},e.drawPattern=function(e,t,i,o){for(var n=e.renderer.createPattern(t,"pattern"),l=0,a=i;l<a.length;l++)s(a[l],n);return s(n,o)},e.drawPolygon=function(e,t,i){return s(e.renderer.drawPolygon(t),i)},e.drawPolyline=function(e,t,i){return s(e.renderer.drawPolyline(t),i)},e.drawRectangle=qe,e.drawStar=function(e,t,i,o,n){return t.d="M "+(o.x+i.width/3)+" "+(o.y+i.height/2)+" L "+(o.x-i.width/2)+" "+(o.y-i.height/6)+" L "+(o.x+i.width/2)+" "+(o.y-i.height/6)+" L "+(o.x-i.width/3)+" "+(o.y+i.height/2)+" L "+o.x+" "+(o.y-i.height/2)+" L "+(o.x+i.width/3)+" "+(o.y+i.height/2)+" Z",s(e.renderer.drawPath(t),n)},e.drawSymbol=_t,e.drawSymbols=Ie,e.drawTriangle=function(e,t,i,o,n){return t.d="M "+o.x+" "+(o.y-i.height/2)+" L "+(o.x+i.width/2)+" "+(o.y+i.height/2)+" L "+(o.x-i.width/2)+" "+(o.y+i.height/2)+" Z",s(e.renderer.drawPath(t),n)},e.drawVerticalLine=function(e,t,i,o,n){return t.d="M "+o.x+" "+(o.y-i.height/2)+" L "+o.x+" "+(o.y+i.height/2),s(e.renderer.drawPath(t),n)},e.elementAnimate=bt,e.filter=Ke,e.findMidPointOfPolygon=et,e.findPosition=ot,e.fixInitialScaleForTile=rt,e.formatValue=Pe,e.getDistance=kt,e.getElement=E,e.getElementByID=Z,e.getElementOffset=Lt,e.getElementsByClassName=ct,e.getFieldData=function(e,t){for(var i=[],o=0,n=e;o<n.length;o++){for(var l=n[o],a={},r=0,s=t;r<s.length;r++){var d=s[r];l[d]&&(a[d]=l[d])}i.push(a)}return i},e.getHexColor=Ot,e.getMousePosition=F,e.getProcessedMarginValue=st,e.getRatioOfBubble=$e,e.getShapeData=ht,e.getTargetElement=ut,e.getTemplateFunction=pt,e.getTouchCenter=Ft,e.getTouches=Nt,e.getTranslate=lt,e.getValueFromObject=U,e.getZoomTranslate=at,e.isCustomPath=tt,e.itemHighlight=nn,e.itemSelection=on,e.layerRendering=Zo,e.legendRendering=en,e.load="load",e.loaded="loaded",e.maintainSelection=Ve,e.maintainStyleClass=He,e.maintainToggleSelection=Ge,e.marker=De,e.markerBoundsComparer=Ue,e.markerClick=Vo,e.markerClusterClick=Ho,e.markerClusterListHandler=Ae,e.markerClusterMouseMove=Xo,e.markerClusterRendering=Ro,e.markerColorChoose=ke,e.markerDragEnd="markerDragEnd",e.markerDragStart=Go,e.markerMouseMove=Wo,e.markerRendering=Do,e.markerShapeChoose=Ne,e.markerTemplate=Re,e.measureText=q,e.measureTextElement=re,e.mergeSeparateCluster=Ze,e.mouseMove=qo,e.mousedown="mousedown",e.mousemove="mousemove",e.mouseup="mouseup",e.onclick=No,e.pan=an,e.panComplete="panComplete",e.processResult=Rt,e.querySelector=O,e.radiansToDegrees=j,e.removeClass=x,e.removeElement=I,e.renderLegendShape=Mt,e.renderTextElement=Me,e.resize=zo,e.rightClick=Fo,e.roundTo=X,e.shapeHighlight=Uo,e.shapeRendering=jo,e.shapeSelected=Ao,e.showTooltip=vt,e.sinci=$,e.smoothTranslate=Zt,e.stringToNumber=P,e.sum=Et,e.targetTouches=Tt,e.textTrim=it,e.timeout=St,e.tooltipRender=Bo,e.triggerDownload=ie,e.triggerItemSelectionEvent=ft,e.triggerShapeEvent=mt,e.wordWrap=xt,e.xToCoordinate=V,e.yToCoordinate=G,e.zoomAnimate=zt,e.zoomComplete="zoomComplete",e.zoomIn="zoomIn",e.zoomOut="zoomOut",Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ej2-maps.umd.min.js.map
