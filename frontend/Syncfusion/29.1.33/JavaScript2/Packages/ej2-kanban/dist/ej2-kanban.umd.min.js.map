{"version":3,"file":"ej2-kanban.umd.min.js","sources":["../src/kanban/base/constant.js","../src/kanban/base/data.js","../src/kanban/models/swimlane-settings.js","../src/kanban/models/card-settings.js","../src/kanban/models/dialog-settings.js","../src/kanban/models/columns.js","../src/kanban/models/stacked-headers.js","../src/kanban/models/sort-settings.js","../src/kanban/base/css-constant.js","../src/kanban/actions/action.js","../src/kanban/actions/crud.js","../src/kanban/actions/drag.js","../src/kanban/actions/dialog.js","../src/kanban/actions/keyboard.js","../src/kanban/actions/tooltip.js","../src/kanban/actions/touch.js","../src/kanban/base/mobile-layout.js","../src/kanban/base/layout-render.js","../src/kanban/base/virtual-layout-render.js","../src/kanban/base/kanban.js"],"sourcesContent":["/**\n * Kanban Constants\n */\n// Constants for public events\n/** @private */\nexport var actionBegin = 'actionBegin';\n/** @private */\nexport var actionComplete = 'actionComplete';\n/** @private */\nexport var actionFailure = 'actionFailure';\n/** @private */\nexport var cardClick = 'cardClick';\n/** @private */\nexport var cardDoubleClick = 'cardDoubleClick';\n/** @private */\nexport var cardRendered = 'cardRendered';\n/** @private */\nexport var queryCellInfo = 'queryCellInfo';\n/** @private */\nexport var dataBinding = 'dataBinding';\n/** @private */\nexport var dataBound = 'dataBound';\n/** @private */\nexport var dragStart = 'dragStart';\n/** @private */\nexport var drag = 'drag';\n/** @private */\nexport var dragStop = 'dragStop';\n/** @private */\nexport var documentClick = 'document-click';\n/** @private */\nexport var dialogOpen = 'dialogOpen';\n/** @private */\nexport var dialogClose = 'dialogClose';\n// Constants for internal events\n/** @private */\nexport var contentReady = 'content-ready';\n/** @private */\nexport var dataReady = 'data-ready';\n/** @private */\nexport var bottomSpace = 25;\n/** @private */\nexport var cardSpace = 16;\n/** @private */\nexport var toggleWidth = 50;\n/** @hidden */\nexport var dataSourceChanged = 'dataSourceChanged';\n/** @hidden */\nexport var dataStateChange = 'dataStateChange';\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { extend, isNullOrUndefined, formatUnit } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Deferred, UrlAdaptor } from '@syncfusion/ej2-data';\nimport * as events from './constant';\n/**\n * Kanban data module\n */\nvar Data = /** @class */ (function () {\n    /**\n     * Constructor for data module\n     *\n     * @param {Kanban} parent Accepts the instance of the Kanban\n     */\n    function Data(parent) {\n        this.initload = false;\n        this.dataState = { isPending: false, resolver: null, isDataChanged: false };\n        this.parent = parent;\n        this.keyField = this.parent.cardSettings.headerField;\n        this.dataState = { isDataChanged: false };\n        this.isObservable = false;\n        this.initDataManager(parent.dataSource, parent.query);\n        this.refreshDataManager();\n    }\n    /**\n     * The function used to initialize dataManager` and query\n     *\n     * @param {Object[] | DataManager} dataSource Accepts the dataSource as collection of objects or Datamanager instance.\n     * @param {Query} query Accepts the query to process the data from collections.\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.initDataManager = function (dataSource, query) {\n        this.dataManager = dataSource instanceof DataManager ? dataSource : new DataManager(dataSource);\n        this.query = query instanceof Query ? query : new Query();\n        this.kanbanData = new DataManager(this.parent.kanbanData);\n    };\n    /**\n     * @returns {boolean} returns whether its remote data\n     * @hidden\n     */\n    Data.prototype.isRemote = function () {\n        return this.dataManager.dataSource.offline !== true && this.dataManager.dataSource.url !== undefined &&\n            this.dataManager.dataSource.url !== '';\n    };\n    /**\n     * @returns {boolean} returns the column key fields\n     * @hidden\n     */\n    Data.prototype.columnKeyFields = function () {\n        var columns = [];\n        for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n            var column = _a[_i];\n            if (column.keyField.toString().split(',').length > 1) {\n                for (var _b = 0, _c = column.keyField.toString().split(','); _b < _c.length; _b++) {\n                    var innerColumns = _c[_b];\n                    columns.push(innerColumns.trim());\n                }\n            }\n            else {\n                columns.push(column.keyField.toString());\n            }\n        }\n        return columns;\n    };\n    /**\n     * The function used to generate updated Query from schedule model\n     *\n     * @param {string} parameter Accepts the parameter that needs to be sent to the service end.\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.getQuery = function (parameter) {\n        var query = this.query.clone();\n        if (this.isRemote() && this.parent.enableVirtualization) {\n            var cardHeight = this.parent.cardHeight === 'auto' ? 100 :\n                parseInt(formatUnit(this.parent.cardHeight).split('px')[0], 10);\n            var take = this.parent.height === 'auto' ? (Math.ceil(window.innerHeight / cardHeight) * 2) :\n                (Math.ceil(parseInt(formatUnit(this.parent.height).split('px')[0], 10) / cardHeight) * 2);\n            var columns = this.columnKeyFields();\n            for (var i = 0; i < columns.length; i++) {\n                query.where(this.parent.keyField, 'equal', columns[i]);\n            }\n            query.take(take);\n            if (isNullOrUndefined(parameter)) {\n                parameter = 'KanbanVirtualization';\n            }\n            query.addParams('KanbanVirtualization', parameter);\n        }\n        return query;\n    };\n    /**\n     * The function used to get dataSource by executing given Query\n     *\n     * @param  {Query} query - A Query that specifies to generate dataSource\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.getData = function (query) {\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            var def = this.eventPromise({ requestType: '' }, query);\n            this.isObservable = true;\n            return def.promise;\n        }\n        return this.dataManager.executeQuery(query);\n    };\n    Data.prototype.setState = function (state) {\n        return this.dataState = state;\n    };\n    Data.prototype.getStateEventArgument = function (query) {\n        var adaptr = new UrlAdaptor();\n        var dm = new DataManager({ url: '', adaptor: new UrlAdaptor });\n        var state = adaptr.processQuery(dm, query);\n        var data = JSON.parse(state.data);\n        return extend(data, state.pvtData);\n    };\n    Data.prototype.eventPromise = function (args, query, index) {\n        var _this = this;\n        var dataArgs = args;\n        var state = this.getStateEventArgument(query);\n        var def = new Deferred();\n        var deff = new Deferred();\n        if (args.requestType !== undefined && this.dataState.isDataChanged !== false) {\n            state.action = args;\n            if (args.requestType === 'cardChanged' || args.requestType === 'cardRemoved' || args.requestType === 'cardCreated') {\n                var editArgs_1 = args;\n                editArgs_1.promise = deff.promise;\n                editArgs_1.state = state;\n                editArgs_1.index = index;\n                this.setState({ isPending: true, resolver: deff.resolve });\n                dataArgs.endEdit = deff.resolve;\n                dataArgs.cancelEdit = deff.reject;\n                this.parent.trigger(events.dataSourceChanged, editArgs_1);\n                deff.promise.then(function () {\n                    _this.setState({ isPending: true, resolver: def.resolve });\n                    _this.parent.trigger(events.dataStateChange, state);\n                    editArgs_1.addedRecords.forEach(function (data) {\n                        _this.parent.kanbanData.push(data);\n                    });\n                    editArgs_1.changedRecords.forEach(function (changedRecord) {\n                        var cardObj = _this.parent.kanbanData.filter(function (data) {\n                            return data[_this.parent.cardSettings.headerField] ===\n                                changedRecord[_this.parent.cardSettings.headerField];\n                        })[0];\n                        extend(cardObj, changedRecord);\n                    });\n                    editArgs_1.deletedRecords.forEach(function (deletedRecord) {\n                        var index = _this.parent.kanbanData.findIndex(function (data) {\n                            return data[_this.parent.cardSettings.headerField] === deletedRecord[_this.parent.cardSettings.headerField];\n                        });\n                        _this.parent.kanbanData.splice(index, 1);\n                    });\n                }).catch(function () { _this.parent.hideSpinner(); void 0; });\n            }\n            else {\n                this.setState({ isPending: true, resolver: def.resolve });\n                this.parent.trigger(events.dataStateChange, state);\n            }\n        }\n        else {\n            this.setState({});\n            def.resolve(this.parent.dataSource);\n        }\n        return def;\n    };\n    /**\n     * The function used to get the table name from the given Query\n     *\n     * @returns {string} Returns the table name.\n     * @private\n     */\n    Data.prototype.getTable = function () {\n        if (this.parent.query) {\n            var query = this.getQuery();\n            return query.fromTable;\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * The function is used to send the request and get response from datamanager\n     *\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.refreshDataManager = function () {\n        var _this = this;\n        var dataManager = this.getData(this.getQuery());\n        dataManager.then(function (e) {\n            return _this.dataManagerSuccess(e);\n        }).catch(function (e) { return _this.dataManagerFailure(e); });\n    };\n    /**\n     * The function is used to handle the success response from dataManager\n     *\n     * @param {ReturnType} e Accepts the dataManager success result\n     * @param type\n     * @returns {void}\n     * @private\n     */\n    // eslint-disable-next-line\n    Data.prototype.dataManagerSuccess = function (e, type, offlineArgs, index) {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (type) {\n            this.updateKanbanData(e);\n            if (this.parent.enableVirtualization && this.isRemote()) {\n                this.parent.virtualLayoutModule.refresh();\n            }\n        }\n        else {\n            this.parent.trigger(events.dataBinding, e, function (args) {\n                _this.updateKanbanData(args);\n                _this.parent.notify(events.dataReady, { processedData: _this.parent.kanbanData });\n                _this.parent.trigger(events.dataBound, null, function () { return _this.parent.hideSpinner(); });\n            });\n        }\n        if (this.initload) {\n            this.parent.layoutModule.refresh();\n            this.parent.renderTemplates();\n        }\n        this.initload = true;\n    };\n    /**\n     * The function is used to handle the update the column data count for remote, and update kanbanData while perform the CRUD action\n     *\n     * @param {ReturnType} args Accepts the dataManager success result\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.updateKanbanData = function (args) {\n        var resultData = extend([], !isNullOrUndefined(args.result.result) ?\n            args.result.result : args.result, null, true);\n        if (this.isRemote() && this.parent.enableVirtualization && resultData.length > 0\n            && !isNullOrUndefined(args.result.count)) {\n            var columnsKeyFields = this.columnKeyFields();\n            for (var i = 0; i < columnsKeyFields.length; i++) {\n                if (args.result.count[i].Key === columnsKeyFields[i]) {\n                    this.parent.columnDataCount[columnsKeyFields[i]] = args.result.count[i].Value;\n                }\n            }\n        }\n        this.parent.kanbanData = resultData;\n        this.kanbanData = new DataManager(this.parent.kanbanData);\n    };\n    /**\n     * The function is used to handle the failure response from dataManager\n     *\n     * @param {ReturnType} e Accepts the dataManager failure result\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.dataManagerFailure = function (e) {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.trigger(events.actionFailure, { error: e }, function () { return _this.parent.hideSpinner(); });\n    };\n    /**\n     * The function is used to perform the insert, update, delete and batch actions in datamanager\n     *\n     * @param {string} updateType Accepts the update type action\n     * @param {SaveChanges} params Accepts the savechanges params\n     * @param {string} type Accepts the requestType as string\n     * @param {Object} data Accepts the data to perform crud action\n     * @param {number} index Accepts the index to refresh the data into UI\n     * @param {boolean} isDropped Accepts the boolean value based on based if it is dragged and dropped\n     * @param {string} dataDropIndexKeyFieldValue Accepts the dropped index key field value card\n     * @param {number} draggedKey Accepts the dragged keyfield of the column\n     * @param {number} droppedKey Accepts the dropped keyfield of the column\n     * @param {number} isMultipleDrag Accepts boolean value based on the multiple drag of the cards\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.updateDataManager = function (updateType, params, type, data, index, isDropped, dataDropIndexKeyFieldValue, draggedKey, droppedKey, isMultipleDrag) {\n        var _this = this;\n        this.parent.showSpinner();\n        var promise;\n        var actionArgs = {\n            requestType: type, cancel: false, addedRecords: params.addedRecords,\n            changedRecords: params.changedRecords, deletedRecords: params.deletedRecords\n        };\n        this.setState({ isDataChanged: true });\n        this.eventPromise(actionArgs, this.query, index);\n        this.parent.trigger(events.actionComplete, actionArgs, function (offlineArgs) {\n            if (!offlineArgs.cancel) {\n                promise = _this.syncDataSource(_this.dataManager, updateType, params, data, isDropped, dataDropIndexKeyFieldValue);\n                if (_this.dataManager.dataSource.offline) {\n                    if (!_this.isObservable) {\n                        _this.syncDataSource(_this.kanbanData, updateType, params, data, isDropped, dataDropIndexKeyFieldValue);\n                        index = draggedKey === droppedKey && isMultipleDrag ? index - 1 : index;\n                        _this.refreshUI(offlineArgs, index, isDropped);\n                        if (_this.parent.enableVirtualization) {\n                            _this.parent.virtualLayoutModule.refreshColumnData(draggedKey, droppedKey, offlineArgs.requestType, data[_this.parent.keyField]);\n                        }\n                    }\n                }\n                else {\n                    promise.then(function (args) {\n                        if (_this.parent.isDestroyed) {\n                            return;\n                        }\n                        var dataManager = _this.getData(_this.getQuery());\n                        dataManager.then(function (e) { return _this.dataManagerSuccess(e, 'DataSourceChange', offlineArgs, index); }).catch(function (e) { return _this.dataManagerFailure(e); });\n                        if (offlineArgs.requestType === 'cardCreated') {\n                            if (!Array.isArray(args)) {\n                                offlineArgs.addedRecords[0] = extend(offlineArgs.addedRecords[0], args);\n                            }\n                            else {\n                                _this.modifyArrayData(offlineArgs.addedRecords, args);\n                            }\n                        }\n                        else if (offlineArgs.requestType === 'cardChanged') {\n                            if (!Array.isArray(args)) {\n                                offlineArgs.changedRecords[0] = extend(offlineArgs.changedRecords[0], args);\n                            }\n                            else {\n                                _this.modifyArrayData(offlineArgs.changedRecords, args);\n                            }\n                        }\n                        else if (offlineArgs.requestType === 'cardRemoved') {\n                            if (!Array.isArray(args)) {\n                                offlineArgs.deletedRecords[0] = extend(offlineArgs.deletedRecords[0], args);\n                            }\n                            else {\n                                _this.modifyArrayData(offlineArgs.deletedRecords, args);\n                            }\n                        }\n                        index = draggedKey === droppedKey && isMultipleDrag ? index - 1 : index;\n                        _this.refreshUI(offlineArgs, index, isDropped);\n                        if (_this.parent.enableVirtualization) {\n                            _this.parent.virtualLayoutModule.refreshColumnData(draggedKey, droppedKey, offlineArgs.requestType, data[_this.parent.keyField]);\n                        }\n                    }).catch(function (e) {\n                        _this.dataManagerFailure(e);\n                    });\n                }\n            }\n        });\n    };\n    Data.prototype.syncDataSource = function (dataManager, updateType, params, data, isDropped, dataDropIndexKeyFieldValue) {\n        var _this = this;\n        var promise;\n        switch (updateType) {\n            case 'insert':\n                return dataManager.insert(data, this.getTable(), this.getQuery());\n            case 'update':\n                if (this.parent.enableVirtualization && !this.parent.dataModule.isRemote() && isDropped) {\n                    promise = dataManager.remove(this.keyField, data, this.getTable(), this.getQuery());\n                    promise = dataManager.insert(data, this.getTable(), this.getQuery(), dataManager.dataSource.json.findIndex(function (data) {\n                        return data[_this.parent.cardSettings.headerField] === dataDropIndexKeyFieldValue;\n                    }));\n                    return promise;\n                }\n                else {\n                    return dataManager.update(this.keyField, data, this.getTable(), this.getQuery());\n                }\n            case 'delete':\n                return dataManager.remove(this.keyField, data, this.getTable(), this.getQuery());\n            case 'batch':\n                if (!this.parent.dataModule.isRemote() && isDropped && this.parent.enableVirtualization && data) {\n                    for (var i = 0; i < data.length; i++) {\n                        promise = dataManager.remove(this.keyField, data[i], this.getTable(), this.getQuery());\n                    }\n                    var currentIndex = dataManager.dataSource.json.findIndex(function (data) {\n                        return data[_this.parent.cardSettings.headerField] === dataDropIndexKeyFieldValue;\n                    });\n                    for (var i = 0; i < data.length; i++, currentIndex++) {\n                        promise = dataManager.insert(data[i], this.getTable(), this.getQuery(), currentIndex);\n                    }\n                    return promise;\n                }\n                else {\n                    return dataManager.saveChanges(params, this.keyField, this.getTable(), this.getQuery());\n                }\n            default:\n                return promise;\n        }\n    };\n    Data.prototype.modifyArrayData = function (onLineData, e) {\n        if (onLineData.length === e.length) {\n            for (var i = 0; i < e.length; i++) {\n                onLineData[i] = extend(onLineData[i], e[i]);\n            }\n        }\n        return onLineData;\n    };\n    /**\n     * The function is used to refresh the UI once the data manager action is completed\n     *\n     * @param {ActionEventArgs} args Accepts the ActionEventArgs to refresh UI.\n     * @param {number} position Accepts the index to refresh UI.\n     * @param {boolean} isDropped Accepts the boolean value based on based if it is dragged and dropped\n     * @returns {void}\n     */\n    Data.prototype.refreshUI = function (args, position, isDropped) {\n        var _this = this;\n        if (this.parent.enableVirtualization) {\n            this.parent.virtualLayoutModule.columnData = this.parent.virtualLayoutModule.getColumnCards();\n            args.addedRecords.forEach(function (data, index) {\n                _this.parent.virtualLayoutModule.renderCardBasedOnIndex(data, position + index, isDropped, args.requestType);\n            });\n            args.changedRecords.forEach(function (data) {\n                _this.parent.virtualLayoutModule.removeCard(data);\n                _this.parent.virtualLayoutModule.renderCardBasedOnIndex(data, position, isDropped, args.requestType);\n                if (_this.parent.virtualLayoutModule.isSelectedCard) {\n                    _this.parent.actionModule.SingleCardSelection(data);\n                }\n                if (_this.parent.sortSettings.field && _this.parent.sortSettings.sortBy === 'Index'\n                    && _this.parent.sortSettings.direction === 'Descending' && position > 0) {\n                    --position;\n                }\n                else {\n                    position++;\n                }\n            });\n            args.deletedRecords.forEach(function (data) {\n                _this.parent.virtualLayoutModule.removeCard(data);\n            });\n            this.parent.virtualLayoutModule.refresh();\n        }\n        else {\n            this.parent.layoutModule.columnData = this.parent.layoutModule.getColumnCards();\n            if (this.parent.swimlaneSettings.keyField) {\n                this.parent.layoutModule.kanbanRows = this.parent.layoutModule.getRows();\n                this.parent.layoutModule.swimlaneData = this.parent.layoutModule.getSwimlaneCards();\n            }\n            args.addedRecords.forEach(function (data, index) {\n                if (_this.parent.swimlaneSettings.keyField && !data[_this.parent.swimlaneSettings.keyField]) {\n                    data[_this.parent.swimlaneSettings.keyField] = '';\n                }\n                _this.parent.layoutModule.renderCardBasedOnIndex(data, position + index);\n            });\n            args.changedRecords.forEach(function (data) {\n                if (_this.parent.swimlaneSettings.keyField && !data[_this.parent.swimlaneSettings.keyField]) {\n                    data[_this.parent.swimlaneSettings.keyField] = '';\n                }\n                _this.parent.layoutModule.removeCard(data);\n                _this.parent.layoutModule.renderCardBasedOnIndex(data, position);\n                if (_this.parent.layoutModule.isSelectedCard) {\n                    _this.parent.actionModule.SingleCardSelection(data);\n                }\n                if (_this.parent.sortSettings.field && _this.parent.sortSettings.sortBy === 'Index'\n                    && _this.parent.sortSettings.direction === 'Descending' && position > 0) {\n                    --position;\n                }\n                else {\n                    position++;\n                }\n            });\n            args.deletedRecords.forEach(function (data) {\n                _this.parent.layoutModule.removeCard(data);\n            });\n            this.parent.layoutModule.refresh();\n        }\n        this.parent.renderTemplates();\n        this.parent.notify(events.contentReady, {});\n        this.parent.trigger(events.dataBound, args, function () { return _this.parent.hideSpinner(); });\n    };\n    return Data;\n}());\nexport { Data };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Holds the configuration of swimlane settings in kanban board.\n */\nvar SwimlaneSettings = /** @class */ (function (_super) {\n    __extends(SwimlaneSettings, _super);\n    function SwimlaneSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], SwimlaneSettings.prototype, \"keyField\", void 0);\n    __decorate([\n        Property()\n    ], SwimlaneSettings.prototype, \"textField\", void 0);\n    __decorate([\n        Property(false)\n    ], SwimlaneSettings.prototype, \"showEmptyRow\", void 0);\n    __decorate([\n        Property(true)\n    ], SwimlaneSettings.prototype, \"showItemCount\", void 0);\n    __decorate([\n        Property(false)\n    ], SwimlaneSettings.prototype, \"allowDragAndDrop\", void 0);\n    __decorate([\n        Property()\n    ], SwimlaneSettings.prototype, \"template\", void 0);\n    __decorate([\n        Property('Ascending')\n    ], SwimlaneSettings.prototype, \"sortDirection\", void 0);\n    __decorate([\n        Property()\n    ], SwimlaneSettings.prototype, \"sortComparer\", void 0);\n    __decorate([\n        Property(true)\n    ], SwimlaneSettings.prototype, \"showUnassignedRow\", void 0);\n    __decorate([\n        Property(false)\n    ], SwimlaneSettings.prototype, \"enableFrozenRows\", void 0);\n    return SwimlaneSettings;\n}(ChildProperty));\nexport { SwimlaneSettings };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Holds the configuration of card settings in kanban board.\n */\nvar CardSettings = /** @class */ (function (_super) {\n    __extends(CardSettings, _super);\n    function CardSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], CardSettings.prototype, \"showHeader\", void 0);\n    __decorate([\n        Property()\n    ], CardSettings.prototype, \"headerField\", void 0);\n    __decorate([\n        Property()\n    ], CardSettings.prototype, \"contentField\", void 0);\n    __decorate([\n        Property()\n    ], CardSettings.prototype, \"tagsField\", void 0);\n    __decorate([\n        Property()\n    ], CardSettings.prototype, \"grabberField\", void 0);\n    __decorate([\n        Property()\n    ], CardSettings.prototype, \"footerCssField\", void 0);\n    __decorate([\n        Property()\n    ], CardSettings.prototype, \"template\", void 0);\n    __decorate([\n        Property('Single')\n    ], CardSettings.prototype, \"selectionType\", void 0);\n    return CardSettings;\n}(ChildProperty));\nexport { CardSettings };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Holds the configuration of editor settings.\n */\nvar DialogSettings = /** @class */ (function (_super) {\n    __extends(DialogSettings, _super);\n    function DialogSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], DialogSettings.prototype, \"template\", void 0);\n    __decorate([\n        Property([])\n    ], DialogSettings.prototype, \"fields\", void 0);\n    __decorate([\n        Property(null)\n    ], DialogSettings.prototype, \"model\", void 0);\n    return DialogSettings;\n}(ChildProperty));\nexport { DialogSettings };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Holds the configuration of columns in kanban board.\n */\nvar Columns = /** @class */ (function (_super) {\n    __extends(Columns, _super);\n    function Columns() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], Columns.prototype, \"keyField\", void 0);\n    __decorate([\n        Property()\n    ], Columns.prototype, \"headerText\", void 0);\n    __decorate([\n        Property()\n    ], Columns.prototype, \"template\", void 0);\n    __decorate([\n        Property(false)\n    ], Columns.prototype, \"allowToggle\", void 0);\n    __decorate([\n        Property(true)\n    ], Columns.prototype, \"isExpanded\", void 0);\n    __decorate([\n        Property()\n    ], Columns.prototype, \"minCount\", void 0);\n    __decorate([\n        Property()\n    ], Columns.prototype, \"maxCount\", void 0);\n    __decorate([\n        Property(true)\n    ], Columns.prototype, \"showItemCount\", void 0);\n    __decorate([\n        Property(false)\n    ], Columns.prototype, \"showAddButton\", void 0);\n    __decorate([\n        Property(true)\n    ], Columns.prototype, \"allowDrag\", void 0);\n    __decorate([\n        Property(true)\n    ], Columns.prototype, \"allowDrop\", void 0);\n    __decorate([\n        Property([])\n    ], Columns.prototype, \"transitionColumns\", void 0);\n    return Columns;\n}(ChildProperty));\nexport { Columns };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Holds the configuration of stacked header settings in kanban board.\n */\nvar StackedHeaders = /** @class */ (function (_super) {\n    __extends(StackedHeaders, _super);\n    function StackedHeaders() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], StackedHeaders.prototype, \"text\", void 0);\n    __decorate([\n        Property()\n    ], StackedHeaders.prototype, \"keyFields\", void 0);\n    return StackedHeaders;\n}(ChildProperty));\nexport { StackedHeaders };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Holds the configuration of sort settings in kanban board.\n */\nvar SortSettings = /** @class */ (function (_super) {\n    __extends(SortSettings, _super);\n    function SortSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Index')\n    ], SortSettings.prototype, \"sortBy\", void 0);\n    __decorate([\n        Property()\n    ], SortSettings.prototype, \"field\", void 0);\n    __decorate([\n        Property('Ascending')\n    ], SortSettings.prototype, \"direction\", void 0);\n    return SortSettings;\n}(ChildProperty));\nexport { SortSettings };\n","/**\n * Kanban CSS Constants\n */\n/** @private */\nexport var ROOT_CLASS = 'e-kanban';\n/** @private */\nexport var RTL_CLASS = 'e-rtl';\n/** @private */\nexport var DEVICE_CLASS = 'e-device';\n/** @private */\nexport var ICON_CLASS = 'e-icons';\n/** @private */\nexport var TEMPLATE_CLASS = 'e-template';\n/** @private */\nexport var SWIMLANE_CLASS = 'e-swimlane';\n/** @private */\nexport var TABLE_CLASS = 'e-kanban-table';\n/** @private */\nexport var HEADER_CLASS = 'e-kanban-header';\n/** @private */\nexport var HEADER_TABLE_CLASS = 'e-header-table';\n/** @private */\nexport var HEADER_CELLS_CLASS = 'e-header-cells';\n/** @private */\nexport var HEADER_WRAP_CLASS = 'e-header-wrap';\n/** @private */\nexport var HEADER_TITLE_CLASS = 'e-header-title';\n/** @private */\nexport var HEADER_TEXT_CLASS = 'e-header-text';\n/** @private */\nexport var HEADER_ICON_CLASS = 'e-header-icon';\n/** @private */\nexport var STACKED_HEADER_ROW_CLASS = 'e-stacked-header-row';\n/** @private */\nexport var STACKED_HEADER_CELL_CLASS = 'e-stacked-header-cell';\n/** @private */\nexport var CONTENT_CELLS_CLASS = 'e-content-cells';\n/** @private */\nexport var CONTENT_CLASS = 'e-kanban-content';\n/** @private */\nexport var CONTENT_TABLE_CLASS = 'e-content-table';\n/** @private */\nexport var HEADER_ROW_TOGGLE_CLASS = 'e-toggle-header';\n/** @private */\nexport var HEADER_ROW_CLASS = 'e-header-row';\n/** @private */\nexport var CONTENT_ROW_CLASS = 'e-content-row';\n/** @private */\nexport var SWIMLANE_ROW_CLASS = 'e-swimlane-row';\n/** @private */\nexport var SWIMLANE_ROW_EXPAND_CLASS = 'e-swimlane-row-expand';\n/** @private */\nexport var SWIMLANE_ROW_COLLAPSE_CLASS = 'e-swimlane-row-collapse';\n/** @private */\nexport var SWIMLANE_ROW_TEXT_CLASS = 'e-swimlane-text';\n/** @private */\nexport var CARD_ITEM_COUNT_CLASS = 'e-item-count';\n/** @private */\nexport var CARD_WRAPPER_CLASS = 'e-card-wrapper';\n/** @private */\nexport var CARD_VIRTUAL_WRAPPER_CLASS = 'e-card-virtual-wrapper';\n/** @private */\nexport var CARD_CLASS = 'e-card';\n/** @private */\nexport var DRAGGABLE_CLASS = 'e-draggable';\n/** @private */\nexport var DROPPABLE_CLASS = 'e-droppable';\n/** @private */\nexport var DRAG_CLASS = 'e-drag';\n/** @private */\nexport var DROP_CLASS = 'e-drop';\n/** @private */\nexport var DISABLED_CLASS = 'e-disabled';\n/** @private */\nexport var CARD_HEADER_CLASS = 'e-card-header';\n/** @private */\nexport var CARD_CONTENT_CLASS = 'e-card-content';\n/** @private */\nexport var CARD_HEADER_TEXT_CLASS = 'e-card-header-caption';\n/** @private */\nexport var CARD_HEADER_TITLE_CLASS = 'e-card-header-title';\n/** @private */\nexport var CARD_TAGS_CLASS = 'e-card-tags';\n/** @private */\nexport var CARD_TAG_CLASS = 'e-card-tag';\n/** @private */\nexport var CARD_COLOR_CLASS = 'e-card-color';\n/** @private */\nexport var CARD_LABEL_CLASS = 'e-card-label';\n/** @private */\nexport var CARD_FOOTER_CLASS = 'e-card-footer';\n/** @private */\nexport var EMPTY_CARD_CLASS = 'e-empty-card';\n/** @private */\nexport var CARD_FOOTER_CSS_CLASS = 'e-card-footer-css';\n/** @private */\nexport var COLUMN_EXPAND_CLASS = 'e-column-expand';\n/** @private */\nexport var COLUMN_COLLAPSE_CLASS = 'e-column-collapse';\n/** @private */\nexport var COLLAPSE_HEADER_TEXT_CLASS = 'e-collapse-header-text';\n/** @private */\nexport var COLLAPSED_CLASS = 'e-collapsed';\n/** @private */\nexport var DIALOG_CLASS = 'e-kanban-dialog';\n/** @private */\nexport var DIALOG_CONTENT_CONTAINER_CLASS = 'e-kanban-dialog-content';\n/** @private */\nexport var FORM_CLASS = 'e-kanban-form';\n/** @private */\nexport var FORM_WRAPPER_CLASS = 'e-kanban-form-wrapper';\n/** @private */\nexport var ERROR_VALIDATION_CLASS = 'e-kanban-error';\n/** @private */\nexport var FIELD_CLASS = 'e-field';\n/** @private */\nexport var DRAGGED_CLONE_CLASS = 'e-target-dragged-clone';\n/** @private */\nexport var CLONED_CARD_CLASS = 'e-cloned-card';\n/** @private */\nexport var DRAGGED_CARD_CLASS = 'e-kanban-dragged-card';\n/** @private */\nexport var DROPPED_CLONE_CLASS = 'e-target-dropped-clone';\n/** @private */\nexport var DROPPING_CLASS = 'e-dropping';\n/** @private */\nexport var BORDER_CLASS = 'e-kanban-border';\n/** @private */\nexport var TOGGLE_VISIBLE_CLASS = 'e-toggle-visible';\n/** @private */\nexport var MULTI_CLONE_CONTENT_CELL_CLASS = 'e-multi-content-cell';\n/** @private */\nexport var MULTI_CARD_WRAPPER_CLASS = 'e-multi-card-wrapper';\n/** @private */\nexport var MULTI_ACTIVE_CLASS = 'e-multi-active';\n/** @private */\nexport var TARGET_MULTI_CLONE_CLASS = 'e-target-multi-clone';\n/** @private */\nexport var MULTI_COLUMN_KEY_CLASS = 'e-column-key';\n/** @private */\nexport var CARD_SELECTION_CLASS = 'e-selection';\n/** @private */\nexport var TOOLTIP_CLASS = 'e-kanban-tooltip';\n/** @private */\nexport var TOOLTIP_TEXT_CLASS = 'e-tooltip-text';\n/** @private */\nexport var SCROLL_CONTAINER_CLASS = 'e-cell-scroll-container';\n/** @private */\nexport var SWIMLANE_HEADER_CLASS = 'e-swimlane-header';\n/** @private */\nexport var SWIMLANE_HEADER_TOOLBAR_CLASS = 'e-swimlane-header-toolbar';\n/** @private */\nexport var TOOLBAR_MENU_CLASS = 'e-toolbar-menu';\n/** @private */\nexport var TOOLBAR_MENU_ICON_CLASS = 'e-icon-menu';\n/** @private */\nexport var TOOLBAR_LEVEL_TITLE_CLASS = 'e-toolbar-level-title';\n/** @private */\nexport var TOOLBAR_SWIMLANE_NAME_CLASS = 'e-toolbar-swimlane-name';\n/** @private */\nexport var SWIMLANE_OVERLAY_CLASS = 'e-swimlane-overlay';\n/** @private */\nexport var SWIMLANE_CONTENT_CLASS = 'e-swimlane-content';\n/** @private */\nexport var SWIMLANE_RESOURCE_CLASS = 'e-swimlane-resource';\n/** @private */\nexport var SWIMLANE_TREE_CLASS = 'e-swimlane-tree';\n/** @private */\nexport var LIMITS_CLASS = 'e-limits';\n/** @private */\nexport var MAX_COUNT_CLASS = 'e-max-count';\n/** @private */\nexport var MIN_COUNT_CLASS = 'e-min-count';\n/** @private */\nexport var MAX_COLOR_CLASS = 'e-max-color';\n/** @private */\nexport var MIN_COLOR_CLASS = 'e-min-color';\n/** @private */\nexport var POPUP_EVENT_CLASS = 'e-event-popup';\n/** @private */\nexport var POPUP_HEADER_CLASS = 'e-popup-header';\n/** @private */\nexport var CLOSE_CLASS = 'e-close';\n/** @private */\nexport var POPUP_CONTENT_CLASS = 'e-popup-content';\n/** @private */\nexport var POPUP_WRAPPER_CLASS = 'e-mobile-popup-wrapper';\n/** @private */\nexport var CLOSE_ICON_CLASS = 'e-close-icon';\n/** @private */\nexport var POPUP_OPEN_CLASS = 'e-popup-open';\n/** @private */\nexport var DIALOG_CONTENT_CONTAINER = 'e-kanban-dialog-content';\n/** @private */\nexport var SHOW_ADD_BUTTON = 'e-show-add-button';\n/** @private */\nexport var SHOW_ADD_ICON = 'e-show-add-icon';\n/** @private */\nexport var SHOW_ADD_FOCUS = 'e-show-add-focus';\n/** @private */\nexport var FROZEN_SWIMLANE_ROW_CLASS = 'e-frozen-swimlane-row';\n/** @private */\nexport var FROZEN_ROW_CLASS = 'e-frozen-row';\n/** @private */\nexport var TOOLBAR_SWIMLANE_ITEM_COUNT_CLASS = 'e-toolbar-swimlane-item-count';\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { closest, classList, createElement, remove, addClass, removeClass, isNullOrUndefined as isNoU, formatUnit, createInstance, detach } from '@syncfusion/ej2-base';\nimport { Columns } from '../models/columns';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Action module is used to perform card actions.\n */\nvar Action = /** @class */ (function () {\n    /**\n     * Constructor for action module\n     *\n     * @param {Kanban} parent Accepts the kanban instance\n     * @private\n     */\n    function Action(parent) {\n        this.parent = parent;\n        this.columnToggleArray = [];\n        this.selectionArray = [];\n        this.lastCardSelection = null;\n        this.lastSelectionRow = null;\n        this.lastCard = null;\n        this.selectedCardsElement = [];\n        this.selectedCardsData = [];\n        this.hideColumnKeys = [];\n    }\n    Action.prototype.clickHandler = function (e) {\n        var elementSelector = '.' + cls.CARD_CLASS + ',.' + cls.HEADER_ICON_CLASS + ',.' + cls.CONTENT_ROW_CLASS + '.' +\n            cls.SWIMLANE_ROW_CLASS + ',.' + cls.SHOW_ADD_BUTTON + ',.' + cls.FROZEN_SWIMLANE_ROW_CLASS + ',.' + cls.CONTENT_ROW_CLASS +\n            ':not(.' + cls.SWIMLANE_ROW_CLASS + ') .' + cls.CONTENT_CELLS_CLASS;\n        var target = closest(e.target, elementSelector);\n        if (!target) {\n            return;\n        }\n        if (target.classList.contains(cls.CARD_CLASS)) {\n            if (this.parent.allowKeyboard) {\n                this.parent.keyboardModule.cardTabIndexRemove();\n            }\n            this.cardClick(e);\n        }\n        else if (target.classList.contains(cls.HEADER_ICON_CLASS)) {\n            this.columnExpandCollapse(e);\n        }\n        else if (target.classList.contains(cls.CONTENT_ROW_CLASS) && target.classList.contains(cls.SWIMLANE_ROW_CLASS)) {\n            this.rowExpandCollapse(e);\n        }\n        else if (target.classList.contains(cls.SHOW_ADD_BUTTON)) {\n            this.addButtonClick(target);\n        }\n        else if (target.classList.contains(cls.FROZEN_SWIMLANE_ROW_CLASS)) {\n            var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.SWIMLANE_ROW_CLASS));\n            var targetIcon = this.parent.layoutModule.frozenSwimlaneRow.querySelector('.' + cls.ICON_CLASS);\n            this.rowExpandCollapse(e, swimlaneRows[this.parent.layoutModule.frozenOrder]);\n            var isCollapsed = targetIcon.classList.contains(cls.SWIMLANE_ROW_COLLAPSE_CLASS) ? true : false;\n            if (isCollapsed) {\n                classList(targetIcon, [cls.SWIMLANE_ROW_EXPAND_CLASS], [cls.SWIMLANE_ROW_COLLAPSE_CLASS]);\n            }\n            else {\n                classList(targetIcon, [cls.SWIMLANE_ROW_COLLAPSE_CLASS], [cls.SWIMLANE_ROW_EXPAND_CLASS]);\n            }\n        }\n    };\n    Action.prototype.addButtonClick = function (target) {\n        var _this = this;\n        var newData = {};\n        if (this.parent.kanbanData.length === 0) {\n            newData[this.parent.cardSettings.headerField] = 1;\n        }\n        else if (typeof (this.parent.kanbanData[0])[this.parent.cardSettings.headerField] === 'number') {\n            var id = this.parent.kanbanData.map(function (obj) {\n                return parseInt(obj[_this.parent.cardSettings.headerField], 10);\n            });\n            newData[this.parent.cardSettings.headerField] = Math.max.apply(Math, id) + 1;\n        }\n        newData[this.parent.keyField] = closest(target, '.' + cls.CONTENT_CELLS_CLASS).getAttribute('data-key');\n        if (this.parent.sortSettings.sortBy === 'Index') {\n            newData[this.parent.sortSettings.field] = 1;\n            if (closest(target, '.' + cls.CONTENT_CELLS_CLASS).querySelector('.' + cls.CARD_CLASS)) {\n                var card = this.parent.sortSettings.direction === 'Ascending' ?\n                    target.nextElementSibling.classList.contains(cls.BORDER_CLASS) ?\n                        target.nextElementSibling.nextElementSibling.lastElementChild : target.nextElementSibling.lastElementChild\n                    : target.nextElementSibling.classList.contains(cls.BORDER_CLASS) ?\n                        target.nextElementSibling.nextElementSibling.firstElementChild : target.nextElementSibling.firstElementChild;\n                var data = this.parent.getCardDetails(card);\n                newData[this.parent.sortSettings.field] = data[this.parent.sortSettings.field] + 1;\n            }\n        }\n        if (this.parent.kanbanData.length !== 0 && this.parent.swimlaneSettings.keyField &&\n            closest(target, '.' + cls.CONTENT_ROW_CLASS).previousElementSibling) {\n            newData[this.parent.swimlaneSettings.keyField] =\n                closest(target, '.' + cls.CONTENT_ROW_CLASS).previousElementSibling.getAttribute('data-key');\n        }\n        this.parent.openDialog('Add', newData);\n    };\n    Action.prototype.doubleClickHandler = function (e) {\n        var target = closest(e.target, '.' + cls.CARD_CLASS);\n        if (target) {\n            this.cardDoubleClick(e);\n        }\n    };\n    Action.prototype.cardClick = function (e, selectedCard) {\n        var _this = this;\n        var target = closest((selectedCard) ? selectedCard : e.target, '.' + cls.CARD_CLASS);\n        var cardClickObj = this.parent.getCardDetails(target);\n        if (cardClickObj) {\n            this.parent.activeCardData = { data: cardClickObj, element: target };\n            var args = { data: cardClickObj, element: target, cancel: false, event: e };\n            this.parent.trigger(events.cardClick, args, function (clickArgs) {\n                if (!clickArgs.cancel) {\n                    if (target.classList.contains(cls.CARD_SELECTION_CLASS) && e.type === 'click') {\n                        removeClass([target], cls.CARD_SELECTION_CLASS);\n                        if (_this.parent.enableVirtualization) {\n                            _this.parent.virtualLayoutModule.disableAttributeSelection(target);\n                        }\n                        else {\n                            _this.parent.layoutModule.disableAttributeSelection(target);\n                        }\n                    }\n                    else {\n                        var isCtrlKey = e.ctrlKey;\n                        if (_this.parent.isAdaptive && _this.parent.touchModule) {\n                            isCtrlKey = (_this.parent.touchModule.mobilePopup && _this.parent.touchModule.tabHold) || isCtrlKey;\n                        }\n                        _this.cardSelection(target, isCtrlKey, e.shiftKey);\n                    }\n                    if (_this.parent.isAdaptive && _this.parent.touchModule) {\n                        _this.parent.touchModule.updatePopupContent();\n                    }\n                    var cell = closest(target, '.' + cls.CONTENT_CELLS_CLASS);\n                    if (_this.parent.allowKeyboard) {\n                        var element = [].slice.call(cell.querySelectorAll('.' + cls.CARD_CLASS));\n                        element.forEach(function (e) { e.setAttribute('tabindex', '0'); });\n                        _this.parent.keyboardModule.addRemoveTabIndex('Remove');\n                    }\n                }\n            });\n        }\n    };\n    Action.prototype.cardDoubleClick = function (e) {\n        var _this = this;\n        var target = closest(e.target, '.' + cls.CARD_CLASS);\n        var cardDoubleClickObj = this.parent.getCardDetails(target);\n        this.parent.activeCardData = { data: cardDoubleClickObj, element: target };\n        this.cardSelection(target, false, false);\n        var args = { data: cardDoubleClickObj, element: target, cancel: false, event: e };\n        this.parent.trigger(events.cardDoubleClick, args, function (doubleClickArgs) {\n            if (!doubleClickArgs.cancel) {\n                _this.parent.dialogModule.openDialog('Edit', args.data);\n            }\n        });\n    };\n    Action.prototype.rowExpandCollapse = function (e, isFrozenElem) {\n        var _this = this;\n        var headerTarget = (e instanceof HTMLElement) ? e : e.target;\n        var currentSwimlaneHeader = !isNoU(isFrozenElem) ? isFrozenElem : headerTarget;\n        var args = { cancel: false, target: headerTarget, requestType: 'rowExpandCollapse' };\n        this.parent.trigger(events.actionBegin, args, function (actionArgs) {\n            if (!actionArgs.cancel) {\n                var target = closest(currentSwimlaneHeader, '.' + cls.SWIMLANE_ROW_CLASS);\n                var key = target.getAttribute('data-key');\n                var tgtRow = _this.parent.element.querySelector('.' + cls.CONTENT_ROW_CLASS + (\":nth-child(\" + (target.rowIndex + 2) + \")\"));\n                var targetIcon = target.querySelector(\".\" + cls.SWIMLANE_ROW_EXPAND_CLASS + \",.\" + cls.SWIMLANE_ROW_COLLAPSE_CLASS);\n                var isCollapsed = target.classList.contains(cls.COLLAPSED_CLASS) ? true : false;\n                var tabIndex_1;\n                if (isCollapsed) {\n                    removeClass([tgtRow, target], cls.COLLAPSED_CLASS);\n                    classList(targetIcon, [cls.SWIMLANE_ROW_EXPAND_CLASS], [cls.SWIMLANE_ROW_COLLAPSE_CLASS]);\n                    _this.parent.swimlaneToggleArray.splice(_this.parent.swimlaneToggleArray.indexOf(key), 1);\n                    tabIndex_1 = '0';\n                }\n                else {\n                    addClass([tgtRow, target], cls.COLLAPSED_CLASS);\n                    classList(targetIcon, [cls.SWIMLANE_ROW_COLLAPSE_CLASS], [cls.SWIMLANE_ROW_EXPAND_CLASS]);\n                    _this.parent.swimlaneToggleArray.push(key);\n                    tabIndex_1 = '-1';\n                }\n                targetIcon.setAttribute('aria-label', isCollapsed ? key + ' Expand' : key + ' Collapse');\n                target.setAttribute('aria-expanded', isCollapsed.toString());\n                tgtRow.setAttribute('aria-expanded', isCollapsed.toString());\n                var rows = [].slice.call(tgtRow.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS));\n                rows.forEach(function (cell) { cell.setAttribute('tabindex', tabIndex_1); });\n                _this.parent.notify(events.contentReady, {});\n                _this.parent.trigger(events.actionComplete, { target: headerTarget, requestType: 'rowExpandCollapse' });\n            }\n        });\n    };\n    Action.prototype.columnExpandCollapse = function (e) {\n        var _this = this;\n        var headerTarget = (e instanceof HTMLElement) ? e : e.target;\n        var args = { cancel: false, target: headerTarget, requestType: 'columnExpandCollapse' };\n        this.parent.trigger(events.actionBegin, args, function (actionArgs) {\n            if (!actionArgs.cancel) {\n                var target = closest(headerTarget, '.' + cls.HEADER_CELLS_CLASS);\n                var colIndex = target.cellIndex;\n                _this.columnToggle(target);\n                var collapsed = _this.parent.element.querySelectorAll(\".\" + cls.HEADER_CELLS_CLASS + \".\" + cls.COLLAPSED_CLASS).length;\n                if (collapsed === (_this.parent.columns.length - _this.hideColumnKeys.length)) {\n                    var index = (colIndex + 1 === collapsed) ? 1 : colIndex + 2;\n                    var headerSelector = \".\" + cls.HEADER_CELLS_CLASS + \":not(.\" + cls.STACKED_HEADER_CELL_CLASS + \"):nth-child(\" + index + \")\";\n                    var nextCol = _this.parent.element.querySelector(headerSelector);\n                    addClass([nextCol], cls.COLLAPSED_CLASS);\n                    _this.columnToggle(nextCol);\n                }\n                _this.parent.notify(events.contentReady, {});\n                _this.parent.trigger(events.actionComplete, { target: headerTarget, requestType: 'columnExpandCollapse' });\n            }\n        });\n    };\n    Action.prototype.columnToggle = function (target) {\n        var _this = this;\n        var colIndex = target.cellIndex;\n        var elementSelector = \".\" + cls.CONTENT_ROW_CLASS + \":not(.\" + cls.SWIMLANE_ROW_CLASS + \")\";\n        var targetRow = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n        var colSelector = \".\" + cls.TABLE_CLASS + \" col:nth-child(\" + (colIndex + 1) + \")\";\n        var targetIcon = target.querySelector(\".\" + cls.COLUMN_EXPAND_CLASS + \",.\" + cls.COLUMN_COLLAPSE_CLASS);\n        var colGroup = [].slice.call(this.parent.element.querySelectorAll(colSelector));\n        if (target.classList.contains(cls.COLLAPSED_CLASS)) {\n            removeClass(colGroup, cls.COLLAPSED_CLASS);\n            if (this.parent.isAdaptive) {\n                if (this.parent.enableVirtualization) {\n                    colGroup.forEach(function (col) { return col.style.width = formatUnit(_this.parent.virtualLayoutModule.getWidth()); });\n                }\n                else {\n                    colGroup.forEach(function (col) { return col.style.width = formatUnit(_this.parent.layoutModule.getWidth()); });\n                }\n            }\n            classList(targetIcon, [cls.COLUMN_EXPAND_CLASS], [cls.COLUMN_COLLAPSE_CLASS]);\n            var _loop_1 = function (row) {\n                var targetCol = row.querySelector(\".\" + cls.CONTENT_CELLS_CLASS + \":nth-child(\" + (colIndex + 1) + \")\");\n                removeClass([targetCol, target], cls.COLLAPSED_CLASS);\n                remove(targetCol.querySelector('.' + cls.COLLAPSE_HEADER_TEXT_CLASS));\n                target.setAttribute('aria-expanded', 'true');\n                targetCol.setAttribute('aria-expanded', 'true');\n                var collapsedCell = [].slice.call(targetCol.parentElement.querySelectorAll('.' + cls.COLLAPSED_CLASS));\n                collapsedCell.forEach(function (cell) {\n                    var collapasedText = cell.querySelector('.' + cls.COLLAPSE_HEADER_TEXT_CLASS);\n                    collapasedText.style.height = 'auto';\n                    if (collapasedText && targetCol.getBoundingClientRect().height < (collapasedText.getBoundingClientRect().height + 10)) {\n                        collapasedText.style.height = (targetCol.getBoundingClientRect().height - 4) + 'px';\n                    }\n                });\n            };\n            for (var _i = 0, targetRow_1 = targetRow; _i < targetRow_1.length; _i++) {\n                var row = targetRow_1[_i];\n                _loop_1(row);\n            }\n            if (this.parent.kanbanData.length === 0 && targetRow.length === 0) {\n                removeClass([target], cls.COLLAPSED_CLASS);\n                target.setAttribute('aria-expanded', 'true');\n            }\n            this.columnToggleArray.splice(this.columnToggleArray.indexOf(target.getAttribute('data-key')), 1);\n            this.parent.columns[colIndex].setProperties({ isExpanded: true }, true);\n            target.querySelector('.e-header-icon').setAttribute('aria-label', target.getAttribute('data-key') + ' Expand');\n        }\n        else {\n            addClass(colGroup, cls.COLLAPSED_CLASS);\n            if (this.parent.isAdaptive) {\n                colGroup.forEach(function (col) { return col.style.width = formatUnit(events.toggleWidth); });\n            }\n            classList(targetIcon, [cls.COLUMN_COLLAPSE_CLASS], [cls.COLUMN_EXPAND_CLASS]);\n            var key = target.getAttribute('data-key');\n            var _loop_2 = function (row) {\n                var targetCol = row.querySelector(\".\" + cls.CONTENT_CELLS_CLASS + \"[data-key=\\\"\" + key + \"\\\"]\");\n                var index = targetCol.cellIndex;\n                var text = void 0;\n                if (!this_1.parent.enableVirtualization) {\n                    text = (this_1.parent.columns[index].showItemCount ? '[' +\n                        targetCol.querySelectorAll('.' + cls.CARD_CLASS).length + '] ' : '') + this_1.parent.columns[index].headerText;\n                }\n                else {\n                    var value = this_1.parent.dataModule.isRemote() ?\n                        this_1.parent.columnDataCount[this_1.parent.columns[index].keyField]\n                        : this_1.parent.virtualLayoutModule.columnData[this_1.parent.columns[index].keyField].length;\n                    text = (this_1.parent.columns[index].showItemCount ? '[' +\n                        value + '] ' : '') + this_1.parent.columns[index].headerText;\n                }\n                targetCol.appendChild(createElement('div', { className: cls.COLLAPSE_HEADER_TEXT_CLASS, innerHTML: text }));\n                addClass([targetCol, target], cls.COLLAPSED_CLASS);\n                target.setAttribute('aria-expanded', 'false');\n                targetCol.setAttribute('aria-expanded', 'false');\n                var collapsedCell = [].slice.call(targetCol.parentElement.querySelectorAll('.' + cls.COLLAPSED_CLASS));\n                collapsedCell.forEach(function (cell) {\n                    var collapasedText = cell.querySelector('.' + cls.COLLAPSE_HEADER_TEXT_CLASS);\n                    if (collapasedText && targetCol.getBoundingClientRect().height < (collapasedText.getBoundingClientRect().height + 10)) {\n                        collapasedText.style.height = (targetCol.getBoundingClientRect().height - 4) + 'px';\n                    }\n                });\n            };\n            var this_1 = this;\n            for (var _a = 0, targetRow_2 = targetRow; _a < targetRow_2.length; _a++) {\n                var row = targetRow_2[_a];\n                _loop_2(row);\n            }\n            if (this.parent.kanbanData.length === 0 && targetRow.length === 0) {\n                addClass([target], cls.COLLAPSED_CLASS);\n                target.setAttribute('aria-expanded', 'false');\n            }\n            this.columnToggleArray.push(target.getAttribute('data-key'));\n            this.parent.columns[colIndex].setProperties({ isExpanded: false }, true);\n            target.querySelector('.e-header-icon').setAttribute('aria-label', key + ' Collapse');\n        }\n    };\n    Action.prototype.cardSelection = function (target, isCtrl, isShift) {\n        var _this = this;\n        if (!target) {\n            return;\n        }\n        var cards = this.parent.getSelectedCards();\n        if (this.parent.cardSettings.selectionType !== 'None') {\n            var contentRow = closest(target, '.' + cls.CONTENT_ROW_CLASS);\n            var index = !isNoU(this.lastSelectionRow) ? this.lastSelectionRow.rowIndex : contentRow.rowIndex;\n            if (index !== contentRow.rowIndex && (isCtrl || isShift) && this.parent.cardSettings.selectionType === 'Multiple') {\n                return;\n            }\n            if (cards.length !== 0 && (!isCtrl || this.parent.cardSettings.selectionType === 'Single')) {\n                removeClass(cards, cls.CARD_SELECTION_CLASS);\n                if (this.parent.enableVirtualization) {\n                    this.parent.virtualLayoutModule.disableAttributeSelection(cards);\n                }\n                else {\n                    this.parent.layoutModule.disableAttributeSelection(cards);\n                }\n                cards.forEach(function (el) {\n                    _this.selectionArray.splice(_this.selectionArray.indexOf(el.getAttribute('data-id')), 1);\n                    _this.selectedCardsElement.splice(_this.selectedCardsElement.indexOf(el), 1);\n                    _this.selectedCardsData.splice(_this.selectedCardsData.indexOf(_this.parent.getCardDetails(el), 1));\n                });\n            }\n            if (cards.length > 0 && isShift && this.parent.cardSettings.selectionType === 'Multiple') {\n                var curCards_1 = [];\n                var start = void 0;\n                var end = void 0;\n                var i = void 0;\n                var allCards = [].slice.call(contentRow.querySelectorAll('.' + cls.CARD_CLASS));\n                allCards.forEach(function (el) { return curCards_1.push(el.getAttribute('data-id')); });\n                var curId = target.getAttribute('data-id');\n                var lastId = this.lastCard.getAttribute('data-id');\n                var curIndex = end = curCards_1.indexOf(curId);\n                var lastIndex = start = curCards_1.indexOf(lastId);\n                var select = curIndex > lastIndex ? 'next' : 'prev';\n                if (select === 'prev') {\n                    start = curIndex;\n                    end = lastIndex;\n                }\n                for (i = start; i <= end; i++) {\n                    var card = allCards[i];\n                    addClass([card], cls.CARD_SELECTION_CLASS);\n                    card.setAttribute('aria-selected', 'true');\n                    card.setAttribute('tabindex', '0');\n                    this.selectionArray.push(card.getAttribute('data-id'));\n                    this.selectedCardsElement.push(card);\n                    this.selectedCardsData.push(this.parent.getCardDetails(card));\n                    this.lastCardSelection = card;\n                    if (select === 'prev') {\n                        this.lastCardSelection = allCards[start];\n                    }\n                }\n            }\n            else {\n                addClass([target], cls.CARD_SELECTION_CLASS);\n                target.setAttribute('aria-selected', 'true');\n                target.setAttribute('tabindex', '0');\n                this.selectionArray.push(target.getAttribute('data-id'));\n                this.selectedCardsElement.push(target);\n                this.selectedCardsData.push(this.parent.getCardDetails(target));\n                this.lastCard = this.lastCardSelection = target;\n                this.lastSelectionRow = closest(target, '.' + cls.CONTENT_ROW_CLASS);\n                if (this.lastSelectionRow.previousElementSibling) {\n                    var elementSelector = \".\" + cls.SWIMLANE_ROW_EXPAND_CLASS + \",.\" + cls.SWIMLANE_ROW_COLLAPSE_CLASS;\n                    var parentEle = this.lastSelectionRow.previousElementSibling.querySelector(elementSelector);\n                    if (parentEle && parentEle.classList.contains(cls.SWIMLANE_ROW_COLLAPSE_CLASS)) {\n                        this.rowExpandCollapse(parentEle);\n                    }\n                }\n            }\n        }\n    };\n    Action.prototype.addColumn = function (columnOptions, index) {\n        var addColumn = createInstance(Columns, [this.parent, 'columns', columnOptions, true]);\n        this.parent.columns.splice(index, 0, addColumn);\n        this.parent.notify(events.dataReady, { processedData: this.parent.kanbanData });\n    };\n    Action.prototype.deleteColumn = function (index) {\n        var listKey = this.parent.element.querySelectorAll('.' + cls.HEADER_CELLS_CLASS).item(index);\n        if (listKey && listKey.classList.contains(cls.HEADER_ROW_TOGGLE_CLASS)) {\n            this.columnToggleArray.splice(this.columnToggleArray.indexOf(listKey.getAttribute('data-key'), 0));\n        }\n        this.parent.columns.splice(index, 1);\n        if (this.parent.columns.length === 0) {\n            detach(this.parent.element.querySelector('.' + cls.HEADER_CLASS));\n            detach(this.parent.element.querySelector('.' + cls.CONTENT_CLASS));\n        }\n        else {\n            this.parent.notify(events.dataReady, { processedData: this.parent.kanbanData });\n        }\n    };\n    Action.prototype.showColumn = function (key) {\n        var index = this.hideColumnKeys.indexOf(key.toString());\n        if (index !== -1) {\n            this.hideColumnKeys.splice(index, 1);\n            this.parent.notify(events.dataReady, { processedData: this.parent.kanbanData });\n        }\n    };\n    Action.prototype.hideColumn = function (key) {\n        this.hideColumnKeys.push(key.toString());\n        this.parent.notify(events.dataReady, { processedData: this.parent.kanbanData });\n    };\n    /**\n     * Maintain the single card selection\n     *\n     * @param {Record<string, any>} data - Specifies the selected card data.\n     * @returns {void}\n     * @private\n     * @hidden\n     */\n    Action.prototype.SingleCardSelection = function (data) {\n        if (this.parent.cardSettings.selectionType !== 'None' && data[this.parent.cardSettings.headerField]) {\n            // eslint-disable-next-line no-useless-escape\n            var card = this.parent.element.querySelector('.e-card[data-id=\\\"' +\n                // eslint-disable-next-line no-useless-escape\n                data[this.parent.cardSettings.headerField].toString() + '\"\\]');\n            if (card) {\n                addClass([card], cls.CARD_SELECTION_CLASS);\n                card.setAttribute('aria-selected', 'true');\n                card.setAttribute('tabindex', '0');\n            }\n        }\n    };\n    return Action;\n}());\nexport { Action };\n","import { isNullOrUndefined as isNoU, closest } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Kanban CRUD module\n */\nvar Crud = /** @class */ (function () {\n    /**\n     * Constructor for CRUD module\n     *\n     * @param {Kanban} parent Accepts the kanban instance\n     * @private\n     */\n    function Crud(parent) {\n        this.parent = parent;\n    }\n    Crud.prototype.addCard = function (cardData, index) {\n        var _this = this;\n        var args = {\n            cancel: false, requestType: 'cardCreate', addedRecords: (cardData instanceof Array) ? cardData : [cardData],\n            changedRecords: [], deletedRecords: []\n        };\n        this.parent.trigger(events.actionBegin, args, function (addArgs) {\n            if (!addArgs.cancel) {\n                var modifiedData_1 = [];\n                if (_this.parent.sortSettings.field && _this.parent.sortSettings.sortBy === 'Index') {\n                    if (cardData instanceof Array) {\n                        modifiedData_1 = cardData;\n                    }\n                    else {\n                        modifiedData_1.push(cardData);\n                    }\n                    modifiedData_1.forEach(function (data, index) {\n                        if (!data[_this.parent.sortSettings.field]) {\n                            var columnData = _this.parent.getColumnData(data[_this.parent.keyField]);\n                            if (_this.parent.sortSettings.direction === 'Ascending' && columnData.length > 0) {\n                                data[_this.parent.sortSettings.field] =\n                                    (columnData[columnData.length - 1][_this.parent.sortSettings.field]) + index + 1;\n                            }\n                            else if (_this.parent.sortSettings.direction === 'Descending' && columnData.length > 0) {\n                                data[_this.parent.sortSettings.field] = columnData[0][_this.parent.sortSettings.field] + index + 1;\n                            }\n                            if (columnData.length === 0) {\n                                data[_this.parent.sortSettings.field] = 1;\n                            }\n                        }\n                    });\n                    if (!(cardData instanceof Array)) {\n                        if (!index && _this.parent.sortSettings.direction === 'Descending') {\n                            // eslint-disable-next-line max-len\n                            _this.parent.getColumnData(modifiedData_1[0][_this.parent.keyField]).filter(function (obj, count) {\n                                if (obj[_this.parent.sortSettings.field] === modifiedData_1[0][_this.parent.sortSettings.field]) {\n                                    index = count + 1;\n                                }\n                            });\n                        }\n                    }\n                    if (index !== 0 && !index && _this.parent.sortSettings.direction === 'Descending') {\n                        index = 0;\n                    }\n                    modifiedData_1 = _this.priorityOrder(modifiedData_1, index);\n                }\n                var addedRecords = (cardData instanceof Array) ? cardData : [cardData];\n                var changedRecords = (_this.parent.sortSettings.field && _this.parent.sortSettings.sortBy === 'Index') ? modifiedData_1 : [];\n                var editParms = { addedRecords: addedRecords, changedRecords: changedRecords, deletedRecords: [] };\n                var type = (cardData instanceof Array || modifiedData_1.length > 0) ? 'batch' : 'insert';\n                _this.parent.dataModule.updateDataManager(type, editParms, 'cardCreated', cardData, index);\n            }\n        });\n    };\n    Crud.prototype.getIndexFromData = function (data) {\n        var cardElement = this.parent.element.querySelector(\".\" + cls.CARD_CLASS + \"[data-id=\\\"\" + data[this.parent.cardSettings.headerField] + \"\\\"]\");\n        var element = closest(cardElement, '.' + cls.CONTENT_CELLS_CLASS);\n        var index = [].slice.call(element.querySelectorAll('.' + cls.CARD_CLASS)).indexOf(cardElement);\n        return index;\n    };\n    Crud.prototype.updateCard = function (cardData, index, isDropped, dataDropIndexKeyFieldValue, draggedKey, droppedKey, isMultipleDrag) {\n        var _this = this;\n        var args = {\n            requestType: 'cardChange', cancel: false, addedRecords: [],\n            changedRecords: (cardData instanceof Array) ? cardData : [cardData], deletedRecords: []\n        };\n        index = isNoU(index) ? this.getIndexFromData(args.changedRecords[0]) : index;\n        this.parent.trigger(events.actionBegin, args, function (updateArgs) {\n            if (!updateArgs.cancel) {\n                if (_this.parent.sortSettings.field && _this.parent.sortSettings.sortBy === 'Index') {\n                    var modifiedData = [];\n                    if (cardData instanceof Array) {\n                        modifiedData = cardData;\n                    }\n                    else {\n                        modifiedData.push(cardData);\n                    }\n                    cardData = _this.priorityOrder(modifiedData, index);\n                }\n                var editParms = {\n                    addedRecords: [], changedRecords: (cardData instanceof Array) ? cardData : [cardData], deletedRecords: []\n                };\n                var type = (cardData instanceof Array) ? 'batch' : 'update';\n                _this.parent.dataModule.updateDataManager(type, editParms, 'cardChanged', cardData, index, isDropped, dataDropIndexKeyFieldValue, draggedKey, droppedKey, isMultipleDrag);\n            }\n        });\n    };\n    Crud.prototype.deleteCard = function (cardData) {\n        var _this = this;\n        var editParms = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n        if (typeof cardData === 'string' || typeof cardData === 'number') {\n            editParms.deletedRecords = this.parent.kanbanData.filter(function (data) {\n                return data[_this.parent.cardSettings.headerField] === cardData;\n            });\n        }\n        else {\n            editParms.deletedRecords = (cardData instanceof Array) ? cardData : [cardData];\n        }\n        var args = {\n            requestType: 'cardRemove', cancel: false, addedRecords: [], changedRecords: [], deletedRecords: editParms.deletedRecords\n        };\n        this.parent.trigger(events.actionBegin, args, function (deleteArgs) {\n            if (!deleteArgs.cancel) {\n                var type = (editParms.deletedRecords.length > 1) ? 'batch' : 'delete';\n                var cardData_1 = editParms.deletedRecords;\n                _this.parent.dataModule.updateDataManager(type, editParms, 'cardRemoved', cardData_1[0]);\n            }\n        });\n    };\n    Crud.prototype.priorityOrder = function (cardData, cardIndex) {\n        var _this = this;\n        var cardsId = cardData.map(function (obj) { return obj[_this.parent.cardSettings.headerField]; });\n        var num = cardData[cardData.length - 1][this.parent.sortSettings.field];\n        var allModifiedKeys = cardData.map(function (obj) { return obj[_this.parent.keyField]; });\n        var modifiedKey = allModifiedKeys.filter(function (key, index) { return allModifiedKeys.indexOf(key) === index; }).sort();\n        var columnAllDatas;\n        var finalData = [];\n        var originalIndex = [];\n        var _loop_1 = function (columnKey) {\n            var keyData = cardData.filter(function (cardObj) {\n                return cardObj[_this.parent.keyField] === columnKey;\n            });\n            columnAllDatas = this_1.parent.enableVirtualization ? this_1.parent.virtualLayoutModule.getColumnData(columnKey)\n                : this_1.parent.layoutModule.getColumnData(columnKey);\n            for (var _i = 0, _a = keyData; _i < _a.length; _i++) {\n                var data = _a[_i];\n                if (this_1.parent.swimlaneSettings.keyField) {\n                    var swimlaneDatas = this_1.parent.getSwimlaneData(data[this_1.parent.swimlaneSettings.keyField]);\n                    columnAllDatas = this_1.parent.getColumnData(columnKey, swimlaneDatas);\n                }\n            }\n            keyData.forEach(function (key) { return finalData.push(key); });\n            if (!isNoU(cardIndex)) {\n                var _loop_2 = function (j) {\n                    columnAllDatas.filter(function (data, index) {\n                        if (data[_this.parent.cardSettings.headerField] === cardsId[j] && index <= cardIndex) {\n                            originalIndex.push(index);\n                        }\n                    });\n                };\n                for (var j = 0; j < cardsId.length; j++) {\n                    _loop_2(j);\n                }\n                if (originalIndex.length > 0) {\n                    cardIndex = cardIndex + originalIndex.length;\n                }\n                if (this_1.parent.sortSettings.direction === 'Ascending') {\n                    for (var i = cardIndex; i < columnAllDatas.length; i++) {\n                        if (cardsId.indexOf(columnAllDatas[i][this_1.parent.cardSettings.headerField]) === -1) {\n                            columnAllDatas[i][this_1.parent.sortSettings.field] = ++num;\n                            finalData.push(columnAllDatas[i]);\n                        }\n                    }\n                }\n                else {\n                    for (var i = cardIndex - 1; i >= 0; i--) {\n                        if (cardsId.indexOf(columnAllDatas[i][this_1.parent.cardSettings.headerField]) === -1) {\n                            columnAllDatas[i][this_1.parent.sortSettings.field] = ++num;\n                            finalData.push(columnAllDatas[i]);\n                        }\n                    }\n                }\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, modifiedKey_1 = modifiedKey; _i < modifiedKey_1.length; _i++) {\n            var columnKey = modifiedKey_1[_i];\n            _loop_1(columnKey);\n        }\n        return finalData;\n    };\n    return Crud;\n}());\nexport { Crud };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Draggable, formatUnit, createElement, isNullOrUndefined as isNoU, addClass, closest, detach } from '@syncfusion/ej2-base';\nimport { removeClass, classList, remove, EventHandler, extend } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport * as events from '../base/constant';\n/**\n * Drag and Drop module is used to perform card actions.\n */\nvar DragAndDrop = /** @class */ (function () {\n    /**\n     * Constructor for drag and drop module\n     *\n     * @param {Kanban} parent Accepts the kanban instance\n     * @private\n     */\n    function DragAndDrop(parent) {\n        this.insertClone = 'afterend';\n        this.parent = parent;\n        this.dragObj = {\n            element: null, cloneElement: null, instance: null, targetClone: null, draggedClone: null, targetCloneMulti: null,\n            selectedCards: [], pageX: 0, pageY: 0, navigationInterval: null, cardDetails: [], modifiedData: []\n        };\n        this.dragEdges = { left: false, right: false, top: false, bottom: false };\n        this.isDragging = false;\n        this.isExternalDrop = false;\n    }\n    DragAndDrop.prototype.wireDragEvents = function (element) {\n        var dragContainment;\n        if (!this.parent.element != null && this.parent.externalDropId.length === 0) {\n            dragContainment = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        }\n        this.dragObj.instance = new Draggable(element, {\n            clone: true,\n            enableTapHold: this.parent.isAdaptive,\n            enableTailMode: true,\n            cursorAt: { top: -10, left: -10 },\n            dragArea: dragContainment,\n            dragStart: this.dragStart.bind(this),\n            drag: this.drag.bind(this),\n            dragStop: this.dragStop.bind(this),\n            enableAutoScroll: false,\n            helper: this.dragHelper.bind(this)\n        });\n    };\n    DragAndDrop.prototype.dragHelper = function (e) {\n        if (this.parent.isAdaptive && this.parent.touchModule.mobilePopup &&\n            this.parent.touchModule.mobilePopup.element.classList.contains(cls.POPUP_OPEN_CLASS)) {\n            this.parent.touchModule.mobilePopup.hide();\n        }\n        this.dragObj.element = closest(e.sender.target, '.' + cls.CARD_CLASS);\n        if (isNoU(this.dragObj.element)) {\n            return null;\n        }\n        this.dragObj.element.style.width = formatUnit(this.dragObj.element.offsetWidth);\n        var cloneWrapper = createElement('div', { innerHTML: this.dragObj.element.outerHTML });\n        this.dragObj.cloneElement = cloneWrapper.children.item(0);\n        addClass([this.dragObj.cloneElement], cls.CLONED_CARD_CLASS);\n        this.dragObj.element.parentElement.appendChild(this.dragObj.cloneElement);\n        this.dragObj.targetCloneMulti = createElement('div', { className: cls.TARGET_MULTI_CLONE_CLASS });\n        this.dragObj.targetClone = createElement('div', {\n            className: cls.DROPPED_CLONE_CLASS,\n            styles: 'width:100%;height:' + formatUnit(this.dragObj.element.offsetHeight)\n        });\n        this.dragObj.modifiedData = [];\n        return this.dragObj.cloneElement;\n    };\n    DragAndDrop.prototype.dragStart = function (e) {\n        var _this = this;\n        this.dragObj.selectedCards = this.dragObj.element;\n        this.borderElm = this.parent.element.querySelectorAll('.' + cls.BORDER_CLASS);\n        if (this.dragObj.element.classList.contains(cls.CARD_SELECTION_CLASS)) {\n            var className = '.' + cls.CARD_CLASS + '.' + cls.CARD_SELECTION_CLASS + ':not(.' + cls.CLONED_CARD_CLASS + ')';\n            var closestEle = closest(this.dragObj.element, '.' + cls.CONTENT_ROW_CLASS);\n            this.dragObj.selectedCards = [].slice.call(closestEle.querySelectorAll(className));\n            this.dragObj.selectedCards.forEach(function (element) {\n                _this.dragObj.cardDetails.push(_this.parent.getCardDetails(element));\n            });\n        }\n        else {\n            this.dragObj.cardDetails = [this.parent.getCardDetails(this.dragObj.element)];\n        }\n        if (!isNoU(this.dragObj.selectedCards) && !isNoU(this.dragObj.selectedCards.length) &&\n            this.dragObj.selectedCards.length >= 1) {\n            this.dragObj.selectedCards[0].closest('.e-content-cells').classList.add('e-dragged-column');\n        }\n        else if (!isNoU(this.dragObj.selectedCards) &&\n            !isNoU(this.dragObj.selectedCards.closest('.e-content-cells'))) {\n            this.dragObj.selectedCards.closest('.e-content-cells').classList.add('e-dragged-column');\n        }\n        var dragArgs = { cancel: false, data: this.dragObj.cardDetails, event: e, element: this.dragObj.selectedCards };\n        this.parent.trigger(events.dragStart, dragArgs, function (dragEventArgs) {\n            if (dragEventArgs.cancel) {\n                _this.removeElement(_this.dragObj.cloneElement);\n                _this.dragObj.instance.intDestroy(e);\n                _this.dragObj.element = null;\n                _this.dragObj.targetClone = null;\n                _this.dragObj.draggedClone = null;\n                _this.dragObj.cloneElement = null;\n                _this.dragObj.targetCloneMulti = null;\n                return;\n            }\n            if (_this.dragObj.element.classList.contains(cls.CARD_SELECTION_CLASS)) {\n                _this.dragObj.selectedCards.forEach(function (element) { _this.draggedClone(element); });\n                if (_this.dragObj.selectedCards.length > 1) {\n                    _this.dragObj.cloneElement.innerHTML = '';\n                    var drag = createElement('div', {\n                        className: 'e-multi-card-text',\n                        innerHTML: _this.dragObj.selectedCards.length + ' ' + _this.parent.localeObj.getConstant('cards')\n                    });\n                    _this.dragObj.cloneElement.appendChild(drag);\n                    classList(_this.dragObj.cloneElement, ['e-multi-card-clone'], [cls.CARD_SELECTION_CLASS]);\n                    if (_this.parent.enableVirtualization) {\n                        _this.parent.virtualLayoutModule.disableAttributeSelection(_this.dragObj.cloneElement);\n                    }\n                    else {\n                        _this.parent.layoutModule.disableAttributeSelection(_this.dragObj.cloneElement);\n                    }\n                    _this.dragObj.cloneElement.style.width = '90px';\n                }\n            }\n            else {\n                _this.draggedClone(_this.dragObj.element);\n            }\n            EventHandler.add(document.body, 'keydown', _this.keydownHandler, _this);\n            _this.parent.notify(events.contentReady, {});\n        });\n    };\n    DragAndDrop.prototype.draggedClone = function (element) {\n        this.dragObj.draggedClone = createElement('div', {\n            className: cls.DRAGGED_CLONE_CLASS,\n            styles: 'width:' + formatUnit(element.offsetWidth - 1) + ';height:' + formatUnit(element.offsetHeight)\n        });\n        element.insertAdjacentElement('afterend', this.dragObj.draggedClone);\n        addClass([element], cls.DRAGGED_CARD_CLASS);\n    };\n    DragAndDrop.prototype.drag = function (e) {\n        var _this = this;\n        if (!e.target) {\n            return;\n        }\n        var cardElement = closest(e.target, '.' + cls.ROOT_CLASS + ' .' + cls.CARD_CLASS);\n        if (!isNoU(cardElement) && this.parent.enableVirtualization && !isNoU(e.target.previousElementSibling) &&\n            !isNoU(e.target.previousElementSibling.querySelector('.e-target-dropped-clone'))) {\n            cardElement = e.target.previousElementSibling.querySelector('.e-target-dropped-clone').nextElementSibling;\n        }\n        var targetEle = e.target;\n        if (!isNoU(e.target.parentElement)) {\n            if (e.target.nodeName === 'SPAN' && e.target.classList.contains('e-empty-card')) {\n                targetEle = e.target.parentElement;\n            }\n            else if (e.target.nodeName === 'DIV' && e.target.classList.contains('e-kanban-border')) {\n                if (!(this.parent.element.querySelector('.e-target-dropped-clone') === e.target.nextElementSibling.firstChild)) {\n                    targetEle = e.target.parentElement;\n                }\n            }\n        }\n        var target = cardElement || targetEle;\n        var selector = '.' + cls.CONTENT_ROW_CLASS + ':not(.' + cls.SWIMLANE_ROW_CLASS + ') .' + cls.CONTENT_CELLS_CLASS\n            + '.' + cls.DROPPABLE_CLASS;\n        var contentCell = closest(target, selector);\n        var cellDimension;\n        var borderElem;\n        var dropElement;\n        if (target.nextElementSibling && target.nextElementSibling.lastChild) {\n            dropElement = target.nextElementSibling.lastChild.previousElementSibling;\n        }\n        this.externalDrop(target);\n        this.kanbanObj = this.parent.isExternalKanbanDrop ? this.parent.externalDropObj : this.parent;\n        this.calculateArgs(e);\n        if (contentCell && document.body.style.cursor !== 'not-allowed') {\n            var targetKey = this.getColumnKey(contentCell);\n            var keys = targetKey.split(',');\n            this.multiCloneRemove();\n            var isDrag = (targetKey === this.getColumnKey(closest(this.dragObj.draggedClone, '.' + cls.CONTENT_CELLS_CLASS)))\n                ? true : false;\n            if (keys.length === 1 || isDrag) {\n                if (target.classList.contains(cls.DRAGGED_CLONE_CLASS)) {\n                    this.removeElement(this.dragObj.targetClone, this.kanbanObj);\n                }\n                if (target.classList.contains(cls.CARD_CLASS) || this.insertClone === 'beforebegin') {\n                    var element = target.classList.contains(cls.DRAGGED_CLONE_CLASS) ?\n                        (target.previousElementSibling.classList.contains(cls.DRAGGED_CARD_CLASS) ? null : target.previousElementSibling)\n                        : target.previousElementSibling;\n                    this.insertClone = 'afterend';\n                    if (isNoU(element)) {\n                        var pageY = target.classList.contains(cls.DRAGGED_CLONE_CLASS) ? (this.dragObj.pageY / 2) :\n                            this.dragObj.pageY;\n                        var height = target.classList.contains(cls.DRAGGED_CLONE_CLASS) ? target.offsetHeight :\n                            (target.offsetHeight / 2);\n                        var kanbanTop = this.kanbanObj.element.getBoundingClientRect().top + window.scrollY;\n                        var targetTop = target.getBoundingClientRect().top + window.scrollY;\n                        var relativeTop = targetTop - kanbanTop;\n                        pageY = pageY - kanbanTop;\n                        if ((pageY - relativeTop) < height) {\n                            this.insertClone = 'beforebegin';\n                        }\n                    }\n                    if (target.classList.contains(cls.CARD_CLASS)) {\n                        if (this.parent.enableVirtualization) {\n                            this.insertClone = this.isTargetElementVisible(target) ? this.insertClone : 'beforebegin';\n                        }\n                        target.insertAdjacentElement(this.insertClone, this.dragObj.targetClone);\n                    }\n                }\n                else if (target.classList.contains(cls.CONTENT_CELLS_CLASS) && !closest(target, '.' + cls.SWIMLANE_ROW_CLASS)) {\n                    if (target.querySelectorAll('.' + cls.DRAGGED_CARD_CLASS).length !== 0 &&\n                        target.querySelectorAll('.' + cls.CARD_CLASS + ':not(.e-kanban-dragged-card):not(.e-cloned-card)').length === 0) {\n                        return;\n                    }\n                    else {\n                        target.querySelector('.' + cls.CARD_WRAPPER_CLASS).appendChild(this.dragObj.targetClone);\n                    }\n                }\n                else if ((target.classList.contains(cls.CARD_WRAPPER_CLASS) ||\n                    target.classList.contains(cls.CARD_VIRTUAL_WRAPPER_CLASS)) &&\n                    !closest(target, '.' + cls.SWIMLANE_ROW_CLASS)\n                    && contentCell.querySelectorAll('.' + cls.CARD_CLASS).length === 0) {\n                    target.appendChild(this.dragObj.targetClone);\n                }\n                else if (target.classList.contains(cls.BORDER_CLASS) && !closest(target, '.' + cls.SWIMLANE_ROW_CLASS)\n                    && (target.nextElementSibling && target.nextElementSibling.classList.contains(cls.CARD_WRAPPER_CLASS))\n                    && this.dragObj.targetClone && (!dropElement || !dropElement.classList.contains(cls.DROPPED_CLONE_CLASS))) {\n                    if (!this.parent.enableVirtualization && !this.isTargetElementVisible(target.nextElementSibling)) {\n                        target.nextElementSibling.appendChild(this.dragObj.targetClone);\n                    }\n                }\n            }\n            else if (keys.length > 1 && (contentCell.classList.contains(cls.DROPPING_CLASS) ||\n                contentCell.firstChild && contentCell.firstChild.classList.contains(cls.DROPPING_CLASS))) {\n                this.multiCloneCreate(keys, contentCell);\n            }\n            this.kanbanObj.notify(events.contentReady, {});\n        }\n        if (this.kanbanObj.element.querySelectorAll('.' + cls.DROPPING_CLASS).length === 0) {\n            this.cellDropping();\n        }\n        var isCollapsed = false;\n        if (contentCell) {\n            isCollapsed = contentCell.classList.contains(cls.COLLAPSED_CLASS) && contentCell.classList.contains(cls.DROPPING_CLASS);\n            if (contentCell.getAttribute('aria-expanded') === 'true' || !contentCell.parentElement.hasAttribute('aria-expanded')) {\n                cellDimension = contentCell.getBoundingClientRect();\n                this.updateDimension(cellDimension);\n            }\n            borderElem = contentCell.querySelector('.' + cls.BORDER_CLASS);\n        }\n        if (target && target.tagName === 'TABLE' && !isNoU(target.querySelector('.' + cls.CONTENT_ROW_CLASS))) {\n            cellDimension = target.querySelector('.' + cls.CONTENT_ROW_CLASS).getBoundingClientRect();\n            this.updateDimension(cellDimension, target);\n        }\n        if (isCollapsed) {\n            this.toggleVisible(target);\n            addClass([contentCell], cls.TOGGLE_VISIBLE_CLASS);\n        }\n        var tColumn = [].slice.call(this.kanbanObj.element.querySelectorAll('.' + cls.TOGGLE_VISIBLE_CLASS));\n        if (tColumn.length > 0 && !target.classList.contains(cls.TOGGLE_VISIBLE_CLASS)\n            && !closest(target, '.' + cls.TOGGLE_VISIBLE_CLASS)) {\n            this.toggleVisible(target, tColumn.slice(-1)[0]);\n            removeClass(tColumn, cls.TOGGLE_VISIBLE_CLASS);\n        }\n        this.kanbanObj.notify(events.contentReady, {});\n        var multiKeyTarget = closest(target, '.' + cls.MULTI_COLUMN_KEY_CLASS);\n        if (multiKeyTarget) {\n            var columnKeys = [].slice.call(this.kanbanObj.element.querySelectorAll('.' + cls.MULTI_COLUMN_KEY_CLASS + ':not(.' +\n                cls.DISABLED_CLASS + ')')).filter(function (element) { return _this.getColumnKey(element) === _this.getColumnKey(multiKeyTarget); });\n            if (columnKeys.length > 0) {\n                addClass(columnKeys, cls.MULTI_ACTIVE_CLASS);\n                if (columnKeys[0].previousElementSibling) {\n                    addClass([columnKeys[0].previousElementSibling], 'e-multi-bottom-border');\n                }\n            }\n        }\n        document.body.style.cursor = (contentCell && contentCell.classList.contains(cls.DROPPING_CLASS) ||\n            (contentCell && borderElem && borderElem.classList.contains(cls.DROPPING_CLASS))) ? '' : 'not-allowed';\n        if (cardElement && !(closest(cardElement, '.' + cls.CONTENT_CELLS_CLASS)).classList.contains(cls.DROPPING_CLASS) &&\n            !(contentCell && borderElem && borderElem.classList.contains(cls.DROPPING_CLASS))) {\n            cardElement.style.cursor = 'not-allowed';\n            document.body.style.cursor = 'not-allowed';\n        }\n        if (this.isExternalDrop && document.body.style.cursor === 'not-allowed') {\n            document.body.style.cursor = '';\n        }\n        if (document.body.style.cursor === 'not-allowed') {\n            this.removeElement(this.dragObj.targetClone, this.kanbanObj);\n            this.multiCloneRemove();\n        }\n        this.updateScrollPosition();\n        var dragArgs = { data: this.dragObj.cardDetails, event: e, element: this.dragObj.selectedCards };\n        this.kanbanObj.trigger(events.drag, dragArgs);\n        this.parent.isExternalKanbanDrop = false;\n        this.isExternalDrop = false;\n    };\n    DragAndDrop.prototype.removeElement = function (element, kanbanObj) {\n        kanbanObj = kanbanObj ? kanbanObj : this.parent;\n        if (kanbanObj.element.getElementsByClassName(element.className).length > 0) {\n            remove(element);\n        }\n    };\n    DragAndDrop.prototype.isTargetElementVisible = function (targetElem) {\n        var wrapperElem = closest(targetElem, '.' + cls.CARD_WRAPPER_CLASS);\n        if (!isNoU(wrapperElem)) {\n            var wrapperElemBottom = wrapperElem.getBoundingClientRect().bottom;\n            var targetElemBottom = targetElem.getBoundingClientRect().bottom;\n            if (targetElemBottom > wrapperElemBottom) {\n                return false;\n            }\n            return true;\n        }\n        return true;\n    };\n    DragAndDrop.prototype.externalDrop = function (target) {\n        var _this = this;\n        this.parent.externalDropId.forEach(function (externalDropId) {\n            var targetRootElement = closest(target, externalDropId);\n            if (targetRootElement) {\n                if (targetRootElement.classList.contains('e-kanban')) {\n                    _this.parent.externalDropObj = document.querySelector(externalDropId).ej2_instances[0];\n                    _this.parent.isExternalKanbanDrop = true;\n                    var className = '.' + cls.CONTENT_ROW_CLASS + ':not(.' + cls.SWIMLANE_ROW_CLASS +\n                        '):not(.' + cls.COLLAPSED_CLASS + ') .' + cls.CONTENT_CELLS_CLASS;\n                    var cells = [].slice.call(_this.parent.externalDropObj.element.querySelectorAll(className));\n                    addClass(cells, cls.DROPPING_CLASS);\n                }\n                else {\n                    _this.isExternalDrop = true;\n                }\n            }\n        });\n    };\n    DragAndDrop.prototype.multiCloneCreate = function (keys, contentCell) {\n        var offsetHeight = contentCell.offsetHeight;\n        var limitEle = contentCell.querySelector('.' + cls.LIMITS_CLASS);\n        if (limitEle) {\n            offsetHeight -= limitEle.offsetHeight;\n        }\n        this.dragObj.targetCloneMulti.style.height = formatUnit(offsetHeight);\n        if (contentCell.querySelector('.' + cls.SHOW_ADD_BUTTON)) {\n            addClass([contentCell.querySelector('.' + cls.SHOW_ADD_BUTTON)], cls.MULTI_CARD_WRAPPER_CLASS);\n        }\n        addClass([contentCell.querySelector('.' + cls.CARD_WRAPPER_CLASS)], cls.MULTI_CARD_WRAPPER_CLASS);\n        contentCell.querySelector('.' + cls.CARD_WRAPPER_CLASS).style.height = 'auto';\n        contentCell.style.borderStyle = 'none';\n        this.removeElement(this.dragObj.targetClone);\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n            var key = keys_1[_i];\n            var dragCell = closest(this.dragObj.draggedClone, '.' + cls.CONTENT_CELLS_CLASS);\n            var transition = this.kanbanObj.columns[dragCell.cellIndex].transitionColumns;\n            var allowTransition = this.allowedTransition(this.dragObj.element.getAttribute('data-key'), key, transition);\n            var name_1 = allowTransition ? '' : ' ' + cls.DISABLED_CLASS;\n            var colKey = createElement('div', {\n                className: cls.MULTI_COLUMN_KEY_CLASS + name_1,\n                attrs: { 'data-key': key.trim() }\n            });\n            var text = createElement('div', { className: 'e-text', innerHTML: key.trim() });\n            contentCell.appendChild(this.dragObj.targetCloneMulti).appendChild(colKey).appendChild(text);\n            colKey.style.cursor = allowTransition ? '' : 'not-allowed';\n            colKey.style.lineHeight = colKey.style.height = formatUnit((offsetHeight / keys.length));\n            text.style.top = formatUnit((offsetHeight / 2) - (text.offsetHeight / 2));\n        }\n    };\n    DragAndDrop.prototype.allowedTransition = function (currentCardKey, targetCardKey, allowedKey) {\n        var allowTransition = true;\n        var targetKey = targetCardKey.split(',');\n        for (var i = 0; i < targetKey.length; i++) {\n            if (currentCardKey === targetKey[i].trim()) {\n                return true;\n            }\n            if (allowedKey) {\n                if (allowedKey.length === 1 && allowedKey[0].length === 0) {\n                    return true;\n                }\n                for (var j = 0; j < allowedKey.length; j++) {\n                    if (targetKey[i].trim() === allowedKey[j].trim()) {\n                        return true;\n                    }\n                    else {\n                        allowTransition = false;\n                    }\n                }\n            }\n        }\n        return allowTransition;\n    };\n    DragAndDrop.prototype.cellDropping = function () {\n        var _this = this;\n        var dragCell = closest(this.dragObj.draggedClone, '.' + cls.CONTENT_CELLS_CLASS);\n        var dragRow = closest(this.dragObj.draggedClone, '.' + cls.CONTENT_ROW_CLASS);\n        if (dragCell && dragCell.classList.contains(cls.DROP_CLASS)) {\n            addClass([dragCell], cls.DROPPING_CLASS);\n        }\n        this.addDropping(dragRow, dragCell);\n        if (this.kanbanObj.swimlaneSettings.keyField && this.kanbanObj.swimlaneSettings.allowDragAndDrop) {\n            var className = '.' + cls.CONTENT_ROW_CLASS + ':not(.' + cls.SWIMLANE_ROW_CLASS + '):not(.' + cls.COLLAPSED_CLASS + ')';\n            var rows = [].slice.call(this.kanbanObj.element.querySelectorAll(className));\n            [].slice.call(rows).forEach(function (row) {\n                if (dragRow !== row) {\n                    _this.addDropping(row, dragCell);\n                }\n            });\n        }\n    };\n    DragAndDrop.prototype.addDropping = function (dragRow, dragCell) {\n        var _this = this;\n        if (dragCell && this.borderElm && this.borderElm.length !== 0) {\n            if (dragCell.classList.contains(cls.DROPPING_CLASS)) {\n                removeClass([dragCell], cls.DROPPING_CLASS);\n            }\n            var cellDimension = dragCell.getBoundingClientRect();\n            this.updateDimension(cellDimension);\n        }\n        else if (dragCell && dragRow) {\n            [].slice.call(dragRow.children).forEach(function (cell) {\n                var transition = _this.kanbanObj.columns[dragCell.cellIndex].transitionColumns;\n                if (cell !== dragCell && cell.classList.contains(cls.DROP_CLASS) &&\n                    _this.allowedTransition(dragCell.getAttribute('data-key'), cell.getAttribute('data-key'), transition)) {\n                    addClass([cell], cls.DROPPING_CLASS);\n                }\n            });\n        }\n    };\n    DragAndDrop.prototype.updateDimension = function (dimensions, target) {\n        [].slice.call(this.borderElm).forEach(function (element) {\n            if (element.parentElement && (element.parentElement.getAttribute('aria-expanded') === 'true' || !element.parentElement.hasAttribute('aria-expanded'))) {\n                addClass([element], cls.DROPPING_CLASS);\n            }\n            var hasAddButton = element.previousElementSibling;\n            element.style.height = parseInt(dimensions.height.toString(), 10) - (hasAddButton &&\n                hasAddButton.classList.contains(cls.SHOW_ADD_BUTTON) ? hasAddButton.offsetHeight + hasAddButton.offsetTop : 0) + 'px';\n            if (!target || target.tagName !== 'TABLE') {\n                element.style.width = parseInt(dimensions.width.toString(), 10) + 'px';\n            }\n            element.style.left = (element.parentElement.getBoundingClientRect().left - closest(element, '.e-kanban').getBoundingClientRect().left) + 'px';\n        });\n    };\n    DragAndDrop.prototype.keydownHandler = function (e) {\n        if (e.code === 'Escape' && this.dragObj.cloneElement) {\n            EventHandler.remove(this.dragObj.cloneElement, 'keydown', this.keydownHandler);\n            this.dragObj.element.removeAttribute('aria-grabbed');\n            this.dragStopClear();\n            this.dragStopPostClear();\n        }\n    };\n    DragAndDrop.prototype.dragStop = function (e) {\n        var _this = this;\n        var contentCell = closest(this.dragObj.targetClone, '.' + cls.CONTENT_CELLS_CLASS);\n        if (this.parent.enableVirtualization && !isNoU(contentCell)) {\n            contentCell.classList.add('e-dropped-column');\n        }\n        var columnKey;\n        var dropIndex;\n        var dataDropIndexKeyfieldValue;\n        var isMultipleDrag;\n        EventHandler.remove(document.body, 'keydown', this.keydownHandler);\n        [].slice.call(this.borderElm).forEach(function (element) {\n            element.classList.remove(cls.DROPPING_CLASS);\n        });\n        if (this.dragObj.targetClone.parentElement) {\n            isMultipleDrag = (this.dragObj.selectedCards && this.dragObj.selectedCards.length > 1\n                && this.parent.sortSettings.sortBy === 'Index');\n            var className = !isMultipleDrag ? '.' + cls.CARD_CLASS + ':not(.' + cls.DRAGGED_CARD_CLASS + ', .' + cls.CLONED_CARD_CLASS + '),.' + cls.DROPPED_CLONE_CLASS :\n                '.' + cls.CARD_CLASS + ':not(.' + cls.CLONED_CARD_CLASS + '),.' + cls.DROPPED_CLONE_CLASS;\n            var element = [].slice.call(this.dragObj.targetClone.parentElement.querySelectorAll(className));\n            dropIndex = element.indexOf(this.dragObj.targetClone);\n            if (this.parent.enableVirtualization && !isNoU(this.dragObj.targetClone.nextElementSibling)) {\n                dataDropIndexKeyfieldValue = this.dragObj.targetClone.nextElementSibling.getAttribute('data-id');\n            }\n        }\n        if (!isNoU(this.kanbanObj) && this.kanbanObj.element.querySelector('.' + cls.TARGET_MULTI_CLONE_CLASS)) {\n            columnKey = closest(e.target, '.' + cls.MULTI_COLUMN_KEY_CLASS + ':not(.' + cls.DISABLED_CLASS + ')');\n        }\n        if (contentCell || columnKey) {\n            var cardStatus_1;\n            if (contentCell) {\n                cardStatus_1 = this.getColumnKey(contentCell);\n            }\n            else {\n                cardStatus_1 = this.getColumnKey(columnKey);\n                contentCell = closest(columnKey, '.' + cls.CONTENT_CELLS_CLASS);\n            }\n            if (this.dragObj.selectedCards instanceof HTMLElement) {\n                this.updateDroppedData(this.dragObj.selectedCards, cardStatus_1, contentCell);\n            }\n            else {\n                this.dragObj.selectedCards.forEach(function (element) { _this.updateDroppedData(element, cardStatus_1, contentCell); });\n            }\n            if (this.parent.sortSettings.field && this.parent.sortSettings.sortBy === 'Index') {\n                this.changeOrder(this.dragObj.modifiedData, e.helper);\n            }\n        }\n        if (this.dragObj.modifiedData.length === 0) {\n            this.dragObj.modifiedData = this.dragObj.cardDetails;\n        }\n        var dragArgs = {\n            cancel: false, data: this.dragObj.modifiedData, event: e, element: this.dragObj.selectedCards,\n            dropIndex: dropIndex\n        };\n        this.parent.trigger(events.dragStop, dragArgs, function (dragEventArgs) {\n            _this.dragStopClear();\n            if (!dragEventArgs.cancel) {\n                if (contentCell || columnKey) {\n                    var updateCard = dragEventArgs.data instanceof Array &&\n                        dragEventArgs.data.length > 1 ? dragEventArgs.data :\n                        dragEventArgs.data[0];\n                    var draggedColumnKey = void 0;\n                    var droppedColumnKey = void 0;\n                    if (_this.parent.enableVirtualization) {\n                        draggedColumnKey = contentCell.closest('.e-kanban').querySelector('.e-dragged-column').getAttribute('data-key');\n                        droppedColumnKey = contentCell.getAttribute('data-key');\n                    }\n                    _this.parent.crudModule.updateCard(updateCard, dragEventArgs.dropIndex, true, dataDropIndexKeyfieldValue, draggedColumnKey, droppedColumnKey, isMultipleDrag);\n                    if (_this.parent.enableVirtualization) {\n                        _this.parent.virtualLayoutModule.refreshColumnData(draggedColumnKey, droppedColumnKey);\n                        _this.parent.virtualLayoutModule.ensureColumnNotEmpty(draggedColumnKey);\n                    }\n                }\n            }\n            _this.removeEmptyTrElement();\n            _this.dragStopPostClear();\n        });\n    };\n    DragAndDrop.prototype.removeEmptyTrElement = function () {\n        if (!this.parent.swimlaneSettings.showEmptyRow) {\n            var swimlaneRowList = this.parent.element.querySelectorAll('.e-content-row.e-swimlane-row');\n            for (var j = 0; j < swimlaneRowList.length; j++) {\n                var cardRowData = swimlaneRowList[j].nextElementSibling.querySelectorAll('.e-card-wrapper .e-card');\n                if (!isNoU(swimlaneRowList[j].nextElementSibling) && cardRowData.length === 0) {\n                    detach(swimlaneRowList[j].nextElementSibling);\n                    detach(swimlaneRowList[j]);\n                }\n            }\n        }\n    };\n    DragAndDrop.prototype.dragStopClear = function () {\n        this.removeElement(this.dragObj.draggedClone);\n        this.removeElement(this.dragObj.targetClone, this.kanbanObj);\n        this.removeElement(this.dragObj.cloneElement);\n        var dragMultiClone = [].slice.call(this.parent.element.querySelectorAll('.' + cls.DRAGGED_CLONE_CLASS));\n        dragMultiClone.forEach(function (clone) { remove(clone); });\n        this.dragObj.element.style.removeProperty('width');\n        this.multiCloneRemove();\n        if (this.dragObj.selectedCards instanceof HTMLElement) {\n            removeClass([this.dragObj.selectedCards], cls.DRAGGED_CARD_CLASS);\n        }\n        else {\n            removeClass(this.dragObj.selectedCards, cls.DRAGGED_CARD_CLASS);\n        }\n        clearInterval(this.dragObj.navigationInterval);\n        this.dragObj.navigationInterval = null;\n        if (document.body.style.cursor === 'not-allowed') {\n            document.body.style.cursor = '';\n        }\n        var styleCards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_CLASS + '[style]'));\n        styleCards.forEach(function (styleCard) { styleCard.style.cursor = ''; });\n        var className = '.' + cls.CONTENT_ROW_CLASS + ':not(.' + cls.SWIMLANE_ROW_CLASS + ')';\n        var cells = [].slice.call(this.parent.element.querySelectorAll(className + ' .' + cls.CONTENT_CELLS_CLASS));\n        cells.forEach(function (cell) { return removeClass([cell], cls.DROPPING_CLASS); });\n        if (this.parent.externalDropObj) {\n            var externalCells = [].slice.call(this.parent.externalDropObj.element.querySelectorAll(className + ' .' +\n                cls.CONTENT_CELLS_CLASS));\n            externalCells.forEach(function (externalCell) { return removeClass([externalCell], cls.DROPPING_CLASS); });\n        }\n    };\n    DragAndDrop.prototype.dragStopPostClear = function () {\n        if (this.parent.isAdaptive) {\n            this.parent.touchModule.tabHold = false;\n        }\n        if (this.parent.element.querySelector('.e-dragged-column')) {\n            this.parent.element.querySelector('.e-dragged-column').classList.remove('e-dragged-column');\n        }\n        if (this.parent.element.querySelector('.e-dropped-column')) {\n            this.parent.element.querySelector('.e-dropped-column').classList.remove('e-dropped-column');\n        }\n        this.dragObj.cardDetails = this.dragObj.modifiedData = [];\n        this.isDragging = false;\n        this.parent.isExternalKanbanDrop = false;\n        this.parent.externalDropObj = null;\n    };\n    DragAndDrop.prototype.updateDroppedData = function (element, cardStatus, contentCell) {\n        var crudObj = this.parent.getCardDetails(element);\n        var crudData = extend({}, crudObj, null, true);\n        if (cardStatus.split(',').length === 1) {\n            crudData[this.parent.keyField] = cardStatus;\n        }\n        if (this.parent.swimlaneSettings.keyField && this.parent.swimlaneSettings.allowDragAndDrop) {\n            var prev = closest(contentCell, '.' + cls.CONTENT_ROW_CLASS).previousElementSibling;\n            if (this.parent.isAdaptive) {\n                var keyField = this.parent.layoutModule.kanbanRows[this.parent.layoutModule.swimlaneIndex].keyField;\n                crudData[this.parent.swimlaneSettings.keyField] = keyField;\n            }\n            else {\n                crudData[this.parent.swimlaneSettings.keyField] = this.getColumnKey(prev);\n            }\n        }\n        this.dragObj.modifiedData.push(crudData);\n    };\n    DragAndDrop.prototype.changeOrder = function (modifieddata, draggedCard) {\n        var _this = this;\n        var prevele = false;\n        var element;\n        if (this.kanbanObj.sortSettings.direction === 'Ascending') {\n            element = (draggedCard === this.dragObj.targetClone.previousElementSibling) &&\n                (this.dragObj.targetClone.previousElementSibling &&\n                    this.dragObj.targetClone.previousElementSibling.previousElementSibling) ?\n                this.dragObj.targetClone.previousElementSibling.previousElementSibling : this.dragObj.targetClone.previousElementSibling;\n        }\n        else {\n            element = this.dragObj.targetClone.nextElementSibling;\n        }\n        if (element && !element.classList.contains(cls.DRAGGED_CARD_CLASS) && !element.classList.contains(cls.CLONED_CARD_CLASS)\n            && !element.classList.contains(cls.DRAGGED_CLONE_CLASS)) {\n            prevele = true;\n        }\n        else if (this.dragObj.targetClone.nextElementSibling && this.kanbanObj.sortSettings.direction === 'Ascending') {\n            element = this.dragObj.targetClone.nextElementSibling;\n        }\n        else if (this.dragObj.targetClone.previousElementSibling && this.kanbanObj.sortSettings.direction === 'Descending') {\n            element = this.dragObj.targetClone.previousElementSibling;\n        }\n        else {\n            return;\n        }\n        if (element.classList.contains(cls.CARD_CLASS)) {\n            var obj = this.kanbanObj.getCardDetails(element);\n            var keyIndex_1 = obj[this.kanbanObj.sortSettings.field];\n            if (modifieddata.length > 1 && this.kanbanObj.sortSettings.direction === 'Descending') {\n                modifieddata = modifieddata.reverse();\n            }\n            modifieddata.forEach(function (data, index) {\n                if (prevele) {\n                    data[_this.kanbanObj.sortSettings.field] = ++keyIndex_1;\n                }\n                else if (keyIndex_1 !== 1 && index <= data[_this.kanbanObj.sortSettings.field]) {\n                    data[_this.kanbanObj.sortSettings.field] = --keyIndex_1;\n                }\n                else if (keyIndex_1 === 1) {\n                    data[_this.kanbanObj.sortSettings.field] = index + 1;\n                }\n            });\n        }\n    };\n    DragAndDrop.prototype.toggleVisible = function (target, tColumn) {\n        var _this = this;\n        var headerCells = '.' + cls.HEADER_CELLS_CLASS + ':not(.' + cls.STACKED_HEADER_CELL_CLASS + ')';\n        var lists = [].slice.call(this.kanbanObj.element.querySelectorAll(headerCells));\n        lists.forEach(function (list) {\n            if (_this.getColumnKey(list) === _this.getColumnKey(tColumn || target)) {\n                _this.kanbanObj.actionModule.columnToggle(list);\n            }\n        });\n        var cloneTarget = closest(this.dragObj.draggedClone, '.' + cls.CONTENT_CELLS_CLASS);\n        if (cloneTarget) {\n            var width = formatUnit(cloneTarget.offsetWidth - events.cardSpace);\n            this.dragObj.draggedClone.style.width = width;\n            this.dragObj.cloneElement.style.width = width;\n        }\n    };\n    DragAndDrop.prototype.multiCloneRemove = function () {\n        var cloneMulti = !isNoU(this.kanbanObj) ? [].slice.call(this.kanbanObj.element.querySelectorAll('.' + cls.TARGET_MULTI_CLONE_CLASS)) : [];\n        if (cloneMulti.length > 0) {\n            var columnKey = [].slice.call(this.kanbanObj.element.querySelectorAll('.' + cls.MULTI_COLUMN_KEY_CLASS));\n            columnKey.forEach(function (node) { return remove(node); });\n            cloneMulti.forEach(function (node) {\n                var cell = closest(node, '.' + cls.CONTENT_CELLS_CLASS);\n                if (cell) {\n                    cell.style.borderStyle = '';\n                    if (cell.querySelector('.' + cls.SHOW_ADD_BUTTON)) {\n                        removeClass([cell.querySelector('.' + cls.SHOW_ADD_BUTTON)], cls.MULTI_CARD_WRAPPER_CLASS);\n                    }\n                    removeClass([cell.querySelector('.' + cls.CARD_WRAPPER_CLASS)], cls.MULTI_CARD_WRAPPER_CLASS);\n                }\n            });\n            this.removeElement(this.dragObj.targetCloneMulti, this.kanbanObj);\n        }\n    };\n    DragAndDrop.prototype.calculateArgs = function (e) {\n        var eventArgs = this.getPageCoordinates(e);\n        this.dragObj.pageY = eventArgs.pageY;\n        this.dragObj.pageX = eventArgs.pageX;\n        this.isDragging = true;\n        if (this.kanbanObj.isAdaptive && this.kanbanObj.tooltipModule) {\n            this.kanbanObj.tooltipModule.tooltipObj.close();\n        }\n    };\n    DragAndDrop.prototype.getPageCoordinates = function (e) {\n        var eventArgs = e.event;\n        return eventArgs && eventArgs.changedTouches ? eventArgs.changedTouches[0] : e.changedTouches ? e.changedTouches[0] :\n            eventArgs || e;\n    };\n    DragAndDrop.prototype.getColumnKey = function (target) {\n        if (target && target.getAttribute('data-key')) {\n            return target.getAttribute('data-key').trim();\n        }\n        return '';\n    };\n    DragAndDrop.prototype.updateScrollPosition = function () {\n        var _this = this;\n        if (isNoU(this.dragObj.navigationInterval)) {\n            this.dragObj.navigationInterval = window.setInterval(function () { _this.autoScroll(); }, 100);\n        }\n    };\n    DragAndDrop.prototype.autoScrollValidation = function () {\n        var pageY = this.dragObj.pageY;\n        var pageX = this.dragObj.pageX;\n        var autoScrollDistance = 30;\n        var dragEdges = { left: false, right: false, top: false, bottom: false };\n        var viewBoundaries = this.kanbanObj.element.querySelector('.' + cls.CONTENT_CLASS).getBoundingClientRect();\n        if ((pageY < viewBoundaries.top + autoScrollDistance + window.pageYOffset) &&\n            (pageY > viewBoundaries.top + window.pageYOffset)) {\n            dragEdges.top = true;\n        }\n        if ((pageY > (viewBoundaries.bottom - autoScrollDistance) + window.pageYOffset) &&\n            (pageY < viewBoundaries.bottom + window.pageYOffset)) {\n            dragEdges.bottom = true;\n        }\n        if ((pageX < viewBoundaries.left + autoScrollDistance + window.pageXOffset) &&\n            (pageX > viewBoundaries.left + window.pageXOffset)) {\n            dragEdges.left = true;\n        }\n        if ((pageX > (viewBoundaries.right - autoScrollDistance) + window.pageXOffset) &&\n            (pageX < viewBoundaries.right + window.pageXOffset)) {\n            dragEdges.right = true;\n        }\n        this.dragEdges = dragEdges;\n    };\n    DragAndDrop.prototype.autoScroll = function () {\n        this.autoScrollValidation();\n        var scrollSensitivity = 30;\n        if (this.kanbanObj.isAdaptive) {\n            var parent_1;\n            if (this.dragEdges.top || this.dragEdges.bottom) {\n                if (this.dragObj.targetClone) {\n                    parent_1 = closest(this.dragObj.targetClone, '.' + cls.CARD_WRAPPER_CLASS);\n                }\n                else {\n                    parent_1 = closest(this.dragObj.draggedClone, '.' + cls.CARD_WRAPPER_CLASS);\n                }\n            }\n            else if (this.dragEdges.right || this.dragEdges.left) {\n                parent_1 = this.kanbanObj.element.querySelector('.' + cls.CONTENT_CLASS);\n            }\n            if (parent_1) {\n                var yIsScrollable = parent_1.offsetHeight <= parent_1.scrollHeight;\n                var xIsScrollable = parent_1.offsetWidth <= parent_1.scrollWidth;\n                var yInBounds = parent_1.scrollTop >= 0 && parent_1.scrollTop + parent_1.offsetHeight <= parent_1.scrollHeight;\n                var xInBounds = parent_1.scrollLeft >= 0 && parent_1.scrollLeft + parent_1.offsetWidth <= parent_1.scrollWidth;\n                if (yIsScrollable && yInBounds && (this.dragEdges.top || this.dragEdges.bottom)) {\n                    parent_1.scrollTop += this.dragEdges.top ? -(scrollSensitivity + 36) : scrollSensitivity;\n                }\n                if (xIsScrollable && xInBounds && (this.dragEdges.left || this.dragEdges.right)) {\n                    var width = this.parent.enableVirtualization ? this.kanbanObj.virtualLayoutModule.getWidth() :\n                        this.kanbanObj.layoutModule.getWidth();\n                    var scroll_1 = (width * (this.kanbanObj.columns.length - 1)) >\n                        parent_1.scrollLeft;\n                    if (scroll_1 || this.dragEdges.left) {\n                        parent_1.scrollLeft += this.dragEdges.left ? -scrollSensitivity : scrollSensitivity;\n                    }\n                }\n            }\n        }\n        else {\n            var parent_2 = this.kanbanObj.element.querySelector('.' + cls.CONTENT_CLASS);\n            var column = this.dragObj.targetClone.parentElement;\n            var yScrollable = parent_2.offsetHeight <= parent_2.scrollHeight;\n            var xScrollable = parent_2.offsetWidth <= parent_2.scrollWidth;\n            var yBounds = yScrollable && parent_2.scrollTop >= 0 && parent_2.scrollTop + parent_2.offsetHeight <= parent_2.scrollHeight;\n            var xBounds = xScrollable && parent_2.scrollLeft >= 0 && parent_2.scrollLeft + parent_2.offsetWidth <= parent_2.scrollWidth;\n            if (yBounds && (this.dragEdges.top || this.dragEdges.bottom)) {\n                parent_2.scrollTop += this.dragEdges.top ? -scrollSensitivity : scrollSensitivity;\n                if (this.parent.swimlaneSettings.enableFrozenRows) {\n                    this.dragObj.cloneElement.style.top = !this.dragEdges.top ? (parseInt(this.dragObj.cloneElement.style.top, 10) + scrollSensitivity) + 'px' : (parseInt(this.dragObj.cloneElement.style.top, 10) - scrollSensitivity) + 'px';\n                }\n                if (column) {\n                    column.scrollTop += this.dragEdges.top ? -scrollSensitivity : scrollSensitivity;\n                }\n            }\n            if (xBounds && (this.dragEdges.left || this.dragEdges.right)) {\n                parent_2.scrollLeft += this.dragEdges.left ? -scrollSensitivity : scrollSensitivity;\n                if (column) {\n                    column.scrollLeft += this.dragEdges.left ? -scrollSensitivity : scrollSensitivity;\n                }\n            }\n            if (this.dragObj.pageY - window.scrollY < scrollSensitivity) {\n                window.scrollTo(window.scrollX, window.scrollY - scrollSensitivity);\n            }\n            else if (window.innerHeight - (this.dragObj.pageY - window.scrollY) < scrollSensitivity) {\n                window.scrollTo(window.scrollX, window.scrollY + scrollSensitivity);\n            }\n        }\n    };\n    DragAndDrop.prototype.unWireDragEvents = function (element) {\n        if (!isNoU(element) && !isNoU(element.ej2_instances[0])) {\n            var dragInstance = element.ej2_instances[0];\n            if (dragInstance && !dragInstance.isDestroyed) {\n                dragInstance.destroy();\n            }\n        }\n    };\n    return DragAndDrop;\n}());\nexport { DragAndDrop };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, createElement, remove, isNullOrUndefined, closest, extend, SanitizeHtmlHelper } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { FormValidator, NumericTextBox, TextBox } from '@syncfusion/ej2-inputs';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Dialog module is used to perform card actions.\n */\nvar KanbanDialog = /** @class */ (function () {\n    /**\n     * Constructor for dialog module\n     *\n     * @param {Kanban} parent Accepts the kanban instance\n     */\n    function KanbanDialog(parent) {\n        this.preventUpdate = false;\n        this.parent = parent;\n    }\n    KanbanDialog.prototype.openDialog = function (action, data) {\n        this.action = action;\n        this.parent.activeCardData.data = data;\n        this.renderDialog(data, action);\n        this.dialogObj.show();\n    };\n    KanbanDialog.prototype.closeDialog = function () {\n        this.dialogObj.hide();\n    };\n    KanbanDialog.prototype.renderDialog = function (args, action) {\n        this.element = createElement('div', { id: this.parent.element.id + '_dialog_wrapper' });\n        this.parent.element.appendChild(this.element);\n        var dialogModel = {\n            buttons: this.getDialogButtons(action),\n            content: this.getDialogContent(args, action),\n            cssClass: cls.DIALOG_CLASS,\n            enableRtl: this.parent.enableRtl,\n            header: this.parent.localeObj.getConstant(action === 'Add' ? 'addTitle' : action === 'Edit' ? 'editTitle' : 'deleteTitle'),\n            height: 'auto',\n            isModal: true,\n            showCloseIcon: true,\n            width: (action === 'Delete') ? 400 : 350,\n            visible: false,\n            beforeOpen: this.onBeforeDialogOpen.bind(this),\n            beforeClose: this.onBeforeDialogClose.bind(this)\n        };\n        this.dialogObj = new Dialog(extend(dialogModel, action !== 'Delete' ? (this.parent.dialogSettings.model || {}) : {}), this.element);\n        if (action !== 'Delete') {\n            this.applyFormValidation();\n        }\n        this.dialogObj.element.querySelector('.e-dlg-closeicon-btn').title = this.parent.localeObj.getConstant('close');\n    };\n    KanbanDialog.prototype.getDialogContent = function (args, action) {\n        if (action === 'Delete') {\n            return this.parent.localeObj.getConstant('deleteContent');\n        }\n        else {\n            var container = createElement('div', { className: cls.FORM_WRAPPER_CLASS });\n            var form = createElement('form', {\n                id: this.parent.element.id + 'EditForm',\n                className: cls.FORM_CLASS, attrs: { onsubmit: 'return false;' }\n            });\n            if (this.parent.dialogSettings.template) {\n                if (args) {\n                    this.destroyComponents();\n                    [].slice.call(form.childNodes).forEach(function (node) { return remove(node); });\n                }\n                var templateId = this.parent.element.id + '_dialogTemplate';\n                var dialogTemplate = this.parent.templateParser(this.parent.dialogSettings.template)(args, this.parent, 'dialogTemplate', templateId, false);\n                append(dialogTemplate, form);\n                this.parent.renderTemplates();\n            }\n            else {\n                var dialogWrapper = createElement('div', { className: cls.DIALOG_CONTENT_CONTAINER });\n                form.appendChild(dialogWrapper);\n                var table = createElement('table');\n                dialogWrapper.appendChild(table);\n                var dialogFields = this.getDialogFields();\n                for (var _i = 0, dialogFields_1 = dialogFields; _i < dialogFields_1.length; _i++) {\n                    var field = dialogFields_1[_i];\n                    var tr = createElement('tr');\n                    table.appendChild(tr);\n                    tr.appendChild(createElement('td', { className: 'e-label', innerHTML: field.text ? field.text : field.key }));\n                    var td = createElement('td');\n                    tr.appendChild(td);\n                    td.appendChild(this.renderComponents(field));\n                }\n            }\n            container.appendChild(form);\n            return container;\n        }\n    };\n    KanbanDialog.prototype.getDialogFields = function () {\n        var fields = this.parent.dialogSettings.fields;\n        if (fields.length === 0) {\n            fields = [\n                { text: 'ID', key: this.parent.cardSettings.headerField, type: 'TextBox' },\n                { key: this.parent.keyField, type: 'DropDown' },\n                { key: this.parent.cardSettings.contentField, type: 'TextArea' }\n            ];\n            if (this.parent.sortSettings.field) {\n                fields.splice(fields.length - 1, 0, { key: this.parent.sortSettings.field, type: 'TextBox' });\n            }\n            if (this.parent.swimlaneSettings.keyField) {\n                fields.splice(fields.length - 1, 0, { key: this.parent.swimlaneSettings.keyField, type: 'DropDown' });\n            }\n        }\n        return fields;\n    };\n    KanbanDialog.prototype.getDialogButtons = function (action) {\n        var primaryButtonClass = action === 'Delete' ? 'e-dialog-yes' : action === 'Add' ? 'e-dialog-add' : 'e-dialog-edit';\n        var flatButtonClass = action === 'Delete' ? 'e-dialog-no' : 'e-dialog-cancel';\n        var dialogButtons = [\n            {\n                buttonModel: {\n                    cssClass: 'e-flat ' + primaryButtonClass, isPrimary: true,\n                    content: this.parent.localeObj.getConstant(action === 'Add' || action === 'Edit' ? 'save' : 'yes')\n                },\n                click: this.dialogButtonClick.bind(this)\n            }, {\n                buttonModel: {\n                    cssClass: 'e-flat ' + flatButtonClass, isPrimary: false,\n                    content: this.parent.localeObj.getConstant(action === 'Add' || action === 'Edit' ? 'cancel' : 'no')\n                },\n                click: this.dialogButtonClick.bind(this)\n            }\n        ];\n        if (action === 'Edit') {\n            var deleteButton = {\n                buttonModel: { cssClass: 'e-flat e-dialog-delete', isPrimary: false, content: this.parent.localeObj.getConstant('delete') },\n                click: this.dialogButtonClick.bind(this)\n            };\n            dialogButtons.splice(0, 0, deleteButton);\n        }\n        return dialogButtons;\n    };\n    KanbanDialog.prototype.renderComponents = function (field) {\n        var wrapper = createElement('div', { className: field.key + '_wrapper' });\n        var element = createElement('input', { className: cls.FIELD_CLASS, attrs: { 'name': field.key } });\n        wrapper.appendChild(element);\n        var divElement;\n        var dropDownOptions;\n        var controlObj;\n        var fieldValue = this.parent.activeCardData.data ?\n            this.parent.activeCardData.data[field.key] : null;\n        switch (field.type) {\n            case 'DropDown':\n                if (field.key === this.parent.keyField) {\n                    var currentKeys = this.parent.enableVirtualization ?\n                        this.parent.virtualLayoutModule.columnKeys : this.parent.layoutModule.columnKeys;\n                    if (this.parent.actionModule.hideColumnKeys.length > 0) {\n                        currentKeys = [];\n                        for (var i = 0; i < this.parent.columns.length; i++) {\n                            var isColumnVisible = this.parent.enableVirtualization ?\n                                this.parent.virtualLayoutModule.isColumnVisible(this.parent.columns[i]) :\n                                this.parent.layoutModule.isColumnVisible(this.parent.columns[i]);\n                            if (isColumnVisible) {\n                                var isNumeric = typeof this.parent.columns[i].keyField === 'number';\n                                if (isNumeric) {\n                                    currentKeys = currentKeys.concat(this.parent.columns[i].keyField.toString());\n                                }\n                                else {\n                                    currentKeys = currentKeys.concat(this.parent.columns[i].keyField.split(',').map(function (e) { return e.trim(); }));\n                                }\n                            }\n                        }\n                    }\n                    dropDownOptions = { dataSource: currentKeys, value: fieldValue ? fieldValue.toString() : fieldValue };\n                }\n                else if (field.key === this.parent.swimlaneSettings.keyField) {\n                    dropDownOptions = {\n                        dataSource: [].slice.call(this.parent.enableVirtualization ? this.parent.virtualLayoutModule.kanbanRows :\n                            this.parent.layoutModule.kanbanRows),\n                        fields: { text: 'textField', value: 'keyField' }, value: fieldValue\n                    };\n                }\n                controlObj = new DropDownList(dropDownOptions);\n                break;\n            case 'Numeric':\n                controlObj = new NumericTextBox({ value: fieldValue });\n                break;\n            case 'TextBox':\n                controlObj = new TextBox({ value: fieldValue });\n                if (fieldValue && this.parent.cardSettings.headerField === field.key) {\n                    controlObj.enabled = false;\n                }\n                break;\n            case 'TextArea':\n                remove(element);\n                divElement = createElement('div');\n                element = createElement('textarea', {\n                    className: cls.FIELD_CLASS, attrs: { 'name': field.key, 'rows': '3', 'aria-label': this.parent.cardSettings.contentField },\n                    innerHTML: fieldValue\n                });\n                wrapper.appendChild(divElement).appendChild(element);\n                break;\n            default:\n                break;\n        }\n        if (controlObj) {\n            controlObj.appendTo(element);\n        }\n        return wrapper;\n    };\n    KanbanDialog.prototype.onBeforeDialogOpen = function (args) {\n        var _this = this;\n        var eventProp = {\n            data: this.parent.activeCardData.data,\n            cancel: false, element: this.element,\n            target: this.parent.activeCardData.element,\n            requestType: this.action\n        };\n        this.storeElement = document.activeElement;\n        if (parseInt(args.maxHeight, 10) <= 250) {\n            args.maxHeight = '250px';\n        }\n        this.parent.trigger(events.dialogOpen, eventProp, function (openArgs) {\n            args.cancel = openArgs.cancel;\n            if (openArgs.cancel) {\n                _this.destroy();\n            }\n        });\n    };\n    KanbanDialog.prototype.onBeforeDialogClose = function (args) {\n        var _this = this;\n        var formInputs = this.getFormElements();\n        var cardObj = {};\n        if (args.isInteracted) {\n            /* close icon preventing data update */\n            this.preventUpdate = true;\n        }\n        if (!this.preventUpdate) {\n            for (var _i = 0, formInputs_1 = formInputs; _i < formInputs_1.length; _i++) {\n                var input = formInputs_1[_i];\n                var columnName = input.name || this.getColumnName(input);\n                if (!isNullOrUndefined(columnName) && columnName !== '') {\n                    var value = this.getValueFromElement(input);\n                    if (columnName === this.parent.cardSettings.headerField) {\n                        value = this.getIDType() === 'string' ? value : parseInt(value, 10);\n                    }\n                    cardObj[columnName] = value;\n                }\n            }\n        }\n        this.preventUpdate = false;\n        cardObj = extend(this.parent.activeCardData.data, cardObj);\n        var eventProp = { data: cardObj, cancel: false, element: this.element, requestType: this.action };\n        this.parent.trigger(events.dialogClose, eventProp, function (closeArgs) {\n            args.cancel = closeArgs.cancel;\n            if (!closeArgs.cancel) {\n                _this.cardData = eventProp.data;\n                _this.destroy();\n                _this.parent.actionModule.SingleCardSelection(_this.cardData);\n            }\n        });\n    };\n    KanbanDialog.prototype.getIDType = function () {\n        if (this.parent.kanbanData.length !== 0) {\n            return typeof (this.parent.kanbanData[0][this.parent.cardSettings.headerField]);\n        }\n        return 'string';\n    };\n    KanbanDialog.prototype.applyFormValidation = function () {\n        var _this = this;\n        var form = this.element.querySelector('.' + cls.FORM_CLASS);\n        var rules = {};\n        for (var _i = 0, _a = this.parent.dialogSettings.fields; _i < _a.length; _i++) {\n            var field = _a[_i];\n            rules[field.key] = (field.validationRules && Object.keys(field.validationRules).length > 0) ? field.validationRules : null;\n        }\n        this.formObj = new FormValidator(form, {\n            rules: rules,\n            customPlacement: function (inputElement, error) {\n                var id = error.getAttribute('for');\n                var elem = _this.element.querySelector('#' + id + '_Error');\n                if (!elem) {\n                    _this.createTooltip(inputElement, error, id, '');\n                }\n            },\n            validationComplete: function (args) {\n                var elem = _this.element.querySelector('#' + args.inputName + '_Error');\n                if (elem) {\n                    elem.style.display = (args.status === 'failure') ? '' : 'none';\n                }\n            }\n        });\n    };\n    KanbanDialog.prototype.createTooltip = function (element, error, name, display) {\n        var dlgContent;\n        var client;\n        var inputClient = element.parentElement.getBoundingClientRect();\n        if (this.element.classList.contains(cls.DIALOG_CLASS)) {\n            dlgContent = this.element;\n            client = this.element.getBoundingClientRect();\n        }\n        else {\n            dlgContent = this.element.querySelector('.e-kanban-dialog .e-dlg-content');\n            client = dlgContent.getBoundingClientRect();\n        }\n        var div = createElement('div', {\n            className: 'e-tooltip-wrap e-popup ' + cls.ERROR_VALIDATION_CLASS,\n            id: name + '_Error',\n            styles: 'display:' + display + ';top:' +\n                (inputClient.bottom - client.top + dlgContent.scrollTop + 9) + 'px;left:' +\n                (inputClient.left - client.left + dlgContent.scrollLeft + inputClient.width / 2) + 'px;'\n        });\n        var content = createElement('div', { className: 'e-tip-content' });\n        content.appendChild(error);\n        var arrow = createElement('div', { className: 'e-arrow-tip e-tip-top' });\n        arrow.appendChild(createElement('div', { className: 'e-arrow-tip-outer e-tip-top' }));\n        arrow.appendChild(createElement('div', { className: 'e-arrow-tip-inner e-tip-top' }));\n        div.appendChild(content);\n        div.appendChild(arrow);\n        dlgContent.appendChild(div);\n        div.style.left = (parseInt(div.style.left, 10) - div.offsetWidth / 2) + 'px';\n    };\n    KanbanDialog.prototype.destroyToolTip = function () {\n        if (this.element) {\n            this.element.querySelectorAll('.' + cls.ERROR_VALIDATION_CLASS).forEach(function (node) { return remove(node); });\n        }\n        if (this.formObj && this.formObj.element) {\n            this.formObj.reset();\n        }\n    };\n    KanbanDialog.prototype.dialogButtonClick = function (event) {\n        var target = event.target.cloneNode(true);\n        if (!isNullOrUndefined(event.keyCode) && event.keyCode === 13) {\n            var valTrg = this.dialogObj.element.querySelector('.e-footer-content button.e-primary');\n            target = valTrg.cloneNode(true);\n        }\n        var id = this.formObj.element.id;\n        if (document.getElementById(id) && this.formObj.validate() &&\n            (target.classList.contains('e-dialog-edit') || target.classList.contains('e-dialog-add'))) {\n            this.dialogObj.hide();\n            if (!isNullOrUndefined(this.cardData)) {\n                if (target.classList.contains('e-dialog-edit')) {\n                    var activeCard = this.parent.activeCardData;\n                    var updateIndex = void 0;\n                    if (activeCard.data[this.parent.keyField] === this.cardData[this.parent.keyField]\n                        && activeCard.element) {\n                        updateIndex = [].slice.call(activeCard.element.parentElement.children).indexOf(activeCard.element);\n                    }\n                    if (this.parent.enableHtmlSanitizer) {\n                        if (typeof this.cardData[this.parent.cardSettings.contentField] === 'string') {\n                            this.cardData[this.parent.cardSettings.contentField] =\n                                SanitizeHtmlHelper.sanitize(this.cardData[this.parent.cardSettings.contentField]);\n                        }\n                    }\n                    this.parent.crudModule.updateCard(this.cardData, updateIndex);\n                }\n                if (target.classList.contains('e-dialog-add')) {\n                    this.parent.crudModule.addCard(this.cardData);\n                }\n                this.parent.actionModule.SingleCardSelection(this.cardData);\n                this.cardData = null;\n            }\n        }\n        if (!target.classList.contains('e-dialog-edit') && !target.classList.contains('e-dialog-add')) {\n            if (target.classList.contains('e-dialog-cancel')) {\n                this.preventUpdate = true;\n            }\n            this.dialogObj.hide();\n            if (target.classList.contains('e-dialog-yes')) {\n                this.parent.crudModule.deleteCard(this.parent.activeCardData.data);\n            }\n            else if (target.classList.contains('e-dialog-no')) {\n                this.openDialog('Edit', this.parent.activeCardData.data);\n            }\n            else if (target.classList.contains('e-dialog-delete')) {\n                this.openDialog('Delete', this.parent.activeCardData.data);\n            }\n        }\n    };\n    KanbanDialog.prototype.getFormElements = function () {\n        var elements = [].slice.call(this.element.querySelectorAll('.' + cls.FIELD_CLASS));\n        var validElements = [];\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var element = elements_1[_i];\n            if (element.classList.contains('e-control')) {\n                validElements.push(element);\n            }\n            else if (element.querySelector('.e-control')) {\n                validElements.push(element.querySelector('.e-control'));\n            }\n            else {\n                validElements.push(element);\n            }\n        }\n        return validElements;\n    };\n    KanbanDialog.prototype.getColumnName = function (element) {\n        var attrName = element.getAttribute('data-name') || '';\n        if (attrName === '') {\n            var isDropDowns = false;\n            var fieldSelector = '';\n            if (element.classList.contains('e-dropdownlist') || element.classList.contains('e-multiselect')) {\n                fieldSelector = element.classList.contains('e-dropdownlist') ? 'e-ddl' : 'e-multiselect';\n                isDropDowns = true;\n            }\n            else if (element.classList.contains('e-numerictextbox')) {\n                fieldSelector = 'e-numeric';\n            }\n            var classSelector = isDropDowns ? \".\" + fieldSelector + \":not(.e-control)\" : \".\" + fieldSelector;\n            var control = closest(element, classSelector) || element.querySelector(\".\" + fieldSelector);\n            if (control) {\n                var attrEle = control.querySelector('[name]');\n                if (attrEle) {\n                    attrName = attrEle.name;\n                }\n            }\n        }\n        return attrName;\n    };\n    KanbanDialog.prototype.getValueFromElement = function (element) {\n        var value;\n        if (element.classList.contains('e-dropdownlist')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-multiselect')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-checkbox')) {\n            value = element.ej2_instances[0].checked;\n        }\n        else {\n            if (element.type === 'checkbox') {\n                value = element.checked;\n            }\n            else {\n                value = element.value;\n            }\n        }\n        return value;\n    };\n    KanbanDialog.prototype.destroyComponents = function () {\n        var formelement = this.getFormElements();\n        for (var _i = 0, formelement_1 = formelement; _i < formelement_1.length; _i++) {\n            var element = formelement_1[_i];\n            var instance = element.ej2_instances;\n            if (instance && instance.length > 0) {\n                instance.forEach(function (node) { return node.destroy(); });\n            }\n            if (this.parent.isReact && this.formObj) {\n                this.formObj.element.remove();\n            }\n        }\n    };\n    KanbanDialog.prototype.destroy = function () {\n        this.destroyToolTip();\n        this.destroyComponents();\n        if (this.dialogObj) {\n            this.dialogObj.destroy();\n            this.storeElement.focus();\n            this.dialogObj = null;\n            remove(this.element);\n            this.element = null;\n        }\n    };\n    return KanbanDialog;\n}());\nexport { KanbanDialog };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { KeyboardEvents, addClass, removeClass, closest } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\n/**\n * Kanban keyboard module\n */\nvar Keyboard = /** @class */ (function () {\n    /**\n     * Constructor for keyboard module\n     *\n     * @param {Kanban} parent Accepts the kanban instance\n     */\n    function Keyboard(parent) {\n        this.keyConfigs = {\n            firstCardSelection: '36',\n            lastCardSelection: '35',\n            upArrow: '38',\n            downArrow: '40',\n            rightArrow: '39',\n            leftArrow: '37',\n            multiSelectionEnter: 'ctrl+13',\n            multiSelectionSpace: 'ctrl+32',\n            multiSelectionByUpArrow: 'shift+38',\n            multiSelectionByDownArrow: 'shift+40',\n            shiftTab: 'shift+tab',\n            enter: '13',\n            tab: 'tab',\n            delete: '46',\n            escape: '27',\n            space: '32'\n        };\n        this.parent = parent;\n        this.parent.element.tabIndex = this.parent.element.tabIndex === -1 ? 0 : this.parent.element.tabIndex;\n        this.keyboardModule = new KeyboardEvents(this.parent.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n        this.multiSelection = false;\n    }\n    Keyboard.prototype.keyActionHandler = function (e) {\n        var _this = this;\n        var selectedCard = this.parent.element.querySelectorAll(\".\" + cls.CARD_CLASS + \".\" + cls.CARD_SELECTION_CLASS).item(0);\n        if (!selectedCard && !closest(document.activeElement, \".\" + cls.ROOT_CLASS)) {\n            return;\n        }\n        var contentCell;\n        var selectedCards;\n        var selectedCardsData = [];\n        switch (e.action) {\n            case 'upArrow':\n            case 'downArrow':\n            case 'multiSelectionByUpArrow':\n            case 'multiSelectionByDownArrow':\n                e.preventDefault();\n                this.processUpDownArrow(e.action, selectedCard);\n                break;\n            case 'rightArrow':\n            case 'leftArrow':\n                this.processLeftRightArrow(e);\n                break;\n            case 'firstCardSelection':\n            case 'lastCardSelection':\n                this.processCardSelection(e.action, selectedCard);\n                break;\n            case 'multiSelectionEnter':\n            case 'multiSelectionSpace':\n                if (document.activeElement) {\n                    this.parent.actionModule.cardSelection(document.activeElement, true, false);\n                }\n                break;\n            case 'space':\n            case 'enter':\n                this.processEnter(e, selectedCard);\n                break;\n            case 'escape':\n                if (document.activeElement.classList.contains(cls.CARD_CLASS) ||\n                    document.activeElement.classList.contains(cls.SHOW_ADD_BUTTON)) {\n                    if (document.activeElement.classList.contains(cls.CARD_SELECTION_CLASS)) {\n                        removeClass([document.activeElement], cls.CARD_SELECTION_CLASS);\n                        document.activeElement.focus();\n                    }\n                    else {\n                        var ele = closest(document.activeElement, '.' + cls.CONTENT_CELLS_CLASS);\n                        var cards = [].slice.call(ele.querySelectorAll('.' + cls.CARD_CLASS));\n                        removeClass(cards, cls.CARD_SELECTION_CLASS);\n                        ele.focus();\n                        this.cardTabIndexRemove();\n                        this.addRemoveTabIndex('Add');\n                    }\n                }\n                break;\n            case 'tab':\n            case 'shiftTab':\n                contentCell = closest(document.activeElement, '.' + cls.CONTENT_CELLS_CLASS);\n                if (document.activeElement.classList.contains(cls.CARD_CLASS)) {\n                    if (!document.activeElement.nextElementSibling && e.action === 'tab') {\n                        e.preventDefault();\n                    }\n                    if (!document.activeElement.previousElementSibling && contentCell.querySelector('.' + cls.SHOW_ADD_BUTTON)\n                        && e.action === 'tab') {\n                        addClass([contentCell.querySelector('.' + cls.SHOW_ADD_BUTTON)], cls.SHOW_ADD_FOCUS);\n                    }\n                }\n                if (document.activeElement.classList.contains(cls.SHOW_ADD_BUTTON)) {\n                    if ((!contentCell.querySelector('.' + cls.CARD_CLASS) && e.action === 'tab') || e.action === 'shiftTab') {\n                        e.preventDefault();\n                    }\n                }\n                if (document.activeElement.classList.contains(cls.ROOT_CLASS)) {\n                    this.cardTabIndexRemove();\n                    this.parent.keyboardModule.addRemoveTabIndex('Add');\n                }\n                break;\n            case 'delete':\n                selectedCards = [].slice.call(this.parent.element.querySelectorAll(\".\" + cls.CARD_CLASS + \".\" + cls.CARD_SELECTION_CLASS));\n                selectedCards.forEach(function (selected) { selectedCardsData.push(_this.parent.getCardDetails(selected)); });\n                this.parent.crudModule.deleteCard(selectedCardsData);\n                break;\n        }\n    };\n    Keyboard.prototype.processCardSelection = function (action, selectedCard) {\n        if (selectedCard) {\n            removeClass([selectedCard], cls.CARD_SELECTION_CLASS);\n            if (this.parent.enableVirtualization) {\n                this.parent.virtualLayoutModule.disableAttributeSelection(selectedCard);\n            }\n            else {\n                this.parent.layoutModule.disableAttributeSelection(selectedCard);\n            }\n            var selection = this.parent.actionModule.selectionArray;\n            selection.splice(selection.indexOf(selectedCard.getAttribute('data-id')), 1);\n        }\n        this.cardTabIndexRemove();\n        var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_CLASS));\n        var element = action === 'firstCardSelection' ? cards[0] : cards[cards.length - 1];\n        this.parent.actionModule.cardSelection(element, false, false);\n        this.addRemoveTabIndex('Remove');\n        element.focus();\n        var card = [].slice.call(closest(element, '.' + cls.CONTENT_CELLS_CLASS).querySelectorAll('.' + cls.CARD_CLASS));\n        card.forEach(function (element) { element.setAttribute('tabindex', '0'); });\n    };\n    Keyboard.prototype.processLeftRightArrow = function (e) {\n        if (document.activeElement.classList.contains(cls.CONTENT_CELLS_CLASS)) {\n            if (e.action === 'rightArrow' && document.activeElement.nextElementSibling) {\n                document.activeElement.nextElementSibling.focus();\n            }\n            else if (e.action === 'leftArrow' && document.activeElement.previousElementSibling) {\n                document.activeElement.previousElementSibling.focus();\n            }\n        }\n    };\n    Keyboard.prototype.processUpDownArrow = function (action, selectedCard) {\n        if (action === 'upArrow' && document.activeElement) {\n            if (document.activeElement.classList.contains(cls.CARD_CLASS) && document.activeElement.previousElementSibling) {\n                document.activeElement.previousElementSibling.focus();\n            }\n            else if (document.activeElement.classList.contains(cls.SHOW_ADD_BUTTON)) {\n                document.activeElement.setAttribute('tabindex', '-1');\n                removeClass([document.activeElement], cls.SHOW_ADD_FOCUS);\n                var cell = closest(document.activeElement, '.' + cls.CONTENT_CELLS_CLASS);\n                if (cell.querySelectorAll('.' + cls.CARD_CLASS).length > 0) {\n                    [].slice.call(cell.querySelectorAll('.' + cls.CARD_CLASS)).slice(-1)[0].focus();\n                }\n            }\n            this.removeSelection();\n        }\n        else if (action === 'downArrow' && document.activeElement &&\n            document.activeElement.classList.contains(cls.CARD_CLASS)) {\n            if (document.activeElement.nextElementSibling) {\n                document.activeElement.nextElementSibling.focus();\n            }\n            else if (closest(document.activeElement, '.' + cls.CARD_WRAPPER_CLASS).nextElementSibling) {\n                var ele = closest(document.activeElement, '.' + cls.CARD_WRAPPER_CLASS).nextElementSibling;\n                ele.setAttribute('tabindex', '0');\n                addClass([ele], cls.SHOW_ADD_FOCUS);\n                ele.focus();\n            }\n            this.removeSelection();\n        }\n        if ((action === 'multiSelectionByUpArrow' || action === 'multiSelectionByDownArrow')\n            && selectedCard && this.parent.cardSettings.selectionType === 'Multiple') {\n            var card = void 0;\n            if (action === 'multiSelectionByUpArrow') {\n                card = document.activeElement.previousElementSibling;\n            }\n            else {\n                card = document.activeElement.nextElementSibling;\n            }\n            if (card) {\n                this.parent.actionModule.cardSelection(card, false, true);\n                card.focus();\n                this.multiSelection = true;\n            }\n        }\n    };\n    Keyboard.prototype.removeSelection = function () {\n        if (this.multiSelection) {\n            var cards = this.parent.getSelectedCards();\n            if (cards.length > 0) {\n                removeClass(cards, cls.CARD_SELECTION_CLASS);\n                if (this.parent.enableVirtualization) {\n                    this.parent.virtualLayoutModule.disableAttributeSelection(cards);\n                }\n                else {\n                    this.parent.layoutModule.disableAttributeSelection(cards);\n                }\n            }\n            this.multiSelection = false;\n        }\n    };\n    Keyboard.prototype.cardTabIndexRemove = function () {\n        var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_CLASS));\n        cards.forEach(function (card) { card.setAttribute('tabindex', '-1'); });\n        var addButton = [].slice.call(this.parent.element.querySelectorAll('.' + cls.SHOW_ADD_BUTTON));\n        addButton.forEach(function (add) {\n            add.setAttribute('tabindex', '-1');\n            removeClass([add], cls.SHOW_ADD_FOCUS);\n        });\n    };\n    Keyboard.prototype.processEnter = function (e, selectedCard) {\n        if (e.action === 'space') {\n            e.preventDefault();\n        }\n        var element = (e.target);\n        if (element.classList.contains(cls.HEADER_ICON_CLASS)) {\n            this.parent.actionModule.columnExpandCollapse(e);\n        }\n        if (element.classList.contains(cls.SWIMLANE_ROW_EXPAND_CLASS) || element.classList.contains(cls.SWIMLANE_ROW_COLLAPSE_CLASS)) {\n            this.parent.actionModule.rowExpandCollapse(e);\n        }\n        if (document.activeElement.classList.contains(cls.CARD_CLASS)) {\n            this.parent.actionModule.cardSelection(document.activeElement, false, false);\n        }\n        if (document.activeElement.classList.contains(cls.SHOW_ADD_BUTTON)) {\n            if (!this.parent.dialogModule.dialogObj) {\n                this.parent.actionModule.addButtonClick(document.activeElement);\n            }\n            document.activeElement.focus();\n        }\n        if (element.classList.contains(cls.CONTENT_CELLS_CLASS)) {\n            var cards = [].slice.call(element.querySelectorAll('.' + cls.CARD_CLASS));\n            this.addRemoveTabIndex('Remove');\n            if (cards.length > 0) {\n                element.querySelector('.' + cls.CARD_CLASS).focus();\n                cards.forEach(function (element) { element.setAttribute('tabindex', '0'); });\n            }\n            if (element.querySelector('.' + cls.SHOW_ADD_BUTTON)) {\n                element.querySelector('.' + cls.SHOW_ADD_BUTTON).setAttribute('tabindex', '0');\n                element.querySelector('.' + cls.SHOW_ADD_BUTTON).focus();\n            }\n        }\n        if (selectedCard === document.activeElement && this.parent.element.querySelectorAll('.' + cls.CARD_SELECTION_CLASS).length === 1) {\n            this.parent.activeCardData = {\n                data: this.parent.getCardDetails(selectedCard), element: selectedCard\n            };\n            if (!this.parent.dialogModule.dialogObj) {\n                this.parent.dialogModule.openDialog('Edit', this.parent.getCardDetails(selectedCard));\n            }\n            selectedCard.focus();\n        }\n    };\n    Keyboard.prototype.addRemoveTabIndex = function (action) {\n        var attribute = action === 'Add' ? '0' : '-1';\n        var headerIcon = [].slice.call(this.parent.element.querySelectorAll('.' + cls.HEADER_ICON_CLASS));\n        if (headerIcon.length > 0) {\n            headerIcon.forEach(function (element) { element.setAttribute('tabindex', attribute); });\n        }\n        var swimlaneIcon = [].slice.call(this.parent.element.querySelectorAll('.' + cls.SWIMLANE_ROW_EXPAND_CLASS));\n        if (swimlaneIcon.length > 0) {\n            swimlaneIcon.forEach(function (element) { element.setAttribute('tabindex', attribute); });\n        }\n        var className = '.' + cls.CONTENT_ROW_CLASS + ':not(.' + cls.SWIMLANE_ROW_CLASS + ') .' + cls.CONTENT_CELLS_CLASS;\n        var contentCell = [].slice.call(this.parent.element.querySelectorAll(className));\n        contentCell.forEach(function (element) { element.setAttribute('tabindex', attribute); });\n    };\n    Keyboard.prototype.destroy = function () {\n        this.keyboardModule.destroy();\n    };\n    return Keyboard;\n}());\nexport { Keyboard };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { createElement, append, closest, addClass, initializeCSPTemplate } from '@syncfusion/ej2-base';\nimport { Tooltip } from '@syncfusion/ej2-popups';\nimport * as cls from '../base/css-constant';\n/**\n * Tooltip for Kanban board\n */\nvar KanbanTooltip = /** @class */ (function () {\n    /**\n     * Constructor for tooltip module\n     *\n     * @param {Kanban} parent Accepts the kanban instance\n     */\n    function KanbanTooltip(parent) {\n        this.parent = parent;\n        this.renderTooltip();\n    }\n    KanbanTooltip.prototype.renderTooltip = function () {\n        this.tooltipObj = new Tooltip({\n            cssClass: this.parent.cssClass + ' ' + cls.TOOLTIP_CLASS,\n            enableRtl: this.parent.enableRtl,\n            mouseTrail: !this.parent.isAdaptive,\n            offsetY: 5,\n            position: 'BottomCenter',\n            showTipPointer: true,\n            target: '.' + cls.TOOLTIP_TEXT_CLASS,\n            beforeRender: this.onBeforeRender.bind(this),\n            beforeClose: this.onBeforeClose.bind(this)\n        });\n        this.tooltipObj.appendTo(this.parent.element);\n        this.tooltipObj.isStringTemplate = true;\n    };\n    KanbanTooltip.prototype.onBeforeRender = function (args) {\n        if (this.parent.dragAndDropModule.isDragging) {\n            args.cancel = true;\n            return;\n        }\n        var tooltipContent;\n        if (this.parent.tooltipTemplate) {\n            tooltipContent = createElement('div');\n            var target = closest(args.target, '.' + cls.CARD_CLASS);\n            var data = this.parent.getCardDetails(target);\n            var templateId = this.parent.element.id + '_tooltipTemplate';\n            var tooltipTemplate = this.parent.templateParser(this.parent.tooltipTemplate)(data, this.parent, 'tooltipTemplate', templateId, false);\n            append(tooltipTemplate, tooltipContent);\n            this.parent.renderTemplates();\n        }\n        else {\n            tooltipContent = initializeCSPTemplate(function () {\n                return \"<div class=\\\"e-card-header-caption\\\">\" + args.target.innerText + \"</div>\";\n            });\n        }\n        this.tooltipObj.setProperties({ content: tooltipContent }, true);\n    };\n    KanbanTooltip.prototype.onBeforeClose = function () {\n        this.parent.resetTemplates(['tooltipTemplate']);\n    };\n    KanbanTooltip.prototype.destroy = function () {\n        this.tooltipObj.destroy();\n        addClass([this.parent.element], 'e-control');\n        this.tooltipObj = null;\n    };\n    return KanbanTooltip;\n}());\nexport { KanbanTooltip };\n","import { Touch, EventHandler, remove, addClass, createElement, closest } from '@syncfusion/ej2-base';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport * as cls from '../base/css-constant';\n/**\n * Kanban touch module\n */\nvar KanbanTouch = /** @class */ (function () {\n    /**\n     * Constructor for touch module\n     *\n     * @param {Kanban} parent Accepts the kanban instance\n     * @private\n     */\n    function KanbanTouch(parent) {\n        this.parent = parent;\n        this.tabHold = false;\n    }\n    KanbanTouch.prototype.wireTouchEvents = function () {\n        this.element = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        this.touchObj = new Touch(this.element, { tapHold: this.tapHoldHandler.bind(this) });\n    };\n    KanbanTouch.prototype.tapHoldHandler = function (e) {\n        this.tabHold = true;\n        var target = closest(e.originalEvent.target, '.' + cls.CARD_CLASS);\n        if (target && this.parent.cardSettings.selectionType === 'Multiple') {\n            this.parent.actionModule.cardSelection(target, true, false);\n            if (!this.mobilePopup) {\n                this.renderMobilePopup();\n                this.mobilePopup.show();\n            }\n            this.updatePopupContent();\n        }\n    };\n    KanbanTouch.prototype.renderMobilePopup = function () {\n        if (this.parent.cardSettings.selectionType === 'Multiple') {\n            var mobilePopupWrapper = createElement('div', {\n                className: cls.POPUP_WRAPPER_CLASS + ' e-popup-close',\n                innerHTML: \"<div class=\\\"\" + cls.POPUP_HEADER_CLASS + \"\\\"><button class=\\\"\" + cls.CLOSE_CLASS + \"\\\"></button></div>\" +\n                    (\"<div class=\\\"\" + cls.POPUP_CONTENT_CLASS + \"\\\"></div>\")\n            });\n            document.body.appendChild(mobilePopupWrapper);\n            addClass([mobilePopupWrapper], cls.DEVICE_CLASS);\n            this.mobilePopup = new Popup(mobilePopupWrapper, {\n                targetType: 'container',\n                enableRtl: this.parent.enableRtl,\n                hideAnimation: { name: 'ZoomOut' },\n                showAnimation: { name: 'ZoomIn' },\n                collision: { X: 'fit', Y: 'fit' },\n                position: { X: 'left', Y: 'top' },\n                viewPortElement: document.body,\n                zIndex: 1004,\n                close: this.popupClose.bind(this)\n            });\n            var closeIcon = this.mobilePopup.element.querySelector('.' + cls.CLOSE_CLASS);\n            var buttonObj = new Button({\n                cssClass: 'e-flat e-round e-small',\n                enableRtl: this.parent.enableRtl,\n                iconCss: cls.ICON_CLASS + ' ' + cls.CLOSE_ICON_CLASS\n            });\n            buttonObj.appendTo(closeIcon);\n            buttonObj.isStringTemplate = true;\n            EventHandler.add(closeIcon, 'click', this.closeClick, this);\n        }\n    };\n    KanbanTouch.prototype.getPopupContent = function () {\n        var popupContent;\n        var selectedCards = this.parent.getSelectedCards();\n        if (selectedCards.length > 1) {\n            popupContent = '(' + selectedCards.length + ') ' + this.parent.localeObj.getConstant('cardsSelected');\n        }\n        else if (selectedCards.length === 1) {\n            popupContent = ' ' + this.parent.getCardDetails(selectedCards[0])[this.parent.cardSettings.headerField];\n        }\n        return popupContent;\n    };\n    KanbanTouch.prototype.updatePopupContent = function () {\n        if (!this.mobilePopup) {\n            return;\n        }\n        var popupContent = this.getPopupContent();\n        if (popupContent) {\n            this.mobilePopup.element.querySelector('.' + cls.POPUP_CONTENT_CLASS).textContent = popupContent;\n        }\n        else {\n            this.mobilePopup.hide();\n        }\n    };\n    KanbanTouch.prototype.closeClick = function () {\n        this.parent.touchModule.mobilePopup.hide();\n    };\n    KanbanTouch.prototype.popupClose = function () {\n        this.popupDestroy();\n    };\n    KanbanTouch.prototype.popupDestroy = function () {\n        if (this.mobilePopup && this.mobilePopup.element) {\n            var instance = this.mobilePopup.element.querySelector('.e-control.e-btn').ej2_instances[0];\n            if (instance) {\n                instance.destroy();\n            }\n            this.mobilePopup.destroy();\n            remove(this.mobilePopup.element);\n            this.mobilePopup = null;\n        }\n    };\n    KanbanTouch.prototype.unWireTouchEvents = function () {\n        if (this.touchObj) {\n            this.touchObj.destroy();\n        }\n        this.touchObj = null;\n        this.element = null;\n    };\n    KanbanTouch.prototype.destroy = function () {\n        this.popupDestroy();\n        this.unWireTouchEvents();\n        this.tabHold = false;\n    };\n    return KanbanTouch;\n}());\nexport { KanbanTouch };\n","import { append, createElement, EventHandler, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { TreeView } from '@syncfusion/ej2-navigations';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport * as events from './constant';\nimport * as cls from './css-constant';\n/**\n * Kanban mobile layout rendering module\n *\n */\nvar MobileLayout = /** @class */ (function () {\n    function MobileLayout(parent) {\n        this.parent = parent;\n    }\n    MobileLayout.prototype.renderSwimlaneHeader = function () {\n        var toolbarWrapper = createElement('div', {\n            className: cls.SWIMLANE_HEADER_CLASS,\n            innerHTML: '<div class=\"' + cls.SWIMLANE_HEADER_TOOLBAR_CLASS + '\"><div class=\"' + cls.TOOLBAR_MENU_CLASS +\n                '\"><div class=\"e-icons ' + cls.TOOLBAR_MENU_ICON_CLASS + '\"></div></div><div class=\"' + cls.TOOLBAR_LEVEL_TITLE_CLASS +\n                '\"><div class=\"' + cls.TOOLBAR_SWIMLANE_NAME_CLASS + '\"></div></div></div>'\n        });\n        this.parent.element.appendChild(toolbarWrapper);\n        EventHandler.add(toolbarWrapper.querySelector('.' + cls.TOOLBAR_MENU_ICON_CLASS), 'click', this.menuClick, this);\n    };\n    MobileLayout.prototype.renderSwimlaneTree = function () {\n        var height = this.parent.element.querySelector('.' + cls.SWIMLANE_HEADER_CLASS).offsetHeight;\n        var treeHeight = window.innerHeight - height;\n        this.popupOverlay = createElement('div', { className: cls.SWIMLANE_OVERLAY_CLASS, styles: 'height: ' + treeHeight + 'px;' });\n        var wrapper = createElement('div', { className: cls.SWIMLANE_CONTENT_CLASS, styles: 'top:' + height + 'px;' });\n        var treeWrapper = createElement('div', {\n            className: cls.SWIMLANE_RESOURCE_CLASS + ' e-popup-close', styles: 'height: ' + treeHeight + 'px;'\n        });\n        wrapper.appendChild(treeWrapper);\n        wrapper.appendChild(this.popupOverlay);\n        this.parent.element.appendChild(wrapper);\n        var swimlaneTree = createElement('div', { className: cls.SWIMLANE_TREE_CLASS });\n        treeWrapper.appendChild(swimlaneTree);\n        var dataSource = this.parent.enableVirtualization ?\n            this.parent.virtualLayoutModule.kanbanRows : this.parent.layoutModule.kanbanRows;\n        this.treeViewObj = new TreeView({\n            cssClass: this.parent.cssClass,\n            enableRtl: this.parent.enableRtl,\n            fields: {\n                dataSource: dataSource,\n                id: 'keyField',\n                text: 'textField'\n            },\n            nodeTemplate: this.parent.swimlaneSettings.template,\n            nodeClicked: this.treeSwimlaneClick.bind(this),\n            drawNode: this.drawNode.bind(this)\n        });\n        this.treeViewObj.appendTo(swimlaneTree);\n        var popupObj = {\n            targetType: 'relative',\n            actionOnScroll: 'none',\n            enableRtl: this.parent.enableRtl,\n            zIndex: 10,\n            hideAnimation: { name: 'SlideLeftOut', duration: 500 },\n            showAnimation: { name: 'SlideLeftIn', duration: 500 },\n            viewPortElement: this.parent.element.querySelector('.' + cls.CONTENT_CLASS)\n        };\n        popupObj.content = this.treeViewObj.element;\n        this.treePopup = new Popup(treeWrapper, popupObj);\n    };\n    MobileLayout.prototype.menuClick = function () {\n        if (this.parent.element.querySelector('.' + cls.SWIMLANE_RESOURCE_CLASS).classList.contains('e-popup-open')) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], 'e-enable');\n        }\n        else {\n            var treeNodes = [].slice.call(this.treeViewObj.element.querySelectorAll('.e-list-item'));\n            removeClass(treeNodes, 'e-active');\n            addClass([treeNodes[this.parent.layoutModule.swimlaneIndex]], 'e-active');\n            this.treePopup.show();\n            addClass([this.popupOverlay], 'e-enable');\n        }\n    };\n    MobileLayout.prototype.treeSwimlaneClick = function (args) {\n        this.treePopup.hide();\n        var treeNodes = [].slice.call(this.treeViewObj.element.querySelectorAll('.e-list-item'));\n        this.parent.layoutModule.swimlaneIndex = treeNodes.indexOf(args.node);\n        this.parent.layoutModule.scrollLeft = 0;\n        this.parent.notify(events.dataReady, { processedData: this.parent.kanbanData });\n        args.event.preventDefault();\n    };\n    MobileLayout.prototype.hidePopup = function () {\n        this.treePopup.hide();\n        removeClass([this.popupOverlay], 'e-enable');\n    };\n    MobileLayout.prototype.getWidth = function () {\n        return (window.innerWidth * 80) / 100;\n    };\n    MobileLayout.prototype.drawNode = function (args) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.parent.swimlaneSettings.template && this.parent.isReact) {\n            var templateId = this.parent.element.id + '_treeviewTemplate';\n            var treeViewTemplate = this.parent.templateParser(this.parent.swimlaneSettings.template)(args.nodeData, this.parent, 'nodeTemplate', templateId, false);\n            append(treeViewTemplate, args.node.querySelector('.e-list-text'));\n        }\n    };\n    return MobileLayout;\n}());\nexport { MobileLayout };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, createElement, formatUnit, EventHandler, addClass, remove, extend, Browser, isNullOrUndefined as isNoU, removeClass, closest, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { MobileLayout } from './mobile-layout';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Kanban layout rendering module\n *\n */\nvar LayoutRender = /** @class */ (function (_super) {\n    __extends(LayoutRender, _super);\n    function LayoutRender(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.kanbanRows = [];\n        _this.parent = parent;\n        _this.columnKeys = [];\n        _this.swimlaneIndex = 0;\n        _this.swimlaneData = {};\n        _this.scrollLeft = 0;\n        _this.frozenOrder = 0;\n        _this.parent.on(events.dataReady, _this.initRender, _this);\n        _this.parent.on(events.contentReady, _this.scrollUiUpdate, _this);\n        return _this;\n    }\n    LayoutRender.prototype.initRender = function () {\n        if (this.parent.columns.length === 0) {\n            return;\n        }\n        this.columnData = this.getColumnCards();\n        this.kanbanRows = this.getRows();\n        this.swimlaneData = this.getSwimlaneCards();\n        if (this.parent.isAdaptive) {\n            var parent_1 = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n            if (parent_1) {\n                this.scrollLeft = parent_1.scrollLeft;\n            }\n        }\n        this.destroy();\n        this.parent.on(events.dataReady, this.initRender, this);\n        this.parent.on(events.contentReady, this.scrollUiUpdate, this);\n        if (this.parent.isAdaptive && this.parent.swimlaneSettings.keyField && this.parent.kanbanData.length !== 0) {\n            this.renderSwimlaneHeader();\n        }\n        var header = createElement('div', { className: cls.HEADER_CLASS });\n        this.parent.element.appendChild(header);\n        this.renderHeader(header);\n        this.renderContent();\n        this.renderCards();\n        this.renderValidation();\n        this.parent.renderTemplates();\n        this.parent.notify(events.contentReady, {});\n        this.wireEvents();\n        if (this.parent.isInitialRender) {\n            this.parent.isInitialRender = false;\n        }\n    };\n    LayoutRender.prototype.renderHeader = function (header) {\n        var headerWrap = createElement('div', { className: this.parent.swimlaneSettings.keyField ? cls.SWIMLANE_CLASS : '' });\n        header.appendChild(headerWrap);\n        var headerTable = createElement('table', {\n            className: cls.TABLE_CLASS + ' ' + cls.HEADER_TABLE_CLASS\n        });\n        headerWrap.appendChild(headerTable);\n        this.renderColGroup(headerTable);\n        var tableHead = createElement('thead');\n        var tableBody = createElement('tbody', { className: 'e-hide', innerHTML: '<tr><td></td></tr>', attrs: { 'role': 'rowgroup' } });\n        headerTable.appendChild(tableBody);\n        headerTable.appendChild(tableHead);\n        if (this.parent.stackedHeaders.length > 0) {\n            tableHead.appendChild(this.createStackedRow(this.parent.stackedHeaders));\n        }\n        var tr = createElement('tr', { className: cls.HEADER_ROW_CLASS });\n        tableHead.appendChild(tr);\n        var _loop_1 = function (column) {\n            if (this_1.isColumnVisible(column)) {\n                var index = this_1.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n                var th_1 = createElement('th', {\n                    className: index === -1 ? cls.HEADER_CELLS_CLASS : cls.HEADER_CELLS_CLASS + ' ' + cls.COLLAPSED_CLASS,\n                    attrs: { 'data-role': 'kanban-column', 'data-key': column.keyField.toString(), 'scope': 'col' }\n                });\n                var classList = [];\n                if (column.allowToggle) {\n                    classList.push(cls.HEADER_ROW_TOGGLE_CLASS);\n                    if (!column.isExpanded) {\n                        classList.push(cls.COLLAPSED_CLASS);\n                    }\n                }\n                addClass([th_1], classList);\n                var headerWrapper = createElement('div', { className: cls.HEADER_WRAP_CLASS });\n                th_1.appendChild(headerWrapper);\n                this_1.columnData = this_1.getColumnCards(this_1.parent.kanbanData);\n                var noOfCard = this_1.columnData[column.keyField].length;\n                var headerTitle = createElement('div', { className: cls.HEADER_TITLE_CLASS });\n                headerWrapper.appendChild(headerTitle);\n                if (column.template) {\n                    var templateArgs = {\n                        keyField: column.keyField, headerText: column.headerText, minCount: column.minCount, maxCount: column.maxCount,\n                        allowToggle: column.allowToggle, isExpanded: column.isExpanded, showItemCount: column.showItemCount, count: noOfCard\n                    };\n                    addClass([th_1], cls.TEMPLATE_CLASS);\n                    var templateId = this_1.parent.element.id + '_columnTemplate';\n                    var templateHeader = this_1.parent.templateParser(column.template)(templateArgs, this_1.parent, 'columnTemplate', templateId, false);\n                    append(templateHeader, headerTitle);\n                }\n                else {\n                    var header_1 = createElement('div', { className: cls.HEADER_TEXT_CLASS, innerHTML: column.headerText });\n                    headerTitle.appendChild(header_1);\n                    if (column.showItemCount) {\n                        var itemCount = createElement('div', {\n                            className: cls.CARD_ITEM_COUNT_CLASS,\n                            innerHTML: '- ' + noOfCard.toString() + ' ' + this_1.parent.localeObj.getConstant('items')\n                        });\n                        headerTitle.appendChild(itemCount);\n                    }\n                }\n                if (column.allowToggle) {\n                    var isExpand = (column.isExpanded && index === -1) ? true : false;\n                    var name_1 = (isExpand) ? cls.COLUMN_EXPAND_CLASS : cls.COLUMN_COLLAPSE_CLASS;\n                    var icon = createElement('div', {\n                        className: cls.HEADER_ICON_CLASS + ' ' + cls.ICON_CLASS + ' ' + name_1,\n                        attrs: { 'tabindex': '0', 'role': 'button' }\n                    });\n                    icon.setAttribute('aria-label', isExpand ? column.keyField + ' Expand' : column.keyField + ' Collapse');\n                    th_1.setAttribute('aria-expanded', isExpand.toString());\n                    headerWrapper.appendChild(icon);\n                }\n                var dataObj = [{ keyField: column.keyField, textField: column.headerText, count: noOfCard }];\n                var args = { data: dataObj, element: tr, cancel: false, requestType: 'headerRow' };\n                this_1.parent.trigger(events.queryCellInfo, args, function (columnArgs) {\n                    if (!columnArgs.cancel) {\n                        tr.appendChild(th_1);\n                    }\n                });\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n            var column = _a[_i];\n            _loop_1(column);\n        }\n    };\n    LayoutRender.prototype.renderContent = function () {\n        var content = createElement('div', { className: cls.CONTENT_CLASS });\n        this.parent.element.appendChild(content);\n        var contentWrap = createElement('div', { className: this.parent.swimlaneSettings.keyField ? cls.SWIMLANE_CLASS : '' });\n        content.appendChild(contentWrap);\n        var contentTable = createElement('table', {\n            className: cls.TABLE_CLASS + ' ' + cls.CONTENT_TABLE_CLASS, attrs: { 'role': 'presentation' }\n        });\n        contentWrap.appendChild(contentTable);\n        this.renderColGroup(contentTable);\n        var tHead = createElement('thead', { className: 'e-hide', attrs: { 'role': 'none' } });\n        for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n            var column = _a[_i];\n            var thElem = createElement('th', { id: column.keyField, innerHTML: column.keyField, attrs: { 'scope': 'col' } });\n            thElem.style.display = 'none';\n            tHead.appendChild(thElem);\n        }\n        contentTable.appendChild(tHead);\n        var tBody = createElement('tbody', { attrs: { 'role': 'treegrid', 'aria-label': 'Kanban Content' } });\n        contentTable.appendChild(tBody);\n        var isCollaspsed = false;\n        this.swimlaneRow = this.kanbanRows;\n        this.initializeSwimlaneTree();\n        for (var _b = 0, _c = this.swimlaneRow; _b < _c.length; _b++) {\n            var row = _c[_b];\n            if (this.parent.swimlaneSettings.keyField && this.parent.swimlaneToggleArray.length !== 0) {\n                var index = this.parent.swimlaneToggleArray.indexOf(row.keyField);\n                isCollaspsed = index !== -1;\n            }\n            if (this.parent.swimlaneSettings.keyField && !this.parent.isAdaptive) {\n                this.renderSwimlaneRow(tBody, row, isCollaspsed);\n            }\n            this.renderSingleContent(tBody, row, isCollaspsed);\n        }\n    };\n    LayoutRender.prototype.renderSingleContent = function (tBody, row, isCollaspsed) {\n        var className = isCollaspsed ? cls.CONTENT_ROW_CLASS + ' ' + cls.COLLAPSED_CLASS : cls.CONTENT_ROW_CLASS;\n        var tr = createElement('tr', { className: className,\n            attrs: { 'role': 'row', 'aria-label': row.keyField + 'row content' } });\n        for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n            var column = _a[_i];\n            if (this.isColumnVisible(column)) {\n                var index = this.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n                var className_1 = index === -1 ? cls.CONTENT_CELLS_CLASS : cls.CONTENT_CELLS_CLASS + ' ' + cls.COLLAPSED_CLASS;\n                var dragClass = (column.allowDrag ? ' ' + cls.DRAG_CLASS : '') + (column.allowDrop ? ' ' + cls.DROP_CLASS\n                    + ' ' + cls.DROPPABLE_CLASS : '');\n                var td = createElement('td', {\n                    className: className_1 + dragClass, attrs: { 'data-role': 'kanban-column', 'data-key': column.keyField.toString(), 'tabindex': '0',\n                        'aria-describedby': column.keyField.toString(), 'role': 'gridcell' }\n                });\n                if (column.allowToggle && !column.isExpanded || index !== -1) {\n                    addClass([td], cls.COLLAPSED_CLASS);\n                    var text = (column.showItemCount ? '[' +\n                        this.getColumnData(column.keyField, this.swimlaneData[row.keyField]).length + '] ' : '') + column.headerText;\n                    td.appendChild(createElement('div', { className: cls.COLLAPSE_HEADER_TEXT_CLASS, innerHTML: text }));\n                    td.setAttribute('aria-expanded', 'false');\n                }\n                if (column.showAddButton) {\n                    var button = createElement('div', { className: cls.SHOW_ADD_BUTTON, attrs: { 'tabindex': '-1' } });\n                    button.appendChild(createElement('div', { className: cls.SHOW_ADD_ICON + ' ' + cls.ICON_CLASS }));\n                    td.appendChild(button);\n                }\n                tr.appendChild(td);\n            }\n        }\n        var dataObj = [{ keyField: row.keyField, textField: row.textField, count: row.count }];\n        var args = { data: dataObj, element: tr, cancel: false, requestType: 'contentRow' };\n        this.parent.trigger(events.queryCellInfo, args, function (columnArgs) {\n            if (!columnArgs.cancel) {\n                if (tBody.classList.contains('e-swimlane-row')) {\n                    tBody.insertAdjacentElement('beforebegin', tr);\n                }\n                else {\n                    tBody.appendChild(tr);\n                }\n            }\n        });\n    };\n    LayoutRender.prototype.initializeSwimlaneTree = function () {\n        if (this.parent.swimlaneSettings.keyField && this.parent.isAdaptive && this.parent.kanbanData.length !== 0) {\n            var swimlaneHeaderName = this.parent.element.querySelector('.' + cls.TOOLBAR_SWIMLANE_NAME_CLASS);\n            this.swimlaneRow = [this.kanbanRows[this.swimlaneIndex]];\n            this.renderSwimlaneTree();\n            if (this.parent.swimlaneSettings.template) {\n                var cardCount = this.swimlaneData[this.swimlaneRow[0].keyField].length;\n                var templateArgs = extend({}, this.swimlaneRow[0], { count: cardCount }, true);\n                var swimlaneTemplate = this.parent.templateParser(this.parent.swimlaneSettings.template)(templateArgs, this.parent, 'swimlaneTemplate', '', false);\n                swimlaneHeaderName.appendChild(swimlaneTemplate[0]);\n            }\n            else {\n                swimlaneHeaderName.innerHTML = this.swimlaneRow[0].textField;\n                if (this.parent.swimlaneSettings.showItemCount) {\n                    var cardCount = this.swimlaneData[this.swimlaneRow[0].keyField].length;\n                    var targetItemCountElement = this.parent.element.querySelector('.' + cls.SWIMLANE_HEADER_TOOLBAR_CLASS);\n                    var itemCountElement = void 0;\n                    var itemCountInnerElement = void 0;\n                    if (!isNoU(targetItemCountElement)) {\n                        itemCountElement = createElement('div', { className: cls.TOOLBAR_SWIMLANE_ITEM_COUNT_CLASS });\n                        itemCountInnerElement = createElement('div', { className: cls.CARD_ITEM_COUNT_CLASS });\n                        itemCountElement.appendChild(itemCountInnerElement);\n                        targetItemCountElement.appendChild(itemCountElement);\n                    }\n                    itemCountInnerElement.innerHTML = \"- \" + cardCount + \" \" + this.parent.localeObj.getConstant('items');\n                }\n            }\n        }\n    };\n    LayoutRender.prototype.renderSwimlaneRow = function (tBody, row, isCollapsed) {\n        var name = cls.CONTENT_ROW_CLASS + ' ' + cls.SWIMLANE_ROW_CLASS;\n        var className = isCollapsed ? ' ' + cls.COLLAPSED_CLASS : '';\n        var tr = createElement('tr', {\n            className: name + className, attrs: { 'aria-label': row.keyField + ' row header',\n                'role': 'row', 'data-key': row.keyField, 'aria-expanded': (!isCollapsed).toString() }\n        });\n        var col = this.parent.columns.length - this.parent.actionModule.hideColumnKeys.length;\n        var td = createElement('td', { className: cls.CONTENT_CELLS_CLASS,\n            attrs: { 'data-role': 'kanban-column', 'role': 'gridcell', colspan: col.toString() } });\n        var swimlaneHeader = createElement('div', { className: cls.SWIMLANE_HEADER_CLASS });\n        td.appendChild(swimlaneHeader);\n        var iconClass = isCollapsed ? cls.SWIMLANE_ROW_COLLAPSE_CLASS : cls.SWIMLANE_ROW_EXPAND_CLASS;\n        var iconDiv = createElement('div', {\n            className: cls.ICON_CLASS + ' ' + iconClass, attrs: {\n                'tabindex': '0', 'role': 'button', 'aria-label': isCollapsed ? row.keyField + ' Collapse' : row.keyField + ' Expand'\n            }\n        });\n        swimlaneHeader.appendChild(iconDiv);\n        var headerWrap = createElement('div', { className: cls.HEADER_WRAP_CLASS });\n        swimlaneHeader.appendChild(headerWrap);\n        var cardCount = this.swimlaneData[row.keyField].length;\n        if (this.parent.swimlaneSettings.template) {\n            var templateArgs = extend({}, row, { count: cardCount }, true);\n            addClass([td], cls.TEMPLATE_CLASS);\n            var templateId = this.parent.element.id + '_swimlaneTemplate';\n            var swimlaneTemplate = this.parent.templateParser(this.parent.swimlaneSettings.template)(templateArgs, this.parent, 'swimlaneTemplate', templateId, false);\n            append(swimlaneTemplate, headerWrap);\n        }\n        else {\n            headerWrap.appendChild(createElement('div', {\n                className: cls.SWIMLANE_ROW_TEXT_CLASS,\n                innerHTML: row.textField,\n                attrs: { 'data-role': row.textField }\n            }));\n        }\n        if (this.parent.swimlaneSettings.showItemCount) {\n            swimlaneHeader.appendChild(createElement('div', {\n                className: cls.CARD_ITEM_COUNT_CLASS,\n                innerHTML: \"- \" + cardCount.toString() + \" \" + this.parent.localeObj.getConstant('items')\n            }));\n        }\n        tr.appendChild(td);\n        var dataObj = [{ keyField: row.keyField, textField: row.textField, count: row.count }];\n        var args = { data: dataObj, element: tr, cancel: false, requestType: 'swimlaneRow' };\n        this.parent.trigger(events.queryCellInfo, args, function (columnArgs) {\n            if (!columnArgs.cancel) {\n                if (tBody.classList.contains('e-swimlane-row')) {\n                    tBody.insertAdjacentElement('beforebegin', tr);\n                }\n                else {\n                    tBody.appendChild(tr);\n                }\n            }\n        });\n    };\n    LayoutRender.prototype.renderCards = function () {\n        var _this = this;\n        var rows = this.swimlaneRow;\n        var cardRows = [].slice.call(this.parent.element.querySelectorAll('.e-content-row:not(.e-swimlane-row)'));\n        var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll('.e-content-row.e-swimlane-row'));\n        var removeTrs = [];\n        var columnTransition = false;\n        cardRows.forEach(function (tr, index) {\n            var dataCount = 0;\n            var _loop_2 = function (column) {\n                if (_this.isColumnVisible(column)) {\n                    var columnData = _this.parent.swimlaneSettings.keyField ?\n                        _this.getColumnData(column.keyField, (_this.parent.swimlaneSettings.showEmptyRow &&\n                            isNoU(_this.swimlaneData[rows[index].keyField])) ? []\n                            : _this.swimlaneData[rows[index].keyField]) : _this.columnData[column.keyField];\n                    dataCount += columnData.length;\n                    var columnWrapper = tr.querySelector('[data-key=\"' + column.keyField + '\"]');\n                    var cardWrapper_1 = createElement('div', {\n                        className: cls.CARD_WRAPPER_CLASS, attrs: { 'role': 'listbox', 'tabindex': '0',\n                            'aria-label': column.keyField.toString()\n                        }\n                    });\n                    if (column.transitionColumns.length > 0) {\n                        columnTransition = true;\n                    }\n                    if (!columnTransition && isNoU(_this.parent.swimlaneSettings.keyField)) {\n                        var borderElem = createElement('div', { className: cls.BORDER_CLASS });\n                        columnWrapper.appendChild(borderElem);\n                    }\n                    columnWrapper.appendChild(cardWrapper_1);\n                    if (columnData.length > 0) {\n                        var _loop_3 = function (data) {\n                            var cardText = data[_this.parent.cardSettings.headerField];\n                            var cardIndex = _this.parent.actionModule.selectionArray.indexOf(cardText);\n                            var cardElement = _this.renderCard(data);\n                            if (cardIndex !== -1) {\n                                cardElement.setAttribute('aria-selected', 'true');\n                                addClass([cardElement], cls.CARD_SELECTION_CLASS);\n                            }\n                            var args = { data: data, element: cardElement, cancel: false };\n                            _this.parent.trigger(events.cardRendered, args, function (cardArgs) {\n                                if (!cardArgs.cancel) {\n                                    cardWrapper_1.appendChild(cardElement);\n                                }\n                            });\n                        };\n                        for (var _i = 0, _a = columnData; _i < _a.length; _i++) {\n                            var data = _a[_i];\n                            _loop_3(data);\n                        }\n                    }\n                    else {\n                        cardWrapper_1.appendChild(_this.renderEmptyCard());\n                    }\n                }\n            };\n            for (var _i = 0, _a = _this.parent.columns; _i < _a.length; _i++) {\n                var column = _a[_i];\n                _loop_2(column);\n            }\n            if (dataCount === 0) {\n                removeTrs.push(tr);\n                if (swimlaneRows.length > 0) {\n                    removeTrs.push(swimlaneRows[index]);\n                }\n            }\n        });\n        if (!this.parent.swimlaneSettings.showEmptyRow && (this.parent.kanbanData.length === 0 && !this.parent.showEmptyColumn)) {\n            removeTrs.forEach(function (tr) { return remove(tr); });\n        }\n    };\n    LayoutRender.prototype.renderCard = function (data) {\n        var cardElement = createElement('div', {\n            className: cls.CARD_CLASS,\n            attrs: { 'data-id': data[this.parent.cardSettings.headerField], 'data-key': data[this.parent.keyField],\n                'aria-selected': 'false', 'tabindex': '-1', 'role': 'option', 'aria-roledescription': 'Card'\n            }\n        });\n        if (this.parent.cardHeight !== 'auto') {\n            cardElement.style.height = formatUnit(this.parent.cardHeight);\n        }\n        if (this.parent.cardSettings.template) {\n            addClass([cardElement], cls.TEMPLATE_CLASS);\n            var templateId = this.parent.element.id + '_cardTemplate';\n            var cardTemplate = this.parent.templateParser(this.parent.cardSettings.template)(data, this.parent, 'cardTemplate', templateId, false);\n            append(cardTemplate, cardElement);\n        }\n        else {\n            var tooltipClass = this.parent.enableTooltip ? ' ' + cls.TOOLTIP_TEXT_CLASS : '';\n            if (this.parent.cardSettings.showHeader) {\n                var cardHeader = createElement('div', { className: cls.CARD_HEADER_CLASS });\n                var cardCaption = createElement('div', { className: cls.CARD_HEADER_TEXT_CLASS });\n                var cardText = createElement('div', {\n                    className: cls.CARD_HEADER_TITLE_CLASS + tooltipClass,\n                    innerHTML: data[this.parent.cardSettings.headerField] || ''\n                });\n                cardHeader.appendChild(cardCaption);\n                cardCaption.appendChild(cardText);\n                cardElement.appendChild(cardHeader);\n            }\n            var cardContent = createElement('div', {\n                className: cls.CARD_CONTENT_CLASS + tooltipClass,\n                innerHTML: data[this.parent.cardSettings.contentField] || ''\n            });\n            cardElement.appendChild(cardContent);\n            if (this.parent.cardSettings.tagsField && data[this.parent.cardSettings.tagsField]) {\n                var cardTags = createElement('div', { className: cls.CARD_TAGS_CLASS });\n                var tags = data[this.parent.cardSettings.tagsField].toString().split(',');\n                for (var _i = 0, tags_1 = tags; _i < tags_1.length; _i++) {\n                    var tag = tags_1[_i];\n                    cardTags.appendChild(createElement('div', {\n                        className: cls.CARD_TAG_CLASS + ' ' + cls.CARD_LABEL_CLASS, innerHTML: tag\n                    }));\n                }\n                cardElement.appendChild(cardTags);\n            }\n            if (this.parent.cardSettings.grabberField && data[this.parent.cardSettings.grabberField]) {\n                addClass([cardElement], cls.CARD_COLOR_CLASS);\n                cardElement.style.borderLeftColor = data[this.parent.cardSettings.grabberField];\n            }\n            if (this.parent.cardSettings.footerCssField) {\n                var cardFields = createElement('div', { className: cls.CARD_FOOTER_CLASS });\n                var keys = data[this.parent.cardSettings.footerCssField].split(',');\n                for (var _a = 0, keys_1 = keys; _a < keys_1.length; _a++) {\n                    var key = keys_1[_a];\n                    cardFields.appendChild(createElement('div', {\n                        className: key.trim() + ' ' + cls.CARD_FOOTER_CSS_CLASS\n                    }));\n                }\n                cardElement.appendChild(cardFields);\n            }\n        }\n        return cardElement;\n    };\n    LayoutRender.prototype.renderEmptyCard = function () {\n        var emptyCard = createElement('span', {\n            className: cls.EMPTY_CARD_CLASS, innerHTML: this.parent.localeObj.getConstant('noCard'),\n            attrs: { 'aria-label': this.parent.localeObj.getConstant('noCard'), 'role': 'option' }\n        });\n        return emptyCard;\n    };\n    LayoutRender.prototype.renderColGroup = function (table) {\n        var _this = this;\n        var colGroup = createElement('colgroup');\n        this.parent.columns.forEach(function (column) {\n            if (_this.isColumnVisible(column)) {\n                var index = _this.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n                var isToggle = column.allowToggle && !column.isExpanded;\n                var className = index === -1 ? (isToggle ? cls.COLLAPSED_CLASS : '') : cls.COLLAPSED_CLASS;\n                var col = createElement('col', {\n                    className: className,\n                    attrs: { 'data-key': column.keyField.toString() }\n                });\n                if (_this.parent.isAdaptive) {\n                    var width = isToggle ? formatUnit(events.toggleWidth) : formatUnit(_this.getWidth());\n                    col.style.width = width;\n                }\n                colGroup.appendChild(col);\n            }\n        });\n        table.appendChild(colGroup);\n    };\n    LayoutRender.prototype.getRows = function () {\n        var _this = this;\n        var kanbanRows = [];\n        if (this.parent.swimlaneSettings.keyField) {\n            this.parent.kanbanData.map(function (obj) {\n                if (!_this.parent.swimlaneSettings.showEmptyRow) {\n                    if ((isNoU(obj[_this.parent.keyField])) || (obj[_this.parent.keyField] === '') ||\n                        (obj[_this.parent.keyField] && _this.columnKeys.indexOf(obj[_this.parent.keyField].toString()) === -1)) {\n                        return;\n                    }\n                }\n                var textField = obj[_this.parent.swimlaneSettings.textField] || obj[_this.parent.swimlaneSettings.keyField];\n                var keyField = obj[_this.parent.swimlaneSettings.keyField];\n                if (!obj[_this.parent.swimlaneSettings.keyField]) {\n                    if (_this.parent.swimlaneSettings.showUnassignedRow) {\n                        textField = _this.parent.localeObj.getConstant('unassigned');\n                        keyField = '';\n                    }\n                    else {\n                        return;\n                    }\n                }\n                kanbanRows.push({ keyField: keyField, textField: textField });\n            });\n            kanbanRows = kanbanRows.filter(function (item, index, arr) {\n                return index === arr.map(function (item) { return item.keyField; }).indexOf(item.keyField);\n            });\n            kanbanRows = this.swimlaneSorting(kanbanRows);\n            kanbanRows.forEach(function (row) {\n                row.count = _this.parent.kanbanData.filter(function (obj) {\n                    return _this.columnKeys.indexOf(obj[_this.parent.keyField]) > -1 &&\n                        obj[_this.parent.swimlaneSettings.keyField] === row.keyField;\n                }).length;\n            });\n            if (kanbanRows.length === 0) {\n                kanbanRows.push({ keyField: '', textField: '' });\n            }\n        }\n        else {\n            kanbanRows.push({ keyField: '', textField: '' });\n        }\n        return kanbanRows;\n    };\n    LayoutRender.prototype.swimlaneSorting = function (rows) {\n        if (this.parent.swimlaneSettings.sortComparer) {\n            rows = this.parent.swimlaneSettings.sortComparer.call(this.parent, rows);\n        }\n        else {\n            rows.sort(function (a, b) { return a.textField.localeCompare(b.textField, undefined, { numeric: true }); });\n            if (this.parent.swimlaneSettings.sortDirection === 'Descending') {\n                rows.reverse();\n            }\n        }\n        return rows;\n    };\n    LayoutRender.prototype.createStackedRow = function (rows) {\n        var tr = createElement('tr', { className: cls.HEADER_ROW_CLASS + ' ' + cls.STACKED_HEADER_ROW_CLASS });\n        var stackedHeaders = [];\n        this.parent.columns.forEach(function (column) {\n            var headerText = '';\n            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n                var row = rows_1[_i];\n                if (row.keyFields.indexOf(column.keyField.toString()) !== -1) {\n                    headerText = row.text;\n                }\n            }\n            stackedHeaders.push(headerText);\n        });\n        for (var h = 0; h < stackedHeaders.length; h++) {\n            var colSpan = 1;\n            for (var j = h + 1; j < stackedHeaders.length; j++) {\n                if ((stackedHeaders[h] !== '') && (stackedHeaders[j] !== '') && stackedHeaders[h] === stackedHeaders[j]) {\n                    colSpan++;\n                }\n                else {\n                    break;\n                }\n            }\n            var div = createElement('div', { className: cls.HEADER_TEXT_CLASS, innerHTML: stackedHeaders[h] });\n            var th = createElement('th', {\n                className: cls.HEADER_CELLS_CLASS + ' ' + cls.STACKED_HEADER_CELL_CLASS,\n                attrs: { 'colspan': colSpan.toString(), 'scope': 'col' }\n            });\n            tr.appendChild(th).appendChild(div);\n            h += colSpan - 1;\n        }\n        return tr;\n    };\n    LayoutRender.prototype.scrollUiUpdate = function () {\n        var _this = this;\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        var height = this.parent.element.offsetHeight - header.offsetHeight;\n        if (this.parent.isAdaptive) {\n            height = window.innerHeight - (header.offsetHeight + events.bottomSpace);\n            var swimlaneToolbar = this.parent.element.querySelector('.' + cls.SWIMLANE_HEADER_CLASS);\n            if (swimlaneToolbar) {\n                height -= swimlaneToolbar.offsetHeight;\n            }\n            var cardWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS));\n            cardWrappers.forEach(function (cell) {\n                var cardWrapper = cell.querySelector('.' + cls.CARD_WRAPPER_CLASS);\n                if (!cardWrapper.classList.contains(cls.MULTI_CARD_WRAPPER_CLASS)) {\n                    cardWrapper.style.height = formatUnit(height);\n                    EventHandler.add(cell, 'touchmove', _this.onAdaptiveScroll, _this);\n                }\n            });\n        }\n        if (this.parent.height !== 'auto' && this.parent.height !== '100%') {\n            content.style.height = formatUnit(height);\n        }\n        [].slice.call(header.children).forEach(function (node) {\n            var paddingValue = 0;\n            if ((content.offsetWidth - content.clientWidth) > 0) {\n                paddingValue = 17;\n                if ((content.offsetHeight - content.clientHeight) > 0) {\n                    node.style.width = formatUnit(content.clientWidth);\n                }\n            }\n            if (_this.parent.enableRtl) {\n                node.style.paddingLeft = formatUnit(paddingValue);\n            }\n            else {\n                node.style.paddingRight = formatUnit(paddingValue);\n            }\n        });\n        this.updateScrollPosition();\n    };\n    LayoutRender.prototype.onContentScroll = function (e) {\n        var target = e.target;\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        [].slice.call(header.children).forEach(function (node) { node.scrollLeft = target.scrollLeft; });\n        this.parent.scrollPosition.content = { left: target.scrollLeft, top: target.scrollTop };\n        if (!isNoU(this.parent.swimlaneSettings.keyField) && this.parent.swimlaneSettings.enableFrozenRows) {\n            this.frozenRows(e);\n        }\n    };\n    LayoutRender.prototype.addFrozenSwimlaneDataKey = function (currentElem) {\n        var frozenKey = currentElem.getAttribute('data-key');\n        if (!isNoU(frozenKey)) {\n            this.frozenSwimlaneRow.setAttribute('data-key', frozenKey);\n        }\n    };\n    LayoutRender.prototype.frozenRows = function (e) {\n        var firstSwimlane = this.parent.element.querySelector('.' + cls.SWIMLANE_ROW_CLASS);\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        if (isNoU(this.frozenSwimlaneRow)) {\n            this.frozenSwimlaneRow = createElement('div', { className: cls.FROZEN_SWIMLANE_ROW_CLASS });\n            var frozenRow = createElement('div', { className: cls.FROZEN_ROW_CLASS });\n            this.frozenSwimlaneRow.appendChild(frozenRow);\n            this.parent.element.insertBefore(this.frozenSwimlaneRow, this.parent.element.firstElementChild);\n            frozenRow.appendChild(firstSwimlane.querySelector('.' + cls.SWIMLANE_HEADER_CLASS).cloneNode(true));\n            this.addFrozenSwimlaneDataKey(firstSwimlane);\n            setStyleAttribute(this.frozenSwimlaneRow, { height: formatUnit(firstSwimlane.getBoundingClientRect().height),\n                width: formatUnit(content.querySelector('.e-swimlane').getBoundingClientRect().width),\n                top: formatUnit(header.getBoundingClientRect().height.toString())\n            });\n            setStyleAttribute(header, { position: 'relative', top: formatUnit((-this.frozenSwimlaneRow.getBoundingClientRect().height)) });\n            setStyleAttribute(content, { position: 'relative', top: formatUnit((-this.frozenSwimlaneRow.getBoundingClientRect().height)) });\n        }\n        else {\n            var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.SWIMLANE_ROW_CLASS));\n            var curSwim = swimlaneRows[this.frozenOrder];\n            var prevSwim = swimlaneRows[this.frozenOrder - 1];\n            var nextSwim = swimlaneRows[this.frozenOrder + 1];\n            var curSwimHeight = void 0;\n            var prevSwimHeight = void 0;\n            var nextSwimHeight = void 0;\n            if (curSwim) {\n                curSwimHeight = curSwim.getBoundingClientRect().top + curSwim.getBoundingClientRect().height;\n            }\n            if (prevSwim) {\n                prevSwimHeight = prevSwim.getBoundingClientRect().top + prevSwim.getBoundingClientRect().height;\n            }\n            if (nextSwim) {\n                nextSwimHeight = nextSwim.getBoundingClientRect().top + nextSwim.getBoundingClientRect().height;\n            }\n            var frozenSwimHeight = content.getBoundingClientRect().top + this.frozenSwimlaneRow.getBoundingClientRect().height;\n            var frozenRowsElement = this.frozenSwimlaneRow.querySelector('.' + cls.FROZEN_ROW_CLASS);\n            if (nextSwimHeight && frozenSwimHeight >= nextSwimHeight && this.frozenOrder < swimlaneRows.length - 1) {\n                if (frozenRowsElement) {\n                    remove(frozenRowsElement.querySelector('.' + cls.SWIMLANE_HEADER_CLASS));\n                    frozenRowsElement.appendChild(nextSwim.querySelector('.' + cls.SWIMLANE_HEADER_CLASS).cloneNode(true));\n                    this.addFrozenSwimlaneDataKey(nextSwim);\n                }\n                ++this.frozenOrder;\n            }\n            else if (prevSwimHeight && frozenSwimHeight < curSwimHeight && frozenSwimHeight > prevSwimHeight && this.frozenOrder > 0) {\n                if (frozenRowsElement) {\n                    remove(frozenRowsElement.querySelector('.' + cls.SWIMLANE_HEADER_CLASS));\n                    frozenRowsElement.appendChild(prevSwim.querySelector('.' + cls.SWIMLANE_HEADER_CLASS).cloneNode(true));\n                    this.addFrozenSwimlaneDataKey(prevSwim);\n                }\n                --this.frozenOrder;\n            }\n        }\n        if (e && e.target.scrollTop === 0) {\n            this.removeFrozenRows();\n        }\n    };\n    LayoutRender.prototype.removeFrozenRows = function () {\n        remove(this.frozenSwimlaneRow);\n        this.frozenSwimlaneRow = null;\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        setStyleAttribute(header, { position: '', top: '' });\n        setStyleAttribute(content, { position: '', top: '' });\n        this.parent.scrollPosition.content = { left: this.parent.scrollPosition.content.left, top: 0 };\n        content.scrollTop = 0;\n        this.frozenOrder = 0;\n    };\n    LayoutRender.prototype.onColumnScroll = function (e) {\n        var target = e.target;\n        if (target.offsetParent) {\n            var columnKey = target.offsetParent.getAttribute('data-key');\n            this.parent.scrollPosition.column[\"\" + columnKey] = { left: target.scrollLeft, top: target.scrollTop };\n        }\n    };\n    LayoutRender.prototype.onAdaptiveScroll = function (e) {\n        if (this.parent.touchModule.tabHold && !this.parent.touchModule.mobilePopup) {\n            e.preventDefault();\n        }\n    };\n    /**\n     * Check column is visible or not.\n     *\n     * @param {ColumnsModel} column - specifies the column.\n     * @returns {boolean}\n     * @private\n     * @hidden\n     */\n    LayoutRender.prototype.isColumnVisible = function (column) {\n        var _this = this;\n        var isVisible = false;\n        var isNumeric = typeof column.keyField === 'number';\n        if (isNumeric) {\n            isVisible = this.parent.actionModule.hideColumnKeys.indexOf(column.keyField.toString()) === -1;\n        }\n        else {\n            column.keyField.split(',').forEach(function (key) { isVisible = _this.parent.actionModule.hideColumnKeys.indexOf(key) === -1; });\n        }\n        return isVisible;\n    };\n    LayoutRender.prototype.renderLimits = function (column, target) {\n        var limits = createElement('div', { className: cls.LIMITS_CLASS });\n        if (column.minCount) {\n            limits.appendChild(createElement('div', {\n                className: cls.MIN_COUNT_CLASS,\n                innerHTML: this.parent.localeObj.getConstant('min') + ': ' + column.minCount.toString()\n            }));\n        }\n        if (column.maxCount) {\n            limits.appendChild(createElement('div', {\n                className: cls.MAX_COUNT_CLASS,\n                innerHTML: this.parent.localeObj.getConstant('max') + ': ' + column.maxCount.toString()\n            }));\n        }\n        if (limits.childElementCount > 0) {\n            if (target.querySelector('.' + cls.CARD_WRAPPER_CLASS)) {\n                target.insertBefore(limits, target.firstElementChild);\n            }\n            else {\n                target.appendChild(limits);\n            }\n        }\n    };\n    LayoutRender.prototype.renderValidation = function () {\n        var _this = this;\n        this.parent.columns.forEach(function (column) {\n            if (!column.minCount && !column.maxCount) {\n                return;\n            }\n            var cardData = _this.columnData[column.keyField];\n            var keySelector = \"[data-key=\\\"\" + column.keyField + \"\\\"]\";\n            var headerCell = _this.parent.element.querySelector(\".\" + (cls.HEADER_CELLS_CLASS + keySelector));\n            var rowCells = [].slice.call(_this.parent.element.querySelectorAll(\".\" + (cls.CONTENT_CELLS_CLASS + keySelector)));\n            if (_this.parent.constraintType === 'Swimlane' && _this.parent.swimlaneSettings.keyField) {\n                _this.swimlaneRow.forEach(function (row, index) {\n                    _this.renderLimits(column, rowCells[index]);\n                    var rowCards = cardData.filter(function (card) {\n                        return card[_this.parent.swimlaneSettings.keyField] === row.keyField;\n                    });\n                    var colorClass = _this.getValidationClass(column, rowCards.length);\n                    if (colorClass) {\n                        addClass([rowCells[index]], colorClass);\n                    }\n                });\n            }\n            else {\n                _this.renderLimits(column, headerCell);\n                var colorClass = _this.getValidationClass(column, cardData.length);\n                if (colorClass) {\n                    addClass(rowCells.concat(headerCell), colorClass);\n                }\n            }\n        });\n    };\n    LayoutRender.prototype.getValidationClass = function (column, count) {\n        var colorClass;\n        if (column.maxCount && count > column.maxCount) {\n            colorClass = cls.MAX_COLOR_CLASS;\n        }\n        else if (column.minCount && count < column.minCount) {\n            colorClass = cls.MIN_COLOR_CLASS;\n        }\n        return colorClass;\n    };\n    LayoutRender.prototype.refreshValidation = function () {\n        var validations = [].slice.call(this.parent.element.querySelectorAll('.' + cls.LIMITS_CLASS));\n        validations.forEach(function (node) { remove(node); });\n        var minClass = [].slice.call(this.parent.element.querySelectorAll('.' + cls.MIN_COLOR_CLASS));\n        removeClass(minClass, cls.MIN_COLOR_CLASS);\n        var maxClass = [].slice.call(this.parent.element.querySelectorAll('.' + cls.MAX_COLOR_CLASS));\n        removeClass(maxClass, cls.MAX_COLOR_CLASS);\n        this.renderValidation();\n    };\n    LayoutRender.prototype.getColumnData = function (columnValue, dataSource) {\n        var _this = this;\n        if (dataSource === void 0) { dataSource = this.parent.kanbanData; }\n        var cardData = [];\n        var isNumeric = typeof columnValue === 'number';\n        if (isNumeric) {\n            var keyData = dataSource.filter(function (cardObj) {\n                return cardObj[_this.parent.keyField] === columnValue;\n            });\n            cardData = cardData.concat(keyData);\n        }\n        else {\n            var columnKeys = columnValue.split(',');\n            var _loop_4 = function (key) {\n                var keyData = dataSource.filter(function (cardObj) {\n                    return cardObj[_this.parent.keyField] === key.trim();\n                });\n                cardData = cardData.concat(keyData);\n            };\n            for (var _i = 0, columnKeys_1 = columnKeys; _i < columnKeys_1.length; _i++) {\n                var key = columnKeys_1[_i];\n                _loop_4(key);\n            }\n        }\n        this.sortCategory(cardData);\n        return cardData;\n    };\n    LayoutRender.prototype.sortCategory = function (cardData) {\n        var key = this.parent.cardSettings.headerField;\n        var direction = this.parent.sortSettings.direction;\n        switch (this.parent.sortSettings.sortBy) {\n            case 'DataSourceOrder':\n                this.sortOrder(key, direction, cardData);\n                break;\n            case 'Custom':\n            case 'Index':\n                if (this.parent.sortSettings.field) {\n                    key = this.parent.sortSettings.field;\n                }\n                this.sortOrder(key, direction, cardData);\n                break;\n        }\n        return cardData;\n    };\n    LayoutRender.prototype.sortOrder = function (key, direction, cardData) {\n        var isNumeric = true;\n        if (this.parent.kanbanData.length > 0) {\n            isNumeric = typeof (this.parent.kanbanData[0])[\"\" + key] === 'number';\n        }\n        if (!isNumeric && this.parent.sortSettings.sortBy === 'Index') {\n            return cardData;\n        }\n        var first;\n        var second;\n        cardData = cardData.sort(function (firstData, secondData) {\n            if (!isNumeric) {\n                first = firstData[\"\" + key] ? firstData[\"\" + key].toLowerCase() : '';\n                second = secondData[\"\" + key] ? secondData[\"\" + key].toLowerCase() : '';\n            }\n            else {\n                first = firstData[\"\" + key];\n                second = secondData[\"\" + key];\n            }\n            return (first > second) ? 1 : ((second > first) ? -1 : 0);\n        });\n        if (direction === 'Descending') {\n            cardData.reverse();\n        }\n        return cardData;\n    };\n    LayoutRender.prototype.documentClick = function (args) {\n        if (args.target.classList.contains(cls.SWIMLANE_OVERLAY_CLASS) &&\n            this.parent.element.querySelector('.' + cls.SWIMLANE_RESOURCE_CLASS).classList.contains('e-popup-open')) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], 'e-enable');\n        }\n        if (closest(args.target, \".\" + cls.ROOT_CLASS)) {\n            return;\n        }\n        var cards = [].slice.call(this.parent.element.querySelectorAll(\".\" + cls.CARD_CLASS + \".\" + cls.CARD_SELECTION_CLASS));\n        removeClass(cards, cls.CARD_SELECTION_CLASS);\n        this.disableAttributeSelection(cards);\n    };\n    LayoutRender.prototype.disableAttributeSelection = function (cards) {\n        if (cards instanceof Element) {\n            cards.setAttribute('aria-selected', 'false');\n        }\n        else {\n            cards.forEach(function (card) { card.setAttribute('aria-selected', 'false'); });\n        }\n    };\n    LayoutRender.prototype.getColumnCards = function (data) {\n        var _this = this;\n        var columnData = {};\n        this.columnKeys = [];\n        this.parent.columns.forEach(function (column) {\n            var isNumeric = typeof column.keyField === 'number';\n            if (isNumeric) {\n                _this.columnKeys = _this.columnKeys.concat(column.keyField.toString());\n            }\n            else {\n                _this.columnKeys = _this.columnKeys.concat(column.keyField.split(',').map(function (e) { return e.trim(); }));\n            }\n            var cardData = _this.getColumnData(column.keyField, data);\n            columnData[column.keyField] = cardData;\n        });\n        return columnData;\n    };\n    LayoutRender.prototype.getSwimlaneCards = function () {\n        var _this = this;\n        var swimlaneData = {};\n        if (this.parent.swimlaneSettings.keyField) {\n            this.kanbanRows.forEach(function (row) {\n                return swimlaneData[row.keyField] = _this.parent.kanbanData.filter(function (obj) {\n                    return !isNoU(obj[_this.parent.keyField]) &&\n                        _this.columnKeys.indexOf(obj[_this.parent.keyField].toString()) > -1 &&\n                        ((!obj[_this.parent.swimlaneSettings.keyField] && _this.parent.swimlaneSettings.showUnassignedRow) ?\n                            '' : obj[_this.parent.swimlaneSettings.keyField]) === row.keyField;\n                });\n            });\n        }\n        return swimlaneData;\n    };\n    LayoutRender.prototype.refreshHeaders = function () {\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        [].slice.call(header.children).forEach(function (child) { return remove(child); });\n        this.renderHeader(header);\n    };\n    LayoutRender.prototype.refreshCards = function () {\n        this.parent.resetTemplates(['cardTemplate']);\n        var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n        cards.forEach(function (card) { return remove(card); });\n        this.renderCards();\n        this.wireDragEvent();\n        this.parent.renderTemplates();\n    };\n    LayoutRender.prototype.refresh = function () {\n        var _this = this;\n        var isColumnTemplateRefreshed = false;\n        this.parent.columns.forEach(function (column) {\n            if (column.showItemCount) {\n                if (column && column.template && !isColumnTemplateRefreshed) {\n                    _this.refreshHeaders();\n                    isColumnTemplateRefreshed = true;\n                }\n                var countSelector = \".\" + cls.HEADER_CELLS_CLASS + \"[data-key=\\\"\" + column.keyField + \"\\\"] .\" + cls.CARD_ITEM_COUNT_CLASS;\n                var itemCount = _this.parent.element.querySelector(countSelector);\n                if (itemCount) {\n                    var isNumeric = typeof column.keyField === 'number';\n                    var cardLength = 0;\n                    if (isNumeric) {\n                        // eslint-disable-next-line no-useless-escape\n                        cardLength = ([].slice.call(_this.parent.element.querySelectorAll('.' + cls.CARD_CLASS + '[data-key=\\\"' + column.keyField + '\\\"]'))).length;\n                    }\n                    else {\n                        var keys = column.keyField.split(',');\n                        for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {\n                            var key = keys_2[_i];\n                            // eslint-disable-next-line no-useless-escape\n                            var cards = [].slice.call(_this.parent.element.querySelectorAll('.' + cls.CARD_CLASS + '[data-key=\\\"' + key.trim() + '\\\"]'));\n                            cardLength = cards.length + cardLength;\n                        }\n                    }\n                    itemCount.innerHTML = '-' + cardLength + '' + _this.parent.localeObj.getConstant('items');\n                }\n            }\n        });\n        if (this.parent.swimlaneSettings.keyField) {\n            var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll(\".\" + cls.SWIMLANE_ROW_CLASS));\n            swimlaneRows.forEach(function (swimlane) {\n                var swimlaneKey = swimlane.getAttribute('data-key');\n                var itemCount = swimlane.querySelector(\".\" + cls.CARD_ITEM_COUNT_CLASS);\n                if (itemCount && swimlaneKey) {\n                    var cards = [].slice.call(swimlane.nextElementSibling.querySelectorAll('.' + cls.CARD_CLASS));\n                    itemCount.innerHTML = '-' + cards.length + '' + _this.parent.localeObj.getConstant('items');\n                }\n            });\n        }\n        this.refreshValidation();\n    };\n    LayoutRender.prototype.updateScrollPosition = function () {\n        var _this = this;\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        if (content) {\n            if (!Browser.isIE) {\n                content.scrollTo(this.parent.scrollPosition.content.left, this.parent.scrollPosition.content.top);\n            }\n            else {\n                content.scrollTop = this.parent.scrollPosition.content.top;\n                content.scrollLeft = this.parent.scrollPosition.content.left;\n            }\n        }\n        var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n        cardWrapper.forEach(function (wrapper) {\n            if (wrapper.offsetParent) {\n                var scrollData = _this.parent.scrollPosition.column[wrapper.offsetParent.getAttribute('data-key')];\n                if (scrollData) {\n                    if (!Browser.isIE) {\n                        wrapper.scrollTo(scrollData.left, scrollData.top);\n                    }\n                    else {\n                        wrapper.scrollTop = scrollData.top;\n                        wrapper.scrollLeft = scrollData.left;\n                    }\n                }\n            }\n        });\n    };\n    LayoutRender.prototype.renderCardBasedOnIndex = function (data, index) {\n        var _this = this;\n        var key = data[this.parent.keyField];\n        var cardRow = this.parent.element.querySelector('.e-content-row:not(.e-swimlane-row)');\n        if (this.parent.swimlaneSettings.keyField && !this.parent.isAdaptive) {\n            var rowSelector = \".e-content-row.e-swimlane-row[data-key=\\\"\" + data[this.parent.swimlaneSettings.keyField] + \"\\\"]\";\n            if (this.parent.element.querySelector(rowSelector)) {\n                cardRow = this.parent.element.querySelector(rowSelector).nextElementSibling;\n            }\n            else {\n                var columnIndex = this.columnKeys.indexOf(key);\n                if (columnIndex !== -1 && this.parent.actionModule.hideColumnKeys.indexOf(key) === -1) {\n                    var index_1 = this.kanbanRows.findIndex(function (rowData) { return rowData['keyField'] === data[_this.parent.swimlaneSettings.keyField]; });\n                    var swim = [].slice.call(this.parent.element.querySelectorAll('.e-swimlane-row'));\n                    var swimRow = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n                    if (swim[index_1]) {\n                        swimRow = swim[index_1];\n                    }\n                    this.renderSwimlaneRow(swimRow, this.kanbanRows[index_1], false);\n                    this.renderSingleContent(swimRow, this.kanbanRows[index_1], false);\n                }\n                cardRow = this.parent.element.querySelector(rowSelector).nextElementSibling;\n                [].slice.call(cardRow.children).forEach(function (cell) {\n                    var cardWrapper = createElement('div', { className: cls.CARD_WRAPPER_CLASS });\n                    cell.appendChild(cardWrapper);\n                    cardWrapper.appendChild(_this.renderEmptyCard());\n                });\n            }\n        }\n        if (this.parent.sortSettings.sortBy !== 'Index') {\n            var field_1 = this.parent.cardSettings.headerField;\n            if (this.parent.sortSettings.sortBy === 'Custom') {\n                field_1 = this.parent.sortSettings.field;\n            }\n            if (isNoU(this.parent.swimlaneSettings.keyField)) {\n                index = this.getColumnData(key, this.parent.kanbanData).findIndex(function (colData) {\n                    return colData[\"\" + field_1] === data[\"\" + field_1];\n                });\n            }\n            else {\n                var swimlaneDatas = this.parent.getSwimlaneData(data[this.parent.swimlaneSettings.keyField]);\n                index = this.getColumnData(key, swimlaneDatas).findIndex(function (colData) { return colData[\"\" + field_1] === data[\"\" + field_1]; });\n            }\n        }\n        else if (this.parent.sortSettings.sortBy === 'Index' &&\n            this.parent.sortSettings.field && this.parent.sortSettings.direction === 'Ascending') {\n            index = data[this.parent.sortSettings.field] - 1;\n        }\n        if (cardRow) {\n            var td = [].slice.call(cardRow.children).filter(function (e) {\n                return e.getAttribute('data-key').replace(/\\s/g, '').split(',').indexOf(key.toString().replace(/\\s/g, '')) !== -1;\n            })[0];\n            var cardWrapper_2 = td.querySelector('.' + cls.CARD_WRAPPER_CLASS);\n            var emptyCard = cardWrapper_2.querySelector('.' + cls.EMPTY_CARD_CLASS);\n            if (emptyCard) {\n                remove(emptyCard);\n            }\n            var cardElement_1 = this.renderCard(data);\n            if (this.parent.allowDragAndDrop && td.classList.contains(cls.DRAG_CLASS)) {\n                this.parent.dragAndDropModule.wireDragEvents(cardElement_1);\n                addClass([cardElement_1], cls.DROPPABLE_CLASS);\n            }\n            var args = { data: data, element: cardElement_1, cancel: false };\n            this.parent.trigger(events.cardRendered, args, function (cardArgs) {\n                if (!cardArgs.cancel) {\n                    if (isNoU(index) || cardWrapper_2.children.length === 0) {\n                        cardWrapper_2.appendChild(cardElement_1);\n                    }\n                    else {\n                        cardWrapper_2.insertBefore(cardElement_1, cardWrapper_2.childNodes[index]);\n                    }\n                }\n            });\n        }\n    };\n    LayoutRender.prototype.removeCard = function (data) {\n        var cardKey = data[this.parent.cardSettings.headerField];\n        var cardElement = this.parent.element.querySelector(\".\" + cls.CARD_CLASS + \"[data-id=\\\"\" + cardKey + \"\\\"]\");\n        if (cardElement) {\n            this.isSelectedCard = cardElement.classList.contains(cls.CARD_SELECTION_CLASS) ? true : false;\n            var cardContainer = cardElement.parentElement;\n            remove(cardElement);\n            if (cardContainer.querySelectorAll('.' + cls.CARD_CLASS + ':not(.' + cls.CLONED_CARD_CLASS + ')').length === 0) {\n                cardContainer.appendChild(this.renderEmptyCard());\n            }\n        }\n    };\n    LayoutRender.prototype.wireEvents = function () {\n        var _this = this;\n        EventHandler.add(this.parent.element, 'click', this.parent.actionModule.clickHandler, this.parent.actionModule);\n        EventHandler.add(this.parent.element, 'dblclick', this.parent.actionModule.doubleClickHandler, this.parent.actionModule);\n        EventHandler.add(document, Browser.touchStartEvent, this.documentClick, this);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        EventHandler.add(content, 'scroll', this.onContentScroll, this);\n        var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n        cardWrapper.forEach(function (wrapper) {\n            if (_this.parent.isInitialRender && wrapper.offsetParent) {\n                _this.parent.scrollPosition.column[wrapper.offsetParent.getAttribute('data-key')] = { left: 0, top: 0 };\n            }\n            EventHandler.add(wrapper, 'scroll', _this.onColumnScroll, _this);\n        });\n        if (this.parent.isAdaptive) {\n            this.parent.touchModule.wireTouchEvents();\n            content.scrollLeft = this.scrollLeft;\n        }\n        this.wireDragEvent();\n    };\n    LayoutRender.prototype.unWireEvents = function () {\n        var _this = this;\n        EventHandler.remove(this.parent.element, 'click', this.parent.actionModule.clickHandler);\n        EventHandler.remove(this.parent.element, 'dblclick', this.parent.actionModule.doubleClickHandler);\n        EventHandler.remove(document, Browser.touchStartEvent, this.documentClick);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        if (content) {\n            EventHandler.remove(content, 'scroll', this.onContentScroll);\n            if (this.parent.allowDragAndDrop) {\n                this.unWireDragEvent();\n            }\n        }\n        var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n        if (cardWrapper.length > 0) {\n            cardWrapper.forEach(function (wrapper) { EventHandler.remove(wrapper, 'scroll', _this.onColumnScroll); });\n        }\n        if (this.parent.isAdaptive) {\n            this.parent.touchModule.unWireTouchEvents();\n        }\n    };\n    LayoutRender.prototype.wireDragEvent = function () {\n        var _this = this;\n        if (this.parent.allowDragAndDrop) {\n            var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS\n                + '.' + cls.DRAG_CLASS + ' .' + cls.CARD_CLASS));\n            addClass(cards, cls.DROPPABLE_CLASS);\n            cards.forEach(function (card) { return _this.parent.dragAndDropModule.wireDragEvents(card); });\n        }\n    };\n    LayoutRender.prototype.unWireDragEvent = function () {\n        var _this = this;\n        var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS\n            + '.' + cls.DRAG_CLASS + ' .' + cls.CARD_CLASS));\n        removeClass(cards, cls.DROPPABLE_CLASS);\n        cards.forEach(function (card) { return _this.parent.dragAndDropModule.unWireDragEvents(card); });\n    };\n    LayoutRender.prototype.destroy = function () {\n        this.parent.resetTemplates();\n        this.parent.off(events.dataReady, this.initRender);\n        this.parent.off(events.contentReady, this.scrollUiUpdate);\n        this.unWireEvents();\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        if (header) {\n            remove(header);\n        }\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        if (content) {\n            remove(content);\n        }\n        if (this.treeViewObj) {\n            this.treeViewObj.destroy();\n            this.treeViewObj = null;\n        }\n        if (this.treePopup) {\n            this.treePopup.destroy();\n            this.treePopup = null;\n        }\n        var swimlaneToolBarEle = this.parent.element.querySelector('.' + cls.SWIMLANE_HEADER_CLASS);\n        if (swimlaneToolBarEle) {\n            remove(swimlaneToolBarEle);\n        }\n        var swimlaneContent = this.parent.element.querySelector('.' + cls.SWIMLANE_CONTENT_CLASS);\n        if (swimlaneContent) {\n            remove(swimlaneContent);\n        }\n        var swimlaneFrozenRow = this.parent.element.querySelector('.' + cls.FROZEN_SWIMLANE_ROW_CLASS);\n        if (swimlaneFrozenRow) {\n            remove(swimlaneFrozenRow);\n            this.frozenSwimlaneRow = null;\n        }\n    };\n    return LayoutRender;\n}(MobileLayout));\nexport { LayoutRender };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, createElement, formatUnit, EventHandler, addClass, remove, extend, Browser, isNullOrUndefined as isNoU, removeClass, closest, detach, debounce } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Deferred, UrlAdaptor, Predicate } from '@syncfusion/ej2-data';\nimport { MobileLayout } from './mobile-layout';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Kanban layout rendering module\n *\n */\nvar VirtualLayoutRender = /** @class */ (function (_super) {\n    __extends(VirtualLayoutRender, _super);\n    function VirtualLayoutRender(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.parent = parent;\n        _this.kanbanRows = [];\n        _this.scrollStatus = {};\n        _this.offsets = {};\n        _this.tempOffsets = {};\n        _this.offsetKeys = [];\n        _this.columnKeys = [];\n        _this.scrollLeft = 0;\n        _this.frozenOrder = 0;\n        _this.winResize = _this.windowResize.bind(_this);\n        if (_this.parent.enableVirtualization) {\n            _this.parent.on(events.dataReady, _this.initRender, _this);\n            _this.parent.on(events.contentReady, _this.scrollUiUpdate, _this);\n        }\n        return _this;\n    }\n    VirtualLayoutRender.prototype.initRender = function () {\n        this.isSwimlane = !isNoU(this.parent.swimlaneSettings.keyField) &&\n            this.parent.swimlaneSettings.keyField.trim().length > 1 ? true : false;\n        this.query = this.parent.query instanceof Query ? this.parent.query : new Query();\n        if (this.parent.columns.length === 0) {\n            return;\n        }\n        this.cardHeight = this.cardHeightCalculate();\n        this.columnData = this.getColumnCards();\n        this.kanbanRows = this.getRows();\n        if (this.parent.isAdaptive) {\n            var parent_1 = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n            if (parent_1) {\n                this.scrollLeft = parent_1.scrollLeft;\n            }\n        }\n        this.destroy();\n        this.parent.on(events.dataReady, this.initRender, this);\n        this.parent.on(events.contentReady, this.scrollUiUpdate, this);\n        var header = createElement('div', { className: cls.HEADER_CLASS });\n        this.parent.element.appendChild(header);\n        this.renderHeader(header);\n        if (!this.isSwimlane) {\n            this.renderContent();\n            this.renderCards();\n        }\n        this.renderValidation();\n        this.parent.renderTemplates();\n        this.parent.notify(events.contentReady, {});\n        this.wireEvents();\n        if (this.parent.isInitialRender) {\n            this.parent.isInitialRender = false;\n        }\n    };\n    VirtualLayoutRender.prototype.cardHeightCalculate = function () {\n        var cardHeight;\n        if (this.parent.cardHeight === 'auto') {\n            cardHeight = 100 + 8; // 8 is the margin bottom value of the card.\n        }\n        else {\n            cardHeight = parseInt(formatUnit(this.parent.cardHeight).split('px')[0], 10) + 8;\n        }\n        return cardHeight;\n    };\n    VirtualLayoutRender.prototype.renderHeader = function (header) {\n        var headerWrap = createElement('div', { className: this.parent.swimlaneSettings.keyField ? cls.SWIMLANE_CLASS : '' });\n        header.appendChild(headerWrap);\n        var headerTable = createElement('table', {\n            className: cls.TABLE_CLASS + ' ' + cls.HEADER_TABLE_CLASS,\n            attrs: { 'role': 'presentation' }\n        });\n        headerWrap.appendChild(headerTable);\n        this.renderColGroup(headerTable);\n        var tableHead = createElement('thead');\n        headerTable.appendChild(tableHead);\n        if (this.parent.stackedHeaders.length > 0) {\n            tableHead.appendChild(this.createStackedRow(this.parent.stackedHeaders));\n        }\n        var tr = createElement('tr', { className: cls.HEADER_ROW_CLASS });\n        tableHead.appendChild(tr);\n        var _loop_1 = function (column) {\n            if (this_1.isColumnVisible(column)) {\n                var index = this_1.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n                var th_1 = createElement('th', {\n                    className: index === -1 ? cls.HEADER_CELLS_CLASS : cls.HEADER_CELLS_CLASS + ' ' + cls.COLLAPSED_CLASS,\n                    attrs: { 'data-role': 'kanban-column', 'data-key': column.keyField.toString() }\n                });\n                var classList = [];\n                if (column.allowToggle) {\n                    classList.push(cls.HEADER_ROW_TOGGLE_CLASS);\n                    if (!column.isExpanded) {\n                        classList.push(cls.COLLAPSED_CLASS);\n                    }\n                }\n                addClass([th_1], classList);\n                var headerWrapper = createElement('div', { className: cls.HEADER_WRAP_CLASS });\n                th_1.appendChild(headerWrapper);\n                var noOfCard = this_1.parent.dataModule.isRemote() ?\n                    this_1.parent.columnDataCount[column.keyField] : this_1.columnData[column.keyField].length;\n                var headerTitle = createElement('div', { className: cls.HEADER_TITLE_CLASS });\n                headerWrapper.appendChild(headerTitle);\n                if (column.template) {\n                    var templateArgs = {\n                        keyField: column.keyField, headerText: column.headerText, minCount: column.minCount, maxCount: column.maxCount,\n                        allowToggle: column.allowToggle, isExpanded: column.isExpanded, showItemCount: column.showItemCount, count: noOfCard\n                    };\n                    addClass([th_1], cls.TEMPLATE_CLASS);\n                    var templateId = this_1.parent.element.id + '_columnTemplate';\n                    var templateHeader = this_1.parent.templateParser(column.template)(templateArgs, this_1.parent, 'columnTemplate', templateId, false);\n                    append(templateHeader, headerTitle);\n                }\n                else {\n                    var header_1 = createElement('div', { className: cls.HEADER_TEXT_CLASS, innerHTML: column.headerText });\n                    headerTitle.appendChild(header_1);\n                    if (column.showItemCount) {\n                        var itemCount = createElement('div', {\n                            className: cls.CARD_ITEM_COUNT_CLASS,\n                            innerHTML: '- ' + noOfCard.toString() + ' ' + this_1.parent.localeObj.getConstant('items')\n                        });\n                        headerTitle.appendChild(itemCount);\n                    }\n                }\n                if (column.allowToggle) {\n                    var isExpand = (column.isExpanded && index === -1) ? true : false;\n                    var name_1 = (isExpand) ? cls.COLUMN_EXPAND_CLASS : cls.COLUMN_COLLAPSE_CLASS;\n                    var icon = createElement('div', {\n                        className: cls.HEADER_ICON_CLASS + ' ' + cls.ICON_CLASS + ' ' + name_1,\n                        attrs: { 'tabindex': '0' }\n                    });\n                    icon.setAttribute('aria-label', isExpand ? column.keyField + ' Expand' : column.keyField + ' Collapse');\n                    th_1.setAttribute('aria-expanded', isExpand.toString());\n                    headerWrapper.appendChild(icon);\n                }\n                var dataObj = [{ keyField: column.keyField, textField: column.headerText, count: noOfCard }];\n                var args = { data: dataObj, element: tr, cancel: false, requestType: 'headerRow' };\n                this_1.parent.trigger(events.queryCellInfo, args, function (columnArgs) {\n                    if (!columnArgs.cancel) {\n                        tr.appendChild(th_1);\n                    }\n                });\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n            var column = _a[_i];\n            _loop_1(column);\n        }\n    };\n    VirtualLayoutRender.prototype.renderContent = function () {\n        var content = createElement('div', { className: cls.CONTENT_CLASS });\n        this.parent.element.appendChild(content);\n        var contentWrap = createElement('div', { className: this.parent.swimlaneSettings.keyField ? cls.SWIMLANE_CLASS : '' });\n        content.appendChild(contentWrap);\n        var contentTable = createElement('table', {\n            className: cls.TABLE_CLASS + ' ' + cls.CONTENT_TABLE_CLASS,\n            attrs: { 'role': 'presentation' }\n        });\n        contentWrap.appendChild(contentTable);\n        this.renderColGroup(contentTable);\n        var tBody = createElement('tbody');\n        contentTable.appendChild(tBody);\n        var isCollaspsed = false;\n        for (var _i = 0, _a = this.kanbanRows; _i < _a.length; _i++) {\n            var row = _a[_i];\n            if (this.parent.swimlaneSettings.keyField && this.parent.swimlaneToggleArray.length !== 0) {\n                var index = this.parent.swimlaneToggleArray.indexOf(row.keyField);\n                isCollaspsed = index !== -1;\n            }\n            this.renderSingleContent(tBody, row, isCollaspsed);\n        }\n    };\n    VirtualLayoutRender.prototype.renderSingleContent = function (tBody, row, isCollaspsed) {\n        var className = isCollaspsed ? cls.CONTENT_ROW_CLASS + ' ' + cls.COLLAPSED_CLASS : cls.CONTENT_ROW_CLASS;\n        var tr = createElement('tr', { className: className, attrs: { 'aria-expanded': 'true' } });\n        for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n            var column = _a[_i];\n            if (this.isColumnVisible(column)) {\n                var index = this.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n                var className_1 = index === -1 ? cls.CONTENT_CELLS_CLASS : cls.CONTENT_CELLS_CLASS + ' ' + cls.COLLAPSED_CLASS;\n                var dragClass = (column.allowDrag ? ' ' + cls.DRAG_CLASS : '') + (column.allowDrop ? ' ' + cls.DROP_CLASS\n                    + ' ' + cls.DROPPABLE_CLASS : '');\n                var td = createElement('td', {\n                    className: className_1 + dragClass,\n                    attrs: { 'data-role': 'kanban-column', 'data-key': column.keyField.toString(), 'aria-expanded': 'true',\n                        'tabindex': '0', 'role': 'navigation' }\n                });\n                if (column.allowToggle && !column.isExpanded || index !== -1) {\n                    addClass([td], cls.COLLAPSED_CLASS);\n                    var text = (column.showItemCount ? '[' + (this.parent.dataModule.isRemote() ?\n                        this.parent.columnDataCount[column.keyField] : this.getColumnData(column.keyField).length) +\n                        '] ' : '') + column.headerText;\n                    td.appendChild(createElement('div', { className: cls.COLLAPSE_HEADER_TEXT_CLASS, innerHTML: text }));\n                    td.setAttribute('aria-expanded', 'false');\n                }\n                if (column.showAddButton) {\n                    var button = createElement('div', { className: cls.SHOW_ADD_BUTTON, attrs: { 'tabindex': '-1' } });\n                    button.appendChild(createElement('div', { className: cls.SHOW_ADD_ICON + ' ' + cls.ICON_CLASS }));\n                    td.appendChild(button);\n                }\n                tr.appendChild(td);\n                if (this.parent.enableVirtualization) {\n                    var headerHeight = this.parent.element.querySelector('.e-kanban-header').getBoundingClientRect().height;\n                    //'15' is reduced for optimal padding in the bottom and to avoid page scrollbar appear in the height auto case.\n                    if (this.parent.height === 'auto') {\n                        td.style.height = window.innerHeight - (headerHeight + this.parent.element.getBoundingClientRect().top + 15) + 'px';\n                    }\n                    else {\n                        td.style.height = parseInt(formatUnit(this.parent.height).split('px')[0], 10) - (headerHeight + 15) + 'px';\n                    }\n                }\n            }\n        }\n        var dataObj = [{ keyField: row.keyField, textField: row.textField, count: row.count }];\n        var args = { data: dataObj, element: tr, cancel: false, requestType: 'contentRow' };\n        this.parent.trigger(events.queryCellInfo, args, function (columnArgs) {\n            if (!columnArgs.cancel) {\n                if (tBody.classList.contains('e-swimlane-row')) {\n                    tBody.insertAdjacentElement('beforebegin', tr);\n                }\n                else {\n                    tBody.appendChild(tr);\n                }\n            }\n        });\n    };\n    VirtualLayoutRender.prototype.windowResize = function () {\n        var cloumnsTDElem = this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS);\n        var headerHeight = this.parent.element.querySelector('.e-kanban-header').getBoundingClientRect().height;\n        for (var j = 0; j < cloumnsTDElem.length; j++) {\n            if (this.parent.height === 'auto') {\n                cloumnsTDElem[j].style.height = window.innerHeight - (headerHeight + this.parent.element.getBoundingClientRect().top + 15) + 'px';\n            }\n            else {\n                cloumnsTDElem[j].style.height = parseInt(formatUnit(this.parent.height).split('px')[0], 10) - (headerHeight + 15) + 'px';\n            }\n        }\n    };\n    VirtualLayoutRender.prototype.refreshColumnData = function (draggedColumnKey, droppedColumnKey, requestType, crudKeyField) {\n        var _this = this;\n        var cardRows = [].slice.call(this.parent.element.querySelectorAll('.e-content-row:not(.e-swimlane-row)'));\n        var isCRUD = (requestType === 'cardChanged' || requestType === 'cardCreated' || requestType === 'cardRemoved')\n            && !isNoU(crudKeyField);\n        cardRows.forEach(function (tr) {\n            var _loop_2 = function (column) {\n                if (_this.isColumnVisible(column) && (column.keyField === draggedColumnKey || column.keyField === droppedColumnKey)\n                    || isCRUD) {\n                    var cards_1 = 0;\n                    var blocks = [];\n                    var columnData = _this.getColumnCards()[column.keyField];\n                    var currentColumnDataCount = _this.parent.dataModule.isRemote() ?\n                        _this.parent.columnDataCount[column.keyField] : columnData.length;\n                    var overallHeight = _this.cardHeight * currentColumnDataCount;\n                    // eslint-disable-next-line prefer-spread\n                    blocks = Array.apply(null, Array(currentColumnDataCount)).map(function () { return ++cards_1; });\n                    var columnWrapper = tr.querySelector('[data-key=\"' + column.keyField + '\"]');\n                    var singleIndexCardCount = Math.ceil(parseInt(columnWrapper.style.height.split('px')[0], 10) / _this.cardHeight);\n                    _this.offsets[1] = singleIndexCardCount * _this.cardHeight;\n                    for (var i = 1; i < blocks.length; i++) {\n                        _this.offsets[blocks[i]] = (_this.offsets[blocks[i - 1]]) + (singleIndexCardCount * _this.cardHeight);\n                        _this.tempOffsets[blocks[i]] = _this.offsets[blocks[i] - 1] | 0;\n                    }\n                    var cardWrapper = columnWrapper.querySelector('.' + cls.CARD_WRAPPER_CLASS);\n                    var maxBlock = currentColumnDataCount % 2 === 0 ? currentColumnDataCount - 2 : currentColumnDataCount - 1;\n                    var viewInfo = _this.getInfoFromView(_this.scrollStatus[column.keyField]);\n                    var transformY = _this.getTranslateY(viewInfo);\n                    var cardVirtualElement = cardWrapper.querySelector('.' + cls.CARD_VIRTUAL_WRAPPER_CLASS);\n                    cardVirtualElement.style.maxHeight = currentColumnDataCount * _this.cardHeight + 'px';\n                    _this.setPadding(transformY, cardVirtualElement, currentColumnDataCount);\n                    _this.currentStatus = {\n                        column: column.keyField,\n                        columnOverAllHeight: overallHeight,\n                        columnHeight: parseInt(columnWrapper.style.height.split('px')[0], 10),\n                        previousScrollTop: _this.scrollStatus[column.keyField].currentScrollTop,\n                        currentScrollTop: cardWrapper.scrollTop,\n                        scrollDirection: _this.scrollStatus[column.keyField].scrollDirection,\n                        currentBlockIndex: _this.scrollStatus[column.keyField].currentBlockIndex,\n                        oldBlockIndex: _this.scrollStatus[column.keyField].oldBlockIndex,\n                        offsets: _this.offsets,\n                        tempOffsets: _this.tempOffsets,\n                        totalColumnData: currentColumnDataCount,\n                        singleIndexCardCount: singleIndexCardCount,\n                        maxBlock: maxBlock\n                    };\n                    _this.scrollStatus[column.keyField] = _this.currentStatus;\n                }\n            };\n            for (var _i = 0, _a = _this.parent.columns; _i < _a.length; _i++) {\n                var column = _a[_i];\n                _loop_2(column);\n            }\n        });\n    };\n    VirtualLayoutRender.prototype.renderCards = function () {\n        var _this = this;\n        var cardRows = [].slice.call(this.parent.element.querySelectorAll('.e-content-row:not(.e-swimlane-row)'));\n        var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll('.e-content-row.e-swimlane-row'));\n        var removeTrs = [];\n        var columnTransition = false;\n        cardRows.forEach(function (tr, index) {\n            var dataCount = 0;\n            var _loop_3 = function (column) {\n                if (_this.isColumnVisible(column)) {\n                    var cards_2 = 0;\n                    var currentScrollIndex = 0;\n                    var blocks = [];\n                    _this.offsets = {};\n                    _this.tempOffsets = {};\n                    var columnData = _this.columnData[column.keyField];\n                    var currentColumnDataCount = _this.parent.dataModule.isRemote()\n                        ? _this.parent.columnDataCount[column.keyField] : columnData.length;\n                    dataCount += currentColumnDataCount;\n                    var overallHeight = (_this.cardHeight * currentColumnDataCount) + 7; //7 is difference between top space of the scroll element\n                    var columnWrapper = tr.querySelector('[data-key=\"' + column.keyField + '\"]');\n                    var singleIndexCardCount = Math.ceil(parseFloat(columnWrapper.style.height.split('px')[0]) / _this.cardHeight);\n                    var currentColumnBlock = singleIndexCardCount > currentColumnDataCount ? currentColumnDataCount :\n                        Math.floor(currentColumnDataCount / singleIndexCardCount);\n                    // eslint-disable-next-line prefer-spread\n                    blocks = Array.apply(null, Array(currentColumnDataCount)).map(function () { return ++cards_2; });\n                    _this.offsets[1] = singleIndexCardCount * _this.cardHeight + 7;\n                    for (var i = 1; i < blocks.length; i++) {\n                        _this.offsets[blocks[i]] = (_this.offsets[blocks[i - 1]]) + (singleIndexCardCount * _this.cardHeight);\n                        _this.tempOffsets[blocks[i]] = _this.offsets[blocks[i] - 1] | 0;\n                    }\n                    var cardWrapper = createElement('div', {\n                        className: cls.CARD_WRAPPER_CLASS, attrs: { 'role': 'listbox' }\n                    });\n                    var cardVirtualWrapper_1 = createElement('div', {\n                        className: cls.CARD_VIRTUAL_WRAPPER_CLASS, attrs: { 'role': 'listbox' }\n                    });\n                    cardWrapper.appendChild(cardVirtualWrapper_1);\n                    var maxBlock = currentColumnBlock % 2 === 0 ? currentColumnBlock : currentColumnBlock + 1;\n                    _this.currentStatus = {\n                        column: column.keyField,\n                        columnOverAllHeight: overallHeight,\n                        columnHeight: parseInt(columnWrapper.style.height.split('px')[0], 10),\n                        previousScrollTop: null,\n                        currentScrollTop: cardWrapper.scrollTop,\n                        scrollDirection: null,\n                        currentBlockIndex: [1, 2],\n                        oldBlockIndex: [1, 2],\n                        offsets: _this.offsets,\n                        tempOffsets: _this.tempOffsets,\n                        totalColumnData: currentColumnDataCount,\n                        singleIndexCardCount: singleIndexCardCount,\n                        maxBlock: maxBlock\n                    };\n                    _this.scrollStatus[column.keyField] = _this.currentStatus;\n                    if (column.transitionColumns.length > 0) {\n                        columnTransition = true;\n                    }\n                    if (!columnTransition && isNoU(_this.parent.swimlaneSettings.keyField)) {\n                        var borderElem = createElement('div', { className: cls.BORDER_CLASS });\n                        columnWrapper.appendChild(borderElem);\n                    }\n                    columnWrapper.appendChild(cardWrapper);\n                    if (currentColumnDataCount > 0) {\n                        var _loop_4 = function (i) {\n                            var cardText = columnData[i][_this.parent.cardSettings.headerField];\n                            var cardIndex = _this.parent.actionModule.selectionArray.indexOf(cardText);\n                            var cardElement = _this.renderCard(columnData[i]);\n                            if (cardIndex !== -1) {\n                                cardElement.setAttribute('aria-selected', 'true');\n                                addClass([cardElement], cls.CARD_SELECTION_CLASS);\n                            }\n                            var args = { data: columnData[i], element: cardElement, cancel: false };\n                            _this.parent.trigger(events.cardRendered, args, function (cardArgs) {\n                                if (!cardArgs.cancel) {\n                                    cardVirtualWrapper_1.appendChild(cardElement);\n                                }\n                            });\n                        };\n                        for (var i = currentScrollIndex; i < singleIndexCardCount * 2 && i < columnData.length; i++) {\n                            _loop_4(i);\n                        }\n                        cardVirtualWrapper_1.style.maxHeight = _this.cardHeight * currentColumnDataCount + 'px';\n                    }\n                    else {\n                        cardVirtualWrapper_1.appendChild(_this.renderEmptyCard());\n                    }\n                    _this.setPadding(0, cardVirtualWrapper_1, currentColumnDataCount);\n                }\n            };\n            for (var _i = 0, _a = _this.parent.columns; _i < _a.length; _i++) {\n                var column = _a[_i];\n                _loop_3(column);\n            }\n            if (dataCount === 0) {\n                removeTrs.push(tr);\n                if (swimlaneRows.length > 0) {\n                    removeTrs.push(swimlaneRows[index]);\n                }\n            }\n        });\n        if (!this.parent.swimlaneSettings.showEmptyRow && (this.parent.kanbanData.length === 0 && !this.parent.showEmptyColumn)) {\n            removeTrs.forEach(function (tr) { return remove(tr); });\n        }\n    };\n    VirtualLayoutRender.prototype.renderCard = function (data) {\n        var cardElement = createElement('div', {\n            className: cls.CARD_CLASS,\n            attrs: {\n                'data-id': data[this.parent.cardSettings.headerField], 'data-key': data[this.parent.keyField],\n                'aria-selected': 'false', 'tabindex': '-1', 'role': 'option'\n            }\n        });\n        cardElement.style.height = this.cardHeight - 8 + 'px'; // Since in the public card height calculation margin bottom is added, so it reduced here.\n        if (this.parent.cardSettings.template) {\n            addClass([cardElement], cls.TEMPLATE_CLASS);\n            var templateId = this.parent.element.id + '_cardTemplate';\n            var cardTemplate = this.parent.templateParser(this.parent.cardSettings.template)(data, this.parent, 'cardTemplate', templateId, false);\n            append(cardTemplate, cardElement);\n        }\n        else {\n            var tooltipClass = this.parent.enableTooltip ? ' ' + cls.TOOLTIP_TEXT_CLASS : '';\n            if (this.parent.cardSettings.showHeader) {\n                var cardHeader = createElement('div', { className: cls.CARD_HEADER_CLASS });\n                var cardCaption = createElement('div', { className: cls.CARD_HEADER_TEXT_CLASS });\n                var cardText = createElement('div', {\n                    className: cls.CARD_HEADER_TITLE_CLASS + tooltipClass,\n                    innerHTML: data[this.parent.cardSettings.headerField] || ''\n                });\n                cardHeader.appendChild(cardCaption);\n                cardCaption.appendChild(cardText);\n                cardElement.appendChild(cardHeader);\n            }\n            var cardContent = createElement('div', {\n                className: cls.CARD_CONTENT_CLASS + tooltipClass,\n                innerHTML: data[this.parent.cardSettings.contentField] || ''\n            });\n            cardElement.appendChild(cardContent);\n            if (this.parent.cardSettings.tagsField && data[this.parent.cardSettings.tagsField]) {\n                var cardTags = createElement('div', { className: cls.CARD_TAGS_CLASS });\n                var tags = data[this.parent.cardSettings.tagsField].toString().split(',');\n                for (var _i = 0, tags_1 = tags; _i < tags_1.length; _i++) {\n                    var tag = tags_1[_i];\n                    cardTags.appendChild(createElement('div', {\n                        className: cls.CARD_TAG_CLASS + ' ' + cls.CARD_LABEL_CLASS, innerHTML: tag\n                    }));\n                }\n                cardElement.appendChild(cardTags);\n            }\n            if (this.parent.cardSettings.grabberField && data[this.parent.cardSettings.grabberField]) {\n                addClass([cardElement], cls.CARD_COLOR_CLASS);\n                cardElement.style.borderLeftColor = data[this.parent.cardSettings.grabberField];\n            }\n            if (this.parent.cardSettings.footerCssField) {\n                var cardFields = createElement('div', { className: cls.CARD_FOOTER_CLASS });\n                var keys = data[this.parent.cardSettings.footerCssField].split(',');\n                for (var _a = 0, keys_1 = keys; _a < keys_1.length; _a++) {\n                    var key = keys_1[_a];\n                    cardFields.appendChild(createElement('div', {\n                        className: key.trim() + ' ' + cls.CARD_FOOTER_CSS_CLASS\n                    }));\n                }\n                cardElement.appendChild(cardFields);\n            }\n        }\n        return cardElement;\n    };\n    VirtualLayoutRender.prototype.renderEmptyCard = function () {\n        var emptyCard = createElement('span', {\n            className: cls.EMPTY_CARD_CLASS,\n            innerHTML: this.parent.localeObj.getConstant('noCard')\n        });\n        return emptyCard;\n    };\n    VirtualLayoutRender.prototype.renderColGroup = function (table) {\n        var _this = this;\n        var colGroup = createElement('colgroup');\n        this.parent.columns.forEach(function (column) {\n            if (_this.isColumnVisible(column)) {\n                var index = _this.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n                var isToggle = column.allowToggle && !column.isExpanded;\n                var className = index === -1 ? (isToggle ? cls.COLLAPSED_CLASS : '') : cls.COLLAPSED_CLASS;\n                var col = createElement('col', {\n                    className: className,\n                    attrs: { 'data-key': column.keyField.toString() },\n                    styles: _this.parent.isAdaptive ? 'width: ' +\n                        (isToggle ? formatUnit(events.toggleWidth) : formatUnit(_this.getWidth())) : ''\n                });\n                colGroup.appendChild(col);\n            }\n        });\n        table.appendChild(colGroup);\n    };\n    VirtualLayoutRender.prototype.getRows = function () {\n        var kanbanRows = [];\n        kanbanRows.push({ keyField: '', textField: '' });\n        return kanbanRows;\n    };\n    VirtualLayoutRender.prototype.createStackedRow = function (rows) {\n        var tr = createElement('tr', { className: cls.HEADER_ROW_CLASS + ' ' + cls.STACKED_HEADER_ROW_CLASS });\n        var stackedHeaders = [];\n        this.parent.columns.forEach(function (column) {\n            var headerText = '';\n            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n                var row = rows_1[_i];\n                if (row.keyFields.indexOf(column.keyField.toString()) !== -1) {\n                    headerText = row.text;\n                }\n            }\n            stackedHeaders.push(headerText);\n        });\n        for (var h = 0; h < stackedHeaders.length; h++) {\n            var colSpan = 1;\n            for (var j = h + 1; j < stackedHeaders.length; j++) {\n                if ((stackedHeaders[h] !== '') && (stackedHeaders[j] !== '') && stackedHeaders[h] === stackedHeaders[j]) {\n                    colSpan++;\n                }\n                else {\n                    break;\n                }\n            }\n            var div = createElement('div', { className: cls.HEADER_TEXT_CLASS, innerHTML: stackedHeaders[h] });\n            var th = createElement('th', {\n                className: cls.HEADER_CELLS_CLASS + ' ' + cls.STACKED_HEADER_CELL_CLASS,\n                attrs: { 'colspan': colSpan.toString() }\n            });\n            tr.appendChild(th).appendChild(div);\n            h += colSpan - 1;\n        }\n        return tr;\n    };\n    VirtualLayoutRender.prototype.scrollUiUpdate = function () {\n        var _this = this;\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        var height = this.parent.element.offsetHeight - header.offsetHeight;\n        if (this.parent.isAdaptive) {\n            height = window.innerHeight - (header.offsetHeight + events.bottomSpace);\n            var swimlaneToolbar = this.parent.element.querySelector('.' + cls.SWIMLANE_HEADER_CLASS);\n            if (swimlaneToolbar) {\n                height -= swimlaneToolbar.offsetHeight;\n            }\n            var cardWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS));\n            cardWrappers.forEach(function (cell) {\n                var cardWrapper = cell.querySelector('.' + cls.CARD_WRAPPER_CLASS);\n                if (!cardWrapper.classList.contains(cls.MULTI_CARD_WRAPPER_CLASS)) {\n                    cardWrapper.style.height = formatUnit(height);\n                    EventHandler.add(cell, 'touchmove', _this.onAdaptiveScroll, _this);\n                }\n            });\n        }\n        if (this.parent.height !== 'auto' && this.parent.height !== '100%') {\n            content.style.height = formatUnit(height);\n        }\n        [].slice.call(header.children).forEach(function (node) {\n            var paddingValue = 0;\n            if ((content.offsetWidth - content.clientWidth) > 0) {\n                paddingValue = 17;\n                if ((content.offsetHeight - content.clientHeight) > 0) {\n                    node.style.width = formatUnit(content.clientWidth);\n                }\n            }\n            if (_this.parent.enableRtl) {\n                node.style.paddingLeft = formatUnit(paddingValue);\n            }\n            else {\n                node.style.paddingRight = formatUnit(paddingValue);\n            }\n        });\n        this.updateScrollPosition();\n    };\n    VirtualLayoutRender.prototype.onContentScroll = function (e) {\n        var target = e.target;\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        [].slice.call(header.children).forEach(function (node) { node.scrollLeft = target.scrollLeft; });\n        this.parent.scrollPosition.content = { left: target.scrollLeft, top: target.scrollTop };\n    };\n    VirtualLayoutRender.prototype.getOffset = function (block, viewInfo) {\n        return Math.min(viewInfo.offsets[block] | 0, viewInfo.offsets[viewInfo.maxBlock] | 0);\n    };\n    VirtualLayoutRender.prototype.getTranslateY = function (viewInfo) {\n        var block = (viewInfo.newBlockIndex[0] || 1) - 1;\n        var translate = this.getOffset(block, viewInfo);\n        var endTranslate = this.getOffset(viewInfo.newBlockIndex[viewInfo.newBlockIndex.length - 1], viewInfo);\n        var result = translate > viewInfo.currentScrollTop ?\n            this.getOffset(block - 1, viewInfo) : endTranslate < (viewInfo.currentScrollTop + viewInfo.columnHeight) ?\n            this.getOffset(block + 1, viewInfo) : translate;\n        return result;\n    };\n    VirtualLayoutRender.prototype.setPadding = function (paddingTop, scrollElem, dataCount, isScrolledToLast, direction) {\n        if (isScrolledToLast && direction === 'down') {\n            scrollElem.style.paddingTop = paddingTop + \"px\";\n            scrollElem.style.paddingBottom = '0px';\n        }\n        else {\n            scrollElem.style.paddingTop = paddingTop + \"px\";\n            scrollElem.style.paddingBottom = this.cardHeight * dataCount - paddingTop + \"px\";\n        }\n    };\n    VirtualLayoutRender.prototype.getData = function (keyField, column, take, skip) {\n        var query = this.query.clone();\n        var predicate = new Predicate(keyField, 'equal', column, true);\n        query.where(predicate);\n        query.take(take);\n        query.skip(skip);\n        query.addParams('KanbanVirtualScroll', 'KanbanVirtualScroll');\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            var def = this.eventPromise({ requestType: '' }, query);\n            return def.promise;\n        }\n        return this.parent.dataModule.dataManager.executeQuery(query);\n    };\n    VirtualLayoutRender.prototype.eventPromise = function (args, query) {\n        var state = this.getStateEventArgument(query);\n        var def = new Deferred();\n        state.updateData = def.resolve;\n        state.action = args;\n        return def;\n    };\n    VirtualLayoutRender.prototype.getStateEventArgument = function (query) {\n        var adaptr = new UrlAdaptor();\n        var dm = new DataManager({ url: '', adaptor: new UrlAdaptor });\n        var state = adaptr.processQuery(dm, query);\n        var data = JSON.parse(state.data);\n        return extend(data, state.pvtData);\n    };\n    VirtualLayoutRender.prototype.dataManagerSuccess = function (e, type) {\n        var _this = this;\n        var resultData;\n        if (type) {\n            resultData = extend([], !isNoU(e.result.result) ?\n                e.result.result : e.result, null, true);\n        }\n        else {\n            this.parent.trigger(events.dataBinding, e, function (args) {\n                resultData = extend([], !isNoU(args.result.result) ?\n                    args.result.result : args.result, null, true);\n                _this.parent.trigger(events.dataBound, null, function () { return _this.parent.hideSpinner(); });\n            });\n        }\n        return resultData;\n    };\n    VirtualLayoutRender.prototype.dataManagerFailure = function (e) {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.trigger(events.actionFailure, { error: e }, function () { return _this.parent.hideSpinner(); });\n    };\n    VirtualLayoutRender.prototype.onColScrollShowSkeleton = function (args) {\n        var target = args.target;\n        if (this.parent.element.querySelectorAll('.e-card-skeleton-wrapper').length > 0) {\n            return;\n        }\n        var key = target.parentElement.getAttribute('data-key');\n        var previousScrollTop = this.scrollStatus[key].previousScrollTop;\n        var parentElemHeight = target.parentElement.clientHeight;\n        if ((target.scrollTop - previousScrollTop) > parentElemHeight || (previousScrollTop - target.scrollTop) > parentElemHeight) {\n            this.showSkeleton(target, this.scrollStatus[key].singleIndexCardCount);\n        }\n    };\n    VirtualLayoutRender.prototype.showSkeleton = function (cardWrapper, skeletonCount) {\n        var cardVirtualSkeletonWrapper = createElement('div', {\n            className: 'e-card-virtual-skeleton-wrapper', attrs: { 'role': 'listbox' }\n        });\n        cardWrapper.parentElement.insertBefore(cardVirtualSkeletonWrapper, cardWrapper);\n        cardVirtualSkeletonWrapper.style.position = 'absolute';\n        cardVirtualSkeletonWrapper.style.zIndex = '10';\n        for (var j = 0; j < skeletonCount; j++) {\n            var skeletonWrapper = createElement('div', { className: 'e-card-skeleton-wrapper' });\n            var skeleton = createElement('span', { className: 'e-skeleton e-skeleton-text e-shimmer-wave' });\n            skeleton.style.height = this.cardHeight + 'px';\n            // Assumption fix, issue reproduce in rare cases only .\n            if (!isNoU(cardWrapper.querySelector('.e-card'))) {\n                skeleton.style.width = cardWrapper.querySelector('.e-card').getBoundingClientRect().width + 'px';\n            }\n            skeletonWrapper.appendChild(skeleton);\n            cardVirtualSkeletonWrapper.appendChild(skeletonWrapper);\n        }\n    };\n    VirtualLayoutRender.prototype.hideSkeleton = function (cardWrapper) {\n        setTimeout(function () {\n            var skeletonWrapper = cardWrapper.querySelectorAll('.e-card-virtual-skeleton-wrapper');\n            for (var i = 0; i < skeletonWrapper.length; i++) {\n                detach(skeletonWrapper[i]);\n            }\n        }, 50);\n    };\n    VirtualLayoutRender.prototype.onColumnScroll = function (e) {\n        var _this = this;\n        var target = e.target;\n        var currentScrolledHeight = target.scrollTop;\n        var columnKey;\n        if (target.offsetParent) {\n            columnKey = target.offsetParent.getAttribute('data-key');\n            this.parent.scrollPosition.column[columnKey] = { left: target.scrollLeft, top: target.scrollTop };\n        }\n        if (this.parent.enableVirtualization) {\n            var cardWrapper_1 = target;\n            var dataCount = 0;\n            var columnData = this.getColumnCards()[columnKey];\n            var currentColumnDataCount = this.parent.dataModule.isRemote() ?\n                this.parent.columnDataCount[columnKey] : columnData.length;\n            dataCount += currentColumnDataCount;\n            var overallHeight = this.cardHeight * dataCount;\n            var removeIndex = [];\n            var addIndex = [];\n            this.checkScrollDirection(columnKey, currentScrolledHeight);\n            if (this.findScrollSpeed(target, columnKey) === 'fast' && currentScrolledHeight > overallHeight) {\n                this.hideSkeleton(cardWrapper_1.parentElement);\n                return;\n            }\n            var maxBlock = this.scrollStatus[columnKey].maxBlock;\n            var isLastBlockRendered = this.scrollStatus[columnKey].currentBlockIndex.indexOf(maxBlock) > -1;\n            var isDuplicateScroll = e.timeStamp - this.scrollStatus[columnKey].previousTimeStamps < 300;\n            if (isLastBlockRendered && !isNoU(this.scrollStatus[columnKey].previousTimeStamps) && isDuplicateScroll) {\n                this.hideSkeleton(cardWrapper_1.parentElement);\n                return;\n            }\n            this.scrollStatus[columnKey].previousTimeStamps = e.timeStamp;\n            var viewInfo_1 = this.getInfoFromView(this.scrollStatus[columnKey]);\n            removeIndex = viewInfo_1.currentBlockIndex.filter(function (val) {\n                return viewInfo_1.newBlockIndex.indexOf(val) === -1;\n            });\n            addIndex = viewInfo_1.newBlockIndex.filter(function (val) {\n                return viewInfo_1.currentBlockIndex.indexOf(val) === -1;\n            });\n            var isScrolledToLast = currentScrolledHeight + target.clientHeight >= overallHeight;\n            var transformY = isScrolledToLast ? overallHeight - (cardWrapper_1.querySelector('.' + cls.CARD_VIRTUAL_WRAPPER_CLASS).childElementCount * this.cardHeight)\n                : this.getTranslateY(viewInfo_1);\n            var cardVirtualElement_1 = cardWrapper_1.querySelector('.' + cls.CARD_VIRTUAL_WRAPPER_CLASS);\n            if (removeIndex.length > 0) {\n                var removeStartIndex = void 0;\n                var removeEndIndex = void 0;\n                if (removeIndex[0] === 1) {\n                    removeStartIndex = 0;\n                    removeEndIndex = (removeIndex.length * this.scrollStatus[columnKey].singleIndexCardCount) - 1;\n                }\n                else {\n                    removeStartIndex = ((removeIndex[0] - 1) * this.scrollStatus[columnKey].singleIndexCardCount);\n                    removeEndIndex = removeStartIndex + (removeIndex.length * this.scrollStatus[columnKey].singleIndexCardCount);\n                }\n                this.removeCardsOnScroll(cardVirtualElement_1, this.scrollStatus[columnKey].scrollDirection === 'down' ? true : false, removeStartIndex, removeEndIndex);\n            }\n            if (addIndex.length > 0) {\n                if (this.parent.dataModule.isRemote()) {\n                    var visibleStartIndex = ((addIndex[0] - 1) * this.scrollStatus[columnKey].singleIndexCardCount);\n                    var resultData_1 = [];\n                    var dataManager = this.getData(this.parent.keyField, columnKey, (this.scrollStatus[columnKey].singleIndexCardCount * addIndex.length), visibleStartIndex);\n                    dataManager.then(function (e) {\n                        resultData_1 = _this.dataManagerSuccess(e);\n                        _this.scrollCardInsert(columnKey, cardVirtualElement_1, target, currentScrolledHeight, cardWrapper_1, _this.scrollStatus[columnKey].scrollDirection === 'down' ? 0 : (resultData_1.length - 1), true, resultData_1, null);\n                    }).catch(function (e) { return _this.dataManagerFailure(e); });\n                }\n                else {\n                    var visibleStartIndex = this.scrollStatus[columnKey].scrollDirection === 'down' ? ((addIndex[0] - 1) * this.scrollStatus[columnKey].singleIndexCardCount) :\n                        ((addIndex[0] - 1) * this.scrollStatus[columnKey].singleIndexCardCount)\n                            + (this.scrollStatus[columnKey].singleIndexCardCount * addIndex.length) - 1;\n                    var visibleLength = this.scrollStatus[columnKey].scrollDirection === 'down' ? visibleStartIndex + (this.scrollStatus[columnKey].singleIndexCardCount * addIndex.length) :\n                        ((addIndex[0] - 1) * this.scrollStatus[columnKey].singleIndexCardCount);\n                    this.scrollCardInsert(columnKey, cardVirtualElement_1, target, currentScrolledHeight, cardWrapper_1, visibleStartIndex, false, columnData, visibleLength);\n                }\n            }\n            this.scrollStatus[columnKey].currentBlockIndex = this.scrollStatus[columnKey].newBlockIndex;\n            this.setPadding(transformY, cardVirtualElement_1, currentColumnDataCount, isScrolledToLast, this.scrollStatus[columnKey].scrollDirection);\n            viewInfo_1.currentBlockIndex = viewInfo_1.newBlockIndex;\n            this.parent.renderTemplates();\n            this.hideSkeleton(cardWrapper_1.parentElement);\n        }\n    };\n    VirtualLayoutRender.prototype.checkScrollDirection = function (columnKey, currentScrolledHeight) {\n        // Update the previous and current scroll top value\n        this.scrollStatus[columnKey].previousScrollTop = this.scrollStatus[columnKey].currentScrollTop;\n        this.scrollStatus[columnKey].currentScrollTop = currentScrolledHeight;\n        // Check the scroll direction\n        if (currentScrolledHeight > this.scrollStatus[columnKey].previousScrollTop) {\n            this.scrollStatus[columnKey].scrollDirection = 'down';\n        }\n        else {\n            this.scrollStatus[columnKey].scrollDirection = 'up';\n        }\n    };\n    VirtualLayoutRender.prototype.findScrollSpeed = function (target, columnKey) {\n        // Find the scroll speed\n        if (this.scrollStatus[columnKey].scrollDirection === 'down' &&\n            (target.scrollTop - this.scrollStatus[columnKey].previousScrollTop > target.clientHeight)) {\n            return 'fast';\n        }\n        else if (this.scrollStatus[columnKey].scrollDirection === 'up' &&\n            (this.scrollStatus[columnKey].previousScrollTop - target.scrollTop > target.clientHeight)) {\n            return 'fast';\n        }\n        return 'slow';\n    };\n    VirtualLayoutRender.prototype.removeCardsOnScroll = function (cardVirtualElement, isDown, removeStartIndex, removeEndIndex) {\n        for (var j = removeStartIndex; j < removeEndIndex; j++) {\n            var removableElem = isDown ? cardVirtualElement.firstChild\n                : cardVirtualElement.lastChild;\n            while (!isNoU(removableElem) && (removableElem.classList.contains(cls.DRAGGED_CARD_CLASS) ||\n                removableElem.classList.contains(cls.DRAGGED_CLONE_CLASS) ||\n                removableElem.classList.contains(cls.DROPPED_CLONE_CLASS) ||\n                removableElem.classList.contains(cls.CLONED_CARD_CLASS))) {\n                removableElem = isDown ? removableElem.nextSibling : removableElem.previousSibling;\n            }\n            if (!isNoU(removableElem)) {\n                detach(removableElem);\n            }\n        }\n    };\n    VirtualLayoutRender.prototype.scrollCardInsert = function (columnKey, cardVirtualElement, target, currentScrolledHeight, cardWrapper, startNumber, isRemote, resultData, visibleLength) {\n        var _this = this;\n        var conditonsScrollDownCase = isRemote ? resultData.length : visibleLength;\n        var conditonsScrollUpCase = isRemote ? 0 : visibleLength;\n        if (resultData.length > 0) {\n            var _loop_5 = function (j) {\n                if (!isNoU(resultData[j])) {\n                    var cardText = resultData[j][this_2.parent.cardSettings.headerField];\n                    var cardIndex = this_2.parent.actionModule.selectionArray.indexOf(cardText);\n                    var cardElement_1 = this_2.renderCard(resultData[j]);\n                    if (cardIndex !== -1) {\n                        cardElement_1.setAttribute('aria-selected', 'true');\n                        addClass([cardElement_1], cls.CARD_SELECTION_CLASS);\n                    }\n                    var args = { data: resultData[j], element: cardElement_1, cancel: false };\n                    this_2.parent.trigger(events.cardRendered, args, function (cardArgs) {\n                        if (!cardArgs.cancel) {\n                            if (_this.scrollStatus[columnKey].scrollDirection === 'down') {\n                                cardVirtualElement.appendChild(cardElement_1);\n                            }\n                            else {\n                                cardVirtualElement.insertBefore(cardElement_1, cardVirtualElement.firstChild);\n                            }\n                            _this.parent.dragAndDropModule.wireDragEvents(cardElement_1);\n                            addClass([cardElement_1], cls.DROPPABLE_CLASS);\n                        }\n                    });\n                }\n            };\n            var this_2 = this;\n            for (var j = startNumber; this.scrollStatus[columnKey].scrollDirection === 'down' ? (j < conditonsScrollDownCase) :\n                j >= conditonsScrollUpCase; this.scrollStatus[columnKey].scrollDirection === 'down' ? j++ : j--) {\n                _loop_5(j);\n            }\n            target.scrollTop = currentScrolledHeight;\n        }\n        else {\n            cardWrapper.appendChild(this.renderEmptyCard());\n        }\n    };\n    VirtualLayoutRender.prototype.ensureColumnNotEmpty = function (draggedColumnKey) {\n        var singleIndexCardCount = this.scrollStatus[draggedColumnKey].singleIndexCardCount;\n        var draggedColumnData = this.columnData[draggedColumnKey];\n        var draggedTdColummElement = this.parent.element.querySelector('.e-content-row:not(.e-swimlane-row) [data-key=\"' + draggedColumnKey + '\"]');\n        var wrapperELement = draggedTdColummElement.querySelector('.' + cls.CARD_VIRTUAL_WRAPPER_CLASS);\n        var cardsList = wrapperELement.querySelectorAll('.' + cls.CARD_CLASS);\n        if (cardsList.length > 0) {\n            var lastCardDataId = cardsList[cardsList.length - 1].getAttribute('data-id');\n            var firstCardDataId = cardsList[0].getAttribute('data-id');\n            var lastCardIndex = void 0;\n            var firstCardIndex = void 0;\n            if (cardsList.length < singleIndexCardCount * 2) {\n                for (var i = 0; i < draggedColumnData.length; i++) {\n                    if (lastCardDataId === (draggedColumnData[i][this.parent.cardSettings.headerField]).toString()) {\n                        lastCardIndex = i;\n                    }\n                    if (firstCardDataId === (draggedColumnData[i][this.parent.cardSettings.headerField]).toString()) {\n                        firstCardIndex = i;\n                    }\n                }\n                var cardCount = cardsList.length;\n                for (var i = cardCount; i < singleIndexCardCount * 2; i++) {\n                    var isLast = lastCardIndex === draggedColumnData.length - 1 ? true : false;\n                    var nextCardIndex = lastCardIndex < draggedColumnData.length ? lastCardIndex + 1 : firstCardIndex - 1;\n                    if (nextCardIndex <= draggedColumnData.length) {\n                        var nextCardData = draggedColumnData[nextCardIndex];\n                        if (!isNoU(nextCardData)) {\n                            var nextCard = this.renderCard(nextCardData);\n                            this.triggerCardRendering(nextCard, nextCardIndex, draggedColumnData, wrapperELement, isLast);\n                            if (isLast) {\n                                firstCardIndex = nextCardIndex;\n                            }\n                            else {\n                                lastCardIndex = nextCardIndex;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    VirtualLayoutRender.prototype.triggerCardRendering = function (nextCard, nextCardIndex, draggedColumnData, wrapperELement, isLast) {\n        var _this = this;\n        var cardText = draggedColumnData[nextCardIndex][this.parent.cardSettings.headerField];\n        var cardIndex = this.parent.actionModule.selectionArray.indexOf(cardText);\n        if (cardIndex !== -1) {\n            nextCard.setAttribute('aria-selected', 'true');\n            addClass([nextCard], cls.CARD_SELECTION_CLASS);\n        }\n        var args = { data: draggedColumnData[nextCardIndex], element: nextCard, cancel: false };\n        this.parent.trigger(events.cardRendered, args, function (cardArgs) {\n            if (!cardArgs.cancel) {\n                if (!isLast) {\n                    wrapperELement.appendChild(nextCard);\n                }\n                else {\n                    wrapperELement.insertBefore(nextCard, wrapperELement.querySelectorAll('.' + cls.CARD_CLASS)[0]);\n                }\n                _this.parent.dragAndDropModule.wireDragEvents(nextCard);\n                addClass([nextCard], cls.DROPPABLE_CLASS);\n            }\n        });\n    };\n    VirtualLayoutRender.prototype.ensureBlocks = function (info) {\n        var index = info.newBlockIndex[info.block];\n        var maxPage = Math.ceil(info.totalColumnData / info.singleIndexCardCount);\n        var max = Math.max;\n        var indexes;\n        if (info.scrollDirection === 'down') {\n            indexes = index >= maxPage ? [max(index, 1), --index, --index].reverse() :\n                (index + 1 >= maxPage ? [max(index - 1, 1), index, ++index] :\n                    [max(index, 1), ++index, ++index]);\n        }\n        else {\n            indexes = index === maxPage ? [max(index - 2, 1), max(index - 1, 1), index] :\n                [max(index - 1, 1), index, index + 1];\n        }\n        // eslint-disable-next-line\n        return indexes.filter(function (indexRemoveZero) { return indexRemoveZero > 0; });\n    };\n    VirtualLayoutRender.prototype.getInfoFromView = function (scrollStatus) {\n        var isBlockAdded = false;\n        var infoType = scrollStatus;\n        infoType.page = this.getPageFromTop(scrollStatus);\n        infoType.newBlockIndex = this.getBlockIndexes(infoType.page);\n        var blocks = this.ensureBlocks(infoType);\n        if (infoType.newBlockIndex.toString() !== blocks.toString()) {\n            // To avoid dupilcate row index problem in key focus support\n            var newBlock = blocks[blocks.length - 1];\n            if (infoType.newBlockIndex.indexOf(newBlock) === -1) {\n                isBlockAdded = true;\n            }\n        }\n        infoType.newBlockIndex = isBlockAdded ? blocks : infoType.newBlockIndex;\n        return infoType;\n    };\n    VirtualLayoutRender.prototype.getBlockIndexes = function (page) {\n        return [page + (page - 1), page * 2];\n    };\n    VirtualLayoutRender.prototype.getPageFromTop = function (info) {\n        var _this = this;\n        var total = info.totalColumnData;\n        var page = 0;\n        this.offsetKeys = Object.keys(info.offsets);\n        this.offsetKeys.some(function (offset) {\n            var iOffset = Number(offset);\n            var border = info.currentScrollTop <= info.offsets[parseInt(offset, 10)]\n                || (iOffset === total && info.currentScrollTop > info.offsets[parseInt(offset, 10)]);\n            if (border) {\n                var maxPage = Math.ceil(total / info.singleIndexCardCount);\n                if (_this.offsetKeys.length % 2 !== 0 && iOffset.toString() === _this.offsetKeys[_this.offsetKeys.length - 2]\n                    && info.currentScrollTop <= info.offsets[_this.offsetKeys.length - 1]) {\n                    iOffset = (iOffset + 1) > maxPage ? maxPage : iOffset + 1;\n                }\n                iOffset = iOffset > maxPage ? maxPage : iOffset;\n                info.block = iOffset % 2 === 0 ? 1 : 0;\n                page = Math.max(1, Math.min(_this.getPage(iOffset, maxPage), maxPage));\n            }\n            return border;\n        });\n        return page;\n    };\n    VirtualLayoutRender.prototype.getPage = function (block, maxPage) {\n        if (block + 1 > maxPage) {\n            return block % 2 === 0 ? block / 2 : (block - 1) / 2;\n        }\n        else {\n            return block % 2 === 0 ? block / 2 : (block + 1) / 2;\n        }\n    };\n    VirtualLayoutRender.prototype.onAdaptiveScroll = function (e) {\n        if (this.parent.touchModule.tabHold && !this.parent.touchModule.mobilePopup) {\n            e.preventDefault();\n        }\n    };\n    /**\n     * Check column is visible or not.\n     *\n     * @param {ColumnsModel} column - specifies the column.\n     * @returns {boolean} - Check column is visible or not.\n     * @private\n     * @hidden\n     */\n    VirtualLayoutRender.prototype.isColumnVisible = function (column) {\n        var _this = this;\n        var isVisible = false;\n        var isNumeric = typeof column.keyField === 'number';\n        if (isNumeric) {\n            isVisible = this.parent.actionModule.hideColumnKeys.indexOf(column.keyField.toString()) === -1;\n        }\n        else {\n            column.keyField.split(',').forEach(function (key) { isVisible = _this.parent.actionModule.hideColumnKeys.indexOf(key) === -1; });\n        }\n        return isVisible;\n    };\n    VirtualLayoutRender.prototype.renderLimits = function (column, target) {\n        var limits = createElement('div', { className: cls.LIMITS_CLASS });\n        if (column.minCount) {\n            limits.appendChild(createElement('div', {\n                className: cls.MIN_COUNT_CLASS,\n                innerHTML: this.parent.localeObj.getConstant('min') + ': ' + column.minCount.toString()\n            }));\n        }\n        if (column.maxCount) {\n            limits.appendChild(createElement('div', {\n                className: cls.MAX_COUNT_CLASS,\n                innerHTML: this.parent.localeObj.getConstant('max') + ': ' + column.maxCount.toString()\n            }));\n        }\n        if (limits.childElementCount > 0) {\n            if (target.querySelector('.' + cls.CARD_WRAPPER_CLASS)) {\n                target.insertBefore(limits, target.firstElementChild);\n            }\n            else {\n                target.appendChild(limits);\n            }\n        }\n    };\n    VirtualLayoutRender.prototype.renderValidation = function () {\n        var _this = this;\n        this.parent.columns.forEach(function (column) {\n            if (!column.minCount && !column.maxCount) {\n                return;\n            }\n            var cardData = _this.columnData[column.keyField];\n            var keySelector = \"[data-key=\\\"\" + column.keyField + \"\\\"]\";\n            var headerCell = _this.parent.element.querySelector(\".\" + (cls.HEADER_CELLS_CLASS + keySelector));\n            var rowCells = [].slice.call(_this.parent.element.querySelectorAll(\".\" + (cls.CONTENT_CELLS_CLASS + keySelector)));\n            _this.renderLimits(column, headerCell);\n            var colorClass = _this.getValidationClass(column, cardData.length);\n            if (colorClass) {\n                addClass(rowCells.concat(headerCell), colorClass);\n            }\n        });\n    };\n    VirtualLayoutRender.prototype.getValidationClass = function (column, count) {\n        var colorClass;\n        if (column.maxCount && count > column.maxCount) {\n            colorClass = cls.MAX_COLOR_CLASS;\n        }\n        else if (column.minCount && count < column.minCount) {\n            colorClass = cls.MIN_COLOR_CLASS;\n        }\n        return colorClass;\n    };\n    VirtualLayoutRender.prototype.refreshValidation = function () {\n        var validations = [].slice.call(this.parent.element.querySelectorAll('.' + cls.LIMITS_CLASS));\n        validations.forEach(function (node) { remove(node); });\n        var minClass = [].slice.call(this.parent.element.querySelectorAll('.' + cls.MIN_COLOR_CLASS));\n        removeClass(minClass, cls.MIN_COLOR_CLASS);\n        var maxClass = [].slice.call(this.parent.element.querySelectorAll('.' + cls.MAX_COLOR_CLASS));\n        removeClass(maxClass, cls.MAX_COLOR_CLASS);\n        this.renderValidation();\n    };\n    VirtualLayoutRender.prototype.getColumnData = function (columnValue, dataSource) {\n        var _this = this;\n        if (dataSource === void 0) { dataSource = this.parent.kanbanData; }\n        var cardData = [];\n        var isNumeric = typeof columnValue === 'number';\n        if (isNumeric) {\n            var keyData = dataSource.filter(function (cardObj) {\n                return cardObj[_this.parent.keyField] === columnValue;\n            });\n            cardData = cardData.concat(keyData);\n        }\n        else {\n            var columnKeys = columnValue.split(',');\n            var _loop_6 = function (key) {\n                var keyData = dataSource.filter(function (cardObj) {\n                    return cardObj[_this.parent.keyField] === key.trim();\n                });\n                cardData = cardData.concat(keyData);\n            };\n            for (var _i = 0, columnKeys_1 = columnKeys; _i < columnKeys_1.length; _i++) {\n                var key = columnKeys_1[_i];\n                _loop_6(key);\n            }\n        }\n        this.sortCategory(cardData);\n        return cardData;\n    };\n    VirtualLayoutRender.prototype.sortCategory = function (cardData) {\n        var key = this.parent.cardSettings.headerField;\n        var direction = this.parent.sortSettings.direction;\n        switch (this.parent.sortSettings.sortBy) {\n            case 'DataSourceOrder':\n                this.sortOrder(key, direction, cardData);\n                break;\n            case 'Custom':\n            case 'Index':\n                if (this.parent.sortSettings.field) {\n                    key = this.parent.sortSettings.field;\n                }\n                this.sortOrder(key, direction, cardData);\n                break;\n        }\n        return cardData;\n    };\n    VirtualLayoutRender.prototype.sortOrder = function (key, direction, cardData) {\n        var isNumeric = true;\n        if (this.parent.kanbanData.length > 0) {\n            isNumeric = typeof (this.parent.kanbanData[0])[key] === 'number';\n        }\n        if (!isNumeric && this.parent.sortSettings.sortBy === 'Index') {\n            return cardData;\n        }\n        var first;\n        var second;\n        cardData = cardData.sort(function (firstData, secondData) {\n            if (!isNumeric) {\n                first = firstData[key].toLowerCase();\n                second = secondData[key].toLowerCase();\n            }\n            else {\n                first = firstData[key];\n                second = secondData[key];\n            }\n            return (first > second) ? 1 : ((second > first) ? -1 : 0);\n        });\n        if (direction === 'Descending') {\n            cardData.reverse();\n        }\n        return cardData;\n    };\n    VirtualLayoutRender.prototype.documentClick = function (args) {\n        if (args.target.classList.contains(cls.SWIMLANE_OVERLAY_CLASS) &&\n            this.parent.element.querySelector('.' + cls.SWIMLANE_RESOURCE_CLASS).classList.contains('e-popup-open')) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], 'e-enable');\n        }\n        if (closest(args.target, \".\" + cls.ROOT_CLASS)) {\n            return;\n        }\n        var cards = [].slice.call(this.parent.element.querySelectorAll(\".\" + cls.CARD_CLASS + \".\" + cls.CARD_SELECTION_CLASS));\n        removeClass(cards, cls.CARD_SELECTION_CLASS);\n        this.disableAttributeSelection(cards);\n    };\n    VirtualLayoutRender.prototype.disableAttributeSelection = function (cards) {\n        if (cards instanceof Element) {\n            cards.setAttribute('aria-selected', 'false');\n        }\n        else {\n            cards.forEach(function (card) { card.setAttribute('aria-selected', 'false'); });\n        }\n    };\n    VirtualLayoutRender.prototype.getColumnCards = function (data) {\n        var _this = this;\n        var columnData = {};\n        this.columnKeys = [];\n        this.parent.columns.forEach(function (column) {\n            var isNumeric = typeof column.keyField === 'number';\n            if (isNumeric) {\n                _this.columnKeys = _this.columnKeys.concat(column.keyField.toString());\n            }\n            else {\n                _this.columnKeys = _this.columnKeys.concat(column.keyField.split(',').map(function (e) { return e.trim(); }));\n            }\n            var cardData = _this.getColumnData(column.keyField, data);\n            columnData[column.keyField] = cardData;\n        });\n        return columnData;\n    };\n    VirtualLayoutRender.prototype.refreshHeaders = function () {\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        [].slice.call(header.children).forEach(function (child) { return remove(child); });\n        this.renderHeader(header);\n    };\n    VirtualLayoutRender.prototype.refreshCards = function () {\n        this.parent.resetTemplates(['cardTemplate']);\n        var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_VIRTUAL_WRAPPER_CLASS));\n        cards.forEach(function (card) { return remove(card); });\n        this.renderCards();\n        this.wireDragEvent();\n        this.parent.renderTemplates();\n    };\n    VirtualLayoutRender.prototype.refresh = function () {\n        var _this = this;\n        var isColumnTemplateRefreshed = false;\n        this.parent.columns.forEach(function (column) {\n            if (column.showItemCount) {\n                if (column && column.template && !isColumnTemplateRefreshed) {\n                    _this.refreshHeaders();\n                    isColumnTemplateRefreshed = true;\n                }\n                var countSelector = \".\" + cls.HEADER_CELLS_CLASS + \"[data-key=\\\"\" + column.keyField + \"\\\"] .\" + cls.CARD_ITEM_COUNT_CLASS;\n                var itemCount = _this.parent.element.querySelector(countSelector);\n                if (itemCount) {\n                    var columnDataLength = _this.parent.dataModule.isRemote() ? _this.parent.columnDataCount[column.keyField]\n                        : _this.columnData[column.keyField].length;\n                    var isNumeric = typeof column.keyField === 'number';\n                    var cardLength = 0;\n                    if (isNumeric) {\n                        cardLength = ([].slice.call(_this.parent.element.querySelectorAll('.' + cls.CARD_CLASS + '[data-key=\"' + column.keyField + '\"]'))).length;\n                    }\n                    else {\n                        var keys = column.keyField.split(',');\n                        for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {\n                            var key = keys_2[_i];\n                            var cards = [].slice.call(_this.parent.element.querySelectorAll('.' + cls.CARD_CLASS + '[data-key=\"' + key.trim() + '\"]'));\n                            cardLength = cards.length + cardLength;\n                        }\n                    }\n                    itemCount.innerHTML = '- ' + columnDataLength + ' ' + _this.parent.localeObj.getConstant('items');\n                }\n            }\n        });\n        this.refreshValidation();\n    };\n    VirtualLayoutRender.prototype.updateScrollPosition = function () {\n        var _this = this;\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        if (content) {\n            if (!Browser.isIE) {\n                content.scrollTo(this.parent.scrollPosition.content.left, this.parent.scrollPosition.content.top);\n            }\n            else {\n                content.scrollTop = this.parent.scrollPosition.content.top;\n                content.scrollLeft = this.parent.scrollPosition.content.left;\n            }\n        }\n        var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n        cardWrapper.forEach(function (wrapper) {\n            if (wrapper.offsetParent) {\n                var scrollData = _this.parent.scrollPosition.column[wrapper.offsetParent.getAttribute('data-key')];\n                if (scrollData) {\n                    if (!Browser.isIE) {\n                        wrapper.scrollTo(scrollData.left, scrollData.top);\n                    }\n                    else {\n                        wrapper.scrollTop = scrollData.top;\n                        wrapper.scrollLeft = scrollData.left;\n                    }\n                }\n            }\n        });\n    };\n    VirtualLayoutRender.prototype.renderCardBasedOnIndex = function (data, index, isDropped, requestType) {\n        var _this = this;\n        var key = data[this.parent.keyField];\n        var cardRow = this.parent.element.querySelector('.e-content-row:not(.e-swimlane-row)');\n        if (this.parent.sortSettings.sortBy !== 'Index') {\n            var field_1 = this.parent.cardSettings.headerField;\n            if (this.parent.sortSettings.sortBy === 'Custom') {\n                field_1 = this.parent.sortSettings.field;\n            }\n            if (isNoU(this.parent.swimlaneSettings.keyField)) {\n                index = this.getColumnData(key, this.parent.kanbanData).findIndex(function (colData) {\n                    return colData[field_1] === data[field_1];\n                });\n            }\n            else {\n                var swimlaneDatas = this.parent.getSwimlaneData(data[this.parent.swimlaneSettings.keyField]);\n                index = this.getColumnData(key, swimlaneDatas).findIndex(function (colData) { return colData[field_1] === data[field_1]; });\n            }\n        }\n        else if (this.parent.sortSettings.sortBy === 'Index' &&\n            this.parent.sortSettings.field && this.parent.sortSettings.direction === 'Ascending') {\n            index = data[this.parent.sortSettings.field] - 1;\n        }\n        if (cardRow) {\n            var td = [].slice.call(cardRow.children).filter(function (e) {\n                return e.getAttribute('data-key').replace(/\\s/g, '').split(',').indexOf(key.toString().replace(/\\s/g, '')) !== -1;\n            })[0];\n            var cardWrapper_2 = td.querySelector('.' + cls.CARD_VIRTUAL_WRAPPER_CLASS);\n            var emptyCard = cardWrapper_2.querySelector('.' + cls.EMPTY_CARD_CLASS);\n            if (emptyCard) {\n                remove(emptyCard);\n            }\n            var cardElement_2 = this.renderCard(data);\n            if (this.parent.allowDragAndDrop && td.classList.contains(cls.DRAG_CLASS)) {\n                this.parent.dragAndDropModule.wireDragEvents(cardElement_2);\n                addClass([cardElement_2], cls.DROPPABLE_CLASS);\n            }\n            var args = { data: data, element: cardElement_2, cancel: false };\n            this.parent.trigger(events.cardRendered, args, function (cardArgs) {\n                var addCardCondition = isDropped ? true : cardWrapper_2.childNodes.length\n                    < _this.scrollStatus[key].singleIndexCardCount;\n                if (!cardArgs.cancel && addCardCondition || !isNoU(requestType)) {\n                    if (isNoU(index) || cardWrapper_2.children.length === 0) {\n                        cardWrapper_2.appendChild(cardElement_2);\n                    }\n                    else {\n                        cardWrapper_2.insertBefore(cardElement_2, cardWrapper_2.childNodes[index]);\n                    }\n                }\n            });\n        }\n    };\n    VirtualLayoutRender.prototype.removeCard = function (data) {\n        var cardKey = data[this.parent.cardSettings.headerField];\n        var cardElement = this.parent.element.querySelector(\".\" + cls.CARD_CLASS + \"[data-id=\\\"\" + cardKey + \"\\\"]\");\n        if (cardElement) {\n            this.isSelectedCard = cardElement.classList.contains(cls.CARD_SELECTION_CLASS) ? true : false;\n            var cardContainer = cardElement.parentElement;\n            remove(cardElement);\n            if (cardContainer.querySelectorAll('.' + cls.CARD_CLASS + ':not(.' + cls.CLONED_CARD_CLASS + ')').length === 0) {\n                cardContainer.appendChild(this.renderEmptyCard());\n            }\n        }\n    };\n    VirtualLayoutRender.prototype.wireEvents = function () {\n        var _this = this;\n        EventHandler.add(this.parent.element, 'click', this.parent.actionModule.clickHandler, this.parent.actionModule);\n        EventHandler.add(this.parent.element, 'dblclick', this.parent.actionModule.doubleClickHandler, this.parent.actionModule);\n        EventHandler.add(document, Browser.touchStartEvent, this.documentClick, this);\n        window.addEventListener('resize', this.winResize);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        EventHandler.add(content, 'scroll', this.onContentScroll, this);\n        var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n        cardWrapper.forEach(function (wrapper) {\n            if (_this.parent.isInitialRender && wrapper.offsetParent) {\n                _this.parent.scrollPosition.column[wrapper.offsetParent.getAttribute('data-key')] = { left: 0, top: 0 };\n            }\n            EventHandler.add(wrapper, 'scroll', _this.onColScrollShowSkeleton, _this);\n            EventHandler.add(wrapper, 'scroll', debounce(_this.onColumnScroll, 200), _this);\n        });\n        if (this.parent.isAdaptive) {\n            this.parent.touchModule.wireTouchEvents();\n            content.scrollLeft = this.scrollLeft;\n        }\n        this.wireDragEvent();\n    };\n    VirtualLayoutRender.prototype.unWireEvents = function () {\n        var _this = this;\n        EventHandler.remove(this.parent.element, 'click', this.parent.actionModule.clickHandler);\n        EventHandler.remove(this.parent.element, 'dblclick', this.parent.actionModule.doubleClickHandler);\n        EventHandler.remove(document, Browser.touchStartEvent, this.documentClick);\n        window.removeEventListener('resize', this.winResize);\n        this.winResize = null;\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        if (content) {\n            EventHandler.remove(content, 'scroll', this.onContentScroll);\n            EventHandler.remove(content, 'scroll', this.onColScrollShowSkeleton);\n            if (this.parent.allowDragAndDrop) {\n                this.unWireDragEvent();\n            }\n        }\n        var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n        if (cardWrapper.length > 0) {\n            cardWrapper.forEach(function (wrapper) { EventHandler.remove(wrapper, 'scroll', debounce(_this.onColumnScroll, 200)); });\n        }\n        if (this.parent.isAdaptive) {\n            this.parent.touchModule.unWireTouchEvents();\n        }\n    };\n    VirtualLayoutRender.prototype.wireDragEvent = function () {\n        var _this = this;\n        if (this.parent.allowDragAndDrop) {\n            var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS\n                + '.' + cls.DRAG_CLASS + ' .' + cls.CARD_CLASS));\n            addClass(cards, cls.DROPPABLE_CLASS);\n            if (cards.length > 0) {\n                cards.forEach(function (card) { return _this.parent.dragAndDropModule.wireDragEvents(card); });\n            }\n        }\n    };\n    VirtualLayoutRender.prototype.unWireDragEvent = function () {\n        var _this = this;\n        var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS\n            + '.' + cls.DRAG_CLASS + ' .' + cls.CARD_CLASS));\n        removeClass(cards, cls.DROPPABLE_CLASS);\n        if (cards.length > 0) {\n            cards.forEach(function (card) { return _this.parent.dragAndDropModule.unWireDragEvents(card); });\n        }\n    };\n    VirtualLayoutRender.prototype.destroy = function () {\n        this.parent.resetTemplates();\n        this.parent.off(events.dataReady, this.initRender);\n        this.parent.off(events.contentReady, this.scrollUiUpdate);\n        this.unWireEvents();\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        if (header) {\n            remove(header);\n        }\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        if (content) {\n            remove(content);\n        }\n        if (this.treeViewObj) {\n            this.treeViewObj.destroy();\n            this.treeViewObj = null;\n        }\n        if (this.treePopup) {\n            this.treePopup.destroy();\n            this.treePopup = null;\n        }\n        var swimlaneToolBarEle = this.parent.element.querySelector('.' + cls.SWIMLANE_HEADER_CLASS);\n        if (swimlaneToolBarEle) {\n            remove(swimlaneToolBarEle);\n        }\n        var swimlaneContent = this.parent.element.querySelector('.' + cls.SWIMLANE_CONTENT_CLASS);\n        if (swimlaneContent) {\n            remove(swimlaneContent);\n        }\n    };\n    return VirtualLayoutRender;\n}(MobileLayout));\nexport { VirtualLayoutRender };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Component, NotifyPropertyChanges, Property, Complex, Collection, detach } from '@syncfusion/ej2-base';\nimport { addClass, classList, removeClass, compile, formatUnit, L10n, Browser, Event } from '@syncfusion/ej2-base';\nimport { createSpinner, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport { Data } from './data';\nimport { SwimlaneSettings } from '../models/swimlane-settings';\nimport { CardSettings } from '../models/card-settings';\nimport { DialogSettings } from '../models/dialog-settings';\nimport { Columns } from '../models/columns';\nimport { StackedHeaders } from '../models/stacked-headers';\nimport { SortSettings } from '../models/sort-settings';\nimport { Action } from '../actions/action';\nimport { Crud } from '../actions/crud';\nimport { DragAndDrop } from '../actions/drag';\nimport { KanbanDialog } from '../actions/dialog';\nimport { Keyboard } from '../actions/keyboard';\nimport { KanbanTooltip } from '../actions/tooltip';\nimport { KanbanTouch } from '../actions/touch';\nimport { LayoutRender } from './layout-render';\nimport { VirtualLayoutRender } from './virtual-layout-render';\nimport * as events from '../base/constant';\nimport * as cls from './css-constant';\n/**\n * The Kanban board is an efficient way to visually depict various stages of a process using cards with transparent workflows.\n * The Kanban board has rich set of APIs, methods, and events used to enable or disable its features and customize them.\n * ```html\n * <div id=\"kanban\"></div>\n * ```\n * ```typescript\n * <script>\n *   var kanbanObj = new Kanban();\n *   kanbanObj.appendTo(\"#kanban\");\n * </script>\n * ```\n */\nvar Kanban = /** @class */ (function (_super) {\n    __extends(Kanban, _super);\n    /**\n     * Constructor for creating the Kanban widget\n     *\n     * @param {KanbanModel} options Accepts the kanban properties to render the Kanban board.\n     * @param {string | HTMLElement} element Accepts the DOM element reference as either selector or element to render the Kanban Board.\n     */\n    function Kanban(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.columnDataCount = {};\n        _this.needsID = true;\n        return _this;\n    }\n    /**\n     * Initializes the values of private members.\n     *\n     * @returns {void}\n     * @private\n     */\n    Kanban.prototype.preRender = function () {\n        this.isAdaptive = Browser.isDevice;\n        this.kanbanData = [];\n        if (!this.enablePersistence || !this.swimlaneToggleArray) {\n            this.swimlaneToggleArray = [];\n        }\n        this.activeCardData = { data: null, element: null };\n        var defaultLocale = {\n            items: 'items',\n            min: 'Min',\n            max: 'Max',\n            cardsSelected: 'Cards Selected',\n            addTitle: 'Add New Card',\n            editTitle: 'Edit Card Details',\n            deleteTitle: 'Delete Card',\n            deleteContent: 'Are you sure you want to delete this card?',\n            save: 'Save',\n            delete: 'Delete',\n            cancel: 'Cancel',\n            yes: 'Yes',\n            no: 'No',\n            close: 'Close',\n            noCard: 'No cards to display',\n            unassigned: 'Unassigned',\n            cards: 'Cards'\n        };\n        this.localeObj = new L10n(this.getModuleName(), defaultLocale, this.locale);\n        this.scrollPosition = { content: { left: 0, top: 0 }, column: {} };\n        this.isInitialRender = true;\n    };\n    /**\n     * To provide the array of modules needed for control rendering\n     *\n     * @returns {ModuleDeclaration[]} Returns the declared modules.\n     * @private\n     */\n    Kanban.prototype.requiredModules = function () {\n        var modules = [];\n        return modules;\n    };\n    /**\n     * Returns the properties to be maintained in the persisted state.\n     *\n     * @returns {string} Returns the persistance state.\n     * @private\n     */\n    Kanban.prototype.getPersistData = function () {\n        if (this.dataSource.length > 0) {\n            return this.addOnPersist(['columns', 'dataSource', 'swimlaneToggleArray']);\n        }\n        else {\n            return this.addOnPersist(['columns', 'kanbanData', 'swimlaneToggleArray']);\n        }\n    };\n    /**\n     * Core method to return the module name.\n     *\n     * @returns {string} Returns the module name.\n     * @private\n     */\n    Kanban.prototype.getModuleName = function () {\n        return 'kanban';\n    };\n    /**\n     * Core method that initializes the control rendering.\n     *\n     * @returns {void}\n     * @private\n     */\n    Kanban.prototype.render = function () {\n        var addClasses = [cls.ROOT_CLASS];\n        var removeClasses = [];\n        if (this.enableRtl) {\n            addClasses.push(cls.RTL_CLASS);\n        }\n        else {\n            removeClasses.push(cls.RTL_CLASS);\n        }\n        if (this.isAdaptive) {\n            addClasses.push(cls.DEVICE_CLASS);\n        }\n        else {\n            removeClasses.push(cls.DEVICE_CLASS);\n        }\n        if (this.cssClass) {\n            addClasses.push(this.cssClass);\n        }\n        classList(this.element, addClasses, removeClasses);\n        this.element.style.width = formatUnit(this.width);\n        this.element.style.height = formatUnit(this.height);\n        this.element.setAttribute('role', 'application');\n        this.element.setAttribute('aria-label', 'Kanban Board');\n        createSpinner({ target: this.element });\n        this.showSpinner();\n        this.initializeModules();\n    };\n    /**\n     * Called internally, if any of the property value changed.\n     *\n     * @param {KanbanModel} newProp Gets the updated values\n     * @param {KanbanModel} oldProp Gets the previous values\n     * @returns {void}\n     * @private\n     */\n    Kanban.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'cssClass':\n                    if (oldProp.cssClass) {\n                        removeClass([this.element], oldProp.cssClass);\n                    }\n                    if (newProp.cssClass) {\n                        addClass([this.element], newProp.cssClass);\n                    }\n                    break;\n                case 'enableRtl':\n                case 'locale':\n                    this.refresh();\n                    break;\n                case 'width':\n                    this.element.style.width = formatUnit(newProp.width);\n                    this.element.querySelector('.' + cls.HEADER_CLASS).firstElementChild.style.width = 'auto';\n                    this.notify(events.contentReady, {});\n                    break;\n                case 'height':\n                    this.element.style.height = formatUnit(newProp.height);\n                    this.element.querySelector('.' + cls.CONTENT_CLASS).style.height = 'auto';\n                    this.notify(events.contentReady, {});\n                    break;\n                case 'dataSource':\n                case 'query':\n                    if (this.dataModule) {\n                        this.dataModule.setState({ isDataChanged: false });\n                    }\n                    this.dataModule = new Data(this);\n                    break;\n                case 'columns':\n                case 'constraintType':\n                    this.notify(events.dataReady, { processedData: this.kanbanData });\n                    break;\n                case 'swimlaneSettings':\n                    this.onSwimlaneSettingsPropertyChanged(newProp.swimlaneSettings, oldProp.swimlaneSettings);\n                    break;\n                case 'cardSettings':\n                    this.onCardSettingsPropertyChanged(newProp.cardSettings, oldProp.cardSettings);\n                    break;\n                case 'allowDragAndDrop':\n                    if (newProp.allowDragAndDrop) {\n                        if (this.enableVirtualization) {\n                            this.virtualLayoutModule.wireDragEvent();\n                        }\n                        else {\n                            this.layoutModule.wireDragEvent();\n                        }\n                    }\n                    else {\n                        if (this.enableVirtualization) {\n                            this.virtualLayoutModule.unWireDragEvent();\n                        }\n                        else {\n                            this.layoutModule.unWireDragEvent();\n                        }\n                    }\n                    break;\n                case 'enableTooltip':\n                    if (this.tooltipModule) {\n                        this.tooltipModule.destroy();\n                        this.tooltipModule = null;\n                    }\n                    if (newProp.enableTooltip) {\n                        this.tooltipModule = new KanbanTooltip(this);\n                        if (this.enableVirtualization) {\n                            this.virtualLayoutModule.refreshCards();\n                        }\n                        else {\n                            this.layoutModule.refreshCards();\n                        }\n                    }\n                    break;\n                case 'dialogSettings':\n                    if (newProp.dialogSettings) {\n                        this.dialogModule = new KanbanDialog(this);\n                    }\n                    break;\n                case 'allowKeyboard':\n                    if (this.keyboardModule) {\n                        this.keyboardModule.destroy();\n                        this.keyboardModule = null;\n                    }\n                    if (newProp.allowKeyboard) {\n                        this.keyboardModule = new Keyboard(this);\n                    }\n                    break;\n                case 'stackedHeaders':\n                    if (this.enableVirtualization) {\n                        this.virtualLayoutModule.refreshHeaders();\n                    }\n                    else {\n                        this.layoutModule.refreshHeaders();\n                    }\n                    break;\n                case 'sortSettings':\n                    this.notify(events.dataReady, { processedData: this.kanbanData });\n                    break;\n                default:\n                    break;\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Kanban.prototype.onSwimlaneSettingsPropertyChanged = function (newProp, _oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'keyField':\n                case 'textField':\n                case 'showEmptyRow':\n                case 'showItemCount':\n                case 'template':\n                case 'sortDirection':\n                    this.notify(events.dataReady, { processedData: this.kanbanData });\n                    break;\n                case 'enableFrozenRows':\n                    if (this.layoutModule.frozenSwimlaneRow && !this.swimlaneSettings.enableFrozenRows) {\n                        this.layoutModule.removeFrozenRows();\n                    }\n                    break;\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Kanban.prototype.onCardSettingsPropertyChanged = function (newProp, _oldProp) {\n        var cards = [];\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'showHeader':\n                case 'headerField':\n                case 'contentField':\n                case 'template':\n                case 'tagsField':\n                case 'grabberField':\n                case 'footerCssField':\n                    if (this.enableVirtualization) {\n                        this.virtualLayoutModule.refreshCards();\n                    }\n                    else {\n                        this.layoutModule.refreshCards();\n                    }\n                    break;\n                case 'selectionType':\n                    cards = this.getSelectedCards();\n                    if (cards.length > 0) {\n                        removeClass(cards, cls.CARD_SELECTION_CLASS);\n                        if (this.enableVirtualization) {\n                            this.virtualLayoutModule.disableAttributeSelection(cards);\n                        }\n                        else {\n                            this.layoutModule.disableAttributeSelection(cards);\n                        }\n                    }\n                    break;\n            }\n        }\n    };\n    Kanban.prototype.initializeModules = function () {\n        this.dataModule = new Data(this);\n        if (this.enableVirtualization) {\n            this.virtualLayoutModule = new VirtualLayoutRender(this);\n        }\n        else {\n            this.layoutModule = new LayoutRender(this);\n        }\n        if (this.allowKeyboard) {\n            this.keyboardModule = new Keyboard(this);\n        }\n        this.actionModule = new Action(this);\n        this.crudModule = new Crud(this);\n        this.dragAndDropModule = new DragAndDrop(this);\n        this.dialogModule = new KanbanDialog(this);\n        if (this.enableTooltip) {\n            this.tooltipModule = new KanbanTooltip(this);\n        }\n        if (Browser.isDevice || Browser.isTouch) {\n            this.touchModule = new KanbanTouch(this);\n        }\n    };\n    Kanban.prototype.renderTemplates = function () {\n        if (this.isReact) {\n            this.renderReactTemplates();\n        }\n    };\n    Kanban.prototype.resetTemplates = function (templates) {\n        if (this.isReact) {\n            this.clearTemplate(templates);\n        }\n    };\n    Kanban.prototype.destroyModules = function () {\n        if (this.layoutModule) {\n            this.layoutModule.destroy();\n            this.layoutModule = null;\n        }\n        if (this.keyboardModule) {\n            this.keyboardModule.destroy();\n            this.keyboardModule = null;\n        }\n        if (this.virtualLayoutModule) {\n            this.virtualLayoutModule.destroy();\n            this.virtualLayoutModule = null;\n        }\n        if (this.touchModule) {\n            this.touchModule.destroy();\n            this.touchModule = null;\n        }\n        if (this.tooltipModule) {\n            this.tooltipModule.destroy();\n            this.tooltipModule = null;\n        }\n        this.dialogModule = null;\n        this.actionModule = null;\n        this.crudModule = null;\n        this.dataModule = null;\n        this.dragAndDropModule = null;\n    };\n    Kanban.prototype.templateParser = function (template) {\n        if (template) {\n            try {\n                if (typeof template === 'function') {\n                    return compile(template);\n                }\n                else if (document.querySelectorAll(template).length) {\n                    return compile(document.querySelector(template).innerHTML.trim());\n                }\n                else {\n                    return compile(template);\n                }\n            }\n            catch (error) {\n                return compile(template);\n            }\n        }\n        return undefined;\n    };\n    /**\n     * Returns the card details based on card ID from the board.\n     *\n     * @function getCardDetails\n     * @param {Element} target Accepts the card element to get the details.\n     * @returns {Object} Returns the card details based on given target.\n     */\n    Kanban.prototype.getCardDetails = function (target) {\n        var _this = this;\n        var isNumeric = typeof (this.kanbanData[0])[this.cardSettings.headerField] === 'number';\n        var targetId = isNumeric ? parseInt(target.getAttribute('data-id'), 10) : target.getAttribute('data-id');\n        var cardObj = this.kanbanData.filter(function (data) {\n            return data[_this.cardSettings.headerField] === targetId;\n        })[0];\n        return cardObj;\n    };\n    /**\n     * Returns the column data based on column key input.\n     *\n     * @function getColumnData\n     * @param {string | number} columnKey Accepts the column key to get the objects.\n     * @param {Object[]} dataSource Accepts the collection of objects to get the results based on given columnKey.\n     * @returns {Object[]} Returns the collection of card objects based on given inputs.\n     */\n    Kanban.prototype.getColumnData = function (columnKey, dataSource) {\n        if (this.enableVirtualization) {\n            return this.virtualLayoutModule.getColumnCards(dataSource)[\"\" + columnKey] || [];\n        }\n        return this.layoutModule.getColumnCards(dataSource)[\"\" + columnKey] || [];\n    };\n    /**\n     * Returns the swimlane column data based on swimlane keyField input.\n     *\n     * @function getSwimlaneData\n     * @param {string} keyField Accepts the swimlane keyField to get the objects.\n     * @returns {Object[]} Returns the collection of card objects based on given inputs.\n     */\n    Kanban.prototype.getSwimlaneData = function (keyField) {\n        return this.layoutModule.getSwimlaneCards()[\"\" + keyField] || [];\n    };\n    /**\n     * Gets the list of selected cards from the board.\n     *\n     * @function getSelectedCards\n     * @returns {HTMLElement[]} Returns the card elements based on selection.\n     */\n    Kanban.prototype.getSelectedCards = function () {\n        return [].slice.call(this.element.querySelectorAll('.' + cls.CARD_CLASS + '.' + cls.CARD_SELECTION_CLASS));\n    };\n    /**\n     * Allows you to show the spinner on Kanban at the required scenarios.\n     *\n     * @function showSpinner\n     * @returns {void}\n     */\n    Kanban.prototype.showSpinner = function () {\n        showSpinner(this.element);\n    };\n    /**\n     * When the spinner is shown manually using the showSpinner method, it can be hidden using this `hideSpinner` method.\n     *\n     * @function hideSpinner\n     * @returns {void}\n     */\n    Kanban.prototype.hideSpinner = function () {\n        hideSpinner(this.element);\n    };\n    /**\n     * To manually open the dialog.\n     *\n     * @function openDialog\n     * @param {CurrentAction} action Accepts the action for which the dialog needs to be opened such as either for new card creation or\n     *  editing of existing cards. The applicable action names are `Add` and `Edit`.\n     * @param {Object} data It can be card data.\n     * @returns {void}\n     */\n    Kanban.prototype.openDialog = function (action, data) {\n        this.dialogModule.openDialog(action, data);\n    };\n    /**\n     * To manually close the dialog.\n     *\n     * @function closeDialog\n     * @returns {void}\n     */\n    Kanban.prototype.closeDialog = function () {\n        this.dialogModule.closeDialog();\n    };\n    /**\n     * Adds the new card to the data source of Kanban and layout.\n     *\n     * @function addCard\n     * @param {Object | Object[]} cardData Accepts Single card object or Collection of card objects to be added into Kanban.\n     * @param {number} index Accepts the index to insert the card in column.\n     * @returns {void}\n     */\n    Kanban.prototype.addCard = function (cardData, index) {\n        this.crudModule.addCard(cardData, index);\n    };\n    /**\n     * Updates the changes made in the card object by passing it as a parameter to the data source.\n     *\n     * @function updateCard\n     * @param {Object | Object[]} cardData Accepts Single card object or Collection of card objects to be updated into Kanban.\n     * @param {number} index Accepts the index to update the card in column.\n     * @returns {void}\n     */\n    Kanban.prototype.updateCard = function (cardData, index) {\n        this.crudModule.updateCard(cardData, index);\n    };\n    /**\n     * Deletes the card based on the provided ID or card collection in the argument list.\n     *\n     * @function deleteCard\n     * @param {string | number | Object | Object[]} cardData Accepts the ID of the remove card in string or number type or\n     * Single card object or Collection of card objects to be removed from Kanban\n     * @returns {void}\n     */\n    Kanban.prototype.deleteCard = function (cardData) {\n        this.crudModule.deleteCard(cardData);\n    };\n    /**\n     * Add the column to Kanban board dynamically based on the provided column options and index in the argument list.\n     *\n     * @function addColumn\n     * @param {ColumnsModel} columnOptions Accepts the properties to new column that are going to be added in the board.\n     * @param {number} index Accepts the index of column to add the new column.\n     * @returns {void}\n     */\n    Kanban.prototype.addColumn = function (columnOptions, index) {\n        this.actionModule.addColumn(columnOptions, index);\n    };\n    /**\n     * Deletes the column based on the provided index value.\n     *\n     * @function deleteColumn\n     * @param {number} index Accepts the index of column to delete the existing column from Kanban board.\n     * @returns {void}\n     */\n    Kanban.prototype.deleteColumn = function (index) {\n        this.actionModule.deleteColumn(index);\n    };\n    /**\n     * Shows the column from hidden based on the provided key in the columns.\n     *\n     * @function showColumn\n     * @param {string | number} key Accepts the hidden column key name to be shown from the hidden state in board.\n     * @returns {void}\n     */\n    Kanban.prototype.showColumn = function (key) {\n        this.actionModule.showColumn(key);\n    };\n    /**\n     * Hides the column from Kanban board based on the provided key in the columns.\n     *\n     * @function hideColumn\n     * @param {string | number} key Accepts the visible column key name to be hidden from the board.\n     * @returns {void}\n     */\n    Kanban.prototype.hideColumn = function (key) {\n        this.actionModule.hideColumn(key);\n    };\n    /**\n     * Method to refresh the Kanban UI based on modified records.\n     *\n     * @function refreshUI\n     * @param {ActionEventArgs} args Accepts the added, changed or deleted data.\n     * @param {number} index Accepts the index of the changed items.\n     * @returns {void}\n     */\n    Kanban.prototype.refreshUI = function (args, index) {\n        index = index ? index : 0;\n        this.dataModule.refreshUI(args, index);\n    };\n    /**\n     * Method to refresh the column header.\n     *\n     * @method refreshHeader\n     * @returns {void}\n     */\n    Kanban.prototype.refreshHeader = function () {\n        this.resetTemplates(['columnTemplate']);\n        if (this.enableVirtualization) {\n            this.virtualLayoutModule.refreshHeaders();\n        }\n        else {\n            this.layoutModule.refreshHeaders();\n        }\n        this.renderTemplates();\n    };\n    /**\n     * Removes the control from the DOM and detaches all its related event handlers. Also, it removes the attributes and classes.\n     *\n     * @function destroy\n     * @returns {void}\n     */\n    Kanban.prototype.destroy = function () {\n        this.destroyModules();\n        [].slice.call(this.element.childNodes).forEach(function (node) { detach(node); });\n        var removeClasses = [cls.ROOT_CLASS];\n        if (this.cssClass) {\n            removeClasses = removeClasses.concat(this.cssClass.split(' '));\n        }\n        removeClass([this.element], removeClasses);\n        _super.prototype.destroy.call(this);\n    };\n    __decorate([\n        Property()\n    ], Kanban.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property('auto')\n    ], Kanban.prototype, \"width\", void 0);\n    __decorate([\n        Property('auto')\n    ], Kanban.prototype, \"height\", void 0);\n    __decorate([\n        Property('auto')\n    ], Kanban.prototype, \"cardHeight\", void 0);\n    __decorate([\n        Property()\n    ], Kanban.prototype, \"enableVirtualization\", void 0);\n    __decorate([\n        Property([])\n    ], Kanban.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property()\n    ], Kanban.prototype, \"query\", void 0);\n    __decorate([\n        Property()\n    ], Kanban.prototype, \"keyField\", void 0);\n    __decorate([\n        Property('Column')\n    ], Kanban.prototype, \"constraintType\", void 0);\n    __decorate([\n        Property([])\n    ], Kanban.prototype, \"externalDropId\", void 0);\n    __decorate([\n        Collection([], Columns)\n    ], Kanban.prototype, \"columns\", void 0);\n    __decorate([\n        Property(true)\n    ], Kanban.prototype, \"allowKeyboard\", void 0);\n    __decorate([\n        Property(true)\n    ], Kanban.prototype, \"enableHtmlSanitizer\", void 0);\n    __decorate([\n        Collection([], StackedHeaders)\n    ], Kanban.prototype, \"stackedHeaders\", void 0);\n    __decorate([\n        Complex({}, SwimlaneSettings)\n    ], Kanban.prototype, \"swimlaneSettings\", void 0);\n    __decorate([\n        Complex({}, CardSettings)\n    ], Kanban.prototype, \"cardSettings\", void 0);\n    __decorate([\n        Complex({}, SortSettings)\n    ], Kanban.prototype, \"sortSettings\", void 0);\n    __decorate([\n        Complex({}, DialogSettings)\n    ], Kanban.prototype, \"dialogSettings\", void 0);\n    __decorate([\n        Property(true)\n    ], Kanban.prototype, \"allowDragAndDrop\", void 0);\n    __decorate([\n        Property(false)\n    ], Kanban.prototype, \"enableTooltip\", void 0);\n    __decorate([\n        Property(false)\n    ], Kanban.prototype, \"showEmptyColumn\", void 0);\n    __decorate([\n        Property(false)\n    ], Kanban.prototype, \"enablePersistence\", void 0);\n    __decorate([\n        Property()\n    ], Kanban.prototype, \"tooltipTemplate\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"actionBegin\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"actionFailure\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"dataBinding\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"dataBound\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"cardClick\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"cardDoubleClick\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"queryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"cardRendered\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"dragStart\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"drag\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"dragStop\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"dialogOpen\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"dialogClose\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"dataStateChange\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"dataSourceChanged\", void 0);\n    Kanban = __decorate([\n        NotifyPropertyChanges\n    ], Kanban);\n    return Kanban;\n}(Component));\nexport { Kanban };\n"],"names":["actionBegin","actionComplete","actionFailure","cardClick","cardDoubleClick","cardRendered","queryCellInfo","dataBinding","dataBound","dragStart","drag","dragStop","dialogOpen","dialogClose","contentReady","dataReady","dataSourceChanged","dataStateChange","Data","prototype","initDataManager","dataSource","query","this","dataManager","DataManager","Query","kanbanData","parent","isRemote","offline","undefined","url","columnKeyFields","columns","_i","_a","length","column","keyField","toString","split","_b","_c","innerColumns","push","trim","getQuery","parameter","clone","enableVirtualization","cardHeight","parseInt","formatUnit","take","height","Math","ceil","window","innerHeight","i","where","isNullOrUndefined","addParams","getData","def","eventPromise","requestType","isObservable","promise","executeQuery","setState","state","dataState","getStateEventArgument","adaptr","UrlAdaptor","dm","adaptor","processQuery","data","JSON","parse","extend","pvtData","args","index","editArgs_1","_this","dataArgs","Deferred","deff","isDataChanged","action","isPending","resolver","resolve","endEdit","cancelEdit","reject","trigger","events.dataSourceChanged","then","events.dataStateChange","addedRecords","forEach","changedRecords","changedRecord","cardObj","filter","cardSettings","headerField","deletedRecords","deletedRecord","findIndex","splice","catch","hideSpinner","getTable","fromTable","refreshDataManager","e","dataManagerSuccess","dataManagerFailure","type","offlineArgs","isDestroyed","updateKanbanData","virtualLayoutModule","refresh","events.dataBinding","notify","events.dataReady","processedData","events.dataBound","initload","layoutModule","renderTemplates","resultData","result","count","columnsKeyFields","Key","columnDataCount","Value","events.actionFailure","error","updateDataManager","updateType","params","isDropped","dataDropIndexKeyFieldValue","draggedKey","droppedKey","isMultipleDrag","actionArgs","showSpinner","cancel","events.actionComplete","syncDataSource","refreshUI","refreshColumnData","Array","isArray","modifyArrayData","insert","dataModule","remove","json","update","currentIndex","saveChanges","onLineData","position","columnData","getColumnCards","renderCardBasedOnIndex","removeCard","isSelectedCard","actionModule","SingleCardSelection","sortSettings","field","sortBy","direction","swimlaneSettings","kanbanRows","getRows","swimlaneData","getSwimlaneCards","events.contentReady","extendStatics","d","b","Object","setPrototypeOf","__proto__","p","hasOwnProperty","_super","__extends","__","constructor","create","__decorate","decorators","target","key","desc","c","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","SwimlaneSettings","ChildProperty","Property","apply","CardSettings","DialogSettings","Columns","StackedHeaders","SortSettings","ROOT_CLASS","RTL_CLASS","DEVICE_CLASS","ICON_CLASS","TEMPLATE_CLASS","SWIMLANE_CLASS","TABLE_CLASS","HEADER_CLASS","HEADER_TABLE_CLASS","HEADER_CELLS_CLASS","HEADER_WRAP_CLASS","HEADER_TITLE_CLASS","HEADER_TEXT_CLASS","HEADER_ICON_CLASS","STACKED_HEADER_ROW_CLASS","STACKED_HEADER_CELL_CLASS","CONTENT_CELLS_CLASS","CONTENT_CLASS","CONTENT_TABLE_CLASS","HEADER_ROW_TOGGLE_CLASS","HEADER_ROW_CLASS","CONTENT_ROW_CLASS","SWIMLANE_ROW_CLASS","SWIMLANE_ROW_EXPAND_CLASS","SWIMLANE_ROW_COLLAPSE_CLASS","CARD_ITEM_COUNT_CLASS","CARD_WRAPPER_CLASS","CARD_VIRTUAL_WRAPPER_CLASS","CARD_CLASS","DROPPABLE_CLASS","DRAG_CLASS","DROP_CLASS","DISABLED_CLASS","CARD_HEADER_CLASS","CARD_CONTENT_CLASS","CARD_HEADER_TEXT_CLASS","CARD_HEADER_TITLE_CLASS","CARD_TAGS_CLASS","CARD_TAG_CLASS","CARD_COLOR_CLASS","CARD_LABEL_CLASS","CARD_FOOTER_CLASS","EMPTY_CARD_CLASS","CARD_FOOTER_CSS_CLASS","COLUMN_EXPAND_CLASS","COLUMN_COLLAPSE_CLASS","COLLAPSE_HEADER_TEXT_CLASS","COLLAPSED_CLASS","DIALOG_CLASS","FORM_CLASS","ERROR_VALIDATION_CLASS","FIELD_CLASS","DRAGGED_CLONE_CLASS","CLONED_CARD_CLASS","DRAGGED_CARD_CLASS","DROPPED_CLONE_CLASS","DROPPING_CLASS","BORDER_CLASS","TOGGLE_VISIBLE_CLASS","MULTI_CARD_WRAPPER_CLASS","TARGET_MULTI_CLONE_CLASS","MULTI_COLUMN_KEY_CLASS","CARD_SELECTION_CLASS","TOOLTIP_TEXT_CLASS","SWIMLANE_HEADER_CLASS","SWIMLANE_HEADER_TOOLBAR_CLASS","TOOLBAR_MENU_ICON_CLASS","TOOLBAR_SWIMLANE_NAME_CLASS","SWIMLANE_OVERLAY_CLASS","SWIMLANE_CONTENT_CLASS","SWIMLANE_RESOURCE_CLASS","LIMITS_CLASS","MAX_COUNT_CLASS","MIN_COUNT_CLASS","MAX_COLOR_CLASS","MIN_COLOR_CLASS","CLOSE_CLASS","POPUP_CONTENT_CLASS","SHOW_ADD_BUTTON","SHOW_ADD_ICON","SHOW_ADD_FOCUS","FROZEN_SWIMLANE_ROW_CLASS","FROZEN_ROW_CLASS","Action","clickHandler","targetIcon","closest","classList","contains","cls.CARD_CLASS","allowKeyboard","keyboardModule","cardTabIndexRemove","cls.HEADER_ICON_CLASS","columnExpandCollapse","cls.CONTENT_ROW_CLASS","cls.SWIMLANE_ROW_CLASS","rowExpandCollapse","cls.SHOW_ADD_BUTTON","addButtonClick","cls.FROZEN_SWIMLANE_ROW_CLASS","swimlaneRows","slice","call","element","querySelectorAll","frozenSwimlaneRow","querySelector","cls.ICON_CLASS","frozenOrder","cls.SWIMLANE_ROW_COLLAPSE_CLASS","cls.SWIMLANE_ROW_EXPAND_CLASS","newData","id","map","obj","max","cls.CONTENT_CELLS_CLASS","getAttribute","card","nextElementSibling","cls.BORDER_CLASS","lastElementChild","firstElementChild","getCardDetails","previousElementSibling","openDialog","doubleClickHandler","selectedCard","cardClickObj","activeCardData","events.cardClick","event","clickArgs","cls.CARD_SELECTION_CLASS","removeClass","disableAttributeSelection","isCtrlKey","ctrlKey","isAdaptive","touchModule","mobilePopup","tabHold","cardSelection","shiftKey","updatePopupContent","cell","setAttribute","addRemoveTabIndex","cardDoubleClickObj","events.cardDoubleClick","doubleClickArgs","dialogModule","isFrozenElem","headerTarget","HTMLElement","currentSwimlaneHeader","isNoU","events.actionBegin","tgtRow","isCollapsed","tabIndex_1","rowIndex","cls.COLLAPSED_CLASS","swimlaneToggleArray","indexOf","addClass","colIndex","cls.HEADER_CELLS_CLASS","cellIndex","columnToggle","collapsed","hideColumnKeys","nextCol","cls.STACKED_HEADER_CELL_CLASS","targetRow","colSelector","cls.TABLE_CLASS","cls.COLUMN_EXPAND_CLASS","cls.COLUMN_COLLAPSE_CLASS","colGroup","col","style","width","getWidth","targetRow_1","_loop_1","row","targetCol","cls.COLLAPSE_HEADER_TEXT_CLASS","parentElement","collapasedText","getBoundingClientRect","columnToggleArray","setProperties","isExpanded","this_1","targetRow_2","_loop_2","value","text","showItemCount","headerText","appendChild","createElement","className","innerHTML","isCtrl","isShift","cards","getSelectedCards","selectionType","contentRow","lastSelectionRow","el","selectionArray","selectedCardsElement","selectedCardsData","curCards_1","start","end","allCards","curId","lastId","lastCard","curIndex","lastIndex","select","lastCardSelection","parentEle","addColumn","columnOptions","createInstance","deleteColumn","listKey","item","cls.HEADER_ROW_TOGGLE_CLASS","detach","cls.HEADER_CLASS","cls.CONTENT_CLASS","showColumn","hideColumn","Crud","addCard","cardData","addArgs","modifiedData_1","getColumnData","priorityOrder","editParms","getIndexFromData","cardElement","updateCard","updateArgs","modifiedData","deleteCard","deleteArgs","cardIndex","columnAllDatas","cardsId","num","allModifiedKeys","modifiedKey","sort","finalData","originalIndex","columnKey","keyData","swimlaneDatas","getSwimlaneData","j","modifiedKey_1","DragAndDrop","wireDragEvents","dragContainment","externalDropId","dragObj","instance","Draggable","enableTapHold","enableTailMode","cursorAt","top","left","dragArea","bind","enableAutoScroll","helper","dragHelper","hide","sender","offsetWidth","cloneWrapper","outerHTML","cloneElement","children","cls.CLONED_CARD_CLASS","targetCloneMulti","cls.TARGET_MULTI_CLONE_CLASS","targetClone","cls.DROPPED_CLONE_CLASS","styles","offsetHeight","dragArgs","selectedCards","borderElm","closestEle","cardDetails","add","events.dragStart","dragEventArgs","removeElement","intDestroy","draggedClone","localeObj","getConstant","EventHandler","document","body","keydownHandler","cls.DRAGGED_CLONE_CLASS","insertAdjacentElement","cls.DRAGGED_CARD_CLASS","cellDimension","borderElem","cls.ROOT_CLASS","targetEle","nodeName","firstChild","contentCell","lastChild","dropElement","externalDrop","kanbanObj","isExternalKanbanDrop","externalDropObj","calculateArgs","cursor","targetKey","getColumnKey","keys","isDrag","multiCloneRemove","insertClone","pageY","kanbanTop","scrollY","isTargetElementVisible","cls.CARD_WRAPPER_CLASS","cls.CARD_VIRTUAL_WRAPPER_CLASS","cls.DROPPING_CLASS","multiCloneCreate","cellDropping","columnKeys","tColumn","hasAttribute","updateDimension","tagName","toggleVisible","cls.TOGGLE_VISIBLE_CLASS","multiKeyTarget","cls.MULTI_COLUMN_KEY_CLASS","cls.DISABLED_CLASS","isExternalDrop","updateScrollPosition","events.drag","getElementsByClassName","targetElem","wrapperElem","bottom","targetRootElement","ej2_instances","cells","limitEle","cls.LIMITS_CLASS","cls.MULTI_CARD_WRAPPER_CLASS","borderStyle","keys_1","dragCell","transition","transitionColumns","allowTransition","allowedTransition","colKey","attrs","data-key","lineHeight","currentCardKey","targetCardKey","allowedKey","rows","dragRow","cls.DROP_CLASS","addDropping","allowDragAndDrop","dimensions","hasAddButton","offsetTop","code","removeAttribute","dragStopClear","dragStopPostClear","dataDropIndexKeyfieldValue","dropIndex","cardStatus_1","updateDroppedData","changeOrder","events.dragStop","draggedColumnKey","droppedColumnKey","crudModule","ensureColumnNotEmpty","removeEmptyTrElement","showEmptyRow","swimlaneRowList","cardRowData","removeProperty","clearInterval","navigationInterval","styleCard","externalCell","isDragging","cardStatus","crudObj","crudData","prev","swimlaneIndex","modifieddata","draggedCard","keyIndex_1","prevele","reverse","cloneTarget","list","cloneMulti","node","eventArgs","getPageCoordinates","pageX","tooltipModule","tooltipObj","close","changedTouches","setInterval","autoScroll","autoScrollValidation","dragEdges","right","viewBoundaries","pageYOffset","pageXOffset","parent_2","xScrollable","yBounds","xBounds","parent_1","yIsScrollable","scrollHeight","xIsScrollable","scrollWidth","yInBounds","scrollTop","xInBounds","scrollLeft","yScrollable","enableFrozenRows","scrollTo","scrollX","unWireDragEvents","dragInstance","destroy","KanbanDialog","renderDialog","dialogObj","show","closeDialog","dialogModel","buttons","getDialogButtons","content","getDialogContent","cssClass","cls.DIALOG_CLASS","enableRtl","header","isModal","showCloseIcon","visible","beforeOpen","onBeforeDialogOpen","beforeClose","onBeforeDialogClose","Dialog","dialogSettings","model","applyFormValidation","title","container","form","cls.FORM_CLASS","onsubmit","template","destroyComponents","childNodes","templateId","dialogTemplate","templateParser","append","dialogWrapper","table","dialogFields_1","getDialogFields","tr","td","renderComponents","fields","contentField","flatButtonClass","dialogButtons","buttonModel","isPrimary","click","dialogButtonClick","deleteButton","dropDownOptions","controlObj","wrapper","cls.FIELD_CLASS","name","fieldValue","currentKeys","isColumnVisible","concat","DropDownList","NumericTextBox","TextBox","enabled","divElement","aria-label","appendTo","eventProp","storeElement","activeElement","maxHeight","events.dialogOpen","openArgs","formInputs","getFormElements","isInteracted","preventUpdate","formInputs_1","input","columnName","getColumnName","getValueFromElement","getIDType","events.dialogClose","closeArgs","rules","validationRules","formObj","FormValidator","customPlacement","inputElement","createTooltip","validationComplete","elem","inputName","display","status","dlgContent","inputClient","client","div","cls.ERROR_VALIDATION_CLASS","arrow","destroyToolTip","reset","activeCard","cloneNode","keyCode","getElementById","validate","updateIndex","enableHtmlSanitizer","SanitizeHtmlHelper","sanitize","validElements","elements_1","fieldSelector","control","attrName","isDropDowns","attrEle","checked","formelement_1","isReact","focus","Keyboard","keyActionHandler","ele","preventDefault","processUpDownArrow","processLeftRightArrow","processCardSelection","processEnter","cls.SHOW_ADD_FOCUS","selected","selection","removeSelection","multiSelection","attribute","headerIcon","swimlaneIcon","keyConfigs","firstCardSelection","upArrow","downArrow","rightArrow","leftArrow","multiSelectionEnter","multiSelectionSpace","multiSelectionByUpArrow","multiSelectionByDownArrow","shiftTab","enter","tab","delete","escape","space","tabIndex","KeyboardEvents","keyAction","eventName","KanbanTooltip","renderTooltip","Tooltip","mouseTrail","offsetY","showTipPointer","cls.TOOLTIP_TEXT_CLASS","beforeRender","onBeforeRender","onBeforeClose","isStringTemplate","tooltipContent","tooltipTemplate","dragAndDropModule","initializeCSPTemplate","innerText","resetTemplates","KanbanTouch","wireTouchEvents","touchObj","Touch","tapHold","tapHoldHandler","originalEvent","renderMobilePopup","closeIcon","buttonObj","mobilePopupWrapper","cls.POPUP_WRAPPER_CLASS","cls.CLOSE_CLASS","cls.POPUP_CONTENT_CLASS","cls.DEVICE_CLASS","Popup","targetType","hideAnimation","showAnimation","collision","X","Y","viewPortElement","zIndex","popupClose","Button","iconCss","closeClick","getPopupContent","popupContent","textContent","popupDestroy","unWireTouchEvents","MobileLayout","renderSwimlaneHeader","toolbarWrapper","cls.SWIMLANE_HEADER_CLASS","cls.SWIMLANE_HEADER_TOOLBAR_CLASS","cls.TOOLBAR_MENU_ICON_CLASS","cls.TOOLBAR_SWIMLANE_NAME_CLASS","menuClick","renderSwimlaneTree","treeHeight","popupOverlay","cls.SWIMLANE_OVERLAY_CLASS","cls.SWIMLANE_CONTENT_CLASS","treeWrapper","cls.SWIMLANE_RESOURCE_CLASS","swimlaneTree","popupObj","treeViewObj","TreeView","nodeTemplate","nodeClicked","treeSwimlaneClick","drawNode","actionOnScroll","duration","treePopup","treeNodes","hidePopup","innerWidth","treeViewTemplate","nodeData","LayoutRender","initRender","on","scrollUiUpdate","renderHeader","renderContent","renderCards","renderValidation","wireEvents","isInitialRender","headerWrap","cls.SWIMLANE_CLASS","headerTable","cls.HEADER_TABLE_CLASS","tableHead","renderColGroup","tableBody","role","stackedHeaders","createStackedRow","cls.HEADER_ROW_CLASS","th_1","headerWrapper","noOfCard","isExpand","icon","dataObj","data-role","scope","allowToggle","cls.HEADER_WRAP_CLASS","headerTitle","cls.HEADER_TITLE_CLASS","templateArgs","minCount","maxCount","cls.TEMPLATE_CLASS","templateHeader","header_1","cls.HEADER_TEXT_CLASS","itemCount","cls.CARD_ITEM_COUNT_CLASS","tabindex","textField","events.queryCellInfo","columnArgs","contentWrap","contentTable","cls.CONTENT_TABLE_CLASS","tHead","thElem","tBody","isCollaspsed","swimlaneRow","initializeSwimlaneTree","renderSwimlaneRow","renderSingleContent","button","dragClass","allowDrag","cls.DRAG_CLASS","allowDrop","cls.DROPPABLE_CLASS","aria-describedby","showAddButton","cls.SHOW_ADD_ICON","cardCount","targetItemCountElement","itemCountElement","itemCountInnerElement","swimlaneHeaderName","swimlaneTemplate","aria-expanded","colspan","swimlaneHeader","iconDiv","cardRows","removeTrs","columnTransition","dataCount","columnWrapper","cardWrapper_1","_loop_3","cardText","renderCard","events.cardRendered","cardArgs","renderEmptyCard","showEmptyColumn","data-id","aria-selected","aria-roledescription","cardTemplate","cardHeader","tooltipClass","enableTooltip","cardContent","showHeader","cls.CARD_HEADER_CLASS","cardCaption","cls.CARD_HEADER_TEXT_CLASS","cls.CARD_HEADER_TITLE_CLASS","cls.CARD_CONTENT_CLASS","tagsField","cardTags","cls.CARD_TAGS_CLASS","tags_1","tag","cls.CARD_TAG_CLASS","cls.CARD_LABEL_CLASS","grabberField","cls.CARD_COLOR_CLASS","borderLeftColor","footerCssField","cardFields","cls.CARD_FOOTER_CLASS","cls.CARD_FOOTER_CSS_CLASS","cls.EMPTY_CARD_CLASS","isToggle","showUnassignedRow","arr","swimlaneSorting","sortComparer","a","localeCompare","numeric","sortDirection","cls.STACKED_HEADER_ROW_CLASS","rows_1","keyFields","h","colSpan","th","swimlaneToolbar","cardWrapper","onAdaptiveScroll","paddingValue","clientWidth","clientHeight","paddingLeft","paddingRight","onContentScroll","scrollPosition","frozenRows","addFrozenSwimlaneDataKey","currentElem","frozenKey","nextSwim","curSwimHeight","prevSwimHeight","nextSwimHeight","firstSwimlane","frozenRow","cls.FROZEN_ROW_CLASS","insertBefore","setStyleAttribute","curSwim","prevSwim","frozenSwimHeight","frozenRowsElement","removeFrozenRows","onColumnScroll","offsetParent","isVisible","renderLimits","limits","cls.MIN_COUNT_CLASS","cls.MAX_COUNT_CLASS","childElementCount","headerCell","rowCells","colorClass","keySelector","constraintType","rowCards","getValidationClass","cls.MAX_COLOR_CLASS","cls.MIN_COLOR_CLASS","refreshValidation","minClass","maxClass","columnValue","columnKeys_1","_loop_4","sortCategory","sortOrder","first","second","isNumeric","firstData","secondData","toLowerCase","documentClick","Element","refreshHeaders","child","refreshCards","wireDragEvent","isColumnTemplateRefreshed","countSelector","cardLength","keys_2","swimlane","swimlaneKey","Browser","isIE","scrollData","rowSelector","field_1","cardWrapper_2","emptyCard","cardElement_1","cardRow","index_1","rowData","swim","swimRow","colData","replace","cardContainer","cardKey","touchStartEvent","unWireEvents","unWireDragEvent","off","swimlaneToolBarEle","swimlaneContent","swimlaneFrozenRow","VirtualLayoutRender","isSwimlane","cardHeightCalculate","headerHeight","windowResize","cloumnsTDElem","crudKeyField","isCRUD","cards_1","currentColumnDataCount","overallHeight","blocks","singleIndexCardCount","offsets","tempOffsets","maxBlock","viewInfo","getInfoFromView","scrollStatus","transformY","getTranslateY","cardVirtualElement","setPadding","currentStatus","columnOverAllHeight","columnHeight","previousScrollTop","currentScrollTop","scrollDirection","currentBlockIndex","oldBlockIndex","totalColumnData","cards_2","parseFloat","currentColumnBlock","floor","cardVirtualWrapper_1","getOffset","block","min","newBlockIndex","translate","endTranslate","paddingTop","scrollElem","isScrolledToLast","paddingBottom","skip","predicate","Predicate","updateData","onColScrollShowSkeleton","parentElemHeight","showSkeleton","skeletonCount","cardVirtualSkeletonWrapper","skeletonWrapper","skeleton","hideSkeleton","setTimeout","viewInfo_1","addIndex","cardVirtualElement_1","removeEndIndex","resultData_1","visibleStartIndex","visibleLength","currentScrolledHeight","removeIndex","checkScrollDirection","findScrollSpeed","isLastBlockRendered","isDuplicateScroll","timeStamp","previousTimeStamps","val","removeStartIndex","removeCardsOnScroll","scrollCardInsert","isDown","removableElem","nextSibling","previousSibling","startNumber","conditonsScrollDownCase","conditonsScrollUpCase","this_2","_loop_5","draggedColumnData","wrapperELement","cardsList","lastCardDataId","firstCardDataId","lastCardIndex","firstCardIndex","nextCard","isLast","nextCardIndex","nextCardData","triggerCardRendering","ensureBlocks","info","maxPage","indexes","indexRemoveZero","newBlock","isBlockAdded","infoType","page","getPageFromTop","getBlockIndexes","total","offsetKeys","some","offset","iOffset","Number","border","getPage","_loop_6","columnDataLength","cardElement_2","addCardCondition","addEventListener","winResize","debounce","removeEventListener","Kanban","Component","preRender","isDevice","enablePersistence","L10n","getModuleName","items","cardsSelected","addTitle","editTitle","deleteTitle","deleteContent","save","yes","no","noCard","unassigned","locale","requiredModules","getPersistData","addOnPersist","render","addClasses","removeClasses","cls.RTL_CLASS","createSpinner","initializeModules","onPropertyChanged","newProp","oldProp","onSwimlaneSettingsPropertyChanged","onCardSettingsPropertyChanged","_oldProp","isTouch","renderReactTemplates","templates","clearTemplate","destroyModules","compile","targetId","refreshHeader","Collection","Complex","Event","NotifyPropertyChanges","options","needsID"],"mappings":"itBAKWA,EAAc,cAEdC,EAAiB,iBAEjBC,EAAgB,gBAEhBC,EAAY,YAEZC,EAAkB,kBAElBC,EAAe,eAEfC,EAAgB,gBAEhBC,EAAc,cAEdC,EAAY,YAEZC,EAAY,YAEZC,EAAO,OAEPC,EAAW,WAIXC,EAAa,aAEbC,GAAc,cAGdC,EAAe,gBAEfC,EAAY,aAQZC,GAAoB,oBAEpBC,GAAkB,kBCzCzBC,IAwBAA,EAAKC,UAAUC,gBAAkB,SAAUC,EAAYC,GACnDC,KAAKC,YAAcH,aAAsBI,cAAcJ,EAAa,IAAII,cAAYJ,CAAU,EAC9FE,KAAKD,MAAQA,aAAiBI,QAAQJ,EAAQ,IAAII,QAClDH,KAAKI,WAAa,IAAIF,cAAYF,KAAKK,OAAOD,UAAU,GAM5DT,EAAKC,UAAUU,SAAW,WACtB,MAA+C,CAAA,IAAxCN,KAAKC,YAAYH,WAAWS,SAAwDC,KAAAA,IAApCR,KAAKC,YAAYH,WAAWW,KAC3C,KAApCT,KAAKC,YAAYH,WAAWW,KAMpCd,EAAKC,UAAUc,gBAAkB,WAE7B,IADA,IAAIC,EAAU,GACLC,EAAK,EAAGC,EAAKb,KAAKK,OAAOM,QAASC,EAAKC,EAAGC,OAAQF,CAAE,GAAI,CAC7D,IAAIG,EAASF,EAAGD,GAChB,GAAmD,EAA/CG,EAAOC,SAASC,WAAWC,MAAM,GAAG,EAAEJ,OACtC,IAAK,IAAIK,EAAK,EAAGC,EAAKL,EAAOC,SAASC,WAAWC,MAAM,GAAG,EAAGC,EAAKC,EAAGN,OAAQK,CAAE,GAAI,CAC/E,IAAIE,EAAeD,EAAGD,GACtBR,EAAQW,KAAKD,EAAaE,MAAM,OAIpCZ,EAAQW,KAAKP,EAAOC,SAASC,UAAU,EAG/C,OAAON,GASXhB,EAAKC,UAAU4B,SAAW,SAAUC,GAChC,IAAI1B,EAAQC,KAAKD,MAAM2B,QACvB,GAAI1B,KAAKM,YAAcN,KAAKK,OAAOsB,qBAAsB,CAMrD,IALA,IAAIC,EAAwC,SAA3B5B,KAAKK,OAAOuB,WAAwB,IACjDC,SAASC,aAAW9B,KAAKK,OAAOuB,UAAU,EAAEV,MAAM,IAAI,EAAE,GAAI,EAAE,EAC9Da,EAA8B,SAAvB/B,KAAKK,OAAO2B,OAAkE,EAA7CC,KAAKC,KAAKC,OAAOC,YAAcR,CAAU,EACM,EAAtFK,KAAKC,KAAKL,SAASC,aAAW9B,KAAKK,OAAO2B,MAAM,EAAEd,MAAM,IAAI,EAAE,GAAI,EAAE,EAAIU,CAAU,EACnFjB,EAAUX,KAAKU,kBACV2B,EAAI,EAAGA,EAAI1B,EAAQG,OAAQuB,CAAC,GACjCtC,EAAMuC,MAAMtC,KAAKK,OAAOW,SAAU,QAASL,EAAQ0B,EAAE,EAEzDtC,EAAMgC,KAAKA,CAAI,EACXQ,oBAAkBd,CAAS,IAC3BA,EAAY,wBAEhB1B,EAAMyC,UAAU,uBAAwBf,CAAS,EAErD,OAAO1B,GASXJ,EAAKC,UAAU6C,QAAU,SAAU1C,GAC/B,IACQ2C,EADR,OAAI1C,KAAKK,OAAOP,YAAc,WAAYE,KAAKK,OAAOP,YAC9C4C,EAAM1C,KAAK2C,aAAa,CAAEC,YAAa,IAAM7C,CAAK,EACtDC,KAAK6C,aAAe,CAAA,EACbH,EAAII,SAER9C,KAAKC,YAAY8C,aAAahD,CAAK,GAE9CJ,EAAKC,UAAUoD,SAAW,SAAUC,GAChC,OAAOjD,KAAKkD,UAAYD,GAE5BtD,EAAKC,UAAUuD,sBAAwB,SAAUpD,GAC7C,IAAIqD,EAAS,IAAIC,aACbC,EAAK,IAAIpD,cAAY,CAAEO,IAAK,GAAI8C,QAAS,IAAIF,aAAY,EACzDJ,EAAQG,EAAOI,aAAaF,EAAIvD,CAAK,EACrC0D,EAAOC,KAAKC,MAAMV,EAAMQ,IAAI,EAChC,OAAOG,SAAOH,EAAMR,EAAMY,OAAO,GAErClE,EAAKC,UAAU+C,aAAe,SAAUmB,EAAM/D,EAAOgE,GACjD,IAQYC,EARRC,EAAQjE,KACRkE,EAAWJ,EACXb,EAAQjD,KAAKmD,sBAAsBpD,CAAK,EACxC2C,EAAM,IAAIyB,WACVC,EAAO,IAAID,WA0Cf,OAzCyB3D,KAAAA,IAArBsD,EAAKlB,aAA8D,CAAA,IAAjC5C,KAAKkD,UAAUmB,cAExB,iBADzBpB,EAAMqB,OAASR,GACNlB,aAAsD,gBAArBkB,EAAKlB,aAAsD,gBAArBkB,EAAKlB,cAC7EoB,EAAaF,GACNhB,QAAUsB,EAAKtB,QAC1BkB,EAAWf,MAAQA,EACnBe,EAAWD,MAAQA,EACnB/D,KAAKgD,SAAS,CAAEuB,UAAW,CAAA,EAAMC,SAAUJ,EAAKK,QAAS,EACzDP,EAASQ,QAAUN,EAAKK,QACxBP,EAASS,WAAaP,EAAKQ,OAC3B5E,KAAKK,OAAOwE,QAAQC,GAA0Bd,CAAU,EACxDI,EAAKtB,QAAQiC,KAAK,WACdd,EAAMjB,SAAS,CAAEuB,UAAW,CAAA,EAAMC,SAAU9B,EAAI+B,QAAS,EACzDR,EAAM5D,OAAOwE,QAAQG,GAAwB/B,CAAK,EAClDe,EAAWiB,aAAaC,QAAQ,SAAUzB,GACtCQ,EAAM5D,OAAOD,WAAWkB,KAAKmC,CAAI,EACpC,EACDO,EAAWmB,eAAeD,QAAQ,SAAUE,GACxC,IAAIC,EAAUpB,EAAM5D,OAAOD,WAAWkF,OAAO,SAAU7B,GACnD,OAAOA,EAAKQ,EAAM5D,OAAOkF,aAAaC,eAClCJ,EAAcnB,EAAM5D,OAAOkF,aAAaC,aAC/C,EAAE,GACH5B,SAAOyB,EAASD,CAAa,EAChC,EACDpB,EAAWyB,eAAeP,QAAQ,SAAUQ,GACxC,IAAI3B,EAAQE,EAAM5D,OAAOD,WAAWuF,UAAU,SAAUlC,GACpD,OAAOA,EAAKQ,EAAM5D,OAAOkF,aAAaC,eAAiBE,EAAczB,EAAM5D,OAAOkF,aAAaC,aAClG,EACDvB,EAAM5D,OAAOD,WAAWwF,OAAO7B,EAAO,CAAC,EAC1C,EACJ,EAAE8B,MAAM,WAAc5B,EAAM5D,OAAOyF,cAAwB,IAG5D9F,KAAKgD,SAAS,CAAEuB,UAAW,CAAA,EAAMC,SAAU9B,EAAI+B,QAAS,EACxDzE,KAAKK,OAAOwE,QAAQG,GAAwB/B,CAAK,IAIrDjD,KAAKgD,SAAS,EAAE,EAChBN,EAAI+B,QAAQzE,KAAKK,OAAOP,UAAU,GAE/B4C,GAQX/C,EAAKC,UAAUmG,SAAW,WACtB,OAAI/F,KAAKK,OAAON,MACAC,KAAKwB,WACJwE,UAGN,MASfrG,EAAKC,UAAUqG,mBAAqB,WAChC,IAAIhC,EAAQjE,KACMA,KAAKyC,QAAQzC,KAAKwB,UAAU,EAClCuD,KAAK,SAAUmB,GACvB,OAAOjC,EAAMkC,mBAAmBD,CAAC,EACpC,EAAEL,MAAM,SAAUK,GAAK,OAAOjC,EAAMmC,mBAAmBF,CAAC,EAAI,GAWjEvG,EAAKC,UAAUuG,mBAAqB,SAAUD,EAAGG,EAAMC,EAAavC,GAChE,IAAIE,EAAQjE,KACRA,KAAKK,OAAOkG,cAGZF,GACArG,KAAKwG,iBAAiBN,CAAC,EACnBlG,KAAKK,OAAOsB,sBAAwB3B,KAAKM,YACzCN,KAAKK,OAAOoG,oBAAoBC,WAIpC1G,KAAKK,OAAOwE,QAAQ8B,EAAoBT,EAAG,SAAUpC,GACjDG,EAAMuC,iBAAiB1C,CAAI,EAC3BG,EAAM5D,OAAOuG,OAAOC,EAAkB,CAAEC,cAAe7C,EAAM5D,OAAOD,WAAY,EAChF6D,EAAM5D,OAAOwE,QAAQkC,EAAkB,KAAM,WAAc,OAAO9C,EAAM5D,OAAOyF,cAAgB,EAClG,EAED9F,KAAKgH,WACLhH,KAAKK,OAAO4G,aAAaP,UACzB1G,KAAKK,OAAO6G,mBAEhBlH,KAAKgH,SAAW,CAAA,IASpBrH,EAAKC,UAAU4G,iBAAmB,SAAU1C,GACxC,IAAIqD,EAAavD,SAAO,IAAKrB,oBAAkBuB,EAAKsD,OAAOA,MAAM,EACxCtD,EAArBA,EAAKsD,QAAqBA,OAAQ,KAAM,CAAA,CAAI,EAChD,GAAIpH,KAAKM,YAAcN,KAAKK,OAAOsB,sBAA4C,EAApBwF,EAAWrG,QAC/D,CAACyB,oBAAkBuB,EAAKsD,OAAOC,KAAK,EAEvC,IADA,IAAIC,EAAmBtH,KAAKU,kBACnB2B,EAAI,EAAGA,EAAIiF,EAAiBxG,OAAQuB,CAAC,GACtCyB,EAAKsD,OAAOC,MAAMhF,GAAGkF,MAAQD,EAAiBjF,KAC9CrC,KAAKK,OAAOmH,gBAAgBF,EAAiBjF,IAAMyB,EAAKsD,OAAOC,MAAMhF,GAAGoF,OAIpFzH,KAAKK,OAAOD,WAAa+G,EACzBnH,KAAKI,WAAa,IAAIF,cAAYF,KAAKK,OAAOD,UAAU,GAS5DT,EAAKC,UAAUwG,mBAAqB,SAAUF,GAC1C,IAAIjC,EAAQjE,KACRA,KAAKK,OAAOkG,aAGhBvG,KAAKK,OAAOwE,QAAQ6C,EAAsB,CAAEC,MAAOzB,GAAK,WAAc,OAAOjC,EAAM5D,OAAOyF,cAAgB,GAkB9GnG,EAAKC,UAAUgI,kBAAoB,SAAUC,EAAYC,EAAQzB,EAAM5C,EAAMM,EAAOgE,EAAWC,EAA4BC,EAAYC,EAAYC,GAC/I,IAEIrF,EAFAmB,EAAQjE,KAGRoI,GAFJpI,KAAKK,OAAOgI,cAEK,CACbzF,YAAayD,EAAMiC,OAAQ,CAAA,EAAOrD,aAAc6C,EAAO7C,aACvDE,eAAgB2C,EAAO3C,eAAgBM,eAAgBqC,EAAOrC,iBAElEzF,KAAKgD,SAAS,CAAEqB,cAAe,CAAA,EAAM,EACrCrE,KAAK2C,aAAayF,EAAYpI,KAAKD,MAAOgE,CAAK,EAC/C/D,KAAKK,OAAOwE,QAAQ0D,EAAuBH,EAAY,SAAU9B,GACxDA,EAAYgC,SACbxF,EAAUmB,EAAMuE,eAAevE,EAAMhE,YAAa4H,EAAYC,EAAQrE,EAAMsE,EAAWC,CAA0B,EAC7G/D,EAAMhE,YAAYH,WAAWS,QACxB0D,EAAMpB,eACPoB,EAAMuE,eAAevE,EAAM7D,WAAYyH,EAAYC,EAAQrE,EAAMsE,EAAWC,CAA0B,EACtGjE,EAAQkE,IAAeC,GAAcC,EAAiBpE,EAAQ,EAAIA,EAClEE,EAAMwE,UAAUnC,EAAavC,EAAOgE,CAAS,EACzC9D,EAAM5D,OAAOsB,sBACbsC,EAAM5D,OAAOoG,oBAAoBiC,kBAAkBT,EAAYC,EAAY5B,EAAY1D,YAAaa,EAAKQ,EAAM5D,OAAOW,SAAS,GAKvI8B,EAAQiC,KAAK,SAAUjB,GACfG,EAAM5D,OAAOkG,cAGCtC,EAAMxB,QAAQwB,EAAMzC,UAAU,EACpCuD,KAAK,SAAUmB,GAAK,OAAOjC,EAAMkC,mBAAmBD,EAAG,mBAAoBI,EAAavC,CAAK,EAAI,EAAE8B,MAAM,SAAUK,GAAK,OAAOjC,EAAMmC,mBAAmBF,CAAC,EAAI,EACzI,gBAA5BI,EAAY1D,YACP+F,MAAMC,QAAQ9E,CAAI,EAInBG,EAAM4E,gBAAgBvC,EAAYrB,aAAcnB,CAAI,EAHpDwC,EAAYrB,aAAa,GAAKrB,SAAO0C,EAAYrB,aAAa,GAAInB,CAAI,EAMzC,gBAA5BwC,EAAY1D,YACZ+F,MAAMC,QAAQ9E,CAAI,EAInBG,EAAM4E,gBAAgBvC,EAAYnB,eAAgBrB,CAAI,EAHtDwC,EAAYnB,eAAe,GAAKvB,SAAO0C,EAAYnB,eAAe,GAAIrB,CAAI,EAM7C,gBAA5BwC,EAAY1D,cACZ+F,MAAMC,QAAQ9E,CAAI,EAInBG,EAAM4E,gBAAgBvC,EAAYb,eAAgB3B,CAAI,EAHtDwC,EAAYb,eAAe,GAAK7B,SAAO0C,EAAYb,eAAe,GAAI3B,CAAI,GAMlFC,EAAQkE,IAAeC,GAAcC,EAAiBpE,EAAQ,EAAIA,EAClEE,EAAMwE,UAAUnC,EAAavC,EAAOgE,CAAS,EACzC9D,EAAM5D,OAAOsB,sBACbsC,EAAM5D,OAAOoG,oBAAoBiC,kBAAkBT,EAAYC,EAAY5B,EAAY1D,YAAaa,EAAKQ,EAAM5D,OAAOW,SAAS,GAEtI,EAAE6E,MAAM,SAAUK,GACfjC,EAAMmC,mBAAmBF,CAAC,EAC7B,GAGZ,GAELvG,EAAKC,UAAU4I,eAAiB,SAAUvI,EAAa4H,EAAYC,EAAQrE,EAAMsE,EAAWC,GACxF,IACIlF,EADAmB,EAAQjE,KAEZ,OAAQ6H,GACJ,IAAK,SACD,OAAO5H,EAAY6I,OAAOrF,EAAMzD,KAAK+F,WAAY/F,KAAKwB,UAAU,EACpE,IAAK,SACD,OAAIxB,KAAKK,OAAOsB,sBAAwB,CAAC3B,KAAKK,OAAO0I,WAAWzI,YAAcyH,GAC1EjF,EAAU7C,EAAY+I,OAAOhJ,KAAKgB,SAAUyC,EAAMzD,KAAK+F,WAAY/F,KAAKwB,UAAU,EACxEvB,EAAY6I,OAAOrF,EAAMzD,KAAK+F,WAAY/F,KAAKwB,WAAYvB,EAAYH,WAAWmJ,KAAKtD,UAAU,SAAUlC,GACjH,OAAOA,EAAKQ,EAAM5D,OAAOkF,aAAaC,eAAiBwC,EAC1D,CAAC,GAIK/H,EAAYiJ,OAAOlJ,KAAKgB,SAAUyC,EAAMzD,KAAK+F,WAAY/F,KAAKwB,UAAU,EAEvF,IAAK,SACD,OAAOvB,EAAY+I,OAAOhJ,KAAKgB,SAAUyC,EAAMzD,KAAK+F,WAAY/F,KAAKwB,UAAU,EACnF,IAAK,QACD,GAAI,CAACxB,KAAKK,OAAO0I,WAAWzI,YAAcyH,GAAa/H,KAAKK,OAAOsB,sBAAwB8B,EAAM,CAC7F,IAAK,IAAIpB,EAAI,EAAGA,EAAIoB,EAAK3C,OAAQuB,CAAC,GAC9BS,EAAU7C,EAAY+I,OAAOhJ,KAAKgB,SAAUyC,EAAKpB,GAAIrC,KAAK+F,WAAY/F,KAAKwB,UAAU,EAKzF,IAHA,IAAI2H,EAAelJ,EAAYH,WAAWmJ,KAAKtD,UAAU,SAAUlC,GAC/D,OAAOA,EAAKQ,EAAM5D,OAAOkF,aAAaC,eAAiBwC,EAC1D,EACQ3F,EAAI,EAAGA,EAAIoB,EAAK3C,OAAQuB,CAAC,GAAI8G,CAAY,GAC9CrG,EAAU7C,EAAY6I,OAAOrF,EAAKpB,GAAIrC,KAAK+F,WAAY/F,KAAKwB,WAAY2H,CAAY,EAExF,OAAOrG,EAGP,OAAO7C,EAAYmJ,YAAYtB,EAAQ9H,KAAKgB,SAAUhB,KAAK+F,WAAY/F,KAAKwB,UAAU,EAE9F,QACI,OAAOsB,IAGnBnD,EAAKC,UAAUiJ,gBAAkB,SAAUQ,EAAYnD,GACnD,GAAImD,EAAWvI,SAAWoF,EAAEpF,OACxB,IAAK,IAAIuB,EAAI,EAAGA,EAAI6D,EAAEpF,OAAQuB,CAAC,GAC3BgH,EAAWhH,GAAKuB,SAAOyF,EAAWhH,GAAI6D,EAAE7D,EAAE,EAGlD,OAAOgH,GAUX1J,EAAKC,UAAU6I,UAAY,SAAU3E,EAAMwF,EAAUvB,GACjD,IAAI9D,EAAQjE,MACRA,KAAKK,OAAOsB,sBACZ3B,KAAKK,OAAOoG,oBAAoB8C,WAAavJ,KAAKK,OAAOoG,oBAAoB+C,iBAC7E1F,EAAKmB,aAAaC,QAAQ,SAAUzB,EAAMM,GACtCE,EAAM5D,OAAOoG,oBAAoBgD,uBAAuBhG,EAAM6F,EAAWvF,EAAOgE,EAAWjE,EAAKlB,WAAW,EAC9G,EACDkB,EAAKqB,eAAeD,QAAQ,SAAUzB,GAClCQ,EAAM5D,OAAOoG,oBAAoBiD,WAAWjG,CAAI,EAChDQ,EAAM5D,OAAOoG,oBAAoBgD,uBAAuBhG,EAAM6F,EAAUvB,EAAWjE,EAAKlB,WAAW,EAC/FqB,EAAM5D,OAAOoG,oBAAoBkD,gBACjC1F,EAAM5D,OAAOuJ,aAAaC,oBAAoBpG,CAAI,EAElDQ,EAAM5D,OAAOyJ,aAAaC,OAA8C,UAArC9F,EAAM5D,OAAOyJ,aAAaE,QAClB,eAAxC/F,EAAM5D,OAAOyJ,aAAaG,WAAyC,EAAXX,EAC3D,EAAEA,EAGFA,CAAQ,GAEf,EACDxF,EAAK2B,eAAeP,QAAQ,SAAUzB,GAClCQ,EAAM5D,OAAOoG,oBAAoBiD,WAAWjG,CAAI,EACnD,EACDzD,KAAKK,OAAOoG,sBAGZzG,KAAKK,OAAO4G,aAAasC,WAAavJ,KAAKK,OAAO4G,aAAauC,iBAC3DxJ,KAAKK,OAAO6J,iBAAiBlJ,WAC7BhB,KAAKK,OAAO4G,aAAakD,WAAanK,KAAKK,OAAO4G,aAAamD,UAC/DpK,KAAKK,OAAO4G,aAAaoD,aAAerK,KAAKK,OAAO4G,aAAaqD,oBAErExG,EAAKmB,aAAaC,QAAQ,SAAUzB,EAAMM,GAClCE,EAAM5D,OAAO6J,iBAAiBlJ,UAAY,CAACyC,EAAKQ,EAAM5D,OAAO6J,iBAAiBlJ,YAC9EyC,EAAKQ,EAAM5D,OAAO6J,iBAAiBlJ,UAAY,IAEnDiD,EAAM5D,OAAO4G,aAAawC,uBAAuBhG,EAAM6F,EAAWvF,CAAK,EAC1E,EACDD,EAAKqB,eAAeD,QAAQ,SAAUzB,GAC9BQ,EAAM5D,OAAO6J,iBAAiBlJ,UAAY,CAACyC,EAAKQ,EAAM5D,OAAO6J,iBAAiBlJ,YAC9EyC,EAAKQ,EAAM5D,OAAO6J,iBAAiBlJ,UAAY,IAEnDiD,EAAM5D,OAAO4G,aAAayC,WAAWjG,CAAI,EACzCQ,EAAM5D,OAAO4G,aAAawC,uBAAuBhG,EAAM6F,CAAQ,EAC3DrF,EAAM5D,OAAO4G,aAAa0C,gBAC1B1F,EAAM5D,OAAOuJ,aAAaC,oBAAoBpG,CAAI,EAElDQ,EAAM5D,OAAOyJ,aAAaC,OAA8C,UAArC9F,EAAM5D,OAAOyJ,aAAaE,QAClB,eAAxC/F,EAAM5D,OAAOyJ,aAAaG,WAAyC,EAAXX,EAC3D,EAAEA,EAGFA,CAAQ,GAEf,EACDxF,EAAK2B,eAAeP,QAAQ,SAAUzB,GAClCQ,EAAM5D,OAAO4G,aAAayC,WAAWjG,CAAI,EAC5C,EACDzD,KAAKK,OAAO4G,eAlCoBP,UAoCpC1G,KAAKK,OAAO6G,kBACZlH,KAAKK,OAAOuG,OAAO2D,EAAqB,EAAE,EAC1CvK,KAAKK,OAAOwE,QAAQkC,EAAkBjD,EAAM,WAAc,OAAOG,EAAM5D,OAAOyF,cAAgB,GAE3FnG,GAjcP,SAASA,EAAKU,GACVL,KAAKgH,SAAW,CAAA,EAChBhH,KAAKkD,UAAY,CAAEqB,UAAW,CAAA,EAAOC,SAAU,KAAMH,cAAe,CAAA,GACpErE,KAAKK,OAASA,EACdL,KAAKgB,SAAWhB,KAAKK,OAAOkF,aAAaC,YACzCxF,KAAKkD,UAAY,CAAEmB,cAAe,CAAA,GAClCrE,KAAK6C,aAAe,CAAA,EACpB7C,KAAKH,gBAAgBQ,EAAOP,WAAYO,EAAON,KAAK,EACpDC,KAAKiG,qBCpBLuE,GAAgB,SAAUC,EAAGC,GAI7B,OAHAF,GAAgBG,OAAOC,iBAClB,CAAEC,UAAW,cAAgBlC,MAAS,SAAU8B,EAAGC,GAAKD,EAAEI,UAAYH,GACvE,SAAUD,EAAGC,GAAK,IAAK,IAAII,KAAKJ,EAAOA,EAAEK,eAAeD,CAAC,IAAGL,EAAEK,GAAKJ,EAAEI,OACpDL,EAAGC,CAAC,GALjC,IACQF,GAsBwCQ,GAvB5CC,GAOO,SAAUR,EAAGC,GAEhB,SAASQ,IAAOlL,KAAKmL,YAAcV,EADnCD,GAAcC,EAAGC,CAAC,EAElBD,EAAE7K,UAAkB,OAAN8K,EAAaC,OAAOS,OAAOV,CAAC,GAAKQ,EAAGtL,UAAY8K,EAAE9K,UAAW,IAAIsL,IAGnFG,EAA0C,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,IAA2HhB,EAAvHiB,EAAIC,UAAU7K,OAAQ8K,EAAIF,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAOd,OAAOkB,yBAAyBN,EAAQC,CAAG,EAAIC,EACrH,GAAuB,UAAnB,OAAOK,SAAoD,YAA5B,OAAOA,QAAQC,SAAyBH,EAAIE,QAAQC,SAAST,EAAYC,EAAQC,EAAKC,CAAI,OACxH,IAAK,IAAIpJ,EAAIiJ,EAAWxK,OAAS,EAAQ,GAALuB,EAAQA,CAAC,IAAQoI,EAAIa,EAAWjJ,MAAIuJ,GAAKF,EAAI,EAAIjB,EAAEmB,CAAC,EAAQ,EAAJF,EAAQjB,EAAEc,EAAQC,EAAKI,CAAC,EAAInB,EAAEc,EAAQC,CAAG,IAAMI,GAChJ,OAAW,EAAJF,GAASE,GAAKjB,OAAOqB,eAAeT,EAAQC,EAAKI,CAAC,EAAGA,CAChE,EAKIK,IAA4CjB,GAoC9CkB,gBAnCEjB,GAAUgB,EAAkBjB,EAAM,EAIlCK,EAAW,CACPc,cACDF,EAAiBrM,UAAW,WAAY,KAAA,CAAM,EACjDyL,EAAW,CACPc,cACDF,EAAiBrM,UAAW,YAAa,KAAA,CAAM,EAClDyL,EAAW,CACPc,WAAS,CAAA,CAAK,GACfF,EAAiBrM,UAAW,eAAgB,KAAA,CAAM,EACrDyL,EAAW,CACPc,WAAS,CAAA,CAAI,GACdF,EAAiBrM,UAAW,gBAAiB,KAAA,CAAM,EACtDyL,EAAW,CACPc,WAAS,CAAA,CAAK,GACfF,EAAiBrM,UAAW,mBAAoB,KAAA,CAAM,EACzDyL,EAAW,CACPc,cACDF,EAAiBrM,UAAW,WAAY,KAAA,CAAM,EACjDyL,EAAW,CACPc,WAAS,WAAW,GACrBF,EAAiBrM,UAAW,gBAAiB,KAAA,CAAM,EACtDyL,EAAW,CACPc,cACDF,EAAiBrM,UAAW,eAAgB,KAAA,CAAM,EACrDyL,EAAW,CACPc,WAAS,CAAA,CAAI,GACdF,EAAiBrM,UAAW,oBAAqB,KAAA,CAAM,EAC1DyL,EAAW,CACPc,WAAS,CAAA,CAAK,GACfF,EAAiBrM,UAAW,mBAAoB,KAAA,CAAM,EAClDqM,GAjCP,SAASA,IACL,OAAkB,OAAXjB,IAAmBA,GAAOoB,MAAMpM,KAAM2L,SAAS,GAAK3L,KCzB3DwK,GAAgB,SAAUC,EAAGC,GAI7B,OAHAF,GAAgBG,OAAOC,iBAClB,CAAEC,UAAW,cAAgBlC,MAAS,SAAU8B,EAAGC,GAAKD,EAAEI,UAAYH,GACvE,SAAUD,EAAGC,GAAK,IAAK,IAAII,KAAKJ,EAAOA,EAAEK,eAAeD,CAAC,IAAGL,EAAEK,GAAKJ,EAAEI,OACpDL,EAAGC,CAAC,GALjC,IACQF,GAsBoCQ,GAvBxCC,EAOO,SAAUR,EAAGC,GAEhB,SAASQ,IAAOlL,KAAKmL,YAAcV,EADnCD,GAAcC,EAAGC,CAAC,EAElBD,EAAE7K,UAAkB,OAAN8K,EAAaC,OAAOS,OAAOV,CAAC,GAAKQ,EAAGtL,UAAY8K,EAAE9K,UAAW,IAAIsL,IAGnFG,EAA0C,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,IAA2HhB,EAAvHiB,EAAIC,UAAU7K,OAAQ8K,EAAIF,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAOd,OAAOkB,yBAAyBN,EAAQC,CAAG,EAAIC,EACrH,GAAuB,UAAnB,OAAOK,SAAoD,YAA5B,OAAOA,QAAQC,SAAyBH,EAAIE,QAAQC,SAAST,EAAYC,EAAQC,EAAKC,CAAI,OACxH,IAAK,IAAIpJ,EAAIiJ,EAAWxK,OAAS,EAAQ,GAALuB,EAAQA,CAAC,IAAQoI,EAAIa,EAAWjJ,MAAIuJ,GAAKF,EAAI,EAAIjB,EAAEmB,CAAC,EAAQ,EAAJF,EAAQjB,EAAEc,EAAQC,EAAKI,CAAC,EAAInB,EAAEc,EAAQC,CAAG,IAAMI,GAChJ,OAAW,EAAJF,GAASE,GAAKjB,OAAOqB,eAAeT,EAAQC,EAAKI,CAAC,EAAGA,CAChE,EAKIS,GAAwCrB,GA8B1CkB,gBA7BEjB,EAAUoB,EAAcrB,EAAM,EAI9BK,EAAW,CACPc,WAAS,CAAA,CAAI,GACdE,EAAazM,UAAW,aAAc,KAAA,CAAM,EAC/CyL,EAAW,CACPc,cACDE,EAAazM,UAAW,cAAe,KAAA,CAAM,EAChDyL,EAAW,CACPc,cACDE,EAAazM,UAAW,eAAgB,KAAA,CAAM,EACjDyL,EAAW,CACPc,cACDE,EAAazM,UAAW,YAAa,KAAA,CAAM,EAC9CyL,EAAW,CACPc,cACDE,EAAazM,UAAW,eAAgB,KAAA,CAAM,EACjDyL,EAAW,CACPc,cACDE,EAAazM,UAAW,iBAAkB,KAAA,CAAM,EACnDyL,EAAW,CACPc,cACDE,EAAazM,UAAW,WAAY,KAAA,CAAM,EAC7CyL,EAAW,CACPc,WAAS,QAAQ,GAClBE,EAAazM,UAAW,gBAAiB,KAAA,CAAM,EAC3CyM,GA3BP,SAASA,IACL,OAAkB,OAAXrB,IAAmBA,GAAOoB,MAAMpM,KAAM2L,SAAS,GAAK3L,KCzB3DwK,GAAgB,SAAUC,EAAGC,GAI7B,OAHAF,GAAgBG,OAAOC,iBAClB,CAAEC,UAAW,cAAgBlC,MAAS,SAAU8B,EAAGC,GAAKD,EAAEI,UAAYH,GACvE,SAAUD,EAAGC,GAAK,IAAK,IAAII,KAAKJ,EAAOA,EAAEK,eAAeD,CAAC,IAAGL,EAAEK,GAAKJ,EAAEI,OACpDL,EAAGC,CAAC,GALjC,IACQF,GAsBsCQ,GAvB1CC,EAOO,SAAUR,EAAGC,GAEhB,SAASQ,IAAOlL,KAAKmL,YAAcV,EADnCD,GAAcC,EAAGC,CAAC,EAElBD,EAAE7K,UAAkB,OAAN8K,EAAaC,OAAOS,OAAOV,CAAC,GAAKQ,EAAGtL,UAAY8K,EAAE9K,UAAW,IAAIsL,IAGnFG,GAA0C,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,IAA2HhB,EAAvHiB,EAAIC,UAAU7K,OAAQ8K,EAAIF,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAOd,OAAOkB,yBAAyBN,EAAQC,CAAG,EAAIC,EACrH,GAAuB,UAAnB,OAAOK,SAAoD,YAA5B,OAAOA,QAAQC,SAAyBH,EAAIE,QAAQC,SAAST,EAAYC,EAAQC,EAAKC,CAAI,OACxH,IAAK,IAAIpJ,EAAIiJ,EAAWxK,OAAS,EAAQ,GAALuB,EAAQA,CAAC,IAAQoI,EAAIa,EAAWjJ,MAAIuJ,GAAKF,EAAI,EAAIjB,EAAEmB,CAAC,EAAQ,EAAJF,EAAQjB,EAAEc,EAAQC,EAAKI,CAAC,EAAInB,EAAEc,EAAQC,CAAG,IAAMI,GAChJ,OAAW,EAAJF,GAASE,GAAKjB,OAAOqB,eAAeT,EAAQC,EAAKI,CAAC,EAAGA,CAChE,EAKIU,GAA0CtB,GAe5CkB,gBAdEjB,EAAUqB,GAAgBtB,EAAM,EAIhCK,GAAW,CACPc,cACDG,GAAe1M,UAAW,WAAY,KAAA,CAAM,EAC/CyL,GAAW,CACPc,WAAS,EAAE,GACZG,GAAe1M,UAAW,SAAU,KAAA,CAAM,EAC7CyL,GAAW,CACPc,WAAS,IAAI,GACdG,GAAe1M,UAAW,QAAS,KAAA,CAAM,EACrC0M,IAZP,SAASA,KACL,OAAkB,OAAXtB,IAAmBA,GAAOoB,MAAMpM,KAAM2L,SAAS,GAAK3L,KCzB3DwK,GAAgB,SAAUC,EAAGC,GAI7B,OAHAF,GAAgBG,OAAOC,iBAClB,CAAEC,UAAW,cAAgBlC,MAAS,SAAU8B,EAAGC,GAAKD,EAAEI,UAAYH,GACvE,SAAUD,EAAGC,GAAK,IAAK,IAAII,KAAKJ,EAAOA,EAAEK,eAAeD,CAAC,IAAGL,EAAEK,GAAKJ,EAAEI,OACpDL,EAAGC,CAAC,GALjC,IACQF,GAsB+BQ,GAvBnCC,GAOO,SAAUR,EAAGC,GAEhB,SAASQ,IAAOlL,KAAKmL,YAAcV,EADnCD,GAAcC,EAAGC,CAAC,EAElBD,EAAE7K,UAAkB,OAAN8K,EAAaC,OAAOS,OAAOV,CAAC,GAAKQ,EAAGtL,UAAY8K,EAAE9K,UAAW,IAAIsL,IAGnFG,EAA0C,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,IAA2HhB,EAAvHiB,EAAIC,UAAU7K,OAAQ8K,EAAIF,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAOd,OAAOkB,yBAAyBN,EAAQC,CAAG,EAAIC,EACrH,GAAuB,UAAnB,OAAOK,SAAoD,YAA5B,OAAOA,QAAQC,SAAyBH,EAAIE,QAAQC,SAAST,EAAYC,EAAQC,EAAKC,CAAI,OACxH,IAAK,IAAIpJ,EAAIiJ,EAAWxK,OAAS,EAAQ,GAALuB,EAAQA,CAAC,IAAQoI,EAAIa,EAAWjJ,MAAIuJ,GAAKF,EAAI,EAAIjB,EAAEmB,CAAC,EAAQ,EAAJF,EAAQjB,EAAEc,EAAQC,EAAKI,CAAC,EAAInB,EAAEc,EAAQC,CAAG,IAAMI,GAChJ,OAAW,EAAJF,GAASE,GAAKjB,OAAOqB,eAAeT,EAAQC,EAAKI,CAAC,EAAGA,CAChE,EAKIW,IAAmCvB,GA0CrCkB,gBAzCEjB,GAAUsB,EAASvB,EAAM,EAIzBK,EAAW,CACPc,cACDI,EAAQ3M,UAAW,WAAY,KAAA,CAAM,EACxCyL,EAAW,CACPc,cACDI,EAAQ3M,UAAW,aAAc,KAAA,CAAM,EAC1CyL,EAAW,CACPc,cACDI,EAAQ3M,UAAW,WAAY,KAAA,CAAM,EACxCyL,EAAW,CACPc,WAAS,CAAA,CAAK,GACfI,EAAQ3M,UAAW,cAAe,KAAA,CAAM,EAC3CyL,EAAW,CACPc,WAAS,CAAA,CAAI,GACdI,EAAQ3M,UAAW,aAAc,KAAA,CAAM,EAC1CyL,EAAW,CACPc,cACDI,EAAQ3M,UAAW,WAAY,KAAA,CAAM,EACxCyL,EAAW,CACPc,cACDI,EAAQ3M,UAAW,WAAY,KAAA,CAAM,EACxCyL,EAAW,CACPc,WAAS,CAAA,CAAI,GACdI,EAAQ3M,UAAW,gBAAiB,KAAA,CAAM,EAC7CyL,EAAW,CACPc,WAAS,CAAA,CAAK,GACfI,EAAQ3M,UAAW,gBAAiB,KAAA,CAAM,EAC7CyL,EAAW,CACPc,WAAS,CAAA,CAAI,GACdI,EAAQ3M,UAAW,YAAa,KAAA,CAAM,EACzCyL,EAAW,CACPc,WAAS,CAAA,CAAI,GACdI,EAAQ3M,UAAW,YAAa,KAAA,CAAM,EACzCyL,EAAW,CACPc,WAAS,EAAE,GACZI,EAAQ3M,UAAW,oBAAqB,KAAA,CAAM,EAC1C2M,GAvCP,SAASA,IACL,OAAkB,OAAXvB,IAAmBA,GAAOoB,MAAMpM,KAAM2L,SAAS,GAAK3L,KCzB3DwK,GAAgB,SAAUC,EAAGC,GAI7B,OAHAF,GAAgBG,OAAOC,iBAClB,CAAEC,UAAW,cAAgBlC,MAAS,SAAU8B,EAAGC,GAAKD,EAAEI,UAAYH,GACvE,SAAUD,EAAGC,GAAK,IAAK,IAAII,KAAKJ,EAAOA,EAAEK,eAAeD,CAAC,IAAGL,EAAEK,GAAKJ,EAAEI,OACpDL,EAAGC,CAAC,GALjC,IACQF,GAsBsCQ,GAvB1CC,GAOO,SAAUR,EAAGC,GAEhB,SAASQ,IAAOlL,KAAKmL,YAAcV,EADnCD,GAAcC,EAAGC,CAAC,EAElBD,EAAE7K,UAAkB,OAAN8K,EAAaC,OAAOS,OAAOV,CAAC,GAAKQ,EAAGtL,UAAY8K,EAAE9K,UAAW,IAAIsL,IAGnFG,EAA0C,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,IAA2HhB,EAAvHiB,EAAIC,UAAU7K,OAAQ8K,EAAIF,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAOd,OAAOkB,yBAAyBN,EAAQC,CAAG,EAAIC,EACrH,GAAuB,UAAnB,OAAOK,SAAoD,YAA5B,OAAOA,QAAQC,SAAyBH,EAAIE,QAAQC,SAAST,EAAYC,EAAQC,EAAKC,CAAI,OACxH,IAAK,IAAIpJ,EAAIiJ,EAAWxK,OAAS,EAAQ,GAALuB,EAAQA,CAAC,IAAQoI,EAAIa,EAAWjJ,MAAIuJ,GAAKF,EAAI,EAAIjB,EAAEmB,CAAC,EAAQ,EAAJF,EAAQjB,EAAEc,EAAQC,EAAKI,CAAC,EAAInB,EAAEc,EAAQC,CAAG,IAAMI,GAChJ,OAAW,EAAJF,GAASE,GAAKjB,OAAOqB,eAAeT,EAAQC,EAAKI,CAAC,EAAGA,CAChE,EAKIY,IAA0CxB,GAY5CkB,gBAXEjB,GAAUuB,GAAgBxB,EAAM,EAIhCK,EAAW,CACPc,cACDK,GAAe5M,UAAW,OAAQ,KAAA,CAAM,EAC3CyL,EAAW,CACPc,cACDK,GAAe5M,UAAW,YAAa,KAAA,CAAM,EACzC4M,IATP,SAASA,KACL,OAAkB,OAAXxB,IAAmBA,GAAOoB,MAAMpM,KAAM2L,SAAS,GAAK3L,KCzB3DwK,GAAgB,SAAUC,EAAGC,GAI7B,OAHAF,GAAgBG,OAAOC,iBAClB,CAAEC,UAAW,cAAgBlC,MAAS,SAAU8B,EAAGC,GAAKD,EAAEI,UAAYH,GACvE,SAAUD,EAAGC,GAAK,IAAK,IAAII,KAAKJ,EAAOA,EAAEK,eAAeD,CAAC,IAAGL,EAAEK,GAAKJ,EAAEI,OACpDL,EAAGC,CAAC,GALjC,IACQF,GAsBoCQ,GAvBxCC,EAOO,SAAUR,EAAGC,GAEhB,SAASQ,IAAOlL,KAAKmL,YAAcV,EADnCD,GAAcC,EAAGC,CAAC,EAElBD,EAAE7K,UAAkB,OAAN8K,EAAaC,OAAOS,OAAOV,CAAC,GAAKQ,EAAGtL,UAAY8K,EAAE9K,UAAW,IAAIsL,IAGnFG,GAA0C,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,IAA2HhB,EAAvHiB,EAAIC,UAAU7K,OAAQ8K,EAAIF,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAOd,OAAOkB,yBAAyBN,EAAQC,CAAG,EAAIC,EACrH,GAAuB,UAAnB,OAAOK,SAAoD,YAA5B,OAAOA,QAAQC,SAAyBH,EAAIE,QAAQC,SAAST,EAAYC,EAAQC,EAAKC,CAAI,OACxH,IAAK,IAAIpJ,EAAIiJ,EAAWxK,OAAS,EAAQ,GAALuB,EAAQA,CAAC,IAAQoI,EAAIa,EAAWjJ,MAAIuJ,GAAKF,EAAI,EAAIjB,EAAEmB,CAAC,EAAQ,EAAJF,EAAQjB,EAAEc,EAAQC,EAAKI,CAAC,EAAInB,EAAEc,EAAQC,CAAG,IAAMI,GAChJ,OAAW,EAAJF,GAASE,GAAKjB,OAAOqB,eAAeT,EAAQC,EAAKI,CAAC,EAAGA,CAChE,EAKIa,GAAwCzB,GAe1CkB,gBAdEjB,EAAUwB,GAAczB,EAAM,EAI9BK,GAAW,CACPc,WAAS,OAAO,GACjBM,GAAa7M,UAAW,SAAU,KAAA,CAAM,EAC3CyL,GAAW,CACPc,cACDM,GAAa7M,UAAW,QAAS,KAAA,CAAM,EAC1CyL,GAAW,CACPc,WAAS,WAAW,GACrBM,GAAa7M,UAAW,YAAa,KAAA,CAAM,EACvC6M,IAZP,SAASA,KACL,OAAkB,OAAXzB,IAAmBA,GAAOoB,MAAMpM,KAAM2L,SAAS,GAAK3L,KCtB5D,IAAI0M,GAAa,WAEbC,GAAY,QAEZC,GAAe,WAEfC,GAAa,UAEbC,GAAiB,aAEjBC,GAAiB,aAEjBC,GAAc,iBAEdC,EAAe,kBAEfC,GAAqB,iBAErBC,EAAqB,iBAErBC,GAAoB,gBAEpBC,GAAqB,iBAErBC,GAAoB,gBAEpBC,GAAoB,gBAEpBC,GAA2B,uBAE3BC,GAA4B,wBAE5BC,EAAsB,kBAEtBC,EAAgB,mBAEhBC,GAAsB,kBAEtBC,GAA0B,kBAE1BC,GAAmB,eAEnBC,EAAoB,gBAEpBC,EAAqB,iBAErBC,GAA4B,wBAE5BC,EAA8B,0BAI9BC,GAAwB,eAExBC,EAAqB,iBAErBC,GAA6B,yBAE7BC,EAAa,SAIbC,EAAkB,cAElBC,GAAa,SAEbC,GAAa,SAEbC,GAAiB,aAEjBC,GAAoB,gBAEpBC,GAAqB,iBAErBC,GAAyB,wBAEzBC,GAA0B,sBAE1BC,GAAkB,cAElBC,GAAiB,aAEjBC,GAAmB,eAEnBC,GAAmB,eAEnBC,GAAoB,gBAEpBC,GAAmB,eAEnBC,GAAwB,oBAExBC,GAAsB,kBAEtBC,GAAwB,oBAExBC,GAA6B,yBAE7BC,EAAkB,cAElBC,GAAe,kBAIfC,GAAa,gBAIbC,GAAyB,iBAEzBC,GAAc,UAEdC,GAAsB,yBAEtBC,GAAoB,gBAEpBC,GAAqB,wBAErBC,GAAsB,yBAEtBC,EAAiB,aAEjBC,GAAe,kBAEfC,GAAuB,mBAIvBC,GAA2B,uBAI3BC,GAA2B,uBAE3BC,GAAyB,eAEzBC,EAAuB,cAIvBC,GAAqB,iBAIrBC,EAAwB,oBAExBC,GAAgC,4BAIhCC,GAA0B,cAI1BC,GAA8B,0BAE9BC,GAAyB,qBAEzBC,GAAyB,qBAEzBC,GAA0B,sBAI1BC,GAAe,WAEfC,GAAkB,cAElBC,GAAkB,cAElBC,GAAkB,cAElBC,GAAkB,cAMlBC,GAAc,UAEdC,GAAsB,kBAUtBC,EAAkB,oBAElBC,GAAgB,kBAEhBC,GAAiB,mBAEjBC,GAA4B,wBAE5BC,GAAmB,eClM1BC,IAkBAA,EAAOjS,UAAUkS,aAAe,SAAU5L,GACtC,IAwBQ6L,EArBJxG,EAASyG,UAAQ9L,EAAEqF,OAHD,qJAGwB,EACzCA,IAGDA,EAAO0G,UAAUC,SAASC,CAAc,GACpCnS,KAAKK,OAAO+R,eACZpS,KAAKK,OAAOgS,eAAeC,qBAE/BtS,KAAKpB,UAAUsH,CAAC,GAEXqF,EAAO0G,UAAUC,SAASK,EAAqB,EACpDvS,KAAKwS,qBAAqBtM,CAAC,EAEtBqF,EAAO0G,UAAUC,SAASO,CAAqB,GAAKlH,EAAO0G,UAAUC,SAASQ,CAAsB,EACzG1S,KAAK2S,kBAAkBzM,CAAC,EAEnBqF,EAAO0G,UAAUC,SAASU,CAAmB,EAClD5S,KAAK6S,eAAetH,CAAM,EAErBA,EAAO0G,UAAUC,SAASY,EAA6B,IACxDC,EAAe,GAAGC,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAMT,CAAsB,CAAC,EAC/FX,EAAa/R,KAAKK,OAAO4G,aAAamM,kBAAkBC,cAAc,IAAMC,EAAc,EAC9FtT,KAAK2S,kBAAkBzM,EAAG6M,EAAa/S,KAAKK,OAAO4G,aAAasM,YAAY,EAC1DxB,CAAAA,CAAAA,EAAWE,UAAUC,SAASsB,CAA+B,EAE3EvB,YAAUF,EAAY,CAAC0B,IAAgC,CAACD,EAAgC,EAGxFvB,YAAUF,EAAY,CAACyB,GAAkC,CAACC,GAA8B,KAIpG5B,EAAOjS,UAAUiT,eAAiB,SAAUtH,GACxC,IAoBY9H,EApBRQ,EAAQjE,KACR0T,EAAU,GACwB,IAAlC1T,KAAKK,OAAOD,WAAWU,OACvB4S,EAAQ1T,KAAKK,OAAOkF,aAAaC,aAAe,EAEkC,UAA7E,OAAQxF,KAAKK,OAAOD,WAAW,GAAIJ,KAAKK,OAAOkF,aAAaC,eAC7DmO,EAAK3T,KAAKK,OAAOD,WAAWwT,IAAI,SAAUC,GAC1C,OAAOhS,SAASgS,EAAI5P,EAAM5D,OAAOkF,aAAaC,aAAc,EAAE,EACjE,EACDkO,EAAQ1T,KAAKK,OAAOkF,aAAaC,aAAevD,KAAK6R,IAAI1H,MAAMnK,KAAM0R,CAAE,EAAI,GAE/ED,EAAQ1T,KAAKK,OAAOW,UAAYgR,UAAQzG,EAAQ,IAAMwI,CAAuB,EAAEC,aAAa,UAAU,EAC9D,UAApChU,KAAKK,OAAOyJ,aAAaE,SACzB0J,EAAQ1T,KAAKK,OAAOyJ,aAAaC,OAAS,EACtCiI,UAAQzG,EAAQ,IAAMwI,CAAuB,EAAEV,cAAc,IAAMlB,CAAc,KAC7E8B,EAA8C,cAAvCjU,KAAKK,OAAOyJ,aAAaG,WAChCsB,EAAO2I,mBAAmBjC,UAAUC,SAASiC,EAAgB,EACzD5I,EAAO2I,mBAAyD3I,GAAtC2I,mBAAmBE,kBAC/C7I,EAAO2I,mBAAmBjC,UAAUC,SAASiC,EAAgB,EAC3D5I,EAAO2I,mBAA0D3I,GAAvC2I,mBAAmBG,kBACjD5Q,EAAOzD,KAAKK,OAAOiU,eAAeL,CAAI,EAC1CP,EAAQ1T,KAAKK,OAAOyJ,aAAaC,OAAStG,EAAKzD,KAAKK,OAAOyJ,aAAaC,OAAS,GAGnD,IAAlC/J,KAAKK,OAAOD,WAAWU,QAAgBd,KAAKK,OAAO6J,iBAAiBlJ,UACpEgR,UAAQzG,EAAQ,IAAMkH,CAAqB,EAAE8B,yBAC7Cb,EAAQ1T,KAAKK,OAAO6J,iBAAiBlJ,UACjCgR,UAAQzG,EAAQ,IAAMkH,CAAqB,EAAE8B,uBAAuBP,aAAa,UAAU,GAEnGhU,KAAKK,OAAOmU,WAAW,MAAOd,CAAO,GAEzC7B,EAAOjS,UAAU6U,mBAAqB,SAAUvO,GAC/B8L,UAAQ9L,EAAEqF,OAAQ,IAAM4G,CAAc,GAE/CnS,KAAKnB,gBAAgBqH,CAAC,GAG9B2L,EAAOjS,UAAUhB,UAAY,SAAUsH,EAAGwO,GACtC,IAAIzQ,EAAQjE,KACRuL,EAASyG,UAAQ,GAAgC9L,EAAEqF,OAAQ,IAAM4G,CAAc,EAC/EwC,EAAe3U,KAAKK,OAAOiU,eAAe/I,CAAM,EAChDoJ,IACA3U,KAAKK,OAAOuU,eAAiB,CAAEnR,KAAMkR,EAAczB,QAAS3H,GAE5DvL,KAAKK,OAAOwE,QAAQgQ,EADT,CAAEpR,KAAMkR,EAAczB,QAAS3H,EAAQjD,OAAQ,CAAA,EAAOwM,MAAO5O,GAC5B,SAAU6O,GAC7CA,EAAUzM,SACPiD,EAAO0G,UAAUC,SAAS8C,CAAwB,GAAgB,UAAX9O,EAAEG,MACzD4O,cAAY,CAAC1J,GAASyJ,CAAwB,GAC1C/Q,EAAM5D,OAAOsB,qBACbsC,EAAM5D,OAAOoG,oBAGbxC,EAAM5D,OAAO4G,cAHoBiO,0BAA0B3J,CAAM,IAOjE4J,EAAYjP,EAAEkP,QACdnR,EAAM5D,OAAOgV,YAAcpR,EAAM5D,OAAOiV,cACxCH,EAAalR,EAAM5D,OAAOiV,YAAYC,aAAetR,EAAM5D,OAAOiV,YAAYE,SAAYL,GAE9FlR,EAAMwR,cAAclK,EAAQ4J,EAAWjP,EAAEwP,QAAQ,GAEjDzR,EAAM5D,OAAOgV,YAAcpR,EAAM5D,OAAOiV,aACxCrR,EAAM5D,OAAOiV,YAAYK,qBAEzBC,EAAO5D,UAAQzG,EAAQ,IAAMwI,CAAuB,EACpD9P,EAAM5D,OAAO+R,gBACC,GAAGY,MAAMC,KAAK2C,EAAKzC,iBAAiB,IAAMhB,CAAc,CAAC,EAC/DjN,QAAQ,SAAUgB,GAAKA,EAAE2P,aAAa,WAAY,GAAG,EAAI,EACjE5R,EAAM5D,OAAOgS,eAAeyD,kBAAkB,QAAQ,IAGjE,IAGTjE,EAAOjS,UAAUf,gBAAkB,SAAUqH,GACzC,IAAIjC,EAAQjE,KACRuL,EAASyG,UAAQ9L,EAAEqF,OAAQ,IAAM4G,CAAc,EAC/C4D,EAAqB/V,KAAKK,OAAOiU,eAAe/I,CAAM,EAGtDzH,GAFJ9D,KAAKK,OAAOuU,eAAiB,CAAEnR,KAAMsS,EAAoB7C,QAAS3H,GAClEvL,KAAKyV,cAAclK,EAAQ,CAAA,EAAO,CAAA,CAAK,EAC5B,CAAE9H,KAAMsS,EAAoB7C,QAAS3H,EAAQjD,OAAQ,CAAA,EAAOwM,MAAO5O,IAC9ElG,KAAKK,OAAOwE,QAAQmR,EAAwBlS,EAAM,SAAUmS,GACnDA,EAAgB3N,QACjBrE,EAAM5D,OAAO6V,aAAa1B,WAAW,OAAQ1Q,EAAKL,IAAI,EAE7D,GAELoO,EAAOjS,UAAU+S,kBAAoB,SAAUzM,EAAGiQ,GAC9C,IAAIlS,EAAQjE,KACRoW,EAAgBlQ,aAAamQ,YAAenQ,EAAIA,EAAEqF,OAClD+K,EAAyBC,oBAAMJ,CAAY,EAAmBC,EAAfD,EAEnDnW,KAAKK,OAAOwE,QAAQ2R,EADT,CAAElO,OAAQ,CAAA,EAAOiD,OAAQ6K,EAAcxT,YAAa,qBACjB,SAAUwF,GACpD,IAEQoD,EACAiL,EACA1E,EACA2E,EAMAC,EAXHvO,EAAWE,SAERkD,GADAD,EAASyG,UAAQsE,EAAuB,IAAM5D,CAAsB,GACvDsB,aAAa,UAAU,EACpCyC,EAASxS,EAAM5D,OAAO6S,QAAQG,cAAc,IAAMZ,EAAyB,eAAiBlH,EAAOqL,SAAW,GAAK,GAAI,EACvH7E,EAAaxG,EAAO8H,cAAc,IAAMI,GAAgC,KAAOD,CAA+B,EAC9GkD,EAAcnL,CAAAA,CAAAA,EAAO0G,UAAUC,SAAS2E,CAAmB,EAM3DF,EAJAD,GACAzB,cAAY,CAACwB,EAAQlL,GAASsL,CAAmB,EACjD5E,YAAUF,EAAY,CAAC0B,IAAgC,CAACD,EAAgC,EACxFvP,EAAM5D,OAAOyW,oBAAoBlR,OAAO3B,EAAM5D,OAAOyW,oBAAoBC,QAAQvL,CAAG,EAAG,CAAC,EAC3E,MAGbwL,WAAS,CAACP,EAAQlL,GAASsL,CAAmB,EAC9C5E,YAAUF,EAAY,CAACyB,GAAkC,CAACC,GAA8B,EACxFxP,EAAM5D,OAAOyW,oBAAoBxV,KAAKkK,CAAG,EAC5B,MAEjBuG,EAAW8D,aAAa,aAAca,EAAclL,EAAM,UAAYA,EAAM,WAAW,EACvFD,EAAOsK,aAAa,gBAAiBa,EAAYzV,UAAU,EAC3DwV,EAAOZ,aAAa,gBAAiBa,EAAYzV,UAAU,EAChD,GAAG+R,MAAMC,KAAKwD,EAAOtD,iBAAiB,IAAMY,CAAuB,CAAC,EAC1E7O,QAAQ,SAAU0Q,GAAQA,EAAKC,aAAa,WAAYc,CAAU,EAAI,EAC3E1S,EAAM5D,OAAOuG,OAAO2D,EAAqB,EAAE,EAC3CtG,EAAM5D,OAAOwE,QAAQ0D,EAAuB,CAAEgD,OAAQ6K,EAAcxT,YAAa,oBAAqB,GAE7G,GAELiP,EAAOjS,UAAU4S,qBAAuB,SAAUtM,GAC9C,IAAIjC,EAAQjE,KACRoW,EAAgBlQ,aAAamQ,YAAenQ,EAAIA,EAAEqF,OAEtDvL,KAAKK,OAAOwE,QAAQ2R,EADT,CAAElO,OAAQ,CAAA,EAAOiD,OAAQ6K,EAAcxT,YAAa,wBACjB,SAAUwF,GACpD,IAEQ6O,EAFH7O,EAAWE,SAER2O,GADA1L,EAASyG,UAAQoE,EAAc,IAAMc,CAAsB,GACzCC,UACtBlT,EAAMmT,aAAa7L,CAAM,GACrB8L,EAAYpT,EAAM5D,OAAO6S,QAAQC,iBAAiB,IAAM+D,EAAyB,IAAML,CAAmB,EAAE/V,UAC7FmD,EAAM5D,OAAOM,QAAQG,OAASmD,EAAMqT,eAAexW,SAG9DyW,EAAUtT,EAAM5D,OAAO6S,QAAQG,cADd,IAAM6D,EAAyB,SAAWM,GAAgC,gBADlFP,EAAW,IAAMI,EAAa,EAAIJ,EAAW,GAC8D,GACzD,EAC/DD,WAAS,CAACO,GAAUV,CAAmB,EACvC5S,EAAMmT,aAAaG,CAAO,GAE9BtT,EAAM5D,OAAOuG,OAAO2D,EAAqB,EAAE,EAC3CtG,EAAM5D,OAAOwE,QAAQ0D,EAAuB,CAAEgD,OAAQ6K,EAAcxT,YAAa,uBAAwB,GAEhH,GAELiP,EAAOjS,UAAUwX,aAAe,SAAU7L,GACtC,IAAItH,EAAQjE,KACRiX,EAAW1L,EAAO4L,UAElBM,EAAY,GAAGzE,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAD5B,qCAC4D,CAAC,EAC/EuE,EAAc,IAAMC,GAAkB,mBAAqBV,EAAW,GAAK,IAC3ElF,EAAaxG,EAAO8H,cAAc,IAAMuE,GAA0B,KAAOC,EAAyB,EAClGC,EAAW,GAAG9E,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiBuE,CAAW,CAAC,EAC9E,GAAInM,EAAO0G,UAAUC,SAAS2E,CAAmB,EAAG,CAChD5B,cAAY6C,EAAUjB,CAAmB,EACrC7W,KAAKK,OAAOgV,aACRrV,KAAKK,OAAOsB,qBACZmW,EAAS5S,QAAQ,SAAU6S,GAAO,OAAOA,EAAIC,MAAMC,MAAQnW,aAAWmC,EAAM5D,OAAOoG,oBAAoByR,UAAU,EAAI,EAGrHJ,EAAS5S,QAAQ,SAAU6S,GAAO,OAAOA,EAAIC,MAAMC,MAAQnW,aAAWmC,EAAM5D,OAAO4G,aAAaiR,UAAU,EAAI,GAGtHjG,YAAUF,EAAY,CAAC6F,IAA0B,CAACC,GAA0B,EAgB5E,IAfA,IAeSjX,EAAK,EAAGuX,EAAcV,EAAW7W,EAAKuX,EAAYrX,OAAQF,CAAE,GAEjEwX,CAjBU,SAAUC,GACpB,IAAIC,EAAYD,EAAIhF,cAAc,IAAMU,EAA0B,eAAiBkD,EAAW,GAAK,GAAG,EACtGhC,cAAY,CAACqD,EAAW/M,GAASsL,CAAmB,EACpD7N,SAAOsP,EAAUjF,cAAc,IAAMkF,EAA8B,CAAC,EACpEhN,EAAOsK,aAAa,gBAAiB,MAAM,EAC3CyC,EAAUzC,aAAa,gBAAiB,MAAM,EAC1B,GAAG7C,MAAMC,KAAKqF,EAAUE,cAAcrF,iBAAiB,IAAM0D,CAAmB,CAAC,EACvF3R,QAAQ,SAAU0Q,GACxB6C,EAAiB7C,EAAKvC,cAAc,IAAMkF,EAA8B,EAC5EE,EAAeT,MAAMhW,OAAS,OAC1ByW,GAAkBH,EAAUI,wBAAwB1W,OAAUyW,EAAeC,wBAAwB1W,OAAS,KAC9GyW,EAAeT,MAAMhW,OAAUsW,EAAUI,wBAAwB1W,OAAS,EAAK,MAEtF,GAGSmW,EAAYvX,EACX,EAEuB,IAAlCZ,KAAKK,OAAOD,WAAWU,QAAqC,IAArB2W,EAAU3W,SACjDmU,cAAY,CAAC1J,GAASsL,CAAmB,EACzCtL,EAAOsK,aAAa,gBAAiB,MAAM,GAE/C7V,KAAK2Y,kBAAkB/S,OAAO5F,KAAK2Y,kBAAkB5B,QAAQxL,EAAOyI,aAAa,UAAU,CAAC,EAAG,CAAC,EAChGhU,KAAKK,OAAOM,QAAQsW,GAAU2B,cAAc,CAAEC,WAAY,CAAA,GAAQ,CAAA,CAAI,EACtEtN,EAAO8H,cAAc,gBAAgB,EAAEwC,aAAa,aAActK,EAAOyI,aAAa,UAAU,EAAI,SAAS,MAE5G,CACDgD,WAASc,EAAUjB,CAAmB,EAClC7W,KAAKK,OAAOgV,YACZyC,EAAS5S,QAAQ,SAAU6S,GAAO,OAAOA,EAAIC,MAAMC,MAAQnW,aTrNlD,ESqN+E,EAAI,EAEhGmQ,YAAUF,EAAY,CAAC8F,IAA4B,CAACD,GAAwB,EA8B5E,IA7BA,IAAIpM,EAAMD,EAAOyI,aAAa,UAAU,EA4BpC8E,EAAS9Y,KACJa,EAAK,EAAGkY,EAActB,EAAW5W,EAAKkY,EAAYjY,OAAQD,CAAE,GAEjEmY,CA9BU,SAAUX,GACpB,IAQQY,EARJX,EAAYD,EAAIhF,cAAc,IAAMU,EAA0B,cAAiBvI,EAAM,IAAK,EAC1FzH,EAAQuU,EAAUnB,UAClB+B,EAAO,KAAA,EASPA,EARCJ,EAAOzY,OAAOsB,sBAKXsX,EAAQH,EAAOzY,OAAO0I,WAAWzI,WACjCwY,EAAOzY,OAAOmH,gBAAgBsR,EAAOzY,OAAOM,QAAQoD,GAAO/C,UACzD8X,EAAOzY,OAAOoG,oBAAoB8C,WAAWuP,EAAOzY,OAAOM,QAAQoD,GAAO/C,UAAUF,QAClFgY,EAAOzY,OAAOM,QAAQoD,GAAOoV,cAAgB,IACjDF,EAAQ,KAAO,IAAMH,EAAOzY,OAAOM,QAAQoD,GAAOqV,aAR9CN,EAAOzY,OAAOM,QAAQoD,GAAOoV,cAAgB,IACjDb,EAAUnF,iBAAiB,IAAMhB,CAAc,EAAErR,OAAS,KAAO,IAAMgY,EAAOzY,OAAOM,QAAQoD,GAAOqV,WAS5Gd,EAAUe,YAAYC,gBAAc,MAAO,CAAEC,UAAWhB,GAAgCiB,UAAWN,EAAM,CAAC,EAC1GlC,WAAS,CAACsB,EAAW/M,GAASsL,CAAmB,EACjDtL,EAAOsK,aAAa,gBAAiB,OAAO,EAC5CyC,EAAUzC,aAAa,gBAAiB,OAAO,EAC3B,GAAG7C,MAAMC,KAAKqF,EAAUE,cAAcrF,iBAAiB,IAAM0D,CAAmB,CAAC,EACvF3R,QAAQ,SAAU0Q,GACxB6C,EAAiB7C,EAAKvC,cAAc,IAAMkF,EAA8B,EACxEE,GAAkBH,EAAUI,wBAAwB1W,OAAUyW,EAAeC,wBAAwB1W,OAAS,KAC9GyW,EAAeT,MAAMhW,OAAUsW,EAAUI,wBAAwB1W,OAAS,EAAK,MAEtF,GAIS+W,EAAYlY,EACX,EAEuB,IAAlCb,KAAKK,OAAOD,WAAWU,QAAqC,IAArB2W,EAAU3W,SACjDkW,WAAS,CAACzL,GAASsL,CAAmB,EACtCtL,EAAOsK,aAAa,gBAAiB,OAAO,GAEhD7V,KAAK2Y,kBAAkBrX,KAAKiK,EAAOyI,aAAa,UAAU,CAAC,EAC3DhU,KAAKK,OAAOM,QAAQsW,GAAU2B,cAAc,CAAEC,WAAY,CAAA,GAAS,CAAA,CAAI,EACvEtN,EAAO8H,cAAc,gBAAgB,EAAEwC,aAAa,aAAcrK,EAAM,WAAW,IAG3FqG,EAAOjS,UAAU6V,cAAgB,SAAUlK,EAAQkO,EAAQC,GACvD,IAAIzV,EAAQjE,KACZ,GAAKuL,EAAL,CAGA,IAAIoO,EAAQ3Z,KAAKK,OAAOuZ,mBACxB,GAA+C,SAA3C5Z,KAAKK,OAAOkF,aAAasU,cAA0B,CACnD,IAAIC,EAAa9H,UAAQzG,EAAQ,IAAMkH,CAAqB,EACxD1O,GAASwS,oBAAMvW,KAAK+Z,gBAAgB,EAAqCD,EAAjC9Z,KAAK+Z,kBAAuCnD,SACxF,GAAI7S,IAAU+V,EAAWlD,UAAa6C,CAAAA,GAAUC,CAAAA,GAAuD,aAA3C1Z,KAAKK,OAAOkF,aAAasU,cAiBrF,GAdqB,IAAjBF,EAAM7Y,QAAkB2Y,GAAqD,WAA3CzZ,KAAKK,OAAOkF,aAAasU,gBAC3D5E,cAAY0E,EAAO3E,CAAwB,GACvChV,KAAKK,OAAOsB,qBACZ3B,KAAKK,OAAOoG,oBAGZzG,KAAKK,OAAO4G,cAHoBiO,0BAA0ByE,CAAK,EAKnEA,EAAMzU,QAAQ,SAAU8U,GACpB/V,EAAMgW,eAAerU,OAAO3B,EAAMgW,eAAelD,QAAQiD,EAAGhG,aAAa,SAAS,CAAC,EAAG,CAAC,EACvF/P,EAAMiW,qBAAqBtU,OAAO3B,EAAMiW,qBAAqBnD,QAAQiD,CAAE,EAAG,CAAC,EAC3E/V,EAAMkW,kBAAkBvU,OAAO3B,EAAMkW,kBAAkBpD,QAAQ9S,EAAM5D,OAAOiU,eAAe0F,CAAE,EAAG,CAAC,CAAC,EACrG,GAEc,EAAfL,EAAM7Y,QAAc4Y,GAAsD,aAA3C1Z,KAAKK,OAAOkF,aAAasU,cAA8B,CACtF,IAAIO,EAAa,GACbC,EAAQ,KAAA,EACRC,EAAM,KAAA,EACNjY,EAAI,KAAA,EACJkY,EAAW,GAAGvH,MAAMC,KAAK6G,EAAW3G,iBAAiB,IAAMhB,CAAc,CAAC,EAE1EqI,GADJD,EAASrV,QAAQ,SAAU8U,GAAM,OAAOI,EAAW9Y,KAAK0Y,EAAGhG,aAAa,SAAS,CAAC,EAAI,EAC1EzI,EAAOyI,aAAa,SAAS,GACrCyG,EAASza,KAAK0a,SAAS1G,aAAa,SAAS,EAC7C2G,EAAWL,EAAMF,EAAWrD,QAAQyD,CAAK,EACzCI,EAAYP,EAAQD,EAAWrD,QAAQ0D,CAAM,EAC7CI,EAAoBD,EAAXD,EAAuB,OAAS,OAK7C,IAJe,QAAXE,IACAR,EAAQM,EACRL,EAAMM,GAELvY,EAAIgY,EAAOhY,GAAKiY,EAAKjY,CAAC,GAAI,CAC3B,IAAI4R,EAAOsG,EAASlY,GACpB2U,WAAS,CAAC/C,GAAOe,CAAwB,EACzCf,EAAK4B,aAAa,gBAAiB,MAAM,EACzC5B,EAAK4B,aAAa,WAAY,GAAG,EACjC7V,KAAKia,eAAe3Y,KAAK2S,EAAKD,aAAa,SAAS,CAAC,EACrDhU,KAAKka,qBAAqB5Y,KAAK2S,CAAI,EACnCjU,KAAKma,kBAAkB7Y,KAAKtB,KAAKK,OAAOiU,eAAeL,CAAI,CAAC,EAC5DjU,KAAK8a,kBAAoB7G,EACV,QAAX4G,IACA7a,KAAK8a,kBAAoBP,EAASF,UAK1CrD,WAAS,CAACzL,GAASyJ,CAAwB,EAC3CzJ,EAAOsK,aAAa,gBAAiB,MAAM,EAC3CtK,EAAOsK,aAAa,WAAY,GAAG,EACnC7V,KAAKia,eAAe3Y,KAAKiK,EAAOyI,aAAa,SAAS,CAAC,EACvDhU,KAAKka,qBAAqB5Y,KAAKiK,CAAM,EACrCvL,KAAKma,kBAAkB7Y,KAAKtB,KAAKK,OAAOiU,eAAe/I,CAAM,CAAC,EAC9DvL,KAAK0a,SAAW1a,KAAK8a,kBAAoBvP,EACzCvL,KAAK+Z,iBAAmB/H,UAAQzG,EAAQ,IAAMkH,CAAqB,EAC/DzS,KAAK+Z,iBAAiBxF,yBAElBwG,EAAY/a,KAAK+Z,iBAAiBxF,uBAAuBlB,cADvC,iDACoE,IACzE0H,EAAU9I,UAAUC,SAASsB,CAA+B,GACzExT,KAAK2S,kBAAkBoI,CAAS,KAMpDlJ,EAAOjS,UAAUob,UAAY,SAAUC,EAAelX,GAC9CiX,EAAYE,iBAAe3O,GAAS,CAACvM,KAAKK,OAAQ,UAAW4a,EAAe,CAAA,EAAK,EACrFjb,KAAKK,OAAOM,QAAQiF,OAAO7B,EAAO,EAAGiX,CAAS,EAC9Chb,KAAKK,OAAOuG,OAAOC,EAAkB,CAAEC,cAAe9G,KAAKK,OAAOD,WAAY,GAElFyR,EAAOjS,UAAUub,aAAe,SAAUpX,GACtC,IAAIqX,EAAUpb,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAM+D,CAAsB,EAAEmE,KAAKtX,CAAK,EACvFqX,GAAWA,EAAQnJ,UAAUC,SAASoJ,EAA2B,GACjEtb,KAAK2Y,kBAAkB/S,OAAO5F,KAAK2Y,kBAAkB5B,QAAQqE,EAAQpH,aAAa,UAAU,EAAG,CAAC,CAAC,EAErGhU,KAAKK,OAAOM,QAAQiF,OAAO7B,EAAO,CAAC,EACA,IAA/B/D,KAAKK,OAAOM,QAAQG,QACpBya,SAAOvb,KAAKK,OAAO6S,QAAQG,cAAc,IAAMmI,CAAgB,CAAC,EAChED,SAAOvb,KAAKK,OAAO6S,QAAQG,cAAc,IAAMoI,CAAiB,CAAC,GAGjEzb,KAAKK,OAAOuG,OAAOC,EAAkB,CAAEC,cAAe9G,KAAKK,OAAOD,WAAY,GAGtFyR,EAAOjS,UAAU8b,WAAa,SAAUlQ,GAChCzH,EAAQ/D,KAAKsX,eAAeP,QAAQvL,EAAIvK,UAAU,EACxC,CAAC,IAAX8C,IACA/D,KAAKsX,eAAe1R,OAAO7B,EAAO,CAAC,EACnC/D,KAAKK,OAAOuG,OAAOC,EAAkB,CAAEC,cAAe9G,KAAKK,OAAOD,WAAY,IAGtFyR,EAAOjS,UAAU+b,WAAa,SAAUnQ,GACpCxL,KAAKsX,eAAehW,KAAKkK,EAAIvK,UAAU,EACvCjB,KAAKK,OAAOuG,OAAOC,EAAkB,CAAEC,cAAe9G,KAAKK,OAAOD,WAAY,GAUlFyR,EAAOjS,UAAUiK,oBAAsB,SAAUpG,GACE,SAA3CzD,KAAKK,OAAOkF,aAAasU,eAA4BpW,EAAKzD,KAAKK,OAAOkF,aAAaC,eAE/EyO,EAAOjU,KAAKK,OAAO6S,QAAQG,cAAc,oBAEzC5P,EAAKzD,KAAKK,OAAOkF,aAAaC,aAAavE,WAAa,IAAK,KAE7D+V,WAAS,CAAC/C,GAAOe,CAAwB,EACzCf,EAAK4B,aAAa,gBAAiB,MAAM,EACzC5B,EAAK4B,aAAa,WAAY,GAAG,IAItChE,GA7ZP,SAASA,EAAOxR,GACZL,KAAKK,OAASA,EACdL,KAAK2Y,kBAAoB,GACzB3Y,KAAKia,eAAiB,GACtBja,KAAK8a,kBAAoB,KACzB9a,KAAK+Z,iBAAmB,KACxB/Z,KAAK0a,SAAW,KAChB1a,KAAKka,qBAAuB,GAC5Bla,KAAKma,kBAAoB,GACzBna,KAAKsX,eAAiB,GCR1BsE,GAAKhc,UAAUic,QAAU,SAAUC,EAAU/X,GACzC,IAAIE,EAAQjE,KACR8D,EAAO,CACPwE,OAAQ,CAAA,EAAO1F,YAAa,aAAcqC,aAAe6W,aAAoBnT,MAASmT,EAAW,CAACA,GAClG3W,eAAgB,GAAIM,eAAgB,IAExCzF,KAAKK,OAAOwE,QAAQ2R,EAAoB1S,EAAM,SAAUiY,GACpD,IACQC,EAyCA3V,EA1CH0V,EAAQzT,SACL0T,EAAiB,GACjB/X,EAAM5D,OAAOyJ,aAAaC,OAA8C,UAArC9F,EAAM5D,OAAOyJ,aAAaE,SACzD8R,aAAoBnT,MACpBqT,EAAiBF,EAGjBE,EAAe1a,KAAKwa,CAAQ,EAEhCE,EAAe9W,QAAQ,SAAUzB,EAAMM,GACnC,IACQwF,EADH9F,EAAKQ,EAAM5D,OAAOyJ,aAAaC,SAC5BR,EAAatF,EAAM5D,OAAO4b,cAAcxY,EAAKQ,EAAM5D,OAAOW,SAAS,EAC3B,cAAxCiD,EAAM5D,OAAOyJ,aAAaG,WAAiD,EAApBV,EAAWzI,OAClE2C,EAAKQ,EAAM5D,OAAOyJ,aAAaC,OAC1BR,EAAWA,EAAWzI,OAAS,GAAGmD,EAAM5D,OAAOyJ,aAAaC,OAAUhG,EAAQ,EAEtC,eAAxCE,EAAM5D,OAAOyJ,aAAaG,WAAkD,EAApBV,EAAWzI,SACxE2C,EAAKQ,EAAM5D,OAAOyJ,aAAaC,OAASR,EAAW,GAAGtF,EAAM5D,OAAOyJ,aAAaC,OAAShG,EAAQ,GAE3E,IAAtBwF,EAAWzI,SACX2C,EAAKQ,EAAM5D,OAAOyJ,aAAaC,OAAS,IAGnD,EACK+R,aAAoBnT,OACjB5E,GAAiD,eAAxCE,EAAM5D,OAAOyJ,aAAaG,WAEpChG,EAAM5D,OAAO4b,cAAcD,EAAe,GAAG/X,EAAM5D,OAAOW,SAAS,EAAEsE,OAAO,SAAUuO,EAAKxM,GACnFwM,EAAI5P,EAAM5D,OAAOyJ,aAAaC,SAAWiS,EAAe,GAAG/X,EAAM5D,OAAOyJ,aAAaC,SACrFhG,EAAQsD,EAAQ,GAEvB,EAGK,IAAVtD,GAAgBA,GAAiD,eAAxCE,EAAM5D,OAAOyJ,aAAaG,YACnDlG,EAAQ,GAEZiY,EAAiB/X,EAAMiY,cAAcF,EAAgBjY,CAAK,GAI1DoY,EAAY,CAAElX,aAFE6W,aAAoBnT,MAASmT,EAAW,CAACA,GAEf3W,eADxBlB,EAAM5D,OAAOyJ,aAAaC,OAA8C,UAArC9F,EAAM5D,OAAOyJ,aAAaE,OAAsBgS,EAAiB,GAC5CvW,eAAgB,IAC1FY,EAAQyV,aAAoBnT,OAAiC,EAAxBqT,EAAelb,OAAc,QAAU,SAChFmD,EAAM5D,OAAO0I,WAAWnB,kBAAkBvB,EAAM8V,EAAW,cAAeL,EAAU/X,CAAK,GAEhG,GAEL6X,GAAKhc,UAAUwc,iBAAmB,SAAU3Y,GACxC,IAAI4Y,EAAcrc,KAAKK,OAAO6S,QAAQG,cAAc,oBAAuC5P,EAAKzD,KAAKK,OAAOkF,aAAaC,aAAe,IAAK,EACzI0N,EAAUlB,UAAQqK,EAAa,IAAMtI,CAAuB,EAEhE,MADY,GAAGf,MAAMC,KAAKC,EAAQC,iBAAiB,IAAMhB,CAAc,CAAC,EAAE4E,QAAQsF,CAAW,GAGjGT,GAAKhc,UAAU0c,WAAa,SAAUR,EAAU/X,EAAOgE,EAAWC,EAA4BC,EAAYC,EAAYC,GAClH,IAAIlE,EAAQjE,KACR8D,EAAO,CACPlB,YAAa,aAAc0F,OAAQ,CAAA,EAAOrD,aAAc,GACxDE,eAAiB2W,aAAoBnT,MAASmT,EAAW,CAACA,GAAWrW,eAAgB,IAEzF1B,EAAQwS,oBAAMxS,CAAK,EAAI/D,KAAKoc,iBAAiBtY,EAAKqB,eAAe,EAAE,EAAIpB,EACvE/D,KAAKK,OAAOwE,QAAQ2R,EAAoB1S,EAAM,SAAUyY,GACpD,IAcQlW,EAdHkW,EAAWjU,SACRrE,EAAM5D,OAAOyJ,aAAaC,OAA8C,UAArC9F,EAAM5D,OAAOyJ,aAAaE,SACzDwS,EAAe,GACfV,aAAoBnT,MACpB6T,EAAeV,EAGfU,EAAalb,KAAKwa,CAAQ,EAE9BA,EAAW7X,EAAMiY,cAAcM,EAAczY,CAAK,GAElDoY,EAAY,CACZlX,aAAc,GAAIE,eAAiB2W,aAAoBnT,MAASmT,EAAW,CAACA,GAAWrW,eAAgB,IAEvGY,EAAQyV,aAAoBnT,MAAS,QAAU,SACnD1E,EAAM5D,OAAO0I,WAAWnB,kBAAkBvB,EAAM8V,EAAW,cAAeL,EAAU/X,EAAOgE,EAAWC,EAA4BC,EAAYC,EAAYC,CAAc,GAE/K,GAELyT,GAAKhc,UAAU6c,WAAa,SAAUX,GAClC,IAAI7X,EAAQjE,KACRmc,EAAY,CAAElX,aAAc,GAAIE,eAAgB,GAAIM,eAAgB,IASpE3B,GAPAqY,EAAU1W,eADU,UAApB,OAAOqW,GAA6C,UAApB,OAAOA,EACZ9b,KAAKK,OAAOD,WAAWkF,OAAO,SAAU7B,GAC/D,OAAOA,EAAKQ,EAAM5D,OAAOkF,aAAaC,eAAiBsW,EAC1D,EAG2BA,aAAoBnT,MAASmT,EAAW,CAACA,GAE9D,CACPlZ,YAAa,aAAc0F,OAAQ,CAAA,EAAOrD,aAAc,GAAIE,eAAgB,GAAIM,eAAgB0W,EAAU1W,iBAE9GzF,KAAKK,OAAOwE,QAAQ2R,EAAoB1S,EAAM,SAAU4Y,GAC/CA,EAAWpU,SACRjC,EAA0C,EAAlC8V,EAAU1W,eAAe3E,OAAc,QAAU,SAE7DmD,EAAM5D,OAAO0I,WAAWnB,kBAAkBvB,EAAM8V,EAAW,cAD1CA,EAAU1W,eAC0D,EAAE,GAE9F,GAELmW,GAAKhc,UAAUsc,cAAgB,SAAUJ,EAAUa,GAwD/C,IAvDA,IAKIC,EALA3Y,EAAQjE,KACR6c,EAAUf,EAASlI,IAAI,SAAUC,GAAO,OAAOA,EAAI5P,EAAM5D,OAAOkF,aAAaC,aAAe,EAC5FsX,EAAMhB,EAASA,EAAShb,OAAS,GAAGd,KAAKK,OAAOyJ,aAAaC,OAC7DgT,EAAkBjB,EAASlI,IAAI,SAAUC,GAAO,OAAOA,EAAI5P,EAAM5D,OAAOW,UAAY,EACpFgc,EAAcD,EAAgBzX,OAAO,SAAUkG,EAAKzH,GAAS,OAAOgZ,EAAgBhG,QAAQvL,CAAG,IAAMzH,EAAQ,EAAEkZ,OAE/GC,EAAY,GACZC,EAAgB,GAChB/E,EAAU,SAAUgF,GACpB,IAAIC,EAAUvB,EAASxW,OAAO,SAAUD,GACpC,OAAOA,EAAQpB,EAAM5D,OAAOW,YAAcoc,EAC7C,EACDR,GAAiB9D,EAAOzY,OAAOsB,qBAAuBmX,EAAOzY,OAAOoG,oBAC9DqS,EAAOzY,OAAO4G,cADoEgV,cAAcmB,CAAS,EAE/G,IAAK,IAAIxc,EAAK,EAAGC,EAAKwc,EAASzc,EAAKC,EAAGC,OAAQF,CAAE,GAAI,CACjD,IAAI6C,EAAO5C,EAAGD,GACVkY,EAAOzY,OAAO6J,iBAAiBlJ,WAC3Bsc,EAAgBxE,EAAOzY,OAAOkd,gBAAgB9Z,EAAKqV,EAAOzY,OAAO6J,iBAAiBlJ,SAAS,EAC/F4b,EAAiB9D,EAAOzY,OAAO4b,cAAcmB,EAAWE,CAAa,GAI7E,GADAD,EAAQnY,QAAQ,SAAUsG,GAAO,OAAO0R,EAAU5b,KAAKkK,CAAG,EAAI,EAC1D,CAAC+K,oBAAMoG,CAAS,EAAG,CAQnB,IAPA,IAOSa,EAAI,EAAGA,EAAIX,EAAQ/b,OAAQ0c,CAAC,GACjCxE,CARU,SAAUwE,GACpBZ,EAAetX,OAAO,SAAU7B,EAAMM,GAC9BN,EAAKQ,EAAM5D,OAAOkF,aAAaC,eAAiBqX,EAAQW,IAAMzZ,GAAS4Y,GACvEQ,EAAc7b,KAAKyC,CAAK,EAE/B,GAGOyZ,CAAC,EAKb,GAH2B,EAAvBL,EAAcrc,SACd6b,GAAwBQ,EAAcrc,QAEG,cAAzCgY,EAAOzY,OAAOyJ,aAAaG,UAC3B,IAAK,IAAI5H,EAAIsa,EAAWta,EAAIua,EAAe9b,OAAQuB,CAAC,GACmC,CAAC,IAAhFwa,EAAQ9F,QAAQ6F,EAAeva,GAAGyW,EAAOzY,OAAOkF,aAAaC,YAAY,IACzEoX,EAAeva,GAAGyW,EAAOzY,OAAOyJ,aAAaC,OAAS,EAAE+S,EACxDI,EAAU5b,KAAKsb,EAAeva,EAAE,QAKxC,IAASA,EAAIsa,EAAY,EAAQ,GAALta,EAAQA,CAAC,GACkD,CAAC,IAAhFwa,EAAQ9F,QAAQ6F,EAAeva,GAAGyW,EAAOzY,OAAOkF,aAAaC,YAAY,IACzEoX,EAAeva,GAAGyW,EAAOzY,OAAOyJ,aAAaC,OAAS,EAAE+S,EACxDI,EAAU5b,KAAKsb,EAAeva,EAAE,KAMhDyW,EAAS9Y,KACJY,EAAK,EAAG6c,EAAgBT,EAAapc,EAAK6c,EAAc3c,OAAQF,CAAE,GAEvEwX,EADgBqF,EAAc7c,EACb,EAErB,OAAOsc,GAnLf,IAAItB,GAqLOA,GA9KP,SAASA,GAAKvb,GACVL,KAAKK,OAASA,ECYlBqd,EAAY9d,UAAU+d,eAAiB,SAAUzK,GAC7C,IAAI0K,EACwB,MAAxB,CAAC5d,KAAKK,OAAO6S,SAAyD,IAAtClT,KAAKK,OAAOwd,eAAe/c,SAC3D8c,EAAkB5d,KAAKK,OAAO6S,QAAQG,cAAc,IAAMoI,CAAiB,GAE/Ezb,KAAK8d,QAAQC,SAAW,IAAIC,YAAU9K,EAAS,CAC3CxR,MAAO,CAAA,EACPuc,cAAeje,KAAKK,OAAOgV,WAC3B6I,eAAgB,CAAA,EAChBC,SAAU,CAAEC,IAAK,CAAC,GAAIC,KAAM,CAAC,IAC7BC,SAAUV,EACV1e,UAAWc,KAAKd,UAAUqf,KAAKve,IAAI,EACnCb,KAAMa,KAAKb,KAAKof,KAAKve,IAAI,EACzBZ,SAAUY,KAAKZ,SAASmf,KAAKve,IAAI,EACjCwe,iBAAkB,CAAA,EAClBC,OAAQze,KAAK0e,WAAWH,KAAKve,IAAI,EACpC,GAEL0d,EAAY9d,UAAU8e,WAAa,SAAUxY,GAMzC,GALIlG,KAAKK,OAAOgV,YAAcrV,KAAKK,OAAOiV,YAAYC,aAClDvV,KAAKK,OAAOiV,YAAYC,YAAYrC,QAAQjB,UAAUC,SHgJpC,cGhJiE,GACnFlS,KAAKK,OAAOiV,YAAYC,YAAYoJ,OAExC3e,KAAK8d,QAAQ5K,QAAUlB,UAAQ9L,EAAE0Y,OAAOrT,OAAQ,IAAM4G,CAAc,EAChEoE,oBAAMvW,KAAK8d,QAAQ5K,OAAO,EAC1B,OAAO,KAEXlT,KAAK8d,QAAQ5K,QAAQ8E,MAAMC,MAAQnW,aAAW9B,KAAK8d,QAAQ5K,QAAQ2L,WAAW,EAC1EC,EAAexF,gBAAc,MAAO,CAAEE,UAAWxZ,KAAK8d,QAAQ5K,QAAQ6L,UAAW,EAUrF,OATA/e,KAAK8d,QAAQkB,aAAeF,EAAaG,SAAS5D,KAAK,CAAC,EACxDrE,WAAS,CAAChX,KAAK8d,QAAQkB,cAAeE,EAAqB,EAC3Dlf,KAAK8d,QAAQ5K,QAAQsF,cAAca,YAAYrZ,KAAK8d,QAAQkB,YAAY,EACxEhf,KAAK8d,QAAQqB,iBAAmB7F,gBAAc,MAAO,CAAEC,UAAW6F,GAA8B,EAChGpf,KAAK8d,QAAQuB,YAAc/F,gBAAc,MAAO,CAC5CC,UAAW+F,GACXC,OAAQ,qBAAuBzd,aAAW9B,KAAK8d,QAAQ5K,QAAQsM,YAAY,EAC9E,EACDxf,KAAK8d,QAAQtB,aAAe,GACrBxc,KAAK8d,QAAQkB,cAExBtB,EAAY9d,UAAUV,UAAY,SAAUgH,GACxC,IAAIjC,EAAQjE,KAsBRyf,GArBJzf,KAAK8d,QAAQ4B,cAAgB1f,KAAK8d,QAAQ5K,QAC1ClT,KAAK2f,UAAY3f,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAMgB,EAAgB,EACxEnU,KAAK8d,QAAQ5K,QAAQjB,UAAUC,SAAS8C,CAAwB,GAE5D4K,EAAa5N,UAAQhS,KAAK8d,QAAQ5K,QAAS,IAAMT,CAAqB,EAC1EzS,KAAK8d,QAAQ4B,cAAgB,GAAG1M,MAAMC,KAAK2M,EAAWzM,iBAFtC,yCAEgE,CAAC,EACjFnT,KAAK8d,QAAQ4B,cAAcxa,QAAQ,SAAUgO,GACzCjP,EAAM6Z,QAAQ+B,YAAYve,KAAK2C,EAAM5D,OAAOiU,eAAepB,CAAO,CAAC,EACtE,GAGDlT,KAAK8d,QAAQ+B,YAAc,CAAC7f,KAAKK,OAAOiU,eAAetU,KAAK8d,QAAQ5K,OAAO,GAE3E,CAACqD,oBAAMvW,KAAK8d,QAAQ4B,aAAa,GAAK,CAACnJ,oBAAMvW,KAAK8d,QAAQ4B,cAAc5e,MAAM,GACzC,GAArCd,KAAK8d,QAAQ4B,cAAc5e,OAC3Bd,KAAK8d,QAAQ4B,cAAc,GAAG1N,QAAQ,kBAAkB,EAAEC,UAAU6N,IAAI,kBAAkB,EAEpFvJ,oBAAMvW,KAAK8d,QAAQ4B,aAAa,GACrCnJ,oBAAMvW,KAAK8d,QAAQ4B,cAAc1N,QAAQ,kBAAkB,CAAC,GAC7DhS,KAAK8d,QAAQ4B,cAAc1N,QAAQ,kBAAkB,EAAEC,UAAU6N,IAAI,kBAAkB,EAE5E,CAAExX,OAAQ,CAAA,EAAO7E,KAAMzD,KAAK8d,QAAQ+B,YAAa/K,MAAO5O,EAAGgN,QAASlT,KAAK8d,QAAQ4B,gBAChG1f,KAAKK,OAAOwE,QAAQkb,EAAkBN,EAAU,SAAUO,GAClDA,EAAc1X,QACdrE,EAAMgc,cAAchc,EAAM6Z,QAAQkB,YAAY,EAC9C/a,EAAM6Z,QAAQC,SAASmC,WAAWha,CAAC,EACnCjC,EAAM6Z,QAAQ5K,QAAU,KACxBjP,EAAM6Z,QAAQuB,YAAc,KAC5Bpb,EAAM6Z,QAAQqC,aAAe,KAC7Blc,EAAM6Z,QAAQkB,aAAe,KAC7B/a,EAAM6Z,QAAQqB,iBAAmB,OAGjClb,EAAM6Z,QAAQ5K,QAAQjB,UAAUC,SAAS8C,CAAwB,GACjE/Q,EAAM6Z,QAAQ4B,cAAcxa,QAAQ,SAAUgO,GAAWjP,EAAMkc,aAAajN,CAAO,EAAI,EAC9C,EAArCjP,EAAM6Z,QAAQ4B,cAAc5e,SAC5BmD,EAAM6Z,QAAQkB,aAAaxF,UAAY,GACnCra,EAAOma,gBAAc,MAAO,CAC5BC,UAAW,oBACXC,UAAWvV,EAAM6Z,QAAQ4B,cAAc5e,OAAS,IAAMmD,EAAM5D,OAAO+f,UAAUC,YAAY,OAAO,EACnG,EACDpc,EAAM6Z,QAAQkB,aAAa3F,YAAYla,CAAI,EAC3C8S,YAAUhO,EAAM6Z,QAAQkB,aAAc,CAAC,sBAAuB,CAAChK,EAAyB,GACpF/Q,EAAM5D,OAAOsB,qBACbsC,EAAM5D,OAAOoG,oBAGbxC,EAAM5D,OAAO4G,cAHoBiO,0BAA0BjR,EAAM6Z,QAAQkB,YAAY,EAKzF/a,EAAM6Z,QAAQkB,aAAahH,MAAMC,MAAQ,SAI7ChU,EAAMkc,aAAalc,EAAM6Z,QAAQ5K,OAAO,EAE5CoN,eAAaR,IAAIS,SAASC,KAAM,UAAWvc,EAAMwc,eAAgBxc,CAAK,EACtEA,EAAM5D,OAAOuG,OAAO2D,EAAqB,EAAE,GAC9C,GAELmT,EAAY9d,UAAUugB,aAAe,SAAUjN,GAC3ClT,KAAK8d,QAAQqC,aAAe7G,gBAAc,MAAO,CAC7CC,UAAWmH,GACXnB,OAAQ,SAAWzd,aAAWoR,EAAQ2L,YAAc,CAAC,EAAI,WAAa/c,aAAWoR,EAAQsM,YAAY,EACxG,EACDtM,EAAQyN,sBAAsB,WAAY3gB,KAAK8d,QAAQqC,YAAY,EACnEnJ,WAAS,CAAC9D,GAAU0N,EAAsB,GAE9ClD,EAAY9d,UAAUT,KAAO,SAAU+G,GACnC,IAAIjC,EAAQjE,KACZ,GAAKkG,EAAEqF,OAAP,CAGA,IAoBIsV,EACAC,EArBAzE,EAAcrK,UAAQ9L,EAAEqF,OAAQ,IAAMwV,GAAiB,KAAO5O,CAAc,EAK5E6O,GAJCzK,oBAAM8F,CAAW,GAAKrc,CAAAA,KAAKK,OAAOsB,sBAAyB4U,oBAAMrQ,EAAEqF,OAAOgJ,sBAAsB,GAChGgC,oBAAMrQ,EAAEqF,OAAOgJ,uBAAuBlB,cAAc,yBAAyB,CAAC,IAC/EgJ,EAAcnW,EAAEqF,OAAOgJ,uBAAuBlB,cAAc,yBAAyB,EAAEa,oBAE3EhO,EAAEqF,QAWdA,GAVCgL,oBAAMrQ,EAAEqF,OAAOiN,aAAa,IACH,SAAtBtS,EAAEqF,OAAO0V,UAAuB/a,EAAEqF,OAAO0G,UAAUC,SAAS,cAAc,GAG/C,QAAtBhM,EAAEqF,OAAO0V,UAAsB/a,EAAEqF,OAAO0G,UAAUC,SAAS,iBAAiB,GAC3ElS,KAAKK,OAAO6S,QAAQG,cAAc,yBAAyB,IAAMnN,EAAEqF,OAAO2I,mBAAmBgN,cAC/FF,EAAY9a,EAAEqF,OAAOiN,eAIpB6D,GAAe2E,GAGxBG,EAAcnP,UAAQzG,EAFX,kEAE2B,EAU1C,GANIA,EAAO2I,oBAAsB3I,EAAO2I,mBAAmBkN,YACvDC,EAAc9V,EAAO2I,mBAAmBkN,UAAU7M,wBAEtDvU,KAAKshB,aAAa/V,CAAM,EACxBvL,KAAKuhB,UAAYvhB,KAAKK,OAAOmhB,qBAAuBxhB,KAAKK,OAAOohB,gBAAkBzhB,KAAKK,OACvFL,KAAK0hB,cAAcxb,CAAC,EAChBib,GAA8C,gBAA/BZ,SAASC,KAAKxI,MAAM2J,OAA0B,CAC7D,IAAIC,EAAY5hB,KAAK6hB,aAAaV,CAAW,EACzCW,EAAOF,EAAU1gB,MAAM,GAAG,EAE1B6gB,GADJ/hB,KAAKgiB,mBACSJ,IAAc5hB,KAAK6hB,aAAa7P,UAAQhS,KAAK8d,QAAQqC,aAAc,IAAMpM,CAAuB,CAAC,GAE/G,GAAoB,IAAhB+N,EAAKhhB,QAAgBihB,EAIrB,GAHIxW,EAAO0G,UAAUC,SAASwO,EAAuB,GACjD1gB,KAAKigB,cAAcjgB,KAAK8d,QAAQuB,YAAarf,KAAKuhB,SAAS,EAE3DhW,EAAO0G,UAAUC,SAASC,CAAc,GAA0B,gBAArBnS,KAAKiiB,YAA+B,CAC7E/O,EAAU3H,EAAO0G,UAAUC,SAASwO,EAAuB,GAC1DnV,EAAOgJ,uBAAuBtC,UAAUC,SAAS0O,EAAsB,EAAI,KAC1ErV,EAAOgJ,uBACbvU,KAAKiiB,YAAc,WACf1L,oBAAMrD,CAAO,IACTgP,EAAQ3W,EAAO0G,UAAUC,SAASwO,EAAuB,EAAK1gB,KAAK8d,QAAQoE,MAAQ,EACnFliB,KAAK8d,QAAQoE,MACblgB,EAASuJ,EAAO0G,UAAUC,SAASwO,EAAuB,EAAInV,EAAOiU,aACpEjU,EAAOiU,aAAe,GAI3B0C,GAHIC,EAAYniB,KAAKuhB,UAAUrO,QAAQwF,wBAAwB0F,IAAMjc,OAAOigB,UAC5D7W,EAAOmN,wBAAwB0F,IAAMjc,OAAOigB,QAC9BD,GAEFngB,KACxBhC,KAAKiiB,YAAc,eAGvB1W,EAAO0G,UAAUC,SAASC,CAAc,IACpCnS,KAAKK,OAAOsB,uBACZ3B,KAAKiiB,YAAcjiB,KAAKqiB,uBAAuB9W,CAAM,EAAIvL,KAAKiiB,YAAc,eAEhF1W,EAAOoV,sBAAsB3gB,KAAKiiB,YAAajiB,KAAK8d,QAAQuB,WAAW,QAG1E,GAAI9T,EAAO0G,UAAUC,SAAS6B,CAAuB,GAAK,CAAC/B,UAAQzG,EAAQ,IAAMmH,CAAsB,EAAG,CAC3G,GAAqE,IAAjEnH,EAAO4H,iBAAiB,IAAMyN,EAAsB,EAAE9f,QACwD,IAA9GyK,EAAO4H,iBAAiB,yDAAyE,EAAErS,OACnG,OAGAyK,EAAO8H,cAAc,IAAMiP,CAAsB,EAAEjJ,YAAYrZ,KAAK8d,QAAQuB,WAAW,MAGrF9T,CAAAA,EAAO0G,UAAUC,SAASoQ,CAAsB,GACtD/W,CAAAA,EAAO0G,UAAUC,SAASqQ,EAA8B,GACvDvQ,UAAQzG,EAAQ,IAAMmH,CAAsB,GACoB,IAA9DyO,EAAYhO,iBAAiB,IAAMhB,CAAc,EAAErR,OAGjDyK,EAAAA,EAAO0G,UAAUC,SAASiC,EAAgB,GAAK,CAACnC,UAAQzG,EAAQ,IAAMmH,CAAsB,GAC7FnH,EAAO2I,oBAAsB3I,EAAO2I,mBAAmBjC,UAAUC,SAASoQ,CAAsB,GACjGtiB,KAAK8d,QAAQuB,cAAiBgC,GAAgBA,EAAYpP,UAAUC,SAASoN,EAAuB,GAClGtf,KAAKK,OAAOsB,sBAAyB3B,KAAKqiB,uBAAuB9W,EAAO2I,kBAAkB,GAC3F3I,EAAO2I,mBAAmBmF,YAAYrZ,KAAK8d,QAAQuB,WAAW,EANlE9T,EAAO8N,YAAYrZ,KAAK8d,QAAQuB,WAAW,OAU5B,EAAdyC,EAAKhhB,SAAeqgB,EAAYlP,UAAUC,SAASsQ,CAAkB,GAC1ErB,EAAYD,YAAcC,EAAYD,WAAWjP,UAAUC,SAASsQ,CAAkB,IACtFxiB,KAAKyiB,iBAAiBX,EAAMX,CAAW,EAE3CnhB,KAAKuhB,UAAU3a,OAAO2D,EAAqB,EAAE,EAEgC,IAA7EvK,KAAKuhB,UAAUrO,QAAQC,iBAAiB,IAAMqP,CAAkB,EAAE1hB,QAClEd,KAAK0iB,eAET,IA0BQC,EA1BJjM,EAAc,CAAA,EAiBdkM,GAhBAzB,IACAzK,EAAcyK,EAAYlP,UAAUC,SAAS2E,CAAmB,GAAKsK,EAAYlP,UAAUC,SAASsQ,CAAkB,EACpE,SAA9CrB,EAAYnN,aAAa,eAAe,GAAiBmN,EAAY3I,cAAcqK,aAAa,eAAe,IAC/GhC,EAAgBM,EAAYzI,wBAC5B1Y,KAAK8iB,gBAAgBjC,CAAa,GAEtCC,EAAaK,EAAY9N,cAAc,IAAMc,EAAgB,GAE7D5I,GAA6B,UAAnBA,EAAOwX,SAAuB,CAACxM,oBAAMhL,EAAO8H,cAAc,IAAMZ,CAAqB,CAAC,IAChGoO,EAAgBtV,EAAO8H,cAAc,IAAMZ,CAAqB,EAAEiG,wBAClE1Y,KAAK8iB,gBAAgBjC,EAAetV,CAAM,GAE1CmL,IACA1W,KAAKgjB,cAAczX,CAAM,EACzByL,WAAS,CAACmK,GAAc8B,EAAwB,GAEtC,GAAGjQ,MAAMC,KAAKjT,KAAKuhB,UAAUrO,QAAQC,iBAAiB,IAAM8P,EAAwB,CAAC,GAO/FC,GANiB,EAAjBN,EAAQ9hB,QAAc,CAACyK,EAAO0G,UAAUC,SAAS+Q,EAAwB,GACtE,CAACjR,UAAQzG,EAAQ,IAAM0X,EAAwB,IAClDjjB,KAAKgjB,cAAczX,EAAQqX,EAAQ5P,MAAM,CAAC,CAAC,EAAE,EAAE,EAC/CiC,cAAY2N,EAASK,EAAwB,GAEjDjjB,KAAKuhB,UAAU3a,OAAO2D,EAAqB,EAAE,EACxByH,UAAQzG,EAAQ,IAAM4X,EAA0B,GA0BjE1D,GAzBAyD,GAGwB,GAFpBP,EAAa,GAAG3P,MAAMC,KAAKjT,KAAKuhB,UAAUrO,QAAQC,iBAAiB,IAAMgQ,GAA6B,SACtGC,GAAqB,GAAG,CAAC,EAAE9d,OAAO,SAAU4N,GAAW,OAAOjP,EAAM4d,aAAa3O,CAAO,IAAMjP,EAAM4d,aAAaqB,CAAc,EAAI,GACxHpiB,SACXkW,WAAS2L,EHnIO,gBGmI2B,EACvCA,EAAW,GAAGpO,yBACdyC,WAAS,CAAC2L,EAAW,GAAGpO,wBAAyB,uBAAuB,EAIpFgM,SAASC,KAAKxI,MAAM2J,OAAUR,GAAeA,EAAYlP,UAAUC,SAASsQ,CAAkB,GACzFrB,GAAeL,GAAcA,EAAW7O,UAAUC,SAASsQ,CAAkB,EAAM,GAAK,cACzFnG,CAAAA,GAAiBrK,UAAQqK,EAAa,IAAMtI,CAAwB,EAAE9B,UAAUC,SAASsQ,CAAkB,GACzGrB,GAAeL,GAAcA,EAAW7O,UAAUC,SAASsQ,CAAkB,IAC/EnG,EAAYrE,MAAM2J,OAAS,cAC3BpB,SAASC,KAAKxI,MAAM2J,OAAS,eAE7B3hB,KAAKqjB,gBAAiD,gBAA/B9C,SAASC,KAAKxI,MAAM2J,SAC3CpB,SAASC,KAAKxI,MAAM2J,OAAS,IAEE,gBAA/BpB,SAASC,KAAKxI,MAAM2J,SACpB3hB,KAAKigB,cAAcjgB,KAAK8d,QAAQuB,YAAarf,KAAKuhB,SAAS,EAC3DvhB,KAAKgiB,oBAEThiB,KAAKsjB,uBACU,CAAE7f,KAAMzD,KAAK8d,QAAQ+B,YAAa/K,MAAO5O,EAAGgN,QAASlT,KAAK8d,QAAQ4B,gBACjF1f,KAAKuhB,UAAU1c,QAAQ0e,EAAa9D,CAAQ,EAC5Czf,KAAKK,OAAOmhB,qBAAuB,CAAA,EACnCxhB,KAAKqjB,eAAiB,CAAA,IAE1B3F,EAAY9d,UAAUqgB,cAAgB,SAAU/M,EAASqO,GAEoB,GADzEA,EAAYA,GAAwBvhB,KAAKK,QAC3B6S,QAAQsQ,uBAAuBtQ,EAAQqG,SAAS,EAAEzY,QAC5DkI,SAAOkK,CAAO,GAGtBwK,EAAY9d,UAAUyiB,uBAAyB,SAAUoB,GACrD,IAAIC,EAAc1R,UAAQyR,EAAY,IAAMnB,CAAsB,EAClE,MAAA,EAAK/L,CAAAA,oBAAMmN,CAAW,GACMA,EAAYhL,wBAAwBiL,OACrCF,EAAW/K,wBAAwBiL,SAQlEjG,EAAY9d,UAAU0hB,aAAe,SAAU/V,GAC3C,IAAItH,EAAQjE,KACZA,KAAKK,OAAOwd,eAAe3Y,QAAQ,SAAU2Y,GACzC,IAAI+F,EAAoB5R,UAAQzG,EAAQsS,CAAc,EAClD+F,IACIA,EAAkB3R,UAAUC,SAAS,UAAU,GAC/CjO,EAAM5D,OAAOohB,gBAAkBlB,SAASlN,cAAcwK,CAAc,EAAEgG,cAAc,GACpF5f,EAAM5D,OAAOmhB,qBAAuB,CAAA,EAGhCsC,EAAQ,GAAG9Q,MAAMC,KAAKhP,EAAM5D,OAAOohB,gBAAgBvO,QAAQC,iBAF/C,wEAEyE,CAAC,EAC1F6D,WAAS8M,EAAOtB,CAAkB,GAGlCve,EAAMof,eAAiB,CAAA,GAGlC,GAEL3F,EAAY9d,UAAU6iB,iBAAmB,SAAUX,EAAMX,GACrD,IAAI3B,EAAe2B,EAAY3B,aAC3BuE,EAAW5C,EAAY9N,cAAc,IAAM2Q,EAAgB,EAC3DD,IACAvE,GAAgBuE,EAASvE,cAE7Bxf,KAAK8d,QAAQqB,iBAAiBnH,MAAMhW,OAASF,aAAW0d,CAAY,EAChE2B,EAAY9N,cAAc,IAAMT,CAAmB,GACnDoE,WAAS,CAACmK,EAAY9N,cAAc,IAAMT,CAAmB,GAAIqR,EAA4B,EAEjGjN,WAAS,CAACmK,EAAY9N,cAAc,IAAMiP,CAAsB,GAAI2B,EAA4B,EAChG9C,EAAY9N,cAAc,IAAMiP,CAAsB,EAAEtK,MAAMhW,OAAS,OACvEmf,EAAYnJ,MAAMkM,YAAc,OAChClkB,KAAKigB,cAAcjgB,KAAK8d,QAAQuB,WAAW,EAC3C,IAAK,IAAIze,EAAK,EAAGujB,EAASrC,EAAMlhB,EAAKujB,EAAOrjB,OAAQF,CAAE,GAAI,CACtD,IAAI4K,EAAM2Y,EAAOvjB,GACbwjB,EAAWpS,UAAQhS,KAAK8d,QAAQqC,aAAc,IAAMpM,CAAuB,EAC3EsQ,EAAarkB,KAAKuhB,UAAU5gB,QAAQyjB,EAASjN,WAAWmN,kBACxDC,EAAkBvkB,KAAKwkB,kBAAkBxkB,KAAK8d,QAAQ5K,QAAQc,aAAa,UAAU,EAAGxI,EAAK6Y,CAAU,EAEvGI,EAASnL,gBAAc,MAAO,CAC9BC,UAAW4J,IAFFoB,EAAkB,GAAK,IAAMnB,IAGtCsB,MAAO,CAAEC,WAAYnZ,EAAIjK,QAC5B,EACG2X,EAAOI,gBAAc,MAAO,CAAEC,UAAW,SAAUC,UAAWhO,EAAIjK,OAAQ,EAC9E4f,EAAY9H,YAAYrZ,KAAK8d,QAAQqB,gBAAgB,EAAE9F,YAAYoL,CAAM,EAAEpL,YAAYH,CAAI,EAC3FuL,EAAOzM,MAAM2J,OAAS4C,EAAkB,GAAK,cAC7CE,EAAOzM,MAAM4M,WAAaH,EAAOzM,MAAMhW,OAASF,aAAY0d,EAAesC,EAAKhhB,QAChFoY,EAAKlB,MAAMoG,IAAMtc,aAAY0d,EAAe,EAAMtG,EAAKsG,aAAe,CAAE,IAGhF9B,EAAY9d,UAAU4kB,kBAAoB,SAAUK,EAAgBC,EAAeC,GAG/E,IAFA,IAAIR,EAAkB,CAAA,EAClB3C,EAAYkD,EAAc5jB,MAAM,GAAG,EAC9BmB,EAAI,EAAGA,EAAIuf,EAAU9gB,OAAQuB,CAAC,GAAI,CACvC,GAAIwiB,IAAmBjD,EAAUvf,GAAGd,OAChC,MAAO,CAAA,EAEX,GAAIwjB,EAAY,CACZ,GAA0B,IAAtBA,EAAWjkB,QAAyC,IAAzBikB,EAAW,GAAGjkB,OACzC,MAAO,CAAA,EAEX,IAAK,IAAI0c,EAAI,EAAGA,EAAIuH,EAAWjkB,OAAQ0c,CAAC,GAAI,CACxC,GAAIoE,EAAUvf,GAAGd,SAAWwjB,EAAWvH,GAAGjc,OACtC,MAAO,CAAA,EAGPgjB,EAAkB,CAAA,IAKlC,OAAOA,GAEX7G,EAAY9d,UAAU8iB,aAAe,WACjC,IASQsC,EATJ/gB,EAAQjE,KACRokB,EAAWpS,UAAQhS,KAAK8d,QAAQqC,aAAc,IAAMpM,CAAuB,EAC3EkR,EAAUjT,UAAQhS,KAAK8d,QAAQqC,aAAc,IAAM1N,CAAqB,EACxE2R,GAAYA,EAASnS,UAAUC,SAASgT,EAAc,GACtDlO,WAAS,CAACoN,GAAW5B,CAAkB,EAE3CxiB,KAAKmlB,YAAYF,EAASb,CAAQ,EAC9BpkB,KAAKuhB,UAAUrX,iBAAiBlJ,UAAYhB,KAAKuhB,UAAUrX,iBAAiBkb,mBAExEJ,EAAO,GAAGhS,MAAMC,KAAKjT,KAAKuhB,UAAUrO,QAAQC,iBADhC,uDAC0D,CAAC,EAC3E,GAAGH,MAAMC,KAAK+R,CAAI,EAAE9f,QAAQ,SAAUmT,GAC9B4M,IAAY5M,GACZpU,EAAMkhB,YAAY9M,EAAK+L,CAAQ,EAEtC,IAGT1G,EAAY9d,UAAUulB,YAAc,SAAUF,EAASb,GACnD,IAKQvD,EALJ5c,EAAQjE,KACRokB,GAAYpkB,KAAK2f,WAAuC,IAA1B3f,KAAK2f,UAAU7e,QACzCsjB,EAASnS,UAAUC,SAASsQ,CAAkB,GAC9CvN,cAAY,CAACmP,GAAW5B,CAAkB,EAE1C3B,EAAgBuD,EAAS1L,wBAC7B1Y,KAAK8iB,gBAAgBjC,CAAa,GAE7BuD,GAAYa,GACjB,GAAGjS,MAAMC,KAAKgS,EAAQhG,QAAQ,EAAE/Z,QAAQ,SAAU0Q,GAC9C,IAAIyO,EAAapgB,EAAMsd,UAAU5gB,QAAQyjB,EAASjN,WAAWmN,kBACzD1O,IAASwO,GAAYxO,EAAK3D,UAAUC,SAASgT,EAAc,GAC3DjhB,EAAMugB,kBAAkBJ,EAASpQ,aAAa,UAAU,EAAG4B,EAAK5B,aAAa,UAAU,EAAGqQ,CAAU,GACpGrN,WAAS,CAACpB,GAAO4M,CAAkB,EAE1C,GAGT9E,EAAY9d,UAAUkjB,gBAAkB,SAAUuC,EAAY9Z,GAC1D,GAAGyH,MAAMC,KAAKjT,KAAK2f,SAAS,EAAEza,QAAQ,SAAUgO,GACxCA,CAAAA,EAAQsF,eAA0E,SAAxDtF,EAAQsF,cAAcxE,aAAa,eAAe,GAAiBd,EAAQsF,cAAcqK,aAAa,eAAe,GAC/I7L,WAAS,CAAC9D,GAAUsP,CAAkB,EAE1C,IAAI8C,EAAepS,EAAQqB,uBAC3BrB,EAAQ8E,MAAMhW,OAASH,SAASwjB,EAAWrjB,OAAOf,WAAY,EAAE,GAAKqkB,GACjEA,EAAarT,UAAUC,SAASU,CAAmB,EAAI0S,EAAa9F,aAAe8F,EAAaC,UAAY,GAAK,KAChHha,GAA6B,UAAnBA,EAAOwX,UAClB7P,EAAQ8E,MAAMC,MAAQpW,SAASwjB,EAAWpN,MAAMhX,WAAY,EAAE,EAAI,MAEtEiS,EAAQ8E,MAAMqG,KAAQnL,EAAQsF,cAAcE,wBAAwB2F,KAAOrM,UAAQkB,EAAS,WAAW,EAAEwF,wBAAwB2F,KAAQ,KAC5I,GAELX,EAAY9d,UAAU6gB,eAAiB,SAAUva,GAC9B,WAAXA,EAAEsf,MAAqBxlB,KAAK8d,QAAQkB,eACpCsB,eAAatX,OAAOhJ,KAAK8d,QAAQkB,aAAc,UAAWhf,KAAKygB,cAAc,EAC7EzgB,KAAK8d,QAAQ5K,QAAQuS,gBAAgB,cAAc,EACnDzlB,KAAK0lB,gBACL1lB,KAAK2lB,sBAGbjI,EAAY9d,UAAUR,SAAW,SAAU8G,GACvC,IAKIkX,EAEAwI,EAOAzd,EAKA0d,EASIC,EA5BJ7hB,EAAQjE,KACRmhB,EAAcnP,UAAQhS,KAAK8d,QAAQuB,YAAa,IAAMtL,CAAuB,EAgD7E0L,GA/CAzf,KAAKK,OAAOsB,sBAAwB,CAAC4U,oBAAM4K,CAAW,GACtDA,EAAYlP,UAAU6N,IAAI,kBAAkB,EAMhDQ,eAAatX,OAAOuX,SAASC,KAAM,UAAWxgB,KAAKygB,cAAc,EACjE,GAAGzN,MAAMC,KAAKjT,KAAK2f,SAAS,EAAEza,QAAQ,SAAUgO,GAC5CA,EAAQjB,UAAUjJ,OAAOwZ,CAAkB,EAC9C,EACGxiB,KAAK8d,QAAQuB,YAAY7G,gBAGrBe,GAAapR,EAFCnI,KAAK8d,QAAQ4B,eAAqD,EAApC1f,KAAK8d,QAAQ4B,cAAc5e,QAChC,UAApCd,KAAKK,OAAOyJ,aAAaE,QAE5B,gBAAkCkV,GAAwB,MAAQI,GADpC,gBAAkCsB,GAAyB,MAAQ1B,GAAwB,MAAQI,GAGrIuG,EADc,GAAG7S,MAAMC,KAAKjT,KAAK8d,QAAQuB,YAAY7G,cAAcrF,iBAAiBoG,CAAS,CAAC,EAC1ExC,QAAQ/W,KAAK8d,QAAQuB,WAAW,EAChDrf,KAAKK,OAAOsB,uBAAwB,CAAC4U,oBAAMvW,KAAK8d,QAAQuB,YAAYnL,kBAAkB,IACtF0R,EAA6B5lB,KAAK8d,QAAQuB,YAAYnL,mBAAmBF,aAAa,SAAS,GAGnG,CAACuC,oBAAMvW,KAAKuhB,SAAS,GAAKvhB,KAAKuhB,UAAUrO,QAAQG,cAAc,IAAM+L,EAA4B,IACjGhC,EAAYpL,UAAQ9L,EAAEqF,OAAQ,IAAM4X,GAA6B,SAAWC,GAAqB,GAAG,IAEpGjC,GAAe/D,KAEX+D,EACA2E,EAAe9lB,KAAK6hB,aAAaV,CAAW,GAG5C2E,EAAe9lB,KAAK6hB,aAAazE,CAAS,EAC1C+D,EAAcnP,UAAQoL,EAAW,IAAMrJ,CAAuB,GAE9D/T,KAAK8d,QAAQ4B,yBAAyBrJ,YACtCrW,KAAK+lB,kBAAkB/lB,KAAK8d,QAAQ4B,cAAeoG,EAAc3E,CAAW,EAG5EnhB,KAAK8d,QAAQ4B,cAAcxa,QAAQ,SAAUgO,GAAWjP,EAAM8hB,kBAAkB7S,EAAS4S,EAAc3E,CAAW,EAAI,EAEtHnhB,KAAKK,OAAOyJ,aAAaC,QAA6C,UAApC/J,KAAKK,OAAOyJ,aAAaE,QAC3DhK,KAAKgmB,YAAYhmB,KAAK8d,QAAQtB,aAActW,EAAEuY,MAAM,EAGnB,IAArCze,KAAK8d,QAAQtB,aAAa1b,SAC1Bd,KAAK8d,QAAQtB,aAAexc,KAAK8d,QAAQ+B,aAE9B,CACXvX,OAAQ,CAAA,EAAO7E,KAAMzD,KAAK8d,QAAQtB,aAAc1H,MAAO5O,EAAGgN,QAASlT,KAAK8d,QAAQ4B,cAChFmG,UAAWA,IAEf7lB,KAAKK,OAAOwE,QAAQohB,EAAiBxG,EAAU,SAAUO,GAErD,IAEY1D,EAGA4J,EACAC,EAPZliB,EAAMyhB,gBACD1F,EAAc1X,SACX6Y,GAAe/D,KACXd,EAAa0D,EAAcvc,gBAAgBkF,OACf,EAA5BqX,EAAcvc,KAAK3C,OAAakf,EAAcvc,KAC9Cuc,EAAcvc,KAAK,GAEnB0iB,EADAD,EAAmB,KAAA,EAEnBjiB,EAAM5D,OAAOsB,uBACbukB,EAAmB/E,EAAYnP,QAAQ,WAAW,EAAEqB,cAAc,mBAAmB,EAAEW,aAAa,UAAU,EAC9GmS,EAAmBhF,EAAYnN,aAAa,UAAU,GAE1D/P,EAAM5D,OAAO+lB,WAAW9J,WAAWA,EAAY0D,EAAc6F,UAAW,CAAA,EAAMD,EAA4BM,EAAkBC,EAAkBhe,CAAc,EACxJlE,EAAM5D,OAAOsB,wBACbsC,EAAM5D,OAAOoG,oBAAoBiC,kBAAkBwd,EAAkBC,CAAgB,EACrFliB,EAAM5D,OAAOoG,oBAAoB4f,qBAAqBH,CAAgB,GAIlFjiB,EAAMqiB,uBACNriB,EAAM0hB,oBACT,GAELjI,EAAY9d,UAAU0mB,qBAAuB,WACzC,GAAI,CAACtmB,KAAKK,OAAO6J,iBAAiBqc,aAE9B,IADA,IAAIC,EAAkBxmB,KAAKK,OAAO6S,QAAQC,iBAAiB,+BAA+B,EACjFqK,EAAI,EAAGA,EAAIgJ,EAAgB1lB,OAAQ0c,CAAC,GAAI,CAC7C,IAAIiJ,EAAcD,EAAgBhJ,GAAGtJ,mBAAmBf,iBAAiB,yBAAyB,EAC7FoD,oBAAMiQ,EAAgBhJ,GAAGtJ,kBAAkB,GAA4B,IAAvBuS,EAAY3lB,SAC7Dya,SAAOiL,EAAgBhJ,GAAGtJ,kBAAkB,EAC5CqH,SAAOiL,EAAgBhJ,EAAE,KAKzCE,EAAY9d,UAAU8lB,cAAgB,WAClC1lB,KAAKigB,cAAcjgB,KAAK8d,QAAQqC,YAAY,EAC5CngB,KAAKigB,cAAcjgB,KAAK8d,QAAQuB,YAAarf,KAAKuhB,SAAS,EAC3DvhB,KAAKigB,cAAcjgB,KAAK8d,QAAQkB,YAAY,EACvB,GAAGhM,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAMuN,EAAuB,CAAC,EACvFxb,QAAQ,SAAUxD,GAASsH,SAAOtH,CAAK,EAAI,EAC1D1B,KAAK8d,QAAQ5K,QAAQ8E,MAAM0O,eAAe,OAAO,EACjD1mB,KAAKgiB,mBACDhiB,KAAK8d,QAAQ4B,yBAAyBrJ,YACtCpB,cAAY,CAACjV,KAAK8d,QAAQ4B,eAAgBkB,EAAsB,EAGhE3L,cAAYjV,KAAK8d,QAAQ4B,cAAekB,EAAsB,EAElE+F,cAAc3mB,KAAK8d,QAAQ8I,kBAAkB,EAC7C5mB,KAAK8d,QAAQ8I,mBAAqB,KACC,gBAA/BrG,SAASC,KAAKxI,MAAM2J,SACpBpB,SAASC,KAAKxI,MAAM2J,OAAS,IAEhB,GAAG3O,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,gBAAgC,CAAC,EAC1FjO,QAAQ,SAAU2hB,GAAaA,EAAU7O,MAAM2J,OAAS,GAAK,EAhBxE,IAiBIpI,EAAY,IAAM9G,EAAwB,SAAWC,EAAyB,IACtE,GAAGM,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiBoG,EAAY,KAAOxF,CAAuB,CAAC,EACpG7O,QAAQ,SAAU0Q,GAAQ,OAAOX,cAAY,CAACW,GAAO4M,CAAkB,EAAI,EAC7ExiB,KAAKK,OAAOohB,iBACQ,GAAGzO,MAAMC,KAAKjT,KAAKK,OAAOohB,gBAAgBvO,QAAQC,iBAAiBoG,EAAY,KAC/FxF,CAAuB,CAAC,EACd7O,QAAQ,SAAU4hB,GAAgB,OAAO7R,cAAY,CAAC6R,GAAetE,CAAkB,EAAI,GAGjH9E,EAAY9d,UAAU+lB,kBAAoB,WAClC3lB,KAAKK,OAAOgV,aACZrV,KAAKK,OAAOiV,YAAYE,QAAU,CAAA,GAElCxV,KAAKK,OAAO6S,QAAQG,cAAc,mBAAmB,GACrDrT,KAAKK,OAAO6S,QAAQG,cAAc,mBAAmB,EAAEpB,UAAUjJ,OAAO,kBAAkB,EAE1FhJ,KAAKK,OAAO6S,QAAQG,cAAc,mBAAmB,GACrDrT,KAAKK,OAAO6S,QAAQG,cAAc,mBAAmB,EAAEpB,UAAUjJ,OAAO,kBAAkB,EAE9FhJ,KAAK8d,QAAQ+B,YAAc7f,KAAK8d,QAAQtB,aAAe,GACvDxc,KAAK+mB,WAAa,CAAA,EAClB/mB,KAAKK,OAAOmhB,qBAAuB,CAAA,EACnCxhB,KAAKK,OAAOohB,gBAAkB,MAElC/D,EAAY9d,UAAUmmB,kBAAoB,SAAU7S,EAAS8T,EAAY7F,GACjE8F,EAAUjnB,KAAKK,OAAOiU,eAAepB,CAAO,EAC5CgU,EAAWtjB,SAAO,GAAIqjB,EAAS,KAAM,CAAA,CAAI,EACR,IAAjCD,EAAW9lB,MAAM,GAAG,EAAEJ,SACtBomB,EAASlnB,KAAKK,OAAOW,UAAYgmB,GAEjChnB,KAAKK,OAAO6J,iBAAiBlJ,UAAYhB,KAAKK,OAAO6J,iBAAiBkb,mBAClE+B,EAAOnV,UAAQmP,EAAa,IAAM1O,CAAqB,EAAE8B,uBACzDvU,KAAKK,OAAOgV,YACRrU,EAAWhB,KAAKK,OAAO4G,aAAakD,WAAWnK,KAAKK,OAAO4G,aAAamgB,eAAepmB,SAC3FkmB,EAASlnB,KAAKK,OAAO6J,iBAAiBlJ,UAAYA,GAGlDkmB,EAASlnB,KAAKK,OAAO6J,iBAAiBlJ,UAAYhB,KAAK6hB,aAAasF,CAAI,GAGhFnnB,KAAK8d,QAAQtB,aAAalb,KAAK4lB,CAAQ,GAE3CxJ,EAAY9d,UAAUomB,YAAc,SAAUqB,EAAcC,GACxD,IA2BQC,EA3BJtjB,EAAQjE,KACRwnB,EAAU,CAAA,EAGVtU,EAD0C,cAA1ClT,KAAKuhB,UAAUzX,aAAaG,WACjBqd,IAAgBtnB,KAAK8d,QAAQuB,YAAY9K,wBAC/CvU,KAAK8d,QAAQuB,YAAY9K,wBACtBvU,KAAK8d,QAAQuB,YAAY9K,uBAAuBA,uBACpDvU,KAAK8d,QAAQuB,YAAY9K,uBAAgDvU,KAAK8d,QAAQuB,aAAtC9K,uBAG1CvU,KAAK8d,QAAQuB,YAAYnL,mBAEvC,GAAIhB,CAAAA,GAAYA,EAAQjB,UAAUC,SAAS0O,EAAsB,GAAM1N,EAAQjB,UAAUC,SAASgN,EAAqB,GAC/GhM,EAAQjB,UAAUC,SAASwO,EAAuB,EAGrD,GAAI1gB,KAAK8d,QAAQuB,YAAYnL,oBAAgE,cAA1ClU,KAAKuhB,UAAUzX,aAAaG,UAChFiJ,EAAUlT,KAAK8d,QAAQuB,YAAYnL,uBAElC,CAAA,GAAIlU,CAAAA,KAAK8d,QAAQuB,YAAY9K,wBAAoE,eAA1CvU,KAAKuhB,UAAUzX,aAAaG,UAIpF,OAHAiJ,EAAUlT,KAAK8d,QAAQuB,YAAY9K,4BANnCiT,EAAU,CAAA,EAWVtU,EAAQjB,UAAUC,SAASC,CAAc,IAErCoV,EADMvnB,KAAKuhB,UAAUjN,eAAepB,CAAO,EAC1BlT,KAAKuhB,UAAUzX,aAAaC,QAE7Csd,EADsB,EAAtBA,EAAavmB,QAAwD,eAA1Cd,KAAKuhB,UAAUzX,aAAaG,UACxCod,EAAaI,UAEhCJ,GAAaniB,QAAQ,SAAUzB,EAAMM,GAC7ByjB,EACA/jB,EAAKQ,EAAMsd,UAAUzX,aAAaC,OAAS,EAAEwd,EAEzB,IAAfA,GAAoBxjB,GAASN,EAAKQ,EAAMsd,UAAUzX,aAAaC,OACpEtG,EAAKQ,EAAMsd,UAAUzX,aAAaC,OAAS,EAAEwd,EAEzB,IAAfA,IACL9jB,EAAKQ,EAAMsd,UAAUzX,aAAaC,OAAShG,EAAQ,GAE1D,IAGT2Z,EAAY9d,UAAUojB,cAAgB,SAAUzX,EAAQqX,GACpD,IAAI3e,EAAQjE,KAQR0nB,GANQ,GAAG1U,MAAMC,KAAKjT,KAAKuhB,UAAUrO,QAAQC,iBAD/B,6CAC2D,CAAC,EACxEjO,QAAQ,SAAUyiB,GAChB1jB,EAAM4d,aAAa8F,CAAI,IAAM1jB,EAAM4d,aAAae,GAAWrX,CAAM,GACjEtH,EAAMsd,UAAU3X,aAAawN,aAAauQ,CAAI,EAErD,EACiB3V,UAAQhS,KAAK8d,QAAQqC,aAAc,IAAMpM,CAAuB,GAC9E2T,IACIzP,EAAQnW,aAAW4lB,EAAY7I,YXhmBxB,EWgmBsD,EACjE7e,KAAK8d,QAAQqC,aAAanI,MAAMC,MAAQA,EACxCjY,KAAK8d,QAAQkB,aAAahH,MAAMC,MAAQA,IAGhDyF,EAAY9d,UAAUoiB,iBAAmB,WACrC,IAAI4F,EAAcrR,oBAAMvW,KAAKuhB,SAAS,EAAiG,GAA7F,GAAGvO,MAAMC,KAAKjT,KAAKuhB,UAAUrO,QAAQC,iBAAiB,IAAMiM,EAA4B,CAAC,EAC3G,EAApBwI,EAAW9mB,SACK,GAAGkS,MAAMC,KAAKjT,KAAKuhB,UAAUrO,QAAQC,iBAAiB,IAAMgQ,EAA0B,CAAC,EAC7Fje,QAAQ,SAAU2iB,GAAQ,OAAO7e,SAAO6e,CAAI,EAAI,EAC1DD,EAAW1iB,QAAQ,SAAU2iB,GACrBjS,EAAO5D,UAAQ6V,EAAM,IAAM9T,CAAuB,EAClD6B,IACAA,EAAKoC,MAAMkM,YAAc,GACrBtO,EAAKvC,cAAc,IAAMT,CAAmB,GAC5CqC,cAAY,CAACW,EAAKvC,cAAc,IAAMT,CAAmB,GAAIqR,EAA4B,EAE7FhP,cAAY,CAACW,EAAKvC,cAAc,IAAMiP,CAAsB,GAAI2B,EAA4B,GAEnG,EACDjkB,KAAKigB,cAAcjgB,KAAK8d,QAAQqB,iBAAkBnf,KAAKuhB,SAAS,IAGxE7D,EAAY9d,UAAU8hB,cAAgB,SAAUxb,GACxC4hB,EAAY9nB,KAAK+nB,mBAAmB7hB,CAAC,EACzClG,KAAK8d,QAAQoE,MAAQ4F,EAAU5F,MAC/BliB,KAAK8d,QAAQkK,MAAQF,EAAUE,MAC/BhoB,KAAK+mB,WAAa,CAAA,EACd/mB,KAAKuhB,UAAUlM,YAAcrV,KAAKuhB,UAAU0G,eAC5CjoB,KAAKuhB,UAAU0G,cAAcC,WAAWC,SAGhDzK,EAAY9d,UAAUmoB,mBAAqB,SAAU7hB,GACjD,IAAI4hB,EAAY5hB,EAAE4O,MAClB,OAAOgT,GAAaA,EAAUM,eAAiBN,EAAUM,eAAe,GAAKliB,EAAEkiB,eAAiBliB,EAAEkiB,eAAe,GAC7GN,GAAa5hB,GAErBwX,EAAY9d,UAAUiiB,aAAe,SAAUtW,GAC3C,OAAIA,GAAUA,EAAOyI,aAAa,UAAU,EACjCzI,EAAOyI,aAAa,UAAU,EAAEzS,OAEpC,IAEXmc,EAAY9d,UAAU0jB,qBAAuB,WACzC,IAAIrf,EAAQjE,KACRuW,oBAAMvW,KAAK8d,QAAQ8I,kBAAkB,IACrC5mB,KAAK8d,QAAQ8I,mBAAqBzkB,OAAOkmB,YAAY,WAAcpkB,EAAMqkB,cAAiB,GAAG,IAGrG5K,EAAY9d,UAAU2oB,qBAAuB,WACzC,IAAIrG,EAAQliB,KAAK8d,QAAQoE,MACrB8F,EAAQhoB,KAAK8d,QAAQkK,MAErBQ,EAAY,CAAEnK,KAAM,CAAA,EAAOoK,MAAO,CAAA,EAAOrK,IAAK,CAAA,EAAOuF,OAAQ,CAAA,GAC7D+E,EAAiB1oB,KAAKuhB,UAAUrO,QAAQG,cAAc,IAAMoI,CAAiB,EAAE/C,wBAC9EwJ,EAAQwG,EAAetK,IAHH,GAG8Bjc,OAAOwmB,aACzDzG,EAAQwG,EAAetK,IAAMjc,OAAOwmB,cACrCH,EAAUpK,IAAM,CAAA,GAEf8D,EAASwG,EAAe/E,OAPJ,GAOmCxhB,OAAOwmB,aAC9DzG,EAAQwG,EAAe/E,OAASxhB,OAAOwmB,cACxCH,EAAU7E,OAAS,CAAA,GAElBqE,EAAQU,EAAerK,KAXH,GAW+Blc,OAAOymB,aAC1DZ,EAAQU,EAAerK,KAAOlc,OAAOymB,cACtCJ,EAAUnK,KAAO,CAAA,GAEhB2J,EAASU,EAAeD,MAfJ,GAekCtmB,OAAOymB,aAC7DZ,EAAQU,EAAeD,MAAQtmB,OAAOymB,cACvCJ,EAAUC,MAAQ,CAAA,GAEtBzoB,KAAKwoB,UAAYA,GAErB9K,EAAY9d,UAAU0oB,WAAa,WAC/BtoB,KAAKuoB,uBACL,IAkCQM,EACA9nB,EAEA+nB,EACAC,EACAC,EAtCJhpB,KAAKuhB,UAAUlM,YAEXrV,KAAKwoB,UAAUpK,KAAOpe,KAAKwoB,UAAU7E,OAEjCsF,EADAjpB,KAAK8d,QAAQuB,YACFrN,UAAQhS,KAAK8d,QAAQuB,YAAa,IAAMiD,CAAsB,EAG9DtQ,UAAQhS,KAAK8d,QAAQqC,aAAc,IAAMmC,CAAsB,GAGzEtiB,KAAKwoB,UAAUC,OAASzoB,KAAKwoB,UAAUnK,QAC5C4K,EAAWjpB,KAAKuhB,UAAUrO,QAAQG,cAAc,IAAMoI,CAAiB,GAEvEwN,IACIC,EAAgBD,EAASzJ,cAAgByJ,EAASE,aAClDC,EAAgBH,EAASpK,aAAeoK,EAASI,YACjDC,EAAkC,GAAtBL,EAASM,WAAkBN,EAASM,UAAYN,EAASzJ,cAAgByJ,EAASE,aAC9FK,EAAmC,GAAvBP,EAASQ,YAAmBR,EAASQ,WAAaR,EAASpK,aAAeoK,EAASI,YAC/FH,GAAiBI,IAActpB,KAAKwoB,UAAUpK,KAAOpe,KAAKwoB,UAAU7E,UACpEsF,EAASM,WAAavpB,KAAKwoB,UAAUpK,IAAM,IApB/B,IAsBZgL,IAAiBI,IAAcxpB,KAAKwoB,UAAUnK,MAAQre,KAAKwoB,UAAUC,UACzDzoB,KAAKK,OAAOsB,qBAAuB3B,KAAKuhB,UAAU9a,oBAC1DzG,KAAKuhB,UAAUta,cAD+DiR,YAEzDlY,KAAKuhB,UAAU5gB,QAAQG,OAAS,GACrDmoB,EAASQ,YACGzpB,KAAKwoB,UAAUnK,QAC3B4K,EAASQ,YAAczpB,KAAKwoB,UAAUnK,KAAO,CA5BrC,GAAA,MAkChBwK,EAAW7oB,KAAKuhB,UAAUrO,QAAQG,cAAc,IAAMoI,CAAiB,EACvE1a,EAASf,KAAK8d,QAAQuB,YAAY7G,cAClCkR,EAAcb,EAASrJ,cAAgBqJ,EAASM,aAChDL,EAAcD,EAAShK,aAAegK,EAASQ,YAC/CN,EAAUW,GAAqC,GAAtBb,EAASU,WAAkBV,EAASU,UAAYV,EAASrJ,cAAgBqJ,EAASM,aAC3GH,EAAUF,GAAsC,GAAvBD,EAASY,YAAmBZ,EAASY,WAAaZ,EAAShK,aAAegK,EAASQ,YAC5GN,IAAY/oB,KAAKwoB,UAAUpK,KAAOpe,KAAKwoB,UAAU7E,UACjDkF,EAASU,WAAavpB,KAAKwoB,UAAUpK,IAAM,CAzC3B,GAAA,GA0CZpe,KAAKK,OAAO6J,iBAAiByf,mBAC7B3pB,KAAK8d,QAAQkB,aAAahH,MAAMoG,IAAOpe,KAAKwoB,UAAUpK,IAAwFvc,SAAS7B,KAAK8d,QAAQkB,aAAahH,MAAMoG,IAAK,EAAE,EA3ClL,GA2C2M,KAA1Jvc,SAAS7B,KAAK8d,QAAQkB,aAAahH,MAAMoG,IAAK,EAAE,EA3CjG,GA2C0H,MAEtIrd,KACAA,EAAOwoB,WAAavpB,KAAKwoB,UAAUpK,IAAM,CA9C7B,GAAA,IAiDhB4K,IAAYhpB,KAAKwoB,UAAUnK,MAAQre,KAAKwoB,UAAUC,SAClDI,EAASY,YAAczpB,KAAKwoB,UAAUnK,KAAO,CAlD7B,GAAA,GAmDZtd,KACAA,EAAO0oB,YAAczpB,KAAKwoB,UAAUnK,KAAO,CApD/B,GAAA,IAuDhBre,KAAK8d,QAAQoE,MAAQ/f,OAAOigB,QAvDZ,GAwDhBjgB,OAAOynB,SAASznB,OAAO0nB,QAAS1nB,OAAOigB,QAxDvB,EAwDkD,EAE7DjgB,OAAOC,aAAepC,KAAK8d,QAAQoE,MAAQ/f,OAAOigB,SA1DvC,IA2DhBjgB,OAAOynB,SAASznB,OAAO0nB,QAAS1nB,OAAOigB,QA3DvB,EA2DkD,IAI9E1E,EAAY9d,UAAUkqB,iBAAmB,SAAU5W,GAC1CqD,oBAAMrD,CAAO,GAAMqD,oBAAMrD,EAAQ2Q,cAAc,EAAE,IAC9CkG,EAAe7W,EAAQ2Q,cAAc,KACrB,CAACkG,EAAaxjB,aAC9BwjB,EAAaC,WAhxB7B,IAAItM,GAoxBOA,EA7wBP,SAASA,EAAYrd,GACjBL,KAAKiiB,YAAc,WACnBjiB,KAAKK,OAASA,EACdL,KAAK8d,QAAU,CACX5K,QAAS,KAAM8L,aAAc,KAAMjB,SAAU,KAAMsB,YAAa,KAAMc,aAAc,KAAMhB,iBAAkB,KAC5GO,cAAe,GAAIsI,MAAO,EAAG9F,MAAO,EAAG0E,mBAAoB,KAAM/G,YAAa,GAAIrD,aAAc,IAEpGxc,KAAKwoB,UAAY,CAAEnK,KAAM,CAAA,EAAOoK,MAAO,CAAA,EAAOrK,IAAK,CAAA,EAAOuF,OAAQ,CAAA,GAClE3jB,KAAK+mB,WAAa,CAAA,EAClB/mB,KAAKqjB,eAAiB,CAAA,ECJ1B4G,EAAarqB,UAAU4U,WAAa,SAAUlQ,EAAQb,GAClDzD,KAAKsE,OAASA,EACdtE,KAAKK,OAAOuU,eAAenR,KAAOA,EAClCzD,KAAKkqB,aAAazmB,EAAMa,CAAM,EAC9BtE,KAAKmqB,UAAUC,QAEnBH,EAAarqB,UAAUyqB,YAAc,WACjCrqB,KAAKmqB,UAAUxL,QAEnBsL,EAAarqB,UAAUsqB,aAAe,SAAUpmB,EAAMQ,GAClDtE,KAAKkT,QAAUoG,gBAAc,MAAO,CAAE3F,GAAI3T,KAAKK,OAAO6S,QAAQS,GAAK,kBAAmB,EACtF3T,KAAKK,OAAO6S,QAAQmG,YAAYrZ,KAAKkT,OAAO,EACxCoX,EAAc,CACdC,QAASvqB,KAAKwqB,iBAAiBlmB,CAAM,EACrCmmB,QAASzqB,KAAK0qB,iBAAiB5mB,EAAMQ,CAAM,EAC3CqmB,SAAUC,GACVC,UAAW7qB,KAAKK,OAAOwqB,UACvBC,OAAQ9qB,KAAKK,OAAO+f,UAAUC,YAAuB,QAAX/b,EAAmB,WAAwB,SAAXA,EAAoB,YAAc,aAAa,EACzHtC,OAAQ,OACR+oB,QAAS,CAAA,EACTC,cAAe,CAAA,EACf/S,MAAmB,WAAX3T,EAAuB,IAAM,IACrC2mB,QAAS,CAAA,EACTC,WAAYlrB,KAAKmrB,mBAAmB5M,KAAKve,IAAI,EAC7CorB,YAAaprB,KAAKqrB,oBAAoB9M,KAAKve,IAAI,GAEnDA,KAAKmqB,UAAY,IAAImB,SAAO1nB,SAAO0mB,EAAwB,WAAXhmB,GAAuBtE,KAAKK,OAAOkrB,eAAeC,OAAe,EAAE,EAAGxrB,KAAKkT,OAAO,EACnH,WAAX5O,GACAtE,KAAKyrB,sBAETzrB,KAAKmqB,UAAUjX,QAAQG,cAAc,sBAAsB,EAAEqY,MAAQ1rB,KAAKK,OAAO+f,UAAUC,YAAY,OAAO,GAElH4J,EAAarqB,UAAU8qB,iBAAmB,SAAU5mB,EAAMQ,GACtD,GAAe,WAAXA,EACA,OAAOtE,KAAKK,OAAO+f,UAAUC,YAAY,eAAe,EAGxD,IAAIsL,EAAYrS,gBAAc,MAAO,CAAEC,UJqDnB,wBIrDsD,EACtEqS,EAAOtS,gBAAc,OAAQ,CAC7B3F,GAAI3T,KAAKK,OAAO6S,QAAQS,GAAK,WAC7B4F,UAAWsS,GAAgBnH,MAAO,CAAEoH,SAAU,iBACjD,EACD,GAAI9rB,KAAKK,OAAOkrB,eAAeQ,SAAU,CACjCjoB,IACA9D,KAAKgsB,oBACL,GAAGhZ,MAAMC,KAAK2Y,EAAKK,UAAU,EAAE/mB,QAAQ,SAAU2iB,GAAQ,OAAO7e,SAAO6e,CAAI,EAAI,GAEnF,IAAIqE,EAAalsB,KAAKK,OAAO6S,QAAQS,GAAK,kBACtCwY,EAAiBnsB,KAAKK,OAAO+rB,eAAepsB,KAAKK,OAAOkrB,eAAeQ,QAAQ,EAAEjoB,EAAM9D,KAAKK,OAAQ,iBAAkB6rB,EAAY,CAAA,CAAK,EAC3IG,SAAOF,EAAgBP,CAAI,EAC3B5rB,KAAKK,OAAO6G,sBAEX,CACD,IAAIolB,EAAgBhT,gBAAc,MAAO,CAAEC,UJuHrB,0BIvH8D,EAEhFgT,GADJX,EAAKvS,YAAYiT,CAAa,EAClBhT,gBAAc,OAAO,GACjCgT,EAAcjT,YAAYkT,CAAK,EAE/B,IALA,IAKS3rB,EAAK,EAAG4rB,EADExsB,KAAKysB,kBACwB7rB,EAAK4rB,EAAe1rB,OAAQF,CAAE,GAAI,CAC9E,IAAImJ,EAAQyiB,EAAe5rB,GACvB8rB,EAAKpT,gBAAc,IAAI,EAGvBqT,GAFJJ,EAAMlT,YAAYqT,CAAE,EACpBA,EAAGrT,YAAYC,gBAAc,KAAM,CAAEC,UAAW,UAAWC,UAAWzP,EAAMmP,MAAoBnP,EAAMyB,IAAK,CAAC,EACnG8N,gBAAc,IAAI,GAC3BoT,EAAGrT,YAAYsT,CAAE,EACjBA,EAAGtT,YAAYrZ,KAAK4sB,iBAAiB7iB,CAAK,CAAC,GAInD,OADA4hB,EAAUtS,YAAYuS,CAAI,EACnBD,GAGf1B,EAAarqB,UAAU6sB,gBAAkB,WACrC,IAAII,EAAS7sB,KAAKK,OAAOkrB,eAAesB,OAcxC,OAbsB,IAAlBA,EAAO/rB,SACP+rB,EAAS,CACL,CAAE3T,KAAM,KAAM1N,IAAKxL,KAAKK,OAAOkF,aAAaC,YAAaa,KAAM,WAC/D,CAAEmF,IAAKxL,KAAKK,OAAOW,SAAUqF,KAAM,YACnC,CAAEmF,IAAKxL,KAAKK,OAAOkF,aAAaunB,aAAczmB,KAAM,aAEpDrG,KAAKK,OAAOyJ,aAAaC,OACzB8iB,EAAOjnB,OAAOinB,EAAO/rB,OAAS,EAAG,EAAG,CAAE0K,IAAKxL,KAAKK,OAAOyJ,aAAaC,MAAO1D,KAAM,UAAW,EAE5FrG,KAAKK,OAAO6J,iBAAiBlJ,WAC7B6rB,EAAOjnB,OAAOinB,EAAO/rB,OAAS,EAAG,EAAG,CAAE0K,IAAKxL,KAAKK,OAAO6J,iBAAiBlJ,SAAUqF,KAAM,WAAY,EAGrGwmB,GAEX5C,EAAarqB,UAAU4qB,iBAAmB,SAAUlmB,GAChD,IACIyoB,EAA6B,WAAXzoB,EAAsB,cAAgB,kBACxD0oB,EAAgB,CAChB,CACIC,YAAa,CACTtC,SAAU,WALc,WAAXrmB,EAAsB,eAA4B,QAAXA,EAAmB,eAAiB,iBAK9C4oB,UAAW,CAAA,EACrDzC,QAASzqB,KAAKK,OAAO+f,UAAUC,YAAuB,QAAX/b,GAA+B,SAAXA,EAAoB,OAAS,KAAK,GAErG6oB,MAAOntB,KAAKotB,kBAAkB7O,KAAKve,IAAI,GACxC,CACCitB,YAAa,CACTtC,SAAU,UAAYoC,EAAiBG,UAAW,CAAA,EAClDzC,QAASzqB,KAAKK,OAAO+f,UAAUC,YAAuB,QAAX/b,GAA+B,SAAXA,EAAoB,SAAW,IAAI,GAEtG6oB,MAAOntB,KAAKotB,kBAAkB7O,KAAKve,IAAI,IAU/C,MAPe,SAAXsE,IACI+oB,EAAe,CACfJ,YAAa,CAAEtC,SAAU,yBAA0BuC,UAAW,CAAA,EAAOzC,QAASzqB,KAAKK,OAAO+f,UAAUC,YAAY,QAAQ,GACxH8M,MAAOntB,KAAKotB,kBAAkB7O,KAAKve,IAAI,GAE3CgtB,EAAcpnB,OAAO,EAAG,EAAGynB,CAAY,GAEpCL,GAEX/C,EAAarqB,UAAUgtB,iBAAmB,SAAU7iB,GAChD,IAIIujB,EACAC,EALAC,EAAUlU,gBAAc,MAAO,CAAEC,UAAWxP,EAAMyB,IAAM,WAAY,EACpE0H,EAAUoG,gBAAc,QAAS,CAAEC,UAAWkU,GAAiB/I,MAAO,CAAEgJ,KAAQ3jB,EAAMyB,KAAO,EAK7FmiB,GAJJH,EAAQnU,YAAYnG,CAAO,EAIVlT,KAAKK,OAAOuU,eAAenR,KACxCzD,KAAKK,OAAOuU,eAAenR,KAAKsG,EAAMyB,KAAO,MACjD,OAAQzB,EAAM1D,MACV,IAAK,WACD,GAAI0D,EAAMyB,MAAQxL,KAAKK,OAAOW,SAAU,CACpC,IAAI4sB,GAAc5tB,KAAKK,OAAOsB,qBAC1B3B,KAAKK,OAAOoG,oBAAiCzG,KAAKK,OAAO4G,cAAzB0b,WACpC,GAAqD,EAAjD3iB,KAAKK,OAAOuJ,aAAa0N,eAAexW,OAAY,CACpD8sB,EAAc,GACd,IAAK,IAAIvrB,EAAI,EAAGA,EAAIrC,KAAKK,OAAOM,QAAQG,OAAQuB,CAAC,IACvBrC,KAAKK,OAAOsB,qBAC9B3B,KAAKK,OAAOoG,oBACZzG,KAAKK,OAAO4G,cADoB4mB,gBAAgB7tB,KAAKK,OAAOM,QAAQ0B,EAAE,IAKlEurB,EAFuD,UAA3C,OAAO5tB,KAAKK,OAAOM,QAAQ0B,GAAGrB,SAE5B4sB,EAAYE,OAAO9tB,KAAKK,OAAOM,QAAQ0B,GAAGrB,SAASC,UAAU,EAG7D2sB,EAAYE,OAAO9tB,KAAKK,OAAOM,QAAQ0B,GAAGrB,SAASE,MAAM,GAAG,EAAE0S,IAAI,SAAU1N,GAAK,OAAOA,EAAE3E,OAAS,CAAC,GAKlI+rB,EAAkB,CAAExtB,WAAY8tB,EAAa3U,MAAO0U,GAAaA,EAAW1sB,iBAEvE8I,EAAMyB,MAAQxL,KAAKK,OAAO6J,iBAAiBlJ,WAChDssB,EAAkB,CACdxtB,WAAY,GAAGkT,MAAMC,MAAKjT,KAAKK,OAAOsB,qBAAuB3B,KAAKK,OAAOoG,oBACrEzG,KAAKK,OAAO4G,cAD6EkD,UACtD,EACvC0iB,OAAQ,CAAE3T,KAAM,YAAaD,MAAO,YAAcA,MAAO0U,IAGjEJ,EAAa,IAAIQ,eAAaT,CAAe,EAC7C,MACJ,IAAK,UACDC,EAAa,IAAIS,iBAAe,CAAE/U,MAAO0U,EAAY,EACrD,MACJ,IAAK,UACDJ,EAAa,IAAIU,UAAQ,CAAEhV,MAAO0U,EAAY,EAC1CA,GAAc3tB,KAAKK,OAAOkF,aAAaC,cAAgBuE,EAAMyB,MAC7D+hB,EAAWW,QAAU,CAAA,GAEzB,MACJ,IAAK,WACDllB,SAAOkK,CAAO,EACdib,EAAa7U,gBAAc,KAAK,EAChCpG,EAAUoG,gBAAc,WAAY,CAChCC,UAAWkU,GAAiB/I,MAAO,CAAEgJ,KAAQ3jB,EAAMyB,IAAKwZ,KAAQ,IAAKoJ,aAAcpuB,KAAKK,OAAOkF,aAAaunB,cAC5GtT,UAAWmU,EACd,EACDH,EAAQnU,YAAY8U,CAAU,EAAE9U,YAAYnG,CAAO,EAQ3D,OAHIqa,GACAA,EAAWc,SAASnb,CAAO,EAExBsa,GAEXvD,EAAarqB,UAAUurB,mBAAqB,SAAUrnB,GAClD,IAAIG,EAAQjE,KACRsuB,EAAY,CACZ7qB,KAAMzD,KAAKK,OAAOuU,eAAenR,KACjC6E,OAAQ,CAAA,EAAO4K,QAASlT,KAAKkT,QAC7B3H,OAAQvL,KAAKK,OAAOuU,eAAe1B,QACnCtQ,YAAa5C,KAAKsE,QAEtBtE,KAAKuuB,aAAehO,SAASiO,cACzB3sB,SAASiC,EAAK2qB,UAAW,EAAE,GAAK,MAChC3qB,EAAK2qB,UAAY,SAErBzuB,KAAKK,OAAOwE,QAAQ6pB,EAAmBJ,EAAW,SAAUK,GACxD7qB,EAAKwE,OAASqmB,EAASrmB,OACnBqmB,EAASrmB,QACTrE,EAAM+lB,UAEb,GAELC,EAAarqB,UAAUyrB,oBAAsB,SAAUvnB,GACnD,IAAIG,EAAQjE,KACR4uB,EAAa5uB,KAAK6uB,kBAClBxpB,EAAU,GAKd,GAJIvB,EAAKgrB,eAEL9uB,KAAK+uB,cAAgB,CAAA,GAErB,CAAC/uB,KAAK+uB,cACN,IAAK,IAAInuB,EAAK,EAAGouB,EAAeJ,EAAYhuB,EAAKouB,EAAaluB,OAAQF,CAAE,GAAI,CACxE,IAAIquB,EAAQD,EAAapuB,GACrBsuB,EAAaD,EAAMvB,MAAQ1tB,KAAKmvB,cAAcF,CAAK,EAClD1sB,oBAAkB2sB,CAAU,GAAoB,KAAfA,IAC9BjW,EAAQjZ,KAAKovB,oBAAoBH,CAAK,EACtCC,IAAelvB,KAAKK,OAAOkF,aAAaC,cACxCyT,EAA6B,WAArBjZ,KAAKqvB,YAA2BpW,EAAQpX,SAASoX,EAAO,EAAE,GAEtE5T,EAAQ6pB,GAAcjW,GAIlCjZ,KAAK+uB,cAAgB,CAAA,EAErB,IAAIT,EAAY,CAAE7qB,KAAM4B,EADdzB,SAAO5D,KAAKK,OAAOuU,eAAenR,KAAM4B,CAAO,EACxBiD,OAAQ,CAAA,EAAO4K,QAASlT,KAAKkT,QAAStQ,YAAa5C,KAAKsE,QACzFtE,KAAKK,OAAOwE,QAAQyqB,GAAoBhB,EAAW,SAAUiB,GACzDzrB,EAAKwE,OAASinB,EAAUjnB,OACnBinB,EAAUjnB,SACXrE,EAAM6X,SAAWwS,EAAU7qB,KAC3BQ,EAAM+lB,UACN/lB,EAAM5D,OAAOuJ,aAAaC,oBAAoB5F,EAAM6X,QAAQ,GAEnE,GAELmO,EAAarqB,UAAUyvB,UAAY,WAC/B,OAAsC,IAAlCrvB,KAAKK,OAAOD,WAAWU,OAChB,OAAQd,KAAKK,OAAOD,WAAW,GAAGJ,KAAKK,OAAOkF,aAAaC,aAE/D,UAEXykB,EAAarqB,UAAU6rB,oBAAsB,WAIzC,IAHA,IAAIxnB,EAAQjE,KACR4rB,EAAO5rB,KAAKkT,QAAQG,cAAc,IAAMwY,EAAc,EACtD2D,EAAQ,GACH5uB,EAAK,EAAGC,EAAKb,KAAKK,OAAOkrB,eAAesB,OAAQjsB,EAAKC,EAAGC,OAAQF,CAAE,GAAI,CAC3E,IAAImJ,EAAQlJ,EAAGD,GACf4uB,EAAMzlB,EAAMyB,KAAQzB,EAAM0lB,iBAA+D,EAA5C9kB,OAAOmX,KAAK/X,EAAM0lB,eAAe,EAAE3uB,OAAciJ,EAAM0lB,gBAAkB,KAE1HzvB,KAAK0vB,QAAU,IAAIC,gBAAc/D,EAAM,CACnC4D,MAAOA,EACPI,gBAAiB,SAAUC,EAAcloB,GACrC,IAAIgM,EAAKhM,EAAMqM,aAAa,KAAK,EACtB/P,EAAMiP,QAAQG,cAAc,IAAMM,EAAK,QAAQ,GAEtD1P,EAAM6rB,cAAcD,EAAcloB,EAAOgM,EAAI,EAAE,GAGvDoc,mBAAoB,SAAUjsB,GAC1B,IAAIksB,EAAO/rB,EAAMiP,QAAQG,cAAc,IAAMvP,EAAKmsB,UAAY,QAAQ,EAClED,IACAA,EAAKhY,MAAMkY,QAA2B,YAAhBpsB,EAAKqsB,OAAwB,GAAK,SAGnE,GAELlG,EAAarqB,UAAUkwB,cAAgB,SAAU5c,EAASvL,EAAO+lB,EAAMwC,GACnE,IAAIE,EAEAC,EAAcnd,EAAQsF,cAAcE,wBAGpC4X,GAFAtwB,KAAKkT,QAAQjB,UAAUC,SAAS0Y,EAAgB,GAChDwF,EAAapwB,KAAKkT,QACTlT,KAAKkT,SAGdkd,EAAapwB,KAAKkT,QAAQG,cAAc,iCAAiC,GAHnDqF,wBAMtB6X,EAAMjX,gBAAc,MAAO,CAC3BC,UAAW,0BAA4BiX,GACvC7c,GAAI+Z,EAAO,SACXnO,OAAQ,WAAa2Q,EAAU,SAC1BG,EAAY1M,OAAS2M,EAAOlS,IAAMgS,EAAW7G,UAAY,GAAK,YAC9D8G,EAAYhS,KAAOiS,EAAOjS,KAAO+R,EAAW3G,WAAa4G,EAAYpY,MAAQ,GAAK,MAC1F,EACGwS,EAAUnR,gBAAc,MAAO,CAAEC,UAAW,gBAAiB,EAE7DkX,GADJhG,EAAQpR,YAAY1R,CAAK,EACb2R,gBAAc,MAAO,CAAEC,UAAW,wBAAyB,GACvEkX,EAAMpX,YAAYC,gBAAc,MAAO,CAAEC,UAAW,8BAA+B,CAAC,EACpFkX,EAAMpX,YAAYC,gBAAc,MAAO,CAAEC,UAAW,8BAA+B,CAAC,EACpFgX,EAAIlX,YAAYoR,CAAO,EACvB8F,EAAIlX,YAAYoX,CAAK,EACrBL,EAAW/W,YAAYkX,CAAG,EAC1BA,EAAIvY,MAAMqG,KAAQxc,SAAS0uB,EAAIvY,MAAMqG,KAAM,EAAE,EAAIkS,EAAI1R,YAAc,EAAK,MAE5EoL,EAAarqB,UAAU8wB,eAAiB,WAChC1wB,KAAKkT,SACLlT,KAAKkT,QAAQC,iBAAiB,IAAMqd,EAA0B,EAAEtrB,QAAQ,SAAU2iB,GAAQ,OAAO7e,SAAO6e,CAAI,EAAI,EAEhH7nB,KAAK0vB,SAAW1vB,KAAK0vB,QAAQxc,SAC7BlT,KAAK0vB,QAAQiB,SAGrB1G,EAAarqB,UAAUwtB,kBAAoB,SAAUtY,GACjD,IAWgB8b,EAXZrlB,EAASuJ,EAAMvJ,OAAOslB,UAAU,CAAA,CAAI,EAKpCld,GAJCpR,oBAAkBuS,EAAMgc,OAAO,GAAuB,KAAlBhc,EAAMgc,UAE3CvlB,EADavL,KAAKmqB,UAAUjX,QAAQG,cAAc,oCAAoC,EACtEwd,UAAU,CAAA,CAAI,GAEzB7wB,KAAK0vB,QAAQxc,QAAQS,IAC1B4M,SAASwQ,eAAepd,CAAE,GAAK3T,KAAK0vB,QAAQsB,aAC3CzlB,EAAO0G,UAAUC,SAAS,eAAe,GAAK3G,EAAO0G,UAAUC,SAAS,cAAc,KACvFlS,KAAKmqB,UAAUxL,OACVpc,oBAAkBvC,KAAK8b,QAAQ,IAC5BvQ,EAAO0G,UAAUC,SAAS,eAAe,IAErC+e,EAAc,KAAA,GADdL,EAAa5wB,KAAKK,OAAOuU,gBAEdnR,KAAKzD,KAAKK,OAAOW,YAAchB,KAAK8b,SAAS9b,KAAKK,OAAOW,WACjE4vB,EAAW1d,UACd+d,EAAc,GAAGje,MAAMC,KAAK2d,EAAW1d,QAAQsF,cAAcyG,QAAQ,EAAElI,QAAQ6Z,EAAW1d,OAAO,GAEjGlT,KAAKK,OAAO6wB,qBACwD,UAAhE,OAAOlxB,KAAK8b,SAAS9b,KAAKK,OAAOkF,aAAaunB,gBAC9C9sB,KAAK8b,SAAS9b,KAAKK,OAAOkF,aAAaunB,cACnCqE,qBAAmBC,SAASpxB,KAAK8b,SAAS9b,KAAKK,OAAOkF,aAAaunB,aAAa,GAG5F9sB,KAAKK,OAAO+lB,WAAW9J,WAAWtc,KAAK8b,SAAUmV,CAAW,GAE5D1lB,EAAO0G,UAAUC,SAAS,cAAc,GACxClS,KAAKK,OAAO+lB,WAAWvK,QAAQ7b,KAAK8b,QAAQ,EAEhD9b,KAAKK,OAAOuJ,aAAaC,oBAAoB7J,KAAK8b,QAAQ,EAC1D9b,KAAK8b,SAAW,OAGnBvQ,EAAO0G,UAAUC,SAAS,eAAe,GAAM3G,EAAO0G,UAAUC,SAAS,cAAc,IACpF3G,EAAO0G,UAAUC,SAAS,iBAAiB,IAC3ClS,KAAK+uB,cAAgB,CAAA,GAEzB/uB,KAAKmqB,UAAUxL,OACXpT,EAAO0G,UAAUC,SAAS,cAAc,EACxClS,KAAKK,OAAO+lB,WAAW3J,WAAWzc,KAAKK,OAAOuU,eAAenR,IAAI,EAE5D8H,EAAO0G,UAAUC,SAAS,aAAa,EAC5ClS,KAAKwU,WAAW,OAAQxU,KAAKK,OAAOuU,eAAenR,IAAI,EAElD8H,EAAO0G,UAAUC,SAAS,iBAAiB,GAChDlS,KAAKwU,WAAW,SAAUxU,KAAKK,OAAOuU,eAAenR,IAAI,IAIrEwmB,EAAarqB,UAAUivB,gBAAkB,WAGrC,IAFA,IACIwC,EAAgB,GACXzwB,EAAK,EAAG0wB,EAFF,GAAGte,MAAMC,KAAKjT,KAAKkT,QAAQC,iBAAiB,IAAMsa,EAAe,CAAC,EAEzC7sB,EAAK0wB,EAAWxwB,OAAQF,CAAE,GAAI,CAClE,IAAIsS,EAAUoe,EAAW1wB,GACrBsS,CAAAA,EAAQjB,UAAUC,SAAS,WAAW,GAGjCgB,EAAQG,cAAc,YAAY,EACvCge,EAAc/vB,KAAK4R,EAAQG,cAAc,YAAY,CAAC,EAGtDge,EAAc/vB,KAAK4R,CAAO,EAGlC,OAAOme,GAEXpH,EAAarqB,UAAUuvB,cAAgB,SAAUjc,GAC7C,IAGQqe,EASAC,EAZJC,EAAWve,EAAQc,aAAa,WAAW,GAAK,GAoBpD,OAJYyd,EAfK,KAAbA,IACIC,EAAc,CAAA,EACdH,EAAgB,GAChBre,EAAQjB,UAAUC,SAAS,gBAAgB,GAAKgB,EAAQjB,UAAUC,SAAS,eAAe,GAC1Fqf,EAAgBre,EAAQjB,UAAUC,SAAS,gBAAgB,EAAI,QAAU,gBACzEwf,EAAc,CAAA,GAETxe,EAAQjB,UAAUC,SAAS,kBAAkB,IAClDqf,EAAgB,aAGhBC,EAAUxf,UAAQkB,EADFwe,EAAc,IAAMH,EAAgB,mBAAqB,IAAMA,CACvC,GAAKre,EAAQG,cAAc,IAAMke,CAAa,KAElFI,EAAUH,EAAQne,cAAc,QAAQ,GAE7Bse,EAAQjE,KAIxB+D,GAEXxH,EAAarqB,UAAUwvB,oBAAsB,SAAUlc,GAG/C+F,EADA/F,EAAQjB,UAAUC,SAAS,gBAAgB,GAGtCgB,EAAQjB,UAAUC,SAAS,eAAe,EACvCgB,EAAQ2Q,cAAc,GAAG5K,MAE5B/F,EAAQjB,UAAUC,SAAS,YAAY,EACpCgB,EAAQ2Q,cAAc,GAAG+N,QAGZ,aAAjB1e,EAAQ7M,KACA6M,EAAQ0e,QAGR1e,EAAQ+F,MAGxB,OAAOA,GAEXgR,EAAarqB,UAAUosB,kBAAoB,WAEvC,IADA,IACSprB,EAAK,EAAGixB,EADC7xB,KAAK6uB,kBACuBjuB,EAAKixB,EAAc/wB,OAAQF,CAAE,GAAI,CAC3E,IACImd,EADU8T,EAAcjxB,GACLijB,cACnB9F,GAA8B,EAAlBA,EAASjd,QACrBid,EAAS7Y,QAAQ,SAAU2iB,GAAQ,OAAOA,EAAKmC,UAAY,EAE3DhqB,KAAKK,OAAOyxB,SAAW9xB,KAAK0vB,SAC5B1vB,KAAK0vB,QAAQxc,QAAQlK,WAIjCihB,EAAarqB,UAAUoqB,QAAU,WAC7BhqB,KAAK0wB,iBACL1wB,KAAKgsB,oBACDhsB,KAAKmqB,YACLnqB,KAAKmqB,UAAUH,UACfhqB,KAAKuuB,aAAawD,QAClB/xB,KAAKmqB,UAAY,KACjBnhB,SAAOhJ,KAAKkT,OAAO,EACnBlT,KAAKkT,QAAU,OA7b3B,IAAI+W,GAgcOA,EA1bP,SAASA,EAAa5pB,GAClBL,KAAK+uB,cAAgB,CAAA,EACrB/uB,KAAKK,OAASA,ECsBlB2xB,EAASpyB,UAAUqyB,iBAAmB,SAAU/rB,GAC5C,IAAIjC,EAAQjE,KACR0U,EAAe1U,KAAKK,OAAO6S,QAAQC,iBAAiB,WAA6B6B,CAAwB,EAAEqG,KAAK,CAAC,EACrH,GAAK3G,GAAiB1C,UAAQuO,SAASiO,cAAe,IAAMzN,EAAc,EAA1E,CAGA,IAqCoBmR,EACAvY,EApChBQ,EAAoB,GACxB,OAAQjU,EAAE5B,QACN,IAAK,UACL,IAAK,YACL,IAAK,0BACL,IAAK,4BACD4B,EAAEisB,iBACFnyB,KAAKoyB,mBAAmBlsB,EAAE5B,OAAQoQ,CAAY,EAC9C,MACJ,IAAK,aACL,IAAK,YACD1U,KAAKqyB,sBAAsBnsB,CAAC,EAC5B,MACJ,IAAK,qBACL,IAAK,oBACDlG,KAAKsyB,qBAAqBpsB,EAAE5B,OAAQoQ,CAAY,EAChD,MACJ,IAAK,sBACL,IAAK,sBACG6L,SAASiO,eACTxuB,KAAKK,OAAOuJ,aAAa6L,cAAc8K,SAASiO,cAAe,CAAA,EAAM,CAAA,CAAK,EAE9E,MACJ,IAAK,QACL,IAAK,QACDxuB,KAAKuyB,aAAarsB,EAAGwO,CAAY,EACjC,MACJ,IAAK,UACG6L,SAASiO,cAAcvc,UAAUC,SAASC,CAAc,GACxDoO,SAASiO,cAAcvc,UAAUC,SAASU,CAAmB,KACzD2N,SAASiO,cAAcvc,UAAUC,SAAS8C,CAAwB,GAClEC,cAAY,CAACsL,SAASiO,eAAgBxZ,CAAwB,EAC9DuL,SAASiO,cAAcuD,UAGnBG,EAAMlgB,UAAQuO,SAASiO,cAAe,IAAMza,CAAuB,EACnE4F,EAAQ,GAAG3G,MAAMC,KAAKif,EAAI/e,iBAAiB,IAAMhB,CAAc,CAAC,EACpE8C,cAAY0E,EAAO3E,CAAwB,EAC3Ckd,EAAIH,QACJ/xB,KAAKsS,qBACLtS,KAAK8V,kBAAkB,KAAK,IAGpC,MACJ,IAAK,MACL,IAAK,WACDqL,EAAcnP,UAAQuO,SAASiO,cAAe,IAAMza,CAAuB,EACvEwM,SAASiO,cAAcvc,UAAUC,SAASC,CAAc,IACnDoO,SAASiO,cAActa,oBAAmC,QAAbhO,EAAE5B,QAChD4B,EAAEisB,iBAEF,CAAC5R,SAASiO,cAAcja,yBAA0B4M,EAAY9N,cAAc,IAAMT,CAAmB,GACrF,QAAb1M,EAAE5B,QACL0S,WAAS,CAACmK,EAAY9N,cAAc,IAAMT,CAAmB,GAAI4f,EAAkB,EAGvFjS,CAAAA,SAASiO,cAAcvc,UAAUC,SAASU,CAAmB,IACvDuO,EAAY9N,cAAc,IAAMlB,CAAc,GAAkB,QAAbjM,EAAE5B,SAAkC,aAAb4B,EAAE5B,QAC9E4B,EAAEisB,iBAGN5R,SAASiO,cAAcvc,UAAUC,SAAS6O,EAAc,IACxD/gB,KAAKsS,qBACLtS,KAAKK,OAAOgS,eAAeyD,kBAAkB,KAAK,GAEtD,MACJ,IAAK,SACe,GAAG9C,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,WAA6B6B,CAAwB,CAAC,EAC3G9P,QAAQ,SAAUutB,GAAYtY,EAAkB7Y,KAAK2C,EAAM5D,OAAOiU,eAAeme,CAAQ,CAAC,EAAI,EAC5GzyB,KAAKK,OAAO+lB,WAAW3J,WAAWtC,CAAiB,KAI/D6X,EAASpyB,UAAU0yB,qBAAuB,SAAUhuB,EAAQoQ,GACpDA,IACAO,cAAY,CAACP,GAAeM,CAAwB,GAChDhV,KAAKK,OAAOsB,qBACZ3B,KAAKK,OAAOoG,oBAGZzG,KAAKK,OAAO4G,cAHoBiO,0BAA0BR,CAAY,GAKtEge,EAAY1yB,KAAKK,OAAOuJ,aAAaqQ,gBAC/BrU,OAAO8sB,EAAU3b,QAAQrC,EAAaV,aAAa,SAAS,CAAC,EAAG,CAAC,GAE/EhU,KAAKsS,qBAXL,IAYIqH,EAAQ,GAAG3G,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAMhB,CAAc,CAAC,EAChFe,EAAqB,uBAAX5O,EAAkCqV,EAAM,GAAKA,EAAMA,EAAM7Y,OAAS,GAChFd,KAAKK,OAAOuJ,aAAa6L,cAAcvC,EAAS,CAAA,EAAO,CAAA,CAAK,EAC5DlT,KAAK8V,kBAAkB,QAAQ,EAC/B5C,EAAQ6e,QACG,GAAG/e,MAAMC,KAAKjB,UAAQkB,EAAS,IAAMa,CAAuB,EAAEZ,iBAAiB,IAAMhB,CAAc,CAAC,EAC1GjN,QAAQ,SAAUgO,GAAWA,EAAQ2C,aAAa,WAAY,GAAG,EAAI,GAE9Emc,EAASpyB,UAAUyyB,sBAAwB,SAAUnsB,GAC7Cqa,SAASiO,cAAcvc,UAAUC,SAAS6B,CAAuB,IAChD,eAAb7N,EAAE5B,QAA2Bic,SAASiO,cAActa,mBACpDqM,SAASiO,cAActa,mBAAmB6d,QAExB,cAAb7rB,EAAE5B,QAA0Bic,SAASiO,cAAcja,wBACxDgM,SAASiO,cAAcja,uBAAuBwd,UAI1DC,EAASpyB,UAAUwyB,mBAAqB,SAAU9tB,EAAQoQ,GACtD,IA+BQT,EA/BO,YAAX3P,GAAwBic,SAASiO,eAC7BjO,SAASiO,cAAcvc,UAAUC,SAASC,CAAc,GAAKoO,SAASiO,cAAcja,uBACpFgM,SAASiO,cAAcja,uBAAuBwd,QAEzCxR,SAASiO,cAAcvc,UAAUC,SAASU,CAAmB,IAClE2N,SAASiO,cAAc3Y,aAAa,WAAY,IAAI,EACpDZ,cAAY,CAACsL,SAASiO,eAAgBgE,EAAkB,EAEC,GADrD5c,EAAO5D,UAAQuO,SAASiO,cAAe,IAAMza,CAAuB,GAC/DZ,iBAAiB,IAAMhB,CAAc,EAAErR,SAC5C,GAAGkS,MAAMC,KAAK2C,EAAKzC,iBAAiB,IAAMhB,CAAc,CAAC,EAAEa,MAAM,CAAC,CAAC,EAAE,GAAG+e,QAGhF/xB,KAAK2yB,mBAEW,cAAXruB,GAA0Bic,SAASiO,eACxCjO,SAASiO,cAAcvc,UAAUC,SAASC,CAAc,IACpDoO,SAASiO,cAActa,mBACvBqM,SAASiO,cAActa,mBAAmB6d,QAErC/f,UAAQuO,SAASiO,cAAe,IAAMlM,CAAsB,EAAEpO,sBAC/Dge,EAAMlgB,UAAQuO,SAASiO,cAAe,IAAMlM,CAAsB,EAAEpO,oBACpE2B,aAAa,WAAY,GAAG,EAChCmB,WAAS,CAACkb,GAAMM,EAAkB,EAClCN,EAAIH,SAER/xB,KAAK2yB,oBAEO,4BAAXruB,GAAmD,8BAAXA,IACtCoQ,GAA2D,aAA3C1U,KAAKK,OAAOkF,aAAasU,gBACxC5F,EAAO,KAAA,EAOPA,EANW,4BAAX3P,EACOic,SAASiO,cAAcja,uBAGvBgM,SAASiO,cAActa,sBAG9BlU,KAAKK,OAAOuJ,aAAa6L,cAAcxB,EAAM,CAAA,EAAO,CAAA,CAAI,EACxDA,EAAK8d,QACL/xB,KAAK4yB,eAAiB,CAAA,IAIlCZ,EAASpyB,UAAU+yB,gBAAkB,WACjC,IACQhZ,EADJ3Z,KAAK4yB,iBAEc,GADfjZ,EAAQ3Z,KAAKK,OAAOuZ,oBACd9Y,SACNmU,cAAY0E,EAAO3E,CAAwB,GACvChV,KAAKK,OAAOsB,qBACZ3B,KAAKK,OAAOoG,oBAGZzG,KAAKK,OAAO4G,cAHoBiO,0BAA0ByE,CAAK,GAMvE3Z,KAAK4yB,eAAiB,CAAA,IAG9BZ,EAASpyB,UAAU0S,mBAAqB,WACxB,GAAGU,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAMhB,CAAc,CAAC,EAC9EjN,QAAQ,SAAU+O,GAAQA,EAAK4B,aAAa,WAAY,IAAI,EAAI,EACtD,GAAG7C,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAMP,CAAmB,CAAC,EACnF1N,QAAQ,SAAU4a,GACxBA,EAAIjK,aAAa,WAAY,IAAI,EACjCZ,cAAY,CAAC6K,GAAM0S,EAAkB,EACxC,GAELR,EAASpyB,UAAU2yB,aAAe,SAAUrsB,EAAGwO,GAC1B,UAAbxO,EAAE5B,QACF4B,EAAEisB,iBAEN,IAAIjf,EAAWhN,EAAQ,OACnBgN,EAAQjB,UAAUC,SAASK,EAAqB,GAChDvS,KAAKK,OAAOuJ,aAAa4I,qBAAqBtM,CAAC,GAE/CgN,EAAQjB,UAAUC,SAASuB,EAA6B,GAAKP,EAAQjB,UAAUC,SAASsB,CAA+B,IACvHxT,KAAKK,OAAOuJ,aAAa+I,kBAAkBzM,CAAC,EAE5Cqa,SAASiO,cAAcvc,UAAUC,SAASC,CAAc,GACxDnS,KAAKK,OAAOuJ,aAAa6L,cAAc8K,SAASiO,cAAe,CAAA,EAAO,CAAA,CAAK,EAE3EjO,SAASiO,cAAcvc,UAAUC,SAASU,CAAmB,IACxD5S,KAAKK,OAAO6V,aAAaiU,WAC1BnqB,KAAKK,OAAOuJ,aAAaiJ,eAAe0N,SAASiO,aAAa,EAElEjO,SAASiO,cAAcuD,SAEvB7e,EAAQjB,UAAUC,SAAS6B,CAAuB,IAC9C4F,EAAQ,GAAG3G,MAAMC,KAAKC,EAAQC,iBAAiB,IAAMhB,CAAc,CAAC,EACxEnS,KAAK8V,kBAAkB,QAAQ,EACZ,EAAf6D,EAAM7Y,SACNoS,EAAQG,cAAc,IAAMlB,CAAc,EAAE4f,QAC5CpY,EAAMzU,QAAQ,SAAUgO,GAAWA,EAAQ2C,aAAa,WAAY,GAAG,EAAI,GAE3E3C,EAAQG,cAAc,IAAMT,CAAmB,KAC/CM,EAAQG,cAAc,IAAMT,CAAmB,EAAEiD,aAAa,WAAY,GAAG,EAC7E3C,EAAQG,cAAc,IAAMT,CAAmB,EAAEmf,SAGrDrd,IAAiB6L,SAASiO,eAAiG,IAAhFxuB,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAM6B,CAAwB,EAAElU,SAChHd,KAAKK,OAAOuU,eAAiB,CACzBnR,KAAMzD,KAAKK,OAAOiU,eAAeI,CAAY,EAAGxB,QAASwB,GAExD1U,KAAKK,OAAO6V,aAAaiU,WAC1BnqB,KAAKK,OAAO6V,aAAa1B,WAAW,OAAQxU,KAAKK,OAAOiU,eAAeI,CAAY,CAAC,EAExFA,EAAaqd,UAGrBC,EAASpyB,UAAUkW,kBAAoB,SAAUxR,GAC7C,IAAIuuB,EAAuB,QAAXvuB,EAAmB,IAAM,KACrCwuB,EAAa,GAAG9f,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAMZ,EAAqB,CAAC,EAI5FwgB,GAHoB,EAApBD,EAAWhyB,QACXgyB,EAAW5tB,QAAQ,SAAUgO,GAAWA,EAAQ2C,aAAa,WAAYgd,CAAS,EAAI,EAEvE,GAAG7f,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAMM,EAA6B,CAAC,GAChF,EAAtBsf,EAAajyB,QACbiyB,EAAa7tB,QAAQ,SAAUgO,GAAWA,EAAQ2C,aAAa,WAAYgd,CAAS,EAAI,EAG1E,GAAG7f,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBADpC,sDAC8D,CAAC,EACnEjO,QAAQ,SAAUgO,GAAWA,EAAQ2C,aAAa,WAAYgd,CAAS,EAAI,GAE3Fb,EAASpyB,UAAUoqB,QAAU,WACzBhqB,KAAKqS,eAAe2X,WA/Q5B,IAAIgI,GAiROA,EA3QP,SAASA,EAAS3xB,GACdL,KAAKgzB,WAAa,CACdC,mBAAoB,KACpBnY,kBAAmB,KACnBoY,QAAS,KACTC,UAAW,KACXC,WAAY,KACZC,UAAW,KACXC,oBAAqB,UACrBC,oBAAqB,UACrBC,wBAAyB,WACzBC,0BAA2B,WAC3BC,SAAU,YACVC,MAAO,KACPC,IAAK,MACLC,OAAQ,KACRC,OAAQ,KACRC,MAAO,MAEX/zB,KAAKK,OAASA,EACdL,KAAKK,OAAO6S,QAAQ8gB,SAA4C,CAAC,IAAlCh0B,KAAKK,OAAO6S,QAAQ8gB,SAAkB,EAAIh0B,KAAKK,OAAO6S,QAAQ8gB,SAC7Fh0B,KAAKqS,eAAiB,IAAI4hB,iBAAej0B,KAAKK,OAAO6S,QAAS,CAC1DghB,UAAWl0B,KAAKiyB,iBAAiB1T,KAAKve,IAAI,EAC1CgzB,WAAYhzB,KAAKgzB,WACjBmB,UAAW,UACd,EACDn0B,KAAK4yB,eAAiB,CAAA,ECrB1BwB,GAAcx0B,UAAUy0B,cAAgB,WACpCr0B,KAAKkoB,WAAa,IAAIoM,UAAQ,CAC1B3J,SAAU3qB,KAAKK,OAAOsqB,SN2HP,oBM1HfE,UAAW7qB,KAAKK,OAAOwqB,UACvB0J,WAAY,CAACv0B,KAAKK,OAAOgV,WACzBmf,QAAS,EACTlrB,SAAU,eACVmrB,eAAgB,CAAA,EAChBlpB,OAAQ,IAAMmpB,GACdC,aAAc30B,KAAK40B,eAAerW,KAAKve,IAAI,EAC3CorB,YAAaprB,KAAK60B,cAActW,KAAKve,IAAI,EAC5C,EACDA,KAAKkoB,WAAWmG,SAASruB,KAAKK,OAAO6S,OAAO,EAC5ClT,KAAKkoB,WAAW4M,iBAAmB,CAAA,GAEvCV,GAAcx0B,UAAUg1B,eAAiB,SAAU9wB,GAC/C,IAMIixB,EAGI7I,EACA8I,EAVJh1B,KAAKK,OAAO40B,kBAAkBlO,WAC9BjjB,EAAKwE,OAAS,CAAA,GAIdtI,KAAKK,OAAO20B,iBACZD,EAAiBzb,gBAAc,KAAK,EAChC/N,EAASyG,UAAQlO,EAAKyH,OAAQ,IAAM4G,CAAc,EAClD1O,EAAOzD,KAAKK,OAAOiU,eAAe/I,CAAM,EACxC2gB,EAAalsB,KAAKK,OAAO6S,QAAQS,GAAK,mBACtCqhB,EAAkBh1B,KAAKK,OAAO+rB,eAAepsB,KAAKK,OAAO20B,eAAe,EAAEvxB,EAAMzD,KAAKK,OAAQ,kBAAmB6rB,EAAY,CAAA,CAAK,EACrIG,SAAO2I,EAAiBD,CAAc,EACtC/0B,KAAKK,OAAO6G,mBAGZ6tB,EAAiBG,wBAAsB,WACnC,MAAO,sCAA0CpxB,EAAKyH,OAAO4pB,UAAY,SAC5E,EAELn1B,KAAKkoB,WAAWtP,cAAc,CAAE6R,QAASsK,GAAkB,CAAA,CAAI,IAEnEX,GAAcx0B,UAAUi1B,cAAgB,WACpC70B,KAAKK,OAAO+0B,eAAe,CAAC,kBAAkB,GAElDhB,GAAcx0B,UAAUoqB,QAAU,WAC9BhqB,KAAKkoB,WAAW8B,UAChBhT,WAAS,CAAChX,KAAKK,OAAO6S,SAAU,WAAW,EAC3ClT,KAAKkoB,WAAa,MArD1B,IAAIkM,GAuDOA,GAjDP,SAASA,GAAc/zB,GACnBL,KAAKK,OAASA,EACdL,KAAKq0B,gBCGTgB,EAAYz1B,UAAU01B,gBAAkB,WACpCt1B,KAAKkT,QAAUlT,KAAKK,OAAO6S,QAAQG,cAAc,IAAMoI,CAAiB,EACxEzb,KAAKu1B,SAAW,IAAIC,QAAMx1B,KAAKkT,QAAS,CAAEuiB,QAASz1B,KAAK01B,eAAenX,KAAKve,IAAI,EAAG,GAEvFq1B,EAAYz1B,UAAU81B,eAAiB,SAAUxvB,GAC7ClG,KAAKwV,QAAU,CAAA,EACXjK,EAASyG,UAAQ9L,EAAEyvB,cAAcpqB,OAAQ,IAAM4G,CAAc,EAC7D5G,GAAqD,aAA3CvL,KAAKK,OAAOkF,aAAasU,gBACnC7Z,KAAKK,OAAOuJ,aAAa6L,cAAclK,EAAQ,CAAA,EAAM,CAAA,CAAK,EACrDvL,KAAKuV,cACNvV,KAAK41B,oBACL51B,KAAKuV,YAAY6U,QAErBpqB,KAAK2V,uBAGb0f,EAAYz1B,UAAUg2B,kBAAoB,WACtC,IAmBQC,EACAC,EApBuC,aAA3C91B,KAAKK,OAAOkF,aAAasU,gBACrBkc,EAAqBzc,gBAAc,MAAO,CAC1CC,UAAWyc,uCACXxc,UAAW,8CAAmEyc,GACzE,gCAAkBC,GAA0B,WACpD,EACD3V,SAASC,KAAKnH,YAAY0c,CAAkB,EAC5C/e,WAAS,CAAC+e,GAAqBI,EAAgB,EAC/Cn2B,KAAKuV,YAAc,IAAI6gB,QAAML,EAAoB,CAC7CM,WAAY,YACZxL,UAAW7qB,KAAKK,OAAOwqB,UACvByL,cAAe,CAAE5I,KAAM,WACvB6I,cAAe,CAAE7I,KAAM,UACvB8I,UAAW,CAAEC,EAAG,MAAOC,EAAG,OAC1BptB,SAAU,CAAEmtB,EAAG,OAAQC,EAAG,OAC1BC,gBAAiBpW,SAASC,KAC1BoW,OAAQ,KACRzO,MAAOnoB,KAAK62B,WAAWtY,KAAKve,IAAI,EACnC,EACG61B,EAAY71B,KAAKuV,YAAYrC,QAAQG,cAAc,IAAM4iB,EAAe,GACxEH,EAAY,IAAIgB,SAAO,CACvBnM,SAAU,yBACVE,UAAW7qB,KAAKK,OAAOwqB,UACvBkM,QAASzjB,GPkIK,gBOjIjB,GACS+a,SAASwH,CAAS,EAC5BC,EAAUhB,iBAAmB,CAAA,EAC7BxU,eAAaR,IAAI+V,EAAW,QAAS71B,KAAKg3B,WAAYh3B,IAAI,IAGlEq1B,EAAYz1B,UAAUq3B,gBAAkB,WACpC,IAAIC,EACAxX,EAAgB1f,KAAKK,OAAOuZ,mBAOhC,OAN2B,EAAvB8F,EAAc5e,OACdo2B,EAAe,IAAMxX,EAAc5e,OAAS,KAAOd,KAAKK,OAAO+f,UAAUC,YAAY,eAAe,EAEtE,IAAzBX,EAAc5e,SACnBo2B,EAAe,IAAMl3B,KAAKK,OAAOiU,eAAeoL,EAAc,EAAE,EAAE1f,KAAKK,OAAOkF,aAAaC,cAExF0xB,GAEX7B,EAAYz1B,UAAU+V,mBAAqB,WACvC,IAGIuhB,EAHCl3B,KAAKuV,eAGN2hB,EAAel3B,KAAKi3B,mBAEpBj3B,KAAKuV,YAAYrC,QAAQG,cAAc,IAAM6iB,EAAuB,EAAEiB,YAAcD,EAGpFl3B,KAAKuV,YAAYoJ,SAGzB0W,EAAYz1B,UAAUo3B,WAAa,WAC/Bh3B,KAAKK,OAAOiV,YAAYC,YAAYoJ,QAExC0W,EAAYz1B,UAAUi3B,WAAa,WAC/B72B,KAAKo3B,gBAET/B,EAAYz1B,UAAUw3B,aAAe,WACjC,IACQrZ,EADJ/d,KAAKuV,aAAevV,KAAKuV,YAAYrC,WACjC6K,EAAW/d,KAAKuV,YAAYrC,QAAQG,cAAc,kBAAkB,EAAEwQ,cAAc,KAEpF9F,EAASiM,UAEbhqB,KAAKuV,YAAYyU,UACjBhhB,SAAOhJ,KAAKuV,YAAYrC,OAAO,EAC/BlT,KAAKuV,YAAc,OAG3B8f,EAAYz1B,UAAUy3B,kBAAoB,WAClCr3B,KAAKu1B,UACLv1B,KAAKu1B,SAASvL,UAElBhqB,KAAKu1B,SAAW,KAChBv1B,KAAKkT,QAAU,MAEnBmiB,EAAYz1B,UAAUoqB,QAAU,WAC5BhqB,KAAKo3B,eACLp3B,KAAKq3B,oBACLr3B,KAAKwV,QAAU,CAAA,GA5GvB,IAAI6f,GA8GOA,EAvGP,SAASA,EAAYh1B,GACjBL,KAAKK,OAASA,EACdL,KAAKwV,QAAU,CAAA,ECHnB8hB,GAAa13B,UAAU23B,qBAAuB,WAC1C,IAAIC,EAAiBle,gBAAc,MAAO,CACtCC,UAAWke,EACXje,UAAW,eAAiBke,GACxB,qDAA2BC,GAC3B,gEAAmBC,GAAkC,uBAC5D,EACD53B,KAAKK,OAAO6S,QAAQmG,YAAYme,CAAc,EAC9ClX,eAAaR,IAAI0X,EAAenkB,cAAc,IAAMskB,EAA2B,EAAG,QAAS33B,KAAK63B,UAAW73B,IAAI,GAEnHs3B,GAAa13B,UAAUk4B,mBAAqB,WACxC,IAAI91B,EAAShC,KAAKK,OAAO6S,QAAQG,cAAc,IAAMokB,CAAyB,EAAEjY,aAC5EuY,EAAa51B,OAAOC,YAAcJ,EAElCwrB,GADJxtB,KAAKg4B,aAAe1e,gBAAc,MAAO,CAAEC,UAAW0e,GAA4B1Y,OAAQ,WAAawY,EAAa,MAAO,EAC7Gze,gBAAc,MAAO,CAAEC,UAAW2e,GAA4B3Y,OAAQ,OAASvd,EAAS,MAAO,GACzGm2B,EAAc7e,gBAAc,MAAO,CACnCC,UAAW6e,GAA8B,iBAAkB7Y,OAAQ,WAAawY,EAAa,MAChG,EAIGM,GAHJ7K,EAAQnU,YAAY8e,CAAW,EAC/B3K,EAAQnU,YAAYrZ,KAAKg4B,YAAY,EACrCh4B,KAAKK,OAAO6S,QAAQmG,YAAYmU,CAAO,EACpBlU,gBAAc,MAAO,CAAEC,URoIjB,kBQpIqD,GAE1EzZ,GADJq4B,EAAY9e,YAAYgf,CAAY,GACnBr4B,KAAKK,OAAOsB,qBACzB3B,KAAKK,OAAOoG,oBAAiCzG,KAAKK,OAAO4G,cAAzBkD,YAchCmuB,GAbJt4B,KAAKu4B,YAAc,IAAIC,WAAS,CAC5B7N,SAAU3qB,KAAKK,OAAOsqB,SACtBE,UAAW7qB,KAAKK,OAAOwqB,UACvBgC,OAAQ,CACJ/sB,WAAYA,EACZ6T,GAAI,WACJuF,KAAM,aAEVuf,aAAcz4B,KAAKK,OAAO6J,iBAAiB6hB,SAC3C2M,YAAa14B,KAAK24B,kBAAkBpa,KAAKve,IAAI,EAC7C44B,SAAU54B,KAAK44B,SAASra,KAAKve,IAAI,EACpC,EACDA,KAAKu4B,YAAYlK,SAASgK,CAAY,EACvB,CACXhC,WAAY,WACZwC,eAAgB,OAChBhO,UAAW7qB,KAAKK,OAAOwqB,UACvB+L,OAAQ,GACRN,cAAe,CAAE5I,KAAM,eAAgBoL,SAAU,KACjDvC,cAAe,CAAE7I,KAAM,cAAeoL,SAAU,KAChDnC,gBAAiB32B,KAAKK,OAAO6S,QAAQG,cAAc,IAAMoI,CAAiB,IAE9E6c,EAAS7N,QAAUzqB,KAAKu4B,YAAYrlB,QACpClT,KAAK+4B,UAAY,IAAI3C,QAAM+B,EAAaG,CAAQ,GAEpDhB,GAAa13B,UAAUi4B,UAAY,WAC/B,IAKQmB,EALJh5B,KAAKK,OAAO6S,QAAQG,cAAc,IAAM+kB,EAA2B,EAAEnmB,UAAUC,SAAS,cAAc,GACtGlS,KAAK+4B,UAAUpa,OACf1J,cAAY,CAACjV,KAAKg4B,cAAe,UAAU,IAGvCgB,EAAY,GAAGhmB,MAAMC,KAAKjT,KAAKu4B,YAAYrlB,QAAQC,iBAAiB,cAAc,CAAC,EACvF8B,cAAY+jB,EAAW,UAAU,EACjChiB,WAAS,CAACgiB,EAAUh5B,KAAKK,OAAO4G,aAAamgB,gBAAiB,UAAU,EACxEpnB,KAAK+4B,UAAU3O,OACfpT,WAAS,CAAChX,KAAKg4B,cAAe,UAAU,IAGhDV,GAAa13B,UAAU+4B,kBAAoB,SAAU70B,GACjD9D,KAAK+4B,UAAUpa,OACf,IAAIqa,EAAY,GAAGhmB,MAAMC,KAAKjT,KAAKu4B,YAAYrlB,QAAQC,iBAAiB,cAAc,CAAC,EACvFnT,KAAKK,OAAO4G,aAAamgB,cAAgB4R,EAAUjiB,QAAQjT,EAAK+jB,IAAI,EACpE7nB,KAAKK,OAAO4G,aAAawiB,WAAa,EACtCzpB,KAAKK,OAAOuG,OAAOC,EAAkB,CAAEC,cAAe9G,KAAKK,OAAOD,WAAY,EAC9E0D,EAAKgR,MAAMqd,kBAEfmF,GAAa13B,UAAUq5B,UAAY,WAC/Bj5B,KAAK+4B,UAAUpa,OACf1J,cAAY,CAACjV,KAAKg4B,cAAe,UAAU,GAE/CV,GAAa13B,UAAUsY,SAAW,WAC9B,OAA4B,GAApB/V,OAAO+2B,WAAmB,KAEtC5B,GAAa13B,UAAUg5B,SAAW,SAAU90B,GAExC,IAEQq1B,EAFJn5B,KAAKK,OAAO6J,iBAAiB6hB,UAAY/rB,KAAKK,OAAOyxB,UACjD5F,EAAalsB,KAAKK,OAAO6S,QAAQS,GAAK,oBACtCwlB,EAAmBn5B,KAAKK,OAAO+rB,eAAepsB,KAAKK,OAAO6J,iBAAiB6hB,QAAQ,EAAEjoB,EAAKs1B,SAAUp5B,KAAKK,OAAQ,eAAgB6rB,EAAY,CAAA,CAAK,EACtJG,SAAO8M,EAAkBr1B,EAAK+jB,KAAKxU,cAAc,cAAc,CAAC,IAvFxEikB,GA0FOA,GAzFP,SAASA,GAAaj3B,GAClBL,KAAKK,OAASA,ECVdmK,GAAgB,SAAUC,EAAGC,GAI7B,OAHAF,GAAgBG,OAAOC,iBAClB,CAAEC,UAAW,cAAgBlC,MAAS,SAAU8B,EAAGC,GAAKD,EAAEI,UAAYH,GACvE,SAAUD,EAAGC,GAAK,IAAK,IAAII,KAAKJ,EAAOA,EAAEK,eAAeD,CAAC,IAAGL,EAAEK,GAAKJ,EAAEI,OACpDL,EAAGC,CAAC,IAEtB,SAAUD,EAAGC,GAEhB,SAASQ,IAAOlL,KAAKmL,YAAcV,EADnCD,GAAcC,EAAGC,CAAC,EAElBD,EAAE7K,UAAkB,OAAN8K,EAAaC,OAAOS,OAAOV,CAAC,GAAKQ,EAAGtL,UAAY8K,EAAE9K,UAAW,IAAIsL,KAazEmuB,EAD8BruB,GAyoC1CssB,EAxoCgC,EAc9B+B,EAAaz5B,UAAU05B,WAAa,WAChC,IAkBIxO,EAlB+B,IAA/B9qB,KAAKK,OAAOM,QAAQG,SAGxBd,KAAKuJ,WAAavJ,KAAKwJ,iBACvBxJ,KAAKmK,WAAanK,KAAKoK,UACvBpK,KAAKqK,aAAerK,KAAKsK,mBACrBtK,KAAKK,OAAOgV,aACR4T,EAAWjpB,KAAKK,OAAO6S,QAAQG,cAAc,IAAMoI,CAAiB,KAEpEzb,KAAKypB,WAAaR,EAASQ,YAGnCzpB,KAAKgqB,UACLhqB,KAAKK,OAAOk5B,GAAG1yB,EAAkB7G,KAAKs5B,WAAYt5B,IAAI,EACtDA,KAAKK,OAAOk5B,GAAGhvB,EAAqBvK,KAAKw5B,eAAgBx5B,IAAI,EACzDA,KAAKK,OAAOgV,YAAcrV,KAAKK,OAAO6J,iBAAiBlJ,UAA8C,IAAlChB,KAAKK,OAAOD,WAAWU,QAC1Fd,KAAKu3B,uBAELzM,EAASxR,gBAAc,MAAO,CAAEC,UAAWiC,EAAkB,EACjExb,KAAKK,OAAO6S,QAAQmG,YAAYyR,CAAM,EACtC9qB,KAAKy5B,aAAa3O,CAAM,EACxB9qB,KAAK05B,gBACL15B,KAAK25B,cACL35B,KAAK45B,mBACL55B,KAAKK,OAAO6G,kBACZlH,KAAKK,OAAOuG,OAAO2D,EAAqB,EAAE,EAC1CvK,KAAK65B,aACD75B,KAAKK,OAAOy5B,mBACZ95B,KAAKK,OAAOy5B,gBAAkB,CAAA,IAGtCT,EAAaz5B,UAAU65B,aAAe,SAAU3O,GAgF5C,IA/EA,IAAIiP,EAAazgB,gBAAc,MAAO,CAAEC,UAAWvZ,KAAKK,OAAO6J,iBAAiBlJ,SAAWg5B,GAAqB,GAAI,EAEhHC,GADJnP,EAAOzR,YAAY0gB,CAAU,EACXzgB,gBAAc,QAAS,CACrCC,UAAW5B,GAAkB,IAAMuiB,GACtC,GAGGC,GAFJJ,EAAW1gB,YAAY4gB,CAAW,EAClCj6B,KAAKo6B,eAAeH,CAAW,EACf3gB,gBAAc,OAAO,GACjC+gB,EAAY/gB,gBAAc,QAAS,CAAEC,UAAW,SAAUC,UAAW,qBAAsBkL,MAAO,CAAE4V,KAAQ,YAAc,EAM1H5N,GALJuN,EAAY5gB,YAAYghB,CAAS,EACjCJ,EAAY5gB,YAAY8gB,CAAS,EACO,EAApCn6B,KAAKK,OAAOk6B,eAAez5B,QAC3Bq5B,EAAU9gB,YAAYrZ,KAAKw6B,iBAAiBx6B,KAAKK,OAAOk6B,cAAc,CAAC,EAElEjhB,gBAAc,KAAM,CAAEC,UAAWkhB,GAAsB,GAgE5D3hB,GA/DJqhB,EAAU9gB,YAAYqT,CAAE,EA+DX1sB,MACJY,EAAK,EAAGC,EAAKb,KAAKK,OAAOM,QAASC,EAAKC,EAAGC,OAAQF,CAAE,GAEzDwX,CAjEU,SAAUrX,GACpB,IACQgD,EACA22B,EAYAC,EAGAC,EAyBIC,EAEAC,EAQJC,EApDJjiB,EAAO+U,gBAAgB9sB,CAAM,IACzBgD,EAAQ+U,EAAOzY,OAAOuJ,aAAa+O,kBAAkB5B,QAAQhW,EAAOC,SAASC,UAAU,EACvFy5B,EAAOphB,gBAAc,KAAM,CAC3BC,UAAqB,CAAC,IAAXxV,EAAemT,EAAyBA,EAAyB,IAAML,EAClF6N,MAAO,CAAEsW,YAAa,gBAAiBrW,WAAY5jB,EAAOC,SAASC,WAAYg6B,MAAS,OAC3F,EACGhpB,EAAY,GACZlR,EAAOm6B,cACPjpB,EAAU3Q,KAAKga,EAA2B,EACrCva,EAAO8X,YACR5G,EAAU3Q,KAAKuV,CAAmB,GAG1CG,WAAS,CAAC0jB,GAAOzoB,CAAS,EACtB0oB,EAAgBrhB,gBAAc,MAAO,CAAEC,UAAW4hB,GAAuB,EAC7ET,EAAKrhB,YAAYshB,CAAa,EAC9B7hB,EAAOvP,WAAauP,EAAOtP,eAAesP,EAAOzY,OAAOD,UAAU,EAC9Dw6B,EAAW9hB,EAAOvP,WAAWxI,EAAOC,UAAUF,OAC9Cs6B,EAAc9hB,gBAAc,MAAO,CAAEC,UAAW8hB,GAAwB,EAC5EV,EAActhB,YAAY+hB,CAAW,EACjCr6B,EAAOgrB,UACHuP,EAAe,CACft6B,SAAUD,EAAOC,SAAUoY,WAAYrY,EAAOqY,WAAYmiB,SAAUx6B,EAAOw6B,SAAUC,SAAUz6B,EAAOy6B,SACtGN,YAAan6B,EAAOm6B,YAAariB,WAAY9X,EAAO8X,WAAYM,cAAepY,EAAOoY,cAAe9R,MAAOuzB,GAEhH5jB,WAAS,CAAC0jB,GAAOe,EAAkB,EAC/BvP,EAAapT,EAAOzY,OAAO6S,QAAQS,GAAK,kBACxC+nB,EAAiB5iB,EAAOzY,OAAO+rB,eAAerrB,EAAOgrB,QAAQ,EAAEuP,EAAcxiB,EAAOzY,OAAQ,iBAAkB6rB,EAAY,CAAA,CAAK,EACnIG,SAAOqP,EAAgBN,CAAW,IAG9BO,EAAWriB,gBAAc,MAAO,CAAEC,UAAWqiB,GAAuBpiB,UAAWzY,EAAOqY,WAAY,EACtGgiB,EAAY/hB,YAAYsiB,CAAQ,EAC5B56B,EAAOoY,gBACH0iB,EAAYviB,gBAAc,MAAO,CACjCC,UAAWuiB,GACXtiB,UAAW,KAAOohB,EAAS35B,WAAa,IAAM6X,EAAOzY,OAAO+f,UAAUC,YAAY,OAAO,EAC5F,EACD+a,EAAY/hB,YAAYwiB,CAAS,IAGrC96B,EAAOm6B,cACHL,EAAW,EAAC95B,CAAAA,EAAO8X,YAAwB,CAAC,IAAX9U,IAEjC+2B,EAAOxhB,gBAAc,MAAO,CAC5BC,UAAWhH,GAAwB,IAAMe,GAAiB,KAFjD,EAAasE,GAA0BC,IAGhD6M,MAAO,CAAEqX,SAAY,IAAKzB,KAAQ,UACrC,GACIzkB,aAAa,aAAcglB,EAAW95B,EAAOC,SAAW,UAAYD,EAAOC,SAAW,WAAW,EACtG05B,EAAK7kB,aAAa,gBAAiBglB,EAAS55B,UAAU,EACtD05B,EAActhB,YAAYyhB,CAAI,GAE9BC,EAAU,CAAC,CAAE/5B,SAAUD,EAAOC,SAAUg7B,UAAWj7B,EAAOqY,WAAY/R,MAAOuzB,IAEjF9hB,EAAOzY,OAAOwE,QAAQo3B,EADX,CAAEx4B,KAAMs3B,EAAS7nB,QAASwZ,EAAIpkB,OAAQ,CAAA,EAAO1F,YAAa,aACnB,SAAUs5B,GACnDA,EAAW5zB,QACZokB,EAAGrT,YAAYqhB,CAAI,EAE1B,IAKQ75B,EAAGD,EACF,GAGtBy4B,EAAaz5B,UAAU85B,cAAgB,WAWnC,IAVA,IAAIjP,EAAUnR,gBAAc,MAAO,CAAEC,UAAWkC,EAAmB,EAE/D0gB,GADJn8B,KAAKK,OAAO6S,QAAQmG,YAAYoR,CAAO,EACrBnR,gBAAc,MAAO,CAAEC,UAAWvZ,KAAKK,OAAO6J,iBAAiBlJ,SAAWg5B,GAAqB,GAAI,GAEjHoC,GADJ3R,EAAQpR,YAAY8iB,CAAW,EACZ7iB,gBAAc,QAAS,CACtCC,UAAW5B,GAAkB,IAAM0kB,GAAyB3X,MAAO,CAAE4V,KAAQ,gBAChF,GAGGgC,GAFJH,EAAY9iB,YAAY+iB,CAAY,EACpCp8B,KAAKo6B,eAAegC,CAAY,EACpB9iB,gBAAc,QAAS,CAAEC,UAAW,SAAUmL,MAAO,CAAE4V,KAAQ,QAAU,GAC5E15B,EAAK,EAAGC,EAAKb,KAAKK,OAAOM,QAASC,EAAKC,EAAGC,OAAQF,CAAE,GAAI,CAC7D,IAAIG,EAASF,EAAGD,GACZ27B,EAASjjB,gBAAc,KAAM,CAAE3F,GAAI5S,EAAOC,SAAUwY,UAAWzY,EAAOC,SAAU0jB,MAAO,CAAEuW,MAAS,OAAS,EAC/GsB,EAAOvkB,MAAMkY,QAAU,OACvBoM,EAAMjjB,YAAYkjB,CAAM,EAE5BH,EAAa/iB,YAAYijB,CAAK,EAC9B,IAAIE,EAAQljB,gBAAc,QAAS,CAAEoL,MAAO,CAAE4V,KAAQ,WAAYlM,aAAc,kBAAoB,EAEhGqO,GADJL,EAAa/iB,YAAYmjB,CAAK,EACX,CAAA,GACnBx8B,KAAK08B,YAAc18B,KAAKmK,WACxBnK,KAAK28B,yBACL,IAAK,IAAIx7B,EAAK,EAAGC,EAAKpB,KAAK08B,YAAav7B,EAAKC,EAAGN,OAAQK,CAAE,GAAI,CAC1D,IAAIkX,EAAMjX,EAAGD,GACTnB,KAAKK,OAAO6J,iBAAiBlJ,UAAuD,IAA3ChB,KAAKK,OAAOyW,oBAAoBhW,SAEzE27B,EAAyB,CAAC,IADdz8B,KAAKK,OAAOyW,oBAAoBC,QAAQsB,EAAIrX,QAAQ,GAGhEhB,KAAKK,OAAO6J,iBAAiBlJ,UAAY,CAAChB,KAAKK,OAAOgV,YACtDrV,KAAK48B,kBAAkBJ,EAAOnkB,EAAKokB,CAAY,EAEnDz8B,KAAK68B,oBAAoBL,EAAOnkB,EAAKokB,CAAY,IAGzDpD,EAAaz5B,UAAUi9B,oBAAsB,SAAUL,EAAOnkB,EAAKokB,GAI/D,IAHA,IACI/P,EAAKpT,gBAAc,KAAM,CAAEC,UADfkjB,EAAehqB,EAAwB,IAAMoE,EAAsBpE,EAE/EiS,MAAO,CAAE4V,KAAQ,MAAOlM,aAAc/V,EAAIrX,SAAW,eAAiB,EACjEJ,EAAK,EAAGC,EAAKb,KAAKK,OAAOM,QAASC,EAAKC,EAAGC,OAAQF,CAAE,GAAI,CAC7D,IAMQ+rB,EAYImQ,EAlBR/7B,EAASF,EAAGD,GACZZ,KAAK6tB,gBAAgB9sB,CAAM,IACvBgD,EAAQ/D,KAAKK,OAAOuJ,aAAa+O,kBAAkB5B,QAAQhW,EAAOC,SAASC,UAAU,EAErF87B,GAAah8B,EAAOi8B,UAAY,IAAMC,GAAiB,KAAOl8B,EAAOm8B,UAAY,WACzEC,EAAsB,IAC9BxQ,EAAKrT,gBAAc,KAAM,CACzBC,WAJwB,CAAC,IAAXxV,EAAegQ,EAA0BA,EAA0B,IAAM8C,GAI9DkmB,EAAWrY,MAAO,CAAEsW,YAAa,gBAAiBrW,WAAY5jB,EAAOC,SAASC,WAAY86B,SAAY,IAC3HqB,mBAAoBr8B,EAAOC,SAASC,WAAYq5B,KAAQ,YAC/D,GACGv5B,EAAOm6B,aAAe,CAACn6B,EAAO8X,YAAwB,CAAC,IAAX9U,KAC5CiT,WAAS,CAAC2V,GAAK9V,CAAmB,EAC9BqC,GAAQnY,EAAOoY,cAAgB,IAC/BnZ,KAAKic,cAAclb,EAAOC,SAAUhB,KAAKqK,aAAagO,EAAIrX,SAAS,EAAEF,OAAS,KAAO,IAAMC,EAAOqY,WACtGuT,EAAGtT,YAAYC,gBAAc,MAAO,CAAEC,UAAWhB,GAAgCiB,UAAWN,EAAM,CAAC,EACnGyT,EAAG9W,aAAa,gBAAiB,OAAO,GAExC9U,EAAOs8B,iBACHP,EAASxjB,gBAAc,MAAO,CAAEC,UAAW3G,EAAqB8R,MAAO,CAAEqX,SAAY,MAAQ,GAC1F1iB,YAAYC,gBAAc,MAAO,CAAEC,UAAW+jB,GAAoB,IAAMhqB,GAAgB,CAAC,EAChGqZ,EAAGtT,YAAYyjB,CAAM,GAEzBpQ,EAAGrT,YAAYsT,CAAE,GAGrBoO,EAAU,CAAC,CAAE/5B,SAAUqX,EAAIrX,SAAUg7B,UAAW3jB,EAAI2jB,UAAW30B,MAAOgR,EAAIhR,QAE9ErH,KAAKK,OAAOwE,QAAQo3B,EADT,CAAEx4B,KAAMs3B,EAAS7nB,QAASwZ,EAAIpkB,OAAQ,CAAA,EAAO1F,YAAa,cACrB,SAAUs5B,GACjDA,EAAW5zB,SACRk0B,EAAMvqB,UAAUC,SAAS,gBAAgB,EACzCsqB,EAAM7b,sBAAsB,cAAe+L,CAAE,EAG7C8P,EAAMnjB,YAAYqT,CAAE,GAG/B,GAEL2M,EAAaz5B,UAAU+8B,uBAAyB,WAC5C,IAagBY,EACAC,EACAC,EACAC,EAhBZ19B,KAAKK,OAAO6J,iBAAiBlJ,UAAYhB,KAAKK,OAAOgV,YAAgD,IAAlCrV,KAAKK,OAAOD,WAAWU,SACtF68B,EAAqB39B,KAAKK,OAAO6S,QAAQG,cAAc,IAAMukB,EAA+B,EAChG53B,KAAK08B,YAAc,CAAC18B,KAAKmK,WAAWnK,KAAKonB,gBACzCpnB,KAAK83B,qBACD93B,KAAKK,OAAO6J,iBAAiB6hB,UACzBwR,EAAYv9B,KAAKqK,aAAarK,KAAK08B,YAAY,GAAG17B,UAAUF,OAC5Dw6B,EAAe13B,SAAO,GAAI5D,KAAK08B,YAAY,GAAI,CAAEr1B,MAAOk2B,GAAa,CAAA,CAAI,EACzEK,EAAmB59B,KAAKK,OAAO+rB,eAAepsB,KAAKK,OAAO6J,iBAAiB6hB,QAAQ,EAAEuP,EAAct7B,KAAKK,OAAQ,mBAAoB,GAAI,CAAA,CAAK,EACjJs9B,EAAmBtkB,YAAYukB,EAAiB,EAAE,IAGlDD,EAAmBnkB,UAAYxZ,KAAK08B,YAAY,GAAGV,UAC/Ch8B,KAAKK,OAAO6J,iBAAiBiP,gBACzBokB,EAAYv9B,KAAKqK,aAAarK,KAAK08B,YAAY,GAAG17B,UAAUF,OAC5D08B,EAAyBx9B,KAAKK,OAAO6S,QAAQG,cAAc,IAAMqkB,EAAiC,EAElGgG,EADAD,EAAmB,KAAA,EAElBlnB,oBAAMinB,CAAsB,IAC7BC,EAAmBnkB,gBAAc,MAAO,CAAEC,UT/CnB,gCS+CqE,EAC5FmkB,EAAwBpkB,gBAAc,MAAO,CAAEC,UAAWuiB,GAA2B,EACrF2B,EAAiBpkB,YAAYqkB,CAAqB,EAClDF,EAAuBnkB,YAAYokB,CAAgB,GAEvDC,EAAsBlkB,UAAY,KAAO+jB,EAAY,IAAMv9B,KAAKK,OAAO+f,UAAUC,YAAY,OAAO,MAKpHgZ,EAAaz5B,UAAUg9B,kBAAoB,SAAUJ,EAAOnkB,EAAK3B,GAC7D,IAEIgW,EAAKpT,gBAAc,KAAM,CACzBC,UAHO9G,gCACKiE,EAAc,IAAMG,EAAsB,IAEzB6N,MAAO,CAAE0J,aAAc/V,EAAIrX,SAAW,cAC/Ds5B,KAAQ,MAAO3V,WAAYtM,EAAIrX,SAAU68B,iBAAiB,CAAEnnB,GAAazV,YAChF,EACG8W,EAAM/X,KAAKK,OAAOM,QAAQG,OAASd,KAAKK,OAAOuJ,aAAa0N,eAAexW,OAC3E6rB,EAAKrT,gBAAc,KAAM,CAAEC,UAAWxF,EACtC2Q,MAAO,CAAEsW,YAAa,gBAAiBV,KAAQ,WAAYwD,QAAS/lB,EAAI9W,YAAc,EACtF88B,EAAiBzkB,gBAAc,MAAO,CAAEC,UAAWke,EAA2B,EAClF9K,EAAGtT,YAAY0kB,CAAc,EAV7B,IAyBQH,EAbJI,EAAU1kB,gBAAc,MAAO,CAC/BC,UAAWjG,GAAiB,KAFhBoD,EAAclD,EAAkCC,IAEfiR,MAAO,CAChDqX,SAAY,IAAKzB,KAAQ,SAAUlM,aAAc1X,EAAc2B,EAAIrX,SAAW,YAAcqX,EAAIrX,SAAW,WAElH,EAEG+4B,GADJgE,EAAe1kB,YAAY2kB,CAAO,EACjB1kB,gBAAc,MAAO,CAAEC,UAAW4hB,GAAuB,GAEtEoC,GADJQ,EAAe1kB,YAAY0gB,CAAU,EACrB/5B,KAAKqK,aAAagO,EAAIrX,UAAUF,QAsB5Ci6B,GArBA/6B,KAAKK,OAAO6J,iBAAiB6hB,UACzBuP,EAAe13B,SAAO,GAAIyU,EAAK,CAAEhR,MAAOk2B,GAAa,CAAA,CAAI,EAC7DvmB,WAAS,CAAC2V,GAAK8O,EAAkB,EAC7BvP,EAAalsB,KAAKK,OAAO6S,QAAQS,GAAK,oBACtCiqB,EAAmB59B,KAAKK,OAAO+rB,eAAepsB,KAAKK,OAAO6J,iBAAiB6hB,QAAQ,EAAEuP,EAAct7B,KAAKK,OAAQ,mBAAoB6rB,EAAY,CAAA,CAAK,EACzJG,SAAOuR,EAAkB7D,CAAU,GAGnCA,EAAW1gB,YAAYC,gBAAc,MAAO,CACxCC,UT9OqB,kBS+OrBC,UAAWnB,EAAI2jB,UACftX,MAAO,CAAEsW,YAAa3iB,EAAI2jB,WAC7B,CAAC,EAEFh8B,KAAKK,OAAO6J,iBAAiBiP,eAC7B4kB,EAAe1kB,YAAYC,gBAAc,MAAO,CAC5CC,UAAWuiB,GACXtiB,UAAW,KAAO+jB,EAAUt8B,WAAa,IAAMjB,KAAKK,OAAO+f,UAAUC,YAAY,OAAO,EAC3F,CAAC,EAENqM,EAAGrT,YAAYsT,CAAE,EACH,CAAC,CAAE3rB,SAAUqX,EAAIrX,SAAUg7B,UAAW3jB,EAAI2jB,UAAW30B,MAAOgR,EAAIhR,SAE9ErH,KAAKK,OAAOwE,QAAQo3B,EADT,CAAEx4B,KAAMs3B,EAAS7nB,QAASwZ,EAAIpkB,OAAQ,CAAA,EAAO1F,YAAa,eACrB,SAAUs5B,GACjDA,EAAW5zB,SACRk0B,EAAMvqB,UAAUC,SAAS,gBAAgB,EACzCsqB,EAAM7b,sBAAsB,cAAe+L,CAAE,EAG7C8P,EAAMnjB,YAAYqT,CAAE,GAG/B,GAEL2M,EAAaz5B,UAAU+5B,YAAc,WACjC,IAAI11B,EAAQjE,KACRglB,EAAOhlB,KAAK08B,YACZuB,EAAW,GAAGjrB,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,qCAAqC,CAAC,EACpGJ,EAAe,GAAGC,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,+BAA+B,CAAC,EAClG+qB,EAAY,GACZC,EAAmB,CAAA,EACvBF,EAAS/4B,QAAQ,SAAUwnB,EAAI3oB,GAiD3B,IAhDA,IAAIq6B,EAAY,EACZplB,EAAU,SAAUjY,GACpB,GAAIkD,EAAM4pB,gBAAgB9sB,CAAM,EAAG,CAC/B,IAAIwI,EAAatF,EAAM5D,OAAO6J,iBAAiBlJ,SAC3CiD,EAAMgY,cAAclb,EAAOC,SAAWiD,EAAM5D,OAAO6J,iBAAiBqc,cAChEhQ,oBAAMtS,EAAMoG,aAAa2a,EAAKjhB,GAAO/C,SAAS,EAAK,GACjDiD,EAAMoG,aAAa2a,EAAKjhB,GAAO/C,SAAS,EAAIiD,EAAMsF,WAAWxI,EAAOC,UAE1Eq9B,GADJD,GAAa70B,EAAWzI,OACJ4rB,EAAGrZ,cAAc,cAAgBtS,EAAOC,SAAW,IAAI,GACvEs9B,EAAgBhlB,gBAAc,MAAO,CACrCC,UAAW+I,EAAwBoC,MAAO,CAAE4V,KAAQ,UAAWyB,SAAY,IACvE3N,aAAcrtB,EAAOC,SAASC,YAErC,EASD,GALI,EAFAk9B,EADkC,EAAlCp9B,EAAOujB,kBAAkBxjB,OACN,CAAA,EAElBq9B,IAAoB5nB,oBAAMtS,EAAM5D,OAAO6J,iBAAiBlJ,QAAQ,IAC7D8f,EAAaxH,gBAAc,MAAO,CAAEC,UAAWpF,GAAkB,EACrEkqB,EAAchlB,YAAYyH,CAAU,GAExCud,EAAchlB,YAAYilB,CAAa,EACf,EAApB/0B,EAAWzI,OAgBX,IAfA,IAeSF,EAAK,EAAGC,EAAK0I,EAAY3I,EAAKC,EAAGC,OAAQF,CAAE,GAEhD29B,CAjBU,SAAU96B,GACpB,IAAI+6B,EAAW/6B,EAAKQ,EAAM5D,OAAOkF,aAAaC,aAC1CmX,EAAY1Y,EAAM5D,OAAOuJ,aAAaqQ,eAAelD,QAAQynB,CAAQ,EACrEniB,EAAcpY,EAAMw6B,WAAWh7B,CAAI,EACrB,CAAC,IAAfkZ,IACAN,EAAYxG,aAAa,gBAAiB,MAAM,EAChDmB,WAAS,CAACqF,GAAcrH,CAAwB,GAGpD/Q,EAAM5D,OAAOwE,QAAQ65B,EADV,CAAEj7B,KAAMA,EAAMyP,QAASmJ,EAAa/T,OAAQ,CAAA,GACP,SAAUq2B,GACjDA,EAASr2B,QACVg2B,EAAcjlB,YAAYgD,CAAW,EAE5C,GAGUxb,EAAGD,EACF,OAIhB09B,EAAcjlB,YAAYpV,EAAM26B,iBAAiB,IAIpDh+B,EAAK,EAAGC,EAAKoD,EAAM5D,OAAOM,QAASC,EAAKC,EAAGC,OAAQF,CAAE,GAE1DoY,EADanY,EAAGD,EACF,EAEA,IAAdw9B,IACAF,EAAU58B,KAAKorB,CAAE,EACS,EAAtB3Z,EAAajS,SACbo9B,EAAU58B,KAAKyR,EAAahP,EAAM,EAG7C,EACI/D,KAAKK,OAAO6J,iBAAiBqc,cAAmD,IAAlCvmB,KAAKK,OAAOD,WAAWU,QAAiBd,KAAKK,OAAOw+B,iBACnGX,EAAUh5B,QAAQ,SAAUwnB,GAAM,OAAO1jB,SAAO0jB,CAAE,EAAI,GAG9D2M,EAAaz5B,UAAU6+B,WAAa,SAAUh7B,GAC1C,IAAI4Y,EAAc/C,gBAAc,MAAO,CACnCC,UAAWpH,EACXuS,MAAO,CAAEoa,UAAWr7B,EAAKzD,KAAKK,OAAOkF,aAAaC,aAAcmf,WAAYlhB,EAAKzD,KAAKK,OAAOW,UACzF+9B,gBAAiB,QAAShD,SAAY,KAAMzB,KAAQ,SAAU0E,uBAAwB,QAE7F,EAID,GAH+B,SAA3Bh/B,KAAKK,OAAOuB,aACZya,EAAYrE,MAAMhW,OAASF,aAAW9B,KAAKK,OAAOuB,UAAU,GAE5D5B,KAAKK,OAAOkF,aAAawmB,SAAU,CACnC/U,WAAS,CAACqF,GAAcof,EAAkB,EAC1C,IAAIvP,EAAalsB,KAAKK,OAAO6S,QAAQS,GAAK,gBACtCsrB,EAAej/B,KAAKK,OAAO+rB,eAAepsB,KAAKK,OAAOkF,aAAawmB,QAAQ,EAAEtoB,EAAMzD,KAAKK,OAAQ,eAAgB6rB,EAAY,CAAA,CAAK,EACrIG,SAAO4S,EAAc5iB,CAAW,MAE/B,CACD,IAEQ6iB,EAEAV,EAJJW,EAAen/B,KAAKK,OAAO++B,cAAgB,IAAM1K,GAAyB,GAY1E2K,GAXAr/B,KAAKK,OAAOkF,aAAa+5B,aACrBJ,EAAa5lB,gBAAc,MAAO,CAAEC,UAAWgmB,GAAuB,EACtEC,EAAclmB,gBAAc,MAAO,CAAEC,UAAWkmB,GAA4B,EAC5EjB,EAAWllB,gBAAc,MAAO,CAChCC,UAAWmmB,GAA8BP,EACzC3lB,UAAW/V,EAAKzD,KAAKK,OAAOkF,aAAaC,cAAgB,GAC5D,EACD05B,EAAW7lB,YAAYmmB,CAAW,EAClCA,EAAYnmB,YAAYmlB,CAAQ,EAChCniB,EAAYhD,YAAY6lB,CAAU,GAEpB5lB,gBAAc,MAAO,CACnCC,UAAWomB,GAAyBR,EACpC3lB,UAAW/V,EAAKzD,KAAKK,OAAOkF,aAAaunB,eAAiB,GAC7D,GAED,GADAzQ,EAAYhD,YAAYgmB,CAAW,EAC/Br/B,KAAKK,OAAOkF,aAAaq6B,WAAan8B,EAAKzD,KAAKK,OAAOkF,aAAaq6B,WAAY,CAGhF,IAFA,IAAIC,EAAWvmB,gBAAc,MAAO,CAAEC,UAAWumB,GAAqB,EAE7Dl/B,EAAK,EAAGm/B,EADNt8B,EAAKzD,KAAKK,OAAOkF,aAAaq6B,WAAW3+B,WAAWC,MAAM,GAAG,EACxCN,EAAKm/B,EAAOj/B,OAAQF,CAAE,GAAI,CACtD,IAAIo/B,EAAMD,EAAOn/B,GACjBi/B,EAASxmB,YAAYC,gBAAc,MAAO,CACtCC,UAAW0mB,GAAqB,IAAMC,GAAsB1mB,UAAWwmB,EAC1E,CAAC,EAEN3jB,EAAYhD,YAAYwmB,CAAQ,EAMpC,GAJI7/B,KAAKK,OAAOkF,aAAa46B,cAAgB18B,EAAKzD,KAAKK,OAAOkF,aAAa46B,gBACvEnpB,WAAS,CAACqF,GAAc+jB,EAAoB,EAC5C/jB,EAAYrE,MAAMqoB,gBAAkB58B,EAAKzD,KAAKK,OAAOkF,aAAa46B,eAElEngC,KAAKK,OAAOkF,aAAa+6B,eAAgB,CAGzC,IAFA,IAAIC,EAAajnB,gBAAc,MAAO,CAAEC,UAAWinB,GAAuB,EAEjE3/B,EAAK,EAAGsjB,EADN1gB,EAAKzD,KAAKK,OAAOkF,aAAa+6B,gBAAgBp/B,MAAM,GAAG,EAClCL,EAAKsjB,EAAOrjB,OAAQD,CAAE,GAAI,CACtD,IAAI2K,EAAM2Y,EAAOtjB,GACjB0/B,EAAWlnB,YAAYC,gBAAc,MAAO,CACxCC,UAAW/N,EAAIjK,OAAS,IAAMk/B,GACjC,CAAC,EAENpkB,EAAYhD,YAAYknB,CAAU,GAG1C,OAAOlkB,GAEXgd,EAAaz5B,UAAUg/B,gBAAkB,WAKrC,OAJgBtlB,gBAAc,OAAQ,CAClCC,UAAWmnB,GAAsBlnB,UAAWxZ,KAAKK,OAAO+f,UAAUC,YAAY,QAAQ,EACtFqE,MAAO,CAAE0J,aAAcpuB,KAAKK,OAAO+f,UAAUC,YAAY,QAAQ,EAAGia,KAAQ,UAC/E,GAGLjB,EAAaz5B,UAAUw6B,eAAiB,SAAU7N,GAC9C,IAAItoB,EAAQjE,KACR8X,EAAWwB,gBAAc,UAAU,EACvCtZ,KAAKK,OAAOM,QAAQuE,QAAQ,SAAUnE,GAClC,IAEQ4/B,EAEA5oB,EAJJ9T,EAAM4pB,gBAAgB9sB,CAAM,IACxBgD,EAAQE,EAAM5D,OAAOuJ,aAAa+O,kBAAkB5B,QAAQhW,EAAOC,SAASC,UAAU,EACtF0/B,EAAW5/B,EAAOm6B,aAAe,CAACn6B,EAAO8X,WAEzCd,EAAMuB,gBAAc,MAAO,CAC3BC,UAFsB,CAAC,IAAXxV,GAAgB48B,EAAuC9pB,EAAN,GAG7D6N,MAAO,CAAEC,WAAY5jB,EAAOC,SAASC,YACxC,EACGgD,EAAM5D,OAAOgV,aACT4C,EAAQ0oB,EAAW7+B,ajB3alB,EiB2a+C,EAAIA,aAAWmC,EAAMiU,UAAU,EACnFH,EAAIC,MAAMC,MAAQA,GAEtBH,EAASuB,YAAYtB,CAAG,GAE/B,EACDwU,EAAMlT,YAAYvB,CAAQ,GAE9BuhB,EAAaz5B,UAAUwK,QAAU,WAC7B,IAAInG,EAAQjE,KACRmK,EAAa,GAuCjB,OAtCInK,KAAKK,OAAO6J,iBAAiBlJ,WAC7BhB,KAAKK,OAAOD,WAAWwT,IAAI,SAAUC,GACjC,GAAK5P,EAAM5D,OAAO6J,iBAAiBqc,cAC3B,EAAChQ,oBAAM1C,EAAI5P,EAAM5D,OAAOW,SAAU,GAAqC,KAA/B6S,EAAI5P,EAAM5D,OAAOW,WACxD6S,EAAI5P,EAAM5D,OAAOW,WAAiF,CAAC,IAArEiD,EAAM0e,WAAW5L,QAAQlD,EAAI5P,EAAM5D,OAAOW,UAAUC,UAAU,GAFrG,CAMA,IAAI+6B,EAAYnoB,EAAI5P,EAAM5D,OAAO6J,iBAAiB8xB,YAAcnoB,EAAI5P,EAAM5D,OAAO6J,iBAAiBlJ,UAC9FA,EAAW6S,EAAI5P,EAAM5D,OAAO6J,iBAAiBlJ,UACjD,GAAI,CAAC6S,EAAI5P,EAAM5D,OAAO6J,iBAAiBlJ,UAAW,CAC9C,GAAIiD,CAAAA,EAAM5D,OAAO6J,iBAAiB02B,kBAK9B,OAJA5E,EAAY/3B,EAAM5D,OAAO+f,UAAUC,YAAY,YAAY,EAC3Drf,EAAW,GAMnBmJ,EAAW7I,KAAK,CAAEN,SAAUA,EAAUg7B,UAAWA,EAAW,GAC/D,EACD7xB,EAAaA,EAAW7E,OAAO,SAAU+V,EAAMtX,EAAO88B,GAClD,OAAO98B,IAAU88B,EAAIjtB,IAAI,SAAUyH,GAAQ,OAAOA,EAAKra,SAAW,EAAE+V,QAAQsE,EAAKra,QAAQ,EAC5F,GACDmJ,EAAanK,KAAK8gC,gBAAgB32B,CAAU,GACjCjF,QAAQ,SAAUmT,GACzBA,EAAIhR,MAAQpD,EAAM5D,OAAOD,WAAWkF,OAAO,SAAUuO,GACjD,MAA8D,CAAC,EAAxD5P,EAAM0e,WAAW5L,QAAQlD,EAAI5P,EAAM5D,OAAOW,SAAS,GACtD6S,EAAI5P,EAAM5D,OAAO6J,iBAAiBlJ,YAAcqX,EAAIrX,SAC3D,EAAEF,OACN,EACyB,IAAtBqJ,EAAWrJ,SAKfqJ,EAAW7I,KAAK,CAAEN,SAAU,GAAIg7B,UAAW,GAAI,EAE5C7xB,GAEXkvB,EAAaz5B,UAAUkhC,gBAAkB,SAAU9b,GAU/C,OATIhlB,KAAKK,OAAO6J,iBAAiB62B,aAC7B/b,EAAOhlB,KAAKK,OAAO6J,iBAAiB62B,aAAa9tB,KAAKjT,KAAKK,OAAQ2kB,CAAI,GAGvEA,EAAK/H,KAAK,SAAU+jB,EAAGt2B,GAAK,OAAOs2B,EAAEhF,UAAUiF,cAAcv2B,EAAEsxB,UAAWx7B,KAAAA,EAAW,CAAE0gC,QAAS,CAAA,EAAM,EAAI,EACvD,eAA/ClhC,KAAKK,OAAO6J,iBAAiBi3B,eAC7Bnc,EAAKyC,WAGNzC,GAEXqU,EAAaz5B,UAAU46B,iBAAmB,SAAUxV,GAChD,IAAI0H,EAAKpT,gBAAc,KAAM,CAAEC,UAAWkhB,GAAuB,IAAM2G,GAA8B,EACjG7G,EAAiB,GACrBv6B,KAAKK,OAAOM,QAAQuE,QAAQ,SAAUnE,GAElC,IADA,IAAIqY,EAAa,GACRxY,EAAK,EAAGygC,EAASrc,EAAMpkB,EAAKygC,EAAOvgC,OAAQF,CAAE,GAAI,CACtD,IAAIyX,EAAMgpB,EAAOzgC,GACyC,CAAC,IAAvDyX,EAAIipB,UAAUvqB,QAAQhW,EAAOC,SAASC,UAAU,IAChDmY,EAAaf,EAAIa,MAGzBqhB,EAAej5B,KAAK8X,CAAU,EACjC,EACD,IAAK,IAAImoB,EAAI,EAAGA,EAAIhH,EAAez5B,OAAQygC,CAAC,GAAI,CAE5C,IADA,IAAIC,EAAU,EACLhkB,EAAI+jB,EAAI,EAAG/jB,EAAI+c,EAAez5B,SACR,KAAtBy5B,EAAegH,IAAqC,KAAtBhH,EAAe/c,IAAc+c,EAAegH,KAAOhH,EAAe/c,IAD1DA,CAAC,GAExCgkB,CAAO,GAMf,IAAIjR,EAAMjX,gBAAc,MAAO,CAAEC,UAAWqiB,GAAuBpiB,UAAW+gB,EAAegH,GAAI,EAC7FE,EAAKnoB,gBAAc,KAAM,CACzBC,UAAWrC,EAAyB,IAAMM,GAC1CkN,MAAO,CAAEoZ,QAAW0D,EAAQvgC,WAAYg6B,MAAS,OACpD,EACDvO,EAAGrT,YAAYooB,CAAE,EAAEpoB,YAAYkX,CAAG,EAClCgR,GAAKC,EAAU,EAEnB,OAAO9U,GAEX2M,EAAaz5B,UAAU45B,eAAiB,WACpC,IAMQkI,EANJz9B,EAAQjE,KACR8qB,EAAS9qB,KAAKK,OAAO6S,QAAQG,cAAc,IAAMmI,CAAgB,EACjEiP,EAAUzqB,KAAKK,OAAO6S,QAAQG,cAAc,IAAMoI,CAAiB,EACnEzZ,EAAShC,KAAKK,OAAO6S,QAAQsM,aAAesL,EAAOtL,aACnDxf,KAAKK,OAAOgV,aACZrT,EAASG,OAAOC,aAAe0oB,EAAOtL,ajBrhBzB,KiBshBTkiB,EAAkB1hC,KAAKK,OAAO6S,QAAQG,cAAc,IAAMokB,CAAyB,KAEnFz1B,GAAU0/B,EAAgBliB,cAEX,GAAGxM,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAMY,CAAuB,CAAC,EACvF7O,QAAQ,SAAU0Q,GAC3B,IAAI+rB,EAAc/rB,EAAKvC,cAAc,IAAMiP,CAAsB,EAC5Dqf,EAAY1vB,UAAUC,SAAS+R,EAA4B,IAC5D0d,EAAY3pB,MAAMhW,OAASF,aAAWE,CAAM,EAC5Cse,eAAaR,IAAIlK,EAAM,YAAa3R,EAAM29B,iBAAkB39B,CAAK,GAExE,GAEsB,SAAvBjE,KAAKK,OAAO2B,QAA4C,SAAvBhC,KAAKK,OAAO2B,SAC7CyoB,EAAQzS,MAAMhW,OAASF,aAAWE,CAAM,GAE5C,GAAGgR,MAAMC,KAAK6X,EAAO7L,QAAQ,EAAE/Z,QAAQ,SAAU2iB,GAC7C,IAAIga,EAAe,EAC+B,EAA7CpX,EAAQ5L,YAAc4L,EAAQqX,cAC/BD,EAAe,GACqC,EAA/CpX,EAAQjL,aAAeiL,EAAQsX,gBAChCla,EAAK7P,MAAMC,MAAQnW,aAAW2oB,EAAQqX,WAAW,GAGrD79B,EAAM5D,OAAOwqB,UACbhD,EAAK7P,MAAMgqB,YAAclgC,aAAW+/B,CAAY,EAGhDha,EAAK7P,MAAMiqB,aAAengC,aAAW+/B,CAAY,EAExD,EACD7hC,KAAKsjB,wBAET+V,EAAaz5B,UAAUsiC,gBAAkB,SAAUh8B,GAC/C,IAAIqF,EAASrF,EAAEqF,OACXuf,EAAS9qB,KAAKK,OAAO6S,QAAQG,cAAc,IAAMmI,CAAgB,EACrE,GAAGxI,MAAMC,KAAK6X,EAAO7L,QAAQ,EAAE/Z,QAAQ,SAAU2iB,GAAQA,EAAK4B,WAAale,EAAOke,WAAa,EAC/FzpB,KAAKK,OAAO8hC,eAAe1X,QAAU,CAAEpM,KAAM9S,EAAOke,WAAYrL,IAAK7S,EAAOge,WACxE,CAAChT,oBAAMvW,KAAKK,OAAO6J,iBAAiBlJ,QAAQ,GAAKhB,KAAKK,OAAO6J,iBAAiByf,kBAC9E3pB,KAAKoiC,WAAWl8B,CAAC,GAGzBmzB,EAAaz5B,UAAUyiC,yBAA2B,SAAUC,GACpDC,EAAYD,EAAYtuB,aAAa,UAAU,EAC9CuC,oBAAMgsB,CAAS,GAChBviC,KAAKoT,kBAAkByC,aAAa,WAAY0sB,CAAS,GAGjElJ,EAAaz5B,UAAUwiC,WAAa,SAAUl8B,GAC1C,IAkBQ6M,EAGAyvB,EACAC,EACAC,EACAC,EAxBJC,EAAgB5iC,KAAKK,OAAO6S,QAAQG,cAAc,IAAMX,CAAsB,EAC9EoY,EAAS9qB,KAAKK,OAAO6S,QAAQG,cAAc,IAAMmI,CAAgB,EACjEiP,EAAUzqB,KAAKK,OAAO6S,QAAQG,cAAc,IAAMoI,CAAiB,EACnElF,oBAAMvW,KAAKoT,iBAAiB,GAC5BpT,KAAKoT,kBAAoBkG,gBAAc,MAAO,CAAEC,UAAWzG,GAA+B,EACtF+vB,EAAYvpB,gBAAc,MAAO,CAAEC,UAAWupB,GAAsB,EACxE9iC,KAAKoT,kBAAkBiG,YAAYwpB,CAAS,EAC5C7iC,KAAKK,OAAO6S,QAAQ6vB,aAAa/iC,KAAKoT,kBAAmBpT,KAAKK,OAAO6S,QAAQmB,iBAAiB,EAC9FwuB,EAAUxpB,YAAYupB,EAAcvvB,cAAc,IAAMokB,CAAyB,EAAE5G,UAAU,CAAA,CAAI,CAAC,EAClG7wB,KAAKqiC,yBAAyBO,CAAa,EAC3CI,oBAAkBhjC,KAAKoT,kBAAmB,CAAEpR,OAAQF,aAAW8gC,EAAclqB,wBAAwB1W,MAAM,EACvGiW,MAAOnW,aAAW2oB,EAAQpX,cAAc,aAAa,EAAEqF,wBAAwBT,KAAK,EACpFmG,IAAKtc,aAAWgpB,EAAOpS,wBAAwB1W,OAAOf,UAAU,EACnE,EACD+hC,oBAAkBlY,EAAQ,CAAExhB,SAAU,WAAY8U,IAAKtc,cAAa9B,KAAKoT,kBAAkBsF,wBAAwB1W,QAAU,EAC7HghC,oBAAkBvY,EAAS,CAAEnhB,SAAU,WAAY8U,IAAKtc,cAAa9B,KAAKoT,kBAAkBsF,wBAAwB1W,QAAU,IAI1HihC,GADAlwB,EAAe,GAAGC,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAMT,CAAsB,CAAC,GACxE1S,KAAKuT,aAC5B2vB,EAAWnwB,EAAa/S,KAAKuT,YAAc,GAC3CivB,EAAWzvB,EAAa/S,KAAKuT,YAAc,GAG3CovB,EADAD,EADAD,EAAgB,KAAA,EAGhBQ,IACAR,EAAgBQ,EAAQvqB,wBAAwB0F,IAAM6kB,EAAQvqB,wBAAwB1W,QAEtFkhC,IACAR,EAAiBQ,EAASxqB,wBAAwB0F,IAAM8kB,EAASxqB,wBAAwB1W,QAEzFwgC,IACAG,EAAiBH,EAAS9pB,wBAAwB0F,IAAMokB,EAAS9pB,wBAAwB1W,QAEzFmhC,EAAmB1Y,EAAQ/R,wBAAwB0F,IAAMpe,KAAKoT,kBAAkBsF,wBAAwB1W,OACxGohC,EAAoBpjC,KAAKoT,kBAAkBC,cAAc,IAAMyvB,EAAoB,EACnFH,GAAsCA,GAApBQ,GAAsCnjC,KAAKuT,YAAcR,EAAajS,OAAS,GAC7FsiC,IACAp6B,SAAOo6B,EAAkB/vB,cAAc,IAAMokB,CAAyB,CAAC,EACvE2L,EAAkB/pB,YAAYmpB,EAASnvB,cAAc,IAAMokB,CAAyB,EAAE5G,UAAU,CAAA,CAAI,CAAC,EACrG7wB,KAAKqiC,yBAAyBG,CAAQ,GAE1C,EAAExiC,KAAKuT,aAEFmvB,GAAkBS,EAAmBV,GAAoCC,EAAnBS,GAAwD,EAAnBnjC,KAAKuT,cACjG6vB,IACAp6B,SAAOo6B,EAAkB/vB,cAAc,IAAMokB,CAAyB,CAAC,EACvE2L,EAAkB/pB,YAAY6pB,EAAS7vB,cAAc,IAAMokB,CAAyB,EAAE5G,UAAU,CAAA,CAAI,CAAC,EACrG7wB,KAAKqiC,yBAAyBa,CAAQ,GAE1C,EAAEljC,KAAKuT,cAGXrN,GAA4B,IAAvBA,EAAEqF,OAAOge,WACdvpB,KAAKqjC,oBAGbhK,EAAaz5B,UAAUyjC,iBAAmB,WACtCr6B,SAAOhJ,KAAKoT,iBAAiB,EAC7BpT,KAAKoT,kBAAoB,KACzB,IAAI0X,EAAS9qB,KAAKK,OAAO6S,QAAQG,cAAc,IAAMmI,CAAgB,EACjEiP,EAAUzqB,KAAKK,OAAO6S,QAAQG,cAAc,IAAMoI,CAAiB,EACvEunB,oBAAkBlY,EAAQ,CAAExhB,SAAU,GAAI8U,IAAK,GAAI,EACnD4kB,oBAAkBvY,EAAS,CAAEnhB,SAAU,GAAI8U,IAAK,GAAI,EACpDpe,KAAKK,OAAO8hC,eAAe1X,QAAU,CAAEpM,KAAMre,KAAKK,OAAO8hC,eAAe1X,QAAQpM,KAAMD,IAAK,GAC3FqM,EAAQlB,UAAY,EACpBvpB,KAAKuT,YAAc,GAEvB8lB,EAAaz5B,UAAU0jC,eAAiB,SAAUp9B,GAC9C,IAEQkX,EAFJ7R,EAASrF,EAAEqF,OACXA,EAAOg4B,eACHnmB,EAAY7R,EAAOg4B,aAAavvB,aAAa,UAAU,EAC3DhU,KAAKK,OAAO8hC,eAAephC,OAAO,GAAKqc,GAAa,CAAEiB,KAAM9S,EAAOke,WAAYrL,IAAK7S,EAAOge,aAGnG8P,EAAaz5B,UAAUgiC,iBAAmB,SAAU17B,GAC5ClG,KAAKK,OAAOiV,YAAYE,SAAW,CAACxV,KAAKK,OAAOiV,YAAYC,aAC5DrP,EAAEisB,kBAWVkH,EAAaz5B,UAAUiuB,gBAAkB,SAAU9sB,GAC/C,IAAIkD,EAAQjE,KACRwjC,EAAY,CAAA,EAQhB,MAP2C,UAA3B,OAAOziC,EAAOC,SAE1BwiC,EAA4F,CAAC,IAAjFxjC,KAAKK,OAAOuJ,aAAa0N,eAAeP,QAAQhW,EAAOC,SAASC,UAAU,EAGtFF,EAAOC,SAASE,MAAM,GAAG,EAAEgE,QAAQ,SAAUsG,GAAOg4B,EAAsE,CAAC,IAA3Dv/B,EAAM5D,OAAOuJ,aAAa0N,eAAeP,QAAQvL,CAAG,EAAW,EAE5Hg4B,GAEXnK,EAAaz5B,UAAU6jC,aAAe,SAAU1iC,EAAQwK,GACpD,IAAIm4B,EAASpqB,gBAAc,MAAO,CAAEC,UAAWyK,GAAkB,EAC7DjjB,EAAOw6B,UACPmI,EAAOrqB,YAAYC,gBAAc,MAAO,CACpCC,UAAWoqB,GACXnqB,UAAWxZ,KAAKK,OAAO+f,UAAUC,YAAY,KAAK,EAAI,KAAOtf,EAAOw6B,SAASt6B,WAChF,CAAC,EAEFF,EAAOy6B,UACPkI,EAAOrqB,YAAYC,gBAAc,MAAO,CACpCC,UAAWqqB,GACXpqB,UAAWxZ,KAAKK,OAAO+f,UAAUC,YAAY,KAAK,EAAI,KAAOtf,EAAOy6B,SAASv6B,WAChF,CAAC,EAEyB,EAA3ByiC,EAAOG,oBACHt4B,EAAO8H,cAAc,IAAMiP,CAAsB,EACjD/W,EAAOw3B,aAAaW,EAAQn4B,EAAO8I,iBAAiB,EAGpD9I,EAAO8N,YAAYqqB,CAAM,IAIrCrK,EAAaz5B,UAAUg6B,iBAAmB,WACtC,IAAI31B,EAAQjE,KACZA,KAAKK,OAAOM,QAAQuE,QAAQ,SAAUnE,GAClC,IAGI+a,EAEAgoB,EACAC,EAeIC,GArBHjjC,EAAOw6B,UAAax6B,EAAOy6B,YAG5B1f,EAAW7X,EAAMsF,WAAWxI,EAAOC,UACnCijC,EAAc,cAAiBljC,EAAOC,SAAW,KACjD8iC,EAAa7/B,EAAM5D,OAAO6S,QAAQG,cAAc,IAAO6D,EAAyB+sB,CAAY,EAC5FF,EAAW,GAAG/wB,MAAMC,KAAKhP,EAAM5D,OAAO6S,QAAQC,iBAAiB,IAAOY,EAA0BkwB,CAAY,CAAC,EAC7E,aAAhChgC,EAAM5D,OAAO6jC,gBAAiCjgC,EAAM5D,OAAO6J,iBAAiBlJ,SAC5EiD,EAAMy4B,YAAYx3B,QAAQ,SAAUmT,EAAKtU,GACrCE,EAAMw/B,aAAa1iC,EAAQgjC,EAAShgC,EAAM,EAC1C,IAAIogC,EAAWroB,EAASxW,OAAO,SAAU2O,GACrC,OAAOA,EAAKhQ,EAAM5D,OAAO6J,iBAAiBlJ,YAAcqX,EAAIrX,SAC/D,EACGgjC,EAAa//B,EAAMmgC,mBAAmBrjC,EAAQojC,EAASrjC,MAAM,EAC7DkjC,GACAhtB,WAAS,CAAC+sB,EAAShgC,IAASigC,CAAU,EAE7C,GAGD//B,EAAMw/B,aAAa1iC,EAAQ+iC,CAAU,GACjCE,EAAa//B,EAAMmgC,mBAAmBrjC,EAAQ+a,EAAShb,MAAM,IAE7DkW,WAAS+sB,EAASjW,OAAOgW,CAAU,EAAGE,CAAU,IAG3D,GAEL3K,EAAaz5B,UAAUwkC,mBAAqB,SAAUrjC,EAAQsG,GAC1D,IAAI28B,EAOJ,OANIjjC,EAAOy6B,UAAYn0B,EAAQtG,EAAOy6B,SAClCwI,EAAaK,GAERtjC,EAAOw6B,UAAYl0B,EAAQtG,EAAOw6B,WACvCyI,EAAaM,IAEVN,GAEX3K,EAAaz5B,UAAU2kC,kBAAoB,WACrB,GAAGvxB,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAM6Q,EAAgB,CAAC,EAChF9e,QAAQ,SAAU2iB,GAAQ7e,SAAO6e,CAAI,EAAI,EADrD,IAEI2c,EAAW,GAAGxxB,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAMmxB,EAAmB,CAAC,EAExFG,GADJxvB,cAAYuvB,EAAUF,EAAmB,EAC1B,GAAGtxB,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAMkxB,EAAmB,CAAC,GAC5FpvB,cAAYwvB,EAAUJ,EAAmB,EACzCrkC,KAAK45B,oBAETP,EAAaz5B,UAAUqc,cAAgB,SAAUyoB,EAAa5kC,GAC1D,IAAImE,EAAQjE,KAER8b,GADe,KAAA,IAAfhc,IAAyBA,EAAaE,KAAKK,OAAOD,YACvC,IAEf,GADuC,UAAvB,OAAOskC,EAEnB,IAAIrnB,EAAUvd,EAAWwF,OAAO,SAAUD,GACtC,OAAOA,EAAQpB,EAAM5D,OAAOW,YAAc0jC,EAC7C,EACD5oB,EAAWA,EAASgS,OAAOzQ,CAAO,OAUlC,IAPA,IAOSzc,EAAK,EAAG+jC,EAPAD,EAAYxjC,MAAM,GAAG,EAOMN,EAAK+jC,EAAa7jC,OAAQF,CAAE,GAEpEgkC,CARU,SAAUp5B,GACpB,IAAI6R,EAAUvd,EAAWwF,OAAO,SAAUD,GACtC,OAAOA,EAAQpB,EAAM5D,OAAOW,YAAcwK,EAAIjK,OACjD,EACDua,EAAWA,EAASgS,OAAOzQ,CAAO,GAGxBsnB,EAAa/jC,EACZ,EAInB,OADAZ,KAAK6kC,aAAa/oB,CAAQ,EACnBA,GAEXud,EAAaz5B,UAAUilC,aAAe,SAAU/oB,GAC5C,IAAItQ,EAAMxL,KAAKK,OAAOkF,aAAaC,YAC/ByE,EAAYjK,KAAKK,OAAOyJ,aAAaG,UACzC,OAAQjK,KAAKK,OAAOyJ,aAAaE,QAC7B,IAAK,kBACDhK,KAAK8kC,UAAUt5B,EAAKvB,EAAW6R,CAAQ,EACvC,MACJ,IAAK,SACL,IAAK,QACG9b,KAAKK,OAAOyJ,aAAaC,QACzByB,EAAMxL,KAAKK,OAAOyJ,aAAaC,OAEnC/J,KAAK8kC,UAAUt5B,EAAKvB,EAAW6R,CAAQ,EAG/C,OAAOA,GAEXud,EAAaz5B,UAAUklC,UAAY,SAAUt5B,EAAKvB,EAAW6R,GACzD,IAOIipB,EACAC,EARAC,EAAY,CAAA,EAuBhB,MAnBKA,EAFDA,EADgC,EAAhCjlC,KAAKK,OAAOD,WAAWU,OACsC,UAAjD,OAAQd,KAAKK,OAAOD,WAAW,GAAI,GAAKoL,GAEnDy5B,IAAiD,UAApCjlC,KAAKK,OAAOyJ,aAAaE,SAK3C8R,EAAWA,EAASmB,KAAK,SAAUioB,EAAWC,GAS1C,OAFIH,EANCC,GAKDF,EAAQG,EAAU,GAAK15B,GACd25B,EAAW,GAAK35B,KALzBu5B,EAAQG,EAAU,GAAK15B,GAAO05B,EAAU,GAAK15B,GAAK45B,cAAgB,GACzDD,EAAW,GAAK35B,GAAO25B,EAAW,GAAK35B,GAAK45B,cAAgB,KAMjEL,EAAkB,EAAeA,EAATC,EAAkB,CAAC,EAAI,EAC1D,EACiB,eAAd/6B,IACA6R,EAAS2L,UAEN3L,GAEXud,EAAaz5B,UAAUylC,cAAgB,SAAUvhC,GACzCA,EAAKyH,OAAO0G,UAAUC,SAAS+lB,EAA0B,GACzDj4B,KAAKK,OAAO6S,QAAQG,cAAc,IAAM+kB,EAA2B,EAAEnmB,UAAUC,SAAS,cAAc,IACtGlS,KAAK+4B,UAAUpa,OACf1J,cAAY,CAACjV,KAAKg4B,cAAe,UAAU,GAE3ChmB,UAAQlO,EAAKyH,OAAQ,IAAMwV,EAAc,IAGzCpH,EAAQ,GAAG3G,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,WAA6B6B,CAAwB,CAAC,EACrHC,cAAY0E,EAAO3E,CAAwB,EAC3ChV,KAAKkV,0BAA0ByE,CAAK,IAExC0f,EAAaz5B,UAAUsV,0BAA4B,SAAUyE,GACrDA,aAAiB2rB,QACjB3rB,EAAM9D,aAAa,gBAAiB,OAAO,EAG3C8D,EAAMzU,QAAQ,SAAU+O,GAAQA,EAAK4B,aAAa,gBAAiB,OAAO,EAAI,GAGtFwjB,EAAaz5B,UAAU4J,eAAiB,SAAU/F,GAC9C,IAAIQ,EAAQjE,KACRuJ,EAAa,GAajB,OAZAvJ,KAAK2iB,WAAa,GAClB3iB,KAAKK,OAAOM,QAAQuE,QAAQ,SAAUnE,GAClC,IAAIkkC,EAAuC,UAA3B,OAAOlkC,EAAOC,SAO1B8a,GALA7X,EAAM0e,WADNsiB,EACmBhhC,EAAM0e,WAAWmL,OAAO/sB,EAAOC,SAASC,UAAU,EAGlDgD,EAAM0e,WAAWmL,OAAO/sB,EAAOC,SAASE,MAAM,GAAG,EAAE0S,IAAI,SAAU1N,GAAK,OAAOA,EAAE3E,OAAS,CAAC,EAEjG0C,EAAMgY,cAAclb,EAAOC,SAAUyC,CAAI,GACxD8F,EAAWxI,EAAOC,UAAY8a,EACjC,EACMvS,GAEX8vB,EAAaz5B,UAAU0K,iBAAmB,WACtC,IAAIrG,EAAQjE,KACRqK,EAAe,GAWnB,OAVIrK,KAAKK,OAAO6J,iBAAiBlJ,UAC7BhB,KAAKmK,WAAWjF,QAAQ,SAAUmT,GAC9B,OAAOhO,EAAagO,EAAIrX,UAAYiD,EAAM5D,OAAOD,WAAWkF,OAAO,SAAUuO,GACzE,MAAO,CAAC0C,oBAAM1C,EAAI5P,EAAM5D,OAAOW,SAAS,GAC8B,CAAC,EAAnEiD,EAAM0e,WAAW5L,QAAQlD,EAAI5P,EAAM5D,OAAOW,UAAUC,UAAU,IAC5D,CAAC4S,EAAI5P,EAAM5D,OAAO6J,iBAAiBlJ,WAAaiD,EAAM5D,OAAO6J,iBAAiB02B,kBAC5E,GAAK/sB,EAAI5P,EAAM5D,OAAO6J,iBAAiBlJ,aAAeqX,EAAIrX,SACrE,EACJ,EAEEqJ,GAEXgvB,EAAaz5B,UAAU2lC,eAAiB,WACpC,IAAIza,EAAS9qB,KAAKK,OAAO6S,QAAQG,cAAc,IAAMmI,CAAgB,EACrE,GAAGxI,MAAMC,KAAK6X,EAAO7L,QAAQ,EAAE/Z,QAAQ,SAAUsgC,GAAS,OAAOx8B,SAAOw8B,CAAK,EAAI,EACjFxlC,KAAKy5B,aAAa3O,CAAM,GAE5BuO,EAAaz5B,UAAU6lC,aAAe,WAClCzlC,KAAKK,OAAO+0B,eAAe,CAAC,eAAe,EAC/B,GAAGpiB,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAMmP,CAAsB,CAAC,EACtFpd,QAAQ,SAAU+O,GAAQ,OAAOjL,SAAOiL,CAAI,EAAI,EACtDjU,KAAK25B,cACL35B,KAAK0lC,gBACL1lC,KAAKK,OAAO6G,mBAEhBmyB,EAAaz5B,UAAU8G,QAAU,WAC7B,IAAIzC,EAAQjE,KACR2lC,EAA4B,CAAA,EAChC3lC,KAAKK,OAAOM,QAAQuE,QAAQ,SAAUnE,GAClC,GAAIA,EAAOoY,cAAe,CAClBpY,GAAUA,EAAOgrB,UAAY,CAAC4Z,IAC9B1hC,EAAMshC,iBACNI,EAA4B,CAAA,GAEhC,IAAIC,EAAgB,IAAM1uB,EAAyB,cAAiBnW,EAAOC,SAAW,OAAU86B,GAC5FD,EAAY53B,EAAM5D,OAAO6S,QAAQG,cAAcuyB,CAAa,EAChE,GAAI/J,EAAW,CACX,IACIgK,EAAa,EACjB,GAF2C,UAA3B,OAAO9kC,EAAOC,SAI1B6kC,EAAc,GAAG7yB,MAAMC,KAAKhP,EAAM5D,OAAO6S,QAAQC,iBAAiB,qBAAwCpS,EAAOC,SAAW,IAAK,CAAE,EAAEF,YAIrI,IADA,IACSF,EAAK,EAAGklC,EADN/kC,EAAOC,SAASE,MAAM,GAAG,EACJN,EAAKklC,EAAOhlC,OAAQF,CAAE,GAClD,IAAI4K,EAAMs6B,EAAOllC,GAGjBilC,EADY,GAAG7yB,MAAMC,KAAKhP,EAAM5D,OAAO6S,QAAQC,iBAAiB,qBAAwC3H,EAAIjK,OAAS,IAAK,CAAC,EACxGT,OAAS+kC,EAGpChK,EAAUriB,UAAY,KAAOqsB,EAAa,IAAM5hC,EAAM5D,OAAO+f,UAAUC,YAAY,OAAO,IAGrG,EACGrgB,KAAKK,OAAO6J,iBAAiBlJ,UACV,GAAGgS,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAMT,CAAsB,CAAC,EACtFxN,QAAQ,SAAU6gC,GAC3B,IAAIC,EAAcD,EAAS/xB,aAAa,UAAU,EAC9C6nB,EAAYkK,EAAS1yB,cAAc,IAAMyoB,EAAyB,EAClED,GAAamK,IACTrsB,EAAQ,GAAG3G,MAAMC,KAAK8yB,EAAS7xB,mBAAmBf,iBAAiB,IAAMhB,CAAc,CAAC,EAC5F0pB,EAAUriB,UAAY,KAAOG,EAAM7Y,OAAS,IAAMmD,EAAM5D,OAAO+f,UAAUC,YAAY,OAAO,GAEnG,EAELrgB,KAAKukC,qBAETlL,EAAaz5B,UAAU0jB,qBAAuB,WAC1C,IAAIrf,EAAQjE,KACRyqB,EAAUzqB,KAAKK,OAAO6S,QAAQG,cAAc,IAAMoI,CAAiB,EACnEgP,IACKwb,UAAQC,MAITzb,EAAQlB,UAAYvpB,KAAKK,OAAO8hC,eAAe1X,QAAQrM,IACvDqM,EAAQhB,WAAazpB,KAAKK,OAAO8hC,eAAe1X,QAAQpM,MAJxDoM,EAAQb,SAAS5pB,KAAKK,OAAO8hC,eAAe1X,QAAQpM,KAAMre,KAAKK,OAAO8hC,eAAe1X,QAAQrM,GAAG,GAOtF,GAAGpL,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAMmP,CAAsB,CAAC,EACtFpd,QAAQ,SAAUsoB,GAC1B,IACQ2Y,EADJ3Y,EAAQ+V,eACJ4C,EAAaliC,EAAM5D,OAAO8hC,eAAephC,OAAOysB,EAAQ+V,aAAavvB,aAAa,UAAU,MAEvFiyB,UAAQC,MAIT1Y,EAAQjE,UAAY4c,EAAW/nB,IAC/BoP,EAAQ/D,WAAa0c,EAAW9nB,MAJhCmP,EAAQ5D,SAASuc,EAAW9nB,KAAM8nB,EAAW/nB,GAAG,GAQ/D,GAELib,EAAaz5B,UAAU6J,uBAAyB,SAAUhG,EAAMM,GAC5D,IAIQqiC,EAyBAC,EAUI/oB,EASJqP,EAGA2Z,EACAC,EAIAC,EAxDJviC,EAAQjE,KACRwL,EAAM/H,EAAKzD,KAAKK,OAAOW,UACvBylC,EAAUzmC,KAAKK,OAAO6S,QAAQG,cAAc,qCAAqC,EACjFrT,KAAKK,OAAO6J,iBAAiBlJ,UAAY,CAAChB,KAAKK,OAAOgV,aAClD+wB,EAAc,2CAA8C3iC,EAAKzD,KAAKK,OAAO6J,iBAAiBlJ,UAAY,KAC1GhB,KAAKK,OAAO6S,QAAQG,cAAc+yB,CAAW,EAC7CK,EAAUzmC,KAAKK,OAAO6S,QAAQG,cAAc+yB,CAAW,EAAElyB,oBAIrC,CAAC,IADHlU,KAAK2iB,WAAW5L,QAAQvL,CAAG,GACsC,CAAC,IAA1DxL,KAAKK,OAAOuJ,aAAa0N,eAAeP,QAAQvL,CAAG,IACrEk7B,EAAU1mC,KAAKmK,WAAWxE,UAAU,SAAUghC,GAAW,OAAOA,EAAkB,WAAMljC,EAAKQ,EAAM5D,OAAO6J,iBAAiBlJ,UAAY,EACvI4lC,EAAO,GAAG5zB,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,iBAAiB,CAAC,EAC5E0zB,EAAU7mC,KAAKK,OAAO6S,QAAQG,cAAc,IAAMgpB,GAA0B,QAAQ,EACpFuK,EAAKF,KACLG,EAAUD,EAAKF,IAEnB1mC,KAAK48B,kBAAkBiK,EAAS7mC,KAAKmK,WAAWu8B,GAAU,CAAA,CAAK,EAC/D1mC,KAAK68B,oBAAoBgK,EAAS7mC,KAAKmK,WAAWu8B,GAAU,CAAA,CAAK,GAErED,EAAUzmC,KAAKK,OAAO6S,QAAQG,cAAc+yB,CAAW,EAAElyB,mBACzD,GAAGlB,MAAMC,KAAKwzB,EAAQxnB,QAAQ,EAAE/Z,QAAQ,SAAU0Q,GAC9C,IAAI+rB,EAAcroB,gBAAc,MAAO,CAAEC,UAAW+I,EAAwB,EAC5E1M,EAAKyD,YAAYsoB,CAAW,EAC5BA,EAAYtoB,YAAYpV,EAAM26B,iBAAiB,EAClD,IAG+B,UAApC5+B,KAAKK,OAAOyJ,aAAaE,QACrBq8B,EAAUrmC,KAAKK,OAAOkF,aAAaC,YACC,WAApCxF,KAAKK,OAAOyJ,aAAaE,SACzBq8B,EAAUrmC,KAAKK,OAAOyJ,aAAaC,OAGnChG,EADAwS,oBAAMvW,KAAKK,OAAO6J,iBAAiBlJ,QAAQ,EACnChB,KAAKic,cAAczQ,EAAKxL,KAAKK,OAAOD,UAAU,EAAEuF,UAAU,SAAUmhC,GACxE,OAAOA,EAAQ,GAAKT,KAAa5iC,EAAK,GAAK4iC,GAC9C,GAGG/oB,EAAgBtd,KAAKK,OAAOkd,gBAAgB9Z,EAAKzD,KAAKK,OAAO6J,iBAAiBlJ,SAAS,EACnFhB,KAAKic,cAAczQ,EAAK8R,CAAa,EAAE3X,UAAU,SAAUmhC,GAAW,OAAOA,EAAQ,GAAKT,KAAa5iC,EAAK,GAAK4iC,GAAW,IAG/F,UAApCrmC,KAAKK,OAAOyJ,aAAaE,QAC9BhK,KAAKK,OAAOyJ,aAAaC,OAAgD,cAAvC/J,KAAKK,OAAOyJ,aAAaG,YAC3DlG,EAAQN,EAAKzD,KAAKK,OAAOyJ,aAAaC,OAAS,GAE/C08B,IACI9Z,EAAK,GAAG3Z,MAAMC,KAAKwzB,EAAQxnB,QAAQ,EAAE3Z,OAAO,SAAUY,GACtD,MAA+G,CAAC,IAAzGA,EAAE8N,aAAa,UAAU,EAAE+yB,QAAQ,MAAO,EAAE,EAAE7lC,MAAM,GAAG,EAAE6V,QAAQvL,EAAIvK,WAAW8lC,QAAQ,MAAO,EAAE,CAAC,EAC5G,EAAE,IAECR,GADAD,EAAgB3Z,EAAGtZ,cAAc,IAAMiP,CAAsB,GACnCjP,cAAc,IAAMqtB,EAAoB,IAElE13B,SAAOu9B,CAAS,EAEhBC,EAAgBxmC,KAAKy+B,WAAWh7B,CAAI,EACpCzD,KAAKK,OAAO+kB,kBAAoBuH,EAAG1a,UAAUC,SAAS+qB,EAAc,IACpEj9B,KAAKK,OAAO40B,kBAAkBtX,eAAe6oB,CAAa,EAC1DxvB,WAAS,CAACwvB,GAAgBrJ,CAAmB,GAGjDn9B,KAAKK,OAAOwE,QAAQ65B,EADT,CAAEj7B,KAAMA,EAAMyP,QAASszB,EAAel+B,OAAQ,CAAA,GACV,SAAUq2B,GAChDA,EAASr2B,SACNiO,oBAAMxS,CAAK,GAAuC,IAAlCuiC,EAAcrnB,SAASne,OACvCwlC,EAAcjtB,YAAYmtB,CAAa,EAGvCF,EAAcvD,aAAayD,EAAeF,EAAcra,WAAWloB,EAAM,GAGpF,IAGTs1B,EAAaz5B,UAAU8J,WAAa,SAAUjG,GAC1C,IAIQujC,EAJJC,EAAUxjC,EAAKzD,KAAKK,OAAOkF,aAAaC,aACxC6W,EAAcrc,KAAKK,OAAO6S,QAAQG,cAAc,oBAAuC4zB,EAAU,IAAK,EACtG5qB,IACArc,KAAK2J,eAAiB0S,CAAAA,CAAAA,EAAYpK,UAAUC,SAAS8C,CAAwB,EACzEgyB,EAAgB3qB,EAAY7D,cAChCxP,SAAOqT,CAAW,EAC2F,IAAzG2qB,EAAc7zB,iBAAiB,gBAAkC+L,GAAwB,GAAG,EAAEpe,SAC9FkmC,EAAc3tB,YAAYrZ,KAAK4+B,iBAAiB,GAI5DvF,EAAaz5B,UAAUi6B,WAAa,WAChC,IAAI51B,EAAQjE,KAIRyqB,GAHJnK,eAAaR,IAAI9f,KAAKK,OAAO6S,QAAS,QAASlT,KAAKK,OAAOuJ,aAAakI,aAAc9R,KAAKK,OAAOuJ,YAAY,EAC9G0W,eAAaR,IAAI9f,KAAKK,OAAO6S,QAAS,WAAYlT,KAAKK,OAAOuJ,aAAa6K,mBAAoBzU,KAAKK,OAAOuJ,YAAY,EACvH0W,eAAaR,IAAIS,SAAU0lB,UAAQiB,gBAAiBlnC,KAAKqlC,cAAerlC,IAAI,EAC9DA,KAAKK,OAAO6S,QAAQG,cAAc,IAAMoI,CAAiB,GACvE6E,eAAaR,IAAI2K,EAAS,SAAUzqB,KAAKkiC,gBAAiBliC,IAAI,EAC5C,GAAGgT,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAMmP,CAAsB,CAAC,EACtFpd,QAAQ,SAAUsoB,GACtBvpB,EAAM5D,OAAOy5B,iBAAmBtM,EAAQ+V,eACxCt/B,EAAM5D,OAAO8hC,eAAephC,OAAOysB,EAAQ+V,aAAavvB,aAAa,UAAU,GAAK,CAAEqK,KAAM,EAAGD,IAAK,IAExGkC,eAAaR,IAAI0N,EAAS,SAAUvpB,EAAMq/B,eAAgBr/B,CAAK,EAClE,EACGjE,KAAKK,OAAOgV,aACZrV,KAAKK,OAAOiV,YAAYggB,kBACxB7K,EAAQhB,WAAazpB,KAAKypB,YAE9BzpB,KAAK0lC,iBAETrM,EAAaz5B,UAAUunC,aAAe,WAClC,IAAIljC,EAAQjE,KAIRyqB,GAHJnK,eAAatX,OAAOhJ,KAAKK,OAAO6S,QAAS,QAASlT,KAAKK,OAAOuJ,aAAakI,YAAY,EACvFwO,eAAatX,OAAOhJ,KAAKK,OAAO6S,QAAS,WAAYlT,KAAKK,OAAOuJ,aAAa6K,kBAAkB,EAChG6L,eAAatX,OAAOuX,SAAU0lB,UAAQiB,gBAAiBlnC,KAAKqlC,aAAa,EAC3DrlC,KAAKK,OAAO6S,QAAQG,cAAc,IAAMoI,CAAiB,GAOnEkmB,GANAlX,IACAnK,eAAatX,OAAOyhB,EAAS,SAAUzqB,KAAKkiC,eAAe,EACvDliC,KAAKK,OAAO+kB,mBACZplB,KAAKonC,kBAGK,GAAGp0B,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAMmP,CAAsB,CAAC,GACzE,EAArBqf,EAAY7gC,QACZ6gC,EAAYz8B,QAAQ,SAAUsoB,GAAWlN,eAAatX,OAAOwkB,EAAS,SAAUvpB,EAAMq/B,cAAc,EAAI,EAExGtjC,KAAKK,OAAOgV,YACZrV,KAAKK,OAAOiV,YAAY+hB,qBAGhCgC,EAAaz5B,UAAU8lC,cAAgB,WACnC,IAEQ/rB,EAFJ1V,EAAQjE,KACRA,KAAKK,OAAO+kB,mBACRzL,EAAQ,GAAG3G,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAMY,EAC/D,IAAMkpB,GAAiB,KAAO9qB,CAAc,CAAC,EACnD6E,WAAS2C,EAAOwjB,CAAmB,EACnCxjB,EAAMzU,QAAQ,SAAU+O,GAAQ,OAAOhQ,EAAM5D,OAAO40B,kBAAkBtX,eAAe1J,CAAI,EAAI,IAGrGolB,EAAaz5B,UAAUwnC,gBAAkB,WACrC,IAAInjC,EAAQjE,KACR2Z,EAAQ,GAAG3G,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAMY,EAC/D,IAAMkpB,GAAiB,KAAO9qB,CAAc,CAAC,EACnD8C,cAAY0E,EAAOwjB,CAAmB,EACtCxjB,EAAMzU,QAAQ,SAAU+O,GAAQ,OAAOhQ,EAAM5D,OAAO40B,kBAAkBnL,iBAAiB7V,CAAI,EAAI,GAEnGolB,EAAaz5B,UAAUoqB,QAAU,WAC7BhqB,KAAKK,OAAO+0B,iBACZp1B,KAAKK,OAAOgnC,IAAIxgC,EAAkB7G,KAAKs5B,UAAU,EACjDt5B,KAAKK,OAAOgnC,IAAI98B,EAAqBvK,KAAKw5B,cAAc,EACxDx5B,KAAKmnC,eACL,IAAIrc,EAAS9qB,KAAKK,OAAO6S,QAAQG,cAAc,IAAMmI,CAAgB,EAIjEiP,GAHAK,GACA9hB,SAAO8hB,CAAM,EAEH9qB,KAAKK,OAAO6S,QAAQG,cAAc,IAAMoI,CAAiB,GAYnE6rB,GAXA7c,GACAzhB,SAAOyhB,CAAO,EAEdzqB,KAAKu4B,cACLv4B,KAAKu4B,YAAYvO,UACjBhqB,KAAKu4B,YAAc,MAEnBv4B,KAAK+4B,YACL/4B,KAAK+4B,UAAU/O,UACfhqB,KAAK+4B,UAAY,MAEI/4B,KAAKK,OAAO6S,QAAQG,cAAc,IAAMokB,CAAyB,GAItF8P,GAHAD,GACAt+B,SAAOs+B,CAAkB,EAEPtnC,KAAKK,OAAO6S,QAAQG,cAAc,IAAM6kB,EAA0B,GAIpFsP,GAHAD,GACAv+B,SAAOu+B,CAAe,EAEFvnC,KAAKK,OAAO6S,QAAQG,cAAc,IAAMP,EAA6B,GACzF00B,IACAx+B,SAAOw+B,CAAiB,EACxBxnC,KAAKoT,kBAAoB,OA3pCrC,IACQ5I,GAqBoCQ,GAAxCquB,GAwoCOA,EAtoCP,SAASA,EAAah5B,GAClB,IAAI4D,EAAQ+G,GAAOiI,KAAKjT,KAAMK,CAAM,GAAKL,KAUzC,OATAiE,EAAMkG,WAAa,GACnBlG,EAAM5D,OAASA,EACf4D,EAAM0e,WAAa,GACnB1e,EAAMmjB,cAAgB,EACtBnjB,EAAMoG,aAAe,GACrBpG,EAAMwlB,WAAa,EACnBxlB,EAAMsP,YAAc,EACpBtP,EAAM5D,OAAOk5B,GAAG1yB,EAAkB5C,EAAMq1B,WAAYr1B,CAAK,EACzDA,EAAM5D,OAAOk5B,GAAGhvB,EAAqBtG,EAAMu1B,eAAgBv1B,CAAK,EACzDA,EClCPuG,GAAgB,SAAUC,EAAGC,GAI7B,OAHAF,GAAgBG,OAAOC,iBAClB,CAAEC,UAAW,cAAgBlC,MAAS,SAAU8B,EAAGC,GAAKD,EAAEI,UAAYH,GACvE,SAAUD,EAAGC,GAAK,IAAK,IAAII,KAAKJ,EAAOA,EAAEK,eAAeD,CAAC,IAAGL,EAAEK,GAAKJ,EAAEI,OACpDL,EAAGC,CAAC,IAEtB,SAAUD,EAAGC,GAEhB,SAASQ,IAAOlL,KAAKmL,YAAcV,EADnCD,GAAcC,EAAGC,CAAC,EAElBD,EAAE7K,UAAkB,OAAN8K,EAAaC,OAAOS,OAAOV,CAAC,GAAKQ,EAAGtL,UAAY8K,EAAE9K,UAAW,IAAIsL,KAczEu8B,EADqCz8B,GAq3CjDssB,EAp3CuC,EAmBrCmQ,EAAoB7nC,UAAU05B,WAAa,WAIvC,IAeIxO,EAlBJ9qB,KAAK0nC,WAAa,CAACnxB,oBAAMvW,KAAKK,OAAO6J,iBAAiBlJ,QAAQ,GACJ,EAAtDhB,KAAKK,OAAO6J,iBAAiBlJ,SAASO,OAAOT,OACjDd,KAAKD,MAAQC,KAAKK,OAAON,iBAAiBI,QAAQH,KAAKK,OAAON,MAAQ,IAAII,QACvC,IAA/BH,KAAKK,OAAOM,QAAQG,SAGxBd,KAAK4B,WAAa5B,KAAK2nC,sBACvB3nC,KAAKuJ,WAAavJ,KAAKwJ,iBACvBxJ,KAAKmK,WAAanK,KAAKoK,UACnBpK,KAAKK,OAAOgV,aACR4T,EAAWjpB,KAAKK,OAAO6S,QAAQG,cAAc,IAAMoI,CAAiB,KAEpEzb,KAAKypB,WAAaR,EAASQ,YAGnCzpB,KAAKgqB,UACLhqB,KAAKK,OAAOk5B,GAAG1yB,EAAkB7G,KAAKs5B,WAAYt5B,IAAI,EACtDA,KAAKK,OAAOk5B,GAAGhvB,EAAqBvK,KAAKw5B,eAAgBx5B,IAAI,EACzD8qB,EAASxR,gBAAc,MAAO,CAAEC,UAAWiC,EAAkB,EACjExb,KAAKK,OAAO6S,QAAQmG,YAAYyR,CAAM,EACtC9qB,KAAKy5B,aAAa3O,CAAM,EACnB9qB,KAAK0nC,aACN1nC,KAAK05B,gBACL15B,KAAK25B,eAET35B,KAAK45B,mBACL55B,KAAKK,OAAO6G,kBACZlH,KAAKK,OAAOuG,OAAO2D,EAAqB,EAAE,EAC1CvK,KAAK65B,aACD75B,KAAKK,OAAOy5B,mBACZ95B,KAAKK,OAAOy5B,gBAAkB,CAAA,IAGtC2N,EAAoB7nC,UAAU+nC,oBAAsB,WAChD,IAEI/lC,EAD2B,SAA3B5B,KAAKK,OAAOuB,WACC,IAGAC,SAASC,aAAW9B,KAAKK,OAAOuB,UAAU,EAAEV,MAAM,IAAI,EAAE,GAAI,EAAE,EAAI,EAEnF,OAAOU,GAEX6lC,EAAoB7nC,UAAU65B,aAAe,SAAU3O,GA+EnD,IA9EA,IAAIiP,EAAazgB,gBAAc,MAAO,CAAEC,UAAWvZ,KAAKK,OAAO6J,iBAAiBlJ,SAAWg5B,GAAqB,GAAI,EAEhHC,GADJnP,EAAOzR,YAAY0gB,CAAU,EACXzgB,gBAAc,QAAS,CACrCC,UAAW5B,GAAkB,IAAMuiB,GACnCxV,MAAO,CAAE4V,KAAQ,gBACpB,GAGGH,GAFJJ,EAAW1gB,YAAY4gB,CAAW,EAClCj6B,KAAKo6B,eAAeH,CAAW,EACf3gB,gBAAc,OAAO,GAKjCoT,GAJJuN,EAAY5gB,YAAY8gB,CAAS,EACO,EAApCn6B,KAAKK,OAAOk6B,eAAez5B,QAC3Bq5B,EAAU9gB,YAAYrZ,KAAKw6B,iBAAiBx6B,KAAKK,OAAOk6B,cAAc,CAAC,EAElEjhB,gBAAc,KAAM,CAAEC,UAAWkhB,GAAsB,GAgE5D3hB,GA/DJqhB,EAAU9gB,YAAYqT,CAAE,EA+DX1sB,MACJY,EAAK,EAAGC,EAAKb,KAAKK,OAAOM,QAASC,EAAKC,EAAGC,OAAQF,CAAE,GAEzDwX,CAjEU,SAAUrX,GACpB,IACQgD,EACA22B,EAYAC,EAEAC,EA0BIC,EAEAC,EAQJC,EApDJjiB,EAAO+U,gBAAgB9sB,CAAM,IACzBgD,EAAQ+U,EAAOzY,OAAOuJ,aAAa+O,kBAAkB5B,QAAQhW,EAAOC,SAASC,UAAU,EACvFy5B,EAAOphB,gBAAc,KAAM,CAC3BC,UAAqB,CAAC,IAAXxV,EAAemT,EAAyBA,EAAyB,IAAML,EAClF6N,MAAO,CAAEsW,YAAa,gBAAiBrW,WAAY5jB,EAAOC,SAASC,YACtE,EACGgR,EAAY,GACZlR,EAAOm6B,cACPjpB,EAAU3Q,KAAKga,EAA2B,EACrCva,EAAO8X,YACR5G,EAAU3Q,KAAKuV,CAAmB,GAG1CG,WAAS,CAAC0jB,GAAOzoB,CAAS,EACtB0oB,EAAgBrhB,gBAAc,MAAO,CAAEC,UAAW4hB,GAAuB,EAC7ET,EAAKrhB,YAAYshB,CAAa,EAC1BC,EAAW9hB,EAAOzY,OAAO0I,WAAWzI,WACpCwY,EAAOzY,OAAOmH,gBAAgBzG,EAAOC,UAAY8X,EAAOvP,WAAWxI,EAAOC,UAAUF,OACpFs6B,EAAc9hB,gBAAc,MAAO,CAAEC,UAAW8hB,GAAwB,EAC5EV,EAActhB,YAAY+hB,CAAW,EACjCr6B,EAAOgrB,UACHuP,EAAe,CACft6B,SAAUD,EAAOC,SAAUoY,WAAYrY,EAAOqY,WAAYmiB,SAAUx6B,EAAOw6B,SAAUC,SAAUz6B,EAAOy6B,SACtGN,YAAan6B,EAAOm6B,YAAariB,WAAY9X,EAAO8X,WAAYM,cAAepY,EAAOoY,cAAe9R,MAAOuzB,GAEhH5jB,WAAS,CAAC0jB,GAAOe,EAAkB,EAC/BvP,EAAapT,EAAOzY,OAAO6S,QAAQS,GAAK,kBACxC+nB,EAAiB5iB,EAAOzY,OAAO+rB,eAAerrB,EAAOgrB,QAAQ,EAAEuP,EAAcxiB,EAAOzY,OAAQ,iBAAkB6rB,EAAY,CAAA,CAAK,EACnIG,SAAOqP,EAAgBN,CAAW,IAG9BO,EAAWriB,gBAAc,MAAO,CAAEC,UAAWqiB,GAAuBpiB,UAAWzY,EAAOqY,WAAY,EACtGgiB,EAAY/hB,YAAYsiB,CAAQ,EAC5B56B,EAAOoY,gBACH0iB,EAAYviB,gBAAc,MAAO,CACjCC,UAAWuiB,GACXtiB,UAAW,KAAOohB,EAAS35B,WAAa,IAAM6X,EAAOzY,OAAO+f,UAAUC,YAAY,OAAO,EAC5F,EACD+a,EAAY/hB,YAAYwiB,CAAS,IAGrC96B,EAAOm6B,cACHL,EAAW,EAAC95B,CAAAA,EAAO8X,YAAwB,CAAC,IAAX9U,IAEjC+2B,EAAOxhB,gBAAc,MAAO,CAC5BC,UAAWhH,GAAwB,IAAMe,GAAiB,KAFjD,EAAasE,GAA0BC,IAGhD6M,MAAO,CAAEqX,SAAY,KACxB,GACIlmB,aAAa,aAAcglB,EAAW95B,EAAOC,SAAW,UAAYD,EAAOC,SAAW,WAAW,EACtG05B,EAAK7kB,aAAa,gBAAiBglB,EAAS55B,UAAU,EACtD05B,EAActhB,YAAYyhB,CAAI,GAE9BC,EAAU,CAAC,CAAE/5B,SAAUD,EAAOC,SAAUg7B,UAAWj7B,EAAOqY,WAAY/R,MAAOuzB,IAEjF9hB,EAAOzY,OAAOwE,QAAQo3B,EADX,CAAEx4B,KAAMs3B,EAAS7nB,QAASwZ,EAAIpkB,OAAQ,CAAA,EAAO1F,YAAa,aACnB,SAAUs5B,GACnDA,EAAW5zB,QACZokB,EAAGrT,YAAYqhB,CAAI,EAE1B,IAKQ75B,EAAGD,EACF,GAGtB6mC,EAAoB7nC,UAAU85B,cAAgB,WAc1C,IAbA,IAAIjP,EAAUnR,gBAAc,MAAO,CAAEC,UAAWkC,EAAmB,EAE/D0gB,GADJn8B,KAAKK,OAAO6S,QAAQmG,YAAYoR,CAAO,EACrBnR,gBAAc,MAAO,CAAEC,UAAWvZ,KAAKK,OAAO6J,iBAAiBlJ,SAAWg5B,GAAqB,GAAI,GAEjHoC,GADJ3R,EAAQpR,YAAY8iB,CAAW,EACZ7iB,gBAAc,QAAS,CACtCC,UAAW5B,GAAkB,IAAM0kB,GACnC3X,MAAO,CAAE4V,KAAQ,gBACpB,GAGGkC,GAFJL,EAAY9iB,YAAY+iB,CAAY,EACpCp8B,KAAKo6B,eAAegC,CAAY,EACpB9iB,gBAAc,OAAO,GAE7BmjB,GADJL,EAAa/iB,YAAYmjB,CAAK,EACX,CAAA,GACV57B,EAAK,EAAGC,EAAKb,KAAKmK,WAAYvJ,EAAKC,EAAGC,OAAQF,CAAE,GAAI,CACzD,IAAIyX,EAAMxX,EAAGD,GACTZ,KAAKK,OAAO6J,iBAAiBlJ,UAAuD,IAA3ChB,KAAKK,OAAOyW,oBAAoBhW,SAEzE27B,EAAyB,CAAC,IADdz8B,KAAKK,OAAOyW,oBAAoBC,QAAQsB,EAAIrX,QAAQ,GAGpEhB,KAAK68B,oBAAoBL,EAAOnkB,EAAKokB,CAAY,IAGzDgL,EAAoB7nC,UAAUi9B,oBAAsB,SAAUL,EAAOnkB,EAAKokB,GAGtE,IAFA,IACI/P,EAAKpT,gBAAc,KAAM,CAAEC,UADfkjB,EAAehqB,EAAwB,IAAMoE,EAAsBpE,EAC9BiS,MAAO,CAAEmZ,gBAAiB,QAAU,EAChFj9B,EAAK,EAAGC,EAAKb,KAAKK,OAAOM,QAASC,EAAKC,EAAGC,OAAQF,CAAE,GAAI,CAC7D,IAMQ+rB,EAcImQ,EApBR/7B,EAASF,EAAGD,GACZZ,KAAK6tB,gBAAgB9sB,CAAM,IACvBgD,EAAQ/D,KAAKK,OAAOuJ,aAAa+O,kBAAkB5B,QAAQhW,EAAOC,SAASC,UAAU,EAErF87B,GAAah8B,EAAOi8B,UAAY,IAAMC,GAAiB,KAAOl8B,EAAOm8B,UAAY,WACzEC,EAAsB,IAC9BxQ,EAAKrT,gBAAc,KAAM,CACzBC,WAJwB,CAAC,IAAXxV,EAAegQ,EAA0BA,EAA0B,IAAM8C,GAI9DkmB,EACzBrY,MAAO,CAAEsW,YAAa,gBAAiBrW,WAAY5jB,EAAOC,SAASC,WAAY48B,gBAAiB,OAC5F9B,SAAY,IAAKzB,KAAQ,cAChC,GACGv5B,EAAOm6B,aAAe,CAACn6B,EAAO8X,YAAwB,CAAC,IAAX9U,KAC5CiT,WAAS,CAAC2V,GAAK9V,CAAmB,EAC9BqC,GAAQnY,EAAOoY,cAAgB,KAAOnZ,KAAKK,OAAO0I,WAAWzI,WAC7DN,KAAKK,OAAOmH,gBAAgBzG,EAAOC,UAAYhB,KAAKic,cAAclb,EAAOC,QAAQ,EAAEF,QACnF,KAAO,IAAMC,EAAOqY,WACxBuT,EAAGtT,YAAYC,gBAAc,MAAO,CAAEC,UAAWhB,GAAgCiB,UAAWN,EAAM,CAAC,EACnGyT,EAAG9W,aAAa,gBAAiB,OAAO,GAExC9U,EAAOs8B,iBACHP,EAASxjB,gBAAc,MAAO,CAAEC,UAAW3G,EAAqB8R,MAAO,CAAEqX,SAAY,MAAQ,GAC1F1iB,YAAYC,gBAAc,MAAO,CAAEC,UAAW+jB,GAAoB,IAAMhqB,GAAgB,CAAC,EAChGqZ,EAAGtT,YAAYyjB,CAAM,GAEzBpQ,EAAGrT,YAAYsT,CAAE,EACb3sB,KAAKK,OAAOsB,wBACRimC,EAAe5nC,KAAKK,OAAO6S,QAAQG,cAAc,kBAAkB,EAAEqF,wBAAwB1W,OAEtE,SAAvBhC,KAAKK,OAAO2B,OACZ2qB,EAAG3U,MAAMhW,OAASG,OAAOC,aAAewlC,EAAe5nC,KAAKK,OAAO6S,QAAQwF,wBAAwB0F,IAAM,IAAM,KAG/GuO,EAAG3U,MAAMhW,OAASH,SAASC,aAAW9B,KAAKK,OAAO2B,MAAM,EAAEd,MAAM,IAAI,EAAE,GAAI,EAAE,GAAK0mC,EAAe,IAAM,MAKlH7M,EAAU,CAAC,CAAE/5B,SAAUqX,EAAIrX,SAAUg7B,UAAW3jB,EAAI2jB,UAAW30B,MAAOgR,EAAIhR,QAE9ErH,KAAKK,OAAOwE,QAAQo3B,EADT,CAAEx4B,KAAMs3B,EAAS7nB,QAASwZ,EAAIpkB,OAAQ,CAAA,EAAO1F,YAAa,cACrB,SAAUs5B,GACjDA,EAAW5zB,SACRk0B,EAAMvqB,UAAUC,SAAS,gBAAgB,EACzCsqB,EAAM7b,sBAAsB,cAAe+L,CAAE,EAG7C8P,EAAMnjB,YAAYqT,CAAE,GAG/B,GAEL+a,EAAoB7nC,UAAUioC,aAAe,WAGzC,IAFA,IAAIC,EAAgB9nC,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAMY,CAAuB,EAClF6zB,EAAe5nC,KAAKK,OAAO6S,QAAQG,cAAc,kBAAkB,EAAEqF,wBAAwB1W,OACxFwb,EAAI,EAAGA,EAAIsqB,EAAchnC,OAAQ0c,CAAC,GACZ,SAAvBxd,KAAKK,OAAO2B,OACZ8lC,EAActqB,GAAGxF,MAAMhW,OAASG,OAAOC,aAAewlC,EAAe5nC,KAAKK,OAAO6S,QAAQwF,wBAAwB0F,IAAM,IAAM,KAG7H0pB,EAActqB,GAAGxF,MAAMhW,OAASH,SAASC,aAAW9B,KAAKK,OAAO2B,MAAM,EAAEd,MAAM,IAAI,EAAE,GAAI,EAAE,GAAK0mC,EAAe,IAAM,MAIhIH,EAAoB7nC,UAAU8I,kBAAoB,SAAUwd,EAAkBC,EAAkBvjB,EAAamlC,GACzG,IAAI9jC,EAAQjE,KACRi+B,EAAW,GAAGjrB,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,qCAAqC,CAAC,EACpG60B,GAA0B,gBAAhBplC,GAAiD,gBAAhBA,GAAiD,gBAAhBA,IACzE,CAAC2T,oBAAMwxB,CAAY,EAC1B9J,EAAS/4B,QAAQ,SAAUwnB,GA4CvB,IA3CA,IA2CS9rB,EAAK,EAAGC,EAAKoD,EAAM5D,OAAOM,QAASC,EAAKC,EAAGC,OAAQF,CAAE,GAE1DoY,CA7CU,SAAUjY,GACpB,GAAIkD,EAAM4pB,gBAAgB9sB,CAAM,IAAMA,EAAOC,WAAaklB,GAAoBnlB,EAAOC,WAAamlB,IAC3F6hB,EAAQ,CACX,IAAIC,EAAU,EAEV1+B,EAAatF,EAAMuF,iBAAiBzI,EAAOC,UAC3CknC,EAAyBjkC,EAAM5D,OAAO0I,WAAWzI,WACjD2D,EAAM5D,OAAOmH,gBAAgBzG,EAAOC,UAAYuI,EAAWzI,OAC3DqnC,EAAgBlkC,EAAMrC,WAAasmC,EAEvCE,EAASz/B,MAAMyD,MAAM,KAAMzD,MAAMu/B,CAAsB,CAAC,EAAEt0B,IAAI,WAAc,MAAO,EAAEq0B,EAAU,EAC3F5J,EAAgB3R,EAAGrZ,cAAc,cAAgBtS,EAAOC,SAAW,IAAI,EACvEqnC,EAAuBpmC,KAAKC,KAAKL,SAASw8B,EAAcrmB,MAAMhW,OAAOd,MAAM,IAAI,EAAE,GAAI,EAAE,EAAI+C,EAAMrC,UAAU,EAC/GqC,EAAMqkC,QAAQ,GAAKD,EAAuBpkC,EAAMrC,WAChD,IAAK,IAAIS,EAAI,EAAGA,EAAI+lC,EAAOtnC,OAAQuB,CAAC,GAChC4B,EAAMqkC,QAAQF,EAAO/lC,IAAO4B,EAAMqkC,QAAQF,EAAO/lC,EAAI,IAAQgmC,EAAuBpkC,EAAMrC,WAC1FqC,EAAMskC,YAAYH,EAAO/lC,IAAqC,EAA/B4B,EAAMqkC,QAAQF,EAAO/lC,GAAK,GAE7D,IAAIs/B,EAActD,EAAchrB,cAAc,IAAMiP,CAAsB,EACtEkmB,EAAWN,EAAyB,GAAM,EAAIA,EAAyB,EAAIA,EAAyB,EACpGO,EAAWxkC,EAAMykC,gBAAgBzkC,EAAM0kC,aAAa5nC,EAAOC,SAAS,EACpE4nC,EAAa3kC,EAAM4kC,cAAcJ,CAAQ,EACzCK,EAAqBnH,EAAYtuB,cAAc,IAAMkP,EAA8B,EACvFumB,EAAmB9wB,MAAMyW,UAAYyZ,EAAyBjkC,EAAMrC,WAAa,KACjFqC,EAAM8kC,WAAWH,EAAYE,EAAoBZ,CAAsB,EACvEjkC,EAAM+kC,cAAgB,CAClBjoC,OAAQA,EAAOC,SACfioC,oBAAqBd,EACrBe,aAAcrnC,SAASw8B,EAAcrmB,MAAMhW,OAAOd,MAAM,IAAI,EAAE,GAAI,EAAE,EACpEioC,kBAAmBllC,EAAM0kC,aAAa5nC,EAAOC,UAAUooC,iBACvDA,iBAAkBzH,EAAYpY,UAC9B8f,gBAAiBplC,EAAM0kC,aAAa5nC,EAAOC,UAAUqoC,gBACrDC,kBAAmBrlC,EAAM0kC,aAAa5nC,EAAOC,UAAUsoC,kBACvDC,cAAetlC,EAAM0kC,aAAa5nC,EAAOC,UAAUuoC,cACnDjB,QAASrkC,EAAMqkC,QACfC,YAAatkC,EAAMskC,YACnBiB,gBAAiBtB,EACjBG,qBAAsBA,EACtBG,SAAUA,GAEdvkC,EAAM0kC,aAAa5nC,EAAOC,UAAYiD,EAAM+kC,gBAInCnoC,EAAGD,EACF,EAErB,GAEL6mC,EAAoB7nC,UAAU+5B,YAAc,WACxC,IAAI11B,EAAQjE,KACRi+B,EAAW,GAAGjrB,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,qCAAqC,CAAC,EACpGJ,EAAe,GAAGC,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,+BAA+B,CAAC,EAClG+qB,EAAY,GACZC,EAAmB,CAAA,EACvBF,EAAS/4B,QAAQ,SAAUwnB,EAAI3oB,GAoF3B,IAnFA,IAAIq6B,EAAY,EACZG,EAAU,SAAUx9B,GACpB,GAAIkD,EAAM4pB,gBAAgB9sB,CAAM,EAAG,CAC/B,IAAI0oC,EAAU,EAKVlgC,GAFJtF,EAAMqkC,QAAU,GAChBrkC,EAAMskC,YAAc,GACHtkC,EAAMsF,WAAWxI,EAAOC,WACrCknC,EAAyBjkC,EAAM5D,OAAO0I,WAAWzI,WAC/C2D,EAAM5D,OAAOmH,gBAAgBzG,EAAOC,UAAYuI,EAAWzI,OAE7DqnC,GADJ/J,GAAa8J,EACQjkC,EAAMrC,WAAasmC,EAA0B,GAC9D7J,EAAgB3R,EAAGrZ,cAAc,cAAgBtS,EAAOC,SAAW,IAAI,EACvEqnC,EAAuBpmC,KAAKC,KAAKwnC,WAAWrL,EAAcrmB,MAAMhW,OAAOd,MAAM,IAAI,EAAE,EAAE,EAAI+C,EAAMrC,UAAU,EACzG+nC,EAA4CzB,EAAvBG,EAAgDH,EACrEjmC,KAAK2nC,MAAM1B,EAAyBG,CAAoB,EAE5DD,EAASz/B,MAAMyD,MAAM,KAAMzD,MAAMu/B,CAAsB,CAAC,EAAEt0B,IAAI,WAAc,MAAO,EAAE61B,EAAU,EAC/FxlC,EAAMqkC,QAAQ,GAAKD,EAAuBpkC,EAAMrC,WAAa,EAC7D,IAAK,IAAIS,EAAI,EAAGA,EAAI+lC,EAAOtnC,OAAQuB,CAAC,GAChC4B,EAAMqkC,QAAQF,EAAO/lC,IAAO4B,EAAMqkC,QAAQF,EAAO/lC,EAAI,IAAQgmC,EAAuBpkC,EAAMrC,WAC1FqC,EAAMskC,YAAYH,EAAO/lC,IAAqC,EAA/B4B,EAAMqkC,QAAQF,EAAO/lC,GAAK,GAE7D,IAAIs/B,EAAcroB,gBAAc,MAAO,CACnCC,UAAW+I,EAAwBoC,MAAO,CAAE4V,KAAQ,WACvD,EACGuP,EAAuBvwB,gBAAc,MAAO,CAC5CC,UAAWgJ,GAAgCmC,MAAO,CAAE4V,KAAQ,WAC/D,EAEGkO,GADJ7G,EAAYtoB,YAAYwwB,CAAoB,EAC7BF,EAAqB,GAAM,EAAIA,EAAqBA,EAAqB,GAyBxF,GAxBA1lC,EAAM+kC,cAAgB,CAClBjoC,OAAQA,EAAOC,SACfioC,oBAAqBd,EACrBe,aAAcrnC,SAASw8B,EAAcrmB,MAAMhW,OAAOd,MAAM,IAAI,EAAE,GAAI,EAAE,EACpEioC,kBAAmB,KACnBC,iBAAkBzH,EAAYpY,UAC9B8f,gBAAiB,KACjBC,kBAAmB,CAAC,EAAG,GACvBC,cAAe,CAAC,EAAG,GACnBjB,QAASrkC,EAAMqkC,QACfC,YAAatkC,EAAMskC,YACnBiB,gBAAiBtB,EACjBG,qBAAsBA,EACtBG,SAAUA,GAEdvkC,EAAM0kC,aAAa5nC,EAAOC,UAAYiD,EAAM+kC,cAIxC,EAFA7K,EADkC,EAAlCp9B,EAAOujB,kBAAkBxjB,OACN,CAAA,EAElBq9B,IAAoB5nB,oBAAMtS,EAAM5D,OAAO6J,iBAAiBlJ,QAAQ,IAC7D8f,EAAaxH,gBAAc,MAAO,CAAEC,UAAWpF,GAAkB,EACrEkqB,EAAchlB,YAAYyH,CAAU,GAExCud,EAAchlB,YAAYsoB,CAAW,EACR,EAAzBuG,EAA4B,CAgB5B,IAAS7lC,EApEY,EAoEYA,EAA2B,EAAvBgmC,GAA4BhmC,EAAIkH,EAAWzI,OAAQuB,CAAC,GACrFuiC,CAhBU,SAAUviC,GACpB,IAAIm8B,EAAWj1B,EAAWlH,GAAG4B,EAAM5D,OAAOkF,aAAaC,aACnDmX,EAAY1Y,EAAM5D,OAAOuJ,aAAaqQ,eAAelD,QAAQynB,CAAQ,EACrEniB,EAAcpY,EAAMw6B,WAAWl1B,EAAWlH,EAAE,EAK5CyB,GAJc,CAAC,IAAf6Y,IACAN,EAAYxG,aAAa,gBAAiB,MAAM,EAChDmB,WAAS,CAACqF,GAAcrH,CAAwB,GAEzC,CAAEvR,KAAM8F,EAAWlH,GAAI6Q,QAASmJ,EAAa/T,OAAQ,CAAA,IAChErE,EAAM5D,OAAOwE,QAAQ65B,EAAqB56B,EAAM,SAAU66B,GACjDA,EAASr2B,QACVuhC,EAAqBxwB,YAAYgD,CAAW,EAEnD,GAGOha,CAAC,EAEbwnC,EAAqB7xB,MAAMyW,UAAYxqB,EAAMrC,WAAasmC,EAAyB,UAGnF2B,EAAqBxwB,YAAYpV,EAAM26B,iBAAiB,EAE5D36B,EAAM8kC,WAAW,EAAGc,EAAsB3B,CAAsB,IAG/DtnC,EAAK,EAAGC,EAAKoD,EAAM5D,OAAOM,QAASC,EAAKC,EAAGC,OAAQF,CAAE,GAE1D29B,EADa19B,EAAGD,EACF,EAEA,IAAdw9B,IACAF,EAAU58B,KAAKorB,CAAE,EACS,EAAtB3Z,EAAajS,SACbo9B,EAAU58B,KAAKyR,EAAahP,EAAM,EAG7C,EACI/D,KAAKK,OAAO6J,iBAAiBqc,cAAmD,IAAlCvmB,KAAKK,OAAOD,WAAWU,QAAiBd,KAAKK,OAAOw+B,iBACnGX,EAAUh5B,QAAQ,SAAUwnB,GAAM,OAAO1jB,SAAO0jB,CAAE,EAAI,GAG9D+a,EAAoB7nC,UAAU6+B,WAAa,SAAUh7B,GACjD,IAAI4Y,EAAc/C,gBAAc,MAAO,CACnCC,UAAWpH,EACXuS,MAAO,CACHoa,UAAWr7B,EAAKzD,KAAKK,OAAOkF,aAAaC,aAAcmf,WAAYlhB,EAAKzD,KAAKK,OAAOW,UACpF+9B,gBAAiB,QAAShD,SAAY,KAAMzB,KAAQ,UAE3D,EAED,GADAje,EAAYrE,MAAMhW,OAAShC,KAAK4B,WAAa,EAAI,KAC7C5B,KAAKK,OAAOkF,aAAawmB,SAAU,CACnC/U,WAAS,CAACqF,GAAcof,EAAkB,EAC1C,IAAIvP,EAAalsB,KAAKK,OAAO6S,QAAQS,GAAK,gBACtCsrB,EAAej/B,KAAKK,OAAO+rB,eAAepsB,KAAKK,OAAOkF,aAAawmB,QAAQ,EAAEtoB,EAAMzD,KAAKK,OAAQ,eAAgB6rB,EAAY,CAAA,CAAK,EACrIG,SAAO4S,EAAc5iB,CAAW,MAE/B,CACD,IAEQ6iB,EAEAV,EAJJW,EAAen/B,KAAKK,OAAO++B,cAAgB,IAAM1K,GAAyB,GAY1E2K,GAXAr/B,KAAKK,OAAOkF,aAAa+5B,aACrBJ,EAAa5lB,gBAAc,MAAO,CAAEC,UAAWgmB,GAAuB,EACtEC,EAAclmB,gBAAc,MAAO,CAAEC,UAAWkmB,GAA4B,EAC5EjB,EAAWllB,gBAAc,MAAO,CAChCC,UAAWmmB,GAA8BP,EACzC3lB,UAAW/V,EAAKzD,KAAKK,OAAOkF,aAAaC,cAAgB,GAC5D,EACD05B,EAAW7lB,YAAYmmB,CAAW,EAClCA,EAAYnmB,YAAYmlB,CAAQ,EAChCniB,EAAYhD,YAAY6lB,CAAU,GAEpB5lB,gBAAc,MAAO,CACnCC,UAAWomB,GAAyBR,EACpC3lB,UAAW/V,EAAKzD,KAAKK,OAAOkF,aAAaunB,eAAiB,GAC7D,GAED,GADAzQ,EAAYhD,YAAYgmB,CAAW,EAC/Br/B,KAAKK,OAAOkF,aAAaq6B,WAAan8B,EAAKzD,KAAKK,OAAOkF,aAAaq6B,WAAY,CAGhF,IAFA,IAAIC,EAAWvmB,gBAAc,MAAO,CAAEC,UAAWumB,GAAqB,EAE7Dl/B,EAAK,EAAGm/B,EADNt8B,EAAKzD,KAAKK,OAAOkF,aAAaq6B,WAAW3+B,WAAWC,MAAM,GAAG,EACxCN,EAAKm/B,EAAOj/B,OAAQF,CAAE,GAAI,CACtD,IAAIo/B,EAAMD,EAAOn/B,GACjBi/B,EAASxmB,YAAYC,gBAAc,MAAO,CACtCC,UAAW0mB,GAAqB,IAAMC,GAAsB1mB,UAAWwmB,EAC1E,CAAC,EAEN3jB,EAAYhD,YAAYwmB,CAAQ,EAMpC,GAJI7/B,KAAKK,OAAOkF,aAAa46B,cAAgB18B,EAAKzD,KAAKK,OAAOkF,aAAa46B,gBACvEnpB,WAAS,CAACqF,GAAc+jB,EAAoB,EAC5C/jB,EAAYrE,MAAMqoB,gBAAkB58B,EAAKzD,KAAKK,OAAOkF,aAAa46B,eAElEngC,KAAKK,OAAOkF,aAAa+6B,eAAgB,CAGzC,IAFA,IAAIC,EAAajnB,gBAAc,MAAO,CAAEC,UAAWinB,GAAuB,EAEjE3/B,EAAK,EAAGsjB,EADN1gB,EAAKzD,KAAKK,OAAOkF,aAAa+6B,gBAAgBp/B,MAAM,GAAG,EAClCL,EAAKsjB,EAAOrjB,OAAQD,CAAE,GAAI,CACtD,IAAI2K,EAAM2Y,EAAOtjB,GACjB0/B,EAAWlnB,YAAYC,gBAAc,MAAO,CACxCC,UAAW/N,EAAIjK,OAAS,IAAMk/B,GACjC,CAAC,EAENpkB,EAAYhD,YAAYknB,CAAU,GAG1C,OAAOlkB,GAEXorB,EAAoB7nC,UAAUg/B,gBAAkB,WAK5C,OAJgBtlB,gBAAc,OAAQ,CAClCC,UAAWmnB,GACXlnB,UAAWxZ,KAAKK,OAAO+f,UAAUC,YAAY,QAAQ,EACxD,GAGLonB,EAAoB7nC,UAAUw6B,eAAiB,SAAU7N,GACrD,IAAItoB,EAAQjE,KACR8X,EAAWwB,gBAAc,UAAU,EACvCtZ,KAAKK,OAAOM,QAAQuE,QAAQ,SAAUnE,GAClC,IAEQ4/B,EAEA5oB,EAJJ9T,EAAM4pB,gBAAgB9sB,CAAM,IACxBgD,EAAQE,EAAM5D,OAAOuJ,aAAa+O,kBAAkB5B,QAAQhW,EAAOC,SAASC,UAAU,EACtF0/B,EAAW5/B,EAAOm6B,aAAe,CAACn6B,EAAO8X,WAEzCd,EAAMuB,gBAAc,MAAO,CAC3BC,UAFsB,CAAC,IAAXxV,GAAgB48B,EAAuC9pB,EAAN,GAG7D6N,MAAO,CAAEC,WAAY5jB,EAAOC,SAASC,YACrCse,OAAQtb,EAAM5D,OAAOgV,WAAa,WAC7BsrB,EAAW7+B,alBzcX,EkBycwC,EAAIA,aAAWmC,EAAMiU,UAAU,GAAK,GACpF,EACDJ,EAASuB,YAAYtB,CAAG,GAE/B,EACDwU,EAAMlT,YAAYvB,CAAQ,GAE9B2vB,EAAoB7nC,UAAUwK,QAAU,WACpC,IAAID,EAAa,GAEjB,OADAA,EAAW7I,KAAK,CAAEN,SAAU,GAAIg7B,UAAW,GAAI,EACxC7xB,GAEXs9B,EAAoB7nC,UAAU46B,iBAAmB,SAAUxV,GACvD,IAAI0H,EAAKpT,gBAAc,KAAM,CAAEC,UAAWkhB,GAAuB,IAAM2G,GAA8B,EACjG7G,EAAiB,GACrBv6B,KAAKK,OAAOM,QAAQuE,QAAQ,SAAUnE,GAElC,IADA,IAAIqY,EAAa,GACRxY,EAAK,EAAGygC,EAASrc,EAAMpkB,EAAKygC,EAAOvgC,OAAQF,CAAE,GAAI,CACtD,IAAIyX,EAAMgpB,EAAOzgC,GACyC,CAAC,IAAvDyX,EAAIipB,UAAUvqB,QAAQhW,EAAOC,SAASC,UAAU,IAChDmY,EAAaf,EAAIa,MAGzBqhB,EAAej5B,KAAK8X,CAAU,EACjC,EACD,IAAK,IAAImoB,EAAI,EAAGA,EAAIhH,EAAez5B,OAAQygC,CAAC,GAAI,CAE5C,IADA,IAAIC,EAAU,EACLhkB,EAAI+jB,EAAI,EAAG/jB,EAAI+c,EAAez5B,SACR,KAAtBy5B,EAAegH,IAAqC,KAAtBhH,EAAe/c,IAAc+c,EAAegH,KAAOhH,EAAe/c,IAD1DA,CAAC,GAExCgkB,CAAO,GAMf,IAAIjR,EAAMjX,gBAAc,MAAO,CAAEC,UAAWqiB,GAAuBpiB,UAAW+gB,EAAegH,GAAI,EAC7FE,EAAKnoB,gBAAc,KAAM,CACzBC,UAAWrC,EAAyB,IAAMM,GAC1CkN,MAAO,CAAEoZ,QAAW0D,EAAQvgC,YAC/B,EACDyrB,EAAGrT,YAAYooB,CAAE,EAAEpoB,YAAYkX,CAAG,EAClCgR,GAAKC,EAAU,EAEnB,OAAO9U,GAEX+a,EAAoB7nC,UAAU45B,eAAiB,WAC3C,IAMQkI,EANJz9B,EAAQjE,KACR8qB,EAAS9qB,KAAKK,OAAO6S,QAAQG,cAAc,IAAMmI,CAAgB,EACjEiP,EAAUzqB,KAAKK,OAAO6S,QAAQG,cAAc,IAAMoI,CAAiB,EACnEzZ,EAAShC,KAAKK,OAAO6S,QAAQsM,aAAesL,EAAOtL,aACnDxf,KAAKK,OAAOgV,aACZrT,EAASG,OAAOC,aAAe0oB,EAAOtL,alBhgBzB,KkBigBTkiB,EAAkB1hC,KAAKK,OAAO6S,QAAQG,cAAc,IAAMokB,CAAyB,KAEnFz1B,GAAU0/B,EAAgBliB,cAEX,GAAGxM,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAMY,CAAuB,CAAC,EACvF7O,QAAQ,SAAU0Q,GAC3B,IAAI+rB,EAAc/rB,EAAKvC,cAAc,IAAMiP,CAAsB,EAC5Dqf,EAAY1vB,UAAUC,SAAS+R,EAA4B,IAC5D0d,EAAY3pB,MAAMhW,OAASF,aAAWE,CAAM,EAC5Cse,eAAaR,IAAIlK,EAAM,YAAa3R,EAAM29B,iBAAkB39B,CAAK,GAExE,GAEsB,SAAvBjE,KAAKK,OAAO2B,QAA4C,SAAvBhC,KAAKK,OAAO2B,SAC7CyoB,EAAQzS,MAAMhW,OAASF,aAAWE,CAAM,GAE5C,GAAGgR,MAAMC,KAAK6X,EAAO7L,QAAQ,EAAE/Z,QAAQ,SAAU2iB,GAC7C,IAAIga,EAAe,EAC+B,EAA7CpX,EAAQ5L,YAAc4L,EAAQqX,cAC/BD,EAAe,GACqC,EAA/CpX,EAAQjL,aAAeiL,EAAQsX,gBAChCla,EAAK7P,MAAMC,MAAQnW,aAAW2oB,EAAQqX,WAAW,GAGrD79B,EAAM5D,OAAOwqB,UACbhD,EAAK7P,MAAMgqB,YAAclgC,aAAW+/B,CAAY,EAGhDha,EAAK7P,MAAMiqB,aAAengC,aAAW+/B,CAAY,EAExD,EACD7hC,KAAKsjB,wBAETmkB,EAAoB7nC,UAAUsiC,gBAAkB,SAAUh8B,GACtD,IAAIqF,EAASrF,EAAEqF,OACXuf,EAAS9qB,KAAKK,OAAO6S,QAAQG,cAAc,IAAMmI,CAAgB,EACrE,GAAGxI,MAAMC,KAAK6X,EAAO7L,QAAQ,EAAE/Z,QAAQ,SAAU2iB,GAAQA,EAAK4B,WAAale,EAAOke,WAAa,EAC/FzpB,KAAKK,OAAO8hC,eAAe1X,QAAU,CAAEpM,KAAM9S,EAAOke,WAAYrL,IAAK7S,EAAOge,YAEhFke,EAAoB7nC,UAAUkqC,UAAY,SAAUC,EAAOtB,GACvD,OAAOxmC,KAAK+nC,IAA8B,EAA1BvB,EAASH,QAAQyB,GAAkD,EAAtCtB,EAASH,QAAQG,EAASD,SAAa,GAExFf,EAAoB7nC,UAAUipC,cAAgB,SAAUJ,GACpD,IAAIsB,GAAStB,EAASwB,cAAc,IAAM,GAAK,EAC3CC,EAAYlqC,KAAK8pC,UAAUC,EAAOtB,CAAQ,EAC1C0B,EAAenqC,KAAK8pC,UAAUrB,EAASwB,cAAcxB,EAASwB,cAAcnpC,OAAS,GAAI2nC,CAAQ,EAIrG,OAHayB,EAAYzB,EAASW,iBAC9BppC,KAAK8pC,UAAUC,EAAQ,EAAGtB,CAAQ,EAAI0B,EAAgB1B,EAASW,iBAAmBX,EAASS,aAC3FlpC,KAAK8pC,UAAkB,EAARC,EAAWtB,CAAQ,EAAIyB,GAG9CzC,EAAoB7nC,UAAUmpC,WAAa,SAAUqB,EAAYC,EAAYjM,EAAWkM,EAAkBrgC,GAClGqgC,GAAkC,SAAdrgC,GACpBogC,EAAWryB,MAAMoyB,WAAaA,EAAa,KAC3CC,EAAWryB,MAAMuyB,cAAgB,QAGjCF,EAAWryB,MAAMoyB,WAAaA,EAAa,KAC3CC,EAAWryB,MAAMuyB,cAAgBvqC,KAAK4B,WAAaw8B,EAAYgM,EAAa,OAGpF3C,EAAoB7nC,UAAU6C,QAAU,SAAUzB,EAAUD,EAAQgB,EAAMyoC,GACtE,IAAIzqC,EAAQC,KAAKD,MAAM2B,QACnB+oC,EAAY,IAAIC,YAAU1pC,EAAU,QAASD,EAAQ,CAAA,CAAI,EAK7D,OAJAhB,EAAMuC,MAAMmoC,CAAS,EACrB1qC,EAAMgC,KAAKA,CAAI,EACfhC,EAAMyqC,KAAKA,CAAI,EACfzqC,EAAMyC,UAAU,sBAAuB,qBAAqB,EACxDxC,KAAKK,OAAOP,YAAc,WAAYE,KAAKK,OAAOP,WACxCE,KAAK2C,aAAa,CAAEC,YAAa,IAAM7C,CAAK,EAC3C+C,QAER9C,KAAKK,OAAO0I,WAAW9I,YAAY8C,aAAahD,CAAK,GAEhE0nC,EAAoB7nC,UAAU+C,aAAe,SAAUmB,EAAM/D,GACzD,IAAIkD,EAAQjD,KAAKmD,sBAAsBpD,CAAK,EACxC2C,EAAM,IAAIyB,WAGd,OAFAlB,EAAM0nC,WAAajoC,EAAI+B,QACvBxB,EAAMqB,OAASR,EACRpB,GAEX+kC,EAAoB7nC,UAAUuD,sBAAwB,SAAUpD,GAC5D,IAAIqD,EAAS,IAAIC,aACbC,EAAK,IAAIpD,cAAY,CAAEO,IAAK,GAAI8C,QAAS,IAAIF,aAAY,EACzDJ,EAAQG,EAAOI,aAAaF,EAAIvD,CAAK,EACrC0D,EAAOC,KAAKC,MAAMV,EAAMQ,IAAI,EAChC,OAAOG,SAAOH,EAAMR,EAAMY,OAAO,GAErC4jC,EAAoB7nC,UAAUuG,mBAAqB,SAAUD,EAAGG,GAC5D,IACIc,EADAlD,EAAQjE,KAaZ,OAXIqG,EACAc,EAAavD,SAAO,IAAK2S,oBAAMrQ,EAAEkB,OAAOA,MAAM,EACxBlB,EAAlBA,EAAEkB,QAAkBA,OAAQ,KAAM,CAAA,CAAI,EAG1CpH,KAAKK,OAAOwE,QAAQ8B,EAAoBT,EAAG,SAAUpC,GACjDqD,EAAavD,SAAO,IAAK2S,oBAAMzS,EAAKsD,OAAOA,MAAM,EACxBtD,EAArBA,EAAKsD,QAAqBA,OAAQ,KAAM,CAAA,CAAI,EAChDnD,EAAM5D,OAAOwE,QAAQkC,EAAkB,KAAM,WAAc,OAAO9C,EAAM5D,OAAOyF,cAAgB,EAClG,EAEEqB,GAEXsgC,EAAoB7nC,UAAUwG,mBAAqB,SAAUF,GACzD,IAAIjC,EAAQjE,KACRA,KAAKK,OAAOkG,aAGhBvG,KAAKK,OAAOwE,QAAQ6C,EAAsB,CAAEC,MAAOzB,GAAK,WAAc,OAAOjC,EAAM5D,OAAOyF,cAAgB,GAE9G2hC,EAAoB7nC,UAAUgrC,wBAA0B,SAAU9mC,GAC9D,IAII0H,EACA29B,EACA0B,EANAt/B,EAASzH,EAAKyH,OAC4D,EAA1EvL,KAAKK,OAAO6S,QAAQC,iBAAiB,0BAA0B,EAAErS,SAGjE0K,EAAMD,EAAOiN,cAAcxE,aAAa,UAAU,EAClDm1B,EAAoBnpC,KAAK2oC,aAAan9B,GAAK29B,kBAC3C0B,EAAmBt/B,EAAOiN,cAAcupB,cACvCx2B,EAAOge,UAAY4f,EAAqB0B,GAAqB1B,EAAoB59B,EAAOge,UAAashB,IACtG7qC,KAAK8qC,aAAav/B,EAAQvL,KAAK2oC,aAAan9B,GAAK68B,oBAAoB,IAG7EZ,EAAoB7nC,UAAUkrC,aAAe,SAAUnJ,EAAaoJ,GAChE,IAAIC,EAA6B1xB,gBAAc,MAAO,CAClDC,UAAW,kCAAmCmL,MAAO,CAAE4V,KAAQ,WAClE,EACDqH,EAAYnpB,cAAcuqB,aAAaiI,EAA4BrJ,CAAW,EAC9EqJ,EAA2BhzB,MAAM1O,SAAW,WAC5C0hC,EAA2BhzB,MAAM4e,OAAS,KAC1C,IAAK,IAAIpZ,EAAI,EAAGA,EAAIutB,EAAevtB,CAAC,GAAI,CACpC,IAAIytB,EAAkB3xB,gBAAc,MAAO,CAAEC,UAAW,0BAA2B,EAC/E2xB,EAAW5xB,gBAAc,OAAQ,CAAEC,UAAW,4CAA6C,EAC/F2xB,EAASlzB,MAAMhW,OAAShC,KAAK4B,WAAa,KAErC2U,oBAAMorB,EAAYtuB,cAAc,SAAS,CAAC,IAC3C63B,EAASlzB,MAAMC,MAAQ0pB,EAAYtuB,cAAc,SAAS,EAAEqF,wBAAwBT,MAAQ,MAEhGgzB,EAAgB5xB,YAAY6xB,CAAQ,EACpCF,EAA2B3xB,YAAY4xB,CAAe,IAG9DxD,EAAoB7nC,UAAUurC,aAAe,SAAUxJ,GACnDyJ,WAAW,WAEP,IADA,IAAIH,EAAkBtJ,EAAYxuB,iBAAiB,kCAAkC,EAC5E9Q,EAAI,EAAGA,EAAI4oC,EAAgBnqC,OAAQuB,CAAC,GACzCkZ,SAAO0vB,EAAgB5oC,EAAE,GAE9B,EAAE,GAETolC,EAAoB7nC,UAAU0jC,eAAiB,SAAUp9B,GACrD,IAGIkX,EAMIkhB,EAEA/0B,EACA2+B,EAmBAmD,EAIJC,EAGIhB,EACA1B,EAEA2C,EAMIC,EAWIC,EAQAC,EAGAC,EArEZ1nC,EAAQjE,KACRuL,EAASrF,EAAEqF,OACXqgC,EAAwBrgC,EAAOge,UAE/Bhe,EAAOg4B,eACPnmB,EAAY7R,EAAOg4B,aAAavvB,aAAa,UAAU,EACvDhU,KAAKK,OAAO8hC,eAAephC,OAAOqc,GAAa,CAAEiB,KAAM9S,EAAOke,WAAYrL,IAAK7S,EAAOge,YAEtFvpB,KAAKK,OAAOsB,uBACR28B,EAAgB/yB,EAChB6yB,EAAY,EACZ70B,EAAavJ,KAAKwJ,iBAAiB4T,GACnC8qB,EAAyBloC,KAAKK,OAAO0I,WAAWzI,WAChDN,KAAKK,OAAOmH,gBAAgB4V,GAAa7T,EAAWzI,OAEpDqnC,EAAgBnoC,KAAK4B,YADzBw8B,GAAa8J,GAET2D,EAAc,GACdP,EAAW,GACftrC,KAAK8rC,qBAAqB1uB,EAAWwuB,CAAqB,EACV,SAA5C5rC,KAAK+rC,gBAAgBxgC,EAAQ6R,CAAS,GAAwC+qB,EAAxByD,IAItDpD,EAAWxoC,KAAK2oC,aAAavrB,GAAWorB,SACxCwD,EAAyF,CAAC,EAApEhsC,KAAK2oC,aAAavrB,GAAWksB,kBAAkBvyB,QAAQyxB,CAAQ,EACrFyD,EAAoB/lC,EAAEgmC,UAAYlsC,KAAK2oC,aAAavrB,GAAW+uB,mBAAqB,IACpFH,GAAuB,CAACz1B,oBAAMvW,KAAK2oC,aAAavrB,GAAW+uB,kBAAkB,GAAKF,KAItFjsC,KAAK2oC,aAAavrB,GAAW+uB,mBAAqBjmC,EAAEgmC,UAEpDL,GADIR,EAAarrC,KAAK0oC,gBAAgB1oC,KAAK2oC,aAAavrB,EAAU,GACzCksB,kBAAkBhkC,OAAO,SAAU8mC,GACxD,MAAiD,CAAC,IAA3Cf,EAAWpB,cAAclzB,QAAQq1B,CAAG,EAC9C,EACDd,EAAWD,EAAWpB,cAAc3kC,OAAO,SAAU8mC,GACjD,MAAqD,CAAC,IAA/Cf,EAAW/B,kBAAkBvyB,QAAQq1B,CAAG,EAClD,EAEGxD,GADA0B,EAAmBsB,EAAwBrgC,EAAOw2B,cAAgBoG,GAClCA,EAAiB7J,EAAcjrB,cAAc,IAAMkP,EAA8B,EAAEshB,kBAAoB7jC,KAAK4B,WAC1I5B,KAAK6oC,cAAcwC,CAAU,EAC/BE,EAAuBjN,EAAcjrB,cAAc,IAAMkP,EAA8B,EAClE,EAArBspB,EAAY/qC,SAER0qC,EADAa,EAAmB,KAAA,EAInBb,EAFmB,IAAnBK,EAAY,IACZQ,EAAmB,EACDR,EAAY/qC,OAASd,KAAK2oC,aAAavrB,GAAWirB,qBAAwB,IAG5FgE,GAAqBR,EAAY,GAAK,GAAK7rC,KAAK2oC,aAAavrB,GAAWirB,sBACnCwD,EAAY/qC,OAASd,KAAK2oC,aAAavrB,GAAWirB,qBAE3FroC,KAAKssC,oBAAoBf,EAAuE,SAAjDvrC,KAAK2oC,aAAavrB,GAAWisB,gBAA2CgD,EAAkBb,CAAc,GAErI,EAAlBF,EAASxqC,SACLd,KAAKK,OAAO0I,WAAWzI,YACnBorC,GAAsBJ,EAAS,GAAK,GAAKtrC,KAAK2oC,aAAavrB,GAAWirB,qBACtEoD,EAAe,GACDzrC,KAAKyC,QAAQzC,KAAKK,OAAOW,SAAUoc,EAAYpd,KAAK2oC,aAAavrB,GAAWirB,qBAAuBiD,EAASxqC,OAAS4qC,CAAiB,EAC5I3mC,KAAK,SAAUmB,GACvBulC,EAAexnC,EAAMkC,mBAAmBD,CAAC,EACzCjC,EAAMsoC,iBAAiBnvB,EAAWmuB,EAAsBhgC,EAAQqgC,EAAuBtN,EAAiE,SAAlDr6B,EAAM0kC,aAAavrB,GAAWisB,gBAA6B,EAAKoC,EAAa3qC,OAAS,EAAI,CAAA,EAAM2qC,EAAc,IAAI,EAC3N,EAAE5lC,MAAM,SAAUK,GAAK,OAAOjC,EAAMmC,mBAAmBF,CAAC,EAAI,IAGzDwlC,EAAqE,SAAjD1rC,KAAK2oC,aAAavrB,GAAWisB,iBAA+BiC,EAAS,GAAK,GAAKtrC,KAAK2oC,aAAavrB,GAAWirB,sBAC9HiD,EAAS,GAAK,GAAKtrC,KAAK2oC,aAAavrB,GAAWirB,qBAC3CroC,KAAK2oC,aAAavrB,GAAWirB,qBAAuBiD,EAASxqC,OAAU,EAC9E6qC,EAAiE,SAAjD3rC,KAAK2oC,aAAavrB,GAAWisB,gBAA6BqC,EAAqB1rC,KAAK2oC,aAAavrB,GAAWirB,qBAAuBiD,EAASxqC,QAC1JwqC,EAAS,GAAK,GAAKtrC,KAAK2oC,aAAavrB,GAAWirB,qBACtDroC,KAAKusC,iBAAiBnvB,EAAWmuB,EAAsBhgC,EAAQqgC,EAAuBtN,EAAeoN,EAAmB,CAAA,EAAOniC,EAAYoiC,CAAa,IAGhK3rC,KAAK2oC,aAAavrB,GAAWksB,kBAAoBtpC,KAAK2oC,aAAavrB,GAAW6sB,cAC9EjqC,KAAK+oC,WAAWH,EAAY2C,EAAsBrD,EAAwBoC,EAAkBtqC,KAAK2oC,aAAavrB,GAAWisB,eAAe,EACxIgC,EAAW/B,kBAAoB+B,EAAWpB,cAC1CjqC,KAAKK,OAAO6G,mBACZlH,KAAKmrC,aAAa7M,EAAc9lB,aAAa,IAGrDivB,EAAoB7nC,UAAUksC,qBAAuB,SAAU1uB,EAAWwuB,GAEtE5rC,KAAK2oC,aAAavrB,GAAW+rB,kBAAoBnpC,KAAK2oC,aAAavrB,GAAWgsB,kBAC9EppC,KAAK2oC,aAAavrB,GAAWgsB,iBAAmBwC,GAEpB5rC,KAAK2oC,aAAavrB,GAAW+rB,kBACrDnpC,KAAK2oC,aAAavrB,GAAWisB,gBAAkB,OAG/CrpC,KAAK2oC,aAAavrB,GAAWisB,gBAAkB,MAGvD5B,EAAoB7nC,UAAUmsC,gBAAkB,SAAUxgC,EAAQ6R,GAE9D,MAAqD,SAAjDpd,KAAK2oC,aAAavrB,GAAWisB,iBAC5B99B,EAAOge,UAAYvpB,KAAK2oC,aAAavrB,GAAW+rB,kBAAoB59B,EAAOw2B,cAGtB,OAAjD/hC,KAAK2oC,aAAavrB,GAAWisB,iBACjCrpC,KAAK2oC,aAAavrB,GAAW+rB,kBAAoB59B,EAAOge,UAAYhe,EAAOw2B,aACrE,OAEJ,QAEX0F,EAAoB7nC,UAAU0sC,oBAAsB,SAAUxD,EAAoB0D,EAAQH,EAAkBb,GACxG,IAAK,IAAIhuB,EAAI6uB,EAAkB7uB,EAAIguB,EAAgBhuB,CAAC,GAAI,CAGpD,IAFA,IAAIivB,EAAgBD,EAAS1D,EAAmB5nB,WAC1C4nB,EAAmB1nB,UAClB,CAAC7K,oBAAMk2B,CAAa,IAAMA,EAAcx6B,UAAUC,SAAS0O,EAAsB,GACpF6rB,EAAcx6B,UAAUC,SAASwO,EAAuB,GACxD+rB,EAAcx6B,UAAUC,SAASoN,EAAuB,GACxDmtB,EAAcx6B,UAAUC,SAASgN,EAAqB,IACtDutB,EAAgBD,EAASC,EAAcC,YAAcD,EAAcE,gBAElEp2B,oBAAMk2B,CAAa,GACpBlxB,SAAOkxB,CAAa,IAIhChF,EAAoB7nC,UAAU2sC,iBAAmB,SAAUnvB,EAAW0rB,EAAoBv9B,EAAQqgC,EAAuBjK,EAAaiL,EAAatsC,EAAU6G,EAAYwkC,GACrK,IAAI1nC,EAAQjE,KACR6sC,EAA0BvsC,EAAW6G,EAAWrG,OAAS6qC,EACzDmB,EAAwBxsC,EAAW,EAAIqrC,EAC3C,GAAwB,EAApBxkC,EAAWrG,OAAY,CA0BvB,IAzBA,IAwBIisC,EAAS/sC,KACJwd,EAAIovB,EAA8D,SAAjD5sC,KAAK2oC,aAAavrB,GAAWisB,gBAA8B7rB,EAAIqvB,EAChFC,GAALtvB,EAA6E,SAAjDxd,KAAK2oC,aAAavrB,GAAWisB,gBAA6B7rB,CAAC,GAAKA,CAAC,GAC7FwvB,CA3BU,SAAUxvB,GACpB,IAGQgpB,EAKA1iC,EARHyS,oBAAMpP,EAAWqW,EAAE,IAChBghB,EAAWr3B,EAAWqW,GAAGuvB,EAAO1sC,OAAOkF,aAAaC,aACpDmX,EAAYowB,EAAO1sC,OAAOuJ,aAAaqQ,eAAelD,QAAQynB,CAAQ,EACtEgI,EAAgBuG,EAAOtO,WAAWt3B,EAAWqW,EAAE,EACjC,CAAC,IAAfb,IACA6pB,EAAc3wB,aAAa,gBAAiB,MAAM,EAClDmB,WAAS,CAACwvB,GAAgBxxB,CAAwB,GAElDlR,EAAO,CAAEL,KAAM0D,EAAWqW,GAAItK,QAASszB,EAAel+B,OAAQ,CAAA,GAClEykC,EAAO1sC,OAAOwE,QAAQ65B,EAAqB56B,EAAM,SAAU66B,GAClDA,EAASr2B,SAC4C,SAAlDrE,EAAM0kC,aAAavrB,GAAWisB,gBAC9BP,EAAmBzvB,YAAYmtB,CAAa,EAG5CsC,EAAmB/F,aAAayD,EAAesC,EAAmB5nB,UAAU,EAEhFjd,EAAM5D,OAAO40B,kBAAkBtX,eAAe6oB,CAAa,EAC3DxvB,WAAS,CAACwvB,GAAgBrJ,CAAmB,GAEpD,IAMG3f,CAAC,EAEbjS,EAAOge,UAAYqiB,OAGnBjK,EAAYtoB,YAAYrZ,KAAK4+B,iBAAiB,GAGtD6I,EAAoB7nC,UAAUymB,qBAAuB,SAAUH,GAC3D,IAAImiB,EAAuBroC,KAAK2oC,aAAaziB,GAAkBmiB,qBAC3D4E,EAAoBjtC,KAAKuJ,WAAW2c,GAEpCgnB,EADyBltC,KAAKK,OAAO6S,QAAQG,cAAc,kDAAoD6S,EAAmB,IAAI,EAC9F7S,cAAc,IAAMkP,EAA8B,EAC1F4qB,EAAYD,EAAe/5B,iBAAiB,IAAMhB,CAAc,EACpE,GAAuB,EAAnBg7B,EAAUrsC,OAAY,CACtB,IAAIssC,EAAiBD,EAAUA,EAAUrsC,OAAS,GAAGkT,aAAa,SAAS,EACvEq5B,EAAkBF,EAAU,GAAGn5B,aAAa,SAAS,EACrDs5B,EAAgB,KAAA,EAChBC,EAAiB,KAAA,EACrB,GAAIJ,EAAUrsC,OAAgC,EAAvBunC,EAA0B,CAC7C,IAAK,IAAIhmC,EAAI,EAAGA,EAAI4qC,EAAkBnsC,OAAQuB,CAAC,GACvC+qC,IAAoBH,EAAkB5qC,GAAGrC,KAAKK,OAAOkF,aAAaC,aAAcvE,aAChFqsC,EAAgBjrC,GAEhBgrC,IAAqBJ,EAAkB5qC,GAAGrC,KAAKK,OAAOkF,aAAaC,aAAcvE,aACjFssC,EAAiBlrC,GAIzB,IAASA,EADO8qC,EAAUrsC,OACFuB,EAA2B,EAAvBgmC,EAA0BhmC,CAAC,GAAI,CACvD,IAKYmrC,EALRC,EAASH,IAAkBL,EAAkBnsC,OAAS,EACtD4sC,EAAgBJ,EAAgBL,EAAkBnsC,OAASwsC,EAAgB,EAAIC,EAAiB,EAChGG,GAAiBT,EAAkBnsC,SAC/B6sC,EAAeV,EAAkBS,GAChCn3B,oBAAMo3B,CAAY,IACfH,EAAWxtC,KAAKy+B,WAAWkP,CAAY,EAC3C3tC,KAAK4tC,qBAAqBJ,EAAUE,EAAeT,EAAmBC,EAAgBO,CAAM,EACxFA,EACAF,EAAiBG,EAGjBJ,EAAgBI,QAQ5CjG,EAAoB7nC,UAAUguC,qBAAuB,SAAUJ,EAAUE,EAAeT,EAAmBC,EAAgBO,GACvH,IAAIxpC,EAAQjE,KACRw+B,EAAWyO,EAAkBS,GAAe1tC,KAAKK,OAAOkF,aAAaC,aAMrE1B,GAJc,CAAC,IADH9D,KAAKK,OAAOuJ,aAAaqQ,eAAelD,QAAQynB,CAAQ,IAEpEgP,EAAS33B,aAAa,gBAAiB,MAAM,EAC7CmB,WAAS,CAACw2B,GAAWx4B,CAAwB,GAEtC,CAAEvR,KAAMwpC,EAAkBS,GAAgBx6B,QAASs6B,EAAUllC,OAAQ,CAAA,IAChFtI,KAAKK,OAAOwE,QAAQ65B,EAAqB56B,EAAM,SAAU66B,GAChDA,EAASr2B,SACLmlC,EAIDP,EAAenK,aAAayK,EAAUN,EAAe/5B,iBAAiB,IAAMhB,CAAc,EAAE,EAAE,EAH9F+6B,EAAe7zB,YAAYm0B,CAAQ,EAKvCvpC,EAAM5D,OAAO40B,kBAAkBtX,eAAe6vB,CAAQ,EACtDx2B,WAAS,CAACw2B,GAAWrQ,CAAmB,GAE/C,GAELsK,EAAoB7nC,UAAUiuC,aAAe,SAAUC,GACnD,IAAI/pC,EAAQ+pC,EAAK7D,cAAc6D,EAAK/D,OAChCgE,EAAU9rC,KAAKC,KAAK4rC,EAAKtE,gBAAkBsE,EAAKzF,oBAAoB,EACpEv0B,EAAM7R,KAAK6R,IAGXk6B,EADyB,SAAzBF,EAAKzE,gBACc0E,GAAThqC,EAAmB,CAAC+P,EAAI/P,EAAO,CAAC,EAAG,EAAEA,EAAO,EAAEA,GAAO0jB,UAC7CsmB,GAAbhqC,EAAQ,EAAe,CAAC+P,EAAI/P,EAAQ,EAAG,CAAC,EAAGA,EAAO,EAAEA,GACjD,CAAC+P,EAAI/P,EAAO,CAAC,EAAG,EAAEA,EAAO,EAAEA,GAGzBA,IAAUgqC,EAAU,CAACj6B,EAAI/P,EAAQ,EAAG,CAAC,EAAG+P,EAAI/P,EAAQ,EAAG,CAAC,EAAGA,GACjE,CAAC+P,EAAI/P,EAAQ,EAAG,CAAC,EAAGA,EAAOA,EAAQ,GAG3C,OAAOiqC,EAAQ1oC,OAAO,SAAU2oC,GAAmB,OAAyB,EAAlBA,EAAsB,GAEpFxG,EAAoB7nC,UAAU8oC,gBAAkB,SAAUC,GACtD,IAOQuF,EAPJC,EAAe,CAAA,EACfC,EAAWzF,EAGXP,GAFJgG,EAASC,KAAOruC,KAAKsuC,eAAe3F,CAAY,EAChDyF,EAASnE,cAAgBjqC,KAAKuuC,gBAAgBH,EAASC,IAAI,EAC9CruC,KAAK6tC,aAAaO,CAAQ,GASvC,OARIA,EAASnE,cAAchpC,aAAemnC,EAAOnnC,aAEzCitC,EAAW9F,EAAOA,EAAOtnC,OAAS,GACW,CAAC,IAA9CstC,EAASnE,cAAclzB,QAAQm3B,CAAQ,KACvCC,EAAe,CAAA,GAGvBC,EAASnE,cAAgBkE,EAAe/F,EAASgG,EAASnE,cACnDmE,GAEX3G,EAAoB7nC,UAAU2uC,gBAAkB,SAAUF,GACtD,MAAO,CAACA,GAAQA,EAAO,GAAW,EAAPA,IAE/B5G,EAAoB7nC,UAAU0uC,eAAiB,SAAUR,GACrD,IAAI7pC,EAAQjE,KACRwuC,EAAQV,EAAKtE,gBACb6E,EAAO,EAkBX,OAjBAruC,KAAKyuC,WAAa9jC,OAAOmX,KAAKgsB,EAAKxF,OAAO,EAC1CtoC,KAAKyuC,WAAWC,KAAK,SAAUC,GAC3B,IAIQZ,EAJJa,EAAUC,OAAOF,CAAM,EACvBG,EAAShB,EAAK1E,kBAAoB0E,EAAKxF,QAAQzmC,SAAS8sC,EAAQ,EAAE,IAC9DC,IAAYJ,GAASV,EAAK1E,iBAAmB0E,EAAKxF,QAAQzmC,SAAS8sC,EAAQ,EAAE,GAWrF,OAVIG,IACIf,EAAU9rC,KAAKC,KAAKssC,EAAQV,EAAKzF,oBAAoB,EACrDpkC,EAAMwqC,WAAW3tC,OAAS,GAAM,GAAK8tC,EAAQ3tC,aAAegD,EAAMwqC,WAAWxqC,EAAMwqC,WAAW3tC,OAAS,IACpGgtC,EAAK1E,kBAAoB0E,EAAKxF,QAAQrkC,EAAMwqC,WAAW3tC,OAAS,KACnE8tC,EAA0Bb,EAAfa,EAAU,EAAeb,EAAUa,EAAU,GAG5Dd,EAAK/D,OADL6E,EAAoBb,EAAVa,EAAoBb,EAAUa,GACjB,GAAM,EAAI,EAAI,EACrCP,EAAOpsC,KAAK6R,IAAI,EAAG7R,KAAK+nC,IAAI/lC,EAAM8qC,QAAQH,EAASb,CAAO,EAAGA,CAAO,CAAC,GAElEe,EACV,EACMT,GAEX5G,EAAoB7nC,UAAUmvC,QAAU,SAAUhF,EAAOgE,GACrD,OAAgBA,EAAZhE,EAAQ,EACDA,EAAQ,GAAM,EAAIA,EAAQ,GAAKA,EAAQ,GAAK,EAG5CA,EAAQ,GAAM,EAAIA,EAAQ,GAAKA,EAAQ,GAAK,GAG3DtC,EAAoB7nC,UAAUgiC,iBAAmB,SAAU17B,GACnDlG,KAAKK,OAAOiV,YAAYE,SAAW,CAACxV,KAAKK,OAAOiV,YAAYC,aAC5DrP,EAAEisB,kBAWVsV,EAAoB7nC,UAAUiuB,gBAAkB,SAAU9sB,GACtD,IAAIkD,EAAQjE,KACRwjC,EAAY,CAAA,EAQhB,MAP2C,UAA3B,OAAOziC,EAAOC,SAE1BwiC,EAA4F,CAAC,IAAjFxjC,KAAKK,OAAOuJ,aAAa0N,eAAeP,QAAQhW,EAAOC,SAASC,UAAU,EAGtFF,EAAOC,SAASE,MAAM,GAAG,EAAEgE,QAAQ,SAAUsG,GAAOg4B,EAAsE,CAAC,IAA3Dv/B,EAAM5D,OAAOuJ,aAAa0N,eAAeP,QAAQvL,CAAG,EAAW,EAE5Hg4B,GAEXiE,EAAoB7nC,UAAU6jC,aAAe,SAAU1iC,EAAQwK,GAC3D,IAAIm4B,EAASpqB,gBAAc,MAAO,CAAEC,UAAWyK,GAAkB,EAC7DjjB,EAAOw6B,UACPmI,EAAOrqB,YAAYC,gBAAc,MAAO,CACpCC,UAAWoqB,GACXnqB,UAAWxZ,KAAKK,OAAO+f,UAAUC,YAAY,KAAK,EAAI,KAAOtf,EAAOw6B,SAASt6B,WAChF,CAAC,EAEFF,EAAOy6B,UACPkI,EAAOrqB,YAAYC,gBAAc,MAAO,CACpCC,UAAWqqB,GACXpqB,UAAWxZ,KAAKK,OAAO+f,UAAUC,YAAY,KAAK,EAAI,KAAOtf,EAAOy6B,SAASv6B,WAChF,CAAC,EAEyB,EAA3ByiC,EAAOG,oBACHt4B,EAAO8H,cAAc,IAAMiP,CAAsB,EACjD/W,EAAOw3B,aAAaW,EAAQn4B,EAAO8I,iBAAiB,EAGpD9I,EAAO8N,YAAYqqB,CAAM,IAIrC+D,EAAoB7nC,UAAUg6B,iBAAmB,WAC7C,IAAI31B,EAAQjE,KACZA,KAAKK,OAAOM,QAAQuE,QAAQ,SAAUnE,GAClC,IAGI+a,EAEAgoB,EACAC,GANChjC,EAAOw6B,UAAax6B,EAAOy6B,YAG5B1f,EAAW7X,EAAMsF,WAAWxI,EAAOC,UACnCijC,EAAc,cAAiBljC,EAAOC,SAAW,KACjD8iC,EAAa7/B,EAAM5D,OAAO6S,QAAQG,cAAc,IAAO6D,EAAyB+sB,CAAY,EAC5FF,EAAW,GAAG/wB,MAAMC,KAAKhP,EAAM5D,OAAO6S,QAAQC,iBAAiB,IAAOY,EAA0BkwB,CAAY,CAAC,EACjHhgC,EAAMw/B,aAAa1iC,EAAQ+iC,CAAU,EACjCE,EAAa//B,EAAMmgC,mBAAmBrjC,EAAQ+a,EAAShb,MAAM,IAE7DkW,WAAS+sB,EAASjW,OAAOgW,CAAU,EAAGE,CAAU,EAEvD,GAELyD,EAAoB7nC,UAAUwkC,mBAAqB,SAAUrjC,EAAQsG,GACjE,IAAI28B,EAOJ,OANIjjC,EAAOy6B,UAAYn0B,EAAQtG,EAAOy6B,SAClCwI,EAAaK,GAERtjC,EAAOw6B,UAAYl0B,EAAQtG,EAAOw6B,WACvCyI,EAAaM,IAEVN,GAEXyD,EAAoB7nC,UAAU2kC,kBAAoB,WAC5B,GAAGvxB,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAM6Q,EAAgB,CAAC,EAChF9e,QAAQ,SAAU2iB,GAAQ7e,SAAO6e,CAAI,EAAI,EADrD,IAEI2c,EAAW,GAAGxxB,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAMmxB,EAAmB,CAAC,EAExFG,GADJxvB,cAAYuvB,EAAUF,EAAmB,EAC1B,GAAGtxB,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAMkxB,EAAmB,CAAC,GAC5FpvB,cAAYwvB,EAAUJ,EAAmB,EACzCrkC,KAAK45B,oBAET6N,EAAoB7nC,UAAUqc,cAAgB,SAAUyoB,EAAa5kC,GACjE,IAAImE,EAAQjE,KAER8b,GADe,KAAA,IAAfhc,IAAyBA,EAAaE,KAAKK,OAAOD,YACvC,IAEf,GADuC,UAAvB,OAAOskC,EAEnB,IAAIrnB,EAAUvd,EAAWwF,OAAO,SAAUD,GACtC,OAAOA,EAAQpB,EAAM5D,OAAOW,YAAc0jC,EAC7C,EACD5oB,EAAWA,EAASgS,OAAOzQ,CAAO,OAUlC,IAPA,IAOSzc,EAAK,EAAG+jC,EAPAD,EAAYxjC,MAAM,GAAG,EAOMN,EAAK+jC,EAAa7jC,OAAQF,CAAE,GAEpEouC,CARU,SAAUxjC,GACpB,IAAI6R,EAAUvd,EAAWwF,OAAO,SAAUD,GACtC,OAAOA,EAAQpB,EAAM5D,OAAOW,YAAcwK,EAAIjK,OACjD,EACDua,EAAWA,EAASgS,OAAOzQ,CAAO,GAGxBsnB,EAAa/jC,EACZ,EAInB,OADAZ,KAAK6kC,aAAa/oB,CAAQ,EACnBA,GAEX2rB,EAAoB7nC,UAAUilC,aAAe,SAAU/oB,GACnD,IAAItQ,EAAMxL,KAAKK,OAAOkF,aAAaC,YAC/ByE,EAAYjK,KAAKK,OAAOyJ,aAAaG,UACzC,OAAQjK,KAAKK,OAAOyJ,aAAaE,QAC7B,IAAK,kBACDhK,KAAK8kC,UAAUt5B,EAAKvB,EAAW6R,CAAQ,EACvC,MACJ,IAAK,SACL,IAAK,QACG9b,KAAKK,OAAOyJ,aAAaC,QACzByB,EAAMxL,KAAKK,OAAOyJ,aAAaC,OAEnC/J,KAAK8kC,UAAUt5B,EAAKvB,EAAW6R,CAAQ,EAG/C,OAAOA,GAEX2rB,EAAoB7nC,UAAUklC,UAAY,SAAUt5B,EAAKvB,EAAW6R,GAChE,IAOIipB,EACAC,EARAC,EAAY,CAAA,EAuBhB,MAnBKA,EAFDA,EADgC,EAAhCjlC,KAAKK,OAAOD,WAAWU,OACiC,UAA5C,OAAQd,KAAKK,OAAOD,WAAW,GAAIoL,GAE9Cy5B,IAAiD,UAApCjlC,KAAKK,OAAOyJ,aAAaE,SAK3C8R,EAAWA,EAASmB,KAAK,SAAUioB,EAAWC,GAS1C,OAFIH,EANCC,GAKDF,EAAQG,EAAU15B,GACT25B,EAAW35B,KALpBu5B,EAAQG,EAAU15B,GAAK45B,cACdD,EAAW35B,GAAK45B,gBAMrBL,EAAkB,EAAeA,EAATC,EAAkB,CAAC,EAAI,EAC1D,EACiB,eAAd/6B,IACA6R,EAAS2L,UAEN3L,GAEX2rB,EAAoB7nC,UAAUylC,cAAgB,SAAUvhC,GAChDA,EAAKyH,OAAO0G,UAAUC,SAAS+lB,EAA0B,GACzDj4B,KAAKK,OAAO6S,QAAQG,cAAc,IAAM+kB,EAA2B,EAAEnmB,UAAUC,SAAS,cAAc,IACtGlS,KAAK+4B,UAAUpa,OACf1J,cAAY,CAACjV,KAAKg4B,cAAe,UAAU,GAE3ChmB,UAAQlO,EAAKyH,OAAQ,IAAMwV,EAAc,IAGzCpH,EAAQ,GAAG3G,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,WAA6B6B,CAAwB,CAAC,EACrHC,cAAY0E,EAAO3E,CAAwB,EAC3ChV,KAAKkV,0BAA0ByE,CAAK,IAExC8tB,EAAoB7nC,UAAUsV,0BAA4B,SAAUyE,GAC5DA,aAAiB2rB,QACjB3rB,EAAM9D,aAAa,gBAAiB,OAAO,EAG3C8D,EAAMzU,QAAQ,SAAU+O,GAAQA,EAAK4B,aAAa,gBAAiB,OAAO,EAAI,GAGtF4xB,EAAoB7nC,UAAU4J,eAAiB,SAAU/F,GACrD,IAAIQ,EAAQjE,KACRuJ,EAAa,GAajB,OAZAvJ,KAAK2iB,WAAa,GAClB3iB,KAAKK,OAAOM,QAAQuE,QAAQ,SAAUnE,GAClC,IAAIkkC,EAAuC,UAA3B,OAAOlkC,EAAOC,SAO1B8a,GALA7X,EAAM0e,WADNsiB,EACmBhhC,EAAM0e,WAAWmL,OAAO/sB,EAAOC,SAASC,UAAU,EAGlDgD,EAAM0e,WAAWmL,OAAO/sB,EAAOC,SAASE,MAAM,GAAG,EAAE0S,IAAI,SAAU1N,GAAK,OAAOA,EAAE3E,OAAS,CAAC,EAEjG0C,EAAMgY,cAAclb,EAAOC,SAAUyC,CAAI,GACxD8F,EAAWxI,EAAOC,UAAY8a,EACjC,EACMvS,GAEXk+B,EAAoB7nC,UAAU2lC,eAAiB,WAC3C,IAAIza,EAAS9qB,KAAKK,OAAO6S,QAAQG,cAAc,IAAMmI,CAAgB,EACrE,GAAGxI,MAAMC,KAAK6X,EAAO7L,QAAQ,EAAE/Z,QAAQ,SAAUsgC,GAAS,OAAOx8B,SAAOw8B,CAAK,EAAI,EACjFxlC,KAAKy5B,aAAa3O,CAAM,GAE5B2c,EAAoB7nC,UAAU6lC,aAAe,WACzCzlC,KAAKK,OAAO+0B,eAAe,CAAC,eAAe,EAC/B,GAAGpiB,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAMoP,EAA8B,CAAC,EAC9Frd,QAAQ,SAAU+O,GAAQ,OAAOjL,SAAOiL,CAAI,EAAI,EACtDjU,KAAK25B,cACL35B,KAAK0lC,gBACL1lC,KAAKK,OAAO6G,mBAEhBugC,EAAoB7nC,UAAU8G,QAAU,WACpC,IAAIzC,EAAQjE,KACR2lC,EAA4B,CAAA,EAChC3lC,KAAKK,OAAOM,QAAQuE,QAAQ,SAAUnE,GAClC,GAAIA,EAAOoY,cAAe,CAClBpY,GAAUA,EAAOgrB,UAAY,CAAC4Z,IAC9B1hC,EAAMshC,iBACNI,EAA4B,CAAA,GAEhC,IAAIC,EAAgB,IAAM1uB,EAAyB,cAAiBnW,EAAOC,SAAW,OAAU86B,GAC5FD,EAAY53B,EAAM5D,OAAO6S,QAAQG,cAAcuyB,CAAa,EAChE,GAAI/J,EAAW,CACX,IAAIoT,EAAmBhrC,EAAM5D,OAAO0I,WAAWzI,WAAa2D,EAAM5D,OAAOmH,gBAAgBzG,EAAOC,UAC1FiD,EAAMsF,WAAWxI,EAAOC,UAAUF,OAEpC+kC,EAAa,EACjB,GAF2C,UAA3B,OAAO9kC,EAAOC,SAG1B6kC,EAAc,GAAG7yB,MAAMC,KAAKhP,EAAM5D,OAAO6S,QAAQC,iBAAiB,qBAAuCpS,EAAOC,SAAW,IAAI,CAAE,EAAEF,YAInI,IADA,IACSF,EAAK,EAAGklC,EADN/kC,EAAOC,SAASE,MAAM,GAAG,EACJN,EAAKklC,EAAOhlC,OAAQF,CAAE,GAClD,IAAI4K,EAAMs6B,EAAOllC,GAEjBilC,EADY,GAAG7yB,MAAMC,KAAKhP,EAAM5D,OAAO6S,QAAQC,iBAAiB,qBAAuC3H,EAAIjK,OAAS,IAAI,CAAC,EACtGT,OAAS+kC,EAGpChK,EAAUriB,UAAY,KAAOy1B,EAAmB,IAAMhrC,EAAM5D,OAAO+f,UAAUC,YAAY,OAAO,IAG3G,EACDrgB,KAAKukC,qBAETkD,EAAoB7nC,UAAU0jB,qBAAuB,WACjD,IAAIrf,EAAQjE,KACRyqB,EAAUzqB,KAAKK,OAAO6S,QAAQG,cAAc,IAAMoI,CAAiB,EACnEgP,IACKwb,UAAQC,MAITzb,EAAQlB,UAAYvpB,KAAKK,OAAO8hC,eAAe1X,QAAQrM,IACvDqM,EAAQhB,WAAazpB,KAAKK,OAAO8hC,eAAe1X,QAAQpM,MAJxDoM,EAAQb,SAAS5pB,KAAKK,OAAO8hC,eAAe1X,QAAQpM,KAAMre,KAAKK,OAAO8hC,eAAe1X,QAAQrM,GAAG,GAOtF,GAAGpL,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAMmP,CAAsB,CAAC,EACtFpd,QAAQ,SAAUsoB,GAC1B,IACQ2Y,EADJ3Y,EAAQ+V,eACJ4C,EAAaliC,EAAM5D,OAAO8hC,eAAephC,OAAOysB,EAAQ+V,aAAavvB,aAAa,UAAU,MAEvFiyB,UAAQC,MAIT1Y,EAAQjE,UAAY4c,EAAW/nB,IAC/BoP,EAAQ/D,WAAa0c,EAAW9nB,MAJhCmP,EAAQ5D,SAASuc,EAAW9nB,KAAM8nB,EAAW/nB,GAAG,GAQ/D,GAELqpB,EAAoB7nC,UAAU6J,uBAAyB,SAAUhG,EAAMM,EAAOgE,EAAWnF,GACrF,IAIQyjC,EAmBA1Z,EAGA2Z,EAKA4I,EA/BJjrC,EAAQjE,KACRwL,EAAM/H,EAAKzD,KAAKK,OAAOW,UACvBylC,EAAUzmC,KAAKK,OAAO6S,QAAQG,cAAc,qCAAqC,EAC7C,UAApCrT,KAAKK,OAAOyJ,aAAaE,QACrBq8B,EAAUrmC,KAAKK,OAAOkF,aAAaC,YACC,WAApCxF,KAAKK,OAAOyJ,aAAaE,SACzBq8B,EAAUrmC,KAAKK,OAAOyJ,aAAaC,OAGnChG,EADAwS,oBAAMvW,KAAKK,OAAO6J,iBAAiBlJ,QAAQ,EACnChB,KAAKic,cAAczQ,EAAKxL,KAAKK,OAAOD,UAAU,EAAEuF,UAAU,SAAUmhC,GACxE,OAAOA,EAAQT,KAAa5iC,EAAK4iC,GACpC,GAGG/oB,EAAgBtd,KAAKK,OAAOkd,gBAAgB9Z,EAAKzD,KAAKK,OAAO6J,iBAAiBlJ,SAAS,EACnFhB,KAAKic,cAAczQ,EAAK8R,CAAa,EAAE3X,UAAU,SAAUmhC,GAAW,OAAOA,EAAQT,KAAa5iC,EAAK4iC,GAAW,IAGrF,UAApCrmC,KAAKK,OAAOyJ,aAAaE,QAC9BhK,KAAKK,OAAOyJ,aAAaC,OAAgD,cAAvC/J,KAAKK,OAAOyJ,aAAaG,YAC3DlG,EAAQN,EAAKzD,KAAKK,OAAOyJ,aAAaC,OAAS,GAE/C08B,IACI9Z,EAAK,GAAG3Z,MAAMC,KAAKwzB,EAAQxnB,QAAQ,EAAE3Z,OAAO,SAAUY,GACtD,MAA+G,CAAC,IAAzGA,EAAE8N,aAAa,UAAU,EAAE+yB,QAAQ,MAAO,EAAE,EAAE7lC,MAAM,GAAG,EAAE6V,QAAQvL,EAAIvK,WAAW8lC,QAAQ,MAAO,EAAE,CAAC,EAC5G,EAAE,IAECR,GADAD,EAAgB3Z,EAAGtZ,cAAc,IAAMkP,EAA8B,GAC3ClP,cAAc,IAAMqtB,EAAoB,IAElE13B,SAAOu9B,CAAS,EAEhB2I,EAAgBlvC,KAAKy+B,WAAWh7B,CAAI,EACpCzD,KAAKK,OAAO+kB,kBAAoBuH,EAAG1a,UAAUC,SAAS+qB,EAAc,IACpEj9B,KAAKK,OAAO40B,kBAAkBtX,eAAeuxB,CAAa,EAC1Dl4B,WAAS,CAACk4B,GAAgB/R,CAAmB,GAGjDn9B,KAAKK,OAAOwE,QAAQ65B,EADT,CAAEj7B,KAAMA,EAAMyP,QAASg8B,EAAe5mC,OAAQ,CAAA,GACV,SAAUq2B,GACrD,IAAIwQ,EAAmBpnC,CAAAA,CAAAA,GAAmBu+B,EAAcra,WAAWnrB,OAC7DmD,EAAM0kC,aAAan9B,GAAK68B,sBACzB1J,EAASr2B,QAAU6mC,CAAAA,IAAqB54B,oBAAM3T,CAAW,IACtD2T,oBAAMxS,CAAK,GAAuC,IAAlCuiC,EAAcrnB,SAASne,OACvCwlC,EAAcjtB,YAAY61B,CAAa,EAGvC5I,EAAcvD,aAAamM,EAAe5I,EAAcra,WAAWloB,EAAM,GAGpF,IAGT0jC,EAAoB7nC,UAAU8J,WAAa,SAAUjG,GACjD,IAIQujC,EAJJC,EAAUxjC,EAAKzD,KAAKK,OAAOkF,aAAaC,aACxC6W,EAAcrc,KAAKK,OAAO6S,QAAQG,cAAc,oBAAuC4zB,EAAU,IAAK,EACtG5qB,IACArc,KAAK2J,eAAiB0S,CAAAA,CAAAA,EAAYpK,UAAUC,SAAS8C,CAAwB,EACzEgyB,EAAgB3qB,EAAY7D,cAChCxP,SAAOqT,CAAW,EAC2F,IAAzG2qB,EAAc7zB,iBAAiB,gBAAkC+L,GAAwB,GAAG,EAAEpe,SAC9FkmC,EAAc3tB,YAAYrZ,KAAK4+B,iBAAiB,GAI5D6I,EAAoB7nC,UAAUi6B,WAAa,WACvC,IAAI51B,EAAQjE,KAKRyqB,GAJJnK,eAAaR,IAAI9f,KAAKK,OAAO6S,QAAS,QAASlT,KAAKK,OAAOuJ,aAAakI,aAAc9R,KAAKK,OAAOuJ,YAAY,EAC9G0W,eAAaR,IAAI9f,KAAKK,OAAO6S,QAAS,WAAYlT,KAAKK,OAAOuJ,aAAa6K,mBAAoBzU,KAAKK,OAAOuJ,YAAY,EACvH0W,eAAaR,IAAIS,SAAU0lB,UAAQiB,gBAAiBlnC,KAAKqlC,cAAerlC,IAAI,EAC5EmC,OAAOitC,iBAAiB,SAAUpvC,KAAKqvC,SAAS,EAClCrvC,KAAKK,OAAO6S,QAAQG,cAAc,IAAMoI,CAAiB,GACvE6E,eAAaR,IAAI2K,EAAS,SAAUzqB,KAAKkiC,gBAAiBliC,IAAI,EAC5C,GAAGgT,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAMmP,CAAsB,CAAC,EACtFpd,QAAQ,SAAUsoB,GACtBvpB,EAAM5D,OAAOy5B,iBAAmBtM,EAAQ+V,eACxCt/B,EAAM5D,OAAO8hC,eAAephC,OAAOysB,EAAQ+V,aAAavvB,aAAa,UAAU,GAAK,CAAEqK,KAAM,EAAGD,IAAK,IAExGkC,eAAaR,IAAI0N,EAAS,SAAUvpB,EAAM2mC,wBAAyB3mC,CAAK,EACxEqc,eAAaR,IAAI0N,EAAS,SAAU8hB,WAASrrC,EAAMq/B,eAAgB,GAAG,EAAGr/B,CAAK,EACjF,EACGjE,KAAKK,OAAOgV,aACZrV,KAAKK,OAAOiV,YAAYggB,kBACxB7K,EAAQhB,WAAazpB,KAAKypB,YAE9BzpB,KAAK0lC,iBAET+B,EAAoB7nC,UAAUunC,aAAe,WACzC,IAAIljC,EAAQjE,KAMRyqB,GALJnK,eAAatX,OAAOhJ,KAAKK,OAAO6S,QAAS,QAASlT,KAAKK,OAAOuJ,aAAakI,YAAY,EACvFwO,eAAatX,OAAOhJ,KAAKK,OAAO6S,QAAS,WAAYlT,KAAKK,OAAOuJ,aAAa6K,kBAAkB,EAChG6L,eAAatX,OAAOuX,SAAU0lB,UAAQiB,gBAAiBlnC,KAAKqlC,aAAa,EACzEljC,OAAOotC,oBAAoB,SAAUvvC,KAAKqvC,SAAS,EACnDrvC,KAAKqvC,UAAY,KACHrvC,KAAKK,OAAO6S,QAAQG,cAAc,IAAMoI,CAAiB,GAQnEkmB,GAPAlX,IACAnK,eAAatX,OAAOyhB,EAAS,SAAUzqB,KAAKkiC,eAAe,EAC3D5hB,eAAatX,OAAOyhB,EAAS,SAAUzqB,KAAK4qC,uBAAuB,EAC/D5qC,KAAKK,OAAO+kB,mBACZplB,KAAKonC,kBAGK,GAAGp0B,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAMmP,CAAsB,CAAC,GACzE,EAArBqf,EAAY7gC,QACZ6gC,EAAYz8B,QAAQ,SAAUsoB,GAAWlN,eAAatX,OAAOwkB,EAAS,SAAU8hB,WAASrrC,EAAMq/B,eAAgB,GAAG,CAAC,EAAI,EAEvHtjC,KAAKK,OAAOgV,YACZrV,KAAKK,OAAOiV,YAAY+hB,qBAGhCoQ,EAAoB7nC,UAAU8lC,cAAgB,WAC1C,IAEQ/rB,EAFJ1V,EAAQjE,KACRA,KAAKK,OAAO+kB,mBACRzL,EAAQ,GAAG3G,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAMY,EAC/D,IAAMkpB,GAAiB,KAAO9qB,CAAc,CAAC,EACnD6E,WAAS2C,EAAOwjB,CAAmB,EAChB,EAAfxjB,EAAM7Y,SACN6Y,EAAMzU,QAAQ,SAAU+O,GAAQ,OAAOhQ,EAAM5D,OAAO40B,kBAAkBtX,eAAe1J,CAAI,EAAI,GAIzGwzB,EAAoB7nC,UAAUwnC,gBAAkB,WAC5C,IAAInjC,EAAQjE,KACR2Z,EAAQ,GAAG3G,MAAMC,KAAKjT,KAAKK,OAAO6S,QAAQC,iBAAiB,IAAMY,EAC/D,IAAMkpB,GAAiB,KAAO9qB,CAAc,CAAC,EACnD8C,cAAY0E,EAAOwjB,CAAmB,EACnB,EAAfxjB,EAAM7Y,QACN6Y,EAAMzU,QAAQ,SAAU+O,GAAQ,OAAOhQ,EAAM5D,OAAO40B,kBAAkBnL,iBAAiB7V,CAAI,EAAI,GAGvGwzB,EAAoB7nC,UAAUoqB,QAAU,WACpChqB,KAAKK,OAAO+0B,iBACZp1B,KAAKK,OAAOgnC,IAAIxgC,EAAkB7G,KAAKs5B,UAAU,EACjDt5B,KAAKK,OAAOgnC,IAAI98B,EAAqBvK,KAAKw5B,cAAc,EACxDx5B,KAAKmnC,eACL,IAAIrc,EAAS9qB,KAAKK,OAAO6S,QAAQG,cAAc,IAAMmI,CAAgB,EAIjEiP,GAHAK,GACA9hB,SAAO8hB,CAAM,EAEH9qB,KAAKK,OAAO6S,QAAQG,cAAc,IAAMoI,CAAiB,GAYnE6rB,GAXA7c,GACAzhB,SAAOyhB,CAAO,EAEdzqB,KAAKu4B,cACLv4B,KAAKu4B,YAAYvO,UACjBhqB,KAAKu4B,YAAc,MAEnBv4B,KAAK+4B,YACL/4B,KAAK+4B,UAAU/O,UACfhqB,KAAK+4B,UAAY,MAEI/4B,KAAKK,OAAO6S,QAAQG,cAAc,IAAMokB,CAAyB,GAItF8P,GAHAD,GACAt+B,SAAOs+B,CAAkB,EAEPtnC,KAAKK,OAAO6S,QAAQG,cAAc,IAAM6kB,EAA0B,GACpFqP,GACAv+B,SAAOu+B,CAAe,GAx4ClC,IACQ/8B,GAsB2CQ,GAA/Cy8B,GAo3COA,EAl3CP,SAASA,EAAoBpnC,GACzB,IAAI4D,EAAQ+G,GAAOiI,KAAKjT,KAAMK,CAAM,GAAKL,KAezC,OAdAiE,EAAM5D,OAASA,EACf4D,EAAMkG,WAAa,GACnBlG,EAAM0kC,aAAe,GACrB1kC,EAAMqkC,QAAU,GAChBrkC,EAAMskC,YAAc,GACpBtkC,EAAMwqC,WAAa,GACnBxqC,EAAM0e,WAAa,GACnB1e,EAAMwlB,WAAa,EACnBxlB,EAAMsP,YAAc,EACpBtP,EAAMorC,UAAYprC,EAAM4jC,aAAatpB,KAAKta,CAAK,EAC3CA,EAAM5D,OAAOsB,uBACbsC,EAAM5D,OAAOk5B,GAAG1yB,EAAkB5C,EAAMq1B,WAAYr1B,CAAK,EACzDA,EAAM5D,OAAOk5B,GAAGhvB,EAAqBtG,EAAMu1B,eAAgBv1B,CAAK,GAE7DA,ECxCPuG,GAAgB,SAAUC,EAAGC,GAI7B,OAHAF,GAAgBG,OAAOC,iBAClB,CAAEC,UAAW,cAAgBlC,MAAS,SAAU8B,EAAGC,GAAKD,EAAEI,UAAYH,GACvE,SAAUD,EAAGC,GAAK,IAAK,IAAII,KAAKJ,EAAOA,EAAEK,eAAeD,CAAC,IAAGL,EAAEK,GAAKJ,EAAEI,OACpDL,EAAGC,CAAC,GALjC,IACQF,GAqD8BQ,GAtDlCC,GAOO,SAAUR,EAAGC,GAEhB,SAASQ,IAAOlL,KAAKmL,YAAcV,EADnCD,GAAcC,EAAGC,CAAC,EAElBD,EAAE7K,UAAkB,OAAN8K,EAAaC,OAAOS,OAAOV,CAAC,GAAKQ,EAAGtL,UAAY8K,EAAE9K,UAAW,IAAIsL,IAGnFG,EAA0C,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,IAA2HhB,EAAvHiB,EAAIC,UAAU7K,OAAQ8K,EAAIF,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAOd,OAAOkB,yBAAyBN,EAAQC,CAAG,EAAIC,EACrH,GAAuB,UAAnB,OAAOK,SAAoD,YAA5B,OAAOA,QAAQC,SAAyBH,EAAIE,QAAQC,SAAST,EAAYC,EAAQC,EAAKC,CAAI,OACxH,IAAK,IAAIpJ,EAAIiJ,EAAWxK,OAAS,EAAQ,GAALuB,EAAQA,CAAC,IAAQoI,EAAIa,EAAWjJ,MAAIuJ,GAAKF,EAAI,EAAIjB,EAAEmB,CAAC,EAAQ,EAAJF,EAAQjB,EAAEc,EAAQC,EAAKI,CAAC,EAAInB,EAAEc,EAAQC,CAAG,IAAMI,GAChJ,OAAW,EAAJF,GAASE,GAAKjB,OAAOqB,eAAeT,EAAQC,EAAKI,CAAC,EAAGA,CAChE,EAoCI4jC,IAAkCxkC,GAsrBpCykC,YArrBExkC,GAAUukC,EAAQxkC,EAAM,EAmBxBwkC,EAAO5vC,UAAU8vC,UAAY,WACzB1vC,KAAKqV,WAAa4wB,UAAQ0J,SAC1B3vC,KAAKI,WAAa,GACbJ,KAAK4vC,mBAAsB5vC,KAAK8W,sBACjC9W,KAAK8W,oBAAsB,IAE/B9W,KAAK4U,eAAiB,CAAEnR,KAAM,KAAMyP,QAAS,MAoB7ClT,KAAKogB,UAAY,IAAIyvB,OAAK7vC,KAAK8vC,gBAnBX,CAChBC,MAAO,QACP/F,IAAK,MACLl2B,IAAK,MACLk8B,cAAe,iBACfC,SAAU,eACVC,UAAW,oBACXC,YAAa,cACbC,cAAe,6CACfC,KAAM,OACNxc,OAAQ,SACRvrB,OAAQ,SACRgoC,IAAK,MACLC,GAAI,KACJpoB,MAAO,QACPqoB,OAAQ,sBACRC,WAAY,aACZ92B,MAAO,SAEoD3Z,KAAK0wC,MAAM,EAC1E1wC,KAAKmiC,eAAiB,CAAE1X,QAAS,CAAEpM,KAAM,EAAGD,IAAK,GAAKrd,OAAQ,IAC9Df,KAAK85B,gBAAkB,CAAA,GAQ3B0V,EAAO5vC,UAAU+wC,gBAAkB,WAE/B,MADc,IASlBnB,EAAO5vC,UAAUgxC,eAAiB,WAC9B,OAA6B,EAAzB5wC,KAAKF,WAAWgB,OACTd,KAAK6wC,aAAa,CAAC,UAAW,aAAc,sBAAsB,EAGlE7wC,KAAK6wC,aAAa,CAAC,UAAW,aAAc,sBAAsB,GASjFrB,EAAO5vC,UAAUkwC,cAAgB,WAC7B,MAAO,UAQXN,EAAO5vC,UAAUkxC,OAAS,WACtB,IAAIC,EAAa,CAAChwB,IACdiwB,EAAgB,IAChBhxC,KAAK6qB,UACLkmB,EAGAC,GAHW1vC,KAAK2vC,EAAa,GAK7BjxC,KAAKqV,WACL07B,EAGAC,GAHW1vC,KAAK60B,EAAgB,EAKhCn2B,KAAK2qB,UACLomB,EAAWzvC,KAAKtB,KAAK2qB,QAAQ,EAEjC1Y,YAAUjS,KAAKkT,QAAS69B,EAAYC,CAAa,EACjDhxC,KAAKkT,QAAQ8E,MAAMC,MAAQnW,aAAW9B,KAAKiY,KAAK,EAChDjY,KAAKkT,QAAQ8E,MAAMhW,OAASF,aAAW9B,KAAKgC,MAAM,EAClDhC,KAAKkT,QAAQ2C,aAAa,OAAQ,aAAa,EAC/C7V,KAAKkT,QAAQ2C,aAAa,aAAc,cAAc,EACtDq7B,gBAAc,CAAE3lC,OAAQvL,KAAKkT,QAAS,EACtClT,KAAKqI,cACLrI,KAAKmxC,qBAUT3B,EAAO5vC,UAAUwxC,kBAAoB,SAAUC,EAASC,GACpD,IAAK,IAAI1wC,EAAK,EAAGC,EAAK8J,OAAOmX,KAAKuvB,CAAO,EAAGzwC,EAAKC,EAAGC,OAAQF,CAAE,GAE1D,OADWC,EAAGD,IAEV,IAAK,WACG0wC,EAAQ3mB,UACR1V,cAAY,CAACjV,KAAKkT,SAAUo+B,EAAQ3mB,QAAQ,EAE5C0mB,EAAQ1mB,UACR3T,WAAS,CAAChX,KAAKkT,SAAUm+B,EAAQ1mB,QAAQ,EAE7C,MACJ,IAAK,YACL,IAAK,SACD3qB,KAAK0G,UACL,MACJ,IAAK,QACD1G,KAAKkT,QAAQ8E,MAAMC,MAAQnW,aAAWuvC,EAAQp5B,KAAK,EACnDjY,KAAKkT,QAAQG,cAAc,IAAMmI,CAAgB,EAAEnH,kBAAkB2D,MAAMC,MAAQ,OACnFjY,KAAK4G,OAAO2D,EAAqB,EAAE,EACnC,MACJ,IAAK,SACDvK,KAAKkT,QAAQ8E,MAAMhW,OAASF,aAAWuvC,EAAQrvC,MAAM,EACrDhC,KAAKkT,QAAQG,cAAc,IAAMoI,CAAiB,EAAEzD,MAAMhW,OAAS,OACnEhC,KAAK4G,OAAO2D,EAAqB,EAAE,EACnC,MACJ,IAAK,aACL,IAAK,QACGvK,KAAK+I,YACL/I,KAAK+I,WAAW/F,SAAS,CAAEqB,cAAe,CAAA,EAAO,EAErDrE,KAAK+I,WAAa,IAAIpJ,GAAKK,IAAI,EAC/B,MACJ,IAAK,UACL,IAAK,iBACDA,KAAK4G,OAAOC,EAAkB,CAAEC,cAAe9G,KAAKI,WAAY,EAChE,MACJ,IAAK,mBACDJ,KAAKuxC,kCAAkCF,EAAQnnC,iBAAkBonC,EAAQpnC,gBAAgB,EACzF,MACJ,IAAK,eACDlK,KAAKwxC,8BAA8BH,EAAQ9rC,aAAc+rC,EAAQ/rC,YAAY,EAC7E,MACJ,IAAK,mBACG8rC,EAAQjsB,kBACJplB,KAAK2B,qBACL3B,KAAKyG,oBAGLzG,KAAKiH,cAHoBy+B,iBAOzB1lC,KAAK2B,qBACL3B,KAAKyG,oBAGLzG,KAAKiH,cAHoBmgC,kBAMjC,MACJ,IAAK,gBACGpnC,KAAKioB,gBACLjoB,KAAKioB,cAAc+B,UACnBhqB,KAAKioB,cAAgB,MAErBopB,EAAQjS,gBACRp/B,KAAKioB,cAAgB,IAAImM,GAAcp0B,IAAI,GACvCA,KAAK2B,qBACL3B,KAAKyG,oBAGLzG,KAAKiH,cAHoBw+B,gBAMjC,MACJ,IAAK,iBACG4L,EAAQ9lB,iBACRvrB,KAAKkW,aAAe,IAAI+T,GAAajqB,IAAI,GAE7C,MACJ,IAAK,gBACGA,KAAKqS,iBACLrS,KAAKqS,eAAe2X,UACpBhqB,KAAKqS,eAAiB,MAEtBg/B,EAAQj/B,gBACRpS,KAAKqS,eAAiB,IAAI2f,GAAShyB,IAAI,GAE3C,MACJ,IAAK,kBACGA,KAAK2B,qBACL3B,KAAKyG,oBAGLzG,KAAKiH,cAHoBs+B,iBAK7B,MACJ,IAAK,eACDvlC,KAAK4G,OAAOC,EAAkB,CAAEC,cAAe9G,KAAKI,WAAY,IAQhFovC,EAAO5vC,UAAU2xC,kCAAoC,SAAUF,EAASI,GACpE,IAAK,IAAI7wC,EAAK,EAAGC,EAAK8J,OAAOmX,KAAKuvB,CAAO,EAAGzwC,EAAKC,EAAGC,OAAQF,CAAE,GAE1D,OADWC,EAAGD,IAEV,IAAK,WACL,IAAK,YACL,IAAK,eACL,IAAK,gBACL,IAAK,WACL,IAAK,gBACDZ,KAAK4G,OAAOC,EAAkB,CAAEC,cAAe9G,KAAKI,WAAY,EAChE,MACJ,IAAK,mBACGJ,KAAKiH,aAAamM,mBAAqB,CAACpT,KAAKkK,iBAAiByf,kBAC9D3pB,KAAKiH,aAAao8B,qBAOtCmM,EAAO5vC,UAAU4xC,8BAAgC,SAAUH,EAASI,GAEhE,IADA,IAAI93B,EACK/Y,EAAK,EAAGC,EAAK8J,OAAOmX,KAAKuvB,CAAO,EAAGzwC,EAAKC,EAAGC,OAAQF,CAAE,GAE1D,OADWC,EAAGD,IAEV,IAAK,aACL,IAAK,cACL,IAAK,eACL,IAAK,WACL,IAAK,YACL,IAAK,eACL,IAAK,kBACGZ,KAAK2B,qBACL3B,KAAKyG,oBAGLzG,KAAKiH,cAHoBw+B,eAK7B,MACJ,IAAK,gBAEkB,GADnB9rB,EAAQ3Z,KAAK4Z,oBACH9Y,SACNmU,cAAY0E,EAAO3E,CAAwB,GACvChV,KAAK2B,qBACL3B,KAAKyG,oBAGLzG,KAAKiH,cAHoBiO,0BAA0ByE,CAAK,KAUhF61B,EAAO5vC,UAAUuxC,kBAAoB,WACjCnxC,KAAK+I,WAAa,IAAIpJ,GAAKK,IAAI,EAC3BA,KAAK2B,qBACL3B,KAAKyG,oBAAsB,IAAIghC,GAAoBznC,IAAI,EAGvDA,KAAKiH,aAAe,IAAIoyB,GAAar5B,IAAI,EAEzCA,KAAKoS,gBACLpS,KAAKqS,eAAiB,IAAI2f,GAAShyB,IAAI,GAE3CA,KAAK4J,aAAe,IAAIiI,GAAO7R,IAAI,EACnCA,KAAKomB,WAAa,IAAIxK,GAAK5b,IAAI,EAC/BA,KAAKi1B,kBAAoB,IAAIvX,GAAY1d,IAAI,EAC7CA,KAAKkW,aAAe,IAAI+T,GAAajqB,IAAI,EACrCA,KAAKo/B,gBACLp/B,KAAKioB,cAAgB,IAAImM,GAAcp0B,IAAI,IAE3CimC,UAAQ0J,UAAY1J,UAAQyL,WAC5B1xC,KAAKsV,YAAc,IAAI+f,GAAYr1B,IAAI,IAG/CwvC,EAAO5vC,UAAUsH,gBAAkB,WAC3BlH,KAAK8xB,SACL9xB,KAAK2xC,wBAGbnC,EAAO5vC,UAAUw1B,eAAiB,SAAUwc,GACpC5xC,KAAK8xB,SACL9xB,KAAK6xC,cAAcD,CAAS,GAGpCpC,EAAO5vC,UAAUkyC,eAAiB,WAC1B9xC,KAAKiH,eACLjH,KAAKiH,aAAa+iB,UAClBhqB,KAAKiH,aAAe,MAEpBjH,KAAKqS,iBACLrS,KAAKqS,eAAe2X,UACpBhqB,KAAKqS,eAAiB,MAEtBrS,KAAKyG,sBACLzG,KAAKyG,oBAAoBujB,UACzBhqB,KAAKyG,oBAAsB,MAE3BzG,KAAKsV,cACLtV,KAAKsV,YAAY0U,UACjBhqB,KAAKsV,YAAc,MAEnBtV,KAAKioB,gBACLjoB,KAAKioB,cAAc+B,UACnBhqB,KAAKioB,cAAgB,MAEzBjoB,KAAKkW,aAAe,KACpBlW,KAAK4J,aAAe,KACpB5J,KAAKomB,WAAa,KAClBpmB,KAAK+I,WAAa,KAClB/I,KAAKi1B,kBAAoB,MAE7Bua,EAAO5vC,UAAUwsB,eAAiB,SAAUL,GACxC,GAAIA,EACA,IACI,MAAwB,YAApB,OAAOA,GAGFxL,SAASpN,iBAAiB4Y,CAAQ,EAAEjrB,OAClCixC,UAAQxxB,SAASlN,cAAc0Y,CAAQ,EAAEvS,UAAUjY,MAAM,EAGzDwwC,UAAQhmB,CAAQ,EAG/B,MAAOpkB,GACH,OAAOoqC,UAAQhmB,CAAQ,IAYnCyjB,EAAO5vC,UAAU0U,eAAiB,SAAU/I,GACxC,IAAItH,EAAQjE,KAERgyC,EAD2E,UAA/D,OAAQhyC,KAAKI,WAAW,GAAIJ,KAAKuF,aAAaC,aACnC3D,SAAS0J,EAAOyI,aAAa,SAAS,EAAG,EAAE,EAAIzI,EAAOyI,aAAa,SAAS,EAIvG,OAHchU,KAAKI,WAAWkF,OAAO,SAAU7B,GAC3C,OAAOA,EAAKQ,EAAMsB,aAAaC,eAAiBwsC,EACnD,EAAE,IAWPxC,EAAO5vC,UAAUqc,cAAgB,SAAUmB,EAAWtd,GAClD,OAAIE,KAAK2B,qBACE3B,KAAKyG,oBAAoB+C,eAAe1J,CAAU,EAAE,GAAKsd,IAAc,GAE3Epd,KAAKiH,aAAauC,eAAe1J,CAAU,EAAE,GAAKsd,IAAc,IAS3EoyB,EAAO5vC,UAAU2d,gBAAkB,SAAUvc,GACzC,OAAOhB,KAAKiH,aAAaqD,mBAAmB,GAAKtJ,IAAa,IAQlEwuC,EAAO5vC,UAAUga,iBAAmB,WAChC,MAAO,GAAG5G,MAAMC,KAAKjT,KAAKkT,QAAQC,iBAAiB,WAA6B6B,CAAwB,CAAC,GAQ7Gw6B,EAAO5vC,UAAUyI,YAAc,WAC3BA,cAAYrI,KAAKkT,OAAO,GAQ5Bs8B,EAAO5vC,UAAUkG,YAAc,WAC3BA,cAAY9F,KAAKkT,OAAO,GAW5Bs8B,EAAO5vC,UAAU4U,WAAa,SAAUlQ,EAAQb,GAC5CzD,KAAKkW,aAAa1B,WAAWlQ,EAAQb,CAAI,GAQ7C+rC,EAAO5vC,UAAUyqB,YAAc,WAC3BrqB,KAAKkW,aAAamU,eAUtBmlB,EAAO5vC,UAAUic,QAAU,SAAUC,EAAU/X,GAC3C/D,KAAKomB,WAAWvK,QAAQC,EAAU/X,CAAK,GAU3CyrC,EAAO5vC,UAAU0c,WAAa,SAAUR,EAAU/X,GAC9C/D,KAAKomB,WAAW9J,WAAWR,EAAU/X,CAAK,GAU9CyrC,EAAO5vC,UAAU6c,WAAa,SAAUX,GACpC9b,KAAKomB,WAAW3J,WAAWX,CAAQ,GAUvC0zB,EAAO5vC,UAAUob,UAAY,SAAUC,EAAelX,GAClD/D,KAAK4J,aAAaoR,UAAUC,EAAelX,CAAK,GASpDyrC,EAAO5vC,UAAUub,aAAe,SAAUpX,GACtC/D,KAAK4J,aAAauR,aAAapX,CAAK,GASxCyrC,EAAO5vC,UAAU8b,WAAa,SAAUlQ,GACpCxL,KAAK4J,aAAa8R,WAAWlQ,CAAG,GASpCgkC,EAAO5vC,UAAU+b,WAAa,SAAUnQ,GACpCxL,KAAK4J,aAAa+R,WAAWnQ,CAAG,GAUpCgkC,EAAO5vC,UAAU6I,UAAY,SAAU3E,EAAMC,GAEzC/D,KAAK+I,WAAWN,UAAU3E,EAD1BC,EAAQA,GAAgB,CACa,GAQzCyrC,EAAO5vC,UAAUqyC,cAAgB,WAC7BjyC,KAAKo1B,eAAe,CAAC,iBAAiB,GAClCp1B,KAAK2B,qBACL3B,KAAKyG,oBAGLzG,KAAKiH,cAHoBs+B,iBAK7BvlC,KAAKkH,mBAQTsoC,EAAO5vC,UAAUoqB,QAAU,WACvBhqB,KAAK8xC,iBACL,GAAG9+B,MAAMC,KAAKjT,KAAKkT,QAAQ+Y,UAAU,EAAE/mB,QAAQ,SAAU2iB,GAAQtM,SAAOsM,CAAI,EAAI,EAChF,IAAImpB,EAAgB,CAACjwB,IACjB/gB,KAAK2qB,WACLqmB,EAAgBA,EAAcljB,OAAO9tB,KAAK2qB,SAASzpB,MAAM,GAAG,CAAC,GAEjE+T,cAAY,CAACjV,KAAKkT,SAAU89B,CAAa,EACzChmC,GAAOpL,UAAUoqB,QAAQ/W,KAAKjT,IAAI,GAEtCqL,EAAW,CACPc,cACDqjC,EAAO5vC,UAAW,WAAY,KAAA,CAAM,EACvCyL,EAAW,CACPc,WAAS,MAAM,GAChBqjC,EAAO5vC,UAAW,QAAS,KAAA,CAAM,EACpCyL,EAAW,CACPc,WAAS,MAAM,GAChBqjC,EAAO5vC,UAAW,SAAU,KAAA,CAAM,EACrCyL,EAAW,CACPc,WAAS,MAAM,GAChBqjC,EAAO5vC,UAAW,aAAc,KAAA,CAAM,EACzCyL,EAAW,CACPc,cACDqjC,EAAO5vC,UAAW,uBAAwB,KAAA,CAAM,EACnDyL,EAAW,CACPc,WAAS,EAAE,GACZqjC,EAAO5vC,UAAW,aAAc,KAAA,CAAM,EACzCyL,EAAW,CACPc,cACDqjC,EAAO5vC,UAAW,QAAS,KAAA,CAAM,EACpCyL,EAAW,CACPc,cACDqjC,EAAO5vC,UAAW,WAAY,KAAA,CAAM,EACvCyL,EAAW,CACPc,WAAS,QAAQ,GAClBqjC,EAAO5vC,UAAW,iBAAkB,KAAA,CAAM,EAC7CyL,EAAW,CACPc,WAAS,EAAE,GACZqjC,EAAO5vC,UAAW,iBAAkB,KAAA,CAAM,EAC7CyL,EAAW,CACP6mC,aAAW,GAAI3lC,EAAO,GACvBijC,EAAO5vC,UAAW,UAAW,KAAA,CAAM,EACtCyL,EAAW,CACPc,WAAS,CAAA,CAAI,GACdqjC,EAAO5vC,UAAW,gBAAiB,KAAA,CAAM,EAC5CyL,EAAW,CACPc,WAAS,CAAA,CAAI,GACdqjC,EAAO5vC,UAAW,sBAAuB,KAAA,CAAM,EAClDyL,EAAW,CACP6mC,aAAW,GAAI1lC,EAAc,GAC9BgjC,EAAO5vC,UAAW,iBAAkB,KAAA,CAAM,EAC7CyL,EAAW,CACP8mC,UAAQ,GAAIlmC,EAAgB,GAC7BujC,EAAO5vC,UAAW,mBAAoB,KAAA,CAAM,EAC/CyL,EAAW,CACP8mC,UAAQ,GAAI9lC,CAAY,GACzBmjC,EAAO5vC,UAAW,eAAgB,KAAA,CAAM,EAC3CyL,EAAW,CACP8mC,UAAQ,GAAI1lC,CAAY,GACzB+iC,EAAO5vC,UAAW,eAAgB,KAAA,CAAM,EAC3CyL,EAAW,CACP8mC,UAAQ,GAAI7lC,CAAc,GAC3BkjC,EAAO5vC,UAAW,iBAAkB,KAAA,CAAM,EAC7CyL,EAAW,CACPc,WAAS,CAAA,CAAI,GACdqjC,EAAO5vC,UAAW,mBAAoB,KAAA,CAAM,EAC/CyL,EAAW,CACPc,WAAS,CAAA,CAAK,GACfqjC,EAAO5vC,UAAW,gBAAiB,KAAA,CAAM,EAC5CyL,EAAW,CACPc,WAAS,CAAA,CAAK,GACfqjC,EAAO5vC,UAAW,kBAAmB,KAAA,CAAM,EAC9CyL,EAAW,CACPc,WAAS,CAAA,CAAK,GACfqjC,EAAO5vC,UAAW,oBAAqB,KAAA,CAAM,EAChDyL,EAAW,CACPc,cACDqjC,EAAO5vC,UAAW,kBAAmB,KAAA,CAAM,EAC9CyL,EAAW,CACP+mC,WACD5C,EAAO5vC,UAAW,cAAe,KAAA,CAAM,EAC1CyL,EAAW,CACP+mC,WACD5C,EAAO5vC,UAAW,iBAAkB,KAAA,CAAM,EAC7CyL,EAAW,CACP+mC,WACD5C,EAAO5vC,UAAW,gBAAiB,KAAA,CAAM,EAC5CyL,EAAW,CACP+mC,WACD5C,EAAO5vC,UAAW,UAAW,KAAA,CAAM,EACtCyL,EAAW,CACP+mC,WACD5C,EAAO5vC,UAAW,cAAe,KAAA,CAAM,EAC1CyL,EAAW,CACP+mC,WACD5C,EAAO5vC,UAAW,YAAa,KAAA,CAAM,EACxCyL,EAAW,CACP+mC,WACD5C,EAAO5vC,UAAW,YAAa,KAAA,CAAM,EACxCyL,EAAW,CACP+mC,WACD5C,EAAO5vC,UAAW,kBAAmB,KAAA,CAAM,EAC9CyL,EAAW,CACP+mC,WACD5C,EAAO5vC,UAAW,gBAAiB,KAAA,CAAM,EAC5CyL,EAAW,CACP+mC,WACD5C,EAAO5vC,UAAW,eAAgB,KAAA,CAAM,EAC3CyL,EAAW,CACP+mC,WACD5C,EAAO5vC,UAAW,YAAa,KAAA,CAAM,EACxCyL,EAAW,CACP+mC,WACD5C,EAAO5vC,UAAW,OAAQ,KAAA,CAAM,EACnCyL,EAAW,CACP+mC,WACD5C,EAAO5vC,UAAW,WAAY,KAAA,CAAM,EACvCyL,EAAW,CACP+mC,WACD5C,EAAO5vC,UAAW,aAAc,KAAA,CAAM,EACzCyL,EAAW,CACP+mC,WACD5C,EAAO5vC,UAAW,cAAe,KAAA,CAAM,EAC1CyL,EAAW,CACP+mC,WACD5C,EAAO5vC,UAAW,kBAAmB,KAAA,CAAM,EAC9CyL,EAAW,CACP+mC,WACD5C,EAAO5vC,UAAW,oBAAqB,KAAA,CAAM,EACvCyL,EAAW,CAChBgnC,yBACD7C,CAAM,GA5qBT,SAASA,EAAO8C,EAASp/B,GACjBjP,EAAQ+G,GAAOiI,KAAKjT,KAAMsyC,EAASp/B,CAAO,GAAKlT,KAGnD,OAFAiE,EAAMuD,gBAAkB,GACxBvD,EAAMsuC,QAAU,CAAA,EACTtuC,iFnB1BU,kEAEF,4JAbI,qFAeF"}