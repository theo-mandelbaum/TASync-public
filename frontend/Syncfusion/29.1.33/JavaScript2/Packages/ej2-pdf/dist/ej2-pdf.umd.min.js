!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@syncfusion/ej2-compression"),require("@syncfusion/ej2-file-utils")):"function"==typeof define&&define.amd?define(["exports","@syncfusion/ej2-compression","@syncfusion/ej2-file-utils"],e):e((t=t||self).ej={},t.ej2Compression,t.ej2FileUtils)}(this,function(x,O,M){"use strict";(e=x.PdfAnnotationFlag||(x.PdfAnnotationFlag={}))[e.default=0]="default",e[e.invisible=1]="invisible",e[e.hidden=2]="hidden",e[e.print=4]="print",e[e.noZoom=8]="noZoom",e[e.noRotate=16]="noRotate",e[e.noView=32]="noView",e[e.readOnly=64]="readOnly",e[e.locked=128]="locked",e[e.toggleNoView=256]="toggleNoView",(e=x.PdfLineEndingStyle||(x.PdfLineEndingStyle={}))[e.none=0]="none",e[e.openArrow=1]="openArrow",e[e.closedArrow=2]="closedArrow",e[e.rOpenArrow=3]="rOpenArrow",e[e.rClosedArrow=4]="rClosedArrow",e[e.butt=5]="butt",e[e.diamond=6]="diamond",e[e.circle=7]="circle",e[e.square=8]="square",e[e.slash=9]="slash",(e=x.PdfLineIntent||(x.PdfLineIntent={}))[e.lineArrow=0]="lineArrow",e[e.lineDimension=1]="lineDimension",(e=x.PathPointType||(x.PathPointType={}))[e.start=0]="start",e[e.line=1]="line",e[e.bezier=3]="bezier",e[e.pathTypeMask=7]="pathTypeMask",e[e.dashMode=16]="dashMode",e[e.pathMarker=32]="pathMarker",e[e.closePath=128]="closePath",(e=x.PdfLineCaptionType||(x.PdfLineCaptionType={}))[e.inline=0]="inline",e[e.top=1]="top",(e=x.PdfBorderStyle||(x.PdfBorderStyle={}))[e.solid=0]="solid",e[e.dashed=1]="dashed",e[e.beveled=2]="beveled",e[e.inset=3]="inset",e[e.underline=4]="underline",e[e.dot=5]="dot",(e=x.PdfBorderEffectStyle||(x.PdfBorderEffectStyle={}))[e.solid=0]="solid",e[e.cloudy=1]="cloudy",(e=x.PdfRotationAngle||(x.PdfRotationAngle={}))[e.angle0=0]="angle0",e[e.angle90=1]="angle90",e[e.angle180=2]="angle180",e[e.angle270=3]="angle270",(e=x.PdfCrossReferenceType||(x.PdfCrossReferenceType={}))[e.table=0]="table",e[e.stream=1]="stream",(e=x.PdfHighlightMode||(x.PdfHighlightMode={}))[e.noHighlighting=0]="noHighlighting",e[e.invert=1]="invert",e[e.outline=2]="outline",e[e.push=3]="push",(e=x.PdfTextAlignment||(x.PdfTextAlignment={}))[e.left=0]="left",e[e.center=1]="center",e[e.right=2]="right",e[e.justify=3]="justify",(e=x.PdfFormFieldVisibility||(x.PdfFormFieldVisibility={}))[e.visible=0]="visible",e[e.hidden=1]="hidden",e[e.visibleNotPrintable=2]="visibleNotPrintable",e[e.hiddenPrintable=3]="hiddenPrintable",(e=x.PdfMeasurementUnit||(x.PdfMeasurementUnit={}))[e.inch=0]="inch",e[e.pica=1]="pica",e[e.point=3]="point",e[e.centimeter=4]="centimeter",e[e.millimeter=6]="millimeter",(e=x.PdfCircleMeasurementType||(x.PdfCircleMeasurementType={}))[e.diameter=0]="diameter",e[e.radius=1]="radius",(e=x.PdfRubberStampAnnotationIcon||(x.PdfRubberStampAnnotationIcon={}))[e.approved=0]="approved",e[e.asIs=1]="asIs",e[e.confidential=2]="confidential",e[e.departmental=3]="departmental",e[e.draft=4]="draft",e[e.experimental=5]="experimental",e[e.expired=6]="expired",e[e.final=7]="final",e[e.forComment=8]="forComment",e[e.forPublicRelease=9]="forPublicRelease",e[e.notApproved=10]="notApproved",e[e.notForPublicRelease=11]="notForPublicRelease",e[e.sold=12]="sold",e[e.topSecret=13]="topSecret",e[e.completed=14]="completed",e[e.void=15]="void",e[e.informationOnly=16]="informationOnly",e[e.preliminaryResults=17]="preliminaryResults",(e=x.PdfCheckBoxStyle||(x.PdfCheckBoxStyle={}))[e.check=0]="check",e[e.circle=1]="circle",e[e.cross=2]="cross",e[e.diamond=3]="diamond",e[e.square=4]="square",e[e.star=5]="star",(e=x.PdfTextMarkupAnnotationType||(x.PdfTextMarkupAnnotationType={}))[e.highlight=0]="highlight",e[e.underline=1]="underline",e[e.squiggly=2]="squiggly",e[e.strikeOut=3]="strikeOut",(e=x.PdfPopupIcon||(x.PdfPopupIcon={}))[e.note=0]="note",e[e.comment=1]="comment",e[e.help=2]="help",e[e.insert=3]="insert",e[e.key=4]="key",e[e.newParagraph=5]="newParagraph",e[e.paragraph=6]="paragraph",(e=x.PdfAnnotationState||(x.PdfAnnotationState={}))[e.none=0]="none",e[e.accepted=1]="accepted",e[e.rejected=2]="rejected",e[e.cancel=3]="cancel",e[e.completed=4]="completed",e[e.marked=5]="marked",e[e.unmarked=6]="unmarked",e[e.unknown=7]="unknown",(e=x.PdfAnnotationStateModel||(x.PdfAnnotationStateModel={}))[e.none=0]="none",e[e.marked=1]="marked",e[e.review=2]="review",(e=x.PdfAttachmentIcon||(x.PdfAttachmentIcon={}))[e.pushPin=0]="pushPin",e[e.tag=1]="tag",e[e.graph=2]="graph",e[e.paperClip=3]="paperClip",(e=x.PdfAnnotationIntent||(x.PdfAnnotationIntent={}))[e.none=0]="none",e[e.freeTextCallout=1]="freeTextCallout",e[e.freeTextTypeWriter=2]="freeTextTypeWriter",(e=x.PdfDestinationMode||(x.PdfDestinationMode={}))[e.location=0]="location",e[e.fitToPage=1]="fitToPage",e[e.fitR=2]="fitR",e[e.fitH=3]="fitH",(e=x.DataFormat||(x.DataFormat={}))[e.fdf=0]="fdf",e[e.xfdf=1]="xfdf",e[e.json=2]="json",e[e.xml=3]="xml",(e=x.PdfFormFieldsTabOrder||(x.PdfFormFieldsTabOrder={}))[e.none=0]="none",e[e.row=1]="row",e[e.column=2]="column",e[e.structure=3]="structure",e[e.manual=4]="manual",e[e.widget=5]="widget",(e=x._PdfAnnotationType||(x._PdfAnnotationType={}))[e.highlight=0]="highlight",e[e.underline=1]="underline",e[e.strikeOut=2]="strikeOut",e[e.squiggly=3]="squiggly",e[e.redactionAnnotation=4]="redactionAnnotation",e[e.textAnnotation=5]="textAnnotation",e[e.linkAnnotation=6]="linkAnnotation",e[e.documentLinkAnnotation=7]="documentLinkAnnotation",e[e.uriAnnotation=8]="uriAnnotation",e[e.fileLinkAnnotation=9]="fileLinkAnnotation",e[e.freeTextAnnotation=10]="freeTextAnnotation",e[e.lineAnnotation=11]="lineAnnotation",e[e.circleAnnotation=12]="circleAnnotation",e[e.ellipseAnnotation=13]="ellipseAnnotation",e[e.squareAnnotation=14]="squareAnnotation",e[e.rectangleAnnotation=15]="rectangleAnnotation",e[e.polygonAnnotation=16]="polygonAnnotation",e[e.polyLineAnnotation=17]="polyLineAnnotation",e[e.textMarkupAnnotation=18]="textMarkupAnnotation",e[e.caretAnnotation=19]="caretAnnotation",e[e.rubberStampAnnotation=20]="rubberStampAnnotation",e[e.popupAnnotation=21]="popupAnnotation",e[e.fileAttachmentAnnotation=22]="fileAttachmentAnnotation",e[e.soundAnnotation=23]="soundAnnotation",e[e.movieAnnotation=24]="movieAnnotation",e[e.screenAnnotation=25]="screenAnnotation",e[e.widgetAnnotation=26]="widgetAnnotation",e[e.printerMarkAnnotation=27]="printerMarkAnnotation",e[e.trapNetworkAnnotation=28]="trapNetworkAnnotation",e[e.watermarkAnnotation=29]="watermarkAnnotation",e[e.textWebLinkAnnotation=30]="textWebLinkAnnotation",e[e.inkAnnotation=31]="inkAnnotation",e[e.richMediaAnnotation=32]="richMediaAnnotation",e[e.angleMeasurementAnnotation=33]="angleMeasurementAnnotation",e[e.null=34]="null",(e=x._PdfGraphicsUnit||(x._PdfGraphicsUnit={}))[e.centimeter=0]="centimeter",e[e.pica=1]="pica",e[e.pixel=2]="pixel",e[e.point=3]="point",e[e.inch=4]="inch",e[e.document=5]="document",e[e.millimeter=6]="millimeter",(e=x._FieldFlag||(x._FieldFlag={}))[e.default=0]="default",e[e.readOnly=1]="readOnly",e[e.required=2]="required",e[e.noExport=4]="noExport",e[e.multiLine=4096]="multiLine",e[e.password=8192]="password",e[e.fileSelect=1048576]="fileSelect",e[e.doNotSpellCheck=4194304]="doNotSpellCheck",e[e.doNotScroll=8388608]="doNotScroll",e[e.comb=16777216]="comb",e[e.richText=33554432]="richText",e[e.noToggleToOff=16384]="noToggleToOff",e[e.radio=32768]="radio",e[e.pushButton=65536]="pushButton",e[e.radiosInUnison=33554432]="radiosInUnison",e[e.combo=131072]="combo",e[e.edit=262144]="edit",e[e.sort=524288]="sort",e[e.multiSelect=2097152]="multiSelect",e[e.commitOnSelectChange=67108864]="commitOnSelectChange",(e=x._SignatureFlag||(x._SignatureFlag={}))[e.none=0]="none",e[e.signatureExists=1]="signatureExists",e[e.appendOnly=2]="appendOnly",(e=x._PdfCheckFieldState||(x._PdfCheckFieldState={}))[e.unchecked=0]="unchecked",e[e.checked=1]="checked",e[e.pressedUnchecked=2]="pressedUnchecked",e[e.pressedChecked=3]="pressedChecked",(e=x.PdfPermissionFlag||(x.PdfPermissionFlag={}))[e.default=0]="default",e[e.print=4]="print",e[e.editContent=8]="editContent",e[e.copyContent=16]="copyContent",e[e.editAnnotations=32]="editAnnotations",e[e.fillFields=256]="fillFields",e[e.accessibilityCopyContent=512]="accessibilityCopyContent",e[e.assembleDocument=1024]="assembleDocument",e[e.fullQualityPrint=2048]="fullQualityPrint",(e=x.PdfPageOrientation||(x.PdfPageOrientation={}))[e.portrait=0]="portrait",e[e.landscape=1]="landscape",(e=x.PdfTextDirection||(x.PdfTextDirection={}))[e.none=0]="none",e[e.leftToRight=1]="leftToRight",e[e.rightToLeft=2]="rightToLeft",(e=x.PdfSubSuperScript||(x.PdfSubSuperScript={}))[e.none=0]="none",e[e.superScript=1]="superScript",e[e.subScript=2]="subScript",(e=x.PdfBlendMode||(x.PdfBlendMode={}))[e.normal=0]="normal",e[e.multiply=1]="multiply",e[e.screen=2]="screen",e[e.overlay=3]="overlay",e[e.darken=4]="darken",e[e.lighten=5]="lighten",e[e.colorDodge=6]="colorDodge",e[e.colorBurn=7]="colorBurn",e[e.hardLight=8]="hardLight",e[e.softLight=9]="softLight",e[e.difference=10]="difference",e[e.exclusion=11]="exclusion",e[e.hue=12]="hue",e[e.saturation=13]="saturation",e[e.color=14]="color",e[e.luminosity=15]="luminosity",(e=x.PdfFillMode||(x.PdfFillMode={}))[e.winding=0]="winding",e[e.alternate=1]="alternate",(e=x.PdfDashStyle||(x.PdfDashStyle={}))[e.solid=0]="solid",e[e.dash=1]="dash",e[e.dot=2]="dot",e[e.dashDot=3]="dashDot",e[e.dashDotDot=4]="dashDotDot",e[e.custom=5]="custom",(e=x.PdfLineCap||(x.PdfLineCap={}))[e.flat=0]="flat",e[e.round=1]="round",e[e.square=2]="square",(e=x.PdfLineJoin||(x.PdfLineJoin={}))[e.miter=0]="miter",e[e.round=1]="round",e[e.bevel=2]="bevel",(e=x._PdfWordWrapType||(x._PdfWordWrapType={}))[e.none=0]="none",e[e.word=1]="word",e[e.wordOnly=2]="wordOnly",e[e.character=3]="character",(e=x._FontDescriptorFlag||(x._FontDescriptorFlag={}))[e.fixedPitch=1]="fixedPitch",e[e.serif=2]="serif",e[e.symbolic=4]="symbolic",e[e.script=8]="script",e[e.nonSymbolic=32]="nonSymbolic",e[e.italic=64]="italic",e[e.forceBold=262144]="forceBold",(e=x._TrueTypeCmapFormat||(x._TrueTypeCmapFormat={}))[e.apple=0]="apple",e[e.microsoft=4]="microsoft",e[e.trimmed=6]="trimmed",(e=x._TrueTypeCmapEncoding||(x._TrueTypeCmapEncoding={}))[e.unknown=0]="unknown",e[e.symbol=1]="symbol",e[e.unicode=2]="unicode",e[e.macintosh=3]="macintosh",(e=x._TrueTypePlatformID||(x._TrueTypePlatformID={}))[e.appleUnicode=0]="appleUnicode",e[e.macintosh=1]="macintosh",e[e.iSO=2]="iSO",e[e.microsoft=3]="microsoft",(e=x._TrueTypeMicrosoftEncodingID||(x._TrueTypeMicrosoftEncodingID={}))[e[void 0]=0]="undefined",e[e.unicode=1]="unicode",(e=x._TrueTypeMacintoshEncodingID||(x._TrueTypeMacintoshEncodingID={}))[e.roman=0]="roman",e[e.japanese=1]="japanese",e[e.chinese=2]="chinese",(e=x._TrueTypeCompositeGlyphFlag||(x._TrueTypeCompositeGlyphFlag={}))[e.Arg1And2AreWords=1]="Arg1And2AreWords",e[e.ArgsAreXyValues=2]="ArgsAreXyValues",e[e.RoundXyToGrid=4]="RoundXyToGrid",e[e.WeHaveScale=8]="WeHaveScale",e[e.Reserved=16]="Reserved",e[e.MoreComponents=32]="MoreComponents",e[e.WeHaveAnXyScale=64]="WeHaveAnXyScale",e[e.WeHaveTwoByTwo=128]="WeHaveTwoByTwo",e[e.WeHaveInstructions=256]="WeHaveInstructions",e[e.UseMyMetrics=512]="UseMyMetrics",(e=x._ImageFormat||(x._ImageFormat={}))[e.unknown=0]="unknown",e[e.bmp=1]="bmp",e[e.emf=2]="emf",e[e.gif=3]="gif",e[e.jpeg=4]="jpeg",e[e.png=5]="png",e[e.wmf=6]="wmf",e[e.icon=7]="icon",(e=x._TokenType||(x._TokenType={}))[e.none=0]="none",e[e.comment=1]="comment",e[e.number=2]="number",e[e.real=3]="real",e[e.string=4]="string",e[e.hexString=5]="hexString",e[e.unicodeString=6]="unicodeString",e[e.unicodeHexString=7]="unicodeHexString",e[e.name=8]="name",e[e.operator=9]="operator",e[e.beginArray=10]="beginArray",e[e.endArray=11]="endArray",e[e.eof=12]="eof",(e=x.PdfTextStyle||(x.PdfTextStyle={}))[e.regular=0]="regular",e[e.italic=1]="italic",e[e.bold=2]="bold",(e=x._PdfColorSpace||(x._PdfColorSpace={}))[e.rgb=0]="rgb",e[e.cmyk=1]="cmyk",e[e.grayScale=2]="grayScale",e[e.indexed=3]="indexed",(e=x.PdfNumberStyle||(x.PdfNumberStyle={}))[e.none=0]="none",e[e.numeric=1]="numeric",e[e.lowerLatin=2]="lowerLatin",e[e.lowerRoman=3]="lowerRoman",e[e.upperLatin=4]="upperLatin",e[e.upperRoman=5]="upperRoman",(e=x.PdfUnorderedListStyle||(x.PdfUnorderedListStyle={}))[e.none=0]="none",e[e.disk=1]="disk",e[e.square=2]="square",e[e.asterisk=3]="asterisk",e[e.circle=4]="circle",(e=x.PdfLayoutType||(x.PdfLayoutType={}))[e.paginate=0]="paginate",e[e.onePage=1]="onePage",(e=x.PdfLayoutBreakType||(x.PdfLayoutBreakType={}))[e.fitPage=0]="fitPage",e[e.fitElement=1]="fitElement",(e=x.PdfListMarkerAlignment||(x.PdfListMarkerAlignment={}))[e.left=0]="left",e[e.right=1]="right",(e=x.PdfPrintState||(x.PdfPrintState={}))[e.alwaysPrint=0]="alwaysPrint",e[e.neverPrint=1]="neverPrint",e[e.printWhenVisible=2]="printWhenVisible",t.prototype._writeOperator=function(t){this._stream.write(t),this._stream.write(this._newLine)},t.prototype._saveGraphicsState=function(){this._writeOperator("q")},t.prototype._restoreGraphicsState=function(){this._writeOperator("Q")},t.prototype._writeComment=function(t){t&&0<t.length&&this._writeOperator("% "+t)},t.prototype._setGraphicsState=function(t){this._stream.write("/"+js(t.name)+" "),this._writeOperator("gs")},t.prototype._modifyCtm=function(t){this._stream.write(t._toString()+" "),this._writeOperator("cm")},t.prototype._modifyTM=function(t){this._stream.write(t._toString()+" "),this._writeOperator("Tm")},t.prototype._setColorSpace=function(t,e,i){if("string"==typeof t&&"boolean"==typeof e)this._stream.write("/"+t+" "),this._writeOperator(e?"CS":"cs");else if(Array.isArray(t)&&"number"==typeof e&&"boolean"==typeof i){var r=void 0;switch(e){case x._PdfColorSpace.rgb:r="DeviceRGB";break;case x._PdfColorSpace.cmyk:r="DeviceCMYK";break;case x._PdfColorSpace.grayScale:r="DeviceGray";break;default:r="DeviceRGB"}this._stream.write("/"+r+" "),this._writeOperator(i?"CS":"cs"),this._setColor(t,i)}},t.prototype._setColor=function(t,e){this._stream.write((t[0]/255).toFixed(3)+" "+(t[1]/255).toFixed(3)+" "+(t[2]/255).toFixed(3)+" "),this._writeOperator(e?"RG":"rg")},t.prototype._appendRectangle=function(t,e,i,r){this._writePoint(t,e),this._writePoint(i,r),this._writeOperator("re")},t.prototype._writePoint=function(t,e){this._stream.write(t.toFixed(3)+" "+(-e).toFixed(3)+" ")},t.prototype._clipPath=function(t){this._stream.write((t?"W*":"W")+" n"+this._newLine)},t.prototype._fillPath=function(t){this._writeOperator(t?"f*":"f")},t.prototype._closeFillPath=function(t){this._writeOperator("h"),this._fillPath(t)},t.prototype._strokePath=function(){this._writeOperator("S")},t.prototype._closeStrokePath=function(){this._writeOperator("s")},t.prototype._fillStrokePath=function(t){this._writeOperator(t?"B*":"B")},t.prototype._closeFillStrokePath=function(t){this._writeOperator(t?"b*":"b")},t.prototype._endPath=function(){this._writeOperator("n")},t.prototype._setFont=function(t,e){this._stream.write("/"+t+" "+e.toFixed(3)+" "),this._writeOperator("Tf")},t.prototype._setTextScaling=function(t){this._stream.write(t.toFixed(3)+" "),this._writeOperator("Tz")},t.prototype._closePath=function(){this._writeOperator("h")},t.prototype._startNextLine=function(t,e){void 0===t?this._writeOperator("T*"):(this._writePoint(t,e),this._writeOperator("Td"))},t.prototype._setLeading=function(t){this._write(t.toFixed(3)+" "),this._write(this._whiteSpace),this._writeOperator("TL")},t.prototype._showText=function(t){this._writeText(t),this._writeOperator("Tj")},t.prototype._write=function(t){var e="";this._writeOperator(e+t+"\r\n")},t.prototype._writeText=function(t){for(var e="",i=this._escapeSymbols(t),r=0;r<i.length;r++)e+=String.fromCharCode(i[r]);this._stream.write(e="("+e+")")},t.prototype._beginText=function(){this._writeOperator("BT")},t.prototype._endText=function(){this._writeOperator("ET")},t.prototype._beginPath=function(t,e){this._writePoint(t,e),this._writeOperator("m")},t.prototype._appendLineSegment=function(t,e){this._writePoint(t,e),this._writeOperator("l")},t.prototype._appendBezierSegment=function(t,e,i,r,n,s){this._writePoint(t,e),this._writePoint(i,r),this._writePoint(n,s),this._writeOperator("c")},t.prototype._setTextRenderingMode=function(t){this._stream.write(t.toString()+" "),this._writeOperator("Tr")},t.prototype._setCharacterSpacing=function(t){this._stream.write(t.toFixed(3)+" "),this._writeOperator("Tc")},t.prototype._setWordSpacing=function(t){this._stream.write(t.toFixed(3)+" "),this._writeOperator("Tw")},t.prototype._showNextLineText=function(t,e){null!=e&&e?this._writeText(t):this._stream.write(t),this._writeOperator("'")},t.prototype._setLineDashPattern=function(t,e){var i="[";if(1<t.length)for(var r=0;r<t.length;r++)r===t.length-1?i+=t[r].toString():i+=t[r].toString()+" ";i=(i+="] ")+e.toString(),this._writeOperator(i+=" d")},t.prototype._setMiterLimit=function(t){this._stream.write(t.toFixed(3)+" "),this._writeOperator("M")},t.prototype._setLineWidth=function(t){this._stream.write(t.toFixed(3)+" "),this._writeOperator("w")},t.prototype._setLineCap=function(t){this._stream.write(t+" "),this._writeOperator("J")},t.prototype._setLineJoin=function(t){this._stream.write(t+" "),this._writeOperator("j")},t.prototype._executeObject=function(t){this._stream.write("/"+t.name+" "),this._writeOperator("Do")},t.prototype._beginMarkupSequence=function(t){this._stream.write("/"+t+" "),this._writeOperator("BMC")},t.prototype._endMarkupSequence=function(){this._writeOperator("EMC")},t.prototype._clear=function(){this._stream._bytes=[]},t.prototype._escapeSymbols=function(t){for(var e=[],i=0;i<t.length;i++){var r=t.charCodeAt(i);switch(r){case 40:case 41:e.push(92),e.push(r);break;case 13:e.push(92),e.push(114);break;case 92:e.push(92),e.push(r);break;default:e.push(r)}}return e};var E=t;function t(t){this._newLine="\r\n",this._whiteSpace=" ",this._stream=t}Object.defineProperty(j.prototype,"paragraphIndent",{get:function(){return this._internalParagraphIndent},set:function(t){this._internalParagraphIndent=t,this.firstLineIndent=t},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"subSuperScript",{get:function(){return void 0===this._pdfSubSuperScript||null===this._pdfSubSuperScript?x.PdfSubSuperScript.none:this._pdfSubSuperScript},set:function(t){this._pdfSubSuperScript=t},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"_wordWrap",{get:function(){return this._wordWrapType},set:function(t){this._wordWrapType=t},enumerable:!0,configurable:!0});var k=j;function j(t,e){this.horizontalScalingFactor=100,this.rightToLeft=!1,this._wordWrapType=x._PdfWordWrapType.word,this._isList=!1,this.lineLimit=!0,void 0!==t&&(this.alignment=t),this.lineAlignment=void 0!==e?e:x.PdfVerticalAlignment.top,this.characterSpacing=0,this.wordSpacing=0,this.lineSpacing=0,this.clipPath=!1,this.firstLineIndent=0,this._internalParagraphIndent=0,this.measureTrailingSpaces=!1,this.noClip=!1}(e=x.PdfVerticalAlignment||(x.PdfVerticalAlignment={}))[e.top=0]="top",e[e.middle=1]="middle",e[e.bottom=2]="bottom";V=function(t,e){return(V=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}))(t,e)};var V,e=function(t,e){function i(){this.constructor=t}V(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},z=(U.prototype._getAscent=function(t){return.001*this._ascent*this._getSize(t)},U.prototype._getDescent=function(t){return.001*this._descent*this._getSize(t)},U.prototype._getLineGap=function(t){return.001*this._lineGap*this._getSize(t)},U.prototype._getHeight=function(t){for(var e=["cambria","candara","constantia","corbel","cariadings"],i=[],r=0;r<e.length;r++)i.push(e[Number.parseInt(r.toString(),10)]);return this._getDescent(t)<0?this._getAscent(t)-this._getDescent(t)+this._getLineGap(t):this._getAscent(t)+this._getDescent(t)+this._getLineGap(t)},U.prototype._getSize=function(t){var e=this._size;if(null!=t)switch(t.subSuperScript){case x.PdfSubSuperScript.subScript:e/=this._subScriptSizeFactor;break;case x.PdfSubSuperScript.superScript:e/=this._superscriptSizeFactor}return e},U);function U(){this._lineGap=0}function H(){}e(K,W=H),K.prototype._itemAt=function(t){if(t<0||t>=this.widths.length)throw new Error("The character is not supported by the font.");return this.widths[Number.parseInt(t.toString(),10)]},K.prototype._toArray=function(){return this.widths};var W,G=K;function K(t){var e=W.call(this)||this;return e.widths=t,e}e(Q,X=H),Q.prototype._itemAt=function(e){var i=this._defaultWidth;return this.widths.forEach(function(t){e>=t._from&&e<=t._to&&(i=t._itemAt(e))}),i},Q.prototype._toArray=function(){var e=[];return this.widths.forEach(function(t){t._appendToArray(e)}),e},Q.prototype._add=function(t){this.widths.push(t)};var X,q=Q;function Q(t){var e=X.call(this)||this;return e._defaultWidth=t,e.widths=[],e}function J(){}e($,Y=J),Object.defineProperty($.prototype,"_from",{get:function(){return this._widthFrom},enumerable:!0,configurable:!0}),Object.defineProperty($.prototype,"_to",{get:function(){return this._widthTo},enumerable:!0,configurable:!0}),$.prototype._itemAt=function(t){if(t<this._from||t>this._to)throw new Error("Index is out of range.");return this._width},$.prototype._appendToArray=function(t){t.push(this._from,this._to,this._width)};var Y,Z=$;function $(t,e,i){var r=Y.call(this)||this;return r._widthFrom=t,r._widthTo=e,r._width=i,r}e(it,tt=J),Object.defineProperty(it.prototype,"_from",{get:function(){return this._widthFrom},enumerable:!0,configurable:!0}),Object.defineProperty(it.prototype,"_to",{get:function(){return this._widthFrom+this._widths.length-1},enumerable:!0,configurable:!0}),it.prototype._itemAt=function(t){if(t<this._widthFrom||t>this._to)throw new Error("Index is out of range.");return this._widths[Number.parseInt(t.toString(),10)]},it.prototype._appendToArray=function(e){e.push(this._from),e.forEach(function(t){e.push(t)})};var tt,et=it;function it(t,e){var i=tt.call(this)||this;return i._widthFrom=t,i._widths=e,i}nt.prototype._layout=function(t,e,i,r){this._initialize(t,e,i,r);t=this._doLayout();return this._clear(),t},nt.prototype._initialize=function(t,e,i,r){this._font=e,this._format=i,this._size=r,this._rectangle=[0,0,r[0],r[1]],this._reader=new ht(t),this._pageHeight=0},nt.prototype._clear=function(){this._font=null,this._format=null,this._reader._close(),this._reader=null},nt.prototype._doLayout=function(){for(var t=new st,e=(new st,[]),i=this._reader._peekLine(),r=this._getLineIndent(!0);null!==i;){if(null!=(n=this._layoutLine(i,r))){var n=this._copyToResult(t,n,e,0),s=n.success,n=n.flag;if(!s){this._reader._read(n);break}}this._reader._readLine(),i=this._reader._peekLine(),r=this._getLineIndent(!1)}return this._finalizeResult(t,e),t},nt.prototype._getLineIndent=function(t){var e=0;return this._format&&(e=t?this._format.firstLineIndent:this._format.paragraphIndent,e=0<this._size[0]?Math.min(this._size[0],e):e),e},nt.prototype._getLineHeight=function(){var t=this._font._metrics._getHeight();return t=this._format&&0!==this._format.lineSpacing?this._format.lineSpacing+this._font._metrics._getHeight():t},nt.prototype._getLineWidth=function(t){return this._font.getLineWidth(t,this._format)},nt.prototype._layoutLine=function(t,e){var i=new st,r=(i._lineHeight=this._getLineHeight(),[]),n=this._size[0],s=this._getLineWidth(t)+e,a=x._LineType.firstParagraphLine,o=!0;if(n<=0||Math.round(s)<=Math.round(n))this._addToLineResult(i,r,t,s,x._LineType.newLineBreak|a);else{var h="",c="",s=e,_=e,d=new ht(t),p=d._peekWord();for(p.length!==d._length&&" "===p&&(c+=p,h+=p,d._position+=1,p=d._peekWord());null!==p;){c+=p;var l,u=this._getLineWidth(c.toString())+_;if(" "===c.toString()&&(c="",u=0),n<u){if(this._getWrapType()===x._PdfWordWrapType.none)break;if(c.length===p.length){if(this._getWrapType()===x._PdfWordWrapType.wordOnly){i._remainder=t.substring(d._position);break}if(1===c.length){h+=p;break}o=!1,c="",p=d._peek().toString()}else this._getLineWidth(p.toString())>n?void 0!==this._format&&null!==this._format&&(this._format._wordWrap=x._PdfWordWrapType.character):void 0!==this._format&&null!==this._format&&(this._format._wordWrap=x._PdfWordWrapType.word),this._getWrapType()===x._PdfWordWrapType.character&&o?(o=!1,c="",c+=h.toString(),p=d._peek().toString()):(" "!==(l=h.toString())&&this._addToLineResult(i,r,l,s,x._LineType.layoutBreak|a),h=c="",u=_=s=0,a=x._LineType.none,p=o?p:d._peekWord(),o=!0)}else h+=p,s=u,p=o?(d._readWord(),d._peekWord()):(d._read(),d._peek().toString())}0<h.length&&this._addToLineResult(i,r,h.toString(),s,x._LineType.newLineBreak|x._LineType.lastParagraphLine),d._close()}i._layoutLines=[];for(var f=0;f<r.length;f++)i._layoutLines.push(r[f]);return r=[],i},nt.prototype._addToLineResult=function(t,e,i,r,n){var s=new ot,i=(s._text=i,s._width=r,s._lineType=n,e.push(s),t._actualSize);i[1]=i[1]+this._getLineHeight(),i[0]=Math.max(i[0],r),t._size=i},nt.prototype._copyToResult=function(t,e,i,r){var n=!0,s=this._format&&!this._format.lineLimit,a=t._actualSize[1],o=this._size[1];if(0<this._pageHeight&&o+this._rectangle[1]>this._pageHeight&&(o=this._rectangle[1]-this._pageHeight,o=Math.max(o,-o)),r=0,null!==e._lines)for(var h=0,c=e._lines.length;h<c;h++){var _=a+e._lineHeight;if(!(_<=o||o<=0||s)){n=!1;break}var d=e._lines[h],p=(r+=d._text.length,d=this._trimLine(d,0===i.length),i.push(d),t._actualSize);p[0]=Math.max(p[0],d._width),t._size=p,a=_}return a!==t._size[1]&&(t._size=[t._actualSize[0],a]),{success:n,flag:r}},nt.prototype._finalizeResult=function(t,e){t._layoutLines=[];for(var i=0;i<e.length;i++)t._layoutLines.push(e[i]);t._lineHeight=this._getLineHeight(),this._reader._end||(t._remainder=this._reader._readToEnd())},nt.prototype._trimLine=function(t,e){var i=t._text.trim(),r=t._width;return i.length!==t._text.length&&(r=this._getLineWidth(i),0<(t._lineType&x._LineType.firstParagraphLine))&&(r+=this._getLineIndent(e)),t._text=i,t._width=r,t},nt.prototype._getWrapType=function(){return null!==this._format&&void 0!==this._format?this._format._wordWrap:x._PdfWordWrapType.word};var rt=nt;function nt(){}Object.defineProperty(at.prototype,"_actualSize",{get:function(){return void 0===this._size&&(this._size=[0,0]),this._size},enumerable:!0,configurable:!0}),Object.defineProperty(at.prototype,"_lines",{get:function(){return this._layoutLines},enumerable:!0,configurable:!0}),Object.defineProperty(at.prototype,"_empty",{get:function(){return null===this._layoutLines||0===this._layoutLines.length},enumerable:!0,configurable:!0}),Object.defineProperty(at.prototype,"_lineCount",{get:function(){return this._empty?0:this._layoutLines.length},enumerable:!0,configurable:!0});var st=at;function at(){}var ot=function(){},ht=((e=x._LineType||(x._LineType={}))[e.none=0]="none",e[e.newLineBreak=1]="newLineBreak",e[e.layoutBreak=2]="layoutBreak",e[e.firstParagraphLine=4]="firstParagraphLine",e[e.lastParagraphLine=8]="lastParagraphLine",Object.defineProperty(ct.prototype,"_length",{get:function(){return this._text.length},enumerable:!0,configurable:!0}),Object.defineProperty(ct.prototype,"_end",{get:function(){return this._position===this._text.length},enumerable:!0,configurable:!0}),ct.prototype._readLine=function(){for(var t,e=this._position;e<this._length;){var i,r=this._text[e];switch(r){case"\r":case"\n":return i=this._text.substring(this._position,e),this._position=e+1,"\r"===r&&this._position<this._length&&"\n"===this._text[this._position]&&this._position++,i}e++}return e>this._position?(t=this._text.substring(this._position,e),this._position=e,t):null},ct.prototype._peekLine=function(){var t=this._position,e=this._readLine();return this._position=t,e},ct.prototype._readWord=function(){for(var t,e=this._position;e<this._length;){var i=this._text[e],r=void 0;switch(i){case"\r":case"\n":return r=this._text.substring(this._position,e-this._position),this._position=e+1,"\r"===i&&this._position<this._length&&"\n"===this._text[this._position]&&this._position++,r;case" ":case"\t":return e===this._position&&e++,r=this._text.substring(this._position,e),this._position=e,r}e++}return e>this._position?(t=this._text.substring(this._position,e),this._position=e,t):null},ct.prototype._peekWord=function(){var t=this._position,e=this._readWord();return this._position=t,e},ct.prototype._read=function(t){var e;if(void 0===t)return e="0",this._end||(e=this._text[this._position],this._position++),e;for(var i=0,r="";!this._end&&i<t;)r+=this._read(),i++;return r},ct.prototype._peek=function(){return this._end?"0":this._text[this._position]},ct.prototype._close=function(){this._text=null},ct.prototype._readToEnd=function(){var t=0===this._position?this._text:this._text.substring(this._position);return this._position=this._length,t},ct._spaces=[ct._whiteSpace=" ",ct._tab="\t"],ct);function ct(t){if(this._position=0,null==t)throw new Error("ArgumentNullException:text");this._text=t}Object.defineProperty(dt.prototype,"_empty",{get:function(){return this._offset===this._length&&this._length===this._checksum&&0===this._checksum},enumerable:!0,configurable:!0});var _t=dt;function dt(){}var pt=function(){},lt=function(){},ut=function(){},ft=function(){},gt=function(){},yt=function(){},mt=function(){},bt=function(){},St=function(){},wt=function(){},vt=(Object.defineProperty(i.prototype,"macintosh",{get:function(){return null!==this._macintoshDictionary&&void 0!==this._macintoshDictionary||(this._macintoshDictionary=new Ya),this._macintoshDictionary},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_microsoft",{get:function(){return null!==this._microsoftDictionary&&void 0!==this._microsoftDictionary||(this._microsoftDictionary=new Ya),this._microsoftDictionary},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_macintoshGlyphs",{get:function(){return null!==this._internalMacintoshGlyphs&&void 0!==this._internalMacintoshGlyphs||(this._internalMacintoshGlyphs=new Ya),this._internalMacintoshGlyphs},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_microsoftGlyphs",{get:function(){return null!==this._internalMicrosoftGlyphs&&void 0!==this._internalMicrosoftGlyphs||(this._internalMicrosoftGlyphs=new Ya),this._internalMicrosoftGlyphs},enumerable:!0,configurable:!0}),i.prototype._initialize=function(){void 0!==this._metrics&&null!==this._metrics||(this._metrics=new At),this._readFontDictionary();var t=this._readNameTable(),e=this._readHeadTable();this._initializeFontName(t),this._metrics._macStyle=e._macStyle},i.prototype._readFontDictionary=function(){this._offset=0,this._check();var t=this._readInt16(this._offset);this._readInt16(this._offset),this._readInt16(this._offset),this._readInt16(this._offset),void 0!==this._tableDirectory&&null!==this._tableDirectory||(this._tableDirectory=new Ya);for(var e=0;e<t;++e){var i=new _t,r=this._readString(this._int32Size);i._checksum=this._readInt32(this._offset),i._offset=this._readInt32(this._offset),i._length=this._readInt32(this._offset),this._tableDirectory.setValue(r,i)}this._lowestPosition=this._offset,this._isFont||this._fixOffsets()},i.prototype._fixOffsets=function(){for(var t=Number.MAX_VALUE,e=this._tableDirectory.keys(),i=0;i<e.length;i++){var r=(s=this._tableDirectory.getValue(e[Number.parseInt(i.toString(),10)]))._offset;if(r<t&&(t=r)<=this._lowestPosition)break}var n=t-this._lowestPosition;if(0!=n){for(var s,a=new Ya,i=0;i<e.length;i++)(s=this._tableDirectory.getValue(e[Number.parseInt(i.toString(),10)]))._offset-=n,a.setValue(e[Number.parseInt(i.toString(),10)],s);this._tableDirectory=a}},i.prototype._check=function(){var t=this._readInt32(this._offset);if(this._isMacTtf=1953658213===t,65536!==t&&1953658213!==t&&1330926671!==t){if(this._isFont=!0,this._offset=0,"ttcf"!==this._readString(4))throw new Error("Can not read TTF font data");if(this._offset+=4,this._readInt32(this._offset)<0)throw new Error("Can not read TTF font data");this._offset=this._readInt32(this._offset),t=this._readInt32(this._offset)}return t},i.prototype._readNameTable=function(){for(var t=this._getTable("name"),e=(void 0!==t._offset&&null!==t._offset&&(this._offset=t._offset),new ut),i=(e._formatSelector=this._readUInt16(this._offset),e._recordsCount=this._readUInt16(this._offset),e._offset=this._readUInt16(this._offset),e._nameRecords=[],this._offset),r=0;r<e._recordsCount;r++){this._offset=i;var n=new Pt,s=(n._platformID=this._readUInt16(this._offset),n._encodingID=this._readUInt16(this._offset),n._languageID=this._readUInt16(this._offset),n._nameID=this._readUInt16(this._offset),n._length=this._readUInt16(this._offset),n._offset=this._readUInt16(this._offset),this._offset=t._offset+e._offset+n._offset,0===n._platformID||3===n._platformID);n._name=this._readString(n._length,s),e._nameRecords[Number.parseInt(r.toString(),10)]=n,i+=12}return e},i.prototype._readHeadTable=function(){var t=this._getTable("head"),t=(void 0!==t._offset&&null!==t._offset&&(this._offset=t._offset),new yt);return t._version=this._readFixed(this._offset),t._fontRevision=this._readFixed(this._offset),t._checkSumAdjustment=this._readUInt32(this._offset),t._magicNumber=this._readUInt32(this._offset),t._flags=this._readUInt16(this._offset),t._unitsPerEm=this._readUInt16(this._offset),t._created=this._readInt64(this._offset),t._modified=this._readInt64(this._offset),t._xMin=this._readInt16(this._offset),t._yMin=this._readInt16(this._offset),t._xMax=this._readInt16(this._offset),t._yMax=this._readInt16(this._offset),t._macStyle=this._readUInt16(this._offset),t._lowestReadableSize=this._readUInt16(this._offset),t._fontDirectionHint=this._readInt16(this._offset),t._indexToLocalFormat=this._readInt16(this._offset),t._glyphDataFormat=this._readInt16(this._offset),t},i.prototype._readHorizontalHeaderTable=function(){var t=this._getTable("hhea"),t=(void 0!==t._offset&&null!==t._offset&&(this._offset=t._offset),new gt);return t._version=this._readFixed(this._offset),t._ascender=this._readInt16(this._offset),t._descender=this._readInt16(this._offset),t._lineGap=this._readInt16(this._offset),t._advanceWidthMax=this._readUInt16(this._offset),t._minLeftSideBearing=this._readInt16(this._offset),t._minRightSideBearing=this._readInt16(this._offset),t._xMaxExtent=this._readInt16(this._offset),t._caretSlopeRise=this._readInt16(this._offset),t._caretSlopeRun=this._readInt16(this._offset),this._offset+=10,t._metricDataFormat=this._readInt16(this._offset),t._numberOfHMetrics=this._readUInt16(this._offset),t},i.prototype._readOS2Table=function(){var t=this._getTable("OS/2"),t=(void 0!==t._offset&&null!==t._offset&&(this._offset=t._offset),new pt);return t._version=this._readUInt16(this._offset),t._xAvgCharWidth=this._readInt16(this._offset),t._usWeightClass=this._readUInt16(this._offset),t._usWidthClass=this._readUInt16(this._offset),t._fsType=this._readInt16(this._offset),t._ySubscriptXSize=this._readInt16(this._offset),t._ySubscriptYSize=this._readInt16(this._offset),t._ySubscriptXOffset=this._readInt16(this._offset),t._ySubscriptYOffset=this._readInt16(this._offset),t._ySuperscriptXSize=this._readInt16(this._offset),t._ySuperscriptYSize=this._readInt16(this._offset),t._ySuperscriptXOffset=this._readInt16(this._offset),t._ySuperscriptYOffset=this._readInt16(this._offset),t._yStrikeoutSize=this._readInt16(this._offset),t._yStrikeoutPosition=this._readInt16(this._offset),t._sFamilyClass=this._readInt16(this._offset),t._panose=this._readBytes(10),t._ulUnicodeRange1=this._readUInt32(this._offset),t._ulUnicodeRange2=this._readUInt32(this._offset),t._ulUnicodeRange3=this._readUInt32(this._offset),t._ulUnicodeRange4=this._readUInt32(this._offset),t._vendorIdentifier=this._readBytes(4),t._fsSelection=this._readUInt16(this._offset),t._usFirstCharIndex=this._readUInt16(this._offset),t._usLastCharIndex=this._readUInt16(this._offset),t._sTypoAscender=this._readInt16(this._offset),t._sTypoDescender=this._readInt16(this._offset),t._sTypoLineGap=this._readInt16(this._offset),t._usWinAscent=this._readUInt16(this._offset),t._usWinDescent=this._readUInt16(this._offset),t._ulCodePageRange1=this._readUInt32(this._offset),t._ulCodePageRange2=this._readUInt32(this._offset),1<t._version?(t._sxHeight=this._readInt16(this._offset),t._sCapHeight=this._readInt16(this._offset),t._usDefaultChar=this._readUInt16(this._offset),t._usBreakChar=this._readUInt16(this._offset),t._usMaxContext=this._readUInt16(this._offset)):(t._sxHeight=0,t._sCapHeight=0,t._usDefaultChar=0,t._usBreakChar=0,t._usMaxContext=0),t},i.prototype._readPostTable=function(){var t=this._getTable("post"),t=(void 0!==t._offset&&null!==t._offset&&(this._offset=t._offset),new lt);return t._formatType=this._readFixed(this._offset),t._italicAngle=this._readFixed(this._offset),t._underlinePosition=this._readInt16(this._offset),t._underlineThickness=this._readInt16(this._offset),t._isFixedPitch=this._readUInt32(this._offset),t._minType42=this._readUInt32(this._offset),t._maxType42=this._readUInt32(this._offset),t._minType1=this._readUInt32(this._offset),t._maxType1=this._readUInt32(this._offset),t},i.prototype._readWidthTable=function(t,e){for(var i=this._getTable("hmtx"),r=(void 0!==i._offset&&null!==i._offset&&(this._offset=i._offset),[]),n=0;n<t;n++){var s=new kt,s=(s._advanceWidth=this._readUInt16(this._offset),s._lsb=this._readInt16(this._offset),1e3*s._advanceWidth/e);r.push(Math.floor(s))}return r},i.prototype._readCmapTable=function(){for(var t=this._getTable("cmap"),e=(void 0!==t._offset&&null!==t._offset&&(this._offset=t._offset),new mt),i=(e._version=this._readUInt16(this._offset),e._tablesCount=this._readUInt16(this._offset),this._offset),r=[],n=0;n<e._tablesCount;n++){this._offset=i;var s=new bt;s._platformID=this._readUInt16(this._offset),s._encodingID=this._readUInt16(this._offset),s._offset=this._readUInt32(this._offset),i=this._offset,this._readCmapSubTable(s),r[Number.parseInt(n.toString(),10)]=s}return r},i.prototype._readCmapSubTable=function(t){var e=this._getTable("cmap"),e=(this._offset=e._offset+t._offset,this._readUInt16(this._offset)),i=this._getCmapEncoding(t._platformID,t._encodingID);if(i!==x._TrueTypeCmapEncoding.unknown)switch(e){case x._TrueTypeCmapFormat.apple:this._readAppleCmapTable(t,i);break;case x._TrueTypeCmapFormat.microsoft:this._readMicrosoftCmapTable(t,i);break;case x._TrueTypeCmapFormat.trimmed:this._readTrimmedCmapTable(t,i)}},i.prototype._readAppleCmapTable=function(t,e){var i=this._getTable("cmap"),i=(this._offset=i._offset+t._offset,new St);i._format=this._readUInt16(this._offset),i._length=this._readUInt16(this._offset),i._version=this._readUInt16(this._offset),null!==this._maxMacIndex&&void 0!==this._maxMacIndex||(this._maxMacIndex=0);for(var r=0;r<256;++r){var n=new It;n._index=this._readByte(this._offset),n._width=this._getWidth(n._index),n._charCode=r,this.macintosh.setValue(r,n),this._addGlyph(n,e),this._maxMacIndex=Math.max(r,this._maxMacIndex)}},i.prototype._readMicrosoftCmapTable=function(t,e){for(var i=this._getTable("cmap"),r=(this._offset=i._offset+t._offset,e===x._TrueTypeCmapEncoding.unicode?this._microsoft:this.macintosh),n=new ft,s=(n._format=this._readUInt16(this._offset),n._length=this._readUInt16(this._offset),n._version=this._readUInt16(this._offset),n._segCountX2=this._readUInt16(this._offset),n._searchRange=this._readUInt16(this._offset),n._entrySelector=this._readUInt16(this._offset),n._rangeShift=this._readUInt16(this._offset),n._segCountX2/2),i=(n._endCount=this._readUShortArray(s),n._reservedPad=this._readUInt16(this._offset),n._startCount=this._readUShortArray(s),n._idDelta=this._readUShortArray(s),n._idRangeOffset=this._readUShortArray(s),n._length/2-8-4*s),a=(n._glyphID=this._readUShortArray(i),0),o=0,h=0;h<s;h++)for(var c=n._startCount[Number.parseInt(h.toString(),10)];c<=n._endCount[Number.parseInt(h.toString(),10)]&&65535!==c;c++){if(0===n._idRangeOffset[Number.parseInt(h.toString(),10)])a=c+n._idDelta[Number.parseInt(h.toString(),10)]&65535;else{if((o=h+n._idRangeOffset[Number.parseInt(h.toString(),10)]/2-s+c-n._startCount[Number.parseInt(h.toString(),10)])>=n._glyphID.length)continue;a=n._glyphID[Number.parseInt(o.toString(),10)]+n._idDelta[Number.parseInt(h.toString(),10)]&65535}var _=new It,d=(_._index=a,_._width=this._getWidth(_._index),e===x._TrueTypeCmapEncoding.symbol&&61440==(65280&c)?255&c:c);_._charCode=d,r.setValue(d,_),this._addGlyph(_,e)}},i.prototype._readTrimmedCmapTable=function(t,e){var i=this._getTable("cmap"),r=(this._offset=i._offset+t._offset,new wt);r._format=this._readUInt16(this._offset),r._length=this._readUInt16(this._offset),r._version=this._readUInt16(this._offset),r._firstCode=this._readUInt16(this._offset),r._entryCount=this._readUInt16(this._offset);for(var n=0;n<r._entryCount;++n){var s=new It;s._index=this._readUInt16(this._offset),s._width=this._getWidth(s._index),s._charCode=n+r._firstCode,this.macintosh.setValue(n,s),this._addGlyph(s,e),this._maxMacIndex=Math.max(n,this._maxMacIndex)}},i.prototype._initializeFontName=function(t){for(var e=0;e<t._recordsCount;e++){var i=t._nameRecords[Number.parseInt(e.toString(),10)];if(1===i._nameID?this._metrics._fontFamily=i._name:6===i._nameID&&(this._metrics._postScriptName=i._name),null!==this._metrics._fontFamily&&void 0!==this._metrics._fontFamily&&null!==this._metrics._postScriptName&&void 0!==this._metrics._postScriptName)break}},i.prototype._getTable=function(t){var e,i=new _t;return i=null!=(e=this._tableDirectory.containsKey(t)?this._tableDirectory.getValue(t):e)?e:i},i.prototype._getWidth=function(t){return t=t<this._width.length?t:this._width.length-1,this._width[Number.parseInt(t.toString(),10)]},i.prototype._getCmapEncoding=function(t,e){var i=x._TrueTypeCmapEncoding.unknown;return t===x._TrueTypePlatformID.microsoft&&e===x._TrueTypeMicrosoftEncodingID.undefined?i=x._TrueTypeCmapEncoding.symbol:t===x._TrueTypePlatformID.microsoft&&e===x._TrueTypeMicrosoftEncodingID.unicode?i=x._TrueTypeCmapEncoding.unicode:t===x._TrueTypePlatformID.macintosh&&e===x._TrueTypeMacintoshEncodingID.roman&&(i=x._TrueTypeCmapEncoding.macintosh),i},i.prototype._addGlyph=function(t,e){var i=null;switch(e){case x._TrueTypeCmapEncoding.unicode:i=this._microsoftGlyphs;break;case x._TrueTypeCmapEncoding.macintosh:case x._TrueTypeCmapEncoding.symbol:i=this._macintoshGlyphs}i.setValue(t._index,t)},i.prototype._initializeMetrics=function(t,e,i,r,n,s){this._initializeFontName(t);for(var a=!1,o=0;o<s.length;o++){var h=s[Number.parseInt(o.toString(),10)];if(this._getCmapEncoding(h._platformID,h._encodingID)===x._TrueTypeCmapEncoding.symbol){a=!0;break}}this._metrics._isSymbol=a,this._metrics._macStyle=e._macStyle,this._metrics._isFixedPitch=0!==n._isFixedPitch,this._metrics._italicAngle=n._italicAngle;var t=1e3/e._unitsPerEm,n=(this._metrics._winAscent=r._sTypoAscender*t,this._metrics._macAscent=i._ascender*t,this._metrics._capHeight=0!==r._sCapHeight?r._sCapHeight:.7*e._unitsPerEm*t,this._metrics._winDescent=r._sTypoDescender*t,this._metrics._macDescent=i._descender*t,this._metrics._leading=(r._sTypoAscender-r._sTypoDescender+r._sTypoLineGap)*t,this._metrics._lineGap=Math.ceil(i._lineGap*t),e._xMin*t),i=Math.ceil(this._metrics._macAscent+this._metrics._lineGap),t=e._xMax*t,c=this._metrics._macDescent;this._metrics._fontBox=[n,i,t,c],this._metrics._stemV=80,this._metrics._widthTable=this._updateWidth(),this._metrics._contains=this._tableDirectory.containsKey("CFF"),this._metrics._subScriptSizeFactor=e._unitsPerEm/r._ySubscriptYSize,this._metrics._superscriptSizeFactor=e._unitsPerEm/r._ySuperscriptYSize},i.prototype._updateWidth=function(){var t=[];if(this._metrics._isSymbol)for(var e=0;e<256;e++){var i=this._getGlyph(String.fromCharCode(Number.parseInt(e.toString(),10)));t[Number.parseInt(e.toString(),10)]=i._empty?0:i._width}else for(var r=[],n=String.fromCharCode(32),e=0;e<256;e++){r[0]=Number.parseInt(e.toString(),10);var s=this._getString(r,0,r.length),s=0<s.length?s[0]:"?";(i=this._getGlyph(s))._empty?(i=this._getGlyph(n),t[Number.parseInt(e.toString(),10)]=i._empty?0:i._width):t[Number.parseInt(e.toString(),10)]=i._width}return t},i.prototype._getDefaultGlyph=function(){return this._getGlyph(ht._whiteSpace)},i.prototype._getString=function(t,e,i){for(var r="",n=0;n<i;n++)r+=String.fromCharCode(t[n+e]);return r},i.prototype._setOffset=function(t){this._offset=t},i.prototype._readFontProgram=function(t){var e=this._getGlyphChars(t),i=this._readLocaTable(this._bIsLocaShort),t=(e&&e._size()<t._size()&&(this._missedGlyphs=t._size()-e._size()),this._updateGlyphChars(e,i),this._generateGlyphTable(e,i,null,null)),e=t.glyphTableSize,i=t.newLocaTable,t=t.newGlyphTable,i=this._updateLocaTable(i,this._bIsLocaShort),r=i.newLocaSize,i=i.newLocaUpdated;return this._getFontProgram(i,t,e,r)},i.prototype._generateGlyphTable=function(t,e,i,r){i=[];for(var n=t.keys(),s=(n.sort(function(t,e){return t-e}),0),a=0;a<n.length;a++){var o=n[Number.parseInt(a.toString(),10)];0<e._offsets.length&&(s+=e._offsets[o+1]-e._offsets[Number.parseInt(o.toString(),10)])}var h=this._align(s);r=[];for(a=0;a<h;a++)r.push(0);for(var c,_,d=0,p=0,l=this._getTable("glyf"),a=0;a<e._offsets.length;a++)i.push(d),p<n.length&&n[Number.parseInt(p.toString(),10)]===a&&(++p,i[Number.parseInt(a.toString(),10)]=d,c=e._offsets[Number.parseInt(a.toString(),10)],0<(_=e._offsets[a+1]-c))&&(this._offset=l._offset+c,r=this._read(r,d,_).buffer,d+=_);return{glyphTableSize:s,newLocaTable:i,newGlyphTable:r}},i.prototype._readLocaTable=function(t){var e=this._getTable("loca"),i=(this._offset=e._offset,new Tt),r=[];if(t)for(var n=e._length/2,r=[],s=0;s<n;s++)r[Number.parseInt(s.toString(),10)]=2*this._readUInt16(this._offset);else{n=e._length/4;r=[];for(s=0;s<n;s++)r[Number.parseInt(s.toString(),10)]=this._readUInt32(this._offset)}return i._offsets=r,i},i.prototype._updateGlyphChars=function(t,e){t.containsKey(0)||t.setValue(0,0);for(var i=new Ya,r=t.keys(),n=0;n<r.length;n++)i.setValue(r[Number.parseInt(n.toString(),10)],t.getValue(r[Number.parseInt(n.toString(),10)]));for(n=0;n<r.length;n++){var s=r[Number.parseInt(n.toString(),10)];this._processCompositeGlyph(t,s,e)}},i.prototype._processCompositeGlyph=function(t,e,i){if(e<i._offsets.length-1){var r=i._offsets[Number.parseInt(e.toString(),10)];if(r!==i._offsets[e+1]){i=this._getTable("glyf"),e=(this._offset=i._offset+r,new Nt);if(e.numberOfContours=this._readInt16(this._offset),e.xMin=this._readInt16(this._offset),e.yMin=this._readInt16(this._offset),e.xMax=this._readInt16(this._offset),e.yMax=this._readInt16(this._offset),e.numberOfContours<0)for(var n=0;;){var s=this._readUInt16(this._offset),a=this._readUInt16(this._offset);if(t.containsKey(a)||t.setValue(a,0),0==(s&x._TrueTypeCompositeGlyphFlag.MoreComponents))break;n=0!=(s&x._TrueTypeCompositeGlyphFlag.Arg1And2AreWords)?4:2,0!=(s&x._TrueTypeCompositeGlyphFlag.WeHaveScale)?n+=2:0!=(s&x._TrueTypeCompositeGlyphFlag.WeHaveAnXyScale)?n+=4:0!=(s&x._TrueTypeCompositeGlyphFlag.WeHaveTwoByTwo)&&(n+=8),this._offset+=n}}}},i.prototype._updateLocaTable=function(t,e){for(var i=e?2*t.length:4*t.length,r=this._align(i),n=new Rt(r),s=0;s<t.length;s++){var a=t[Number.parseInt(s.toString(),10)];e?(a/=2,n._writeShort(a)):n._writeInt(a)}return{newLocaUpdated:n._data,newLocaSize:i}},i.prototype._align=function(t){return t+3&-4},i.prototype._getFontProgram=function(t,e,i,r){var n=this._getFontProgramLength(t,e,0),s=n.fontProgramLength,n=n.table,s=new Rt(s),a=(s._writeInt(65536),s._writeShort(n),this._entrySelectors[Number.parseInt(n.toString(),10)]);return s._writeShort(16*(1<<(31&a))),s._writeShort(a),s._writeShort(16*(n-(1<<(31&a)))),this._writeCheckSums(s,n,t,e,i,r),this._writeGlyphs(s,t,e),s._data},i.prototype._getFontProgramLength=function(t,e,i){var r=0;if(null!=t&&0<t.length&&null!=e&&0<e.length){i=2;for(var n=this._tableNames,s=0;s<n.length;s++){var a=n[Number.parseInt(s.toString(),10)];"glyf"===a||"loca"===a||(a=this._getTable(a))._empty||(++i,r+=this._align(a._length))}r=(r+=t.length)+e.length+(16*i+12)}return{fontProgramLength:r,table:i}},i.prototype._getGlyphChars=function(t){var e=new Ya;if(null!=t)for(var i=t.keys(),r=0;r<i.length;r++){var n=i[Number.parseInt(r.toString(),10)],s=this._getGlyph(n);s._empty||e.setValue(s._index,n.charCodeAt(0))}return e},i.prototype._writeCheckSums=function(t,e,i,r,n,s){if(null!=t&&null!=i&&0<i.length&&null!=r&&0<r.length)for(var a=this._tableNames,o=16*e+12,h=0,c=0;c<a.length;c++){var _,d=a[Number.parseInt(c.toString(),10)],p=this._getTable(d);p._empty||(t._writeString(d),h="glyf"===d?(_=this._calculateCheckSum(r),t._writeInt(_),n):"loca"===d?(_=this._calculateCheckSum(i),t._writeInt(_),s):(t._writeInt(p._checksum),p._length),t._writeUInt(o),t._writeUInt(h),o+=this._align(h))}},i.prototype._calculateCheckSum=function(t){var e=0,i=0,r=0,n=0,s=0,a=0;if(null!=t&&0<t.length){for(var o=0;o<(t.length+1)/4;o++)s+=255&t[e++],n+=255&t[e++],r+=255&t[e++],i+=255&t[e++];a=i,a=(a+=r<<8)+(n<<16)+(s<<24)}return a},i.prototype._writeGlyphs=function(t,e,i){if(null!=t&&null!=e&&0<e.length&&null!=i&&0<i.length)for(var r=this._tableNames,n=0;n<r.length;n++){var s=r[Number.parseInt(n.toString(),10)],a=this._getTable(s);if(!a._empty)if("glyf"===s)t._writeBytes(i);else if("loca"===s)t._writeBytes(e);else{for(var o=this._align(a._length),h=[],c=0;c<o;c++)h.push(0);this._offset=a._offset;s=this._read(h,0,a._length);t._writeBytes(s.buffer)}}},i.prototype._read=function(t,e,i){var r=0;if(null!=t&&0<t.length){var n;do{for(var s=0;s<i-r&&this._offset+s<this._fontData.length;s++)t[e+s]=this._fontData[this._offset+s]}while(this._offset+=n=i-r,(r+=n)<i)}return{buffer:t,written:r}},i.prototype._createInternals=function(){this._metrics=new At;var t=this._readNameTable(),e=this._readHeadTable(),i=(this._bIsLocaShort=0===e._indexToLocalFormat,this._readHorizontalHeaderTable()),r=this._readOS2Table(),n=this._readPostTable(),s=(this._width=this._readWidthTable(i._numberOfHMetrics,e._unitsPerEm),this._readCmapTable());this._initializeMetrics(t,e,i,r,n,s)},i.prototype._getGlyph=function(t){var e,i;return"number"==typeof t?(e=null,this._metrics._isSymbol||null===this._microsoftGlyphs?this._metrics._isSymbol&&null!==this._macintoshGlyphs&&this._macintoshGlyphs.containsKey(t)&&(e=this._macintoshGlyphs.getValue(t)):this._microsoftGlyphs.containsKey(t)&&(e=this._microsoftGlyphs.getValue(t)),null!==e?e:this._getDefaultGlyph()):(e=null,i=t.charCodeAt(0),this._metrics._isSymbol||null===this._microsoft?(this._metrics._isSymbol&&null!==this.macintosh||this._isMacFont)&&(0!==this._maxMacIndex?i%=this._maxMacIndex+1:i=61440==(65280&i)?255&i:i,this.macintosh.containsKey(i))&&(e=this.macintosh.getValue(i),this._isFontPresent=!0):this._microsoft.containsKey(i)?(e=this._microsoft.getValue(i),i!==ht._whiteSpace.charCodeAt(0)&&(this._isFontPresent=!0)):i!==ht._whiteSpace.charCodeAt(0)&&(this._isFontPresent=!1),null!==(e=t===ht._whiteSpace&&null===e?new It:e)?e:this._getDefaultGlyph())},i.prototype._readString=function(t,e){if(null==e)return this._readString(t,!1);var i="";if(e)for(var r=0;r<t;r++)r%2!=0&&(i+=String.fromCharCode(this._fontData[this._offset])),this._offset+=1;else for(r=0;r<t;r++)i+=String.fromCharCode(this._fontData[this._offset]),this._offset+=1;return i},i.prototype._readFixed=function(t){return this._readInt16(t)+this._readInt16(t+2)/16384},i.prototype._readInt32=function(t){var e=this._fontData[Number.parseInt(t.toString(),10)+3],i=this._fontData[Number.parseInt(t.toString(),10)+2],r=this._fontData[Number.parseInt(t.toString(),10)+1],t=this._fontData[Number.parseInt(t.toString(),10)];return this._offset+=4,e+(i<<8)+(r<<16)+(t<<24)},i.prototype._readUInt32=function(t){var e=this._fontData[Number.parseInt(t.toString(),10)+3],i=this._fontData[Number.parseInt(t.toString(),10)+2],r=this._fontData[Number.parseInt(t.toString(),10)+1],t=this._fontData[Number.parseInt(t.toString(),10)];return this._offset+=4,e|i<<8|r<<16|t<<24},i.prototype._readInt16=function(t){t=32768&(t=(this._fontData[Number.parseInt(t.toString(),10)]<<8)+this._fontData[Number.parseInt(t.toString(),10)+1])?t-65536:t;return this._offset+=2,t},i.prototype._readInt64=function(t){var e=this._readInt32(t+4),t=4294967296*this._readInt32(t)+e;return e<0&&(t+=4294967296),t},i.prototype._readUInt16=function(t){t=this._fontData[Number.parseInt(t.toString(),10)]<<8|this._fontData[Number.parseInt(t.toString(),10)+1];return this._offset+=2,t},i.prototype._readUShortArray=function(t){for(var e=[],i=0;i<t;i++)e[Number.parseInt(i.toString(),10)]=this._readUInt16(this._offset);return e},i.prototype._readBytes=function(t){for(var e=[],i=0;i<t;i++)e.push(this._fontData[Number.parseInt(this._offset.toString(),10)]),this._offset+=1;return e},i.prototype._readByte=function(t){t=this._fontData[Number.parseInt(t.toString(),10)];return this._offset+=1,t},i.prototype._getCharacterWidth=function(t){t=this._getGlyph(t);return(t=t._empty?this._getDefaultGlyph():t)._empty?0:t._width},i.prototype._convertString=function(t){var e="";if(null!=t&&0<t.length)for(var i=0;i<t.length;i++){var r=t[Number.parseInt(i.toString(),10)],r=this._getGlyph(r);r._empty||(e+=String.fromCharCode(r._index))}return e},i);function i(t){this._int32Size=4,this._isFont=!1,this._isMacTtf=!1,this._isMacFont=!1,this._missedGlyphs=0,this._tableNames=["cvt ","fpgm","glyf","head","hhea","hmtx","loca","maxp","prep"],this._entrySelectors=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4],this._fontData=t,this._initialize()}var Pt=function(){},At=(Object.defineProperty(xt.prototype,"_isItalic",{get:function(){return 0!=(2&this._macStyle)},enumerable:!0,configurable:!0}),Object.defineProperty(xt.prototype,"_isBold",{get:function(){return 0!=(1&this._macStyle)},enumerable:!0,configurable:!0}),xt);function xt(){}var kt=function(){},It=(Object.defineProperty(Ct.prototype,"_empty",{get:function(){return this._index===this._width&&this._width===this._charCode&&0===this._charCode},enumerable:!0,configurable:!0}),Ct);function Ct(){}var Tt=function(){},Nt=function(){},Rt=(Object.defineProperty(Ft.prototype,"_data",{get:function(){if(this._buffer.length<this._bufferLength)for(var t=this._bufferLength-this._buffer.length,e=0;e<t;e++)this._buffer.push(0);return this._buffer},enumerable:!0,configurable:!0}),Object.defineProperty(Ft.prototype,"_position",{get:function(){return void 0!==this._internalPosition&&null!==this._internalPosition||(this._internalPosition=0),this._internalPosition},enumerable:!0,configurable:!0}),Ft.prototype._writeShort=function(t){this._flush([(65280&t)>>8,255&t])},Ft.prototype._writeInt=function(t){this._flush([(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t])},Ft.prototype._writeUInt=function(t){this._flush([(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t])},Ft.prototype._writeString=function(t){if(null!=t){for(var e=[],i=0;i<t.length;i++)e.push(t.charCodeAt(i));this._flush(e)}},Ft.prototype._writeBytes=function(t){this._flush(t)},Ft.prototype._flush=function(t){if(null!=t){for(var e=this._position,i=0;i<t.length;i++)this._buffer[Number.parseInt(e.toString(),10)]=t[Number.parseInt(i.toString(),10)],e++;this._internalPosition+=t.length}},Ft);function Ft(t){this.int32Size=4,this.int16Size=2,this.int64Size=8,this._bufferLength=t,this._buffer=[]}Dt.prototype._beginSave=function(){this._descendantFontBeginSave(),this._cmapBeginSave(),this._fontDictionaryBeginSave(),this._fontProgramBeginSave(),this._fontDescriptor&&(this._fontDescriptor.update("FontFile2",this._fontProgram),this._fontDescriptor._updated=!0,this._fontDescriptor._isFont=!0)},Dt.prototype._descendantFontBeginSave=function(){var t;null!==this._usedChars&&void 0!==this._usedChars&&0<this._usedChars._size()&&null!==(t=this._getDescendantWidth())&&this._descendantFont.set("W",t)},Dt.prototype._fontDictionaryBeginSave=function(){null!==this._usedChars&&void 0!==this._usedChars&&0<this._usedChars._size()&&this._fontDictionary.update("ToUnicode",this._cmap)},Dt.prototype._Initialize=function(){var t=ys(this._fontString);this._fontData=t,this._ttfReader=new vt(this._fontData),this._ttfMetrics=this._ttfReader._metrics},Dt.prototype._createInternals=function(){this._fontDictionary=new D,this._descendantFont=new D,this._metrics=new z,this._ttfReader._createInternals(),this._usedChars=null;var t=[];this._fontProgram=new g(t,new D),this._cmap=new g(t,new D),this._ttfMetrics=this._ttfReader._metrics,this._initializeMetrics(),this._subsetName=this._getFontName(),this._createDescendantFont(),this._createFontDictionary()},Dt.prototype._getInternals=function(){return this._fontDictionary},Dt.prototype._initializeMetrics=function(){var t=this._ttfReader._metrics;this._metrics._ascent=t._macAscent,this._metrics._descent=t._macDescent,this._metrics._height=t._macAscent-t._macDescent+t._lineGap,this._metrics._name=t._fontFamily,this._metrics._postScriptName=t._postScriptName,this._metrics._size=this._fontSize,this._metrics._widthTable=new G(t._widthTable),this._metrics._lineGap=t._lineGap,this._metrics._subScriptSizeFactor=t._subScriptSizeFactor,this._metrics._superscriptSizeFactor=t._superscriptSizeFactor,this._metrics._isBold=t._isBold},Dt.prototype._getFontName=function(){for(var t="",e=0;e<6;e++){var i=Math.floor(26*Math.random())+0;t+=this._nameString[Number.parseInt(i.toString(),10)]}return(t=t+"+"+this._ttfReader._metrics._postScriptName).toString()},Dt.prototype._createDescendantFont=function(){this._descendantFont=new D,this._descendantFont._updated=!0,this._descendantFont.set("Type",new L("Font")),this._descendantFont.set("Subtype",new L("CIDFontType2")),this._descendantFont.set("BaseFont",new L(this._subsetName)),this._descendantFont.set("CIDToGIDMap",new L("Identity")),this._descendantFont.set("DW",1e3),this._fontDescriptor=this._createFontDescriptor(),this._descendantFont.set("FontDescriptor",this._fontDescriptor);var t=this._createSystemInfo();this._descendantFont.set("CIDSystemInfo",t),this._descendantFont._isFont=!0},Dt.prototype._createFontDescriptor=function(){var t=new D,e=this._ttfReader._metrics;return t.set("Type",new L("FontDescriptor")),t.set("FontName",new L(this._subsetName)),t.set("Flags",this._getDescriptorFlags()),t.set("FontBBox",this._getBoundBox()),t.set("MissingWidth",e._widthTable[32]),t.set("StemV",e._stemV),t.set("ItalicAngle",e._italicAngle),t.set("CapHeight",e._capHeight),t.set("Ascent",e._winAscent),t.set("Descent",e._winDescent),t.set("Leading",e._leading),t.set("AvgWidth",e._widthTable[32]),t.set("MaxWidth",e._widthTable[32]),t.set("XHeight",0),t.set("StemH",0),t._updated=!0,t},Dt.prototype._generateFontProgram=function(){var t;this._usedChars=null===this._usedChars||void 0===this._usedChars?new Ya:this._usedChars,this._ttfReader._setOffset(0),t=this._ttfReader._readFontProgram(this._usedChars),this._fontProgram._clearStream(),this._fontProgram._writeBytes(t)},Dt.prototype._getBoundBox=function(){var t=this._ttfReader._metrics._fontBox,e=Math.abs(t[2]-t[0]),i=Math.abs(t[1]-t[3]);return[t[0],t[3],e,i]},Dt.prototype._cmapBeginSave=function(){this._generateCmap()},Dt.prototype._fontProgramBeginSave=function(){this._generateFontProgram()},Dt.prototype._toHexString=function(t,e){t=t.toString(16);return e&&(t=t.toUpperCase()),"<0000".substring(0,5-t.length)+t+">"},Dt.prototype._generateCmap=function(){if(null!==this._usedChars&&void 0!==this._usedChars&&0<this._usedChars._size()){var t=this._ttfReader._getGlyphChars(this._usedChars);if(0<t._size()){for(var e=t.keys().sort(),i=e[0],r=e[e.length-1],i=this._toHexString(i,!1)+this._toHexString(r,!1)+"\r\n",n="",s=(n=(n+=this._cmapPrefix)+i+this._cmapEndCodeSpaceRange,0),a=0;a<e.length;a++){0===s&&(0!==a&&(n+=this._cmapEndRange),n=(n=n+(s=Math.min(100,e.length-a))+" ")+this._cmapBeginRange),--s;var o=e[Number.parseInt(a.toString(),10)],n=(n+=this._toHexString(o,!0)+this._toHexString(o,!0))+(this._toHexString(t.getValue(o),!0)+"\n")}n+=this._cmapSuffix,this._cmap._clearStream(),this._cmap._write(n)}}},Dt.prototype._createFontDictionary=function(){this._fontDictionary._updated=!0,this._fontDictionary.set("Type",L.get("Font")),this._fontDictionary.set("Subtype",L.get("Type0")),this._fontDictionary.set("BaseFont",new L(this._subsetName)),this._fontDictionary.set("Encoding",L.get("Identity-H")),this._fontDictionary.set("DescendantFonts",this._descendantFont),this._fontDictionary._isFont=!0,this._fontDictionary._currentObj=this},Dt.prototype._createSystemInfo=function(){var t=new D;return t._updated=!0,t.set("Registry","Adobe"),t.set("Ordering","Identity"),t.set("Supplement",0),t},Dt.prototype._getDescriptorFlags=function(){var t=0,e=this._ttfReader._metrics;return e._isFixedPitch&&(t|=x._FontDescriptorFlag.fixedPitch),e._isSymbol?t|=x._FontDescriptorFlag.symbolic:t|=x._FontDescriptorFlag.nonSymbolic,e._isItalic&&(t|=x._FontDescriptorFlag.italic),e._isBold&&(t|=x._FontDescriptorFlag.forceBold),t},Dt.prototype._getCharacterWidth=function(t){return this._ttfReader._getCharacterWidth(t)},Dt.prototype._setSymbols=function(t){if(null!=t){null!==this._usedChars&&void 0!==this._usedChars||(this._usedChars=new Ya);for(var e=0;e<t.length;e++){var i=t[Number.parseInt(e.toString(),10)];this._usedChars.setValue(i,String.fromCharCode(0))}}},Dt.prototype._getDescendantWidth=function(){var t=new Array;if(null!==this._usedChars&&void 0!==this._usedChars&&0<this._usedChars._size()){for(var e=[],i=this._usedChars.keys(),r=0;r<i.length;r++){var n=i[Number.parseInt(r.toString(),10)],s=this._ttfReader._getGlyph(n);e.push(s)}e.sort(function(t,e){return t._index-e._index});for(var a=0,o=0,h=!1,c=new Array,r=0;r<e.length;r++){s=e[Number.parseInt(r.toString(),10)];h||(h=!0,a=s._index,o=s._index-1),(o+1!==s._index||r+1===e.length)&&1<e.length&&(t.push(Number(a)),0!==r&&t.push(c),a=s._index,c=new Array),c.push(Number(s._width)),r+1===e.length&&(t.push(Number(a)),t.push(c)),o=s._index}}return t};var Lt=Dt;function Dt(t,e){if(this._nameString="ABCDEFGHIJKLMNOPQRSTUVWXYZ",this._isEmbedFont=!1,this._cmapPrefix="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\r\n/CIDSystemInfo << /Registry (Adobe)/Ordering (UCS)/Supplement 0>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 beginCodeSpacerange\r\n",this._cmapEndCodeSpaceRange="endCodeSpacerange\r\n",this._cmapBeginRange="beginbfrange\r\n",this._cmapEndRange="endbfrange\r\n",this._cmapSuffix="endbfrange\nendcmap\nCMapName currentdict /CMap defineresource pop\nend end\r\n",null==t)throw new Error("ArgumentNullException:base64String");this._fontSize=e,this._fontString=t,this._Initialize()}Ot.prototype._getCharacterShape=function(t,e){if(t>=this._hamza&&t<=this._bwhb){if(this._arabicMapTable.get(t))return this._arabicMapTable.get(t)[e+1]}else if(t>=this._lwawm&&t<=this._lwa);return t},Ot.prototype._shape=function(t){for(var e="",i="",r=0;r<t.length;r++){var n=t[Number.parseInt(r.toString(),10)];""<=n&&n<=""?i+=n:(0<i.length&&(e+=this._doShape(i.toString(),0),i=""),e+=n)}return 0<i.length&&(e+=this._doShape(i.toString(),0)),e.toString()},Ot.prototype._doShape=function(t,e){for(var i="",r=0,n=0,s=new Mt,a=new Mt;n<t.length;){var o,h=t[n++];0===this._ligature(h,a)&&(r=1===(o=this._getShapeCount(h))?0:2,2<s._shapes&&(r+=1),r%=a._shapes,a._shapeValue=this._getCharacterShape(a._shapeValue,r),i=this._append(i,s,e),s=a,(a=new Mt)._shapeValue=h,a._shapes=o,a._shapeLigature++)}return r=2<s._shapes?1:0,r%=a._shapes,a._shapeValue=this._getCharacterShape(a._shapeValue,r),i=this._append(i,s,e),(i=this._append(i,a,e)).toString()},Ot.prototype._append=function(t,e,i){return""!==e._shapeValue&&(t+=e._shapeValue,--e._shapeLigature,""!==e._shapeType&&(0==(i&this._vowel)&&(t+=e._shapeType),--e._shapeLigature),""!==e._shapeVowel)&&(0==(i&this._vowel)&&(t+=e._shapeVowel),--e._shapeLigature),t},Ot.prototype._ligature=function(t,e){if(""===e._shapeValue)return 0;var i=0;if(t>=this._fathatan&&t<=this._hamzaBelow||t===this._superalef){if(i=1,""!==e._shapeVowel&&t!==this._shadda&&(i=2),t===this._shadda){if(""!==e._shapeType)return 0;e._shapeType=this._shadda}else t===this._hamzaBelow?e._shapeValue===this._alef?(e._shapeValue=this._alefHamzaBelow,i=2):e._shapeValue===this._lwa?(e._shapeValue=this._lwawhb,i=2):e._shapeType=this._hamzaBelow:t===this._hamzaAbove?e._shapeValue===this._alef?(e._shapeValue=this._alefHamza,i=2):e._shapeValue===this._lwa?(e._shapeValue=this._lwawh,i=2):e._shapeValue===this._waw?(e._shapeValue=this._wawHamza,i=2):e._shapeValue===this._yeh||e._shapeValue===this._alefsura||e._shapeValue===this._farsiYeh?(e._shapeValue=this._yehHamza,i=2):e._shapeType=this._hamzaAbove:t===this._madda?e._shapeValue===this._alef&&(e._shapeValue=this._alefMadda,i=2):e._shapeVowel=t;1===i&&e._shapeLigature++}else{if(""!==e._shapeVowel)return 0;e._shapeValue===this._lam&&(t===this._alef?(e._shapeValue=this._lwa,e._shapes=2,i=3):t===this._alefHamza?(e._shapeValue=this._lwawh,e._shapes=2,i=3):t===this._alefHamzaBelow?(e._shapeValue=this._lwawhb,e._shapes=2,i=3):t===this._alefMadda&&(e._shapeValue=this._lwawm,e._shapes=2,i=3))}return i},Ot.prototype._getShapeCount=function(t){if(t>=this._hamza&&t<=this._bwhb&&!(t>=this._fathatan&&t<=this._hamzaBelow||t===this._superalef)){if(this._arabicMapTable.get(t))return this._arabicMapTable.get(t).length-1}else if(t===this._zeroWidthJoiner)return 4;return 1};var Bt=Ot;function Ot(){this._arabicCharTable=[["",""],["","",""],["","",""],["","",""],["","",""],["","","","",""],["","",""],["","","","",""],["","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","",""],["","",""],["","",""],["","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","",""],["","","","",""],["","","","",""],["","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","",""],["","",""],["","",""],["","",""],["","",""],["","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","",""],["","","","",""],["","","","",""],["","",""],["","","","",""],["","",""],["","",""],["","",""],["","",""],["","",""],["","",""],["","","","",""],["","","","",""],["","",""],["","",""]],this._alef="",this._alefHamza="",this._alefHamzaBelow="",this._alefMadda="",this._lam="",this._hamza="",this._zeroWidthJoiner="",this._hamzaAbove="",this._hamzaBelow="",this._wawHamza="",this._yehHamza="",this._waw="",this._alefsura="",this._yeh="",this._farsiYeh="",this._shadda="",this._madda="",this._lwa="",this._lwawh="",this._lwawhb="",this._lwawm="",this._bwhb="",this._fathatan="",this._superalef="",this._vowel=1,this._arabicMapTable=new Map;for(var t=0;t<this._arabicCharTable.length;t++)this._arabicMapTable.set(this._arabicCharTable[Number.parseInt(t.toString(),10)][0],this._arabicCharTable[Number.parseInt(t.toString(),10)])}var Mt=function(){this._shapeValue="",this._shapeType="",this._shapeVowel="",this._shapeLigature=0,this._shapes=1},Et=(jt.prototype._doMirrorShaping=function(t){for(var e,i=[],r=0;r<t.length;r++)1==(1&this._indexLevels[Number.parseInt(r.toString(),10)])&&this._mirroringShape.containsKey(t[Number.parseInt(r.toString(),10)].charCodeAt(0))?(e=t[Number.parseInt(r.toString(),10)].charCodeAt(0),i[Number.parseInt(r.toString(),10)]=String.fromCharCode(this._mirroringShape.getValue(e))):i[Number.parseInt(r.toString(),10)]=t[Number.parseInt(r.toString(),10)].toString();for(var n="",s=0;s<i.length;s++)n+=i[Number.parseInt(s.toString(),10)];return n},jt.prototype._getLogicalToVisualString=function(t,e){for(var i=new Vt,r=(this._indexLevels=i._getVisualOrder(t,e),this._setDefaultIndexLevel(),this._doOrder(0,this._indexLevels.length-1),this._doMirrorShaping(t)),n="",s=0;s<this._indexes.length;s++){var a=this._indexes[Number.parseInt(s.toString(),10)];n+=r[Number.parseInt(a.toString(),10)]}return n.toString()},jt.prototype._setDefaultIndexLevel=function(){for(var t=0;t<this._indexLevels.length;t++)this._indexes[Number.parseInt(t.toString(),10)]=t},jt.prototype._doOrder=function(t,e){for(var i=this._indexLevels[Number.parseInt(t.toString(),10)],r=i,n=i,s=i,a=t+1;a<=e;++a){var o=this._indexLevels[Number.parseInt(a.toString(),10)];i<o?i=o:o<r&&(r=o),n&=o,s|=o}if(0!=(1&s))if(1==(1&n))this._reArrange(t,e+1);else for(r|=1;r<=i;){for(var h=t;;){for(;h<=e&&!(this._indexLevels[Number.parseInt(h.toString(),10)]>=i);)h+=1;if(e<h)break;for(var c=h+1;c<=e&&!(this._indexLevels[Number.parseInt(c.toString(),10)]<i);)c+=1;this._reArrange(h,c),h=c+1}--i}},jt.prototype._reArrange=function(t,e){var i=(t+e)/2;for(--e;t<i;++t,--e){var r=this._indexes[Number.parseInt(t.toString(),10)];this._indexes[Number.parseInt(t.toString(),10)]=this._indexes[Number.parseInt(e.toString(),10)],this._indexes[Number.parseInt(e.toString(),10)]=r}},jt.prototype._update=function(){this._mirroringShape.setValue(40,41),this._mirroringShape.setValue(41,40),this._mirroringShape.setValue(60,62),this._mirroringShape.setValue(62,60),this._mirroringShape.setValue(91,93),this._mirroringShape.setValue(93,91),this._mirroringShape.setValue(123,125),this._mirroringShape.setValue(125,123),this._mirroringShape.setValue(171,187),this._mirroringShape.setValue(187,171),this._mirroringShape.setValue(8249,8250),this._mirroringShape.setValue(8250,8249),this._mirroringShape.setValue(8261,8262),this._mirroringShape.setValue(8262,8261),this._mirroringShape.setValue(8317,8318),this._mirroringShape.setValue(8318,8317),this._mirroringShape.setValue(8333,8334),this._mirroringShape.setValue(8334,8333),this._mirroringShape.setValue(8712,8715),this._mirroringShape.setValue(8713,8716),this._mirroringShape.setValue(8714,8717),this._mirroringShape.setValue(8715,8712),this._mirroringShape.setValue(8716,8713),this._mirroringShape.setValue(8717,8714),this._mirroringShape.setValue(8725,10741),this._mirroringShape.setValue(8764,8765),this._mirroringShape.setValue(8765,8764),this._mirroringShape.setValue(8771,8909),this._mirroringShape.setValue(8786,8787),this._mirroringShape.setValue(8787,8786),this._mirroringShape.setValue(8788,8789),this._mirroringShape.setValue(8789,8788),this._mirroringShape.setValue(8804,8805),this._mirroringShape.setValue(8805,8804),this._mirroringShape.setValue(8806,8807),this._mirroringShape.setValue(8807,8806),this._mirroringShape.setValue(8808,8809),this._mirroringShape.setValue(8809,8808),this._mirroringShape.setValue(8810,8811),this._mirroringShape.setValue(8811,8810),this._mirroringShape.setValue(8814,8815),this._mirroringShape.setValue(8815,8814),this._mirroringShape.setValue(8816,8817),this._mirroringShape.setValue(8817,8816),this._mirroringShape.setValue(8818,8819),this._mirroringShape.setValue(8819,8818),this._mirroringShape.setValue(8820,8821),this._mirroringShape.setValue(8821,8820),this._mirroringShape.setValue(8822,8823),this._mirroringShape.setValue(8823,8822),this._mirroringShape.setValue(8824,8825),this._mirroringShape.setValue(8825,8824),this._mirroringShape.setValue(8826,8827),this._mirroringShape.setValue(8827,8826),this._mirroringShape.setValue(8828,8829),this._mirroringShape.setValue(8829,8828),this._mirroringShape.setValue(8830,8831),this._mirroringShape.setValue(8831,8830),this._mirroringShape.setValue(8832,8833),this._mirroringShape.setValue(8833,8832),this._mirroringShape.setValue(8834,8835),this._mirroringShape.setValue(8835,8834),this._mirroringShape.setValue(8836,8837),this._mirroringShape.setValue(8837,8836),this._mirroringShape.setValue(8838,8839),this._mirroringShape.setValue(8839,8838),this._mirroringShape.setValue(8840,8841),this._mirroringShape.setValue(8841,8840),this._mirroringShape.setValue(8842,8843),this._mirroringShape.setValue(8843,8842),this._mirroringShape.setValue(8847,8848),this._mirroringShape.setValue(8848,8847),this._mirroringShape.setValue(8849,8850),this._mirroringShape.setValue(8850,8849),this._mirroringShape.setValue(8856,10680),this._mirroringShape.setValue(8866,8867),this._mirroringShape.setValue(8867,8866),this._mirroringShape.setValue(8870,10974),this._mirroringShape.setValue(8872,10980),this._mirroringShape.setValue(8873,10979),this._mirroringShape.setValue(8875,10981),this._mirroringShape.setValue(8880,8881),this._mirroringShape.setValue(8881,8880),this._mirroringShape.setValue(8882,8883),this._mirroringShape.setValue(8883,8882),this._mirroringShape.setValue(8884,8885),this._mirroringShape.setValue(8885,8884),this._mirroringShape.setValue(8886,8887),this._mirroringShape.setValue(8887,8886),this._mirroringShape.setValue(8905,8906),this._mirroringShape.setValue(8906,8905),this._mirroringShape.setValue(8907,8908),this._mirroringShape.setValue(8908,8907),this._mirroringShape.setValue(8909,8771),this._mirroringShape.setValue(8912,8913),this._mirroringShape.setValue(8913,8912),this._mirroringShape.setValue(8918,8919),this._mirroringShape.setValue(8919,8918),this._mirroringShape.setValue(8920,8921),this._mirroringShape.setValue(8921,8920),this._mirroringShape.setValue(8922,8923),this._mirroringShape.setValue(8923,8922),this._mirroringShape.setValue(8924,8925),this._mirroringShape.setValue(8925,8924),this._mirroringShape.setValue(8926,8927),this._mirroringShape.setValue(8927,8926),this._mirroringShape.setValue(8928,8929),this._mirroringShape.setValue(8929,8928),this._mirroringShape.setValue(8930,8931),this._mirroringShape.setValue(8931,8930),this._mirroringShape.setValue(8932,8933),this._mirroringShape.setValue(8933,8932),this._mirroringShape.setValue(8934,8935),this._mirroringShape.setValue(8935,8934),this._mirroringShape.setValue(8936,8937),this._mirroringShape.setValue(8937,8936),this._mirroringShape.setValue(8938,8939),this._mirroringShape.setValue(8939,8938),this._mirroringShape.setValue(8940,8941),this._mirroringShape.setValue(8941,8940),this._mirroringShape.setValue(8944,8945),this._mirroringShape.setValue(8945,8944),this._mirroringShape.setValue(8946,8954),this._mirroringShape.setValue(8947,8955),this._mirroringShape.setValue(8948,8956),this._mirroringShape.setValue(8950,8957),this._mirroringShape.setValue(8951,8958),this._mirroringShape.setValue(8954,8946),this._mirroringShape.setValue(8955,8947),this._mirroringShape.setValue(8956,8948),this._mirroringShape.setValue(8957,8950),this._mirroringShape.setValue(8958,8951),this._mirroringShape.setValue(8968,8969),this._mirroringShape.setValue(8969,8968),this._mirroringShape.setValue(8970,8971),this._mirroringShape.setValue(8971,8970),this._mirroringShape.setValue(9001,9002),this._mirroringShape.setValue(9002,9001),this._mirroringShape.setValue(10088,10089),this._mirroringShape.setValue(10089,10088),this._mirroringShape.setValue(10090,10091),this._mirroringShape.setValue(10091,10090),this._mirroringShape.setValue(10092,10093),this._mirroringShape.setValue(10093,10092),this._mirroringShape.setValue(10094,10095),this._mirroringShape.setValue(10095,10094),this._mirroringShape.setValue(10096,10097),this._mirroringShape.setValue(10097,10096),this._mirroringShape.setValue(10098,10099),this._mirroringShape.setValue(10099,10098),this._mirroringShape.setValue(10100,10101),this._mirroringShape.setValue(10101,10100),this._mirroringShape.setValue(10197,10198),this._mirroringShape.setValue(10198,10197),this._mirroringShape.setValue(10205,10206),this._mirroringShape.setValue(10206,10205),this._mirroringShape.setValue(10210,10211),this._mirroringShape.setValue(10211,10210),this._mirroringShape.setValue(10212,10213),this._mirroringShape.setValue(10213,10212),this._mirroringShape.setValue(10214,10215),this._mirroringShape.setValue(10215,10214),this._mirroringShape.setValue(10216,10217),this._mirroringShape.setValue(10217,10216),this._mirroringShape.setValue(10218,10219),this._mirroringShape.setValue(10219,10218),this._mirroringShape.setValue(10627,10628),this._mirroringShape.setValue(10628,10627),this._mirroringShape.setValue(10629,10630),this._mirroringShape.setValue(10630,10629),this._mirroringShape.setValue(10631,10632),this._mirroringShape.setValue(10632,10631),this._mirroringShape.setValue(10633,10634),this._mirroringShape.setValue(10634,10633),this._mirroringShape.setValue(10635,10636),this._mirroringShape.setValue(10636,10635),this._mirroringShape.setValue(10637,10640),this._mirroringShape.setValue(10638,10639),this._mirroringShape.setValue(10639,10638),this._mirroringShape.setValue(10640,10637),this._mirroringShape.setValue(10641,10642),this._mirroringShape.setValue(10642,10641),this._mirroringShape.setValue(10643,10644),this._mirroringShape.setValue(10644,10643),this._mirroringShape.setValue(10645,10646),this._mirroringShape.setValue(10646,10645),this._mirroringShape.setValue(10647,10648),this._mirroringShape.setValue(10648,10647),this._mirroringShape.setValue(10680,8856),this._mirroringShape.setValue(10688,10689),this._mirroringShape.setValue(10689,10688),this._mirroringShape.setValue(10692,10693),this._mirroringShape.setValue(10693,10692),this._mirroringShape.setValue(10703,10704),this._mirroringShape.setValue(10704,10703),this._mirroringShape.setValue(10705,10706),this._mirroringShape.setValue(10706,10705),this._mirroringShape.setValue(10708,10709),this._mirroringShape.setValue(10709,10708),this._mirroringShape.setValue(10712,10713),this._mirroringShape.setValue(10713,10712),this._mirroringShape.setValue(10714,10715),this._mirroringShape.setValue(10715,10714),this._mirroringShape.setValue(10741,8725),this._mirroringShape.setValue(10744,10745),this._mirroringShape.setValue(10745,10744),this._mirroringShape.setValue(10748,10749),this._mirroringShape.setValue(10749,10748),this._mirroringShape.setValue(10795,10796),this._mirroringShape.setValue(10796,10795),this._mirroringShape.setValue(10797,10796),this._mirroringShape.setValue(10798,10797),this._mirroringShape.setValue(10804,10805),this._mirroringShape.setValue(10805,10804),this._mirroringShape.setValue(10812,10813),this._mirroringShape.setValue(10813,10812),this._mirroringShape.setValue(10852,10853),this._mirroringShape.setValue(10853,10852),this._mirroringShape.setValue(10873,10874),this._mirroringShape.setValue(10874,10873),this._mirroringShape.setValue(10877,10878),this._mirroringShape.setValue(10878,10877),this._mirroringShape.setValue(10879,10880),this._mirroringShape.setValue(10880,10879),this._mirroringShape.setValue(10881,10882),this._mirroringShape.setValue(10882,10881),this._mirroringShape.setValue(10883,10884),this._mirroringShape.setValue(10884,10883),this._mirroringShape.setValue(10891,10892),this._mirroringShape.setValue(10892,10891),this._mirroringShape.setValue(10897,10898),this._mirroringShape.setValue(10898,10897),this._mirroringShape.setValue(10899,10900),this._mirroringShape.setValue(10900,10899),this._mirroringShape.setValue(10901,10902),this._mirroringShape.setValue(10902,10901),this._mirroringShape.setValue(10903,10904),this._mirroringShape.setValue(10904,10903),this._mirroringShape.setValue(10905,10906),this._mirroringShape.setValue(10906,10905),this._mirroringShape.setValue(10907,10908),this._mirroringShape.setValue(10908,10907),this._mirroringShape.setValue(10913,10914),this._mirroringShape.setValue(10914,10913),this._mirroringShape.setValue(10918,10919),this._mirroringShape.setValue(10919,10918),this._mirroringShape.setValue(10920,10921),this._mirroringShape.setValue(10921,10920),this._mirroringShape.setValue(10922,10923),this._mirroringShape.setValue(10923,10922),this._mirroringShape.setValue(10924,10925),this._mirroringShape.setValue(10925,10924),this._mirroringShape.setValue(10927,10928),this._mirroringShape.setValue(10928,10927),this._mirroringShape.setValue(10931,10932),this._mirroringShape.setValue(10932,10931),this._mirroringShape.setValue(10939,10940),this._mirroringShape.setValue(10940,10939),this._mirroringShape.setValue(10941,10942),this._mirroringShape.setValue(10942,10941),this._mirroringShape.setValue(10943,10944),this._mirroringShape.setValue(10944,10943),this._mirroringShape.setValue(10945,10946),this._mirroringShape.setValue(10946,10945),this._mirroringShape.setValue(10947,10948),this._mirroringShape.setValue(10948,10947),this._mirroringShape.setValue(10949,10950),this._mirroringShape.setValue(10950,10949),this._mirroringShape.setValue(10957,10958),this._mirroringShape.setValue(10958,10957),this._mirroringShape.setValue(10959,10960),this._mirroringShape.setValue(10960,10959),this._mirroringShape.setValue(10961,10962),this._mirroringShape.setValue(10962,10961),this._mirroringShape.setValue(10963,10964),this._mirroringShape.setValue(10964,10963),this._mirroringShape.setValue(10965,10966),this._mirroringShape.setValue(10966,10965),this._mirroringShape.setValue(10974,8870),this._mirroringShape.setValue(10979,8873),this._mirroringShape.setValue(10980,8872),this._mirroringShape.setValue(10981,8875),this._mirroringShape.setValue(10988,10989),this._mirroringShape.setValue(10989,10988),this._mirroringShape.setValue(10999,11e3),this._mirroringShape.setValue(11e3,10999),this._mirroringShape.setValue(11001,11002),this._mirroringShape.setValue(11002,11001),this._mirroringShape.setValue(12296,12297),this._mirroringShape.setValue(12297,12296),this._mirroringShape.setValue(12298,12299),this._mirroringShape.setValue(12299,12298),this._mirroringShape.setValue(12300,12301),this._mirroringShape.setValue(12301,12300),this._mirroringShape.setValue(12302,12303),this._mirroringShape.setValue(12303,12302),this._mirroringShape.setValue(12304,12305),this._mirroringShape.setValue(12305,12304),this._mirroringShape.setValue(12308,12309),this._mirroringShape.setValue(12309,12308),this._mirroringShape.setValue(12310,12311),this._mirroringShape.setValue(12311,12310),this._mirroringShape.setValue(12312,12313),this._mirroringShape.setValue(12313,12312),this._mirroringShape.setValue(12314,12315),this._mirroringShape.setValue(12315,12314),this._mirroringShape.setValue(65288,65289),this._mirroringShape.setValue(65289,65288),this._mirroringShape.setValue(65308,65310),this._mirroringShape.setValue(65310,65308),this._mirroringShape.setValue(65339,65341),this._mirroringShape.setValue(65341,65339),this._mirroringShape.setValue(65371,65373),this._mirroringShape.setValue(65373,65371),this._mirroringShape.setValue(65375,65376),this._mirroringShape.setValue(65376,65375),this._mirroringShape.setValue(65378,65379),this._mirroringShape.setValue(65379,65378)},jt);function jt(){this._indexes=[],this._indexLevels=[],this._mirroringShape=new Ya,this._update()}zt.prototype._getVisualOrder=function(t,e){this._type=this._getCharacterCode(t),this._textOrder=e?this.lre:this.L,this._doVisualOrder();for(var i=[],r=0;r<this._levels.length;r++)i[Number.parseInt(r.toString(),10)]=this._levels[Number.parseInt(r.toString(),10)];return i},zt.prototype._getCharacterCode=function(t){for(var e=[],i=0;i<t.length;i++){var r=t[Number.parseInt(i.toString(),10)].charCodeAt(0);e[Number.parseInt(i.toString(),10)]=this._rtlCharacterTypes[Number.parseInt(r.toString(),10)]}return e},zt.prototype._setDefaultLevels=function(){for(var t=0;t<this._length;t++)this._levels[Number.parseInt(t.toString(),10)]=this._textOrder},zt.prototype._setLevels=function(){this._setDefaultLevels();for(var t=0;t<this._length;++t){var e=this._levels[Number.parseInt(t.toString(),10)];this._levels[Number.parseInt(t.toString(),10)]=e}},zt.prototype._updateLevels=function(t,e,i){if(0==(1&e))for(var r=t;r<i;++r)this._result[Number.parseInt(r.toString(),10)]===this.R?this._levels[Number.parseInt(r.toString(),10)]+=1:this._result[Number.parseInt(r.toString(),10)]!==this.L&&(this._levels[Number.parseInt(r.toString(),10)]+=2);else for(r=t;r<i;++r)this._result[Number.parseInt(r.toString(),10)]!==this.R&&(this._levels[Number.parseInt(r.toString(),10)]+=1)},zt.prototype._doVisualOrder=function(){this._length=this._type.length,this._result=this._type,this._levels=[],this._setLevels(),this._length=this._getEmbeddedCharactersLength();for(var t=this._textOrder,e=0;e<this._length;){for(var i=this._levels[Number.parseInt(e.toString(),10)],r=0==(1&Math.max(t,i))?this.L:this.R,n=e+1;n<this._length&&this._levels[Number.parseInt(n.toString(),10)]===i;)++n;var s=n<this._length?this._levels[Number.parseInt(n.toString(),10)]:this._textOrder,s=0==(1&Math.max(s,i))?this.L:this.R;this._check(e,n,i,r,s),this._updateLevels(e,i,n),t=i,e=n}this._checkEmbeddedCharacters(this._length)},zt.prototype._getEmbeddedCharactersLength=function(){for(var t=0,e=0;e<this._length;++e)this._type[Number.parseInt(e.toString(),10)]!==this.lre&&this._type[Number.parseInt(e.toString(),10)]!==this.rle&&this._type[Number.parseInt(e.toString(),10)]!==this.lro&&this._type[Number.parseInt(e.toString(),10)]!==this.rlo&&this._type[Number.parseInt(e.toString(),10)]!==this.pdf&&this._type[Number.parseInt(e.toString(),10)]!==this.BN&&(this._result[Number.parseInt(t.toString(),10)]=this._result[Number.parseInt(e.toString(),10)],this._levels[Number.parseInt(t.toString(),10)]=this._levels[Number.parseInt(e.toString(),10)],t++);return t},zt.prototype._checkEmbeddedCharacters=function(t){for(var e=this._type.length-1;0<=e;--e)this._type[Number.parseInt(e.toString(),10)]===this.lre||this._type[Number.parseInt(e.toString(),10)]===this.rle||this._type[Number.parseInt(e.toString(),10)]===this.lro||this._type[Number.parseInt(e.toString(),10)]===this.rlo||this._type[Number.parseInt(e.toString(),10)]===this.pdf||this._type[Number.parseInt(e.toString(),10)]===this.BN?(this._result[Number.parseInt(e.toString(),10)]=this._type[Number.parseInt(e.toString(),10)],this._levels[Number.parseInt(e.toString(),10)]=-1):(--t,this._result[Number.parseInt(e.toString(),10)]=this._result[Number.parseInt(t.toString(),10)],this._levels[Number.parseInt(e.toString(),10)]=this._levels[Number.parseInt(t.toString(),10)]);for(e=0;e<this._type.length;e++)-1===this._levels[Number.parseInt(e.toString(),10)]&&(this._levels[Number.parseInt(e.toString(),10)]=this._levels[e-1])},zt.prototype._check=function(t,e,i,r,n){for(var s=r,a=t;a<e;++a)this._result[Number.parseInt(a.toString(),10)]===this.nsm?this._result[Number.parseInt(a.toString(),10)]=s:s=this._result[Number.parseInt(a.toString(),10)];this._checkEuropeanDigits(t,e,i,r,n)},zt.prototype._checkEuropeanDigits=function(t,e,i,r,n){for(var s=t;s<e;++s)if(this._result[Number.parseInt(s.toString(),10)]===this.EN)for(var a=s-1;t<=a;--a)if(this._result[Number.parseInt(a.toString(),10)]===this.L||this._result[Number.parseInt(a.toString(),10)]===this.R||this._result[Number.parseInt(a.toString(),10)]===this.AL){this._result[Number.parseInt(a.toString(),10)]===this.AL&&(this._result[Number.parseInt(s.toString(),10)]=this.AN);break}this._checkArabicCharacters(t,e,i,r,n)},zt.prototype._checkArabicCharacters=function(t,e,i,r,n){for(var s=t;s<e;++s)this._result[Number.parseInt(s.toString(),10)]===this.AL&&(this._result[Number.parseInt(s.toString(),10)]=this.R);this._checkEuropeanNumberSeparator(t,e,i,r,n)},zt.prototype._checkEuropeanNumberSeparator=function(t,e,i,r,n){for(var s,a,o=t+1;o<e-1;++o)this._result[Number.parseInt(o.toString(),10)]!==this.ES&&this._result[Number.parseInt(o.toString(),10)]!==this.CS||(s=this._result[o-1],a=this._result[o+1],s===this.EN&&a===this.EN?this._result[Number.parseInt(o.toString(),10)]=this.EN:this._result[Number.parseInt(o.toString(),10)]===this.CS&&s===this.AN&&a===this.AN&&(this._result[Number.parseInt(o.toString(),10)]=this.AN));this._checkEuropeanNumberTerminator(t,e,i,r,n)},zt.prototype._checkEuropeanNumberTerminator=function(t,e,i,r,n){for(var s,a,o=t;o<e;++o)this._result[Number.parseInt(o.toString(),10)]===this.ET&&(s=o,(a=[]).push(this.ET),a=this._getLength(s,e,a),(s===t?r:this._result[s-1])!==this.EN&&(a===e||this._result[Number.parseInt(a.toString(),10)]),o=a);this._checkOtherNeutrals(t,e,i,r,n)},zt.prototype._checkOtherNeutrals=function(t,e,i,r,n){for(var s=t;s<e;++s)this._result[Number.parseInt(s.toString(),10)]!==this.ES&&this._result[Number.parseInt(s.toString(),10)]!==this.ET&&this._result[Number.parseInt(s.toString(),10)]!==this.CS||(this._result[Number.parseInt(s.toString(),10)]=this.ON);this._checkOtherCharacters(t,e,i,r,n)},zt.prototype._checkOtherCharacters=function(t,e,i,r,n){for(var s=t;s<e;++s)if(this._result[Number.parseInt(s.toString(),10)]===this.EN){for(var a=r,o=s-1;t<=o;--o)if(this._result[Number.parseInt(o.toString(),10)]===this.L||this._result[Number.parseInt(o.toString(),10)]===this.R){a=this._result[Number.parseInt(o.toString(),10)];break}a===this.L&&(this._result[Number.parseInt(s.toString(),10)]=this.L)}this._checkCharacters(t,e,i,r,n)},zt.prototype._getLength=function(t,e,i){for(--t;++t<e;){for(var r=this._result[Number.parseInt(t.toString(),10)],n=0;n<i.length;++n)r===i[Number.parseInt(n.toString(),10)]&&(t=this._getLength(++t,e,i));return t}return e},zt.prototype._checkCharacters=function(t,e,i,r,n){for(var s=t;s<e;++s)if(this._result[Number.parseInt(s.toString(),10)]===this.WS||this._result[Number.parseInt(s.toString(),10)]===this.ON||this._result[Number.parseInt(s.toString(),10)]===this.B||this._result[Number.parseInt(s.toString(),10)]===this.S){var a=s,o=[this.B,this.S,this.WS,this.ON],h=this._getLength(a,e,o),o=0,c=0,_=0;a===t?o=r:(o=this._result[a-1])!==this.AN&&o!==this.EN||(o=this.R),h===e?c=n:(c=this._result[Number.parseInt(h.toString(),10)])===this.AN&&(c=this.R);for(var _=o===c?o:0==(1&i)?this.L:this.R,d=a;d<h;++d)this._result[Number.parseInt(d.toString(),10)]=_;s=h}};var Vt=zt;function zt(){this._type=[],this._textOrder=-1,this._rtlCharacterTypes=new Array(65536),this.L=0,this.lre=1,this.lro=2,this.R=3,this.AL=4,this.rle=5,this.rlo=6,this.pdf=7,this.EN=8,this.ES=9,this.ET=10,this.AN=11,this.CS=12,this.nsm=13,this.BN=14,this.B=15,this.S=16,this.WS=17,this.ON=18,this._charTypes=[this.L,this.EN,this.BN,this.ES,this.ES,this.S,this.ET,this.ET,this.B,this.AN,this.AN,this.S,this.CS,this.CS,this.WS,this.nsm,this.nsm,this.B,this.BN,27,this.BN,28,30,this.B,31,31,this.S,32,32,this.WS,33,34,this.ON,35,37,this.ET,38,42,this.ON,43,43,this.ET,44,44,this.CS,45,45,this.ET,46,46,this.CS,47,47,this.CS,48,57,this.EN,58,58,this.CS,59,64,this.ON,65,90,this.L,91,96,this.ON,97,122,this.L,123,126,this.ON,127,132,this.BN,133,133,this.B,134,159,this.BN,160,160,this.CS,161,161,this.ON,162,165,this.ET,166,169,this.ON,170,170,this.L,171,175,this.ON,176,177,this.ET,178,179,this.EN,180,180,this.ON,181,181,this.L,182,184,this.ON,185,185,this.EN,186,186,this.L,187,191,this.ON,192,214,this.L,215,215,this.ON,216,246,this.L,247,247,this.ON,248,696,this.L,697,698,this.ON,699,705,this.L,706,719,this.ON,720,721,this.L,722,735,this.ON,736,740,this.L,741,749,this.ON,750,750,this.L,751,767,this.ON,768,855,this.nsm,856,860,this.L,861,879,this.nsm,880,883,this.L,884,885,this.ON,886,893,this.L,894,894,this.ON,895,899,this.L,900,901,this.ON,902,902,this.L,903,903,this.ON,904,1013,this.L,1014,1014,this.ON,1015,1154,this.L,1155,1158,this.nsm,1159,1159,this.L,1160,1161,this.nsm,1162,1417,this.L,1418,1418,this.ON,1419,1424,this.L,1425,1441,this.nsm,1442,1442,this.L,1443,1465,this.nsm,1466,1466,this.L,1467,1469,this.nsm,1470,1470,this.R,1471,1471,this.nsm,1472,1472,this.R,1473,1474,this.nsm,1475,1475,this.R,1476,1476,this.nsm,1477,1487,this.L,1488,1514,this.R,1515,1519,this.L,1520,1524,this.R,1525,1535,this.L,1536,1539,this.AL,1540,1547,this.L,1548,1548,this.CS,1549,1549,this.AL,1550,1551,this.ON,1552,1557,this.nsm,1558,1562,this.L,1563,1563,this.AL,1564,1566,this.L,1567,1567,this.AL,1568,1568,this.L,1569,1594,this.AL,1595,1599,this.L,1600,1610,this.AL,1611,1624,this.nsm,1625,1631,this.L,1632,1641,this.AN,1642,1642,this.ET,1643,1644,this.AN,1645,1647,this.AL,1648,1648,this.nsm,1649,1749,this.AL,1750,1756,this.nsm,1757,1757,this.AL,1758,1764,this.nsm,1765,1766,this.AL,1767,1768,this.nsm,1769,1769,this.ON,1770,1773,this.nsm,1774,1775,this.AL,1776,1785,this.EN,1786,1805,this.AL,1806,1806,this.L,1807,1807,this.BN,1808,1808,this.AL,1809,1809,this.nsm,1810,1839,this.AL,1840,1866,this.nsm,1867,1868,this.L,1869,1871,this.AL,1872,1919,this.L,1920,1957,this.AL,1958,1968,this.nsm,1969,1969,this.AL,1970,2304,this.L,2305,2306,this.nsm,2307,2363,this.L,2364,2364,this.nsm,2365,2368,this.L,2369,2376,this.nsm,2377,2380,this.L,2381,2381,this.nsm,2382,2384,this.L,2385,2388,this.nsm,2389,2401,this.L,2402,2403,this.nsm,2404,2432,this.L,2433,2433,this.nsm,2434,2491,this.L,2492,2492,this.nsm,2493,2496,this.L,2497,2500,this.nsm,2501,2508,this.L,2509,2509,this.nsm,2510,2529,this.L,2530,2531,this.nsm,2532,2545,this.L,2546,2547,this.ET,2548,2560,this.L,2561,2562,this.nsm,2563,2619,this.L,2620,2620,this.nsm,2621,2624,this.L,2625,2626,this.nsm,2627,2630,this.L,2631,2632,this.nsm,2633,2634,this.L,2635,2637,this.nsm,2638,2671,this.L,2672,2673,this.nsm,2674,2688,this.L,2689,2690,this.nsm,2691,2747,this.L,2748,2748,this.nsm,2749,2752,this.L,2753,2757,this.nsm,2758,2758,this.L,2759,2760,this.nsm,2761,2764,this.L,2765,2765,this.nsm,2766,2785,this.L,2786,2787,this.nsm,2788,2800,this.L,2801,2801,this.ET,2802,2816,this.L,2817,2817,this.nsm,2818,2875,this.L,2876,2876,this.nsm,2877,2878,this.L,2879,2879,this.nsm,2880,2880,this.L,2881,2883,this.nsm,2884,2892,this.L,2893,2893,this.nsm,2894,2901,this.L,2902,2902,this.nsm,2903,2945,this.L,2946,2946,this.nsm,2947,3007,this.L,3008,3008,this.nsm,3009,3020,this.L,3021,3021,this.nsm,3022,3058,this.L,3059,3064,this.ON,3065,3065,this.ET,3066,3066,this.ON,3067,3133,this.L,3134,3136,this.nsm,3137,3141,this.L,3142,3144,this.nsm,3145,3145,this.L,3146,3149,this.nsm,3150,3156,this.L,3157,3158,this.nsm,3159,3259,this.L,3260,3260,this.nsm,3261,3275,this.L,3276,3277,this.nsm,3278,3392,this.L,3393,3395,this.nsm,3396,3404,this.L,3405,3405,this.nsm,3406,3529,this.L,3530,3530,this.nsm,3531,3537,this.L,3538,3540,this.nsm,3541,3541,this.L,3542,3542,this.nsm,3543,3632,this.L,3633,3633,this.nsm,3634,3635,this.L,3636,3642,this.nsm,3643,3646,this.L,3647,3647,this.ET,3648,3654,this.L,3655,3662,this.nsm,3663,3760,this.L,3761,3761,this.nsm,3762,3763,this.L,3764,3769,this.nsm,3770,3770,this.L,3771,3772,this.nsm,3773,3783,this.L,3784,3789,this.nsm,3790,3863,this.L,3864,3865,this.nsm,3866,3892,this.L,3893,3893,this.nsm,3894,3894,this.L,3895,3895,this.nsm,3896,3896,this.L,3897,3897,this.nsm,3898,3901,this.ON,3902,3952,this.L,3953,3966,this.nsm,3967,3967,this.L,3968,3972,this.nsm,3973,3973,this.L,3974,3975,this.nsm,3976,3983,this.L,3984,3991,this.nsm,3992,3992,this.L,3993,4028,this.nsm,4029,4037,this.L,4038,4038,this.nsm,4039,4140,this.L,4141,4144,this.nsm,4145,4145,this.L,4146,4146,this.nsm,4147,4149,this.L,4150,4151,this.nsm,4152,4152,this.L,4153,4153,this.nsm,4154,4183,this.L,4184,4185,this.nsm,4186,5759,this.L,5760,5760,this.WS,5761,5786,this.L,5787,5788,this.ON,5789,5905,this.L,5906,5908,this.nsm,5909,5937,this.L,5938,5940,this.nsm,5941,5969,this.L,5970,5971,this.nsm,5972,6001,this.L,6002,6003,this.nsm,6004,6070,this.L,6071,6077,this.nsm,6078,6085,this.L,6086,6086,this.nsm,6087,6088,this.L,6089,6099,this.nsm,6100,6106,this.L,6107,6107,this.ET,6108,6108,this.L,6109,6109,this.nsm,6110,6127,this.L,6128,6137,this.ON,6138,6143,this.L,6144,6154,this.ON,6155,6157,this.nsm,6158,6158,this.WS,6159,6312,this.L,6313,6313,this.nsm,6314,6431,this.L,6432,6434,this.nsm,6435,6438,this.L,6439,6443,this.nsm,6444,6449,this.L,6450,6450,this.nsm,6451,6456,this.L,6457,6459,this.nsm,6460,6463,this.L,6464,6464,this.ON,6465,6467,this.L,6468,6469,this.ON,6470,6623,this.L,6624,6655,this.ON,6656,8124,this.L,8125,8125,this.ON,8126,8126,this.L,8127,8129,this.ON,8130,8140,this.L,8141,8143,this.ON,8144,8156,this.L,8157,8159,this.ON,8160,8172,this.L,8173,8175,this.ON,8176,8188,this.L,8189,8190,this.ON,8191,8191,this.L,8192,8202,this.WS,8203,8205,this.BN,8206,8206,this.L,8207,8207,this.R,8208,8231,this.ON,8232,8232,this.WS,8233,8233,this.B,8234,8234,this.lre,8235,8235,this.rle,8236,8236,this.pdf,8237,8237,this.lro,8238,8238,this.rlo,8239,8239,this.WS,8240,8244,this.ET,8245,8276,this.ON,8277,8278,this.L,8279,8279,this.ON,8280,8286,this.L,8287,8287,this.WS,8288,8291,this.BN,8292,8297,this.L,8298,8303,this.BN,8304,8304,this.EN,8305,8307,this.L,8308,8313,this.EN,8314,8315,this.ET,8316,8318,this.ON,8319,8319,this.L,8320,8329,this.EN,8330,8331,this.ET,8332,8334,this.ON,8335,8351,this.L,8352,8369,this.ET,8370,8399,this.L,8400,8426,this.nsm,8427,8447,this.L,8448,8449,this.ON,8450,8450,this.L,8451,8454,this.ON,8455,8455,this.L,8456,8457,this.ON,8458,8467,this.L,8468,8468,this.ON,8469,8469,this.L,8470,8472,this.ON,8473,8477,this.L,8478,8483,this.ON,8484,8484,this.L,8485,8485,this.ON,8486,8486,this.L,8487,8487,this.ON,8488,8488,this.L,8489,8489,this.ON,8490,8493,this.L,8494,8494,this.ET,8495,8497,this.L,8498,8498,this.ON,8499,8505,this.L,8506,8507,this.ON,8508,8511,this.L,8512,8516,this.ON,8517,8521,this.L,8522,8523,this.ON,8524,8530,this.L,8531,8543,this.ON,8544,8591,this.L,8592,8721,this.ON,8722,8723,this.ET,8724,9013,this.ON,9014,9082,this.L,9083,9108,this.ON,9109,9109,this.L,9110,9168,this.ON,9169,9215,this.L,9216,9254,this.ON,9255,9279,this.L,9280,9290,this.ON,9291,9311,this.L,9312,9371,this.EN,9372,9449,this.L,9450,9450,this.EN,9451,9751,this.ON,9752,9752,this.L,9753,9853,this.ON,9854,9855,this.L,9856,9873,this.ON,9874,9887,this.L,9888,9889,this.ON,9890,9984,this.L,9985,9988,this.ON,9989,9989,this.L,9990,9993,this.ON,9994,9995,this.L,9996,10023,this.ON,10024,10024,this.L,10025,10059,this.ON,10060,10060,this.L,10061,10061,this.ON,10062,10062,this.L,10063,10066,this.ON,10067,10069,this.L,10070,10070,this.ON,10071,10071,this.L,10072,10078,this.ON,10079,10080,this.L,10081,10132,this.ON,10133,10135,this.L,10136,10159,this.ON,10160,10160,this.L,10161,10174,this.ON,10175,10191,this.L,10192,10219,this.ON,10220,10223,this.L,10224,11021,this.ON,11022,11903,this.L,11904,11929,this.ON,11930,11930,this.L,11931,12019,this.ON,12020,12031,this.L,12032,12245,this.ON,12246,12271,this.L,12272,12283,this.ON,12284,12287,this.L,12288,12288,this.WS,12289,12292,this.ON,12293,12295,this.L,12296,12320,this.ON,12321,12329,this.L,12330,12335,this.nsm,12336,12336,this.ON,12337,12341,this.L,12342,12343,this.ON,12344,12348,this.L,12349,12351,this.ON,12352,12440,this.L,12441,12442,this.nsm,12443,12444,this.ON,12445,12447,this.L,12448,12448,this.ON,12449,12538,this.L,12539,12539,this.ON,12540,12828,this.L,12829,12830,this.ON,12831,12879,this.L,12880,12895,this.ON,12896,12923,this.L,12924,12925,this.ON,12926,12976,this.L,12977,12991,this.ON,12992,13003,this.L,13004,13007,this.ON,13008,13174,this.L,13175,13178,this.ON,13179,13277,this.L,13278,13279,this.ON,13280,13310,this.L,13311,13311,this.ON,13312,19903,this.L,19904,19967,this.ON,19968,42127,this.L,42128,42182,this.ON,42183,64284,this.L,64285,64285,this.R,64286,64286,this.nsm,64287,64296,this.R,64297,64297,this.ET,64298,64310,this.R,64311,64311,this.L,64312,64316,this.R,64317,64317,this.L,64318,64318,this.R,64319,64319,this.L,64320,64321,this.R,64322,64322,this.L,64323,64324,this.R,64325,64325,this.L,64326,64335,this.R,64336,64433,this.AL,64434,64466,this.L,64467,64829,this.AL,64830,64831,this.ON,64832,64847,this.L,64848,64911,this.AL,64912,64913,this.L,64914,64967,this.AL,64968,65007,this.L,65008,65020,this.AL,65021,65021,this.ON,65022,65023,this.L,65024,65039,this.nsm,65040,65055,this.L,65056,65059,this.nsm,65060,65071,this.L,65072,65103,this.ON,65104,65104,this.CS,65105,65105,this.ON,65106,65106,this.CS,65107,65107,this.L,65108,65108,this.ON,65109,65109,this.CS,65110,65118,this.ON,65119,65119,this.ET,65120,65121,this.ON,65122,65123,this.ET,65124,65126,this.ON,65127,65127,this.L,65128,65128,this.ON,65129,65130,this.ET,65131,65131,this.ON,65132,65135,this.L,65136,65140,this.AL,65141,65141,this.L,65142,65276,this.AL,65277,65278,this.L,65279,65279,this.BN,65280,65280,this.L,65281,65282,this.ON,65283,65285,this.ET,65286,65290,this.ON,65291,65291,this.ET,65292,65292,this.CS,65293,65293,this.ET,65294,65294,this.CS,65295,65295,this.ES,65296,65305,this.EN,65306,65306,this.CS,65307,65312,this.ON,65313,65338,this.L,65339,65344,this.ON,65345,65370,this.L,65371,65381,this.ON,65382,65503,this.L,65504,65505,this.ET,65506,65508,this.ON,65509,65510,this.ET,65511,65511,this.L,65512,65518,this.ON,65519,65528,this.L,65529,65531,this.BN,65532,65533,this.ON,65534,65535,this.L];for(var t=0;t<this._charTypes.length;++t)for(var e=this._charTypes[Number.parseInt(t.toString(),10)],i=this._charTypes[++t],r=this._charTypes[++t];e<=i;)this._rtlCharacterTypes[e++]=r}Ht.prototype._layout=function(t,e,i,r,n){var s=[];return null!=e&&null!=t&&(e._isUnicode?s=this._customLayout(t,i,n,e,r):(s=[])[0]=t),s},Ht.prototype._splitLayout=function(t,e,i,r,n){var s=[];return null!=e&&null!=t&&(s=this._customSplitLayout(t,e,i,r,n)),s},Ht.prototype._getGlyphIndex=function(t,e,i){if(i=[],null!=e&&null!=t){if(0===t.length)return{_result:!1,_glyphIndex:i};for(var r=(new Bt)._shape(t),n=e._fontInternal._ttfReader,s=(i=[r.length],0),a=0,o=r.length;a<o;a++){var h=r[Number.parseInt(a.toString(),10)],h=n._getGlyph(h);null!=h&&(i[s++]=h._index)}}t=new ae;return t._result=!0,t._glyphIndex=i,t},Ht.prototype._customLayout=function(t,e,i,r,n){if(null==n)return(a=null)!=t&&null!=i&&i.textDirection!==x.PdfTextDirection.none?(new Et)._getLogicalToVisualString(t,e):a;var s="",a=[];if(null!=t&&null!=r)if(null!=i&&i.textDirection!==x.PdfTextDirection.none&&(t=(new Bt)._shape(t),s=this._customLayout(t,e,i)),n){for(var o=s.split(""),h=o.length,c=0;c<h;c++)o[Number.parseInt(c.toString(),10)]=this._addCharacter(r,o[Number.parseInt(c.toString(),10)]);a=o}else(a=[])[0]=this._addCharacter(r,s);return a},Ht.prototype._addCharacter=function(t,e){var i;return null!=t&&null!=e&&(i=t._fontInternal._ttfReader,t._setSymbols(e),e=_s(ps(e=i._convertString(e)))),e},Ht.prototype._customSplitLayout=function(t,e,i,r,n){var s=[];return s=null!=t?this._customLayout(t,i,n).split(""):s};var Ut=Ht;function Ht(){this._openBracket="(",this._closeBracket=")"}Wt=function(t,e){return(Wt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}))(t,e)};var Wt,e=function(t,e){function i(){this.constructor=t}Wt(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Gt=(Object.defineProperty(Kt.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(Kt.prototype,"style",{get:function(){return this._style},set:function(t){this._style=t},enumerable:!0,configurable:!0}),Object.defineProperty(Kt.prototype,"isUnderline",{get:function(){return 0<(this.style&x.PdfFontStyle.underline)},enumerable:!0,configurable:!0}),Object.defineProperty(Kt.prototype,"isStrikeout",{get:function(){return 0<(this.style&x.PdfFontStyle.strikeout)},enumerable:!0,configurable:!0}),Object.defineProperty(Kt.prototype,"_metrics",{get:function(){return this._fontMetrics},set:function(t){this._fontMetrics=t},enumerable:!0,configurable:!0}),Object.defineProperty(Kt.prototype,"isBold",{get:function(){return 0<(this.style&x.PdfFontStyle.bold)},enumerable:!0,configurable:!0}),Object.defineProperty(Kt.prototype,"isItalic",{get:function(){return 0<(this.style&x.PdfFontStyle.italic)},enumerable:!0,configurable:!0}),Object.defineProperty(Kt.prototype,"height",{get:function(){return this._metrics._getHeight()},enumerable:!0,configurable:!0}),Kt.prototype._setInternals=function(t){if(!t)throw new Error("ArgumentNullException:internals");this._pdfFontInternals=t},Kt.prototype._getCharacterCount=function(t,e){if("string"==typeof e){for(var i=0,r=0,r=t.indexOf(e,r);-1!==r;)i++,r=t.indexOf(e,++r);return i}for(var n=0,s=0;s<t.length;s++)-1!==e.indexOf(t[Number.parseInt(s.toString(),10)])&&n++;return n},Kt.prototype.measureString=function(t,e,i,r,n){var s,a;return"string"==typeof t&&void 0===e?this.measureString(t,null):"string"==typeof t&&(e instanceof k||null===e)&&void 0===i&&void 0===r?this.measureString(t,s=e,0,0):"string"==typeof t&&(e instanceof k||null===e)&&"number"==typeof i&&"number"==typeof r?this.measureString(t,0,s=e,i,r):"string"==typeof t&&"number"==typeof e&&(i instanceof k||null===i)&&"number"==typeof r&&"number"==typeof n?this.measureString(t,[e,0],a=i,r,n):(s=e,a=i,e=(new rt)._layout(t,this,a,s),r=t.length,n=e._empty?0:e._lines.length,e._actualSize)},Kt.prototype._applyFormatSettings=function(t,e,i){var r=i;return null!=e&&0<i&&(0!==e.characterSpacing&&(r+=(t.length-1)*e.characterSpacing),0!==e.wordSpacing)&&(r+=this._getCharacterCount(t,[" ","\t"])*e.wordSpacing),r},Kt);function Kt(t,e){"number"==typeof t&&void 0===e?this._size=t:(this._size=t,this._style=e)}e(qt,Xt=Gt),Object.defineProperty(qt.prototype,"fontFamily",{get:function(){return this._fontFamily},enumerable:!0,configurable:!0}),qt.prototype._checkStyle=function(){this._fontFamily!==x.PdfFontFamily.symbol&&this._fontFamily!==x.PdfFontFamily.zapfDingbats||(this._style&=~(x.PdfFontStyle.bold|x.PdfFontStyle.italic))},qt.prototype.getLineWidth=function(t,e){for(var i=0,r=0,n=t.length;r<n;r++)i+=this._getCharacterWidthInternal(t[Number.parseInt(r.toString(),10)]);return i*=.001*this._metrics._size,i=this._applyFormatSettings(t,e,i)},qt.prototype._initializeInternals=function(){this._metrics=ee._getMetrics(this._fontFamily,this._style,this._size),this._dictionary=this._createInternals()},qt.prototype._createInternals=function(){var t=new D;return t._updated=!0,t.set("Type",L.get("Font")),t.set("Subtype",L.get("Type1")),t.set("BaseFont",new L(this._metrics._postScriptName)),this._fontFamily!==x.PdfFontFamily.symbol&&this._fontFamily!==x.PdfFontFamily.zapfDingbats&&t.set("Encoding",new L("WinAnsiEncoding")),t},qt.prototype._getCharacterWidthInternal=function(t){t=t.charCodeAt(0);return"Helvetica"!==this._metrics._name&&"Courier"!==this._metrics._name&&"TimesRoman"!==this._metrics._name&&"Symbol"!==this._metrics._name&&"ZapfDingbats"!==this._metrics._name||(t-=32),this._metrics._widthTable._itemAt(t=0<=t&&128!==t?t:0)};var Xt,m=qt;function qt(t,e,i){e=Xt.call(this,e,void 0===i?x.PdfFontStyle.regular:i)||this;return e._fontFamily=t,e._checkStyle(),e._initializeInternals(),e}e(Yt,Qt=Gt),Object.defineProperty(Yt.prototype,"fontFamily",{get:function(){return this._fontFamily},enumerable:!0,configurable:!0}),Yt.prototype._initializeInternals=function(){this._metrics=ie._getMetrics(this._fontFamily,this._style,this._size),this._dictionary=this._createInternals()},Yt.prototype._createInternals=function(){var t=new D;return t._updated=!0,t.set("Type",L.get("Font")),t.set("Subtype",L.get("Type0")),t.set("BaseFont",new L(this._metrics._postScriptName)),t.set("Encoding",this._getEncoding(this._fontFamily)),t.set("DescendantFonts",this._getDescendantFont()),t},Yt.prototype._getEncoding=function(t){var e="Unknown";switch(t){case x.PdfCjkFontFamily.hanyangSystemsGothicMedium:case x.PdfCjkFontFamily.hanyangSystemsShinMyeongJoMedium:e="UniKS-UCS2-H";break;case x.PdfCjkFontFamily.heiseiKakuGothicW5:case x.PdfCjkFontFamily.heiseiMinchoW3:e="UniJIS-UCS2-H";break;case x.PdfCjkFontFamily.monotypeHeiMedium:case x.PdfCjkFontFamily.monotypeSungLight:e="UniCNS-UCS2-H";break;case x.PdfCjkFontFamily.sinoTypeSongLight:e="UniGB-UCS2-H"}return new L(e)},Yt.prototype._getDescendantFont=function(){var t=new D;return t._updated=!0,t.set("Type",L.get("Font")),t.set("Subtype",L.get("CIDFontType2")),t.set("BaseFont",new L(this._metrics._postScriptName)),t.set("DW",this._metrics._widthTable._defaultWidth),t.set("W",this._metrics._widthTable._toArray()),t.set("FontDescriptor",ne._getFontDescriptor(this._fontFamily,this._style,this._metrics)),t.set("CIDSystemInfo",this._getSystemInformation()),[t]},Yt.prototype._getSystemInformation=function(){var t=new D;switch(t._updated=!0,t.set("Registry","Adobe"),this._fontFamily){case x.PdfCjkFontFamily.hanyangSystemsGothicMedium:case x.PdfCjkFontFamily.hanyangSystemsShinMyeongJoMedium:t.set("Ordering","Korea1"),t.set("Supplement",1);break;case x.PdfCjkFontFamily.heiseiKakuGothicW5:case x.PdfCjkFontFamily.heiseiMinchoW3:t.set("Ordering","Japan1"),t.set("Supplement",2);break;case x.PdfCjkFontFamily.monotypeHeiMedium:case x.PdfCjkFontFamily.monotypeSungLight:t.set("Ordering","CNS1"),t.set("Supplement","0");break;case x.PdfCjkFontFamily.sinoTypeSongLight:t.set("Ordering","GB1"),t.set("Supplement",2)}return t},Yt.prototype.getLineWidth=function(t,e){for(var i=0,r=0;r<t.length;r++)i+=this._getCharacterWidthInternal(t.charCodeAt(r));return i*=.001*this._metrics._size,i=this._applyFormatSettings(t,e,i)},Yt.prototype._getCharacterWidthInternal=function(t){return this._metrics._widthTable._itemAt(t=0<=t?t:0)};var Qt,Jt=Yt;function Yt(t,e,i){i=Qt.call(this,e,void 0===i?x.PdfFontStyle.regular:i)||this;return i._fontFamily=t,i._size=e,i._initializeInternals(),i}e(te,Zt=Gt),Object.defineProperty(te.prototype,"isUnicode",{get:function(){return this._isUnicode},enumerable:!0,configurable:!0}),Object.defineProperty(te.prototype,"isEmbed",{get:function(){return this._isEmbedFont},enumerable:!0,configurable:!0}),te.prototype._createFontInternal=function(t,e){this._fontInternal=new Lt(t,this._size),this.style=e,this._initializeInternals()},te.prototype._initializeInternals=function(){var t;this._fontInternal instanceof Lt&&(this._fontInternal._isEmbed=this._isEmbedFont),this._fontInternal._createInternals(),t=this._fontInternal._getInternals(),this._metrics=this._fontInternal._metrics,this._metrics._isUnicodeFont=!0,this._setInternals(t)},te.prototype.getLineWidth=function(t,e){var i=0;if(null!=e&&e.textDirection!==x.PdfTextDirection.none)i=this._getUnicodeLineWidth(t,i);else for(var r=0,n=t.length;r<n;r++)i+=this._getCharacterWidthInternal(t[Number.parseInt(r.toString(),10)]);return i*=.001*this._metrics._size,i=this._applyFormatSettings(t,e,i)},te.prototype._getUnicodeLineWidth=function(t,e){e=0;var i=[],t=(new Ut)._getGlyphIndex(t,this,i),r=t._result,i=t._glyphIndex;if(r&&null!==i)for(var n=this._fontInternal._ttfReader,s=0,a=i.length;s<a;s++){var o=i[Number.parseInt(s.toString(),10)],o=n._getGlyph(o);null!=o&&(e+=o._width)}return e},te.prototype._getCharacterWidth=function(t,e){t=this._fontInternal._getCharacterWidth(t);return t*=.001*this._metrics._getSize(e)},te.prototype._setSymbols=function(t){var e=this._fontInternal;null!=e&&e._setSymbols(t)},te.prototype._getCharacterWidthInternal=function(t){t=t.charCodeAt(0);return this._metrics._widthTable._itemAt(0<=t&&128!==t?t:0)};var Zt,$t=te;function te(t,e,i){e=Zt.call(this,e,void 0===i?x.PdfFontStyle.regular:i)||this;return e._isEmbedFont=!1,e._isUnicode=!0,void 0!==i?e._createFontInternal(t,i):e._createFontInternal(t,x.PdfFontStyle.regular),e}r._getMetrics=function(t,e,i){var r=null;switch(t){case x.PdfFontFamily.helvetica:(r=this._getHelveticaMetrics(e,i))._name="Helvetica";break;case x.PdfFontFamily.courier:(r=this._getCourierMetrics(e,i))._name="Courier";break;case x.PdfFontFamily.timesRoman:(r=this._getTimesMetrics(e,i))._name="TimesRoman";break;case x.PdfFontFamily.symbol:(r=this._getSymbolMetrics(i))._name="Symbol";break;case x.PdfFontFamily.zapfDingbats:(r=this._getZapfDingbatsMetrics(i))._name="ZapfDingbats";break;default:(r=this._getHelveticaMetrics(e,i))._name="Helvetica"}return r._subScriptSizeFactor=this._subSuperScriptFactor,r._superscriptSizeFactor=this._subSuperScriptFactor,r},r._getHelveticaMetrics=function(t,e){var i=new z;return 0<(t&x.PdfFontStyle.bold)&&0<(t&x.PdfFontStyle.italic)?(i._ascent=this._helveticaBoldItalicAscent,i._descent=this._helveticaBoldItalicDescent,i._postScriptName=this._helveticaBoldItalicName,i._size=e,i._widthTable=new G(this._arialBoldWidth)):0<(t&x.PdfFontStyle.bold)?(i._ascent=this._helveticaBoldAscent,i._descent=this._helveticaBoldDescent,i._postScriptName=this._helveticaBoldName,i._size=e,i._widthTable=new G(this._arialBoldWidth)):(0<(t&x.PdfFontStyle.italic)?(i._ascent=this._helveticaItalicAscent,i._descent=this._helveticaItalicDescent,i._postScriptName=this._helveticaItalicName):(i._ascent=this._helveticaAscent,i._descent=this._helveticaDescent,i._postScriptName=this._helveticaName),i._size=e,i._widthTable=new G(this._arialWidth)),i._height=i._ascent-i._descent,i},r._getCourierMetrics=function(t,e){var i=new z;return 0<(t&x.PdfFontStyle.bold)&&0<(t&x.PdfFontStyle.italic)?(i._ascent=this._courierBoldItalicAscent,i._descent=this._courierBoldItalicDescent,i._postScriptName=this._courierBoldItalicName):0<(t&x.PdfFontStyle.bold)?(i._ascent=this._courierBoldAscent,i._descent=this._courierBoldDescent,i._postScriptName=this._courierBoldName):0<(t&x.PdfFontStyle.italic)?(i._ascent=this._courierItalicAscent,i._descent=this._courierItalicDescent,i._postScriptName=this._courierItalicName):(i._ascent=this._courierAscent,i._descent=this._courierDescent,i._postScriptName=this._courierName),i._size=e,i._widthTable=new G(this._fixedWidth),i._height=i._ascent-i._descent,i},r._getTimesMetrics=function(t,e){var i=new z;return 0<(t&x.PdfFontStyle.bold)&&0<(t&x.PdfFontStyle.italic)?(i._ascent=this._timesBoldItalicAscent,i._descent=this._timesBoldItalicDescent,i._postScriptName=this._timesBoldItalicName,i._size=e,i._widthTable=new G(this._timesRomanBoldItalicWidths)):0<(t&x.PdfFontStyle.bold)?(i._ascent=this._timesBoldAscent,i._descent=this._timesBoldDescent,i._postScriptName=this._timesBoldName,i._size=e,i._widthTable=new G(this._timesRomanBoldWidth)):0<(t&x.PdfFontStyle.italic)?(i._ascent=this._timesItalicAscent,i._descent=this._timesItalicDescent,i._postScriptName=this._timesItalicName,i._size=e,i._widthTable=new G(this._timesRomanItalicWidth)):(i._ascent=this._timesAscent,i._descent=this._timesDescent,i._postScriptName=this._timesName,i._size=e,i._widthTable=new G(this._timesRomanWidth)),i._height=i._ascent-i._descent,i},r._getSymbolMetrics=function(t){var e=new z;return e._ascent=this._symbolAscent,e._descent=this._symbolDescent,e._postScriptName=this._symbolName,e._size=t,e._widthTable=new G(this._symbolWidth),e._height=e._ascent-e._descent,e},r._getZapfDingbatsMetrics=function(t){var e=new z;return e._ascent=this._zapfDingbatsAscent,e._descent=this._zapfDingbatsDescent,e._postScriptName=this._zapfDingbatsName,e._size=t,e._widthTable=new G(this._zapfDingbatsWidth),e._height=e._ascent-e._descent,e},r._subSuperScriptFactor=1.52,r._helveticaAscent=931,r._helveticaDescent=-225,r._helveticaName="Helvetica",r._helveticaBoldAscent=962,r._helveticaBoldDescent=-228,r._helveticaBoldName="Helvetica-Bold",r._helveticaItalicAscent=931,r._helveticaItalicDescent=-225,r._helveticaItalicName="Helvetica-Oblique",r._helveticaBoldItalicAscent=962,r._helveticaBoldItalicDescent=-228,r._helveticaBoldItalicName="Helvetica-BoldOblique",r._courierAscent=805,r._courierDescent=-250,r._courierName="Courier",r._courierBoldAscent=801,r._courierBoldDescent=-250,r._courierBoldName="Courier-Bold",r._courierItalicAscent=805,r._courierItalicDescent=-250,r._courierItalicName="Courier-Oblique",r._courierBoldItalicAscent=801,r._courierBoldItalicDescent=-250,r._courierBoldItalicName="Courier-BoldOblique",r._timesAscent=898,r._timesDescent=-218,r._timesName="Times-Roman",r._timesBoldAscent=935,r._timesBoldDescent=-218,r._timesBoldName="Times-Bold",r._timesItalicAscent=883,r._timesItalicDescent=-217,r._timesItalicName="Times-Italic",r._timesBoldItalicAscent=921,r._timesBoldItalicDescent=-218,r._timesBoldItalicName="Times-BoldItalic",r._symbolAscent=1010,r._symbolDescent=-293,r._symbolName="Symbol",r._zapfDingbatsAscent=820,r._zapfDingbatsDescent=-143,r._zapfDingbatsName="ZapfDingbats",r._arialWidth=[278,278,355,556,556,889,667,191,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,278,278,584,584,584,556,1015,667,667,722,722,667,611,778,722,278,500,667,556,833,722,778,667,778,722,667,611,722,667,944,667,667,611,278,278,278,469,556,333,556,556,500,556,556,278,556,556,222,222,500,222,833,556,556,556,556,333,500,278,556,500,722,500,500,500,334,260,334,584,0,556,0,222,556,333,1e3,556,556,333,1e3,667,333,1e3,0,611,0,0,222,222,333,333,350,556,1e3,333,1e3,500,333,944,0,500,667,0,333,556,556,556,556,260,556,333,737,370,556,584,0,737,333,400,584,333,333,333,556,537,278,333,333,365,556,834,834,834,611,667,667,667,667,667,667,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,500,556,556,556,556,278,278,278,278,556,556,556,556,556,556,556,584,611,556,556,556,556,500,556,500],r._arialBoldWidth=[278,333,474,556,556,889,722,238,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,333,333,584,584,584,611,975,722,722,722,722,667,611,778,722,278,556,722,611,833,722,778,667,778,722,667,611,722,667,944,667,667,611,333,278,333,584,556,333,556,611,556,611,556,333,611,611,278,278,556,278,889,611,611,611,611,389,556,333,611,556,778,556,556,500,389,280,389,584,0,556,0,278,556,500,1e3,556,556,333,1e3,667,333,1e3,0,611,0,0,278,278,500,500,350,556,1e3,333,1e3,556,333,944,0,500,667,0,333,556,556,556,556,280,556,333,737,370,556,584,0,737,333,400,584,333,333,333,611,556,278,333,333,365,556,834,834,834,611,722,722,722,722,722,722,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,556,556,556,556,556,278,278,278,278,611,611,611,611,611,611,611,584,611,611,611,611,611,556,611,556],r._fixedWidth=[600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600],r._timesRomanWidth=[250,333,408,500,500,833,778,180,333,333,500,564,250,333,250,278,500,500,500,500,500,500,500,500,500,500,278,278,564,564,564,444,921,722,667,667,722,611,556,722,722,333,389,722,611,889,722,722,556,722,667,556,611,722,722,944,722,722,611,333,278,333,469,500,333,444,500,444,500,444,333,500,500,278,278,500,278,778,500,500,500,500,333,389,278,500,500,722,500,500,444,480,200,480,541,0,500,0,333,500,444,1e3,500,500,333,1e3,556,333,889,0,611,0,0,333,333,444,444,350,500,1e3,333,980,389,333,722,0,444,722,0,333,500,500,500,500,200,500,333,760,276,500,564,0,760,333,400,564,300,300,333,500,453,250,333,300,310,500,750,750,750,444,722,722,722,722,722,722,889,667,611,611,611,611,333,333,333,333,722,722,722,722,722,722,722,564,722,722,722,722,722,722,556,500,444,444,444,444,444,444,667,444,444,444,444,444,278,278,278,278,500,500,500,500,500,500,500,564,500,500,500,500,500,500,500,500],r._timesRomanBoldWidth=[250,333,555,500,500,1e3,833,278,333,333,500,570,250,333,250,278,500,500,500,500,500,500,500,500,500,500,333,333,570,570,570,500,930,722,667,722,722,667,611,778,778,389,500,778,667,944,722,778,611,778,722,556,667,722,722,1e3,722,722,667,333,278,333,581,500,333,500,556,444,556,444,333,500,556,278,333,556,278,833,556,500,556,556,444,389,333,556,500,722,500,500,444,394,220,394,520,0,500,0,333,500,500,1e3,500,500,333,1e3,556,333,1e3,0,667,0,0,333,333,500,500,350,500,1e3,333,1e3,389,333,722,0,444,722,0,333,500,500,500,500,220,500,333,747,300,500,570,0,747,333,400,570,300,300,333,556,540,250,333,300,330,500,750,750,750,500,722,722,722,722,722,722,1e3,722,667,667,667,667,389,389,389,389,722,722,778,778,778,778,778,570,778,722,722,722,722,722,611,556,500,500,500,500,500,500,722,444,444,444,444,444,278,278,278,278,500,556,500,500,500,500,500,570,500,556,556,556,556,500,556,500],r._timesRomanItalicWidth=[250,333,420,500,500,833,778,214,333,333,500,675,250,333,250,278,500,500,500,500,500,500,500,500,500,500,333,333,675,675,675,500,920,611,611,667,722,611,611,722,722,333,444,667,556,833,667,722,611,722,611,500,556,722,611,833,611,556,556,389,278,389,422,500,333,500,500,444,500,444,278,500,500,278,278,444,278,722,500,500,500,500,389,389,278,500,444,667,444,444,389,400,275,400,541,0,500,0,333,500,556,889,500,500,333,1e3,500,333,944,0,556,0,0,333,333,556,556,350,500,889,333,980,389,333,667,0,389,556,0,389,500,500,500,500,275,500,333,760,276,500,675,0,760,333,400,675,300,300,333,500,523,250,333,300,310,500,750,750,750,500,611,611,611,611,611,611,889,667,611,611,611,611,333,333,333,333,722,667,722,722,722,722,722,675,722,722,722,722,722,556,611,500,500,500,500,500,500,500,667,444,444,444,444,444,278,278,278,278,500,500,500,500,500,500,500,675,500,500,500,500,500,444,500,444],r._timesRomanBoldItalicWidths=[250,389,555,500,500,833,778,278,333,333,500,570,250,333,250,278,500,500,500,500,500,500,500,500,500,500,333,333,570,570,570,500,832,667,667,667,722,667,667,722,778,389,500,667,611,889,722,722,611,722,667,556,611,722,667,889,667,611,611,333,278,333,570,500,333,500,500,444,500,444,333,500,556,278,278,500,278,778,556,500,500,500,389,389,278,556,444,667,500,444,389,348,220,348,570,0,500,0,333,500,500,1e3,500,500,333,1e3,556,333,944,0,611,0,0,333,333,500,500,350,500,1e3,333,1e3,389,333,722,0,389,611,0,389,500,500,500,500,220,500,333,747,266,500,606,0,747,333,400,570,300,300,333,576,500,250,333,300,300,500,750,750,750,500,667,667,667,667,667,667,944,667,667,667,667,667,389,389,389,389,722,722,722,722,722,722,722,570,722,722,722,722,722,611,611,500,500,500,500,500,500,500,722,444,444,444,444,444,278,278,278,278,500,556,500,500,500,500,500,570,500,556,556,556,556,444,500,444],r._symbolWidth=[250,333,713,500,549,833,778,439,333,333,500,549,250,549,250,278,500,500,500,500,500,500,500,500,500,500,278,278,549,549,549,444,549,722,667,722,612,611,763,603,722,333,631,722,686,889,722,722,768,741,556,592,611,690,439,768,645,795,611,333,863,333,658,500,500,631,549,549,494,439,521,411,603,329,603,549,549,576,521,549,549,521,549,603,439,576,713,686,493,686,494,480,200,480,549,750,620,247,549,167,713,500,753,753,753,753,1042,987,603,987,603,400,549,411,549,549,713,494,460,549,549,549,549,1e3,603,1e3,658,823,686,795,987,768,768,823,768,768,713,713,713,713,713,713,713,768,713,790,790,890,823,549,250,713,603,603,1042,987,603,987,603,494,329,790,790,786,713,384,384,384,384,384,384,494,494,494,494,329,274,686,686,686,384,384,384,384,384,384,494,494,494,-1],r._zapfDingbatsWidth=[278,974,961,974,980,719,789,790,791,690,960,939,549,855,911,933,911,945,974,755,846,762,761,571,677,763,760,759,754,494,552,537,577,692,786,788,788,790,793,794,816,823,789,841,823,833,816,831,923,744,723,749,790,792,695,776,768,792,759,707,708,682,701,826,815,789,789,707,687,696,689,786,787,713,791,785,791,873,761,762,762,759,759,892,892,788,784,438,138,277,415,392,392,668,668,390,390,317,317,276,276,509,509,410,410,234,234,334,334,732,544,544,910,667,760,760,776,595,694,626,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,894,838,1016,458,748,924,748,918,927,928,928,834,873,828,924,924,917,930,931,463,883,836,836,867,867,696,696,874,874,760,946,771,865,771,888,967,888,831,873,927,970,918];var ee=r;function r(){}re._getHanyangSystemsGothicMedium=function(t,e){var i=new z,r=new q(1e3);return r._add(new Z(1,127,500)),r._add(new Z(8094,8190,500)),i._widthTable=r,i._ascent=880,i._descent=-120,i._size=e,i._height=i._ascent-i._descent,0!=(t&x.PdfFontStyle.bold)&&0!=(t&x.PdfFontStyle.italic)?i._postScriptName="HYGoThic-Medium,BoldItalic":0!=(t&x.PdfFontStyle.bold)?i._postScriptName="HYGoThic-Medium,Bold":0!=(t&x.PdfFontStyle.italic)?i._postScriptName="HYGoThic-Medium,Italic":i._postScriptName="HYGoThic-Medium",i},re._getHanyangSystemsShinMyeongJoMedium=function(t,e){var i=new z,r=new q(1e3);return r._add(new Z(1,95,500)),r._add(new Z(8094,8190,500)),i._widthTable=r,i._ascent=880,i._descent=-120,i._size=e,i._height=i._ascent-i._descent,0!=(t&x.PdfFontStyle.bold)&&0!=(t&x.PdfFontStyle.italic)?i._postScriptName="HYSMyeongJo-Medium,BoldItalic":0!=(t&x.PdfFontStyle.bold)?i._postScriptName="HYSMyeongJo-Medium,Bold":0!=(t&x.PdfFontStyle.italic)?i._postScriptName="HYSMyeongJo-Medium,Italic":i._postScriptName="HYSMyeongJo-Medium",i},re._getHeiseiKakuGothicW5=function(t,e){var i=new z,r=new q(1e3);return r._add(new Z(1,95,500)),r._add(new Z(231,632,500)),i._widthTable=r,i._ascent=857,i._descent=-125,i._size=e,i._height=i._ascent-i._descent,0!=(t&x.PdfFontStyle.bold)&&0!=(t&x.PdfFontStyle.italic)?i._postScriptName="HeiseiKakuGo-W5,BoldItalic":0!=(t&x.PdfFontStyle.bold)?i._postScriptName="HeiseiKakuGo-W5,Bold":0!=(t&x.PdfFontStyle.italic)?i._postScriptName="HeiseiKakuGo-W5,Italic":i._postScriptName="HeiseiKakuGo-W5",i},re._getHeiseiMinchoW3=function(t,e){var i=new z,r=new q(1e3);return r._add(new Z(1,95,500)),r._add(new Z(231,632,500)),i._widthTable=r,i._ascent=857,i._descent=-143,i._size=e,i._height=i._ascent-i._descent,0!=(t&x.PdfFontStyle.bold)&&0!=(t&x.PdfFontStyle.italic)?i._postScriptName="HeiseiMin-W3,BoldItalic":0!=(t&x.PdfFontStyle.bold)?i._postScriptName="HeiseiMin-W3,Bold":0!=(t&x.PdfFontStyle.italic)?i._postScriptName="HeiseiMin-W3,Italic":i._postScriptName="HeiseiMin-W3",i},re._getMonotypeHeiMedium=function(t,e){var i=new z,r=new q(1e3);return r._add(new Z(1,95,500)),r._add(new Z(13648,13742,500)),i._widthTable=r,i._ascent=880,i._descent=-120,i._size=e,i._height=i._ascent-i._descent,0!=(t&x.PdfFontStyle.bold)&&0!=(t&x.PdfFontStyle.italic)?i._postScriptName="MHei-Medium,BoldItalic":0!=(t&x.PdfFontStyle.bold)?i._postScriptName="MHei-Medium,Bold":0!=(t&x.PdfFontStyle.italic)?i._postScriptName="MHei-Medium,Italic":i._postScriptName="MHei-Medium",i},re._getMonotypeSungLight=function(t,e){var i=new z,r=new q(1e3);return r._add(new Z(1,95,500)),r._add(new Z(13648,13742,500)),i._widthTable=r,i._ascent=880,i._descent=-120,i._size=e,i._height=i._ascent-i._descent,0!=(t&x.PdfFontStyle.bold)&&0!=(t&x.PdfFontStyle.italic)?i._postScriptName="MSung-Light,BoldItalic":0!=(t&x.PdfFontStyle.bold)?i._postScriptName="MSung-Light,Bold":0!=(t&x.PdfFontStyle.italic)?i._postScriptName="MSung-Light,Italic":i._postScriptName="MSung-Light",i},re._getSinoTypeSongLight=function(t,e){var i=new z,r=new q(1e3);return r._add(new Z(1,95,500)),r._add(new Z(814,939,500)),r._add(new et(7712,[500])),r._add(new et(7716,[500])),i._ascent=880,i._descent=-120,i._size=e,i._height=i._ascent-i._descent,0!=(t&x.PdfFontStyle.bold)&&0!=(t&x.PdfFontStyle.italic)?i._postScriptName="STSong-Light,BoldItalic":0!=(t&x.PdfFontStyle.bold)?i._postScriptName="STSong-Light,Bold":0!=(t&x.PdfFontStyle.italic)?i._postScriptName="STSong-Light,Italic":i._postScriptName="STSong-Light",i._widthTable=r,i},re._getMetrics=function(t,e,i){var r;switch(t){case x.PdfCjkFontFamily.hanyangSystemsGothicMedium:(r=this._getHanyangSystemsGothicMedium(e,i))._name="HanyangSystemsGothicMedium";break;case x.PdfCjkFontFamily.hanyangSystemsShinMyeongJoMedium:(r=this._getHanyangSystemsShinMyeongJoMedium(e,i))._name="HanyangSystemsShinMyeongJoMedium";break;case x.PdfCjkFontFamily.heiseiKakuGothicW5:(r=this._getHeiseiKakuGothicW5(e,i))._name="HeiseiKakuGothicW5";break;case x.PdfCjkFontFamily.heiseiMinchoW3:(r=this._getHeiseiMinchoW3(e,i))._name="HeiseiMinchoW3";break;case x.PdfCjkFontFamily.monotypeHeiMedium:(r=this._getMonotypeHeiMedium(e,i))._name="MonotypeHeiMedium";break;case x.PdfCjkFontFamily.monotypeSungLight:(r=this._getMonotypeSungLight(e,i))._name="MonotypeSungLight";break;case x.PdfCjkFontFamily.sinoTypeSongLight:(r=this._getSinoTypeSongLight(e,i))._name="SinoTypeSongLight"}return r._subScriptSizeFactor=this._subSuperScriptFactor,r._superscriptSizeFactor=this._subSuperScriptFactor,r},re._subSuperScriptFactor=1.52;var ie=re;function re(){}se._fillMonotypeSungLight=function(t,e,i){this._fillFontBox(t,{x:-160,y:-249,width:1175,height:1137}),this._fillKnownInformation(t,e,i),t.set("StemV",93),t.set("StemH",93),t.set("AvgWidth",1e3),t.set("MaxWidth",1e3),t.set("CapHeight",880),t.set("XHeight",616),t.set("Leading",250)},se._fillHeiseiKakuGothicW5=function(t,e,i,r){(e&(x.PdfFontStyle.italic|x.PdfFontStyle.bold))!==x.PdfFontStyle.italic?this._fillFontBox(t,{x:-92,y:-250,width:1102,height:1172}):this._fillFontBox(t,{x:-92,y:-250,width:1102,height:1932}),this._fillKnownInformation(t,i,r),t.set("StemV",93),t.set("StemH",93),t.set("AvgWidth",689),t.set("MaxWidth",1e3),t.set("CapHeight",718),t.set("XHeight",500),t.set("Leading",250)},se._fillHanyangSystemsShinMyeongJoMedium=function(t,e,i){this._fillFontBox(t,{x:0,y:-148,width:1001,height:1028}),this._fillKnownInformation(t,e,i),t.set("StemV",93),t.set("StemH",93),t.set("AvgWidth",1e3),t.set("MaxWidth",1e3),t.set("CapHeight",880),t.set("XHeight",616),t.set("Leading",250)},se._fillHeiseiMinchoW3=function(t,e,i){this._fillFontBox(t,{x:-123,y:-257,width:1124,height:1167}),this._fillKnownInformation(t,e,i),t.set("StemV",93),t.set("StemH",93),t.set("AvgWidth",702),t.set("MaxWidth",1e3),t.set("CapHeight",718),t.set("XHeight",500),t.set("Leading",250)},se._fillSinoTypeSongLight=function(t,e,i){this._fillFontBox(t,{x:-25,y:-254,width:1025,height:1134}),this._fillKnownInformation(t,e,i),t.set("StemV",93),t.set("StemH",93),t.set("AvgWidth",1e3),t.set("MaxWidth",1e3),t.set("CapHeight",880),t.set("XHeight",616),t.set("Leading",250)},se._fillMonotypeHeiMedium=function(t,e,i){this._fillFontBox(t,{x:-45,y:-250,width:1060,height:1137}),this._fillKnownInformation(t,e,i),t.set("StemV",93),t.set("StemH",93),t.set("AvgWidth",1e3),t.set("MaxWidth",1e3),t.set("CapHeight",880),t.set("XHeight",616),t.set("Leading",250)},se._fillHanyangSystemsGothicMedium=function(t,e,i){this._fillFontBox(t,{x:-6,y:-145,width:1009,height:1025}),this._fillKnownInformation(t,e,i),t.set("Flags",4),t.set("StemV",93),t.set("StemH",93),t.set("AvgWidth",1e3),t.set("MaxWidth",1e3),t.set("CapHeight",880),t.set("XHeight",616),t.set("Leading",250)},se._fillFontBox=function(t,e){t.set("FontBBox",As(e))},se._fillKnownInformation=function(t,e,i){switch(t.set("FontName",L.get(i._postScriptName)),t.set("Type",L.get("FontDescriptor")),t.set("ItalicAngle",0),t.set("MissingWidth",i._widthTable._defaultWidth),t.set("Ascent",i._ascent),t.set("Descent",i._descent),e){case x.PdfCjkFontFamily.monotypeHeiMedium:case x.PdfCjkFontFamily.hanyangSystemsGothicMedium:case x.PdfCjkFontFamily.heiseiKakuGothicW5:t.set("Flags",4);break;case x.PdfCjkFontFamily.sinoTypeSongLight:case x.PdfCjkFontFamily.monotypeSungLight:case x.PdfCjkFontFamily.hanyangSystemsShinMyeongJoMedium:case x.PdfCjkFontFamily.heiseiMinchoW3:t.set("Flags",6)}},se._getFontDescriptor=function(t,e,i){var r=new D;switch(r._updated=!0,t){case x.PdfCjkFontFamily.hanyangSystemsGothicMedium:this._fillHanyangSystemsGothicMedium(r,t,i);break;case x.PdfCjkFontFamily.hanyangSystemsShinMyeongJoMedium:this._fillHanyangSystemsShinMyeongJoMedium(r,t,i);break;case x.PdfCjkFontFamily.heiseiKakuGothicW5:this._fillHeiseiKakuGothicW5(r,e,t,i);break;case x.PdfCjkFontFamily.heiseiMinchoW3:this._fillHeiseiMinchoW3(r,t,i);break;case x.PdfCjkFontFamily.monotypeHeiMedium:this._fillMonotypeHeiMedium(r,t,i);break;case x.PdfCjkFontFamily.monotypeSungLight:this._fillMonotypeSungLight(r,t,i);break;case x.PdfCjkFontFamily.sinoTypeSongLight:this._fillSinoTypeSongLight(r,t,i)}return r};var ne=se;function se(){}(e=x.PdfFontStyle||(x.PdfFontStyle={}))[e.regular=0]="regular",e[e.bold=1]="bold",e[e.italic=2]="italic",e[e.underline=4]="underline",e[e.strikeout=8]="strikeout",(e=x.PdfFontFamily||(x.PdfFontFamily={}))[e.helvetica=0]="helvetica",e[e.courier=1]="courier",e[e.timesRoman=2]="timesRoman",e[e.symbol=3]="symbol",e[e.zapfDingbats=4]="zapfDingbats",(e=x.PdfCjkFontFamily||(x.PdfCjkFontFamily={}))[e.heiseiKakuGothicW5=0]="heiseiKakuGothicW5",e[e.heiseiMinchoW3=1]="heiseiMinchoW3",e[e.hanyangSystemsGothicMedium=2]="hanyangSystemsGothicMedium",e[e.hanyangSystemsShinMyeongJoMedium=3]="hanyangSystemsShinMyeongJoMedium",e[e.monotypeHeiMedium=4]="monotypeHeiMedium",e[e.monotypeSungLight=5]="monotypeSungLight",e[e.sinoTypeSongLight=6]="sinoTypeSongLight";var ae=function(){this._result=!1,this._glyphIndex=[]},C=(Object.defineProperty(oe.prototype,"lastPoint",{get:function(){var t=[0,0],e=this._points.length;return 0<this._points.length&&(t[0]=this._points[e-1][0],t[1]=this._points[e-1][1]),t},enumerable:!0,configurable:!0}),Object.defineProperty(oe.prototype,"pathPoints",{get:function(){return this._points},enumerable:!0,configurable:!0}),Object.defineProperty(oe.prototype,"pathTypes",{get:function(){return this._pathTypes},enumerable:!0,configurable:!0}),Object.defineProperty(oe.prototype,"fillMode",{get:function(){return this._fillMode},set:function(t){this._fillMode=t},enumerable:!0,configurable:!0}),oe.prototype.addPath=function(t,e){t instanceof oe?this._addPath(t._points,t._pathTypes):Array.isArray(t)&&Array.isArray(e)&&this._addPath(t,e)},oe.prototype._addPath=function(t,e){if(!t||0===t.length)throw new Error("Path points cannot be null or undefined.");if(!e||0===e.length)throw new Error("Path types cannot be null or undefined.");if(t.length!==e.length)throw new Error("The argument arrays should be of equal length.");for(var i=0;i<t.length;i++){if(i>=t.length||i<0)throw new Error("Index"+i+"is out of bounds.");this._points.push(t[Number.parseInt(i.toString(),10)].slice()),this._pathTypes.push(e[Number.parseInt(i.toString(),10)])}},oe.prototype.addLine=function(t,e,i,r){this._addPoints([t,e,i,r],x.PathPointType.line)},oe.prototype._addLines=function(t){var e=t[0];if(1===t.length)this._addPoint(t[0],x.PathPointType.line);else for(var i=1;i<t.length;i++){var r=t[Number.parseInt(i.toString(),10)];this.addLine(e[0],e[1],r[0],r[1]),e=r}},oe.prototype._addPoints=function(t,e,i,r){for(var n=void 0!==i?i:0,s=void 0!==r?r:t.length,a=n;a<s;a+=2){var o=[t[Number.parseInt(a.toString(),10)],t[a+1]];a===n?0===this._points.length||this._isStart?(this._addPoint(o,x.PathPointType.start),this._isStart=!1):(this._isRoundedRectangle&&(o[0]!==this.lastPoint[0]||o[1]!==this.lastPoint[1])||o[0]!==this.lastPoint[0]&&o[1]!==this.lastPoint[1])&&this._addPoint(o,x.PathPointType.line):this._addPoint(o,e)}},oe.prototype._addPoint=function(t,e){this._points.push(t),this._pathTypes.push(e)},oe.prototype.addArc=function(t,e,i,r,n,s){for(var a=Vs(t,e,t+i,e+r,n,s),o=0;o<a.length;++o){var h=[a[Number.parseInt(o.toString(),10)],a[++o],a[++o],a[++o],a[++o],a[++o],a[++o],a[++o]];this._addPoints(h,x.PathPointType.bezier)}},oe.prototype.addRectangle=function(t,e,i,r){this.startFigure(),this._addPoints([t,e,t+i,e,t+i,e+r,t,e+r],x.PathPointType.line),this.closeFigure()},oe.prototype.addPolygon=function(t){var e=[];t.forEach(function(t){e.push(t[0],t[1])}),this.startFigure(),this._addPoints(e,x.PathPointType.line),this.closeFigure()},oe.prototype.addEllipse=function(t,e,i,r){this.startFigure(),this.addArc(t,e,i,r,0,360),this.closeFigure()},oe.prototype.addBezier=function(t,e,i,r,n,s,a,o){this._addPoints([t,e,i,r,n,s,a,o],x.PathPointType.bezier)},oe.prototype._addBezierPoints=function(t){if(t.length<4)throw Error("Incorrect size of array points");var e=0,i=t[Number.parseInt(e.toString(),10)];for(e++;e+3<=t.length;){var r=t[Number.parseInt(e.toString(),10)],n=(e++,t[Number.parseInt(e.toString(),10)]),s=(e++,t[Number.parseInt(e.toString(),10)]);e++,this.addBezier(i[0],i[1],r[0],r[1],n[0],n[1],s[0],s[1]),i=s}},oe.prototype.addPie=function(t,e,i,r,n,s){this.startFigure(),this.addArc(t,e,i,r,n,s),this._addPoint([t+i/2,e+r/2],x.PathPointType.line),this.closeFigure()},oe.prototype.startFigure=function(){this._isStart=!0},oe.prototype.closeFigure=function(t){var e;void 0!==t?(e=this._pathTypes[Number.parseInt(t.toString(),10)],e|=x.PathPointType.closePath,this._pathTypes[Number.parseInt(t.toString(),10)]=e):(0<this._points.length&&this.closeFigure(this._points.length-1),this.startFigure())},oe.prototype.closeAllFigures=function(){for(var t=0;t<this._points.length;++t){var e=this._pathTypes[Number.parseInt(t.toString(),10)],i=!1;0!==t&&e===x.PathPointType.start?(this.closeFigure(t-1),i=!0):t===this._pathTypes.length-1&&!i&&this._isXps&&this._points[0][0]===this._points[Number.parseInt(t.toString(),10)][0]&&this._points[0][1]===this._points[Number.parseInt(t.toString(),10)][1]&&this.closeFigure(t)}},oe.prototype._getBounds=function(){var t=[0,0,0,0];if(0<this._points.length){for(var e=this._points[0][0],i=this._points[0][0],r=this._points[0][1],n=this._points[0][1],s=1;s<this._points.length;++s)var a=this._points[Number.parseInt(s.toString(),10)],e=Math.min(a[0],e),i=Math.max(a[0],i),r=Math.min(a[1],r),n=Math.max(a[1],n);t=[e,r,i-e,n-r]}return t},oe);function oe(t,e){if(this._points=[],this._pathTypes=[],this._isRoundedRectangle=!1,this._fillMode=x.PdfFillMode.winding,this._isStart=!0,this._isXps=!1,this._brush=void 0,this._pen=void 0,t&&e){if(!Array.isArray(t)||!Array.isArray(e))throw new Error("Invalid constructor arguments.");this._points=t,this._pathTypes=e}else this._points=[],this._pathTypes=[]}Object.defineProperty(ce.prototype,"width",{get:function(){return this._imageWidth},set:function(t){this._imageWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(ce.prototype,"height",{get:function(){return this._imageHeight},set:function(t){this._imageHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(ce.prototype,"physicalDimension",{get:function(){return this._imagePhysicalDimension=this._getPointSize(this.width,this.height,this._horizontalResolution),[this.width,this.height]},enumerable:!0,configurable:!0}),ce.prototype.draw=function(t,e,i){null==e&&null==i&&(i=e=0);var r=0!==e||0!==i,n=null;r&&(n=t.save(),t.translateTransform(e,i)),t.drawImage(this,0,0),r&&t.restore(n)},ce.prototype._getPointSize=function(t,e,i){var r;return null==i?this._getPointSize(t,e,96):(i=new ye,r=new ye,[i._convertUnits(t,x._PdfGraphicsUnit.pixel,x._PdfGraphicsUnit.point),r._convertUnits(e,x._PdfGraphicsUnit.pixel,x._PdfGraphicsUnit.point)])};var he=ce;function ce(){}Object.defineProperty(n.prototype,"clientSize",{get:function(){return[this._clipBounds[2],this._clipBounds[3]]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"_matrix",{get:function(){return void 0===this._m&&(this._m=new de),this._m},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"_resources",{get:function(){var t,i=this;return void 0===this._resourceMap&&(this._resourceMap=new Map,this._resourceObject&&this._resourceObject.has("Font")&&(t=this._resourceObject.get("Font"))&&0<t.size&&t.forEach(function(t,e){null!=e&&e instanceof A&&i._resourceMap.set(e,L.get(t))}),this._resourceObject.has("XObject")&&(t=this._resourceObject.get("XObject"))&&0<t.size&&t.forEach(function(t,e){null!=e&&e instanceof A&&i._resourceMap.set(e,L.get(t))}),this._resourceObject.has("ExtGState"))&&(t=this._resourceObject.get("ExtGState"))&&0<t.size&&(this._transparencies||(this._transparencies=new Map),t.forEach(function(t,e){null!=e&&e instanceof A&&i._setTransparencyData(e,L.get(t))})),this._resourceMap},enumerable:!0,configurable:!0}),n.prototype.save=function(){var t=new fe(this,this._matrix);return t._textRenderingMode=this._textRenderingMode,t._charSpacing=this._characterSpacing,t._textScaling=this._textScaling,t._wordSpacing=this._wordSpacing,t._currentBrush=this._currentBrush,t._currentPen=this._currentPen,t._currentFont=this._currentFont,this._graphicsState.push(t),this._sw._saveGraphicsState(),t},n.prototype.restore=function(t){if(0<this._graphicsState.length)if(void 0===t)this._doRestore();else if(0<this._graphicsState.length&&-1!==this._graphicsState.indexOf(t))for(;0<this._graphicsState.length&&this._doRestore()!==t;);},n.prototype._doRestore=function(){var t=this._graphicsState.pop();return this._m=t._transformationMatrix,this._currentBrush=t._currentBrush,this._currentPen=t._currentPen,this._currentFont=t._currentFont,this._characterSpacing=t._charSpacing,this._wordSpacing=t._wordSpacing,this._textScaling=t._textScaling,this._textRenderingMode=t._textRenderingMode,this._sw._restoreGraphicsState(),t},n.prototype.drawRectangle=function(t,e,i,r,n,s){this._beginMarkContent();n=this._setPenBrush(n,s);this._sw._appendRectangle(t,e,i,r),this._drawGraphicsPath(n.pen,n.brush),this._endMarkContent()},n.prototype.drawBezier=function(t,e,i,r,n,s,a,o,h){this._beginMarkContent(),this._stateControl(h,null,null),this._sw._beginPath(t,e),this._sw._appendBezierSegment(i,r,n,s,a,o),this._drawGraphicsPath(h),this._endMarkContent()},n.prototype.drawPie=function(t,e,i,r,n,s,a,o){this._beginMarkContent();a=this._setPenBrush(a,o);this._constructPiePath(t,e,t+i,e+r,n,s),this._sw._appendLineSegment(t+i/2,e+r/2),this._drawGraphicsPath(a.pen,a.brush,null,!0),this._endMarkContent()},n.prototype.drawPolygon=function(t,e,i){if(this._beginMarkContent(),0<t.length){e=this._setPenBrush(e,i);this._sw._beginPath(t[0][0],t[0][1]);for(var r=1;r<t.length;r++)this._sw._appendLineSegment(t[Number.parseInt(r.toString(),10)][0],t[Number.parseInt(r.toString(),10)][1]);this._drawGraphicsPath(e.pen,e.brush,x.PdfFillMode.winding,!0)}this._endMarkContent()},n.prototype.drawEllipse=function(t,e,i,r,n,s){this._beginMarkContent();n=this._setPenBrush(n,s);this._constructArcPath(t,e,t+i,e+r,0,360),this._drawGraphicsPath(n.pen,n.brush,x.PdfFillMode.winding,!0),this._endMarkContent()},n.prototype.drawArc=function(t,e,i,r,n,s,a){0!==s&&(this._beginMarkContent(),this._stateControl(a),this._constructArcPath(t,e,t+i,e+r,n,s),this._drawGraphicsPath(a,null,x.PdfFillMode.winding,!1),this._endMarkContent())},n.prototype._beginMarkContent=function(){this._layer&&this._layer._beginLayer(this)},n.prototype._endMarkContent=function(){if(this._layer){if(this._layer._isEndState&&0!==this._layer._parentLayer.length)for(var t=0;t<this._layer._parentLayer.length;t++)this._sw._write("EMC");this._layer._isEndState&&this._sw._write("EMC")}},n.prototype.drawImage=function(t,e,i,r,n){var s;this._beginMarkContent(),"number"==typeof e&&"number"==typeof i&&void 0===r?(s=t.physicalDimension,this.drawImage(t,e,i,s[0],s[1])):(t._save(),s=new de,this._getTranslateTransform(e,i+n,s),this._getScaleTransform(r,n,s),this._sw._write("q"),e=void this._sw._modifyCtm(s),r=!(i=void 0),(r=this._resourceObject.has("XObject")&&(e=(n=this._resourceObject.getRaw("XObject"))instanceof D?n:e)?!1:r)&&(e=new D(this._crossReference),this._resourceObject.update("XObject",e)),void 0===i&&(i=L.get(Es())),this._crossReference?(this._updateImageResource(t,i,e,this._crossReference),this._source.update("Resources",this._resourceObject),this._source._updated=!0):this._pendingResource.push({resource:t,key:i,source:e}),this._sw._executeObject(i),this._sw._write("Q"),this._sw._write("\r\n"),Ms("ImageB",this._resourceObject),Ms("ImageC",this._resourceObject),Ms("ImageI",this._resourceObject),Ms("Text",this._resourceObject)),this._endMarkContent()},n.prototype.drawTemplate=function(r,t){var e,i,n,s,a,o,h,c,_,d,p,l,u,f,g=this;this._beginMarkContent(),void 0!==r&&((r._isExported||r._isResourceExport)&&(this._crossReference?(r._crossReference=this._crossReference,r._importStream(!0,r._isResourceExport)):(r._importStream(!1,r._isResourceExport),this._pendingResource.push(r))),e=r&&0<r._size[0]?t.width/r._size[0]:1,i=r&&0<r._size[1]?t.height/r._size[1]:1,n=!(Math.trunc(1e3*e)/1e3==1&&Math.trunc(1e3*i)/1e3==1),o=c=void 0,this._page&&(c=this._page.cropBox,o=this._page.mediaBox,this._page._pageDictionary.has("CropBox"))&&this._page._pageDictionary.has("MediaBox")&&0<c[0]&&0<c[1]&&o[0]<0&&o[1]<0&&(this.translateTransform(c[0],-c[1]),t.x=-c[0],t.y=c[1]),s=this.save(),a=new de,this._page?(c=this._page._pageDictionary.has("CropBox")&&this._page._pageDictionary.has("MediaBox")&&c&&o&&c[0]===o[0]&&c[1]===o[1]&&c[2]===o[2]&&c[3]===o[3]||this._page._pageDictionary.has("MediaBox")&&o&&0===o[3],a._translate(t.x,-(t.y+(0<=this._page._origin[0]||c?t.height:0)))):a._translate(t.x,-(t.y+t.height)),o=!1,r._content&&r._content.dictionary&&(c=r._content.dictionary).has("Matrix")&&c.has("BBox")&&(h=c.getArray("Matrix"),c=c.getArray("BBox"),h)&&c&&5<h.length&&3<c.length&&(d=Number.parseFloat(hs(-h[1])),f=Number.parseFloat(hs(h[2])),_=Number.parseFloat(hs(e)),l=Number.parseFloat(hs(i)),_===d&&l===f&&c[2]===r._size[0]&&c[3]===r._size[1]&&r._isAnnotationTemplate&&r._needScale&&n?((a=new de)._translate(t.x-h[4],-(t.y+h[5])),a._scale(1,1),o=!0):0!==c[0]&&0!==c[1]&&c[0]===t.x&&this._page&&r._isSignature&&(a._translate(t.x-c[0],-this._page.size[1]),a._scale(e,i),o=!0)),n&&!o&&a._scale(e,i),_=void this._sw._modifyCtm(a),l=!(d=!1),this._resourceObject.has("XObject")&&((f=this._resourceObject.getRaw("XObject"))&&(f instanceof A?(d=!0,_=this._crossReference._fetch(f)):f instanceof D&&(_=f)),_)&&(l=!1,this._resources.forEach(function(t,e){var i;e&&e instanceof A&&(i=g._crossReference._fetch(e))&&r&&i===r._content&&(p=t,u=e)})),l&&(_=new D(this._crossReference),this._resourceObject.update("XObject",_)),void 0===p&&(p=L.get(Es()),r&&r._content.reference?u=r._content.reference:this._crossReference?u=this._crossReference._getNextReference():this._pendingResource.push({resource:r._content,key:p,source:_}),u&&this._crossReference&&(!this._crossReference._cacheMap.has(u)&&r&&r._content&&this._crossReference._cacheMap.set(u,r._content),_.update(p.name,u),this._resources.set(u,p)),this._resourceObject._updated=!0),d&&(this._resourceObject._updated=!0),this._hasResourceReference&&(this._source._updated=!0),this._sw._executeObject(p),this.restore(s),Ms("ImageB",this._resourceObject),Ms("ImageC",this._resourceObject),Ms("ImageI",this._resourceObject),Ms("Text",this._resourceObject)),this._endMarkContent()},n.prototype._processResources=function(t){if(this._crossReference=t,0<this._pendingResource.length){for(var e=0;e<this._pendingResource.length;e++){var i,r=this._pendingResource[Number.parseInt(e.toString(),10)];r instanceof N?(r._crossReference=t,r._updatePendingResource(t)):r.resource instanceof y?(i=void 0,r.resource._reference?i=r.resource._reference:(i=t._getNextReference(),r.resource._reference=i),!t._cacheMap.has(i)&&r.resource&&t._cacheMap.set(i,r.resource),r.source.update(r.key.name,i),this._resources.set(i,r.key)):r.resource instanceof he?this._updateImageResource(r.resource,r.key,r.source,t):r.resource instanceof Gt&&this._updateFontResource(r.resource,r.key,r.source,t),this._source.update("Resources",this._resourceObject),this._source._updated=!0}this._pendingResource=[]}},n.prototype._updateImageResource=function(t,e,i,r){var n,s;t._reference?n=t._reference:(n=r._getNextReference(),t._reference=n),r._cacheMap.has(n)||t&&t._imageStream&&t._imageStream.dictionary&&(r._cacheMap.set(n,t._imageStream),t._imageStream.dictionary._updated=!0,t._maskStream)&&t._maskStream.dictionary&&(s=void 0,t._maskReference?s=t._maskReference:(s=r._getNextReference(),t._maskReference=s),r._cacheMap.set(s,t._maskStream),t._maskStream.dictionary._updated=!0,t._imageStream.dictionary.set("SMask",s)),i.update(e.name,n),this._resources.set(n,e),this._resourceObject._updated=!0},n.prototype._updateFontResource=function(t,e,i,r){var n;t._reference?n=t._reference:(n=r._getNextReference(),t._reference=n),r._cacheMap.has(n)||(t._dictionary?(r._cacheMap.set(n,t._dictionary),i.update(e.name,n),this._resources.set(n,e)):t instanceof $t&&((t=t._fontInternal)&&t._fontDictionary&&r._cacheMap.set(n,t._fontDictionary),i.update(e.name,n),this._resources.set(n,e)))},n.prototype.drawPath=function(t,e,i){this._beginMarkContent();e=this._setPenBrush(e,i);(e.pen||e.brush)&&(this._buildUpPath(t._points,t._pathTypes),this._drawGraphicsPath(e.pen,e.brush,t.fillMode,!1)),this._endMarkContent()},n.prototype.drawRoundedRectangle=function(t,e,i,r,n,s,a){if(null===s)throw new Error("pen");if(null===a)throw new Error("brush");t=[t,e,i,r],e=2*n,i=[e,e],r=[t[0],t[1],i[0],i[1]],i=new C;0===n?i.addRectangle(t[0],t[1],t[2],t[3]):(i._isRoundedRectangle=!0,i.addArc(r[0],r[1],r[2],r[3],180,90),r[0]=t[0]+t[2]-e,i.addArc(r[0],r[1],r[2],r[3],270,90),r[1]=t[1]+t[3]-e,i.addArc(r[0],r[1],r[2],r[3],0,90),r[0]=t[0],i.addArc(r[0],r[1],r[2],r[3],90,90),i.closeFigure()),this.drawPath(i,s,a)},n.prototype._constructArcPath=function(t,e,i,r,n,s){var a=Vs(t,e,i,r,n,s);if(8!==a.length){var o=[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7]];this._sw._beginPath(o[0],o[1]);for(var h=0;h<a.length;h+=8)o=[a[Number.parseInt(h.toString(),10)],a[h+1],a[h+2],a[h+3],a[h+4],a[h+5],a[h+6],a[h+7]],this._sw._appendBezierSegment(o[2],o[3],o[4],o[5],o[6],o[7])}},n.prototype._constructPiePath=function(t,e,i,r,n,s){var a=Vs(t,e,i,r,n,s);if(8===a.length){var o=[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7]];this._sw._beginPath(o[0],o[1]);for(var h=0;h<a.length;h+=8)o=[a[Number.parseInt(h.toString(),10)],a[h+1],a[h+2],a[h+3],a[h+4],a[h+5],a[h+6],a[h+7]],this._sw._appendBezierSegment(o[2],o[3],o[4],o[5],o[6],o[7])}},n.prototype._writePen=function(t){for(var e=t._width,i=t._dashPattern,r=[],n=0;n<i.length;++n)r[n]=i[n]*t._width;this._sw._setLineDashPattern(r,t._dashOffset*e),this._sw._setLineWidth(t._width),this._sw._setLineJoin(t._lineJoin),this._sw._setLineCap(t._lineCap),0<t._miterLimit&&this._sw._setMiterLimit(t._miterLimit),this._sw._setColor(t._color,!0)},n.prototype.drawString=function(t,e,i,r,n,s){this._beginMarkContent();var a=new rt,a=(s=s||new k,a._layout(t,e,s,[i[2],i[3]]));a._empty||(t=this._checkCorrectLayoutRectangle(a._actualSize,i[0],i[1],s),i[2]<=0&&(i[0]=t[0],i[2]=t[2]),i[3]<=0&&(i[1]=t[1],i[3]=t[3]),this._drawStringLayoutResult(a,e,r,n,i,s)),Ms("Text",this._resourceObject),this._endMarkContent()},n.prototype._buildUpPath=function(t,e){for(var i=0;i<t.length;i++){var r=t[Number.parseInt(i.toString(),10)];switch(15&e[Number.parseInt(i.toString(),10)]){case x.PathPointType.start:this._sw._beginPath(r[0],r[1]);break;case x.PathPointType.bezier:var n=this._getBezierPoint(t,e,i),i=n.index,s=n.point,n=(i=(n=this._getBezierPoint(t,e,i)).index,n.point);this._sw._appendBezierSegment(r[0],r[1],s[0],s[1],n[0],n[1]);break;case x.PathPointType.line:this._sw._appendLineSegment(r[0],r[1]);break;default:throw new Error("Incorrect path formation.")}(e[Number.parseInt(i.toString(),10)]&x.PathPointType.closePath)===x.PathPointType.closePath&&this._sw._closePath()}},n.prototype._getBezierPoint=function(t,e,i){if(e[Number.parseInt(i.toString(),10)]!==x.PathPointType.bezier)throw new Error("Malforming path.");return{index:++i,point:t[Number.parseInt(i.toString(),10)]}},n.prototype._initialize=function(){this._mediaBoxUpperRightBound=0,this._characterSpacing=-1,this._wordSpacing=-1,this._textScaling=-100,this._textRenderingMode=-1,this._graphicsState=[],this._clipBounds=[0,0,this._size[0],this._size[1]],this._colorSpaceInitialized=!1,this._startCutIndex=-1},n.prototype._initializeCurrentColorSpace=function(){this._colorSpaceInitialized||(this._sw._setColorSpace("DeviceRGB",!0),this._sw._setColorSpace("DeviceRGB",!1),this._colorSpaceInitialized=!0)},n.prototype._brushControl=function(t){this._sw._setColor(t._color,!1),this._currentBrush=t},n.prototype._penControl=function(t){this._currentPen=t,this._writePen(t),this._currentPen=t},n.prototype._fontControl=function(r,t){var e,n,i,s,a=this,t=r._metrics._getSize(t),o=(this._currentFont=r,!1),h=!0,c=!1;this._resourceObject.has("Font")&&(null!=(i=this._resourceObject.getRaw("Font"))&&(i instanceof A?(o=!0,e=this._crossReference._fetch(i)):i instanceof D&&(e=i)),null!=e)&&(h=!1,this._resources.forEach(function(t,e){var i;a._crossReference?null!=e&&(i=a._crossReference._fetch(e))&&(r instanceof m&&i===r._dictionary||r instanceof $t&&i===r._fontInternal._fontDictionary)&&(s=t,n=e,c=!0):r._reference&&r._reference===e&&(s=t,n=e,c=!0)})),h&&(e=new D(this._crossReference),this._resourceObject.update("Font",e)),void 0===s&&(s=L.get(Es()),n||(r._reference?(n=r._reference,e.update(s.name,n)):this._crossReference?n=this._crossReference._getNextReference():this._pendingResource.push({resource:r,key:s,source:e})),n&&this._crossReference&&(r._reference||(r._reference=n),r._dictionary?(this._crossReference._cacheMap.set(n,r._dictionary),e.update(s.name,n)):r instanceof $t&&((i=r._fontInternal)&&i._fontDictionary&&this._crossReference._cacheMap.set(n,i._fontDictionary),e.update(s.name,n))),c||this._resources.set(n,s)),o&&(this._resourceObject._updated=!0),this._hasResourceReference&&(this._source._updated=!0),this._sw._setFont(s.name,t)},n.prototype._setPenBrush=function(t,e){var i,r;return t&&(t instanceof T?i=t:r=t),e&&e instanceof I&&(r=e),this._stateControl(i,r,null),{pen:i,brush:r}},n.prototype._stateControl=function(t,e,i,r){(t||e)&&this._initializeCurrentColorSpace(),t&&this._penControl(t),e&&this._brushControl(e),i&&this._fontControl(i,r)},n.prototype._drawStringLayoutResult=function(t,e,i,r,n,s){var a,o,h,c,_;t._empty||(a=s&&void 0!==s.lineLimit&&!s.lineLimit,h=void 0===s||s&&void 0!==s.noClip&&!s.noClip,o=void 0,(a=a&&h)&&(o=this.save(),h=[n[0],n[1],t._actualSize[0],t._actualSize[1]],0<n[2]&&(h[2]=n[2]),s.lineAlignment===x.PdfVerticalAlignment.middle?h[1]+=(n[3]-h[3])/2:s.lineAlignment===x.PdfVerticalAlignment.bottom&&(h[1]+=n[3]-h[3]),this.setClip(h)),e&&e instanceof $t&&e._fontInternal&&e._fontInternal instanceof Lt&&e.isItalic&&(e._fontInternal._ttfMetrics._isItalic||(o=this.save(),this._isItalic=!0)),this._applyStringSettings(e,i,r,s),(h=null!=s?s.horizontalScalingFactor:100)!==this._textScaling&&(this._sw._setTextScaling(h),this._textScaling=h),i=this._getTextVerticalAlignShift(t._actualSize[1],n[3],s),h=null==s||0===s.lineSpacing?e._metrics._getHeight(s):s.lineSpacing+e._metrics._getHeight(s),c=0,c=null!=s&&s.subSuperScript===x.PdfSubSuperScript.subScript?h-(e.height+e._metrics._getDescent(s)):h-e._metrics._getAscent(s),s&&s.lineAlignment===x.PdfVerticalAlignment.bottom&&n[3]-t._actualSize[1]!=0&&n[3]-t._actualSize[1]<e._metrics._size/2-1&&Number.parseFloat(hs(n[3]))<=Number.parseFloat(hs(e._metrics._getHeight(s)))&&(c=-(h/e._metrics._size)),_=new de,this._isItalic?(this.translateTransform(n[0]+e.size/5,n[1]-c+i),this._skewTransform(0,-11)):(_._translate(n[0],-(n[1]+e._metrics._getHeight(s))-(0<e._metrics._getDescent(s)?-e._metrics._getDescent(s):e._metrics._getDescent(s))-i),this._sw._modifyTM(_)),0!==(i=n[3]<e._metrics._size&&t._actualSize[1]-n[3]<e._metrics._size/2-1?0:i)&&null!==s&&s.lineAlignment===x.PdfVerticalAlignment.bottom&&n[3]-t._actualSize[1]!=0&&n[3]-t._actualSize[1]>e._metrics._size/2-1&&(i-=(c-(h-e._metrics._size))/2),this._isItalic&&(this._sw._startNextLine(0,0),this._sw._setLeading(+h)),this._drawLayoutResult(t,e,s,n),0!==i&&this._sw._startNextLine(0,-(i-t._lineHeight)),Ms("Text",this._resourceObject),this._sw._endText(),this._isItalic&&this.restore(o),this._underlineStrikeoutText(r,t,e,n,s),a&&this.restore(o))},n.prototype._getNextPage=function(){var t=this._crossReference._document.pageCount,t=this._page._pageIndex<=t-2?this._crossReference._document.getPage(this._page._pageIndex+1):this._crossReference._document.addPage();return t},n.prototype._applyStringSettings=function(t,e,i,r){var n=x._TextRenderingMode.fill,s=!1,a=(e&&i?n=x._TextRenderingMode.fillStroke:e?n=x._TextRenderingMode.stroke:i&&(n=x._TextRenderingMode.fill),t&&t instanceof $t&&(t.isUnicode||0!=(t._style&x.PdfFontStyle.bold))&&(o=!1,(a=t._fontInternal._metrics._postScriptName)&&a.toLocaleLowerCase().includes("bold")&&(o=!0),t._fontInternal)&&t._fontInternal._metrics&&t._fontInternal._metrics._isBold!==t.isBold&&!0===t.isBold&&!o&&(!e&&i&&(e=new T(i._color,1)),n=x._TextRenderingMode.fillStroke,s=!0),r&&r.clipPath&&(n|=x._TextRenderingMode.clipFlag),this._sw._beginText(),this._stateControl(e,i,t,r),n!==this._textRenderingMode&&(this._sw._setTextRenderingMode(n),this._textRenderingMode=n),null!=r?r.characterSpacing:0),o=(a!==this._characterSpacing&&(this._sw._setCharacterSpacing(a),this._characterSpacing=a),null!=r?r.wordSpacing:0);o!==this._wordSpacing&&(this._sw._setWordSpacing(o),this._wordSpacing=o),t&&s&&this._sw._setLineWidth(t.size/30)},n.prototype._drawLayoutResult=function(t,e,i,r){for(var n=null==i||0===i.lineSpacing?e._metrics._getHeight(i):i.lineSpacing+e._metrics._getHeight(i),s=t._lines,a=null!==e&&e.isUnicode,o=0,h=s.length;o<h&&o!==this._startCutIndex;o++){var c=s[Number.parseInt(o.toString(),10)],_=c._width,_=this._getHorizontalAlignShift(_,r[2],i)+this._getLineIndent(c,i,r[2],0===o);0!==_&&this._sw._startNextLine(_,0),a?this._drawUnicodeLine(c,r[2],e,i):this._drawAsciiLine(c,r[2],i,e),o+1!==h&&(_=this._getTextVerticalAlignShift(t._actualSize[1],r[3],i),c=new de,_=-(r[1]+e._metrics._getHeight(i))-e._metrics._getDescent(i)-_-n*(o+1),c._translate(r[0],_),this._sw._modifyTM(c))}},n.prototype._drawUnicodeLine=function(t,e,i,r){var n,s,a=t._text,o=null!=r&&r.rightToLeft,h=null!=r&&0<r.wordSpacing,t=this._justifyLine(t,e,r,i),e=new Ut;o||null!=r&&r.textDirection!==x.PdfTextDirection.none?(n=[],o=null!=r&&r.alignment===x.PdfTextAlignment.right,s=[],1<(n=null!=r&&r.textDirection!==x.PdfTextDirection.none?e._layout(a,i,r.textDirection===x.PdfTextDirection.rightToLeft,h,r):e._layout(a,i,o,h,r)).length?null!=r&&r.textDirection!==x.PdfTextDirection.none&&(s=e._splitLayout(a,i,r.textDirection===x.PdfTextDirection.rightToLeft,h,r)):s=[a],this._drawUnicodeBlocks(n,s,i,r,t)):h?(n=(o=this._breakUnicodeLine(a,i,null)).tokens,s=o.words,this._drawUnicodeBlocks(n,s,i,r,t)):(e=this._convertToUnicode(a,i),this._sw._showNextLineText(e,!0))},n.prototype._drawUnicodeBlocks=function(t,e,i,r,n){if(null!=t&&0<t.length&&null!=e&&0<e.length&&null!=i){this._sw._startNextLine();var s=0,a=0,o=0,h=0;try{null!=r&&(o=r.firstLineIndent,h=r.paragraphIndent,r.firstLineIndent=0,r.paragraphIndent=0);var c=i._getCharacterWidth(ht._whiteSpace,r)+n,_=null!==r?r.characterSpacing:0;c+=_+(null!=r&&0===n?r.wordSpacing:0);for(var d=0;d<t.length;d++){var p=t[d],l=e[d],u=0;0!==s&&this._sw._startNextLine(s,0),0<l.length&&(u=u+i.measureString(l,r)[0]+_,this._sw._showText(p)),d!==t.length-1&&(a+=s=u+c)}0<a&&this._sw._startNextLine(-a,0)}finally{null!=r&&(r.firstLineIndent=o,r.paragraphIndent=h)}}},n.prototype._breakUnicodeLine=function(t,e,i){var r=[];if(null!=t&&0<t.length){i=t.split(null);for(var n=0;n<i.length;n++){var s=i[n],s=this._convertToUnicode(s,e);r[Number.parseInt(n.toString(),10)]=s}}return{tokens:r,words:i}},n.prototype._convertToUnicode=function(t,e){var i,r=null;return null!=t&&null!=e&&e._fontInternal instanceof Lt&&(i=e._fontInternal._ttfReader,e._setSymbols(t),r=_s(ps(r=i._convertString(t)))),r},n.prototype._getTextVerticalAlignShift=function(t,e,i){var r=0;if(0<=e&&null!=i&&i.lineAlignment!==x.PdfVerticalAlignment.top)switch(i.lineAlignment){case x.PdfVerticalAlignment.middle:r=(e-t)/2;break;case x.PdfVerticalAlignment.bottom:r=e-t}return r},n.prototype._getHorizontalAlignShift=function(t,e,i){var r=0;if(0<=e&&null!=i&&i.alignment!==x.PdfTextAlignment.left)switch(i.alignment){case x.PdfTextAlignment.center:r=(e-t)/2;break;case x.PdfTextAlignment.right:r=e-t}return r},n.prototype._getLineIndent=function(t,e,i,r){var n=0,t=0<(t._lineType&x._LineType.firstParagraphLine);return e&&t&&(n=r?e.firstLineIndent:e.paragraphIndent,n=0<i?Math.min(i,n):n),n},n.prototype._drawAsciiLine=function(t,e,i,r){this._justifyLine(t,e,i,r);var n="";if(-1!==t._text.indexOf("(")||-1!==t._text.indexOf(")"))for(var s=0;s<t._text.length;s++)"("===t._text[Number.parseInt(s.toString(),10)]?n+="\\(":")"===t._text[Number.parseInt(s.toString(),10)]?n+="\\)":n+=t._text[Number.parseInt(s.toString(),10)];""===n&&(n=t._text),this._sw._showNextLineText("("+n+")")},n.prototype._justifyLine=function(t,e,i,r){var n=t._text,s=t._width,t=this._shouldJustify(t,e,i,r),a=i&&0!==i.wordSpacing,r=r._getCharacterCount(n,[" ","\t"]),n=0;return t?(a&&(s-=r*i.wordSpacing),this._sw._setWordSpacing(n=(e-s)/r)):i&&i.alignment===x.PdfTextAlignment.justify&&this._sw._setWordSpacing(0),n},n.prototype._shouldJustify=function(t,e,i,r){var n=t._text,s=t._width,i=i&&i.alignment===x.PdfTextAlignment.justify,s=0<=e&&s<e,e=0<r._getCharacterCount(n,[" ","\t"])&&" "!==n[0],r=0<(t._lineType&x._LineType.layoutBreak);return i&&s&&e&&r},n.prototype._underlineStrikeoutText=function(t,e,i,r,n){if(i.isUnderline||i.isStrikeout){var s=this._createUnderlineStrikeoutPen(t,i);if(null!=s)for(var t=this._getTextVerticalAlignShift(e._actualSize[1],r[3],n),a=r[1]+t+i._metrics._getAscent(n)+1.5*s._width,o=r[1]+t+i._metrics._getHeight(n)/2+1.5*s._width,h=e._lines,c=0;c<e._lineCount;c++){var _=h[Number.parseInt(c.toString(),10)],d=_._width,p=this._getHorizontalAlignShift(d,r[2],n),l=this._getLineIndent(_,n,r[2],0===c),p=r[0]+p,_=this._shouldJustify(_,r[2],n,i)?p+r[2]-l:p+d-l;i.isUnderline&&(this.drawLine(s,p,a,_,a),a+=e._lineHeight),i.isStrikeout&&(this.drawLine(s,p,o,_,o),o+=e._lineHeight)}}},n.prototype.drawLine=function(t,e,i,r,n){this._beginMarkContent(),this._stateControl(t),this._sw._beginPath(e,i),this._sw._appendLineSegment(r,n),this._sw._strokePath(),Ms("PDF",this._resourceObject),this._endMarkContent()},n.prototype._createUnderlineStrikeoutPen=function(t,e){return new T(t._color,e._metrics._size/20)},n.prototype._checkCorrectLayoutRectangle=function(t,e,i,r){var n=[e,i,t[0],t[0]];if(r){switch(r.alignment){case x.PdfTextAlignment.center:n[0]=n[0]-n[2]/2;break;case x.PdfTextAlignment.right:n[0]=n[0]-n[2]}switch(r.lineAlignment){case x.PdfVerticalAlignment.middle:n[1]=n[1]-n[3]/2;break;case x.PdfVerticalAlignment.bottom:n[1]=n[1]-n[3]}}return n},n.prototype._drawGraphicsPath=function(t,e,i,r){e=null!=e,t=null!=t,i=(i=void 0===i?x.PdfFillMode.winding:i)===x.PdfFillMode.alternate;t&&e?r?this._sw._closeFillStrokePath(i):this._sw._fillStrokePath(i):t||e?t?r?this._sw._closeStrokePath():this._sw._strokePath():r?this._sw._closeFillPath(i):this._sw._fillPath(i):this._sw._endPath()},n.prototype._initializeCoordinates=function(t){var e,i,r,n;t?(i=!(e=[0,0]),t._pageDictionary.has("CropBox")&&t._pageDictionary.has("MediaBox")&&(r=t._pageDictionary.getArray("CropBox"),n=t._pageDictionary.getArray("MediaBox"),r[0]===n[0]&&r[1]===n[1]&&r[2]===n[2]&&r[3]===n[3]&&(i=!0),0<r[0]&&0<r[3]&&n[0]<0&&n[1]<0?(this.translateTransform(r[0],-r[3]),e[0]=-r[0],e[1]=r[3]):t._pageDictionary.has("CropBox")||(i=!0),i)&&(this._sw._writeComment("Change co-ordinate system to left/top."),this._cropBox?this.translateTransform(this._cropBox[0],-this._cropBox[3]):-t._origin[1]<this._mediaBoxUpperRightBound||0===this._mediaBoxUpperRightBound?this.translateTransform(0,-this._size[1]):this.translateTransform(0,-this._mediaBoxUpperRightBound))):(this._sw._writeComment("Change co-ordinate system to left/top."),this._mediaBoxUpperRightBound!==-this._size[1]&&(this._cropBox&&(0<(r=this._cropBox)[0]||0<r[1]||this._size[0]===r[2]||this._size[1]===r[3])?this.translateTransform(r[0],-r[3]):this._mediaBoxUpperRightBound===this._size[1]||0===this._mediaBoxUpperRightBound?this.translateTransform(0,-this._size[1]):this.translateTransform(0,-this._mediaBoxUpperRightBound)))},n.prototype.scaleTransform=function(t,e){var i=new de;i._scale(t,e),this._sw._modifyCtm(i),this._matrix._multiply(i)},n.prototype.translateTransform=function(t,e){var i=new de;i._translate(t,-e),this._sw._modifyCtm(i),this._matrix._multiply(i)},n.prototype.rotateTransform=function(t){var e=new de;e._rotate(-t),this._sw._modifyCtm(e),this._matrix._multiply(e)},n.prototype.setClip=function(t,e){void 0===e&&(e=x.PdfFillMode.winding),this._sw._appendRectangle(t[0],t[1],t[2],t[3]),this._sw._clipPath(e===x.PdfFillMode.alternate)},n.prototype.setTransparency=function(t,e,i){void 0===e&&(e=t),void 0===i&&(i=x.PdfBlendMode.normal),void 0===this._transparencies&&(this._transparencies=new Map);var r,n,s="CA:"+t.toString()+"_ca:"+e.toString()+"_BM:"+i.toString();0<this._transparencies.size&&this._transparencies.forEach(function(t,e){t===s&&(r=e)}),r||(r=new ge,(n=new D).update("CA",t),n.update("ca",e),n.update("BM",Ds(i)),t=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(t,n),r._dictionary=n,r._key=s,r._name=L.get(Es()),e=void(r._reference=t),i=!1,this._resourceObject.has("ExtGState")?null!=(n=this._resourceObject.getRaw("ExtGState"))&&(n instanceof A?(i=!0,e=this._crossReference._fetch(n)):n instanceof D&&(e=n)):(e=new D(this._crossReference),this._resourceObject.update("ExtGState",e)),e.update(r._name.name,t),i&&(this._resourceObject._updated=!0),this._hasResourceReference&&(this._source._updated=!0)),this._sw._setGraphicsState(r._name)},n.prototype._setTransparencyData=function(t,e){this._resourceMap.set(t,e);var i=this._crossReference._fetch(t),r=0,n=0,s=0,r=(i&&(i.has("CA")&&(r=i.get("CA")),i.has("ca")&&(n=i.get("ca")),i.has("ca")&&(n=i.get("ca")),i.has("BM"))&&(s=Bs(i.get("BM"))),"CA:"+r.toString()+"_ca:"+n.toString()+"_BM:"+s.toString()),n=new ge;n._dictionary=i,n._key=r,n._name=e,n._reference=t,this._transparencies.set(n,r)},n.prototype._getTranslateTransform=function(t,e,i){return i._translate(t,-e),i},n.prototype._getScaleTransform=function(t,e,i){return(i=null==i?new de:i)._scale(t,e),i},n.prototype._clipTranslateMargins=function(t){this._clipBounds=t,this._sw._writeComment("Clip margins."),this._sw._appendRectangle(t[0],t[1],t[2],t[3]),this._sw._closePath(),this._sw._clipPath(!1),this._sw._writeComment("Translate co-ordinate system."),this.translateTransform(t[0],t[1])},n.prototype._skewTransform=function(t,e){var i=new de;this._getSkewTransform(t,e,i),this._sw._modifyCtm(i),i._multiply(i)},n.prototype._getSkewTransform=function(t,e,i){return i._skew(-t,-e),i};var _e=n;function n(t,e,i,r){this._pendingResource=[],this._isItalic=!1,this._hasResourceReference=!1,r instanceof kn?(this._source=r._pageDictionary,this._page=r):r instanceof N&&(this._source=r._content.dictionary,this._template=r),this._source&&this._source.has("Resources")?(r=this._source.getRaw("Resources"))&&(r instanceof A?(this._hasResourceReference=!0,this._resourceObject=i._fetch(r)):r instanceof D&&(this._resourceObject=r)):(this._resourceObject=new D,this._source.update("Resources",this._resourceObject)),this._crossReference=i,this._sw=new E(e),this._size=t,Ms("PDF",this._resourceObject),this._initialize()}pe.prototype._translate=function(t,e){this._matrix._translate(t,e)},pe.prototype._scale=function(t,e){this._matrix._elements[0]=t,this._matrix._elements[3]=e},pe.prototype._rotate=function(t){t=t*Math.PI/180,this._matrix._elements[0]=Math.cos(t),this._matrix._elements[1]=Math.sin(t),this._matrix._elements[2]=-Math.sin(t),this._matrix._elements[3]=Math.cos(t)},pe.prototype._multiply=function(t){this._matrix._multiply(t._matrix)},pe.prototype._toString=function(){for(var t="",e=0,i=this._matrix._elements.length;e<i;e++)t+=Os(this._matrix._elements[Number.parseInt(e.toString(),10)])+" ";return t},pe.prototype._skew=function(t,e){t=Math.tan(this._degreeToRadians(t)),e=Math.tan(this._degreeToRadians(e)),t=new le(1,t,e,1,0,0);this._matrix._multiply(t)},pe.prototype._degreeToRadians=function(t){return Math.PI/180*t};var de=pe;function pe(){this._matrix=new le(1,0,0,1,0,0)}Object.defineProperty(ue.prototype,"_offsetX",{get:function(){return this._elements[4]},enumerable:!0,configurable:!0}),Object.defineProperty(ue.prototype,"_offsetY",{get:function(){return this._elements[5]},enumerable:!0,configurable:!0}),ue.prototype._clone=function(){return new ue(this._elements.slice())},ue.prototype._translate=function(t,e){this._elements[4]=t,this._elements[5]=e},ue.prototype._transform=function(t){var e=t[0],t=t[1];return[e*this._elements[0]+t*this._elements[2]+this._offsetX,e*this._elements[1]+t*this._elements[3]+this._offsetY]},ue.prototype._multiply=function(t){this._elements=[this._elements[0]*t._elements[0]+this._elements[1]*t._elements[2],this._elements[0]*t._elements[1]+this._elements[1]*t._elements[3],this._elements[2]*t._elements[0]+this._elements[3]*t._elements[2],this._elements[2]*t._elements[1]+this._elements[3]*t._elements[3],this._offsetX*t._elements[0]+this._offsetY*t._elements[2]+t._offsetX,this._offsetX*t._elements[1]+this._offsetY*t._elements[3]+t._offsetY]};var le=ue;function ue(t,e,i,r,n,s){this._elements=void 0===t?[]:"number"==typeof t?[t,e,i,r,n,s]:t}var fe=function(t,e){t&&(this._g=t,this._transformationMatrix=e),this._charSpacing=0,this._wordSpacing=0,this._textScaling=100,this._textRenderingMode=x._TextRenderingMode.fill},ge=function(){},I=((e=x._TextRenderingMode||(x._TextRenderingMode={}))[e.fill=0]="fill",e[e.stroke=1]="stroke",e[e.fillStroke=2]="fillStroke",e[e.none=3]="none",e[e.clipFlag=4]="clipFlag",e[e.clipFill=4]="clipFill",e[e.clipStroke=5]="clipStroke",e[e.clipFillStroke=6]="clipFillStroke",e[e.clip=7]="clip",function(t){this._color=void 0!==t?t:[0,0,0]}),T=function(t,e){this._color=t,this._width=e,this._dashOffset=0,this._dashPattern=[],this._dashStyle=x.PdfDashStyle.solid,this._miterLimit=0,this._lineCap=x.PdfLineCap.flat,this._lineJoin=x.PdfLineJoin.miter},ye=(me.prototype._updateProportions=function(t){return[t/2.54,t/6,1,t/72,t,t/300,t/25.4]},me.prototype._convertUnits=function(t,e,i){return this._convertFromPixels(this._convertToPixels(t,e),i)},me.prototype._convertFromPixels=function(t,e){return t/this._proportions[Number.parseInt(e.toString(),10)]},me.prototype._convertToPixels=function(t,e){return t*this._proportions[Number.parseInt(e.toString(),10)]},me);function me(){this._horizontalResolution=96,this._proportions=this._updateProportions(this._horizontalResolution)}Object.defineProperty(s.prototype,"buffer",{get:function(){return this._flush(),this._buffer},enumerable:!0,configurable:!0}),s.prototype._writeStartDocument=function(t){if("Initial"!==this._currentState||void 0===this._buffer)throw new Error("InvalidOperationException: Wrong Token");this._currentState="StartDocument",this._rawText('<?xml version="1.0" encoding="utf-8'),null!=t&&(this._rawText('" standalone="'),this._rawText(t?"yes":"no")),this._rawText('"?>')},s.prototype._writeStartElement=function(t,e,i){if(void 0===this._buffer)throw new Error("InvalidOperationException: Wrong Token");if(null==t||0===t.length)throw new Error("ArgumentException: localName cannot be undefined, null or empty");if(this._checkName(t),"Initial"===this._currentState&&this._writeStartDocument(),"StartElement"===this._currentState&&this._startElementContent(),this._currentState="StartElement",null==e)null==(e=null!=i?this._lookupPrefix(i):e)&&(e="");else if(0<e.length&&(null==(i=null==i?this._lookupNamespace(e):i)||void 0!==i&&0===i.length))throw new Error("ArgumentException: Cannot use a prefix with an empty namespace");null==i&&(i=this._lookupNamespace(e)),this._writeStartElementInternal(e,t,i)},s.prototype._writeEndElement=function(){"StartElement"===this._currentState?(this._startElementContent(),this._currentState="ElementContent"):"ElementContent"===this._currentState&&(this._currentState="ElementContent"),this._currentState="EndElement";var t=this._elementStack.length-1;this._writeEndElementInternal(this._elementStack[Number.parseInt(t.toString(),10)]._prefix,this._elementStack[Number.parseInt(t.toString(),10)]._localName),this._namespaceStack.splice(this._elementStack[Number.parseInt(t.toString(),10)]._previousTop+1),this._elementStack.splice(t)},s.prototype._writeElementString=function(t,e,i,r){this._writeStartElement(t,i,r),null!=e&&0!==e.length&&this._writeString(e),this._writeEndElement()},s.prototype._writeAttributeString=function(t,e,i,r){this._writeStartAttribute(t,e,i,r),this._writeStringInternal(e,!0),this._writeEndAttribute()},s.prototype._writeString=function(t){this._writeInternal(t,!1)},s.prototype._writeRaw=function(t){this._writeInternal(t,!0)},s.prototype._writeInternal=function(t,e){if(null!=t){if("StartElement"!==this._currentState&&"ElementContent"!==this._currentState)throw new Error("InvalidOperationException: Wrong Token");"StartElement"===this._currentState&&this._startElementContent(),this._currentState="ElementContent",e?this._rawText(t):this._writeStringInternal(t,!1)}},s.prototype._save=function(){for(;0<this._elementStack.length-1;)this._writeEndElement();return""!==this._bufferText&&this._flush(),this._buffer},s.prototype._destroy=function(){this._buffer=void 0;for(var t=0;t<this._namespaceStack.length;t++)this._namespaceStack[Number.parseInt(t.toString(),10)]._destroy();this._namespaceStack=[];for(t=0;t<this._elementStack.length;t++)this._elementStack[Number.parseInt(t.toString(),10)]._destroy();this._elementStack=[],this._bufferText="",this._position=0},s.prototype._flush=function(){if(this._buffer&&this._bufferText&&""!==this._bufferText){if(0<this._buffer.length){for(var t=new Array(this._bufferText.length),e=0;e<this._bufferText.length;e++)t[Number.parseInt(e.toString(),10)]=255&this._bufferText.charCodeAt(e);var i=new Uint8Array(this._buffer.length+t.length);i.set(this._buffer),i.set(t,this._buffer.length),this._buffer=i}else this._buffer=w(this._bufferText);this._bufferText=""}},s.prototype._writeStartAttribute=function(t,e,i,r){if(null==t||0===t.length){if("xmlns"!==i)throw new Error("ArgumentException: localName cannot be undefined, null or empty");t="xmlns",i=""}if("StartElement"!==this._currentState)throw new Error("InvalidOperationException: Wrong Token");this._checkName(t),this._writeStartAttributePrefixAndNameSpace(t,e,i,r)},s.prototype._writeStartAttributePrefixAndNameSpace=function(t,e,i,r){null==i&&null==(i=null==r||"xmlns"===t&&"http://www.w3.org/2000/xmlns/"===r?i:this._lookupPrefix(r))&&(i=""),null==r&&null==(r=null!=i&&0<i.length?this._lookupNamespace(i):r)&&(r=""),this._writeStartAttributeSpecialAttribute(i,t,r,e)},s.prototype._writeStartAttributeSpecialAttribute=function(t,e,i,r){if(0===t.length){if("x"===e[0]&&"xmlns"===e)return this._skipPushAndWrite(t,e,i),void this._pushNamespaceExplicit("",r);0<i.length&&(t=this._lookupPrefix(i))}else{if("x"===t[0]){if("xmlns"===t)return this._skipPushAndWrite(t,e,i),void this._pushNamespaceExplicit(e,r);if("xml"===t&&("space"===e||"lang"===e))return void this._skipPushAndWrite(t,e,i)}0===i.length&&(t="")}null!=t&&0!==t.length&&this._pushNamespaceImplicit(t,i),this._skipPushAndWrite(t,e,i)},s.prototype._writeEndAttribute=function(){this._currentState="StartElement",this._bufferText+='"'},s.prototype._writeStartElementInternal=function(t,e,i){this._bufferText+="<",0<t.length&&(this._rawText(t),this._bufferText+=":"),this._rawText(e);var r=this._elementStack.length;this._elementStack.push(new ve),this._elementStack[Number.parseInt(r.toString(),10)]._set(t,e,i,this._namespaceStack.length-1),this._pushNamespaceImplicit(t,i);for(var n=0;n<this._attributeStack.length;n++)this._attributeStack[Number.parseInt(n.toString(),10)]._destroy();this._attributeStack=[]},s.prototype._writeEndElementInternal=function(t,e){this._position!==this._bufferText.length+1?(this._bufferText+="</",null!=t&&0!==t.length&&(this._rawText(t),this._bufferText+=":"),this._rawText(e),this._bufferText+=">"):(this._bufferText=this._bufferText.substring(0,this._bufferText.length-1),this._bufferText+=" />")},s.prototype._writeStartAttributeInternal=function(t,e){this._bufferText+=" ",null!=t&&0<t.length&&(this._rawText(t),this._bufferText+=":"),this._rawText(e),this._bufferText+='="'},s.prototype._writeNamespaceDeclaration=function(t,e){this._skipNamespace||(this._writeStartNamespaceDeclaration(t),this._writeStringInternal(e,!0),this._bufferText+='"')},s.prototype._writeStartNamespaceDeclaration=function(t){null==t||0===t.length?this._rawText(' xmlns="'):(this._rawText(" xmlns:"),this._rawText(t),this._bufferText+="=",this._bufferText+='"')},s.prototype._writeStringInternal=function(t,e){t=(t=(t=(t=null==t?"":t).replace(/\&/g,"&amp;")).replace(/\</g,"&lt;")).replace(/\>/g,"&gt;"),e&&(t=t.replace(/\"/g,"&quot;")),this._bufferText+=t,e||(this._position=0)},s.prototype._startElementContent=function(){for(var t=this._elementStack[this._elementStack.length-1]._previousTop,e=this._namespaceStack.length-1;t<e;e--)"NeedToWrite"===this._namespaceStack[Number.parseInt(e.toString(),10)]._kind&&this._writeNamespaceDeclaration(this._namespaceStack[Number.parseInt(e.toString(),10)]._prefix,this._namespaceStack[Number.parseInt(e.toString(),10)]._namespaceUri);this._bufferText+=">",this._position=this._bufferText.length+1},s.prototype._rawText=function(t){this._bufferText+=t},s.prototype._addNamespace=function(t,e,i){var r=this._namespaceStack.length;this._namespaceStack.push(new Se),this._namespaceStack[Number.parseInt(r.toString(),10)]._set(t,e,i)},s.prototype._lookupPrefix=function(t){for(var e=this._namespaceStack.length-1;0<=e;e--)if(this._namespaceStack[Number.parseInt(e.toString(),10)]._namespaceUri===t)return this._namespaceStack[Number.parseInt(e.toString(),10)]._prefix},s.prototype._lookupNamespace=function(t){for(var e=this._namespaceStack.length-1;0<=e;e--)if(this._namespaceStack[Number.parseInt(e.toString(),10)]._prefix===t)return this._namespaceStack[Number.parseInt(e.toString(),10)]._namespaceUri},s.prototype._lookupNamespaceIndex=function(t){for(var e=this._namespaceStack.length-1;0<=e;e--)if(this._namespaceStack[Number.parseInt(e.toString(),10)]._prefix===t)return e;return-1},s.prototype._pushNamespaceImplicit=function(t,e){var i,r=this._lookupNamespaceIndex(t),n=!0;if(-1!==r)if(r>this._elementStack[this._elementStack.length-1]._previousTop){if(this._namespaceStack[Number.parseInt(r.toString(),10)]._namespaceUri!==e)throw new Error("XmlException namespace Uri needs to be the same as the one that is already declared");n=!1}else if("Special"===this._namespaceStack[Number.parseInt(r.toString(),10)]._kind){if("xml"!==t)throw new Error('InvalidArgumentException: Prefix "xmlns" is reserved for use by XML.');if(e!==this._namespaceStack[Number.parseInt(r.toString(),10)]._namespaceUri)throw new Error("InvalidArgumentException: Xml String");i="Implied"}else i=this._namespaceStack[Number.parseInt(r.toString(),10)]._namespaceUri===e?"Implied":"NeedToWrite";else{if("http://www.w3.org/XML/1998/namespace"===e&&"xml"!==t||"http://www.w3.org/2000/xmlns/"===e&&"xmlns"!==t)throw new Error("InvalidArgumentException");i="NeedToWrite"}n&&this._addNamespace(t,e,i)},s.prototype._pushNamespaceExplicit=function(t,e){var i=this._lookupNamespaceIndex(t);-1!==i&&i>this._elementStack[this._elementStack.length-1]._previousTop?this._namespaceStack[Number.parseInt(i.toString(),10)]._kind="Written":this._addNamespace(t,e,"Written")},s.prototype._addAttribute=function(t,e,i){var r=this._attributeStack.length;this._attributeStack.push(new Ae),this._attributeStack[Number.parseInt(r.toString(),10)]._set(t,e,i);for(var n=0;n<r;n++)if(this._attributeStack[Number.parseInt(n.toString(),10)]._isDuplicate(t,e,i))throw new Error("XmlException: duplicate attribute name")},s.prototype._skipPushAndWrite=function(t,e,i){this._addAttribute(t,e,i),this._writeStartAttributeInternal(t,e)},s.prototype._checkName=function(t){if(/[ !@#$%^&*()+\=\[\]{};':"\\|,<>\/?]/.test(t))throw new Error("InvalidArgumentException: invalid name character")};var be=s;function s(t){void 0===t&&(t=!1),this._position=0,this._bufferText="",this._buffer=new Uint8Array(0),this._namespaceStack=[],this._elementStack=[],t?(this._currentState="StartDocument",this._skipNamespace=!0):(this._currentState="Initial",this._namespaceStack.push(new Se),this._elementStack.push(new ve),this._namespaceStack[0]._set("xmlns","http://www.w3.org/2000/xmlns/","Special"),this._namespaceStack.push(new Se),this._namespaceStack[1]._set("xml","http://www.w3.org/XML/1998/namespace","Special"),this._namespaceStack.push(new Se),this._namespaceStack[2]._set("","","Implied"),this._elementStack[0]._set("","","",this._namespaceStack.length-1)),this._attributeStack=[]}we.prototype._set=function(t,e,i){this._prefix=t,this._namespaceUri=e,this._kind=i},we.prototype._destroy=function(){this._prefix=void 0,this._namespaceUri=void 0,this._kind=void 0};var Se=we;function we(){}Pe.prototype._set=function(t,e,i,r){this._previousTop=r,this._prefix=t,this._namespaceUri=i,this._localName=e},Pe.prototype._destroy=function(){this._previousTop=void 0,this._prefix=void 0,this._localName=void 0,this._namespaceUri=void 0};var ve=Pe;function Pe(){}xe.prototype._set=function(t,e,i){this._prefix=t,this._namespaceUri=i,this._localName=e},xe.prototype._isDuplicate=function(t,e,i){return this._localName===e&&(this._prefix===t||this._namespaceUri===i)},xe.prototype._destroy=function(){this._prefix=void 0,this._namespaceUri=void 0,this._localName=void 0};var Ae=xe;function xe(){}ke=function(t,e){return(ke=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}))(t,e)};var ke,e=function(t,e){function i(){this.constructor=t}ke(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Ie=(Ce.prototype._exportFormFieldsData=function(t){var e="";if(null!=t&&t.export){var i=Ss(t._dictionary,"FT",!1,!0,"Parent");if(i&&null!==i.name&&void 0!==i.name){var r,n,s,a,o,h=this._getEncodedFontDictionary(t._dictionary),c=t.name,_=(null!=h&&(c=this._getEncodedValue(c,h)),void 0),d=void 0;switch(i.name){case"Tx":null!=(e=Ss(t._dictionary,"V",!1,!0,"Parent"))?(e=this._getEncodedValue(e,h),this._table.set(c,e)):this._exportEmptyFields&&this._table.set(c,e="");break;case"Ch":if(null!=(_=Ss(t._dictionary,"V",!0,!0,"Parent"))&&(d=this._getExportValue(_)),null!=(d=!_&&t._dictionary.has("I")&&(t instanceof pi||t instanceof ci)?t._obtainSelectedValue():d)){if("string"==typeof d&&""!==d)e=d=this._getEncodedValue(d,h),this._table.set(c,e);else if(d instanceof Array&&0<d.length){for(var p=[],l=0;l<d.length;l++)p.push(this._getEncodedValue(d[Number.parseInt(l.toString(),10)],h));return this._table.set(c,p),p}}else this._exportEmptyFields&&this._table.set(c,e="");break;case"Btn":null!=(_=Ss(t._dictionary,"V",!1,!0,"Parent"))?null!=(r=this._getExportValue(_,t))&&""!==r?(o=void 0,t instanceof ri&&(o=t),(!t._dictionary.has("Opt")||null!=o&&-1===o.selectedIndex||t._dictionary.has("Opt")&&(n=t._dictionary.getArray("Opt"),null!=(s=Number.parseInt(r,10))&&!Number.isNaN(s)||(s=0),null!=n)&&(a=void 0,null!=(r=null!=(a=o?n[o.selectedIndex]:n[Number.parseInt(s.toString(),10)])?a:r))&&""!==r)&&(e=r=this._getEncodedValue(r,h),this._table.set(c,e))):(t instanceof ri||t instanceof ti)&&(e=this._exportEmptyFields?r:"Off",this._table.set(c,e)):t instanceof ri?(e=(e=t._getAppearanceStateValue())||(this._exportEmptyFields?"":"Off"),this._table.set(c,e)):(o=void 0,(o=(t.itemAt(t._defaultIndex)||t)._dictionary)&&o.has("AS")?(e=o.get("AS").name,this._table.set(c,e)):this._exportEmptyFields&&this._table.set(c,e=""))}}}return e},Ce.prototype._exportFormFieldData=function(t){var e=Ss(t._dictionary,"FT",!1,!0,"Parent");if(e&&null!==e.name&&void 0!==e.name){var i,r,n,s,a,o=this._getEncodedFontDictionary(t._dictionary),h=t.name,c=(null!=o&&(h=this._getEncodedValue(h,o)),void 0),_=void 0;switch(e.name){case"Tx":c=Ss(t._dictionary,"V",!1,!0,"Parent"),this._asPerSpecification?t._dictionary.has("RV")?null!=(c=Ss(t._dictionary,"RV",!1,!0,"Parent"))&&(c+=this._key,this._formKey=this._key,this._table.set(h,c)):null!=c&&(a=c=this._getEncodedValue(c,o),t instanceof qe&&t.multiLine&&(c=a=(a=a.replace("\n","")).replace("\r","\r\n")),this._table.set(h,c)):null!=c?(c=this._getEncodedValue(c,o),this._table.set(h,c)):this._exportEmptyFields&&this._table.set(h,"");break;case"Ch":if(_=Ss(t._dictionary,"V",!0,!0,"Parent"),this._asPerSpecification){if(t instanceof ai)if(Array.isArray(_))this._table.set(h,_);else if("string"==typeof _)_=this._getEncodedValue(_,o),this._table.set(h,_);else if(null==_&&t._dictionary.has("I"))if(null!=(l=t._obtainSelectedValue()))if("string"==typeof l&&""!==l)l=this._getEncodedValue(l,o),this._table.set(h,c);else if(l instanceof Array&&0<l.length){for(var d=[],p=0;p<l.length;p++)d.push(this._getEncodedValue(l[Number.parseInt(p.toString(),10)],o));this._table.set(h,d)}}else{var l=void 0;if(null!=_&&(l=this._getExportValue(_)),null!=(l=!_&&t._dictionary.has("I")&&(t instanceof pi||t instanceof ci)?t._obtainSelectedValue():l))if("string"==typeof l&&""!==l)l=this._getEncodedValue(l,o),this._table.set(h,l);else if(l instanceof Array&&0<l.length){for(d=[],p=0;p<l.length;p++)d.push(this._getEncodedValue(l[Number.parseInt(p.toString(),10)],o));this._table.set(h,d)}else this._exportEmptyFields&&this._table.set(h,"");else this._exportEmptyFields&&this._table.set(h,"")}break;case"Btn":null!=(_=Ss(t._dictionary,"V",!1,!0,"Parent"))?null!=(s=this._getExportValue(_,t))&&""!==s?(this._asPerSpecification&&"XML"!==this._format&&(s=fs(s)),a=void 0,t instanceof ri&&(a=t),(!t._dictionary.has("Opt")||null!=a&&-1===a.selectedIndex||t._dictionary.has("Opt")&&(i=t._dictionary.getArray("Opt"),null!=(r=Number.parseInt(s,10))&&!Number.isNaN(r)||(r=0),null!=i)&&(n=void 0,null!=(s=null!=(n=a?i[a.selectedIndex]:i[Number.parseInt(r.toString(),10)])?n:s))&&""!==s)&&(s=this._getEncodedValue(s,o),this._table.set(h,s))):(t instanceof ri||t instanceof ti)&&(this._exportEmptyFields?this._table.set(h,s):this._table.set(h,"Off")):t instanceof ri?(s=(s=t._getAppearanceStateValue())||(this._exportEmptyFields?"":"Off"),this._table.set(h,s)):(a=void 0,(a=(t.itemAt(t._defaultIndex)||t)._dictionary)&&a.has("AS")?this._table.set(h,a.get("AS").name):this._exportEmptyFields&&this._table.set(h,""))}}},Ce.prototype._getAnnotationType=function(t){var e="";return e=t&&t.has("Subtype")&&(t=t.get("Subtype"))?t.name:e},Ce.prototype._getValue=function(t,e){void 0===e&&(e=!1);var i="";if(null!=t)if(t instanceof L)i=t.name;else if("boolean"==typeof t)i=t?e?"true":"yes":e?"false":"no";else if("string"==typeof t)i=this._getValidString(t);else if(Array.isArray(t)){var r=t;0<r.length&&(i=this._getValue(r[0],e));for(var n=1;n<r.length;n++)i+=","+this._getValue(r[Number.parseInt(n.toString(),10)],e)}else"number"==typeof t&&(i=t.toString());return i},Ce.prototype._getColor=function(t){var e,i,r="";return t&&Array.isArray(t)&&3<=t.length&&(e=Math.round(255*t[0]).toString(16).toUpperCase(),i=Math.round(255*t[1]).toString(16).toUpperCase(),t=Math.round(255*t[2]).toString(16).toUpperCase(),r="#"+(1===e.length?"0"+e:e)+(1===i.length?"0"+i:i)+(1===t.length?"0"+t:t)),r},Ce.prototype._getValidString=function(t){return t=-1!==(t=-1!==t.indexOf("\n")?t.replace(/\n/g,"\\n"):t).indexOf("\r")?t.replace(/\r/g,"\\r"):t},Ce.prototype._getEncodedFontDictionary=function(t){var e,i,r;return t.has("Kids")&&!t.has("AP")&&(r=t.getArray("Kids")),e=(t.has("AP")||null!=r&&Array.isArray(r))&&(i=void 0,null!=r&&0<r.length?null!=(r=r[0])&&r.has("AP")&&(i=r.get("AP")):i=t.get("AP"),null!=i)&&i.has("N")&&null!=(r=i.get("N"))&&r instanceof y&&r.dictionary.has("Resources")&&null!=(t=r.dictionary.get("Resources"))&&t.has("Font")?t.get("Font"):e},Ce.prototype._getEncodedValue=function(t,e){var r,n=this,s=t;if(null!==this._encodeDictionary&&void 0!==this._encodeDictionary)return r=new Re(this._encodeDictionary),this._replaceNotUsedCharacters(s,r);var i=this._document.form._dictionary;if(null!=i&&i.has("DR")){i=i.get("DR");if(null!=i&&i.has("Encoding")){i=i.get("Encoding");if(null!=i&&i.has("PDFDocEncoding")){i=i.get("PDFDocEncoding");if(null!=i&&i.has("Differences")){var a=new D(this._crossReference),i=(a.set("Differences",i.get("Differences")),this._crossReference._getNextReference()),a=(this._crossReference._cacheMap.set(i,a),new D(this._crossReference));if(a.set("Subtype",L.get("Type1")),a.set("Encoding",i),null!=(r=new Re(a))&&null!==r.differencesDictionary&&void 0!==r.differencesDictionary&&0<r.differencesDictionary.size)return this._encodeDictionary=a,this._replaceNotUsedCharacters(s,r)}}}}if(null!=t&&null!=e&&0<e.size){var o,h=!1;if(e.forEach(function(t,e){var i;h||null==e||(i=void 0,e instanceof D?i=e:e instanceof A&&null!=(e=n._crossReference._fetch(e))&&e instanceof D&&(i=e),i&&(r=new Re(i),o=n._replaceNotUsedCharacters(s,r),h=!0))}),!h)return o}return s},Ce.prototype._replaceNotUsedCharacters=function(t,e){for(var i="",r=e.differencesDictionary,n=0;n<t.length;n++){var s,a=t[Number.parseInt(n.toString(),10)],o=t.charCodeAt(n);!r.has(a)||1<(s=r.get(a)).length&&"Type3"!==e._fontType||127<o&&o<=255&&"Type1"===e._fontType&&"WinAnsiEncoding"!==e._baseFontEncoding&&"Encoding"===e._fontEncoding&&"ZapfDingbats"===e._fontName?i+=a:i+=s}return i},Ce.prototype._getExportValue=function(t,e){var i;if(null!=t)if(null!=e)t instanceof L?i=t.name:"string"==typeof t&&(i=t),null!=i&&""!==i&&e instanceof ri&&-1!==e.selectedIndex&&null!=(e=e.itemAt(e.selectedIndex))&&e.value===i&&(i=e.value);else if(t instanceof L)i=t.name;else if("string"==typeof t)i=t;else if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++){var s=t[Number.parseInt(n.toString(),10)];s instanceof L?r.push(s.name):"string"==typeof s&&r.push(s)}return r}return i},Ce.prototype._addReferenceToGroup=function(t,e){var i=e.get("NM");i&&""!==i?(this._groupReferences.set(i,t),e.has("IRT")&&this._groupHolders.push(e)):!i&&e.has("IRT")&&(i=e.get("IRT"))&&""!==i&&this._groupReferences.has(i)&&e.update("IRT",this._groupReferences.get(i))},Ce.prototype._handlePopup=function(t,e,i,r){var n;i&&i.has("Popup")&&(n=i.getRaw("Popup"),i=i.get("Popup"))&&i instanceof D&&(n&&i&&i.update("Parent",e),n=t._parseAnnotation(i),i=t._annotations.length,t._annotations.push(e),r.set("Annots",t._annotations),r._updated=!0,t._parsedAnnotations.set(i,n))},Ce.prototype._importField=function(){var r=this,n=this._document.form,s=n.count;s&&this._fields.forEach(function(t,e){0<r._richTextValues.size&&r._richTextValues.has(e)&&(i=r._richTextValues.get(e));var i,e=n._getFieldIndex(e);-1!==e&&e<s&&(e=n.fieldAt(e))&&null!=e&&(i&&""!==i&&e._dictionary.update("RV",i),r._importFieldData(e,t))})},Ce.prototype._importFieldData=function(t,e){if(null!=e&&0<e.length&&null!=t&&!t.readOnly){var i=e[0];if(t instanceof qe)null!=i&&(t instanceof qe&&t.multiLine&&(i=(i=i.replace("\r\n","\r")).replace("\n","\r")),t.text=i);else if(t instanceof pi||t instanceof ci){var r=1<e.length?e:this._xmlImport?-1!==i.indexOf(",")?i.split(","):[i]:[-1!==i.indexOf(",")?i.split(",")[0]:i],n=[],s=t._options;s&&0<s.length&&s.forEach(function(t){-1===r.indexOf(t[0])&&-1===r.indexOf(t[1])||n.push(s.indexOf(t))}),0<n.length&&(t.selectedIndex=n,t instanceof ci)&&this._asPerSpecification&&t._dictionary.has("AP")&&(delete t._dictionary._map.AP,t._dictionary._updated=!0)}else if(t instanceof ti){e=i.toLowerCase();this._containsExportValue(i,t)||"on"===e||"yes"===e?t.checked=!0:t.checked=!1}else if(t instanceof ri){for(var a=-1,o=0;o<t._kidsCount;o++){var h=t.itemAt(o);if(h&&h.value&&h.value===i){a=o;break}}-1!==a&&t.selectedIndex!==a&&(t.selectedIndex=a)}}},Ce.prototype._containsExportValue=function(e,t){var i,r=!1;if(0<t._kidsCount)for(var n=0;n<t._kidsCount;n++){var s=t.itemAt(n);if(s&&this._checkSelected(s._dictionary,e))return!0}else!(r=this._checkSelected(t._dictionary,e))&&this._asPerSpecification&&t._dictionary.has("AS")&&(!(i=t._dictionary.get("AS"))||"Off"!==i.name&&"No"!==i.name?r=!0:t._dictionary.has("Opt")&&(i=t._dictionary.getArray("Opt"))&&0<i.length&&i.forEach(function(t){t===e&&(r=!0)}));return r},Ce.prototype._checkSelected=function(t,e){if(t&&t.has("AP")){t=t.get("AP");if(t&&t instanceof D&&t.has("N")){t=t.get("N");if(t&&t instanceof D&&t.has(e)&&"off"!==e.toLocaleLowerCase()&&"no"!==e.toLocaleLowerCase())return!0}}return!1},Ce.prototype._dispose=function(){this.exportAppearance=void 0,this._asPerSpecification=void 0,this._skipBorderStyle=void 0,this._fileName=void 0,this._document=void 0,this._crossReference=void 0,this._isAnnotationExport=void 0,this._isAnnotationImport=void 0,this._key=void 0,this._formKey=void 0,this._exportEmptyFields=void 0,this._groupReferences=void 0,this._groupHolders=void 0,this._encodeDictionary=void 0,this._annotationTypes=void 0,this._annotationAttributes=void 0,this._xmlDocument=void 0,this._parser=void 0,this._table=void 0,this._fields=void 0,this._richTextValues=void 0,this._jsonData=void 0},Ce);function Ce(){this._asPerSpecification=!1,this._fileName="",this._formKey="",this._exportEmptyFields=!1,this._groupReferences=new Map,this._groupHolders=[],this._richTextPrefix='<?xml version="1.0"?>',this._table=new Map,this._fields=new Map,this._richTextValues=new Map,this._jsonData=[],this._openingBrace=123,this._openingBracket=91,this._closingBrace=125,this._closingBracket=93,this._colon=58,this._doubleQuotes=34,this._comma=44,this._space=32,this.fdfString="",this._xmlImport=!1}e(a,Te=Ie),a.prototype._exportAnnotations=function(t){return this._document=t,this._crossReference=t._crossReference,this._isAnnotationExport=!0,this._save()},a.prototype._exportFormFields=function(t){return this._document=t,this._crossReference=t._crossReference,this._isAnnotationExport=!1,this._key=Es(),this._save()},a.prototype._save=function(){var t=new be;if(t._writeStartDocument(),t._writeStartElement("xfdf"),t._writeAttributeString(null,"http://ns.adobe.com/xfdf/","xmlns",null),t._writeAttributeString("space","preserve","xml",null),this._isAnnotationExport){if(t._writeStartElement("annots"),this._document)for(var e=0;e<this._document.pageCount;e++)for(var i=this._document.getPage(e).annotations,r=0;r<i.count;r++){var n=i.at(r);n&&(!this._annotationTypes||0===this._annotationTypes.length||this._annotationTypes&&0<this._annotationTypes.length&&this._checkAnnotationType(n))&&this._exportAnnotationData(n,t,e)}t._writeEndElement()}else{var s=this._document.form;if(null!=s){this._exportEmptyFields=s.exportEmptyFields;for(var a=this._document.form.count,e=0;e<a;e++){var o=this._document.form.fieldAt(e);null!=o&&o.export&&this._exportFormFieldData(o)}this._writeFormFieldData(t,this._asPerSpecification)}}this._asPerSpecification||(t._writeStartElement("f"),t._writeAttributeString("href",this._fileName));s=t._save();return t._destroy(),s},a.prototype._writeFormFieldData=function(i,t){var r,e,n=this;(t=void 0===t?!1:t)?(i._writeStartElement("f"),i._writeAttributeString("href",this._fileName),i._writeEndElement(),(t=this._getElements(this._table))&&0<t.size&&(i._writeStartElement("fields"),r=!1,t.forEach(function(t,e){i._writeStartElement("field"),i._writeAttributeString("name",e.toString()),Array.isArray(t)&&t.forEach(function(t){i._writeStartElement("value"),i._writeString(t.toString()),i._writeEndElement(),r=!0}),t instanceof Map?n._writeFieldName(t,i):!r&&!t.toString().endsWith(n._formKey)||!r&&""===n._formKey?(i._writeStartElement("value"),i._writeString(t.toString()),i._writeEndElement()):""!==n._formKey&&t.toString().endsWith(n._formKey)&&(i._writeStartElement("value-richtext"),t=(e=(e=t.toString()).startsWith('<?xml version="1.0"?>')?e.substring(21):e).length-n._formKey.length,e=e.substring(0,t)+e.substring(t+n._formKey.length),i._writeRaw(e),i._writeEndElement()),i._writeEndElement(),r=!1}),i._writeEndElement()),i._writeStartElement("ids"),t=!1,this._crossReference._root.has("ID")&&(e=this._crossReference._root.getArray("ID"))&&1<=e.length&&(i._writeAttributeString("original",e[0]),i._writeAttributeString("modified",e[1]),t=!0),t||(i._writeAttributeString("original",""),i._writeAttributeString("modified",""))):(i._writeStartElement("fields"),this._table.forEach(function(t,e){i._writeStartElement("field"),i._writeAttributeString("name",e.toString()),Array.isArray(t)?t.forEach(function(t){i._writeStartElement("value"),i._writeString(t.toString()),i._writeEndElement()}):(i._writeStartElement("value"),i._writeString(t.toString()),i._writeEndElement()),i._writeEndElement()})),i._writeEndElement()},a.prototype._writeFieldName=function(t,r){var n=this;t.forEach(function(t,e){var i;t instanceof Map?(r._writeStartElement("field"),r._writeAttributeString("name",e.toString()),n._writeFieldName(t,r)):(r._writeStartElement("field"),r._writeAttributeString("name",e.toString()),Array.isArray(t)?t.forEach(function(t){r._writeStartElement("value"),r._writeString(t.toString()),r._writeEndElement()}):(t.toString().endsWith(n._formKey)&&""!==n._formKey?(r._writeStartElement("value-richtext"),i=(e=(e=t.toString()).startsWith('<?xml version="1.0"?>')?e.substring(21):e).length-n._formKey.length,e=e.substring(0,i)+e.substring(i+n._formKey.length),r._writeRaw(e)):(r._writeStartElement("value"),r._writeString(t.toString())),r._writeEndElement())),r._writeEndElement()})},a.prototype._getElements=function(t){var o=this,h=new Map;return t.forEach(function(t,e){var i=h;if(-1!==e.toString().indexOf("."))for(var r=e.toString().split("."),n=0;n<r.length;n++){var s,a=r[Number.parseInt(n.toString(),10)];i.has(a)?(o._getElements(i[a]),i=i[a]):n===r.length-1?i.set(a,t):(s=new Map,i.set(a,s),i=s)}else i.set(e,t)}),h},a.prototype._checkAnnotationType=function(t){return void 0!==t._type&&-1!==this._annotationTypes.indexOf(t._type)},a.prototype._exportAnnotationData=function(t,e,i){t._dictionary&&!(t instanceof rr||t instanceof pr||t instanceof cr||t instanceof ar)&&this._writeAnnotationData(e,i,t)},a.prototype._writeAnnotationData=function(t,e,i){var r,n=!1,i=i instanceof vi?(r=i)._dictionary:i,s=this._getAnnotationType(i);if(this._skipBorderStyle=!1,s&&""!==s){this._annotationAttributes||(this._annotationAttributes=[]),t._writeStartElement(s.toLowerCase()),t._writeAttributeString("page",e.toString());var a=void 0;switch(s){case"Line":a=r.linePoints,t._writeAttributeString("start",a[0].toString()+","+a[1].toString()),t._writeAttributeString("end",a[2].toString()+","+a[3].toString());break;case"Stamp":case"Square":n=!0}i&&i.has("BE")&&i.has("BS")&&(s=i.get("BE"))&&s.has("S")&&(this._skipBorderStyle=!0),this._writeDictionary(i,e,t,n),t._writeEndElement(),this._annotationAttributes=[]}},a.prototype._writeDictionary=function(r,n,s,a){var t,e,i,o,h=this,c=!1;if(r.has("Type")&&(e=r.get("Type"),c=e&&"Border"===e.name&&this._skipBorderStyle),r.forEach(function(t,e){if((a||"AP"!==t)&&"P"!==t&&"Parent"!==t){var i=void 0;if((i=e instanceof A?r.get(t):i)&&i instanceof D)switch(t){case"BS":case"BE":h._writeDictionary(i,n,s,!1);break;case"IRT":i.has("NM")&&s._writeAttributeString("inreplyto",h._getValue(i.get("NM")))}else e instanceof D?h._writeDictionary(e,n,s,!1):c&&"S"===t||h._writeAttribute(s,t,e)}}),(this.exportAppearance||a)&&r.has("AP")&&(e=this._getAppearanceString(r.get("AP")))&&0<e.length&&(s._writeStartElement("appearance"),s._writeRaw(bs(e)),s._writeEndElement()),r.has("Measure")&&this._exportMeasureDictionary(r.get("Measure"),s),r.has("Sound")?(e=r.get("Sound"))&&e.dictionary&&((i=e.dictionary).has("B")&&s._writeAttributeString("bits",this._getValue(i.get("B"))),i.has("C")&&s._writeAttributeString("channels",this._getValue(i.get("C"))),i.has("E")&&s._writeAttributeString("encoding",this._getValue(i.get("E"))),i.has("R")&&s._writeAttributeString("rate",this._getValue(i.get("R"))),i.has("Length"))&&0<i.get("Length")&&(o=ls(e.getBytes()))&&""!==o&&(s._writeStartElement("data"),s._writeAttributeString("MODE","raw"),s._writeAttributeString("encoding","hex"),i.has("Length")&&s._writeAttributeString("length",this._getValue(i.get("Length"))),i.has("Filter")&&s._writeAttributeString("filter",this._getValue(i.get("Filter"))),s._writeRaw(o),s._writeEndElement()):r.has("FS")&&(e=r.get("FS"))&&(e.has("F")&&s._writeAttributeString("file",this._getValue(e.get("F"))),e.has("EF"))&&(i=e.get("EF"))&&i.has("F")&&(e=i.get("F"))&&e.dictionary&&((i=e.dictionary).has("Params")&&(t=i.get("Params"))&&(t.has("CreationDate")&&(p=this._getValue(t.get("CreationDate")),s._writeAttributeString("creation",p)),t.has("ModificationDate")&&(p=this._getValue(t.get("ModificationDate")),s._writeAttributeString("modification",p)),t.has("Size")&&s._writeAttributeString("size",this._getValue(t.get("Size"))),t.has("CheckSum"))&&(t=ls(w(p=this._getValue(t.get("CheckSum")))),s._writeAttributeString("checksum",t)),o=ls(e.getBytes()))&&""!==o&&(s._writeStartElement("data"),s._writeAttributeString("MODE","raw"),s._writeAttributeString("encoding","hex"),i.has("Length")&&s._writeAttributeString("length",this._getValue(i.get("Length"))),i.has("Filter")&&s._writeAttributeString("filter",this._getValue(i.get("Filter"))),s._writeRaw(o),s._writeEndElement()),r.has("Vertices")){s._writeStartElement("vertices");var _=r.getArray("Vertices");if(_&&0<_.length){var d=_.length;if(d%2==0){for(var p="",l=0;l<d-1;l++)p+=this._getValue(_[Number.parseInt(l.toString(),10)])+(l%2!=0?";":",");(p+=this._getValue(_[d-1]))&&""!==p&&s._writeRaw(p)}}s._writeEndElement()}if(r.has("Popup")&&(t=r.get("Popup"))&&this._writeAnnotationData(s,n,t),r.has("DA")&&(e=r.get("DA"))&&this._writeRawData(s,"defaultappearance",e),r.has("DS")&&(i=r.get("DS"))&&this._writeRawData(s,"defaultstyle",i),r.has("InkList")){var u=r.getArray("InkList");if(u&&0<u.length){s._writeStartElement("inklist");for(var f=0;f<u.length;f++)s._writeElementString("gesture",this._getValue(u[Number.parseInt(f.toString(),10)]));s._writeEndElement()}}r.has("RC")&&(p=r.get("RC"))&&""!==p&&(0<(o=p.indexOf("<body"))&&(p=p.substring(o)),this._writeRawData(s,"contents-richtext",p)),r.has("Contents")&&(p=r.get("Contents"))&&0<p.length&&(s._writeStartElement("contents"),s._writeString(p),s._writeEndElement())},a.prototype._getAppearanceString=function(t){var e=new be(!0),t=(e._writeStartElement("DICT"),e._writeAttributeString("KEY","AP"),this._writeAppearanceDictionary(e,t),e._writeEndElement(),e.buffer);return e._destroy(),t},a.prototype._writeAppearanceDictionary=function(i,r){var n=this;r&&0<r.size&&r.forEach(function(t,e){n._writeObject(i,e instanceof A?r.get(t):e,r,t)})},a.prototype._writeObject=function(t,e,i,r,n){var s,a;null!=e&&(e instanceof L?(this._writePrefix(t,"NAME",r),t._writeAttributeString("VAL",e.name),t._writeEndElement()):Array.isArray(e)?(this._writePrefix(t,"ARRAY",r),i.has(r)?this._writeArray(t,i.getArray(r),i):this._writeArray(t,e,i),t._writeEndElement()):"string"==typeof e?(this._writePrefix(t,"STRING",r),t._writeAttributeString("VAL",e),t._writeEndElement()):"number"==typeof e?(Number.isInteger(e)?(this._writePrefix(t,"INT",r),t._writeAttributeString("VAL",e.toString())):(this._writePrefix(t,"FIXED",r),t._writeAttributeString("VAL",e.toFixed(6))),t._writeEndElement()):"boolean"==typeof e?(this._writePrefix(t,"BOOL",r),t._writeAttributeString("VAL",e?"true":"false"),t._writeEndElement()):e instanceof D?(this._writePrefix(t,"DICT",r),this._writeAppearanceDictionary(t,e),t._writeEndElement()):null===e?(this._writePrefix(t,"NULL",r),t._writeEndElement()):e instanceof y&&e.dictionary?(s=e.dictionary,this._writePrefix(t,"STREAM",r),t._writeAttributeString("DEFINE",""),s.has("Subtype")&&"Image"===this._getValue(s.get("Subtype"))||!s.has("Type")&&!s.has("Subtype")?(a=void 0,a=!n||s.has("Filter")&&"DCTDecode"===s.get("Filter").name?e.getString(!0):Oa(e,!0),!s.has("Length")&&a&&""!==a&&s.update("Length",e.length),this._writeAppearanceDictionary(t,s),t._writeStartElement("DATA"),t._writeAttributeString("MODE","RAW"),t._writeAttributeString("ENCODING","HEX")):(a=e.getString(),!s.has("Length")&&a&&""!==a&&s.update("Length",e.length),a=(a=a.replace(/</g,"&lt;")).replace(/>/g,"&gt;"),this._writeAppearanceDictionary(t,s),t._writeStartElement("DATA"),t._writeAttributeString("MODE","FILTERED"),t._writeAttributeString("ENCODING","ASCII")),a&&""!==a&&t._writeRaw(a),t._writeEndElement(),t._writeEndElement()):e instanceof A&&this._crossReference&&this._writeObject(t,this._crossReference._fetch(e),i,r,e._isNew))},a.prototype._writePrefix=function(t,e,i){t._writeStartElement(e),i&&t._writeAttributeString("KEY",i)},a.prototype._writeArray=function(e,t,i){var r=this;t.forEach(function(t){r._writeObject(e,t,i)})},a.prototype._getFormatedString=function(t,e){return t=(e=void 0===e?!1:e)?(t=(t=t.replace("&amp;","&")).replace("&lt;","<")).replace("&gt;",">"):(t=(t=t.replace("&","&amp;")).replace("<","&lt;")).replace(">","&gt;")},a.prototype._writeAttribute=function(t,e,i){var r;if(this._annotationAttributes&&-1===this._annotationAttributes.indexOf(e))switch(e){case"C":this._writeColor(t,i,"color","c");break;case"IC":this._writeColor(t,i,"interior-color");break;case"M":this._writeAttributeString(t,"date",i);break;case"NM":this._writeAttributeString(t,"name",i);break;case"Name":this._writeAttributeString(t,"icon",i);break;case"Subj":this._writeAttributeString(t,"subject",i);break;case"T":this._writeAttributeString(t,"title",i);break;case"Rotate":this._writeAttributeString(t,"rotation",i);break;case"W":this._writeAttributeString(t,"width",i);break;case"LE":i&&Array.isArray(i)?2===i.length&&(t._writeAttributeString("head",this._getValue(i[0])),t._writeAttributeString("tail",this._getValue(i[1]))):i instanceof L&&this._writeAttributeString(t,"head",i);break;case"S":if(-1===this._annotationAttributes.indexOf("style")){switch(this._getValue(i)){case"D":t._writeAttributeString("style","dash");break;case"C":t._writeAttributeString("style","cloudy");break;case"S":t._writeAttributeString("style","solid");break;case"B":t._writeAttributeString("style","bevelled");break;case"I":t._writeAttributeString("style","inset");break;case"U":t._writeAttributeString("style","underline")}this._annotationAttributes.push("style")}break;case"D":this._writeAttributeString(t,"dashes",i);break;case"I":this._writeAttributeString(t,"intensity",i);break;case"RD":this._writeAttributeString(t,"fringe",i);break;case"IT":this._writeAttributeString(t,"IT",i);break;case"RT":this._writeAttributeString(t,"replyType",i,!0);break;case"LL":this._writeAttributeString(t,"leaderLength",i);break;case"LLE":this._writeAttributeString(t,"leaderExtend",i);break;case"Cap":this._writeAttributeString(t,"caption",i);break;case"Q":this._writeAttributeString(t,"justification",i);break;case"CP":this._writeAttributeString(t,"caption-style",i);break;case"CL":this._writeAttributeString(t,"callout",i);break;case"QuadPoints":this._writeAttributeString(t,"coords",i);break;case"CA":this._writeAttributeString(t,"opacity",i);break;case"F":"number"==typeof i&&-1===this._annotationAttributes.indexOf("flags")&&(r=ns(i),t._writeAttributeString("flags",r),this._annotationAttributes.push("flags"));break;case"InkList":case"Type":case"Subtype":case"P":case"Parent":case"L":case"Contents":case"RC":case"DA":case"DS":case"FS":case"MeasurementTypes":case"Vertices":case"GroupNesting":case"ITEx":break;case"TextMarkupContent":r=w(i),this._writeAttributeString(t,e.toLowerCase(),ls(r));break;default:this._writeAttributeString(t,e.toLowerCase(),i)}},a.prototype._writeAttributeString=function(t,e,i,r){void 0===r&&(r=!1),-1===this._annotationAttributes.indexOf(e)&&(i=this._getValue(i),t._writeAttributeString(e,r?i.toLowerCase():i),this._annotationAttributes.push(e))},a.prototype._writeRawData=function(t,e,i){i&&""!==i&&(t._writeStartElement(e),t._writeRaw(i),t._writeEndElement())},a.prototype._writeColor=function(t,e,i,r){var n=this._getColor(e);"number"==typeof e&&r&&(e=this._getValue(e))&&""!==e&&-1===this._annotationAttributes.indexOf(r)&&(t._writeAttributeString(r,e),this._annotationAttributes.push(r)),n&&""!==n&&-1===this._annotationAttributes.indexOf(i)&&(t._writeAttributeString(i,n),this._annotationAttributes.push(i))},a.prototype._exportMeasureDictionary=function(t,e){var i;e._writeStartElement("measure"),t&&(t.has("R")&&e._writeAttributeString("rateValue",this._getValue(t.get("R"))),t.has("A")&&(i=t.getArray("A"),e._writeStartElement("area"),this._exportMeasureFormatDetails(i[0],e),e._writeEndElement()),t.has("D")&&(i=t.getArray("D"),e._writeStartElement("distance"),this._exportMeasureFormatDetails(i[0],e),e._writeEndElement()),t.has("X"))&&(i=t.getArray("X"),e._writeStartElement("xformat"),this._exportMeasureFormatDetails(i[0],e),e._writeEndElement()),e._writeEndElement()},a.prototype._exportMeasureFormatDetails=function(t,e){t.has("C")&&e._writeAttributeString("c",this._getValue(t.get("C"))),t.has("F")&&e._writeAttributeString("f",this._getValue(t.get("F"))),t.has("D")&&e._writeAttributeString("d",this._getValue(t.get("D"))),t.has("RD")&&e._writeAttributeString("rd",this._getValue(t.get("RD"))),t.has("U")&&e._writeAttributeString("u",this._getValue(t.get("U"))),t.has("RT")&&e._writeAttributeString("rt",this._getValue(t.get("RT"))),t.has("SS")&&e._writeAttributeString("ss",this._getValue(t.get("SS"))),t.has("FD")&&e._writeAttributeString("fd",this._getValue(t.get("FD")))},a.prototype._importAnnotations=function(t,e){this._document=t,this._crossReference=t._crossReference;t=_s(e,!(this._isAnnotationExport=!1));this._xmlDocument=(new DOMParser).parseFromString(t,"text/xml"),this._isAnnotationImport=!0,this._readXmlData(this._xmlDocument.documentElement)},a.prototype._importFormData=function(t,e){this._document=t,this._crossReference=t._crossReference,this._isAnnotationExport=!1,this._xmlDocument=(new DOMParser).parseFromString(_s(e,!0),"text/xml"),this._readXmlData(this._xmlDocument.documentElement)},a.prototype._readXmlData=function(t){if(t&&1===t.nodeType)if(this._checkXfdf(t),this._isAnnotationImport){var e=t.getElementsByTagName("annots");if(e&&0<e.length)for(var i=0;i<e.length;i++){var r=e.item(i);if(r&&"annots"===r.localName&&r.hasChildNodes())for(var n=r.childNodes,s=0;s<n.length;s++){var a=n.item(s);a&&1===a.nodeType&&a&&1===a.nodeType&&this._parseAnnotationData(a)}}if(0<this._groupHolders.length)for(i=0;i<this._groupHolders.length;i++){var o=this._groupHolders[Number.parseInt(i.toString(),10)],h=o.get("IRT");h&&""!==h&&(this._groupReferences.has(h)?o.update("IRT",this._groupReferences.get(h)):delete o._map.IRT)}this._groupHolders=[],this._groupReferences=new Map}else this._parseFormData(t);this._dispose()},a.prototype._checkXfdf=function(t){if("xfdf"!==t.nodeName)throw new Error("Invalid XFDF file.")},a.prototype._parseFormData=function(t){var e,i=t.getElementsByTagName("f"),r=(i&&0<i.length&&(e=i.item(0))&&"f"===e.localName&&e.hasAttribute("href")&&(e=e.getAttribute("href"))&&""!==e&&(this._fileName=e),(i=t.getElementsByTagName("ids"))&&0<i.length&&(this._asPerSpecification=!0),t.childNodes);if(r&&0<r.length)for(var n=0;n<r.length;n++){var s=r.item(n);if(s&&1===s.nodeType)if(s&&"fields"===s.localName&&s.hasChildNodes()){for(var a=s.childNodes,o=[],h=0;h<a.length;h++){var c=a.item(h);c&&1===c.nodeType&&c&&"field"===c.localName&&o.push(c)}this._importFormNodes(o)}}this._importField()},a.prototype._importFormNodes=function(t){for(var e=0;e<t.length;e++){var i=t[Number.parseInt(e.toString(),10)],r="";if(i&&(r=i.hasAttribute("name")?i.getAttribute("name"):r)&&""!==r){var n=i.getElementsByTagName("value");if(n&&0<n.length){for(var s=i,a="";"fields"!==s.localName;){0<a.length&&(a="."+a);var o,h=!1;s.hasAttribute("name")&&(o=s.getAttribute("name"))&&""!==o&&(a=o+a,h=!0),h||(a+=s.localName),s=s.parentElement}var r=a,c=void 0;c=this._fields.has(r)?this._fields.get(r):[];for(var _=0;_<n.length;_++)c.push(n.item(_).textContent);this._fields.set(r,c)}else if((n=i.getElementsByTagName("value-richtext"))&&0<n.length){var d=n.item(0);if(d){for(s=i,a="";"fields"!==s.localName;){0<a.length&&(a="."+a);var p,h=!1;s.hasAttribute("name")&&(p=s.getAttribute("name"))&&""!==p&&(a=p+a,h=!0),h||(a+=s.localName),s=s.parentElement}r=a;var l=d.textContent;if(d.childNodes&&0<d.childNodes.length){i=d.childNodes[0];if(i&&i.hasChildNodes()){for(var l="",u=i.childNodes,_=void 0;_<u.length;_++)l+=u.item(_).textContent+"\r";l=0<l.length?l.substring(0,l.length-1):d.textContent}}c=void 0;c=this._fields.has(r)?this._fields.get(r):[];for(_=0;_<n.length;_++)c.push(l);this._fields.set(r,c),this._richTextValues.has(r)||this._richTextValues.set(r,d.innerHTML)}}}}},a.prototype._parseAnnotationData=function(t){var e,i,r,n,s;t&&(s=-1,t.hasAttributes)&&t.hasAttribute("page")&&0<=(s=Number.parseInt(t.getAttribute("page"),10))&&s<this._document.pageCount&&(s=this._document.getPage(s),t=this._getAnnotationDictionary(s,t))&&0<t.size&&(e=s._pageDictionary)&&(i=(s=s.annotations)._parseAnnotation(t))&&(i._isImported=!0,r=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(r,t),(t.has("NM")||t.has("IRT"))&&this._addReferenceToGroup(r,t),i._ref=r,n=s._annotations.length,s._annotations.push(r),s._comments&&0<s._comments.length&&(s._comments=[]),e.set("Annots",s._annotations),e._updated=!0,s._parsedAnnotations.set(n,i),this._handlePopup(s,r,t,e))},a.prototype._getAnnotationDictionary=function(t,e){var i,r=new D(this._crossReference),n=(r.update("Type",L.get("Annot")),!0);switch(e.localName.toLowerCase()){case"line":r.update("Subtype",L.get("Line")),e.hasAttribute("start")&&e.hasAttribute("end")&&(i=[],e.getAttribute("start").split(",").forEach(function(t){i.push(Number.parseFloat(t))}),e.getAttribute("end").split(",").forEach(function(t){i.push(Number.parseFloat(t))}),4===i.length)&&r.update("L",i),this._addLineEndStyle(r,e);break;case"circle":r.update("Subtype",L.get("Circle"));break;case"square":r.update("Subtype",L.get("Square"));break;case"polyline":r.update("Subtype",L.get("PolyLine")),this._addLineEndStyle(r,e);break;case"polygon":r.update("Subtype",L.get("Polygon")),this._addLineEndStyle(r,e);break;case"ink":r.update("Subtype",L.get("Ink"));break;case"popup":r.update("Subtype",L.get("Popup"));break;case"text":r.update("Subtype",L.get("Text"));break;case"freetext":r.update("Subtype",L.get("FreeText")),this._addLineEndStyle(r,e);break;case"stamp":r.update("Subtype",L.get("Stamp"));break;case"highlight":r.update("Subtype",L.get("Highlight"));break;case"squiggly":r.update("Subtype",L.get("Squiggly"));break;case"underline":r.update("Subtype",L.get("Underline"));break;case"strikeout":r.update("Subtype",L.get("StrikeOut"));break;case"fileattachment":r.update("Subtype",L.get("FileAttachment"));break;case"sound":r.update("Subtype",L.get("Sound"));break;case"caret":r.update("Subtype",L.get("Caret"));break;case"redact":r.update("Subtype",L.get("Redact"));break;default:n=!1}return n&&this._addAnnotationData(r,e,t),r},a.prototype._addAnnotationData=function(t,e,i){this._addBorderStyle(t,e),this._applyAttributeValues(t,e.attributes),this._parseInnerElements(t,e,i),this._addMeasureDictionary(t,e)},a.prototype._addBorderStyle=function(t,e){var i=new D(this._crossReference),r=new D(this._crossReference),n=(e.hasAttribute("width")&&r.update("W",Number.parseFloat(e.getAttribute("width"))),!0);if(e.hasAttribute("style")){var s,a="";switch(e.getAttribute("style")){case"dash":a="D";break;case"solid":a="S";break;case"bevelled":a="B";break;case"inset":a="I";break;case"underline":a="U";break;case"cloudy":n=!(a="C")}""!==a&&((n?r:i).update("S",L.get(a)),!n&&e.hasAttribute("intensity")?i.update("I",Number.parseFloat(e.getAttribute("intensity"))):e.hasAttribute("dashes")&&(s=[],e.getAttribute("dashes").split(",").forEach(function(t){s.push(Number.parseFloat(t))}),r.update("D",s)))}0<i.size&&t.update("BE",i),0<r.size&&(r.update("Type","Border"),t.update("BS",r))},a.prototype._applyAttributeValues=function(t,e){for(var i=0;i<e.length;i++){var r,n=e[Number.parseInt(i.toString(),10)],s=n.value,a=void 0;switch(n.name.toLowerCase()){case"page":case"start":case"end":case"width":case"head":case"tail":case"style":case"intensity":case"itex":break;case"state":this._addString(t,"State",s);break;case"statemodel":this._addString(t,"StateModel",s);break;case"replytype":"group"===s&&t.update("RT",L.get("Group"));break;case"inreplyto":this._addString(t,"IRT",s);break;case"rect":(a=this._obtainPoints(s))&&4===a.length&&t.update("Rect",a);break;case"color":(a=ks(s))&&3===a.length&&t.update("C",[a[0]/255,a[1]/255,a[2]/255]);break;case"interior-color":(a=ks(s))&&3===a.length&&t.update("IC",[a[0]/255,a[1]/255,a[2]/255]);break;case"date":this._addString(t,"M",s);break;case"creationdate":this._addString(t,"CreationDate",s);break;case"name":this._addString(t,"NM",s);break;case"icon":s&&""!==s&&t.update("Name",L.get(s));break;case"subject":this._addString(t,"Subj",this._getFormatedString(s,!0));break;case"title":this._addString(t,"T",this._getFormatedString(s,!0));break;case"rotation":this._addInt(t,"Rotate",s);break;case"justification":this._addInt(t,"Q",s);break;case"fringe":this._addFloatPoints(t,this._obtainPoints(s),"RD");break;case"it":s&&""!==s&&t.update("IT",L.get(s));break;case"leaderlength":this._addFloat(t,"LL",s);break;case"leaderextend":void 0!==(r=Number.parseFloat(s))&&t.update("LLE",r);break;case"caption":s&&""!==s&&t.update("Cap","yes"===s.toLowerCase());break;case"caption-style":s&&""!==s&&t.update("CP",L.get(s));break;case"callout":this._addFloatPoints(t,this._obtainPoints(s),"CL");break;case"coords":this._addFloatPoints(t,this._obtainPoints(s),"QuadPoints");break;case"border":this._addFloatPoints(t,this._obtainPoints(s),"Border");break;case"opacity":this._addFloat(t,"CA",s);break;case"flags":if(s&&""!==s){for(var o=x.PdfAnnotationFlag.default,h=s.split(","),c=0;c<h.length;c++){var _=ss(h[Number.parseInt(c.toString(),10)]);0===c?o=_:o|=_}t.update("F",o)}break;case"open":s&&""!==s&&t.update("Open","true"===s||"yes"===s);break;case"calibrate":this._addString(t,"Calibrate",s);break;case"customdata":this._addString(t,"CustomData",s);break;case"overlaytext":t.update("OverlayText",s);break;case"repeat":t.update("Repeat","true"===s||"yes"===s);break;default:this._document._allowImportCustomData&&this._addString(t,n.name,s)}}},a.prototype._obtainPoints=function(t){var e=[];return t.split(",").forEach(function(t){e.push(Number.parseFloat(t))}),e},a.prototype._parseInnerElements=function(p,l,u){if(l.hasChildNodes)for(var f=l.childNodes,t=function(t){var e=f[Number.parseInt(t.toString(),10)];if(1===e.nodeType){var i,r,n,s,a=e,o=e.textContent,h=a.innerHTML;switch(e.nodeName.toLowerCase()){case"popup":a&&a.hasAttributes&&0<(i=g._getAnnotationDictionary(u,a)).size&&(r=g._crossReference._getNextReference(),g._crossReference._cacheMap.set(r,i),p.update("Popup",r),i.has("NM"))&&g._addReferenceToGroup(r,i);break;case"contents":o&&""!==o&&p.update("Contents",g._getFormatedString(o,!0));break;case"contents-richtext":h&&""!==h&&p.update("RC",g._richTextPrefix+h);break;case"defaultstyle":g._addString(p,"DS",o);break;case"defaultappearance":g._addString(p,"DA",o);break;case"vertices":o&&""!==o&&(n=[],o.split(",").forEach(function(t){-1!==t.indexOf(";")?t.split(";").forEach(function(t){n.push(t)}):n.push(t)}),0<n.length)&&(s=[],n.forEach(function(t){s.push(Number.parseFloat(t))}),p.update("Vertices",s));break;case"appearance":g._addAppearanceData(e,p);break;case"inklist":if(e.hasChildNodes){for(var c=[],_=e.childNodes,d=0;d<_.length;d++)!function(t){var e,i,t=_[Number.parseInt(t.toString(),10)];t&&1===t.nodeType&&"gesture"===(t=t).nodeName.toLowerCase()&&t.textContent&&""!==t.textContent&&(e=[],t.textContent.split(",").forEach(function(t){-1!==t.indexOf(";")?t.split(";").forEach(function(t){e.push(t)}):e.push(t)}),0<e.length)&&(i=[],e.forEach(function(t){i.push(Number.parseFloat(t))}),c.push(i))}(d);p.update("InkList",c)}break;case"data":g._addStreamData(e,p,l)}}},g=this,e=0;e<f.length;e++)t(e)},a.prototype._addStreamData=function(t,e,i){var r;t&&t.textContent&&""!==t.textContent&&(t=us(t.textContent,!0))&&0<t.length&&e.has("Subtype")&&((r=e.get("Subtype"))&&"FileAttachment"===r.name?this._addFileAttachment(e,i,t):r&&"Sound"===r.name&&this._addSound(e,i,t))},a.prototype._addSound=function(t,e,i){var i=new co(i),r=(i.dictionary._crossReference=this._crossReference,i.dictionary.update("Type",L.get("Sound")),e.hasAttribute("bits")&&this._addInt(i.dictionary,"B",e.getAttribute("bits")),e.hasAttribute("rate")&&this._addInt(i.dictionary,"R",e.getAttribute("rate")),e.hasAttribute("channels")&&this._addInt(i.dictionary,"C",e.getAttribute("channels")),e.hasAttribute("encoding")&&(r=e.getAttribute("encoding"))&&""!==r&&i.dictionary.update("E",L.get(r)),e.hasAttribute("filter")&&i.dictionary.update("Filter",L.get("FlateDecode")),this._crossReference._getNextReference());this._crossReference._cacheMap.set(r,i),t.update("Sound",r)},a.prototype._addFileAttachment=function(t,e,i){var r=new D(this._crossReference),n=(r.update("Type",L.get("Filespec")),e.hasAttribute("file")&&(n=e.getAttribute("file"),this._addString(r,"F",n),this._addString(r,"UF",n)),new co(i)),i=(n.dictionary._crossReference=this._crossReference,new D(this._crossReference)),s=(e.hasAttribute("size")&&void 0!==(s=Number.parseInt(e.getAttribute("size"),10))&&(i.update("Size",s),n.dictionary.update("DL",s)),e.hasAttribute("modification")&&this._addString(i,"ModDate",e.getAttribute("modification")),e.hasAttribute("creation")&&this._addString(i,"CreationDate",e.getAttribute("creation")),n.dictionary.update("Params",i),e.hasAttribute("mimetype")&&this._addString(n.dictionary,"Subtype",e.getAttribute("mimetype")),n.dictionary.update("Filter",L.get("FlateDecode")),new D(this._crossReference)),i=this._crossReference._getNextReference(),e=(this._crossReference._cacheMap.set(i,n),s.update("F",i),r.update("EF",s),this._crossReference._getNextReference());this._crossReference._cacheMap.set(e,r),t.update("FS",e)},a.prototype._addAppearanceData=function(t,e){t=t.textContent;if(t&&""!==t){t=(new DOMParser).parseFromString(atob(t),"text/xml");if(t&&t.hasChildNodes)if((n=t.childNodes)&&1===n.length){t=n[0];if(t&&1===t.nodeType)if("DICT"===t.nodeName.toUpperCase()&&t.hasAttribute("KEY")){var i=t.getAttribute("KEY");if(i&&"AP"===i&&t.hasChildNodes){for(var r=new D(this._crossReference),n=t.childNodes,s=0;s<n.length;s++)this._getAppearance(r,n[Number.parseInt(s.toString(),10)]);0<r.size&&e.update("AP",r)}}}}},a.prototype._getAppearance=function(t,e){var i=t instanceof D?t:t.dictionary;if(e&&1===e.nodeType){var r=e;if(r&&r.localName){var n,s;switch(r.localName){case"STREAM":(s=this._getStream(r))&&(n=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(n,s),this._addKey(n,i,r));break;case"DICT":(s=this._getDictionary(r))&&(n=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(n,s),this._addKey(n,i,r));break;case"ARRAY":this._addKey(this._getArray(r),i,r);break;case"FIXED":this._addKey(this._getFixed(r),i,r);break;case"INT":this._addKey(this._getInt(r),i,r);break;case"STRING":this._addKey(this._getString(r),i,r);break;case"NAME":this._addKey(this._getName(r),i,r);break;case"BOOL":this._addKey(this._getBoolean(r),i,r);break;case"DATA":(s=this._getData(r))&&0<s.length&&t instanceof co&&(t._bytes=s,n=!1,(n=i&&i.has("Subtype")?(s=i.get("Subtype"))&&"Image"===s.name:n)?t._isCompress=!1:(t.dictionary.has("Length")&&delete t.dictionary._map.Length,t.dictionary.has("Filter")&&delete t.dictionary._map.Filter))}}}},a.prototype._getStream=function(t){var e=new co([]);if(e.dictionary._crossReference=this._crossReference,t.hasChildNodes)for(var i=t.childNodes,r=0;r<i.length;r++){var n=i[Number.parseInt(r.toString(),10)];n&&1===n.nodeType&&this._getAppearance(e,n)}return e},a.prototype._getDictionary=function(t){var e=new D(this._crossReference);if(t.hasChildNodes)for(var i=t.childNodes,r=0;r<i.length;r++){var n=i[Number.parseInt(r.toString(),10)];n&&1===n.nodeType&&this._getAppearance(e,n)}return e},a.prototype._getArray=function(t){var e=[];if(t.hasChildNodes)for(var i=t.childNodes,r=0;r<i.length;r++){var n=i[Number.parseInt(r.toString(),10)];n&&1===n.nodeType&&this._addArrayElements(e,n)}return e},a.prototype._getData=function(t){var e,i,r=[];return t&&t.textContent&&""!==t.textContent&&t.hasAttribute("MODE")&&t.hasAttribute("ENCODING")&&(e=t.getAttribute("MODE"),i=t.getAttribute("ENCODING"),e)&&i&&(t=this._getFormatedString(t.textContent,!0),"FILTERED"===e&&"ASCII"===i?r=w(t,!0):"RAW"===e&&"HEX"===i&&(r=us(t,!0))),r},a.prototype._addArrayElements=function(t,e){if(e&&1===e.nodeType){var i,r,n=e,s=void 0;switch(n.localName){case"STREAM":(s=this._getStream(n))&&(i=this._crossReference._getNextReference(),s.reference=i,this._crossReference._cacheMap.set(i,s),t.push(i));break;case"DICT":(r=this._getDictionary(n))&&(i=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(i,r),t.push(i));break;case"ARRAY":(r=this._getArray(n))&&t.push(r);break;case"FIXED":void 0===(i=this._getFixed(n))||isNaN(i)||t.push(i);break;case"INT":void 0===(r=this._getInt(n))||isNaN(r)||t.push(r);break;case"NAME":(i=this._getName(n))&&t.push(i);break;case"BOOL":null!=(r=this._getBoolean(n))&&t.push(r)}}},a.prototype._getFixed=function(t){var e;return e=t&&t.hasAttribute("VAL")?Number.parseFloat(t.getAttribute("VAL")):e},a.prototype._getInt=function(t){var e;return e=t&&t.hasAttribute("VAL")?Number.parseInt(t.getAttribute("VAL"),10):e},a.prototype._getString=function(t){var e;return e=t&&t.hasAttribute("VAL")?t.getAttribute("VAL"):e},a.prototype._getName=function(t){var e;return e=t&&t.hasAttribute("VAL")?L.get(t.getAttribute("VAL")):e},a.prototype._getBoolean=function(t){var e;return e=t&&t.hasAttribute("VAL")?"true"===t.getAttribute("VAL"):e},a.prototype._addMeasureDictionary=function(t,e){var i,r,n,s;if(e.hasChildNodes)for(var a=e.childNodes,o=0;o<a.length;o++)if((f=a[Number.parseInt(o.toString(),10)])&&"measure"===f.localName){i=f;break}var h,e=new D(this._crossReference),c=new D(this._crossReference),_=new D(this._crossReference),d=new D(this._crossReference),p=[],l=[],u=[];if(i&&(e.update("Type",L.get("Measure")),i.hasAttribute("rateValue")&&(h=i.getAttribute("rateValue"))&&""!==h&&e.update("R",h),i.hasChildNodes))for(a=i.childNodes,o=0;o<a.length;o++){var f,g=a[Number.parseInt(o.toString(),10)];if(g&&1===g.nodeType)switch((f=g).nodeName.toLowerCase()){case"distance":n=f;break;case"area":r=f;break;case"xformat":s=f}}s&&(this._addElements(s,d),u.push(d)),n&&(this._addElements(n,c),p.push(c)),r&&(this._addElements(r,_),l.push(_)),e.set("A",l),e.set("D",p),e.set("X",u),0<e.size&&e.has("Type")&&(h=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(h,e),t.update("Measure",h))},a.prototype._addElements=function(t,e){t.hasAttribute("d")&&this._addFloat(e,"D",t.getAttribute("d")),t.hasAttribute("c")&&this._addFloat(e,"C",t.getAttribute("c")),t.hasAttribute("rt")&&e.update("RT",t.getAttribute("rt")),t.hasAttribute("rd")&&e.update("RD",t.getAttribute("rt")),t.hasAttribute("ss")&&e.update("SS",t.getAttribute("ss")),t.hasAttribute("u")&&e.update("U",t.getAttribute("u")),t.hasAttribute("f")&&e.update("F",L.get(t.getAttribute("f"))),t.hasAttribute("fd")&&e.update("FD","yes"===t.getAttribute("fd"))},a.prototype._addString=function(t,e,i){i&&""!==i&&t.update(e,i)},a.prototype._addInt=function(t,e,i){i=Number.parseInt(i,10);void 0!==i&&t.update(e,i)},a.prototype._addFloat=function(t,e,i){i=Number.parseFloat(i);void 0!==i&&t.update(e,i)},a.prototype._addFloatPoints=function(t,e,i){e&&0<e.length&&t.update(i,e)},a.prototype._addKey=function(t,e,i){null!=t&&i.hasAttribute("KEY")&&e.update(i.getAttribute("KEY"),t)},a.prototype._addLineEndStyle=function(t,e){var i="",r=(e.hasAttribute("head")&&(i=e.getAttribute("head")),"");e.hasAttribute("tail")&&(r=e.getAttribute("tail")),i&&""!==i?r&&""!==r?((e=[]).push(L.get(i)),e.push(L.get(r)),t.update("LE",e)):t.update("LE",L.get(i)):r&&""!==r&&t.update("LE",L.get(r))};var Te,Ne=a;function a(t){var e=Te.call(this)||this;return null!=t&&(e._fileName=t),e}Object.defineProperty(Fe.prototype,"differencesDictionary",{get:function(){return this._differencesDictionary||(this._differencesDictionary=this._getDifferencesDictionary()),this._differencesDictionary},enumerable:!0,configurable:!0}),Object.defineProperty(Fe.prototype,"baseFontEncoding",{get:function(){return this._baseFontEncoding},enumerable:!0,configurable:!0}),Object.defineProperty(Fe.prototype,"fontEncoding",{get:function(){return this._fontEncoding||(this._fontEncoding=this._getFontEncoding()),this._fontEncoding},enumerable:!0,configurable:!0}),Object.defineProperty(Fe.prototype,"fontName",{get:function(){return this._fontName||(this._fontName=this._getFontName()),this._fontName},enumerable:!0,configurable:!0}),Fe.prototype._getFontEncoding=function(){var t,e,i="";return null!==this._dictionary&&void 0!==this._dictionary&&this._dictionary.has("Encoding")&&((t=this._dictionary.get("Encoding"))instanceof L?i=t.name:t instanceof D&&(t.has("BaseEncoding")&&(e=t.get("BaseEncoding"))&&e instanceof L&&(this._baseFontEncoding=e.name),t.has("Type"))&&null!=(e=t.get("Type"))&&(i=e.name)),i="identity#2dh"!==i.toString()&&"CMap"!==i?i:"Identity-H"},Fe.prototype._getDifferencesDictionary=function(){var t=new Map;if(null!==this._dictionary&&void 0!==this._dictionary&&this._dictionary.has("Encoding")){var e=this._dictionary.get("Encoding");if(null!=e&&e instanceof D&&e.has("Differences")){var i=e.getArray("Differences"),r=0;if(null!=i)for(var n=0;n<i.length;n++){var s="",a=i[Number.parseInt(n.toString(),10)];"number"==typeof a?(s=a.toString(),r=Number.parseInt(s,10)):a instanceof L&&(s=a.name,"Type1"===this._fontType&&".notdef"===s?(s=" ",t.set(r.toString(),ca(s))):(s=ha(s=ca(s)),t.has(r.toString())||t.set(r.toString(),ca(s)),r++))}}}return t},Fe.prototype._getFontName=function(){var t,e,i,r="";return r=null!==this._dictionary&&void 0!==this._dictionary&&this._dictionary.has("BaseFont")&&(-1!==(i=(t=this._dictionary.get("BaseFont")).name).indexOf("#20")&&-1===i.indexOf("+")&&(e=i.lastIndexOf("#20"),i=i.substring(0,e),i+="+"),-1!==(r=-1!==t.name.indexOf("+")?t.name.split("+")[1]:t.name).indexOf("-")?r=r.split("-")[0]:-1!==r.indexOf(",")&&(r=r.split(",")[0]),-1!==(r=-1!==(r=-1!==r.indexOf("MT")?r.replace("MT",""):r).indexOf("#20")?r.replace("#20"," "):r).indexOf("#"))?this._decodeHexFontName(r):r},Fe.prototype._decodeHexFontName=function(t){for(var e=t,i=0;i<t.length;i++)if("#"===t[Number.parseInt(i.toString(),10)]){var r=t[i+1]+t[i+2],n=Number.parseInt(r,16);if(0!==n&&(e=e.replace("#"+r,String.fromCharCode(n)),i+=2),-1===e.indexOf("#"))break}return e};var Re=Fe;function Fe(t){this._baseFontEncoding="",this._dictionary=t,this._fontType=this._dictionary.get("Subtype").name}Le=function(t,e){return(Le=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}))(t,e)};(function(t,e){function i(){this.constructor=t}Le(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(o,De=Ie),o.prototype._exportAnnotations=function(t){return this._document=t,this._crossReference=t._crossReference,this._isAnnotationExport=!0,this._exportAnnotationData(t,t.pageCount),this._save()},o.prototype._exportFormFields=function(t){this._document=t,this._crossReference=t._crossReference,this._isAnnotationExport=!1;t=this._document.form;if(null!=t){this._exportEmptyFields=t.exportEmptyFields;for(var e=this._document.form.count,i=0;i<e;i++){var r=this._document.form.fieldAt(i);this._exportFormFieldsData(r)}this._writeFormFieldData()}return this._save()},o.prototype._save=function(){var t=new Uint8Array(this._jsonData);return this._jsonData=[],t},o.prototype._writeFormFieldData=function(){var s=this,a=(this._jsonData.push(this._openingBrace),0);this._table.forEach(function(t,e){if(e=s._getValidString(e),s._jsonData.push(s._doubleQuotes),s._jsonData=w(e,!0,!1,s._jsonData),"string"==typeof t||Array.isArray(t)&&1===t.length)t=s._getValidString("string"==typeof t?t:t[0]),s._jsonData.push(s._doubleQuotes,s._colon,s._doubleQuotes),s._jsonData=w(t,!0,!1,s._jsonData),s._jsonData.push(s._doubleQuotes);else{s._jsonData.push(s._doubleQuotes,s._colon,s._openingBracket);for(var i=0;i<t.length;i++){s._jsonData.push(s._doubleQuotes);for(var r=t[Number.parseInt(i.toString(),10)],n=0;n<r.length;n++)s._jsonData.push(r.charCodeAt(n));s._jsonData.push(s._doubleQuotes),i<t.length-1&&s._jsonData.push(s._comma)}s._jsonData.push(s._closingBracket)}a<s._table.size-1&&s._jsonData.push(s._comma),a++}),this._jsonData.push(this._closingBrace)},o.prototype._exportAnnotationData=function(t,e){var i=this,r=!1;this._jsonData.push(this._openingBrace,this._doubleQuotes,112,100,102,65,110,110,111,116,97,116,105,111,110,this._doubleQuotes,this._colon,this._openingBrace);for(var n=0;n<e;n++){for(var s=t.getPage(n),a=(s&&0<s.annotations.count&&(this._jsonData.push(0!==n&&r?this._comma:this._space,this._doubleQuotes),w(n.toString(),!0,!1,[]).forEach(function(t){i._jsonData.push(t)}),this._jsonData.push(this._doubleQuotes,this._colon,this._openingBrace,this._doubleQuotes,115,104,97,112,101,65,110,110,111,116,97,116,105,111,110,this._doubleQuotes,this._colon,this._openingBracket),r=!0),0),o=0;o<s.annotations.count;o++){var h=s.annotations.at(o);h&&(0!==a&&this._jsonData.push(this._comma),a++,this._exportAnnotation(h,n),this._jsonData=w(this._convertToJson(this._table),!0,!1,this._jsonData),this._table.clear())}s&&0<s.annotations.count&&this._jsonData.push(this._closingBracket,this._closingBrace)}this._jsonData.push(this._closingBrace,this._closingBrace)},o.prototype._exportAnnotation=function(t,e){var i=!1,r=t._dictionary,n=this._getAnnotationType(t._dictionary);if(this._skipBorderStyle=!1,n&&""!==n){this._table.set("type",n),this._table.set("page",e.toString());var s=void 0;switch(n){case"Line":s=t.linePoints,this._table.set("start",s[0].toString()+","+s[1].toString()),this._table.set("end",s[2].toString()+","+s[3].toString());break;case"Stamp":case"Square":i=!0}r&&r.has("BE")&&r.has("BS")&&(n=r.get("BE"))&&n.has("S")&&(this._skipBorderStyle=!0),this._writeDictionary(r,e,i)}},o.prototype._writeDictionary=function(r,n,s){var t,e,i,a,o,h=this,c=!1;r&&r.has("Type")&&(t=r.get("Type"),c=t&&"Border"===t.name&&this._skipBorderStyle),r.forEach(function(t,e){if((s||"AP"!==t)&&"P"!==t&&"Parent"!==t){var i=void 0;if((i=e instanceof A?r.get(t):i)&&i instanceof D)switch(t){case"BS":case"BE":h._writeDictionary(i,n,!1);break;case"IRT":i.has("NM")&&h._table.set("inreplyto",h._getValue(i.get("NM"),!0))}else e instanceof D?h._writeDictionary(e,n,!1):c&&"S"===t||h._writeAttribute(t,e,r)}}),r.has("Measure")&&this._exportMeasureDictionary(r.get("Measure")),(this.exportAppearance||s)&&r.has("AP")&&(t=this._getAppearanceString(r.get("AP")))&&0<t.length&&this._table.set("appearance",bs(t)),r.has("Sound")?(t=r.get("Sound"))&&t.dictionary&&((e=t.dictionary).has("B")&&this._table.set("bits",this._getValue(e.get("B"),!0)),e.has("C")&&this._table.set("channels",this._getValue(e.get("C"),!0)),e.has("E")&&this._table.set("encoding",this._getValue(e.get("E"),!0)),e.has("R")&&this._table.set("rate",this._getValue(e.get("R"),!0)),e.has("Length"))&&0<e.get("Length")&&(o=ls(t.getBytes()))&&""!==o&&(this._table.set("MODE","raw"),this._table.set("encoding","hex"),e.has("Length")&&this._table.set("length",this._getValue(e.get("Length"),!0)),e.has("Filter")&&this._table.set("filter",this._getValue(e.get("Filter"),!0)),this._table.set("data",o)):r.has("FS")&&(t=r.get("FS"))&&(t.has("F")&&this._table.set("file",this._getValue(t.get("F"),!0)),t.has("EF"))&&(e=t.get("EF"))&&e.has("F")&&(t=e.get("F"))&&t.dictionary&&((e=t.dictionary).has("Params")&&(a=e.get("Params"))&&(a.has("CreationDate")&&(i=this._getValue(a.get("CreationDate"),!0),this._table.set("creation",i)),a.has("ModificationDate")&&(i=this._getValue(a.get("ModificationDate"),!0),this._table.set("modification",i)),a.has("Size")&&this._table.set("size",this._getValue(a.get("Size"),!0)),a.has("CheckSum"))&&(a=ls(w(i=this._getValue(a.get("CheckSum"),!0))),this._table.set("checksum",a)),o=ls(t.getBytes()))&&""!==o&&(this._table.set("MODE","raw"),this._table.set("encoding","hex"),e.has("Length")&&this._table.set("length",this._getValue(e.get("Length"),!0)),e.has("Filter")&&this._table.set("filter",this._getValue(e.get("Filter"),!0)),this._table.set("data",o))},o.prototype._writeColor=function(t,e,i){var r=this._getColor(t);"number"==typeof t&&i&&(t=this._getValue(t,!0))&&""!==t&&this._table.set(i,t),r&&""!==r&&this._table.set(e,r)},o.prototype._writeAttributeString=function(t,e,i){void 0===i&&(i=!1);e=this._getValue(e,!0);this._table.set(t,i?e.toLowerCase():e)},o.prototype._writeAttribute=function(t,e,i){var r,n,s;switch(t){case"C":this._writeColor(e,"color","c");break;case"IC":this._writeColor(e,"interior-color");break;case"DA":(n=i.get("DA"))&&this._table.set("defaultappearance",n);break;case"M":this._writeAttributeString("date",e);break;case"NM":this._table.set("name",e);break;case"Name":this._writeAttributeString("icon",e);break;case"Subj":this._writeAttributeString("subject",e);break;case"T":this._writeAttributeString("title",e);break;case"Rect":(n=this._getValue(e,!0))&&(s=n.split(","),(r=new Map).set("x",s[0]),r.set("y",s[1]),r.set("width",s[2]),r.set("height",s[3]),this._table.set(t.toLowerCase(),this._convertToJson(r)));break;case"CreationDate":this._writeAttributeString("creationdate",e);break;case"Rotate":this._writeAttributeString("rotation",e);break;case"W":this._writeAttributeString("width",e);break;case"LE":e&&Array.isArray(e)?2===e.length&&(this._table.set("head",this._getValue(e[0],!0)),this._table.set("tail",this._getValue(e[1],!0))):e instanceof L&&this._writeAttributeString("head",e);break;case"S":switch(this._getValue(e,!0)){case"D":this._table.set("style","dash");break;case"C":this._table.set("style","cloudy");break;case"S":this._table.set("style","solid");break;case"B":this._table.set("style","bevelled");break;case"I":this._table.set("style","inset");break;case"U":this._table.set("style","underline")}break;case"D":this._writeAttributeString("dashes",e);break;case"I":this._writeAttributeString("intensity",e);break;case"RD":this._writeAttributeString("fringe",e);break;case"IT":this._writeAttributeString("IT",e);break;case"RT":this._writeAttributeString("replyType",e,!0);break;case"LL":this._writeAttributeString("leaderLength",e);break;case"LLE":this._writeAttributeString("leaderExtend",e);break;case"Cap":this._writeAttributeString("caption",e);break;case"CP":this._writeAttributeString("caption-style",e);break;case"CL":this._writeAttributeString("callout",e);break;case"QuadPoints":this._writeAttributeString("coords",e);break;case"CA":this._writeAttributeString("opacity",e);break;case"F":"number"==typeof e&&(s=ns(e),this._table.set("flags",s));break;case"Contents":(n=i.get("Contents"))&&0<n.length&&this._table.set("contents",this._getValidString(n));break;case"InkList":this._writeInkList(i);break;case"Vertices":this._writeVertices(i);break;case"DS":if(F(n=i.get("DS"))){for(var a=new Map,o=n.split(";"),h=0;h<o.length;h++){var c=o[Number.parseInt(h.toString(),10)].split(":");c&&0<c.length&&c[0]&&1<c[0].length&&c[0].startsWith(" ")&&(c[0]=c[0].substring(1)),a.set(c[0],c[1])}this._table.set("defaultStyle",this._convertToJson(a))}break;case"AllowedInteractions":e&&(r=w(e),(a=new Map).set("unicodeData",ls(r)),this._table.set(t,this._convertToJson(a)));break;case"RC":"string"==typeof(s=i.get("RC"))&&s.includes("<body")&&(0<(n=s.indexOf("<body"))&&(s=s.substring(n)),this._writeAttributeString("contents-richtext",s));break;case"Type":case"Subtype":case"P":case"Parent":case"L":case"FS":case"MeasurementTypes":case"GroupNesting":case"ITEx":break;case"TextMarkupContent":r=w(e),this._writeAttributeString(t,ls(r));break;case"Border":case"A":case"R":case"X":case"ca":this._writeAttributeString(t.toLowerCase(),e);break;default:"string"==typeof e&&e.startsWith("{")&&e.endsWith("}")?this._table.set(t,e):this._writeAttributeString(t,e)}},o.prototype._writeVertices=function(t){var e=t.getArray("Vertices");if(F(e)&&0<e.length){var i=e.length;if(i%2==0){for(var r="",n=0;n<i-1;n++)r+=this._getValue(e[Number.parseInt(n.toString(),10)],!0)+(n%2!=0?";":",");(r+=this._getValue(e[i-1],!0))&&""!==r&&this._table.set("vertices",r)}}},o.prototype._writeInkList=function(t){var e=t.getArray("InkList");if(e&&0<e.length){for(var t=new Map,i="[",r=0;r<e.length;r++)i+="["+this._getValue(e[Number.parseInt(r.toString(),10)],!0)+"]",r<e.length-1&&(i+=",");t.set("gesture",i+="]"),this._table.set("inklist",this._convertToJson(t))}},o.prototype._exportMeasureDictionary=function(t){var e;t&&(t.has("Type")&&this._table.set("type1","Measure"),t.has("R")&&this._table.set("ratevalue",this._getValue(t.get("R"),!0)),t.has("SubType")&&this._table.set("SubType",this._getValue(t.get("SubType"),!0)),t.has("TargetUnitConversion")&&this._table.set("TargetUnitConversion",this._getValue(t.get("TargetUnitConversion"),!0)),t.has("A")&&(e=t.getArray("A"))&&0<e.length&&e[0]&&this._exportMeasureFormatDetails("area",e[0]),t.has("D")&&(e=t.getArray("D"))&&0<e.length&&e[0]&&this._exportMeasureFormatDetails("distance",e[0]),t.has("X")&&(e=t.getArray("X"))&&0<e.length&&e[0]&&this._exportMeasureFormatDetails("xformat",e[0]),t.has("T")&&(e=t.getArray("T"))&&0<e.length&&e[0]&&this._exportMeasureFormatDetails("tformat",e[0]),t.has("V"))&&(e=t.getArray("V"))&&0<e.length&&e[0]&&this._exportMeasureFormatDetails("vformat",e[0])},o.prototype._exportMeasureFormatDetails=function(t,e){var i=new Map;e&&(e.has("C")&&i.set("c",this._getValue(e.get("C"),!0)),e.has("F")&&i.set("f",this._getValue(e.get("F"),!0)),e.has("D")&&i.set("d",this._getValue(e.get("D"),!0)),e.has("RD")&&i.set("rd",this._getValue(e.get("RD"),!0)),e.has("U")&&i.set("u",this._getValue(e.get("U"),!0)),e.has("RT")&&i.set("rt",this._getValue(e.get("RT"),!0)),e.has("SS")&&i.set("ss",this._getValue(e.get("SS"),!0)),e.has("FD"))&&i.set("fd",this._getValue(e.get("FD"),!0)),this._table.set(t,this._convertToJson(i))},o.prototype._getAppearanceString=function(t){var e=new Map,i=new Map;return this._writeAppearanceDictionary(i,t),e.set("ap",this._convertToJson(i)),w(this._convertToJson(e))},o.prototype._writeAppearanceDictionary=function(i,r){var n=this;r&&0<r.size&&r.forEach(function(t,e){("OC"===t&&e instanceof Array||"P"!==t&&"Parent"!==t&&"Dest"!==t&&"OC"!==t&&("AP"!==t||!n._isGroupingSupport))&&n._writeObject(i,e instanceof A?r.get(t):e,r,t)})},o.prototype._writeObject=function(t,e,i,r,n,s,a){var o,h,c,_,d,p,l,u,f;void 0===s&&(s=!1),void 0===a&&(a=!1),e instanceof L?(e.name=this._getValidString(e.name),this._writeTable("name",e.name,t,r,n)):Array.isArray(e)?(o=[],"ColorSpace"===r||s?this._writeArray(o,e,i,!0):this._writeArray(o,e,i),this._isColorSpace=!1,this._writeTable("array",this._convertToJsonArray(o),t,r,n)):"string"==typeof e?(o=!1,-1!==e.indexOf("\t")&&(o=!0),"AllowedInteractions"!==r&&(e=this._getValidString(e)),this._isColorSpace||"AllowedInteractions"===r||this._hasUnicodeCharacters(e)||o?(l=w(e),this._writeTable("unicodeData",ls(l),t,r,n)):this._writeTable("string",e,t,r,n)):"number"==typeof e?this._writeTable(Number.isInteger(e)?"int":"fixed",e.toString(),t,r,n):"boolean"==typeof e?this._writeTable("boolean",e?"true":"false",t,r,n):e instanceof D?(o=new Map,this._writeAppearanceDictionary(o,e),this._writeTable("dict",this._convertToJson(o),t,r,n)):e instanceof y&&e.dictionary?(o=new Map,h=new Map,d=void 0,f=!1,(c=(_=e).dictionary).has("Subtype")&&"Image"===c.get("Subtype").name&&(f=!0),a&&f?d=e.dictionary.has("Filter")&&"DCTDecode"===e.dictionary.get("Filter").name?e.getString(!0):Oa(e,!0):f&&_.stream?_.stream instanceof g?d="boolean"==typeof _._initialized&&_._cipher?(p=_.stream.end-_.stream.start,_.getBytes(p),l=_.buffer.subarray(0,_.bufferLength),_.getString(!0,l)):(u=_.stream,_.getString(!0,u.getByteRange(u.start,u.end))):_.stream.stream?(a=_.stream).stream instanceof g&&"boolean"==typeof a._initialized&&a._cipher?(p=a.stream.end-a.stream.start,a.getBytes(p),l=a.buffer.subarray(0,a.bufferLength),d=a.getString(!0,l)):a.stream instanceof g&&(u=a.stream,d=a.getString(!0,u.getByteRange(u.start,u.end))):d=e.getString(!0):d=e.getString(!0),!c.has("Length")&&d&&""!==d&&c.update("Length",e.length),f=void this._writeAppearanceDictionary(h,c),c.has("Subtype")&&(f=this._getValue(c.get("Subtype"))),!c.has("Type")&&!c.has("Subtype")||c.has("Subtype")&&("Image"===f||"Form"===f||"CIDFontType0C"===f||"OpenType"===f)?(o.set("mode","raw"),o.set("encoding","hex")):(o.set("mode","filtered"),o.set("encoding","ascii")),d&&""!==d&&o.set("bytes",d),h.set("data",this._convertToJson(o)),this._writeTable("stream",this._convertToJson(h),t,r,n)):e instanceof A&&this._crossReference?this._writeObject(t,this._crossReference._fetch(e),i,r,n,s,e._isNew):null==e&&this._writeTable("null","null",t,r,n)},o.prototype._writeTable=function(t,e,i,r,n){var s=new Map;s.set(t,e),r?i.set(r,this._convertToJson(s)):n&&n.push(s)},o.prototype._writeArray=function(t,e,i,r){void 0===r&&(r=!1);for(var n=0;n<e.length;n++)r&&"string"==typeof e[Number.parseInt(n.toString(),10)]&&(this._isColorSpace=!0),this._writeObject(null,e[Number.parseInt(n.toString(),10)],i,null,t,r)},o.prototype._convertToJson=function(i){var r=0,n="{";return i.forEach(function(t,e){t.startsWith("{")||t.startsWith("[")?n+='"'+e+'":'+t:(t.startsWith(" ")&&1<t.length&&("["===t[1]||"{"===t[1])&&(t=t.substring(1)),n+='"'+e+'":"'+t+'"'),r<i.size-1&&(n+=","),r++}),n+"}"},o.prototype._hasUnicodeCharacters=function(t){var e=/[^\x00-\x7F]/;return t.split("").some(function(t){return null!==e.exec(t)})},o.prototype._convertToJsonArray=function(t){for(var e="[",i=0;i<t.length;i++)e+=this._convertToJson(t[Number.parseInt(i.toString(),10)]),i<t.length-1&&(e+=",");return e+"]"},o.prototype._parseJson=function(t,e){this._document=t,this._crossReference=t._crossReference;var i=_s(e,!0);if(i.startsWith("{")&&!i.endsWith("}"))for(;0<i.length&&!i.endsWith("}");)i=i.substring(0,i.length-1);return JSON.parse(i)},o.prototype._importFormData=function(t,e){var i=this,r=this._parseJson(t,e);if(r){var n=Object.keys(r);if(n&&0<n.length){for(var s=this,a=0;a<n.length;a++)!function(t){var e=n[Number.parseInt(t.toString(),10)],t=r[e];Array.isArray(t)?s._fields.has("key")?t.forEach(function(t){i._fields.get(e).push(t)}):s._fields.set(e,t):s._fields.has("key")?s._fields.get(e).push(t):s._fields.set(e,[t])}(a);this._importField()}}},o.prototype._importAnnotations=function(i,t){var h=this,t=(this._isImport=!0,this._parseJson(i,t));if(t&&-1!==Object.keys(t).indexOf("pdfAnnotation")){var r=t.pdfAnnotation,n=i.pageCount,t=Object.keys(r);if(t&&0<t.length&&t.forEach(function(t){var o,e=Number.parseInt(t,10);void 0!==e&&e<n&&(o=i.getPage(e),e=r[t])&&(t=Object.keys(e))&&0<t.length&&-1!==t.indexOf("shapeAnnotation")&&(t=e.shapeAnnotation)&&0<t.length&&t.forEach(function(t){var e=Object.keys(t);if(e&&0<e.length&&-1!==e.indexOf("type")){var i,r,n,s=new D(h._crossReference),a=(s.update("Type",L.get("Annot")),!0);switch(t.type.toLowerCase()){case"line":s.update("Subtype",L.get("Line"));break;case"circle":s.update("Subtype",L.get("Circle"));break;case"square":s.update("Subtype",L.get("Square"));break;case"polyline":s.update("Subtype",L.get("PolyLine"));break;case"polygon":s.update("Subtype",L.get("Polygon"));break;case"ink":s.update("Subtype",L.get("Ink"));break;case"popup":s.update("Subtype",L.get("Popup"));break;case"text":s.update("Subtype",L.get("Text"));break;case"freetext":s.update("Subtype",L.get("FreeText"));break;case"stamp":s.update("Subtype",L.get("Stamp"));break;case"highlight":s.update("Subtype",L.get("Highlight"));break;case"squiggly":s.update("Subtype",L.get("Squiggly"));break;case"underline":s.update("Subtype",L.get("Underline"));break;case"strikeout":s.update("Subtype",L.get("StrikeOut"));break;case"fileattachment":s.update("Subtype",L.get("FileAttachment"));break;case"sound":s.update("Subtype",L.get("Sound"));break;case"redact":s.update("Subtype",L.get("Redact"));break;case"caret":s.update("Subtype",L.get("Caret"));break;default:a=!1}a&&(h._addAnnotationData(s,t,e),t=o._pageDictionary)&&(i=(e=o.annotations)._parseAnnotation(s))&&(i._isImported=!0,r=h._crossReference._getNextReference(),h._crossReference._cacheMap.set(r,s),(s.has("NM")||s.has("IRT"))&&h._addReferenceToGroup(r,s),i._ref=r,n=e._annotations.length,e._annotations.push(r),e._comments&&0<e._comments.length&&(e._comments=[]),t.set("Annots",e._annotations),t._updated=!0,e._parsedAnnotations.set(n,i),h._handlePopup(e,r,s,t))}})}),0<this._groupHolders.length)for(var e=0;e<this._groupHolders.length;e++){var s=this._groupHolders[Number.parseInt(e.toString(),10)],a=s.get("IRT");a&&""!==a&&(this._groupReferences.has(a)?s.update("IRT",this._groupReferences.get(a)):delete s._map.IRT)}this._groupHolders=[],this._groupReferences=new Map}},o.prototype._addAnnotationData=function(l,u,t){var f,g,y,e,m=this,b=new D(this._crossReference),S=new D(this._crossReference),w=new Map,v=[],P="";t.forEach(function(t){var e,i,r,n,s,a=u[t];switch(t.toLowerCase()){case"start":case"end":m._addLinePoints(a,v),4===v.length&&(l.update("L",v),v=[]);break;case"itex":break;case"state":m._addString(l,"State",a);break;case"statemodel":m._addString(l,"StateModel",a);break;case"replytype":"group"===a.toLowerCase()&&l.update("RT",L.get("Group"));break;case"inreplyto":m._addString(l,"IRT",a);break;case"dashes":case"width":case"intensity":case"style":m._addBorderStyle(t,a,b,S);break;case"rect":(y=a)&&((s=[]).push(Number.parseFloat(y.x)),s.push(Number.parseFloat(y.y)),s.push(Number.parseFloat(y.width)),s.push(Number.parseFloat(y.height)),s)&&4===s.length&&l.update("Rect",s);break;case"color":(a=ks(a))&&3===a.length&&l.update("C",[a[0]/255,a[1]/255,a[2]/255]);break;case"oc":a&&"Redact"===l.get("Subtype").name&&(y=a.split(","),e=[],y.forEach(function(t){e.push(Number.parseFloat(t))}),e)&&0<e.length&&l.update("OC",e);break;case"interior-color":(a=ks(a))&&3===a.length&&l.update("IC",[a[0]/255,a[1]/255,a[2]/255]);break;case"date":m._addString(l,"M",a);break;case"creationdate":m._addString(l,"CreationDate",a);break;case"name":m._addString(l,"NM",a);break;case"icon":a&&l.update("Name",L.get(a));break;case"subject":m._addString(l,"Subj",a);break;case"title":m._addString(l,"T",a);break;case"rotation":l.update("Rotate",Number.parseFloat(a));break;case"fringe":m._addFloatPoints(l,"RD",m._parseFloatPoints(a));break;case"it":a&&l.update("IT",L.get(a));break;case"leaderlength":l.update("LL",Number.parseFloat(a));break;case"leaderextend":l.update("LLE",Number.parseFloat(a));break;case"caption":m._addBoolean(l,"Cap",a.toLowerCase());break;case"caption-style":a&&l.update("CP",L.get(a));break;case"callout":m._addFloatPoints(l,"CL",m._parseFloatPoints(a));break;case"coords":m._addFloatPoints(l,"QuadPoints",m._parseFloatPoints(a));break;case"border":m._addFloatPoints(l,"Border",m._parseFloatPoints(a));break;case"opacity":l.update("CA",Number.parseFloat(a));break;case"defaultstyle":a&&(i=Object.keys(a))&&0<i.length&&(r="",n=0,i.forEach(function(t){var e=a[t];r+=t+":"+e,n<i.length-1&&(r+=";"),n++}),m._addString(l,"DS",r));break;case"defaultappearance":m._addString(l,"DA",a);break;case"contents-richtext":"string"==typeof a&&m._addString(l,"RC",a);break;case"flags":if(a&&"string"==typeof a){for(var o=x.PdfAnnotationFlag.default,h=a.split(","),c=0;c<h.length;c++){var _=ss(h[Number.parseInt(c.toString(),10)]);0===c?o=_:o|=_}l.update("F",o)}break;case"open":m._addBoolean(l,"Open",a.toLowerCase());break;case"repeat":m._addBoolean(l,"Repeat",a.toLowerCase());break;case"overlaytext":m._addString(l,"OverlayText",a);break;case"contents":"string"==typeof a&&(a=-1!==a.indexOf("\\r")?a.replace("\\r","\r"):a)&&m._addString(l,"Contents",a);break;case"q":l.update("Q",Number.parseInt(a,10));break;case"inklist":a&&(s=Object.keys(a))&&0<s.length&&-1!==s.indexOf("gesture")&&(s=a.gesture)&&0<s.length&&l.update("InkList",s);break;case"head":f=a;break;case"tail":g=a;break;case"creation":case"modification":case"file":case"bits":case"channels":case"encoding":case"rate":case"length":case"filter":case"mode":case"size":w.set(t,a);break;case"data":P=a;break;case"vertices":if(a&&"string"==typeof a){var d=a.split(/[,;]/);if(d&&0<d.length){for(var p=[],c=0;c<d.length;c++)p.push(Number.parseFloat(d[Number.parseInt(c.toString(),10)]));0<p.length&&p.length%2==0&&l.update("Vertices",p)}}break;case"appearance":m._addAppearanceData(l,a);break;case"allowedinteractions":a&&("string"==typeof a?m._addString(l,"AllowedInteractions",a):(s=Object.keys(a))&&0<s.length&&-1!==s.indexOf("unicodeData")&&(s=JSON.stringify(a.unicodeData),a=_s(us(s=s.substring(1,s.length-1),!1),!0),m._addString(l,"AllowedInteractions",a)));break;default:m._document._allowImportCustomData&&"type"!==t&&"page"!==t&&m._addString(l,t,"string"==typeof a?a:JSON.stringify(a))}}),this._addMeasureDictionary(l,u,t),f?g?l.update("LE",[L.get(f),L.get(g)]):l.update("LE",f):g&&l.update("LE",g),0<S.size&&(S.update("Type",L.get("Border")),e=this._crossReference._getNextReference(),S.objId=e.objectNumber+" "+e.generationNumber,this._crossReference._cacheMap.set(e,S),l.update("BS",e)),0<b.size&&(e=this._crossReference._getNextReference(),S.objId=e.objectNumber+" "+e.generationNumber,this._crossReference._cacheMap.set(e,b),l.update("BE",e)),this._addStreamData(l,w,P)},o.prototype._addLinePoints=function(t,e){t&&-1!==t.indexOf(",")&&t.split(",").forEach(function(t){e.push(Number.parseFloat(t))})},o.prototype._addString=function(t,e,i){i&&t.update(e,i)},o.prototype._addBoolean=function(t,e,i){i&&t.update(e,"yes"===i||"true"===i)},o.prototype._addBorderStyle=function(t,e,i,r){var n="",s=!0;switch(e){case"dash":n="D";break;case"solid":n="S";break;case"bevelled":n="B";break;case"inset":n="I";break;case"underline":n="U";break;case"cloudy":s=!(n="C")}switch(t.toLowerCase()){case"width":r.update("W",Number.parseFloat(e));break;case"intensity":i.update("I",Number.parseFloat(e));break;case"dashes":e&&-1!==e.indexOf(",")&&r.update("D",this._parseFloatPoints(e))}n&&(s?r:i).update("S",L.get(n))},o.prototype._parseFloatPoints=function(t){var t=t.split(","),e=[];return t.forEach(function(t){e.push(Number.parseFloat(t))}),e},o.prototype._addFloatPoints=function(t,e,i){i&&0<i.length&&t.update(e,i)},o.prototype._addMeasureDictionary=function(t,e,i){var r=new D(this._crossReference),n=[],s=[],a=[],o=[],h=[];r.set("A",n),r.set("D",s),r.set("X",a),r.set("T",o),r.set("V",h),-1!==i.indexOf("ratevalue")&&this._addString(r,"R",e.ratevalue),-1!==i.indexOf("subtype")&&this._addString(r,"Subtype",e.subtype),-1!==i.indexOf("targetunitconversion")&&this._addString(r,"TargetUnitConversion",e.targetunitconversion),-1!==i.indexOf("area")&&n.push(this._readDictionaryElements(e.area)),-1!==i.indexOf("distance")&&s.push(this._readDictionaryElements(e.distance)),-1!==i.indexOf("xformat")&&a.push(this._readDictionaryElements(e.xformat)),-1!==i.indexOf("tformat")&&o.push(this._readDictionaryElements(e.tformat)),-1!==i.indexOf("vformat")&&h.push(this._readDictionaryElements(e.vformat)),-1!==i.indexOf("type1")&&(r.set("Type",L.get("Measure")),n=this._crossReference._getNextReference(),r.objId=n.objectNumber+" "+n.generationNumber,this._crossReference._cacheMap.set(n,r),t.update("Measure",n))},o.prototype._readDictionaryElements=function(i){var t=Object.keys(i),r=new D(this._crossReference);return t&&0<t.length&&t.forEach(function(t){var e=i[t];if(t&&e)switch(t){case"d":r.set("D",Number.parseFloat(e));break;case"c":r.set("C",Number.parseFloat(e));break;case"rt":r.set("RT",e);break;case"rd":r.set("RD",e);break;case"ss":r.set("SS",e);break;case"u":r.set("U",e);break;case"f":r.set("F",L.get(e));break;case"fd":r.set("FD",e);break;case"type":r.set("Type",L.get(e))}}),r},o.prototype._addStreamData=function(t,e,i){var r,n,s,a,o=this,h=t.get("Subtype").name,i=us(i,!0);"Sound"===h?((r=new co(i)).dictionary._crossReference=this._crossReference,r.dictionary.update("Type",L.get("Sound")),e.forEach(function(t,e){if(e&&t)switch(e){case"bits":case"rate":case"channels":r.dictionary.set(e,Number.parseInt(t,10));break;case"encoding":r.dictionary.set("E",L.get(t));break;case"filter":r.dictionary.set("Filter",L.get("FlateDecode"))}}),r.reference=this._crossReference._getNextReference(),r.dictionary.objId=r.reference.objectNumber+" "+r.reference.generationNumber,this._crossReference._cacheMap.set(r.reference,r),t.update("Sound",r.reference)):"FileAttachment"===h&&((n=new D(this._crossReference)).update("Type",L.get("Filespec")),(s=new co(i)).dictionary._crossReference=this._crossReference,a=new D(this._crossReference),e.forEach(function(t,e){if(e&&t){var i;switch(e){case"file":o._addString(n,"F",t),o._addString(n,"UF",t);break;case"size":void 0!==(i=Number.parseInt(t,10))&&(a.update("Size",i),s.dictionary.update("DL",i));break;case"creation":o._addString(a,"CreationDate",t);break;case"modification":o._addString(a,"ModificationDate",t)}}}),s.dictionary.update("Params",a),s.dictionary.update("Filter",L.get("FlateDecode")),s.reference=this._crossReference._getNextReference(),s.dictionary.objId=s.reference.objectNumber+" "+s.reference.generationNumber,this._crossReference._cacheMap.set(s.reference,s),(h=new D(this._crossReference)).update("F",s.reference),n.update("EF",h),i=this._crossReference._getNextReference(),n.objId=i.objectNumber+" "+i.generationNumber,this._crossReference._cacheMap.set(i,n),t.update("FS",i))},o.prototype._addAppearanceData=function(t,e){if(e){var i=_s(ys(e,!1));if(i.startsWith("{")&&!i.endsWith("}"))for(;0<i.length&&!i.endsWith("}");)i=i.substring(0,i.length-1);var r,e=JSON.parse(i);e&&(r=Object.keys(e))&&0<r.length&&-1!==r.indexOf("ap")&&t.update("AP",this._parseDictionary(e.ap))}},o.prototype._parseAppearance=function(t){var e,i,r=this,n=Object.keys(t);return-1!==n.indexOf("name")?e=L.get(t.name):-1!==n.indexOf("int")?e=Number.parseInt(t.int,10):-1!==n.indexOf("fixed")?e=Number.parseFloat(t.fixed):-1!==n.indexOf("string")?e=t.string:-1!==n.indexOf("boolean")?e="true"===t.boolean:-1!==n.indexOf("array")?(i=t.array,e=[],i.forEach(function(t){e.push(r._parseAppearance(t))})):-1!==n.indexOf("dict")?0<(i=this._parseDictionary(t.dict)).size?(e=this._crossReference._getNextReference(),i.objId=e.objectNumber+" "+e.generationNumber,this._crossReference._cacheMap.set(e,i)):e=new D(this._crossReference):-1!==n.indexOf("stream")?(i=this._parseStream(t.stream),e=this._crossReference._getNextReference(),i.reference=e,i.dictionary.objId=e.objectNumber+" "+e.generationNumber,this._crossReference._cacheMap.set(e,i)):e=-1!==n.indexOf("unicodeData")?_s(us(t.unicodeData,!1),!0):null,e},o.prototype._parseDictionary=function(i){var t,r=this,n=new D(this._crossReference);return i&&(t=Object.keys(i))&&0<t.length&&t.forEach(function(t){var e=i[t];"data"!==t&&(e=r._parseAppearance(e),n.update(t,e))}),n},o.prototype._parseStream=function(t){var e,i,r=Object.keys(t);return t&&r.indexOf("data")&&(r=void 0,(i=t.data)&&(e=Object.keys(i))&&-1!==e.indexOf("bytes")&&(e=i.bytes)&&(r=us(e,!0)),i=new co(r=r||[]),this._crossReference?this._parseStreamElements(i,t):i._pendingResources=JSON.stringify(t),e=i),e},o.prototype._parseStreamElements=function(t,e){var i,r;(e=void 0===e&&t._pendingResources?JSON.parse(t._pendingResources):e)&&(r=!1,(r=(e=this._parseDictionary(e))&&e.has("Subtype")?(i=e.get("Subtype"))&&"Image"===i.name:r)||this._isImport&&t._isCompress?t._isCompress=!1:(e.has("Length")&&delete e._map.Length,e.has("Filter")&&delete e._map.Filter),t.dictionary=e)},o.prototype._getValidString=function(t){return t=-1!==(t=-1!==(t=-1!==(t=-1!==(t=-1!==(t=-1!==(t=-1!==(t=-1!==t.indexOf("\\")?t.replace(/\\/g,"\\\\"):t).indexOf('"')?t.replace(/"/g,'\\"'):t).indexOf("[")?t.replace(/\[/g,"\\["):t).indexOf("]")?t.replace(/\[/g,"\\]"):t).indexOf("{")?t.replace(/\[/g,"\\{"):t).indexOf("}")?t.replace(/\}/g,"\\}"):t).indexOf("\n")?t.replace(/\n/g,"\\n"):t).indexOf("\r")?t.replace(/\r/g,"\\r"):t};var Le,De,Be=o;function o(t){var e=De.call(this)||this;return e._isImport=!1,e._isColorSpace=!1,e._isDuplicate=!1,e._isGroupingSupport=!1,null!=t&&(e._fileName=t),e}Object.defineProperty(Oe.prototype,"graphics",{get:function(){return this._isReadOnly?null:(void 0===this._g&&(this._g=new _e(this._size,this._content,this._crossReference,this),this._writeTransformation&&this._g._initializeCoordinates(),this._g._isTemplateGraphics=!0),this._g)},enumerable:!0,configurable:!0}),Object.defineProperty(Oe.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(Oe.prototype,"_originalSize",{get:function(){return this._templateOriginalSize},enumerable:!0,configurable:!0}),Oe.prototype._initialize=function(){this._content.dictionary.set("Type",L.get("XObject")),this._content.dictionary.set("Subtype",L.get("Form"))},Oe.prototype._exportStream=function(t,e){var i=new Be,e=(i._crossReference=e,i._isAnnotationExport=!0,new Map);i._writeObject(e,t.get("N"),t,"normal"),this._appearance=i._convertToJson(e),i._dispose()},Oe.prototype._importStream=function(t,e){var i=new Be,r=(t&&(i._crossReference=this._crossReference),JSON.parse(this._appearance));r&&(r=r[e?"resources":"normal"])&&(e?(e=i._parseDictionary(r.dict),t&&this._content.dictionary.update("Resources",e)):(this._content=i._parseStream(r.stream),t&&(this._content.dictionary._crossReference=this._crossReference,this._content.dictionary._updated=!0))),i._dispose()},Oe.prototype._updatePendingResource=function(t){var e;this._content._pendingResources&&""!==this._content._pendingResources&&((e=new Be)._crossReference=t,e._parseStreamElements(this._content),this._content._pendingResources="",e._dispose())};var N=Oe;function Oe(t,e){this._isExported=!1,this._isResourceExport=!1,this._isSignature=!1,this._crossReference=e,t instanceof y?(this._content=t,this._content.dictionary.has("Type")&&this._content.dictionary.has("Subtype")||this._initialize(),(e=this._content.dictionary.getArray("BBox"))&&3<e.length&&(e=Ps(e),this._size=[e.width,e.height],this._templateOriginalSize=this._size),this._isReadOnly=!0):void 0!==t?(this._size=[t[2],t[3]],this._content=new co([]),this._content.dictionary._crossReference=this._crossReference,this._initialize(),this._content.dictionary.set("BBox",[t[0],t[1],t[0]+t[2],t[1]+t[3]])):this._isReadOnly=!0,this._writeTransformation=!0}Me=function(t,e){return(Me=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}))(t,e)};var Me,e=function(t,e){function i(){this.constructor=t}Me(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Ee=(Object.defineProperty(je.prototype,"next",{get:function(){return this._next},set:function(t){this._next=t;var e=this._page._crossReference._getNextReference();this._page._crossReference._cacheMap.set(e,t._dictionary),t._dictionary.objId=e.toString(),this._dictionary.update("Next",e)},enumerable:!0,configurable:!0}),je);function je(){}e(Ue,Ve=Ee),Object.defineProperty(Ue.prototype,"destination",{get:function(){return this._destination},set:function(t){this._destination=t},enumerable:!0,configurable:!0});var Ve,ze=Ue;function Ue(t){var e=Ve.call(this)||this;return t instanceof Cn?(e._destination=t,e._page=t.page):(e._page=t,e._destination=new Cn(t,[0,0])),e._dictionary=new D,e._dictionary.update("Type",new L("Action")),e._dictionary.update("S",new L("GoTo")),e}Object.defineProperty(We.prototype,"mouseEnter",{get:function(){return this._mouseEnter||(this._mouseEnter=this._getPdfAction("E")),this._mouseEnter},set:function(t){t&&(this._mouseEnter=t,this._updateAction(this._mouseEnter,"E"))},enumerable:!0,configurable:!0}),Object.defineProperty(We.prototype,"mouseLeave",{get:function(){return this._mouseLeave||(this._mouseLeave=this._getPdfAction("X")),this._mouseLeave},set:function(t){t&&(this._mouseLeave=t,this._updateAction(this._mouseLeave,"X"))},enumerable:!0,configurable:!0}),Object.defineProperty(We.prototype,"mouseUp",{get:function(){return this._mouseUp||(this._mouseUp=this._getPdfAction("U")),this._mouseUp},set:function(t){t&&(this._mouseUp=t,this._updateAction(this._mouseUp,"U"))},enumerable:!0,configurable:!0}),Object.defineProperty(We.prototype,"mouseDown",{get:function(){return this._mouseDown||(this._mouseDown=this._getPdfAction("D")),this._mouseDown},set:function(t){t&&(this._mouseDown=t,this._updateAction(this._mouseDown,"D"))},enumerable:!0,configurable:!0}),Object.defineProperty(We.prototype,"gotFocus",{get:function(){return this._gotFocus||(this._gotFocus=this._getPdfAction("Fo")),this._gotFocus},set:function(t){t&&(this._gotFocus=t,this._updateAction(this._gotFocus,"Fo"))},enumerable:!0,configurable:!0}),Object.defineProperty(We.prototype,"lostFocus",{get:function(){return this._lostFocus||(this._lostFocus=this._getPdfAction("Bl")),this._lostFocus},set:function(t){t&&(this._lostFocus=t,this._updateAction(this._lostFocus,"Bl"))},enumerable:!0,configurable:!0}),We.prototype._updateAction=function(t,e){var i,r,n,s;0<this._field._kidsCount&&(s=this._field.itemAt(0))&&s._dictionary&&t instanceof ze&&(i=new D,r=t._page,(n=t.destination)._destinationMode===x.PdfDestinationMode.location?t._dictionary.update("D",[r._ref,new L("XYZ"),n.location[0],r.size[1],n.zoom]):n._destinationMode===x.PdfDestinationMode.fitR?t._dictionary.update("D",[r._ref,new L("FitR"),0,0,0,0]):n._destinationMode===x.PdfDestinationMode.fitH?t._dictionary.update("D",[r._ref,new L("FitH"),r.size[1]]):n._destinationMode===x.PdfDestinationMode.fitToPage&&t._dictionary.update("D",[r._ref,new L("Fit")]),i.set(e,t._dictionary),i._updated=!0,s._dictionary.update("AA",i))},We.prototype._getPdfAction=function(t){var e,i,r=this._field.itemAt(0);return r&&r._dictionary&&r._dictionary.has("AA")&&(i=r._dictionary.get("AA"))&&i.has(t)&&(i=i.get(t))&&i.has("S")&&(t=i.get("S"))&&"GoTo"===t.name&&i.has("D")&&(i._crossReference||(i._crossReference=r._crossReference),e=new ze(Ia(i,"D"))),e};var He=We;function We(t){this._field=t}Ge=function(t,e){return(Ge=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}))(t,e)};var Ge,e=function(t,e){function i(){this.constructor=t}Ge(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Ke=(Object.defineProperty(h.prototype,"itemsCount",{get:function(){return this._kids?this._kids.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"form",{get:function(){return this._form},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"name",{get:function(){var t;return void 0===this._name&&(t=Ss(this._dictionary,"T",!1,!1,"Parent"))&&0<t.length&&(1===t.length?this._name=t[0]:this._name=t.join(".")),this._name},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"actualName",{get:function(){var t;return void 0===this._actualName&&this._dictionary&&this._dictionary.has("T")&&(t=this._dictionary.get("T"))&&"string"==typeof t&&(this._actualName=t),this._actualName},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"mappingName",{get:function(){var t;return void 0===this._mappingName&&this._dictionary.has("TM")&&(t=this._dictionary.get("TM"))&&"string"==typeof t&&(this._mappingName=t),this._mappingName},set:function(t){void 0!==this.mappingName&&this._mappingName===t||(this._mappingName=t,this._dictionary.update("TM",t))},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"toolTip",{get:function(){var t;return void 0===this._alternateName&&this._dictionary&&this._dictionary.has("TU")&&(t=this._dictionary.get("TU"))&&"string"==typeof t&&(this._alternateName=t),this._alternateName},set:function(t){void 0!==this.toolTip&&this._alternateName===t||(this._alternateName=t,this._dictionary.update("TU",t))},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"visibility",{get:function(){if(this._isLoaded){var t=x.PdfFormFieldVisibility.visible,e=this.itemAt(this._defaultIndex),i=x.PdfAnnotationFlag.default;if(e&&e._hasFlags)i=e.flags;else{if(!this._dictionary.has("F"))return x.PdfFormFieldVisibility.visibleNotPrintable;i=this._dictionary.get("F")}e=3;switch((i&x.PdfAnnotationFlag.hidden)===x.PdfAnnotationFlag.hidden&&(e=0),(i&x.PdfAnnotationFlag.noView)===x.PdfAnnotationFlag.noView&&(e=1),(i&x.PdfAnnotationFlag.print)!==x.PdfAnnotationFlag.print&&(e&=2),e){case 0:t=x.PdfFormFieldVisibility.hidden;break;case 1:t=x.PdfFormFieldVisibility.hiddenPrintable;break;case 2:t=x.PdfFormFieldVisibility.visibleNotPrintable;break;case 3:t=x.PdfFormFieldVisibility.visible}}else void 0===this._visibility&&(this._visibility=x.PdfFormFieldVisibility.visible),t=this._visibility;return t},set:function(t){var e=this.itemAt(this._defaultIndex);if(this._isLoaded)!e||e._hasFlags&&this.visibility===t?this._dictionary.has("F")&&this.visibility===t||(pa(this._dictionary,t),this._dictionary._updated=!0):(pa(e._dictionary,t),this._dictionary._updated=!0);else if(this.visibility!==t)switch(this._visibility=t){case x.PdfFormFieldVisibility.hidden:e.flags=x.PdfAnnotationFlag.hidden;break;case x.PdfFormFieldVisibility.hiddenPrintable:e.flags=x.PdfAnnotationFlag.noView|x.PdfAnnotationFlag.print;break;case x.PdfFormFieldVisibility.visible:e.flags=x.PdfAnnotationFlag.print;break;case x.PdfFormFieldVisibility.visibleNotPrintable:e.flags=x.PdfAnnotationFlag.default}},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"bounds",{get:function(){var t,e=this.itemAt(this._defaultIndex);return e&&(e._page=this.page),e&&e.bounds?t=e.bounds:this._dictionary&&this._dictionary.has("Rect")&&(t=vs(this._dictionary,this.page)),t=null==t?{x:0,y:0,width:0,height:0}:t},set:function(t){if(0===t.x&&0===t.y&&0===t.width&&0===t.height)throw new Error("Cannot set empty bounds");var e=this.itemAt(this._defaultIndex);this._isLoaded&&(void 0===e||this._dictionary.has("Rect"))?this._dictionary.update("Rect",xs([t.x,t.y,t.width,t.height],this.page)):(e._page=this.page,e.bounds=t)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"rotate",{get:function(){var t,e=this.itemAt(this._defaultIndex);if(e&&void 0!==e.rotate)t=e.rotate;else if(this._dictionary.has("R"))t=this._dictionary.get("R");else for(var i=0;i<this._kidsCount&&void 0===t;i++)i!==this._defaultIndex&&(e=this.itemAt(i))&&void 0!==e.rotate&&(t=e.rotate);return t=void 0===t?0:t},set:function(t){var e=this.itemAt(this._defaultIndex);e?e.rotate=t:this._dictionary.has("R")&&this._dictionary.get("R")===t||this._dictionary.update("R",t)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"color",{get:function(){var t,e=this.itemAt(this._defaultIndex);return e&&e.color?t=e.color:this._defaultAppearance&&(t=this._da.color),t},set:function(t){var e=this.itemAt(this._defaultIndex);e&&e.color&&F(t)?e.color=t:(e=!1,this._defaultAppearance||(this._da=new yi(""),e=!0),!e&&this._da.color===t||(this._da.color=t,this._dictionary.update("DA",this._da.toString())))},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"backColor",{get:function(){return this._parseBackColor(!1)},set:function(t){this._updateBackColor(t)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"borderColor",{get:function(){return this._parseBorderColor(!0)},set:function(t){this._updateBorderColor(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"readOnly",{get:function(){return 0!=(this._fieldFlags&x._FieldFlag.readOnly)},set:function(t){t?this._fieldFlags|=x._FieldFlag.readOnly:(this._fieldFlags===x._FieldFlag.readOnly&&(this._fieldFlags|=x._FieldFlag.default),this._fieldFlags&=~x._FieldFlag.readOnly)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"required",{get:function(){return 0!=(this._fieldFlags&x._FieldFlag.required)},set:function(t){t?this._fieldFlags|=x._FieldFlag.required:this._fieldFlags&=~x._FieldFlag.required},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"visible",{get:function(){var t,e;return this._isLoaded?(t=this.itemAt(this._defaultIndex),e=x.PdfAnnotationFlag.default,t&&t._hasFlags?e=t.flags:this._dictionary.has("F")&&(e=this._dictionary.get("F")),e!==x.PdfAnnotationFlag.hidden):this._visible},set:function(t){this._isLoaded||this._visible===t||t||(this._visible=t,this.itemAt(this._defaultIndex).flags=x.PdfAnnotationFlag.hidden)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"border",{get:function(){var t,e=this.itemAt(this._defaultIndex);if(e&&e._dictionary.has("BS"))t=e.border;else if(t=new rn,this instanceof Ye||(t._width=0),t._dictionary=this._dictionary,null!==this._dictionary&&void 0!==this._dictionary&&this._dictionary.has("BS")){e=this._dictionary.get("BS");if(e){if(e.has("W")&&(t._width=e.get("W")),e.has("S")){var i=e.get("S");if(i)switch(i.name){case"D":t._style=x.PdfBorderStyle.dashed;break;case"B":t._style=x.PdfBorderStyle.beveled;break;case"I":t._style=x.PdfBorderStyle.inset;break;case"U":t._style=x.PdfBorderStyle.underline;break;default:t._style=x.PdfBorderStyle.solid}}e.has("D")&&(t._dash=e.getArray("D"))}}return t},set:function(t){var e=this.itemAt(this._defaultIndex);e?this._updateBorder(e._dictionary,t):this._updateBorder(this._dictionary,t)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"rotationAngle",{get:function(){var t=x.PdfRotationAngle.angle0,e=this.itemAt(this._defaultIndex);return t=e?e.rotationAngle:t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"export",{get:function(){return!(0!=(this._fieldFlags&x._FieldFlag.noExport))},set:function(t){t?this._fieldFlags&=~x._FieldFlag.noExport:this._fieldFlags|=x._FieldFlag.noExport},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"tabIndex",{get:function(){if(this._isLoaded){var t=void 0;if(this.page._pageDictionary.has("Annots")&&(t=this.page._pageDictionary.get("Annots")),this._kids&&0<this._kids.length)for(var e=0;e<this._kids.length;e++){var i,r=this._kids[Number.parseInt(e.toString(),10)];if(r)if(this.page._pageDictionary.has("Annots"))if(t)if(-1!==(i=t.indexOf(r)))return i}else if(this._dictionary&&this._dictionary.has("Subtype")&&"Widget"===this._dictionary.get("Subtype").name)if(this._ref)if(t)if(-1!==(i=t.indexOf(this._ref)))return i;return-1}return this._tabIndex},set:function(t){var e,i;this._tabIndex=t,this._isLoaded&&(t=this.page)&&(t.tabOrder===x.PdfFormFieldsTabOrder.manual||this.form&&this.form._tabOrder===x.PdfFormFieldsTabOrder.manual)&&t._pageDictionary.has("Annots")&&(i=t._pageDictionary.get("Annots"),e=new pn(i,this._crossReference,t),t._annotations=e,(e=i.indexOf(this._ref))<0&&(e=this._annotationIndex),i=t.annotations._reArrange(this._ref,this._tabIndex,e),t._pageDictionary.update("Annots",i),t._pageDictionary._updated=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"page",{get:function(){if(!this._page){var t,e=this.itemAt(this._defaultIndex),i=(void 0!==e?e:this)._dictionary,r=(this._crossReference&&(t=this._crossReference._document),void 0);if(i&&i.has("P")){var n=i.getRaw("P");if(n&&t)for(var s=0;s<t.pageCount;s++){var a=t.getPage(s);if(a&&a._ref===n){r=a;break}}}if(!r&&t){i=(void 0!==e?e:this)._ref;if(!(r=!r&&i?zs(t,i):r)&&this._kids&&0<this._kids.length)for(s=0;s<this._kids.length&&!(r=zs(t,this._kids[Number.parseInt(s.toString(),10)]));s++);}this._page=r}return this._page},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"flatten",{get:function(){return this._flatten},set:function(t){this._flatten=t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"_grayBrush",{get:function(){return this._gray||(this._gray=new I([128,128,128])),this._gray},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"_silverBrush",{get:function(){return this._silver||(this._silver=new I([198,198,198])),this._silver},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"_whiteBrush",{get:function(){return this._white||(this._white=new I([255,255,255])),this._white},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"_blackBrush",{get:function(){return this._black||(this._black=new I([0,0,0])),this._black},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"_kidsCount",{get:function(){return this._kids?this._kids.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"_hasBackColor",{get:function(){var t,e;return this._isLoaded?((t=this._mkDictionary)||(e=this.itemAt(this._defaultIndex))&&e._dictionary.has("MK")&&(t=e._dictionary.get("MK")),t&&t.has("BG")):!this._isTransparentBackColor},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"_hasBorderColor",{get:function(){var t,e;return this._isLoaded?((t=this._mkDictionary)||(e=this.itemAt(this._defaultIndex))&&e._dictionary.has("MK")&&(t=e._dictionary.get("MK")),t&&t.has("BC")):!this._isTransparentBorderColor},enumerable:!0,configurable:!0}),h.prototype._parseBackColor=function(t){var e;return e=(!t||this._isLoaded&&this._hasBackColor||!this._isLoaded&&!this._isTransparentBackColor)&&((t=this.itemAt(this._defaultIndex))&&t.backColor?e=t.backColor:this._mkDictionary&&(t=this._mkDictionary)&&t.has("BG")&&(t=t.getArray("BG"))&&(e=Is(t)),null==e)?[255,255,255]:e},h.prototype._parseBorderColor=function(t){var e;return e=(!t||this._isLoaded&&this._hasBorderColor||!this._isLoaded&&!this._isTransparentBorderColor)&&((t=this.itemAt(this._defaultIndex))&&t.borderColor?e=t.borderColor:this._mkDictionary&&(t=this._mkDictionary).has("BC")&&(t=t.getArray("BC"))&&(e=Is(t)),null==e)?[0,0,0]:e},h.prototype._updateBackColor=function(t,e){var i;(e=void 0===e?!1:e)&&F(t)&&4===t.length&&255!==t[3]?(this._isTransparentBackColor=!0,this._dictionary&&this._dictionary.has("BG")&&delete this._dictionary._map.BG,(i=this._mkDictionary)&&i.has("BG")&&(delete i._map.BG,this._dictionary._updated=!0),(e=this.itemAt(this._defaultIndex))&&(e.backColor=t)):(this._isTransparentBackColor=!1,(e=this.itemAt(this._defaultIndex))&&e.backColor!==t?e.backColor=t:void 0===(i=this._mkDictionary)?((e=new D(this._crossReference)).update("BG",[Number.parseFloat((t[0]/255).toFixed(3)),Number.parseFloat((t[1]/255).toFixed(3)),Number.parseFloat((t[2]/255).toFixed(3))]),this._dictionary.update("MK",e)):i.has("BG")&&Is(i.getArray("BG"))===t||(i.update("BG",[Number.parseFloat((t[0]/255).toFixed(3)),Number.parseFloat((t[1]/255).toFixed(3)),Number.parseFloat((t[2]/255).toFixed(3))]),this._dictionary._updated=!0))},h.prototype._updateBorderColor=function(t,e){var i;(e=void 0===e?!1:e)&&4===t.length&&255!==t[3]?(this._isTransparentBorderColor=!0,this._dictionary.has("BC")&&delete this._dictionary._map.BC,(i=this._mkDictionary)&&i.has("BC")&&(delete i._map.BC,this._dictionary.has("BS")&&(e=this._dictionary.get("BS"))&&e.has("W")&&delete e._map.W,this._dictionary._updated=!0),(e=this.itemAt(this._defaultIndex))&&(e.borderColor=t)):(this._isTransparentBorderColor=!1,(e=this.itemAt(this._defaultIndex))&&e.borderColor!==t?e.borderColor=t:void 0===(i=this._mkDictionary)?((e=new D(this._crossReference)).update("BC",[Number.parseFloat((t[0]/255).toFixed(3)),Number.parseFloat((t[1]/255).toFixed(3)),Number.parseFloat((t[2]/255).toFixed(3))]),this._dictionary.update("MK",e)):i.has("BC")&&Is(i.getArray("BC"))===t||(i.update("BC",[Number.parseFloat((t[0]/255).toFixed(3)),Number.parseFloat((t[1]/255).toFixed(3)),Number.parseFloat((t[2]/255).toFixed(3))]),this._dictionary._updated=!0))},h.prototype.itemAt=function(t){var e,i,r;return 0<=t&&t<this._kidsCount&&(this._parsedItems.has(t)?e=this._parsedItems.get(t):(i=void 0,(i=(r=this._kids[Number.parseInt(t.toString(),10)])&&r instanceof A?this._crossReference._fetch(r):i)&&((e=zr._load(i,this._crossReference))._ref=r,this._parsedItems.set(t,e)))),e},h.prototype.setAppearance=function(t){this._setAppearance=t},h.prototype.getValue=function(t){var e;if(!this._dictionary||!this._dictionary.has(t))throw new Error("PdfException: "+t+" is not found");var i=this._dictionary.get(t);if(null!=i&&i instanceof L)e=i.name;else{if("string"!=typeof i)throw new Error("PdfException: "+t+" is not found");e=i}return e},h.prototype.setValue=function(t,e){t&&""!==t&&e&&""!==e&&this._dictionary.update(t,e)},h.prototype.removeItemAt=function(i){var t,e,r;null!==this._dictionary&&void 0!==this._dictionary&&this._dictionary.has("Kids")&&0<this.itemsCount&&(t=this.itemAt(i))&&t._ref&&((e=t._getPage())&&e._removeAnnotation(t._ref),this._kids.splice(i,1),this._dictionary.set("Kids",this._kids),this._dictionary._updated=!0,this._parsedItems.delete(i),0<this._parsedItems.size)&&(r=new Map,this._parsedItems.forEach(function(t,e){i<e?r.set(e-1,t):r.set(e,t)}),this._parsedItems=r)},h.prototype.removeItem=function(t){t&&t._ref&&-1!==(t=this._kids.indexOf(t._ref))&&this.removeItemAt(t)},Object.defineProperty(h.prototype,"_fieldFlags",{get:function(){return void 0===this._flags&&(this._flags=Ss(this._dictionary,"Ff",!1,!0,"Parent"),void 0===this._flags)&&(this._flags=x._FieldFlag.default),this._flags},set:function(t){this._fieldFlags!==t&&(this._flags=t,this._dictionary.update("Ff",t))},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"_defaultAppearance",{get:function(){var t;return void 0===this._da&&(t=Ss(this._dictionary,"DA",!1,!0,"Parent"))&&""!==t&&(this._da=new yi(t)),this._da},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"_mkDictionary",{get:function(){var t;return t=this._dictionary&&this._dictionary.has("MK")?this._dictionary.get("MK"):t},enumerable:!0,configurable:!0}),h.prototype._updateBorder=function(t,e){var i,r=!1;t&&t.has("BS")?i=t.get("BS"):(i=new D(this._crossReference),t.update("BS",i),r=!0),void 0!==e.width?(i.update("W",e.width),t._updated=!0):r&&i.update("W",0),void 0!==e.style?(i.update("S",Cs(e.style)),t._updated=!0):r&&i.update("S",Cs(x.PdfBorderStyle.solid)),void 0!==e.dash&&(i.update("D",e.dash),t._updated=!0)},h.prototype._checkFieldFlag=function(t){t=t.get("F");return void 0!==t&&6===t},h.prototype._initializeFont=function(t){this._font=t;var e,i,r,n,s=this._crossReference._document,a=!1,o=((e=s?s.form._dictionary.has("DR")?s.form._dictionary.get("DR"):new D(this._crossReference):e)&&e.has("Font")&&((o=e.getRaw("Font"))&&o instanceof A?(a=!0,i=this._crossReference._fetch(o)):o instanceof D&&(i=o)),i||(i=new D(this._crossReference),e.update("Font",i)),!1),h=(this._font&&null!==this._font._key&&void 0!==this._font._key&&this._font._reference?(r=L.get(this._font._key),n=this._font._reference,o=!0):(r=L.get(Es()),n=this._crossReference._getNextReference(),this._font&&(this._font._key=r.name,this._font._reference=n)),n&&!o&&(t instanceof $t?this._font._pdfFontInternals&&(this._crossReference._cacheMap.set(n,this._font._pdfFontInternals),this._font._reference=n):this._font._dictionary&&(this._crossReference._cacheMap.set(n,this._font._dictionary),i.update(r.name,n),e._updated=!0,s.form._dictionary.update("DR",e),s.form._dictionary._updated=!0)),i.update(r.name,n),e._updated=!0,s.form._dictionary.update("DR",e),s.form._dictionary._updated=!0,this._fontName=r.name,new yi);if(h.fontName=this._fontName,h.fontSize=this._font._size,h.color=this.color||[0,0,0],this._dictionary.has("Kids"))for(var c=this._dictionary.getArray("Kids"),_=0;_<c.length;_++){var d=this.itemAt(_);c[Number.parseInt(_.toString(),10)].update("DA",h.toString()),d&&(d._da=h)}else this._dictionary.has("Subtype")&&"Widget"===this._dictionary.get("Subtype").name&&this._dictionary.update("DA",h.toString());a&&(e._updated=!0)},h.prototype._drawRectangularControl=function(t,e){switch(t.drawRectangle(e.bounds[0],e.bounds[1],e.bounds[2],e.bounds[3],e.backBrush),this._drawBorder(t,e.bounds,e.borderPen,e.borderStyle,e.borderWidth),e.borderStyle){case x.PdfBorderStyle.inset:this._drawLeftTopShadow(t,e.bounds,e.borderWidth,this._grayBrush),this._drawRightBottomShadow(t,e.bounds,e.borderWidth,this._silverBrush);break;case x.PdfBorderStyle.beveled:this._drawLeftTopShadow(t,e.bounds,e.borderWidth,this._whiteBrush),this._drawRightBottomShadow(t,e.bounds,e.borderWidth,e.shadowBrush)}},h.prototype._drawBorder=function(t,e,i,r,n){i&&0<n&&(r===x.PdfBorderStyle.underline?t.drawLine(i,e[0],e[0]+e[3]-n/2,e[0]+e[2],e[1]+e[3]-n/2):t.drawRectangle(e[0]+n/2,e[1]+n/2,e[2]-n,e[3]-n,i))},h.prototype._drawLeftTopShadow=function(t,e,i,r){var n=new C,s=[];s.push([e[0]+i,e[1]+i]),s.push([e[0]+i,e[1]+e[3]-i]),s.push([e[0]+2*i,e[1]+e[3]-2*i]),s.push([e[0]+2*i,e[1]+2*i]),s.push([e[0]+e[2]-2*i,e[1]+2*i]),s.push([e[0]+e[2]-i,e[1]+i]),n.addPolygon(s),t.drawPath(n,r)},h.prototype._drawRightBottomShadow=function(t,e,i,r){var n=new C,s=[];s.push([e[0]+i,e[1]+e[3]-i]),s.push([e[0]+2*i,e[1]+e[3]-2*i]),s.push([e[0]+e[2]-2*i,e[1]+e[3]-2*i]),s.push([e[0]+e[2]-2*i,e[1]+2*i]),s.push([e[0]+e[2]-i,e[1]+i]),s.push([e[0]+e[2]-i,e[1]+e[3]-i]),n.addPolygon(s),t.drawPath(n,r)},h.prototype._drawRadioButton=function(t,e,i,r){if("l"===i){var n,s=e.bounds,a=s[2];switch(this._enableGrouping&&(a=Math.min(s[2],s[3])),r){case x._PdfCheckFieldState.checked:case x._PdfCheckFieldState.unchecked:t.drawEllipse(s[0],s[1],a,s[3],e.backBrush);break;case x._PdfCheckFieldState.pressedChecked:case x._PdfCheckFieldState.pressedUnchecked:e.borderStyle===x.PdfBorderStyle.beveled||e.borderStyle===x.PdfBorderStyle.underline?t.drawEllipse(s[0],s[1],s[2],s[3],e.backBrush):t.drawEllipse(s[0],s[1],a,s[3],e.shadowBrush)}this._drawRoundBorder(t,s,e.borderPen,e.borderWidth),this._drawRoundShadow(t,e,r),r!==x._PdfCheckFieldState.checked&&r!==x._PdfCheckFieldState.pressedChecked||(n=[s[0]+e.borderWidth/2,s[1]+e.borderWidth/2,a-e.borderWidth,s[3]-e.borderWidth],t.drawEllipse(n[0]+n[2]/4,n[1]+n[2]/4,n[2]-n[2]/2,n[3]-n[2]/2,e.foreBrush))}else this._drawCheckBox(t,e,i,r)},h.prototype._drawRoundBorder=function(t,e,i,r){0===e[0]&&0===e[1]&&0===e[2]&&0===e[3]||t.drawEllipse(e[0]+r/2,e[1]+r/2,(this._enableGrouping?Math.min(e[2],e[3]):e[2])-r,e[3]-r,i)},h.prototype._drawRoundShadow=function(t,e,i){var r=e.borderWidth,n=-1.5*r,s=e.bounds[0]+n,a=e.bounds[1]+n,o=e.bounds[2]+2*n,n=e.bounds[3]+2*n,h=e.shadowBrush;if(h){var c=h._color,_=void 0,d=void 0;switch(e.borderStyle){case x.PdfBorderStyle.beveled:switch(i){case x._PdfCheckFieldState.pressedChecked:case x._PdfCheckFieldState.pressedUnchecked:_=new T(c,r),d=new T([255,255,255],r);break;case x._PdfCheckFieldState.checked:case x._PdfCheckFieldState.unchecked:_=new T([255,255,255],r),d=new T(c,r)}break;case x.PdfBorderStyle.inset:switch(i){case x._PdfCheckFieldState.pressedChecked:case x._PdfCheckFieldState.pressedUnchecked:_=new T([0,0,0],r),d=new T([0,0,0],r);break;case x._PdfCheckFieldState.checked:case x._PdfCheckFieldState.unchecked:_=new T([128,128,128],r),d=new T([192,192,192],r)}}_&&d&&(t.drawArc(s,a,o,n,135,180,_),t.drawArc(s,a,o,n,-45,180,d))}},h.prototype._drawCheckBox=function(t,e,i,r,n){switch(r){case x._PdfCheckFieldState.unchecked:case x._PdfCheckFieldState.checked:(e.borderPen||e.backBrush)&&t.drawRectangle(e.bounds[0],e.bounds[1],e.bounds[2],e.bounds[3],e.backBrush);break;case x._PdfCheckFieldState.pressedChecked:case x._PdfCheckFieldState.pressedUnchecked:e.borderStyle===x.PdfBorderStyle.beveled||e.backBrush||e.borderStyle===x.PdfBorderStyle.underline?(e.borderPen||e.backBrush)&&t.drawRectangle(e.bounds[0],e.bounds[1],e.bounds[2],e.bounds[3],e.backBrush):(e.borderPen||e.shadowBrush)&&t.drawRectangle(e.bounds[0],e.bounds[1],e.bounds[2],e.bounds[3],e.shadowBrush)}var s=e.bounds;if(this._drawBorder(t,e.bounds,e.borderPen,e.borderStyle,e.borderWidth),r===x._PdfCheckFieldState.pressedChecked||r===x._PdfCheckFieldState.pressedUnchecked)switch(e.borderStyle){case x.PdfBorderStyle.inset:this._drawLeftTopShadow(t,e.bounds,e.borderWidth,this._blackBrush),this._drawRightBottomShadow(t,e.bounds,e.borderWidth,this._whiteBrush);break;case x.PdfBorderStyle.beveled:this._drawLeftTopShadow(t,e.bounds,e.borderWidth,e.shadowBrush),this._drawRightBottomShadow(t,e.bounds,e.borderWidth,this._whiteBrush)}else switch(e.borderStyle){case x.PdfBorderStyle.inset:this._drawLeftTopShadow(t,e.bounds,e.borderWidth,this._grayBrush),this._drawRightBottomShadow(t,e.bounds,e.borderWidth,this._silverBrush);break;case x.PdfBorderStyle.beveled:this._drawLeftTopShadow(t,e.bounds,e.borderWidth,this._whiteBrush),this._drawRightBottomShadow(t,e.bounds,e.borderWidth,e.shadowBrush)}var a,o,h,c,_=0,d=0;switch(r){case x._PdfCheckFieldState.pressedChecked:case x._PdfCheckFieldState.checked:n?n=new m(x.PdfFontFamily.zapfDingbats,n._size):(a=e.borderStyle===x.PdfBorderStyle.beveled||e.borderStyle===x.PdfBorderStyle.inset,o=e.borderWidth,a&&(o*=2),a=Math.max(a?2*e.borderWidth:e.borderWidth,1),o=Math.min(o,a),d=e.bounds[2]>e.bounds[3]?e.bounds[3]:e.bounds[2],n=new m(x.PdfFontFamily.zapfDingbats,d-2*o),e.bounds[2]>e.bounds[3]&&(_=(e.bounds[3]-n._metrics._getHeight())/2)),0===d&&(d=e.bounds[3]),(e.pageRotationAngle!==x.PdfRotationAngle.angle0||0<e.rotationAngle)&&(a=t.save(),o=t._size,e.pageRotationAngle!==x.PdfRotationAngle.angle0&&(e.pageRotationAngle===x.PdfRotationAngle.angle90?(t.translateTransform(o[1],0),t.rotateTransform(90),c=o[1]-(s[0]+s[2]),s=[s[1],c,s[3],s[2]]):e.pageRotationAngle===x.PdfRotationAngle.angle180?(t.translateTransform(o[0],o[1]),t.rotateTransform(-180),s=[o[0]-(s[0]+s[2]),c=o[1]-(s[1]+s[3]),s[2],s[3]]):e.pageRotationAngle===x.PdfRotationAngle.angle270&&(t.translateTransform(0,o[0]),t.rotateTransform(270),s=[o[0]-(s[1]+s[3]),c=s[0],s[3],s[2]])),0<e.rotationAngle?(90===e.rotationAngle?s=e.pageRotationAngle===x.PdfRotationAngle.angle90?(t.translateTransform(0,o[1]),t.rotateTransform(-90),[o[1]-(s[1]+s[3]),c=s[0],s[3],s[2]]):s[2]>s[3]?(t.translateTransform(0,o[1]),t.rotateTransform(-90),[e.bounds[0],e.bounds[1],e.bounds[2],e.bounds[3]]):(h=s[0],s[0]=-(s[1]+s[3]),s[1]=h,h=s[3],s[3]=s[2]>n._metrics._getHeight()?s[2]:n._metrics._getHeight(),s[2]=h,t.rotateTransform(-90),[s[0],s[1],s[2],s[3]]):270===e.rotationAngle?(t.translateTransform(o[0],0),t.rotateTransform(-270),s=[s[1],c=o[0]-(s[0]+s[2]),s[3],s[2]]):180===e.rotationAngle&&(t.translateTransform(o[0],o[1]),t.rotateTransform(-180),s=[o[0]-(s[0]+s[2]),c=o[1]-(s[1]+s[3]),s[2],s[3]]),t.drawString(i,n,[s[0],s[1]-_,s[2],s[3]],null,e.foreBrush,new k(x.PdfTextAlignment.center,x.PdfVerticalAlignment.middle)),t.restore(a)):t.drawString(i,n,[s[0],s[1]-_,s[2],s[3]],null,e.foreBrush,new k(x.PdfTextAlignment.center,x.PdfVerticalAlignment.middle)))}},h.prototype._addToKid=function(t){var e;this._dictionary&&this._dictionary.has("Kids")?this._kids=this._dictionary.get("Kids"):(this._kids=[],this._dictionary.update("Kids",this._kids),this._parsedItems=new Map),-1===this._kids.indexOf(t._ref)&&(e=this._kidsCount,t._index=e,this._kids.push(t._ref),this._parsedItems.set(e,t))},h.prototype._drawTemplate=function(t,e,i){var r;t&&e&&((r=e.graphics).save(),e.rotation===x.PdfRotationAngle.angle90?(r.translateTransform(r._size[1],0),r.rotateTransform(90)):e.rotation===x.PdfRotationAngle.angle180?(r.translateTransform(r._size[0],r._size[1]),r.rotateTransform(-180)):e.rotation===x.PdfRotationAngle.angle270&&(r.translateTransform(0,r._size[0]),r.rotateTransform(270)),r._sw._setTextRenderingMode(x._TextRenderingMode.fill),r.drawTemplate(t,i),r.restore())},h.prototype._addToOptions=function(t,e){e instanceof pi&&e._listValues.push(t._text),e._options.push([t._value,t._text]),e._dictionary.set("Opt",e._options),e._dictionary._updated=!0,!t._isFont&&t._pdfFont&&this._initializeFont(t._pdfFont)},h.prototype._addAppearance=function(t,e,i){var r=new D,t=(t&&t.has("AP")?(r=t.get("AP"),R(t.get("AP"),this._crossReference,i)):(r=new D(this._crossReference),t.update("AP",r)),this._crossReference._getNextReference());this._crossReference._cacheMap.set(t,e._content),r.update(i,t)},h.prototype._rotateTextBox=function(t,e,i){var r=[0,0,0,0];return i===x.PdfRotationAngle.angle180?r=[e[0]-(t[0]+t[2]),e[1]-(t[1]+t[3]),t[2],t[3]]:i===x.PdfRotationAngle.angle270?r=[t[1],e[0]-(t[0]+t[2]),t[3],t[2]]:i===x.PdfRotationAngle.angle90&&(r=[e[1]-(t[1]+t[3]),t[0],t[3],t[2]]),r},h.prototype._checkIndex=function(t,e){if(t<0||0!==t&&e<=t)throw Error("Index out of range.")},h.prototype._getAppearanceStateValue=function(){var t;if(this._dictionary&&this._dictionary.has("Kids"))for(var e=0;e<this._kidsCount;e++){var i,r=this.itemAt(e);if(r&&r._dictionary&&r._dictionary.has("AS"))if((i=r._dictionary.get("AS"))&&"Off"!==i.name){t=i.name;break}}else this._dictionary&&this._dictionary.has("AS")&&(i=this._dictionary.get("AS"))&&"Off"!==i.name&&(t=i.name);return t},h.prototype._getTextAlignment=function(){var t;return null!==this._textAlignment&&void 0!==this._textAlignment||(this._isLoaded?(t=this.itemAt(this._defaultIndex))&&t._dictionary&&t._dictionary.has("Q")?this._textAlignment=t._dictionary.get("Q"):this._dictionary.has("Q")?this._textAlignment=this._dictionary.get("Q"):this._textAlignment=x.PdfTextAlignment.left:this._textAlignment=x.PdfTextAlignment.left),this._textAlignment},h.prototype._setTextAlignment=function(t){var e=this.itemAt(this._defaultIndex);this._isLoaded&&!this.readOnly&&(e&&e._dictionary?e:this)._dictionary.update("Q",t),this._isLoaded||this._textAlignment===t||(e&&e._dictionary?e._dictionary.update("Q",t):this._dictionary&&this._dictionary.update("Q",t)),this._textAlignment=t,this._stringFormat=new k(t,x.PdfVerticalAlignment.middle)},h.prototype._parseItems=function(){for(var t=[],e=0;e<this.itemsCount;e++)t.push(this.itemAt(e));return t},h);function h(){this._enableGrouping=!1,this._isDuplicatePage=!1,this._visible=!0,this._isTransparentBackColor=!1,this._isTransparentBorderColor=!1,this._defaultFont=new m(x.PdfFontFamily.helvetica,8),this._appearanceFont=new m(x.PdfFontFamily.helvetica,10,x.PdfFontStyle.regular),this._defaultItemFont=new m(x.PdfFontFamily.timesRoman,12),this._flatten=!1,this._hasData=!1,this._circleCaptionFont=new m(x.PdfFontFamily.helvetica,8,x.PdfFontStyle.regular),this._isUpdating=!1,this._isImport=!1}e(Qe,Xe=Ke),Qe._load=function(t,e,i,r){var n=new Qe;return n._isLoaded=!0,n._form=t,n._dictionary=e,n._crossReference=i,n._ref=r,n._dictionary.has("Kids")&&(n._kids=n._dictionary.get("Kids")),n._defaultIndex=0,n._parsedItems=new Map,n},Object.defineProperty(Qe.prototype,"text",{get:function(){var t,e;return void 0===this._text&&(this._isLoaded?((t=Ss(this._dictionary,"V",!1,!0,"Parent"))||(e=this.itemAt(this._defaultIndex))&&(t=e._dictionary.get("V")))&&(this._text=as(t)):this._text=""),this._text},set:function(t){var e;this._isLoaded?this.readOnly||(this._dictionary.has("V")&&this._dictionary.get("V")===t||this._dictionary.update("V",t),!(e=this.itemAt(this._defaultIndex)))||e._dictionary.has("V")&&e._dictionary.get("V")===t||e._dictionary.update("V",t):this._text!==t&&(this._dictionary.update("V",t),this._text=t)},enumerable:!0,configurable:!0}),Object.defineProperty(Qe.prototype,"textAlignment",{get:function(){return this._getTextAlignment()},set:function(t){this._textAlignment!==t&&this._setTextAlignment(t)},enumerable:!0,configurable:!0}),Object.defineProperty(Qe.prototype,"defaultValue",{get:function(){var t;return void 0===this._defaultValue&&(t=Ss(this._dictionary,"DV",!1,!0,"Parent"))&&(this._defaultValue=t),this._defaultValue},set:function(t){t!==this.defaultValue&&(this._dictionary.update("DV",t),this._defaultValue=t)},enumerable:!0,configurable:!0}),Object.defineProperty(Qe.prototype,"multiLine",{get:function(){return 0!=(this._fieldFlags&x._FieldFlag.multiLine)},set:function(t){t?this._fieldFlags|=x._FieldFlag.multiLine:this._fieldFlags&=~x._FieldFlag.multiLine},enumerable:!0,configurable:!0}),Object.defineProperty(Qe.prototype,"password",{get:function(){return 0!=(this._fieldFlags&x._FieldFlag.password)},set:function(t){t?this._fieldFlags|=x._FieldFlag.password:this._fieldFlags&=~x._FieldFlag.password},enumerable:!0,configurable:!0}),Object.defineProperty(Qe.prototype,"scrollable",{get:function(){return!(0!=(this._fieldFlags&x._FieldFlag.doNotScroll))},set:function(t){t?this._fieldFlags&=~x._FieldFlag.doNotScroll:this._fieldFlags|=x._FieldFlag.doNotScroll},enumerable:!0,configurable:!0}),Object.defineProperty(Qe.prototype,"spellCheck",{get:function(){return!(0!=(this._fieldFlags&x._FieldFlag.doNotSpellCheck))},set:function(t){t?this._fieldFlags&=~x._FieldFlag.doNotSpellCheck:this._fieldFlags|=x._FieldFlag.doNotSpellCheck},enumerable:!0,configurable:!0}),Object.defineProperty(Qe.prototype,"insertSpaces",{get:function(){var t=this._fieldFlags;return 0!=(x._FieldFlag.comb&t)&&0==(t&x._FieldFlag.multiLine)&&0==(t&x._FieldFlag.password)&&0==(t&x._FieldFlag.fileSelect)},set:function(t){t?this._fieldFlags|=x._FieldFlag.comb:this._fieldFlags&=~x._FieldFlag.comb},enumerable:!0,configurable:!0}),Object.defineProperty(Qe.prototype,"highlightMode",{get:function(){var t,e=this.itemAt(this._defaultIndex);return e&&void 0!==e.highlightMode?t=e.highlightMode:this._dictionary&&this._dictionary.has("H")&&(t=Fs(this._dictionary.get("H").name)),void 0!==t?t:x.PdfHighlightMode.noHighlighting},set:function(t){var e=this.itemAt(this._defaultIndex);!e||void 0!==e.highlightMode&&e.highlightMode===t?this._dictionary.has("H")&&Fs(this._dictionary.get("H"))===t||this._dictionary.update("H",Ls(t)):e.highlightMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(Qe.prototype,"maxLength",{get:function(){var t;return void 0===this._maxLength&&(t=Ss(this._dictionary,"MaxLen",!1,!0,"Parent"),this._maxLength=void 0!==t&&Number.isInteger(t)?t:0),this._maxLength},set:function(t){this.maxLength!==t&&(this._dictionary.update("MaxLen",t),this._maxLength=t)},enumerable:!0,configurable:!0}),Object.defineProperty(Qe.prototype,"isAutoResizeText",{get:function(){return this._autoResizeText},set:function(t){this._autoResizeText=t;var e=this.itemAt(this._defaultIndex);e&&(e._isAutoResize=t)},enumerable:!0,configurable:!0}),Object.defineProperty(Qe.prototype,"font",{get:function(){var t;return this._font||(t=this.itemAt(this._defaultIndex),this._font=va(this._form,t,this)),this._font},set:function(t){t&&t instanceof Gt&&(this._font=t,this._initializeFont(t))},enumerable:!0,configurable:!0}),Object.defineProperty(Qe.prototype,"backColor",{get:function(){return this._parseBackColor(!0)},set:function(t){this._updateBackColor(t,!0)},enumerable:!0,configurable:!0}),Qe.prototype._initialize=function(t,e,i){this._crossReference=t._crossReference,this._page=t,this._name=e,this._text="",this._defaultValue="",this._defaultIndex=0,this._spellCheck=!1,this._insertSpaces=!1,this._multiline=!1,this._password=!1,this._scrollable=!1,this._dictionary=new D(this._crossReference),this._ref=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(this._ref,this._dictionary),this._dictionary.objId=this._ref.toString(),this._dictionary.update("FT",L.get("Tx")),this._dictionary.update("T",e),this._fieldFlags|=x._FieldFlag.doNotSpellCheck,this._createItem(i),this._initializeFont(this._defaultFont)},Qe.prototype._createItem=function(t){var e=new zr;e._create(this._page,t,this),e.textAlignment=x.PdfTextAlignment.left,this._stringFormat=new k(e.textAlignment,x.PdfVerticalAlignment.middle),e._dictionary.update("MK",new D(this._crossReference)),e._mkDictionary.update("BC",[0,0,0]),e._mkDictionary.update("BG",[1,1,1]),e._mkDictionary.update("CA",this.actualName),this._addToKid(e)},Qe.prototype._doPostProcess=function(t){if((t=void 0===t?!1:t)||this._setAppearance||this._form._setAppearance){var e=this._kidsCount;if(this._isLoaded)if(0<e)for(var i=0;i<e;i++)(r=this.itemAt(i))&&this._postProcess(t,r);else(t||this._form._setAppearance||this._setAppearance)&&!this._checkFieldFlag(this._dictionary)&&this._postProcess(t);else if(t||this._form._setAppearance||this._setAppearance)for(var r,n,i=0;i<e;i++)(r=this.itemAt(i))&&!this._checkFieldFlag(r._dictionary)&&(n=this._createAppearance(t,r),t?this._drawTemplate(n,r._page,{x:r.bounds.x,y:r.bounds.y,width:n._size[0],height:n._size[1]}):this._addAppearance(r._dictionary,n,"N"),r._dictionary._updated=!t);t&&(this._dictionary._updated=!1)}},Qe.prototype._postProcess=function(t,e){var i,r,n=e||this;null!=e&&e._setAppearance&&e._enableGrouping||this._form._setAppearance||this._setAppearance||t&&!n._dictionary.has("AP")?i=this._createAppearance(t,n):n._dictionary.has("AP")&&(e=void 0,r=n._dictionary.get("AP"))&&r.has("N")&&(e=r.get("N"),(r=r.getRaw("N"))&&(e.reference=r),e)&&(i=new N(e,this._crossReference)),i&&(t?((r=n instanceof zr?n._getPage():n.page)&&((e=r.graphics).save(),r.rotation===x.PdfRotationAngle.angle90?(e.translateTransform(e._size[0],e._size[1]),e.rotateTransform(90)):r.rotation===x.PdfRotationAngle.angle180?(e.translateTransform(e._size[0],e._size[1]),e.rotateTransform(-180)):r.rotation===x.PdfRotationAngle.angle270&&(e.translateTransform(e._size[0],e._size[1]),e.rotateTransform(270)),t={x:n.bounds.x,y:n.bounds.y,width:i._size[0],height:i._size[1]},e.drawTemplate(i,t),e.restore()),n._dictionary._updated=!1):this._addAppearance(n._dictionary,i,"N"))},Qe.prototype._createAppearance=function(t,e){var i,r,n=e.bounds,s=new N([0,0,n.width,n.height],this._crossReference),a=(Ks(s,null),s._writeTransformation=!1,s.graphics),o=new _n,n=(o.bounds=[0,0,n.width,n.height],e.backColor),h=(n&&(o.backBrush=new I(n)),o.foreBrush=new I(e.color),e.border),c=(e.borderColor&&(0===h.width&&(e.borderColor=[255,255,255]),o.borderPen=new T(e.borderColor,h.width)),o.borderWidth=h.width,o.borderStyle=h.style,n&&(h=[n[0]-64,n[1]-64,n[2]-64],o.shadowBrush=new I([0<=h[0]?h[0]:0,0<=h[1]?h[1]:0,0<=h[2]?h[2]:0])),o.rotationAngle=e.rotate,o.insertSpaces=this.insertSpaces,this.text),n=!1;if(null==c&&(c=""),this.password){for(var _="",d=0;d<c.length;d++)_+="*";c=_}return this.maxLength&&c.length>this.maxLength&&(c=c.substring(0,this.maxLength)),o.required=this.required,this.required||(a._sw._beginMarkupSequence("Tx"),a._initializeCoordinates()),(n=null!=e&&e instanceof zr&&e._enableGrouping?!0:n)&&null!==e.font&&void 0!==e.font?0===(i=e.font).size&&(i._size=8,i._fontMetrics._size=0):void 0!==this._font&&null!==this._font||(this._font=this._defaultFont),n&&null!==e.textAlignment&&void 0!==e.textAlignment?r=new k(e.textAlignment,x.PdfVerticalAlignment.middle):void 0!==this._stringFormat&&null!==this._stringFormat||(void 0===this.textAlignment||null===this.textAlignment?this._stringFormat=new k(this.textAlignment,x.PdfVerticalAlignment.middle):this._stringFormat=new k(x.PdfTextAlignment.left,x.PdfVerticalAlignment.middle)),Ma(c)&&(this._stringFormat.textDirection=x.PdfTextDirection.rightToLeft),n?this._drawTextBox(a,o,c,i,r,this.multiLine,this.scrollable,this.maxLength):this._drawTextBox(a,o,c,this._font,this._stringFormat,this.multiLine,this.scrollable,this.maxLength),this.required||a._sw._endMarkupSequence(),s},Qe.prototype._drawTextBox=function(t,e,i,r,n,s,a,o){if(void 0!==o)if(e.insertSpaces){var h;if(void 0!==o&&0<o&&this.borderColor){h=e.bounds[2]/o,t.drawRectangle(e.bounds[0],e.bounds[1],e.bounds[2],e.bounds[3],e.borderPen,e.backBrush);for(var c=i,_=0;_<o;_++){i=n.alignment===x.PdfTextAlignment.right?o-c.length<=_?c[_-(o-c.length)]:"":n.alignment===x.PdfTextAlignment.center&&c.length<o?(d=Math.floor(o/2-Math.ceil(c.length/2)))<=_&&_<d+c.length?c[_-d]:"":c.length>_?c[Number.parseInt(_.toString(),10)]:"",e.bounds[2]=h;var d=new k(x.PdfTextAlignment.center,x.PdfVerticalAlignment.middle);this._drawTextBox(t,e,i,r,d,s,a),e.bounds[0]=e.bounds[0]+h,e.borderWidth&&t.drawLine(e.borderPen,e.bounds[0],e.bounds[1],e.bounds[0],e.bounds[1]+e.bounds[3])}}else this._drawTextBox(t,e,i,r,n,s,a)}else this._drawTextBox(t,e,i,r,n,s,a);else{t._isTemplateGraphics&&e.required&&(t.save(),t._initializeCoordinates()),e.insertSpaces||this._drawRectangularControl(t,e),t._isTemplateGraphics&&e.required&&(t.restore(),t.save(),t._sw._beginMarkupSequence("Tx"),t._initializeCoordinates());var p,l,u=[e.bounds[0],e.bounds[1],e.bounds[2],e.bounds[3]],f=this.rotate;null!=f&&90===f&&(u[1]=u[2]/2),e.borderStyle===x.PdfBorderStyle.beveled||e.borderStyle===x.PdfBorderStyle.inset?(u[0]=u[0]+4*e.borderWidth,u[2]=u[2]-8*e.borderWidth):(u[0]=u[0]+2*e.borderWidth,u[2]=u[2]-4*e.borderWidth),s&&(f=(null==n||0===n.lineSpacing?r._metrics._getHeight():n.lineSpacing)-r._metrics._getAscent(n),i.indexOf("\n"),0===u[0]&&1===u[1]&&(u[1]=-(u[1]-f)),e.isAutoFontSize)&&0!==e.borderWidth&&(u[1]=u[1]+2.5*e.borderWidth),t._page&&void 0!==t._page.rotation&&t._page.rotation!==x.PdfRotationAngle.angle0||0<e.rotationAngle?(f=t.save(),void 0!==e.pageRotationAngle&&e.pageRotationAngle!==x.PdfRotationAngle.angle0&&(e.pageRotationAngle===x.PdfRotationAngle.angle90?(t.translateTransform(t._size[1],0),t.rotateTransform(90),l=t._size[1]-(u[0]+u[2]),u=[u[1],l,u[3],u[2]]):e.pageRotationAngle===x.PdfRotationAngle.angle180?(t.translateTransform(t._size[0],t._size[1]),t.rotateTransform(-180),u=[t._size[0]-(u[0]+u[2]),l=t._size[1]-(u[1]+u[3]),u[2],u[3]]):e.pageRotationAngle===x.PdfRotationAngle.angle270&&(t.translateTransform(0,t._size[0]),t.rotateTransform(270),u=[t._size[0]-(u[1]+u[3]),l=u[0],u[3],u[2]])),e.rotationAngle&&(90===e.rotationAngle?e.pageRotationAngle===x.PdfRotationAngle.angle90?(t.translateTransform(0,t._size[1]),t.rotateTransform(-90),u=[t._size[1]-(u[1]+u[3]),l=u[0],u[3],u[2]],e.stringFormat=new k(x.PdfTextAlignment.center,x.PdfVerticalAlignment.middle)):u[2]>u[3]?(t.translateTransform(0,t._size[1]),t.rotateTransform(-90),(u=[e.bounds[0],e.bounds[1],e.bounds[2],e.bounds[3]])[1]=u[2]/2-8*e.borderWidth):(p=u[0],u[0]=-(u[1]+u[3]),u[1]=p,p=u[3],u[3]=u[2]>r._metrics._getHeight()?u[2]:r._metrics._getHeight(),u[2]=p,t.rotateTransform(-90)):270===e.rotationAngle?(t.translateTransform(t._size[0],0),t.rotateTransform(-270),(u=[e.bounds[0],e.bounds[1],e.bounds[2],e.bounds[3]])[1]=u[2]/2-8*e.borderWidth):180===e.rotationAngle&&(t.translateTransform(t._size[0],t._size[1]),t.rotateTransform(-180),u=[t._size[0]-(u[0]+u[2]),l=t._size[1]-(u[1]+u[3]),u[2],u[3]])),t.drawString(i,r,u,null,e.foreBrush,n),t.restore(f)):t.drawString(i,r,u,null,e.foreBrush,n),t._isTemplateGraphics&&e.required&&(t._sw._endMarkupSequence(),t.restore())}};var Xe,qe=Qe;function Qe(t,e,i){var r=Xe.call(this)||this;return r._autoResizeText=!1,t&&e&&i&&r._initialize(t,e,i),r}e(Ze,Je=Ke),Object.defineProperty(Ze.prototype,"actions",{get:function(){return this._actions||(this._actions=new He(this)),this._actions},enumerable:!0,configurable:!0}),Object.defineProperty(Ze.prototype,"text",{get:function(){var t;return this._isLoaded&&(void 0===this._text&&((t=this.itemAt(this._defaultIndex))&&t._mkDictionary&&t._mkDictionary.has("CA")?this._text=t._mkDictionary.get("CA"):this._mkDictionary&&this._mkDictionary.has("CA")&&(this._text=this._mkDictionary.get("CA"))),void 0===this._text)&&(t=Ss(this._dictionary,"V",!1,!0,"Parent"))&&(this._text=t),void 0===this._text&&(this._text=""),this._text},set:function(t){var e;this._isLoaded&&!this.readOnly&&((e=this.itemAt(this._defaultIndex))&&e._dictionary?this._assignText(e._dictionary,t):this._assignText(this._dictionary,t)),this._isLoaded||this._text===t||(e=this.itemAt(this._defaultIndex),this._assignText(e._dictionary,t),this._text=t)},enumerable:!0,configurable:!0}),Object.defineProperty(Ze.prototype,"textAlignment",{get:function(){return this._getTextAlignment()},set:function(t){this._textAlignment!==t&&this._setTextAlignment(t)},enumerable:!0,configurable:!0}),Object.defineProperty(Ze.prototype,"highlightMode",{get:function(){var t,e=this.itemAt(this._defaultIndex);return e&&void 0!==e.highlightMode?t=e.highlightMode:this._dictionary&&this._dictionary.has("H")&&(t=Fs(this._dictionary.get("H").name)),void 0!==t?t:x.PdfHighlightMode.invert},set:function(t){var e=this.itemAt(this._defaultIndex);!e||void 0!==e.highlightMode&&e.highlightMode===t?this._dictionary.has("H")&&Fs(this._dictionary.get("H"))===t||this._dictionary.update("H",Ls(t)):e.highlightMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(Ze.prototype,"font",{get:function(){var t;return this._font||(t=this.itemAt(this._defaultIndex),this._font=va(this._form,t,this)),this._font},set:function(t){t&&t instanceof Gt&&(this._font=t,this._initializeFont(t))},enumerable:!0,configurable:!0}),Object.defineProperty(Ze.prototype,"backColor",{get:function(){return this._parseBackColor(!0)},set:function(t){this._updateBackColor(t,!0)},enumerable:!0,configurable:!0}),Ze.prototype._assignText=function(t,e){var i;t&&t.has("MK")?i=t.get("MK"):(i=new D(this._crossReference),t.set("MK",i)),i.update("CA",e),t._updated=!0},Ze._load=function(t,e,i,r){var n=new Ze;return n._isLoaded=!0,n._form=t,n._dictionary=e,n._crossReference=i,n._ref=r,n._dictionary.has("Kids")&&(n._kids=n._dictionary.get("Kids")),n._defaultIndex=0,n._parsedItems=new Map,n},Ze.prototype._initialize=function(t,e,i){this._crossReference=t._crossReference,this._page=t,this._name=e,this._defaultIndex=0,this._dictionary=new D(this._crossReference),this._ref=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(this._ref,this._dictionary),this._dictionary.objId=this._ref.toString(),this._dictionary.update("FT",L.get("Btn")),this._dictionary.update("T",e),this._fieldFlags|=x._FieldFlag.pushButton,this._initializeFont(this._defaultFont),this._createItem(i)},Ze.prototype._createItem=function(t){var e=new zr;e._create(this._page,t,this),e.textAlignment=x.PdfTextAlignment.center,this._stringFormat=new k(e.textAlignment,x.PdfVerticalAlignment.middle),e._dictionary.update("MK",new D(this._crossReference)),e._mkDictionary.update("BC",[0,0,0]),e._mkDictionary.update("BG",[.827451,.827451,.827451]),e._mkDictionary.update("CA",void 0!==this._name&&null!==this._name?this._name:this._actualName),this._addToKid(e)},Ze.prototype._doPostProcess=function(t){if((t=void 0===t?!1:t)||this._setAppearance||this._form._setAppearance){var e=this._kidsCount;if(this._isLoaded)if(0<e)for(var i=0;i<e;i++)(r=this.itemAt(i))&&this._postProcess(t,r);else(t||this._form._setAppearance||this._setAppearance)&&!this._checkFieldFlag(this._dictionary)&&this._postProcess(t);else if(t||this._form._setAppearance||this._setAppearance)for(var r,n,i=0;i<e;i++)(r=this.itemAt(i))&&!this._checkFieldFlag(r._dictionary)&&(n=this._createAppearance(r),t?this._drawTemplate(n,r._getPage(),{x:r.bounds.x,y:r.bounds.y,width:n._size[0],height:n._size[1]}):(this._addAppearance(r._dictionary,n,"N"),(n=this._createAppearance(r,!0))&&this._addAppearance(r._dictionary,n,"D")),r._dictionary._updated=!t);t&&(this._dictionary._updated=!1)}},Ze.prototype._postProcess=function(t,e){var i,r,n=e||this;null!=e&&e._setAppearance&&e._enableGrouping||this._form._setAppearance||this._setAppearance||t&&!n._dictionary.has("AP")?i=this._createAppearance(n):n._dictionary.has("AP")&&(e=void 0,r=n._dictionary.get("AP"))&&r.has("N")&&(e=r.get("N"),(r=r.getRaw("N"))&&(e.reference=r),e)&&(i=new N(e,this._crossReference)),i&&(t?((r=n instanceof zr?n._getPage():n.page)&&((e=r.graphics).save(),r.rotation===x.PdfRotationAngle.angle90?(e.translateTransform(e._size[0],e._size[1]),e.rotateTransform(90)):r.rotation===x.PdfRotationAngle.angle180?(e.translateTransform(e._size[0],e._size[1]),e.rotateTransform(-180)):r.rotation===x.PdfRotationAngle.angle270&&(e.translateTransform(e._size[0],e._size[1]),e.rotateTransform(270)),t={x:n.bounds.x,y:n.bounds.y,width:i._size[0],height:i._size[1]},e.drawTemplate(i,t),e.restore()),n._dictionary._updated=!1):this._addAppearance(n._dictionary,i,"N"))},Ze.prototype._createAppearance=function(t,e){void 0===e&&(e=!1);var i,r,n,s=t.bounds,a=new N([0,0,s.width,s.height],this._crossReference),o=new _n,s=!(o.bounds=[0,0,s.width,s.height]),h=!1,c=t.backColor,_=(c&&(o.backBrush=new I(c)),o.foreBrush=new I(t.color),t.border);if(t.borderColor&&(o.borderPen=new T(t.borderColor,_.width)),o.borderWidth=_.width,o.borderStyle=_.style,c&&(c=[c[0]-64,c[1]-64,c[2]-64],o.shadowBrush=new I([0<=c[0]?c[0]:0,0<=c[1]?c[1]:0,0<=c[2]?c[2]:0])),o.rotationAngle=t.rotate,(s=null!=t&&t instanceof zr&&t._enableGrouping?!0:s)?(i=t._mkDictionary&&t._mkDictionary&&t._mkDictionary.has("CA")?t._mkDictionary.get("CA"):"",void 0!==t.font&&null!==t.font.size&&0!==t.font.size&&(r=t.font),n=new k(t.textAlignment,x.PdfVerticalAlignment.middle)):void 0!==this._font&&null!==this._font||(this._font=this._defaultFont),this._isLoaded&&t instanceof zr&&null!=t&&t._defaultAppearance){var d,p,c=t._defaultAppearance.fontName,l=(null==c&&(c="Helvetica"),t._defaultAppearance.fontSize),u=(null==l?l=this._defaultFont.size:0===l&&(h=!0),void 0),f=(this._stringFormat=new k,this._stringFormat.lineAlignment=x.PdfVerticalAlignment.middle,this._stringFormat.alignment=x.PdfTextAlignment.center,(u=null!=(p=null!=l&&c?Aa(c,l,x.PdfFontStyle.regular,t):p)?p:this._defaultFont).measureString(this.text,this._stringFormat));if(h&&u&&u instanceof m&&this._isLoaded&&!t._dictionary.has("AP")){for(var g=t.bounds.width-8*_.width,y=t.bounds.height-8*_.width;f[0]<g||f[1]<y;)if((f=(u=new m((d=u).fontFamily,u._size+1)).measureString(this.text,this._stringFormat))[0]>g||f[1]>y){u=d;break}this._font=u}}return s?e?this._drawPressedButton(a.graphics,o,i,r,n):this._drawButton(a.graphics,o,i,r,n):e?this._drawPressedButton(a.graphics,o,this.text,this._font,this._stringFormat):this._drawButton(a.graphics,o,this.text,this._font,this._stringFormat),a},Ze.prototype._drawButton=function(t,e,i,r,n){this._drawRectangularControl(t,e);var s,a,o,h=e.bounds;t._page&&void 0!==t._page.rotation&&t._page.rotation!==x.PdfRotationAngle.angle0||0<e.rotationAngle?(s=t.save(),void 0!==e.pageRotationAngle&&e.pageRotationAngle!==x.PdfRotationAngle.angle0&&(e.pageRotationAngle===x.PdfRotationAngle.angle90?(t.translateTransform(t._size[1],0),t.rotateTransform(90),o=t._size[1]-(h[0]+h[2]),h=[h[1],o,h[3],h[2]]):e.pageRotationAngle===x.PdfRotationAngle.angle180?(t.translateTransform(t._size[0],t._size[1]),t.rotateTransform(-180),h=[t._size[0]-(h[0]+h[2]),o=t._size[1]-(h[1]+h[3]),h[2],h[3]]):e.pageRotationAngle===x.PdfRotationAngle.angle270&&(t.translateTransform(0,t._size[0]),t.rotateTransform(270),h=[t._size[0]-(h[1]+h[3]),o=h[0],h[3],h[2]])),e.rotationAngle&&(90===e.rotationAngle?e.pageRotationAngle===x.PdfRotationAngle.angle90?(t.translateTransform(0,t._size[1]),t.rotateTransform(-90),h=[t._size[1]-(h[1]+h[3]),o=h[0],h[3],h[2]]):h[2]>h[3]?(t.translateTransform(0,t._size[1]),t.rotateTransform(-90),h=[e.bounds[0],e.bounds[1],e.bounds[2],e.bounds[3]]):(a=h[0],h[0]=-(h[1]+h[3]),h[1]=a,a=h[3],h[3]=h[2]>r._metrics._getHeight()?h[2]:r._metrics._getHeight(),h[2]=a,t.rotateTransform(-90)):270===e.rotationAngle?(t.translateTransform(t._size[0],0),t.rotateTransform(-270),h=[h[1],o=t._size[0]-(h[0]+h[2]),h[3],h[2]]):180===e.rotationAngle&&(t.translateTransform(t._size[0],t._size[1]),t.rotateTransform(-180),h=[t._size[0]-(h[0]+h[2]),o=t._size[1]-(h[1]+h[3]),h[2],h[3]])),t.drawString(i,r,h,null,e.foreBrush,n),t.restore(s)):t.drawString(i,r,h,null,e.foreBrush,n)},Ze.prototype._drawPressedButton=function(t,e,i,r,n){e.borderStyle===x.PdfBorderStyle.inset?t.drawRectangle(e.bounds[0],e.bounds[1],e.bounds[2],e.bounds[3],e.shadowBrush):t.drawRectangle(e.bounds[0],e.bounds[1],e.bounds[2],e.bounds[3],e.backBrush),this._drawBorder(t,e.bounds,e.borderPen,e.borderStyle,e.borderWidth);var s=[e.borderWidth,e.borderWidth,e.bounds[2]-e.borderWidth,e.bounds[3]-e.borderWidth];switch(t.drawString(i,r,s,null,e.foreBrush,n),e.borderStyle){case x.PdfBorderStyle.inset:this._drawLeftTopShadow(t,e.bounds,e.borderWidth,this._grayBrush),this._drawRightBottomShadow(t,e.bounds,e.borderWidth,this._silverBrush);break;case x.PdfBorderStyle.beveled:this._drawLeftTopShadow(t,e.bounds,e.borderWidth,e.shadowBrush),this._drawRightBottomShadow(t,e.bounds,e.borderWidth,this._whiteBrush);break;default:this._drawLeftTopShadow(t,e.bounds,e.borderWidth,e.shadowBrush)}};var Je,Ye=Ze;function Ze(t,e,i){var r=Je.call(this)||this;return t&&e&&i&&r._initialize(t,e,i),r}e(ei,$e=Ke),ei._load=function(t,e,i,r){var n=new ei;return n._isLoaded=!0,n._form=t,n._dictionary=e,n._crossReference=i,n._ref=r,n._defaultIndex=0,n._parsedItems=new Map,n._dictionary.has("Kids")?n._kids=n._dictionary.get("Kids"):((t=Wr._load(e,i,n))._isLoaded=!0,t._ref=r,n._parsedItems.set(0,t)),n},ei.prototype.itemAt=function(t){if(t<0||0!==t&&t>=this._kidsCount)throw Error("Index out of range.");var e,i,r;return this._parsedItems.has(t)?e=this._parsedItems.get(t):(i=void 0,0<=t&&this._kids&&0<this._kids.length&&t<this._kids.length&&(i=(r=this._kids[Number.parseInt(t.toString(),10)])&&r instanceof A?this._crossReference._fetch(r):i)&&((e=Wr._load(i,this._crossReference,this))._isLoaded=!0,e._ref=r,this._parsedItems.set(t,e))),e},Object.defineProperty(ei.prototype,"font",{get:function(){var t;return this._font||(t=this.itemAt(this._defaultIndex),this._font=va(this._form,t,this)),this._font},set:function(t){t&&t instanceof Gt&&(this._font=t,this._initializeFont(t))},enumerable:!0,configurable:!0}),Object.defineProperty(ei.prototype,"checked",{get:function(){return 0<this._kidsCount?this.itemAt(this._defaultIndex).checked:Us(this._dictionary)},set:function(t){this.checked!==t&&(0<this._kidsCount&&(this.itemAt(this._defaultIndex).checked=t),t?this._isLoaded?(t=Hs((0<this._kidsCount?this.itemAt(this._defaultIndex):this)._dictionary),this._dictionary.update("V",L.get(t)),this._dictionary.update("AS",L.get(t))):(this._dictionary.update("V",L.get("Yes")),this._dictionary.update("AS",L.get("Yes"))):(this._dictionary.has("V")&&delete this._dictionary._map.V,this._dictionary.has("AS")&&delete this._dictionary._map.AS),this._dictionary._updated=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(ei.prototype,"textAlignment",{get:function(){return this._getTextAlignment()},set:function(t){this._textAlignment!==t&&this._setTextAlignment(t)},enumerable:!0,configurable:!0}),Object.defineProperty(ei.prototype,"backColor",{get:function(){return this._parseBackColor(!0)},set:function(t){this._updateBackColor(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(ei.prototype,"borderColor",{get:function(){return this._parseBorderColor(!0)},set:function(t){this._updateBorderColor(t,!0),this._isLoaded&&(this._setAppearance=!0)},enumerable:!0,configurable:!0}),ei.prototype._initialize=function(t,e,i){this._crossReference=t._crossReference,this._page=t,this._name=e,this._defaultIndex=0,this._dictionary=new D(this._crossReference),this._ref=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(this._ref,this._dictionary),this._dictionary.objId=this._ref.toString(),this._dictionary.update("FT",L.get("Btn")),this._dictionary.update("T",e),this._createItem(i)},ei.prototype._createItem=function(t){var e=new Wr;e._create(this._page,t,this),e.textAlignment=x.PdfTextAlignment.center,this._stringFormat=new k(e.textAlignment,x.PdfVerticalAlignment.middle),e._dictionary.update("MK",new D(this._crossReference)),e._mkDictionary.update("BC",[0,0,0]),e._mkDictionary.update("BG",[1,1,1]),e.style=x.PdfCheckBoxStyle.check,e._dictionary.update("DA","/TiRo 0 Tf 0 0 0 rg"),this._addToKid(e)},ei.prototype._doPostProcess=function(t){void 0===t&&(t=!1);var e=this._kidsCount;if(this._isLoaded){if(t||this._setAppearance||this._dictionary._updated||this._isImport)if(0<e)for(a=0;a<e;a++)(r=this.itemAt(a))&&(this._checkFieldFlag(r._dictionary)||(t?(s=void 0,n=r.checked?x._PdfCheckFieldState.checked:x._PdfCheckFieldState.unchecked,s=this._setAppearance||this._form._setAppearance||!r._dictionary.has("AP")?this._createAppearance(r,n):Ws(n,r),this._drawTemplate(s,r._getPage(),r.bounds)):!this._setAppearance&&!this._form._setAppearance&&r._isLoaded||(r._postProcess(r.checked?"Yes":"Off"),this._drawAppearance(r))),r._dictionary._updated=!t);else{var i=this.checked?x._PdfCheckFieldState.checked:x._PdfCheckFieldState.unchecked;this._drawTemplate(Ws(i,this),this.page,this.bounds)}}else for(var r,n,s,a=0;a<e;a++)(r=this.itemAt(a))&&(n=r.checked?x._PdfCheckFieldState.checked:x._PdfCheckFieldState.unchecked,r._postProcess(r.checked?"Yes":"Off"),t?(s=this._createAppearance(r,n),this._drawTemplate(s,r._getPage(),r.bounds)):this._drawAppearance(r),r._dictionary._updated=!t);this._dictionary._updated=!t},ei.prototype._createAppearance=function(t,e){var i=t.bounds,r=new _n,i=(r.bounds=[0,0,i.width,i.height],t.backColor),n=(i&&(r.backBrush=new I(i)),r.foreBrush=new I(t.color),t.border),i=(t.borderColor&&(r.borderPen=new T(t.borderColor,n.width)),r.borderWidth=n.width,r.borderStyle=n.style,i&&(n=[i[0]-64,i[1]-64,i[2]-64],r.shadowBrush=new I([0<=n[0]?n[0]:0,0<=n[1]?n[1]:0,0<=n[2]?n[2]:0])),r.rotationAngle=t.rotate,new N(r.bounds,this._crossReference)),n=i.graphics;return t._styleText?this._drawCheckBox(n,r,t._styleText,e):this._drawCheckBox(n,r,Xs(t._style),e),i},ei.prototype._drawAppearance=function(t,e){var i=new D,r=(t._dictionary.has("AP")?((i=t._dictionary.get("AP"))&&(i.has("N")&&ua(i.get("N"),this._crossReference,"Yes","Off"),i.has("D"))&&ua(i.get("D"),this._crossReference,"Yes","Off"),R(i,this._crossReference,"N"),R(i,this._crossReference,"D")):(r=this._crossReference._getNextReference(),i=new D(this._crossReference),this._crossReference._cacheMap.set(r,i),t._dictionary.update("AP",r)),this._createAppearance(t,x._PdfCheckFieldState.checked)),n=this._crossReference._getNextReference(),r=(this._crossReference._cacheMap.set(n,r._content),this._createAppearance(t,x._PdfCheckFieldState.unchecked)),s=this._crossReference._getNextReference(),r=(this._crossReference._cacheMap.set(s,r._content),new D(this._crossReference)),n=(null!=e?r.update(e,n):r.update("Yes",n),r.update("Off",s),this._crossReference._getNextReference()),s=(this._crossReference._cacheMap.set(n,r),i.update("N",n),this._createAppearance(t,x._PdfCheckFieldState.pressedChecked)),r=this._crossReference._getNextReference(),n=(this._crossReference._cacheMap.set(r,s._content),this._createAppearance(t,x._PdfCheckFieldState.pressedUnchecked)),s=this._crossReference._getNextReference(),n=(this._crossReference._cacheMap.set(s,n._content),new D(this._crossReference)),e=(null!=e?n.update(e,r):n.update("Yes",r),n.update("Off",s),this._crossReference._getNextReference());this._crossReference._cacheMap.set(e,n),i.update("D",e),t._dictionary._updated=!0};var $e,ti=ei;function ei(t,e,i){var r=$e.call(this)||this;return i&&t&&e&&r._initialize(i,t,e),r}e(ni,ii=Ke),ni._load=function(t,e,i,r){var n=new ni;return n._isLoaded=!0,n._form=t,n._dictionary=e,n._crossReference=i,n._ref=r,n._dictionary.has("Kids")&&(n._kids=n._dictionary.get("Kids")),n._defaultIndex=0,n._parsedItems=new Map,0<n._kidsCount&&n._retrieveOptionValue(),n},Object.defineProperty(ni.prototype,"checked",{get:function(){var t=!1;return t=0<this._kidsCount?this.itemAt(this._defaultIndex).checked:t},enumerable:!0,configurable:!0}),Object.defineProperty(ni.prototype,"selectedIndex",{get:function(){return this._isLoaded&&-1===this._selectedIndex&&(this._selectedIndex=this._obtainSelectedIndex()),this._selectedIndex},set:function(t){if(this.selectedIndex!==t){this._selectedIndex=t;for(var e=0;e<this._kidsCount;e++){var i,r=this.itemAt(e);e===t?(r._dictionary.update("AS",L.get(r.value)),i=L.get(r.value),this._dictionary.update("V",i),this._dictionary.update("DV",i)):r._dictionary.update("AS",L.get("Off"))}}},enumerable:!0,configurable:!0}),Object.defineProperty(ni.prototype,"borderColor",{get:function(){return this._parseBorderColor(!this._isLoaded)},set:function(t){this._updateBorderColor(t,!0)},enumerable:!0,configurable:!0}),ni.prototype.itemAt=function(t){if(t<0||0!==t&&t>=this._kidsCount)throw Error("Index out of range.");var e,i,r;return this._parsedItems.has(t)?e=this._parsedItems.get(t):(i=void 0,0<=t&&this._kids&&0<this._kids.length&&t<this._kids.length&&(i=(r=this._kids[Number.parseInt(t.toString(),10)])&&r instanceof A?this._crossReference._fetch(r):i)&&((e=Xr._load(i,this._crossReference,this))._ref=r,e._index=t,this._parsedItems.set(t,e))),e},ni.prototype.add=function(t,e){return t instanceof Xr?(t._field=this,t._dictionary.update("Parent",this._ref),t._setField(this),this._kidsCount):new Xr(t,e,this)},ni.prototype.removeItemAt=function(i){var r,t,e=this.itemAt(i);e&&e._ref&&((t=e._getPage())&&t._removeAnnotation(e._ref),this._kids.splice(i,1),this._dictionary.set("Kids",this._kids),this._dictionary._updated=!0,this._parsedItems.delete(i),0<this._parsedItems.size&&(r=new Map,this._parsedItems.forEach(function(t,e){i<e?r.set(e-1,t):r.set(e,t)}),this._parsedItems=r),this._dictionary.has("Opt"))&&(t=this._dictionary.getArray("Opt"))&&0<t.length&&(t.splice(i,1),this._dictionary.set("Opt",t))},ni.prototype.removeItem=function(t){t&&t._ref&&-1!==(t=this._kids.indexOf(t._ref))&&this.removeItemAt(t)},ni.prototype._initialize=function(t,e){this._defaultIndex=0,this._crossReference=t._crossReference,this._page=t,this._name=e,this._dictionary=new D(this._crossReference),this._ref=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(this._ref,this._dictionary),this._dictionary.objId=this._ref.toString(),this._dictionary.update("FT",L.get("Btn")),this._dictionary.update("T",e),this._parsedItems=new Map,this._fieldFlags|=x._FieldFlag.radio},ni.prototype._retrieveOptionValue=function(){if(this._dictionary.has("Opt")){var t=this._dictionary.getArray("Opt");if(t&&0<t.length)for(var e=this._kidsCount,i=t.length<=e?t.length:e,r=0;r<i;r++)t[Number.parseInt(r.toString(),10)]&&(this.itemAt(r)._optionValue=t[Number.parseInt(r.toString(),10)])}},ni.prototype._obtainSelectedIndex=function(){for(var t=-1,e=0;e<this._kidsCount;++e){var i=this.itemAt(e);if(i){var r=Ss(i._dictionary,"V",!1,!0,"Parent");if(r&&i._dictionary.has("AS")){var n=i._dictionary.get("AS");if(n&&"off"!==n.name.toLowerCase())if(r instanceof L&&"off"!==r.name.toLowerCase()){if(n.name===r.name||i._optionValue===r.name){t=e;break}}else if("string"==typeof r&&"off"!==r.toLowerCase()&&(n.name===r||i._optionValue===r)){t=e;break}}}}return t},ni.prototype._doPostProcess=function(t){void 0===t&&(t=!1);var e=this._kidsCount;if(this._isLoaded)if(0<e)for(var i=0;i<e;i++)(s=this.itemAt(i))&&!this._checkFieldFlag(s._dictionary)&&(t?(n=void 0,a=this.selectedIndex===i?x._PdfCheckFieldState.checked:x._PdfCheckFieldState.unchecked,n=this._setAppearance||this._form._setAppearance||!s._dictionary.has("AP")?this._createAppearance(s,a):Ws(a,s),this._drawTemplate(n,s._getPage(),s.bounds)):!this._setAppearance&&!this._form._setAppearance&&s._isLoaded||(s._postProcess(this.selectedIndex===i?s.value:"Off"),this._drawAppearance(s)),s._dictionary._updated=!t);else{var r=-1!==this.selectedIndex?x._PdfCheckFieldState.checked:x._PdfCheckFieldState.unchecked;this._drawTemplate(Ws(r,this),this.page,this.bounds)}else for(i=0;i<e;i++){var n,s=this.itemAt(i),a=this.selectedIndex===i?x._PdfCheckFieldState.checked:x._PdfCheckFieldState.unchecked;this._isDuplicatePage||s._dictionary.update("AS",L.get(this.selectedIndex===i?s.value:"Off")),t?(n=this._createAppearance(s,a),this._drawTemplate(n,s._getPage(),s.bounds)):this._isDuplicatePage||(s._postProcess(this.selectedIndex===i?s.value:"Off"),this._drawAppearance(s)),s._dictionary._updated=!t}this._dictionary._updated=!t},ni.prototype._createAppearance=function(t,e){var i=t.bounds,r=new _n,i=(r.bounds=[0,0,i.width,i.height],t.backColor),n=(i&&(r.backBrush=new I(i)),r.foreBrush=new I(t.color),t.border),i=(t.borderColor&&(r.borderPen=new T(t.borderColor,n.width)),r.borderWidth=n.width,r.borderStyle=n.style,i&&(n=[i[0]-64,i[1]-64,i[2]-64],r.shadowBrush=new I([0<=n[0]?n[0]:0,0<=n[1]?n[1]:0,0<=n[2]?n[2]:0])),r.rotationAngle=t.rotate,new N(r.bounds,this._crossReference)),n=i.graphics;return t._styleText?this._drawRadioButton(n,r,t._styleText,e):this._drawRadioButton(n,r,Xs(t.style),e),i},ni.prototype._drawAppearance=function(t){var e=new D,i=(t._dictionary.has("AP")?((e=t._dictionary.get("AP"))&&(e.has("N")&&ua(e.get("N"),this._crossReference,t.value,"Off"),e.has("D"))&&ua(e.get("D"),this._crossReference,t.value,"Off"),R(e,this._crossReference,"N"),R(e,this._crossReference,"D")):(i=this._crossReference._getNextReference(),e=new D(this._crossReference),this._crossReference._cacheMap.set(i,e),t._dictionary.update("AP",i)),this._createAppearance(t,x._PdfCheckFieldState.checked)),r=this._crossReference._getNextReference(),i=(this._crossReference._cacheMap.set(r,i._content),this._createAppearance(t,x._PdfCheckFieldState.unchecked)),n=this._crossReference._getNextReference(),i=(this._crossReference._cacheMap.set(n,i._content),new D(this._crossReference)),s=t.value,r=(!s&&t._enableGrouping&&(s="check"+t._index),i.update(s,r),i.update("Off",n),this._crossReference._getNextReference()),n=(this._crossReference._cacheMap.set(r,i),e.update("N",r),this._createAppearance(t,x._PdfCheckFieldState.pressedChecked)),i=this._crossReference._getNextReference(),r=(this._crossReference._cacheMap.set(i,n._content),this._createAppearance(t,x._PdfCheckFieldState.pressedUnchecked)),n=this._crossReference._getNextReference(),r=(this._crossReference._cacheMap.set(n,r._content),new D(this._crossReference)),s=(r.update(s,i),r.update("Off",n),this._crossReference._getNextReference());this._crossReference._cacheMap.set(s,r),e.update("D",s),t._dictionary._updated=!0};var ii,ri=ni;function ni(t,e){var i=ii.call(this)||this;return i._selectedIndex=-1,t&&e&&i._initialize(t,e),i}e(oi,si=Ke),Object.defineProperty(oi.prototype,"itemsCount",{get:function(){return this._options.length},enumerable:!0,configurable:!0}),Object.defineProperty(oi.prototype,"bounds",{get:function(){var t,e=this.itemAt(this._defaultIndex);return e&&(e._page=this.page),e&&e.bounds?t=e.bounds:this._dictionary.has("Rect")&&(t=vs(this._dictionary,this.page)),t||this._bounds||t},set:function(t){if(0===t.x&&0===t.y&&0===t.width&&0===t.height)throw new Error("Cannot set empty bounds");var e=this.itemAt(this._defaultIndex);this._isLoaded?void 0===e||this._dictionary.has("Rect")?this._dictionary.update("Rect",xs([t.x,t.y,t.width,t.height],this.page)):(e._page=this.page,e.bounds=t):e?(e._page=this.page,e.bounds=t):this._bounds=t},enumerable:!0,configurable:!0}),Object.defineProperty(oi.prototype,"selectedIndex",{get:function(){var t=this._dictionary.get("I");return void 0===t?[]:1===t.length?t[0]:t},set:function(t){var e,i=this,r=this._options.length;"number"==typeof t?(this._checkIndex(t,r),this._dictionary.update("I",[t]),this._dictionary.update("V",[this._options[Number.parseInt(t.toString(),10)][0]])):(e=[],t.forEach(function(t){i._checkIndex(t,r),e.push(i._options[Number.parseInt(t.toString(),10)][0])}),this._dictionary.update("I",t),this._dictionary.update("V",e))},enumerable:!0,configurable:!0}),Object.defineProperty(oi.prototype,"selectedValue",{get:function(){var t,e=this,i=[];return this._dictionary&&this._dictionary.has("V")&&void 0!==(t=this._dictionary.getArray("V"))&&(Array.isArray(t)?t.forEach(function(t){i.push(t)}):"string"==typeof t&&i.push(t)),0===i.length&&this._dictionary&&this._dictionary.has("I")&&(t=this._dictionary.get("I"))&&0<t.length&&t.forEach(function(t){i.push(e._options[Number.parseInt(t.toString(),10)][0])}),1===i.length?i[0]:i},set:function(t){var e,i,r,n=this;"string"==typeof t?-1!==(e=this._tryGetIndex(t))&&(this._dictionary.update("I",[e]),this._dictionary.update("V",[t])):(i=[],r=[],t.forEach(function(t){var e=n._tryGetIndex(t);-1!==e&&(r.push(e),i.push(t))}),0<i.length&&(this._dictionary.update("I",r),this._dictionary.update("V",i)))},enumerable:!0,configurable:!0}),Object.defineProperty(oi.prototype,"multiSelect",{get:function(){return this._isLoaded?0!=(this._fieldFlags&x._FieldFlag.multiSelect):this._multiSelect},set:function(t){this.multiSelect!==t&&((this._multiSelect=t)?this._fieldFlags|=x._FieldFlag.multiSelect:this._fieldFlags&=~x._FieldFlag.multiSelect)},enumerable:!0,configurable:!0}),Object.defineProperty(oi.prototype,"editable",{get:function(){return this._isLoaded?0!=(this._fieldFlags&x._FieldFlag.edit):this._editable},set:function(t){this._editable!==t&&((this._editable=t)?this._fieldFlags|=x._FieldFlag.edit:this._fieldFlags&=~x._FieldFlag.edit)},enumerable:!0,configurable:!0}),Object.defineProperty(oi.prototype,"font",{get:function(){var t;return this._font||(t=this.itemAt(this._defaultIndex),this._font=va(this._form,t,this)),this._font},set:function(t){t&&t instanceof Gt&&(this._font=t,this._initializeFont(t))},enumerable:!0,configurable:!0}),Object.defineProperty(oi.prototype,"textAlignment",{get:function(){return this._getTextAlignment()},set:function(t){this._textAlignment!==t&&this._setTextAlignment(t)},enumerable:!0,configurable:!0}),Object.defineProperty(oi.prototype,"backColor",{get:function(){return this._parseBackColor(!0)},set:function(t){this._updateBackColor(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(oi.prototype,"_options",{get:function(){return this._optionArray||(this._dictionary&&this._dictionary.has("Opt")?this._optionArray=this._dictionary.getArray("Opt"):(this._optionArray=[],this._dictionary.update("Opt",this._optionArray))),this._optionArray},enumerable:!0,configurable:!0}),oi.prototype.itemAt=function(t){var e,i,r;return t<this._kidsCount?this._parsedItems.has(t)?e=this._parsedItems.get(t):(i=void 0,(i=(r=this._kids[Number.parseInt(t.toString(),10)])&&r instanceof A?this._crossReference._fetch(r):i)&&((e=Jr._load(i,this._crossReference,this))._index=t,e._ref=r,this._options&&0<this._options.length&&t<this._options.length?e._text=this._options[Number.parseInt(t.toString(),10)][1]:e._text="",this._parsedItems.set(t,e))):this._parsedItems.has(t)?e=this._parsedItems.get(t):0<this._kidsCount&&this._kids&&0<this._kids.length&&(r=i=void 0,i=(r=1===this._kidsCount?this._kids[0]:this._kids[Number.parseInt(t.toString(),10)])&&r instanceof A?this._crossReference._fetch(r):i)&&((e=Jr._load(i,this._crossReference,this))._index=t,e._ref=r,this._options&&0<this._options.length&&t<this._options.length?e._text=this._options[Number.parseInt(t.toString(),10)][1]:e._text="",this._parsedItems.set(t,e)),e},oi.prototype.addItem=function(t){return this._addToOptions(t,this),this._listValues.length-1},oi.prototype.removeItemAt=function(i){var r,t=this.itemAt(i);t&&t._ref&&(this._parsedItems.delete(i),0<this._parsedItems.size&&(r=new Map,this._parsedItems.forEach(function(t,e){i<e?r.set(e-1,t):r.set(e,t)}),this._parsedItems=r),this._dictionary)&&this._dictionary.has("Opt")&&(t=this._options)&&0<t.length&&(t.splice(i,1),this._dictionary.set("Opt",t),this._optionArray=t,this._dictionary._updated=!0)},oi.prototype.removeItem=function(t){if(t&&t.text){for(var e=void 0,i=0;i<this.itemsCount;i++){var r=this.itemAt(i);if(r&&t===r&&r.text===t.text){e=i;break}}-1!==e&&this.removeItemAt(e)}},oi.prototype._initialize=function(t,e,i){this._defaultIndex=0,this._crossReference=t._crossReference,this._page=t,this._name=e,this._dictionary=new D(this._crossReference),this._ref=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(this._ref,this._dictionary),this._dictionary.objId=this._ref.toString(),this._dictionary.update("FT",L.get("Ch")),this._dictionary.update("T",e),this._parsedItems=new Map,this._listValues=[],this._kids=[],this.bounds=i,this._addEmptyWidget()},oi.prototype._obtainFont=function(t){var e="",i=1;if(t&&(t._dictionary.has("DS")||t._dictionary.has("DA"))){if(t._dictionary.has("DS"))for(var r=t._dictionary.get("DS").split(";"),n=0;n<r.length;n++){var s=r[Number.parseInt(n.toString(),10)].split(":");if(-1!==r[Number.parseInt(n.toString(),10)].indexOf("font-family"))e=s[1];else if(-1!==r[Number.parseInt(n.toString(),10)].indexOf("font-size"))s[1].endsWith("pt")&&(i=Number.parseFloat(s[1].replace("pt","")));else if(-1===r[Number.parseInt(n.toString(),10)].indexOf("font-style")&&-1!==r[Number.parseInt(n.toString(),10)].indexOf("font")){for(var a=s[1].split(" "),o=0;o<a.length;o++)""===a[Number.parseInt(o.toString(),10)]||a[Number.parseInt(o.toString(),10)].endsWith("pt")||(e+=a[Number.parseInt(o.toString(),10)]+" "),a[Number.parseInt(o.toString(),10)].endsWith("pt")&&(i=Number.parseFloat(a[Number.parseInt(o.toString(),10)].replace("pt","")));for(;" "!==e&&e.endsWith(" ");)e=e.substring(0,e.length-2);-1!==e.indexOf(",")&&(e=e.split(",")[0])}}else{t=t._dictionary.get("DA");if(t&&""!==t&&-1!==t.indexOf("Tf")){for(var h=t.split(" "),n=0;n<h.length;n++)if(-1!==h[Number.parseInt(n.toString(),10)].indexOf("Tf")){for(e=h[n-2];""!==e&&1<e.length&&"/"===e[0];)e=e.substring(1);i=Number.parseFloat(h[n-1])}var c,t=0;0===i&&null!==(c=new m(x.PdfFontFamily.helvetica,t))&&(t=this._getFontHeight(c._fontFamily),!Number.isNaN(t)&&0!==t||(t=12),i=c._size=t)}}switch(e=e.trim()){case"Helv":this._font=new m(x.PdfFontFamily.helvetica,i,x.PdfFontStyle.regular);break;case"Courier":case"Cour":this._font=new m(x.PdfFontFamily.courier,i,x.PdfFontStyle.regular);break;case"Symb":this._font=new m(x.PdfFontFamily.symbol,i,x.PdfFontStyle.regular);break;case"TiRo":this._font=new m(x.PdfFontFamily.timesRoman,i,x.PdfFontStyle.regular);break;case"ZaDb":this._font=new m(x.PdfFontFamily.zapfDingbats,i,x.PdfFontStyle.regular);break;default:this._font=new m(x.PdfFontFamily.helvetica,i,x.PdfFontStyle.regular)}}return this._font},oi.prototype._obtainSelectedValue=function(){var t,e,i=this,r=[];return this._dictionary.has("V")?(e=this._dictionary.get("V"),t=this._dictionary.getArray("V"),null!=e&&("string"==typeof e?r.push(e):Array.isArray(e)&&t.forEach(function(t){r.push(t)}))):null!=(e=this._dictionary.get("I"))&&0<e.length&&-1<e[0]&&this._options&&0<this._options.length&&e.forEach(function(t){r.push(i._options[Number.parseInt(t.toString(),10)][0])}),r},oi.prototype._doPostProcess=function(t){if((t=void 0===t?!1:t)||this._setAppearance||this._form._setAppearance){var e=this._kidsCount;if(this._kids&&0<this._kids.length)if(1<e)for(var i=0;i<e;i++)(n=this.itemAt(i))&&!this._checkFieldFlag(n._dictionary)&&(s=this._createAppearance(n),t?(r=n._getPage())&&this._drawTemplate(s,r,n.bounds):this._addAppearance(n._dictionary,s,"N"),n._dictionary._updated=!t);else{var r,n=this.itemAt(0),s=this._createAppearance();t?(r=this.page)&&this._drawTemplate(s,r,this.bounds):this._addAppearance(n._dictionary,s,"N"),n._dictionary._updated=!t}else this._dictionary&&(s=this._createAppearance(),t?(r=this.page)&&this._drawTemplate(s,r,this.bounds):this._addAppearance(this._dictionary,s,"N"));this._dictionary._updated=!t}},oi.prototype._tryGetIndex=function(t){var e=-1;if(this._options&&0<this._options.length)for(var i=0;i<this._options.length;i++)if(t===this._options[Number.parseInt(i.toString(),10)][0]){e=i;break}return e},oi.prototype._addEmptyWidget=function(){var t=new zr;t._create(this._page,this.bounds,this),this._addToKid(t),t._dictionary.update("MK",new D(this._crossReference)),t._mkDictionary.update("BC",[0,0,0]),t._mkDictionary.update("BG",[1,1,1]),t._dictionary.update("DA","/TiRo 0 Tf 0 0 0 rg")};var si,ai=oi;function oi(){return null!==si&&si.apply(this,arguments)||this}e(_i,hi=ai),Object.defineProperty(_i.prototype,"_isAutoFontSize",{get:function(){var t=!1;if(this._isLoaded&&this._form){var e=this._form._dictionary;if(e&&e.has("DA"))if(n=e.get("DA")){var i=new yi(n);if(0===i.fontSize)if(this._kids&&0<this._kids.length){e=!1;if(!(e=this._dictionary.has("DA")&&(n=this._dictionary.get("DA"))&&(i=new yi(n))&&0<i.fontSize?!0:e))for(var r=0;r<this._kids.length;r++){var n,s,a=void 0,o=this._kids[Number.parseInt(r.toString(),10)];!(a=o&&o instanceof A?this._crossReference._fetch(o):a)||a.has("DA")&&(s=0)!==(s=(n=a.get("DA"))&&(i=new yi(n))?i.fontSize:s)||(t=!0)}}else this._dictionary.has("DA")&&(s=0)!==(s=(n=this._dictionary.get("DA"))&&(i=new yi(n))?i.fontSize:s)||(t=!0)}}return t},enumerable:!0,configurable:!0}),_i._load=function(t,e,i,r){var n=new _i,t=(n._isLoaded=!0,n._form=t,n._dictionary=e,n._crossReference=i,n._ref=r,n._dictionary.has("Kids")&&(n._kids=n._dictionary.get("Kids")),n._dictionary.getArray("Opt"));return null!=t&&(n._listValues=new Array(t.length)),n._defaultIndex=0,n._parsedItems=new Map,0<n._kidsCount&&n._retrieveOptionValue(),n},_i.prototype._retrieveOptionValue=function(){if(this._dictionary.has("Opt")){var t=this._dictionary.getArray("Opt");if(t&&0<t.length)for(var e=this._kidsCount,i=t.length<=e?t.length:e,r=0;r<i;r++){var n=t[Number.parseInt(r.toString(),10)][1];n&&(this.itemAt(r)._text=n||"")}}},_i.prototype._createAppearance=function(t){var e,i,r,n=new _n,s=(i=(e=t?(e=t.bounds,s=t._getPage(),t._isLoaded&&s&&void 0!==s.rotation&&s.rotation!==x.PdfRotationAngle.angle0?n.bounds=this._rotateTextBox([e.x,e.y,e.width,e.height],s.size,s.rotation):n.bounds=[0,0,e.width,e.height],(s=t.backColor)&&(n.backBrush=new I(s)),n.foreBrush=new I(t.color),i=t.border,t.borderColor&&(n.borderPen=new T(t.borderColor,i.width)),n.borderStyle=i.style,n.borderWidth=i.width,s&&(r=[0<=(a=[s[0]-64,s[1]-64,s[2]-64])[0]?a[0]:0,0<=a[1]?a[1]:0,0<=a[2]?a[2]:0],n.shadowBrush=new I(r)),void 0!==t.textAlignment?t.textAlignment:x.PdfTextAlignment.left):((e=this.bounds)&&(this._isLoaded&&this.page&&void 0!==this.page.rotation&&this.page.rotation!==x.PdfRotationAngle.angle0?n.bounds=this._rotateTextBox([e.x,e.y,e.width,e.height],this.page.size,this.page.rotation):n.bounds=[0,0,e.width,e.height]),(s=this.backColor)&&(n.backBrush=new I(s)),n.foreBrush=new I(this.color),i=this.border,this.borderColor&&(n.borderPen=new T(this.borderColor,i.width)),n.borderStyle=i.style,n.borderWidth=i.width,s&&(r=[0<=(a=[s[0]-64,s[1]-64,s[2]-64])[0]?a[0]:0,0<=a[1]?a[1]:0,0<=a[2]?a[2]:0],n.shadowBrush=new I(r)),n.rotationAngle=this.rotationAngle,null!==this.rotate&&void 0!==this.rotate&&(n.rotationAngle=this.rotate),void 0!==this.textAlignment?this.textAlignment:x.PdfTextAlignment.left),this.multiSelect?x.PdfVerticalAlignment.top:x.PdfVerticalAlignment.middle),n.stringFormat=new k(e,i),n.required=this.required,null!==n.bounds&&void 0!==n.bounds||(n.bounds=[0,0,0,0]),new N(n.bounds,this._crossReference)),a=s.graphics;return a._sw._clear(),this.required||(a._sw._beginMarkupSequence("Tx"),a._initializeCoordinates()),this._isLoaded?(r=void 0,null==(r=t?this._obtainFont(t):r)&&(r=this._appearanceFont),this._drawComboBox(a,n,r,n.stringFormat)):(this._font||(this._font=new m(x.PdfFontFamily.timesRoman,this._getFontHeight(x.PdfFontFamily.helvetica))),this._drawComboBox(a,n,this._font,n.stringFormat)),this.required||a._sw._endMarkupSequence(),s},_i.prototype._drawComboBox=function(t,e,i,r){t._isTemplateGraphics&&e.required&&(t.save(),t._initializeCoordinates()),this._drawRectangularControl(t,e),t._isTemplateGraphics&&e.required&&(t.restore(),t.save(),t._sw._beginMarkupSequence("Tx"),t._initializeCoordinates());var n,s,a,o,h,c,_,d,p,l=this._options,u=this._dictionary.get("I"),f=-1;0<=(f=u&&0<u.length?u[0]:f)&&f<l.length&&(u=l[Number.parseInt(f.toString(),10)],l=[0,0],n=2*(f=e.borderWidth),(s=e.borderStyle===x.PdfBorderStyle.inset||e.borderStyle===x.PdfBorderStyle.beveled)?(l[0]=2*n,l[1]=2*f):(l[0]=2+n,l[1]=+f+1),a=e.foreBrush,h=(o=e.bounds)[2]-n,(_=o)[3]-=s?n:f,t.setClip(_,x.PdfFillMode.winding),p=void(0===e.rotationAngle&&(d=o[0]+f,s&&(d+=f,h-=n),a=new I([153,193,218]),t.drawRectangle(d,l[1],h,o[3],a),a=new I([0,0,0]))),p=u&&Array.isArray(u)?u[1]||u[0]:u)&&(u=[l[0],l[1],h-l[0],o[3]],0<e.rotationAngle?(c=t.save(),90===e.rotationAngle?(t.translateTransform(0,t._size[1]),t.rotateTransform(-90),_=[t._size[1]-(_[1]+_[3]),_[0],_[3]+_[2],_[2]]):270===e.rotationAngle?(t.translateTransform(t._size[0],0),t.rotateTransform(-270),_=[_[1],t._size[0]-(_[0]+_[2]),_[3]+_[2],_[2]]):180===e.rotationAngle&&(t.translateTransform(t._size[0],t._size[1]),t.rotateTransform(-180),_=[t._size[0]-(_[0]+_[2]),t._size[1]-(_[1]+_[3]),_[2],_[3]]),d=o[0]+f,s&&(d+=f,h-=n),a=new I([153,193,218]),t.drawRectangle(d,l[1],h,o[3],a),a=new I([0,0,0]),t.drawString(p,i,u,null,a,r),t.restore(c)):t.drawString(p,i,u,null,a,r)),t._isTemplateGraphics&&e.required&&(t._sw._endMarkupSequence(),t.restore())},_i.prototype._getFontHeight=function(t){var e,i=this._dictionary.get("I"),r=this.border.width;if(this._isLoaded){var n=new m(t,12),s=new k(x.PdfTextAlignment.center,x.PdfVerticalAlignment.middle),a=this._dictionary.getArray("Opt"),o=this.bounds,h=[];if(i&&0<i.length)i.forEach(function(t){h.push(n.measureString(a[Number.parseInt(t.toString(),10)][1],[0,0],s,0,0)[0])});else if(0<a.length)for(var c=n.measureString(a[0][1],[0,0],s,0,0)[0],_=1;_<a.length;++_){var d=n.measureString(a[Number.parseInt(_.toString(),10)][1],[0,0],s,0,0)[0],c=Math.max(c,d);h.push(c)}e=0<h.length?12*(o.width-4*r)/h.sort()[h.length-1]:12}else{if(e=0,!(i&&0<i.length))return e;n=new m(t,12),s=new k(x.PdfTextAlignment.center,x.PdfVerticalAlignment.middle),a=this._dictionary.getArray("Opt");var p=this.selectedValue,d=n.measureString(null!==p&&"string"==typeof p?p:a[i[0]][1],[0,0],s,0,0)[0];o=this.bounds,e=d?12*(o.width-4*r)/d:12}var l=0;if(i&&0<i.length){if(12!==e){n=new m(t,e);var u=null!==(p=this.selectedValue)&&"string"==typeof p?p:a[i[0]][1],p=n.measureString(u);if(p[0]>o.width||p[1]>o.height)for(var d=o.width-4*r,f=o.height-4*r,_=1;_<=o.height;_++){var g=(n=new m(t,_)).measureString(u);if(g[0]>o.width||g[1]>f){l=_;do{var y=(n=new m(t,l-=.001)).getLineWidth(u,s);if(l<.248){n._size=.248;break}if(g=n.measureString(u,[0,0],s,0,0),y<d&&g[1]<f){n._size=l;break}}while(.248<l);e=l;break}}}}else 12<e&&(e=12);return e};var hi,ci=_i;function _i(t,e,i){var r=hi.call(this)||this;return t&&e&&i&&(r._initialize(t,e,i),r._fieldFlags|=x._FieldFlag.combo),r}e(li,di=ai),li._load=function(t,e,i,r){var n=new li;return n._isLoaded=!0,n._form=t,n._dictionary=e,n._crossReference=i,n._ref=r,n._dictionary.has("Kids")&&(n._kids=n._dictionary.get("Kids")),n._defaultIndex=0,n._parsedItems=new Map,0<n._kidsCount&&n._retrieveOptionValue(),n},li.prototype._retrieveOptionValue=function(){if(this._dictionary.has("Opt")){var t=this._dictionary.getArray("Opt"),e=this._kidsCount,i=t.length<=e?t.length:e;if(this._listValues=new Array(i),t&&0<t.length){var r=this._dictionary.get("I");Array.isArray(r)&&0<r.length&&(r=r[0],this._selectedIndex=r);for(var n=0;n<i;n++){var s,a=this.itemAt(n);a&&(F(r)&&null!==this._listValues&&void 0!==this._listValues?(s=t[Number.parseInt(n.toString(),10)],Array.isArray(s)?this._listValues[Number.parseInt(n.toString(),10)]=s[1]:this._listValues[Number.parseInt(n.toString(),10)]=s,n===r?(a._text=this._listValues[Number.parseInt(n.toString(),10)],this._selectedIndex=n):a._text=this._listValues[Number.parseInt(n.toString(),10)]):a._text="")}}}},li.prototype._createAppearance=function(t){var e,i,r,n=new _n,s=(i=(e=t?(e=t.bounds,s=t._getPage(),t._isLoaded&&s&&void 0!==s.rotation&&s.rotation!==x.PdfRotationAngle.angle0?n.bounds=this._rotateTextBox([e.x,e.y,e.width,e.height],s.size,s.rotation):n.bounds=[0,0,e.width,e.height],(s=t.backColor)&&(n.backBrush=new I(s)),n.foreBrush=new I(t.color),i=t.border,t.borderColor&&(n.borderPen=new T(t.borderColor,i.width)),n.borderStyle=i.style,n.borderWidth=i.width,s&&(r=[0<=(a=[s[0]-64,s[1]-64,s[2]-64])[0]?a[0]:0,0<=a[1]?a[1]:0,0<=a[2]?a[2]:0],n.shadowBrush=new I(r)),t._enableGrouping&&void 0===t.rotate?n.rotationAngle=0:n.rotationAngle=t.rotate,void 0!==t.textAlignment?t.textAlignment:x.PdfTextAlignment.left):(e=this.bounds,this._isLoaded&&this.page&&void 0!==this.page.rotation&&this.page.rotation!==x.PdfRotationAngle.angle0?n.bounds=this._rotateTextBox([e.x,e.y,e.width,e.height],this.page.size,this.page.rotation):n.bounds=[0,0,e.width,e.height],(s=this.backColor)&&(n.backBrush=new I(s)),n.foreBrush=new I(this.color),i=this.border,this.borderColor&&(n.borderPen=new T(this.borderColor,i.width)),n.borderStyle=i.style,n.borderWidth=i.width,s&&(r=[0<=(a=[s[0]-64,s[1]-64,s[2]-64])[0]?a[0]:0,0<=a[1]?a[1]:0,0<=a[2]?a[2]:0],n.shadowBrush=new I(r)),n.rotationAngle=this.rotationAngle,null!==this.rotate&&void 0!==this.rotate&&(n.rotationAngle=this.rotate),void 0!==this.textAlignment?this.textAlignment:x.PdfTextAlignment.left),this.multiSelect?x.PdfVerticalAlignment.top:x.PdfVerticalAlignment.middle),n.stringFormat=new k(e,i),n.required=this.required,new N(n.bounds,this._crossReference)),a=s.graphics;return a._sw._clear(),this.required||(a._sw._beginMarkupSequence("Tx"),a._initializeCoordinates()),this._isLoaded?(null!=(r=this._obtainFont(t))&&(this._isLoaded||1!==r.size)||(r=this._appearanceFont),this._drawListBox(a,n,r,n.stringFormat)):(this._font||(this._font=this._defaultItemFont),this._drawListBox(a,n,this._font,n.stringFormat)),this.required||a._sw._endMarkupSequence(),s},li.prototype._drawListBox=function(u,f,g,y){u._isTemplateGraphics&&f.required&&(u.save(),u._initializeCoordinates()),this._drawRectangularControl(u,f),u._isTemplateGraphics&&f.required&&(u.restore(),u.save(),u._sw._beginMarkupSequence("Tx"),u._initializeCoordinates());for(var m=this._options,b=this,t=0;t<m.length;++t)!function(e){var t,i,r=m[Number.parseInt(e.toString(),10)],n=[],s=f.borderWidth,a=2*s,o=f.borderStyle===x.PdfBorderStyle.inset||f.borderStyle===x.PdfBorderStyle.beveled,h=(o?(n.push(2*a),n.push((e+2)*s+g._metrics._getHeight()*e)):(n.push(2+a),n.push((e+1)*s+g._metrics._getHeight()*e+1)),f.foreBrush),c=f.bounds,_=c[2]-a,d=c,p=(d[3]-=o?a:s,u.setClip(d,x.PdfFillMode.winding),!1),l=b._dictionary.get("I"),l=(null!=l&&0<l.length&&l.forEach(function(t){p=p||t===e}),0===f.rotationAngle&&p&&(i=c[0]+s,o&&(i+=s,_-=a),h=new I([153,193,218]),u.drawRectangle(i,n[1],_,g._metrics._getHeight(),h),h=new I([0,0,0])),r[1]||r[0]),r=[n[0],n[1],_-n[0],g._metrics._getHeight()];0<f.rotationAngle?(t=u.save(),90===f.rotationAngle?(u.translateTransform(0,u._size[1]),u.rotateTransform(-90),d=[i=u._size[1]-(d[1]+d[3]),d[0],d[3]+d[2],d[2]]):270===f.rotationAngle?(u.translateTransform(u._size[0],0),u.rotateTransform(-270),d=[i=d[1],u._size[0]-(d[0]+d[2]),d[3]+d[2],d[2]]):180===f.rotationAngle&&(u.translateTransform(u._size[0],u._size[1]),u.rotateTransform(-180),d=[i=u._size[0]-(d[0]+d[2]),u._size[1]-(d[1]+d[3]),d[2],d[3]]),p&&(i=c[0]+s,o&&(i+=s,_-=a),h=new I([153,193,218]),u.drawRectangle(i,n[1],_,g._metrics._getHeight(),h),h=new I([0,0,0])),u.drawString(l,g,r,null,h,y),u.restore(t)):u.drawString(l,g,r,null,h,y)}(t);u._isTemplateGraphics&&f.required&&(u._sw._endMarkupSequence(),u.restore())},li.prototype._getFontHeight=function(t){var e=new m(t,12,x.PdfFontStyle.regular),i=new k(x.PdfTextAlignment.left,x.PdfVerticalAlignment.middle),t=0;if(F(this._listValues)&&0<this._listValues.length){for(var r=e.measureString(this._listValues[0],[0,0],i,0,0)[0],n=1;n<this._listValues.length;++n)var s=e.measureString(this._listValues[Number.parseInt(n.toString(),10)],[0,0],i,0,0)[0],r=s<r?r:s;t=12<(t=12*(this.bounds.width-4*this.border.width)/r)?12:t}return t};var di,pi=li;function li(t,e,i){var r=di.call(this)||this;return t&&e&&i&&r._initialize(t,e,i),r}e(gi,ui=Ke),Object.defineProperty(gi.prototype,"isSigned",{get:function(){return this._isSigned||this._checkSigned(),this._isSigned},enumerable:!0,configurable:!0}),Object.defineProperty(gi.prototype,"backColor",{get:function(){return this._parseBackColor(!0)},set:function(t){this._updateBackColor(t,!0)},enumerable:!0,configurable:!0}),gi._load=function(t,e,i,r){var n=new gi;return n._isLoaded=!0,n._form=t,n._dictionary=e,n._crossReference=i,n._ref=r,n._dictionary.has("Kids")&&(n._kids=n._dictionary.get("Kids")),n._defaultIndex=0,n._parsedItems=new Map,n},gi.prototype._initialize=function(t,e,i){this._crossReference=t._crossReference,this._page=t,this._name=e,this._dictionary=new D(this._crossReference),this._ref=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(this._ref,this._dictionary),this._dictionary.objId=this._ref.toString(),this._dictionary.update("FT",L.get("Sig")),this._dictionary.update("T",e),this._defaultIndex=0,this._initializeFont(this._defaultFont),this._createItem(i)},gi.prototype._createItem=function(t){var e=new zr;e._create(this._page,t,this),e._dictionary.update("MK",new D(this._crossReference)),e._mkDictionary.update("BC",[0,0,0]),e._mkDictionary.update("BG",[1,1,1]),e._dictionary.update("DA",this._fontName+" 8 Tf 0 0 0 rg"),this._addToKid(e)},gi.prototype._doPostProcess=function(t){void 0===t&&(t=!1);var e,i=this._setAppearance||this._form._setAppearance;if((t||i)&&0<(e=this._kidsCount))for(var r,n=0;n<e;n++)(s=this.itemAt(n))&&s._dictionary&&(i||t&&!s._dictionary.has("AP"))&&(r=this._createAppearance(s,t),this._addAppearance(s._dictionary,r,"N"));if(t)if(0<(e=this._kidsCount))for(var s,a,o=void 0,n=0;n<e;n++)(s=this.itemAt(n))&&s._dictionary&&(a=s._getPage())&&(o||0!==n||(o=this._getItemTemplate(s._dictionary)),this._flattenSignature(s._dictionary,a,s.bounds,o));else this._flattenSignature(this._dictionary,this.page,this.bounds)},gi.prototype._createAppearance=function(t,e){var i=t.bounds,r=new N([0,0,i.width,i.height],this._crossReference),n=(Ks(r,null),r._writeTransformation=!1,r.graphics),s=new _n,i=(s.bounds=[0,0,i.width,i.height],t.backColor),e=(e&&i&&(s.backBrush=new I(i)),s.foreBrush=new I(t.color),t.border);return t.borderColor&&(s.borderPen=new T(t.borderColor,e.width)),s.borderWidth=e.width,s.borderStyle=e.style,i&&(e=[i[0]-64,i[1]-64,i[2]-64],s.shadowBrush=new I([0<=e[0]?e[0]:0,0<=e[1]?e[1]:0,0<=e[2]?e[2]:0])),s.rotationAngle=t.rotate,n.save(),n._initializeCoordinates(),this._drawRectangularControl(n,s),n.restore(),r},gi.prototype._flattenSignature=function(t,e,i,r){var n,s,a,o;t.has("AP")?(t=t.get("AP"))&&t.has("N")&&(n=t.get("N"),(t=t.getRaw("N"))&&n&&(n.reference=t),n)&&(s=r||new N(n,this._crossReference))&&e&&(o=(a=e.graphics).save(),this.isSigned&&(s._isSignature=!0),e.rotation!==x.PdfRotationAngle.angle0?a.drawTemplate(s,this._calculateTemplateBounds(i,e,s,a)):a.drawTemplate(s,i),a.restore(o)):r&&e&&(s=r,o=(a=e.graphics).save(),e.rotation!==x.PdfRotationAngle.angle0?a.drawTemplate(s,this._calculateTemplateBounds(i,e,s,a)):a.drawTemplate(s,i),a.restore(o))},gi.prototype._calculateTemplateBounds=function(t,e,i,r){var n,s=t.x,a=t.y;return e&&(90===(n=this._obtainGraphicsRotation(r._matrix))?(r.translateTransform(i._size[1],0),r.rotateTransform(90),s=t.x,a=-(e._size[1]-t.y-t.height)):180===n?(r.translateTransform(i._size[0],i._size[1]),r.rotateTransform(180),s=-(e._size[0]-(t.x+i._size[0])),a=-(e._size[1]-t.y-i._size[1])):270===n&&(r.translateTransform(0,i._size[0]),r.rotateTransform(270),s=-(e._size[0]-t.x-t.width),a=t.y)),{x:s,y:a,width:t.width,height:t.height}},gi.prototype._obtainGraphicsRotation=function(t){var e=Math.round(180*Math.atan2(t._matrix._elements[2],t._matrix._elements[0])/Math.PI);switch(e){case-90:e=90;break;case-180:e=180;break;case 90:e=270}return e},gi.prototype._getItemTemplate=function(t){var e,i;return e=t&&t.has("AP")&&(t=t.get("AP"))&&t.has("N")&&(i=t.get("N"),(t=t.getRaw("N"))&&(i.reference=t),i)?new N(i,this._crossReference):e},gi.prototype._checkSigned=function(){var t;this._dictionary&&this._dictionary.has("V")&&null!=(t=this._dictionary.get("V"))&&0<t.size&&(this._isSigned=!0)};var ui,fi=gi;function gi(t,e,i){var r=ui.call(this)||this;return r._isSigned=!1,t&&e&&i&&r._initialize(t,e,i),r}mi.prototype.toString=function(){var t=[Number.parseFloat((this.color[0]/255).toFixed(3)),Number.parseFloat((this.color[1]/255).toFixed(3)),Number.parseFloat((this.color[2]/255).toFixed(3))];return"/"+this.fontName+" "+this.fontSize+" Tf "+t[0].toString()+" "+t[1].toString()+" "+t[2].toString()+" rg"};var yi=mi;function mi(t){var e,i="",r=0;if(t&&"string"==typeof t&&""!==t)for(var n=t.split(" "),s=0;s<n.length;s++)switch(n[Number.parseInt(s.toString(),10)]){case"g":e=[Number.parseFloat(n[s-1])];break;case"rg":e=[Number.parseFloat(n[s-3]),Number.parseFloat(n[s-2]),Number.parseFloat(n[s-1])];break;case"k":e=[Number.parseFloat(n[s-4]),Number.parseFloat(n[s-3]),Number.parseFloat(n[s-2]),Number.parseFloat(n[s-1])];break;case"Tf":r=Number.parseFloat(n[s-1]),(i=n[s-2].substring(1)).includes("#2C")&&i.replace("#2C",",")}this.fontName=i,this.fontSize=r,this.color=void 0!==e?Is(e):[0,0,0]}Object.defineProperty(Si.prototype,"normal",{get:function(){return!this._templateNormal&&this._dictionary&&this._dictionary.has("AP")&&(this._templateNormal=this._dictionary.get("N")),this._templateNormal},set:function(t){t&&(this._templateNormal=t,this._dictionary.set("N",this._templateNormal))},enumerable:!0,configurable:!0}),Si.prototype._initialize=function(){this.normal=new N(this._bounds,this._crossReference)};var bi=Si;function Si(t,e){this._dictionary=new D,F(e)?this._bounds=e:this._bounds=[],this._annotations=t,this._crossReference=t._crossReference,this._initialize()}wi=function(t,e){return(wi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}))(t,e)};var wi,e=function(t,e){function i(){this.constructor=t}wi(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},vi=(Object.defineProperty(c.prototype,"author",{get:function(){var t;return void 0===this._author&&this._dictionary.has("Author")&&(t=this._dictionary.get("Author"))&&(this._author=t),void 0===this._author&&this._dictionary.has("T")&&(t=this._dictionary.get("T"))&&(this._author=t),this._author},set:function(t){var e;this._isLoaded&&"string"==typeof t&&t!==this.author&&(e=!1,this._dictionary&&this._dictionary.has("T")&&(this._dictionary.update("T",t),this._author=t,e=!0),this._dictionary&&this._dictionary.has("Author")&&(this._dictionary.update("Author",t),this._author=t,e=!0),e||(this._dictionary.update("T",t),this._author=t)),this._isLoaded||"string"!=typeof t||this._dictionary.update("T",t)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"border",{get:function(){if(void 0===this._border){var t,e=new an;if(e._dictionary=this._dictionary,this._dictionary&&this._dictionary.has("Border")&&(t=this._dictionary.getArray("Border"))&&3<=t.length&&(e._hRadius=t[0],e._vRadius=t[1],e._width=t[2]),this._dictionary&&this._dictionary.has("BS"))if(t=this._dictionary.get("BS")){if(!t.has("W")||void 0===(i=t.get("W"))||Number.isNaN(i)||(e._width=i),t.has("S")){var i=t.get("S");if(i)switch(i.name){case"D":e._style=x.PdfBorderStyle.dashed;break;case"B":e._style=x.PdfBorderStyle.beveled;break;case"I":e._style=x.PdfBorderStyle.inset;break;case"U":e._style=x.PdfBorderStyle.underline;break;default:e._style=x.PdfBorderStyle.solid}}t.has("D")&&(i=t.getArray("D"))&&(e._dash=i)}this._border=e}return this._border},set:function(t){var e,i,r,n,s,a=this.border;this._isLoaded&&(void 0===t.width||a.width===t.width)||(e=t.width),this._isLoaded&&(void 0===t.hRadius||a.hRadius===t.hRadius)||(i=t.hRadius),this._isLoaded&&(void 0===t.vRadius||a.vRadius===t.vRadius)||(r=t.vRadius),this._isLoaded&&(void 0===t.style||a.style===t.style)||(n=t.style),void 0!==t.dash&&a.dash!==t.dash&&(s=t.dash),(!this._isWidget&&this._dictionary&&this._dictionary.has("Border")||e||r||i)&&(this._border._hRadius=void 0!==i?i:a.hRadius,this._border._vRadius=void 0!==r?r:a.vRadius,this._border._width=void 0!==e?e:a.width,this._dictionary.update("Border",[this._border.hRadius,this._border.vRadius,this._border.width])),(null!==this._dictionary&&this._dictionary&&this._dictionary.has("BS")||e||n||s)&&(this._border._width=void 0!==e?e:a.width,this._border._style=void 0!==n?n:a.style,this._border._dash=void 0!==s?s:a.dash,(t=this._dictionary.has("BS")?this._dictionary.get("BS"):new D(this._crossReference)).update("Type",L.get("Border")),t.update("W",this._border.width),t.update("S",Cs(this._border.style)),void 0!==this._border.dash&&t.update("D",this._border.dash),this._dictionary.update("BS",t),this._dictionary._updated=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"flags",{get:function(){return void 0===this._annotFlags&&(this._annotFlags=x.PdfAnnotationFlag.default,this._dictionary)&&this._dictionary.has("F")&&(this._annotFlags=this._dictionary.get("F")),this._annotFlags},set:function(t){void 0!==t&&t!==this._annotFlags&&(this._annotFlags=t,this._dictionary.update("F",t))},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"color",{get:function(){return void 0===this._color&&this._dictionary.has("C")&&(this._color=Is(this._dictionary.getArray("C"))),this._color},set:function(t){var e;void 0!==t&&3===t.length&&(e=this.color,this._isLoaded&&void 0!==e&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]||(this._color=t,this._dictionary.update("C",[Number.parseFloat((t[0]/255).toFixed(7)),Number.parseFloat((t[1]/255).toFixed(7)),Number.parseFloat((t[2]/255).toFixed(7))])))},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"innerColor",{get:function(){return void 0===this._innerColor&&this._dictionary.has("IC")&&(this._innerColor=Is(this._dictionary.getArray("IC"))),this._innerColor},set:function(t){var e;void 0!==t&&3===t.length&&(e=this.innerColor,this._isLoaded&&void 0!==e&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]||(this._innerColor=t,this._dictionary.update("IC",[Number.parseFloat((t[0]/255).toFixed(7)),Number.parseFloat((t[1]/255).toFixed(7)),Number.parseFloat((t[2]/255).toFixed(7))])))},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"creationDate",{get:function(){var t;return void 0!==this._creationDate&&null!==this._creationDate||!this._dictionary.has("CreationDate")||null!==(t=this._dictionary.get("CreationDate"))&&"string"==typeof t&&(this._creationDate=this._stringToDate(t)),this._creationDate},set:function(t){this._creationDate=t,this._dictionary.update("CreationDate",this._dateToString(t))},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"modifiedDate",{get:function(){var t;return void 0!==this._modifiedDate&&null!==this._modifiedDate||(t=void 0,this._dictionary&&this._dictionary.has("ModDate")?t=this._dictionary.get("ModDate"):this._dictionary.has("M")&&(t=this._dictionary.get("M")),null!==t&&"string"==typeof t&&(this._modifiedDate=this._stringToDate(t))),this._modifiedDate},set:function(t){this._modifiedDate=t,this._dictionary.update("M",this._dateToString(t))},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"bounds",{get:function(){return this._isLoaded&&(this._bounds=vs(this._dictionary,this._page)),this._bounds},set:function(t){var e,i;t&&(this._isBounds=!0,this._isLoaded?t.x===this.bounds.x&&t.y===this.bounds.y&&t.width===this.bounds.width&&t.height===this.bounds.height||(e=this._page.size)&&(i=(e=e[1]-(t.y+t.height))+t.height,this._dictionary.update("Rect",[t.x,e,t.x+t.width,i]),this._bounds=t,this._isChanged=!0):(this._bounds=t,this._isChanged=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"caption",{get:function(){var t,e;return void 0===this._caption&&((t=new Zr)._dictionary=this._dictionary,this._dictionary&&this._dictionary.has("Cap")&&(t._cap=this._dictionary.get("Cap")),this._dictionary&&this._dictionary.has("CP")&&(e=this._dictionary.get("CP"))&&(t._type="Top"===e.name?x.PdfLineCaptionType.top:x.PdfLineCaptionType.inline),this._dictionary&&this._dictionary.has("CO")&&(t._offset=this._dictionary.getArray("CO")),this._caption=t),this._caption},set:function(t){var e=this.caption;t&&(this._isLoaded&&t.cap===e.cap||(this._caption.cap=t.cap),this._isLoaded&&t.type===e.type||(this._caption.type=t.type),this._isLoaded&&t.offset===e.offset||(this._caption.offset=t.offset))},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"opacity",{get:function(){var t;return this._dictionary&&this._dictionary.has("CA")&&void 0!==(t=this._dictionary.get("CA"))&&(this._opacity=t),this._opacity},set:function(t){void 0===t||Number.isNaN(t)||(0<=t&&t<=1?(this._dictionary.update("CA",t),this._opacity=t):t<0?this._dictionary.update("CA",0):this._dictionary.update("CA",1))},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"subject",{get:function(){return void 0===this._subject&&(this._subject=this._dictionary.get("Subject","Subj")),this._subject},set:function(t){"string"==typeof t&&this.subject!==t&&(this._dictionary.update("Subj",t),this._subject=t,this._dictionary.has("Subject"))&&this._dictionary.update("Subject",t)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"name",{get:function(){return void 0===this._name&&this._dictionary.has("NM")&&(this._name=this._dictionary.get("NM")),this._name},set:function(t){"string"==typeof t&&(this._dictionary.update("NM",t),this._name=t)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"text",{get:function(){return void 0===this._text&&this._dictionary.has("Contents")&&(this._text=this._dictionary.get("Contents")),this._text},set:function(t){"string"==typeof t&&(this._text=this._dictionary.get("Contents"),t!==this._text)&&(this._dictionary.update("Contents",t),this._text=t)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"rotationAngle",{get:function(){return void 0===this._rotate&&this._dictionary&&this._dictionary.has("Rotate")&&(this._rotate=this._dictionary.get("Rotate")/90),null!==this._rotate&&void 0!==this._rotate||(this._rotate=x.PdfRotationAngle.angle0),this._rotate},set:function(t){var e=this.rotationAngle;this._dictionary.update("Rotate",90*(t=void 0!==t&&void 0!==e?(t+e)%4:t)),this._isRotated=!0,this._rotate=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"rotate",{get:function(){var t=this._getRotationAngle();return t=360<=(t=t<0?360+t:t)?360-t:t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"flattenPopups",{get:function(){return this._isFlattenPopups},set:function(t){void 0!==t&&(this._isFlattenPopups=t)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"flatten",{get:function(){return this._flatten},set:function(t){this._flatten=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"_hasFlags",{get:function(){return this._dictionary.has("F")},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"_degreeToRadian",{get:function(){return void 0===this._ratio&&(this._ratio=Math.PI/180),this._ratio},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"layer",{get:function(){return this._layer||(this._layer=this._getDocumentLayer()),this._layer},set:function(t){this._layer||(this._layer=t,this._layer?this._dictionary.update("OC",this._layer._referenceHolder):delete this._dictionary._map.OC)},enumerable:!0,configurable:!0}),c.prototype.setAppearance=function(t){(this._setAppearance=t)&&(this._dictionary._updated=!0)},c.prototype.getValues=function(t){var e=[];if(!this._dictionary||!this._dictionary.has(t))throw new Error("PdfException: "+t+" is not found");var i=this._dictionary.get(t);if(Array.isArray(i))for(var i=this._dictionary.getArray(t),r=0;r<i.length;r++){var n=i[Number.parseInt(r.toString(),10)];n instanceof L?e.push(n.name):"string"==typeof n?e.push(n):"number"==typeof n&&e.push(n.toString())}else if(i instanceof L)e.push(i.name);else{if("string"!=typeof i)throw new Error("PdfException: "+t+" is not found");e.push(i)}return e},c.prototype.setValues=function(t,e){t&&""!==t&&e&&""!==e&&this._dictionary.update(t,e)},c.prototype._initialize=function(t,e){this._page=t,this._crossReference=t._crossReference,e&&(this._dictionary=e),this._isLoaded||(this._dictionary.set("P",this._page._ref),this._dictionary.assignXref(this._crossReference))},c.prototype._getRotationAngle=function(){var t=0;return this._dictionary&&(this._dictionary.has("Rotate")?t=this._dictionary.get("Rotate"):this._dictionary.has("Rotation")&&(t=this._dictionary.get("Rotation"))),t},c.prototype._getMediaOrCropBox=function(t){var e;return t&&t._pageDictionary&&t._pageDictionary.has("MediaBox")?e=t._pageDictionary.get("MediaBox"):t&&t._pageDictionary&&t._pageDictionary.has("CropBox")&&(e=t._pageDictionary.get("CropBox")),e},c.prototype._getBoundsValue=function(t){var e=0,i=[],r=[];if(0<(e=F(t)?t.length:e)){for(var n=[],s=0;s<t.length;s++){var a=t[Number.parseInt(s.toString(),10)];n.push(a)}for(var o=0,h=0,s=0;s<n.length;s++)s%2==0?(i[Number.parseInt(o.toString(),10)]=n[Number.parseInt(s.toString(),10)],o++):(r[Number.parseInt(h.toString(),10)]=n[Number.parseInt(s.toString(),10)],h++)}return i.sort(function(t,e){return e<t?1:-1}),r.sort(function(t,e){return e<t?1:-1}),{x:i[0],y:r[0],width:i[i.length-1]-i[0],height:r[r.length-1]-r[0]}},c.prototype._validateTemplateMatrix=function(t,e){var i,r,n,s,a,o,h=!1,c=!0;return null==e?(t&&t.has("Matrix")?(s=t.getArray("Matrix"))&&3<s.length&&void 0!==s[0]&&void 0!==s[1]&&void 0!==s[2]&&void 0!==s[3]&&1===s[0]&&0===s[1]&&0===s[2]&&1===s[3]&&(h=!0,i=o=a=n=0,r=void(4<s.length&&(o=-s[4],5<s.length)&&(i=-s[5])),this._dictionary&&this._dictionary.has("Rect")&&(r=this._dictionary.getArray("Rect"))&&1<r.length&&(n=r[0],a=r[1]),n===o&&a===i||0!==o||0!==i||(this._locationDisplaced=!0)):h=!0,h):(r=this.bounds,t&&t.has("Matrix")&&(n=t.getArray("BBox"),s=t.getArray("Matrix"))&&n&&3<s.length&&2<n.length&&void 0!==s[0]&&void 0!==s[1]&&void 0!==s[2]&&void 0!==s[3]&&1===s[0]&&0===s[1]&&0===s[2]&&1===s[3]&&void 0!==n[0]&&void 0!==n[1]&&void 0!==n[2]&&void 0!==n[3]&&(this._page&&n[0]!==-s[4]&&n[1]!==-s[5]||0===n[0]&&0==-s[4])&&(o=(a=this._page.graphics).save(),void 0!==this.opacity&&this._opacity<1&&a.setTransparency(this._opacity),r.x-=n[0],r.y+=n[1],a.drawTemplate(e,r),a.restore(o),this._page.annotations.remove(this),c=!1),c)},c.prototype._flattenAnnotationTemplate=function(t,e){var i,r,n,s,a,o,h=this._page.graphics,c=this.bounds;this instanceof Ii&&this._dictionary&&!this._dictionary.has("AP")&&(c=this._isLoaded||(!(this instanceof Ii)||this.measure)&&this._setAppearance&&this.flatten&&!this.measure?this._bounds:Ps([this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height]),this._page?(n=this._page.size,r=this._page.mediaBox,(i=this._page.cropBox)&&Array.isArray(i)&&4===i.length&&this._page._pageDictionary.has("CropBox")&&!this._isLoaded&&!this._flatten?0===i[0]&&0===i[1]&&n[0]!==i[2]&&n[1]!==i[3]||c.x===i[0]?c.y=n[1]-(c.y+c.height):(c.x-=i[0],c.y=i[3]-(c.y+c.height)):r&&Array.isArray(r)&&4===r.length&&this._page._pageDictionary.has("MediaBox")&&!this._isLoaded&&!this._flatten?0<r[0]||0<r[1]||n[0]===r[2]||n[1]===r[3]?(c.x-=r[0],c.y=r[3]-(c.y+c.height)):c.y=n[1]-(c.y+c.height):this instanceof Ii&&!this.measure&&!this._isLoaded?c.y=n[1]-(c.y+c.height):this._setAppearance&&this.flatten&&!this.measure?c=this.bounds:this._isLoaded||(c.y=n[1]-(c.y+c.height))):c.y=c.y+c.height),null!=c&&(i=h.save(),this._page._needInitializeGraphics=!0,this._type===x._PdfAnnotationType.rubberStampAnnotation&&(a=!0,this._dictionary)&&this._dictionary.has("AP")&&((r=this._dictionary.get("AP"))&&r.has("N")&&(r=r.get("N"),this.rotate===x.PdfRotationAngle.angle270)&&this._page.rotation===x.PdfRotationAngle.angle270&&r.dictionary.has("Matrix")&&(o=r.dictionary.getArray("Matrix"))&&6===o.length&&0===o[4]&&0!==o[5]&&(a=!1),!e)&&this.rotate!==x.PdfRotationAngle.angle180&&a&&(t._isAnnotationTemplate=!0,t._needScale=!0),e||this._type===x._PdfAnnotationType.rubberStampAnnotation||(t._isAnnotationTemplate=!0,t._needScale=!0),void 0!==this.opacity&&this._opacity<1&&h.setTransparency(this._opacity),r=this._calculateTemplateBounds(c,this._page,t,e,h),this._type===x._PdfAnnotationType.rubberStampAnnotation&&(n=void 0,n=this.rotate===x.PdfRotationAngle.angle0?[r.width,r.height]:t._size,e=!(c=[r.x,r.y]),this.rotate!==x.PdfRotationAngle.angle0&&t._content&&t._content.dictionary.has("Matrix")&&(o=t._content.dictionary.getArray("Matrix"))&&6===o.length&&0===o[4]&&0!==o[5]&&(e=!0),o=0<t._size[0]?r.width/t._size[0]:1,s=0<t._size[1]?r.height/t._size[1]:1,a=!(Math.trunc(1e3*o)/1e3==1&&Math.trunc(1e3*s)/1e3==1),this.rotate!==x.PdfRotationAngle.angle0)&&e&&(this.rotate===x.PdfRotationAngle.angle90?this._page&&this._page.rotation===x.PdfRotationAngle.angle270?!a||0===r.x&&0===r.y?(c[0]+=n[1],c[1]+=n[0]-n[1]+(n[0]-n[1])):(c[0]+=n[0]-n[1],c[1]+=n[0]):a||(c[0]+=n[1]):this.rotate===x.PdfRotationAngle.angle270?this._page&&this._page.rotation===x.PdfRotationAngle.angle270?a&&t._isAnnotationTemplate?c[1]=r.y-r.width:a&&(c[1]+=n[0]-n[1]):a||0===r.x&&0===r.y?c[1]+=-(n[0]-n[1]):c[1]+=-n[0]:this.rotate===x.PdfRotationAngle.angle180&&(c[0]+=n[0],c[1]+=-n[1])),!t._content.dictionary.has("Matrix")&&t._content.dictionary.has("BBox")&&(o=t._content.dictionary.getArray("BBox"),r.x-=o[0],r.y+=o[1]),this instanceof qi&&!this._isLoaded&&(r=vs(this._dictionary,this._page)),h.drawTemplate(t,r),h.restore(i)),this._page.annotations.remove(this)},c.prototype._calculateTemplateBounds=function(t,e,i,r,n){var s,a=t,o=t.x,h=t.y,c=t.width,_=t.height;return r||(s=this._dictionary.getArray("Rect"))&&(a=Ps(s)),void 0!==e&&(90===(s=this._obtainGraphicsRotation(n._matrix))?(n.translateTransform(i._size[1],0),n.rotateTransform(90),r||void 0!==this._rotate&&this._rotate===x.PdfRotationAngle.angle180?(o=t.x,h=this._locationDisplaced?e._origin&&0!==e._o[1]?t.y+t.height:-(e.size[1]-(t.height+t.y)+(t.height-i._size[1])):-(e.size[1]-t.y-t.height)):(o=t.x,h=-(e.size[1]-(t.height+t.y)+(t.width-i._size[1])),c=t.height,_=t.width)):180===s?(n.translateTransform(i._size[0],i._size[1]),n.rotateTransform(180),r?(o=-(e.size[0]-(t.x+t.width)),h=-(e.size[1]-t.y-t.height)):(o=-(e.size[0]-(t.x+i._size[0])),h=-(e.size[1]-t.y-i._size[1]),void 0===this.rotationAngle||this._rotate!==x.PdfRotationAngle.angle90&&this._rotate!==x.PdfRotationAngle.angle270||(h=-(e.size[1]-t.y-i._size[1])-(t.width-t.height),c=t.height,_=t.width))):270===s?(n.translateTransform(0,i._size[0]),n.rotateTransform(270),r||void 0!==this.rotationAngle&&this._rotate===x.PdfRotationAngle.angle180?(o=-(e.size[0]-t.x-t.width),h=t.y):(o=-(e.size[0]-a.x-i._size[0]),n=i._content.dictionary.getArray("Matrix"),e=i._content.dictionary.getArray("BBox"),h=n&&e&&n[5]!==e[2]?t.y-(t.height-t.width):t.y+t.height-t.width,c=t.height,_=t.width)):0!==s||r||void 0===this.rotationAngle||this.rotationAngle!==x.PdfRotationAngle.angle90&&this.rotationAngle!==x.PdfRotationAngle.angle270||(o=t.x,h=t.y+t.height-t.width,c=t.height,_=t.width)),{x:o,y:h,width:c,height:_}},c.prototype._obtainGraphicsRotation=function(t){var t=Math.atan2(t._matrix._elements[2],t._matrix._elements[0]),e=Math.round(180*t/Math.PI);switch(e){case-90:e=90;break;case-180:e=180;break;case 90:e=270}return e},c.prototype._removeAnnotation=function(t,e){t&&e&&(t.annotations.remove(e),t._pageDictionary._updated=!0)},c.prototype._drawCloudStyle=function(t,e,i,r,n,s,a){if(F(s)&&this._isClockWise(s)){for(var o=[],h=s.length-1;0<=h;h--)o.push(s[Number.parseInt(h.toString(),10)]);s=o}var c,_=[],d=2*r*n;F(s)?c=s[s.length-1]:s=[];for(h=0;h<s.length;h++){var p=s[Number.parseInt(h.toString(),10)],l=p[0]-c[0],u=p[1]-c[1],f=Math.sqrt(l*l+u*u);l/=f,u/=f;for(var g=0;g+.1*d<f;g+=d){var y=new dn;y.point=[c[0]+g*l,c[1]+g*u],_.push(y)}c=p}for(var m=_[_.length-1],h=0;h<_.length;h++){var b=_[Number.parseInt(h.toString(),10)],S=this._getIntersectionDegrees(m.point,b.point,r);m.endAngle=S[0],b.startAngle=S[1],m=b}for(var w=new C,h=0;h<_.length;h++){var v=(I=_[Number.parseInt(h.toString(),10)]).startAngle%360,P=I.endAngle%360,A=0;0<v&&P<0?A=180-v+(180-(P<0?-P:P)):v<0&&0<P?A=P-v:0<v&&0<P?A=P<v?360-(v-P):P-v:v<0&&P<0&&(A=P<v?360-(v-P):-(v-P)),A<0&&(A=-A),I.endAngle=A,w.addArc(I.point[0]-r,I.point[1]-r,2*r,2*r,v,A)}w.closeFigure();var x=[];if(a)for(h=0;h<w._points.length;h++)x.push([w._points[Number.parseInt(h.toString(),10)][0],-w._points[Number.parseInt(h.toString(),10)][1]]);(n=new C)._points=a?x:w._points,n._pathTypes=w._pathTypes,F(e)&&t.drawPath(n,e);for(var k=180/(3*Math.PI),w=new C,h=0;h<_.length;h++){var I=_[Number.parseInt(h.toString(),10)];w.addArc(I.point[0]-r,I.point[1]-r,2*r,2*r,I.startAngle,I.endAngle+k)}if(w.closeFigure(),x=[],a)for(h=0;h<w._points.length;h++)x.push([w._points[Number.parseInt(h.toString(),10)][0],-w._points[Number.parseInt(h.toString(),10)][1]]);(n=new C)._points=a?x:w._points,n._pathTypes=w._pathTypes,t.drawPath(n,i)},c.prototype._isClockWise=function(t){var e=0;if(F(t))for(var i=0;i<t.length;i++){var r=t[Number.parseInt(i.toString(),10)],n=t[(i+1)%t.length];e+=(n[0]-r[0])*(n[1]+r[1])}return 0<e},c.prototype._getIntersectionDegrees=function(t,e,i){var r=e[0]-t[0],e=e[1]-t[1],t=.5*Math.sqrt(r*r+e*e)/i,i=(t<-1?t=-1:1<t&&(t=1),Math.atan2(e,r)),e=Math.acos(t);return[(i-e)*(180/Math.PI),(Math.PI+i+e)*(180/Math.PI)]},c.prototype._obtainStyle=function(t,e,i,r){var n,s=this.border.dash;if(s&&0<s.length){for(var a=[],o=!1,h=0;h<s.length;h++)a[Number.parseInt(h.toString(),10)]=s[Number.parseInt(h.toString(),10)],0<a[Number.parseInt(h.toString(),10)]&&(o=!0);o&&this.border.style===x.PdfBorderStyle.dashed&&(t._dashStyle=x.PdfDashStyle.dash,t._dashPattern=a)}return r?r instanceof _n?(!this._isBounds&&this._dictionary.has("RD")?(n=this._dictionary.getArray("RD"))&&(e[0]=e[0]+n[0],e[1]=e[1]+i+n[1],e[2]=e[2]-(n[0]+n[2]),e[3]=e[3]-(n[1]+n[3])):(e[0]=e[0]+i,e[1]=e[1]+i,e[2]=e[2]-this.border.width,e[3]=e[3]-this.border.width),r.bounds=e):0!==r.intensity&&r.style===x.PdfBorderEffectStyle.cloudy?(t=5*r.intensity,e[0]=e[0]+t+i,e[1]=e[1]+t+i,e[2]=e[2]-2*t-2*i,e[3]=e[3]-2*t-2*i):(e[0]=e[0]+i,e[1]=e[1]+i,e[2]=e[2]-this.border.width,e[3]=this.bounds.height-this.border.width):!this._isBounds&&this._dictionary&&this._dictionary.has("RD")?(n=this._dictionary.getArray("RD"))&&(e[0]=e[0]+n[0],e[1]=e[1]+i+n[1],e[2]=e[2]-2*n[2],e[3]=e[3]-this.border.width,e[3]=e[3]-2*n[3]):(e[1]=e[1]+i,e[3]=this.bounds.height-this.border.width),e},c.prototype._createRectangleAppearance=function(t){var e=this.border.width,i=this._dictionary.getArray("RD"),i=(i||null==t||0===t.intensity||t.style!==x.PdfBorderEffectStyle.cloudy||(n={x:this.bounds.x-5*t.intensity-e/2,y:this.bounds.y-5*t.intensity-e/2,width:this.bounds.width+10*t.intensity+e,height:this.bounds.height+10*t.intensity+e},i=[(r=5*t.intensity)+e/2,r+e/2,r+e/2,r+e/2],this._dictionary.set("RD",i),this.bounds=n),!this._isBounds&&i&&(n={x:this.bounds.x+i[0],y:this.bounds.y+i[1],width:this.bounds.width-2*i[2],height:this.bounds.height-2*i[3]},0!==t.intensity&&t.style===x.PdfBorderEffectStyle.cloudy?(n.x=n.x-5*t.intensity-e/2,n.y=n.y-5*t.intensity-e/2,n.width=n.width+10*t.intensity+e,n.height=n.height+10*t.intensity+e,r=5*t.intensity,this._dictionary.set("RD",[r+e/2,r+e/2,r+e/2,r+e/2])):delete this._dictionary._map.RD,this.bounds=n),e/2),r=[0,0,this.bounds.width,this.bounds.height],n=new N(r,this._crossReference),s=(Ks(n,this._getRotationAngle()),0!==t.intensity&&t.style===x.PdfBorderEffectStyle.cloudy&&(n._writeTransformation=!1),n.graphics),a=new _n,e=(this.innerColor&&(a.backBrush=new I(this._innerColor)),0<e&&this.color&&(a.borderPen=new T(this._color,e)),this.color&&(a.foreBrush=new I(this._color)),this._obtainStyle(a.borderPen,r,i,t));return void 0!==this.opacity&&this._opacity<1&&(s.save(),s.setTransparency(this._opacity)),0!==t.intensity&&t.style===x.PdfBorderEffectStyle.cloudy?this._drawRectangleAppearance(e,s,a,t.intensity):s.drawRectangle(e[0],e[1],e[2],e[3],a.borderPen,a.backBrush),void 0!==this.opacity&&this._opacity<1&&s.restore(),n},c.prototype._drawRectangleAppearance=function(t,e,i,r){var n=new C,s=(F(t)&&4===t.length&&n.addRectangle(t[0],t[1],t[2],t[3]),0);if(0<(s=F(r)?4.25*r:s)){for(var a=[],o=0;o<n._points.length;o++){var h=[n._points[Number.parseInt(o.toString(),10)][0],-n._points[Number.parseInt(o.toString(),10)][1]];a.push(h)}(n=new C).addPolygon(a),this._drawCloudStyle(e,i.backBrush,i.borderPen,s,.833,n._points,!1)}else e.drawRectangle(t[0],t[1],t[2],t[3],i.borderPen,i.backBrush)},c.prototype._createCircleAppearance=function(){var t=[0,0,this.bounds.width,this.bounds.height],e=new N(t,this._crossReference),i=(Ks(e,this._getRotationAngle()),this._dictionary.has("BE")&&(e._writeTransformation=!1),void 0===this.color&&(this._isTransparentColor=!0),e.graphics),r=this.border.width,n=new T(this.color,r),s=new _n,a=(this.innerColor&&(s.backBrush=new I(this._innerColor)),0<r&&(s.borderPen=n),this.color&&(s.foreBrush=new I(this._color)),(s.borderWidth=r)/2),n=this._obtainStyle(n,t,a);return void 0!==this.opacity&&this._opacity<1&&(i.save(),i.setTransparency(this._opacity)),this._dictionary.has("BE")?this._drawCircleAppearance(n,a,i,s):i.drawEllipse(n[0]+a,n[1],n[2]-r,n[3],s.borderPen,s.backBrush),void 0!==this._opacity&&this._opacity<1&&i.restore(),e},c.prototype._drawCircleAppearance=function(t,e,i,r){var n=0;if(0<(n=this._dictionary.has("RD")&&(s=this._dictionary.getArray("RD"))&&0<s.length?s[0]:n)){for(var s=[t[0]+e,-t[1]-t[3],t[2]-this.border.width,t[3]],a=s[0],o=s[1],h=s[0]+s[2],c=s[1]+s[3],_=[],d=(_.push([h,c]),_.push([a,c]),_.push([a,o]),_.push([h,o]),[]),p=(d.push([h,o+s[3]/2]),d.push([a+s[2]/2,c]),d.push([a,o+s[3]/2]),d.push([a+s[2]/2,o]),[]),l=(p.push([a+s[2]/2,c]),p.push([a,o+s[3]/2]),p.push([a+s[2]/2,o]),p.push([h,o+s[3]/2]),[]),u=0;u<_.length;u++)this._createBezier(d[Number.parseInt(u.toString(),10)],_[Number.parseInt(u.toString(),10)],p[Number.parseInt(u.toString(),10)],l);this._drawCloudStyle(i,r.backBrush,r.borderPen,n,.833,l,!1)}else i.drawEllipse(t[0]+e,-t[1],t[2]-this.border.width,-t[3],r.borderPen,r.backBrush)},c.prototype._createBezier=function(t,e,i,r){r.push(t),this._populateBezierPoints(t,e,i,0,r),r.push(i)},c.prototype._populateBezierPoints=function(t,e,i,r,n){var s,a;r<2&&(s=this._midPoint(t,e),e=this._midPoint(e,i),a=this._midPoint(s,e),this._populateBezierPoints(t,s,a,++r,n),n.push(a),this._populateBezierPoints(a,e,i,r,n))},c.prototype._midPoint=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]},c.prototype._getAngle=function(t){var e=t[0],i=t[1],r=t[2],t=t[3],n=0;return r-e==0?n=i<t?90:270:(n=Math.atan((t-i)/(r-e))*(180/Math.PI),(r-e<0||t-i<0)&&(n+=180),0<r-e&&t-i<0&&(n-=180),n<0&&(n+=360)),n},c.prototype._getAxisValue=function(t,e,i){return[t[0]+Math.cos(e*this._degreeToRadian)*i,t[1]+Math.sin(e*this._degreeToRadian)*i]},c.prototype._drawLineEndStyle=function(t,e,i,r,n,s,a,o){var h,c,_,d,p,l;switch(s){case x.PdfLineEndingStyle.square:e.drawRectangle(t[0]-3*a,-(t[1]+3*a),6*a,6*a,r,n);break;case x.PdfLineEndingStyle.circle:e.drawEllipse(t[0]-3*a,-(t[1]+3*a),6*a,6*a,r,n);break;case x.PdfLineEndingStyle.openArrow:p=o?30:150,h=9*a,c=this._getAxisValue(t,i,o?a:-a),_=this._getAxisValue(c,i+p,h),d=this._getAxisValue(c,i-p,h),(l=new C)._pen=r,l.addLine(c[0],-c[1],_[0],-_[1]),l.addLine(c[0],-c[1],d[0],-d[1]),e._stateControl(r,null,null),e._buildUpPath(l._points,l._pathTypes),e._drawGraphicsPath(r,null,l._fillMode,!1);break;case x.PdfLineEndingStyle.closedArrow:p=o?30:150,h=9*a,c=this._getAxisValue(t,i,o?a:-a),_=this._getAxisValue(c,i+p,h),d=this._getAxisValue(c,i-p,h),e.drawPolygon([[c[0],-c[1]],[_[0],-_[1]],[d[0],-d[1]]],r,n);break;case x.PdfLineEndingStyle.rOpenArrow:p=o?150:30,h=9*a,c=this._getAxisValue(t,i,o?-a:a),_=this._getAxisValue(c,i+p,h),d=this._getAxisValue(c,i-p,h),(l=new C)._pen=r,l.addLine(c[0],-c[1],_[0],-_[1]),l.addLine(c[0],-c[1],d[0],-d[1]),e._stateControl(r,null,null),e._buildUpPath(l._points,l._pathTypes),e._drawGraphicsPath(r,null,l._fillMode,!1);break;case x.PdfLineEndingStyle.rClosedArrow:p=o?150:30,h=9*a,c=this._getAxisValue(t,i,o?-a:a),_=this._getAxisValue(c,i+p,h),d=this._getAxisValue(c,i-p,h),e.drawPolygon([[c[0],-c[1]],[_[0],-_[1]],[d[0],-d[1]]],r,n);break;case x.PdfLineEndingStyle.slash:_=this._getAxisValue(t,i+60,h=9*a),d=this._getAxisValue(t,i-120,h),e.drawLine(r,t[0],-t[1],_[0],-_[1]),e.drawLine(r,t[0],-t[1],d[0],-d[1]);break;case x.PdfLineEndingStyle.diamond:_=this._getAxisValue(t,180,h=3*a),d=this._getAxisValue(t,90,h),l=this._getAxisValue(t,0,h),p=this._getAxisValue(t,-90,h),e.drawPolygon([[_[0],-_[1]],[d[0],-d[1]],[l[0],-l[1]],[p[0],-p[1]]],r,n);break;case x.PdfLineEndingStyle.butt:_=this._getAxisValue(t,i+90,h=3*a),d=this._getAxisValue(t,i-90,h),e.drawLine(r,_[0],-_[1],d[0],-d[1])}},c.prototype._drawLineStyle=function(t,e,i,r,n,s,a,o){0===o&&(o=1,n=null),this._drawLineEndStyle(t,i,r,n,s,a.begin,o,!0),this._drawLineEndStyle(e,i,r,n,s,a.end,o,!1)},c.prototype._obtainFontDetails=function(){var t,e="",i=x.PdfFontStyle.regular;if(this._dictionary.has("DS")||this._dictionary.has("DA")){var r=void 0;if(this._dictionary.has("DS"))for(var n=this._dictionary.get("DS").split(";"),s=0;s<n.length;s++){var a=n[Number.parseInt(s.toString(),10)].split(":");if(-1!==n[Number.parseInt(s.toString(),10)].indexOf("font-family"))e=a[1];else if(-1!==n[Number.parseInt(s.toString(),10)].indexOf("font-size"))a[1].endsWith("pt")&&(t=Number.parseFloat(a[1].replace("pt","")));else if(-1!==n[Number.parseInt(s.toString(),10)].indexOf("font-style")||-1!==n[Number.parseInt(s.toString(),10)].indexOf("style"))r=a[1];else if(-1!==n[Number.parseInt(s.toString(),10)].indexOf("font")){for(var o=a[1].split(" "),h=0;h<o.length;h++)""===o[Number.parseInt(h.toString(),10)]||o[Number.parseInt(h.toString(),10)].endsWith("pt")||(e+=o[Number.parseInt(h.toString(),10)]+" "),o[Number.parseInt(h.toString(),10)].endsWith("pt")&&(t=Number.parseFloat(o[Number.parseInt(h.toString(),10)].replace("pt","")));for(;" "!==e&&e.endsWith(" ");)e=e.substring(0,e.length-1);-1!==e.indexOf(",")&&(e=e.split(",")[0])}}else{var c=this._dictionary.get("DA");if(c&&""!==c&&-1!==c.indexOf("Tf"))for(var _=c.split(" "),s=0;s<_.length;s++)if(-1!==_[Number.parseInt(s.toString(),10)].indexOf("Tf")){for(e=_[s-2];""!==e&&1<e.length&&"/"===e[0];)e=e.substring(1);t=Number.parseFloat(_[s-1])}}r&&""!==r&&(c=[r],r.includes(":")?c=r.split(":"):r.includes(",")&&(c=r.split(",")),c)&&c.forEach(function(t){switch((t=t.trim()).toLowerCase()){case"bold":i|=x.PdfFontStyle.bold;break;case"italic":i|=x.PdfFontStyle.italic;break;case"strikeout":i|=x.PdfFontStyle.strikeout;break;case"underline":i|=x.PdfFontStyle.underline}}),e=e&&e.trim()}return{name:e,size:t,style:i}},c.prototype._obtainFont=function(){var t=this._obtainFontDetails();return Aa(t.name,t.size,t.style,this)},c.prototype._getEqualPdfGraphicsUnit=function(t,e){var i;switch(t){case x.PdfMeasurementUnit.inch:i=x._PdfGraphicsUnit.inch,e="in";break;case x.PdfMeasurementUnit.centimeter:i=x._PdfGraphicsUnit.centimeter,e="cm";break;case x.PdfMeasurementUnit.millimeter:i=x._PdfGraphicsUnit.millimeter,e="mm";break;case x.PdfMeasurementUnit.pica:i=x._PdfGraphicsUnit.pica,e="p";break;case x.PdfMeasurementUnit.point:i=x._PdfGraphicsUnit.point,e="pt";break;default:i=x._PdfGraphicsUnit.inch,e="in"}return{graphicsUnit:i,unitString:e}},c.prototype._createMeasureDictionary=function(t){var e=new D,i=(e.set("C",1),e.set("D",100),e.set("F",L.get("D")),e.set("RD","."),e.set("RT",""),e.set("SS",""),e.set("U",t),new D),r=(i.set("C",1),i.set("D",100),i.set("F",L.get("D")),i.set("RD","."),i.set("RT",""),i.set("SS",""),i.set("U","sq "+t),new D),n=("in"===t?r.set("C",.0138889):"cm"===t?r.set("C",.0352778):"mm"===t?r.set("C",.352778):"pt"===t?r.set("C",1):"p"===t&&r.set("C",.0833333),r.set("D",100),r.set("F",L.get("D")),r.set("RD","."),r.set("RT",""),r.set("SS",""),r.set("U",t),new D);return n.set("A",[i]),n.set("D",[e]),n.set("R","1 "+t+" = 1 "+t),n.set("Type",L.get("Measure")),n.set("X",[r]),n},c.prototype._colorToHex=function(t){return t?"#"+this._componentToHex(t[0])+this._componentToHex(t[1])+this._componentToHex(t[2]):"#"+this._componentToHex(0)+this._componentToHex(0)+this._componentToHex(0)},c.prototype._componentToHex=function(t){t=t.toString(16);return 1===t.length?"0"+t:t},c.prototype._getRotatedBounds=function(t,e){if(0<t.width&&0<t.height){var i=new de,r=(i._rotate(e),[]);r.push([t.x,t.y]),r.push([t.x+t.width,t.y]),r.push([t.x+t.width,t.y+t.height]),r.push([t.x,t.y+t.height]);for(var n=0;n<r.length;n++)r[Number.parseInt(n.toString(),10)]=i._matrix._transform(r[Number.parseInt(n.toString(),10)]);var s=new C;s.addRectangle(t.x,t.y,t.width,t.height);for(n=0;n<4;n++)s._points[Number.parseInt(n.toString(),10)]=r[Number.parseInt(n.toString(),10)];for(var a=r[0][0],o=r[3][0],h=r[0][1],c=r[3][1],n=0;n<4;n++)r[Number.parseInt(n.toString(),10)][0]<a&&(a=r[Number.parseInt(n.toString(),10)][0]),r[Number.parseInt(n.toString(),10)][0]>o&&(o=r[Number.parseInt(n.toString(),10)][0]),r[Number.parseInt(n.toString(),10)][1]<h&&(h=r[Number.parseInt(n.toString(),10)][1]),r[Number.parseInt(n.toString(),10)][1]>c&&(c=r[Number.parseInt(n.toString(),10)][1]);return{x:t.x,y:t.y,width:Math.round(o-a),height:Math.round(c-h)}}return t},c.prototype._flattenPopUp=function(){this._flattenPop(this._page,this.color,this.bounds,this.border,this.author,this.subject,this.text)},c.prototype._flattenPop=function(t,e,i,r,n,s,a){var o,h=[0,0],i=[(h=t&&t.size?t.size:h)[0]-180,i.y+142<h[1]?i.y:h[1]-142,180,142],c=(this._dictionary.has("Popup")&&this._dictionary.get("Popup")&&(h=this._dictionary.getArray("Rect"))&&4===h.length&&(i=[c=h[0],_=h[1],h[2]-c,h[3]-_]),new I(e=void 0===e?[0,0,0]:e)),h=r.width/2,_=new T([0,0,0],1),d=0,e=new I(this._getForeColor(e)),e=(null!=n&&""!==n?d=this._drawAuthor(n,s,i,c,e,t,d,r):null!=s&&""!==s?(o=[i[0]+h,i[1]+h,i[2]-r.width,40],this._saveGraphics(t,x.PdfBlendMode.hardLight),this._isTransparentColor?t.graphics.drawRectangle(o[0],o[1],o[2],o[3],_):t.graphics.drawRectangle(o[0],o[1],o[2],o[3],_,c),t.graphics.restore(),n=[(n=[o[0]+11,o[1],o[2],o[3]/2])[0],n[1]+n[3]-2,n[2],o[3]/2],this._saveGraphics(t,x.PdfBlendMode.normal),this._drawSubject(s,n,t),t.graphics.restore(),d=40):(this._saveGraphics(t,x.PdfBlendMode.hardLight),o=[i[0]+h,i[1]+h,i[2]-r.width,20],this._isTransparentColor?t.graphics.drawRectangle(o[0],o[1],o[2],o[3],_):t.graphics.drawRectangle(o[0],o[1],o[2],o[3],_,c),d=20,t.graphics.restore()),[i[0]+h,i[1]+h+d,i[2]-r.width,i[3]-(d+r.width)]);this._saveGraphics(t,x.PdfBlendMode.hardLight),t.graphics.drawRectangle(e[0],e[1],e[2],e[3],new T([0,0,0],1),new I([255,255,255])),e[0]+=11,e[1]+=5,e[2]-=22,t.graphics.restore(),this._saveGraphics(t,x.PdfBlendMode.normal),null!=a&&""!==a&&t.graphics.drawString(a,this._popUpFont,e,null,new I([0,0,0]),null),t.graphics.restore()},c.prototype._flattenLoadedPopUp=function(){var t,e,i,r,n,s,a="",o=(this._dictionary.has("Contents")&&(a=this._dictionary.get("Contents")),this.author),h=this.subject,c=new T([0,0,0],1);this._dictionary.has("Popup")?(t=this._getRectangleBoundsValue(),void 0===this.color&&(this.color=[0,0,0]),e=new I(this.color),i=this.border.width/2,r=0,s=new I(this._getForeColor(this.color)),void 0!==this.author&&null!==this.author&&""!==this.author?r=this._drawAuthor(this.author,this.subject,t,e,s,this._page,r,this.border):(r=void 0!==this.subject&&null!==this.subject&&""!==this.subject?(n=[t[0]+i,t[1]+i,t[2]-this.border.width,40],this._saveGraphics(this._page,x.PdfBlendMode.hardLight),this._page.graphics.drawRectangle(n[0],n[1],n[2],n[3],c,e),this._page.graphics.restore(),s=[(s=[n[0]+11,n[1],n[2],n[3]/2])[0],s[1]+s[3]-2,s[2],n[3]/2],this._saveGraphics(this._page,x.PdfBlendMode.normal),this._drawSubject(this.subject,s,this._page),40):(this._saveGraphics(this._page,x.PdfBlendMode.hardLight),n=[t[0]+i,t[1]+i,t[2]-this.border.width,20],this._page.graphics.drawRectangle(n[0],n[1],n[2],n[3],c,e),20),this._page.graphics.restore()),this._saveGraphics(this._page,x.PdfBlendMode.hardLight),s=[t[0]+i,t[1]+i+r,t[2]-this.border.width,t[3]-(r+this.border.width)],this._page.graphics.drawRectangle(s[0],s[1],s[2],s[3],c,new I([255,255,255])),s[0]+=11,s[1]+=5,s[2]-=22,this._page.graphics.restore(),this._saveGraphics(this._page,x.PdfBlendMode.normal),this._page.graphics.restore(),null!=a&&""!==a&&this._page.graphics.drawString(a,this._popUpFont,s,null,new I([0,0,0]),null),this._page.graphics.restore()):this._flattenPop(this._page,this.color,this.bounds,this.border,o,h,a),this._page.annotations.remove(this)},c.prototype._getRectangleBoundsValue=function(){var t;return this._dictionary.has("Popup")&&null!==(t=this._dictionary.get("Popup").getArray("Rect"))?(null!==this._page?0===t[1]&&0===t[3]?t[1]=t[1]+t[3]:t[1]=this._page._size[1]-(t[1]+t[3]):t[1]=t[1]-t[3],t):[0,0,0,0]},c.prototype._getForeColor=function(t){return 128<(t[0]+t[1]+t[2])/3?[0,0,0]:[255,255,255]},c.prototype._drawAuthor=function(t,e,i,r,n,s,a,o){var h,c=this.border.width/2,_=new T([0,0,0],1),d=new k(x.PdfTextAlignment.left,x.PdfVerticalAlignment.middle),c=[i[0]+c,i[1]+c,i[2]-o.width,20];return null!=e&&""!==e?(c[3]+=20,a=c[3],this._saveGraphics(s,x.PdfBlendMode.hardLight),this._isTransparentColor?s.graphics.drawRectangle(c[0],c[1],c[2],c[3],_):s.graphics.drawRectangle(c[0],c[1],c[2],c[3],_,r),s.graphics.restore(),h=[c[0]+11,c[1],c[2],c[3]/2],this._saveGraphics(this._page,x.PdfBlendMode.normal),s.graphics.drawString(t,this._authorBoldFont,h,null,n,d),h=[h[0],h[1]+h[3]-2,h[2],c[3]/2],this._drawSubject(e,h,s)):(this._saveGraphics(s,x.PdfBlendMode.hardLight),this._isTransparentColor?s.graphics.drawRectangle(c[0],c[1],c[2],c[3],_):s.graphics.drawRectangle(c[0],c[1],c[2],c[3],_,r),s.graphics.restore(),h=[c[0]+11,c[1],c[2],c[3]],this._saveGraphics(s,x.PdfBlendMode.normal),s.graphics.drawString(t,this._popUpFont,h,null,n,d),a=c[3]),s.graphics.restore(),a},c.prototype._drawSubject=function(t,e,i){var r=new k(x.PdfTextAlignment.left,x.PdfVerticalAlignment.middle);i.graphics.drawString(t,this._authorBoldFont,e,null,new I([0,0,0]),r)},c.prototype._saveGraphics=function(t,e){t.graphics.save(),t.graphics.setTransparency(.8,.8,e)},c.prototype._getBorderColorString=function(t){return(t[0]/255).toFixed(3)+" "+(t[1]/255).toFixed(3)+" "+(t[2]/255).toFixed(3)+" rg "},c.prototype._stringToDate=function(t){var e,i,r,n,s,a,o,h,c,_,d=new Date;return"D"===t[0]&&":"===t[1]?(s=t.substring(2,6),a=t.substring(6,8),o=t.substring(8,10),h=t.substring(10,12),c=t.substring(12,14),_=t.substring(14,16),r=0,23===t.length&&"+05'30'"!==(i=t.substring(16,22))&&(n=i[0],e=i.substring(1,3),i=i.substring(4,6),r=5.5-("-"===n?-1:1)*(parseInt(e,10)+parseInt(i,10)/60)),d=new Date(s+"-"+a+"-"+o+"T"+h+":"+c+":"+_),0!==r&&d.setTime(d.getTime()+60*r*60*1e3)):d=-1!==t.indexOf("/")?(s=(n=t.split("/"))[2].split(" ")[0],"10"!==(a=n[0])&&"11"!==a&&"12"!==a&&(a="0"+a),o=n[1],h=n[2].split(" ")[1].split(":")[0],c=n[2].split(" ")[1].split(":")[1],_=n[2].split(" ")[1].split(":")[2],new Date(s+"-"+a+"-"+o+"T"+h+":"+c+":"+_)):new Date(t),d},c.prototype._dateToString=function(t){var e=(t.getMonth()+1).toString(),i=("10"!==e&&"11"!==e&&"12"!==e&&(e="0"+e),t.getDate().toString()),r=(Number.parseInt(i)<10&&(i="0"+i),t.getHours().toString()),n=(Number.parseInt(r)<10&&(r="0"+r),t.getMinutes().toString()),s=(Number.parseInt(n)<10&&(n="0"+n),t.getSeconds().toString());return Number.parseInt(s)<10&&(s="0"+s),"D:"+t.getFullYear().toString()+e+i+r+n+s+"+05'30'"},c.prototype._obtainNativeRectangle=function(){var t,e=[this._bounds.x,this._bounds.y,this.bounds.x+this._bounds.width,this.bounds.y+this._bounds.height],i=this._getCropOrMediaBox();return this._page&&(t=this._page.size,e[1]=t[1]-e[3],i)&&2<i.length&&(0!==i[0]||0!==i[1])&&(e[0]+=i[0],e[1]+=i[1]),e},c.prototype._getPoints=function(t){var e=this._getCropOrMediaBox(),i=t;if(e&&3<e.length&&"number"==typeof e[0]&&"number"==typeof e[1]&&(0!==e[0]||0!==e[1])){for(var r=[],n=0;n<i.length;n++)r.push(i[Number.parseInt(n.toString(),10)]);for(var s=0;s<r.length;s+=2){var a=r[Number.parseInt(s.toString(),10)],o=r[s+1];e&&(i[Number.parseInt(s.toString(),10)]=a+e[0],this._page._pageDictionary.has("MediaBox")&&!this._page._pageDictionary.has("CropBox")&&0===e[3]&&0<e[1]?i[s+1]=o+e[3]:i[s+1]=o+e[1])}}return i},c.prototype._getCropOrMediaBox=function(){var t,e,i;return(t=!this._page||(t=this._page.cropBox)&&0!==t.length?t:this._page.mediaBox)&&t[3]<0&&(e=t[1],i=t[3],t[3]=e,t[1]=i),t},c.prototype._getDocumentLayer=function(){var t,e,i;return this._dictionary.has("OC")&&(t=this._dictionary.getRaw("OC"),e=this._page,t)&&e&&this._crossReference._document&&(i=this._crossReference._document.layers)&&this._isMatched(i,t,e),this.layer},c.prototype._isMatched=function(t,e,i){for(var r=0;r<t.count;r++){var n=t.at(r)._referenceHolder;if(n&&n===e){if(t.at(r).name){this._layer=t.at(r);break}}else t.at(r).layers&&0<t.at(r).layers.count&&this._isMatched(t.at(r).layers,e,i)}},c);function c(){this._isImported=!1,this._isLoaded=!1,this._setAppearance=!1,this._isExport=!1,this._opacity=1,this._isAllRotation=!0,this._flatten=!1,this._hasData=!1,this._popUpFont=new m(x.PdfFontFamily.helvetica,10.5),this._authorBoldFont=new m(x.PdfFontFamily.helvetica,10.5,x.PdfFontStyle.bold),this._lineCaptionFont=new m(x.PdfFontFamily.helvetica,10,x.PdfFontStyle.regular),this._circleCaptionFont=new m(x.PdfFontFamily.helvetica,8,x.PdfFontStyle.regular),this._isTransparentColor=!1,this._isRotated=!1,this._isChanged=!1}e(xi,Pi=vi),Object.defineProperty(xi.prototype,"comments",{get:function(){return this._comments||(this._comments=new un(this,!1))},enumerable:!0,configurable:!0}),Object.defineProperty(xi.prototype,"reviewHistory",{get:function(){return this._reviewHistory||(this._reviewHistory=new un(this,!0))},enumerable:!0,configurable:!0});var Pi,Ai=xi;function xi(){return null!==Pi&&Pi.apply(this,arguments)||this}e(Ci,ki=Ai),Object.defineProperty(Ci.prototype,"linePoints",{get:function(){var t;return void 0===this._linePoints&&this._dictionary.has("L")&&(t=this._dictionary.getArray("L"))&&(this._linePoints=t),this._linePoints},set:function(t){if(Array.isArray(t)&&(void 0===this._linePoints||cs(t,this._linePoints))){if(4!==t.length)throw new Error("Line points length should be 4.");this._dictionary.update("L",t),this._linePoints=t}},enumerable:!0,configurable:!0}),Object.defineProperty(Ci.prototype,"leaderExt",{get:function(){var t;return void 0===this._leaderExt&&this._dictionary.has("LLE")&&void 0!==(t=this._dictionary.get("LLE"))&&(this._leaderExt=t),this._leaderExt},set:function(t){Number.isNaN(t)||(this._dictionary.update("LLE",t),this._leaderExt=t)},enumerable:!0,configurable:!0}),Object.defineProperty(Ci.prototype,"leaderLine",{get:function(){var t;return void 0===this._leaderLine&&this._dictionary.has("LL")&&void 0!==(t=this._dictionary.get("LL"))&&(this._leaderLine=t),this._leaderLine},set:function(t){Number.isNaN(t)||0===this.leaderExt||(this._dictionary.update("LL",t),this._leaderLine=t)},enumerable:!0,configurable:!0}),Object.defineProperty(Ci.prototype,"lineEndingStyle",{get:function(){var t,e;return void 0===this._lineEndingStyle&&((t=new tn)._dictionary=this._dictionary,this._dictionary.has("LE")&&(e=this._dictionary.getArray("LE"))&&Array.isArray(e)&&(t._begin=Rs(e[0].name),t._end=Rs(e[1].name)),this._lineEndingStyle=t),this._lineEndingStyle},set:function(t){var e=this.lineEndingStyle;e.begin===t.begin&&e.end===t.end||(e.begin=t.begin,e.end=t.end)},enumerable:!0,configurable:!0}),Object.defineProperty(Ci.prototype,"leaderOffset",{get:function(){var t;return void 0===this._leaderOffset&&this._dictionary.has("LLO")&&void 0!==(t=this._dictionary.get("LLO"))&&0<=t&&(this._leaderOffset=t),this._leaderOffset},set:function(t){Number.isNaN(t)||(this._dictionary.update("LLO",t),this._leaderOffset=t)},enumerable:!0,configurable:!0}),Object.defineProperty(Ci.prototype,"lineIntent",{get:function(){var t;return void 0===this._lineIntent&&this._dictionary.has("IT")&&(t=this._dictionary.get("IT"))&&(this._lineIntent="LineDimension"===t.name?x.PdfLineIntent.lineDimension:x.PdfLineIntent.lineArrow),this._lineIntent},set:function(t){void 0!==t&&t!==this.lineIntent&&(this._lineIntent=t,this._dictionary.update("IT",L.get(t===x.PdfLineIntent.lineDimension?"LineDimension":"LineArrow")))},enumerable:!0,configurable:!0}),Object.defineProperty(Ci.prototype,"measure",{get:function(){return void 0===this._measure&&(this._measure=this._dictionary.has("Measure")),this._measure},set:function(t){!t||this._isLoaded||(this._measure=t,this.caption.cap=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Ci.prototype,"unit",{get:function(){var t;return(void 0===this._unit||this._isLoaded)&&(this._unit=x.PdfMeasurementUnit.centimeter,this._dictionary.has("Contents"))&&(t=this._dictionary.get("Contents"),this._unitString=t.substring(t.length-2),this._unit=Qs(this._unitString)),this._unit},set:function(t){!this._measure||this._isLoaded||void 0===t||(this._unit=t)},enumerable:!0,configurable:!0}),Ci._load=function(t,e){var i=new Ci;return i._isLoaded=!0,i._initialize(t,e),i},Ci.prototype._initialize=function(t,e){ki.prototype._initialize.call(this,t,e)},Ci.prototype._postProcess=function(t){if(void 0===this.linePoints||null===this.linePoints)throw new Error("Line points cannot be null or undefined");var e,i,r,n,s=this._getCropOrMediaBox();s&&3<s.length&&3<this.linePoints.length&&"number"==typeof s[0]&&"number"==typeof s[1]&&(0!==s[0]||0!==s[1])&&(this._linePoints[0]+=s[0],this._linePoints[1]+=s[1],this._linePoints[2]+=s[0],this._linePoints[3]+=s[1],this._dictionary.update("L",this._linePoints)),this._dictionary.has("Cap")||this._dictionary.set("Cap",!1),this._dictionary.has("CP")||this._dictionary.set("CP",L.get("Inline")),this._dictionary.has("LE")||(this.lineEndingStyle=new tn),this._dictionary.has("LL")||(this.leaderLine=0),this._dictionary.has("LLE")||(this.leaderExt=0),this._dictionary.has("C")||(this.color=[0,0,0],this._isTransparentColor=!0),this._dictionary.has("BS")?e=this.border.width:((s=new D(this._crossReference)).set("Type",L.get("Border")),this._dictionary.set("BS",s)),void 0===e&&(e=1),null!==this.border.dash&&void 0!==this.border.dash||(this.border.dash=[],this.border.style===x.PdfBorderStyle.dashed?this.border.dash=[3,1]:this.border.style===x.PdfBorderStyle.dot&&(this.border.dash=[1,1])),this._measure?this._appearanceTemplate=this._createLineMeasureAppearance(t):(s=!1,this._setAppearance?(this._appearanceTemplate=this._createAppearance(),!this._page._isNew||this._flatten||t||(r={x:(i=this._obtainLineBounds())[0],y:i[1],width:i[2],height:i[3]},this._bounds=r,n=[this._bounds.x,this._bounds.y,this._bounds.x+this._bounds.width,this._bounds.y+this._bounds.height],this._dictionary.update("Rect",n),s=!0)):(e=As({x:(r=this._obtainLineBounds())[0],y:r[1],width:r[2],height:r[3]}),this._page._isNew&&this._page._pageSettings&&this._setAppearance&&!this.flatten&&(e=Ca(this,r)),this.bounds={x:e[0],y:e[1],width:e[2],height:e[3]},this._dictionary.update("Rect",e),s=!0),this._dictionary.has("Measure")&&!s&&(r={x:(i=this._obtainLineBounds())[0],y:i[1],width:i[2],height:i[3]},n=void(this._bounds=r),n=this._page&&this._page._isNew&&this._page._pageSettings&&!this._setAppearance&&!this.flatten?Ca(this):[this._bounds.x,this._bounds.y,this._bounds.x+this._bounds.width,this._bounds.y+this._bounds.height],this._dictionary.update("Rect",n),this.flatten)&&!this.measure&&this._page&&this._page.size&&Array.isArray(this._page.size)&&2<=this._page.size.length&&(this._bounds={x:i[0],y:this._page.size[1]-(i[1]+i[3]),width:i[2],height:i[3]}))},Ci.prototype._doPostProcess=function(t){var e,i,r,n;void 0===t&&(t=!1),this._isLoaded?((this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._dictionary.has("Measure")?this._appearanceTemplate=this._createLineMeasureAppearance(t):this._appearanceTemplate=this._createAppearance()),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(i=this._dictionary.get("AP"))&&i.has("N")&&(e=i.get("N"))&&((n=i.getRaw("N"))&&(e.reference=n),this._appearanceTemplate=new N(e,this._crossReference))):(this._postProcess(t),this._appearanceTemplate||t&&(this._dictionary.has("AP")?null!=(i=this._dictionary.get("AP"))&&i.has("N")&&(e=i.get("N"))&&((n=i.getRaw("N"))&&(e.reference=n),this._appearanceTemplate=new N(e,this._crossReference)):this._appearanceTemplate=this._createAppearance())),void 0!==this.flattenPopups&&this.flattenPopups&&t&&(this._isLoaded?this._flattenLoadedPopUp():this._flattenPopUp()),t&&this._appearanceTemplate?(i=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary),this._flattenAnnotationTemplate(this._appearanceTemplate,i)):t&&this._page.annotations.remove(this),t||!this._setAppearance||this.measure?this.measure&&this._setAppearance&&!this._dictionary.has("AP")&&(n=this._crossReference._getNextReference(),r=new D(this._crossReference),this._crossReference._cacheMap.set(n,r),this._dictionary.update("AP",n)):this._dictionary.has("AP")?r=this._dictionary.get("AP"):(n=this._crossReference._getNextReference(),r=new D(this._crossReference),this._crossReference._cacheMap.set(n,r),this._dictionary.update("AP",n)),r&&this._appearanceTemplate&&this._appearanceTemplate._content&&(R(r,this._crossReference,"N"),n=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(n,this._appearanceTemplate._content),r.update("N",n))},Ci.prototype._createLineMeasureAppearance=function(t){for(var e=[0,0,0,0],i=this._convertToUnit(),r=this._obtainLinePoints(),n=[],s=0;s<r.length;s+=2)n.push([r[Number.parseInt(s.toString(),10)],r[s+1]]);var a,o,h,c,_=new C,_=(_._points=n,_._pathTypes=[0,1],_._getBounds()),_=(this._bounds={x:_[0],y:_[1],width:_[2],height:_[3]},new T(void 0!==this.color?this._color:[0,0,0],this.border.width)),d=(this.innerColor&&(o=new I(this._innerColor)),e=this._obtainLineBounds(),new N(e,this._crossReference)),p=(Ks(d,0),new _n),l=(d._writeTransformation=!1,d.graphics),u=(p.borderPen=_,this.border.style===x.PdfBorderStyle.dashed?(p.borderPen._dashStyle=x.PdfDashStyle.dash,p.borderPen._dashPattern=[3,1]):this.border.style===x.PdfBorderStyle.dot&&(p.borderPen._dashStyle=x.PdfDashStyle.dot,p.borderPen._dashPattern=[1,1]),p.backBrush=o,p.foreBrush=new I(this.color),this._obtainLinePoints()),f=this._obtainFont();if(null!=f&&(this._isLoaded||1!==f.size)||(f=this._lineCaptionFont,this._pdfFont=f),void 0!==u&&4===u.length&&(u=new k(x.PdfTextAlignment.center,x.PdfVerticalAlignment.middle),u=f.measureString(i.toFixed(2)+" "+this._unitString,[0,0],u,0,0),a=this._getAngle(this._linePoints),S=this.leaderLine<(S=w=0)?(w=-this.leaderLine,a+180):(w=this.leaderLine,a),P=void 0!==this.leaderOffset?w+this.leaderOffset:w,v=this._getAxisValue([this._linePoints[0],this._linePoints[1]],S+90,P),g=this._getAxisValue([this._linePoints[2],this._linePoints[3]],S+90,P),b=(A=Math.sqrt(Math.pow(g[0]-v[0],2)+Math.pow(g[1]-v[1],2)))/2-(u[0]/2+this.border.width),c=this._getAxisValue(v,a,b),b=this._getAxisValue(g,a+180,b),h=this.lineEndingStyle.begin===x.PdfLineEndingStyle.openArrow||this.lineEndingStyle.begin===x.PdfLineEndingStyle.closedArrow?this._getAxisValue(v,a,this.border.width):v,m=this.lineEndingStyle.end===x.PdfLineEndingStyle.openArrow||this.lineEndingStyle.end===x.PdfLineEndingStyle.closedArrow?this._getAxisValue(g,a,-this.border.width):g,y=void 0,this.opacity&&this._opacity<1&&(y=l.save(),l.setTransparency(this._opacity)),this.caption.type===x.PdfLineCaptionType.top||!this.caption.cap&&this.caption.type===x.PdfLineCaptionType.inline?l.drawLine(_,h[0],-h[1],m[0],-m[1]):(l.drawLine(_,h[0],-h[1],c[0],-c[1]),l.drawLine(_,m[0],-m[1],b[0],-b[1])),this.opacity&&this._opacity<1&&l.restore(y),this._drawLineStyle(v,g,l,a,_,o,this.lineEndingStyle,this.border.width),h=void 0!==this.leaderExt?this._leaderExt:0,c=this._getAxisValue(v,S+90,h),l.drawLine(_,v[0],-v[1],c[0],-c[1]),m=this._getAxisValue(g,S+90,h),l.drawLine(_,g[0],-g[1],m[0],-m[1]),b=this._getAxisValue(v,S-90,w),l.drawLine(_,v[0],-v[1],b[0],-b[1]),y=this._getAxisValue(g,S-90,w),l.drawLine(_,g[0],-g[1],y[0],-y[1]),o=this._getAxisValue(v,a,A/2),c=void 0,h=f._metrics._getHeight(),c=this.caption.type===x.PdfLineCaptionType.top?this._getAxisValue(o,a+90,h):this._getAxisValue(o,a+90,h/2),l.translateTransform(c[0],-c[1]),l.rotateTransform(-a),l.drawString(i.toFixed(2)+" "+this._unitString,f,[-u[0]/2,0,0,0],null,p.foreBrush),l.restore()),void 0!==t&&!t||!this._isLoaded){d._content.dictionary._updated=!0;var g,y,m=this._crossReference._getNextReference(),b=(this._crossReference._cacheMap.set(m,d._content),d._content.reference=m,[this.bounds.x,this.bounds.y+this.bounds.height,this.bounds.width,this.bounds.height]),S=this._page.size,w=(b[1]=S[1]-(this.bounds.y+this.bounds.height),this._isBounds&&!this.measure?this._dictionary.update("Rect",[(e=b)[0],b[1],b[2],b[3]]):this._dictionary.update("Rect",[e[0],e[1],e[2],e[3]]),"font:"+f._metrics._postScriptName+" "+f._size+"pt; color:"+this._colorToHex(this.color)),v=(this._dictionary.update("DS",w),void 0===t||t||(this._dictionary.has("AP")&&R(this._dictionary.get("AP"),this._crossReference,"N"),(_=new D).set("N",m),_._updated=!0,this._dictionary.set("AP",_),g=this._createMeasureDictionary(this._unitString),y=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(y,g),g._updated=!0,this._dictionary.has("Measure")&&R(this._dictionary,this._crossReference,"Measure"),this._dictionary.update("Measure",y)),[]);if(v.push(L.get(Ns(this.lineEndingStyle.begin))),v.push(L.get(Ns(this.lineEndingStyle.end))),this._dictionary.update("LE",v),null===this._linePoints)throw new Error("LinePoints cannot be null");this._dictionary.update("L",this._linePoints),this._dictionary.update("C",[Number.parseFloat((this.color[0]/255).toFixed(3)),Number.parseFloat((this.color[1]/255).toFixed(3)),Number.parseFloat((this.color[2]/255).toFixed(3))]);var P=this._dictionary.has("LLO")?this.leaderOffset:0,A=(this._dictionary.update("Subtype",new L("Line")),this._text&&""!==this._text?this._dictionary.update("Contents",this._text+" "+i.toFixed(2)+" "+this._unitString):this._dictionary.update("Contents",i.toFixed(2)+" "+this._unitString),this._dictionary.update("IT",new L("LineDimension")),this._dictionary.update("LLE",this.leaderExt),this._dictionary.update("LLO",P),this._dictionary.update("LL",this.leaderLine),this._dictionary.update("CP",L.get(this.caption.type===x.PdfLineCaptionType.top?"Top":"Inline")),this._dictionary.update("Cap",this.caption.cap),[e[0],e[1],e[0]+e[2],e[1]+e[3]]);this._dictionary.update("Rect",A),this._bounds={x:A[0],y:A[1],width:A[2],height:A[3]}}return d},Ci.prototype._calculateAngle=function(t,e,i,r){return-(Math.atan2(r-e,i-t)*(180/Math.PI))},Ci.prototype._calculateLineBounds=function(t,e,i,r,n,s){var a,o,h,c,_,d={x:0,y:0,width:0,height:0};return t&&4===t.length&&(h=this._getAngle(t),_=i<(_=c=0)?(c=-i,h+180):(c=i,h),i=[t[0],t[1]],h=[t[2],t[3]],0!==r&&(a=this._getAxisValue(i,_+90,r),o=this._getAxisValue(h,_+90,r),t[0]=a[0],t[1]=a[1],t[2]=o[0],t[3]=o[1]),a=this._getAxisValue(i,_+90,c+r),o=this._getAxisValue(h,_+90,c+r),i=this._getAxisValue(i,_+90,e+c+r),h=this._getAxisValue(h,_+90,e+c+r),e=this._getLinePoint(n.begin,s),c=this._getLinePoint(n.end,s),r=[],n=[],45<=_&&_<=135||225<=_&&_<=315?(r[0]=e.y,n[0]=e.x,r[1]=c.y,n[1]=c.x):(r[0]=e.x,n[0]=e.y,r[1]=c.x,n[1]=c.y),0===(_=Math.max(r[0],r[1]))&&(_=1),0===(e=Math.max(n[0],n[1]))&&(e=1),a[0]===Math.min(a[0],o[0])?(a[0]-=_*s,o[0]+=_*s,a[0]=Math.min(a[0],t[0]),a[0]=Math.min(a[0],i[0]),o[0]=Math.max(o[0],t[2]),o[0]=Math.max(o[0],h[0])):(a[0]+=_*s,o[0]-=_*s,a[0]=Math.max(a[0],t[0]),a[0]=Math.max(a[0],i[0]),o[0]=Math.min(o[0],t[2]),o[0]=Math.min(o[0],h[0])),a[1]===Math.min(a[1],o[1])?(a[1]-=e*s,o[1]+=e*s,a[1]=Math.min(a[1],t[1]),a[1]=Math.min(a[1],i[1]),o[1]=Math.max(o[1],t[3]),o[1]=Math.max(o[1],h[1])):(a[1]+=e*s,o[1]-=e*s,a[1]=Math.max(a[1],t[1]),a[1]=Math.max(a[1],i[1]),o[1]=Math.min(o[1],t[3]),o[1]=Math.min(o[1],h[1])),d=this._getBounds([{x:a[0],y:a[1]},{x:o[0],y:o[1]}])),d},Ci.prototype._getLinePoint=function(t,e){var i={x:0,y:0};if(t)switch(t){case x.PdfLineEndingStyle.square:case x.PdfLineEndingStyle.circle:case x.PdfLineEndingStyle.diamond:i.x=3,i.y=3;break;case x.PdfLineEndingStyle.openArrow:case x.PdfLineEndingStyle.closedArrow:i.x=1,i.y=5;break;case x.PdfLineEndingStyle.rOpenArrow:case x.PdfLineEndingStyle.rClosedArrow:i.x=9+e/2,i.y=5+e/2;break;case x.PdfLineEndingStyle.slash:i.x=5,i.y=9;break;case x.PdfLineEndingStyle.butt:i.x=1,i.y=3;break;default:i.x=0,i.y=0}return i},Ci.prototype._getBounds=function(t){var e={x:0,y:0,width:0,height:0};if(0<t.length){for(var i=t[0].x,r=t[0].x,n=t[0].y,s=t[0].y,a=1;a<t.length;++a)var o=t[Number.parseInt(a.toString(),10)],i=Math.min(o.x,i),r=Math.max(o.x,r),n=Math.min(o.y,n),s=Math.max(o.y,s);e.x=i,e.y=n,e.width=r-i,e.height=s-n}return e},Ci.prototype._obtainLineBounds=function(){var t,e,i,r=this.bounds;return void 0!==this.linePoints&&4===this._linePoints.length&&(t=this._dictionary.has("LLO")?this.leaderOffset:0,e=this._dictionary.has("LLE")?this.leaderExt:0,i=this._dictionary.has("LL")?this.leaderLine:0,r={x:(r=this._calculateLineBounds(this._linePoints,e,i,t,this.lineEndingStyle,this.border.width)).x-8,y:r.y-8,width:r.width+16,height:r.height+16}),[r.x,r.y,r.width,r.height]},Ci.prototype._createAppearance=function(){var t,e,i,r,n,s,a,o,h,c,_,d=new N(this._obtainLineBounds(),this._crossReference),p=new _n,l=(Ks(d,0),d._writeTransformation=!1,d.graphics),u=new T(void 0!==this.color?this._color:[0,0,0],this.border.width),f=(this.border.style===x.PdfBorderStyle.dashed?(u._dashStyle=x.PdfDashStyle.dash,u._dashPattern=[3,1]):this.border.style===x.PdfBorderStyle.dot&&(u._dashStyle=x.PdfDashStyle.dot,u._dashPattern=[1,1]),p.borderPen=u,p.foreBrush=new I(this.color),this.innerColor&&(a=new I(this._innerColor)),this._obtainFont()),g=(null!=f&&(this._isLoaded||1!==f.size)||(f=this._lineCaptionFont,this._pdfFont=f),this.text||this._dictionary.has("Contents")||(this.text=this.subject),new k(x.PdfTextAlignment.center,x.PdfVerticalAlignment.middle)),y=0;return this.caption.cap&&(y=f.measureString(this.text||"",[0,0],g,0,0)[0]),void 0!==this.linePoints&&4===this._linePoints.length&&(g=this._getAngle(this._linePoints),e=t=0,e=(r=null==(r=this.leaderLine)?this._leaderLine=0:r)<0?(t=-r,g+180):(t=r,g),r=void 0!==this.leaderOffset?t+this.leaderOffset:t,i=this._getAxisValue([this._linePoints[0],this._linePoints[1]],e+90,r),r=this._getAxisValue([this._linePoints[2],this._linePoints[3]],e+90,r),s=(n=Math.sqrt(Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2)))/2-(y/2+this.border.width),_=this._getAxisValue(i,g,s),s=this._getAxisValue(r,g+180,s),h=this.lineEndingStyle.begin===x.PdfLineEndingStyle.openArrow||this.lineEndingStyle.begin===x.PdfLineEndingStyle.closedArrow?this._getAxisValue(i,g,this.border.width):i,c=this.lineEndingStyle.end===x.PdfLineEndingStyle.openArrow||this.lineEndingStyle.end===x.PdfLineEndingStyle.closedArrow?this._getAxisValue(r,g,-this.border.width):r,this.opacity&&this._opacity<1?(o=l.save(),l.setTransparency(this._opacity),this._drawLine(l,u,h,c,_,s),l.restore(o)):this._drawLine(l,u,h,c,_,s),this._drawLineStyle(i,r,l,g,u,a,this.lineEndingStyle,this.border.width),o=void 0!==this.leaderExt?this._leaderExt:0,h=this._getAxisValue(i,e+90,o),l.drawLine(u,i[0],-i[1],h[0],-h[1]),c=this._getAxisValue(r,e+90,o),l.drawLine(u,r[0],-r[1],c[0],-c[1]),_=this._getAxisValue(i,e-90,t),l.drawLine(u,i[0],-i[1],_[0],-_[1]),s=this._getAxisValue(r,e-90,t),l.drawLine(u,r[0],-r[1],s[0],-s[1]),a=this._getAxisValue(i,g,n/2),h=void 0,o=f._metrics._getHeight(),h=this.caption.type===x.PdfLineCaptionType.top?this._measure?this._getAxisValue(a,g+90,2*o):this._getAxisValue(a,g+90,o):this._measure?this._getAxisValue(a,g+90,o/2*3):this._getAxisValue(a,g+90,o/2),l.translateTransform(h[0],-h[1]),l.rotateTransform(-g),this.caption.cap&&l.drawString(this.text,f,[-y/2,0,0,0],null,p.foreBrush),l.restore(),_=As({x:(c=this._obtainLineBounds())[0],y:c[1],width:c[2],height:c[3]}),this.bounds={x:_[0],y:_[1],width:_[2],height:_[3]},this.measure||this._dictionary.has("Measure")||this._dictionary.update("Rect",[_[0],_[1],_[2],_[3]])),d},Ci.prototype._drawLine=function(t,e,i,r,n,s){void 0===this.text||""===this._text||this.caption.type===x.PdfLineCaptionType.top||!this.caption.cap&&this.caption.type===x.PdfLineCaptionType.inline?t.drawLine(e,i[0],-i[1],r[0],-r[1]):(t.drawLine(e,i[0],-i[1],n[0],-n[1]),t.drawLine(e,r[0],-r[1],s[0],-s[1]))},Ci.prototype._convertToUnit=function(){for(var t=this._obtainLinePoints(),e=new Array(t.length/2),i=0,r=0;r<t.length;r+=2)e[Number.parseInt(i.toString(),10)]=[t[Number.parseInt(r.toString(),10)],t[r+1]],i++;var n=Math.sqrt(Math.pow(e[1][0]-e[0][0],2)+Math.pow(e[1][1]-e[0][1],2)),s=this._getEqualPdfGraphicsUnit(this.unit,this._unitString);return this._unitString=s.unitString,(new ye)._convertUnits(n,x._PdfGraphicsUnit.point,s.graphicsUnit)},Ci.prototype._obtainLinePoints=function(){var t=[];if(this.linePoints)for(var e=0;e<this._linePoints.length;e++)t[Number.parseInt(e.toString(),10)]=this._linePoints[Number.parseInt(e.toString(),10)];return t};var ki,Ii=Ci;function Ci(t){var e=ki.call(this)||this;return e._unit=x.PdfMeasurementUnit.centimeter,e._unitString="",e._dictionary=new D,e._dictionary.update("Type",L.get("Annot")),e._dictionary.update("Subtype",L.get("Line")),null!=t&&(e.linePoints=t),e._type=x._PdfAnnotationType.lineAnnotation,e}e(Ri,Ti=Ai),Object.defineProperty(Ri.prototype,"measure",{get:function(){return void 0===this._measure&&this._dictionary.has("Measure")&&(this._measure=this._dictionary.get("Measure")),this._measure},set:function(t){!t||this._isLoaded||(this._measure=t)},enumerable:!0,configurable:!0}),Object.defineProperty(Ri.prototype,"unit",{get:function(){var t;return(void 0===this._unit||this._isLoaded)&&(this._unit=x.PdfMeasurementUnit.centimeter,this._dictionary.has("Contents"))&&(t=this._dictionary.get("Contents"),this._unitString=t.substring(t.length-2),this._unit=Qs(this._unitString)),this._unit},set:function(t){!this._measure||this._isLoaded||void 0===t||(this._unit=t)},enumerable:!0,configurable:!0}),Object.defineProperty(Ri.prototype,"measureType",{get:function(){var t;return this._dictionary.has("Contents")&&(t=this._dictionary.get("Contents"),this._unitString=t.substring(t.length-2),this._unit=Qs(this._unitString),t=t.substring(0,t.length-2),(new ye)._convertUnits(this.bounds.width/2,x._PdfGraphicsUnit.point,Zs(this._unitString)).toString()===t?this._measureType=x.PdfCircleMeasurementType.radius:this._measureType=x.PdfCircleMeasurementType.diameter),this._measureType},set:function(t){!this._measure||this._isLoaded||void 0===t||(this._measureType=t)},enumerable:!0,configurable:!0}),Ri._load=function(t,e){var i=new Ri;return i._isLoaded=!0,i._initialize(t,e),i},Ri.prototype._initialize=function(t,e){Ti.prototype._initialize.call(this,t,e)},Ri.prototype._postProcess=function(t){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var e,i;this._dictionary.has("BS")?e=this.border.width:((i=new D(this._crossReference)).set("Type",L.get("Border")),this._dictionary.set("BS",i)),this._dictionary.has("C")||(this.color=[0,0,0],this._isTransparentColor=!0),void 0===e&&(e=1),this._measure?this._appearanceTemplate=this._createCircleMeasureAppearance(t):(this._dictionary.update("Rect",Ca(this)),(this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createCircleAppearance()))},Ri.prototype._doPostProcess=function(t){var e,i,r;void 0===t&&(t=!1),this._isLoaded?((this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._dictionary.has("Measure")?this._appearanceTemplate=this._createCircleMeasureAppearance(t):this._appearanceTemplate=this._createCircleAppearance()),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"),r=e.getRaw("N"),i)&&(r&&(i.reference=r),this._appearanceTemplate=new N(i,this._crossReference))):(this._postProcess(t),!this._appearanceTemplate&&t&&(this._dictionary.has("AP")?null!=(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"),r=e.getRaw("N"),i)&&(r&&(i.reference=r),this._appearanceTemplate=new N(i,this._crossReference)):this._appearanceTemplate=this._createCircleAppearance())),void 0!==this.flattenPopups&&this.flattenPopups&&t&&(this._isLoaded?this._flattenLoadedPopUp():this._flattenPopUp()),t&&this._appearanceTemplate?(e=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary),this._flattenAnnotationTemplate(this._appearanceTemplate,e)):t&&this._page.annotations.remove(this),t||!this._setAppearance||this.measure||(i=void 0,this._dictionary.has("AP")?i=this._dictionary.get("AP"):(e=this._crossReference._getNextReference(),i=new D(this._crossReference),this._crossReference._cacheMap.set(e,i),this._dictionary.update("AP",e)),R(i,this._crossReference,"N"),r=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(r,this._appearanceTemplate._content),i.update("N",r))},Ri.prototype._createCircleMeasureAppearance=function(t){var e,i=this.border.width,r=this._obtainFont(),n=(null!=r&&(this._isLoaded||1!==r.size)||(r=this._circleCaptionFont,this._pdfFont=r),this._convertToUnit()),s=new k(x.PdfTextAlignment.center,x.PdfVerticalAlignment.middle),a=n.toFixed(2)+" "+this._unitString,a=r.measureString(a,[0,0],s,0,0),s=this.color||[0,0,0],o=new T(s,i),h=[this.bounds.x,this.bounds.y+this.bounds.height,this.bounds.width,this.bounds.height],c=(h[1]=h[1]-h[3],new N(h,this._crossReference)),_=new _n,d=(c._writeTransformation=!1,c.graphics),p=i/2,o=(_.borderPen=o,this.innerColor&&(_.backBrush=new I(this._innerColor)),_.foreBrush=new I(s),[h[0],-h[1]-h[3],h[2],h[3]]);return d.save(),d.drawEllipse(o[0]+p,o[1]+p,o[2]-i,o[3]-i,new T(s,this.border.width)),this._measureType===x.PdfCircleMeasurementType.diameter?(d.save(),d.translateTransform(h[0],-h[1]),e=h[3]/2-a[0]/2,d.drawLine(_.borderPen,0,-h[3]/2,h[0]+h[2],-h[3]/2)):(d.save(),d.translateTransform(h[0],-h[1]),e=h[2]/2+(h[2]/4-a[0]/2),d.drawLine(_.borderPen,h[2]/2,-h[3]/2,h[0]+h[2],-h[3]/2)),d.translateTransform(e,-h[3]/2-r._metrics._getHeight()),d.drawString(n.toFixed(2)+" "+this._unitString,r,[0,0,0,0],null,_.foreBrush),d.restore(),d.restore(),(void 0===t||t)&&this._isLoaded||(this._dictionary.has("AP")&&R(this._dictionary.get("AP"),this._crossReference,"N"),p=new D,d._template._content.dictionary._updated=!0,o=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(o,d._template._content),d._template._content.reference=o,p.set("N",o),p._updated=!0,this._dictionary.set("AP",p),this._dictionary.update("Rect",Ca(this)),this._dictionary.has("Measure")&&R(this._dictionary,this._crossReference,"Measure"),i=this._createMeasureDictionary(this._unitString),s=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(s,i),i._updated=!0,this._dictionary.update("Measure",s),this._dictionary.update("Subtype",new L("Circle")),this._text&&""!==this._text?this._dictionary.update("Contents",this._text+" "+n.toFixed(2)+" "+this._unitString):this._dictionary.update("Contents",n.toFixed(2)+" "+this._unitString),a="font:"+r._metrics._postScriptName+" "+r._size+"pt; color:"+this._colorToHex(this.color),this._dictionary.update("DS",a)),c},Ri.prototype._convertToUnit=function(){var t=new ye,e=this._getEqualPdfGraphicsUnit(this.unit,this._unitString),t=(this._unitString=e.unitString,t._convertUnits(this.bounds.width/2,x._PdfGraphicsUnit.point,e.graphicsUnit));return this._measureType===x.PdfCircleMeasurementType.diameter&&(t*=2),t};var Ti,Ni=Ri;function Ri(t,e,i,r){var n=Ti.call(this)||this;return n._unit=x.PdfMeasurementUnit.centimeter,n._measureType=x.PdfCircleMeasurementType.diameter,n._unitString="",n._dictionary=new D,n._dictionary.update("Type",L.get("Annot")),n._dictionary.update("Subtype",L.get("Circle")),void 0!==t&&void 0!==e&&void 0!==i&&void 0!==r&&(n.bounds={x:t,y:e,width:i,height:r}),n._type=x._PdfAnnotationType.circleAnnotation,n}e(Di,Fi=Ai),Di._load=function(t,e){var i=new Di;return i._isLoaded=!0,i._initialize(t,e),i},Di.prototype._initialize=function(t,e){Fi.prototype._initialize.call(this,t,e)},Di.prototype._postProcess=function(t){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var e,i;this._dictionary.has("BS")?e=this.border.width:((i=new D(this._crossReference)).set("Type",L.get("Border")),this._dictionary.set("BS",i)),this._dictionary.has("C")||(this.color=[0,0,0],this._isTransparentColor=!0),void 0===e&&(e=1),(this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createCircleAppearance()),this._dictionary.update("Rect",Ca(this))},Di.prototype._doPostProcess=function(t){var e,i,r;void 0===t&&(t=!1),this._isLoaded?((this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createCircleAppearance()),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"),r=e.getRaw("N"),i)&&(r&&(i.reference=r),this._appearanceTemplate=new N(i,this._crossReference))):(this._postProcess(t),!this._appearanceTemplate&&t&&(this._dictionary.has("AP")?(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"),r=e.getRaw("N"),i)&&(r&&(i.reference=r),this._appearanceTemplate=new N(i,this._crossReference)):this._appearanceTemplate=this._createCircleAppearance())),void 0!==this.flattenPopups&&this.flattenPopups&&(this._isLoaded?this._flattenLoadedPopUp():this._flattenPopUp()),t&&this._appearanceTemplate?(e=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary),this._flattenAnnotationTemplate(this._appearanceTemplate,e)):t&&this._page.annotations.remove(this),!t&&this._setAppearance&&(i=void 0,this._dictionary.has("AP")?i=this._dictionary.get("AP"):(e=this._crossReference._getNextReference(),i=new D(this._crossReference),this._crossReference._cacheMap.set(e,i),this._dictionary.update("AP",e)),R(i,this._crossReference,"N"),r=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(r,this._appearanceTemplate._content),i.update("N",r))};var Fi,Li=Di;function Di(t,e,i,r){var n=Fi.call(this)||this;return n._dictionary=new D,n._dictionary.update("Type",L.get("Annot")),n._dictionary.update("Subtype",L.get("Circle")),void 0!==t&&void 0!==e&&void 0!==i&&void 0!==r&&(n.bounds={x:t,y:e,width:i,height:r}),n._type=x._PdfAnnotationType.ellipseAnnotation,n}e(Mi,Bi=Ai),Object.defineProperty(Mi.prototype,"borderEffect",{get:function(){var t,e;return void 0===this._borderEffect&&((t=new hn)._dictionary=this._dictionary,this._dictionary.has("BE")&&(e=this._dictionary.get("BE"),t._intensity=e.get("I"),t._style=Ts(e.get("S").name)),this._borderEffect=t),this._borderEffect},set:function(t){void 0!==t&&(this._borderEffect=t)},enumerable:!0,configurable:!0}),Object.defineProperty(Mi.prototype,"measure",{get:function(){return void 0===this._measure&&this._dictionary.has("Measure")&&(this._measure=this._dictionary.get("Measure")),this._measure},set:function(t){void 0===t||this._isLoaded||(this._measure=t)},enumerable:!0,configurable:!0}),Object.defineProperty(Mi.prototype,"unit",{get:function(){var t;return void 0===this._unit&&(this._unit=x.PdfMeasurementUnit.centimeter,this._dictionary.has("Contents"))&&(t=this._dictionary.get("Contents"),this._unitString=t.substring(t.length-2),this._unit=Qs(this._unitString)),this._unit},set:function(t){!this._measure||this._isLoaded||void 0===t||(this._unit=t)},enumerable:!0,configurable:!0}),Mi._load=function(t,e){var i=new Mi;return i._isLoaded=!0,i._initialize(t,e),i},Mi.prototype._initialize=function(t,e){Bi.prototype._initialize.call(this,t,e)},Mi.prototype._postProcess=function(t){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var e,i;this._dictionary.has("BS")?e=this.border.width:((i=new D(this._crossReference)).set("Type",L.get("Border")),this._dictionary.set("BS",i)),this._dictionary.has("C")||(this.color=[0,0,0],this._isTransparentColor=!0),void 0===e&&(e=1),this._measure?this._appearanceTemplate=this._createSquareMeasureAppearance(t):((this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createRectangleAppearance(this.borderEffect)),this._dictionary.update("Rect",Ca(this)),void 0===this._intensity&&void 0!==this._borderEffect&&this._borderEffect.style===x.PdfBorderEffectStyle.cloudy&&((i=new D(this._crossReference)).set("I",this.borderEffect._intensity),this.borderEffect._style===x.PdfBorderEffectStyle.cloudy&&i.set("S",L.get("C")),this._dictionary.update("BE",i)))},Mi.prototype._doPostProcess=function(t){var e,i,r;void 0===t&&(t=!1),this._isLoaded?((this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._dictionary.has("Measure")?this._appearanceTemplate=this._createSquareMeasureAppearance(t):this._appearanceTemplate=this._createRectangleAppearance(this.borderEffect)),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"),r=e.getRaw("N"),i)&&(r&&(i.reference=r),this._appearanceTemplate=new N(i,this._crossReference))):(this._postProcess(t),!this._appearanceTemplate&&t&&(this._dictionary.has("AP")?(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"),r=e.getRaw("N"),i)&&(r&&(i.reference=r),this._appearanceTemplate=new N(i,this._crossReference)):this._appearanceTemplate=this._createRectangleAppearance(this.borderEffect))),void 0!==this.flattenPopups&&this.flattenPopups&&!this.measure&&(this._isLoaded&&!this._dictionary.has("Measure")?this._flattenLoadedPopUp():this._flattenPopUp()),t&&this._appearanceTemplate?(e=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary),this._flattenAnnotationTemplate(this._appearanceTemplate,e)):t&&this._page.annotations.remove(this),t||!this._setAppearance||this.measure||(i=void 0,this._dictionary.has("AP")?i=this._dictionary.get("AP"):(e=this._crossReference._getNextReference(),i=new D(this._crossReference),this._crossReference._cacheMap.set(e,i),this._dictionary.update("AP",e)),R(i,this._crossReference,"N"),r=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(r,this._appearanceTemplate._content),i.update("N",r))},Mi.prototype._createSquareMeasureAppearance=function(t){var e=this.border.width,i=this._obtainFont(),r=(null!=i&&(this._isLoaded||1!==i.size)||(i=this._circleCaptionFont,this._pdfFont=i),this._calculateAreaOfSquare()),n=new k(x.PdfTextAlignment.center,x.PdfVerticalAlignment.middle),s=r.toFixed(2)+" sq "+this._unitString,s=i.measureString(s,[0,0],n,0,0),n=new T(this.color,e),a=(this.innerColor&&(d=new I(this._innerColor)),[this.bounds.x,this.bounds.y+this.bounds.height,this.bounds.width,this.bounds.height]),o=[this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height],o=new bi(this,o),h=(a[1]=a[1]-a[3],o.normal=new N(a,this._crossReference),o.normal),c=new _n,o=(h._writeTransformation=!1,o.normal.graphics),_=e/2,n=(c.borderPen=n,c.backBrush=d,c.foreBrush=new I(this.color),[a[0],-a[1]-a[3],a[2],a[3]]),d=(o.drawRectangle(n[0]+_,n[1]+_,n[2]-e,n[3]-e,new T(this.color,this.border.width)),o.save(),o.translateTransform(a[0],-a[1]),a[2]/2-s[0]/2),_=a[3]/2-s[1]/2;return o.translateTransform(d,-_-i._metrics._getHeight()),o.drawString(r.toFixed(2)+" sq "+this._unitString,i,[0,0,0,0],null,c.foreBrush),o.restore(),(void 0===t||t)&&this._isLoaded||(this._dictionary.has("AP")&&R(this._dictionary.get("AP"),this._crossReference,"N"),n=new D,(e=o._template._content).dictionary._updated=!0,s=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(s,e),o._template._content.reference=s,n.set("N",s),n._updated=!0,this._dictionary.set("AP",n),d=[this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height],_=this._page.size,d[1]=_[1]-(this.bounds.y+this.bounds.height),d[2]=this.bounds.x+this.bounds.width,d[3]=_[1]-this.bounds.y,this._isBounds&&(a=d),this._page._isNew&&this._page._pageSettings&&(d=Ca(this)),this._dictionary.update("Rect",[d[0],d[1],d[2],d[3]]),this._dictionary.has("Measure")&&R(this._dictionary,this._crossReference,"Measure"),c=this._crossReference._getNextReference(),t=this._createMeasureDictionary(this._unitString),this._crossReference._cacheMap.set(c,t),t._updated=!0,this._dictionary.update("Measure",c),e="font:"+i._metrics._postScriptName+" "+i._size+"pt; color:"+this._colorToHex(this.color),this._dictionary.update("DS",e),this._text&&""!==this._text?this._dictionary.update("Contents",this._text+" "+r.toFixed(2)+" sq "+this._unitString):this._dictionary.update("Contents",r.toFixed(2)+" sq "+this._unitString),this._dictionary.update("Subject","Area Measurement"),void 0===this.subject&&this._dictionary.update("Subject","Area Measurement"),this._dictionary.update("MeasurementTypes",129),this._dictionary.update("Subtype",new L("Square")),this._dictionary.update("IT",new L("SquareDimension")),o=this._dictionary.getArray("Rect"),(s=new Array(2*o.length))[0]=o[0],s[1]=o[3],s[2]=o[0],s[3]=o[1],s[4]=o[2],s[5]=o[1],s[6]=o[2],s[7]=o[3],this._dictionary.update("Vertices",s)),h},Mi.prototype._calculateAreaOfSquare=function(){var t,e,i=new ye;return this.bounds.width===this.bounds.height?(e=this._getEqualPdfGraphicsUnit(this.unit,this._unitString),this._unitString=e.unitString,(t=i._convertUnits(this.bounds.width,x._PdfGraphicsUnit.point,e.graphicsUnit))*t):(e=this._getEqualPdfGraphicsUnit(this.unit,this._unitString),this._unitString=e.unitString,t=i._convertUnits(this.bounds.width,x._PdfGraphicsUnit.point,e.graphicsUnit),e=this._getEqualPdfGraphicsUnit(this.unit,this._unitString),this._unitString=e.unitString,t*i._convertUnits(this.bounds.height,x._PdfGraphicsUnit.point,e.graphicsUnit))};var Bi,Oi=Mi;function Mi(t,e,i,r){var n=Bi.call(this)||this;return n._unit=x.PdfMeasurementUnit.centimeter,n._dictionary=new D,n._dictionary.update("Type",L.get("Annot")),n._dictionary.update("Subtype",L.get("Square")),void 0!==t&&void 0!==e&&void 0!==i&&void 0!==r&&(n.bounds={x:t,y:e,width:i,height:r}),n._type=x._PdfAnnotationType.squareAnnotation,n}e(Vi,Ei=Ai),Object.defineProperty(Vi.prototype,"borderEffect",{get:function(){var t,e;return void 0===this._borderEffect&&((t=new hn)._dictionary=this._dictionary,this._dictionary.has("BE")&&(e=this._dictionary.get("BE"),t._intensity=e.get("I"),t._style=Ts(e.get("S").name)),this._borderEffect=t),this._borderEffect},set:function(t){void 0!==t&&(this._borderEffect=t)},enumerable:!0,configurable:!0}),Vi._load=function(t,e){var i=new Vi;return i._isLoaded=!0,i._initialize(t,e),i},Vi.prototype._initialize=function(t,e){Ei.prototype._initialize.call(this,t,e)},Vi.prototype._postProcess=function(t){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var e,i;this._dictionary.has("BS")?e=this.border.width:((i=new D(this._crossReference)).set("Type",L.get("Border")),this._dictionary.set("BS",i)),this._dictionary.has("C")||(this.color=[0,0,0],this._isTransparentColor=!0),void 0===e&&(e=1),this._dictionary.update("Rect",Ca(this)),(this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createRectangleAppearance(this.borderEffect)),void 0===this._intensity&&void 0!==this._borderEffect&&this._borderEffect.style===x.PdfBorderEffectStyle.cloudy&&((i=new D(this._crossReference)).set("I",this.borderEffect._intensity),this.borderEffect._style===x.PdfBorderEffectStyle.cloudy&&i.set("S",L.get("C")),this._dictionary.update("BE",i))},Vi.prototype._doPostProcess=function(t){var e,i,r;void 0===t&&(t=!1),this._isLoaded?((this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createRectangleAppearance(this.borderEffect)),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"),r=e.getRaw("N"),i)&&(r&&(i.reference=r),this._appearanceTemplate=new N(i,this._crossReference))):(this._postProcess(t),!this._appearanceTemplate&&t&&(this._dictionary.has("AP")?(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"),r=e.getRaw("N"),i)&&(r&&(i.reference=r),this._appearanceTemplate=new N(i,this._crossReference)):this._appearanceTemplate=this._createRectangleAppearance(this.borderEffect))),void 0!==this.flattenPopups&&this.flattenPopups&&(this._isLoaded?this._flattenLoadedPopUp():this._flattenPopUp()),t&&this._appearanceTemplate?((e=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary))&&this._page&&this._page.rotation!==x.PdfRotationAngle.angle0||this._isValidTemplateMatrix(this._appearanceTemplate._content.dictionary,this.bounds,this._appearanceTemplate))&&this._flattenAnnotationTemplate(this._appearanceTemplate,e):t&&this._page.annotations.remove(this),!t&&this._setAppearance&&(i=void 0,this._dictionary.has("AP")?i=this._dictionary.get("AP"):(e=this._crossReference._getNextReference(),i=new D(this._crossReference),this._crossReference._cacheMap.set(e,i),this._dictionary.update("AP",e)),R(i,this._crossReference,"N"),r=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(r,this._appearanceTemplate._content),i.update("N",r))},Vi.prototype._isValidTemplateMatrix=function(t,e,i){var r,n,s=!0;return t&&t.has("Matrix")&&(r=t.getArray("BBox"),t=t.getArray("Matrix"))&&r&&3<t.length&&2<r.length&&void 0!==t[0]&&void 0!==t[1]&&void 0!==t[2]&&void 0!==t[3]&&1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&void 0!==r[0]&&void 0!==r[1]&&void 0!==r[2]&&void 0!==r[3]&&(Math.round(r[0])!==Math.round(-t[4])&&Math.round(r[1])!==Math.round(-t[5])||0===r[0]&&0===Math.round(-t[4]))&&(n=(t=this._page.graphics).save(),void 0!==this.opacity&&this._opacity<1&&t.setTransparency(this._opacity),e.x-=r[0],e.y+=r[1],t.drawTemplate(i,e),t.restore(n),this._page.annotations.remove(this),s=!1),s};var Ei,ji=Vi;function Vi(t,e,i,r){var n=Ei.call(this)||this;return n._dictionary=new D,n._dictionary.update("Type",L.get("Annot")),n._dictionary.update("Subtype",L.get("Square")),void 0!==t&&void 0!==e&&void 0!==i&&void 0!==r&&(n.bounds={x:t,y:e,width:i,height:r}),n._type=x._PdfAnnotationType.rectangleAnnotation,n}e(Hi,zi=Ai),Object.defineProperty(Hi.prototype,"borderEffect",{get:function(){var t,e;return void 0===this._borderEffect&&((t=new hn)._dictionary=this._dictionary,this._dictionary.has("BE")&&(e=this._dictionary.get("BE"),t._intensity=e.get("I"),t._style=Ts(e.get("S").name)),this._borderEffect=t),this._borderEffect},set:function(t){void 0!==t&&(this._borderEffect=t)},enumerable:!0,configurable:!0}),Object.defineProperty(Hi.prototype,"lineExtension",{get:function(){var t;return void 0===this._lineExtension&&this._dictionary.has("LLE")&&void 0!==(t=this._dictionary.get("LLE"))&&0<=t&&(this._lineExtension=t),this._lineExtension},set:function(t){if(!Number.isNaN(t)){if(!(0<=t))throw new Error("LineExtension should be non negative number");this._dictionary.update("LLE",t),this._lineExtension=t}},enumerable:!0,configurable:!0}),Hi._load=function(t,e){var i=new Hi;return i._isLoaded=!0,i._initialize(t,e),i},Hi.prototype._initialize=function(t,e){zi.prototype._initialize.call(this,t,e)},Hi.prototype._postProcess=function(t){if(void 0===this._points||null===this._points)throw new Error("Points cannot be null or undefined");this._dictionary.has("LLE")||(this.lineExtension=0),this._dictionary.has("C")||(this.color=[0,0,0],this._isTransparentColor=!0),this._dictionary.has("BS")?s=this.border.width:((n=new D(this._crossReference)).set("Type",L.get("Border")),this._dictionary.set("BS",n)),void 0===s&&(s=1);for(var e=[],i=0;i<this._points.length;i++){var r=this._points[Number.parseInt(i.toString(),10)];e.push(r)}this._points=this._getPoints(this._points),e[0]===e[e.length-2]&&e[1]===e[e.length-1]||(this._points.push(this._points[0]),this._points.push(this._points[1]));var n,s=this._getBoundsValue(this._points),s=[s.x,s.y,s.x+s.width,s.y+s.height];this._dictionary.update("Rect",s),this._dictionary.update("LLE",this._lineExtension),(this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createPolygonAppearance(t)),this._dictionary.update("Vertices",this._points),void 0===this._intensity&&void 0!==this._borderEffect&&this._borderEffect.style===x.PdfBorderEffectStyle.cloudy&&((n=new D(this._crossReference)).set("I",this.borderEffect._intensity),this.borderEffect._style===x.PdfBorderEffectStyle.cloudy&&n.set("S",L.get("C")),this._dictionary.update("BE",n))},Hi.prototype._doPostProcess=function(t){var e,i,r;this._flatten=t=void 0===t?!1:t,this._isLoaded?(this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createPolygonAppearance(t)):this._postProcess(t),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"),r=e.getRaw("N"),i)&&(r&&(i.reference=r),this._appearanceTemplate=new N(i,this._crossReference)),void 0!==this.flattenPopups&&this.flattenPopups&&this._isLoaded&&this._flattenLoadedPopUp(),t&&(this._appearanceTemplate?(e=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary),this._appearanceTemplate._content.dictionary.has("Matrix")||(i=this._appearanceTemplate._content.dictionary.getArray("BBox"))&&2<=i.length&&this._appearanceTemplate._content.dictionary.update("Matrix",[1,0,0,1,-i[0],-i[1]]),this._flattenAnnotationTemplate(this._appearanceTemplate,e)):this._page.annotations.remove(this)),!t&&this._setAppearance&&(i=void 0,this._dictionary.has("AP")?i=this._dictionary.get("AP"):(e=this._crossReference._getNextReference(),i=new D(this._crossReference),this._crossReference._cacheMap.set(e,i),this._dictionary.update("AP",e)),R(i,this._crossReference,"N"),r=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(r,this._appearanceTemplate._content),i.update("N",r))},Hi.prototype._createPolygonAppearance=function(t){var e,i,r,n,s;return void 0!==t&&t?(t=void 0,e=void(this.color&&0<this.border.width&&(t=new T(this.color,this.border.width))),this.innerColor&&(e=new I(this.innerColor)),i=this._page.graphics,(t||e)&&((r=void 0)!==this.opacity&&this._opacity<1&&(r=i.save(),i.setTransparency(this._opacity)),0!==this.borderEffect.intensity&&this.borderEffect.style===x.PdfBorderEffectStyle.cloudy?(n=4*this.borderEffect.intensity+.5*this.border.width,(s=new C).addPolygon(this._getLinePoints()),this._drawCloudStyle(i,e,t,n,.833,s._points,!1)):i.drawPolygon(this._getLinePoints(),t,e),void 0!==this.opacity)&&this._opacity<1&&i.restore(r),i._template):(t={x:0,y:0,width:0,height:0},(e=void 0)===this._points&&this._dictionary.has("Vertices")&&(this._points=this._dictionary.get("Vertices")),e=this._getBoundsValue(this._points),void 0!==this._borderEffect&&void 0!==this.borderEffect.intensity&&0!==this.borderEffect.intensity&&this._borderEffect.style===x.PdfBorderEffectStyle.cloudy?(t.x=e.x-5*this.borderEffect.intensity-this.border.width,t.y=e.y-5*this.borderEffect.intensity-this.border.width,t.width=e.width+10*this.borderEffect.intensity+2*this.border.width,t.height=e.height+10*this.borderEffect.intensity+2*this.border.width):(t.x=e.x-this.border.width,t.y=e.y-this.border.width,t.width=e.width+2*this.border.width,t.height=e.height+2*this.border.width),(r=new bi(this,[t.x,t.y,t.width,t.height])).normal=new N([t.x,t.y,t.width,t.height],this._crossReference),Ks(e=r.normal,this._getRotationAngle()),e._writeTransformation=!1,i=r.normal.graphics,r=new _n,this.innerColor&&(r.backBrush=new I(this._innerColor)),0<this.border.width&&this.color&&(r.borderPen=new T(this._color,this.border.width)),this.color&&(r.foreBrush=new I(this._color)),void 0!==this.opacity&&this._opacity<1?(i.save(),i.setTransparency(this._opacity)):i.save(),F(this.borderEffect)&&F(this.borderEffect.intensity)&&0!==this.borderEffect.intensity&&this.borderEffect.style===x.PdfBorderEffectStyle.cloudy?(n=4*this.borderEffect.intensity+.5*this.border.width,(s=new C).addPolygon(this._getLinePoints()),this._drawCloudStyle(i,r.backBrush,r.borderPen,n,.833,s._points,!1)):i.drawPolygon(this._getLinePoints(),r.borderPen,r.backBrush),void 0!==this.opacity&&this._opacity<1&&i.restore(),i.restore(),this._isBounds&&(e._content.dictionary._updated=!0,this._dictionary.update("LLE",this.lineExtension),this._dictionary.update("Vertices",this._points)),this._dictionary.update("Rect",[t.x,t.y,t.x+t.width,t.y+t.height]),e)},Hi.prototype._getLinePoints=function(){var t=this._page.size,e=t[1],i=t[0];if(this._dictionary.has("Vertices")&&!this._isBounds){var t=void 0,r=(this._page._pageDictionary.has("Rotate")&&(t=this._page._pageDictionary.get("Rotate")),this._page&&this._page.rotation&&(this._page.rotation===x.PdfRotationAngle.angle90?t=90:this._page.rotation===x.PdfRotationAngle.angle180?t=180:this._page.rotation===x.PdfRotationAngle.angle270&&(t=270)),this._dictionary.getArray("Vertices"));if(r){var n=[];r.forEach(function(t){n.push(t)});for(var s=[],a=0;a<n.length;a+=2)this.flatten?s.push([n[Number.parseInt(a.toString(),10)],e-n[a+1]]):s.push([n[Number.parseInt(a.toString(),10)],-n[a+1]]);if(t)if(270===t)for(var o=0;o<s.length;o++){var h=s[Number.parseInt(o.toString(),10)][0];s[Number.parseInt(o.toString(),10)][0]=s[Number.parseInt(o.toString(),10)][1],s[Number.parseInt(o.toString(),10)][1]=i-h}else if(90===t)for(o=0;o<s.length;o++){h=s[Number.parseInt(o.toString(),10)][0];0!==this._page._origin[1]?s[Number.parseInt(o.toString(),10)][0]=e-(s[Number.parseInt(o.toString(),10)][1]-e):s[Number.parseInt(o.toString(),10)][0]=e-s[Number.parseInt(o.toString(),10)][1],s[Number.parseInt(o.toString(),10)][1]=h}else if(180===t)for(o=0;o<s.length;o++){h=s[Number.parseInt(o.toString(),10)][0];s[Number.parseInt(o.toString(),10)][0]=i-h,s[Number.parseInt(o.toString(),10)][1]=e-s[Number.parseInt(o.toString(),10)][1]}}}else if(this._points){var c=[];this._points.forEach(function(t){c.push(t)}),s=[];for(a=0;a<this._points.length;a+=2)this.flatten?s.push([c[Number.parseInt(a.toString(),10)],e-c[a+1]]):s.push([c[Number.parseInt(a.toString(),10)],-c[a+1]])}return s};var zi,Ui=Hi;function Hi(t){var e=zi.call(this)||this;return e._dictionary=new D,e._dictionary.update("Type",L.get("Annot")),e._dictionary.update("Subtype",L.get("Polygon")),void 0!==t&&(e._points=t),e._type=x._PdfAnnotationType.polygonAnnotation,e}e(Ki,Wi=Ai),Object.defineProperty(Ki.prototype,"beginLineStyle",{get:function(){var t;return this._dictionary.has("LE")&&(t=this._dictionary.getArray("LE"))&&Array.isArray(t)&&(this._beginLine=Rs(t[0].name)),this._beginLine},set:function(t){var e;t!==this._beginLine&&(this._beginLine=t,this._dictionary)&&((e=[]).push(L.get(Ns(t))),e.push(L.get(Ns(this.endLineStyle))),this._dictionary.update("LE",e))},enumerable:!0,configurable:!0}),Object.defineProperty(Ki.prototype,"endLineStyle",{get:function(){var t;return this._dictionary.has("LE")&&(t=this._dictionary.getArray("LE"))&&Array.isArray(t)&&(this._endLine=Rs(t[1].name)),this._endLine},set:function(t){var e;t!==this._endLine&&(this._endLine=t,this._dictionary)&&((e=[]).push(L.get(Ns(this.beginLineStyle))),e.push(L.get(Ns(t))),this._dictionary.update("LE",e))},enumerable:!0,configurable:!0}),Object.defineProperty(Ki.prototype,"lineExtension",{get:function(){var t;return void 0===this._lineExtension&&this._dictionary.has("LLE")&&void 0!==(t=this._dictionary.get("LLE"))&&0<=t&&(this._lineExtension=t),this._lineExtension},set:function(t){if(!Number.isNaN(t)){if(!(0<=t))throw new Error("LineExtension should be non negative number");this._dictionary.update("LLE",t),this._lineExtension=t}},enumerable:!0,configurable:!0}),Ki._load=function(t,e){var i=new Ki;return i._isLoaded=!0,i._initialize(t,e),i},Ki.prototype._initialize=function(t,e){Wi.prototype._initialize.call(this,t,e)},Ki.prototype._postProcess=function(t){if(void 0===this._points||null===this._points)throw new Error("Points cannot be null or undefined");this._dictionary.has("LLE")||(this.lineExtension=0),this._dictionary.has("C")||(this.color=[0,0,0],this._isTransparentColor=!0),this._dictionary.has("BS")?s=this.border.width:((n=new D(this._crossReference)).set("Type",L.get("Border")),this._dictionary.set("BS",n)),void 0===s&&(s=1);var e=this._getLinePoints(),i=[];i.push(0);for(var r=1;r<e.length;r++)i.push(1);this._polylinePoints=e,this._pathTypes=i;var n=new C,s=(n._points=e,n._pathTypes=i,this._dictionary.update("Vertices",this._points),[]),n=(s.push(L.get(Ns(this.beginLineStyle))),s.push(L.get(Ns(this.endLineStyle))),this._dictionary.update("LE",s),this._dictionary.update("LLE",this._lineExtension),this._getBoundsValue(this._points)),s=[n.x,n.y,n.x+n.width,n.y+n.height];this._dictionary.update("Rect",s),(this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createPolyLineAppearance(t))},Ki.prototype._doPostProcess=function(t){var e,i,r;this._flatten=t=void 0===t?!1:t,this._isLoaded?((this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createPolyLineAppearance(t)),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"),r=e.getRaw("N"),i)&&(r&&(i.reference=r),this._appearanceTemplate=new N(i,this._crossReference))):(this._postProcess(t),!this._appearanceTemplate&&t&&(this._dictionary.has("AP")?(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"),r=e.getRaw("N"),i)&&(r&&(i.reference=r),this._appearanceTemplate=new N(i,this._crossReference)):this._appearanceTemplate=this._createPolyLineAppearance(t))),void 0!==this.flattenPopups&&this.flattenPopups&&this._isLoaded&&this._flattenLoadedPopUp(),t&&(this._appearanceTemplate?(e=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary),this._appearanceTemplate._content.dictionary.has("Matrix")||(i=this._appearanceTemplate._content.dictionary.getArray("BBox"))&&this._appearanceTemplate._content.dictionary.update("Matrix",[1,0,0,1,-i[0],-i[1]]),this._flattenAnnotationTemplate(this._appearanceTemplate,e)):this._page.annotations.remove(this)),!t&&this._setAppearance&&(i=void 0,this._dictionary.has("AP")?i=this._dictionary.get("AP"):(e=this._crossReference._getNextReference(),i=new D(this._crossReference),this._crossReference._cacheMap.set(e,i),this._dictionary.update("AP",e)),R(i,this._crossReference,"N"),r=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(r,this._appearanceTemplate._content),i.update("N",r))},Ki.prototype._createPolyLineAppearance=function(t){var e=this.color||[0,0,0];if(void 0!==t&&t){var t=void 0,i=(0<this.border.width&&(t=new T(e,this.border.width)),this._page.graphics);if(t){var r=void 0,n=(void 0!==this.opacity&&this._opacity<1&&(r=i.save(),i.setTransparency(this._opacity)),this._getLinePoints()),s=[];if(s.push(0),n&&0<n.length){for(var a=1;a<n.length;a++)s.push(1);(h=new C)._points=n,h._pathTypes=s,i.drawPath(h,t),void 0!==this.opacity&&this._opacity<1&&i.restore(r)}}return i._template}var t=void 0,r={x:0,y:0,width:0,height:0},t=(void 0===this._points&&this._dictionary.has("Vertices")&&(this._points=this._dictionary.get("Vertices")),this._getBoundsValue(this._points)),t=(r.x=t.x-this.border.width,r.y=t.y-this.border.width,r.width=t.width+2*this.border.width,r.height=t.height+2*this.border.width,new bi(this,[r.x,r.y,r.width,r.height])),o=(t.normal=new N([r.x,r.y,r.width,r.height],this._crossReference),t.normal),i=(Ks(o,this._getRotationAngle()),o._writeTransformation=!1,t.normal.graphics),t=new _n,h=(this.innerColor&&(t.backBrush=new I(this._innerColor)),0<this.border.width&&e&&(t.borderPen=new T(e,this.border.width)),e&&(t.foreBrush=new I(e)),void 0!==this.opacity&&this._opacity<1?(i.save(),i.setTransparency(this._opacity)):i.save(),new C);if(void 0!==this._polylinePoints&&null!==this._polylinePoints?h._points=this._polylinePoints:h._points=this._getLinePoints(),void 0===this._pathTypes||null===this._polylinePoints){this._pathTypes=[],this._pathTypes.push(0);for(a=1;a<h._points.length;a++)this._pathTypes.push(1)}return h._pathTypes=this._pathTypes,i.drawPath(h,t.borderPen,t.backBrush),void 0!==this.opacity&&this._opacity<1&&i.restore(),i.restore(),this._isBounds&&(o._content.dictionary._updated=!0,(e=[]).push(L.get(Ns(this.beginLineStyle))),e.push(L.get(Ns(this.endLineStyle))),this._dictionary.update("LE",e),this._dictionary.update("LLE",this.lineExtension),this._dictionary.update("Vertices",this._points)),this._dictionary.update("Rect",[r.x,r.y,r.x+r.width,r.y+r.height]),o},Ki.prototype._getLinePoints=function(){var t=this._page.size[1];if(this._dictionary.has("Vertices")&&!this._isBounds&&(!this._setAppearance||this._setAppearance&&this.flatten)){var e=this._dictionary.getArray("Vertices");if(e)for(var i=[],r=0;r<e.length;r+=2)i.push([e[Number.parseInt(r.toString(),10)],t-e[r+1]])}else if(this._points){this._points=this._getPoints(this._points);var n=[];this._points.forEach(function(t){n.push(t)}),i=[];for(r=0;r<n.length;r+=2)this.flatten?i.push([n[Number.parseInt(r.toString(),10)],t-n[r+1]]):i.push([n[Number.parseInt(r.toString(),10)],-n[r+1]])}return i};var Wi,Gi=Ki;function Ki(t){var e=Wi.call(this)||this;return e._beginLine=x.PdfLineEndingStyle.none,e._endLine=x.PdfLineEndingStyle.none,e._dictionary=new D,e._dictionary.update("Type",L.get("Annot")),e._dictionary.update("Subtype",L.get("PolyLine")),e._points=void 0!==t?t:[],e._type=x._PdfAnnotationType.polyLineAnnotation,e}e(Qi,Xi=Ai),Object.defineProperty(Qi.prototype,"measure",{get:function(){return void 0===this._measure&&this._dictionary.has("Measure")&&(this._measure=this._dictionary.get("Measure")),this._measure},set:function(t){t&&!this._isLoaded&&(this._measure=t,this.caption.cap=!0)},enumerable:!0,configurable:!0}),Qi._load=function(t,e){var i=new Qi;return i._isLoaded=!0,i._initialize(t,e),i},Qi.prototype._initialize=function(t,e){Xi.prototype._initialize.call(this,t,e)},Qi.prototype._postProcess=function(){if(!this._pointArray)throw new Error("Points cannot be null or undefined");var t,e;this._dictionary.has("BS")?t=this.border.width:((e=new D(this._crossReference)).set("Type",L.get("Border")),this._dictionary.set("BS",e)),this._dictionary.has("C")||(this.color=[0,0,0],this._isTransparentColor=!0),void 0===t&&(t=1),this._appearanceTemplate=this._createAngleMeasureAppearance()},Qi.prototype._doPostProcess=function(t){var e,i,r;void 0===t&&(t=!1),this._isLoaded?(!t&&this._setAppearance&&(this._appearanceTemplate=this._createAngleMeasureAppearance()),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(i=this._dictionary.get("AP"))&&i.has("N")&&(e=i.get("N"),r=i.getRaw("N"),e)&&(r&&(e.reference=r),this._appearanceTemplate=new N(e,this._crossReference))):(this._postProcess(),this._appearanceTemplate||t&&(this._dictionary.has("AP")?(i=this._dictionary.get("AP"))&&i.has("N")&&(e=i.get("N"),r=i.getRaw("N"),e)&&(r&&(e.reference=r),this._appearanceTemplate=new N(e,this._crossReference)):this._appearanceTemplate=this._createAngleMeasureAppearance())),t&&this._appearanceTemplate?(i=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary),this._appearanceTemplate._content.dictionary.has("Matrix")||(r=this._appearanceTemplate._content.dictionary.getArray("BBox"))&&this._appearanceTemplate._content.dictionary.update("Matrix",[1,0,0,1,-r[0],-r[1]]),this._flattenAnnotationTemplate(this._appearanceTemplate,i)):t&&this._page.annotations.remove(this)},Qi.prototype._createAngleMeasureAppearance=function(){var t=this.border.width,e=this._obtainFont(),i=(null!=e&&(this._isLoaded||1!==e.size)||(e=this._circleCaptionFont,this._pdfFont=e),new k(x.PdfTextAlignment.center,x.PdfVerticalAlignment.middle)),r=this._calculateAngle()*(180/Math.PI),n=(180<(r=r<0?-r:r)&&(r=360-r),this._dictionary.update("Vertices",this._linePoints),"font:"+e._metrics._postScriptName+" "+e._size+"pt; color:"+this._colorToHex(this.color)),n=(this._dictionary.update("DS",n),(this.text===" "+r.toFixed(2)+""||this.text)&&this._dictionary.update("Contents",this.text),void 0===this.subject&&this._dictionary.update("Subject","Angle Measurement"),this._dictionary.update("MeasurementTypes",1152),this._dictionary.update("Subtype",new L("PolyLine")),this._dictionary.update("IT",new L("PolyLineAngle")),new D),s=[],a=[],o=[],h=[],c=[],_=(n.set("Type",L.get("measureDictionary")),n.set("R","1 in = 1 in"),n.set("Subtype","RL"),n.set("TargetUnitConversion",.1388889),new D),_=(_.set("U","in"),_.set("Type","NumberFormat"),_.set("C",1),_.set("D",1),_.set("SS",""),s.push(_),new D),_=(_.set("U",""),_.set("Type","NumberFormat"),_.set("C",1),_.set("D",1),_.set("FD",!0),_.set("SS",""),a.push(_),new D),_=(_.set("U","sq in"),_.set("Type","NumberFormat"),_.set("C",1),_.set("D",1),_.set("FD",!0),_.set("SS",""),o.push(_),new D),_=(_.set("U","cu in"),_.set("Type","NumberFormat"),_.set("C",1),_.set("D",1),_.set("FD",!0),_.set("SS",""),c.push(_),new D),_=(_.set("U","in"),_.set("Type","NumberFormat"),_.set("C",1),_.set("D",1),_.set("SS",""),h.push(_),n.set("D",s),n.set("T",a),n.set("A",o),n.set("X",h),n.set("V",c),this._dictionary.has("Measure")&&R(this._dictionary,this._crossReference,"Measure"),this._crossReference._getNextReference()),s=(this._crossReference._cacheMap.set(_,n),n._updated=!0,this._dictionary.update("Measure",_),[0,0,0,0]),a=this._getAngleBoundsValue(),d=this._obtainLinePoints(),p=[];p.push(0);for(var l=1;l<d.length;l++)p.push(1);(new C).addRectangle(d[1][0]-this._radius,-(d[1][1]+this._radius),2*this._radius,2*this._radius);var o=e.measureString(r.toString()+"",[0,0],i,0,0),h=[(this._firstIntersectionPoint[0]+this._secondIntersectionPoint[0])/2,(this._firstIntersectionPoint[1]+this._secondIntersectionPoint[1])/2],c=[d[1][0],-d[1][1]],n=d[1][0]+this._radius*Math.cos((this._startAngle+this._sweepAngle/2)*(Math.PI/180)),_=d[1][1]+this._radius*Math.sin((this._startAngle+this._sweepAngle/2)*(Math.PI/180)),i=[h[0],h[1]],h=Math.atan2(i[1]-c[1],i[0]-c[0])*(180/Math.PI),i=!1,c=!1,u=!1,f=!1,h=(0<h?h<45?c=!0:45<=h&&h<135?u=!0:i=!0:0==(h=-h)?(new C).addRectangle(a[0],a[1],a[2],a[3]):h<45?c=!0:45<=h&&h<135?f=!0:i=!0,0===s[0]&&0===s[1]&&0===s[2]&&0===s[3]&&(this.bounds={x:(s=a)[0],y:a[1],width:a[2],height:a[3]}),new C),a=(h._pathTypes=p,h._points=d,this._dictionary.set("Rect",[s[0],s[1],s[0]+s[2],s[1]+s[3]]),new bi(this,a)),s=(a.normal=new N(s,this._crossReference),a.normal),a=(s._writeTransformation=!1,a.normal.graphics),t=new T(this._color,t/2),g=(this.border.style===x.PdfBorderStyle.dashed&&(t._dashStyle=x.PdfDashStyle.dash),new I(this._color)),t=(a.save(),a.drawPath(h,t),h.addArc(d[1][0]-this._radius,d[1][1]-this._radius,2*this._radius,2*this._radius,this._startAngle,this._sweepAngle),u?a.drawString(r.toString()+"",e,[n-o[0]/2,-(-_+e._metrics._getHeight()+2),0,0],null,g):c?a.drawString(r.toString()+"",e,[n+2,-(-_+e._metrics._getHeight()/2),0,0],null,g):i?a.drawString(r.toString()+"",e,[n-o[0]-2,-(-_+e._metrics._getHeight()/2),0,0],null,g):f&&a.drawString(r.toString()+"",e,[n-o[0]/2,_+2,0,0],null,g),a.restore(),a._template._content.dictionary._updated=!0,this._crossReference._getNextReference()),h=(this._crossReference._cacheMap.set(t,a._template._content),a._template._content.reference=t,this._dictionary.has("AP")&&R(this._dictionary.get("AP"),this._crossReference,"N"),new D);return h.set("N",t),h._updated=!0,this._dictionary.set("AP",h),s},Qi.prototype._getAngleBoundsValue=function(){for(var t=this._obtainLinePoints(),e=0;e<t.length;e++)t[Number.parseInt(e.toString(),10)][1]=-t[Number.parseInt(e.toString(),10)][1];var i=new C;return i._points=t,i._pathTypes=[0,1,1],i._getBounds()},Qi.prototype._obtainLinePoints=function(){if(this._linePoints){for(var t=new Array(this._linePoints.length),e=0;e<this._linePoints.length;e++)t[Number.parseInt(e.toString(),10)]=this._linePoints[Number.parseInt(e.toString(),10)];for(var i=new Array(t.length/2),r=0,n=0;n<t.length;n+=2)i[Number.parseInt(r.toString(),10)]=[t[Number.parseInt(n.toString(),10)],-t[n+1]],r++}return i},Qi.prototype._calculateAngle=function(){var t=[0,0];void 0!==this._linePoints&&0===this._linePoints.length&&this._isLoaded&&this._dictionary.has("Vertices")&&(this._linePoints=this._dictionary.get("Vertices"));for(var e=0;e<this._linePoints.length;e++)t[Number.parseInt(e.toString(),10)]=this._linePoints[Number.parseInt(e.toString(),10)];for(var i=[],r=0;r<t.length;r+=2)i.push([t[Number.parseInt(r.toString(),10)],t[r+1]]);var n=i[0],s=i[1],a=i[2],o=Math.sqrt(Math.pow(s[0]-n[0],2)+Math.pow(s[1]-n[1],2)),h=Math.sqrt(Math.pow(s[0]-a[0],2)+Math.pow(s[1]-a[1],2)),o=(this._radius=Math.min(o,h)/4,new C),h=(o._points=i,o._pathTypes=[0,1,1],this._findLineCircleIntersectionPoints(s[0],s[1],this._radius,n,s,void 0,void 0)),o=(h.first,h.second),h=(0===this._firstIntersectionPoint[0]&&0===this._firstIntersectionPoint[1]&&(this._firstIntersectionPoint=o),(h=this._findLineCircleIntersectionPoints(s[0],s[1],this._radius,a,s,[0,0],[0,0])).first,o=h.second,0===this._secondIntersectionPoint[0]&&0===this._secondIntersectionPoint[1]&&(this._secondIntersectionPoint=o),this._firstIntersectionPoint[0]-s[0]),o=this._firstIntersectionPoint[1]-s[1],c=Math.atan2(o,h)*(180/Math.PI),h=this._secondIntersectionPoint[0]-s[0],o=this._secondIntersectionPoint[1]-s[1],o=0<(o=Math.atan2(o,h)*(180/Math.PI))?360-o:-o;return 180===(c=0<c?360-c:-c)&&0===o?(this._startAngle=c,this._sweepAngle=180):0===c&&180===o?(this._startAngle=o,this._sweepAngle=180):c<180?o<c?(this._startAngle=o,this._sweepAngle=c-o):c+180<o?(this._startAngle=o,this._sweepAngle=360-o+c):(this._startAngle=c,this._sweepAngle=o-c):c<o?(this._startAngle=c,this._sweepAngle=o-c):o<c-180?(this._startAngle=c,this._sweepAngle=360-c+o):(this._startAngle=o,this._sweepAngle=c-o),Math.atan2(a[0]-s[0],a[1]-s[1])-Math.atan2(n[0]-s[0],n[1]-s[1])},Qi.prototype._findLineCircleIntersectionPoints=function(t,e,i,r,n,s,a){var o,h=n[0]-r[0],n=n[1]-r[1],c=h*h+n*n,_=2*(h*(r[0]-t)+n*(r[1]-e)),t=_*_-4*c*((r[0]-t)*(r[0]-t)+(r[1]-e)*(r[1]-e)-i*i);return a=c<=1e-7||t<0?(s=[Number.NaN,Number.NaN],[Number.NaN,Number.NaN]):0==t?(s=[r[0]+(o=-_/(2*c))*h,r[1]+o*n],[Number.NaN,Number.NaN]):(o=(-_+Math.sqrt(t))/(2*c),s=[r[0]+o*h,r[1]+o*n],o=(-_-Math.sqrt(t))/(2*c),[r[0]+o*h,r[1]+o*n]),{first:s,second:a}};var Xi,qi=Qi;function Qi(t){var e=Xi.call(this)||this;if(e._linePoints=[],e._firstIntersectionPoint=[0,0],e._secondIntersectionPoint=[0,0],e._dictionary=new D,e._dictionary.update("Type",L.get("Annot")),e._dictionary.update("Subtype",L.get("PolyLine")),void 0!==t&&0<t.length){if(6<t.length)throw new Error("Points length should not be greater than 3");e._pointArray=t;for(var i=0;i<t.length;i++)e._linePoints.push(t[Number.parseInt(i.toString(),10)][0]),e._linePoints.push(t[Number.parseInt(i.toString(),10)][1])}return e._type=x._PdfAnnotationType.angleMeasurementAnnotation,e}e(Zi,Ji=Ai),Object.defineProperty(Zi.prototype,"inkPointsCollection",{get:function(){var t;return 0===this._inkPointsCollection.length&&this._dictionary.has("InkList")&&(t=this._dictionary.get("InkList"),Array.isArray(t))&&0<t.length&&(this._inkPointsCollection=t),this._inkPointsCollection},set:function(t){Array.isArray(t)&&0<t.length&&t!==this._inkPointsCollection&&(this._inkPointsCollection=t,this._isModified=!0,this._isLoaded)&&this._dictionary.update("InkList",t)},enumerable:!0,configurable:!0}),Zi._load=function(t,e){var i=new Zi;return i._isLoaded=!0,i._initialize(t,e),i},Zi.prototype._initialize=function(t,e){Ji.prototype._initialize.call(this,t,e)},Zi.prototype._postProcess=function(){if(void 0===this._points||null===this._points)throw new Error("Points cannot be null or undefined");this._dictionary.has("BS")?e=this.border.width:((t=new D(this._crossReference)).set("Type",L.get("Border")),this._dictionary.set("BS",t)),this._dictionary.has("C")||(this.color=[0,0,0],this._isTransparentColor=!0),void 0===e&&(e=1);var t,e=this._addInkPoints(),i=[e[0],e[1],e[0]+e[2],e[1]+e[3]];this._dictionary.update("Rect",i),this._setAppearance&&((i=new bi(this,e)).normal=new N(e,this._crossReference),Ks(e=i.normal,this._getRotationAngle()),e._writeTransformation=!1,this._appearanceTemplate=this._createInkAppearance(e),this._dictionary.has("AP")&&R(this._dictionary.get("AP"),this._crossReference,"N"),t=new D,this._appearanceTemplate._content.dictionary._updated=!0,i=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(i,this._appearanceTemplate._content),this._appearanceTemplate._content.reference=i,t.set("N",i),t._updated=!0,this._dictionary.set("AP",t))},Zi.prototype._doPostProcess=function(t){var e,i,r,n,s,a,o;this._isFlatten=t=void 0===t?!1:t,this._isLoaded?((this._setAppearance||t&&!this._dictionary.has("AP"))&&(0===this._inkPointsCollection.length&&(this._inkPointsCollection=this._obtainInkListCollection()),e=this._getInkBoundsValue(),n=(i=new N(e,this._crossReference))._content.dictionary.getArray("BBox"),r=this._getRotationAngle(),n&&null!=r&&i._content.dictionary.set("Matrix",[1,0,0,1,-n[0],-n[1]]),i._writeTransformation=!1,this._appearanceTemplate=this._createInkAppearance(i),this._dictionary.update("Rect",[e[0],e[1],e[0]+e[2],e[1]+e[3]]),t||(this._dictionary.has("AP")&&R(this._dictionary.get("AP"),this._crossReference,"N"),a=new D,this._appearanceTemplate._content.dictionary._updated=!0,s=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(s,this._appearanceTemplate._content),this._appearanceTemplate._content.reference=s,a.set("N",s),a._updated=!0,this._dictionary.set("AP",a))),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(a=this._dictionary.get("AP"))&&a.has("N")&&(o=a.get("N"),s=a.getRaw("N"),o)&&(s&&(o.reference=s),this._appearanceTemplate=new N(o,this._crossReference))):(this._postProcess(),this._appearanceTemplate||t&&(this._dictionary.has("AP")?(a=this._dictionary.get("AP"))&&a.has("N")&&(o=a.get("N"),s=a.getRaw("N"),o)&&(s&&(o.reference=s),this._appearanceTemplate=new N(o,this._crossReference)):(0===this._inkPointsCollection.length&&(this._inkPointsCollection=this._obtainInkListCollection()),e=this._getInkBoundsValue(),Ks(i=new N(e,this._crossReference),this._getRotationAngle()),i._writeTransformation=!1,this._appearanceTemplate=this._createInkAppearance(i),this._dictionary.update("Rect",[e[0],e[1],e[0]+e[2],e[1]+e[3]])))),void 0!==this.flattenPopups&&this.flattenPopups&&(this._isLoaded?this._flattenLoadedPopUp():this._flattenPopUp()),t&&this._appearanceTemplate&&null!==this._appearanceTemplate._size&&void 0!==this._appearanceTemplate._size?(r=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary),this._appearanceTemplate._content.dictionary.has("Matrix")||(n=this._appearanceTemplate._content.dictionary.getArray("BBox"))&&this._appearanceTemplate._content.dictionary.update("Matrix",[1,0,0,1,-n[0],-n[1]]),this._flattenAnnotationTemplate(this._appearanceTemplate,r)):t&&this._page.annotations.remove(this),t&&!this.flattenPopups&&this._dictionary.has("Popup")&&(s=this._dictionary.getRaw("Popup"),this._page._pageDictionary.has("Annots"))&&(a=this._page._pageDictionary.getRaw("Annots"))&&Array.isArray(a)&&0<a.length&&0<=(o=a.indexOf(s))&&this._page.annotations.removeAt(o)},Zi.prototype._createInkAppearance=function(t){var e=t.graphics;if(null!==this._inkPointsCollection&&0<this._inkPointsCollection.length&&null!==this.color&&void 0!==this._color){for(var i=0;i<this._inkPointsCollection.length;i++){var r=!1;if(this._inkPointsCollection[Number.parseInt(i.toString(),10)].length%2==0){for(var n=this._inkPointsCollection[Number.parseInt(i.toString(),10)],s=(2===n.length&&(n=[n[0]-.5,n[1]-.5,n[0]+.5,n[1]+.5],r=!0),new Array(n.length/2)),a=0,o=0;o<n.length;o+=2)s[Number.parseInt(a.toString(),10)]=[n[Number.parseInt(o.toString(),10)],n[o+1]],a++;var h=a+2*a-2,c=new Array(h);if(this._isEnableControlPoints)for(var _=this._getControlPoints(s,[],[]),d=_.controlP1,p=_.controlP2,l=0,u=0;u<h-1;u+=3)c[Number.parseInt(u.toString(),10)]=s[Number.parseInt(l.toString(),10)],c[u+1]=d[Number.parseInt(l.toString(),10)],c[u+2]=p[Number.parseInt(l.toString(),10)],l++;else if(a%3==1)h=a,c=new Array(h),c=s;else if(a%3==0)for(h=a+1,c=new Array(h),u=0;u<s.length;u++)c[Number.parseInt(u.toString(),10)]=s[Number.parseInt(u.toString(),10)];else{h=a+2,c=new Array(h);for(u=0;u<s.length;u++)c[Number.parseInt(u.toString(),10)]=s[Number.parseInt(u.toString(),10)];c[h-2]=s[s.length-2]}if(c[h-1]=s[s.length-1],null!==c){for(var f=c,g=0;g<f.length;g++){var y=f[Number.parseInt(g.toString(),10)];f[Number.parseInt(g.toString(),10)]=[y[0],-y[1]]}var m,_=new C,b=null,r=(r?(r=s[1][0]-s[0][0],m=s[1][1]-s[0][1],_.addEllipse(s[0][0]+.5,-(s[0][1]+m+.5),r,m),(b=new C)._pathTypes=_._pathTypes,b._points=_._points):2===s.length?(_.addLine(s[0][0],-s[0][1],s[1][0],-s[1][1]),(b=new C)._pathTypes=_._pathTypes,b._points=_._points):(_._addBezierPoints(f),(b=new C)._pathTypes=_._pathTypes,b._points=f),new T(this.color,this.border.width));this._isLoaded&&(r._lineCap=x.PdfLineCap.round),void 0!==this.opacity&&this._opacity<1?(m=e.save(),e.setTransparency(this._opacity),e.drawPath(b,r),e.restore(m)):e.drawPath(b,r)}}}this._isFlatten&&(this.bounds={x:this.bounds.x,y:this._page.size[1]-(this.bounds.y+this.bounds.height),width:this.bounds.width,height:this.bounds.height})}return t},Zi.prototype._getControlPoints=function(t,e,i){if(null===t)throw new Error("pointCollection");var r=t.length-1;if(r<1)throw new Error("At least two knot PointFs required pointCollection");1===r&&(i=[[2*(e=[[(2*t[0][0]+t[1][0])/3,(2*t[0][1]+t[1][1])/3]])[0][0]-t[0][0],2*e[0][1]-t[0][1]]]);for(var n=[],s=1;s<r-1;++s)n[Number.parseInt(s.toString(),10)]=4*t[Number.parseInt(s.toString(),10)][0]+2*t[s+1][0];n[0]=t[0][0]+2*t[1][0],n[r-1]=(8*t[r-1][0]+t[Number.parseInt(r.toString(),10)][0])/2;for(var a=this._getSingleControlPoint(n),s=1;s<r-1;++s)n[Number.parseInt(s.toString(),10)]=4*t[Number.parseInt(s.toString(),10)][1]+2*t[s+1][1];n[0]=t[0][1]+2*t[1][1],n[r-1]=(8*t[r-1][1]+t[Number.parseInt(r.toString(),10)][1])/2;var o=this._getSingleControlPoint(n);e=new Array(r),i=new Array(r);for(var h,c,s=0;s<r;++s)e[Number.parseInt(s.toString(),10)]=[a[Number.parseInt(s.toString(),10)],o[Number.parseInt(s.toString(),10)]],s<r-1?i[Number.parseInt(s.toString(),10)]=[2*t[s+1][0]-a[s+1],2*t[s+1][1]-o[s+1]]:(h=(t[Number.parseInt(r.toString(),10)][0]+a[r-1])/2,c=(t[Number.parseInt(r.toString(),10)][1]+o[r-1])/2,i[Number.parseInt(s.toString(),10)]=[h,c]);return{controlP1:e,controlP2:i}},Zi.prototype._getSingleControlPoint=function(t){var e=t.length,i=[],r=[],n=2;i[0]=t[0]/n;for(var s=1;s<e;s++)r[Number.parseInt(s.toString(),10)]=1/n,n=(s<e-1?4:3.5)-r[Number.parseInt(s.toString(),10)],i[Number.parseInt(s.toString(),10)]=(t[Number.parseInt(s.toString(),10)]-i[s-1])/n;for(s=1;s<e;s++)i[e-s-1]-=r[e-s]*i[e-s];return i},Zi.prototype._addInkPoints=function(){var e=this,t=[],i=(null===this._linePoints||0!==this._previousCollection.length&&!this._isModified||this._inkPointsCollection.unshift(this._linePoints),ka(this._inkPointsCollection,this._previousCollection));if(null!==this._inkPointsCollection&&!i){for(var r=0;r<this._inkPointsCollection.length;r++){var n=this._inkPointsCollection[Number.parseInt(r.toString(),10)].slice();t.push(n)}this._dictionary.update("InkList",t)}0<this._inkPointsCollection.length&&(!i||this._isModified)&&this._inkPointsCollection.forEach(function(t){e._previousCollection.push(t),e._isModified=!1});var s=this._getCropOrMediaBox(),i=!1;if(s&&3<s.length&&"number"==typeof s[0]&&"number"==typeof s[1]&&(0!==s[0]||0!==s[1])){for(i=!0,r=0;r<t.length;r++)for(var a=n=t[Number.parseInt(r.toString(),10)],o=0;o<n.length;o+=2){var h=n[Number.parseInt(o.toString(),10)],c=n[o+1];h+=s[0],this._page._pageDictionary.has("MediaBox")&&!this._page._pageDictionary.has("CropBox")&&0===s[3]&&0<s[1]?c+=s[3]:c+=s[1],a[Number.parseInt(o.toString(),10)]=h,a[o+1]=c,t[Number.parseInt(r.toString(),10)]=a}this._dictionary.update("InkList",t)}return this._isEnableControlPoints||i?this._getInkBoundsValue(t):(this._isFlatten||this._updateInkListCollection(t),[this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height])},Zi.prototype._updateInkListCollection=function(t){for(var e=0;e<t.length;e++){for(var i=[],r=0;r<t[Number.parseInt(e.toString(),10)].length;r++)i.push(t[Number.parseInt(e.toString(),10)][Number.parseInt(r.toString(),10)]);this._inkPointsCollection[Number.parseInt(e.toString(),10)]=i}},Zi.prototype._getInkBoundsValue=function(t){var e=[0,0,0,0],i=(this._points&&(this.bounds={x:this._points[0],y:this._points[1],width:this._points[2],height:this._points[3]}),e=[this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height],this.border.width);if(null!==this._inkPointsCollection&&0<this._inkPointsCollection.length){for(var r=[],n=0;n<this._inkPointsCollection.length;n++){var s=this._inkPointsCollection[Number.parseInt(n.toString(),10)];if(null!==s&&s.length%2==0)for(var a=0;a<s.length;a++)r.push(s[Number.parseInt(a.toString(),10)])}for(var o=!1,h=(this._isLoaded||2!==r.length||(o=!0,r.push(r[0]+1),r.push(r[1]+1)),new Array(r.length/2)),c=0,a=0;a<r.length;a+=2)h[Number.parseInt(c.toString(),10)]=[r[Number.parseInt(a.toString(),10)],r[a+1]],c++;if(this._isLoaded)if(0<h.length){for(var _=0,d=0,p=0,l=0,u=!0,n=0;n<h.length;n++){var f=h[Number.parseInt(n.toString(),10)];u?(_=f[0],d=f[1],u=!1):(f[0]<_?_=f[0]:f[0]>p&&(p=f[0]),f[1]<d?d=f[1]:f[1]>l&&(l=f[1]))}this.bounds={x:(e=[_,d,p-_,l-d])[0],y:e[1],width:e[2],height:e[3]},(this._isFlatten||this._setAppearance)&&(e[0]=this.bounds.x-i,e[1]=this.bounds.y-i,e[2]=this.bounds.width+2*i,e[3]=this.bounds.height+2*i)}else e=this._points||(0<h.length?this._dictionary.get("Rect"):[this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height]);else e=t?this._calculateInkBounds(h,e,i,o,t):this._calculateInkBounds(h,e,i,o);this.bounds={x:e[0],y:e[1],width:e[2],height:e[3]}}return e},Zi.prototype._calculateInkBounds=function(t,e,i,r,n){if(5<t.length){for(var s=0,a=0,o=0,h=0,c=!0,_=0;_<t.length;_++){var d=t[Number.parseInt(_.toString(),10)];c?(s=d[0],a=d[1],o=d[0],h=d[1],c=!1):(d[0]<s?s=d[0]:d[0]>o&&(o=d[0]),d[1]<a?a=d[1]:d[1]>h&&(h=d[1]))}var p=this._getCropOrMediaBox();e[2]<o?o=e[2]:p&&(o-=s),e[3]<h?h=e[3]:p&&(h-=a),p&&(s+=p[0],a+=p[1]),e=[s,a,o,h],(this._isFlatten||this._setAppearance)&&(p=r?2:3,e[0]=e[0]-i,e[1]=e[1]-i,e[2]=e[2]+p*i,e[3]=e[3]+p*i)}else e=void 0===this._points&&0<t.length?this._dictionary.get("Rect"):this._points;return!this._isFlatten&&n&&this._updateInkListCollection(n),e},Zi.prototype._obtainInkListCollection=function(){var t=[];if(this._dictionary.has("InkList"))for(var e=this._dictionary.getArray("InkList"),i=[],r=0;r<e.length;r++){for(var n=e[Number.parseInt(r.toString(),10)],s=0;s<n.length;s++)i.push(n[Number.parseInt(s.toString(),10)]);t.push(i),i.length===n.length&&(i=[])}return t};var Ji,Yi=Zi;function Zi(t,e){var i=Ji.call(this)||this;return i._inkPointsCollection=[],i._previousCollection=[],i._isModified=!1,i._isEnableControlPoints=!0,i._dictionary=new D,i._dictionary.update("Type",L.get("Annot")),i._dictionary.update("Subtype",L.get("Ink")),void 0!==t&&(i._points=t,i.bounds={x:t[0],y:t[1],width:t[2],height:t[3]}),void 0!==e&&(i._linePoints=e),i._type=x._PdfAnnotationType.inkAnnotation,i}e(er,$i=Ai),Object.defineProperty(er.prototype,"open",{get:function(){return this._dictionary.has("Open")&&(this._open=this._dictionary.get("Open")),this._open},set:function(t){void 0!==t&&(this._open=t,this._dictionary.update("Open",this._open))},enumerable:!0,configurable:!0}),Object.defineProperty(er.prototype,"icon",{get:function(){return this._dictionary.has("Name")&&(this._icon=ta(this._dictionary.get("Name").name)),this._icon},set:function(t){void 0!==t&&(this._icon=t,this._dictionary.update("Name",L.get(this._obtainIconName(this._icon))))},enumerable:!0,configurable:!0}),Object.defineProperty(er.prototype,"stateModel",{get:function(){return this._dictionary.has("StateModel")&&(this._stateModel=na(this._dictionary.get("StateModel"))),this._stateModel},set:function(t){void 0!==t&&(this._stateModel=t,this._dictionary.update("StateModel",ra(this._stateModel)))},enumerable:!0,configurable:!0}),Object.defineProperty(er.prototype,"state",{get:function(){return this._dictionary.has("State")&&(this._state=ia(this._dictionary.get("State"))),this._state},set:function(t){void 0!==t&&(this._state=t,this._dictionary.update("State",ea(this._state)))},enumerable:!0,configurable:!0}),er._load=function(t,e){var i=new er;return i._isLoaded=!0,i._initialize(t,e),e.has("IRT")&&(i._isReview=_a(e),i._isReview||(i._isComment=da(e))),i},er.prototype._initialize=function(t,e){$i.prototype._initialize.call(this,t,e)},er.prototype._postProcess=function(){void 0!==this.bounds&&null!==this.bounds||(this._bounds={x:0,y:0,width:0,height:0}),this._dictionary.has("BS")?e=this.border.width:((t=new D(this._crossReference)).set("Type",L.get("Border")),this._dictionary.set("BS",t)),void 0===e&&(e=1);var t,e=[this.bounds.x,this.bounds.y,this.bounds.x+this.bounds.width,this.bounds.y+this.bounds.height];this._dictionary.update("Rect",e),this._setAppearance&&(this._appearanceTemplate=this._createPopupAppearance(),this._appearanceTemplate)&&(this._dictionary.has("AP")&&R(this._dictionary.get("AP"),this._crossReference,"N"),t=new D,this._appearanceTemplate._content.dictionary._updated=!0,e=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(e,this._appearanceTemplate._content),this._appearanceTemplate._content.reference=e,t.set("N",e),t._updated=!0,this._dictionary.set("AP",t)),this._dictionary.update("Rect",Ca(this))},er.prototype._doPostProcess=function(t){var e,i,r,n;void 0===t&&(t=!1),this._isLoaded?!this._appearanceTemplate&&this._isFlattenPopups&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"),r=e.getRaw("N"),i&&(r&&(i.reference=r),this._appearanceTemplate=new N(i,this._crossReference)),null!==this._appearanceTemplate)&&(n=this._page.graphics.save(),this.opacity<1&&this._page.graphics.setTransparency(this.opacity),this._page.graphics.drawTemplate(this._appearanceTemplate,this.bounds),this._page.graphics.restore(n)):(this._postProcess(),this._appearanceTemplate||t&&(this._dictionary.has("AP")?(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"),r=e.getRaw("N"),i)&&(r&&(i.reference=r),this._appearanceTemplate=new N(i,this._crossReference)):this._appearanceTemplate=this._createPopupAppearance())),void 0!==this.flattenPopups&&this.flattenPopups&&this.flatten&&(this._isLoaded?this._flattenLoadedPopUp():this._flattenPopUp()),t&&this._appearanceTemplate&&(n=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary),this._flattenAnnotationTemplate(this._appearanceTemplate,n)),t&&this._removeAnnotation(this._page,this)},er.prototype._createPopupAppearance=function(){var t=[0,0,this.bounds.width,this.bounds.height],t=new N(t,this._crossReference),e=t.graphics;switch(e._sw._clear(),this.opacity<1&&(e.save(),e.setTransparency(this.opacity)),this.icon){case x.PdfPopupIcon.comment:e._sw._write(this._comment),e._sw._setColorSpace(this.color,x._PdfColorSpace.rgb,!1),e._sw._write(this._commentSecondHalf);break;case x.PdfPopupIcon.paragraph:e._sw._write(this._paragraph),e._sw._setColorSpace(this.color,x._PdfColorSpace.rgb,!1),e._sw._write(this._paragraphSecondHalf);break;case x.PdfPopupIcon.help:e._sw._write(this._help),e._sw._setColorSpace(this.color,x._PdfColorSpace.rgb,!1),e._sw._write(this._helpSecondHalf);break;case x.PdfPopupIcon.note:e._sw._setColorSpace(this.color,x._PdfColorSpace.rgb,!1),e._sw._write(this._note);break;case x.PdfPopupIcon.insert:e._sw._write("0 G "),e._sw._setColorSpace(this.color,x._PdfColorSpace.rgb,!1),e._sw._write(this._insert);break;case x.PdfPopupIcon.key:e._sw._write(this._key),e._sw._setColorSpace(this.color,x._PdfColorSpace.rgb,!1),e._sw._write(this._keySecondHalf);break;case x.PdfPopupIcon.newParagraph:e._sw._write(this._newParagraph),e._sw._setColorSpace(this.color,x._PdfColorSpace.rgb,!1),e._sw._write(this._newParagraphSecondHalf)}return this.opacity<1&&e.restore(),t},er.prototype._obtainIconName=function(t){switch(t){case x.PdfPopupIcon.note:this._iconString="Note";break;case x.PdfPopupIcon.comment:this._iconString="Comment";break;case x.PdfPopupIcon.help:this._iconString="Help";break;case x.PdfPopupIcon.insert:this._iconString="Insert";break;case x.PdfPopupIcon.key:this._iconString="Key";break;case x.PdfPopupIcon.newParagraph:this._iconString="NewParagraph";break;case x.PdfPopupIcon.paragraph:this._iconString="Paragraph"}return this._iconString};var $i,tr=er;function er(t,e,i,r,n){var s=$i.call(this)||this;return s._icon=x.PdfPopupIcon.note,s._iconString="",s._stateModel=x.PdfAnnotationStateModel.none,s._state=x.PdfAnnotationState.none,s._open=!1,s._isReview=!1,s._isComment=!1,s._comment="q 1 1 1 rg 0 i 1 w 4 M 1 j 0 J []0 d 1 0 0 1 9 5.0908 cm 7.74 12.616 m -7.74 12.616 l -8.274 12.616 -8.707 12.184 -8.707 11.649 c h f Q 0 G ",s._commentSecondHalf="0 i 0.60 w 4 M 1 j 0 J [0 100]1 d  1 0 0 1 9 5.0908 cm 4.1 1.71 m -0.54 -2.29 l  -0.54 1.71 l  -5.5 1.71 l  -5.5 14.42 l  10.5 14.42 l  10.5 1.71 l  4.1 1.71 l -2.33 9.66 m 7.34 9.66 l 7.34 8.83 l -2.33 8.83 l -2.33 9.66 l -2.33 7.28 m 5.88 7.28 l 5.88 6.46 l -2.33 6.46 l -2.33 7.28 l 14.9 23.1235 m -14.9 23.1235 l -14.9 -20.345 l 14.9 -20.345 l 14.9 23.1235 l b ",s._note="0 G 0 i 0.61 w 4 M 0 j 0 J []0 d  q 1 0 0 1 16.959 1.3672 cm 0 0 m 0 -0.434 -0.352 -0.785 -0.784 -0.785 c -14.911 -0.785 l -15.345 -0.785 -15.696 -0.434 -15.696 0 c -15.696 17.266 l -15.696 17.699 -15.345 18.051 -14.911 18.051 c -0.784 18.051 l -0.352 18.051 0 17.699 0 17.266 c h b Q q 1 0 0 1 4.4023 13.9243 cm 0 0 m 9.418 0 l S Q q 1 0 0 1 4.4019 11.2207 cm 0 0 m 9.418 0 l S Q q 1 0 0 1 4.4023 8.5176 cm 0 0 m 9.418 0 l S Q q 1 0 0 1 4.4023 5.8135 cm 0 0 m 9.418 0 l S Q ",s._help="q 1 1 1 rg 0 i 1 w 4 M 1 j 0 J []0 d 1 0 0 1 12.1465 10.5137 cm -2.146 9.403 m -7.589 9.403 -12.001 4.99 -12.001 -0.453 c -12.001 -5.895 -7.589 -10.309 -2.146 -10.309 c 3.296 -10.309 7.709 -5.895 7.709 -0.453 c 7.709 4.99 3.296 9.403 -2.146 9.403 c h f Q ",s._helpSecondHalf=" 0 G 0 i 0.59 w 4 M 1 j 0 J []0 d  1 0 0 1 12.1465 10.5137 cm 0 0 m -0.682 -0.756 -0.958 -1.472 -0.938 -2.302 c -0.938 -2.632 l -3.385 -2.632 l -3.403 -2.154 l -3.459 -1.216 -3.147 -0.259 -2.316 0.716 c -1.729 1.433 -1.251 2.022 -1.251 2.647 c -1.251 3.291 -1.674 3.715 -2.594 3.751 c -3.202 3.751 -3.937 3.531 -4.417 3.2 c -5.041 5.205 l -4.361 5.591 -3.274 5.959 -1.968 5.959 c 0.46 5.959 1.563 4.616 1.563 3.089 c 1.563 1.691 0.699 0.771 0 0 c -2.227 -6.863 m -2.245 -6.863 l -3.202 -6.863 -3.864 -6.146 -3.864 -5.189 c -3.864 -4.196 -3.182 -3.516 -2.227 -3.516 c -1.233 -3.516 -0.589 -4.196 -0.57 -5.189 c -0.57 -6.146 -1.233 -6.863 -2.227 -6.863 c -2.146 9.403 m -7.589 9.403 -12.001 4.99 -12.001 -0.453 c -12.001 -5.895 -7.589 -10.309 -2.146 -10.309 c 3.296 -10.309 7.709 -5.895 7.709 -0.453 c 7.709 4.99 3.296 9.403 -2.146 9.403 c b ",s._insert=" 0 i 0.59 w 4 M 0 j 0 J []0 d  1 0 0 1 8.5386 19.8545 cm 0 0 m -8.39 -19.719 l 8.388 -19.719 l h B ",s._key="q 1 1 1 rg 0 i 1 w 4 M 1 j 0 J []0 d 1 0 0 1 6.5 12.6729 cm 0.001 5.138 m -2.543 5.138 -4.604 3.077 -4.604 0.534 c -4.604 -1.368 -3.449 -3.001 -1.802 -3.702 c -1.802 -4.712 l -0.795 -5.719 l -1.896 -6.82 l -0.677 -8.039 l -1.595 -8.958 l -0.602 -9.949 l -1.479 -10.829 l -0.085 -12.483 l 1.728 -10.931 l 1.728 -3.732 l 1.737 -3.728 1.75 -3.724 1.76 -3.721 c 3.429 -3.03 4.604 -1.385 4.604 0.534 c 4.604 3.077 2.542 5.138 0.001 5.138 c f Q ",s._keySecondHalf=" 0 G 0 i 0.59 w 4 M 1 j 0 J []0 d  q 1 0 0 1 6.4995 20 cm 0 0 m -6.205 -12.713 l 6.205 -12.713 l h b Q q 1 0 0 1 1.1909 6.2949 cm 0 0 m 1.278 0 l 1.353 0 1.362 -0.02 1.391 -0.066 c 2.128 -1.363 3.78 -4.275 3.966 -4.713 c 3.985 -4.713 l 3.976 -4.453 3.957 -3.91 3.957 -3.137 c 3.957 -0.076 l 3.957 -0.02 3.976 0 4.041 0 c 4.956 0 l 5.021 0 5.04 -0.029 5.04 -0.084 c 5.04 -6.049 l 5.04 -6.113 5.021 -6.133 4.947 -6.133 c 3.695 -6.133 l 3.621 -6.133 3.611 -6.113 3.574 -6.066 c 3.052 -4.955 1.353 -2.063 0.971 -1.186 c 0.961 -1.186 l 0.999 -1.68 0.999 -2.146 1.008 -3.025 c 1.008 -6.049 l 1.008 -6.104 0.989 -6.133 0.933 -6.133 c 0.009 -6.133 l -0.046 -6.133 -0.075 -6.123 -0.075 -6.049 c -0.075 -0.066 l -0.075 -0.02 -0.056 0 0 0 c f Q q 1 0 0 1 9.1367 3.0273 cm 0 0 m 0.075 0 0.215 -0.008 0.645 -0.008 c 1.4 -0.008 2.119 0.281 2.119 1.213 c 2.119 1.969 1.633 2.381 0.737 2.381 c 0.354 2.381 0.075 2.371 0 2.361 c h -1.146 3.201 m -1.146 3.238 -1.129 3.268 -1.082 3.268 c -0.709 3.275 0.02 3.285 0.729 3.285 c 2.613 3.285 3.248 2.314 3.258 1.232 c 3.258 -0.27 2.007 -0.914 0.607 -0.914 c 0.327 -0.914 0.057 -0.914 0 -0.904 c 0 -2.789 l 0 -2.836 -0.019 -2.865 -0.074 -2.865 c -1.082 -2.865 l -1.119 -2.865 -1.146 -2.846 -1.146 -2.799 c h f Q ",s._newParagraph="1 0.819611 0 rg 0 G 0 i 0.58 w 4 M 0 j 0 J []0 d ",s._newParagraphSecondHalf=" 0 G 0 i 0.59 w 4 M 1 j 0 J []0 d  q 1 0 0 1 6.4995 20 cm 0 0 m -6.205 -12.713 l 6.205 -12.713 l h b Q q 1 0 0 1 1.1909 6.2949 cm 0 0 m 1.278 0 l 1.353 0 1.362 -0.02 1.391 -0.066 c 2.128 -1.363 3.78 -4.275 3.966 -4.713 c 3.985 -4.713 l 3.976 -4.453 3.957 -3.91 3.957 -3.137 c 3.957 -0.076 l 3.957 -0.02 3.976 0 4.041 0 c 4.956 0 l 5.021 0 5.04 -0.029 5.04 -0.084 c 5.04 -6.049 l 5.04 -6.113 5.021 -6.133 4.947 -6.133 c 3.695 -6.133 l 3.621 -6.133 3.611 -6.113 3.574 -6.066 c 3.052 -4.955 1.353 -2.063 0.971 -1.186 c 0.961 -1.186 l 0.999 -1.68 0.999 -2.146 1.008 -3.025 c 1.008 -6.049 l 1.008 -6.104 0.989 -6.133 0.933 -6.133 c 0.009 -6.133 l -0.046 -6.133 -0.075 -6.123 -0.075 -6.049 c -0.075 -0.066 l -0.075 -0.02 -0.056 0 0 0 c f Q q 1 0 0 1 9.1367 3.0273 cm 0 0 m 0.075 0 0.215 -0.008 0.645 -0.008 c 1.4 -0.008 2.119 0.281 2.119 1.213 c 2.119 1.969 1.633 2.381 0.737 2.381 c 0.354 2.381 0.075 2.371 0 2.361 c h -1.146 3.201 m -1.146 3.238 -1.129 3.268 -1.082 3.268 c -0.709 3.275 0.02 3.285 0.729 3.285 c 2.613 3.285 3.248 2.314 3.258 1.232 c 3.258 -0.27 2.007 -0.914 0.607 -0.914 c 0.327 -0.914 0.057 -0.914 0 -0.904 c 0 -2.789 l 0 -2.836 -0.019 -2.865 -0.074 -2.865 c -1.082 -2.865 l -1.119 -2.865 -1.146 -2.846 -1.146 -2.799 c h f Q ",s._paragraph="q 1 1 1 rg 0 i 1 w 4 M 1 j 0 J []0 d 1 0 0 1 19.6973 10.0005 cm 0 0 m 0 -5.336 -4.326 -9.662 -9.663 -9.662 c -14.998 -9.662 -19.324 -5.336 -19.324 0 c -19.324 5.335 -14.998 9.662 -9.663 9.662 c -4.326 9.662 0 5.335 0 0 c h f Q ",s._paragraphSecondHalf="0 G 0 i 0.59 w 4 M 1 j 0 J []0 d  q 1 0 0 1 19.6973 10.0005 cm 0 0 m 0 -5.336 -4.326 -9.662 -9.663 -9.662 c -14.998 -9.662 -19.324 -5.336 -19.324 0 c -19.324 5.335 -14.998 9.662 -9.663 9.662 c -4.326 9.662 0 5.335 0 0 c h S Q q 1 0 0 1 11.6787 2.6582 cm 0 0 m -1.141 0 l -1.227 0 -1.244 0.052 -1.227 0.139 c -0.656 1.157 -0.52 2.505 -0.52 3.317 c -0.52 3.594 l -2.833 3.783 -5.441 4.838 -5.441 8.309 c -5.441 10.778 -3.714 12.626 -0.57 13.024 c -0.535 13.508 -0.381 14.129 -0.242 14.389 c -0.207 14.44 -0.174 14.475 -0.104 14.475 c 1.088 14.475 l 1.156 14.475 1.191 14.458 1.175 14.372 c 1.105 14.095 0.881 13.127 0.881 12.402 c 0.881 9.431 0.932 7.324 0.95 4.06 c 0.95 2.298 0.708 0.813 0.189 0.07 c 0.155 0.034 0.103 0 0 0 c b Q ",s._dictionary=new D,s._dictionary.update("Type",L.get("Annot")),s._dictionary.update("Subtype",L.get("Text")),void 0!==t&&(s.text=t),void 0!==e&&void 0!==i&&void 0!==r&&void 0!==n&&(s.bounds={x:e,y:i,width:r,height:n}),s._type=x._PdfAnnotationType.popupAnnotation,s}e(nr,ir=vi),Object.defineProperty(nr.prototype,"action",{get:function(){if(void 0===this._action&&this._dictionary.has("A")){var t=this._dictionary.get("A");if(t&&t.has("Next")){var e=t.get("Next");if(Array.isArray(e))for(var i=0;i<e.length;i++){var r=e[Number.parseInt(i.toString(),10)];r&&r instanceof A&&(r=this._crossReference._fetch(r)).has("JS")&&(this._action=r.get("JS"))}}}return this._action},set:function(t){if(this._isLoaded||"string"!=typeof t||(this._action=t),this._isLoaded&&"string"==typeof t&&this.action!==t&&this._dictionary.has("A")){var e=this._dictionary.get("A");if(e&&e.has("Next")){var i=e.get("Next");if(Array.isArray(i))for(var r=0;r<i.length;r++){var n=i[Number.parseInt(r.toString(),10)];n&&n instanceof A&&(n=this._crossReference._fetch(n)).has("JS")&&(n.update("JS",t),this._action=t,this._dictionary._updated=!0)}}}},enumerable:!0,configurable:!0}),nr._load=function(t,e){var i=new nr;return i._isLoaded=!0,i._initialize(t,e),i},nr.prototype._initialize=function(t,e){ir.prototype._initialize.call(this,t,e)},nr.prototype._postProcess=function(){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var t,e;this._dictionary.has("BS")?t=this.border.width:((e=new D(this._crossReference)).set("Type",L.get("Border")),this._dictionary.set("BS",e)),void 0===t&&(t=1),this._addAction(),this._dictionary.update("Rect",Ca(this))},nr.prototype._addAction=function(){var t,e=this,i=(this._dictionary.has("A")&&((r=this._dictionary.get("A"))&&(void 0!==this._action&&null!==this._action&&r.has("Next")&&(i=r.get("Next"),Array.isArray(i))&&0<i.length&&i.forEach(function(t){t&&t instanceof A&&t._isNew&&e._crossReference._cacheMap.delete(t)}),r.has("F"))&&R(r,this._crossReference,"F"),R(this._dictionary,this._crossReference,"A")),new D),r=(i.set("Type",L.get("Action")),i.set("S",L.get("Launch")),new D),n=(r.set("Type",L.get("Filespec")),r.set("UF",this._fileName),void 0!==this._action&&null!==this._action&&((n=new D).set("Type",L.get("Action")),n.set("S",L.get("JavaScript")),n.set("JS",this._action),t=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(t,n),n._updated=!0,i.set("Next",[t])),this._crossReference._getNextReference());this._crossReference._cacheMap.set(n,r),r._updated=!0,i.set("F",n),i._updated=!0,this._dictionary.set("A",i)},nr.prototype._doPostProcess=function(t){var e;void 0===t&&(t=!1),this._isLoaded||this._postProcess(),t&&(t=void 0,this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")&&(t=e.get("N"),e=e.getRaw("N"))&&t&&(t.reference=e),t?(e=new N(t,this._crossReference),t=this._validateTemplateMatrix(e._content.dictionary),this._flattenAnnotationTemplate(e,t)):this._removeAnnotation(this._page,this))};var ir,rr=nr;function nr(t,e,i,r,n){var s=ir.call(this)||this;return s._dictionary=new D,s._dictionary.update("Type",L.get("Annot")),s._dictionary.update("Subtype",L.get("Link")),void 0!==t&&void 0!==e&&void 0!==i&&void 0!==r&&(s.bounds={x:t,y:e,width:i,height:r}),null!=n&&(s._fileName=n),s._type=x._PdfAnnotationType.fileLinkAnnotation,s}e(or,sr=vi),Object.defineProperty(or.prototype,"uri",{get:function(){var t;return void 0===this._uri&&this._dictionary.has("A")&&(t=this._dictionary.get("A")).has("URI")&&(this._uri=t.get("URI")),this._uri},set:function(t){var e;"string"==typeof t&&(this._isLoaded&&this._dictionary.has("A")&&t!==this.uri?(e=this._dictionary.get("A")).has("URI")&&(this._uri=t,e.update("URI",t),this._dictionary._updated=!0):this._uri=t)},enumerable:!0,configurable:!0}),or._load=function(t,e){var i=new or;return i._isLoaded=!0,i._initialize(t,e),i},or.prototype._initialize=function(t,e){sr.prototype._initialize.call(this,t,e)},or.prototype._postProcess=function(){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var t,e;this._dictionary.has("BS")?t=this.border.width:((e=new D(this._crossReference)).set("Type",L.get("Border")),this._dictionary.set("BS",e)),void 0===t&&(t=1),this._addAction(),this._dictionary.update("Rect",Ca(this))},or.prototype._addAction=function(){var t=new D;t.set("Type",L.get("Action")),t.set("S",L.get("URI")),void 0!==this._uri&&t.set("URI",this._uri),t._updated=!0,this._dictionary.set("A",t),this._dictionary.update("Border",[this.border.hRadius,this.border.vRadius,this.border.width])},or.prototype._doPostProcess=function(t){var e;void 0===t&&(t=!1),this._isLoaded||this._postProcess(),t&&(t=void 0,this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")&&(t=e.get("N"),e=e.getRaw("N"))&&t&&(t.reference=e),t?(e=new N(t,this._crossReference),t=this._validateTemplateMatrix(e._content.dictionary),this._flattenAnnotationTemplate(e,t)):this._removeAnnotation(this._page,this))};var sr,ar=or;function or(t,e,i,r,n){var s=sr.call(this)||this;return s._dictionary=new D,s._dictionary.update("Type",L.get("Annot")),s._dictionary.update("Subtype",L.get("Link")),void 0!==t&&void 0!==e&&void 0!==i&&void 0!==r&&(s.bounds={x:t,y:e,width:i,height:r}),null!=n&&(s._uri=n),s._type=x._PdfAnnotationType.uriAnnotation,s}e(_r,hr=vi),Object.defineProperty(_r.prototype,"destination",{get:function(){return this._isLoaded&&!this._destination&&(this.destination=this._obtainDestination()),this._destination},set:function(t){t&&(this._destination=t,this._isLoaded)&&this._destination._initializePrimitive()},enumerable:!0,configurable:!0}),_r._load=function(t,e){var i=new _r;return i._isLoaded=!0,i._initialize(t,e),i},_r.prototype._initialize=function(t,e){hr.prototype._initialize.call(this,t,e)},_r.prototype._postProcess=function(){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");this._addDocument(),this._dictionary.update("Rect",Ca(this))},_r.prototype._obtainDestination=function(){var t,e,i,r,n,s,a,o,h;return this._dictionary.has("Dest")?(r=void 0,null==(r=(t="string"==typeof(t=this._dictionary.get("Dest"))?this._getDestination(t):t)&&t[0]instanceof A?t[0]:r)&&t&&"number"==typeof t[0]&&(e=t[0],e=this._crossReference._document.getPage(e))&&("XYZ"===(i=t[1]).name?(s=t[2],o=t[3],n=t[4],h=null!=o?e.size[1]-o:0,this._destination=new Cn(e,[null!=s?s:0,h]),null!=n&&(this._destination.zoom=n),(void 0===s&&null===s||void 0===o&&null===o||void 0===n&&null===n)&&this._destination._setValidation(!1)):(this._destination=new Cn(e),this._destination.mode=x.PdfDestinationMode.fitToPage)),r&&(0<=(a=rs(this._crossReference._document,this._crossReference._fetch(r)))?(e=this._crossReference._document.getPage(a))&&t[1]instanceof L&&(i=t[1])&&("XYZ"===i.name?(s=t[2],o=t[3],n=t[4],h=null!=o?e.size[1]-o:0,this._destination=new Cn(e,[null!=s?s:0,h]),null!=n&&(this._destination.zoom=n),(void 0===s&&null===s||void 0===o&&null===o||void 0===n&&null===n)&&this._destination._setValidation(!1)):"Fit"===i.name&&(this._destination=new Cn(e),this._destination.mode=x.PdfDestinationMode.fitToPage)):(this._destination=new Cn,n=t[4],i=t[1],null!=n&&(this._destination.zoom=n),"Fit"===i.name?this._destination.mode=x.PdfDestinationMode.fitToPage:"XYZ"===i.name&&(s=t[2],h=t[3],void 0===s&&null===s||void 0===h&&null===h||void 0===n&&null===n)&&this._destination._setValidation(!1),this._destination._index=a))):this._dictionary.has("A")&&!this._destination&&(r=this._dictionary.get("A")).has("D")&&null!=(o=r.get("D"))&&(t=void 0,Array.isArray(o)?t=o:o&&o instanceof A?(r=this._crossReference._fetch(o),Array.isArray(r)&&(t=r)):"string"==typeof o&&(t=this._getDestination(o)),t)&&(t[0]instanceof A||"number"==typeof t[0])&&(r=this._crossReference._document,a=void 0,a=t[0]instanceof A?rs(r,this._crossReference._fetch(t[0])):t[0],e=r.getPage(a))&&("FitBH"===(i=t[1]).name||"FitH"===i.name?(h=null!=(o=t[2])?e.size[1]-o:0,this._destination=new Cn(e,[0,h]),null==o&&this._destination._setValidation(!1)):"XYZ"===i.name?(s=t[2],r=t[3],n=t[4],h=null!=r?e.size[1]-r:0,this._destination=new Cn(e,[null!=s?s:0,h]),null!=n&&(this._destination.zoom=n),null==s&&null==r&&null==n||this._destination._setValidation(!1)):"FitR"===i.name?6===t.length&&(s=t[2],a=t[3],o=t[4],h=t[5],this._destination=new Cn(e,[s,a,o,h])):"Fit"===i.name&&(this._destination=new Cn(e),this._destination.mode=x.PdfDestinationMode.fitToPage)),this._destination},_r.prototype._getDestination=function(t){var e,i=this._crossReference._document;return e=i?this._getNamedDestination(i,t):e},_r.prototype._getNamedDestination=function(t,e){var i,r=t._catalog;return r&&r._catalogDictionary&&r._catalogDictionary.has("Names")&&(r=r._catalogDictionary.get("Names"))&&r.has("Dests")&&(r=r.get("Dests"))&&(r=this._getNamedObjectFromTree(r,e),i=this._extractDestination(r,t)),i},_r.prototype._extractDestination=function(t,e){var i,r;return(i=t&&t instanceof A?e._crossReference._fetch(t):i)&&(i instanceof D&&i.has("D")?r=i.getRaw("D"):Array.isArray(i)&&(r=i)),r||t},_r.prototype._getNamedObjectFromTree=function(t,e){for(var i,r=!1,n=t;!r&&n;)n&&n.has("Kids")?n=this._getProperKid(n,e):n&&n.has("Names")&&(i=this._findName(n,e),r=!0);return i},_r.prototype._findName=function(t,e){for(var i,r=t.get("Names"),n=0,s=r.length/2-1,a=0,o=!1;!(o||(a=Math.floor((n+s)/2),s<n));){var h=r[2*Number.parseInt(a.toString(),10)],h=(h&&h instanceof A&&(h=t._crossReference._fetch(h)),this._stringCompare(e,h));if(0<h)n=a+1;else{if(!(h<0)){o=!0;break}s=a-1}}return i=o?r[2*a+1]:i},_r.prototype._getProperKid=function(t,e){var i;if((r=t&&t.has("Kids")?t.getRaw("Kids"):r)&&Array.isArray(r)&&0!==r.length)for(var r=t.getArray("Kids"),n=0;n<r.length&&(i=r[Number.parseInt(n.toString(),10)],!this._checkLimits(i,e));n++);return i},_r.prototype._checkLimits=function(t,e){var i,r=!1;return r=t&&t.has("Limits")&&(i=(t=t.get("Limits"))[0],t=t[1],i=this._stringCompare(i,e),t=this._stringCompare(t,e),0===i||0===t||i<0&&0<t)?!0:r},_r.prototype._stringCompare=function(t,e){for(var i=w(t),r=w(e),n=Math.min(i.length,r.length),s=0,a=0;a<n&&0===(s=i[Number.parseInt(a.toString(),10)]-r[Number.parseInt(a.toString(),10)]);a++);return s=0===s?i.length-r.length:s},_r.prototype._addDocument=function(){this.destination&&this._dictionary.set("Dest",this.destination._array)},_r.prototype._doPostProcess=function(t){var e;void 0===t&&(t=!1),this._isLoaded?this._destination&&this._dictionary.update("Dest",this._destination._array):this._postProcess(),t&&(t=void 0,this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")&&(t=e.get("N"),e=e.getRaw("N"))&&t&&(t.reference=e),t?(e=new N(t,this._crossReference),t=this._validateTemplateMatrix(e._content.dictionary),this._flattenAnnotationTemplate(e,t)):this._removeAnnotation(this._page,this))};var hr,cr=_r;function _r(t,e,i,r){var n=hr.call(this)||this;return n._dictionary=new D,n._dictionary.update("Type",L.get("Annot")),n._dictionary.update("Subtype",L.get("Link")),void 0!==t&&void 0!==e&&void 0!==i&&void 0!==r&&(n.bounds={x:t,y:e,width:i,height:r}),n._type=x._PdfAnnotationType.documentLinkAnnotation,n}e(lr,dr=vi),Object.defineProperty(lr.prototype,"font",{get:function(){return this._font},set:function(t){this._font=t},enumerable:!0,configurable:!0}),Object.defineProperty(lr.prototype,"url",{get:function(){var t;return void 0===this._url&&this._dictionary.has("A")&&(t=this._dictionary.get("A")).has("URI")&&(this._url=t.get("URI")),this._url},set:function(t){var e,i;"string"==typeof t&&(this._isLoaded&&this._dictionary.has("A")?(e=this._dictionary._get("A"),(i=this._dictionary.get("A"))&&i.has("URI")&&(this._url=t,i.update("URI",t),e instanceof A||(this._dictionary._updated=i._updated))):this._url=t)},enumerable:!0,configurable:!0}),lr._load=function(t,e){var i=new lr;return i._isLoaded=!0,i._initialize(t,e),i},lr.prototype._initialize=function(t,e){dr.prototype._initialize.call(this,t,e)},lr.prototype._postProcess=function(){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");this._isActionAdded||(this._addAction(),this._isActionAdded=!0),this._dictionary.update("Rect",Ca(this))},lr.prototype._addAction=function(){var t=[this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height],e=(void 0!==this.font&&null!==this.font||(this.font=this._lineCaptionFont),new k(x.PdfTextAlignment.left,x.PdfVerticalAlignment.top)),t=(this._page.graphics.drawString(this._textWebLink,this.font,t,this._pen,this._brush,e),new D);t.set("Type",L.get("Action")),t.set("S",L.get("URI")),void 0!==this._url&&t.set("URI",this._url),t._updated=!0,this._dictionary.set("A",t),this._dictionary.update("Border",[0,0,0])},lr.prototype._doPostProcess=function(t){var e;void 0===t&&(t=!1),this._isLoaded||this._postProcess(),t&&(t=void 0,this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")&&(t=e.get("N"),e=e.getRaw("N"))&&t&&(t.reference=e),t?(e=new N(t,this._crossReference),t=this._validateTemplateMatrix(e._content.dictionary),this._flattenAnnotationTemplate(e,t)):this._removeAnnotation(this._page,this))};var dr,pr=lr;function lr(t,e,i,r,n,s,a,o){var h=dr.call(this)||this;return h._isActionAdded=!1,h._dictionary=new D,h._dictionary.update("Type",L.get("Annot")),h._dictionary.update("Subtype",L.get("Link")),void 0!==t&&void 0!==e&&void 0!==i&&void 0!==r&&(h.bounds={x:t,y:e,width:i,height:r}),h._textWebLink=null!=o?o:"",null!=n&&(h._brush=new I(n)),null!=s&&(h._pen=new T(s,a||1)),h._type=x._PdfAnnotationType.textWebLinkAnnotation,h}e(gr,ur=Ai),Object.defineProperty(gr.prototype,"icon",{get:function(){return this._dictionary.has("Name")&&(this._icon=sa(this._dictionary.get("Name").name)),this._icon},set:function(t){void 0!==t&&(this._icon=t,this._dictionary.update("Name",L.get(this._obtainIconName(this._icon))))},enumerable:!0,configurable:!0}),gr._load=function(t,e){var i=new gr;return i._isLoaded=!0,i._initialize(t,e),i},gr.prototype._initialize=function(t,e){ur.prototype._initialize.call(this,t,e)},gr.prototype._postProcess=function(){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");this._dictionary.update("Rect",Ca(this)),this._addAttachment()},gr.prototype._addAttachment=function(){this._dictionary.has("FS")&&((t=this._dictionary.get("FS"))&&t.has("EF")&&(t=t.get("EF"))&&t.has("F")&&R(t,this._crossReference,"F"),R(this._dictionary,this._crossReference,"FS"));var t=new D,e=(t.set("Type",L.get("Filespec")),t.set("Desc",this._fileName),t.set("F",this._fileName),t.set("UF",this._fileName),new D),i=(e.set("Type",L.get("EmbeddedFile")),new D),r=new Date,r=(i.set("CreationDate",r.toTimeString()),i.set("ModDate",(new Date).toTimeString()),i.set("Size",this._stream.length),e.set("Params",i),this._stream.dictionary=new D,(this._stream.dictionary=e)._crossReference=this._crossReference,this._crossReference._newLine.charCodeAt(0)),i=this._crossReference._newLine.charCodeAt(1),r=(e._crossReference._writeObject(this._stream,[r,i,37,80,68,70,45]),this._crossReference._getNextReference()),i=(this._crossReference._cacheMap.set(r,this._stream),e._updated=!0,new D),e=(i.set("F",r),t.set("EF",i),this._crossReference._getNextReference());this._crossReference._cacheMap.set(e,t),t._updated=!0,this._dictionary.update("FS",e)},gr.prototype._doPostProcess=function(t){var e;void 0===t&&(t=!1),this._isLoaded||this._postProcess(),t&&(t=void 0,this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")&&(t=e.get("N"),e=e.getRaw("N"))&&t&&(t.reference=e),t?(e=new N(t,this._crossReference),t=this._validateTemplateMatrix(e._content.dictionary),this._flattenAnnotationTemplate(e,t)):this._removeAnnotation(this._page,this))},gr.prototype._obtainIconName=function(t){switch(t){case x.PdfAttachmentIcon.pushPin:this._iconString="PushPin";break;case x.PdfAttachmentIcon.tag:this._iconString="Tag";break;case x.PdfAttachmentIcon.graph:this._iconString="Graph";break;case x.PdfAttachmentIcon.paperClip:this._iconString="Paperclip"}return this._iconString};var ur,fr=gr;function gr(t,e,i,r,n,s){var a=ur.call(this)||this;return a._icon=x.PdfAttachmentIcon.pushPin,a._iconString="",a._dictionary=new D,a._dictionary.update("Type",L.get("Annot")),a._dictionary.update("Subtype",L.get("FileAttachment")),void 0!==t&&void 0!==e&&void 0!==i&&void 0!==r&&(a.bounds={x:t,y:e,width:i,height:r}),void 0!==n&&(a._fileName=n),a._stream=new g("string"==typeof s?ys(s):s),a._type=x._PdfAnnotationType.fileAttachmentAnnotation,a}e(br,yr=vi),br._load=function(t,e){var i=new br;return i._isLoaded=!0,i._initialize(t,e),i},br.prototype._initialize=function(t,e){yr.prototype._initialize.call(this,t,e)},br.prototype._doPostProcess=function(t){var e;(t=void 0===t?!1:t)&&(t=void 0,this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")&&(t=e.get("N"),e=e.getRaw("N"))&&t&&(t.reference=e),t?(e=new N(t,this._crossReference),t=this._validateTemplateMatrix(e._content.dictionary),this._flattenAnnotationTemplate(e,t)):this._removeAnnotation(this._page,this))};var yr,mr=br;function br(){var t=yr.call(this)||this;return t._type=x._PdfAnnotationType.movieAnnotation,t}e(vr,Sr=Ai),Object.defineProperty(vr.prototype,"bounds",{get:function(){return this._isLoaded&&(this._bounds=vs(this._dictionary,this._page)),this._bounds},set:function(t){var e,i;t&&(this._isLoaded?t.x===this.bounds.x&&t.y===this.bounds.y&&t.width===this.bounds.width&&t.height===this.bounds.height||(i=this._page.size)&&(e=(i=i[1]-(t.y+t.height))+t.height,this._dictionary.update("Rect",[t.x,i,t.x+t.width,e]),this._bounds=t,this._isChanged=!0):(this._bounds=t,i=this._obtainNativeRectangle(),this._dictionary.update("Rect",As({x:i[0],y:i[1],width:i[2],height:i[3]})),this._isChanged=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(vr.prototype,"textMarkUpColor",{get:function(){return void 0===this._textMarkUpColor&&this._dictionary.has("C")&&(this._textMarkUpColor=Is(this._dictionary.getArray("C"))),this._textMarkUpColor},set:function(t){var e;void 0!==t&&3===t.length&&(e=this.color,this._isLoaded&&void 0!==e&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]||(this._color=t,this._textMarkUpColor=t,this._dictionary.update("C",[Number.parseFloat((t[0]/255).toFixed(3)),Number.parseFloat((t[1]/255).toFixed(3)),Number.parseFloat((t[2]/255).toFixed(3))])))},enumerable:!0,configurable:!0}),Object.defineProperty(vr.prototype,"textMarkupType",{get:function(){var t;return this._dictionary.has("Subtype")&&(t=this._dictionary.get("Subtype"),this._textMarkupType=Js(t.name)),this._textMarkupType},set:function(t){void 0!==t&&(this._textMarkupType=t,this._dictionary.update("Subtype",L.get(Ys(t))))},enumerable:!0,configurable:!0}),Object.defineProperty(vr.prototype,"boundsCollection",{get:function(){if(this._isLoaded){var t=[];if(this._dictionary.has("QuadPoints")){var e=this._dictionary.getArray("QuadPoints");if(e&&0<e.length)for(var i=e.length/8,r=0;r<i;r++){var n=e[4+8*r]-e[8*r],s=e[5+8*r]-e[1+8*r],a=Math.sqrt(n*n+s*s),n=e[6+8*r]-e[4+8*r],s=e[7+8*r]-e[5+8*r],n=Math.sqrt(n*n+s*s),s=[e[8*r],this._page.size[1]-e[1+8*r],n,a];t.push(s)}}return t}return this._boundsCollection},set:function(t){if(!this._isLoaded&&void 0!==t){if(0<t.length){this._quadPoints=new Array(8*t.length);for(var e=0;e<t.length;e++)this._boundsCollection.push(t[Number.parseInt(e.toString(),10)])}else this._quadPoints=new Array(8),this._boundsCollection=t;this._isChanged=!0}if(this._isLoaded&&void 0!==t){var i=!1;if(this.boundsCollection.length===t.length){for(e=0;e<t.length;e++)for(var r=t[Number.parseInt(e.toString(),10)],n=0;n<r.length;n++)if(t[Number.parseInt(e.toString(),10)][Number.parseInt(n.toString(),10)]!==this.boundsCollection[Number.parseInt(e.toString(),10)][Number.parseInt(n.toString(),10)]){i=!0;break}}else i=!0;if(i){this._quadPoints=new Array(8*t.length);for(var s=this._page.size[1],e=0;e<t.length;e++)this._quadPoints[0+8*Number.parseInt(e.toString(),10)]=t[Number.parseInt(e.toString(),10)][0],this._quadPoints[1+8*Number.parseInt(e.toString(),10)]=s-t[Number.parseInt(e.toString(),10)][1],this._quadPoints[2+8*Number.parseInt(e.toString(),10)]=t[Number.parseInt(e.toString(),10)][0]+t[Number.parseInt(e.toString(),10)][2],this._quadPoints[3+8*Number.parseInt(e.toString(),10)]=s-t[Number.parseInt(e.toString(),10)][1],this._quadPoints[4+8*Number.parseInt(e.toString(),10)]=t[Number.parseInt(e.toString(),10)][0],this._quadPoints[5+8*Number.parseInt(e.toString(),10)]=this._quadPoints[1+8*e]-t[Number.parseInt(e.toString(),10)][3],this._quadPoints[6+8*Number.parseInt(e.toString(),10)]=t[Number.parseInt(e.toString(),10)][0]+t[Number.parseInt(e.toString(),10)][2],this._quadPoints[7+8*Number.parseInt(e.toString(),10)]=this._quadPoints[5+8*Number.parseInt(e.toString(),10)];this._dictionary.update("QuadPoints",this._quadPoints),this._isChanged=!0}}},enumerable:!0,configurable:!0}),vr._load=function(t,e){var i=new vr;return i._isLoaded=!0,i._initialize(t,e),i},vr.prototype._obtainNativeRectangle=function(){var t,e,i,r=[this._bounds.x,this._bounds.y+this._bounds.height,this._bounds.width,this._bounds.height];return this._page&&(t=this._page.size,r[1]=t[1]-r[1],t=this._getCropOrMediaBox()),t&&(t[3]<0&&(e=t[1],i=t[3],t[1]=i,t[3]=e),2<t.length)&&(0!==t[0]||0!==t[1])&&(r[0]+=t[0],this._page&&this._page._pageDictionary.has("MediaBox")&&!this._page._pageDictionary.has("CropBox")&&0<t[1]&&0===t[3]?r[1]+=t[3]:r[1]+=t[1]),r},vr.prototype._initialize=function(t,e){Sr.prototype._initialize.call(this,t,e)},vr.prototype._postProcess=function(){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");this._dictionary.has("BS")?e=this.border.width:((t=new D(this._crossReference)).set("Type",L.get("Border")),t.set("W",this.border.width),this._dictionary.set("BS",t)),void 0===e&&(e=1),this._dictionary.has("C")||(this._isTransparentColor=!0);var t,e=this._page.size;this._dictionary.update("Subtype",L.get(Ys(this._textMarkupType))),this._isChanged&&(this._setQuadPoints(e),this._dictionary.update("Rect",Ca(this))),this._setAppearance&&(this._appearanceTemplate=this._createMarkupAppearance(),!this._isLoaded&&1<this._boundsCollection.length&&this._isChanged&&(e=this._obtainNativeRectangle(),this._dictionary.update("Rect",[e[0],e[1],e[0]+e[2],e[1]+e[3]])),this._dictionary.has("AP")&&R(this._dictionary.get("AP"),this._crossReference,"N"),t=new D,this._appearanceTemplate._content.dictionary._updated=!0,e=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(e,this._appearanceTemplate._content),this._appearanceTemplate._content.reference=e,t.set("N",e),t._updated=!0,this._dictionary.set("AP",t)),void 0!==this._text&&null!==this._text&&this._dictionary.set("Contents",this._text),this._isChanged=!1},vr.prototype._doPostProcess=function(t){var e,i,r;void 0===t&&(t=!1),this._isLoaded?((this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createMarkupAppearance(),t||(this._dictionary.has("AP")&&R(this._dictionary.get("AP"),this._crossReference,"N"),i=new D,this._appearanceTemplate._content.dictionary._updated=!0,r=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(r,this._appearanceTemplate._content),this._appearanceTemplate._content.reference=r,i.set("N",r),i._updated=!0,this._dictionary.set("AP",i))),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(i=this._dictionary.get("AP"))&&i.has("N")&&(e=i.get("N"))&&((r=i.getRaw("N"))&&(e.reference=r),this._appearanceTemplate=new N(e,this._crossReference))):(this._postProcess(),this._appearanceTemplate||t&&(this._dictionary.has("AP")?(i=this._dictionary.get("AP"))&&i.has("N")&&(e=i.get("N"))&&((r=i.getRaw("N"))&&(e.reference=r),this._appearanceTemplate=new N(e,this._crossReference)):this._appearanceTemplate=this._createMarkupAppearance())),void 0!==this.flattenPopups&&this.flattenPopups&&(this._isLoaded?this._flattenLoadedPopUp():this._flattenPopUp()),t&&this._appearanceTemplate?(i=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary),this._appearanceTemplate._content.dictionary.has("Matrix")||this._isLoaded||(r=this._appearanceTemplate._content.dictionary.getArray("BBox"))&&this._appearanceTemplate._content.dictionary.update("Matrix",[1,0,0,1,-r[0],-r[1]]),(i&&void 0!==this._page.rotation&&this._page.rotation!==x.PdfRotationAngle.angle0||i&&this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary,this._appearanceTemplate)||!this._dictionary.has("AP")&&this._appearanceTemplate)&&this._flattenAnnotationTemplate(this._appearanceTemplate,i)):t&&this._page.annotations.remove(this)},vr.prototype._createMarkupAppearance=function(){var t=0,e=0;if(1<this.boundsCollection.length){for(var i=new C,r=0;r<this.boundsCollection.length;r++)(w=[])[0]=this.boundsCollection[Number.parseInt(r.toString(),10)][0],w[1]=this.boundsCollection[Number.parseInt(r.toString(),10)][1],w[2]=this.boundsCollection[Number.parseInt(r.toString(),10)][2],w[3]=this.boundsCollection[Number.parseInt(r.toString(),10)][3],i.addRectangle(w[0],w[1],w[2],w[3]);var n={x:(g=i._getBounds())[0],y:g[1],width:g[2],height:g[3]},t=(this.bounds=n).width,e=n.height}else if(this._dictionary.has("QuadPoints")){var s=this._dictionary.get("QuadPoints");if(null!==this._quadPoints)for(r=0;r<s.length/8;r++)if(this._isLoaded){for(var a=new Array,o=0,h=0;h<s.length;){var c=s[Number.parseInt(h.toString(),10)],_=s[h+1];a[Number.parseInt(o.toString(),10)]=[c,_],h+=2,o++}var d=new C;d._addLines(a),t=(n={x:(g=d._getBounds())[0],y:g[1],width:g[2],height:g[3]}).width,e=n.height}else{var d=Math.floor(s[4+8*r])-Math.floor(s[0+8*r]),p=Math.floor(s[5+8*r])-Math.floor(s[1+8*r]);e=Math.sqrt(d*d+p*p),d=Math.floor(s[6+8*r])-Math.floor(s[4+8*r]),p=Math.floor(s[7+8*r])-Math.floor(s[5+8*r]),t=Math.sqrt(d*d+p*p),this.bounds={x:this.bounds.x,y:this.bounds.y,width:t,height:e}}}var l=new N([0,0,t,e],this._crossReference),u=(Ks(l,this._getRotationAngle()),l.graphics);if(void 0!==this.opacity&&u.setTransparency(this.opacity,this.opacity,x.PdfBlendMode.multiply),this.textMarkUpColor){var f,g,y=new T(this.textMarkUpColor,this.border.width),m=new I(this.textMarkUpColor),c=0,_=0,b=0,S=0;if(1<this.boundsCollection.length)for(var w,r=0;r<this.boundsCollection.length;r++)(w=[])[0]=this.boundsCollection[Number.parseInt(r.toString(),10)][0],w[1]=this.boundsCollection[Number.parseInt(r.toString(),10)][1],w[2]=this.boundsCollection[Number.parseInt(r.toString(),10)][2],w[3]=this.boundsCollection[Number.parseInt(r.toString(),10)][3],this.textMarkupType===x.PdfTextMarkupAnnotationType.highlight?u.drawRectangle(w[0]-n.x,w[1]-n.y,w[2],w[3],m):this.textMarkupType===x.PdfTextMarkupAnnotationType.underline?(c=w[0]-n.x,_=w[1]-n.y+(w[3]-w[3]/2/3),b=w[2]+(w[0]-n.x),S=w[1]-n.y+(w[3]-w[3]/2/3),u.drawLine(y,c,_,b,S)):this.textMarkupType===x.PdfTextMarkupAnnotationType.strikeOut?(c=w[0]-n.x,_=w[1]-n.y+(w[3]-w[3]/2),b=w[2]+(w[0]-n.x),S=w[1]-n.y+(w[3]-w[3]/2),u.drawLine(y,c,_,b,S)):this.textMarkupType===x.PdfTextMarkupAnnotationType.squiggly&&(y._width=.02*w[3],u.save(),u.translateTransform(w[0]-n.x,w[1]-n.y),u.setClip([0,0,w[2],w[3]]),u.drawPath(this._drawSquiggly(w[2],w[3]),y),u.restore());else this.textMarkupType===x.PdfTextMarkupAnnotationType.highlight?u.drawRectangle(0,0,t,e,m):this.textMarkupType===x.PdfTextMarkupAnnotationType.underline?u.drawLine(y,0,e-e/2/3,t,e-e/2/3):this.textMarkupType===x.PdfTextMarkupAnnotationType.strikeOut?u.drawLine(y,0,e/2,t,e/2):this.textMarkupType===x.PdfTextMarkupAnnotationType.squiggly&&(y._width=.02*e,u.drawPath(this._drawSquiggly(Math.round(t),Math.round(e)),y)),this._isLoaded&&(f=[n.x,n.y,n.x+n.width,n.y+n.height],g=this._setAppearance?Ca(this):f,this._dictionary.update("Rect",g))}return l},vr.prototype._drawSquiggly=function(t,e){(Math.floor(t)%2!=0||Math.round(t)>t)&&(t=Math.floor(t)+1);for(var i=new C,r=new Array,n=Math.ceil(t/e*16),s=t/(n/2),a=parseFloat((.6*(s+s)).toFixed(2)),o=a,h=0,c=0;c<n;c++){var _=[h,parseFloat((e-a+o-.02*e).toFixed(2))];r.push(_),o=0===o?a:0,h+=s}return i._addLines(r),i},vr.prototype._setQuadPoints=function(t){var e,i=[],r=t[1],n=(e=this._page&&this._page._isNew&&this._page._pageSettings&&this._page._pageSettings.margins?{left:(t=this._page._pageSettings.margins).left,top:t.top,right:t.right,bottom:t.bottom}:{left:0,top:0,right:0,bottom:0},0!==this.bounds.x&&0!==this.bounds.y&&0!==this.bounds.width&&0!==this.bounds.height&&(this._boundsCollection[0]=[this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height]),this._quadPoints.length/8),t=this._getMediaOrCropBox(this._page),s=!1;if(!this._isLoaded&&t&&3<t.length&&!this.flatten){var a=t[0],o=t[1];if(0!==a||0!==o){for(var h=0;h<n;h++){var c=this._boundsCollection[Number.parseInt(h.toString(),10)][0]+e.left+a,_=o+e.top;i[0+8*h]=c+e.left,i[1+8*h]=r- -_-e.top-this._boundsCollection[Number.parseInt(h.toString(),10)][1],i[2+8*h]=c+this._boundsCollection[Number.parseInt(h.toString(),10)][2]+e.left,i[3+8*h]=r- -_-e.top-this._boundsCollection[Number.parseInt(h.toString(),10)][1],i[4+8*h]=c+e.left,i[5+8*h]=i[1+8*h]-this._boundsCollection[Number.parseInt(h.toString(),10)][3],i[6+8*h]=c+this._boundsCollection[Number.parseInt(h.toString(),10)][2]+e.left,i[7+8*h]=i[5+8*h]}s=!0}}if(!s)for(h=0;h<n;h++){c=this._boundsCollection[Number.parseInt(h.toString(),10)][0],_=this._boundsCollection[Number.parseInt(h.toString(),10)][1];i[0+8*h]=c+e.left,i[1+8*h]=r-_-e.top,i[2+8*h]=c+this._boundsCollection[Number.parseInt(h.toString(),10)][2]+e.left,i[3+8*h]=r-_-e.top,i[4+8*h]=c+e.left,i[5+8*h]=i[1+8*h]-this._boundsCollection[Number.parseInt(h.toString(),10)][3],i[6+8*h]=c+this._boundsCollection[Number.parseInt(h.toString(),10)][2]+e.left,i[7+8*h]=i[5+8*h]}this._points=i,this._dictionary.set("QuadPoints",this._points)};var Sr,wr=vr;function vr(t,e,i,r,n){var s=Sr.call(this)||this;return s._textMarkupType=x.PdfTextMarkupAnnotationType.highlight,s._quadPoints=new Array(8),s._boundsCollection=[],s._dictionary=new D,s._dictionary.update("Type",L.get("Annot")),void 0!==t&&(s._text=t),void 0!==e&&void 0!==i&&void 0!==r&&void 0!==n&&(s.bounds={x:e,y:i,width:r,height:n}),s._type=x._PdfAnnotationType.textMarkupAnnotation,s}e(xr,Pr=vi),xr._load=function(t,e){var i=new xr;return i._isLoaded=!0,i._initialize(t,e),i},xr.prototype._initialize=function(t,e){Pr.prototype._initialize.call(this,t,e)},xr.prototype._postProcess=function(){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var t,e;this._dictionary.has("BS")?t=this.border.width:((e=new D(this._crossReference)).set("Type",L.get("Border")),this._dictionary.set("BS",e)),void 0===t&&(t=1),void 0===this.color&&(this.color=[0,0,0]),this._appearanceTemplate=this._createWatermarkAppearance(),this._dictionary.update("Rect",Ca(this)),void 0!==this.opacity&&1!==this._opacity&&this._dictionary.set("CA",this._opacity)},xr.prototype._createWatermarkAppearance=function(){var t=this._obtainFont(),e=((null==t||(!this._isLoaded||this._page&&this._page._isDuplicate)&&1===t.size)&&(t=this._lineCaptionFont,this._pdfFont=t),this._rotateAngle=this._getRotationAngle(),(void 0!==this.rotationAngle&&this._rotate!==x.PdfRotationAngle.angle0||this._rotateAngle!==x.PdfRotationAngle.angle0)&&(0===this._rotateAngle&&(this._rotateAngle=90*this.rotationAngle),this.bounds=this._getRotatedBounds(this.bounds,this._rotateAngle)),[0,0,this.bounds.width,this.bounds.height]),i=new bi(this,e),e=(i.normal=new N(e,this._crossReference),i.normal),i=(Ks(e,this._rotateAngle),i.normal.graphics),r=this.border.width/2,n=new k(x.PdfTextAlignment.left,x.PdfVerticalAlignment.top),r=new T(this.color,r),r=(this.innerColor&&(s=new I(this._innerColor)),this._isLoaded&&this._dictionary.has("Contents")&&(this._watermarkText=this._dictionary.get("Contents")),this._dictionary.update("Contents",this._watermarkText),void 0!==this._watermarkText&&i.drawString(this._watermarkText,t,[0,0,0,0],r,s,n),this._dictionary.has("AP")&&(t=this._dictionary.get("AP"))&&t instanceof D&&R(t,this._crossReference,"N"),new D),s=(i._template._content.dictionary._updated=!0,this._crossReference._getNextReference());return this._crossReference._cacheMap.set(s,i._template._content),i._template._content.reference=s,r.set("N",s),r._updated=!0,this._dictionary.set("AP",r),e},xr.prototype._doPostProcess=function(t){var e,i,r;void 0===t&&(t=!1),this._isLoaded?(t||(this._appearanceTemplate=this._createWatermarkAppearance()),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(i=this._dictionary.get("AP"))&&i.has("N")&&(e=i.get("N"))&&((r=i.getRaw("N"))&&(e.reference=r),this._appearanceTemplate=new N(e,this._crossReference))):(this._postProcess(),this._appearanceTemplate||t&&(this._dictionary.has("AP")?(i=this._dictionary.get("AP"))&&i.has("N")&&(e=i.get("N"))&&((r=i.getRaw("N"))&&(e.reference=r),this._appearanceTemplate=new N(e,this._crossReference)):this._appearanceTemplate=this._createWatermarkAppearance())),t&&this._appearanceTemplate?(i=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary),this._appearanceTemplate._content.dictionary.has("Matrix")||(r=this._appearanceTemplate._content.dictionary.getArray("BBox"))&&this._appearanceTemplate._content.dictionary.update("Matrix",[1,0,0,1,-r[0],-r[1]]),this._flattenAnnotationTemplate(this._appearanceTemplate,i)):t&&this._page.annotations.remove(this)};var Pr,Ar=xr;function xr(t,e,i,r,n){var s=Pr.call(this)||this;return s._watermarkText="",s._dictionary=new D,s._dictionary.update("Type",L.get("Annot")),s._dictionary.update("Subtype",L.get("Watermark")),void 0!==t&&(s._watermarkText=t,s.text=t),void 0!==e&&void 0!==i&&void 0!==r&&void 0!==n&&(s.bounds={x:e,y:i,width:r,height:n}),s._type=x._PdfAnnotationType.watermarkAnnotation,s}e(Cr,kr=Ai),Object.defineProperty(Cr.prototype,"icon",{get:function(){return this._dictionary.has("Name")&&(this._icon=$s(this._dictionary.get("Name").name)),this._icon},set:function(t){void 0!==t&&(this._icon=t,this._dictionary.update("Name",L.get("#"+this._obtainIconName(this._icon))))},enumerable:!0,configurable:!0}),Object.defineProperty(Cr.prototype,"appearance",{get:function(){var t;return this._isLoaded?null:(void 0===this._appearance&&(t=[0,0,this.bounds.width,this.bounds.height],this._appearance=new bi(this,t),this._appearance.normal=new N(t,this._crossReference)),this._appearance)},enumerable:!0,configurable:!0}),Cr.prototype.createTemplate=function(){var t;if(this._isLoaded)if(this._dictionary.has("AP")){var e=this._dictionary.get("AP");if(e&&e.has("N")){var i=e.get("N");if(i){(t=new N)._isExported=!0;var i=i.dictionary,r=i.getArray("Matrix"),n=i.getArray("BBox");if(r){for(var s,a,o=[],h=0;h<r.length;h++){var c=r[Number.parseInt(h.toString(),10)];o[Number.parseInt(h.toString(),10)]=c}n&&3<n.length&&(s=Ps(n),a=this._transformBBox(s,o),t._size=[a[2],a[3]],t._templateOriginalSize=[s.width,s.height])}else n&&(i.update("Matrix",[1,0,0,1,-n[0],-n[1]]),t._size=[n[2],n[3]]);t._exportStream(e,this._crossReference)}}}else t=this._createRubberStampAppearance();return t},Object.defineProperty(Cr.prototype,"_innerTemplateBounds",{get:function(){var t;return this._isLoaded&&((t=this._obtainInnerBounds()).x=this.bounds.x,t.y=this.bounds.y),t},enumerable:!0,configurable:!0}),Cr._load=function(t,e){var i=new Cr;return i._isLoaded=!0,i._initialize(t,e),i},Cr.prototype._initialize=function(t,e){kr.prototype._initialize.call(this,t,e)},Cr.prototype._postProcess=function(){var t,e;this._dictionary.has("BS")?t=this.border.width:((e=new D(this._crossReference)).set("Type",L.get("Border")),this._dictionary.set("BS",e)),void 0===t&&(t=1),this._dictionary.has("C")||(this._isTransparentColor=!0),this._dictionary.has("AP")&&this._isLoaded&&!this._isRotated?this._parseStampAppearance():this._appearanceTemplate=this._createRubberStampAppearance()},Cr.prototype._transformBBox=function(t,e){var i=[],r=[],n=this._transformPoint(t.x,t.y+t.height,e),n=(i[0]=n[0],r[0]=n[1],this._transformPoint(t.x+t.width,t.y,e)),n=(i[1]=n[0],r[1]=n[1],this._transformPoint(t.x,t.y,e)),n=(i[2]=n[0],r[2]=n[1],this._transformPoint(t.x+t.width,t.y+t.height,e));return i[3]=n[0],r[3]=n[1],[this._minValue(i),this._minValue(r),this._maxValue(i),this._maxValue(r)]},Cr.prototype._transformPoint=function(t,e,i){var r=[];return r[0]=t*i[0]+e*i[2]+i[4],r[1]=t*i[1]+e*i[3]+i[5],r},Cr.prototype._minValue=function(t){for(var e=t[0],i=1;i<t.length;i++)t[Number.parseInt(i.toString(),10)]<e&&(e=t[Number.parseInt(i.toString(),10)]);return e},Cr.prototype._maxValue=function(t){for(var e=t[0],i=1;i<t.length;i++)t[Number.parseInt(i.toString(),10)]>e&&(e=t[Number.parseInt(i.toString(),10)]);return e},Cr.prototype._doPostProcess=function(t){void 0===t&&(t=!1);var e,i,r=!1;this._isLoaded&&(this._setAppearance||t||this._isExport)?((!t&&!this._isExport||this._setAppearance||this._isRotated)&&(this._appearanceTemplate=this._createRubberStampAppearance()),!this._appearanceTemplate&&(this._isExport||t)&&this._dictionary.has("AP")&&(r=this._parseStampAppearance())):(this._isImported&&this._dictionary.has("AP")||this._postProcess(),this._appearanceTemplate||!t&&!this._isImported||(this._dictionary.has("AP")?(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"))&&((e=e.getRaw("N"))&&(i.reference=e),this._appearanceTemplate=new N(i,this._crossReference)):this._appearanceTemplate=this._createRubberStampAppearance())),void 0!==this.flattenPopups&&this.flattenPopups&&(this._isLoaded?this._flattenLoadedPopUp():this._flattenPopUp()),t&&this._appearanceTemplate?(e=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary),this._appearanceTemplate._content.dictionary.has("Matrix")||(i=this._appearanceTemplate._content.dictionary.getArray("BBox"))&&this._appearanceTemplate._content.dictionary.update("Matrix",[1,0,0,1,-i[0],-i[1]]),r?this._flattenAnnotationTemplate(this._appearanceTemplate,r):this._flattenAnnotationTemplate(this._appearanceTemplate,e)):t&&this._page.annotations.remove(this)},Cr.prototype._parseStampAppearance=function(){var t=!1,e=this._dictionary.get("AP");if(e&&e.has("N")){var i=e.get("N");if(i){e=e.getRaw("N"),e=(e&&(i.reference=e),!1);if(this._type===x._PdfAnnotationType.rubberStampAnnotation){var r=!1,n=void 0,s=void 0;if(i&&(r=(r=this._page.rotation===x.PdfRotationAngle.angle0&&this.rotationAngle===x.PdfRotationAngle.angle0)||this._page.rotation!==x.PdfRotationAngle.angle0&&this.rotationAngle===x.PdfRotationAngle.angle0),this._appearanceTemplate=new N(i,this._crossReference),e=!0,t=!!r){var a=i.dictionary.getArray("Matrix");if(a){for(var o=[],h=0;h<a.length;h++){var c=a[Number.parseInt(h.toString(),10)];o[Number.parseInt(h.toString(),10)]=c}var r=i.dictionary.getArray("BBox");r&&3<r.length?(s=Ps(r),n=[(r=this._transformBBox(s,o))[2],r[3]],this._appearanceTemplate._size=n):n=[s.width,s.height]}}else s&&(n=[s.width,s.height])}e||(this._appearanceTemplate=new N(i,this._crossReference))}}return t},Cr.prototype._createRubberStampAppearance=function(){var t=[0,0,this.bounds.width,this.bounds.height],t=(this._appearance?(e=this._appearance,this._dictionary.has("Name")||this._dictionary.update("Name",L.get("#23CustomStamp"))):(this._iconString=this._obtainIconName(this.icon),this._dictionary.update("Name",L.get("#23"+this._iconString)),(e=new bi(this,t)).normal=new N(t,this._crossReference)),e.normal),e=(!this._alterRotateBounds||void 0===this._rotate||this._rotate===x.PdfRotationAngle.angle0&&0===this._getRotationAngle()?this.rotateAngle=this._getRotationAngle():(this.rotateAngle=this._getRotationAngle(),0===this.rotateAngle&&(this.rotateAngle=90*this.rotationAngle),this.bounds=this._getRotatedBounds(this.bounds,this.rotateAngle)),Ks(t,this.rotateAngle),this._appearance||this._drawStampAppearance(t),this._dictionary.has("AP")&&R(this._dictionary.get("AP"),this._crossReference,"N"),new D),i=(t._content.dictionary._updated=!0,this._crossReference._getNextReference());return this._crossReference._cacheMap.set(i,t._content),t._content.reference=i,e.set("N",i),e._updated=!0,this._dictionary.set("AP",e),this._dictionary.set("Border",[this.border.hRadius,this.border.vRadius,this.border.width]),this._dictionary.update("Rect",Ca(this)),t},Cr.prototype._drawStampAppearance=function(t){var e=new k,i=(e.alignment=x.PdfTextAlignment.center,e.lineAlignment=x.PdfVerticalAlignment.middle,new I(this._obtainBackGroundColor())),r=new T(this._obtainBorderColor(),this.border.width),n=t.graphics,t=(n.save(),n.scaleTransform(t._size[0]/(this._stampWidth+4),t._size[1]/28),this._stampAppearanceFont);this._drawRubberStamp(n,r,i,t,e),n.restore()},Cr.prototype._obtainIconName=function(t){switch(t){case x.PdfRubberStampAnnotationIcon.approved:this._iconString="Approved",this._stampWidth=126;break;case x.PdfRubberStampAnnotationIcon.asIs:this._iconString="AsIs",this._stampWidth=75;break;case x.PdfRubberStampAnnotationIcon.confidential:this._iconString="Confidential",this._stampWidth=166;break;case x.PdfRubberStampAnnotationIcon.departmental:this._iconString="Departmental",this._stampWidth=186;break;case x.PdfRubberStampAnnotationIcon.draft:this._iconString="Draft",this._stampWidth=90;break;case x.PdfRubberStampAnnotationIcon.experimental:this._iconString="Experimental",this._stampWidth=176;break;case x.PdfRubberStampAnnotationIcon.expired:this._iconString="Expired",this._stampWidth=116;break;case x.PdfRubberStampAnnotationIcon.final:this._iconString="Final",this._stampWidth=90;break;case x.PdfRubberStampAnnotationIcon.forComment:this._iconString="ForComment",this._stampWidth=166;break;case x.PdfRubberStampAnnotationIcon.forPublicRelease:this._iconString="ForPublicRelease",this._stampWidth=240;break;case x.PdfRubberStampAnnotationIcon.notApproved:this._iconString="NotApproved",this._stampWidth=186;break;case x.PdfRubberStampAnnotationIcon.notForPublicRelease:this._iconString="NotForPublicRelease",this._stampWidth=290;break;case x.PdfRubberStampAnnotationIcon.sold:this._iconString="Sold",this._stampWidth=75;break;case x.PdfRubberStampAnnotationIcon.topSecret:this._iconString="TopSecret",this._stampWidth=146;break;case x.PdfRubberStampAnnotationIcon.completed:this._iconString="Completed",this._stampWidth=136;break;case x.PdfRubberStampAnnotationIcon.void:this._iconString="Void",this._stampWidth=75;break;case x.PdfRubberStampAnnotationIcon.informationOnly:this._iconString="InformationOnly",this._stampWidth=230;break;case x.PdfRubberStampAnnotationIcon.preliminaryResults:this._iconString="PreliminaryResults",this._stampWidth=260}return this._iconString},Cr.prototype._obtainBackGroundColor=function(){return this._icon===x.PdfRubberStampAnnotationIcon.notApproved||this._icon===x.PdfRubberStampAnnotationIcon.void?[251,222,221]:this._icon===x.PdfRubberStampAnnotationIcon.approved||this._icon===x.PdfRubberStampAnnotationIcon.final||this._icon===x.PdfRubberStampAnnotationIcon.completed?[229,238,222]:[219,227,240]},Cr.prototype._obtainBorderColor=function(){return this._icon===x.PdfRubberStampAnnotationIcon.notApproved||this._icon===x.PdfRubberStampAnnotationIcon.void?[151,23,15]:this._icon===x.PdfRubberStampAnnotationIcon.approved||this._icon===x.PdfRubberStampAnnotationIcon.final||this._icon===x.PdfRubberStampAnnotationIcon.completed?[73,110,38]:[24,37,100]},Cr.prototype._drawRubberStamp=function(t,e,i,r,n){t.drawRoundedRectangle(2,1,this._stampWidth,26,3,e,i);e=new I(this._obtainBorderColor());t.drawString(this._iconString.toUpperCase(),r,[this._stampWidth/2+1,15,0,0],null,e,n)},Cr.prototype._obtainInnerBounds=function(){var t,e={x:0,y:0,width:0,height:0};return e=this._dictionary&&this._dictionary.has("AP")&&(t=this._dictionary.get("AP"))&&t.has("N")&&(t=t.get("N"))&&void 0!==t.dictionary&&(t=t.dictionary).has("BBox")&&(t=t.getArray("BBox"))&&4===t.length?Ps(t):e};var kr,Ir=Cr;function Cr(t,e,i,r){var n=kr.call(this)||this;return n._icon=x.PdfRubberStampAnnotationIcon.draft,n._stampWidth=0,n._iconString="",n.rotateAngle=0,n._alterRotateBounds=!0,n._stampAppearanceFont=new m(x.PdfFontFamily.helvetica,20,x.PdfFontStyle.italic|x.PdfFontStyle.bold),n._dictionary=new D,n._dictionary.update("Type",L.get("Annot")),n._dictionary.update("Subtype",L.get("Stamp")),void 0!==t&&void 0!==e&&void 0!==i&&void 0!==r&&(n.bounds={x:t,y:e,width:i,height:r}),n._type=x._PdfAnnotationType.rubberStampAnnotation,n}e(Rr,Tr=Ai),Rr._load=function(t,e){var i=new Rr;return i._isLoaded=!0,i._initialize(t,e),i},Rr.prototype._initialize=function(t,e){Tr.prototype._initialize.call(this,t,e)},Rr.prototype._doPostProcess=function(t){var e;(t=void 0===t?!1:t)&&(t=void 0,this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")&&(t=e.get("N"),e=e.getRaw("N"))&&t&&(t.reference=e),t?(e=new N(t,this._crossReference),t=this._validateTemplateMatrix(e._content.dictionary),this._flattenAnnotationTemplate(e,t)):this._removeAnnotation(this._page,this))};var Tr,Nr=Rr;function Rr(){var t=Tr.call(this)||this;return t._type=x._PdfAnnotationType.soundAnnotation,t}e(_,Fr=Ai),Object.defineProperty(_.prototype,"calloutLines",{get:function(){return void 0===this._calloutLines&&(this._calloutLines=this._getCalloutLinePoints()),this._calloutLines},set:function(t){this._isLoaded||(this._calloutLines=t);var e=!1;if(this._isLoaded&&2<=t.length)if(this._calloutLines.length===t.length){for(var i=0;i<t.length;i++)for(var r=t[Number.parseInt(i.toString(),10)],n=0;n<r.length;n++)if(t[Number.parseInt(i.toString(),10)][Number.parseInt(n.toString(),10)]!==this._calloutLines[Number.parseInt(i.toString(),10)][Number.parseInt(n.toString(),10)]){e=!0;break}}else e=!0;if(e){for(var s=this._page.size[1],a=[],i=0;i<t.length&&i<t.length;i++)a.push(t[Number.parseInt(i.toString(),10)][0]+this._cropBoxValueX),a.push(s+this._cropBoxValueY-t[Number.parseInt(i.toString(),10)][1]);this._calloutLines=t,this._dictionary.update("CL",a)}},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"lineEndingStyle",{get:function(){return this._isLoaded?this._lineEndingStyle=this._obtainLineEndingStyle():void 0===this._lineEndingStyle&&(this._lineEndingStyle=x.PdfLineEndingStyle.none),this._lineEndingStyle},set:function(t){void 0!==t&&this._dictionary.update("LE",L.get(Ns(t))),this._lineEndingStyle=t},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"textMarkUpColor",{get:function(){if(void 0===this._textMarkUpColor){var t,e=void 0;if(this._dictionary.has("TextColor"))return this._textMarkUpColor=Is(this._dictionary.getArray("TextColor")),this._textMarkUpColor;if(this._dictionary.has("DS"))for(var i=this._dictionary.get("DS").split(";"),r=0;r<i.length;r++)if(-1!==i[Number.parseInt(r.toString(),10)].indexOf("color"))return(e=i[Number.parseInt(r.toString(),10)].split(":")[1]).startsWith("#")&&(e=e.substring(1)),this._textMarkUpColor=ks(e),this._textMarkUpColor;!this._textMarkUpColor&&this._dictionary.has("RC")&&(t=[],0<this._parsedXMLData.length)&&this._parsedXMLData[3]&&(t=this._parsedXMLData[3]._color,this._textMarkUpColor=t)}return this._textMarkUpColor},set:function(t){void 0!==t&&3===t.length&&(this._textMarkUpColor=t,this._updateStyle(this.font,t,this.textAlignment)),this._isContentUpdated=!0},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"textAlignment",{get:function(){var t;return this._dictionary.has("Q")?this._textAlignment=this._dictionary.get("Q"):this._dictionary.has("RC")&&(t=void 0,0<this._parsedXMLData.length)&&this._parsedXMLData[1]&&(t=this._parsedXMLData[1],this._textAlignment=t),this._textAlignment},set:function(t){this._textAlignment!==t&&this._dictionary.update("Q",t),this._textAlignment=t,this._isContentUpdated=!0},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"font",{get:function(){return!this._font&&(this._font=this._obtainFont(),null===this._font||void 0===this._font||!this._isLoaded&&1===this._font.size)&&(this._font=this._markUpFont),this._font},set:function(t){this._font=t,this._isContentUpdated=!0},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"borderColor",{get:function(){return void 0===this._borderColor&&this._dictionary.has("DA")&&(this._borderColor=this._obtainColor()),this._borderColor},set:function(t){void 0!==t&&3===t.length&&(this._borderColor=t,this._dictionary.update("DA",this._getBorderColorString(this.borderColor)))},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"annotationIntent",{get:function(){return this._dictionary.has("IT")?this._annotationIntent=aa(this._dictionary.get("IT").name):this._annotationIntent=x.PdfAnnotationIntent.none,this._annotationIntent},set:function(t){void 0!==t&&((this._annotationIntent=t)===x.PdfAnnotationIntent.none?this._dictionary.update("Subj","Text Box"):this._dictionary.update("IT",L.get(this._obtainAnnotationIntent(this._annotationIntent))))},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"_mkDictionary",{get:function(){var t;return t=this._dictionary.has("MK")?this._dictionary.get("MK"):t},enumerable:!0,configurable:!0}),_._load=function(t,e){var i=new _;return i._isLoaded=!0,i._initialize(t,e),e.has("RC")&&(i._parsedXMLData=i._parseMarkupLanguageData(e.get("RC"))),i},_.prototype._setPaddings=function(t){this._paddings=t},_.prototype._initialize=function(t,e){Fr.prototype._initialize.call(this,t,e)},_.prototype._postProcess=function(t){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");this._dictionary.has("BS")?e=this.border.width:((i=new D(this._crossReference)).set("Type",L.get("Border")),this._dictionary.set("BS",i)),void 0===e&&(e=1),this._dictionary.has("C")||(this._isTransparentColor=!0);var e,i=this._getCropOrMediaBox();i&&3<i.length&&"number"==typeof i[0]&&"number"==typeof i[1]&&(0!==i[0]||0!==i[1])&&(this._cropBoxValueX=i[0],this._cropBoxValueY=i[1]),(t||this._setAppearance)&&(this._appearanceTemplate=this._createAppearance()),t||(this._dictionary.update("Rect",Ca(this)),this._saveFreeTextDictionary())},_.prototype._doPostProcess=function(t){var e,i,r;void 0===t&&(t=!1),this._isLoaded?((this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createAppearance()),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"))&&((r=e.getRaw("N"))&&(i.reference=r),this._appearanceTemplate=new N(i,this._crossReference))):(this._postProcess(t),!this._appearanceTemplate&&t&&(this._dictionary.has("AP")?(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"))&&((r=e.getRaw("N"))&&(i.reference=r),this._appearanceTemplate=new N(i,this._crossReference)):this._appearanceTemplate=this._createAppearance())),void 0!==this.flattenPopups&&this.flattenPopups&&(this._isLoaded?this._flattenLoadedPopUp():this._flattenPopUp()),t&&this._appearanceTemplate?(e=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary),this._appearanceTemplate._content.dictionary.has("Matrix")||this._isLoaded||(i=this._appearanceTemplate._content.dictionary.getArray("BBox"))&&this._appearanceTemplate._content.dictionary.update("Matrix",[1,0,0,1,-i[0],-i[1]]),(e&&void 0!==this._page.rotation&&this._page.rotation!==x.PdfRotationAngle.angle0||this._appearanceTemplate&&!this._dictionary.has("AP")||this._dictionary.has("AP")&&this._isValidTemplateMatrix(this._appearanceTemplate._content.dictionary,this.bounds,this._appearanceTemplate))&&this._flattenAnnotationTemplate(this._appearanceTemplate,e)):t&&this._page.annotations.remove(this),this._dictionary.has("RC")&&this._isContentUpdated&&this._updateStyle(this.font,this._textMarkUpColor,this.textAlignment),!t&&this._setAppearance&&(i=void 0,this._dictionary.has("AP")?i=this._dictionary.get("AP"):(e=this._crossReference._getNextReference(),i=new D(this._crossReference),this._crossReference._cacheMap.set(e,i),this._dictionary.update("AP",e)),R(i,this._crossReference,"N"),r=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(r,this._appearanceTemplate._content),i.update("N",r))},_.prototype._isValidTemplateMatrix=function(t,e,i){var r,n,s=!0;return t&&t.has("Matrix")&&(r=t.getArray("BBox"),t=t.getArray("Matrix"))&&r&&3<t.length&&2<r.length&&void 0!==t[0]&&void 0!==t[1]&&void 0!==t[2]&&void 0!==t[3]&&1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&void 0!==r[0]&&void 0!==r[1]&&void 0!==r[2]&&void 0!==r[3]&&(Math.round(r[0])!==Math.round(-t[4])&&Math.round(r[1])!==Math.round(-t[5])||0===r[0]&&0===Math.round(-t[4]))&&(n=(t=this._page.graphics).save(),void 0!==this.opacity&&this._opacity<1&&t.setTransparency(this._opacity),e.x-=r[0],e.y+=r[1],t.drawTemplate(i,e),t.restore(n),this._page.annotations.remove(this),s=!1),s},_.prototype._createAppearance=function(){for(var t=this.border.width/2,e=this._obtainAppearanceBounds(),i=this.rotate,r=(0!==i&&90!==i&&180!==i&&270!==i||(this._isAllRotation=!1),(i=0<i&&this._isAllRotation?new N([0,0,e[2],e[3]],this._crossReference):new N(e,this._crossReference))._content.dictionary.getArray("BBox")),n=this._getRotationAngle(),n=(r&&null!=n&&i._content.dictionary.set("Matrix",[1,0,0,1,-r[0],-r[1]]),new _n),r=this._obtainText(),s=(i._writeTransformation=!1,i.graphics),a=this._obtainTextAlignment(),o=this._obtainColor(),o=new T(o,this.border.width),e=(0<this.border.width&&(n.borderPen=o),this._obtainStyle(o,e,t,n)),t=(this.color&&(n.foreBrush=new I(this._color)),this.textMarkUpColor&&(n.backBrush=new I(this._textMarkUpColor)),n.borderWidth=this.border.width,this.calloutLines&&2<=this._calloutLines.length?(this._drawCallOuts(s,o),this._isLoaded&&void 0===this._lineEndingStyle&&(this._lineEndingStyle=this.lineEndingStyle),this._lineEndingStyle!==x.PdfLineEndingStyle.none&&(t=this._obtainLinePoints(),_=this._getAngle(t),t=this._getAxisValue([t[2],t[3]],90,0),this._drawLineEndStyle(t,s,_,o,n.foreBrush,this.lineEndingStyle,this.border.width,!1)),(e=this._dictionary.has("RD")?[e[0],-e[1],e[2],-e[3]]:[this.bounds.x,-(this._page.size[1]-(this.bounds.y+this.bounds.height)),this.bounds.width,-this.bounds.height])[0]=e[0]+this._cropBoxValueX,e[1]=e[1]-this._cropBoxValueY,this._calculateRectangle(e)):e=[e[0],-e[1],e[2],-e[3]],n.bounds=e,this._obtainAppearanceBounds()),h=[e[0]-t[0],-e[1]-t[1],e[2]-t[2],-e[1]-t[1]-e[3]-t[3]],c=0;c<h.length;c++)h[Number.parseInt(c.toString(),10)]<0&&(h[Number.parseInt(c.toString(),10)]=-h[Number.parseInt(c.toString(),10)]);this._dictionary.update("RD",h),this.opacity&&this._opacity<1&&(s.save(),s.setTransparency(this._opacity)),this.rotationAngle&&this._rotate!==x.PdfRotationAngle.angle0&&s.save(),this._drawFreeTextRectangle(s,n,e,a),r&&this._drawFreeMarkUpText(s,n,e,r,a),this.opacity&&this._opacity<1&&s.restore(),this.rotationAngle&&this._rotate!==x.PdfRotationAngle.angle0&&s.restore();var _=this._obtainAppearanceBounds();return this.flatten&&(this._bounds={x:_[0],y:this._page.size[1]-(_[1]+_[3]),width:_[2],height:_[3]}),this._dictionary.set("Rect",[_[0],_[1],_[0]+_[2],_[1]+_[3]]),i},_.prototype._calculateRectangle=function(t){for(var e=this._obtainAppearanceBounds(),i=[t[0]-e[0],-t[1]-e[1],t[2]-e[2],-t[1]-e[1]-t[3]-e[3]],r=0;r<4;r++)i[Number.parseInt(r.toString(),10)]<0&&(i[Number.parseInt(r.toString(),10)]=-i[Number.parseInt(r.toString(),10)]);this._dictionary.set("RD",i)},_.prototype._obtainAnnotationIntent=function(t){switch(t){case x.PdfAnnotationIntent.freeTextCallout:this._intentString="FreeTextCallout";break;case x.PdfAnnotationIntent.freeTextTypeWriter:this._intentString="FreeTextTypeWriter"}return this._intentString},_.prototype._obtainFont=function(){var t,e=this._obtainFontDetails();return!e.size&&this._dictionary.has("RC")&&(t=void 0,(t=0<this._parsedXMLData.length&&this._parsedXMLData[0]?this._parsedXMLData[0]:t)instanceof m||t instanceof Jt)&&(t=t,e.size=t.size,e.style=t.style,e.name=t._fontFamily.toString()),Aa(e.name,e.size,e.style,this)},_.prototype._updateStyle=function(t,e,i){var r,n,s="font:"+t._metrics._name+" "+t.size+"pt;style:"+oa(t.style)+";color:"+this._colorToHex(e),s=(this._dictionary.update("DS",s),'<?xml version="1.0"?><body xmlns="http://www.w3.org/1999/xhtml" style="font:'+t._metrics._name+" "+t.size+"pt;font-weight:"+(t.isBold?"bold":"normal")+";color:"+this._colorToHex(e)+'"><p dir="ltr">');if(null!=i){switch(i){case x.PdfTextAlignment.left:n="left";break;case x.PdfTextAlignment.center:n="center";break;case x.PdfTextAlignment.right:n="right";break;case x.PdfTextAlignment.justify:n="justify"}n&&(r="text-align:"+n+";")}var e="",i="font-style:italic",a="font-style:bold";t.isUnderline?(e=t.isStrikeout?"text-decoration:word line-through":"text-decoration:word",t.isItalic?e+=";"+i:t.isBold&&(e+=";"+a)):t.isStrikeout?(e="text-decoration:line-through",t.isItalic?e+=";"+i:t.isBold&&(e+=";"+a)):t.isItalic?e+=i:t.isBold&&(e+=a),i=""!==e?'<span style = "'+r+e+'">'+(this.text?this._getXmlFormattedString(this.text):"")+"</span>":'<span style = "'+r+'">'+(this.text?this._getXmlFormattedString(this.text):"")+"</span>",this._dictionary.update("RC",s+i+"</p></body>")},_.prototype._drawFreeMarkUpText=function(t,e,i,r,n){var s,a,o=!1,h=this.rotate,c=(this.rotationAngle!==x.PdfRotationAngle.angle90||this._isAllRotation?this.rotationAngle!==x.PdfRotationAngle.angle180||this._isAllRotation?this.rotationAngle!==x.PdfRotationAngle.angle270||this._isAllRotation?0!==h||this._isAllRotation||(i=[i[0],i[1]+i[3],i[2],i[3]]):i=[i[1]+i[3],-(i[0]+i[2]),-i[3],i[2]]:i=[-(i[2]+i[0]),-i[1],i[2],-i[3]]:i=[-i[1],i[0],-i[3],i[2]],void 0!==this._font&&null!==this._font&&(this._isLoaded||1!==this._font.size)||(this._font=this._markUpFont),0<h&&this._isAllRotation&&(o=!0,c=this.bounds,_=new k(x.PdfTextAlignment.center,x.PdfVerticalAlignment.middle),_=this._font.measureString(r,[0,0],_,0,0),0<h&&h<=91?t.translateTransform(_[1],-c.height):91<h&&h<=181?t.translateTransform(c.width-_[1],-(c.height-_[1])):181<h&&h<=271?t.translateTransform(c.width-_[1],-_[1]):271<h&&h<360&&t.translateTransform(_[1],-_[1]),t.rotateTransform(h),e.bounds=[0,0,e.bounds[2],e.bounds[3]]),[i[0],i[1],i[2],i[3]]),_=(this._paddings&&!this._isLoaded?(_=this._paddings._left,h=this._paddings._top,s=this._paddings._right+this._paddings._left,a=this._paddings._top+this._paddings._bottom,i=0<e.borderWidth?[i[0]+(e.borderWidth+_),i[1]+(e.borderWidth+h),i[2]-(2*e.borderWidth+s),0<i[3]?i[3]-(2*e.borderWidth+a):-i[3]-(2*e.borderWidth+a)]:[i[0]+_,i[1]+h,i[2]-s,0<i[3]?i[3]-a:-i[3]-a]):0<e.borderWidth&&(i=[i[0]+1.5*e.borderWidth,i[1]+1.5*e.borderWidth,i[2]-3*e.borderWidth,0<i[3]?i[3]-3*e.borderWidth:-i[3]-3*e.borderWidth]),this._font._metrics._getHeight()>(0<i[3]?i[3]:-i[3])),h=this._font._metrics._getHeight()<=(0<c[3]?c[3]:-c[3]);this._drawFreeTextAnnotation(t,e,r,this._font,_&&h?c:i,!0,n,o)},_.prototype._drawFreeTextRectangle=function(t,e,i,r){if(this._dictionary.has("BE")){for(var n=0;n<i.length;n++)i[Number.parseInt(n.toString(),10)]<0&&(i[Number.parseInt(n.toString(),10)]=-i[Number.parseInt(n.toString(),10)]);this._drawAppearance(t,e,i),this.rotationAngle!==x.PdfRotationAngle.angle90||this._isAllRotation?this.rotationAngle!==x.PdfRotationAngle.angle180||this._isAllRotation?this.rotationAngle!==x.PdfRotationAngle.angle270||this._isAllRotation||t.rotateTransform(-270):t.rotateTransform(-180):t.rotateTransform(-90)}else this.rotationAngle!==x.PdfRotationAngle.angle90||this._isAllRotation?this.rotationAngle!==x.PdfRotationAngle.angle180||this._isAllRotation?this.rotationAngle!==x.PdfRotationAngle.angle270||this._isAllRotation||(t.rotateTransform(-270),e.bounds=[i[1]+i[3],-i[0],-i[3],-i[2]]):(t.rotateTransform(-180),e.bounds=[-(i[2]+i[0]),-(i[3]+i[1]),i[2],i[3]]):(t.rotateTransform(-90),e.bounds=[-i[1],i[2]+i[0],-i[3],-i[2]]),0<e.borderWidth&&!this._isAllRotation&&(i=e.bounds),this._drawFreeTextAnnotation(t,e,"",this._font,i,!1,r,!1)},_.prototype._drawAppearance=function(t,e,i){var r=new C;r.addRectangle(i[0],i[1],i[2],i[3]),this._dictionary.has("BE")&&(i=this._dictionary.get("BE"))&&i.has("I")&&(i=i.get("I"),this._drawCloudStyle(t,e.foreBrush,e.borderPen,1===i?4:9,.833,r._points,!0))},_.prototype._drawFreeTextAnnotation=function(t,e,i,r,n,s,a,o){s?((s=new k).lineAlignment=x.PdfVerticalAlignment.top,s.alignment=a,s.lineSpacing=0,o?t.drawString(i,r,e.bounds,null,e.backBrush,s):t.drawString(i,r,n,null,e.backBrush,s)):t.drawRectangle(n[0],n[1],n[2],n[3],e.borderPen,e.foreBrush)},_.prototype._getCalloutLinePoints=function(){if(this._dictionary.has("CL")){var t=this._dictionary.getArray("CL");if(t){this._calloutLines=[];for(var e=0;e<t.length;e+=2){var i=[t[Number.parseInt(e.toString(),10)],this._page.size[1]-t[e+1]];this._calloutLines.push(i)}}}return this._calloutLines},_.prototype._obtainAppearanceBounds=function(){var t=[0,0,0,0];if(this.calloutLines&&0<this._calloutLines.length){for(var e=new C,i=[],r=2===this._calloutLines.length?2:3,n=0;n<r;n++)i.push([0,0]);if(2<=this._calloutLines.length){this._obtainCallOutsNative();for(n=0;n<this._calloutLines.length&&n<3;n++)i[Number.parseInt(n.toString(),10)]=[this._calloutsClone[Number.parseInt(n.toString(),10)][0],this._calloutsClone[Number.parseInt(n.toString(),10)][1]]}0<i.length&&(this.lineEndingStyle!==x.PdfLineEndingStyle.none&&this._expandAppearance(i),e._addLines(i)),e.addRectangle(this.bounds.x+this._cropBoxValueX-2,this._page.size[1]+this._cropBoxValueY-(this.bounds.y+this.bounds.height)-2,this.bounds.width+4,this.bounds.height+4),t=e._getBounds()}else t=[this.bounds.x+this._cropBoxValueX,this._page.size[1]+this._cropBoxValueY-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];return t},_.prototype._obtainCallOutsNative=function(){if(this.calloutLines&&0<this._calloutLines.length){var t=this._page.size;this._calloutsClone=[];for(var e=0;e<this._calloutLines.length;e++)this._calloutsClone.push([this._calloutLines[Number.parseInt(e.toString(),10)][0]+this._cropBoxValueX,t[1]+this._cropBoxValueY-this._calloutLines[Number.parseInt(e.toString(),10)][1]])}},_.prototype._obtainLinePoints=function(){var t=this._page.size[1];return[this.calloutLines[1][0]+this._cropBoxValueX,t+this._cropBoxValueY-this.calloutLines[1][1],this.calloutLines[0][0]+this._cropBoxValueX,t+this._cropBoxValueY-this.calloutLines[0][1]]},_.prototype._obtainLineEndingStyle=function(){var t=x.PdfLineEndingStyle.square;return t=this._dictionary.has("LE")?Rs(this._dictionary.get("LE").name,t):t},_.prototype._obtainText=function(){var t,e="",i=this._dictionary.has("Contents");return i?((e=(t=this._dictionary.get("Contents"))?t:e)&&""!==e&&(this._text=e),e):this._dictionary.has("RC")&&!i&&null===e?this._rcText:e},_.prototype._obtainTextAlignment=function(){var t,e=x.PdfTextAlignment.left;if(this._dictionary.has("Q")?void 0!==(i=this._dictionary.get("Q"))&&(e=i,t=!0):this._dictionary.has("RC")&&0<this._parsedXMLData.length&&this._parsedXMLData[1]&&(e=this._parsedXMLData[1],t=!0),!t&&this._dictionary.has("DS"))for(var i,r=(i=this._dictionary.get("DS")).split(";"),n=0;n<r.length;n++)if(-1!==r[Number.parseInt(n.toString(),10)].indexOf("text-align"))switch(r[Number.parseInt(n.toString(),10)]){case"left":e=x.PdfTextAlignment.left;break;case"right":e=x.PdfTextAlignment.right;break;case"center":e=x.PdfTextAlignment.center;break;case"justify":e=x.PdfTextAlignment.justify}return e},_.prototype._obtainColor=function(){var t,e;return this._isLoaded?this._dictionary.has("DA")?(e=this._dictionary.get("DA"),Array.isArray(e)&&0<e.length?t=[e[0],e[1],e[2]]:"string"==typeof e&&(this._da=new yi(e),t=this._da.color)):this._dictionary.has("MK")?(e=this._mkDictionary)&&e.has("BC")&&(t=Is(e.getArray("BC"))):t=[0,0,0]:t=this._borderColor||[0,0,0],t},_.prototype._expandAppearance=function(t){var e=t[0][1],i=t[0][0];(e=this._isLoaded?e:this._page.size[1]-e)>this.bounds.y?this.lineEndingStyle!==x.PdfLineEndingStyle.openArrow&&(t[0][1]-=11*this.border.width):t[0][1]+=11*this.border.width,i<=this.bounds.x?t[0][0]-=11*this.border.width:t[0][0]+=11*this.border.width},_.prototype._drawCallOuts=function(t,e){for(var i=new C,r=[],n=2===this._calloutLines.length?2:3,s=0;s<n;s++)r.push([0,0]);if(2<=this._calloutLines.length){this._obtainCallOutsNative();for(s=0;s<this._calloutLines.length&&s<3;s++)r[Number.parseInt(s.toString(),10)]=[this._calloutsClone[Number.parseInt(s.toString(),10)][0],-this._calloutsClone[Number.parseInt(s.toString(),10)][1]]}0<r.length&&i._addLines(r),t.drawPath(i,e)},_.prototype._saveFreeTextDictionary=function(){if(void 0!==this.font&&null!==this.font&&(this._isLoaded||1!==this.font.size)||(this.font=this._markUpFont),"string"==typeof this.text&&null!==this.text&&this._dictionary.update("Contents",this.text),this._isLoaded&&(this._textAlignment=this.textAlignment),this._dictionary.update("Q",this._textAlignment),this.annotationIntent===x.PdfAnnotationIntent.none?this._dictionary.update("Subj","Text Box"):this._dictionary.update("IT",L.get(this._obtainAnnotationIntent(this._annotationIntent))),this._updateStyle(this.font,this.textMarkUpColor,this._textAlignment),this._dictionary.update("DA",this._getBorderColorString(this.borderColor?this._borderColor:[0,0,0])),this._calloutLines&&2<=this._calloutLines.length){for(var t=this._page.size[1],e=[],i=0;i<this._calloutLines.length&&i<3;i++)e.push(this._calloutLines[Number.parseInt(i.toString(),10)][0]+this._cropBoxValueX),e.push(t+this._cropBoxValueY-this._calloutLines[Number.parseInt(i.toString(),10)][1]);this._dictionary.update("CL",e)}var r;this._setAppearance&&(r=this._obtainAppearanceBounds(),this._dictionary.update("Rect",[r[0],r[1],r[0]+r[2],r[1]+r[3]]))},_.prototype._getXmlFormattedString=function(t){return t=(t=(t=t.replace("&","&amp;")).replace("<","&lt;")).replace(">","&gt;")},_.prototype._parseMarkupLanguageData=function(t){var e,i,r=this,n=x.PdfFontStyle.regular,s=[];return(this._dictionary.has("Contents")?this._dictionary.get("Contents"):"").split("").some(function(t){return r._isSymbol(t)})||null!=t&&(e=(t=(new DOMParser).parseFromString(t,"text/xml").documentElement)&&t.namespaceURI||"",t)&&0<(t=this._collectStyles(t)).size&&(t=this._extractStylesToInput(t),t=this._getFontDetails(t,this.font.size,this.textAlignment,n,null),n=(t=this._updateFontProperties(t,"",n,null)).fontName,i=t.fontStyle,t=t.brush,n=Aa(n,this.font._size,i,this),s=this._fontCollection(s,n,e,this._textAlignment,t)),this._parsedXMLData=s},_.prototype._collectStyles=function(t,e){if(void 0===e&&(e=new Map),t){var i=null;try{i=window.getComputedStyle(t)}catch(t){return e}e.set(t.tagName.toLowerCase(),i);for(var r=t.firstElementChild;r;)this._collectStyles(r,e),r=r.nextElementSibling}return e},_.prototype._extractStylesToInput=function(t){var n=[];return t.forEach(function(t){if(t&&0<t.length)for(var e=0;e<t.length;e++){var i,r=t.item(Number.parseInt(e.toString(),10));null!=r&&(i=t.getPropertyValue(r),n.push(r+": "+i))}}),n},_.prototype._isSymbol=function(t){var e=t.charCodeAt(0);return"_"!==t&&"+"!==t&&"-"!==t&&"*"!==t&&"="!==t&&(8352<=e&&e<=8399||8704<=e&&e<=8959||10752<=e&&e<=11007||8448<=e&&e<=8527||8960<=e&&e<=9215||11088===e)},_.prototype._updateFontProperties=function(t,i,r,n){var s=this;return t.forEach(function(t,e){switch(e){case"font-family":i=t;break;case"font-size":s.font._size=parseFloat(t);break;case"font-style":case"font-weight":case"text-decoration":r=s._obtainFontStyle(t,e);break;case"text-align":s._textAlignment=s._parseTextAlignment(t);break;case"color":n=t;break;case"xfa-spacerun":s._rcText=t}}),{fontName:i,fontStyle:r,brush:n}},_.prototype._obtainFontStyle=function(t,e){var i=parseFloat(t);switch(e){case"font-style":return 0===i?x.PdfFontStyle.regular:1===i?x.PdfFontStyle.bold:2===i?x.PdfFontStyle.italic:8===i?x.PdfFontStyle.strikeout:4===i?x.PdfFontStyle.underline:x.PdfFontStyle.regular;case"font-weight":return 1===i?x.PdfFontStyle.bold:x.PdfFontStyle.regular;case"text-decoration":return 8===i?x.PdfFontStyle.strikeout:4===i?x.PdfFontStyle.underline:x.PdfFontStyle.regular;default:return x.PdfFontStyle.regular}},_.prototype._parseTextAlignment=function(t){switch(parseFloat(t)){case 0:return x.PdfTextAlignment.left;case 1:return x.PdfTextAlignment.center;case 2:return x.PdfTextAlignment.right;case 3:return x.PdfTextAlignment.justify;default:return x.PdfTextAlignment.left}},_.prototype._getFontDetails=function(t,r,n,s,a){var o=this,h=new Map;return t.forEach(function(t){var t=t.split(":").map(function(t){return t.trim()}),e=t[0],i=t[1];if(e&&i)switch(e.toLowerCase()){case"font":o._parseFont(i,h);break;case"font-size":r=o._parseFontSize(i),h.set("font-size",r);break;case"font-weight":s=o._parseFontWeight(i,s),h.set("font-weight",s);break;case"font-family":h.set("font-family",o._parseFontFamily(i));break;case"color":a=new I(o._rgbStringToArray(i)),h.set("color",a);break;case"font-style":s=o._parseFontStyle(i,s),h.set("font-style",s);break;case"text-decoration":s=o._parseTextDecoration(i,s),h.set("text-decoration",s);break;case"text-align":n=o._parseTextAlign(i),h.set("text-align",n);break;case"xfa-spacerun":o._rcText=1<i.length&&i.includes("yes")?o._rcText+" ":o._rcText,h.set("xfa-spacerun",o._rcText)}}),h},_.prototype._parseFont=function(t,e){var t=t.split(" ").map(function(t){return t.trim()}),i="";t.forEach(function(t){t&&!t.endsWith("pt")?i+=t+" ":t.endsWith("pt")&&e.set("font-size",parseFloat(t.replace("pt","").replace(",",".").trim()))}),e.set("font-family",i.trim().replace(/['",]/g,""))},_.prototype._parseFontSize=function(t){return t.endsWith("pt")?parseFloat(t.replace("pt","").replace(",",".").trim()):0},_.prototype._parseFontWeight=function(t,e){return t.includes("bold")&&(e|=x.PdfFontStyle.bold),e},_.prototype._parseFontFamily=function(t){return t.replace(/^'+|'+$/g,"").trim()},_.prototype._parseFontStyle=function(t,e){return t.includes("normal")||t.includes("regular")?x.PdfFontStyle.regular:t.includes("underline")?x.PdfFontStyle.underline:t.includes("strikeout")?x.PdfFontStyle.strikeout:t.includes("italic")?x.PdfFontStyle.italic:t.includes("bold")?x.PdfFontStyle.bold:e},_.prototype._parseTextDecoration=function(t,e){return t.includes("word")?x.PdfFontStyle.underline:t.includes("line-through")?x.PdfFontStyle.strikeout:e},_.prototype._parseTextAlign=function(t){switch(t.trim().toLowerCase()){case"left":return x.PdfTextAlignment.left;case"right":return x.PdfTextAlignment.right;case"center":return x.PdfTextAlignment.center;case"justify":return x.PdfTextAlignment.justify;default:return x.PdfTextAlignment.left}},_.prototype._rgbStringToArray=function(t){t=t.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);if(t)return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)];throw new Error("Invalid RGB string format")},_.prototype._fontCollection=function(t,e,i,r,n){return t.concat([e,r,i,n])};var Fr,Lr=_;function _(t,e,i,r){var n=Fr.call(this)||this;return n._intentString="",n._markUpFont=new m(x.PdfFontFamily.helvetica,7,x.PdfFontStyle.regular),n._textAlignment=x.PdfTextAlignment.left,n._cropBoxValueX=0,n._cropBoxValueY=0,n._dictionary=new D,n._dictionary.update("Type",L.get("Annot")),n._dictionary.update("Subtype",L.get("FreeText")),void 0!==t&&void 0!==e&&void 0!==i&&void 0!==r&&(n.bounds={x:t,y:e,width:i,height:r}),n._isContentUpdated=!1,n._type=x._PdfAnnotationType.freeTextAnnotation,n._parsedXMLData=[],n}e(Or,Dr=vi),Object.defineProperty(Or.prototype,"repeatText",{get:function(){return void 0===this._repeat&&this._dictionary.has("Repeat")&&(this._repeat=this._dictionary.get("Repeat")),this._repeat},set:function(t){t!==this._repeat&&(this._repeat=t,this._dictionary)&&this._dictionary.update("Repeat",t)},enumerable:!0,configurable:!0}),Object.defineProperty(Or.prototype,"textAlignment",{get:function(){return this._dictionary.has("Q")&&(this._textAlignment=this._dictionary.get("Q")),this._textAlignment},set:function(t){this._textAlignment!==t&&this._dictionary.update("Q",t),this._textAlignment=t},enumerable:!0,configurable:!0}),Object.defineProperty(Or.prototype,"textColor",{get:function(){return void 0===this._textColor&&this._dictionary.has("C")&&(this._textColor=Is(this._dictionary.getArray("C"))),this._textColor},set:function(t){var e;void 0!==t&&3===t.length&&(e=this.textColor,this._isLoaded&&void 0!==e&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]||(this._textColor=t,this._dictionary.update("C",[Number.parseFloat((t[0]/255).toFixed(3)),Number.parseFloat((t[1]/255).toFixed(3)),Number.parseFloat((t[2]/255).toFixed(3))])))},enumerable:!0,configurable:!0}),Object.defineProperty(Or.prototype,"borderColor",{get:function(){return void 0===this._borderColor&&this._dictionary.has("OC")&&(this._borderColor=Is(this._dictionary.getArray("OC"))),this._borderColor},set:function(t){var e;void 0!==t&&3===t.length&&(e=this.borderColor,this._isLoaded&&void 0!==e&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]||(this._borderColor=t,this._dictionary.update("OC",[Number.parseFloat((t[0]/255).toFixed(3)),Number.parseFloat((t[1]/255).toFixed(3)),Number.parseFloat((t[2]/255).toFixed(3))])))},enumerable:!0,configurable:!0}),Object.defineProperty(Or.prototype,"overlayText",{get:function(){return void 0===this._overlayText&&this._dictionary.has("OverlayText")&&(this._overlayText=this._dictionary.get("OverlayText")),this._overlayText},set:function(t){"string"==typeof t&&(this._dictionary.update("OverlayText",t),this._overlayText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(Or.prototype,"font",{get:function(){return this._font},set:function(t){this._font=t},enumerable:!0,configurable:!0}),Or._load=function(t,e){var i=new Or;return i._isLoaded=!0,i._initialize(t,e),i},Or.prototype._initialize=function(t,e){Dr.prototype._initialize.call(this,t,e)},Or.prototype._postProcess=function(t){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var e,i;this._dictionary.has("BS")?e=this.border.width:((i=new D(this._crossReference)).set("Type",L.get("Border")),this._dictionary.set("BS",i)),void 0===e&&(e=1),this._setAppearance&&(this._appearanceTemplate=this._createRedactionAppearance(t)),this._dictionary.update("Rect",Ca(this))},Or.prototype._doPostProcess=function(t){var e,i;void 0===t&&(t=!1),this._isImported||(this._isLoaded?this._appearanceTemplate=this._createRedactionAppearance(t):(this._postProcess(t),this._appearanceTemplate||t&&(this._dictionary.has("AP")?(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"))&&((e=e.getRaw("N"))&&(i.reference=e),this._appearanceTemplate=new N(i,this._crossReference)):this._appearanceTemplate=this._createRedactionAppearance(t))),t&&this._appearanceTemplate?(e=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary),this._appearanceTemplate._content.dictionary.has("Matrix")||(i=this._appearanceTemplate._content.dictionary.getArray("BBox"))&&this._appearanceTemplate._content.dictionary.update("Matrix",[1,0,0,1,-i[0],-i[1]]),this._flattenAnnotationTemplate(this._appearanceTemplate,e)):t&&this._page.annotations.remove(this))},Or.prototype._createRedactionAppearance=function(t){var e,i,r=this._createNormalAppearance();return t?this._isLoaded&&null!==this._page&&this._page.annotations.remove(this):(t=this._createBorderAppearance(),this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e instanceof D&&(R(e,this._crossReference,"N"),R(e,this._crossReference,"R")),e=new D(this._crossReference),t._content.dictionary._updated=!0,i=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(i,t._content),t._content.reference=i,e.set("N",i),r._content.dictionary._updated=!0,t=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(t,r._content),r._content.reference=t,e.set("R",t),e._updated=!0,this._dictionary.set("AP",e)),r},Or.prototype._createBorderAppearance=function(){var t,e,i=[0,0,this.bounds.width,this.bounds.height],r=new N(i,this._crossReference),n=this.border.width/2,s=r.graphics,a=this.border.width,i=(0<this.border.width&&this.borderColor&&(t=new T(this.borderColor,a)),[i[0],i[1],i[2],i[3]]);return this.opacity<1?(e=s.save(),s.setTransparency(this.opacity),s.drawRectangle(i[0]+n,i[1]+n,i[2]-a,i[3]-a,t,null),s.restore(e)):s.drawRectangle(i[0]+n,i[1]+n,i[2]-a,i[3]-a,t,null),r},Or.prototype._createNormalAppearance=function(){var t,e,i,r=[0,0,this.bounds.width,this.bounds.height],n=new N(r,this._crossReference),s=(Ks(n,this._getRotationAngle()),this.border.width/2),a=n.graphics,o=new _n,o=(this.textColor&&0<this.border.width&&(t=new T(this.textColor,this.border.width)),this.innerColor&&(e=new I(this.innerColor)),i=this.textColor?new I(this.textColor):new I([128,128,128]),o.backBrush=e,o.borderWidth=s,this.border.width),r=[r[0],r[1],r[2],r[3]];if(this.opacity<1?(p=a.save(),a.setTransparency(this.opacity),a.drawRectangle(r[0]+s,r[1]+s,r[2]-o,r[3]-o,t,e),a.restore(p)):a.drawRectangle(r[0]+s,r[1]+s,r[2]-o,r[3]-o,t,e),a.restore(),this.overlayText&&F(this.overlayText)&&""!==this._overlayText){void 0!==this.font&&null!==this.font||(this.font=this._lineCaptionFont);var h,c,_=0,d=0,p=0,l=void 0,s=(this._isLoaded&&(this._textAlignment=this.textAlignment),new k(this._textAlignment,x.PdfVerticalAlignment.top)),u=this.font.measureString(this.overlayText,[0,0],s,0,0);if(this._isLoaded&&void 0===this._repeat&&(this._repeat=this.repeatText),this._repeat){u[0]<=0&&(u[0]=1),h=this.bounds.width/u[0],c=Math.floor(this.bounds.height/this.font._size),p=Math.abs(this.bounds.width-Math.floor(h)*u[0]),this._textAlignment===x.PdfTextAlignment.center&&(d=p/2),this._textAlignment===x.PdfTextAlignment.right&&(d=p);for(var f=1;f<h;f++){for(var g=0;g<c;g++)a.drawString(this.overlayText,this.font,l=[d,_,0,0],null,i,null),_+=this.font._size;d+=u[0],_=0}}else p=Math.abs(this.bounds.width-u[0]),this._textAlignment===x.PdfTextAlignment.center&&(d=p/2),l=[d=this._textAlignment===x.PdfTextAlignment.right?p:d,0,this.bounds.width-this.border.width,this.bounds.height-this.border.width],a.drawString(this.overlayText,this.font,l,null,i,s)}return n};var Dr,Br=Or;function Or(t,e,i,r){var n=Dr.call(this)||this;return n._textAlignment=x.PdfTextAlignment.left,n._dictionary=new D,n._dictionary.update("Type",L.get("Annot")),n._dictionary.update("Subtype",L.get("Redact")),void 0!==t&&void 0!==e&&void 0!==i&&void 0!==r&&(n.bounds={x:t,y:e,width:i,height:r}),n._type=x._PdfAnnotationType.redactionAnnotation,n}e(jr,Mr=vi),jr._load=function(t,e){var i=new jr;return i._isLoaded=!0,i._initialize(t,e),i},jr.prototype._initialize=function(t,e){Mr.prototype._initialize.call(this,t,e)},jr.prototype._doPostProcess=function(t){var e;void 0===t&&(t=!1),void 0!==this.flattenPopups&&this.flattenPopups&&this._flattenPopUp(),t&&(t=void 0,this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")&&(t=e.get("N"),e=e.getRaw("N"))&&t&&(t.reference=e),t?(e=new N(t,this._crossReference),t=this._validateTemplateMatrix(e._content.dictionary),this._flattenAnnotationTemplate(e,t)):this._removeAnnotation(this._page,this))};var Mr,Er=jr;function jr(){var t=Mr.call(this)||this;return t._type=x._PdfAnnotationType.richMediaAnnotation,t}e(Ur,Vr=vi),Ur._load=function(t,e){var i=new Ur;return i._isLoaded=!0,i._dictionary=t,i._crossReference=e,i},Object.defineProperty(Ur.prototype,"page",{get:function(){return this._getPage()},enumerable:!0,configurable:!0}),Object.defineProperty(Ur.prototype,"color",{get:function(){return void 0===this._color&&this._defaultAppearance&&(this._color=this._da.color),this._color},set:function(t){void 0!==this.color&&this._color===t||(this._color=t);var e=!1;this._defaultAppearance||(this._da=new yi(""),e=!0),!e&&this._da.color===t||(this._da.color=t,this._dictionary.update("DA",this._da.toString()))},enumerable:!0,configurable:!0}),Object.defineProperty(Ur.prototype,"backColor",{get:function(){return this._parseBackColor()},set:function(t){this._updateBackColor(t)},enumerable:!0,configurable:!0}),Object.defineProperty(Ur.prototype,"_hasBackColor",{get:function(){var t;return this._isLoaded?(t=this._mkDictionary)&&t.has("BG"):!this._isTransparentBackColor},enumerable:!0,configurable:!0}),Object.defineProperty(Ur.prototype,"_hasBorderColor",{get:function(){var t;return this._isLoaded?(t=this._mkDictionary)&&t.has("BC"):!this._isTransparentBorderColor},enumerable:!0,configurable:!0}),Object.defineProperty(Ur.prototype,"borderColor",{get:function(){return this._parseBorderColor()},set:function(t){this._updateBorderColor(t)},enumerable:!0,configurable:!0}),Object.defineProperty(Ur.prototype,"rotate",{get:function(){return void 0===this._rotationAngle&&(this._mkDictionary&&this._mkDictionary.has("R")?this._rotationAngle=this._mkDictionary.get("R"):this._dictionary.has("R")&&(this._rotationAngle=this._dictionary.get("R"))),this._rotationAngle},set:function(t){void 0!==this.rotate&&this._rotationAngle===t||(void 0===this._mkDictionary&&this._dictionary.update("MK",new D(this._crossReference)),this._mkDictionary.update("R",t),this._rotationAngle=t,this._dictionary._updated=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Ur.prototype,"highlightMode",{get:function(){var t;return void 0===this._highlightMode&&this._dictionary.has("H")&&(t=this._dictionary.get("H"),this._highlightMode=Fs(t.name)),this._highlightMode},set:function(t){this._highlightMode!==t&&this._dictionary.update("H",Ls(t))},enumerable:!0,configurable:!0}),Object.defineProperty(Ur.prototype,"bounds",{get:function(){return this._isLoaded&&void 0===this._bounds&&(this._bounds=vs(this._dictionary,this._getPage())),void 0!==this._bounds&&null!==this._bounds||(this._bounds={x:0,y:0,width:0,height:0}),this._bounds},set:function(t){if(0===t.x&&0===t.y&&0===t.width&&0===t.height)throw new Error("Cannot set empty bounds");this._bounds=t,this._page&&this._page._isNew&&this._page._pageSettings?this._dictionary.update("Rect",Ca(this)):this._dictionary.update("Rect",xs([t.x,t.y,t.width,t.height],this._getPage()))},enumerable:!0,configurable:!0}),Object.defineProperty(Ur.prototype,"textAlignment",{get:function(){return void 0===this._textAlignment&&this._dictionary.has("Q")&&(this._textAlignment=this._dictionary.get("Q")),this._textAlignment},set:function(t){void 0!==this._textAlignment&&this._textAlignment===t||this._dictionary.update("Q",t)},enumerable:!0,configurable:!0}),Object.defineProperty(Ur.prototype,"visibility",{get:function(){if(!this._isLoaded)return this._visibility;var t=x.PdfFormFieldVisibility.visible;x.PdfAnnotationFlag.default;if(this._hasFlags){var e,i=3;switch(((e=this.flags)&x.PdfAnnotationFlag.hidden)===x.PdfAnnotationFlag.hidden&&(i=0),(e&x.PdfAnnotationFlag.noView)===x.PdfAnnotationFlag.noView&&(i=1),(e&x.PdfAnnotationFlag.print)!==x.PdfAnnotationFlag.print&&(i&=2),i){case 0:t=x.PdfFormFieldVisibility.hidden;break;case 1:t=x.PdfFormFieldVisibility.hiddenPrintable;break;case 2:t=x.PdfFormFieldVisibility.visibleNotPrintable;break;case 3:t=x.PdfFormFieldVisibility.visible}}else t=x.PdfFormFieldVisibility.visibleNotPrintable;return t},set:function(t){if(this._isLoaded)pa(this._dictionary,t),this._dictionary._updated=!0;else{switch(t){case x.PdfFormFieldVisibility.hidden:this.flags=x.PdfAnnotationFlag.hidden;break;case x.PdfFormFieldVisibility.hiddenPrintable:this.flags=x.PdfAnnotationFlag.noView|x.PdfAnnotationFlag.print;break;case x.PdfFormFieldVisibility.visible:this.flags=x.PdfAnnotationFlag.print;break;case x.PdfFormFieldVisibility.visibleNotPrintable:this.flags=x.PdfAnnotationFlag.default}this._visibility=t}},enumerable:!0,configurable:!0}),Object.defineProperty(Ur.prototype,"font",{get:function(){var t,e,i,r;return this._pdfFont||(t=void 0,this._crossReference&&(i=this._crossReference._document.form,e=this._obtainFontDetails(),i)&&i._dictionary.has("DR")&&(i=i._dictionary.get("DR")).has("Font")&&(i=i.get("Font")).has(e.name)&&(i=i.get(e.name))&&e.name&&i.has("BaseFont")&&(i=i.get("BaseFont"),r=x.PdfFontStyle.regular,i)&&(t=i.name,r=Pa(i.name),t.includes("-")&&(t=t.substring(0,t.indexOf("-"))),this._pdfFont=Aa(t,e.size,r,this))),null!==this._pdfFont&&void 0!==this._pdfFont&&(this._isLoaded||1!==this._pdfFont.size)||(this._pdfFont=this._circleCaptionFont),this._pdfFont},set:function(t){t&&t instanceof Gt&&(this._pdfFont=t,this._initializeFont(t))},enumerable:!0,configurable:!0}),Object.defineProperty(Ur.prototype,"_defaultAppearance",{get:function(){var t;return void 0===this._da&&this._dictionary.has("DA")&&(t=this._dictionary.get("DA"))&&""!==t&&(this._da=new yi(t)),this._da},enumerable:!0,configurable:!0}),Object.defineProperty(Ur.prototype,"_mkDictionary",{get:function(){var t;return t=this._dictionary.has("MK")?this._dictionary.get("MK"):t},enumerable:!0,configurable:!0}),Ur.prototype._create=function(t,e,i){return this._page=t,this._crossReference=t._crossReference,this._ref=this._crossReference._getNextReference(),this._dictionary=new D(this._crossReference),this._crossReference._cacheMap.set(this._ref,this._dictionary),(this._dictionary._currentObj=this)._dictionary.objId=this._ref.toString(),this._dictionary.update("Type",L.get("Annot")),this._dictionary.update("Subtype",L.get("Widget")),this.flags|=x.PdfAnnotationFlag.print,this._dictionary.update("P",t._ref),t._addWidget(this._ref),this.border=new an,this.bounds=e,i&&(this._field=i,this._dictionary.update("Parent",this._field._ref)),this._dictionary},Ur.prototype._doPostProcess=function(t,e){var i,r,n,s;void 0===e&&(e=!1),((t=void 0===t?!1:t)||e)&&(i=void 0,e||t&&this._dictionary.has("AP"),!i&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"),s=e.getRaw("N"))&&i&&(i.reference=s),i&&(e=void 0,t?(t=new N(i,this._crossReference),(n=this._getPage())&&((r=n.graphics).save(),n.rotation===x.PdfRotationAngle.angle90?(r.translateTransform(r._size[0],r._size[1]),r.rotateTransform(90)):n.rotation===x.PdfRotationAngle.angle180?(r.translateTransform(r._size[0],r._size[1]),r.rotateTransform(-180)):n.rotation===x.PdfRotationAngle.angle270&&(r.translateTransform(r._size[0],r._size[1]),r.rotateTransform(270)),e={x:this.bounds.x,y:this.bounds.y,width:t._size[0],height:t._size[1]},r.drawTemplate(t,e),r.restore())):(n=void 0,this._dictionary.has("AP")?n=this._dictionary.get("AP"):(t=this._crossReference._getNextReference(),n=new D(this._crossReference),this._crossReference._cacheMap.set(t,n),this._dictionary.update("AP",t)),R(n,this._crossReference,"N"),s=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(s,i),n.update("N",s))),this._dictionary._updated=!1)},Ur.prototype._initializeFont=function(t){var e,i,r,n,s,a;this._pdfFont=t,this._crossReference&&(r=i=void 0,n=!1,(i=(e=this._crossReference._document)?e.form._dictionary.has("DR")?e.form._dictionary.get("DR"):new D(this._crossReference):i).has("Font")&&((s=i.getRaw("Font"))&&s instanceof A?(n=!0,r=this._crossReference._fetch(s)):s instanceof D&&(r=s)),r||(r=new D(this._crossReference),i.update("Font",r)),s=L.get(Es()),a=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(a,this._pdfFont._dictionary),t instanceof $t?this._pdfFont._pdfFontInternals&&this._crossReference._cacheMap.set(a,this._pdfFont._pdfFontInternals):this._pdfFont._dictionary&&this._crossReference._cacheMap.set(a,this._pdfFont._dictionary),r.update(s.name,a),i._updated=!0,e.form._dictionary.update("DR",i),e.form._dictionary._updated=!0,this._fontName=s.name,(t=new yi).fontName=this._fontName,t.fontSize=this._pdfFont._size,t.color=this.color||[0,0,0],this._dictionary.update("DA",t.toString()),n&&(i._updated=!0),this._isFont=!0)},Ur.prototype._getPage=function(){if(!this._page){this._crossReference&&(t=this._crossReference._document);var t,e=void 0;if(this._dictionary.has("P")){var i=this._dictionary.getRaw("P");if(i&&t)for(var r=0;r<t.pageCount;r++){var n=t.getPage(r);if(n&&n._ref===i){e=n;break}}}!e&&t&&this._ref&&(e=zs(t,this._ref)),this._page=e}return this._page},Ur.prototype._beginSave=function(){var t;this._isLoaded||this._page._isNew||(t=this._bounds,this._dictionary.update("Rect",xs([t.x,t.y,t.width,t.height],this._page)))},Ur.prototype._parseBackColor=function(){var t;return(this._isLoaded&&this._hasBackColor||!this._isLoaded&&!this._isTransparentBackColor)&&(void 0===this._backColor&&(t=this._mkDictionary)&&t.has("BG")&&(t=t.getArray("BG"))&&(this._backColor=Is(t)),void 0!==this._backColor&&null!==this._backColor||(this._backColor=[255,255,255]),t=this._backColor),t},Ur.prototype._parseBorderColor=function(){var t;return(this._isLoaded&&this._hasBorderColor||!this._isLoaded&&!this._isTransparentBorderColor)&&(void 0===this._borderColor&&(t=this._mkDictionary)&&t.has("BC")&&(t=t.getArray("BC"))&&(this._borderColor=Is(t)),void 0!==this._borderColor&&null!==this._borderColor||(this._borderColor=[0,0,0]),t=this._borderColor),t},Ur.prototype._updateBackColor=function(t,e){void 0===e&&(e=!1);var i,r=!1;4===t.length&&255!==t[3]?(this._isTransparentBackColor=!0,this._dictionary.has("BG")&&(delete this._dictionary._map.BG,r=!0),(i=this._mkDictionary)&&i.has("BG")&&(delete i._map.BG,r=this._dictionary._updated=!0)):(this._isTransparentBackColor=!1,void 0!==this.backColor&&this._backColor===t||(void 0===this._mkDictionary&&this._dictionary.update("MK",new D(this._crossReference)),this._mkDictionary.update("BG",[Number.parseFloat((t[0]/255).toFixed(3)),Number.parseFloat((t[1]/255).toFixed(3)),Number.parseFloat((t[2]/255).toFixed(3))]),this._backColor=[t[0],t[1],t[2]],r=this._dictionary._updated=!0)),e&&r&&this._field&&(this._field._setAppearance=!0)},Ur.prototype._updateBorderColor=function(t){var e;4===t.length&&255!==t[3]?(this._isTransparentBorderColor=!0,this._dictionary.has("BC")&&delete this._dictionary._map.BC,(e=this._mkDictionary)&&e.has("BC")&&(delete e._map.BC,this._dictionary.has("BS")&&(e=this._dictionary.get("BS"))&&e.has("W")&&delete e._map.W,this._dictionary._updated=!0)):(this._isTransparentBorderColor=!1,void 0!==this.borderColor&&this.borderColor===t||(void 0===this._mkDictionary&&this._dictionary.update("MK",new D(this._crossReference)),this._mkDictionary.update("BC",[Number.parseFloat((t[0]/255).toFixed(3)),Number.parseFloat((t[1]/255).toFixed(3)),Number.parseFloat((t[2]/255).toFixed(3))]),this._borderColor=[t[0],t[1],t[2]],this._dictionary._updated=!0))};var Vr,zr=Ur;function Ur(){var t=Vr.call(this)||this;return t._isAutoResize=!1,t._visibility=x.PdfFormFieldVisibility.visible,t._isFont=!1,t._isTransparentBackColor=!1,t._isTransparentBorderColor=!1,t._isWidget=!0,t._type=x._PdfAnnotationType.widgetAnnotation,t}e(Gr,Hr=zr),Gr._load=function(t,e,i){var r=new Gr;return r._isLoaded=!0,r._dictionary=t,r._crossReference=e,r._field=i,r},Object.defineProperty(Gr.prototype,"checked",{get:function(){return Us(this._dictionary)},set:function(t){this.checked!==t&&(this._field&&(this._setCheckedStatus(t),this._field._setAppearance=!0),this._dictionary.update("AS",L.get(t?"Yes":"Off")))},enumerable:!0,configurable:!0}),Object.defineProperty(Gr.prototype,"style",{get:function(){var t;return this._isLoaded&&((t=this._mkDictionary)&&t.has("CA")?this._style=qs(t.get("CA")):this._style=x.PdfCheckBoxStyle.check),this._style},set:function(t){var e;this.style!==t&&(this._style=t,(e=this._mkDictionary)||(e=new D(this._crossReference),this._dictionary.update("MK",e)),e.update("CA",Xs(t)))},enumerable:!0,configurable:!0}),Gr.prototype._setCheckedStatus=function(t){var e=t,i=this._getItemValue(this._dictionary);this._unCheckOthers(this,i,t),e?(this._field._dictionary.update("V",i=i||"Yes"),this._dictionary.update("AS",L.get(i)),this._dictionary.update("V",L.get(i))):this._field._dictionary&&(this._field._dictionary.has("V")&&(t=this._field._dictionary.get("V"))&&t.name===i&&delete this._field._dictionary._map.V,this._field._dictionary.update("AS",L.get("Off")))},Gr.prototype._unCheckOthers=function(t,e,i){if(!this._field._isUpdating){this._field._isUpdating=!0;for(var r=this._field.itemsCount,n=0;n<r;++n){var s=this._field.itemAt(n);s&&(s!==t?s.checked=this._getItemValue(s._dictionary)===e&&i:s.checked||(s.checked=!0))}}},Gr.prototype._getItemValue=function(t){var e="";if(""===(e=t&&t.has("AS")&&(i=t.get("AS"))&&"Off"!==i.name?"Off":e)&&t&&t.has("AP")){var i=t.get("AP");if(i&&i.has("N")){var t=i.get("N"),r=[];if(t.forEach(function(t,e){r.push(t)}),0<r.length)for(var n=0;n<r.length;n++){var s=r[Number.parseInt(n.toString(),10)];if(s&&"Off"!==s){e=s;break}}}}return e},Gr.prototype._doPostProcess=function(){var t,e,i=Ws(this.checked?x._PdfCheckFieldState.checked:x._PdfCheckFieldState.unchecked,this);i&&(t=this._getPage())&&((e=t.graphics).save(),t.rotation===x.PdfRotationAngle.angle90?(e.translateTransform(e._size[0],e._size[1]),e.rotateTransform(90)):t.rotation===x.PdfRotationAngle.angle180?(e.translateTransform(e._size[0],e._size[1]),e.rotateTransform(-180)):t.rotation===x.PdfRotationAngle.angle270&&(e.translateTransform(e._size[0],e._size[1]),e.rotateTransform(270)),e._sw._setTextRenderingMode(x._TextRenderingMode.fill),e.drawTemplate(i,this.bounds),e.restore()),this._dictionary._updated=!1},Gr.prototype._postProcess=function(t){var e=this._field;t=t||(e&&e.checked?"Yes":"Off"),this._dictionary.update("AS",L.get(t))},Gr.prototype._setField=function(t){this._field=t,this._field._stringFormat=new k(this.textAlignment,x.PdfVerticalAlignment.middle),this._field._addToKid(this)};var Hr,Wr=Gr;function Gr(){return Hr.call(this)||this}e(qr,Kr=Wr),qr._load=function(t,e,i){var r=new qr;return r._isLoaded=!0,r._dictionary=t,r._crossReference=e,r._field=i,r},Object.defineProperty(qr.prototype,"selected",{get:function(){return this._index===this._field.selectedIndex},enumerable:!0,configurable:!0}),Object.defineProperty(qr.prototype,"value",{get:function(){return this._isLoaded&&!this._optionValue&&(this._optionValue=Hs(this._dictionary)),this._optionValue},set:function(t){this._optionValue=t},enumerable:!0,configurable:!0}),Object.defineProperty(qr.prototype,"backColor",{get:function(){return this._parseBackColor()},set:function(t){this._updateBackColor(t,!0)},enumerable:!0,configurable:!0}),qr.prototype._initializeItem=function(t,e,i,r){this._optionValue=t,this._page=i,this._create(this._page,e,this._field),this.textAlignment=x.PdfTextAlignment.left,this._dictionary.update("MK",new D(this._crossReference)),this._mkDictionary.update("BC",[0,0,0]),this._mkDictionary.update("BG",[1,1,1]),this.style=x.PdfCheckBoxStyle.circle,this._dictionary.update("DA","/TiRo 0 Tf 0 0 0 rg"),r&&(this._setField(r),this._dictionary.update("Parent",r._ref))},qr.prototype._postProcess=function(t){var e=this._field;!t&&e&&-1!==e.selectedIndex&&(t=e.itemAt(e.selectedIndex).value),this.value===t?this._dictionary.update("AS",L.get(this.value)):this._dictionary.update("AS",L.get("Off"))};var Kr,Xr=qr;function qr(t,e,i){var r=Kr.call(this)||this;return i&&t&&e&&(i instanceof Ke?r._initializeItem(t,e,i.page,i):r._initializeItem(t,e,i)),r}e(Yr,Qr=Wr),Yr._load=function(t,e,i){var r=new Yr;return r._isLoaded=!0,r._dictionary=t,r._crossReference=e,r._field=i,r},Object.defineProperty(Yr.prototype,"text",{get:function(){return void 0===this._text&&void 0!==this._field&&(this._field instanceof pi||this._field instanceof ci)&&(this._text=this._field._options[Number.parseInt(this._index.toString(),10)][1]),this._text},set:function(t){"string"==typeof t&&void 0!==this._field&&(this._field instanceof pi||this._field instanceof ci)&&t!==this._field._options[Number.parseInt(this._index.toString(),10)][1]&&(this._field._options[Number.parseInt(this._index.toString(),10)][1]=t,this._text=t,this._field._dictionary._updated=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Yr.prototype,"selected",{get:function(){return this._index===this._field.selectedIndex},enumerable:!0,configurable:!0}),Yr.prototype._initializeItem=function(t,e,i){this._text=t,this._value=e,i&&i instanceof pi&&i._addToOptions(this,i)};var Qr,Jr=Yr;function Yr(t,e,i){var r=Qr.call(this)||this;return t&&e&&r._initializeItem(t,e,i),r}Object.defineProperty($r.prototype,"cap",{get:function(){return this._cap},set:function(t){t!==this._cap&&(this._cap=t,this._dictionary)&&this._dictionary.update("Cap",t)},enumerable:!0,configurable:!0}),Object.defineProperty($r.prototype,"type",{get:function(){return this._type},set:function(t){t!==this._type&&(this._type=t,this._dictionary)&&this._dictionary.update("CP",L.get(t===x.PdfLineCaptionType.top?"Top":"Inline"))},enumerable:!0,configurable:!0}),Object.defineProperty($r.prototype,"offset",{get:function(){return this._offset},set:function(t){cs(t,this._offset)&&(this._offset=t,this._dictionary)&&this._dictionary.update("CO",t)},enumerable:!0,configurable:!0});var Zr=$r;function $r(t,e,i){this._cap=void 0!==t&&t,this._type=void 0!==e?e:x.PdfLineCaptionType.inline,this._offset=void 0!==i?i:[0,0]}Object.defineProperty(en.prototype,"begin",{get:function(){return this._begin},set:function(t){t!==this._begin&&(this._begin=t,this._dictionary)&&this._dictionary.update("LE",[L.get(Ns(t)),L.get(Ns(this._end))])},enumerable:!0,configurable:!0}),Object.defineProperty(en.prototype,"end",{get:function(){return this._end},set:function(t){t!==this._end&&(this._end=t,this._dictionary)&&this._dictionary.update("LE",[L.get(Ns(this._begin)),L.get(Ns(t))])},enumerable:!0,configurable:!0});var tn=en;function en(t,e){this._begin=void 0!==t?t:x.PdfLineEndingStyle.none,this._end=void 0!==e?e:x.PdfLineEndingStyle.none}Object.defineProperty(nn.prototype,"width",{get:function(){return this._width},set:function(t){t!==this._width&&(this._width=t,this._dictionary)&&((t=this._dictionary.has("BS")?this._dictionary.get("BS"):new D(this._crossReference)).update("Type",L.get("Border")),t.update("W",this._width),t.update("S",Cs(this._style)),this._dash&&t.update("D",this._dash),this._dictionary.update("BS",t),this._dictionary._updated=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(nn.prototype,"style",{get:function(){return this._style},set:function(t){t!==this._style&&(this._style=t,this._dictionary)&&((t=this._dictionary.has("BS")?this._dictionary.get("BS"):new D(this._crossReference)).update("Type",L.get("Border")),t.update("W",this._width),t.update("S",Cs(this._style)),this._dash&&t.update("D",this._dash),this._dictionary.update("BS",t),this._dictionary._updated=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(nn.prototype,"dash",{get:function(){return this._dash},set:function(t){(void 0===this._dash||cs(t,this._dash))&&(this._dash=t,this._dictionary)&&((t=this._dictionary.has("BS")?this._dictionary.get("BS"):new D(this._crossReference)).update("Type",L.get("Border")),t.update("W",this._width),t.update("S",Cs(this._style)),t.update("D",this._dash),this._dictionary.update("BS",t),this._dictionary._updated=!0)},enumerable:!0,configurable:!0});var rn=nn;function nn(t,e,i){this._width=void 0!==t?t:1,this._style=void 0!==e?e:x.PdfBorderStyle.solid,void 0!==i&&Array.isArray(i)&&(this._dash=i)}e(on,sn=rn),Object.defineProperty(on.prototype,"width",{get:function(){return this._width},set:function(t){t!==this._width&&(this._width=t,this._dictionary)&&(this._dictionary.update("Border",[this._hRadius,this._vRadius,this._width]),(t=this._dictionary.has("BS")?this._dictionary.get("BS"):new D(this._crossReference)).update("Type",L.get("Border")),t.update("W",this._width),t.update("S",Cs(this._style)),this._dash&&t.update("D",this._dash),this._dictionary.update("BS",t),this._dictionary._updated=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(on.prototype,"hRadius",{get:function(){return this._hRadius},set:function(t){t!==this._hRadius&&(this._hRadius=t,this._dictionary)&&this._dictionary.update("Border",[this._hRadius,this._vRadius,this._width])},enumerable:!0,configurable:!0}),Object.defineProperty(on.prototype,"vRadius",{get:function(){return this._vRadius},set:function(t){t!==this._vRadius&&(this._vRadius=t,this._dictionary)&&this._dictionary.update("Border",[this._hRadius,this._vRadius,this._width])},enumerable:!0,configurable:!0});var sn,an=on;function on(t,e,i,r,n){t=sn.call(this,t,r,n)||this;return t._hRadius=void 0!==e?e:0,t._vRadius=void 0!==i?i:0,t}Object.defineProperty(cn.prototype,"intensity",{get:function(){return this._intensity},set:function(t){t!==this._intensity&&(this._intensity=t,this._dictionary&&((t=this._dictionary.has("BE")?this._dictionary.get("BE"):new D(this._crossReference)).update("I",this._intensity),t.update("S",this._styleToEffect(this._style)),this._dictionary.update("BE",t),this._dictionary._updated=!0),this._dictionary._updated=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(cn.prototype,"style",{get:function(){return this._style},set:function(t){t!==this._style&&(this._style=t,this._dictionary)&&((t=this._dictionary.has("BE")?this._dictionary.get("BE"):new D(this._crossReference)).update("I",this._intensity),t.update("S",this._styleToEffect(this._style)),this._dictionary.update("BE",t),this._dictionary._updated=!0)},enumerable:!0,configurable:!0}),cn.prototype._getBorderEffect=function(t){return"/C"===t?x.PdfBorderEffectStyle.cloudy:x.PdfBorderEffectStyle.solid},cn.prototype._styleToEffect=function(t){return t===x.PdfBorderEffectStyle.cloudy?"C":"S"};var hn=cn;function cn(t){this._intensity=0,null!=t?t.has("BE")&&(t=this._dictionary.get("BE"))&&(t.has("I")&&(this._intensity=t.get("I")),t.has("S"))&&(this._style=this._getBorderEffect(t.get("S"))):(this._dictionary=new D,this._dictionary.set("I",this._intensity),this._dictionary.set("S",this._styleToEffect(this._style)))}var _n=function(){this.borderWidth=1},dn=function(){this.startAngle=0,this.endAngle=0},pn=(Object.defineProperty(ln.prototype,"count",{get:function(){return this._annotations.length},enumerable:!0,configurable:!0}),ln.prototype.at=function(t){if(t<0||t>=this._annotations.length)throw Error("Index out of range.");var e;return this._parsedAnnotations.has(t)||(e=(e=this._annotations[Number.parseInt(t.toString(),10)])&&e instanceof A?this._crossReference._fetch(e):e)&&e instanceof D&&(e=this._parseAnnotation(e))&&(e._ref=this._annotations[Number.parseInt(t.toString(),10)],this._parsedAnnotations.set(t,e)),this._parsedAnnotations.get(t)},ln.prototype.add=function(t){if(null==t)throw Error("annotation cannot be null or undefined");if(t._isLoaded)throw Error("cannot add an existing annotation");t._initialize(this._page),void 0!==t._ref&&t._ref._isNew?e=t._ref:(e=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(e,t._dictionary),t._ref=e);var e,i,r=this._annotations.length,n=(this._annotations.push(e),this._parsedAnnotations.set(r,t),!1);return this._page&&this._page._pageDictionary.has("Annots")&&null!=(i=this._page._pageDictionary.get("Annots"))&&-1===i.indexOf(e)&&(i.push(e),this._page._pageDictionary.set("Annots",i),n=!0),n||this._page._pageDictionary.set("Annots",this._annotations),this._page._pageDictionary._updated=!0,t&&t instanceof Ai&&this._addCommentsAndReview(t,t._dictionary.get("F")),this._updateCustomAppearanceResource(t),r},ln.prototype.remove=function(t){t&&t._ref&&-1<(t=this._annotations.lastIndexOf(t._ref))&&this.removeAt(t)},ln.prototype.removeAt=function(t){if(t<0||t>=this._annotations.length)throw Error("Index out of range.");var e,i,r=this._annotations[Number.parseInt(t.toString(),10)];r&&this._page&&(-1<(i=(e=this._page._getProperty("Annots")).indexOf(r))&&e.splice(i,1),this._page._pageDictionary.set("Annots",e),this._page._pageDictionary._updated=!0,-1<this._annotations.indexOf(r)&&this._annotations.splice(t,1),this._parsedAnnotations.has(t)&&(this._parsedAnnotations.delete(t),this._reorderParsedAnnotations(t)),i=this._page._crossReference)&&i._cacheMap.has(r)&&i._cacheMap.delete(r)},ln.prototype._reorderParsedAnnotations=function(i){var r=new Map;this._parsedAnnotations.forEach(function(t,e){i<e?r.set(e-1,t):r.set(e,t)}),this._parsedAnnotations=r},ln.prototype._updateCustomAppearanceResource=function(t){t&&t instanceof Ir&&void 0!==t._appearance&&t._appearance.normal.graphics._processResources(t._crossReference)},ln.prototype._addCommentsAndReview=function(t,e){this._updateChildReference(t,t.comments,e),this._updateChildReference(t,t.reviewHistory,e)},ln.prototype._updateChildReference=function(t,e,i){if(e&&0<e.count){if(30===i)throw new Error("Could not add comments/reviews to the review");for(var r=0;r<e.count;r++){var n=e._collection[Number.parseInt(r.toString(),10)];n&&!n._dictionary.has("IRT")&&(0!==r&&e._isReview?n._dictionary.update("IRT",e._collection[r-1]._ref):n._dictionary.update("IRT",t._ref),e._isReview?n._isReview=!0:n._isComment=!0,this.add(n))}}},ln.prototype._parseAnnotation=function(t){if(t&&t.has("Subtype")&&null!==this._page&&void 0!==this._page){var e=t.get("Subtype"),i=t.get("Rect");if(e){var r,n,s,a=void 0;switch(e.name){case"Line":r=Ii._load(this._page,t);break;case"Circle":r=(t.has("Measure")||i[2]-i[0]==i[3]-i[1]?Ni:Li)._load(this._page,t);break;case"Square":r=(i[2]===i[3]?Oi:ji)._load(this._page,t);break;case"Polygon":r=Ui._load(this._page,t);break;case"PolyLine":r=(r=t.has("Measure")&&t.has("IT")&&(n=t.get("IT"))&&"PolyLineAngle"===n.name?qi._load(this._page,t):r)||Gi._load(this._page,t);break;case"Ink":r=Yi._load(this._page,t);break;case"Popup":case"Text":r=tr._load(this._page,t);break;case"Link":(a=t.has("A")?t.get("A"):a)&&a.has("S")?(n=a.get("S").name)&&(s=this._hasValidBorder(t.getArray("Border")),"URI"===n?r=s?pr._load(this._page,t):this._getLinkAnnotation(t):"Launch"===n?r=rr._load(this._page,t):"GoToR"===n?r=this._getLinkAnnotation(t):"GoTo"===n&&(r=cr._load(this._page,t))):"Link"===e.name&&(r=cr._load(this._page,t));break;case"FileAttachment":r=fr._load(this._page,t);break;case"3D":r=mr._load(this._page,t);break;case"FreeText":r=Lr._load(this._page,t);break;case"Redact":r=Br._load(this._page,t);break;case"RichMedia":r=Er._load(this._page,t);break;case"Watermark":r=Ar._load(this._page,t);break;case"Stamp":r=Ir._load(this._page,t);break;case"Sound":r=Nr._load(this._page,t);break;case"Highlight":case"Squiggly":case"StrikeOut":case"Underline":r=wr._load(this._page,t)}}}return r},ln.prototype._getLinkAnnotation=function(t){var e,i,r;return this._page&&(t&&t.has("A")?(i=t.get("A"))&&i.has("S")&&((r=i.get("S"))&&"GoToR"===r.name&&i.has("F")?e=rr._load(this._page,t):r&&"URI"===r.name&&(e=ar._load(this._page,t))):e=ar._load(this._page,t)),e},ln.prototype._hasValidBorder=function(t){if(null==t)return!1;for(var e=0;e<t.length;e++){var i=0,r=t[Number.parseInt(e.toString(),10)];if(0<(i=null!=r?r:i))return!1}return!0},ln.prototype._doPostProcess=function(t){for(var e=0;e<this.count;){var i,r=this.at(e);r&&(i=r.flatten||t,r._isExport=this._isExport,i&&-1===this._annotations.lastIndexOf(r._ref)&&e++,r._doPostProcess(i),i)||e++}},ln.prototype._reArrange=function(t,e,i){var r;return this._annotations&&(e>this._annotations.length&&(e=0),i>=this._annotations.length&&(i=this._annotations.indexOf(t)),r=this._crossReference._fetch(this._annotations[Number.parseInt(i.toString(),10)]))&&r.has("Parent")&&((r=r.getRaw("Parent"))&&r===t||t===this._annotations[Number.parseInt(i.toString(),10)])&&(r=this._annotations[Number.parseInt(i.toString(),10)],this._annotations[Number.parseInt(i.toString(),10)]=this._annotations[Number.parseInt(e.toString(),10)],this._annotations[Number.parseInt(e.toString(),10)]=r),this._annotations},ln.prototype._clear=function(){this._annotations=[],this._parsedAnnotations=new Map,this._comments=[]},ln);function ln(t,e,i){this._isExport=!1,F(t)?this._annotations=t:this._annotations=[],this._page=i,this._crossReference=e,this._parsedAnnotations=new Map,this._comments=[]}Object.defineProperty(fn.prototype,"count",{get:function(){return this._collection.length},enumerable:!0,configurable:!0}),fn.prototype.at=function(t){if(t<0||t>=this._collection.length)throw Error("Index out of range.");return this._collection[Number.parseInt(t.toString(),10)]},fn.prototype.add=function(t){if(30===this._annotation._dictionary.get("F"))throw new Error("Could not add comments/reviews to the review");var e;t._dictionary.update("F",this._annotation.flags===x.PdfAnnotationFlag.locked?128:this._isReview?30:28),this._annotation&&(this._annotation._isLoaded||this._page&&this._annotation._ref)&&(this._page.annotations.add(t),0!==(e=this._collection.length)&&this._isReview?t._dictionary.update("IRT",this._collection[Number.parseInt((e-1).toString(),10)]._ref):t._dictionary.update("IRT",this._annotation._ref),this._isReview?t._isReview=!0:t._isComment=!0),this._collection.push(t)},fn.prototype.remove=function(t){t=this._collection.indexOf(t);-1<t&&this.removeAt(t)},fn.prototype.removeAt=function(t){if(!(-1<t&&t<this._collection.length))throw new Error("Index out of range.");var e,i,r=this._collection[Number.parseInt(t.toString(),10)];this._isReview&&t<this._collection.length-1&&(e=this._collection[Number.parseInt((t+1).toString(),10)],i=r._dictionary._get("IRT"),e._dictionary.set("IRT",i),e._dictionary._updated=!0),this._collection.splice(t,1),this._page.annotations.remove(r)},fn.prototype._parseCommentsOrReview=function(){this._isReview?this._parseReview():this._parseComments()},fn.prototype._parseReview=function(){this._page&&(t=this._page.annotations);var t,e=new Map;if(e.set(this._annotation._ref,this._annotation),t&&t._comments&&0<t._comments.length){for(var i=[],r=0;r<t._comments.length;r++){var n=(s=t._comments[Number.parseInt(r.toString(),10)])._dictionary._get("IRT");s._isReview&&n&&e.has(n)?(this._collection.push(s),e.set(s._ref,s)):i.push(s)}t._comments=0<i.length?i:[]}else if(t)for(var s,a,o=t.count,r=0;r<o;r++)(s=t.at(r))&&s instanceof tr&&(a=s._dictionary,s._dictionary.has("IRT"))&&(n=a._get("IRT"),s._isReview&&n&&e.has(n)?(this._collection.push(s),e.set(s._ref,s)):t._comments.push(s));e.clear()},fn.prototype._parseComments=function(){var t;if((t=this._page?this._page.annotations:t)&&t._comments&&0<t._comments.length){for(var e=[],i=0;i<t._comments.length;i++){var r=_a(s=(n=t._comments[Number.parseInt(i.toString(),10)])._dictionary);((a=s._get("IRT"))&&a===this._annotation._ref&&!r?this._collection:e).push(n)}t._comments=0<e.length?e:[]}else if(t)for(var n,s,a,o=t.count,i=0;i<o;i++)(n=t.at(i))&&n instanceof tr&&(s=n._dictionary,n._dictionary.has("IRT"))&&(r=_a(s),((a=s._get("IRT"))&&a===this._annotation._ref&&!r?this._collection:t._comments).push(n))};var un=fn;function fn(t,e){this._collection=[],t&&(this._annotation=t),this._isReview=e,(t&&this._annotation._isLoaded||t._page)&&(this._page=t._page,this._parentDictionary=t._dictionary,this._annotation._isLoaded)&&this._parseCommentsOrReview()}gn=function(t,e){return(gn=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}))(t,e)};var gn,e=function(t,e){function i(){this.constructor=t}gn(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},yn=(Object.defineProperty(mn.prototype,"count",{get:function(){return this._isLoadedBookmark&&0===this._bookMarkList.length&&this._reproduceTree(),this._bookMarkList.length},enumerable:!0,configurable:!0}),Object.defineProperty(mn.prototype,"isExpanded",{get:function(){return this._dictionary&&this._dictionary.has("Count")?0<=this._dictionary.get("Count"):this._isExpanded},set:function(t){this._isExpanded=t,0<this.count&&this._dictionary&&this._dictionary.update("Count",t?this._bookMarkList.length:-this._bookMarkList.length)},enumerable:!0,configurable:!0}),mn.prototype.at=function(t){var e;if(t<0||t>=this.count)throw Error("Index out of range.");return e=F(this._bookMarkList)&&0<this._bookMarkList.length&&t<this._bookMarkList.length?this._bookMarkList[Number.parseInt(t.toString(),10)]:e},mn.prototype.contains=function(t){return-1!==this._bookMarkList.indexOf(t)},mn.prototype.add=function(t,e){var i;if(this._dictionary){var r,n=new D(this._crossReference),s=(n.update("Parent",this._reference),this._crossReference._getNextReference());if(this._crossReference._cacheMap.set(s,n),(i=new Sn(n,this._crossReference))._reference=s,i.title=t,void 0===e)0===this.count?(this._dictionary.update("First",s),this._dictionary.update("Last",s)):(r=this.at(this.count-1),this._dictionary.update("Last",s),r&&r._reference&&(n.update("Prev",r._reference),r._dictionary.update("Next",s))),this._bookMarkList.push(i);else{if(e<0||e>this.count)throw new Error("Index out of range");0===this.count?(this._dictionary.update("First",s),this._dictionary.update("Last",s),this._bookMarkList.push(i)):e===this.count?(r=this.at(this.count-1),this._dictionary.update("Last",s),r&&r._reference&&(n.update("Prev",r._reference),r._dictionary.update("Next",s)),this._bookMarkList.push(i)):(0===e?(t=this.at(0),this._dictionary.update("First",s),t&&t._reference&&(n.update("Next",t._reference),t._dictionary.update("Prev",s))):(r=this.at(e),(t=this.at(e-1))&&t._reference&&r&&r._reference&&(n.update("Prev",t._reference),t._dictionary.update("Next",s),r._dictionary.update("Prev",s),n.update("Next",r._reference))),this._updateBookmarkList(e,i))}this._updateCount()}return i},mn.prototype.remove=function(t){var e,i;if("string"==typeof t)for(var r=this._bookMarkList.length-1;0<=r;r--){var n=this.at(r);n.title===t?this.remove(r):0<n.count&&n.remove(t)}else 0<=t&&t<this.count&&(1===this.count?(this._removeFirst(this._dictionary),this._removeLast(this._dictionary),this._removeCount(this._dictionary),this._bookMarkList=[]):(0===t?(i=this.at(t+1),this._dictionary&&i&&i._reference&&(this._removePrevious(i._dictionary),this._dictionary.update("First",i._reference))):t===this.count-1?(e=this.at(t-1),this._dictionary&&e&&e._reference&&(this._removeNext(e._dictionary),this._dictionary.update("Last",e._reference))):(e=this.at(t-1),i=this.at(t+1),e&&e._reference&&i&&i._reference&&(e._dictionary.update("Next",i._reference),i._dictionary.update("Prev",e._reference))),this._updateBookmarkList(t),this._dictionary&&this._updateCount()))},mn.prototype.clear=function(){this._removeFirst(this._dictionary),this._removeLast(this._dictionary),this._removeCount(this._dictionary),this._bookMarkList=[]},mn.prototype._removeFirst=function(t){t&&t.has("First")&&(delete t._map.First,t._updated=!0)},mn.prototype._removeLast=function(t){t&&t.has("Last")&&(delete t._map.Last,t._updated=!0)},mn.prototype._removeNext=function(t){t&&t.has("Next")&&(delete t._map.Next,t._updated=!0)},mn.prototype._removePrevious=function(t){t&&t.has("Prev")&&(delete t._map.Prev,t._updated=!0)},mn.prototype._removeCount=function(t){t&&t.has("Count")&&(delete t._map.Count,t._updated=!0)},mn.prototype._updateBookmarkList=function(t,e){var i=[];if(void 0===e)for(var r=0;r<this.count;r++){var n=this._bookMarkList[Number.parseInt(r.toString(),10)];r!==t?i.push(n):(n=n._reference)&&this._crossReference._cacheMap.has(n)&&(this._crossReference._cacheMap.get(n)._updated=!1)}else for(r=0;r<this.count;r++)r===t&&i.push(e),i.push(this._bookMarkList[Number.parseInt(r.toString(),10)]);this._bookMarkList=i},mn.prototype._updateCount=function(){this.isExpanded||!this._dictionary.has("Count")?this._dictionary.update("Count",this._bookMarkList.length):this._dictionary.update("Count",-this._bookMarkList.length)},mn.prototype._reproduceTree=function(){for(var t=this._getBookmark(this),e=!!t;e&&t._dictionary;)this._bookMarkList.push(t),e=!!(t=t._next)},mn.prototype._getBookmark=function(t,e){void 0===e&&(e=!0);var i,t=t._dictionary;return t&&t.has(e?"First":"Last")&&F(t=t._get(e?"First":"Last"))&&(e=this._crossReference._fetch(t))&&((i=new Sn(e,this._crossReference))._reference=t),i},mn);function mn(t,e){this._bookMarkList=[],this._isExpanded=!1,this._isLoadedBookmark=!1,this._dictionary=t,this._crossReference=e}e(wn,bn=yn),Object.defineProperty(wn.prototype,"destination",{get:function(){return this._destination||null==this._obtainNamedDestination()&&(this._destination=Ia(this._dictionary,"Dest")),this._destination},set:function(t){t&&((t._parent=this)._destination=t,this._destination._initializePrimitive())},enumerable:!0,configurable:!0}),Object.defineProperty(wn.prototype,"namedDestination",{get:function(){return null!==this._namedDestination&&void 0!==this._namedDestination||(this._namedDestination=this._obtainNamedDestination()),this._namedDestination},set:function(t){var e;this._namedDestination!==t&&this._dictionary&&(this._namedDestination=t,(e=new D(this._crossReference)).update("D",t.title),e.update("S",L.get("GoTo")),t=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(t,e),this._dictionary.update("A",t))},enumerable:!0,configurable:!0}),Object.defineProperty(wn.prototype,"title",{get:function(){return null!==this._title&&void 0!==this._title||(this._dictionary&&this._dictionary.has("Title")?this._title=this._dictionary.get("Title"):this._title=""),this._title},set:function(t){this._title=t,this._dictionary&&this._dictionary.update("Title",t)},enumerable:!0,configurable:!0}),Object.defineProperty(wn.prototype,"color",{get:function(){return null!==this._color&&void 0!==this._color||this._dictionary&&this._dictionary.has("C")&&(this._color=Is(this._dictionary.getArray("C"))),this._color||[0,0,0]},set:function(t){this._color=t,this._dictionary&&this._dictionary.update("C",[Number.parseFloat((t[0]/255).toFixed(7)),Number.parseFloat((t[1]/255).toFixed(7)),Number.parseFloat((t[2]/255).toFixed(7))])},enumerable:!0,configurable:!0}),Object.defineProperty(wn.prototype,"textStyle",{get:function(){return null!==this._textStyle&&void 0!==this._textStyle||(this._textStyle=this._obtainTextStyle()),this._textStyle},set:function(t){this._textStyle=t,this._updateTextStyle(t)},enumerable:!0,configurable:!0}),Object.defineProperty(wn.prototype,"_next",{get:function(){var t,e,i;return this._dictionary&&this._dictionary.has("Next")&&F(e=this._dictionary._get("Next"))&&(i=this._crossReference._fetch(e))&&((t=new wn(i,this._crossReference))._reference=e),t},enumerable:!0,configurable:!0}),wn.prototype._updateTextStyle=function(t){t===x.PdfTextStyle.regular?this._dictionary&&this._dictionary.has("F")&&delete this._dictionary._map.F:this._dictionary&&this._dictionary.update("F",t)},wn.prototype._obtainTextStyle=function(){var t,e=x.PdfTextStyle.regular;return this._dictionary&&this._dictionary.has("F")&&(e|=null!=(t=this._dictionary.get("F"))?t:0),e},wn.prototype._obtainNamedDestination=function(){var t,e,i,r=this._crossReference._document;if(t=r?r._destinationCollection:t){var n,r=this._dictionary;if(r&&(r.has("A")?(n=r.get("A"))&&n.has("D")&&(e=n.get("D")):r.has("Dest")&&(e=r.get("Dest"))),e){var s=void 0;if(e instanceof L?s=e.name:"string"==typeof e&&(s=e),s)for(var a=t._namedDestinations,o=0;o<a.length;o++)if((i=a[Number.parseInt(o.toString(),10)])._title===s){e=i;break}}}return i};var bn,Sn=wn;function wn(t,e){t=bn.call(this,t,e)||this;return t._dictionary&&!t._dictionary.has("Dest")&&t._dictionary.has("A")&&(e=t._dictionary.get("A"))&&e.has("D")&&(e=e.getRaw("D"),t._dictionary.update("Dest",e)),t._isLoadedBookmark=!0,t}Object.defineProperty(Pn.prototype,"destination",{get:function(){return this._destination},set:function(t){t&&((t._parent=this)._destination=t,this._destination._initializePrimitive())},enumerable:!0,configurable:!0}),Object.defineProperty(Pn.prototype,"title",{get:function(){return this._title},set:function(t){t!==this._title&&this._dictionary&&(this._title=t,this._dictionary.update("Title",t),this._dictionary._updated=!0)},enumerable:!0,configurable:!0}),Pn.prototype._initialize=function(){this._dictionary=new D,this._dictionary.update("S",L.get("GoTo"))};var vn=Pn;function Pn(t,e){"string"==typeof t?(this._initialize(),this.title=t):(this._dictionary=t,this._crossReference=e)}xn.prototype._findDestination=function(t){if(t)if(t.has("Names"))this._addCollection(t);else if(t.has("Kids")){var e=t.getArray("Kids");if(e&&Array.isArray(e)&&0<e.length)for(var i=0;i<e.length;i++)this._findDestination(e[Number.parseInt(i.toString(),10)])}},xn.prototype._addCollection=function(t){var e,i,r=t.getRaw("Names");if((r=(e=r&&r instanceof A?this._crossReference._fetch(r):e)&&Array.isArray(e)&&0<e.length?e:r)&&Array.isArray(r)&&0<r.length)for(var n=1;n<r.length;n+=2){var s=r[n];if(s&&s instanceof A?(_=this._crossReference._fetch(s))&&Array.isArray(_)&&0<_.length?(i=new D).update("D",_):i=this._crossReference._fetch(s):null==i&&Array.isArray(s)&&(i=new D).update("D",s),i){var a,o,s=new vn(i,this._crossReference),h=r[n-1],c=void 0,_=void 0;if(h&&(s._title=h,i.has("D"))&&(_=i.get("D"),c=new Cn,h=_[0])&&_&&_[0]instanceof A&&(h=this._crossReference._fetch(h),o=void 0,a=this._crossReference._document)&&h&&null!=(o=rs(a,h))&&0<=o&&(c._index=o,c.page=a.getPage(o)),_[1]instanceof L){var d,p,l=void 0,u=void 0,f=void 0,h=_[1].name,g=c.page;switch(h){case"Fit":c._destinationMode=x.PdfDestinationMode.fitToPage;break;case"XYZ":c._destinationMode=x.PdfDestinationMode.location,2<_.length&&(l=_[2]),3<_.length&&(u=_[3]),4<_.length&&(f=_[4]),g&&(d=g.size,p=null==u?0:d[1]-u,c._location=[null==l?0:l,p],g.rotation!==x.PdfRotationAngle.angle0&&(p=is(g,u,l)),c._zoom=null!=f?f:0,null!==l&&null!==u&&null!==f&&void 0!==l&&void 0!==u&&void 0!==f||(c._isValid=!1));break;case"FitH":case"FitBH":c._destinationMode=x.PdfDestinationMode.fitH,3<=_.length&&(u=_[2]),g&&(d=g.size,p=null==u?0:d[1]-u,c._location=[0,p]),null==u&&(c._isValid=!1);break;case"FitR":c._destinationMode=x.PdfDestinationMode.fitR}}(c._parent=s)._destination=c,this._namedDestinations.push(s)}}};var An=xn;function xn(t,e){if(this._namedDestinations=[],t&&(this._dictionary=t),e&&(this._crossReference=e),t&&t.has("Dests")){e=t.get("Dests");if(e)if(e.has("Names"))this._addCollection(e);else if(e.has("Kids"))for(var i=e.getArray("Kids"),r=0;r<i.length;r++)this._findDestination(i[Number.parseInt(r.toString(),10)])}}Object.defineProperty(In.prototype,"annotations",{get:function(){var t,e,i;return void 0===this._annotations&&(this._pageDictionary&&this._pageDictionary.has("Annots")&&F(t=this._getProperty("Annots"))&&Array.isArray(t)&&((e=this._crossReference._document._catalog._catalogDictionary.has("AcroForm")?this._crossReference._document.form._parseWidgetReferences():e)&&0<e.length?(i=[],t.forEach(function(t){-1===e.indexOf(t)&&i.push(t)}),this._annotations=new pn(i,this._crossReference,this)):this._annotations=new pn(t,this._crossReference,this)),void 0===this._annotations)&&(this._annotations=new pn([],this._crossReference,this)),this._annotations},enumerable:!0,configurable:!0}),Object.defineProperty(In.prototype,"size",{get:function(){var t,e,i,r,n;return void 0===this._size&&(t=Ss(this._pageDictionary,"MediaBox",!1,!0,"Parent","P"),n=Ss(this._pageDictionary,"CropBox",!1,!0,"Parent","P"),r=i=0,e=this._pageDictionary&&this._pageDictionary.has("Rotate")?Ss(this._pageDictionary,"Rotate",!1,!0,"Parent"):0,n&&null!=e?(i=n[2]-n[0],r=n[3]-n[1],n=!(t&&t[2]-t[0]<i),(0===e||180===e)&&i<r||(90===e||270===e)&&r<i||n||0!==e||!t||(i=t[2]-t[0],r=0!==t[3]?t[3]-t[1]:t[1])):r=t?(i=t[2]-t[0],0!==t[3]?t[3]-t[1]:t[1]):(this._pageDictionary.update("MediaBox",[0,0,612,792]),i=612,792),this._size=[Math.abs(i),Math.abs(r)]),this._size},enumerable:!0,configurable:!0}),Object.defineProperty(In.prototype,"rotation",{get:function(){var t=0;return void 0===this._rotation&&((t=Ss(this._pageDictionary,"Rotate",!1,!0,"Parent"))<0&&(t+=360),this._rotation=void 0!==t?t/90%4:x.PdfRotationAngle.angle0),this._rotation},set:function(t){this._isNew||(this._rotation=t,360<=(t=90*Math.floor(this._rotation))&&(t%=360),this._pageDictionary.update("Rotate",t))},enumerable:!0,configurable:!0}),Object.defineProperty(In.prototype,"tabOrder",{get:function(){return this._obtainTabOrder()},set:function(t){this._tabOrder=t;t="";this._tabOrder!==x.PdfFormFieldsTabOrder.none&&(this._tabOrder===x.PdfFormFieldsTabOrder.row?t="R":this._tabOrder===x.PdfFormFieldsTabOrder.column?t="C":this._tabOrder===x.PdfFormFieldsTabOrder.structure&&(t="S")),this._pageDictionary.update("Tabs",L.get(t))},enumerable:!0,configurable:!0}),Object.defineProperty(In.prototype,"cropBox",{get:function(){return void 0===this._cBox&&(this._cBox=Ss(this._pageDictionary,"CropBox",!1,!0,"Parent","P")),void 0===this._cBox&&(this._cBox=[0,0,0,0]),this._cBox},enumerable:!0,configurable:!0}),Object.defineProperty(In.prototype,"mediaBox",{get:function(){return void 0===this._mBox&&(this._mBox=Ss(this._pageDictionary,"MediaBox",!1,!0,"Parent","P")),void 0===this._mBox&&(this._mBox=[0,0,0,0]),this._mBox},enumerable:!0,configurable:!0}),Object.defineProperty(In.prototype,"orientation",{get:function(){var t;return void 0===this._orientation&&void 0!==this.size&&((t=this.size)[0]>t[1]?this._orientation=x.PdfPageOrientation.landscape:this._orientation=x.PdfPageOrientation.portrait),this._orientation},enumerable:!0,configurable:!0}),Object.defineProperty(In.prototype,"_origin",{get:function(){return(void 0===this._o||0===this._o[0]&&0===this._o[1])&&(this._o=[this.mediaBox[0],this._mBox[1]]),this._o},enumerable:!0,configurable:!0}),Object.defineProperty(In.prototype,"graphics",{get:function(){return void 0!==this._g&&!this._needInitializeGraphics||this._parseGraphics(),this._g},enumerable:!0,configurable:!0}),In.prototype._addWidget=function(t){var e,i;this._pageDictionary.has("Annots")&&(e=this._pageDictionary.getRaw("Annots"),i=this._getProperty("Annots"),e)&&e instanceof A&&(delete this._pageDictionary._map.Annots,this._pageDictionary.update("Annots",i)),i&&Array.isArray(i)?i.push(t):this._pageDictionary.update("Annots",[t]),this._pageDictionary._updated=!0},In.prototype._getProperty=function(t,e){t=Ss(this._pageDictionary,t,e=void 0===e?!1:e,!1);return Array.isArray(t)?1!==t.length&&t[0]instanceof D?D.merge(this._crossReference,t):t[0]:t},In.prototype._parseGraphics=function(){this._loadContents();var t=new co([32,113,32,10]),e=this._crossReference._getNextReference(),t=(this._crossReference._cacheMap.set(e,t),this._contents.splice(0,0,e),new co([32,81,32,10])),e=this._crossReference._getNextReference(),t=(this._crossReference._cacheMap.set(e,t),this._contents.push(e),new co([])),e=this._crossReference._getNextReference();this._crossReference._cacheMap.set(e,t),this._contents.push(e),this._pageDictionary.set("Contents",this._contents),this._pageDictionary._updated=!0,this._initializeGraphics(t)},In.prototype._loadContents=function(){var t,e=this._pageDictionary.getRaw("Contents");null!=e&&e instanceof A&&(t=e,e=this._crossReference._fetch(t)),e&&e instanceof y?this._contents=[t]:e&&Array.isArray(e)?this._contents=e:this._contents=[]},In.prototype._initializeGraphics=function(t){var e,i,r,n=!1,s=0,a=0,o=0,h=0,c=this.size,_=this.mediaBox,d=(_&&4<=_.length&&(s=_[0],a=_[1],o=_[2],h=_[3]),this._pageDictionary.has("CropBox")?(_=this.cropBox)&&4<=_.length?(e=_[0],d=_[1],i=_[2],r=_[3],(e<0||d<0||i<0||r<0)&&Math.floor(Math.abs(d))===Math.floor(Math.abs(c[1]))&&Math.floor(Math.abs(e))===Math.floor(Math.abs(c[0]))?this._g=new _e([Math.max(e,i),Math.max(d,r)],t,this._crossReference,this):(this._g=new _e(c,t,this._crossReference,this),this._g._cropBox=_)):this._g=new _e(c,t,this._crossReference,this):(s<0||a<0||o<0||h<0)&&Math.floor(Math.abs(a))===Math.floor(Math.abs(c[1]))&&Math.floor(Math.abs(o))===Math.floor(Math.abs(c[0]))?(e=Math.max(s,o),i=Math.max(a,h),(e<=0||i<=0)&&(n=!0,s<0&&(s=-s),a<0&&(a=-a),o<0&&(o=-o),h<0&&(h=-h),e=Math.max(s,o),i=Math.max(a,h)),this._g=new _e([e,i],t,this._crossReference,this)):this._g=new _e(c,t,this._crossReference,this),this._pageDictionary.has("MediaBox")&&(this._g._mediaBoxUpperRightBound=n?-a:h),this._graphicsState=this._g.save(),this._origin);0<=d[0]&&0<=d[1]||Math.sign(d[0])!==Math.sign(d[1])?this._g._initializeCoordinates():this._g._initializeCoordinates(this),this._isNew||(r=this.rotation,Number.isNaN(r))||r===x.PdfRotationAngle.angle0&&!this._pageDictionary.has("Rotate")||(_=void 0,_=this._pageDictionary.has("Rotate")?this._pageDictionary.get("Rotate"):90*r,s=this._g._clipBounds,90===_?(this._g.translateTransform(0,c[1]),this._g.rotateTransform(-90),this._g._clipBounds=[s[0],s[1],c[0],c[1]]):180===_?(this._g.translateTransform(c[0],c[1]),this._g.rotateTransform(-180)):270===_&&(this._g.translateTransform(c[0],0),this._g.rotateTransform(-270),this._g._clipBounds=[s[0],s[1],c[1],c[0]])),this._isNew&&this._pageSettings&&(o=this._getActualBounds(this._pageSettings),this._g._clipTranslateMargins(o)),this._needInitializeGraphics=!1},In.prototype._getActualBounds=function(t){var e=t._getActualSize();return[t.margins.left,t.margins.top,e[0],e[1]]},In.prototype._fetchResources=function(){var t;return void 0===this._resourceObject&&(this._pageDictionary&&this._pageDictionary.has("Resources")?null!=(t=this._pageDictionary.getRaw("Resources"))&&t instanceof A?(this._hasResourceReference=!0,this._resourceObject=this._crossReference._fetch(t)):t&&t instanceof D&&(this._resourceObject=t):(this._resourceObject=new D(this._crossReference),this._pageDictionary.update("Resources",this._resourceObject))),this._resourceObject},In.prototype._getCropOrMediaBox=function(){var t;return this._pageDictionary&&(this._pageDictionary.has("CropBox")?t=this._pageDictionary.getArray("CropBox"):this._pageDictionary.has("MediaBox")&&(t=this._pageDictionary.getArray("MediaBox"))),t},In.prototype._beginSave=function(){void 0!==this._graphicsState&&(this.graphics.restore(this._graphicsState),this._graphicsState=null,this._needInitializeGraphics=!0)},In.prototype._destroy=function(){this._pageDictionary=void 0,this._size=void 0,this._mBox=void 0,this._cBox=void 0,this._o=void 0,this._g=void 0,this._graphicsState=void 0,this._contents=void 0},In.prototype._obtainTabOrder=function(){var t;return this._pageDictionary&&this._pageDictionary.has("Tabs")&&((t=this._pageDictionary.get("Tabs"))===L.get("R")?this._tabOrder=x.PdfFormFieldsTabOrder.row:t===L.get("C")?this._tabOrder=x.PdfFormFieldsTabOrder.column:t===L.get("S")?this._tabOrder=x.PdfFormFieldsTabOrder.structure:t===L.get("W")&&(this._tabOrder=x.PdfFormFieldsTabOrder.widget)),null!==this._tabOrder&&void 0!==this._tabOrder||(this._tabOrder=x.PdfFormFieldsTabOrder.none),this._tabOrder},In.prototype._removeAnnotation=function(t){var e;this._pageDictionary&&this._pageDictionary.has("Annots")&&F(e=this._getProperty("Annots"))&&Array.isArray(e)&&(0<=(t=e.indexOf(t))&&e.splice(t,1),this._pageDictionary.set("Annots",e),this._pageDictionary._updated=!0)},Object.defineProperty(In.prototype,"_contentTemplate",{get:function(){this._fetchResources();var t=this._combineContent(),t=new co(Array.from(t)),t=new N(t,this._crossReference);return t._content.dictionary.set("Resources",this._resourceObject),0<this.cropBox[0]||0<this.cropBox[1]?(t._content.dictionary.set("BBox",this.cropBox),t._size=[this.cropBox[0],this.cropBox[1]]):0<this.mediaBox[0]||0<this.mediaBox[1]?(t._content.dictionary.set("BBox",this.mediaBox),t._size=[this.mediaBox[0],this.mediaBox[1]]):(t._content.dictionary.set("BBox",[0,0,this.size[0],this.size[1]]),t._size=[this.size[0],this.size[1]]),t},enumerable:!0,configurable:!0}),In.prototype._combineIntoSingleArray=function(t){var e=t.reduce(function(t,e){return t+e.length},0),i=new Uint8Array(e),r=0;return t.forEach(function(t){i.set(t,r),r+=t.length}),i},In.prototype._combineContent=function(){var t,e=[],i=(this._loadContents(),this._contents.length);e.push(new Uint8Array([32,113,32,10]));for(var r=0;r<i;r++){var n=this._contents[Number.parseInt(r.toString(),10)],n=this._crossReference._fetch(n);n&&(n instanceof co?t=new Uint8Array(n._bytes):n instanceof y&&(t=n.getBytes()),t)&&(e.push(t),e.push(new Uint8Array([13,10])))}return e.push(new Uint8Array([32,81,32,10])),e.push(new Uint8Array([13,10])),this._combineIntoSingleArray(e)};var kn=In;function In(t,e,i,r){this._isAnnotationParsed=!1,this._isNew=!1,this._isDuplicate=!1,this._pageIndex=e,this._pageDictionary=i,this._crossReference=t,this._ref=r}Object.defineProperty(Tn.prototype,"zoom",{get:function(){return this._zoom},set:function(t){t!==this._zoom&&(this._zoom=t,this._initializePrimitive())},enumerable:!0,configurable:!0}),Object.defineProperty(Tn.prototype,"page",{get:function(){return this._page},set:function(t){t!==this._page&&(this._page=t,this._initializePrimitive(),this._index=t._pageIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(Tn.prototype,"pageIndex",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(Tn.prototype,"mode",{get:function(){return this._destinationMode},set:function(t){t!==this._destinationMode&&(this._destinationMode=t,this._initializePrimitive())},enumerable:!0,configurable:!0}),Object.defineProperty(Tn.prototype,"location",{get:function(){return this._location},set:function(t){t!==this._location&&(this._location=t,this._initializePrimitive())},enumerable:!0,configurable:!0}),Object.defineProperty(Tn.prototype,"destinationBounds",{get:function(){return this._destinationBounds},set:function(t){t!==this._destinationBounds&&(this._destinationBounds=t,this._initializePrimitive())},enumerable:!0,configurable:!0}),Object.defineProperty(Tn.prototype,"isValid",{get:function(){return this._isValid},enumerable:!0,configurable:!0}),Tn.prototype._setValidation=function(t){this._isValid=t},Tn.prototype._initializePrimitive=function(){this._array=[];var t=this._page;if(t&&t._pageDictionary){var e=t._pageDictionary;switch(null!=e&&this._array.push(this._page._ref),this._destinationMode){case x.PdfDestinationMode.location:this._array.push(L.get("XYZ")),null!=t?(this._array.push(this._location[0]),this._array.push(this._page.graphics._size[1]-this._location[1])):(this._array.push(0),this._array.push(0)),this._array.push(this._zoom);break;case x.PdfDestinationMode.fitToPage:this._array.push(L.get("Fit"));break;case x.PdfDestinationMode.fitR:this._array.push(L.get("FitR")),this._array.push(this._destinationBounds[0]),this._array.push(this._destinationBounds[1]),this._array.push(this._destinationBounds[2]),this._array.push(this._destinationBounds[3]);break;case x.PdfDestinationMode.fitH:this._array.push(L.get("FitH")),this._array.push(null!=t?t._size[1]-this._location[1]:0)}this._parent&&(this._parent._dictionary.set(this._parent instanceof vn?"D":"Dest",this._array),this._parent._dictionary._updated=!0)}};var Cn=Tn;function Tn(t,e){this._location=[0,0],this._destinationMode=x.PdfDestinationMode.location,this._zoom=0,this._isValid=!0,this._index=0,this._destinationBounds=[0,0,0,0],this._array=Array(),null!=t&&(t.rotation===x.PdfRotationAngle.angle180?this._location=[t.graphics._size[0],this._location[1]]:t.rotation===x.PdfRotationAngle.angle90?this._location=[0,0]:t.rotation===x.PdfRotationAngle.angle270?this._location=[t.graphics._size[0],0]:this._location=[0,this._location[1]],this._page=t,this._index=t._pageIndex),void 0!==e&&2===e.length&&(this._location=e),void 0!==e&&4===e.length&&(this._location=[e[0],e[1]],this._destinationBounds=e)}Nn.prototype._reset=function(){this._position=0},Nn.prototype._getBuffer=function(t){return this._stream[Number.parseInt(t.toString(),10)]},Nn.prototype._read=function(t,e,i,r){if(r&&Array.isArray(r)){var n=0;if(i<=r.length&&r.length-e>=i)for(var s=0;s<i;s++)t[Number.parseInt(s.toString(),10)]=r[Number.parseInt(e.toString(),10)],e++,n++;return{outputBuffer:t,offset:e,length:n}}for(var a=e;a<i;a++){var o=this._position;t[Number.parseInt(a.toString(),10)]=this._getBuffer(o),this._position++}},Nn.prototype._readString=function(t){for(var e="",i=0;i<t;i++)e+=String.fromCharCode(this._readByte());return e},Nn.prototype._seek=function(t){this._position+=t},Nn.prototype._readByte=function(){var t;if(this._position<this._stream.byteLength)return t=this._getBuffer(this._position),this._position+=1,t;throw new Error("Error decoding JPEG image. Invalid offset.")},Nn.prototype._toUnsigned16=function(t){return(t&=65535)<0?t+65536:t},Nn.prototype._readUnsigned32=function(t){return this._getBuffer(t+3)|this._getBuffer(t+2)<<8|this._getBuffer(t+1)<<16|this._getBuffer(t)<<24};e=Nn;function Nn(){this._format=x._ImageFormat.unknown,this._height=0,this._width=0,this._bitsPerComponent=8,this._position=0,this._noOfComponents=-1}Rn=function(t,e){return(Rn=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}))(t,e)};(function(t,e){function i(){this.constructor=t}Rn(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(Dn,Fn=e),Object.defineProperty(Dn.prototype,"_imageDataAsNumberArray",{get:function(){return this._imageData},enumerable:!0,configurable:!0}),Dn.prototype._initialize=function(){this._format=x._ImageFormat.jpeg,this._readHeader(),this._reset(),this._imageData=new Uint8Array(this._stream.byteLength),this._read(this._imageData,0,this._imageData.byteLength)},Dn.prototype._readHeader=function(){this._reset();for(var t=new Uint8Array(this._stream.byteLength),e=(this._read(t,0,t.byteLength),4),i=256*this._getBuffer(e)+this._getBuffer(e+1),r=!1;e<t.byteLength;){if(!((e+=i)<t.byteLength)){r=!0;break}if(192===this._getBuffer(e+1)){if(this._height=256*this._getBuffer(e+5)+this._getBuffer(e+6),this._width=256*this._getBuffer(e+7)+this._getBuffer(e+8),this._noOfComponents=this._getBuffer(e+9),0!==this._width&&0!==this._height)return}else e+=2,i=256*this._getBuffer(e)+this._getBuffer(e+1)}r&&(this._reset(),this._seek(2),this._readExceededJpegImage())},Dn.prototype._getImageDictionary=function(){this._imageStream=new g([],new D),this._imageStream.isImageStream=!0;for(var t="",e="",i=0;i<this._imageDataAsNumberArray.byteLength;i++)t+=" "+String.fromCharCode(this._getBuffer(i));for(i=0;i<t.length;i++)i%2!=0&&(e+=t[Number.parseInt(i.toString(),10)]);this._imageStream.data=[e],this._imageStream._isCompress=!1;var r=new D;r.set("Type",new L("XObject")),r.set("Subtype",new L("Image")),r.set("Width",this._width),r.set("Height",this._height),r.set("BitsPerComponent",this._bitsPerComponent),r.set("Filter",new L("DCTDecode")),r.set("ColorSpace",new L(this._getColorSpace())),r.set("DecodeParms",this._getDecodeParams()),this._imageStream.dictionary=r,this._imageStream.bytes=new Uint8Array(this._imageStream.data[0].length);for(i=0;i<this._imageStream.data[0].length;i++)this._imageStream.bytes[Number.parseInt(i.toString(),10)]=this._imageStream.data[0].charCodeAt(i);return this._imageStream.end=this._imageStream.bytes.length,this._imageStream.dictionary._updated=!0,this._imageStream},Dn.prototype._getColorSpace=function(){return 1===this._noOfComponents?"DeviceGray":4===this._noOfComponents?"DeviceCMYK":"DeviceRGB"},Dn.prototype._getDecodeParams=function(){var t=new D;return t.set("Columns",this._width),t.set("BlackIs1",!0),t.set("K",-1),t.set("Predictor",15),t.set("BitsPerComponent",this._bitsPerComponent),t},Dn.prototype._skipStream=function(){var t=this._getBuffer(this._position)<<8|this._getBuffer(this._position+1);if(this._seek(2),t<2)throw new Error("Error decoding JPEG image");0<t&&this._seek(t-2)},Dn.prototype._readExceededJpegImage=function(){for(var t=!0;t;)switch(this._getMarker()){case 192:case 193:case 194:case 195:case 197:case 198:case 199:case 201:case 202:case 203:case 205:case 206:case 207:this._seek(3),this._height=this._getBuffer(this._position)<<8|this._getBuffer(this._position+1),this._seek(2),this._width=this._getBuffer(this._position)<<8|this._getBuffer(this._position+1),this._seek(2),this._noOfComponents=this._getBuffer(this._position),this._seek(1),t=!1;break;default:this._skipStream()}},Dn.prototype._getMarker=function(){for(var t=0,e=this._readByte();255!==e;)t++,e=this._readByte();for(;255===(e=this._readByte()););if(0!==t)throw new Error("Error decoding JPEG image");return this._toUnsigned16(e)};var Rn,Fn,Ln=Dn;function Dn(t){var e=Fn.call(this)||this;return e._stream=t,e._initialize(),e}(l=x._InflaterState||(x._InflaterState={}))[l.readingHeader=0]="readingHeader",l[l.readingBFinal=1]="readingBFinal",l[l.readingBType=2]="readingBType",l[l.readingNlCodes=3]="readingNlCodes",l[l.readingNdCodes=4]="readingNdCodes",l[l.readingCodes=5]="readingCodes",l[l.readingClCodes=6]="readingClCodes",l[l.readingTcBefore=7]="readingTcBefore",l[l.readingTcAfter=8]="readingTcAfter",l[l.decodeTop=9]="decodeTop",l[l.iLength=10]="iLength",l[l.fLength=11]="fLength",l[l.dCode=12]="dCode",l[l.unCompressedAligning=13]="unCompressedAligning",l[l.unCompressedByte1=14]="unCompressedByte1",l[l.unCompressedByte2=15]="unCompressedByte2",l[l.unCompressedByte3=16]="unCompressedByte3",l[l.unCompressedByte4=17]="unCompressedByte4",l[l.decodeUnCompressedBytes=18]="decodeUnCompressedBytes",l[l.srFooter=19]="srFooter",l[l.rFooter=20]="rFooter",l[l.vFooter=21]="vFooter",l[l.done=22]="done",(l=x._BlockType||(x._BlockType={}))[l.unCompressedType=0]="unCompressedType",l[l.staticType=1]="staticType",l[l.dynamicType=2]="dynamicType";Object.defineProperty(On.prototype,"_unusedBytes",{get:function(){return On._dOutSize-this._usedBytes},enumerable:!0,configurable:!0}),On.prototype._write=function(t){this._dOutput[this._end++]=t,this._end&=On._dOutMask,++this._usedBytes},On.prototype._writeLD=function(t,e){this._usedBytes+=t;var i=this._end-e&On._dOutMask,r=On._dOutSize-t;if(i<=r&&this._end<r)if(t<=e)$n(this._dOutput,this._end,this._dOutput,i,i+t),this._end+=t;else for(;0<t--;)this._dOutput[this._end++]=this._dOutput[i++];else for(;0<t--;)this._dOutput[this._end++]=this._dOutput[i++],this._end&=On._dOutMask,i&=On._dOutMask},On.prototype._copyFrom=function(t,e){e=Math.min(Math.min(e,On._dOutSize-this._usedBytes),t._bytes);var i,r=On._dOutSize-this._end;return r<e?(i=t._copyTo(this._dOutput,this._end,r))===r&&(i+=t._copyTo(this._dOutput,0,e-r)):i=t._copyTo(this._dOutput,this._end,e),this._end=this._end+i&On._dOutMask,this._usedBytes+=i,i},On.prototype._copyTo=function(t,e,i){i>this._usedBytes?(r=this._end,i=this._usedBytes):r=this._end-this._usedBytes+i&On._dOutMask;var r,n=i,s=i-r,a=On._dOutSize-s;if(0<s){for(var o=0;o<s&&o+a<this._dOutput.length&&o+e<t.length;o++)t[e+o]=this._dOutput[a+o];var h=On._dOutSize-s;$n(t,e,this._dOutput,h,h+s),e+=s,i=r}a=r-i;return $n(t,e,this._dOutput,r-i,r),this._usedBytes-=n,{count:n,data:t}},On._dOutSize=32768,On._dOutMask=32767;var Bn=On;function On(){this._end=0,this._usedBytes=0,this._dOutput=Array(On._dOutSize).fill(0),this._end=0,this._usedBytes=0}Object.defineProperty(En.prototype,"_bytes",{get:function(){return this._end-this._begin+Math.floor(this._bInBuffer/8)},enumerable:!0,configurable:!0}),En.prototype._needsInput=function(){return this._begin===this._end},En.prototype._availableBits=function(t){if(this._bInBuffer<t){if(this._needsInput())return!1;if(this._bBuffer|=f(this._buffer[this._begin++],32)<<this._bInBuffer,this._bInBuffer+=8,this._bInBuffer<t){if(this._needsInput())return!1;this._bBuffer|=f(this._buffer[this._begin++],32)<<this._bInBuffer,this._bInBuffer+=8}}return!0},En.prototype._load16Bits=function(){return this._bInBuffer<8?(this._begin<this._end&&(this._bBuffer|=f(this._buffer[this._begin++],32)<<this._bInBuffer,this._bInBuffer+=8),this._begin<this._end&&(this._bBuffer|=f(this._buffer[this._begin++],32)<<this._bInBuffer,this._bInBuffer+=8)):this._bInBuffer<16&&this._begin<this._end&&(this._bBuffer|=f(this._buffer[this._begin++],32)<<this._bInBuffer,this._bInBuffer+=8),this._bBuffer},En.prototype._getBitMask=function(t){return(f(1,32)<<t)-1},En.prototype._getBits=function(t){var e;return this._availableBits(t)?(e=this._bBuffer&this._getBitMask(t),this._bBuffer>>=t,this._bInBuffer-=t,e):-1},En.prototype._copyTo=function(t,e,i){for(var r=0;0<this._bInBuffer&&0<i;)t[e++]=f(this._bBuffer,8),this._bBuffer>>=8,this._bInBuffer-=8,i--,r++;if(0===i)return r;var n=this._end-this._begin;n<i&&(i=n);for(var s=0;s<i&&s+this._begin<this._buffer.length&&s+e<t.length;s++)t[e+s]=this._buffer[this._begin+s];return this._begin+=i,r+i},En.prototype._setInput=function(t,e,i){this._buffer=t,this._begin=e,this._end=e+i},En.prototype._skipBits=function(t){this._bBuffer>>=t,this._bInBuffer-=t},En.prototype._skipByteBoundary=function(){this._bBuffer>>=this._bInBuffer%8,this._bInBuffer=this._bInBuffer-this._bInBuffer%8};var Mn=En;function En(){this._bBuffer=0,this._bInBuffer=0,this._begin=0,this._end=0}Vn.prototype._load=function(t){this._clArray=t,this._initialize()},Vn.prototype._loadTree=function(t){this._clArray=t?this._getLengthTree():this._getDepthTree(),this._initialize()},Vn.prototype._initialize=function(){this._clArray.length===Vn._maxLengthTree?this._tBits=9:this._tBits=7,this._tMask=(1<<this._tBits)-1,this._createTable()},Vn.prototype._getLengthTree=function(){for(var t=Array(Vn._maxLengthTree).fill(0),e=0;e<=143;e++)t[Number.parseInt(e.toString(),10)]=f(8,8);for(e=144;e<=255;e++)t[Number.parseInt(e.toString(),10)]=f(9,8);for(e=256;e<=279;e++)t[Number.parseInt(e.toString(),10)]=f(7,8);for(e=280;e<=287;e++)t[Number.parseInt(e.toString(),10)]=f(8,8);return t},Vn.prototype._getDepthTree=function(){return Array(Vn._maxDepthTree).fill(5)},Vn.prototype._calculateHashCode=function(){for(var t=Array(17).fill(0),e=0;e<this._clArray.length;e++)t[this._clArray[Number.parseInt(e.toString(),10)]]++;t[0]=0;for(var i=Array(17).fill(0),r=0,n=1;n<=16;n++)r=r+t[n-1]<<1,i[Number.parseInt(n.toString(),10)]=r;for(var s=Array(Vn._maxLengthTree).fill(0),e=0;e<this._clArray.length;e++){var a=this._clArray[Number.parseInt(e.toString(),10)];0<a&&(s[Number.parseInt(e.toString(),10)]=this._bitReverse(i[Number.parseInt(a.toString(),10)],a),i[Number.parseInt(a.toString(),10)]++)}return s},Vn.prototype._bitReverse=function(t,e){for(var i=0;i=(i|1&t)<<1,t>>=1,0<--e;);return i>>1},Vn.prototype._createTable=function(){for(var t=this._calculateHashCode(),e=(this._table=Array(1<<this._tBits).fill(0),this._left=Array(2*this._clArray.length).fill(0),this._right=Array(2*this._clArray.length).fill(0),Yn(this._clArray.length)),i=0;i<this._clArray.length;i++){var r=this._clArray[Number.parseInt(i.toString(),10)];if(0<r){var n=t[Number.parseInt(i.toString(),10)];if(r<=this._tBits){var s=1<<r;if(s<=n)throw new Error("Invalid Data.");for(var a=1<<this._tBits-r,o=0;o<a;o++)this._table[Number.parseInt(n.toString(),10)]=Yn(i),n+=s}else{var h=r-this._tBits,c=1<<this._tBits,_=n&(1<<this._tBits)-1,d=this._table;do{var p=Yn(d[Number.parseInt(_.toString(),10)]);if(0===p&&(d[Number.parseInt(_.toString(),10)]=Yn(-e),p=Yn(-e),e++),0<p)throw new Error("Invalid Data.")}while(d=0==(n&c)?this._left:this._right,_=-p,c<<=1,0!==--h);d[Number.parseInt(_.toString(),10)]=Yn(i)}}}},Vn.prototype._getNextSymbol=function(t){var e=t._load16Bits();if(0===t._bInBuffer)return-1;var i=this._table[e&this._tMask];if(i<0)for(var r=f(1<<this._tBits,32);i=-i,i=(0==(e&r)?this._left:this._right)[Number.parseInt(i.toString(),10)],r<<=1,i<0;);var n=this._clArray[Number.parseInt(i.toString(),10)];if(n<=0)throw new Error("Invalid Data.");return n>t._bInBuffer?-1:(t._skipBits(n),i)},Vn._maxLengthTree=288,Vn._maxDepthTree=32,Vn._nCLength=19;var jn=Vn;function Vn(){}Object.defineProperty(Un.prototype,"_finished",{get:function(){return this._inflaterState===x._InflaterState.done||this._inflaterState===x._InflaterState.vFooter},enumerable:!0,configurable:!0}),Un.prototype._setInput=function(t,e,i){this._input._setInput(t,e,i)},Un.prototype._inflate=function(t,e,i){var r=0;do{var n=this._output._copyTo(t,e,i),s=n.count}while((t=n.data,0<s&&(e+=s,r+=s,i-=s),0!==i)&&(!this._finished&&this._decode()));return{count:r,data:t}},Un.prototype._decode=function(){var t,e=!1,i=!1;if(this._finished)return!0;if(this._inflaterState===x._InflaterState.readingBFinal){if(!this._input._availableBits(1))return!1;this._bfinal=this._input._getBits(1),this._inflaterState=x._InflaterState.readingBType}if(this._inflaterState===x._InflaterState.readingBType){if(!this._input._availableBits(2))return this._inflaterState=x._InflaterState.readingBType,!1;this._blockType=this._getBlockType(this._input._getBits(2)),this._blockType===x._BlockType.dynamicType?this._inflaterState=x._InflaterState.readingNlCodes:this._blockType===x._BlockType.staticType?(this._llTree=new jn,this._llTree._loadTree(!0),this._distanceTree=new jn,this._distanceTree._loadTree(!1),this._inflaterState=x._InflaterState.decodeTop):this._blockType===x._BlockType.unCompressedType&&(this._inflaterState=x._InflaterState.unCompressedAligning)}return this._blockType===x._BlockType.dynamicType?this._getInflaterStateValue(this._inflaterState)<this._getInflaterStateValue(x._InflaterState.decodeTop)?i=this._decodeDynamicBlockHeader():(i=(t=this._decodeBlock(e)).result,e=t.eob,this._output=t.output):this._blockType===x._BlockType.staticType?(i=(t=this._decodeBlock(e)).result,e=t.eob,this._output=t.output):this._blockType===x._BlockType.unCompressedType&&(i=(t=this._decodeUncompressedBlock(e)).result,e=t.eob,this._output=t.output),e&&0!==this._bfinal&&(this._inflaterState=x._InflaterState.done),i},Un.prototype._decodeUncompressedBlock=function(t){for(t=!1;;)switch(this._inflaterState){case x._InflaterState.unCompressedAligning:if(this._input._skipByteBoundary(),this._inflaterState=x._InflaterState.unCompressedByte1,this._unCompressedByte())break;return{result:!1,eob:t,output:this._output};case x._InflaterState.unCompressedByte1:case x._InflaterState.unCompressedByte2:case x._InflaterState.unCompressedByte3:case x._InflaterState.unCompressedByte4:if(this._unCompressedByte())break;return{result:!1,eob:t,output:this._output};case x._InflaterState.decodeUnCompressedBytes:return this._bLength-=this._output._copyFrom(this._input,this._bLength),0===this._bLength?(this._inflaterState=x._InflaterState.readingBFinal,{result:t=!0,eob:t,output:this._output}):0===this._output._unusedBytes?{result:!0,eob:t,output:this._output}:{result:!1,eob:t,output:this._output}}},Un.prototype._unCompressedByte=function(){var t=this._input._getBits(8);if(t<0)return!1;var e=this._getInflaterStateValue(this._inflaterState),i=this._getInflaterStateValue(x._InflaterState.unCompressedByte1);if(this._blBuffer[e-i]=f(t,8),this._inflaterState===x._InflaterState.unCompressedByte4&&(this._bLength=this._blBuffer[0]+256*this._blBuffer[1],f(this._bLength,16)!==f(~(this._blBuffer[2]+256*this._blBuffer[3]),16)))throw new Error("Ivalid block length.");return this._inflaterState=this._getInflaterState(this._getInflaterStateValue(this._inflaterState)+1),!0},Un.prototype._decodeBlock=function(t){t=!1;for(var e=this._output._unusedBytes;258<e;){var i,r=void 0,n=void 0;switch(this._inflaterState){case x._InflaterState.decodeTop:if((r=this._llTree._getNextSymbol(this._input))<0)return{result:!1,eob:t,output:this._output};if(r<256)this._output._write(f(r,8)),--e;else{if(256===r)return t=!0,this._inflaterState=x._InflaterState.readingBFinal,{result:!0,eob:t,output:this._output};if((r-=257)<8)r+=3,this._extraBits=0;else if(28===r)r=258,this._extraBits=0;else{if(r<0||r>=this._extraLengthBits.length)throw new Error("Invalid data.");this._extraBits=this._extraLengthBits[Number.parseInt(r.toString(),10)]}if(this._length=r,e=(n=this._inLength(e)).fb,!n.value)return{result:!1,eob:t,output:this._output}}break;case x._InflaterState.iLength:if(e=(n=this._inLength(e)).fb,n.value)break;return{result:!1,eob:t,output:this._output};case x._InflaterState.fLength:if(e=(i=this._fLength(e)).fb,i.value)break;return{result:!1,eob:t,output:this._output};case x._InflaterState.dCode:if(e=(i=this._dcode(e)).fb,i.value)break;return{result:!1,eob:t,output:this._output}}}return{result:!0,eob:t,output:this._output}},Un.prototype._inLength=function(t){if(0<this._extraBits){this._inflaterState=x._InflaterState.iLength;var e=this._input._getBits(this._extraBits);if(e<0)return{value:!1,fb:t};if(this._length<0||this._length>=this._lengthBase.length)throw new Error("Invalid data.");this._length=this._lengthBase[this._length]+e}this._inflaterState=x._InflaterState.fLength;e=this._fLength(t);return t=e.fb,e.value?{value:!0,fb:t}:{value:!1,fb:t}},Un.prototype._fLength=function(t){if(this._blockType===x._BlockType.dynamicType?this._distanceCode=this._distanceTree._getNextSymbol(this._input):(this._distanceCode=this._input._getBits(5),0<=this._distanceCode&&(this._distanceCode=this._staticDistanceTreeTable[this._distanceCode])),this._distanceCode<0)return{value:!1,fb:t};this._inflaterState=x._InflaterState.dCode;var e=this._dcode(t);return t=e.fb,e.value?{value:!0,fb:t}:{value:!1,fb:t}},Un.prototype._dcode=function(t){if(3<this._distanceCode){this._extraBits=this._distanceCode-2>>1;var e=this._input._getBits(this._extraBits);if(e<0)return{value:!1,fb:t};e=this._distanceBasePosition[this._distanceCode]+e}else e=this._distanceCode+1;return this._output._writeLD(this._length,e),t-=this._length,this._inflaterState=x._InflaterState.decodeTop,{value:!0,fb:t}},Un.prototype._decodeDynamicBlockHeader=function(){switch(this._inflaterState){case x._InflaterState.readingNlCodes:if(this._llCodeCount=this._input._getBits(5),this._llCodeCount<0||(this._llCodeCount+=257,this._inflaterState=x._InflaterState.readingNdCodes,!this._readingNDCodes()))return!1;break;case x._InflaterState.readingNdCodes:if(this._readingNDCodes())break;return!1;case x._InflaterState.readingCodes:if(this._readingCodes())break;return!1;case x._InflaterState.readingClCodes:if(this._readingCLCodes())break;return!1;case x._InflaterState.readingTcBefore:case x._InflaterState.readingTcAfter:if(this._readingTCBefore())break;return!1}var t=Array(jn._maxLengthTree).fill(0),e=($n(t,0,this._codeList,0,this._llCodeCount),Array(jn._maxDepthTree).fill(0));return $n(e,0,this._codeList,this._llCodeCount,this._llCodeCount+this._dCodeCount),this._llTree=new jn,this._llTree._load(t),this._distanceTree=new jn,this._distanceTree._load(e),this._inflaterState=x._InflaterState.decodeTop,!0},Un.prototype._readingNDCodes=function(){return this._dCodeCount=this._input._getBits(5),!(this._dCodeCount<0||(this._dCodeCount+=1,this._inflaterState=x._InflaterState.readingCodes,!this._readingCodes()))},Un.prototype._readingCodes=function(){return this._clCodeCount=this._input._getBits(4),!(this._clCodeCount<0||(this._clCodeCount+=4,this._loopCounter=0,this._inflaterState=x._InflaterState.readingClCodes,!this._readingCLCodes()))},Un.prototype._readingCLCodes=function(){for(;this._loopCounter<this._clCodeCount;){var t=this._input._getBits(3);if(t<0)return!1;this._cltcl[this._codeOrder[this._loopCounter]]=f(t,8),++this._loopCounter}for(var e=this._clCodeCount;e<this._codeOrder.length;e++)this._cltcl[this._codeOrder[Number.parseInt(e.toString(),10)]]=0;return this._clTree=new jn,this._clTree._load(this._cltcl),this._caSize=this._llCodeCount+this._dCodeCount,this._loopCounter=0,this._inflaterState=x._InflaterState.readingTcBefore,!!this._readingTCBefore()},Un.prototype._readingTCBefore=function(){for(;this._loopCounter<this._caSize;){if(this._inflaterState===x._InflaterState.readingTcBefore&&(this._lengthCode=this._clTree._getNextSymbol(this._input),this._lengthCode<0))return!1;if(this._lengthCode<=15)this._codeList[this._loopCounter++]=f(this._lengthCode,8);else{if(!this._input._availableBits(7))return this._inflaterState=x._InflaterState.readingTcAfter,!1;var t=void 0;if(16===this._lengthCode){if(0===this._loopCounter)throw new Error("Invalid data.");var e=f(this._codeList[this._loopCounter-1],8),t=this._input._getBits(2)+3;if(this._loopCounter+t>this._caSize)throw new Error("Invalid data.");for(var i=0;i<t;i++)this._codeList[this._loopCounter++]=e}else{if(17===this._lengthCode){if(t=this._input._getBits(3)+3,this._loopCounter+t>this._caSize)throw new Error("Invalid data.")}else if(t=this._input._getBits(7)+11,this._loopCounter+t>this._caSize)throw new Error("Invalid data.");for(i=0;i<t;i++)this._codeList[this._loopCounter++]=0}}this._inflaterState=x._InflaterState.readingTcBefore}return!0},Un.prototype._getBlockType=function(t){return t===x._BlockType.unCompressedType?x._BlockType.unCompressedType:t===x._BlockType.staticType?x._BlockType.staticType:x._BlockType.dynamicType},Un.prototype._getInflaterState=function(t){switch(t){case 0:return x._InflaterState.readingHeader;case 2:return x._InflaterState.readingBFinal;case 3:return x._InflaterState.readingBType;case 4:return x._InflaterState.readingNlCodes;case 5:return x._InflaterState.readingNdCodes;case 6:return x._InflaterState.readingCodes;case 7:return x._InflaterState.readingClCodes;case 8:return x._InflaterState.readingTcBefore;case 9:return x._InflaterState.readingTcAfter;case 10:return x._InflaterState.decodeTop;case 11:return x._InflaterState.iLength;case 12:return x._InflaterState.fLength;case 13:return x._InflaterState.dCode;case 15:return x._InflaterState.unCompressedAligning;case 16:return x._InflaterState.unCompressedByte1;case 17:return x._InflaterState.unCompressedByte2;case 18:return x._InflaterState.unCompressedByte3;case 19:return x._InflaterState.unCompressedByte4;case 20:return x._InflaterState.decodeUnCompressedBytes;case 21:return x._InflaterState.srFooter;case 22:return x._InflaterState.rFooter;case 23:return x._InflaterState.vFooter;case 24:return x._InflaterState.done;default:return x._InflaterState.readingHeader}},Un.prototype._getInflaterStateValue=function(t){switch(t){case x._InflaterState.readingHeader:return 0;case x._InflaterState.readingBFinal:return 2;case x._InflaterState.readingBType:return 3;case x._InflaterState.readingNlCodes:return 4;case x._InflaterState.readingNdCodes:return 5;case x._InflaterState.readingCodes:return 6;case x._InflaterState.readingClCodes:return 7;case x._InflaterState.readingTcBefore:return 8;case x._InflaterState.readingTcAfter:return 9;case x._InflaterState.decodeTop:return 10;case x._InflaterState.iLength:return 11;case x._InflaterState.fLength:return 12;case x._InflaterState.dCode:return 13;case x._InflaterState.unCompressedAligning:return 15;case x._InflaterState.unCompressedByte1:return 16;case x._InflaterState.unCompressedByte2:return 17;case x._InflaterState.unCompressedByte3:return 18;case x._InflaterState.unCompressedByte4:return 19;case x._InflaterState.decodeUnCompressedBytes:return 20;case x._InflaterState.srFooter:return 21;case x._InflaterState.rFooter:return 22;case x._InflaterState.vFooter:return 23;case x._InflaterState.done:return 24;default:return 0}};var zn=Un;function Un(){this._extraLengthBits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],this._staticDistanceTreeTable=[0,16,8,24,4,20,12,28,2,18,10,26,6,22,14,30,1,17,9,25,5,21,13,29,3,19,11,27,7,23,15,31],this._lengthBase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],this._distanceBasePosition=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],this._codeOrder=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],this._bfinal=0,this._bLength=0,this._blBuffer=[0,0,0,0],this._blockType=x._BlockType.unCompressedType,this._caSize=0,this._clCodeCount=0,this._extraBits=0,this._lengthCode=0,this._length=0,this._llCodeCount=0,this._output=new Bn,this._input=new Mn,this._loopCounter=0,this._codeList=Array(jn._maxLengthTree+jn._maxDepthTree).fill(0),this._cltcl=Array(jn._nCLength).fill(0),this._inflaterState=x._InflaterState.readingBFinal}Wn.prototype._read=function(t,e,i){for(var r=e,n=i;;){var s=this._inflater._inflate(t,r,n),a=s.count;if(t=s.data,r+=a,0===(n-=a))break;if(this._inflater._finished)break;s=this._readBytes(),a=s.count;if(this._buffer=s.buffer,0===a)break;this._inflater._setInput(this._buffer,0,a)}return{count:i-n,data:t}},Wn.prototype._readBytes=function(){if(F(this._offset)&&this._offset>=this._data.length)return{buffer:[],count:0};for(var t=0,e=0;e<this._buffer.length&&e+this._offset<this._data.length;e++)this._buffer[Number.parseInt(e.toString(),10)]=this._data[this._offset+e],t++;return this._offset+=t,{buffer:this._buffer,count:t}};var Hn=Wn;function Wn(t,e,i){F(t)?this._data=t:this._data=[],F(i)&&(this._leaveOpen=i),this._offset=e,this._inflater=new zn,this._buffer=Array(8192).fill(0)}Gn=function(t,e){return(Gn=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}))(t,e)};(function(t,e){function i(){this.constructor=t}Gn(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(d,Kn=e),d.prototype._initialize=function(){for(var t,e=this._hasValidChunkType(void 0);e.hasValidChunk;){switch(t=e.type){case p.iHDR:this._readHeader();break;case p.iDAT:this._readImageData();break;case p.sRGB:this._isRedGreenBlue=!0,this._ignoreChunk();break;case p.pLTE:this._readPhotoPlate();break;case p.iEND:this._decodeImageData();break;case p.tRNS:this._readTransparency();break;case p.tEXt:case p.iTXt:case p.zTXt:case p.hIST:case p.sBIT:case p.iCCP:case p.pHYs:case p.tIME:case p.bKGD:case p.gAMA:case p.cHRM:case p.unknown:this._ignoreChunk()}e=this._hasValidChunkType(t)}},d.prototype._hasValidChunkType=function(t){var e;return t=p.unknown,this._position+8<=this._stream.byteLength?(this._currentChunkLength=this._readUnsigned32(this._position),this._seek(4),e=this._readString(4),null!=(e=this._getChunkType(e))?{type:t=e,hasValidChunk:!0}:this._stream.byteLength===this._position?{type:t,hasValidChunk:!1}:{type:t,hasValidChunk:!0}):{type:t,hasValidChunk:!1}},d.prototype._ignoreChunk=function(){0<this._currentChunkLength&&this._seek(this._currentChunkLength+4)},d.prototype._readHeader=function(){this._header=new Jn,this._header._width=this._readUnsigned32(this._position),this._seek(4),this._header._height=this._readUnsigned32(this._position),this._seek(4),this._header._bitDepth=this._readByte(),this._header._colorType=this._readByte(),this._header._compression=this._readByte(),this._header._filter=this._getFilterType(this._readByte()),this._header._interlace=this._readByte(),this._colors=3===this._header._colorType||0==(2&this._header._colorType)?1:3,this._width=this._header._width,this._height=this._header._height,this._bitsPerComponent=this._header._bitDepth,this._setBitsPerPixel(),this._seek(4)},d.prototype._setBitsPerPixel=function(){this._bitsPerPixel=16===this._header._bitDepth?2:1,0===this._header._colorType?(this._idatLength=Number.parseInt(((this._bitsPerComponent*this._width+7)/8).toString(),10)*this._height,this._inputBands=1):2===this._header._colorType?(this._idatLength=this._width*this._height*3,this._inputBands=3,this._bitsPerPixel*=3):3===this._header._colorType?(1!==this._header._interlace&&0!==this._header._interlace||(this._idatLength=Number.parseInt(((this._header._bitDepth*this._width+7)/8).toString(),10)*this._height),this._inputBands=1,this._bitsPerPixel=1):4===this._header._colorType?(this._idatLength=this._width*this._height,this._inputBands=2,this._bitsPerPixel*=2):6===this._header._colorType&&(this._idatLength=3*this._width*this._height,this._inputBands=4,this._bitsPerPixel*=4)},d.prototype._readImageData=function(){if(this._encodedStream&&0!==this._encodedStream.length||(this._encodedStream=[]),this._currentChunkLength<=this._stream.byteLength&&this._stream.byteLength-this._position>=this._currentChunkLength)for(var t=0;t<this._currentChunkLength;t++)this._encodedStream.push(this._readByte());this._seek(4)},d.prototype._readPhotoPlate=function(){var t;3===this._header._colorType?(this._colorSpace=[],this._colorSpace.push(L.get("Indexed")),this._colorSpace.push(this._getPngColorSpace()),this._colorSpace.push(this._currentChunkLength/3-1),t=new Uint8Array(this._currentChunkLength),this._read(t,0,this._currentChunkLength),this._colorSpace.push(_s(t)),this._seek(4)):this._ignoreChunk()},d.prototype._readTransparency=function(){if(3===this._header._colorType){var t=new Uint8Array(this._currentChunkLength);this._read(t,0,this._currentChunkLength),this._seek(4),this._alpha=[];for(var e=0;e<t.length;e++){this._alpha.push(t[Number.parseInt(e.toString(),10)]);var i=255&t[Number.parseInt(e.toString(),10)];0!=i&&255!=i&&(this._shades=!0)}}else this._ignoreChunk()},d.prototype._getPngColorSpace=function(){var t,e,i,r,n,s,a,o,h,c,_,d;return this._isRedGreenBlue?(t=[],d=[1,1,1],(e=new D).set("Gamma",[2.2,2.2,2.2]),this._isRedGreenBlue&&(r=.64*(i=.2126390058715103)/.33,a=.3*(s=-.0527286/(h=-.0737289))/.6,c=.15*(h=-.005321898/h)/.06,n=i*(.36/.33-1),o=s*(.7/.6-1),_=h*(.85/.06-1),d=[.9504300891509299,1,1.088921671149305],e.set("Matrix",[r,i,n,a,s,o,c,h,_])),e.set("WhitePoint",d),t.push(L.get("CalRGB")),t.push(e),t):0==(2&this._header._colorType)?L.get("DeviceGray"):L.get("DeviceRGB")},d.prototype._decodeImageData=function(){var t=this._header;this._isDecode=1===t._interlace||16===t._bitDepth||0!=(4&t._colorType)||this._shades,this._isDecode&&(0==(4&t._colorType)&&!this._shades||(this._maskData=Array(this._width*this._height).fill(0)),this._encodedStream&&(this._dataStream=this._getDeflatedData(this._encodedStream),this._dataStreamOffset=0),0<this._idatLength&&(this._decodedImageData=Array(this._idatLength).fill(0)),this._readDecodeData(),!this._decodedImageData||0!==this._decodedImageData.length||!this._shades)||(this._ideateDecode=!1,this._decodedImageData=this._encodedStream)},d.prototype._getDeflatedData=function(t){var t=t.slice(2,t.length-4),e=new Hn(t,0,!0),i=Array(4096).fill(0),r=[];do{for(var n=e._read(i,0,i.length),s=n.count,i=n.data,a=0;a<s;a++)r.push(i[Number.parseInt(a.toString(),10)])}while(0<s);return r},d.prototype._readDecodeData=function(){1!==this._header._interlace?this._decodeData(0,0,1,1,this._width,this._height):(this._decodeData(0,0,8,8,Math.floor((this._width+7)/8),Math.floor((this._height+7)/8)),this._decodeData(4,0,8,8,Math.floor((this._width+3)/8),Math.floor((this._height+7)/8)),this._decodeData(0,4,4,8,Math.floor((this._width+3)/4),Math.floor((this._height+3)/8)),this._decodeData(2,0,4,4,Math.floor((this._width+1)/4),Math.floor((this._height+3)/4)),this._decodeData(0,2,2,4,Math.floor((this._width+1)/2),Math.floor((this._height+1)/4)),this._decodeData(1,0,2,2,Math.floor(this._width/2),Math.floor((this._height+1)/2)),this._decodeData(0,1,1,2,this._width,Math.floor(this._height/2)))},d.prototype._decodeData=function(t,e,i,r,n,s){if(0!==n&&0!==s)for(var a=Math.floor((this._inputBands*n*this._header._bitDepth+7)/8),o=Array(a).fill(0),h=Array(a).fill(0),c=0,_=e;c<s;c++,_+=r){var d=this._dataStream[this._dataStreamOffset];switch(this._dataStreamOffset=this._dataStreamOffset+1,this._dataStreamOffset=this._readStream(this._dataStream,this._dataStreamOffset,o,a),this._getFilterType(d)){case qn.none:break;case qn.sub:this._decompressSub(o,a,this._bitsPerPixel);break;case qn.up:this._decompressUp(o,h,a);break;case qn.average:this._decompressAverage(o,h,a,this._bitsPerPixel);break;case qn.paeth:this._decompressPaeth(o,h,a,this._bitsPerPixel);break;default:throw new Error("Unknown PNG filter")}this._processPixels(o,t,i,_,n);d=h,h=o,o=d}},d.prototype._readStream=function(t,e,i,r){r=this._read(i,e,r,t);if(i=r.outputBuffer,e=r.offset,r.length<=0)throw new Error("Insufficient data");return e},d.prototype._decompressSub=function(t,e,i){for(var r=i;r<e;r++)t[Number.parseInt(r.toString(),10)]=f((255&t[Number.parseInt(r.toString(),10)])+(255&t[r-i]),8)},d.prototype._decompressUp=function(t,e,i){for(var r=0;r<i;r++)t[Number.parseInt(r.toString(),10)]=f((255&t[Number.parseInt(r.toString(),10)])+(255&e[Number.parseInt(r.toString(),10)]),8)},d.prototype._decompressAverage=function(t,e,i,r){for(var n,s,a,o=0;o<r;o++)n=255&t[Number.parseInt(o.toString(),10)],a=255&e[Number.parseInt(o.toString(),10)],t[Number.parseInt(o.toString(),10)]=f(Math.floor(n+a/2),8);for(o=r;o<i;o++)n=255&t[Number.parseInt(o.toString(),10)],s=255&t[o-r],a=255&e[Number.parseInt(o.toString(),10)],t[Number.parseInt(o.toString(),10)]=f(Math.floor(n+Math.floor((s+a)/2)),8)},d.prototype._decompressPaeth=function(t,e,i,r){for(var n,s,a,o,h=0;h<r;h++)n=255&t[Number.parseInt(h.toString(),10)],a=255&e[Number.parseInt(h.toString(),10)],t[Number.parseInt(h.toString(),10)]=f(n+a,8);for(h=r;h<i;h++)n=255&t[Number.parseInt(h.toString(),10)],s=255&t[h-r],a=255&e[Number.parseInt(h.toString(),10)],o=255&e[h-r],t[Number.parseInt(h.toString(),10)]=f(n+this._paethPredictor(s,a,o),8)},d.prototype._paethPredictor=function(t,e,i){var r=t+e-i,n=Math.abs(r-t),s=Math.abs(r-e),r=Math.abs(r-i);return n<=s&&n<=r?t:s<=r?e:i},d.prototype._processPixels=function(t,e,i,r,n){var s=0,a=0,o=0,h=this._getPixel(t);if(0===this._header._colorType||3===this._header._colorType||4===this._header._colorType?o=1:2!==this._header._colorType&&6!==this._header._colorType||(o=3),this._decodedImageData&&0<this._decodedImageData.length)for(var a=e,t=16===this._header._bitDepth?8:this._header._bitDepth,c=Math.floor((o*n*t+7)/8),s=0;s<n;s++)this._decodedImageData=this._setPixel(this._decodedImageData,h,this._inputBands*s,o,a,r,this._header._bitDepth,c),a+=i;if(0!=(4&this._header._colorType)||this._shades)if(0!=(4&this._header._colorType)){if(16===this._header._bitDepth)for(var _=0;_<n;++_){var d=_*this._inputBands+o,p=f(h[Number.parseInt(d.toString(),10)],32);h[Number.parseInt(d.toString(),10)]=p>>8<<0}c=n;for(a=e,s=0;s<n;s++)this._maskData=this._setPixel(this._maskData,h,this._inputBands*s+o,1,a,r,8,c),a+=i}else{var c=n,l=[0];for(a=e,s=0;s<n;s++){var u=h[Number.parseInt(s.toString(),10)];u<this._alpha.length?l[0]=this._alpha[Number.parseInt(u.toString(),10)]:l[0]=255,this._maskData=this._setPixel(this._maskData,l,0,1,a,r,8,c),a+=i}}},d.prototype._getPixel=function(t){if(8===this._header._bitDepth)for(var e=Array(t.length).fill(0),i=0;i<e.length;++i)e[Number.parseInt(i.toString(),10)]=255&t[Number.parseInt(i.toString(),10)];else if(16===this._header._bitDepth)for(e=Array(Math.floor(t.length/2)).fill(0),i=0;i<e.length;++i)e[Number.parseInt(i.toString(),10)]=((255&t[2*i])<<8)+(255&t[2*i+1]);else for(var e=Array(Math.floor(8*t.length/this._header._bitDepth)).fill(0),r=0,n=Math.floor(8/this._header._bitDepth),s=(1<<this._header._bitDepth)-1,a=0;a<t.length;++a)for(i=n-1;0<=i;--i){var o=this._header._bitDepth*i,h=t[Number.parseInt(a.toString(),10)];e[r++]=(o<1?h:f(h,32)>>o<<0)&s}return e},d.prototype._setPixel=function(t,e,i,r,n,s,a,o){if(8===a)for(var h=o*s+r*n,c=0;c<r;++c)t[h+c]=f(e[c+i],8);else if(16===a)for(h=o*s+r*n,c=0;c<r;++c)t[h+c]=f(e[c+i]>>8,8);else{h=Math.floor((o*s+n)/(8/a)),o=e[Number.parseInt(i.toString(),10)]<<Number.parseInt((8-a*(n%(8/a))-a).toString(),10);t[Number.parseInt(h.toString(),10)]=t[Number.parseInt(h.toString(),10)]|f(o,8)}return t},d.prototype._getImageDictionary=function(){this._imageStream=new g([],new D),this._imageStream.isImageStream=!0;for(var t="",e=0;e<this._decodedImageData.length;e++)t+=String.fromCharCode(this._decodedImageData[Number.parseInt(e.toString(),10)]);this._imageStream.data=[t],this._imageStream._isCompress=this._isDecode&&this._ideateDecode;var i=new D;i.set("Type",new L("XObject")),i.set("Subtype",new L("Image")),i.set("Width",this._width),i.set("Height",this._height),16===this._bitsPerComponent?i.set("BitsPerComponent",8):i.set("BitsPerComponent",this._bitsPerComponent),this._isDecode&&this._ideateDecode||i.set("Filter",new L("FlateDecode")),0==(2&this._header._colorType)?i.set("ColorSpace",L.get("DeviceGray")):i.set("ColorSpace",L.get("DeviceRGB")),this._isDecode&&(!this._shades||this._ideateDecode)||i.set("DecodeParms",this._getDecodeParams()),this._imageStream.dictionary=i,this._imageStream.bytes=new Uint8Array(this._imageStream.data[0].length);for(e=0;e<this._imageStream.data[0].length;e++)this._imageStream.bytes[Number.parseInt(e.toString(),10)]=this._imageStream.data[0].charCodeAt(e);return this._imageStream.end=this._imageStream.bytes.length,this._imageStream.dictionary._updated=!0,this._setMask(),this._imageStream},d.prototype._setMask=function(){var t;this._maskData&&0<this._maskData.length&&(this._maskStream=new g(this._maskData,new D),this._maskStream._isCompress=this._isDecode&&this._ideateDecode,(t=new D).set("Type",new L("XObject")),t.set("Subtype",new L("Image")),t.set("Width",this._width),t.set("Height",this._height),16===this._bitsPerComponent?t.set("BitsPerComponent",8):t.set("BitsPerComponent",this._bitsPerComponent),t.set("ColorSpace",L.get("DeviceGray")),this._maskStream.dictionary=t,this._maskStream.bytes=new Uint8Array(this._maskData),this._maskStream.end=this._maskStream.bytes.length,this._maskStream.dictionary._updated=!0)},d.prototype._getDecodeParams=function(){var t=new D;return t.set("Columns",this._width),t.set("Colors",this._colors),t.set("Predictor",15),t.set("BitsPerComponent",this._bitsPerComponent),t},d.prototype._getChunkType=function(t){switch(t){case"IHDR":return p.iHDR;case"PLTE":return p.pLTE;case"IDAT":return p.iDAT;case"IEND":return p.iEND;case"bKGD":return p.bKGD;case"cHRM":return p.cHRM;case"gAMA":return p.gAMA;case"hIST":return p.hIST;case"pHYs":return p.pHYs;case"sBIT":return p.sBIT;case"tEXt":return p.tEXt;case"tIME":return p.tIME;case"tRNS":return p.tRNS;case"zTXt":return p.zTXt;case"sRGB":return p.sRGB;case"iCCP":return p.iCCP;case"iTXt":return p.iTXt;case"Unknown":return p.unknown;default:return null}},d.prototype._getFilterType=function(t){switch(t){case 1:return qn.sub;case 2:return qn.up;case 3:return qn.average;case 4:return qn.paeth;default:return qn.none}};var Gn,Kn,Xn=d;function d(t){var e=Kn.call(this)||this;return e._stream=t,e._format=x._ImageFormat.png,e._isRedGreenBlue=!1,e._isDecode=!1,e._shades=!1,e._ideateDecode=!0,e._colors=0,e._bitsPerPixel=0,e._idatLength=0,e._inputBands=0,e._position=8,e._initialize(),e}var p,qn,Qn,Jn=function(){this._width=0,this._height=0,this._colorType=0,this._compression=0,this._bitDepth=0,this._interlace=0,this._filter=qn.none},l=((l=p=p||{})[l.iHDR=0]="iHDR",l[l.pLTE=1]="pLTE",l[l.iDAT=2]="iDAT",l[l.iEND=3]="iEND",l[l.bKGD=4]="bKGD",l[l.cHRM=5]="cHRM",l[l.gAMA=6]="gAMA",l[l.hIST=7]="hIST",l[l.pHYs=8]="pHYs",l[l.sBIT=9]="sBIT",l[l.tEXt=10]="tEXt",l[l.tIME=11]="tIME",l[l.tRNS=12]="tRNS",l[l.zTXt=13]="zTXt",l[l.sRGB=14]="sRGB",l[l.iCCP=15]="iCCP",l[l.iTXt=16]="iTXt",l[l.unknown=17]="unknown",(l=qn=qn||{})[l.none=0]="none",l[l.sub=1]="sub",l[l.up=2]="up",l[l.average=3]="average",l[l.paeth=4]="paeth",Qn=function(t,e){return(Qn=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}))(t,e)},function(t,e){function i(){this.constructor=t}Qn(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});function f(t,e){return t&Math.pow(2,e)-1}function Yn(t){return t<<16>>16}function Zn(t){return t<<0}function $n(t,e,i,r,n){null==r&&(r=0),n=void 0===n?i.length:n,r=Math.max(0,Math.min(i.length,r)),e+((n=Math.max(0,Math.min(i.length,n)))-r)>t.length&&(t.length=e+(n-r));for(var s=r,a=e;s<n;s++,a++)t[Number.parseInt(a.toString(),10)]=i[Number.parseInt(s.toString(),10)]}function ts(t,e){for(var i=0;i<e.length;i++)if(e[Number.parseInt(i.toString(),10)]!==t[Number.parseInt(i.toString(),10)])return!1;return!0}function es(t){var e;if(ts(t,[255,216]))e=new Ln(t);else{if(!ts(t,[137,80,78,71,13,10,26,10]))throw new Error("Unsupported image format");e=new Xn(t)}return e}function is(t,e,i){var r=0;return i=null==i?0:i,t.rotation===x.PdfRotationAngle.angle90?r=null==e?0:i:t.rotation===x.PdfRotationAngle.angle180?r=null==e?0:e:t.rotation===x.PdfRotationAngle.angle270&&(t=t.size,r=null==e?0:t[0]-i),r}function rs(t,e){for(var i=-1,r=0;r<t.pageCount;r++)if(t.getPage(r)._pageDictionary===e){i=r;break}return i}function ns(t){var e=[];return 0!=(t&x.PdfAnnotationFlag.hidden)&&e.push("hidden"),0!=(t&x.PdfAnnotationFlag.invisible)&&e.push("invisible"),0!=(t&x.PdfAnnotationFlag.locked)&&e.push("locked"),0!=(t&x.PdfAnnotationFlag.noRotate)&&e.push("norotate"),0!=(t&x.PdfAnnotationFlag.noView)&&e.push("noview"),0!=(t&x.PdfAnnotationFlag.noZoom)&&e.push("nozoom"),0!=(t&x.PdfAnnotationFlag.print)&&e.push("print"),0!=(t&x.PdfAnnotationFlag.readOnly)&&e.push("readonly"),0!=(t&x.PdfAnnotationFlag.toggleNoView)&&e.push("togglenoview"),0!=(t&x.PdfAnnotationFlag.default)&&e.push("default"),e.join(",")}function ss(t){switch(t){case"hidden":return x.PdfAnnotationFlag.hidden;case"invisible":return x.PdfAnnotationFlag.invisible;case"locked":return x.PdfAnnotationFlag.locked;case"norotate":return x.PdfAnnotationFlag.noRotate;case"noview":return x.PdfAnnotationFlag.noView;case"nozoom":return x.PdfAnnotationFlag.noZoom;case"print":return x.PdfAnnotationFlag.print;case"readonly":return x.PdfAnnotationFlag.readOnly;case"togglenoview":return x.PdfAnnotationFlag.toggleNoView;default:return x.PdfAnnotationFlag.default}}function as(t){if("string"==typeof t&&0<t.length&&t.charCodeAt(0)>="".charCodeAt(0)){var e=void 0;if(""===t[0]&&""===t[1]&&""===t[2]?e="utf-8":""===t[0]&&""===t[1]?e="utf-16le":""===t[0]&&""===t[1]&&(e="utf-16be"),e)try{return new TextDecoder(e,{fatal:!0}).decode(w(t))}catch(t){}}for(var i=[],r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364],n=0;n<t.length;n++){var s=r[t.charCodeAt(n)];i.push(s?String.fromCharCode(s):t.charAt(n))}return i.join("")}function w(t,e,i,r){void 0===e&&(e=!1);var n=r?r:[];if(i=void 0===i?!1:i)for(var s=0;s<t.length;s++)n.push(t.charCodeAt(s));else for(s=0;s<t.length;s++){var a=t.charCodeAt(s);a<128?n.push(a):(a<2048?n.push(a>>6|192):(a<55296||57344<=a?n.push(a>>12|224):(s++,a=65536+((1023&a)<<10|1023&t.charCodeAt(s)),n.push(a>>18|240),n.push(a>>12&63|128)),n.push(a>>6&63|128)),n.push(63&a|128))}return e?n:new Uint8Array(n)}function os(t,e){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(t[Number.parseInt(i.toString(),10)]!==e[Number.parseInt(i.toString(),10)])return!1;return!0}function hs(t){return Number.isInteger(t)?t.toString():t.toFixed(7)}function cs(t,e){var i=!1;if(t.length!==e.length)return!0;for(var r=0;r<t.length;r++)if(t[r]!==e[r]){i=!0;break}return i}function _s(t,e){void 0===e&&(e=!1);var i=t.length,r=[];if(i<8192)return e?ds(t):String.fromCharCode.apply(null,t);for(var n=0;n<i;n+=8192){var s=Math.min(n+8192,i),s=t.subarray(n,s);r.push(e?ds(s):String.fromCharCode.apply(null,s))}return r.join("")}function ds(t){for(var e="",i=0;i<t.length;){var r=t[i++];r<128?e+=String.fromCharCode(r):r<224?e+=String.fromCharCode((31&r)<<6|63&t[i++]):r<240?e+=String.fromCharCode((15&r)<<12|(63&t[i++])<<6|63&t[i++]):(r=(7&r)<<18|(63&t[i++])<<12|(63&t[i++])<<6|(63&t[i++])-65536,e+=String.fromCharCode(55296+(r>>10),56320+(1023&r)))}return e}function ps(t){var e=[];if(null!=t)for(var i=0;i<t.length;i++){var r=t.charCodeAt(i);e.push(r/256>>>0),e.push(255&r)}return new Uint8Array(e)}function ls(t){for(var e,i=[],r=0;r<t.length;r++)(e=t[Number.parseInt(r.toString(),10)].toString(16).toUpperCase()).length<2&&(e="0"+e),i.push(e);return i.join("")}function us(t,e){void 0===e&&(e=!1);var i=[];if(t)for(var r=0;r<t.length;r+=2)i.push(Number.parseInt(t.substring(r,r+2),16));return e?i:new Uint8Array(i)}function fs(t){var e="";if(t&&"#"===t[0]){t=t.substring(1);for(var i=0;i<t.length;i+=2)e+=String.fromCharCode(Number.parseInt(t.substring(i,i+2),16));return e}return t}function gs(t){return 32===t||9===t||13===t||10===t}function ys(t,e){void 0===e&&(e=!1);if(3e6<=t.length){t=t.replace(/[^A-Za-z0-9+/=]/g,"");for(var i=[],r=0,n=0;n<t.length;n+=3e6){var s=function(t){for(var e,i,r,n,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0,o=0,h=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4,c=(t.charAt(t.length-1)===s.charAt(64)&&h--,new Array(0|h));a<t.length;)i=s.indexOf(t.charAt(a++)),e=(15&(r=s.indexOf(t.charAt(a++))))<<4|(n=s.indexOf(t.charAt(a++)))>>2,n=(3&n)<<6|s.indexOf(t.charAt(a++)),o<h&&(c[o++]=i<<2|r>>4),o<h&&(c[o++]=e),o<h&&(c[o++]=n);return new Uint8Array(c)}(_=t.substring(n,n+3e6));i.push(s),r+=s.length}for(var a=new Uint8Array(r),o=0,h=0,c=i;h<c.length;h++){var _=c[h];a.set(_,o),o+=_.length}return e?Array.from(a):a}for(var d,p,l,u,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=0,g=0,r=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4,a=(t.charAt(t.length-1)===f.charAt(64)&&r--,new Array(0|r));n<t.length;)p=f.indexOf(t.charAt(n++)),d=(15&(l=f.indexOf(t.charAt(n++))))<<4|(u=f.indexOf(t.charAt(n++)))>>2,u=(3&u)<<6|f.indexOf(t.charAt(n++)),g<r&&(a[g++]=p<<2|l>>4),g<r&&(a[g++]=d),g<r&&(a[g++]=u);return e?a:new Uint8Array(a)}function ms(t,e){void 0===e&&(e=!1);for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r=[],n=t.length,s=0;s<n;){var a=t[s++],o=s<n?t[s++]:0,h=s<n?t[s++]:0,c=a>>2,a=(3&a)<<4|o>>4,o=(15&o)<<2|h>>6,h=63&h;r.push(i[Number.parseInt(c.toString(),10)],i[Number.parseInt(a.toString(),10)],n<s-1?"=":i[Number.parseInt(o.toString(),10)],n<s?"=":i[Number.parseInt(h.toString(),10)])}return e&&(n%3==1?(r[r.length-1]="=",r[r.length-2]="="):n%3==2&&(r[r.length-1]="=")),r.join("")}function bs(t){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i=t.length;if(3e6<=i){var r=[];if(3e6<i)for(var n=0;n<i;n+=3e6){var s=t.subarray(n,Math.min(n+3e6,i));i<=n+3e6?r.push(ms(s,!0)):r.push(ms(s))}else r.push(ms(t,!0));return r.join("")}for(var r="",a=0,o=0;o<t.length;o++)o%3==0?(a=t[Number.parseInt(o.toString(),10)]>>2,r+=e[Number.parseInt(a.toString(),10)],a=t[Number.parseInt(o.toString(),10)]<<4&63):o%3==1?(a+=t[Number.parseInt(o.toString(),10)]>>4,r+=e[Number.parseInt(a.toString(),10)],a=t[Number.parseInt(o.toString(),10)]<<2&63):o%3==2&&(a+=t[Number.parseInt(o.toString(),10)]>>6,r+=e[Number.parseInt(a.toString(),10)],a=63&t[Number.parseInt(o.toString(),10)],r+=e[Number.parseInt(a.toString(),10)]);return t.length%3==1&&(r+=e[Number.parseInt(a.toString(),10)]+"=="),t.length%3==2&&(r+=e[Number.parseInt(a.toString(),10)]+"="),r}function Ss(t,e,i,r){void 0===i&&(i=!1),void 0===r&&(r=!0);for(var n,s=[],a=4;a<arguments.length;a++)s[a-4]=arguments[a];for(var o=new Set;t instanceof D&&t.objId&&!o.has(t.objId);){t.objId&&o.add(t.objId);var h=i?t.getArray(e):t.get(e);if(void 0!==h){if(r)return h;(n=n||[]).push(h)}for(var c=0,_=!1;c<s.length;){var d=s[c];if(t.has(d)){t=t.get(d),_=!0;break}c++}if(!_)break}return n}function ws(t,e){var i,r,n,s,a={x:0,y:0,width:0,height:0},t=t.getArray("Rect");return t&&Array.isArray(t)&&(i=t[0],r=t[1],n=t[2],s=t[3],void 0!==i)&&void 0!==r&&void 0!==n&&void 0!==s&&(a.x=Math.min(i,n),a.y=Math.min(r,s),a.width=Math.max(i,n)-a.x,a.height=Math.max(r,s)-a.y,e)&&(a.height=parseFloat(a.height.toFixed(3)),t[1]<0)&&(a.y=t[1],t[1]>t[3])&&(a.y-=a.height),a}function vs(t,e){var i,r,n;return t.has("Rect")&&(n=ws(t),e?(t=e.size,i=e.mediaBox,(r=e.cropBox)&&Array.isArray(r)&&4===r.length&&e._pageDictionary.has("CropBox")?0===r[0]&&0===r[1]&&t[0]!==r[2]&&t[1]!==r[3]||n.x===r[0]?n.y=t[1]-(n.y+n.height):(n.x-=r[0],n.y=r[3]-(n.y+n.height)):i&&Array.isArray(i)&&4===i.length&&e._pageDictionary.has("MediaBox")&&(0<i[0]||0<i[1]||t[0]===i[2]||t[1]===i[3])?(n.x-=i[0],n.y=i[3]-(n.y+n.height)):n.y=t[1]-(n.y+n.height)):n.y=n.y+n.height),n}function Ps(t){return{x:Math.min(t[0],t[2]),y:Math.min(t[1],t[3]),width:Math.abs(t[0]-t[2]),height:Math.abs(t[1]-t[3])}}function As(t){return[t.x,t.y,t.x+t.width,t.y+t.height]}function xs(t,e){var i,r,n,s=t[0],a=t[1],o=t[2],t=t[3];return e&&(i=(r=e.size)[0],r=r[1],n=e.mediaBox,a=(e=e.cropBox)&&Array.isArray(e)&&4===e.length?0!==e[0]||0!==e[1]||i===e[2]||r===e[3]?(s+=e[0],e[3]-(a+t)):r-(a+t):n&&Array.isArray(n)&&4===n.length&&(0<n[0]||0<n[1]||i===n[2]||r===n[3])?(s-=n[0],n[3]-(a+t)):r-(a+t)),[s,a,s+o,a+t]}function ks(t){var e=Gs(t);return e||(t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t))&&(e=[Number.parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]),e}function Is(t){var e,i,r,n;return t&&(1===t.length?void 0!==(i=t[0])&&(e=[i=Math.round(255*i),i,i]):3===t.length?(i=t[0],r=t[1],n=t[2],void 0!==i&&void 0!==r&&void 0!==n&&(e=[Math.round(255*i),Math.round(255*r),Math.round(255*n)])):4===t.length&&(i=t[0],r=t[1],n=t[2],t=t[3],void 0!==i)&&void 0!==r&&void 0!==n&&void 0!==t&&(t=255*t,e=[Math.round(255-Math.min(255,i*(255-t)+t)),Math.round(255-Math.min(255,r*(255-t)+t)),Math.round(255-Math.min(255,n*(255-t)+t))])),e}function Cs(t){var e="S";switch(t){case x.PdfBorderStyle.dot:case x.PdfBorderStyle.dashed:e="D";break;case x.PdfBorderStyle.beveled:e="B";break;case x.PdfBorderStyle.inset:e="I";break;case x.PdfBorderStyle.underline:e="U"}return L.get(e)}function Ts(t){var e=x.PdfBorderEffectStyle.solid;return e="C"===t?x.PdfBorderEffectStyle.cloudy:e}function Ns(t){var e="None";if(void 0!==t)switch(t){case x.PdfLineEndingStyle.openArrow:e="OpenArrow";break;case x.PdfLineEndingStyle.closedArrow:e="ClosedArrow";break;case x.PdfLineEndingStyle.rOpenArrow:e="ROpenArrow";break;case x.PdfLineEndingStyle.rClosedArrow:e="RClosedArrow";break;case x.PdfLineEndingStyle.butt:e="Butt";break;case x.PdfLineEndingStyle.diamond:e="Diamond";break;case x.PdfLineEndingStyle.circle:e="Circle";break;case x.PdfLineEndingStyle.square:e="Square";break;case x.PdfLineEndingStyle.slash:e="Slash"}return e}function Rs(t,e){var i=void 0!==e?e:x.PdfLineEndingStyle.none;switch(t.toLowerCase()){case"openarrow":i=x.PdfLineEndingStyle.openArrow;break;case"closedarrow":i=x.PdfLineEndingStyle.closedArrow;break;case"ropenarrow":i=x.PdfLineEndingStyle.rOpenArrow;break;case"rclosedarrow":i=x.PdfLineEndingStyle.rClosedArrow;break;case"butt":i=x.PdfLineEndingStyle.butt;break;case"diamond":i=x.PdfLineEndingStyle.diamond;break;case"circle":i=x.PdfLineEndingStyle.circle;break;case"square":i=x.PdfLineEndingStyle.square;break;case"slash":i=x.PdfLineEndingStyle.slash}return i}function Fs(t){switch(t){case"P":return x.PdfHighlightMode.push;case"N":return x.PdfHighlightMode.noHighlighting;case"O":return x.PdfHighlightMode.outline;default:return x.PdfHighlightMode.invert}}function Ls(t){switch(t){case x.PdfHighlightMode.push:return L.get("P");case x.PdfHighlightMode.noHighlighting:return L.get("N");case x.PdfHighlightMode.outline:return L.get("O");default:return L.get("I")}}function Ds(t){var e="Normal";switch(t){case x.PdfBlendMode.multiply:e="Multiply";break;case x.PdfBlendMode.screen:e="Screen";break;case x.PdfBlendMode.overlay:e="Overlay";break;case x.PdfBlendMode.darken:e="Darken";break;case x.PdfBlendMode.lighten:e="Lighten";break;case x.PdfBlendMode.colorDodge:e="ColorDodge";break;case x.PdfBlendMode.colorBurn:e="ColorBurn";break;case x.PdfBlendMode.hardLight:e="HardLight";break;case x.PdfBlendMode.softLight:e="SoftLight";break;case x.PdfBlendMode.difference:e="Difference";break;case x.PdfBlendMode.exclusion:e="Exclusion";break;case x.PdfBlendMode.hue:e="Hue";break;case x.PdfBlendMode.saturation:e="Saturation";break;case x.PdfBlendMode.color:e="Color";break;case x.PdfBlendMode.luminosity:e="Luminosity";break;default:e="Normal"}return L.get(e)}function Bs(t){var e=x.PdfBlendMode.normal;switch(t.name){case"Multiply":e=x.PdfBlendMode.multiply;break;case"Screen":e=x.PdfBlendMode.screen;break;case"Overlay":e=x.PdfBlendMode.overlay;break;case"Darken":e=x.PdfBlendMode.darken;break;case"Lighten":e=x.PdfBlendMode.lighten;break;case"ColorDodge":e=x.PdfBlendMode.colorDodge;break;case"ColorBurn":e=x.PdfBlendMode.colorBurn;break;case"HardLight":e=x.PdfBlendMode.hardLight;break;case"SoftLight":e=x.PdfBlendMode.softLight;break;case"Difference":e=x.PdfBlendMode.difference;break;case"Exclusion":e=x.PdfBlendMode.exclusion;break;case"Hue":e=x.PdfBlendMode.hue;break;case"Saturation":e=x.PdfBlendMode.saturation;break;case"Color":e=x.PdfBlendMode.color;break;case"Luminosity":e=x.PdfBlendMode.luminosity;break;default:e=x.PdfBlendMode.normal}return e}function Os(t){t=t.toFixed(2);return t="0.00"===t?".00":t}function Ms(t,e){var i,t=L.get(t);e.has("ProcSet")?(i=e.getArray("ProcSet"))&&-1===i.indexOf(t)&&(i.push(t),e.update("ProcSet",i)):e.update("ProcSet",[t])}function Es(){return"aaaaaaaa-aaaa-4aaa-baaa-aaaaaaaaaaaa".replace(/[ab]/g,function(t){var e=16*Math.random()|0;return("a"===t?e:3&e|8).toString(16)})}function js(t){for(var e=[],i=0,r=0;r<t.length;r++){var n=t.charCodeAt(r);(n<33||126<n||35===n||40===n||41===n||60===n||62===n||91===n||93===n||123===n||125===n||47===n||37===n)&&(i<r&&e.push(t.substring(i,r)),e.push("#"+n.toString(16)),i=r+1)}return 0===e.length?t:(i<t.length&&e.push(t.substring(i,t.length)),e.join(""))}function Vs(t,e,i,r,n,s){i<t&&(p=t,t=i,i=p),e<r&&(p=e,e=r,r=p),Math.abs(s)<=90?(a=s,o=1):a=s/(o=Math.ceil(Math.abs(s)/90));for(var a,o,h=(t+i)/2,c=(e+r)/2,_=(i-t)/2,d=(r-e)/2,p=a*(Math.PI/360),l=Math.abs(4/3*(1-Math.cos(p))/Math.sin(p)),u=[],f=0;f<o;f++){var g=(n+f*a)*(Math.PI/180),y=(n+(f+1)*a)*(Math.PI/180),m=Math.cos(g),b=Math.cos(y),g=Math.sin(g),y=Math.sin(y);0<a?(u.push(h+_*m),u.push(c-d*g),u.push(h+_*(m-l*g)),u.push(c-d*(g+l*m)),u.push(h+_*(b+l*y)),u.push(c-d*(y-l*b))):(u.push(h+_*m),u.push(c-d*g),u.push(h+_*(m+l*g)),u.push(c-d*(g-l*m)),u.push(h+_*(b-l*y)),u.push(c-d*(y+l*b))),u.push(h+_*b),u.push(c-d*y)}return u}function zs(t,e){for(var i,r=0;r<t.pageCount&&void 0===i;r++){var n=t.getPage(r);if(n&&n._pageDictionary.has("Annots")){var s=n._pageDictionary.get("Annots");if(null!=s&&0<s.length)for(var a=0;a<s.length&&void 0===i;a++){var o=s[Number.parseInt(a.toString(),10)];null!=o&&o instanceof A&&o===e&&(i=n)}}}return i}function Us(t){var e,i=!1;return t.has("AS")&&((e=t.get("AS"))?i="Off"!==e.name:(e=t.get("V"))&&(i=e.name===Hs(t))),i}function Hs(t){var e="";if(""===(e=t.has("AS")&&null!==(i=t.get("AS"))&&"Off"!==i.name?i.name:e)&&t.has("AP")){var i=t.get("AP");if(i&&i.has("N")){t=i.get("N");if((t=t instanceof y?t.dictionary:t)&&t instanceof D){var r=[];t.forEach(function(t,e){r.push(t)});for(var n=0;n<r.length;n++)if("Off"!==r[Number.parseInt(n.toString(),10)]){e=r[Number.parseInt(n.toString(),10)];break}}}}return e}function Ws(t,e){var i,r,n,t=t===x._PdfCheckFieldState.checked?Hs(e._dictionary):"Off";return i=e._dictionary.has("AP")&&(n=e._dictionary.get("AP"))&&n.has("N")&&(n=(n=n.get("N"))&&n instanceof y?n.dictionary:n)&&n instanceof D&&t&&""!==t&&n.has(t)&&(r=n.get(t),(n=n.getRaw(t))&&(r.reference=n),r)?new N(r,e._crossReference):i}function Gs(t){var e;switch(t){case"transparent":e=[255,255,255];break;case"aliceblue":e=[240,248,255];break;case"antiquewhite":e=[250,235,215];break;case"aqua":e=[0,255,255];break;case"aquamarine":e=[127,255,212];break;case"azure":e=[240,255,255];break;case"beige":e=[245,245,220];break;case"bisque":e=[255,228,196];break;case"black":e=[0,0,0];break;case"blanchedalmond":e=[255,235,205];break;case"blue":e=[0,0,255];break;case"blueviolet":e=[138,43,226];break;case"brown":e=[165,42,42];break;case"burlywood":e=[222,184,135];break;case"cadetBlue":e=[95,158,160];break;case"chartreuse":e=[127,255,0];break;case"chocolate":e=[210,105,30];break;case"coral":e=[255,127,80];break;case"cornflowerblue":e=[100,149,237];break;case"cornsilk":e=[255,248,220];break;case"crimson":e=[220,20,60];break;case"cyan":e=[0,255,255];break;case"darkblue":e=[0,0,139];break;case"darkcyan":e=[0,139,139];break;case"darkgoldenrod":e=[184,134,11];break;case"darkgray":e=[169,169,169];break;case"darkgreen":e=[0,100,0];break;case"darkkhaki":e=[189,183,107];break;case"darkmagenta":e=[139,0,139];break;case"darkolivegreen":e=[85,107,47];break;case"darkorange":e=[255,140,0];break;case"darkorchid":e=[153,50,204];break;case"darkred":e=[139,0,0];break;case"darksalmon":e=[233,150,122];break;case"darkseagreen":e=[143,188,139];break;case"darkslateblue":e=[72,61,139];break;case"darkslategray":e=[47,79,79];break;case"darkturquoise":e=[0,206,209];break;case"darkviolet":e=[148,0,211];break;case"deeppink":e=[255,20,147];break;case"deepskyblue":e=[0,191,255];break;case"dimgray":e=[105,105,105];break;case"dodgerblue":e=[30,144,255];break;case"firebrick":e=[178,34,34];break;case"floralwhite":e=[255,250,240];break;case"forestgreen":e=[34,139,34];break;case"fuchsia":e=[255,0,255];break;case"gainsboro":e=[220,220,220];break;case"ghostwhite":e=[248,248,255];break;case"gold":e=[255,215,0];break;case"goldenrod":e=[218,165,32];break;case"gray":e=[128,128,128];break;case"green":e=[0,128,0];break;case"greenyellow":e=[173,255,47];break;case"honeydew":e=[240,255,240];break;case"hotpink":e=[255,105,180];break;case"indianred":e=[205,92,92];break;case"indigo":e=[75,0,130];break;case"ivory":e=[255,255,240];break;case"khaki":e=[240,230,140];break;case"lavender":e=[230,230,250];break;case"lavenderblush":e=[255,240,245];break;case"lawngreen":e=[124,252,0];break;case"lemonchiffon":e=[255,250,205];break;case"lightblue":e=[173,216,230];break;case"lightcoral":e=[240,128,128];break;case"lightcyan":e=[224,255,255];break;case"lightgoldenrodyellow":e=[250,250,210];break;case"lightgreen":e=[144,238,144];break;case"lightgray":e=[211,211,211];break;case"LightPink":e=[255,182,193];break;case"lightsalmon":e=[255,160,122];break;case"lightseagreen":e=[32,178,170];break;case"lightskyblue":e=[135,206,250];break;case"lightslategray":e=[119,136,153];break;case"lightsteelblue":e=[176,196,222];break;case"lightyellow":e=[255,255,224];break;case"lime":e=[0,255,0];break;case"limeGreen":e=[50,205,50];break;case"linen":e=[250,240,230];break;case"magenta":e=[255,0,255];break;case"maroon":e=[128,0,0];break;case"mediumaquamarine":e=[102,205,170];break;case"mediumblue":e=[0,0,205];break;case"mediumorchid":e=[186,85,211];break;case"mediumpurple":e=[147,112,219];break;case"mediumseagreen":e=[60,179,113];break;case"mediumslateblue":e=[123,104,238];break;case"mediumspringgreen":e=[0,250,154];break;case"mediumturquoise":e=[72,209,204];break;case"mediumvioletred":e=[199,21,133];break;case"midnightblue":e=[25,25,112];break;case"mintcream":e=[245,255,250];break;case"mistyrose":e=[255,228,225];break;case"moccasin":e=[255,228,181];break;case"navajowhite":e=[255,222,173];break;case"navy":e=[0,0,128];break;case"oldLace":e=[253,245,230];break;case"olive":e=[128,128,0];break;case"olivedrab":e=[107,142,35];break;case"orange":e=[255,165,0];break;case"orangered":e=[255,69,0];break;case"orchid":e=[218,112,214];break;case"palegoldenrod":e=[238,232,170];break;case"palegreen":e=[152,251,152];break;case"paleturquoise":e=[175,238,238];break;case"palebioletred":e=[219,112,147];break;case"papayawhip":e=[255,239,213];break;case"peachpuff":e=[255,218,185];break;case"peru":e=[205,133,63];break;case"pink":e=[255,192,203];break;case"plum":e=[221,160,221];break;case"powderblue":e=[176,224,230];break;case"purple":e=[128,0,128];break;case"red":e=[255,0,0];break;case"rosybrown":e=[188,143,143];break;case"royalblue":e=[65,105,225];break;case"saddlebrown":e=[139,69,19];break;case"salmon":e=[250,128,114];break;case"sandybrown":e=[244,164,96];break;case"seagreen":e=[46,139,87];break;case"seashell":e=[255,245,238];break;case"sienna":e=[160,82,45];break;case"silver":e=[192,192,192];break;case"skyblue":e=[135,206,235];break;case"slateblue":e=[106,90,205];break;case"slategray":e=[112,128,144];break;case"snow":e=[255,250,250];break;case"springgreen":e=[0,255,127];break;case"steelblue":e=[70,130,180];break;case"tan":e=[210,180,140];break;case"teal":e=[0,128,128];break;case"thistle":e=[216,191,216];break;case"tomato":e=[255,99,71];break;case"turquoise":e=[64,224,208];break;case"violet":e=[238,130,238];break;case"wheat":e=[245,222,179];break;case"white":e=[255,255,255];break;case"whitesmoke":e=[245,245,245];break;case"yellow":e=[255,255,0];break;case"yellowgreen":e=[154,205,50]}return e}function Ks(t,e){var i,r=t._content.dictionary.getArray("BBox");r&&null!=e&&(0===e?t._content.dictionary.set("Matrix",[1,0,0,1,-r[0],-r[1]]):(i=new de,90===e?i._translate(r[3],-r[0]):180===e?i._translate(r[2],r[3]):270===e&&i._translate(-r[1],r[2]),i._rotate(e),t._content.dictionary.set("Matrix",i._matrix._elements)))}function Xs(t){var e="4";switch(t){case x.PdfCheckBoxStyle.circle:e="l";break;case x.PdfCheckBoxStyle.cross:e="8";break;case x.PdfCheckBoxStyle.diamond:e="u";break;case x.PdfCheckBoxStyle.square:e="n";break;case x.PdfCheckBoxStyle.star:e="H"}return e}function qs(t){var e=x.PdfCheckBoxStyle.check;switch(t){case"l":e=x.PdfCheckBoxStyle.circle;break;case"8":e=x.PdfCheckBoxStyle.cross;break;case"u":e=x.PdfCheckBoxStyle.diamond;break;case"n":e=x.PdfCheckBoxStyle.square;break;case"H":e=x.PdfCheckBoxStyle.star}return e}function Qs(t){var e;switch(t){case"cm":e=x.PdfMeasurementUnit.centimeter;break;case"in":e=x.PdfMeasurementUnit.inch;break;case"mm":e=x.PdfMeasurementUnit.millimeter;break;case"p":e=x.PdfMeasurementUnit.pica;break;case"pt":e=x.PdfMeasurementUnit.point;break;default:e=x.PdfMeasurementUnit.centimeter}return e}function Js(t){var e;switch(t){case"Highlight":e=x.PdfTextMarkupAnnotationType.highlight;break;case"Squiggly":e=x.PdfTextMarkupAnnotationType.squiggly;break;case"StrikeOut":e=x.PdfTextMarkupAnnotationType.strikeOut;break;case"Underline":e=x.PdfTextMarkupAnnotationType.underline;break;default:e=x.PdfTextMarkupAnnotationType.highlight}return e}function Ys(t){var e="Highlight";switch(t){case x.PdfTextMarkupAnnotationType.highlight:e="Highlight";break;case x.PdfTextMarkupAnnotationType.squiggly:e="Squiggly";break;case x.PdfTextMarkupAnnotationType.strikeOut:e="StrikeOut";break;case x.PdfTextMarkupAnnotationType.underline:e="Underline";break;default:e="Highlight"}return e}function Zs(t){var e;switch(t){case"cm":e=x._PdfGraphicsUnit.centimeter;break;case"in":e=x._PdfGraphicsUnit.inch;break;case"mm":e=x._PdfGraphicsUnit.millimeter;break;case"p":e=x._PdfGraphicsUnit.pica;break;case"pt":e=x._PdfGraphicsUnit.point;break;default:e=x._PdfGraphicsUnit.centimeter}return e}function $s(t){var e;switch(t){case"#Approved":case"SBApproved":e=x.PdfRubberStampAnnotationIcon.approved;break;case"#AsIs":case"SBAsIs":e=x.PdfRubberStampAnnotationIcon.asIs;break;case"#Completed":case"SBCompleted":e=x.PdfRubberStampAnnotationIcon.completed;break;case"#Confidential":case"SBConfidential":e=x.PdfRubberStampAnnotationIcon.confidential;break;case"#Departmental":case"SBDepartmental":e=x.PdfRubberStampAnnotationIcon.departmental;break;case"#Draft":case"SBDraft":e=x.PdfRubberStampAnnotationIcon.draft;break;case"#Experimental":case"SBExperimental":e=x.PdfRubberStampAnnotationIcon.experimental;break;case"#Expired":case"SBExpired":e=x.PdfRubberStampAnnotationIcon.expired;break;case"#Final":case"SBFinal":e=x.PdfRubberStampAnnotationIcon.final;break;case"#ForComment":case"SBForComment":e=x.PdfRubberStampAnnotationIcon.forComment;break;case"#ForPublicRelease":case"SBForPublicRelease":e=x.PdfRubberStampAnnotationIcon.forPublicRelease;break;case"#InformationOnly":case"SBInformationOnly":e=x.PdfRubberStampAnnotationIcon.informationOnly;break;case"#NotApproved":case"SBNotApproved":e=x.PdfRubberStampAnnotationIcon.notApproved;break;case"#NotForPublicRelease":case"SBNotForPublicRelease":e=x.PdfRubberStampAnnotationIcon.notForPublicRelease;break;case"#PreliminaryResults":case"SBPreliminaryResults":e=x.PdfRubberStampAnnotationIcon.preliminaryResults;break;case"#Sold":case"SBSold":e=x.PdfRubberStampAnnotationIcon.sold;break;case"#TopSecret":case"SBTopSecret":e=x.PdfRubberStampAnnotationIcon.topSecret;break;case"#Void":case"SBVoid":e=x.PdfRubberStampAnnotationIcon.void;break;default:e=x.PdfRubberStampAnnotationIcon.draft}return e}function ta(t){var e;switch(t){case"Note":e=x.PdfPopupIcon.note;break;case"Comment":e=x.PdfPopupIcon.comment;break;case"Help":e=x.PdfPopupIcon.help;break;case"Insert":e=x.PdfPopupIcon.insert;break;case"Key":e=x.PdfPopupIcon.key;break;case"NewParagraph":e=x.PdfPopupIcon.newParagraph;break;case"Paragraph":e=x.PdfPopupIcon.paragraph;break;default:e=x.PdfPopupIcon.note}return e}function ea(t){var e="None";switch(t){case x.PdfAnnotationState.none:e="None";break;case x.PdfAnnotationState.accepted:e="Accepted";break;case x.PdfAnnotationState.rejected:e="Rejected";break;case x.PdfAnnotationState.cancel:e="Cancelled";break;case x.PdfAnnotationState.completed:e="Completed";break;case x.PdfAnnotationState.marked:e="Marked";break;case x.PdfAnnotationState.unmarked:e="Unmarked";break;case x.PdfAnnotationState.unknown:e="Unknown";break;default:e="None"}return e}function ia(t){var e=x.PdfAnnotationState.none;switch(t){case"None":e=x.PdfAnnotationState.none;break;case"Accepted":e=x.PdfAnnotationState.accepted;break;case"Rejected":e=x.PdfAnnotationState.rejected;break;case"Cancelled":e=x.PdfAnnotationState.cancel;break;case"Completed":e=x.PdfAnnotationState.completed;break;case"Marked":e=x.PdfAnnotationState.marked;break;case"Unmarked":e=x.PdfAnnotationState.unmarked;break;case"Unknown":e=x.PdfAnnotationState.unknown}return e}function ra(t){var e="None";switch(t){case x.PdfAnnotationStateModel.none:e="None";break;case x.PdfAnnotationStateModel.marked:e="Marked";break;case x.PdfAnnotationStateModel.review:e="Review";break;default:e="None"}return e}function na(t){var e=x.PdfAnnotationStateModel.none;switch(t){case"None":e=x.PdfAnnotationStateModel.none;break;case"Marked":e=x.PdfAnnotationStateModel.marked;break;case"Review":e=x.PdfAnnotationStateModel.review}return e}function sa(t){var e;switch(t){case"PushPin":e=x.PdfAttachmentIcon.pushPin;break;case"Tag":e=x.PdfAttachmentIcon.tag;break;case"Graph":e=x.PdfAttachmentIcon.graph;break;case"Paperclip":e=x.PdfAttachmentIcon.paperClip;break;default:e=x.PdfAttachmentIcon.pushPin}return e}function aa(t){var e;switch(t){case"None":e=x.PdfAnnotationIntent.none;break;case"FreeTextCallout":e=x.PdfAnnotationIntent.freeTextCallout;break;case"FreeTextTypeWriter":e=x.PdfAnnotationIntent.freeTextTypeWriter;break;default:e=x.PdfAnnotationIntent.none}return e}function oa(t){var e=[];return 0<(t&x.PdfFontStyle.bold)&&e.push("Bold"),0<(t&x.PdfFontStyle.italic)&&e.push("Italic"),0<(t&x.PdfFontStyle.underline)&&e.push("Underline"),0<(t&x.PdfFontStyle.strikeout)&&e.push("Strikeout"),0===e.length?"Regular":e.join(", ")}function ha(t){var e;switch(t){case"head2right":e="";break;case"aacute":e="a";break;case"eacute":e="e";break;case"iacute":e="i";break;case"oacute":e="o";break;case"uacute":e="u";break;case"circleright":e="";break;case"bleft":e="";break;case"bright":e="";break;case"bup":e="";break;case"bdown":e="";break;case"barb4right":e="";break;case"bleftright":e="";break;case"bupdown":e="";break;case"bnw":e="";break;case"bne":e="";break;case"bsw":e="";break;case"bse":e="";break;case"bdash1":e="";break;case"bdash2":e="";break;case"xmarkbld":e="";break;case"checkbld":e="";break;case"boxxmarkbld":e="";break;case"boxcheckbld":e="";break;case"space":e=" ";break;case"pencil":e="";break;case"scissors":e="";break;case"scissorscutting":case"readingglasses":case"bell":case"book":case"telephonesolid":case"telhandsetcirc":case"envelopeback":e="";break;case"hourglass":e="";break;case"keyboard":e="";break;case"tapereel":e="";break;case"handwrite":e="";break;case"handv":e="";break;case"handptleft":e="";break;case"handptright":e="";break;case"handptup":e="";break;case"handptdown":e="";break;case"smileface":e="";break;case"frownface":e="";break;case"skullcrossbones":e="";break;case"flag":e="";break;case"pennant":e="9";break;case"airplane":e="";break;case"sunshine":e="";break;case"droplet":e="7";break;case"snowflake":e="";break;case"crossshadow":e="";break;case"crossmaltese":e="";break;case"starofdavid":e="";break;case"crescentstar":e="";break;case"yinyang":e="";break;case"om":e="";break;case"wheel":e="";break;case"aries":e="";break;case"taurus":e="";break;case"gemini":e="";break;case"cancer":e="";break;case"leo":e="";break;case"virgo":e="";break;case"libra":e="";break;case"scorpio":e="";break;case"saggitarius":e="";break;case"capricorn":e="";break;case"aquarius":e="";break;case"pisces":e="";break;case"ampersanditlc":case"ampersandit":e="&";break;case"circle6":e="";break;case"circleshadowdwn":e="";break;case"square6":e="";break;case"box3":e="";break;case"boxshadowdwn":e="";break;case"boxshadowup":e="";break;case"lozenge4":e="";break;case"lozenge6":e="";break;case"rhombus6":e="";break;case"xrhombus":e="";break;case"rhombus4":e="";break;case"clear":e="";break;case"escape":e="";break;case"command":e="";break;case"rosette":e="";break;case"rosettesolid":e="";break;case"quotedbllftbld":e="";break;case"quotedblrtbld":e="";break;case".notdef":e="";break;case"zerosans":e="";break;case"onesans":e="";break;case"twosans":e="";break;case"threesans":e="";break;case"foursans":e="";break;case"fivesans":e="";break;case"sixsans":e="";break;case"sevensans":e="";break;case"eightsans":e="";break;case"ninesans":e="";break;case"tensans":e="";break;case"zerosansinv":e="";break;case"onesansinv":e="";break;case"twosansinv":e="";break;case"threesansinv":e="";break;case"foursansinv":e="";break;case"circle2":e="";break;case"circle4":e="";break;case"square2":e="";break;case"ring2":e="";break;case"ringbutton2":e="";break;case"target":e="";break;case"square4":e="";break;case"box2":e="";break;case"crosstar2":e="";break;case"pentastar2":e="";break;case"hexstar2":e="";break;case"octastar2":e="";break;case"dodecastar3":e="";break;case"octastar4":e="";break;case"registercircle":e="";break;case"cuspopen":e="";break;case"cuspopen1":e="";break;case"circlestar":e="";break;case"starshadow":e="";break;case"deleteleft":e="";break;case"deleteright":e="";break;case"scissorsoutline":e="";break;case"telephone":e="";break;case"telhandset":e="E";break;case"handptlft1":e="";break;case"handptrt1":e="";break;case"handptlftsld1":e="";break;case"handptrtsld1":e="";break;case"handptup1":e="";break;case"handptdwn1":e="";break;case"xmark":e="";break;case"check":e="";break;case"boxcheck":e="";break;case"boxx":case"boxxbld":e="";break;case"circlex":e="=";break;case"circlexbld":e="";break;case"prohibit":case"prohibitbld":e="";break;case"ampersanditaldm":case"ampersandbld":case"ampersandsans":case"ampersandsandm":e="&";break;case"interrobang":case"interrobangdm":case"interrobangsans":case"interrobngsandm":e="";break;case"sacute":e="";break;case"Sacute":e="";break;case"eogonek":e="";break;case"cacute":e="";break;case"aogonek":e="";break;default:e=t}return e}function ca(t){var e;switch(t){case"zero":e="0";break;case"one":e="1";break;case"two":e="2";break;case"three":e="3";break;case"four":e="4";break;case"five":e="5";break;case"six":e="6";break;case"seven":e="7";break;case"eight":e="8";break;case"nine":e="9";break;case"aacute":e="";break;case"asciicircum":e="^";break;case"asciitilde":e="~";break;case"asterisk":e="*";break;case"at":e="@";break;case"atilde":e="";break;case"backslash":e="\\";break;case"bar":e="|";break;case"braceleft":e="{";break;case"braceright":e="}";break;case"bracketleft":e="[";break;case"bracketright":e="]";break;case"breve":e="";break;case"brokenbar":e="|";break;case"bullet3":case"bullet":e="";break;case"caron":e="";break;case"ccedilla":e="";break;case"cedilla":e="";break;case"cent":e="";break;case"circumflex":e="";break;case"colon":e=":";break;case"comma":e=",";break;case"copyright":e="";break;case"currency1":e="";break;case"dagger":e="";break;case"daggerdbl":e="";break;case"degree":e="";break;case"dieresis":e="";break;case"divide":e="";break;case"dollar":e="$";break;case"dotaccent":e="";break;case"dotlessi":e="";break;case"eacute":e="";break;case"middot":e="";break;case"edieresis":e="";break;case"egrave":e="";break;case"ellipsis":e="...";break;case"emdash":e="";break;case"endash":e="";break;case"equal":e="=";break;case"eth":e="";break;case"exclam":e="!";break;case"exclamdown":e="";break;case"florin":e="";break;case"fraction":e="";break;case"germandbls":e="";break;case"grave":e="`";break;case"greater":e=">";break;case"guillemotleft4":e="";break;case"guillemotright4":e="";break;case"guilsinglleft":e="";break;case"guilsinglright":e="";break;case"hungarumlaut":e="";break;case"hyphen5":e="-";break;case"iacute":e="";break;case"icircumflex":e="";break;case"idieresis":e="";break;case"igrave":e="";break;case"less":e="<";break;case"logicalnot":e="";break;case"lslash":e="";break;case"Lslash":e="";break;case"macron":e="";break;case"minus":e="";break;case"mu":e="";break;case"multiply":e="";break;case"ntilde":e="";break;case"numbersign":e="#";break;case"oacute":e="";break;case"ocircumflex":e="";break;case"odieresis":e="";break;case"oe":e="oe";break;case"ogonek":e="";break;case"ograve":e="";break;case"onehalf":e="1/2";break;case"onequarter":e="1/4";break;case"onesuperior":e="";break;case"ordfeminine":e="";break;case"ordmasculine":e="";break;case"otilde":e="";break;case"paragraph":e="";break;case"parenleft":e="(";break;case"parenright":e=")";break;case"percent":e="%";break;case"period":e=".";break;case"periodcentered":e="";break;case"perthousand":e="";break;case"plus":e="+";break;case"plusminus":e="";break;case"question":e="?";break;case"questiondown":e="";break;case"quotedbl":e="'";break;case"quotedblbase":e="";break;case"quotedblleft":e="";break;case"quotedblright":e="";break;case"quoteleft":e="";break;case"quoteright":e="";break;case"quotesinglbase":e="";break;case"quotesingle":e="'";break;case"registered":e="";break;case"ring":e="";break;case"scaron":e="";break;case"section":e="";break;case"semicolon":e=";";break;case"slash":e="/";break;case"space6":case"space":e=" ";break;case"udieresis":e="";break;case"uacute":e="";break;case"Ecircumflex":e="";break;case"hyphen":e="-";break;case"underscore":e="_";break;case"adieresis":e="";break;case"ampersand":e="&";break;case"Adieresis":e="";break;case"Udieresis":e="";break;case"ccaron":e="";break;case"Scaron":e="";break;case"zcaron":e="";break;case"sterling":e="";break;case"agrave":e="";break;case"ecircumflex":e="";break;case"acircumflex":e="";break;case"Oacute":e="";break;default:e=t}return e}function _a(t){var e=t.get("F");return(t.has("State")||t.has("StateModel"))&&(30===e||128===e)}function da(t){var e=t.get("F");return!(t.has("State")||t.has("StateModel")||28!==e&&128!==e)}function pa(t,e){switch(t.has("F")&&(delete t._map.F,t._updated=!0),e){case x.PdfFormFieldVisibility.hidden:t.update("F",x.PdfAnnotationFlag.hidden);break;case x.PdfFormFieldVisibility.hiddenPrintable:t.update("F",x.PdfAnnotationFlag.noView|x.PdfAnnotationFlag.print);break;case x.PdfFormFieldVisibility.visible:var i;t.has("DV")&&(delete t._map.DV,t._updated=!0),t.has("MK")&&(i=t.get("MK"))&&i.has("BG")&&(delete i._map.BG,i._updated=!0)}}function R(t,e,i){var r;t&&t.has(i)&&(r=t.getRaw(i))&&r instanceof A&&r._isNew&&((t=t.get(i))&&(i=void 0,(t=t instanceof A?e._fetch(t):t)instanceof D?i=t:t instanceof y&&(i=t.dictionary),i)&&i.has("Resources")&&la(i.get("Resources"),e),e._cacheMap.delete(r))}function la(n,s){n&&0<n.size&&n.forEach(function(t,e){var i,r;void 0!==t&&void 0!==e&&(e instanceof A?(i=e)._isNew&&(r=n.get(t))&&r instanceof D&&("XObject"===t&&r.has("Resources")&&la(r.get("Resources"),s),s._cacheMap.delete(i)):e instanceof D&&(e.has("Resources")&&la(e.get("Resources"),s),"Font"!==t&&"XObject"!==t&&"ExtGState"!==t||la(e,s)))})}function ua(t,e,i,r){var n;t&&(t instanceof D?n=t:t instanceof g&&(n=t.dictionary)),n&&(R(n,e,i),R(n,e,r))}var fa,ga=function(t,e){this.message=t,this.name=e},v=(l(ya,fa=ga),ya);function ya(t){return fa.call(this,t,"FormatError")||this}l(Sa,ma=ga);var ma,ba=Sa;function Sa(t){return ma.call(this,t,"ParserEndOfFileException")||this}function wa(t){return"[object String]"===Object.prototype.toString.call(t)?"$s"+t:"$o"+t.toString()}function va(t,e,i){var r,n,s,a,o="";if((s=e&&e._dictionary.has("DA")||i._dictionary.has("DA")?(e&&e._dictionary.has("DA")?e:i)._dictionary.get("DA"):s)&&""!==s&&-1!==s.indexOf("Tf"))for(var h=s.split(" "),c=0;c<h.length;c++)if(-1!==h[Number.parseInt(c.toString(),10)].indexOf("Tf")){for(o=h[c-2];""!==o&&1<o.length&&"/"===o[0];)o=o.substring(1);r=Number.parseFloat(h[c-1])}return o=o&&o.trim(),t&&t._dictionary.has("DR")&&(t=t._dictionary.get("DR")).has("Font")&&(t=t.get("Font")).has(o)&&(t=t.get(o))&&o&&t.has("BaseFont")&&(t=t.get("BaseFont"),a=x.PdfFontStyle.regular,t)&&(s=t.name,a=Pa(t.name),s.includes("-")&&(s=s.substring(0,s.indexOf("-"))),e&&e._dictionary.has("DA")?n=Aa(s,r,a,e):i&&i._dictionary.has("DA")&&(n=Aa(s,r,a,i))),(null==(n=null==n&&r?new m(x.PdfFontFamily.helvetica,r,x.PdfFontStyle.regular):n)||n&&1===n.size)&&(e?n=e._circleCaptionFont:i&&(n=i._circleCaptionFont)),n}function Pa(t){var e=t.indexOf("-"),i=(e<0&&(e=t.indexOf(",")),x.PdfFontStyle.regular);if(0<=e)switch(t.substring(e+1,t.length)){case"Bold":case"BoldMT":i=x.PdfFontStyle.bold;break;case"Italic":case"ItalicMT":case"Oblique":case"It":i=x.PdfFontStyle.italic;break;case"BoldItalic":case"BoldItalicMT":case"BoldOblique":i=x.PdfFontStyle.bold|x.PdfFontStyle.italic}return i}function Aa(t,e,i,r){var n,s,t=t||"",a=(t.includes("-")&&(t=t.substring(0,t.indexOf("-"))),void 0!==(e=void 0===e&&r instanceof Ii&&r._isLoaded?10:e)?e:1);if(r._dictionary.has("DS")||r._dictionary.has("DA"))switch(t){case"Helv":case"Helvetica":s=new m(x.PdfFontFamily.helvetica,a,i);break;case"Cour":case"Courier":s=new m(x.PdfFontFamily.courier,a,i);break;case"Symb":case"Symbol":s=new m(x.PdfFontFamily.symbol,a,i);break;case"Times":case"TiRo":case"TimesRoman":s=new m(x.PdfFontFamily.timesRoman,a,i);break;case"ZaDb":case"ZapfDingbats":s=new m(x.PdfFontFamily.zapfDingbats,a,i);break;case"MonotypeSungLight":s=new Jt(x.PdfCjkFontFamily.monotypeSungLight,a,i);break;case"SinoTypeSongLight":s=new Jt(x.PdfCjkFontFamily.sinoTypeSongLight,a,i);break;case"MonotypeHeiMedium":s=new Jt(x.PdfCjkFontFamily.monotypeHeiMedium,a,i);break;case"HanyangSystemsGothicMedium":s=new Jt(x.PdfCjkFontFamily.hanyangSystemsGothicMedium,a,i);break;case"HanyangSystemsShinMyeongJoMedium":s=new Jt(x.PdfCjkFontFamily.hanyangSystemsShinMyeongJoMedium,a,i);break;case"HeiseiKakuGothicW5":s=new Jt(x.PdfCjkFontFamily.heiseiKakuGothicW5,a,i);break;case"HeiseiMinchoW3":s=new Jt(x.PdfCjkFontFamily.heiseiMinchoW3,a,i);break;default:r._dictionary.has("AP")&&(n=xa(r._dictionary,r._crossReference,r),r._hasData)&&(n=bs(n),s=new $t(n,a,i))}return null==s&&(r instanceof vi?s=r._type!==x._PdfAnnotationType.widgetAnnotation?new m(x.PdfFontFamily.helvetica,a,i):r._circleCaptionFont:r instanceof Ke&&(s=r._circleCaptionFont)),s}function xa(t,s,a){var o,t=t.get("AP");return t&&t instanceof D&&t.has("N")&&(t=t.get("N"))&&t instanceof g&&t.dictionary.has("Resources")&&(t=t.dictionary.get("Resources"))&&t.has("Font")&&(t=t.get("Font"))&&t instanceof D&&t.forEach(function(t,e){if(e){e=s._fetch(e);if(e&&e.has("DescendantFonts")){var i=e.getArray("DescendantFonts");if(i&&0<i.length)for(var r=0;r<i.length;r++){var n=i[Number.parseInt(r.toString(),10)];n&&n instanceof D&&n.has("FontDescriptor")&&(n=n.get("FontDescriptor"))&&n.has("FontFile2")&&(n=n.get("FontFile2"))&&n instanceof g&&0<n.length&&(o=n.getByteRange(n.start,n.end))&&0<o.length&&(a._hasData=!0)}}}}),o}function ka(t,e){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(!os(t[Number.parseInt(i.toString(),10)],e[Number.parseInt(i.toString(),10)]))return!1;return!0}function Ia(t,e){var i,r,n,s,a,o,h,c,_,d,p,l;return t&&(r=void 0,t.has(e)&&(r=t.getArray(e)),e=t._crossReference._document,n=void 0,r)&&Array.isArray(r)&&0<r.length&&(_=c=h=o=a=void 0,"number"==typeof(s=r[0])&&0<=(d=r[0])&&((t=t._crossReference._document)&&t.pageCount>d&&(i=t.getPage(d)),n=1<r.length?r[1]:n)&&"XYZ"===n.name&&(2<r.length&&(a=r[2]),3<r.length&&(o=r[3]),4<r.length&&(_=r[4]),i)&&(p=null==o?0:i.size[1]-o,i.rotation!==x.PdfRotationAngle.angle0&&is(i,o,a),(l=new Cn(i,[null==a?0:a,p]))._index=d,l.zoom=null!=_?_:0,null!==a&&null!==o&&null!==_&&void 0!==a&&void 0!==o&&void 0!==_||l._setValidation(!1)),s instanceof D)&&(t=void 0,null!=(t=e&&s?rs(e,s):t)&&0<=t&&(i=e.getPage(t)),n=1<r.length?r[1]:n)&&("XYZ"===n.name?(2<r.length&&(a=r[2]),3<r.length&&(o=r[3]),4<r.length&&(_=r[4]),i&&(p=null==o?0:i.size[1]-o,i.rotation!==x.PdfRotationAngle.angle0&&(p=is(i,o,a)),(l=new Cn(i,[null==a?0:a,p]))._index=t,l.zoom=null!=_?_:0,null!==a&&null!==o&&null!==_&&void 0!==a&&void 0!==o&&void 0!==_||l._setValidation(!1))):"FitR"===n.name?(2<r.length&&(a=r[2]),3<r.length&&(h=r[3]),4<r.length&&(c=r[4]),5<r.length&&(o=r[5]),i&&((l=new Cn(i,[a=null==a?0:a,h=null==h?0:h,c=null==c?0:c,o=null==o?0:o]))._index=t,l.mode=x.PdfDestinationMode.fitR)):"FitBH"===n.name||"FitH"===n.name?(3<=r.length&&(o=r[2]),(i=null!=t&&0<=t?e.getPage(t):i)&&i.size&&(p=null==o?0:i.size[1]-o,(l=new Cn(i,[0,p]))._index=t,l.mode=x.PdfDestinationMode.fitH,null==o)&&l._setValidation(!1)):i&&"Fit"===n.name&&((l=new Cn(i))._index=t,l.mode=x.PdfDestinationMode.fitToPage)),l}function Ca(t,e){var i,r;return e&&(t._bounds={x:e[0],y:e[1],width:e[2],height:e[3]}),t._page&&t.bounds?(r=[t.bounds.x,t.bounds.y+t.bounds.height,t.bounds.width,t.bounds.height],t._page._isNew&&t._page._pageSettings?(i=[(e=t._page._pageSettings).margins.left,e.margins.top,e.size[0]-(e.margins.left+e.margins.right),e.size[1]-(e.margins.top+e.margins.bottom)],r[0]+=i[0],r[1]=e.size[1]-(i[1]+r[1])):(e=t._page.size,r[1]=e[1]-(t.bounds.y+t.bounds.height),(i=t._getCropOrMediaBox())&&2<i.length&&(0!==i[0]||0!==i[1])&&(r[0]+=i[0],r[1]+=i[1])),[r[0],r[1],r[0]+r[2],r[1]+r[3]]):r}function Ta(t,e,i){if(t&&"string"==typeof t&&!e&&!i&&t.startsWith("")){for(var r=w(t=(t=t.substring(2)).endsWith("")?t.substring(0,t.length-2):t,!1,!0),n="",s=0;s<r.length;s+=2){var a=r[Number.parseInt(s.toString(),10)]<<8,o=r[Number.parseInt((s+1).toString(),10)];n+=String.fromCharCode(a|o)}t=n}return t}function Na(t){return t<=4294967295?t<=65535?t<=255?1:2:t<=16777215?3:4:8}function Ra(t){for(var e=[],i=0;i<t.length;i++){var r=t.charCodeAt(Number.parseInt(i.toString(),10));r<=65535&&(e.push(r>>8&255),e.push(255&r))}return e}function Fa(t,e){switch(e){case x.PdfNumberStyle.none:return"";case x.PdfNumberStyle.numeric:return t.toString();case x.PdfNumberStyle.lowerLatin:return Da(t).toLowerCase();case x.PdfNumberStyle.lowerRoman:return La(t).toLowerCase();case x.PdfNumberStyle.upperLatin:return Da(t);case x.PdfNumberStyle.upperRoman:return La(t)}}function La(t){for(var e="",i=0,r=[[1e3,"M"],[900,"CM"],[500,"D"],[400,"CD"],[100,"C"],[90,"XC"],[50,"L"],[40,"XL"],[10,"X"],[9,"IX"],[5,"V"],[4,"IV"],[1,"I"]];i<r.length;i++)for(var n=r[i],s=n[0],a=n[1];s<=t;)e+=a,t-=s;return e}function Da(t){for(var e="";0<t;){var i=t%26;t=Math.floor(t/26),0===i&&(t--,i=26),e=Ba(i)+e}return e}function Ba(t){if(t<=0||26<t)throw new Error("Value can not be less 0 and greater 26");return String.fromCharCode(64+t)}function F(t){return null!=t}function Oa(t,e){void 0===e&&(e=!1);for(var i=t.getString(),r=[],n=0;n<i.length;n++)r.push(i.charCodeAt(n));var s=new Uint8Array(r),a=new O.CompressedStreamWriter;if(a.write(s,0,s.length),a.close(),i=a.getCompressedString,t.dictionary.update("Filter",L.get("FlateDecode")),e){for(var o=[],n=0;n<i.length;n++)o.push(255&i.charCodeAt(n));return ls(new Uint8Array(o))}return i}function Ma(t){return/[\u0590-\u08FF\uFB1D-\uFDFF\uFE70-\uFEFF]/.test(t)}function Ea(t,e){t.update("Count",t.get("Count")+e),t.has("Parent")&&(t=t.get("Parent"))&&"Pages"===t.get("Type").name&&Ea(t,e)}function ja(t,e){var i=[0,0,e.size[0],e.size[1]],i=(t.update("MediaBox",i),t.update("CropBox",i),90*Math.floor(e.rotation));360<=i&&(i%=360),t.update("Rotate",i)}var Va=Object.create(null),za=Object.create(null),Ua=Object.create(null),L=(Ha.get=function(t){return Va[t]||(Va[t]=new Ha(t))},Ha);function Ha(t){this.name=t}Ga.get=function(t){return za[t]||(za[t]=new Ga(t))};var Wa=Ga;function Ga(t){this.command=t}Ka.prototype.toString=function(){return this.objectNumber+" "+this.generationNumber},Ka.get=function(t,e){var i=0===e?t+"R":t+"R"+e;return Ua[i]||(Ua[i]=new Ka(t,e))};var A=Ka;function Ka(t,e){this._isNew=!1,this.objectNumber=t,this.generationNumber=e}qa.prototype.has=function(t){return this._set.has(t.toString())},qa.prototype.put=function(t){this._set.add(t.toString())},qa.prototype.remove=function(t){this._set.delete(t.toString())},qa.prototype.clear=function(){this._set.clear()};var Xa=qa;function qa(t){void 0===t&&(t=null),this._set=new Set(t&&t._set)}Object.defineProperty(Ja.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Ja.prototype.get=function(t){return this._map.get(t.toString())},Ja.prototype.has=function(t){return this._map.has(t.toString())},Ja.prototype.put=function(t,e){this._map.set(t.toString(),e)},Ja.prototype.set=function(t,e){this._map.set(t,e)},Ja.prototype.clear=function(){this._map.clear()};var Qa=Ja;function Ja(){this._map=new Map}Za.prototype.getValue=function(t){t=this.table["$"+this.toStr(t)];if(void 0!==t)return t.value},Za.prototype.setValue=function(t,e){var i="$"+this.toStr(t);this.table[i];this.nElements++,this.table[i]={key:t,value:e}},Za.prototype.keys=function(){for(var t=[],e=Object.keys(this.table),i=0;i<e.length;i++){var r=this.table[e[i]];t.push(r.key)}return t},Za.prototype.containsKey=function(t){return!(void 0===this.getValue(t))},Za.prototype._size=function(){return this.nElements};var Ya=Za;function Za(t){this.table={},this.nElements=0,this.toStr=t||wa}Object.defineProperty($a.prototype,"size",{get:function(){return Object.keys(this._map).length},enumerable:!0,configurable:!0}),$a.prototype.assignXref=function(t){this._crossReference=t},$a.prototype.getRaw=function(t){return this._map[t]},$a.prototype.getRawValues=function(){return this._map.values},$a.prototype.get=function(t,e,i){t=this._get(t,e,i);return t=this._crossReference&&void 0!==t&&t instanceof A?this._crossReference._fetch(t):t},$a.prototype.getArray=function(t,e,i){var r=this.get(t,e,i);if(this._crossReference&&void 0!==r&&Array.isArray(r))for(var r=r.slice(),n=0;n<r.length;n++){var s=r[Number.parseInt(n.toString(),10)];null!=s&&s instanceof A&&(r[Number.parseInt(n.toString(),10)]=this._crossReference._fetch(s))}return r},$a.prototype.set=function(t,e){this._map[t]=e},$a.prototype.has=function(t){return void 0!==this._map[t]},$a.prototype.forEach=function(t){for(var e in this._map)t(e,this.getRaw(e))},$a.prototype.update=function(t,e){var i;this.has(t)&&(i=null!=(i=this._map[t])&&i instanceof A&&this._crossReference?this._crossReference._fetch(i):i)===e||(this._map[t]=e,this._updated=!0)},$a.getEmpty=function(t){t=new $a(t);return t.set=function(t,e){throw new Error("Should not call set on the empty dictionary.")},t},$a.merge=function(t,e,i){void 0===i&&(i=!1);for(var r=new $a(t),n=Object.create(null),s=0,a=e;s<a.length;s++)if((b=a[s])instanceof $a)for(var o=0,h=b._map;o<h.length;o++){var c=h[o],_=c[0],d=c[1],c=n.get(_);if(void 0===c)n.set(_,c=[]);else if(!(i&&d instanceof $a))continue;c.push(d)}for(var p=0,l=n;p<l.length;p++){var u=l[p],f=u[0],u=u[1];if(1!==u.length&&u[0]instanceof $a){for(var g=new $a(t),y=0,m=u;y<m.length;y++)for(var b,S=0,w=(b=m[y])._map;S<w.length;S++){var v=w[S],_=v[0],d=v[1];void 0===g._map[_]&&(g._map[_]=d)}0<g.size&&(r._map[f]=g)}else r._map[f]=u[0]}return n.clear(),0<r.size?r:$a.getEmpty(t)},$a.prototype._initialize=function(t){this._map=Object.create(null),this.suppressEncryption=!1,this._updated=!1,this.isCatalog=!1,this._isNew=!1,t&&(this._crossReference=t)},$a.prototype._get=function(t,e,i){t=this._map[t];return void 0===t&&(t=this._map[e],null!=e?t=this._map[e]:null!=i&&(t=this._map[i])),t};var D=$a;function $a(t){this._isFont=!1,this._initialize(t)}function to(t){this.value=t=void 0===t?[]:t}function eo(){Va=Object.create(null),za=Object.create(null),Ua=Object.create(null)}function io(t,e){return t instanceof L&&(void 0===e||t.name===e)}function ro(t,e){return t instanceof Wa&&(void 0===e||t.command===e)}no=function(t,e){return(no=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}))(t,e)};var no,l=function(t,e){function i(){this.constructor=t}no(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},y=(so.prototype.getByte=function(){return null},so.prototype.getBytes=function(t){return null},Object.defineProperty(so.prototype,"length",{get:function(){throw new Error("Abstract getter `length` accessed")},enumerable:!0,configurable:!0}),Object.defineProperty(so.prototype,"isEmpty",{get:function(){throw new Error("Abstract getter `isEmpty` accessed")},enumerable:!0,configurable:!0}),Object.defineProperty(so.prototype,"isDataLoaded",{get:function(){return!0},enumerable:!0,configurable:!0}),so.prototype.peekByte=function(){var t=this.getByte();return-1!==t&&this.offset--,t},so.prototype.peekBytes=function(t){t=this.getBytes(t);return this.offset-=t.length,t},so.prototype.getUnsignedInteger16=function(){var t=this.getByte(),e=this.getByte();return-1===t||-1===e?-1:(t<<8)+e},so.prototype.getInt32=function(){return(this.getByte()<<24)+(this.getByte()<<16)+(this.getByte()<<8)+this.getByte()},so.prototype.getByteRange=function(t,e){return null},so.prototype.makeSubStream=function(t,e,i){return null},so.prototype.readBlock=function(){return null},so.prototype.reset=function(){return null},so.prototype.moveStart=function(){return null},so.prototype.getString=function(t,e){return((t=void 0===t?!1:t)?ls:_s)(e=null==e?this.getBytes():e)},so.prototype.skip=function(t){this.offset+=t||1},so.prototype.getBaseStreams=function(){return null},so);function so(){this._isCompress=!0,this._isImage=!1}l(oo,ao=y),Object.defineProperty(oo.prototype,"position",{get:function(){return this.offset},set:function(t){this.offset=t},enumerable:!0,configurable:!0}),Object.defineProperty(oo.prototype,"length",{get:function(){return this.end-this.start},enumerable:!0,configurable:!0}),Object.defineProperty(oo.prototype,"isEmpty",{get:function(){return 0===this.length},enumerable:!0,configurable:!0}),Object.defineProperty(oo.prototype,"data",{get:function(){return this.dataStream2},set:function(t){this.dataStream2=[],this.dataStream2=t},enumerable:!0,configurable:!0}),oo.prototype.getByte=function(){return this.position>=this.end?-1:this.bytes[this.position++]},oo.prototype.getBytes=function(t){var e=this.bytes,i=this.position,r=this.end;return t?(this.position=t=r<(t=i+t)?r:t,e.subarray(i,t)):e.subarray(i,r)},oo.prototype.getByteRange=function(t,e){return e>this.end&&(e=this.end),this.bytes.subarray(t=t<0?0:t,e)},oo.prototype.reset=function(){this.position=this.start},oo.prototype.moveStart=function(){this.start=this.position},oo.prototype.makeSubStream=function(t,e,i){return new oo(this.bytes.buffer,i=void 0===i?null:i,t,e)},oo.prototype.readBlock=function(){throw new Error("Abstract method `readBlock` called")},oo.prototype._clearStream=function(){null!==this.dictionary&&void 0!==this.dictionary&&this.dictionary.has("Filter")&&delete this.dictionary._map.Filter,this._isCompress=!0,this.dictionary._updated=!0},oo.prototype._write=function(t){this.bytes=new Uint8Array(t.length);for(var e=0;e<t.length;e++)this.bytes[Number.parseInt(e.toString(),10)]=t.charCodeAt(e);this.end=this.bytes.length,this.dictionary._updated=!0},oo.prototype._writeBytes=function(t){for(var e=0;e<t.length;e++)String.fromCharCode(t[Number.parseInt(e.toString(),10)]);this.bytes=new Uint8Array(t),this.end=this.bytes.length,this.dictionary._updated=!0};var ao,g=oo;function oo(t,e,i,r){var n=ao.call(this)||this;return n.isImageStream=!1,n.bytes=t instanceof Uint8Array?t:new Uint8Array(t),n.start=void 0!==i?i:0,n.position=n.start,n.end=i+r||n.bytes.length,n.dictionary=e,n}l(_o,ho=y),Object.defineProperty(_o.prototype,"length",{get:function(){return this._bytes.length},enumerable:!0,configurable:!0}),_o.prototype.write=function(t){if("string"==typeof t)for(var e=0;e<t.length;e++)this._bytes.push(t.charCodeAt(e));else for(e=0;e<t.length;e++)this._bytes.push(t[Number.parseInt(e.toString(),10)]);this.dictionary._updated=!0},_o.prototype.getString=function(t){void 0===t&&(t=!1);var e=new Uint8Array(this._bytes);if(null==e||void 0===e.length)throw new Error("Invalid argument for bytesToString");if(t)return ls(e);var i=e.length;if(i<8192)return String.fromCharCode.apply(null,e);for(var r=[],n=0;n<i;n+=8192)r.push(String.fromCharCode.apply(null,e.subarray(n,Math.min(n+8192,i))));return r.join("")};var ho,co=_o;function _o(t){var e=ho.call(this)||this;return F(t)?e._bytes=t:e._bytes=[],e.dictionary=new D,e.dictionary._updated=!0,e}l(uo,po=g);var po,lo=uo;function uo(){return po.call(this,new Uint8Array(0))||this}go.prototype._readContent=function(){return this._parseObject(x._TokenType.eof),this._recordCollection},go.prototype._parseObject=function(t){for(var e;(e=this._getNextToken())!==x._TokenType.eof;){if(e===t||e===x._TokenType.none)return;switch(e){case x._TokenType.comment:break;case x._TokenType.number:"-"===this._lexer._operatorParams?this._operands.push("0"):this._operands.push(this._lexer._operatorParams);break;case x._TokenType.real:this._operands.push(this._lexer._operatorParams);break;case x._TokenType.string:case x._TokenType.hexString:case x._TokenType.unicodeHexString:case x._TokenType.unicodeString:case x._TokenType.name:this._operands.push(this._lexer._operatorParams);break;case x._TokenType.operator:this._createRecord(),this._operands=[];break;case x._TokenType.beginArray:break;case x._TokenType.endArray:throw new Error("Error while parsing content")}}},go.prototype._createRecord=function(){var t=this._lexer._operatorParams,t=new bo(t,this._operands);t._splittedText=this._lexer._text,this._recordCollection.push(t)},go.prototype._getNextToken=function(){return this._lexer._getNextToken()};var fo=go;function go(t){this._recordCollection=[],this._operands=[],this._lexer=new yo(t)}mo.prototype._getNextToken=function(){this._operatorParams="";var t=this._moveToNextChar();switch(t){case"%":return this._tokenType=this._getComment();case"/":return this._tokenType=this._getName();case"[":case"(":return this._tokenType=this._getLiteralString();case"+":case"-":return this._tokenType=this._getNumber();case"<":return this._tokenType=this._getEncodedDecimalString();case".":return this._tokenType=this._getNumber();case'"':case"'":return this._tokenType=this._getOperator()}return isNaN(parseInt(t,10))?/[a-zA-Z]/.test(t)?this._tokenType=this._getOperator():t===String.fromCharCode(65535)?this._tokenType=x._TokenType.eof:this._tokenType=x._TokenType.none:this._tokenType=this._getNumber()},mo.prototype._getComment=function(){this._operatorParams="";for(var t,e="\n"!==(t=this._consumeValue())&&t!==String.fromCharCode(65535);e;)e="\n"!==(t=this._consumeValue())&&t!==String.fromCharCode(65535);return x._TokenType.comment},mo.prototype._getName=function(){this._operatorParams="";for(var t=!1;!t;)switch(this._consumeValue()){case"\0":case"\t":case"\n":case"\f":case"\r":case"\b":case" ":case"%":case"(":case")":case"<":case">":case"[":case"]":case"/":return t=!0,x._TokenType.name}return x._TokenType.none},mo.prototype._getNumber=function(){var t=this._currentCharacter;for("+"!==t&&"-"!==t||(this._operatorParams+=this._currentCharacter,t=this._getNextChar());!isNaN(parseInt(t,10))||"."===t;){if(isNaN(parseInt(t,10))){if("."===t){if(this._operatorParams.includes("."))break;this._operatorParams+=this._currentCharacter}}else this._operatorParams+=this._currentCharacter;t=this._getNextChar()}return x._TokenType.number},mo.prototype._getOperator=function(){this._operatorParams="";for(var t=this._currentCharacter;this._isOperator(t);)t=this._consumeValue();return x._TokenType.operator},mo.prototype._isOperator=function(t){if(/[a-zA-Z]/.test(t))return!0;switch(t){case"*":case"'":case'"':case"1":case"0":return!0}return!1},mo.prototype._getLiteralString=function(){this._operatorParams="";var t,e=this._currentCharacter,i=this._consumeValue(),r=!0,n=0,s="";for(this._text=[];r;){if("("===e){t=this._getLiteralStringValue(i),this._operatorParams+=t,i=this._getNextChar(),r=!1;break}if("("===i)""!==s&&(this._text[Number.parseInt(n.toString(),10)]=s.slice(0,-1),s="",n++),i=this._consumeValue(),t=this._getLiteralStringValue(i),this._text[Number.parseInt(n.toString(),10)]="("+t,n++,this._operatorParams+=t,s+=i=this._getNextChar();else{if("]"===i){r=!1,i=this._consumeValue();break}">"===i?(this._text[Number.parseInt(n.toString(),10)]="<"+s,n++,s=""):"<"===i&&(""!==s&&(this._text[Number.parseInt(n.toString(),10)]=s.slice(0,-1),n++),s=""),s+=i=this._consumeValue()}}return x._TokenType.string},mo.prototype._getEncodedDecimalString=function(){for(var t=0,e=this._consumeValue(),i=!0;i;)if("<"===e)t++,e=this._consumeValue();else if(">"===e){if(0===t){this._consumeValue(),i=!1;break}if(1===t){if(">"===(e=this._consumeValue())&&t--,1===t&&" "===e){i=!1;break}}else">"===e&&t--,e=this._consumeValue()}else if((e=this._consumeValue())===String.fromCharCode(65535)){i=!1;break}return x._TokenType.hexString},mo.prototype._getLiteralStringValue=function(t){for(var e=0,i="",r=!0;r;)if("\\"===t)i=(i+=t)+(t=this._getNextChar()),t=this._getNextChar();else if("("===t)e++,i+=t,t=this._getNextChar();else if(")"===t&&0!==e)i+=t,t=this._getNextChar(),e--;else{if(")"===t&&0===e)return r=!1,i+=t;i+=t,t=this._getNextChar()}return i},mo.prototype._consumeValue=function(){return this._operatorParams+=this._currentCharacter,this._getNextChar()},mo.prototype._moveToNextChar=function(){for(;this._currentCharacter!==String.fromCharCode(65535);)switch(this._currentCharacter){case"\0":case"\t":case"\n":case"\f":case"\r":case"\b":case" ":this._getNextChar();break;default:return this._currentCharacter}return this._currentCharacter},mo.prototype._getNextChar=function(){if(this._data.length<=this._offset){if("Q"===this._nextCharacter||"D"===this._currentCharacter&&"o"===this._nextCharacter)return this._currentCharacter=this._nextCharacter,this._nextCharacter=String.fromCharCode(65535),this._currentCharacter;this._currentCharacter=String.fromCharCode(65535),this._nextCharacter=String.fromCharCode(65535)}else this._currentCharacter=this._nextCharacter,this._nextCharacter=String.fromCharCode(this._data[this._offset++]),"\r"===this._currentCharacter&&("\n"===this._nextCharacter?(this._currentCharacter=this._nextCharacter,this._data.length<=this._offset?this._nextCharacter=String.fromCharCode(65535):this._nextCharacter=String.fromCharCode(this._data[this._offset++])):this._currentCharacter="\n");return this._currentCharacter};var yo=mo;function mo(t){this._tokenType=x._TokenType.none,this._currentCharacter="\0",this._nextCharacter="\0",this._offset=0,this._text=[],this._data=t instanceof Uint8Array?t:new Uint8Array(t)}var bo=function(t,e){this._operator=t,this._operands=e};So=function(t,e){return(So=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}))(t,e)};(function(t,e){function i(){this.constructor=t}So(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(vo,wo=y),Object.defineProperty(vo.prototype,"isEmpty",{get:function(){for(;!this.eof&&0===this.bufferLength;)this.readBlock();return 0===this.bufferLength},enumerable:!0,configurable:!0}),vo.prototype.ensureBuffer=function(t){var e=this.buffer;if(t<=e.byteLength)return e;for(var i=this.minBufferLength;i<t;)i*=2;var r=new Uint8Array(i);return r.set(e),this.buffer=r,this.buffer},vo.prototype.getByte=function(){for(var t=this.offset;this.bufferLength<=t;){if(this.eof)return-1;this.readBlock()}return this.buffer[this.offset++]},vo.prototype.getBytes=function(t){var e,i=this.offset;if(t){for(this.ensureBuffer(i+t),e=i+t;!this.eof&&this.bufferLength<e;)this.readBlock();t=this.bufferLength;t<e&&(e=t)}else{for(;!this.eof;)this.readBlock();e=this.bufferLength}return this.offset=e,this.buffer.subarray(i,e)},vo.prototype.reset=function(){this.offset=0},vo.prototype.makeSubStream=function(t,e,i){if(void 0===e)for(;!this.eof;)this.readBlock();else for(var r=t+e;this.bufferLength<=r&&!this.eof;)this.readBlock();return new g(this.buffer,i,t,e)},vo.prototype.getBaseStreams=function(){return this.stream?this.stream.getBaseStreams():null},vo.prototype.moveStart=function(){throw new Error("Invalid call from decode stream")},vo.prototype.getByteRange=function(t,e){throw new Error("Invalid call from decode stream. begin: "+t+", end: "+e)},vo.prototype.readBlock=function(){throw new Error("Invalid call from decode stream")};var So,wo,l=vo;function vo(t){var e=wo.call(this)||this;if(e._rawMinBufferLength=t||0,e.offset=0,e.bufferLength=0,e.eof=!1,e.buffer=new Uint8Array(0),e.minBufferLength=512,t)for(;e.minBufferLength<t;)e.minBufferLength*=2;return e}Po=function(t,e){return(Po=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}))(t,e)};(function(t,e){function i(){this.constructor=t}Po(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(ko,Ao=l),ko.prototype.readBlock=function(){if(this._initialized?e=this._nextChunk:(e=this.stream.getBytes(this._chunkSize),this._initialized=!0),e&&0!==e.length){this._nextChunk=this.stream.getBytes(this._chunkSize);for(var t=this._nextChunk&&0<this._nextChunk.length,e=this._cipher._decryptBlock(e,!t),i=this.bufferLength,r=e.length,n=this.ensureBuffer(i+r),s=0;s<r;s++)n[i++]=e[Number.parseInt(s.toString(),10)];this.bufferLength=i}else this.eof=!0};var Po,Ao,xo=ko;function ko(t,e,i){e=Ao.call(this,e)||this;return e._chunkSize=512,e.stream=t,e.dictionary=t.dictionary,e._cipher=i,e._nextChunk=null,e._initialized=!1,e}Io=function(t,e){return(Io=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}))(t,e)};var Io,Co,To=function(t,e){function i(){this.constructor=t}Io(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},No=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ro=new Int32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),Fo=new Int32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),Lo=[new Int32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],Do=[new Int32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5],Bo=(To(Oo,Co=l),Oo.prototype.getBits=function(t){for(var e,i=this.stream,r=this.codeSize,n=this.codeBuffer;r<t;)n|=(e=i.getByte())<<r,r+=8;return e=n&(1<<t)-1,this.codeBuffer=n>>t,this.codeSize=r-=t,e},Oo.prototype.getCode=function(t){for(var e=this.stream,i=t[0],r=t[1],n=this.codeSize,s=this.codeBuffer;n<r;)s|=e.getByte()<<n,n+=8;t=i[s&(1<<r)-1],i=t>>16,t&=65535;return i<1||n<i||(this.codeBuffer=s>>i,this.codeSize=n-i),t},Oo.prototype.generateHuffmanTable=function(t){var e=t.length,i=0;for(d=0;d<e;++d)t[d]>i&&(i=t[d]);for(var r=1<<i,n=new Int32Array(r),s=1,a=0,o=2;s<=i;++s,a<<=1,o<<=1)for(var h=0;h<e;++h)if(t[h]===s){for(var c=0,_=a,d=0;d<s;++d)c=c<<1|1&_,_>>=1;for(d=c;d<r;d+=o)n[d]=s<<16|h;++a}return[n,i]},Oo.prototype.readBlock=function(){var t,e,i=this.stream,r=this.getBits(3);if(1&r&&(this.eof=!0),0==(r>>=1)){var n,s,a=i.getByte(),o=(a|=i.getByte()<<8,i.getByte());if((o|=i.getByte()<<8)==(65535&~a)||0==a&&0==o)return this.codeBuffer=0,this.codeSize=0,o=this.bufferLength,s=this.ensureBuffer(n=o+a),this.bufferLength=n,void(0==a?-1===i.peekByte()&&(this.eof=!0):(n=i.getBytes(a),s.set(n,o),n.length<a&&(this.eof=!0)))}if(1==r)t=Lo,e=Do;else if(2==r){for(var i=this.getBits(5)+257,o=this.getBits(5)+1,h=this.getBits(4)+4,c=new Uint8Array(No.length),_=void 0,_=0;_<h;++_)c[No[_]]=this.getBits(3);var d=this.generateHuffmanTable(c),p=0;_=0;for(var l=i+o,u=new Uint8Array(l),f=void 0,g=void 0,y=void 0;_<l;){var m=this.getCode(d);if(16===m)f=2,g=3,y=p;else{if(17===m)g=f=3;else{if(18!==m){u[_++]=p=m;continue}f=7,g=11}y=p=0}for(var b=this.getBits(f)+g;0<b--;)u[_++]=y}t=this.generateHuffmanTable(u.subarray(0,i)),e=this.generateHuffmanTable(u.subarray(i,l))}for(var S=(s=this.buffer)?s.length:0,w=this.bufferLength;;)if((v=this.getCode(t))<256)S<=w+1&&(S=(s=this.ensureBuffer(w+1)).length),s[w++]=v;else{if(256===v)return void(this.bufferLength=w);var v,P=(v=Ro[v-=257])>>16,A=(p=(65535&v)+(P=0<P?this.getBits(P):P),v=this.getCode(e),(65535&(v=Fo[v]))+(P=0<(P=v>>16)?this.getBits(P):P));S<=w+p&&(S=(s=this.ensureBuffer(w+p)).length);for(var x=0;x<p;++x,++w)s[w]=s[w-A]}},Oo);function Oo(t,e){var e=Co.call(this,e)||this,i=(e.stream=t,e.dictionary=t.dictionary,t.getByte()),t=t.getByte();if(8!=(15&i))throw new v("Unknown compression method in flate stream: "+i+", "+t);if(((i<<8)+t)%31!=0)throw new v("Bad flag check in flate stream: "+i+", "+t);if(32&t)throw new v("Bad flag bit set in flate stream: "+i+", "+t);return e.codeSize=0,e.codeBuffer=0,e}Object.defineProperty(Eo.prototype,"version",{get:function(){var t,e;return t=this._catalogDictionary.has("Version")&&(e=this._catalogDictionary.get("Version"))?e.name:t},enumerable:!0,configurable:!0}),Object.defineProperty(Eo.prototype,"pageCount",{get:function(){var t=this._topPagesDictionary.get("Count");if(void 0!==t&&Number.isInteger(t))return t;throw new v("Invalid page count")},enumerable:!0,configurable:!0}),Object.defineProperty(Eo.prototype,"acroForm",{get:function(){var t;return t=null==(t=this._catalogDictionary.has("AcroForm")?this._catalogDictionary.get("AcroForm"):t)?this._createForm():t},enumerable:!0,configurable:!0}),Eo.prototype._createForm=function(){var t=new D(this._crossReference),e=this._crossReference._getNextReference();return this._crossReference._cacheMap.set(e,t),this._catalogDictionary.set("AcroForm",e),this._catalogDictionary._updated=!0,this._crossReference._allowCatalog=!0,t._updated=!0,t},Eo.prototype.getPageDictionary=function(t){for(var e=[this._topPagesDictionary],i=new Xa,r=this._catalogDictionary.getRaw("Pages"),n=(r&&r instanceof A&&i.put(r),this._crossReference),s=this.pageKidsCountCache,a=this.pageIndexCache,o=0;0<e.length;){var h=e.pop();if(null!=h&&h instanceof A){var c=s.get(h);if(0<=c&&o+c<=t)o+=c;else{if(i.has(h))throw new v("Pages tree contains circular reference.");i.put(h);c=n._fetch(h);if(c&&c instanceof D&&(io(d=null!=(d=c.getRaw("Type"))&&d instanceof A?n._fetch(d):d,"Page")||!c.has("Kids"))){if(s.has(h)||s.put(h,1),a.has(h)||a.put(h,o),o===t)return{dictionary:c,reference:h};o++}else e.push(c)}}else{if(!(h instanceof D))throw new v("Page dictionary kid reference points to wrong type of object.");var c=h.objId,_=h.get("Count");if(null!=(_=null!=_&&_ instanceof A?n._fetch(_):_)&&Number.isInteger(_)&&0<=_&&(c&&!s.has(c)&&s.set(c,_),o+_<=t))o+=_;else{var d,p=h.getRaw("Kids");if(null!=p&&p instanceof A&&(p=n._fetch(p)),Array.isArray(p))for(var l=p.length-1;0<=l;l--)e.push(p[l]);else{if(!io(d=null!=(d=h.getRaw("Type"))&&d instanceof A?n._fetch(d):d,"Page")&&h.has("Kids"))throw new v("Page dictionary kids object is not an array.");if(o===t)return{dictionary:h,reference:null};o++}}}}throw new Error("Page index "+t+" not found.")},Eo.prototype._destroy=function(){this._catalogDictionary&&(this._catalogDictionary=void 0),this._topPagesDictionary&&(this._topPagesDictionary=void 0),this.pageIndexCache&&(this.pageIndexCache.clear(),this.pageIndexCache=void 0),this.pageKidsCountCache&&(this.pageKidsCountCache.clear(),this.pageKidsCountCache=void 0)};var Mo=Eo;function Eo(t){if(this._crossReference=t,this._catalogDictionary=t._getCatalogObj(),!(this._catalogDictionary instanceof D))throw new v("Catalog object is not a dictionary.");this._catalogDictionary.isCatalog=!0,this._topPagesDictionary=this._catalogDictionary.get("Pages"),this.pageKidsCountCache=new Qa,this.pageIndexCache=new Qa}jo=function(t,e){return(jo=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}))(t,e)};(function(t,e){function i(){this.constructor=t}jo(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(Uo,Vo=l),Uo.prototype.readBlockTiff=function(){var t=this.rowBytes,e=this.bufferLength,i=this.ensureBuffer(e+t),r=this.bits,n=this.colors,s=this.stream.getBytes(t);if(this.eof=!s.length,!this.eof){var a=0,o=0,h=0,c=0,_=e;if(1===r&&1===n)for(l=0;l<t;++l){var d=s[l]^a,a=(1&(d=(d=(d^=d>>1)^d>>2)^d>>4))<<7;i[_++]=d}else if(8===r){for(l=0;l<n;++l)i[_++]=s[l];for(;l<t;++l)i[_]=i[_-n]+s[l],_++}else if(16===r){for(var p=2*n,l=0;l<p;++l)i[_++]=s[l];for(;l<t;l+=2){var u=((255&s[l])<<8)+(255&s[l+1])+((255&i[_-p])<<8)+(255&i[_-p+1]);i[_++]=u>>8&255,i[_++]=255&u}}else{var f=new Uint8Array(n+1),g=(1<<r)-1,y=0,m=e,b=this.columns;for(l=0;l<b;++l)for(var S=0;S<n;++S)h<r&&(a=a<<8|255&s[y++],h+=8),f[S]=f[S]+(a>>h-r)&g,h-=r,o=o<<r|f[S],8<=(c+=r)&&(i[m++]=o>>c-8&255,c-=8);0<c&&(i[m++]=(o<<8-c)+(a&(1<<8-c)-1))}this.bufferLength+=t}},Uo.prototype.readBlockPng=function(){var t=this.rowBytes,e=this.pixBytes,i=this.stream.getByte(),r=this.stream.getBytes(t);if(this.eof=!r.length,!this.eof){var n,s,a=this.bufferLength,o=this.ensureBuffer(a+t),h=o.subarray(a-t,a),c=(0===h.length&&(h=new Uint8Array(t)),a);switch(i){case 0:for(n=0;n<t;++n)o[c++]=r[n];break;case 1:for(n=0;n<e;++n)o[c++]=r[n];for(;n<t;++n)o[c]=o[c-e]+r[n]&255,c++;break;case 2:for(n=0;n<t;++n)o[c++]=h[n]+r[n]&255;break;case 3:for(n=0;n<e;++n)o[c++]=(h[n]>>1)+r[n];for(;n<t;++n)o[c]=(h[n]+o[c-e]>>1)+r[n]&255,c++;break;case 4:for(n=0;n<e;++n)_=h[n],s=r[n],o[c++]=_+s;for(;n<t;++n){var _=h[n],d=h[n-e],p=o[c-e],l=p+_-d,u=l-p,f=(u<0&&(u=-u),l-_),l=(f<0&&(f=-f),l-d);l<0&&(l=-l),s=r[n],o[c++]=u<=f&&u<=l?p+s:f<=l?_+s:d+s}break;default:throw new v("Unsupported predictor: "+i)}this.bufferLength+=t}};var jo,Vo,zo=Uo;function Uo(t,e,i){e=Vo.call(this,e)||this;if(!(i instanceof D))return t;var r=e.predictor=i.get("Predictor")||1;if(r<=1)return t;if(2!==r&&(r<10||15<r))throw new v("Unsupported predictor: "+r);e.readBlock=2===r?e.readBlockTiff:e.readBlockPng,e.stream=t,e.dictionary=t.dictionary;r=e.colors=i.get("Colors")||1,t=e.bits=i.get("BPC","BitsPerComponent")||8,i=e.columns=i.get("Columns")||1;return e.pixBytes=r*t+7>>3,e.rowBytes=i*r*t+7>>3,e}Ho=function(t,e){return(Ho=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}))(t,e)};var Ho,To=function(t,e){function i(){this.constructor=t}Ho(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Wo=(Object.defineProperty(Go.prototype,"_md5",{get:function(){return void 0===this._messageDigest&&(this._messageDigest=new Ko),this._messageDigest},enumerable:!0,configurable:!0}),Go.prototype._createEncryptionKey=function(t,e,i,r,n,s,a,o){return t?o._getUserKey(e,n,a):o._getOwnerKey(e,i,r,s)},Go.prototype._prepareKeyData=function(t,e,i,r,n,s,a,o){var h=new Uint8Array(40+i.length+t.length),c=0,_=0;if(e)for(f=Math.min(32,e.length);c<f;++c)h[Number.parseInt(c.toString(),10)]=e[Number.parseInt(c.toString(),10)];for(;c<32;)h[c++]=this._defaultPasswordBytes[_++];for(_=0,f=i.length;_<f;++_)h[c++]=i[Number.parseInt(_.toString(),10)];for(h[c++]=255&n,h[c++]=n>>8&255,h[c++]=n>>16&255,h[c++]=n>>>24&255,_=0,f=t.length;_<f;++_)h[c++]=t[Number.parseInt(_.toString(),10)];4<=s&&!o&&(h[c++]=255,h[c++]=255,h[c++]=255,h[c++]=255);var d=this._md5.hash(h,0,c),p=a>>3;if(3<=s)for(_=0;_<50;++_)d=this._md5.hash(d,0,p);var l=d.subarray(0,p);if(3<=s){for(c=0;c<32;++c)h[Number.parseInt(c.toString(),10)]=this._defaultPasswordBytes[Number.parseInt(c.toString(),10)];for(_=0,f=t.length;_<f;++_)h[c++]=t[Number.parseInt(_.toString(),10)];for(var u=new ch(l)._encryptBlock(this._md5.hash(h,0,c)),f=l.length,g=new Uint8Array(f),_=1;_<=19;++_){for(var y=0;y<f;++y)g[Number.parseInt(y.toString(),10)]=l[Number.parseInt(y.toString(),10)]^_;u=new ch(g)._encryptBlock(u)}for(_=0,f=u.length;_<f;++_)if(r[Number.parseInt(_.toString(),10)]!==u[Number.parseInt(_.toString(),10)])return null}else for(_=0,f=(u=new ch(l)._encryptBlock(this._defaultPasswordBytes)).length;_<f;++_)if(r[Number.parseInt(_.toString(),10)]!==u[Number.parseInt(_.toString(),10)])return null;return l},Go.prototype._decodeUserPassword=function(t,e,i,r){for(var n=new Uint8Array(32),s=0,a=0,o=Math.min(32,t.length);s<o;++s)n[Number.parseInt(s.toString(),10)]=t[Number.parseInt(s.toString(),10)];for(;s<32;)n[s++]=this._defaultPasswordBytes[a++];var h=this._md5.hash(n,0,s),c=r>>3;if(3<=i)for(a=0;a<50;++a)h=this._md5.hash(h,0,h.length);if(3<=i)for(var _=e,d=new Uint8Array(c),a=19;0<=a;a--){for(var p=0;p<c;++p)d[Number.parseInt(p.toString(),10)]=h[Number.parseInt(p.toString(),10)]^a;_=new ch(d)._encryptBlock(_)}else _=new ch(h.subarray(0,c))._encryptBlock(e);return _},Go.prototype._createCipherTransform=function(t,e){var i,r;return 4===this._algorithm||5===this._algorithm?(r=this._buildCipherConstructor(this._cipherDictionary,this._string,t,e,this._encryptionKey),i=this._buildCipherConstructor(this._cipherDictionary,this._stream,t,e,this._encryptionKey),new Ph(r,i)):(r=this._buildObjectKey(t,e,this._encryptionKey,!1),new Ph(new ch(r),new ch(r)))},Go.prototype._buildCipherConstructor=function(t,e,i,r,n){var s,t=t.get(e.name);if(!(s=t?t.get("CFM"):s))return new wh;switch(s.name){case"None":return new wh;case"AESV2":return new fh(this._buildObjectKey(i,r,n,!0));case"AESV3":return new mh(n);case"V2":return new ch(this._buildObjectKey(i,r,n,!1))}throw new v("Unknown cryptography method")},Go.prototype._buildObjectKey=function(t,e,i,r){void 0===r&&(r=!1);for(var n=new Uint8Array(i.length+9),s=0;s<i.length;++s)n[Number.parseInt(s.toString(),10)]=i[Number.parseInt(s.toString(),10)];return n[s++]=255&t,n[s++]=t>>8&255,n[s++]=t>>16&255,n[s++]=255&e,n[s++]=e>>8&255,r&&(n[s++]=115,n[s++]=65,n[s++]=108,n[s++]=84),this._md5.hash(n,0,s).subarray(0,Math.min(i.length+5,16))},Go);function Go(t,e,i){void 0===i&&(i=""),this._isUserPassword=!0,this._hasUserPasswordOnly=!1,this._encryptOnlyAttachment=!1,this._encryptMetaData=!0,this._defaultPasswordBytes=new Uint8Array([40,191,78,94,78,117,138,65,100,0,78,86,255,250,1,8,46,46,0,182,208,104,62,128,47,12,169,254,100,83,105,122]);var r=t.get("Filter");if(!io(r,"Standard"))throw new v("unknown encryption method");this._filterName=r.name;r=(this._dictionary=t).get("V");if(!Number.isInteger(r)||1!==r&&2!==r&&4!==r&&5!==r)throw new v("unsupported encryption algorithm");this._algorithm=r;var n=t.get("Length");if(n||(r<=3?n=40:(y=t.get("CF"),g=t.get("StmF"),y&&g&&(y.suppressEncryption=!0,(n=(y=y.get(g.name))&&y.get("Length")||128)<40)&&(n<<=3))),!Number.isInteger(n)||n<40||n%8!=0)throw new v("invalid key length");var s,a,o,h,c,_,d,p,l,u,f,g=w(t.get("O"),!1,!0).subarray(0,32),y=w(t.get("U"),!1,!0).subarray(0,32),m=t.get("P"),b=t.get("R"),e=(this._encryptMetaData=(4===r||5===r)&&!1!==t.get("EncryptMetadata"),w(e,!1,!0));if(i&&(s=w(i=6===b?encodeURIComponent(i):i,!1,!0)),5!==r?(a=this._prepareKeyData(e,s,g,y,m,b,n,this._encryptMetaData))&&(this._isUserPassword=!0,i)&&(S=this._decodeUserPassword(s,g,b,n),o=this._prepareKeyData(e,S,g,y,m,b,n,this._encryptMetaData))&&os(o,a)&&(this._hasUserPasswordOnly=!0):(f=(o=w(t.get("O"),!1,!0)).subarray(32,40),o=o.subarray(40,48),h=(c=w(t.get("U"),!1,!0)).subarray(0,48),l=c.subarray(32,40),c=c.subarray(40,48),_=w(t.get("OE"),!1,!0),d=w(t.get("UE"),!1,!0),p=new(6===b?sh:ih),u=void 0,u=s?s.subarray(0,Math.min(127,s.length)):new Uint8Array([]),p._checkUserPassword(u,l,y)?(a=this._createEncryptionKey(!0,u,o,h,c,_,d,p),this._isUserPassword=!0,i.length&&p._checkOwnerPassword(u,f,h,g)&&(this._hasUserPasswordOnly=!0)):i.length&&p._checkOwnerPassword(u,f,h,g)&&(a=this._createEncryptionKey(!1,s,o,h,c,_,d,p),this._isUserPassword=!1)),!a){if(!i)throw new Error("Cannot open an encrypted document. The password is invalid.");var S=this._decodeUserPassword(s,g,b,n);a=this._prepareKeyData(e,S,g,y,m,b,n,this._encryptMetaData),this._isUserPassword=!1}if(4<=r&&((l=t.get("CF"))&&(l.suppressEncryption=!0,l.has("StdCF"))&&(u=l.get("StdCF"))&&u.has("AuthEvent")&&(f=u.get("AuthEvent"))&&"EFOpen"===f.name&&(this._encryptOnlyAttachment=!0),this._cipherDictionary=l,this._stream=t.get("StmF")||L.get("Identity"),this._string=t.get("StrF")||L.get("Identity"),this._eff=t.get("EFF")||this._stream),!a&&!this._encryptOnlyAttachment)throw new Error("Cannot open an encrypted document. The password is invalid.");this._encryptionKey=a}Xo.prototype.hash=function(t,e,i){for(var r=1732584193,n=-271733879,s=-1732584194,a=271733878,o=i+72&-64,h=new Uint8Array(o),c=0,_=0;c<i;++c)h[Number.parseInt(c.toString(),10)]=t[e++];h[c++]=128;for(var d=o-8;c<d;)h[c++]=0;h[c++]=i<<3&255,h[c++]=i>>5&255,h[c++]=i>>13&255,h[c++]=i>>21&255,h[c++]=i>>>29&255,h[c++]=0,h[c++]=0,h[c++]=0;for(var p=new Int32Array(16),c=0;c<o;){for(_=0;_<16;++_,c+=4)p[Number.parseInt(_.toString(),10)]=h[Number.parseInt(c.toString(),10)]|h[c+1]<<8|h[c+2]<<16|h[c+3]<<24;for(var l=r,u=n,f=s,g=a,y=void 0,m=void 0,_=0;_<64;++_)var m=_<16?(y=u&f|~u&g,_):_<32?(y=g&u|~g&f,5*_+1&15):_<48?(y=u^f^g,3*_+5&15):(y=f^(u|~g),7*_&15),b=g,S=l+y+this._k[Number.parseInt(_.toString(),10)]+p[Number.parseInt(m.toString(),10)]|0,w=this._r[Number.parseInt(_.toString(),10)],g=f,f=u,u=u+(S<<w|S>>>32-w)|0,l=b;r=r+l|0,n=n+u|0,s=s+f|0,a=a+g|0}return new Uint8Array([255&r,r>>8&255,r>>16&255,r>>>24&255,255&n,n>>8&255,n>>16&255,n>>>24&255,255&s,s>>8&255,s>>16&255,s>>>24&255,255&a,a>>8&255,a>>16&255,a>>>24&255])};var Ko=Xo;function Xo(){this._r=new Uint8Array([7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21]),this._k=new Int32Array([-680876936,-389564586,606105819,-1044525330,-176418897,1200080426,-1473231341,-45705983,1770035416,-1958414417,-42063,-1990404162,1804603682,-40341101,-1502002290,1236535329,-165796510,-1069501632,643717713,-373897302,-701558691,38016083,-660478335,-405537848,568446438,-1019803690,-187363961,1163531501,-1444681467,-51403784,1735328473,-1926607734,-378558,-2022574463,1839030562,-35309556,-1530992060,1272893353,-155497632,-1094730640,681279174,-358537222,-722521979,76029189,-640364487,-421815835,530742520,-995338651,-198630844,1126891415,-1416354905,-57434055,1700485571,-1894986606,-1051523,-2054922799,1873313359,-30611744,-1560198380,1309151649,-145523070,-1120210379,718787259,-343485551])}Qo.prototype._rotateRight=function(t,e){return t>>>e|t<<32-e},Qo.prototype._sigma=function(t){return this._rotateRight(t,2)^this._rotateRight(t,13)^this._rotateRight(t,22)},Qo.prototype._sigmaPrime=function(t){return this._rotateRight(t,6)^this._rotateRight(t,11)^this._rotateRight(t,25)},Qo.prototype._littleSigma=function(t){return this._rotateRight(t,7)^this._rotateRight(t,18)^t>>>3},Qo.prototype._littleSigmaPrime=function(t){return this._rotateRight(t,17)^this._rotateRight(t,19)^t>>>10},Qo.prototype._hash=function(t,e,i){for(var r=1779033703,n=3144134277,s=1013904242,a=2773480762,o=1359893119,h=2600822924,c=528734635,_=1541459225,d=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],p=64*Math.ceil((i+9)/64),l=new Uint8Array(p),u=0;u<i;++u)l[Number.parseInt(u.toString(),10)]=t[e++];l[u++]=128;for(var f=p-8;u<f;)l[u++]=0;l[u++]=0,l[u++]=0,l[u++]=0,l[u++]=i>>>29&255,l[u++]=i>>21&255,l[u++]=i>>13&255,l[u++]=i>>5&255,l[u++]=i<<3&255;for(var g=new Uint32Array(64),u=0;u<p;){for(I=0;I<16;++I)g[Number.parseInt(I.toString(),10)]=l[Number.parseInt(u.toString(),10)]<<24|l[u+1]<<16|l[u+2]<<8|l[u+3],u+=4;for(I=16;I<64;++I)g[Number.parseInt(I.toString(),10)]=this._littleSigmaPrime(g[I-2])+g[I-7]+this._littleSigma(g[I-15])+g[I-16]|0;for(var y,m,b=r,S=n,w=s,v=a,P=o,A=h,x=c,k=_,I=0;I<64;++I)y=k+this._sigmaPrime(P)+(P&A^~P&x)+d[Number.parseInt(I.toString(),10)]+g[Number.parseInt(I.toString(),10)],m=this._sigma(b)+(b&S^b&w^S&w),k=x,x=A,A=P,P=v+y|0,v=w,w=S,S=b,b=y+m|0;r=r+b|0,n=n+S|0,s=s+w|0,a=a+v|0,o=o+P|0,h=h+A|0,c=c+x|0,_=_+k|0}return new Uint8Array([r>>24&255,r>>16&255,r>>8&255,255&r,n>>24&255,n>>16&255,n>>8&255,255&n,s>>24&255,s>>16&255,s>>8&255,255&s,a>>24&255,a>>16&255,a>>8&255,255&a,o>>24&255,o>>16&255,o>>8&255,255&o,h>>24&255,h>>16&255,h>>8&255,255&h,c>>24&255,c>>16&255,c>>8&255,255&c,_>>24&255,_>>16&255,_>>8&255,255&_])};var qo=Qo;function Qo(){}Yo.prototype._sigma=function(t,e,i){t.assign(e),t.rotateRight(28),i.assign(e),i.rotateRight(34),t.xor(i),i.assign(e),i.rotateRight(39),t.xor(i)},Yo.prototype._sigmaPrime=function(t,e,i){t.assign(e),t.rotateRight(14),i.assign(e),i.rotateRight(18),t.xor(i),i.assign(e),i.rotateRight(41),t.xor(i)},Yo.prototype._littleSigma=function(t,e,i){t.assign(e),t.rotateRight(1),i.assign(e),i.rotateRight(8),t.xor(i),i.assign(e),i.shiftRight(7),t.xor(i)},Yo.prototype._littleSigmaPrime=function(t,e,i){t.assign(e),t.rotateRight(19),i.assign(e),i.rotateRight(61),t.xor(i),i.assign(e),i.shiftRight(6),t.xor(i)},Yo.prototype._hash=function(t,e,i,r){d=(r=void 0===r?!1:r)?(n=new B(3418070365,3238371032),s=new B(1654270250,914150663),a=new B(2438529370,812702999),o=new B(355462360,4144912697),h=new B(1731405415,4290775857),c=new B(2394180231,1750603025),_=new B(3675008525,1694076839),new B(1203062813,3204075428)):(n=new B(1779033703,4089235720),s=new B(3144134277,2227873595),a=new B(1013904242,4271175723),o=new B(2773480762,1595750129),h=new B(1359893119,2917565137),c=new B(2600822924,725511199),_=new B(528734635,4215389547),new B(1541459225,327033209));for(var n,s,a,o,h,c,_,d,p=128*Math.ceil((i+17)/128),l=new Uint8Array(p),u=0;u<i;++u)l[Number.parseInt(u.toString(),10)]=t[e++];l[u++]=128;for(var f=p-16;u<f;)l[u++]=0;l[u++]=0,l[u++]=0,l[u++]=0,l[u++]=0,l[u++]=0,l[u++]=0,l[u++]=0,l[u++]=0,l[u++]=0,l[u++]=0,l[u++]=0,l[u++]=i>>>29&255,l[u++]=i>>21&255,l[u++]=i>>13&255,l[u++]=i>>5&255,l[u++]=i<<3&255;var g=new Array(80);for(u=0;u<80;u++)g[Number.parseInt(u.toString(),10)]=new B(0,0);var y,m,b=new B(0,0),S=new B(0,0),w=new B(0,0),v=new B(0,0),P=new B(0,0),A=new B(0,0),x=new B(0,0),k=new B(0,0),I=new B(0,0),C=new B(0,0),T=new B(0,0),N=new B(0,0);for(u=0;u<p;){for(var R=void 0,R=0;R<16;++R)g[Number.parseInt(R.toString(),10)].high=l[Number.parseInt(u.toString(),10)]<<24|l[u+1]<<16|l[u+2]<<8|l[u+3],g[Number.parseInt(R.toString(),10)].low=l[u+4]<<24|l[u+5]<<16|l[u+6]<<8|l[u+7],u+=8;for(R=16;R<80;++R)y=g[Number.parseInt(R.toString(),10)],this._littleSigmaPrime(y,g[R-2],N),y.add(g[R-7]),this._littleSigma(T,g[R-15],N),y.add(T),y.add(g[R-16]);for(b.assign(n),S.assign(s),w.assign(a),v.assign(o),P.assign(h),A.assign(c),x.assign(_),k.assign(d),R=0;R<80;++R)I.assign(k),this._sigmaPrime(T,P,N),I.add(T),T.assign(P),T.and(A),N.assign(P),N.not(),N.and(x),T.xor(N),I.add(T),I.add(this._k[Number.parseInt(R.toString(),10)]),I.add(g[Number.parseInt(R.toString(),10)]),this._sigma(C,b,N),T.assign(b),T.and(S),N.assign(b),N.and(w),T.xor(N),N.assign(S),N.and(w),T.xor(N),C.add(T),y=k,k=x,x=A,A=P,v.add(I),P=v,v=w,w=S,S=b,y.assign(I),y.add(C),b=y;n.add(b),s.add(S),a.add(w),o.add(v),h.add(P),c.add(A),_.add(x),d.add(k)}return r?(m=new Uint8Array(48),n.copyTo(m,0),s.copyTo(m,8),a.copyTo(m,16),o.copyTo(m,24),h.copyTo(m,32),c.copyTo(m,40)):(m=new Uint8Array(64),n.copyTo(m,0),s.copyTo(m,8),a.copyTo(m,16),o.copyTo(m,24),h.copyTo(m,32),c.copyTo(m,40),_.copyTo(m,48),d.copyTo(m,56)),m};var Jo=Yo;function Yo(){this._k=[new B(1116352408,3609767458),new B(1899447441,602891725),new B(3049323471,3964484399),new B(3921009573,2173295548),new B(961987163,4081628472),new B(1508970993,3053834265),new B(2453635748,2937671579),new B(2870763221,3664609560),new B(3624381080,2734883394),new B(310598401,1164996542),new B(607225278,1323610764),new B(1426881987,3590304994),new B(1925078388,4068182383),new B(2162078206,991336113),new B(2614888103,633803317),new B(3248222580,3479774868),new B(3835390401,2666613458),new B(4022224774,944711139),new B(264347078,2341262773),new B(604807628,2007800933),new B(770255983,1495990901),new B(1249150122,1856431235),new B(1555081692,3175218132),new B(1996064986,2198950837),new B(2554220882,3999719339),new B(2821834349,766784016),new B(2952996808,2566594879),new B(3210313671,3203337956),new B(3336571891,1034457026),new B(3584528711,2466948901),new B(113926993,3758326383),new B(338241895,168717936),new B(666307205,1188179964),new B(773529912,1546045734),new B(1294757372,1522805485),new B(1396182291,2643833823),new B(1695183700,2343527390),new B(1986661051,1014477480),new B(2177026350,1206759142),new B(2456956037,344077627),new B(2730485921,1290863460),new B(2820302411,3158454273),new B(3259730800,3505952657),new B(3345764771,106217008),new B(3516065817,3606008344),new B(3600352804,1432725776),new B(4094571909,1467031594),new B(275423344,851169720),new B(430227734,3100823752),new B(506948616,1363258195),new B(659060556,3750685593),new B(883997877,3785050280),new B(958139571,3318307427),new B(1322822218,3812723403),new B(1537002063,2003034995),new B(1747873779,3602036899),new B(1955562222,1575990012),new B(2024104815,1125592928),new B(2227730452,2716904306),new B(2361852424,442776044),new B(2428436474,593698344),new B(2756734187,3733110249),new B(3204031479,2999351573),new B(3329325298,3815920427),new B(3391569614,3928383900),new B(3515267271,566280711),new B(3940187606,3454069534),new B(4118630271,4000239992),new B(116418474,1914138554),new B(174292421,2731055270),new B(289380356,3203993006),new B(460393269,320620315),new B(685471733,587496836),new B(852142971,1086792851),new B(1017036298,365543100),new B(1126000580,2618297676),new B(1288033470,3409855158),new B(1501505948,4234509866),new B(1607167915,987167468),new B(1816402316,1246189591)]}Zo.prototype.and=function(t){this.high&=t.high,this.low&=t.low},Zo.prototype.or=function(t){this.high|=t.high,this.low|=t.low},Zo.prototype.not=function(){this.high=~this.high,this.low=~this.low},Zo.prototype.xor=function(t){this.high^=t.high,this.low^=t.low},Zo.prototype.shiftRight=function(t){32<=t?(this.low=this.high>>>t-32|0,this.high=0):(this.low=this.low>>>t|this.high<<32-t,this.high=this.high>>>t|0)},Zo.prototype.shiftLeft=function(t){32<=t?(this.high=this.low<<t-32,this.low=0):(this.high=this.high<<t|this.low>>>32-t,this.low<<=t)},Zo.prototype.rotateRight=function(t){var e,i;32&t?(i=this.low,e=this.high):(e=this.low,i=this.high),this.low=e>>>(t&=31)|i<<32-t,this.high=i>>>t|e<<32-t},Zo.prototype.add=function(t){var e=(this.low>>>0)+(t.low>>>0),t=(this.high>>>0)+(t.high>>>0);4294967295<e&&(t+=1),this.low=0|e,this.high=0|t},Zo.prototype.copyTo=function(t,e){t[Number.parseInt(e.toString(),10)]=this.high>>>24&255,t[e+1]=this.high>>16&255,t[e+2]=this.high>>8&255,t[e+3]=255&this.high,t[e+4]=this.low>>>24&255,t[e+5]=this.low>>16&255,t[e+6]=this.low>>8&255,t[e+7]=255&this.low},Zo.prototype.assign=function(t){this.high=t.high,this.low=t.low};var B=Zo;function Zo(t,e){this.high=0|t,this.low=0|e}Object.defineProperty(th.prototype,"_sha256",{get:function(){return void 0===this._sha256Obj&&(this._sha256Obj=new qo),this._sha256Obj},enumerable:!0,configurable:!0}),Object.defineProperty(th.prototype,"_sha512",{get:function(){return void 0===this._sha512Obj&&(this._sha512Obj=new Jo),this._sha512Obj},enumerable:!0,configurable:!0});var $o=th;function th(){}To(rh,eh=$o),rh.prototype._checkOwnerPassword=function(t,e,i,r){var n=new Uint8Array(t.length+56);return n.set(t,0),n.set(e,t.length),n.set(i,t.length+e.length),os(this._sha256._hash(n,0,n.length),r)},rh.prototype._checkUserPassword=function(t,e,i){var r=new Uint8Array(t.length+8);return r.set(t,0),r.set(e,t.length),os(this._sha256._hash(r,0,r.length),i)},rh.prototype._getOwnerKey=function(t,e,i,r){var n=new Uint8Array(t.length+56),i=(n.set(t,0),n.set(e,t.length),n.set(i,t.length+e.length),this._sha256._hash(n,0,n.length));return new mh(i)._decryptBlock(r,!1,new Uint8Array(16))},rh.prototype._getUserKey=function(t,e,i){var r=new Uint8Array(t.length+8),e=(r.set(t,0),r.set(e,t.length),this._sha256._hash(r,0,r.length));return new mh(e)._decryptBlock(i,!1,new Uint8Array(16))};var eh,ih=rh;function rh(){return null!==eh&&eh.apply(this,arguments)||this}To(ah,nh=$o),ah.prototype._checkOwnerPassword=function(t,e,i,r){var n=new Uint8Array(t.length+56);return n.set(t,0),n.set(e,t.length),n.set(i,t.length+e.length),os(this._hash(t,n,i),r)},ah.prototype._checkUserPassword=function(t,e,i){var r=new Uint8Array(t.length+8);return r.set(t,0),r.set(e,t.length),os(this._hash(t,r,new Uint8Array([])),i)},ah.prototype._getOwnerKey=function(t,e,i,r){var n=new Uint8Array(t.length+56),e=(n.set(t,0),n.set(e,t.length),n.set(i,t.length+e.length),this._hash(t,n,i));return new mh(e)._decryptBlock(r,!1,new Uint8Array(16))},ah.prototype._getUserKey=function(t,e,i){var r=new Uint8Array(t.length+8),e=(r.set(t,0),r.set(e,t.length),this._hash(t,r,new Uint8Array([])));return new mh(e)._decryptBlock(i,!1,new Uint8Array(16))},ah.prototype._hash=function(t,e,i){for(var r=this._sha256._hash(e,0,e.length).subarray(0,32),n=new Uint8Array([0]),s=0;s<64||n[n.length-1]>s-32;){for(var a=t.length+r.length+i.length,o=new Uint8Array(a),h=0,c=(o.set(t,0),h+=t.length,o.set(r,h),h+=r.length,o.set(i,h),new Uint8Array(64*a)),_=0,d=0;_<64;_++)c.set(o,d),d+=a;for(var n=new fh(r.subarray(0,16))._encrypt(c,r.subarray(16,32)),p=0,l=0;l<16;l++)p=((p=+p%3)+(n[Number.parseInt(l.toString(),10)]>>>0)%3)%3;2===p?r=this._sha512._hash(n,0,n.length):1===p?r=this._sha512._hash(n,0,n.length,!0):0===p&&(r=this._sha256._hash(n,0,n.length)),s++}return r.subarray(0,32)};var nh,sh=ah;function ah(){return null!==nh&&nh.apply(this,arguments)||this}function oh(){}To(_h,hh=oh),_h.prototype._encryptBlock=function(t){for(var e=this._a,i=this._b,r=this._s,n=t.length,s=new Uint8Array(n),a=0;a<n;++a){var e=e+1&255,o=r[Number.parseInt(e.toString(),10)],i=i+o&255,h=r[Number.parseInt(i.toString(),10)];r[Number.parseInt(e.toString(),10)]=h,r[Number.parseInt(i.toString(),10)]=o,s[Number.parseInt(a.toString(),10)]=t[Number.parseInt(a.toString(),10)]^r[o+h&255]}return this._a=e,this._b=i,s},_h.prototype._decryptBlock=function(t){return this._encryptBlock(t)},_h.prototype._encrypt=function(t){return this._encryptBlock(t)};var hh,ch=_h;function _h(t){for(var e=hh.call(this)||this,i=(e._a=0,e._b=0,new Uint8Array(256)),r=0;r<256;++r)i[Number.parseInt(r.toString(),10)]=r;for(var n=t.length,r=0,s=0;r<256;++r){var a=i[Number.parseInt(r.toString(),10)],s=s+a+t[r%n]&255;i[Number.parseInt(r.toString(),10)]=i[Number.parseInt(s.toString(),10)],i[Number.parseInt(s.toString(),10)]=a}return e._s=i,e}To(lh,dh=oh),Object.defineProperty(lh.prototype,"_mixCol",{get:function(){if(void 0===this._mixC){this._mixC=new Uint8Array(256);for(var t=0;t<256;t++)this._mixC[Number.parseInt(t.toString(),10)]=t<128?t<<1:t<<1^27}return this._mixC},enumerable:!0,configurable:!0}),lh.prototype._decrypt=function(t,e){var i,r,n=new Uint8Array(16);n.set(t);for(var s=0,a=this._keySize;s<16;++s,++a)n[Number.parseInt(s.toString(),10)]^=e[Number.parseInt(a.toString(),10)];for(var o=this._cyclesOfRepetition-1;1<=o;--o){p=n[13],n[13]=n[9],n[9]=n[5],n[5]=n[1],n[1]=p,p=n[14],i=n[10],n[14]=n[6],n[10]=n[2],n[6]=p,n[2]=i,p=n[15],i=n[11],r=n[7],n[15]=n[3],n[11]=p,n[7]=i,n[3]=r;for(s=0;s<16;++s)n[Number.parseInt(s.toString(),10)]=this._inverseS[n[Number.parseInt(s.toString(),10)]];for(s=0,a=16*o;s<16;++s,++a)n[Number.parseInt(s.toString(),10)]^=e[Number.parseInt(a.toString(),10)];for(s=0;s<16;s+=4){var h=this._mix[n[Number.parseInt(s.toString(),10)]],c=this._mix[n[s+1]],_=this._mix[n[s+2]],d=this._mix[n[s+3]],p=h^c>>>8^c<<24^_>>>16^_<<16^d>>>24^d<<8;n[Number.parseInt(s.toString(),10)]=p>>>24&255,n[s+1]=p>>16&255,n[s+2]=p>>8&255,n[s+3]=255&p}}p=n[13],n[13]=n[9],n[9]=n[5],n[5]=n[1],n[1]=p,p=n[14],i=n[10],n[14]=n[6],n[10]=n[2],n[6]=p,n[2]=i,p=n[15],i=n[11],r=n[7],n[15]=n[3],n[11]=p,n[7]=i,n[3]=r;for(s=0;s<16;++s)n[Number.parseInt(s.toString(),10)]=this._inverseS[n[Number.parseInt(s.toString(),10)]],n[Number.parseInt(s.toString(),10)]^=e[Number.parseInt(s.toString(),10)];return n},lh.prototype._encryptBlock=function(t,e){var i,r,n=this._s,s=new Uint8Array(16);s.set(t);for(var a=0;a<16;++a)s[Number.parseInt(a.toString(),10)]^=e[Number.parseInt(a.toString(),10)];for(var o=1;o<this._cyclesOfRepetition;o++){for(a=0;a<16;++a)s[Number.parseInt(a.toString(),10)]=n[s[Number.parseInt(a.toString(),10)]];r=s[1],s[1]=s[5],s[5]=s[9],s[9]=s[13],s[13]=r,r=s[2],i=s[6],s[2]=s[10],s[6]=s[14],s[10]=r,s[14]=i,r=s[3],i=s[7],p=s[11],s[3]=s[15],s[7]=r,s[11]=i,s[15]=p;for(a=0;a<16;a+=4){var h=s[a+0],c=s[a+1],_=s[a+2],d=s[a+3],p=h^c^_^d;s[a+0]^=p^this._mixCol[h^c],s[a+1]^=p^this._mixCol[c^_],s[a+2]^=p^this._mixCol[_^d],s[a+3]^=p^this._mixCol[d^h]}for(var a=0,l=16*o;a<16;++a,++l)s[Number.parseInt(a.toString(),10)]^=e[Number.parseInt(l.toString(),10)]}for(a=0;a<16;++a)s[Number.parseInt(a.toString(),10)]=n[s[Number.parseInt(a.toString(),10)]];r=s[1],s[1]=s[5],s[5]=s[9],s[9]=s[13],s[13]=r,r=s[2],i=s[6],s[2]=s[10],s[6]=s[14],s[10]=r,s[14]=i,r=s[3],i=s[7],p=s[11],s[3]=s[15],s[7]=r,s[11]=i,s[15]=p;for(a=0,l=this._keySize;a<16;++a,++l)s[Number.parseInt(a.toString(),10)]^=e[Number.parseInt(l.toString(),10)];return s},lh.prototype._decryptBlockHelper=function(t,e){for(var i=t.length,r=this._buffer,n=this._position,s=[],a=this._iv,o=0;o<i;++o)if(r[Number.parseInt(n.toString(),10)]=t[Number.parseInt(o.toString(),10)],!(++n<16)){for(var h=this._decrypt(r,this._key),c=0;c<16;++c)h[Number.parseInt(c.toString(),10)]^=a[Number.parseInt(c.toString(),10)];a=r,s.push(h),r=new Uint8Array(16),n=0}if(this._buffer=r,this._bufferLength=n,this._iv=a,0===s.length)return new Uint8Array(0);var _=16*s.length;if(e){var d=s[s.length-1],p=d[15];if(p<=16){for(var o=15,l=16-p;l<=o;--o)if(d[Number.parseInt(o.toString(),10)]!==p){p=0;break}_-=p,s[s.length-1]=d.subarray(0,16-p)}}for(var u=new Uint8Array(_),o=0,c=0;o<s.length;++o,c+=16)u.set(s[Number.parseInt(o.toString(),10)],c);return u},lh.prototype._decryptBlock=function(t,e,i){var r=t.length,n=this._buffer,s=this._position;if(i)this._iv=i;else{for(var a=0;s<16&&a<r;++a,++s)n[Number.parseInt(s.toString(),10)]=t[Number.parseInt(a.toString(),10)];if(s<16)return this._bufferLength=s,new Uint8Array(0);this._iv=n,t=t.subarray(16)}return this._buffer=new Uint8Array(16),this._bufferLength=0,this._decryptBlock=this._decryptBlockHelper,this._decryptBlock(t,e)},lh.prototype._encrypt=function(t,e){var i=t.length,r=this._buffer,n=this._position,s=[];e=e||new Uint8Array(16);for(var a=0;a<i;++a)if(r[Number.parseInt(n.toString(),10)]=t[Number.parseInt(a.toString(),10)],!(++n<16)){for(var o=0;o<16;++o)r[Number.parseInt(o.toString(),10)]^=e[Number.parseInt(o.toString(),10)];var h=this._encryptBlock(r,this._key);s.push(e=h),r=new Uint8Array(16),n=0}if(this._buffer=r,this._bufferLength=n,this._iv=e,0===s.length)return new Uint8Array(0);for(var c=new Uint8Array(16*s.length),a=0,o=0;a<s.length;++a,o+=16)c.set(s[Number.parseInt(a.toString(),10)],o);return c};var dh,ph=lh;function lh(){var t=null!==dh&&dh.apply(this,arguments)||this;return t._buffer=new Uint8Array(16),t._position=0,t._s=new Uint8Array([99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22]),t._inverseS=new Uint8Array([82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125]),t._mix=new Uint32Array([0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795]),t}To(gh,uh=ph),gh.prototype._expandKey=function(t){var e=this._s,i=this._key,r=new Uint8Array(176);r.set(t);for(var n=16,s=1;n<176;++s){var a=r[n-3],o=r[n-2],h=r[n-1],c=r[n-4],a=e[Number.parseInt(a.toString(),10)],o=e[Number.parseInt(o.toString(),10)],h=e[Number.parseInt(h.toString(),10)],c=e[Number.parseInt(c.toString(),10)];a^=i[Number.parseInt(s.toString(),10)];for(var _=0;_<4;++_)r[Number.parseInt(n.toString(),10)]=a^=r[n-16],r[n+1]=o^=r[n-15],r[n+2]=h^=r[n-14],r[n+3]=c^=r[n-13],n+=4}return r};var uh,fh=gh;function gh(t){var e=uh.call(this)||this;return e._cyclesOfRepetition=10,e._keySize=160,e._key=new Uint8Array([141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141]),e._key=e._expandKey(t),e}To(bh,yh=ph),bh.prototype._expandKey=function(t){for(var e,i,r,n,s=this._s,a=new Uint8Array(240),o=(a.set(t),1),h=32;h<240;){h%32==16?(e=s[Number.parseInt(e.toString(),10)],i=s[Number.parseInt(i.toString(),10)],r=s[Number.parseInt(r.toString(),10)],n=s[Number.parseInt(n.toString(),10)]):h%32==0&&(e=a[h-3],i=a[h-2],r=a[h-1],n=a[h-4],e=s[Number.parseInt(e.toString(),10)],i=s[Number.parseInt(i.toString(),10)],r=s[Number.parseInt(r.toString(),10)],n=s[Number.parseInt(n.toString(),10)],e^=o,256<=(o<<=1))&&(o=255&(27^o));for(var c=0;c<4;++c)a[Number.parseInt(h.toString(),10)]=e^=a[h-32],a[h+1]=i^=a[h-31],a[h+2]=r^=a[h-30],a[h+3]=n^=a[h-29],h+=4}return a};var yh,mh=bh;function bh(t){var e=yh.call(this)||this;return e._cyclesOfRepetition=14,e._keySize=224,e._key=e._expandKey(t),e}To(vh,Sh=oh),vh.prototype._decryptBlock=function(t){return t},vh.prototype._encrypt=function(t){return t};var Sh,wh=vh;function vh(){return null!==Sh&&Sh.apply(this,arguments)||this}Ah.prototype.createStream=function(t,e){return new xo(t,e,this._streamCipher)},Ah.prototype.decryptString=function(t){t=w(t,!1,!0);return _s(this._stringCipher._decryptBlock(t,!0))},Ah.prototype.encryptString=function(t){if(this._stringCipher instanceof ph){var e=16-t.length%16,i=(t+=String.fromCharCode(e).repeat(e),new Uint8Array(16));if("undefined"!=typeof crypto)crypto.getRandomValues(i);else for(var r=0;r<16;r++)i[Number.parseInt(r.toString(),10)]=Math.floor(256*Math.random());var e=this._stringCipher._encrypt(w(t,!1,!0),i),n=new Uint8Array(16+e.length);return n.set(i),n.set(e,16),_s(n)}return _s(this._stringCipher._encrypt(w(t,!1,!0)))};var Ph=Ah;function Ah(t,e){this._stringCipher=t,this._streamCipher=e}var xh="EOF",kh=[1,0,0,0,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,2,0,0,2,2,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ih=(Ch.prototype.nextChar=function(){return this.currentChar=this.stream.getByte()},Ch.prototype.peekChar=function(){return this.stream.peekByte()},Ch.prototype.getNumber=function(){var t=!1,e=0,i=0;if(45===(a=this.currentChar)?(i=-1,45===(a=this.nextChar())&&(a=this.nextChar())):43===a&&(i=1,a=this.nextChar()),10===a||13===a)for(;10===(a=this.nextChar())||13===a;);if(46===a&&(e=10,a=this.nextChar()),a<48||57<a){if(gs(a)||-1===a){if(10===e&&0===i)return 0;if(0===e&&-1===i)return 0}throw new v("Invalid number: "+String.fromCharCode(a)+" (charCode "+a+")")}for(var i=i||1,r=a-48,n=0,s=1,a=this.nextChar();0<=a;){if(48<=a&&a<=57){var o=a-48;t?n=10*n+o:(0!==e&&(e*=10),r=10*r+o)}else if(46===a){if(0!==e)break;e=1}else{if(45===a){a=this.nextChar();continue}if(69!==a&&101!==a)break;if(43===(a=this.peekChar())||45===a)s=45===a?-1:1,this.nextChar();else if(a<48||57<a)break;t=!0}a=this.nextChar()}return 0!==e&&(r/=e),t&&(r*=Math.pow(10,s*n)),i*r},Ch.prototype.getString=function(){for(var t=1,e=!1,i=this.stringBuffer,r=(i.length=0,this.nextChar());;){var n=!1;switch(0|r){case-1:e=!0;break;case 40:++t,i.push("(");break;case 41:0==--t?(this.nextChar(),e=!0):i.push(")");break;case 92:switch(r=this.nextChar()){case-1:e=!0;break;case 110:i.push("\n");break;case 114:i.push("\r");break;case 116:i.push("\t");break;case 98:i.push("\b");break;case 102:i.push("\f");break;case 92:case 40:case 41:i.push(String.fromCharCode(r));break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:var s=15&r,n=!0;48<=(r=this.nextChar())&&r<=55&&(s=(s<<3)+(15&r),48<=(r=this.nextChar()))&&r<=55&&(n=!1,s=(s<<3)+(15&r)),i.push(String.fromCharCode(s));break;case 13:10===this.peekChar()&&this.nextChar();break;case 10:break;default:i.push(String.fromCharCode(r))}break;default:i.push(String.fromCharCode(r))}if(e)break;n||(r=this.nextChar())}return i.join("")},Ch.prototype.getName=function(){var t=this.stringBuffer;for(t.length=0,r=this.nextChar();0<=r&&!kh[r];){if(35===r){if(r=this.nextChar(),kh[r]){t.push("#");break}var e=this._toHexDigit(r);if(-1!==e){var i=r,r=this.nextChar(),n=this._toHexDigit(r);if(-1===n){if(t.push("#",String.fromCharCode(i)),kh[r])break;t.push(String.fromCharCode(r)),r=this.nextChar();continue}t.push(String.fromCharCode(e<<4|n))}else t.push("#",String.fromCharCode(r))}else t.push(String.fromCharCode(r));r=this.nextChar()}return L.get(t.join(""))},Ch.prototype.getHexString=function(){var t,e,i=this.stringBuffer,r=(i.length=0,this.currentChar),n=!0;for(this._hexStringNumber=0;;){if(r<0)break;if(62===r){this.nextChar();break}if(1!==kh[r]){if(n){if(-1===(t=this._toHexDigit(r))){r=this.nextChar();continue}}else{if(-1===(e=this._toHexDigit(r))){r=this.nextChar();continue}i.push(String.fromCharCode(t<<4|e))}n=!n}r=this.nextChar()}return i.join("")},Ch.prototype.getObject=function(){for(var t=!1,e=this.currentChar;;){if(e<0)return xh;if(t)10!==e&&13!==e||(t=!1);else if(37===e)t=!0;else if(1!==kh[e])break;e=this.nextChar()}switch(0|e){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 43:case 45:case 46:return this.getNumber();case 40:return this.getString();case 47:return this.getName();case 91:return this.nextChar(),Wa.get("[");case 93:return this.nextChar(),Wa.get("]");case 60:return 60===(e=this.nextChar())?(this.nextChar(),Wa.get("<<")):this.getHexString();case 62:return 62===(e=this.nextChar())?(this.nextChar(),Wa.get(">>")):Wa.get(">");case 123:return this.nextChar(),Wa.get("{");case 125:return this.nextChar(),Wa.get("}");case 41:throw this.nextChar(),new v("Illegal character: "+e)}var i=String.fromCharCode(e);if(e<32||127<e){var r=this.peekChar();if(32<=r&&r<=127)return this.nextChar(),Wa.get(i)}for(e=this.nextChar();0<=e&&!kh[e];){var n=i+String.fromCharCode(e);if(128===i.length)throw new v("Command token too long: "+i.length);i=n,e=this.nextChar()}return"true"===i||"false"!==i&&("null"===i?null:("BI"===i&&(this.beginInlineImagePosition=this.stream.position),Wa.get(i)))},Ch.prototype.peekObj=function(){var t,e=this.stream.position,i=this.currentChar,r=this.beginInlineImagePosition;try{t=this.getObject()}catch(t){}return this.stream.position=e,this.currentChar=i,this.beginInlineImagePosition=r,t},Ch.prototype.skipToNextLine=function(){for(var t=this.currentChar;0<=t;){if(13===t){10===(t=this.nextChar())&&this.nextChar();break}if(10===t){this.nextChar();break}t=this.nextChar()}},Ch.prototype._toHexDigit=function(t){return 48<=t&&t<=57?15&t:65<=t&&t<=70||97<=t&&t<=102?9+(15&t):-1},Ch);function Ch(t){this.stream=t,this.nextChar(),this.stringBuffer=[],this._hexStringNumber=0,this.beginInlineImagePosition=-1}Nh.prototype.refill=function(){this.first=this.lexicalOperator.getObject(),this.second=this.lexicalOperator.getObject()},Nh.prototype.shift=function(){this.second instanceof Wa&&"ID"===this.second.command?(this.first=this.second,this.second=null):(this.first=this.second,this.second=this.lexicalOperator.getObject())},Nh.prototype.tryShift=function(){try{return this.shift(),!0}catch(t){return!1}},Nh.prototype.getObject=function(t,e,i){var r,n,s=this.first;if(this.shift(),s instanceof Wa)switch(s.command){case"BI":return"number"==typeof t&&"number"==typeof e?this.makeInlineImage(t,e,i):t instanceof Ph?this.makeInlineImage(t):this.makeInlineImage();case"[":for(var a=[];!ro(this.first,"]")&&this.first!==xh;){var o=void 0,o="number"==typeof t&&"number"==typeof e?(r=this._encryptor._createCipherTransform(t,e),this.getObject(t,e,i)):t instanceof Ph?this.getObject(r=t):this.getObject(t);0===a.length&&io(o,"Indexed")&&(this._isColorSpace=!0),o=Ta(o,this._isColorSpace,this._isPassword),a.push(o)}if(this.first!==xh)return this._isColorSpace=!1,this.shift(),a;if(this.recoveryMode)return a;throw new ba("End of file inside array.");case"<<":for(var h=new D(this.xref);!ro(this.first,">>")&&this.first!==xh;)if(this.first instanceof L){var c=this.first.name;if("U"!==c&&"O"!==c&&"ID"!==c||(this._isPassword=!0),this.shift(),this._checkEnd())break;"number"==typeof t&&"number"==typeof e&&(r=this._encryptor._createCipherTransform(t,e));var _=void 0;_=Ta(_="number"==typeof t&&"number"==typeof e?this.getObject(t,e,i):t instanceof Ph?this.getObject(t):this.getObject(),this._isColorSpace,this._isPassword),this._isPassword=!1,h.set(c,_)}else this.shift();if(this.first!==xh)return ro(this.second,"stream")?!0===this.allowStreams?(t instanceof Ph?r=t:i&&"number"==typeof e&&(r=this._encryptor._createCipherTransform(t,e)),"boolean"==typeof e&&e?this.makeStream(h,r,e):this.makeStream(h,r)):h:(this.shift(),h);if(this.recoveryMode)return h;throw new ba("End of file inside dictionary.");default:return s}return Number.isInteger(s)?Number.isInteger(this.first)&&ro(this.second,"R")?(n=A.get(s,this.first),this.shift(),this.shift(),n):s:"string"==typeof s&&(t instanceof Ph?r=t:"number"==typeof t&&"number"==typeof e&&(r=this._encryptor._createCipherTransform(t,e)),r)?r.decryptString(s):s},Nh.prototype.findDiscreteDecodeInlineStreamEnd=function(t){for(var e,i=t.position,r=!1,n=t.getByte();-1!==n;){if(255!==n);else{switch(t.getByte()){case 0:break;case 255:t.skip(-1);break;case 217:r=!0;break;case 192:case 193:case 194:case 195:case 197:case 198:case 199:case 201:case 202:case 203:case 205:case 206:case 207:case 196:case 204:case 218:case 219:case 220:case 221:case 222:case 223:case 224:case 225:case 226:case 227:case 228:case 229:case 230:case 231:case 232:case 233:case 234:case 235:case 236:case 237:case 238:case 239:case 254:2<(e=t.getUnsignedInteger16())?t.skip(e-2):t.skip(-2)}if(r)break}n=t.getByte()}i=t.position-i;return-1===n?(t.skip(-i),this.findDefaultInlineStreamEnd(t)):(this.inlineStreamSkipEI(t),i)},Nh.prototype.findDecodeInlineStreamEnd=function(t){for(var e=t.position;-1!==(r=t.getByte());)if(126===r){for(var i=t.position,r=t.peekByte();gs(r);)t.skip(),r=t.peekByte();if(62===r){t.skip();break}if(t.position>i){i=t.peekBytes(2);if(69===i[0]&&73===i[1])break}}e=t.position-e;return-1===r?(t.skip(-e),this.findDefaultInlineStreamEnd(t)):(this.inlineStreamSkipEI(t),e)},Nh.prototype.findHexDecodeInlineStreamEnd=function(t){for(var e=t.position,i=t.getByte();-1!==i&&62!==i;)i=t.getByte();e=t.position-e;return-1===i?(t.skip(-e),this.findDefaultInlineStreamEnd(t)):(this.inlineStreamSkipEI(t),e)},Nh.prototype.inlineStreamSkipEI=function(t){for(var e=0,i=t.getByte();-1!==i;){if(0===e)e=69===i?1:0;else if(1===e)e=73===i?2:0;else if(2===e)break;i=t.getByte()}},Nh.prototype.makeInlineImage=function(t,e,i){var r,n=this.lexicalOperator,s=n.stream,a=new D(this.xref);for(i&&(r=t instanceof Ph?t:this._encryptor._createCipherTransform(t,e));!ro(this.first,"ID")&&this.first!==xh;){if(!(this.first instanceof L))throw new v("Dictionary key must be a name object");var o=this.first.name;if(this.shift(),this.first.name===xh)break;t instanceof Ph?a.set(o,this.getObject(t)):a.set(o,this.getObject(t,e,i))}-1!==n.beginInlineImagePosition&&(p=s.position-n.beginInlineImagePosition);var h,c=a.get("F","Filter"),c=(c instanceof L?_=c.name:Array.isArray(c)&&(c=null!=(c=c[0])&&c instanceof A?this.xref._fetch(c):c)&&(_=c.name),s.position);switch(_){case"DCT":case"DCTDecode":h=this.findDiscreteDecodeInlineStreamEnd(s);break;case"A85":case"ASCII85Decode":h=this.findDecodeInlineStreamEnd(s);break;case"AHx":case"ASCIIHexDecode":h=this.findHexDecodeInlineStreamEnd(s);break;default:h=this.findDefaultInlineStreamEnd(s)}var _=s.makeSubStream(c,h,a);if(h<1e3&&p<5552){var c=_.getBytes(),d=(_.reset(),s.position),n=(s.position=n.beginInlineImagePosition,s.getBytes(p)),p=(s.position=d,d=this._computeMaxNumber(c)+"_"+this._computeMaxNumber(n),this.imageCache.get(d));if(void 0!==p)return this.second=Wa.get("EI"),this.shift(),p.reset(),p}return r&&(_=r.createStream(_,h)),(_=this.filter(_,a,h)).dictionary=a,void 0!==d&&this.imageCache.set(d,_),this.second=Wa.get("EI"),this.shift(),_},Nh.prototype._computeMaxNumber=function(t){for(var e=t.length,i=1,r=0,n=0;n<e;++n)r+=i+=255&t[n];return r%65521<<16|i%65521},Nh.prototype.makeStream=function(t,e,i){void 0===i&&(i=!1);var r=this.lexicalOperator,n=r.stream,s=(r.skipToNextLine(),n.position-1),a=t.get("Length");if(Number.isInteger(a)||(a=0),n.position=s+a,r.nextChar(),!this.tryShift()||!ro(this.second,"endstream")){var o=new Uint8Array([101,110,100,115,116,114,101,97,109]),h=this._findStreamLength(s,o);if(h<0){var c=o.length-1,o=o.slice(0,c),o=this._findStreamLength(s,o);if((h=0<=o&&gs(n.peekBytes(1+c)[c])?o:h)<0)throw new v("Missing endstream command.")}a=h,r.nextChar(),this.shift()}return this.shift(),this.shift(),n=n.makeSubStream(s,a,t),i||(e&&(n=e.createStream(n,a)),n=this.filter(n,t,a)),n.dictionary=t,n},Nh.prototype.filter=function(t,e,i){var r=e.get("F","Filter"),n=e.get("DP","DecodeParms");if(r instanceof L)return this.makeFilter(t,r.name,i,n);var s=i;if(Array.isArray(r))for(var a=r,o=n,h=0;h<a.length;++h){var c=a[Number.parseInt(h.toString(),10)];if(!((r=c instanceof A?this.xref._fetch(c):c)instanceof L))throw new v("Bad filter name '"+r+"'");n=null,Array.isArray(o)&&h in o&&(n=(c=o[Number.parseInt(h.toString(),10)])instanceof A?this.xref._fetch(c):c),t=this.makeFilter(t,r.name,s,n),s=null}return t},Nh.prototype.makeFilter=function(t,e,i,r){if(0===i)return new lo;try{return"Fl"===e||"FlateDecode"===e?r?new zo(new Bo(t,i),i,r):new Bo(t,i):t}catch(t){return new lo}},Nh.prototype._findStreamLength=function(t,e){for(var i=this.lexicalOperator.stream,r=(i.position=t,e.length);i.position<i.end;){var n=i.peekBytes(2048),s=n.length-r;if(s<=0)break;for(var a=0;a<s;){for(var o=0;o<r&&n[a+o]===e[o];)o++;if(r<=o)return i.position+=a,i.position-t;a++}i.position+=s}return-1},Nh.prototype.findDefaultInlineStreamEnd=function(t){for(var e=t.position,i=0,r=t.getByte();-1!==r;){if(0===i)i=69===r?1:0;else if(1===i)i=73===r?2:0;else{if(2!==i)throw new Error("findDefaultInlineStreamEnd - invalid state.");if(32===r||10===r||13===r){for(var n=t.position,s=t.peekBytes(10),a=0,o=s.length;a<o;a++)if((0!==(r=s[a])||0===s[a+1])&&10!==r&&13!==r&&(r<32||127<r)){i=0;break}if(2!==i){r=t.getByte();continue}if(2===i)break}else i=0}r=t.getByte()}-1===r&&void 0!==n&&t.skip(-(t.position-n));var h=4;return t.skip(-h),r=t.peekByte(),t.skip(h),gs(r)||h--,t.position-h-e},Nh.prototype._checkEnd=function(){return this.first===xh};var Th=Nh;function Nh(t,e,i,r,n){void 0===i&&(i=!1),void 0===r&&(r=!1),this._isColorSpace=!1,this._isPassword=!1,this.lexicalOperator=t,this.xref=e,this.allowStreams=i,this.recoveryMode=r,this.imageCache=new Map,this._encryptor=n,this.refill()}Fh.prototype.getInt=function(t,e,i){void 0===i&&(i=!1);t=t.get(e);if(void 0!==t&&Number.isInteger(t)&&(i?0<=t:0<t))return t;throw new Error("The '"+e+"' parameter in the linearization dictionary is invalid.")},Fh.prototype.getHints=function(t){var e=t.getArray("H"),i=e.length;if(!e||2!==i&&4!==i)throw new Error("Hint array in the linearization dictionary is invalid.");for(var r=0;r<i;r++){var n=e[r];if(!(Number.isInteger(n)&&0<n))throw new Error("Hint ("+r+") in the linearization dictionary is invalid.")}return e};var Rh=Fh;function Fh(t){this.isValid=!1;var e=new Th(new Ih(t),null),i=e.getObject(),r=e.getObject(),n=e.getObject(),e=e.getObject();if(this.isValid=Number.isInteger(i)&&Number.isInteger(r)&&ro(n,"obj")&&void 0!==e,this.isValid&&(i=e.get("Linearized"),this.isValid=void 0!==i&&0<i),this.isValid){r=this.getInt(e,"L");if(r!==t.length)throw new Error("The L parameter in the linearization dictionary does not equal the stream length.");this.length=r,this.hints=this.getHints(e),this.objectNumberFirst=this.getInt(e,"O"),this.endFirst=this.getInt(e,"E"),this.pageCount=this.getInt(e,"N"),this.mainXRefEntriesOffset=this.getInt(e,"T"),this.pageFirst=e.has("P")?this.getInt(e,"P",!0):0}}u.prototype._setStartXRef=function(t){this._startXRefQueue=[t],this._prevStartXref=t,void 0!==this._prevXRefOffset&&null!==this._prevXRefOffset||(this._prevXRefOffset=t)},u.prototype._parse=function(t){var e,i=t?this._indexObjects():this._readXRef(),r=(i.assignXref(this),i.get("Size")),r=(this._entries.length<r||this._entries.length===r?this._nextReferenceNumber=r:this._entries.length>r&&(this._nextReferenceNumber=0<this._entries.length?this._entries.length:1),(this._trailer=i).get("Encrypt")),n=(r&&(this._document._isEncrypted=!0,this._ids=i.get("ID"),this._permissionFlags=r.get("P"),n=this._ids&&this._ids.length?this._ids[0]:"",r.suppressEncryption=!0,this._encrypt=new Wo(r,n,this._password),this._document._isUserPassword=this._encrypt._isUserPassword,this._document._encryptOnlyAttachment=this._encrypt._encryptOnlyAttachment,this._document.fileStructure.isIncrementalUpdate?this._document.fileStructure.crossReferenceType=x.PdfCrossReferenceType.stream:this._document.fileStructure.crossReferenceType=x.PdfCrossReferenceType.table,this._encrypt._encryptOnlyAttachment?(this._document._hasUserPasswordOnly=!0,this._document._encryptMetaData=!1):(this._document._hasUserPasswordOnly=this._encrypt._hasUserPasswordOnly,this._document._encryptMetaData=!r.has("EncryptMetadata")||r.get("EncryptMetadata"))),!1);try{e=i.get("Root")}catch(t){throw new ga("Invalid cross reference","XRefParseException")}if(e)try{e.get("Pages")&&(this._root=e,n=!0)}catch(t){throw new ga("Invalid cross reference","InvalidXRef")}if(!n)throw new ga("Invalid cross reference",t?"InvalidXRef":"XRefParseException")},u.prototype._getEntry=function(t){t=this._entries[t];return t&&!t.free&&t.offset?t:null},u.prototype._fetch=function(e,t){var i;if(!(e instanceof A))throw new Error("ref object is not a reference");var r=e.objectNumber,n=this._cacheMap.get(e);if(void 0!==n)return n instanceof D&&!n.objId&&(n.objId=r),n;n=this._getEntry(r);if(null===n)return this._cacheMap.set(e,n),n;if(this._pendingRefs.has(e))throw this._pendingRefs.remove(e),new Error("circular reference");this._pendingRefs.put(e);try{i=n.uncompressed?this._fetchUncompressed(e,n,t):this._fetchCompressed(e,n),this._pendingRefs.remove(e)}catch(t){throw this._pendingRefs.remove(e),t}return i},u.prototype._fetchUncompressed=function(t,e,i){var r=t.generationNumber,n=t.objectNumber;if(e.gen!==r)throw new ga("Inconsistent generation in XRef: "+t,"XRefEntryException");var e=this._stream.makeSubStream(e.offset+this._stream.start,void 0),e=new Th(new Ih(e),this,!0,!1,this._encrypt),s=e.getObject(),a=e.getObject(),o=e.getObject();if(s!==n||a!==r||void 0===o)throw new ga("Bad (uncompressed) XRef entry: "+t,"XRefEntryException");return(s=this._encrypt&&!i?e.getObject(t.objectNumber,t.generationNumber,!0):e.getObject(null,i))instanceof y||this._cacheMap.set(t,s),s instanceof D?s.objId=t.toString():s instanceof y&&(s.dictionary.objId=t.toString()),s},u.prototype._fetchCompressed=function(t,e){var i=e.offset,r=this._fetch(A.get(i,0));if(void 0===r)throw new v("bad ObjStm stream");var n=r.dictionary.get("First"),s=r.dictionary.get("N"),a=t.generationNumber;if(!Number.isInteger(n)||!Number.isInteger(s))throw new v("invalid first and n parameters for ObjStm stream");for(var o=new Th(new Ih(r),this,!0),h=new Array(s),c=new Array(s),_=0;_<s;++_){var d=o.getObject();if(!Number.isInteger(d))throw new v("invalid object number in the ObjStm stream: "+d);var p=o.getObject();if(!Number.isInteger(p))throw new v("invalid object offset in the ObjStm stream: "+p);h[_]=d,c[_]=p}for(var l=(r.start||0)+n,u=new Array(s),_=0;_<s;++_){var f=_<s-1?c[_+1]-c[_]:void 0;if(f<0)throw new v("Invalid offset in the ObjStm stream.");var g,f=(o=new Th(new Ih(r.makeSubStream(l+c[_],f,r.dictionary)),this,!0)).getObject();(u[_]=f)instanceof y||(d=h[_],(g=this._entries[d])&&g.offset===i&&g.gen===_&&(g=d+" "+a,this._cacheMap.set(A.get(d,a),f),f instanceof D)&&(f.objId=g))}n=u[e.gen];if(void 0===n)throw new ga("Bad (compressed) XRef entry: "+t,"XRefEntryException");return n},u.prototype._readXRef=function(t){void 0===t&&(t=!1);var e=this._stream,i=new Set;try{for(;this._startXRefQueue.length;){var r=this._startXRefQueue[0];if(this._prevStartXref<r&&(this._prevStartXref=r),i.has(r));else{i.add(r),e.position=r+e.start;var n,s=new Th(new Ih(e),this,!0),a=s.getObject(),o=void 0;if(ro(a,"xref"))void 0===this._document._fileStructure._crossReferenceType&&(this._document._fileStructure._crossReferenceType=x.PdfCrossReferenceType.table),o=this._processXRefTable(s),this._topDictionary||(this._topDictionary=o),a=o.get("XRefStm"),!Number.isInteger(a)||(n=a)in this._crossReferencePosition||(this._crossReferencePosition[n]=1,this._startXRefQueue.push(n));else{if(!Number.isInteger(a))throw new v("Invalid XRef stream header");void 0===this._document._fileStructure._crossReferenceType&&(this._document._fileStructure._crossReferenceType=x.PdfCrossReferenceType.stream);var h=s.getObject(),c=s.getObject(),a=s.getObject();if(!(void 0!==h&&Number.isInteger(h)&&ro(c,"obj")&&a instanceof y))throw new v("Invalid cross reference stream");if(o=this._processXRefStream(a),this._topDictionary||(this._topDictionary=o),!o)throw new v("Failed to read XRef stream")}a=o.get("Prev"),Number.isInteger(a)?this._startXRefQueue.push(a):a instanceof A&&this._startXRefQueue.push(a.objectNumber)}this._startXRefQueue.shift()}return this._topDictionary}catch(t){this._startXRefQueue.shift()}if(!t)throw new ga("Invalid cross reference","XRefParseException")},u.prototype._readToken=function(t,e){for(var i="",r=t[e];10!==r&&13!==r&&60!==r&&!(++e>=t.length);)i+=String.fromCharCode(r),r=t[e];return i},u.prototype._skipUntil=function(t,e,i){for(var r=i.length,n=t.length,s=0;e<n;){for(var a=0;a<r&&t[e+a]===i[a];)++a;if(r<=a)break;e++,s++}return s},u.prototype._indexObjects=function(){for(var t=/^(\d+)\s+(\d+)\s+obj\b/,e=/\bendobj[\b\s]$/,i=/\s+(\d+\s+\d+\s+obj[\b\s<])$/,r=new Uint8Array([116,114,97,105,108,101,114]),n=new Uint8Array([115,116,97,114,116,120,114,101,102]),s=new Uint8Array([111,98,106]),a=new Uint8Array([47,88,82,101,102]),o=(this._entries.length=0,this._cacheMap.clear(),this._stream),h=(o.position=0,o.getBytes()),c=h.length,_=o.start,d=[],p=[];_<c;){var l=h[_];if(9===l||10===l||13===l||32===l)++_;else if(37===l)for(;!(c<=++_)&&10!==(l=h[_])&&13!==l;);else{var u=this._readToken(h,_);if(u.startsWith("xref")&&(4===u.length||/\s/.test(u[4])))_+=this._skipUntil(h,_,r),d.push(_),_+=this._skipUntil(h,_,n);else if(g=t.exec(u)){var f=0|Number.parseInt(g[1]),g=0|Number.parseInt(g[2]),y=void 0,m=_+u.length,b=!1;if(this._entries[f]){if(this._entries[f].gen===g)try{var S=o.makeSubStream(m,o.length-m),w=new Ih(S);(k=new Th(w,null)).getObject(),b=!0}catch(t){b=!(t instanceof ba)}}else b=!0;for(b&&((b=new Dh).offset=_-o.start,b.gen=g,b.uncompressed=!0,this._entries[f]=b);m<h.length;){var v=m+this._skipUntil(h,m,s)+4,y=v-_,P=Math.max(v-25,m),P=_s(h.subarray(P,v));if(e.test(P))break;P=i.exec(P);if(P&&P[1]){y-=P[1].length;break}m=v}g=h.subarray(_,_+y),f=this._skipUntil(g,0,a);f<y&&g[f+5]<64&&(p.push(_-o.start),this._crossReferencePosition[_-o.start]=1),_+=y}else u.startsWith("trailer")&&(7===u.length||/\s/.test(u[7]))?(d.push(_),_+=this._skipUntil(h,_,n)):_+=u.length+1}}for(var A,x=0;x<p.length;++x)this._startXRefQueue.push(p[x]),this._readXRef(!0);for(var k,x=0;x<d.length;++x)if(o.position=d[x],ro((k=new Th(new Ih(o),this,!0,!0)).getObject(),"trailer")){var I=k.getObject();if(I instanceof D){try{var C=I.get("Root");if(!(C instanceof D))continue;var T=C.get("Pages");if(!(T instanceof D))continue;var N=T.get("Count");if(void 0===N||!Number.isInteger(N))continue}catch(t){continue}if(I.has("ID"))return I;A=I}}if(A)return A;if(this._topDictionary)return this._topDictionary;throw new ga("Invalid PDF structure.","InvalidPDFException")},u.prototype._processXRefTable=function(t){if(void 0===this._tableState&&((i=new Bh).entryNum=0,i.streamPos=t.lexicalOperator.stream.position,i.parserBuf1=t.first,i.parserBuf2=t.second,this._tableState=i),!ro(this._readXRefTable(t),"trailer"))throw new v("Invalid XRef table: could not find trailer dictionary");var e,i=t.getObject();if(i&&(i instanceof D?e=i:i instanceof y&&i.dictionary&&(e=i.dictionary)),e)return this._tableState=void 0,e;throw new v("Invalid cross reference: could not parse trailer dictionary")},u.prototype._readXRefTable=function(t){var e,i=t.lexicalOperator.stream;for(i.position=this._tableState.streamPos,t.first=this._tableState.parserBuf1,t.second=this._tableState.parserBuf2;;){if(void 0===this._tableState.firstEntryNum||void 0===this._tableState.entryCount){if(ro(e=t.getObject(),"trailer"))break;this._tableState.firstEntryNum=e,this._tableState.entryCount=t.getObject()}var r=this._tableState.firstEntryNum,n=this._tableState.entryCount;if(!Number.isInteger(r)||!Number.isInteger(n))throw new v("Invalid cross reference: wrong types in subsection header");for(var s=this._tableState.entryNum;s<n;s++){this._tableState.streamPos=i.position,this._tableState.entryNum=s,this._tableState.parserBuf1=t.first,this._tableState.parserBuf2=t.second;var a=new Dh,o=(a.offset=t.getObject(),a.gen=t.getObject(),t.getObject());if(o)switch(o.command){case"f":a.free=!0;break;case"n":a.uncompressed=!0}if(!Number.isInteger(a.offset)||!Number.isInteger(a.gen)||!a.free&&!a.uncompressed)throw new v("Invalid entry in cross reference subsection: "+r+", "+n);0===s&&a.free&&1===r&&(r=0),this._entries[s+r]||(this._entries[s+r]=a)}this._tableState.entryNum=0,this._tableState.streamPos=i.position,this._tableState.parserBuf1=t.first,this._tableState.parserBuf2=t.second,this._tableState.firstEntryNum=void 0,this._tableState.entryCount=void 0}if(this._entries[0]&&!this._entries[0].free)throw new v("Invalid XRef table: unexpected first object");return e},u.prototype._processXRefStream=function(t){var e,i,r;return void 0===this._streamState&&(e=t.dictionary,i=new Oh,r=(r=e.getArray("Index"))||[0,e.get("Size")],i.entryRanges=r,i.byteWidths=e.getArray("W"),i.entryNum=0,i.streamPos=t.position,this._streamState=i),this._readXRefStream(t),this._streamState=void 0,t.dictionary},u.prototype._readXRefStream=function(t){t.position=this._streamState.streamPos;for(var e=this._streamState.byteWidths[0],i=this._streamState.byteWidths[1],r=this._streamState.byteWidths[2],n=this._streamState.entryRanges;0<n.length;){var s=n[0],a=n[1];if(!Number.isInteger(s)||!Number.isInteger(a))throw new v("Invalid XRef range fields: "+s+", "+a);if(!Number.isInteger(e)||!Number.isInteger(i)||!Number.isInteger(r))throw new v("Invalid XRef entry fields length: "+s+", "+a);for(var o=this._streamState.entryNum;o<a;++o){this._streamState.entryNum=o,this._streamState.streamPos=t.position;for(var h=0,c=0,_=0,d=0;d<e;++d){var p=t.getByte();if(-1===p)throw new v("invalid cross reference byte width type.");h=h<<8|p}0===e&&(h=1);for(d=0;d<i;++d){var l=t.getByte();if(-1===l)throw new v("invalid cross reference byte width offset.");c=c<<8|l}for(d=0;d<r;++d){var u=t.getByte();if(-1===u)throw new v("invalid cross reference byte width generation.");_=_<<8|u}var f=new Dh;switch(f.offset=c,f.gen=_,h){case 0:f.free=!0;break;case 1:f.uncompressed=!0;break;case 2:break;default:throw new v("Invalid XRef entry type: "+h)}this._entries[s+o]||(this._entries[s+o]=f)}this._streamState.entryNum=0,this._streamState.streamPos=t.position,n.splice(0,2)}},u.prototype._getCatalogObj=function(){return this._root},u.prototype._save=function(){var t,e,i=[37,80,68,70,45];return this._writeString(""+this._version+this._newLine,i),i.push(37,131,146,250,254),this._writeString(this._newLine,i),this._document.fileStructure.isIncrementalUpdate?(this._currentLength=this._stream.length,this._writeString(""+this._version+this._newLine,t=[37,80,68,70,45]),t.push(37,131,146,250,254),this._writeString(this._newLine,t),this._document._fileStructure._crossReferenceType===x.PdfCrossReferenceType.stream?this._saveAsStream(this._currentLength,t):this._saveAsTable(this._currentLength,t),(e=new Uint8Array(this._stream.length+t.length)).set(this._stream.bytes),e.set(t,this._stream.length)):(this._currentLength=0,t=new jh(this),this._writeObjectCollection(t._mainObjectCollection,i),t=new g(i),this._stream=t,this._document._stream=t,(e=new Uint8Array(this._stream.length)).set(this._stream.bytes),e.set(i,0)),e},u.prototype._saveAsStream=function(r,n){var s=this,a=new Map;this._indexes=[],this._indexes.push(0,1),this._cacheMap.forEach(function(t,e){var i;(i=t instanceof y?t.dictionary:i)&&i._updated&&(!i.isCatalog||s._allowCatalog)&&(i=void 0,s._encrypt&&(i=s._encrypt._createCipherTransform(e.objectNumber,e.generationNumber)),s._updatedDictionary(r,e,n,t,i))}),this._cacheMap.forEach(function(t,e){var i;t instanceof D?!t._updated||t.isCatalog&&!s._allowCatalog||s._writeArchiveStream(a,e,t):t instanceof y&&(i=t.dictionary)&&i._updated&&(!i.isCatalog||s._allowCatalog)&&s._updatedDictionary(r,e,n,t)}),this._objectStream=void 0,this._objectStreamCollection=a,this._writeXrefStream(n)},u.prototype._updatedDictionary=function(t,e,i,r,n){this._indexes.push(e.objectNumber,1),this._offsets.push(t+i.length),this._writeObject(r,i,e,n),r._updated=!1},u.prototype._writeXrefStream=function(r){var n=this,s=(this._objectStreamCollection.forEach(function(t,e){t._save(r,n._currentLength);for(var i=0;i<t._collection.length;i++)n._indexes.push(t._collection[Number.parseInt(i.toString(),10)]);n._indexes.push(e.objectNumber,1)}),Math.max(Na(this._currentLength+r.length),Na(this._nextReferenceNumber))),t=this._getNextReference(),e=(this._indexes.push(t.objectNumber,1),this._currentLength+r.length),i=new D(this),a=(i.set("Type",L.get("XRef")),i.set("Index",this._indexes),i.set("W",[1,s,1]),this._copyTrailer(i),this._ids&&0<this._ids.length&&i.update("ID",[this._ids[0],this._computeMessageDigest(e)]),[]);if(this._writeLong(0,1,a),this._writeLong(0,s,a),this._writeLong(-1,1,a),0<this._offsets.length)for(var o=0;o<this._offsets.length;o++)this._writeLong(1,1,a),this._writeLong(this._offsets[o],s,a),this._writeLong(0,1,a);0<this._objectStreamCollection.size&&this._objectStreamCollection.forEach(function(t,e){for(var i=0;i<t._length;i++)n._writeLong(2,1,a),n._writeLong(e.objectNumber,s,a),n._writeLong(i,1,a);n._writeLong(1,1,a),n._writeLong(t._archiveOffset,s,a),n._writeLong(0,1,a)}),this._writeLong(1,1,a),this._writeLong(e,s,a),this._writeLong(0,1,a),i.set("Length",a.length);var h,i=new g(a,i,0,a.length);this._encrypt&&(h=this._encrypt._createCipherTransform(t.objectNumber,t.generationNumber)),this._writeObject(i,r,t,h,!0),this._writeString("startxref"+this._newLine+e+this._newLine+"%%EOF"+this._newLine,r)},u.prototype._saveAsTable=function(n,s){var a=this,o="",t=(this._cacheMap.forEach(function(t,e){var i,r;t instanceof D?i=t:t instanceof y&&(i=t.dictionary),i&&i._updated&&(!i.isCatalog||a._allowCatalog)&&(i=a._processString((n+s.length).toString(),10),r=a._processString(e.generationNumber.toString(),5),o+=e.objectNumber+" 1"+a._newLine+i+" "+r+" n"+a._newLine,a._writeObject(t,s,e))}),s.length+n);this._writeString("xref"+this._newLine+"0 1"+this._newLine+"0000000000 65535 f"+this._newLine,s),this._writeXref(s,o,t)},u.prototype._writeXref=function(t,e,i){this._writeString(e,t),this._writeString("trailer"+this._newLine,t);e=new D(this);this._copyTrailer(e),this._writeDictionary(e,t,this._newLine),this._writeString("startxref"+this._newLine+i+this._newLine+"%%EOF"+this._newLine,t)},u.prototype._writeXrefTable=function(t){var r=this,n="",e=this._getSortedReferences(this._offsetReference),i=(e.forEach(function(t,e){var i=r._processString(t.toString(),10),e=r._processString(e.generationNumber?"0":"",5);n+=0!==t?i+" "+e+" n"+r._newLine:i+" "+e+" f"+r._newLine}),t.length),s="xref"+this._newLine,e="0 "+(e.size+1)+this._newLine,a="0000000000 65535 f"+this._newLine;this._writeString(s+e+a,t),this._writeXref(t,n,i)},u.prototype._processString=function(t,e){for(;t.length<e;)t="0"+t;return t},u.prototype._copyTrailer=function(t){var e=this._getNextReference(),e=(t.set("Size",e.objectNumber),this._document.fileStructure.isIncrementalUpdate&&t.set("Prev",this._prevXRefOffset),this._trailer.getRaw("Root")),e=(null!=e&&t.set("Root",e),this._trailer.getRaw("Info")),e=(null!=e&&t.set("Info",e),this._trailer.getRaw("Encrypt"));null!=e&&t.set("Encrypt",e)},u.prototype._computeMessageDigest=function(t){var e=this,i=[Math.floor(Date.now()/1e3).toString(),"",t.toString()],t=this._trailer.getRaw("Info"),r=new D,n=(t&&t instanceof D&&t.forEach(function(t,e){e&&"string"==typeof e&&r.set(t,as(e))}),r.forEach(function(t,e){i.push(e)}),[]);return i.forEach(function(t){e._writeString(t,n)}),_s((new Ko).hash(new Uint8Array(n)))},u.prototype._getNextReference=function(){var t=new A(this._nextReferenceNumber++,0);return t._isNew=!0,t},u.prototype._writeObject=function(i,r,t,n,s){var a=this;t&&t instanceof A&&this._writeString(t.objectNumber+" "+t.generationNumber+" obj"+this._newLine,r),i instanceof D?this._writeDictionary(i,r,this._newLine,n,s):i instanceof y?this._writeStream(i,r,n,s):Array.isArray(i)&&0<i.length?(this._writeString("[ ",r),i.forEach(function(t,e){t instanceof A?a._writeString(t.objectNumber+" "+t.generationNumber+" R",r):Array.isArray(t)?(a._writeString("[ ",r),t.forEach(function(t){t instanceof A?a._writeString(t.objectNumber+" "+t.generationNumber+" R",r):t instanceof L?a._writeString("/"+t.name,r):a._writeString(t+" ",r)}),a._writeString("]",r)):t instanceof L?a._writeString("/"+t.name,r):t instanceof D?a._writeDictionary(t,r,a._newLine,n,s):a._writeString(t+"\n",r),e<i.length-1&&a._writeString(" ",r)}),this._writeString("]",r),this._writeString("\n",r)):"number"==typeof i&&this._writeString(i+"\n",r),t&&t instanceof A&&this._writeString("endobj"+this._newLine,r)},u.prototype._writeDictionary=function(t,i,r,n,s){var a=this;t._currentObj&&t._currentObj._beginSave(),t._isFont&&this._writeFontDictionary(t),this._writeString("<<"+r,i),t.forEach(function(t,e){a._writeString("/"+js(t)+" ",i),a._writeValue(e,i,n,s),a._writeString(r,i)}),this._writeString(">>"+this._newLine,i)},u.prototype._writeFontDictionary=function(t){var e,i;t.has("DescendantFonts")&&(e=t.get("DescendantFonts"),i=this._getNextReference(),this._cacheMap.set(i,e),t.update("DescendantFonts",[i])),t.has("ToUnicode")&&(e=t.get("ToUnicode"),i=this._getNextReference(),this._cacheMap.set(i,e),t.update("ToUnicode",i)),t.has("FontFile2")&&(e=t.get("FontFile2"),i=this._getNextReference(),this._cacheMap.set(i,e),t.update("FontFile2",i)),t.has("FontDescriptor")&&(e=t.get("FontDescriptor"),i=this._getNextReference(),this._cacheMap.set(i,e),t.update("FontDescriptor",i))},u.prototype._writeStream=function(t,e,i,r){var n,s=[];r?n=t.getString():(n=t._isCompress&&!t._isImage?Oa(t):t.getString(),i&&(n=i.encryptString(n))),this._writeString(n,s),t.dictionary.update("Length",s.length),this._writeDictionary(t.dictionary,e,this._newLine,i,r),this._writeString("stream"+this._newLine,e),this._writeBytes(s,e),this._writeString(this._newLine+"endstream"+this._newLine,e)},u.prototype._writeValue=function(t,e,i,r){if(t instanceof L)-1!==t.name.indexOf(" ")&&(t.name=t.name.replace(/ /g,"#20")),this._writeString("/"+t.name,e);else if(t instanceof A)this._writeString(t.toString()+" R",e);else if(Array.isArray(t)){this._writeString("[",e);for(var n=!0,s=0,a=t;s<a.length;s++){var o=a[s];n?n=!1:this._writeString(" ",e),this._writeValue(o,e,i,r)}this._writeString("]",e)}else if("string"==typeof t){!r&&i&&(t=i.encryptString(t));for(var h=!1,c=0;c<t.length;c++)if(255<t.charCodeAt([c])){h=!0;break}h?this._writeUnicodeString(t,e):this._writeString("("+this._escapeString(t)+")",e)}else"number"==typeof t?this._writeString(hs(t),e):"boolean"==typeof t?this._writeString(t.toString(),e):t instanceof D?this._writeDictionary(t,e,this._newLine,i,r):t instanceof y?this._writeStream(t,e,i,r):null===t&&this._writeString("null",e)},u.prototype._writeUnicodeString=function(t,e){for(var i=Ra(t),r=(i.unshift(254,255),[]),n=0;n<i.length;n++){var s=i[Number.parseInt(n.toString(),10)];switch(s){case 40:case 41:r.push(92),r.push(s);break;case 13:r.push(92),r.push(114);break;case 92:r.push(92),r.push(s);break;default:r.push(s)}}e.push(255&"(".charCodeAt(0));for(n=0;n<r.length;n++)e.push(255&r[Number.parseInt(n.toString(),10)]);e.push(255&")".charCodeAt(0))},u.prototype._writeString=function(t,e){for(var i=0;i<t.length;i++)e.push(255&t.charCodeAt(i))},u.prototype._writeBytes=function(t,e){for(var i=0;i<t.length;i++)e.push(t[i])},u.prototype._writeLong=function(t,e,i){for(var r=e-1;0<=r;--r)i.push(t>>(r<<3)&255)},u.prototype._escapeString=function(t){return t.replace(/([()\\\n\r])/g,function(t){return"\n"===t?"\\n":"\r"===t?"\\r":"\\"+t})},u.prototype._destroy=function(){this._entries=void 0,this._pendingRefs&&(this._pendingRefs.clear(),this._pendingRefs=void 0),this._cacheMap&&this._cacheMap.clear(),this._offsetReference&&this._offsetReference.clear(),this._objectStreamCollection&&this._objectStreamCollection.clear(),this._offsets=[],this._startXRefQueue=[],this._root=void 0,this._startXRefQueue=void 0,this._stream=void 0,this._streamState=void 0,this._tableState=void 0,this._topDictionary=void 0,this._trailer=void 0,this._version=void 0,this._crossReferencePosition=void 0},u.prototype._writeObjectCollection=function(i,r){var n=this,s=new Map;this._indexes=[],this._indexes.push(0,1),i.forEach(function(t,e){n._writeObjectToBuffer(e,t,r,s)}),this._cacheMap.size>i.size&&this._cacheMap.forEach(function(t,e){i.has(e)||n._writeObjectToBuffer(e,t,r,s)}),this._document.fileStructure._crossReferenceType===x.PdfCrossReferenceType.stream?(this._objectStream=void 0,this._objectStreamCollection=s,this._writeXrefStream(r)):this._writeXrefTable(r)},u.prototype._writeArchiveStream=function(t,e,i){var r;void 0!==this._objectStream&&100!==this._objectStream._length||(r=new Mh(this),t.set(r._reference,r),this._objectStream=r),this._objectStream._writeObject(e,i)},u.prototype._writeObjectToBuffer=function(t,e,i,r){var n;if(e instanceof D&&e.isCatalog)this._writeToBuffer(i,t,e);else if(e instanceof D){var s=e.get("Filter"),s=s&&"Standard"===s.name;this._document.fileStructure._crossReferenceType===x.PdfCrossReferenceType.stream?s?this._writeToBuffer(i,t,e):this._writeArchiveStream(r,t,e):(this._offsetReference.set(t,i.length),this._indexes.push(t.objectNumber,1),this._writeObject(e,i,t))}else{if(e instanceof y){s=e.dictionary;s&&s._updated&&!s.isCatalog&&(this._encrypt&&(n=this._encrypt._createCipherTransform(t.objectNumber,t.generationNumber)),s._updated=!1)}else if((!Array.isArray(e)||0===e.length)&&"number"!=typeof e)return;this._writeToBuffer(i,t,e,n)}},u.prototype._writeToBuffer=function(t,e,i,r){this._offsets.push(t.length),this._offsetReference.set(e,t.length),this._indexes.push(e.objectNumber,1),this._writeObject(i,t,e,r)},u.prototype._getSortedReferences=function(t){for(var i=[],e=(t.forEach(function(t,e){i.push([e,t])}),i.sort(function(t,e){return t[0].objectNumber-e[0].objectNumber}),new Map),r=1,n=0,s=i;n<s.length;n++){for(var a=s[n],o=a[0],a=a[1],h=o.objectNumber;r<h;)e.set({objectNumber:r},0),r++;e.set(o,a),r=h+1}return e};var Lh=u;function u(t,e){this._version="",this._newLine="\r\n",this._password=e,this._document=t,this._stream=t._stream,this._entries=[],this._crossReferencePosition=Object.create(null),this._cacheMap=new Map,this._offsetReference=new Map,this._pendingRefs=new Xa,this._offsets=[]}var Dh=function(){},Bh=function(){},Oh=function(){},Mh=(Eh.prototype._writeObject=function(t,e){this._archiveXRef+=t.objectNumber+" "+this._updatedStream.length+this._crossReference._newLine,this._collection.push(t.objectNumber,1),this._crossReference._writeObject(e,this._updatedStream),this._length++},Eh.prototype._save=function(t,e){var i,r=[],n=(this._crossReference._writeString(this._archiveXRef,r),this._crossReference._writeBytes(this._updatedStream,r),new D(this._crossReference)),n=(n.set("Type",L.get("ObjStm")),n.set("N",this._length),n.set("First",this._archiveXRef.length),n.set("Length",r.length),new g(r,n,0,r.length));this._archiveOffset=e+t.length,this._crossReference._encrypt&&(i=this._crossReference._encrypt._createCipherTransform(this._reference.objectNumber,this._reference.generationNumber)),this._crossReference._writeObject(n,t,this._reference,i)},Eh);function Eh(t){this._indexes="",this._length=0,this._crossReference=t,this._reference=t._getNextReference(),this._archiveXRef="",this._updatedStream=[],this._collection=[]}Vh.prototype._parseObjectCollection=function(){for(var n=this,t=this;this._pointer<this._mainObjectCollection.size;)!function(){var i=new Map,r=0;t._mainObjectCollection.forEach(function(t,e){r===n._pointer&&(i.set(e,t),n._parse(e,t)),r++}),t._pointer++}();return this._addReferencesToMainCollection(),this._mainObjectCollection},Vh.prototype._addToMainObjectCollection=function(t,e){this._reference.push(t),this._mainObjectCollection.set(t,e)},Vh.prototype._parseFetchValue=function(t){var e=this._crossReference._fetch(t);this._parse(t,e)},Vh.prototype._parse=function(t,e){var i=this;e instanceof D?this._parseDictionary(e):e instanceof y?this._parseStream(t,e):e instanceof A?this._parseFetchValue(e):Array.isArray(e)&&0<e.length?e.every(function(t){return t instanceof A})?e.forEach(function(t){return i._parseFetchValue(t)}):(e.forEach(function(t){t instanceof A&&i._parseFetchValue(t)}),-1!==this._reference.indexOf(t)||this._mainObjectCollection.has(t)||this._addToMainObjectCollection(t,e)):"number"!=typeof e||-1!==this._reference.indexOf(t)||this._mainObjectCollection.has(t)||this._addToMainObjectCollection(t,e)},Vh.prototype._addReferencesToMainCollection=function(){var i=this,r=[];this._cache.forEach(function(t,e){i._mainObjectCollection.has(e)||r.push({key:e,value:t})}),r.forEach(function(t){var e=t.key,t=t.value;i._addToMainObjectCollection(e,t)})},Vh.prototype._parseDictionary=function(t){var r=this;t.forEach(function(t,e){function i(t){var e;r._mainObjectCollection.has(t)||-1!==r._reference.indexOf(t)||((e=(e=r._crossReference._fetch(t))instanceof A?r._crossReference._fetch(e):e)instanceof y?r._parseStream(t,e):r._addToMainObjectCollection(t,e))}e instanceof A?i(e):Array.isArray(e)?e.forEach(function(t){t instanceof A?i(t):t instanceof D&&r._parseDictionary(t)}):e instanceof D&&r._parseDictionary(e)})},Vh.prototype._parseStream=function(t,e){var i,r,n;this._parseDictionary(e.dictionary),-1!==this._reference.indexOf(t)||this._mainObjectCollection.has(t)||(i=e.dictionary.get("Type"),r=e.dictionary.get("Subtype"),n=void 0,e.dictionary._updated||i&&("XObject"===i.name||"Metadata"===i.name)&&("Form"===r.name||"XML"===r.name)?n=this._crossReference._fetch(t):(n=this._crossReference._fetch(t,!0))._isCompress=!1,this._addToMainObjectCollection(t,n))};var jh=Vh;function Vh(t){var i=this;if(this._pointer=0,!(t._cacheMap instanceof Map))throw new Error("Expected _cacheMap to be a Map.");this._reference=[],this._cache=t._cacheMap,this._mainObjectCollection=new Map;var r=!1;this._crossReference=t,this._cache.forEach(function(t,e){!r&&t instanceof D&&t.isCatalog&&(i._addToMainObjectCollection(e,t),r=!0)}),this._parseObjectCollection()}Object.defineProperty(b.prototype,"count",{get:function(){return this._fields.length},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"needAppearances",{get:function(){return this._dictionary.has("NeedAppearances")&&(this._needAppearances=this._dictionary.get("NeedAppearances")),this._needAppearances},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"exportEmptyFields",{get:function(){return this._exportEmptyFields},set:function(t){this._exportEmptyFields=t},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"_signatureFlag",{get:function(){return this._signFlag},set:function(t){t!==this._signFlag&&(this._signFlag=t,this._dictionary.update("SigFlags",t))},enumerable:!0,configurable:!0}),b.prototype.fieldAt=function(t){if(t<0||t>=this._fields.length)throw Error("Index out of range.");var e,i,r;return this._parsedFields.has(t)?(e=this._parsedFields.get(t),this._isNeedAppearances=!0):(i=void 0,(i=(r=this._fields[t])&&r instanceof A?this._crossReference._fetch(r):i)&&(e=this._parseFields(i,r),this._parsedFields.set(t,e),e)&&e instanceof Ke&&(e._annotationIndex=t)),e},b.prototype._parseFields=function(t,e){var i;if(t){var r=Ss(t,"FT",!1,!0,"Parent"),n=0,s=Ss(t,"Ff",!1,!0,"Parent");if(void 0!==s&&(n=s),r)switch(r.name.toLowerCase()){case"tx":i=qe._load(this,t,this._crossReference,e);break;case"btn":i=(0!=(n&x._FieldFlag.pushButton)?Ye:0!=(n&x._FieldFlag.radio)?ri:ti)._load(this,t,this._crossReference,e);break;case"ch":i=(0!=(n&x._FieldFlag.combo)?ci:pi)._load(this,t,this._crossReference,e);break;case"sig":i=fi._load(this,t,this._crossReference,e)}}return i},b.prototype.add=function(t){return this._fields.push(t._ref),this._dictionary.update("Fields",this._fields),this._parsedFields.set(this._fields.length-1,t),(t._form=this)._crossReference._root._updated=!0,t instanceof fi&&(t._form._signatureFlag=x._SignatureFlag.signatureExists|x._SignatureFlag.appendOnly),this._isNeedAppearances=!0,this._fields.length-1},b.prototype.removeField=function(t){t=this._fields.indexOf(t._ref);0<=t&&this.removeFieldAt(t)},b.prototype.removeFieldAt=function(t){var e=this.fieldAt(t);if(e){if(0<e._kidsCount)for(var i=e._kidsCount-1;0<=i;i--){var r=e.itemAt(i),n=void 0;r&&(n=r._getPage())&&n._removeAnnotation(r._ref)}else e._dictionary.has("Subtype")&&"Widget"===e._dictionary.get("Subtype").name&&(n=e.page)&&n._removeAnnotation(e._ref);this._parsedFields.delete(t),this._reorderParsedAnnotations(t)}this._fields.splice(t,1);var t=this._crossReference._document,s=t._catalog;0===this._fields.length&&t&&s&&s._catalogDictionary&&(s._catalogDictionary._updated=!0,this._crossReference._allowCatalog=!0),this._dictionary.set("Fields",this._fields),this._dictionary._updated=!0},b.prototype._reorderParsedAnnotations=function(i){var r=new Map;this._parsedFields.forEach(function(t,e){i<e?r.set(e-1,t):r.set(e,t)}),this._parsedFields=r},b.prototype.setDefaultAppearance=function(t){this._setAppearance=!t,this._needAppearances=t,this._isDefaultAppearance=t},b.prototype.orderFormFields=function(t){var a=this;if(null==t)this.orderFormFields(new Map);else{var e=void 0,i=this._crossReference._document,r=void 0;if(t&&t instanceof Map){var n=!0,s=(0<t.size||(n=!1),this._tabCollection=t,new Map);if(this._fieldCollection=this._getFields(),F(this._fieldCollection)&&0<this._fieldCollection.length)if(this._fieldCollection[0].page&&i){for(var o=0;o<this._fieldCollection.length;o++){var h,c=this._fieldCollection[Number.parseInt(o.toString(),10)];c.page&&0<=(h=rs(i,this._sortItemByPageIndex(c,!0)._pageDictionary))&&(s.has(h)?(r=s.get(h)).push(c):((r=[]).push(c),s.set(h,r)),c=i.getPage(h),this._tabCollection.has(h)||this._tabCollection.set(h,c.tabOrder),n)&&(c.tabOrder=this._tabCollection.get(h))}var _=0;s.forEach(function(t,e){if(a._tabOrder=a._tabCollection.get(e),a._tabOrder!==x.PdfFormFieldsTabOrder.structure){var i=t;i.sort(function(t,e){return a._compareFields(t,e)});for(var r=0;r<i.length;r++){var n,s=a._fieldCollection.indexOf(i[Number.parseInt(r.toString(),10)]);-1!==s&&s!==_+r&&(n=a._fieldCollection[Number.parseInt(s.toString(),10)],a._fieldCollection.splice(s,1),a._fieldCollection.splice(_+r,0,n))}}_+=t.length})}}else this._tabOrder=t,e=this._getOrder(this._tabOrder),this._fieldCollection=this._getFields(),this._fieldCollection.sort(function(t,e){return a._compareFields(t,e)});this._parsedFields.clear();for(o=0;o<this._fieldCollection.length;o++)this._parsedFields.set(Number.parseInt(o.toString(),10),this._fieldCollection[Number.parseInt(o.toString(),10)]),this._fields[Number.parseInt(o.toString(),10)]=this._fieldCollection[Number.parseInt(o.toString(),10)]._ref,e&&this._fieldCollection[Number.parseInt(o.toString(),10)].page._pageDictionary.update("Tabs",e);this._dictionary.update("Fields",this._fields)}},b.prototype._createFields=function(){this._dictionary.has("Fields")&&(d=this._dictionary.get("Fields"));for(var t=!1,e=0,i=[];null!=d;){for(;e<d.length;e++){var r=d[e],n=void 0,s=0,a=Ss(n=r&&r instanceof A?this._crossReference._fetch(r):n,"Ff",!1,!0,"Parent"),o=(void 0!==a&&(s=a),void 0);if(n&&n.has("Kids")&&void 0!==(o=n.get("Kids"))&&0<o.length)for(var h=0;h<o.length;h++){var c=o[Number.parseInt(h.toString(),10)];c&&c instanceof A?void 0===(c=this._crossReference._fetch(c))||c.has("Parent")||c.update("Parent",r):0!=(s&x._FieldFlag.radio)&&(t=!0)}void 0===o?n&&-1===this._fields.indexOf(r)&&this._fields.push(r):!n.has("FT")||this._isNode(o)?(i.push({fields:d,count:e}),this._hasKids=!0,e=-1,d=o):t&&0!=(s&x._FieldFlag.radio)||this._fields.push(r)}if(0===i.length)break;var _=i.pop(),d=_.fields,e=_.count+1}},b.prototype._isNode=function(t){var e,i=!1;return i=F(t)&&0<t.length&&(e=void 0,F(t=t[0])&&(t instanceof D?e=t:t instanceof A&&(e=this._crossReference._fetch(t))),e)&&e.has("Subtype")&&(t=e.get("Subtype"))&&"Widget"!==t.name?!0:i},b.prototype._parseWidgetReferences=function(){var i=this;return void 0===this._widgetReferences&&0<this.count&&(this._widgetReferences=[],this._fields.forEach(function(t){var e=i._crossReference._fetch(t);e&&(e.has("Kids")?(e=e.get("Kids"))&&0<e.length&&e.forEach(function(t){var e;t&&t instanceof D?e=t:t&&t instanceof A&&(e=i._crossReference._fetch(t)),e&&e.has("Subtype")&&(e=e.get("Subtype"))&&"Widget"===e.name&&i._widgetReferences.push(t)}):i._widgetReferences.push(t))})),this._widgetReferences},b.prototype._doPostProcess=function(t,e){for(var i=this.count-1;0<=i;i--){var r=this.fieldAt(i);if(r&&!r._isLoaded&&void 0!==r._tabIndex&&0<=r._tabIndex){var n=r._page;if(n&&n._pageDictionary.has("Annots")&&(n.tabOrder===x.PdfFormFieldsTabOrder.manual||this._tabOrder===x.PdfFormFieldsTabOrder.manual)){var s=n._pageDictionary.get("Annots"),a=new pn(s,this._crossReference,n);n._annotations=a;for(var o=0;o<r.itemsCount;o++){var h=r.itemAt(o);h&&h instanceof zr&&0<=(h=(h=s.indexOf(h._ref))<0?r._annotationIndex:h)&&(h=n.annotations._reArrange(r._ref,r._tabIndex,h),n._pageDictionary.update("Annots",h),n._pageDictionary._updated=!0)}}}r&&(e&&r.page===e||!e)&&(e&&(r._isImport=!0),r._doPostProcess(t||r.flatten),!t&&r.flatten||t&&e&&r.page===e)&&this.removeFieldAt(i)}},b.prototype._getFieldIndex=function(t){var e=-1;if(0<this.count){this._fieldNames||(this._fieldNames=[]),this._indexedFieldNames||(this._indexedFieldNames=[]),this._actualFieldNames||(this._actualFieldNames=[]),this._indexedActualFieldNames||(this._indexedActualFieldNames=[]);for(var i=0;i<this.count;i++){var r,n=this.fieldAt(i);n&&((r=n.name)&&(this._fieldNames.push(r),this._indexedFieldNames.push(r.split("[")[0])),r=n.actualName)&&(this._actualFieldNames.push(r),this._indexedActualFieldNames.push(r.split("[")[0]))}var s=this._fieldNames.indexOf(t);-1===s&&-1===(s=this._indexedFieldNames.indexOf(t))&&-1===(s=this._actualFieldNames.indexOf(t))&&-1===(s=this._indexedActualFieldNames.indexOf(t))||(e=s)}return e},b.prototype._getFields=function(){for(var t=[],e=0;e<this._fields.length;e++){var i=this.fieldAt(e);i&&i instanceof Ke&&t.push(i)}return t},b.prototype._getOrder=function(t){var e;return t!==x.PdfFormFieldsTabOrder.none?(e="",t===x.PdfFormFieldsTabOrder.row?e="R":t===x.PdfFormFieldsTabOrder.column?e="C":t===x.PdfFormFieldsTabOrder.structure&&(e="S"),L.get(e)):null},b.prototype._compareFields=function(t,e){var i,r,n,s,a,o,h,c=0,_=t.page,d=e.page;return _&&!_._isNew&&_ instanceof kn&&d&&!d._isNew&&d instanceof kn&&(_=this._sortItemByPageIndex(t,!1)._pageIndex,d=this._sortItemByPageIndex(e,!1)._pageIndex,n=void 0,n=t._dictionary.has("Kids")?this._getItemRectangle(t):this._getRectangle(t._dictionary),a=void 0,a=e._dictionary.has("Kids")?this._getItemRectangle(e):this._getRectangle(e._dictionary),h=n[3]-n[1],i=a[3]-a[1],n)&&2<=n.length&&a&&2<=a.length&&(r=n[0],n=n[1],s=a[0],a=a[1],"number"==typeof r)&&"number"==typeof s&&"number"==typeof n&&"number"==typeof a&&(_=_-d,this._tabOrder===x.PdfFormFieldsTabOrder.row?(0!==(o=this._compare(a,n))&&(-1===o&&a<n&&n-h/2<a||1===o&&n<a&&a-i/2<n)&&(o=0),c=0!=_?_:0!==o?o:this._compare(r,s)):this._tabOrder===x.PdfFormFieldsTabOrder.column?(o=this._compare(r,s),c=0!=_?_:0!==o?o:this._compare(a,n)):this._tabOrder!==x.PdfFormFieldsTabOrder.manual&&this._tabOrder!==x.PdfFormFieldsTabOrder.none&&this._tabOrder!==x.PdfFormFieldsTabOrder.structure&&this._tabOrder!==x.PdfFormFieldsTabOrder.widget||t instanceof Ke&&e instanceof Ke&&(d=t.tabIndex,h=e.tabIndex,o=this._compare(d,h),c=0!=_?_:o)),c},b.prototype._getRectangle=function(t){var e;return e=t&&t.has("Rect")?t.getArray("Rect"):e},b.prototype._getItemRectangle=function(t){var e,i=t._dictionary;return e=i.has("Kids")&&F(i=i.getArray("Kids"))&&1<=i.length?1!==i.length&&t&&1<t.itemsCount?this._getRectangle(t.itemAt(0)._dictionary):this._getRectangle(i[0]):e},b.prototype._compare=function(t,e){return e<t?1:t<e?-1:0},b.prototype._compareKidsElement=function(t,e){t=this._crossReference._fetch(t),e=this._crossReference._fetch(e),t=this._getRectangle(t),e=this._getRectangle(e);if(t&&2<=t.length&&e&&2<=e.length){var i,r,n=t[0],t=t[1],s=e[0],e=e[1];if("number"==typeof n&&"number"==typeof s&&"number"==typeof t&&"number"==typeof e)return i=void 0,this._tabOrder===x.PdfFormFieldsTabOrder.row?0!==(i=this._compare(e,t))?i:this._compare(n,s):this._tabOrder===x.PdfFormFieldsTabOrder.column?0!==(i=this._compare(n,s))?i:this._compare(e,t):0}return r},b.prototype._sortItemByPageIndex=function(t,e){var i=t.page,r=this._tabOrder;return this._tabOrder=e?t.page.tabOrder:r,this._sortFieldItems(t),t._isLoaded&&1<t._kidsCount&&(i=t.itemAt(0).page),this._tabOrder=r,i=void 0===i?t.page:i},b.prototype._sortFieldItems=function(t){var i=this;if(t._isLoaded&&(t instanceof qe||t instanceof pi||t instanceof ti||t instanceof ri)){var e=t._parseItems();e.sort(function(t,e){return i._compareFieldItem(t,e)}),t._parsedItems.clear();for(var r=0;r<e.length;r++)t._parsedItems.set(r,e[Number.parseInt(r.toString(),10)])}},b.prototype._compareFieldItem=function(t,e){var i,r,n,s,a,o=0;return void 0!==t&&void 0!==e&&(i=t.page,r=e.page,t=this._getRectangle(t._dictionary),e=this._getRectangle(e._dictionary),t)&&e&&(n=t[0],t=t[1],s=e[0],e=e[1],a=void 0,this._tabOrder===x.PdfFormFieldsTabOrder.row?o=0!==(a=this._compare(i._pageIndex,r._pageIndex))||0!==(a=this._compare(e,t))?a:this._compare(n,s):this._tabOrder===x.PdfFormFieldsTabOrder.column&&(o=0!==(a=this._compare(i._pageIndex,r._pageIndex))||0!==(a=this._compare(n,s))?a:this._compare(e,t))),o},b.prototype._clear=function(){this._fields=[],this._parsedFields=new Map};var zh=b;function b(t,e){this._isDefaultAppearance=!1,this._hasKids=!1,this._setAppearance=!1,this._exportEmptyFields=!1,this._fieldCollection=[],this._signFlag=x._SignatureFlag.none,this._isNeedAppearances=!1,this._dictionary=t,this._crossReference=e,this._parsedFields=new Map,this._fields=[],this._createFields()}Uh=function(t,e){return(Uh=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}))(t,e)};(function(t,e){function i(){this.constructor=t}Uh(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(Gh,Hh=Ie),Gh.prototype._exportAnnotations=function(t){return this._document=t,this._crossReference=t._crossReference,this._isAnnotationExport=!0,this._exportAnnotationData(t,t.pageCount),this._save()},Gh.prototype._exportFormFields=function(t){return this._document=t,this._crossReference=t._crossReference,this._isAnnotationExport=!1,this._key=Es(),this._save()},Gh.prototype._save=function(){var i=this,t=0,e=[];if(!this._isAnnotationExport){this._asPerSpecification?(this.fdfString+="%FDF-1.2\n%"+this._specialCharacters+"\r\n1 0 obj\r<</FDF<</F(",this.fdfString+=this._fileName+")",this.fdfString+="/Fields["):this.fdfString+="%FDF-1.2\n";var r=this._document.form;if(null!=r){this._exportEmptyFields=r.exportEmptyFields;for(var n=this._document.form.count,s=0;s<n;s++){var a=this._document.form.fieldAt(s),o=this._exportFormFieldsData(a);if((a instanceof qe||a instanceof pi||a instanceof ci||a instanceof ri||a instanceof ti)&&t++,this._asPerSpecification)if(a instanceof qe||a instanceof pi||a instanceof ci){if(e.push(t),this.fdfString+="<</T("+a.name+")/V","string"==typeof o||Array.isArray(o)&&1===o.length)this.fdfString+="("+(Array.isArray(o)?o[0]:o)+")";else if(Array.isArray(o)){this.fdfString+="[";for(h=0;h<o.length;h++)this.fdfString+="("+o[Number.parseInt(h.toString(),10)]+")",h!==o.length-1&&(this.fdfString+=" ");this.fdfString+="]"}this.fdfString+=">>"}else(a instanceof ri||a instanceof ti)&&(e.push(t),this.fdfString+="<</T("+a.name+")/V/"+o+">>");else if(a instanceof qe||a instanceof pi||a instanceof ci){if(e.push(t),this.fdfString+=t+" 0 obj<</T <"+this._stringToHexString(a.name)+"> /V ","string"==typeof o||Array.isArray(o)&&1===o.length)this.fdfString+="<"+this._stringToHexString(Array.isArray(o)?o[0]:o)+">";else if(Array.isArray(o)){this.fdfString+="[";for(var h=0;h<o.length;h++)this.fdfString+="<"+this._stringToHexString(o[Number.parseInt(h.toString(),10)])+">",h!==o.length-1&&(this.fdfString+=" ");this.fdfString+="]"}this.fdfString+=" >>endobj\n"}else(a instanceof ri||a instanceof ti)&&(e.push(t),this.fdfString+=t+" 0 obj<</T <"+this._stringToHexString(a.name)+"> /V /",this.fdfString+=o+" >>endobj\n")}}if(this._asPerSpecification)this.fdfString+="]",this.fdfString+="/ID[]/UF("+this._fileName+")>>/Type/Catalog>>\rendobj\rtrailer\r\n<</Root 1 0 R>>\r\n",this.fdfString+="%%EOF\r\n";else{this.fdfString+=this._table.size+1+" 0 obj<</F <"+this._stringToHexString(this._fileName)+">  /Fields [";for(s=0;s<this._table.size;s++)null!=(a=this._document.form.fieldAt(s))&&a.export&&(this.fdfString+=e[Number.parseInt(s.toString(),10)]+" 0 R ");this.fdfString+="]>>endobj\n",this.fdfString+=e.length+2+" 0 obj<</Version /1.4 /FDF "+(e.length+1)+" 0 R>>endobj\n",this.fdfString+="trailer\n<</Root "+(e.length+2)+" 0 R>>"}}var r=new ArrayBuffer(+this.fdfString.length),c=new Uint8Array(r);return c.forEach(function(t,e){c[e]=i.fdfString.charCodeAt(e)}),c},Gh.prototype._importAnnotations=function(t,e){this._document=t,this._crossReference=t._crossReference,this._isAnnotationExport=!1,this._checkFdf(_s(e));t=new g(e),this._isAnnotationImport=!0,e=new Th(new Ih(t),null,!0,!1);this._readFdfData(e),F(this._annotationObjects)&&0<this._annotationObjects.size&&this._annotationObjects.clear(),F(this._table)&&0<this._table.size&&this._table.clear()},Gh.prototype._importFormData=function(t,e){this._document=t,this._crossReference=t._crossReference,this._isAnnotationExport=!1,this._checkFdf(_s(e));t=new g(e),e=new Th(new Ih(t),null,!1,!1);this._readFdfData(e)},Gh.prototype._readFdfData=function(t){var o=this,e=t.getObject();if(this._isAnnotationImport){for(var i="";null!=e&&"EOF"!==e;)e instanceof D||e instanceof g||e instanceof Bo?(this._table.set(i,e),i=""):null!==e&&Number.isInteger(e)&&0!==e?0<=t.first&&(i=e.toString()+" "+t.first.toString()):e instanceof Wa&&null!==e.command&&void 0!==e.command&&"trailer"===e.command&&(i=e.command),e=t.getObject();if(this._annotationObjects=this._parseAnnotationData(),this._annotationObjects.forEach(function(t,e){var i,r,n,s,a;t._crossReference=o._crossReference,t._updated=!0,t&&t.has("Page")&&null!=(r=t.get("Page"))&&r<o._document.pageCount&&(i=(r=o._document.getPage(r))._pageDictionary)&&null!=(n=(r=r.annotations)._parseAnnotation(t))&&(n._isImported=!0,s=o._crossReference._getNextReference(),o._crossReference._cacheMap.set(s,t),(t.has("NM")||t.has("IRT"))&&o._addReferenceToGroup(s,t),n._ref=s,a=r._annotations.length,r._annotations.push(s),r._comments&&0<r._comments.length&&(r._comments=[]),i.set("Annots",r._annotations),i._updated=!0,r._parsedAnnotations.set(a,n),o._handlePopup(r,s,t,i))}),this._groupHolders&&0<this._groupHolders.length)for(var r=0;r<this._groupHolders.length;r++){var n,s=this._groupHolders[Number.parseInt(r.toString(),10)];s&&s.has("IRT")&&(n=s.get("IRT"))&&(this._groupReferences&&this._groupReferences.has(n)?s.update("IRT",this._groupReferences.get(n)):delete s._map.IRT)}this._groupHolders=[],this._groupReferences=new Map}else{if(e=t.getObject(),this._asPerSpecification)for(;null!=e&&"EOF"!==e;){if(e instanceof D&&null!==e&&null!==e._map.FDF&&void 0!==e._map.FDF&&(e=e._map.FDF)instanceof D&&null!==e._map.Fields&&void 0!==e._map.Fields&&null!=(e=e._map.Fields))for(r=0;r<e.length;r++){var a,h,c=e[Number.parseInt(r.toString(),10)];c instanceof D&&null!=c&&(a=c.getArray("T"),h=void 0,h=c._map.V instanceof L?c.getArray("V").name:c.getArray("V"),null!=a)&&0<a.length&&this._table.set(a,h)}e=t.getObject()}else for((e=t.getObject())instanceof Wa&&null!==e.command&&(e=e.command);null!=e&&"EOF"!==e;)e instanceof D&&(a=e.getArray("T"),h=void 0,h=e._map.V instanceof L?e.getArray("V").name:e.getArray("V"),null!=a)&&0<a.length&&this._table.set(a,h),e=t.getObject();this._importField()}},Gh.prototype._parseAnnotationData=function(){var t=new Map,e=new Map;if(null!=(t=this._table)&&0<t.size&&t.has("trailer")){var i=t.get("trailer");if(i instanceof D&&null!=i&&i.has("Root")){i=i.getRaw("Root");if(null!=i){i=i.objectNumber.toString()+" "+i.generationNumber.toString();if(t.has(i)){var r=t.get(i);if(null!=r&&r.has("FDF")){r=r.get("FDF");if(null!=r&&r.has("Annots")){var n=r.get("Annots");if(null!=n&&0<n.length)for(var s=0;s<n.length;s++){var a=n[Number.parseInt(s.toString(),10)],o=a.objectNumber.toString()+" "+a.generationNumber.toString();t.has(o)&&(a=t.get(o),e.set(o,a),t.delete(o))}}}}t.delete(i)}}t.delete("trailer")}return e},Gh.prototype._importField=function(){var r=this,n=this._document.form,s=n.count;s&&this._table.forEach(function(t,e){0<r._table.size&&r._table.has(e)&&(i=r._table.get(e));var i,e=n._getFieldIndex(e);-1!==e&&e<s&&(e=n.fieldAt(e))&&(i&&""!==i&&e._dictionary.update("RV",i),i=[],Array.isArray(t)?i=t:i.push(t),r._importFieldData(e,i))})},Gh.prototype._exportAnnotationData=function(t,e){for(var i=ht._whiteSpace+"0"+ht._whiteSpace,r=(this.fdfString+="%FDF-1.2\r\n",2),n=new Array,s=this.exportAppearance,a=0;a<e;a++){var o=t.getPage(a);if(null!=o&&0<o.annotations.count)for(var h=0;h<o.annotations.count;h++){var c=o.annotations.at(h);null==c||c instanceof rr||c instanceof pr||c instanceof cr||c instanceof ar||(n=(r=(c=c instanceof Ir||c instanceof ji?this._exportAnnotation(c,this.fdfString,r,n,a,!0):this._exportAnnotation(c,this.fdfString,r,n,a,s)).index,c.annot))}}if(2!==r){var _="1"+i;this.fdfString+=_+"obj\r\n<</FDF<</Annots[";for(a=0;a<n.length-1;a++)this.fdfString+=n[Number.parseInt(a.toString(),10)]+i+"R ";this.fdfString+=n[n.length-1]+i+"R]/F("+this._fileName+")/UF(",this.fdfString+=this._fileName+")>>/Type/Catalog>>\r\nendobj\r\n",this.fdfString+="trailer\r\n<</Root "+_+"R>>\r\n%%EOF\r\n"}},Gh.prototype._exportAnnotation=function(t,e,n,s,a,o){this.fdfString=e;for(var e=new Kh,h=t._dictionary,c=ht._whiteSpace+"0"+ht._whiteSpace+"obj\r\n",_="\r\nendobj\r\n",d=(this._annotationID=n.toString(),this.fdfString+=n+c+"<<",new Map),p=new Array,t=(s.push(this._annotationID),h.set("Page",a),this._getEntries(d,p,n,h,this.fdfString,o)),l=(n=t.index,d=t.list,p=t.streamReference,delete h._map.Page,this.fdfString+=">>"+_,this);0<d.size;)!function(){var i=Array();d.forEach(function(t,e){i.push(e)});for(var t=0;t<i.length;t++){var e,r=i[Number.parseInt(t.toString(),10)];(d.get(r)instanceof D||d.get(r)instanceof g||d.get(r)instanceof Bo)&&null!=(h=d.get(r)instanceof D?d.get(r):d.get(r).dictionary)&&(h instanceof D&&h.has("Type")&&null!=(e=h.get("Type"))&&"Annot"===e.name&&(s.push(r.toString()),h.set("Page",a)),l.fdfString+=r+c+"<<",e=l._getEntries(d,p,n,h,l.fdfString,o),d=e.list,p=e.streamReference,n=e.index,h instanceof D&&h.has("Page")&&delete h._map.Page,l.fdfString+=">>",null!=p&&-1!==p.indexOf(r)&&l._appendStream(d.get(r),l.fdfString),l.fdfString+=_),d.delete(r)}}();return n++,e.index=n,e.annot=s,e},Gh.prototype._appendStream=function(t,e){var i=t;this.fdfString=e,(t instanceof Bo||t instanceof g)&&(i=t instanceof Bo?t.stream:t),(t instanceof Bo||t instanceof g)&&(e=i.getBytes(),t=new Uint8Array(e),(i=new O.CompressedStreamWriter).write(t,0,t.length),i.close(),e=i.getCompressedString,this.fdfString+="stream\r\n",this.fdfString+=e,this.fdfString+="\r\nendstream")},Gh.prototype._getEntries=function(t,r,n,s,e,a){var o=this,h=!1,i=new Kh,c=(this.fdfString=e,t);return s.forEach(function(t,e){var i;!a&&"AP"===t||("P"!==t&&(o.fdfString+="/"+t),"Sound"!==t&&"F"!==t&&!a||(h=!0),"string"==typeof(e=e)?o.fdfString+="("+o._getFormattedString(e)+")":e instanceof L?o.fdfString+="/"+e.name:e instanceof Array?(i=o._appendArray(e,o.fdfString,n,h,c,r),c=i.list,r=i.streamReference,n=i.index):"number"==typeof e?o.fdfString+=" "+e.toString():"boolean"==typeof e?o.fdfString+=" "+(e?"true":"false"):e instanceof D?(o.fdfString+="<<",i=o._getEntries(c,r,n,e,o.fdfString,a),c=i.list,r=i.streamReference,n=i.index,o.fdfString+=">>"):e instanceof A&&(i=s.get("Page"),"Parent"===t?(o.fdfString+=" "+o._annotationID+" 0 R",o.fdfString+="/Page "+i):"IRT"===t?o._crossReference&&o._crossReference._fetch&&e&&(i=o._crossReference._fetch(e))&&i.has("NM")&&null!=(i=i.get("NM"))&&(o.fdfString+="("+o._getFormattedString(i)+")"):"P"!==t&&null!=e&&(n++,o.fdfString+=" "+n+" 0 R",h&&r.push(n),c.set(n,s.get(t)))),h=!1)}),i.list=c,i.streamReference=r,i.index=n,i},Gh.prototype._appendArray=function(t,e,i,r,n,s){this.fdfString=e,this.fdfString+="[";var e=new Kh,a=n;if(F(t)&&0<t.length)for(var o=t.length,h=0;h<o;h++){var c=t[Number.parseInt(h.toString(),10)],c=(0!==h&&("number"==typeof c||c instanceof A||"boolean"==typeof c)&&(this.fdfString+=" "),this._appendElement(c,this.fdfString,i,r,a,s)),a=c.list;s=c.streamReference,i=c.index}return this.fdfString+="]",e.list=a,e.streamReference=s,e.index=i,e},Gh.prototype._appendElement=function(t,e,i,r,n,s){this.fdfString=e;var a,e=new Kh;return"number"==typeof t?this.fdfString+=t.toString():t instanceof L?this.fdfString+=t.name.toString():t instanceof Array?(n=(a=this._appendArray(t,this.fdfString,i,r,n,s)).list,s=a.streamReference,i=a.index):t instanceof D&&(this.fdfString+="<<",n=(a=this._getEntries(n,s,i,t,this.fdfString,r)).list,s=a.streamReference,i=a.index,this.fdfString+=">>"),e.list=n,e.streamReference=s,e.index=i,e},Gh.prototype._getFormattedString=function(t){for(var e="",i=0;i<t.length;i++){var r=t.charCodeAt(i);40!==r&&41!==r||(e+="'"),e+=String.fromCharCode(r)}return e},Gh.prototype._checkFdf=function(t){if(((t.includes(this._specialCharacters)||t.includes(""))&&(this._asPerSpecification=!0),t.startsWith("%"))&&"FDF-"!==t.substring(1,5))throw new Error("Invalid FDF file.")},Gh.prototype._stringToHexString=function(t){var e="";return e=null!=t&&0<t.length?ls(w(t)):e};var Uh,Hh,Wh=Gh;function Gh(t){var e=Hh.call(this)||this;return e._annotationObjects=new Map,e._specialCharacters="",null!=t&&(e._fileName=t),e}var Kh=function(){};Xh=function(t,e){return(Xh=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}))(t,e)};(function(t,e){function i(){this.constructor=t}Xh(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(Jh,qh=Ie),Jh.prototype._exportAnnotations=function(){throw new Error("Method not implemented.")},Jh.prototype._exportFormFields=function(t){return this._document=t,this._crossReference=t._crossReference,this._isAnnotationExport=!1,this._format="XML",this._key=Es(),this._save()},Jh.prototype._save=function(){var t=new be,e=(t._writeStartDocument(),this._asPerSpecification?(t._writeStartElement("fields"),t._writeAttributeString("xfdf","http://ns.adobe.com/xfdf-transition/","xmlns",null)):t._writeStartElement("Fields"),this._document.form);if(null!=e){this._exportEmptyFields=e.exportEmptyFields;for(var i=this._document.form.count,r=0;r<i;r++){var n=this._document.form.fieldAt(r);null!=n&&n.export&&this._exportFormFieldData(n)}this._writeFormFieldData(t,this._asPerSpecification)}e=t._save();return t._destroy(),e},Jh.prototype._writeFormFieldData=function(r,t){(t=void 0===t?!1:t)?this._table.forEach(function(t,e){var i;e.includes(" ")?(i=e.replace(/ /g,""),r._writeStartElement(i.toString()),r._writeAttributeString("original",e.toString(),"xfdf",null)):r._writeStartElement(e.toString()),r._writeString(t.toString()),r._writeEndElement()}):this._table.forEach(function(t,e){e.includes(" ")&&(e=e.replace(/ /g,"_x0020_")),r._writeStartElement(e.toString()),r._writeString(t.toString()),r._writeEndElement()}),r._writeEndElement()},Jh.prototype._importFormData=function(t,e){this._document=t,this._crossReference=t._crossReference,this._isAnnotationExport=!1;t=_s(e);t=(t=t.replace(/(\r\n|\n|\r)/gm,"")).replace(/[^\x20-\x7E]/g,""),this._xmlDocument=(new DOMParser).parseFromString(t,"text/xml"),this._checkXml(this._xmlDocument),this._xmlImport=!0,this._parseFormData(this._xmlDocument.documentElement),this._xmlImport=!1},Jh.prototype._parseFormData=function(t){var e=t.childNodes;if(null!=e&&0<e.length)for(var i=0;i<e.length;i++){var r,n,s=e.item(i);null!=s&&1===s.nodeType&&(r="",null!==(s=s).attributes&&void 0!==s.attributes&&0<s.attributes.length?null!=(n=s.attributes.item(0))&&"xfdf:original"===n.name&&(r=n.value):r=s.tagName,n=s.textContent,null!=r)&&0<r.length&&this._table.set(r,n)}this._importField()},Jh.prototype._importField=function(){var r=this,n=this._document.form,s=n.count;s&&this._table.forEach(function(t,e){0<r._table.size&&r._table.has(e)&&(i=r._table.get(e));var i,e=e.toString(),e=(-1!==e.indexOf("_x0020_")&&(e=e.replace(/_x0020_/g," ")),n._getFieldIndex(e));-1!==e&&e<s&&(e=n.fieldAt(e))&&null!=e&&(i&&""!==i&&e._dictionary.update("RV",i),(i=[]).push(t),r._importFieldData(e,i))})},Jh.prototype._checkXml=function(t){if(0<t.getElementsByTagName("parsererror").length)throw new Error("Invalid XML file.")};var Xh,qh,Qh=Jh;function Jh(t){var e=qh.call(this)||this;return null!=t&&(e._fileName=t),e}Object.defineProperty(Zh.prototype,"crossReferenceType",{get:function(){return this._crossReferenceType},set:function(t){this._crossReferenceType=t},enumerable:!0,configurable:!0}),Object.defineProperty(Zh.prototype,"isIncrementalUpdate",{get:function(){return this._incrementalUpdate},set:function(t){this._incrementalUpdate=t},enumerable:!0,configurable:!0});var Yh=Zh;function Zh(){this._incrementalUpdate=!0}Object.defineProperty(tc.prototype,"targetIndex",{get:function(){return this._targetIndex},set:function(t){this._targetIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(tc.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation=t},enumerable:!0,configurable:!0}),Object.defineProperty(tc.prototype,"optimizeResources",{get:function(){return this._optimizeResources},set:function(t){this._optimizeResources=t},enumerable:!0,configurable:!0}),Object.defineProperty(tc.prototype,"groupFormFields",{get:function(){return this._groupFormFields},set:function(t){this._groupFormFields=t},enumerable:!0,configurable:!0});var $h=tc;function tc(){this._optimizeResources=!0,this._groupFormFields=!1}ic.prototype._importPages=function(t,e,i,r,n,a){var o,h,c=this,s=t._pageDictionary;if(this._isDuplicatePage=r,this._options.rotation=(n||t).rotation,o="number"==typeof e?this._insertNewPage(t,e):this._isDuplicatePage?this._insertNewPage(t,t._pageIndex+1):this._insertNewPage(t),(r||a)&&this._options.optimizeResources?(h=[],s.forEach(function(t,e){if("Contents"===t&&0===h.length){var i=e;if(i instanceof A){var r=a?c._copier._copy(i):i;o._pageDictionary.update(t,r)}else if(i instanceof Array){for(var n=0;n<i.length;n++){var s=a?c._copier._copy(i[Number.parseInt(n.toString(),10)]):i[Number.parseInt(n.toString(),10)];h.push(s)}o._pageDictionary.update(t,h)}}else"Resources"===t&&e?(r=a?c._copier._copy(e):e)&&o._pageDictionary.update(t,r):"Resources"!==t&&"MediaBox"!==t&&"CropBox"!==t&&"Parent"!==t&&"Annots"!==t&&"Contents"!==t&&"Rotate"!==t&&o._pageDictionary.update(t,e)})):(n=t._contentTemplate,o.graphics.drawTemplate(n,{x:0,y:0,width:n._size[0],height:n._size[1]}),n._content.dictionary.update("Resources",this._copier._copy(s.getRaw("Resources"))),this._pageReference.set(s,o),r||this._bookmarksPageLinkReference.set(t._ref,o._pageIndex)),s.has("Annots")&&(this._importAnnotation(t,o),void 0!==this._options&&this._options.groupFormFields&&this._sourceDocument._catalog._catalogDictionary.has("AcroForm")?this._formFieldsGroupingSupport(this._sourceDocument.form,t,o):this._sourceDocument._catalog._catalogDictionary.has("AcroForm")&&this._importFormField(t,this._sourceDocument.form,o,this._sourceDocument._crossReference)),!r){e=this._sourceDocument._parseBookmarkDestination();if(e&&e.has(t))for(var _=e.get(t),d=0;d<_.length;d++)this._bookmarks.push(_[Number.parseInt(d.toString(),10)])}(r||!i)&&this._options.optimizeResources||this._mergeLayer(o._pageDictionary,s,this._sourceDocument._crossReference),o._pageDictionary._updated=!0},ic.prototype._importAnnotation=function(t,e){for(var i=[],r=!1,n=t.annotations,s=n.count,a=0;a<s;a++){var o=n._annotations[Number.parseInt(a.toString(),10)];if(o){var h=this._sourceDocument._crossReference._fetch(o);if(h){if(h.has("Dest")){var c=[],_=h.get("Dest"),d=h._get("Dest");if(_ instanceof Array){for(var p=_,l=0;l<p.length;l++)c.push(p[Number.parseInt(l.toString(),10)]);r=!0}else d instanceof A&&c.push(d)}c&&0<c.length&&this._destination.push(c),h.has("OC")&&(_=h.getRaw("OC"))instanceof A&&this._annotationLayer.set(a,_);d=this._copier._copy(o),h=this._destinationDocument._crossReference._fetch(d);r&&h.update("Dest",c),h.update("P",e._ref),this._crossReference._cacheMap.set(d,h),i.push(d)}}r=!1,c=[]}0<i.length&&e._pageDictionary.update("Annots",i)},ic.prototype._formFieldsGroupingSupport=function(t,e,i){var r,n=[],s=[],a=[],o=t._dictionary.get("DR");if(t._dictionary.has("DR")&&(o=t._dictionary.get("DR")),i._pageDictionary.has("Annots")&&(n=i._pageDictionary.get("Annots")),e._pageDictionary.has("Annots")&&(a=e._pageDictionary.get("Annots")),!this._isDuplicatePage){r=this._destinationDocument.form,this._fieldCount=r.count;for(var h=0;h<this._fieldCount;h++)s.push(r.fieldAt(h).name)}for(var c=0;c<t.count;c++){var _=t.fieldAt(c),d=void 0,p=[],l=_._dictionary.get("Kids");if(-1!==s.indexOf(_.name)||this._isDuplicatePage){if(this._isDuplicatePage?(d=_,p=l):(d=r.fieldAt(s.indexOf(_.name)))._dictionary.get("Kids")&&(p=d._dictionary.get("Kids")),_._isDuplicatePage=!0,_ instanceof fi&&d instanceof fi||!(_ instanceof fi))if(void 0!==l&&0<l.length)for(var u=0;u<l.length;u++){var f=_.itemAt(u);f.page===e&&(d._page=i,n=this._groupFormFieldsKids(d,_,a,p,l,i._ref,n,u,c,o,f))}else n=this._groupFormFieldsKids(d,_,a,p,l,i._ref,n,0,c,o)}else n=this._insertFormFields(c,t._crossReference,_,t,i._ref,n,a)}0<n.length&&i._pageDictionary.update("Annots",n)},ic.prototype._groupFormFieldsKids=function(t,e,i,r,n,s,a,o,h,c,_){var d,p,l;return e._dictionary.has("Kids")&&t._dictionary.has("Kids")?-1!==i.indexOf(n[Number.parseInt(o.toString(),10)])&&(i=e._crossReference._fetch(n[Number.parseInt(o.toString(),10)]),(l=this._copier._copyDictionary(i,!this._isDuplicatePage)).update("P",s),d=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(d,l),a.push(d),l.update("Parent",t._ref),r.push(d),l._updated=!0,t._dictionary._updated=!0,this._isDuplicatePage||((t instanceof qe||t instanceof Ye||t instanceof ci)&&l.has("AS")&&delete l._map.AS,this._createAppearance(t,e,i,l,c,_))):e._dictionary.has("Kids")&&!t._dictionary.has("Kids")||this._isDuplicatePage?(p=this._copier._copyDictionary(t._dictionary,!this._isDuplicatePage),this._updateFieldsWithKids(t,e,p,o,h,s,n,a,c,t._dictionary)):!e._dictionary.has("Kids")&&t._dictionary.has("Kids")?(i=this._copier._copyDictionary(e._dictionary),this._updateFieldDictionary(i,s,t._ref),d=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(d,i),r.push(d),a.push(d),t._dictionary._updated=!0,this._createAppearance(t,e,e._dictionary,i,c,_)):e._dictionary.has("Kids")||t._dictionary.has("Kids")||(p=this._copier._copyDictionary(t._dictionary),l=this._copier._copyDictionary(e._dictionary,!this._isDuplicatePage),this._removeFieldDictionary(l,["Parent","FT","T","Ff"]),l.update("P",s),this._updateFieldsWithKids(t,e,p,o,h,s,n,a,c,l)),a},ic.prototype._updateFieldsWithKids=function(t,e,i,r,n,s,a,o,h,c){var _=this._crossReference._getNextReference(),d=this._createNewFieldDictionary(i,t._dictionary),p=(d.objId=_.toString(),this._crossReference._cacheMap.set(_,d),this._destinationDocument.form._parseFields(d,_)),a=(t._dictionary.update("Parent",_),p._dictionary._updated=!0,this._updateFieldDictionary(i,s,_),this._destinationDocument.form._dictionary._updated=!0,i=void 0!==a&&0<a.length?e._crossReference._fetch(a[Number.parseInt(r.toString(),10)]):c,this._copier._copyDictionary(i,!this._isDuplicatePage)),r=((t instanceof qe||t instanceof Ye||t instanceof ci)&&a.has("AS")&&delete a._map.AS,this._crossReference._getNextReference()),c=(this._crossReference._cacheMap.set(r,a),a.update("P",s),o.push(r),a.update("Parent",p._ref),[]);c.push(t._ref),c.push(r),a._updated=!0,t._dictionary._updated=!0,d.update("Kids",c),p._kids=c,this._formFieldsCollection.set(n,_),this._destinationDocument.form._parsedFields.set(n,p),this._isDuplicatePage||this._createAppearance(p,e,i,a,h),d._updated=!0},ic.prototype._removeFieldDictionary=function(e,t){return t.forEach(function(t){e.has(t)&&delete e._map[t]}),e},ic.prototype._updateFieldDictionary=function(t,e,i){(t=this._removeFieldDictionary(t,["Parent","FT","T","Ff"])).update("P",e),t.update("Parent",i),t._updated=!0},ic.prototype._createNewFieldDictionary=function(e,i){var r=new D(this._crossReference);return["Parent","FT","T","V","Ff","TU","Opt","I"].forEach(function(t){e.has(t)&&(r.update(t,e.get(t)),delete e._map[t],delete i._map[t])}),r},ic.prototype._getItemStyle=function(t,e){var i=t._dictionary.get("MK");i&&i.has("CA")?t._styleText=i.get("CA").charAt(0):t._styleText=e instanceof ri?"l":"4"},ic.prototype._createAppearance=function(t,e,i,r,n,s){var a,o,h=t._kidsCount-1;t instanceof ti?((a=t.itemAt(h))._enableGrouping=!0,this._getItemStyle(a,t),e instanceof ri?(a._dictionary.update("AS",L.get("Off")),o=Hs(i)):a._postProcess(t.checked?"Yes":"Off"),t._drawAppearance(a,o)):t instanceof ri?(a=t.itemAt(h),this._getItemStyle(a,t),a._dictionary.has("AS")?a._postProcess(a._dictionary.get("AS").name):a._postProcess("Off"),a._enableGrouping=!0,t._enableGrouping=!0,t._drawAppearance(a)):t instanceof ai?(a=t.itemAt(h),void 0!==s&&(a.rotationAngle=s.rotationAngle),a&&!t._checkFieldFlag(a._dictionary)&&(a._enableGrouping=!0,e=t._createAppearance(a),t._addAppearance(a._dictionary,e,"N"),a._dictionary._updated=!0)):(t instanceof qe||t instanceof Ye||t instanceof fi)&&(i=zr._load(r,this._crossReference),null!=s&&t instanceof fi?t._createAppearance(s,!1):(i.setAppearance(!0),i._enableGrouping=!0,o=void 0,o=null!=s?this._obtainFont(s._dictionary,n):this._obtainFont(r,n),i._pdfFont=o,t instanceof fi?t._createAppearance(i,!1):t._postProcess(!1,i)))},ic.prototype._obtainFont=function(t,e){var i,r="",n=8;if(t&&(t.has("DS")||t.has("DA")))if(t.has("DS"))for(var s=t.get("DS").split(";"),a=0;a<s.length;a++){var o=s[Number.parseInt(a.toString(),10)].split(":");if(-1!==s[Number.parseInt(a.toString(),10)].indexOf("font-family"))r=o[1];else if(-1===s[Number.parseInt(a.toString(),10)].indexOf("font-style")&&-1!==s[Number.parseInt(a.toString(),10)].indexOf("font")){for(var h=o[1].split(" "),c=0;c<h.length;c++)""===h[Number.parseInt(c.toString(),10)]||h[Number.parseInt(c.toString(),10)].endsWith("pt")||(r+=h[Number.parseInt(c.toString(),10)]+" ");for(;" "!==r&&r.endsWith(" ");)r=r.substring(0,r.length-2);-1!==r.indexOf(",")&&(r=r.split(",")[0])}}else{t=t.get("DA");if(t&&""!==t&&-1!==t.indexOf("Tf")){for(var _=t.split(" "),a=0;a<_.length;a++)if(-1!==_[Number.parseInt(a.toString(),10)].indexOf("Tf")){for(r=_[a-2];""!==r&&1<r.length&&"/"===r[0];)r=r.substring(1);n=Number.parseFloat(_[a-1])}0===n&&(n=8)}}var r=r.trim(),d=x.PdfFontStyle.regular;switch(void 0!==e&&e.has("Font")&&void 0!==(t=e.get("Font").get(r))&&(e=t.get("BaseFont").name,d=this._getFontStyle(e)),r){case"Helv":i=new m(x.PdfFontFamily.helvetica,n,d);break;case"Courier":case"Cour":i=new m(x.PdfFontFamily.courier,n,d);break;case"Symb":i=new m(x.PdfFontFamily.symbol,n,d);break;case"TiRo":case"TiIt":i=new m(x.PdfFontFamily.timesRoman,n,d);break;case"ZaDb":i=new m(x.PdfFontFamily.zapfDingbats,n,d);break;default:i=new m(x.PdfFontFamily.helvetica,n,d)}return i},ic.prototype._getFontStyle=function(t){var e=x.PdfFontStyle.regular;return t.includes("Bold")?e=x.PdfFontStyle.bold:t.includes("Italic")&&(e=x.PdfFontStyle.italic),e},ic.prototype._importFormField=function(t,e,i,r){var n,s=this._destinationDocument.form,a=[],o=(i&&i._pageDictionary&&i._pageDictionary.has("Annots")&&(a=i._pageDictionary.get("Annots")),[]);if(this._destinationDocument.form._dictionary.has("Fields")){var h=this._destinationDocument.form;this._fieldCount=h.count;for(var c=0;c<this._fieldCount;c++){var _=h.fieldAt(c).name;this._fieldNames.push(_)}}t._pageDictionary.has("Annots")&&(o=t._pageDictionary.get("Annots"));for(var d,p,l,u,f=e.count,g=0;g<f;++g){var y=e.fieldAt(g);if(y._dictionary.has("Kids"))if(1<(n=y._dictionary.get("Kids")).length){for(var m=0;m<n.length;m++)if(y.itemAt(m).page===t){a=this._insertFormFields(g,r,y,s,i._ref,a,o);break}}else 1===n.length&&y.page===t&&(a=this._insertFormFields(g,r,y,s,i._ref,a,o));else y.page===t&&(a=this._insertFormFields(g,r,y,s,i._ref,a,o))}e._dictionary.has("DR")&&(d=e._dictionary.get("DR"),p=void 0,(d=this._copier._copyDictionary(d)).has("Font")&&(p=d.get("Font")),this._destinationDocument.form._dictionary.has("DR")?(l=this._destinationDocument.form._dictionary.get("DR")).has("Font")&&(u=l.get("Font"),p&&p.forEach(function(t,e){u.set(t,e)}),u._updated=!0):this._destinationDocument.form._dictionary.update("DR",d)),0<a.length&&i._pageDictionary.update("Annots",a)},ic.prototype._insertFormFields=function(t,e,i,r,n,s,a){var o=new D,h=(i._dictionary.has("Kids")?i._dictionary.forEach(function(t,e){"Kids"!==t&&o.update(t,e)}):o=this._copier._copyDictionary(i._dictionary),this._crossReference._getNextReference()),c=(o.objId=h.toString(),r._parseFields(o,n));if(this._crossReference._cacheMap.set(h,c._dictionary),i._dictionary.has("Kids")){for(var _,d,p=i._dictionary.get("Kids"),l=[],u=0;u<p.length;u++)-1!==a.indexOf(p[Number.parseInt(u.toString(),10)])&&(_=i._crossReference._fetch(p[Number.parseInt(u.toString(),10)]),(_=this._copier._copyDictionary(_)).update("P",n),_.update("Parent",h),_._updated=!0,d=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(d,_),s.push(d),l.push(d));o.update("Kids",l),c._kids=l}else c._dictionary.update("P",n),s.push(h);c._dictionary._updated=!0;for(var f=0,g=c.name,y=!1;-1!==this._fieldNames.indexOf(g);)g=c.name+f,y=!0,++f;return y&&(c._dictionary.update("T",g),c._name=g),c._dictionary._updated=!0,0<this._fieldCount?(this._destinationDocument.form._parsedFields.set(this._fieldCount,c),c._annotationIndex=this._fieldCount,this._fieldCount++):(this._destinationDocument.form._parsedFields.set(t,c),c._annotationIndex=t),this._destinationDocument.form._fields.push(h),s},ic.prototype._mergeFormFieldsWithDocument=function(){var i;0<this._formFieldsCollection.size?(i=this._destinationDocument.form._dictionary.get("Fields"),this._formFieldsCollection.forEach(function(t,e){i[Number.parseInt(e.toString(),10)]=t})):i=this._destinationDocument.form._fields,this._destinationDocument.form._dictionary.get("NeedAppearances")&&this._destinationDocument.form._dictionary.set("NeedAppearances",!1),this._destinationDocument.form._dictionary.set("Fields",i),this._destinationDocument.form._fields=i,this._destinationDocument.form._dictionary._updated=!0},ic.prototype._importLayers=function(t,e){if(this._isLayersPresent=e,this._isLayersPresent&&this._destinationDocument._catalog._catalogDictionary.has("OCProperties")){var e=this._destinationDocument._catalog._catalogDictionary.get("OCProperties"),i=t.get("OCProperties");if(e.has("OCGs")){var r=e.get("OCGs"),n=i.get("OCGs");if(0<r.length)for(var s=0;s<n.length;s++)r.push(n[Number.parseInt(s.toString(),10)])}if(e._updated=!0,e.has("D")&&i.has("D")){var a=e.get("D"),o=i.get("D");if(a&&o){if(a.has("Order")&&o.has("Order")){var h=a.get("Order"),c=o.get("Order");if(0<h.length&&0<c.length)for(s=0;s<c.length;s++)h.push(c[Number.parseInt(s.toString(),10)])}else o.has("Order")&&a.set("Order",o.get("Order"));if(a.has("RBGroups")&&o.has("RBGroups")){var _=a.get("RBGroups"),d=o.get("RBGroups");if(0<_.length&&0<d.length)for(s=0;s<d.length;s++)_.push(d[Number.parseInt(s.toString(),10)])}else o.has("RBGroups")&&(a.set("RBGroups",o.get("RBGroups")),a._updated=!0);if(a.has("ON")&&o.has("ON")){var p=a.get("ON"),l=o.get("ON");if(0<p.length&&0<l.length)for(s=0;s<l.length;s++)p.push(l[Number.parseInt(s.toString(),10)])}else o.has("ON")&&a.set("ON",o.get("ON"));if(a.has("AS")&&o.has("AS")){var u=a.get("AS"),f=o.get("AS");if(0<u.length&&0<f.length){var g=f[0],y=u[0];if(g instanceof A&&y instanceof A&&(g=this._crossReference._fetch(g),y=this._crossReference._fetch(y)),g.has("OCGs")&&y.has("OCGs")){var m=g.get("OCGs"),b=y.get("OCGs");if(0<m.length&&0<b.length)for(s=0;s<m.length;s++)b.push(m[Number.parseInt(s.toString(),10)])}for(s=0;s<f.length;s++)u.push(f[Number.parseInt(s.toString(),10)])}}else o.has("AS")&&a.set("AS",o.get("AS"));if(a.has("OFF")&&o.has("OFF")){var S=a.get("OFF"),w=o.get("OFF");if(0<S.length&&0<w.length)for(s=0;s<w.length;s++)S.push(w[Number.parseInt(s.toString(),10)])}else o.has("OFF")&&a.set("OFF",o.get("OFF"))}if(a.has("Locked")&&o.has("Locked")){var v=a.get("Locked"),P=o.get("Locked");if(0<v.length&&0<P.length)for(s=0;s<P.length;s++)v.push(P[Number.parseInt(s.toString(),10)])}else o.has("Locked")&&a.set("Locked",o.get("Locked"))}else i.has("D")&&e.set("D",i.get("D"));e._updated=!0,this._destinationDocument._catalog._catalogDictionary._updated=!0,this._crossReference._allowCatalog=!0}else this._isLayersPresent&&(this._destinationDocument._catalog._catalogDictionary.update("OCProperties",t.get("OCProperties")),this._destinationDocument._catalog._catalogDictionary._updated=!0,this._crossReference._allowCatalog=!0)},ic.prototype._mergeLayer=function(t,e,i){var r,n,s,a,o,h=this,c=t.get("Resources").get("XObject"),_=(c&&c.forEach(function(t,e){r=h._crossReference._fetch(e)}),r&&(n=r.dictionary.get("Resources")),new Map),c=e.get("Resources");c.has("Properties")?(c.get("Properties").forEach(function(t,e){_.set(t,e)}),a=new D(this._crossReference),_.forEach(function(i,r){h._newList.forEach(function(t,e){i===e&&a.set(r,t)})}),n.set("Properties",a),n._updated=!0,a._updated=!0):c.has("XObject")&&(s=n.get("XObject"),c.get("XObject").forEach(function(n,t){t instanceof A&&i._fetch(t).dictionary.forEach(function(i,r){"OC"===i&&h._newList.forEach(function(t,e){e===r&&s.has(n)&&((e=s.get(n)).dictionary.set(i,t),e._updated=!0)})})})),0<this._annotationLayer.size&&(o=t._get("Annots"),this._annotationLayer.forEach(function(i,t){var t=o[Number.parseInt(t.toString(),10)],r=h._crossReference._fetch(t);h._newList.forEach(function(t,e){i===e&&r.set("OC",t)})}))},ic.prototype._exportBookmarks=function(d,p){var l=this;if(0<this._bookmarks.length){var u=this._bookmarks,f=this._destinationDocument.bookmarks,g=d.bookmarks,y=void 0;if(g){var m=[],b={index:0,base:f,kids:g._bookMarkList};d.pageCount!==p&&(b={index:0,base:f,kids:u},y=[]);do{for(var S=this;b.index<b.kids.length;)!function(){var i,r,t,e,n,s,a,o,h,c,_;g=b.kids[b.index],-1!==u.indexOf(g)&&void 0!==y&&-1===y.indexOf(g.title)?(t=g,o=f.add(t.title),e=t.destination,o.color=t.color,o.textStyle=t.textStyle,r=i=n=null,(a=t.namedDestination)?a.destination&&(r=a.destination.page,S._bookmarksPageLinkReference.forEach(function(t,e){r._ref===e&&(i=l._destinationDocument.getPage(t))}),i)&&(h=S._getNamedDestination(a,i),o.namedDestination=h,delete o._dictionary._map.C,S._namedDestinations.push(h._title),c=S._crossReference._getNextReference(),S._crossReference._cacheMap.set(c,h._dictionary),S._namedDestinations.push(c)):e&&(r=e.page,S._bookmarksPageLinkReference.forEach(function(t,e){r._ref===e&&(i=l._destinationDocument.getPage(t))}),i)&&((n=new Cn(i,e.location)).mode=e.mode,n.zoom=e.zoom,n.location=e.location,o.destination=n),f=o,y.push(o.title)):(void 0===y||void 0!==y&&-1===y.indexOf(g.title))&&(e=(t=g).destination,_=s=n=null,a=t.namedDestination,d.pageCount===p)&&(o=f.add(t.title),t._dictionary.has("A")&&o._dictionary.update("A",t._dictionary.get("A")),o.textStyle=t.textStyle,o.color=t.color,a?a._destination&&(_=a.destination.page,S._bookmarksPageLinkReference.forEach(function(t,e){_._ref===e&&(s=l._destinationDocument.getPage(t))}),s)&&(h=S._getNamedDestination(a,s),o.namedDestination=h,delete o._dictionary._map.C,S._namedDestinations.push(h._title),c=S._crossReference._getNextReference(),S._crossReference._cacheMap.set(c,h._dictionary),S._namedDestinations.push(c)):e&&(_=e.page,S._bookmarksPageLinkReference.forEach(function(t,e){_._ref===e&&(s=l._destinationDocument.getPage(t))}),s)&&((n=new Cn(s,e.location)).mode=e.mode,n.zoom=e.zoom,n.location=e.location,o.destination=n),f=o),b.index+=1,0<g.count?(m.push(b),b={index:0,base:f,kids:g._bookMarkList}):f=b.base}();if(0<m.length){for(b=m.pop();b.index===b.kids.length&&0<m.length;)b=m.pop();f=b.base}}while(b.index<b.kids.length)}var t,e;0<this._namedDestinations.length&&((e=new D(this._crossReference)).update("Names",this._namedDestinations),t=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(t,e),(e=new D(this._crossReference)).update("Dests",t),t=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(t,e),this._destinationDocument._catalog._catalogDictionary.set("Names",t)),this._destinationDocument._catalog._catalogDictionary._updated=!0,this._destinationDocument._catalog._catalogDictionary.isCatalog=!0,this._crossReference._allowCatalog=!0}},ic.prototype._getNamedDestination=function(t,e){var i=new vn(t.title);return i.destination=this._getDestination(e,t.destination),i},ic.prototype._getDestination=function(t,e){t=new Cn(t,e.location);return t._location=e._location,t.mode=e.mode,t.zoom=e.zoom,t.location=e.location,t},ic.prototype._writeObject=function(t,e,i,r,n,s,a){var o;i instanceof L||"string"==typeof i||"number"==typeof i||"boolean"==typeof i?this._writeDictionary(i,e,n,s,a,null):Array.isArray(i)?(this._writeArray(t,o=[],i,r),this._writeDictionary(null,e,n,s,a,o)):i instanceof D?(o=new D(this._crossReference),this._writePropertiesDictionary(t,o,i),this._writeDictionary(null,e,n,s,a,o)):i instanceof A&&this._crossReference?this._writeObject(t,e,t._crossReference._fetch(i),r,n,s,i):null==i&&this._writeDictionary("null",e,n,s,a,null)},ic.prototype._writeDictionary=function(t,e,i,r,n,s){var a;i&&t?e.set(i,t):i&&s?e.set(i,s):s&&!n?r.push(s):t?r.push(t):n&&(this._newList&&0<this._newList.size&&this._newList.forEach(function(t,e){e===n&&(a=t)}),a?r.push(a):(e=s,a=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(a,e),e._updated=!0,r.push(a),this._newList.set(n,a)))},ic.prototype._writeArray=function(t,e,i,r){for(var n=0;n<i.length;n++)this._writeObject(t,null,i[Number.parseInt(n.toString(),10)],r,null,e)},ic.prototype._writePropertiesDictionary=function(i,r,n){var s=this;n&&0<n.size&&n.forEach(function(t,e){s._writeObject(i,r,e instanceof A?n.get(t):e,n,t)})},ic.prototype._fixDestinations=function(t){var e=this._pageReference;if(0<this._destination.length)for(var i=0;i<this._destination.length;i++){var r,n,s=this._destination[Number.parseInt(i.toString(),10)];s instanceof Array&&0<(s=s).length&&s[0]&&s[0]instanceof A&&(r=t._crossReference._fetch(s[0]),n=e.get(r),r&&e.has(r)&&null!==n&&(s[0]=n._ref),r)&&e.has(r)&&null===n&&(s[0]=null)}},ic.prototype._insertNewPage=function(t,e){var i,r=new fc,r=(r.size=t.size,r.margins.left=0,r.margins.top=0,r.margins.right=0,void(r.margins.bottom=0)!==this._options&&void 0!==this._options.rotation?r.rotation=this._options.rotation:r.rotation=t.rotation,r.orientation=t.size[0]>t.size[1]?x.PdfPageOrientation.landscape:x.PdfPageOrientation.portrait,e=void 0!==e?this._destinationDocument.addPage(e,r):this._destinationDocument.addPage(r),t._pageDictionary);return r._get("MediaBox")&&(i=r._get("MediaBox"),e._pageDictionary.update("MediaBox",i)),r._get("CropBox")&&(i=r._get("CropBox"),e._pageDictionary.update("CropBox",i)),void 0===this._options.rotation&&!t._pageDictionary.has("Rotate")||(r=(r=void 0)!==this._options.rotation?90*Math.floor(this._options.rotation):90*Math.floor(t.rotation),e._pageDictionary.update("Rotate",r=360<=r?r%360:r)),e},ic.prototype._objectDispose=function(){this._bookmarkHashTable=new Map,this._namedDestinations=[],this._bookmarks=[],this._pageReference=new Map,this._bookmarksPageLinkReference.clear(),this._destination=[],this._newList=new Map,this._annotationLayer=new Map,this._fieldNames=[],this._destinationDocument&&this._destinationDocument._form&&this._destinationDocument._form._widgetReferences&&(this._destinationDocument._form._widgetReferences=[])};var ec=ic;function ic(t,e,i,r,n){this._namedDestinations=[],this._bookmarks=[],this._fields=[],this._pageReference=new Map,this._bookmarksPageLinkReference=new Map,this._destination=[],this._newList=new Map,this._annotationLayer=new Map,this._isLayersPresent=!1,this._fieldNames=[],this._options=new $h,this._kidsReference=[],this._formFieldsCollection=new Map,this._formFields=[],this._isDuplicatePage=!1,this._fieldCount=0,this._crossReference=t,this._destinationDocument=e,this._sourceDocument=i,this._pageReference=r,void 0!==n&&(this._options=n),this._copier=new rc(this._crossReference,this._sourceDocument._crossReference)}nc.prototype._copy=function(t){var e;return t instanceof D?e=this._copyDictionary(t):Array.isArray(t)?e=this._copyArray(t):t instanceof y?e=this._copyStream(t):t instanceof A?e=this._copyReference(t):(t instanceof L||"number"==typeof t||"string"==typeof t||"boolean"==typeof t)&&(e=t),e},nc.prototype._copyDictionary=function(t,i){var r=this,n=new D(this._targetCrossReference);return t&&0<t.size&&t.forEach(function(t,e){("OC"===t&&e instanceof Array||"P"!==t&&"Parent"!==t&&"Dest"!==t&&"OC"!==t&&("AP"!==t||!i))&&null!=(e=r._copy(e))&&n.update(t,e)}),n._updated=!0,n},nc.prototype._copyArray=function(t){for(var e=[],i=0;i<t.length;i++)e.push(this._copy(t[Number.parseInt(i.toString(),10)]));return e},nc.prototype._copyStream=function(t){var e,i,r=!1,n=t,s=(t.dictionary.has("Subtype")&&"Image"===t.dictionary.get("Subtype").name?(r=!0,t instanceof g?e=t.getByteRange(t.offset,t.end):t&&n.stream&&n.stream instanceof g?e="boolean"==typeof n._initialized&&n._cipher?(s=n.stream.end-n.stream.start,n.getBytes(s),n.buffer.subarray(0,n.bufferLength)):(i=n.stream).getByteRange(i.start,i.end):n.stream&&n.stream.stream?e=(n=n.stream).stream instanceof g&&"boolean"==typeof n._initialized&&n._cipher?(s=n.stream.end-n.stream.start,n.getBytes(s),n.buffer.subarray(0,n.bufferLength)):n.stream&&n.stream instanceof g?(i=n.stream).getByteRange(i.start,i.end):[]:(!(e=t.getBytes())||0===e.length)&&t instanceof co&&(e=t._bytes)):(!(e=t.getBytes())||0===e.length)&&t instanceof co&&(e=t._bytes),new co(Array.from(e)));return s._isImage=r,s.dictionary=this._copyDictionary(t.dictionary),s.dictionary._updated=!0,s},nc.prototype._copyReference=function(t){var e,i;return this._traversedObjects.has(t)?this._traversedObjects.get(t):(this._traversedObjects.set(t,null),e=this._sourceCrossReference._fetch(t),(e=this._copy(e))instanceof D||e instanceof y?(i=this._addToDestination(e),this._traversedObjects.set(t,i),i):(this._traversedObjects.set(t,e),e))},nc.prototype._addToDestination=function(t){var e=this._targetCrossReference._getNextReference();return this._targetCrossReference._cacheMap.set(e,t),t.objId=e.objectNumber+" "+e.generationNumber,e};var rc=nc;function nc(t,e){this._traversedObjects=new Map,this._isGroupingSupport=!1,this._targetCrossReference=t,this._sourceCrossReference=e}Object.defineProperty(ac.prototype,"_layerPage",{get:function(){return this._pageParsed||this._parseLayerPage(),this._page},enumerable:!0,configurable:!0}),Object.defineProperty(ac.prototype,"_layerId",{get:function(){return this._pageParsed||this._parseLayerPage(),this._id},set:function(t){this._id=t},enumerable:!0,configurable:!0}),Object.defineProperty(ac.prototype,"name",{get:function(){return this._name||""},set:function(t){this._name=t,this._dictionary&&this._name&&""!==this.name&&this._dictionary.update("Name",this._name)},enumerable:!0,configurable:!0}),Object.defineProperty(ac.prototype,"visible",{get:function(){var t;return this._dictionary&&"boolean"==typeof(t=this._dictionary.get("Visible"))&&(this._visible=t),this._visible},set:function(t){this._visible=t,this._dictionary&&this._dictionary.update("Visible",t),this._setVisibility(t),this._document._catalog._catalogDictionary._updated=!0,this._crossReference._allowCatalog=!0},enumerable:!0,configurable:!0}),Object.defineProperty(ac.prototype,"locked",{get:function(){return this._locked},set:function(t){"boolean"==typeof(this._locked=t)&&this._setLock(t),this._document._catalog._catalogDictionary._updated=!0,this._crossReference._allowCatalog=!0},enumerable:!0,configurable:!0}),Object.defineProperty(ac.prototype,"printState",{get:function(){return this._printState},set:function(t){this._printState=t,this._printOption?this.printState===x.PdfPrintState.alwaysPrint?this._printOption.update("PrintState",new L("ON")):this.printState===x.PdfPrintState.neverPrint&&this._printOption.update("PrintState",new L("OFF")):this._setPrintState()},enumerable:!0,configurable:!0}),Object.defineProperty(ac.prototype,"layers",{get:function(){return this._layers||(this._layers=new oc(this._document,this._layer),this._layers._subLayer=!0),this._layers},enumerable:!0,configurable:!0}),ac.prototype.createGraphics=function(t){return this._graphics&&!this._needInitializeGraphics||(this._page=t,this._crossReference=t._crossReference,this._parseGraphics()),this._graphics},ac.prototype._parseGraphics=function(){this._loadContents();var t=new co([32,113,32,10]),e=this._crossReference._getNextReference(),t=(this._crossReference._cacheMap.set(e,t),this._page._contents.splice(0,0,e),new co([32,81,32,10])),e=this._crossReference._getNextReference(),t=(this._crossReference._cacheMap.set(e,t),this._page._contents.push(e),new co([])),e=this._crossReference._getNextReference();this._crossReference._cacheMap.set(e,t),this._page._contents.push(e),this._page._pageDictionary.set("Contents",this._page._contents),this._page._pageDictionary._updated=!0,this._initializeGraphics(t),this._initializeProperties()},ac.prototype._initializeProperties=function(){var t,e,i=this._graphics._resourceObject;i&&i.has("Properties")?(e=i.get("Properties"))?e.update(this._id,this._referenceHolder):((t=new D).update(this._id,this._referenceHolder),i.update("Properties",t)):((e=new D).update(this._id,this._referenceHolder),i.update("Properties",e))},ac.prototype._loadContents=function(){var t,e=this._page._pageDictionary.getRaw("Contents");e&&e instanceof A&&(t=e,e=this._crossReference._fetch(t)),e&&e instanceof y?this._page._contents=[t]:e&&Array.isArray(e)?this._page._contents=e:this._page._contents=[]},ac.prototype._initializeGraphics=function(t){var e,i,r,n=!1,s=0,a=0,o=0,h=0,c=this._page.size,_=this._page.mediaBox,d=(_&&4<=_.length&&(s=_[0],a=_[1],o=_[2],h=_[3]),this._page._pageDictionary.has("CropBox")?(_=this._page.cropBox)&&4<=_.length?(e=_[0],d=_[1],i=_[2],r=_[3],(e<0||d<0||i<0||r<0)&&Math.floor(Math.abs(d))===Math.floor(Math.abs(c[1]))&&Math.floor(Math.abs(e))===Math.floor(Math.abs(c[0]))?this._graphics=new _e([Math.max(e,i),Math.max(d,r)],t,this._crossReference,this._page):(this._graphics=new _e(c,t,this._crossReference,this._page),this._graphics._cropBox=_)):this._graphics=new _e(c,t,this._crossReference,this._page):(s<0||a<0||o<0||h<0)&&Math.floor(Math.abs(a))===Math.floor(Math.abs(c[1]))&&Math.floor(Math.abs(o))===Math.floor(Math.abs(c[0]))?(e=Math.max(s,o),i=Math.max(a,h),(e<=0||i<=0)&&(n=!0,s<0&&(s=-s),a<0&&(a=-a),o<0&&(o=-o),h<0&&(h=-h),e=Math.max(s,o),i=Math.max(a,h)),this._graphics=new _e([e,i],t,this._crossReference,this._page)):this._graphics=new _e(c,t,this._crossReference,this._page),this._page._pageDictionary.has("MediaBox")&&(this._graphics._mediaBoxUpperRightBound=n?-a:h),this._graphicsState=this._graphics.save(),this._page._origin);0<=d[0]&&0<=d[1]||Math.sign(d[0])!==Math.sign(d[1])?this._graphics._initializeCoordinates():this._graphics._initializeCoordinates(this._page),this._page._isNew||(r=this._page.rotation,Number.isNaN(r))||r===x.PdfRotationAngle.angle0&&!this._page._pageDictionary.has("Rotate")||(_=void 0,_=this._page._pageDictionary.has("Rotate")?this._page._pageDictionary.get("Rotate"):90*r,s=this._graphics._clipBounds,90===_?(this._graphics.translateTransform(0,c[1]),this._graphics.rotateTransform(-90),this._graphics._clipBounds=[s[0],s[1],c[0],c[1]]):180===_?(this._graphics.translateTransform(c[0],c[1]),this._graphics.rotateTransform(-180)):270===_&&(this._graphics.translateTransform(c[0],0),this._graphics.rotateTransform(-270),this._graphics._clipBounds=[s[0],s[1],c[1],c[0]])),this._page._isNew&&this._page._pageSettings&&(o=this._page._getActualBounds(this._page._pageSettings),this._graphics._clipTranslateMargins(o)),this._needInitializeGraphics=!1,this._graphicsCollection.has(this._graphics)||this._graphicsCollection.set(this._graphics,this._graphics),this._pageGraphics.has(this._page)||this._pageGraphics.set(this._page,this._graphics),-1===this._pages.indexOf(this._page)&&this._pages.push(this._page),this._graphics._layer=this},ac.prototype._beginLayer=function(t){if(this._graphicsCollection&&(this._graphicsCollection.has(t)?this._graphics=this._graphicsCollection.get(t):this._graphics=t),this._graphics&&this._name&&""!==this._name){if(this._graphics._isEmptyLayer=!0,0!==this._parentLayer.length)for(var e=0;e<this._parentLayer.length;e++)this._parentLayer[Number.parseInt(e.toString(),10)]._id&&""!==this._parentLayer[Number.parseInt(e.toString(),10)]._layerId&&this._graphics._sw._write("/OC /"+this._parentLayer[Number.parseInt(e.toString(),10)]._id+" BDC");t="/OC /"+this._id+" BDC";this.name&&""!==this.name?(this._graphics._sw._write(t),this._isEndState=!0):this._content.write(t)}},ac.prototype._setVisibility=function(t){var e,i,r,n,s=this._document._catalog._catalogDictionary;(e=s.has("OCProperties")?(e=s.get("OCProperties"))||new D(this._crossReference):e)&&(i=s=void 0,(n=(n=e.get("D"))||new D(this._crossReference))&&(n.has("ON")&&(i=(i=n.get("ON"))||[]),n.has("OFF")&&(s=(s=n.get("OFF"))||[]),this._referenceHolder&&(t?(s&&-1!==(r=s.indexOf(this._referenceHolder))&&s.splice(r,1),i&&-1!==(r=i.indexOf(this._referenceHolder))&&i.splice(r),i):(i&&-1!==(r=i.indexOf(this._referenceHolder))&&i.splice(r,1),s&&-1!==(r=s.indexOf(this._referenceHolder))&&s.splice(r),s)).push(this._referenceHolder),n._updated=!0),e._updated=!0)},ac.prototype._setLock=function(t){var e,i,r=this._document._catalog._catalogDictionary;(e=r.has("OCProperties")?(e=r.get("OCProperties"))||new D(this._crossReference):e)&&((r=(r=e.get("D"))||new D(this._crossReference))&&(i=r.get("Locked"),this._referenceHolder&&(t?i?-1===i.indexOf(this._referenceHolder)&&i.push(this._referenceHolder):(this._lock=[],this._lock.push(this._referenceHolder),r.update("Locked",this._lock)):i&&-1!==(t=i.indexOf(this._referenceHolder))&&i.splice(t,1)),r._updated=!0),e._updated=!0)},ac.prototype._parseLayerPage=function(){if(this._document)for(var t=0;t<this._document.pageCount;t++){var e=this._document.getPage(t)._pageDictionary,i=this._document.getPage(t);if(e.has("Resources")){e=e.get("Resources");if(e&&(e.has("Properties")||e.has("XObject"))){var r,n,s=e.get("Properties"),e=e.get("XObject");if(s)for(n in r=s._map)if(r[String(n)]instanceof A){var a=r[String(n)],o=this._crossReference._fetch(a),h=n;if(this._parseDictionary(o,a,i,h))break}if(e)for(n in r=e._map)if(r[String(n)]instanceof A){a=r[String(n)];if((o=this._crossReference._fetch(a).dictionary).has("OC")){var c=n,_=o.getRaw("OC");if(o=this._crossReference._fetch(_),this._parseDictionary(o,_,i,c)){this._layer._xObject.push(c);break}}}}}}},ac.prototype._parseDictionary=function(t,e,i,r){var n=!1;if(t.has("Name")&&t.has("OCGs")){var s=t.get("OCGs");if(s)for(var a=0;a<s.length;a++)s[Number.parseInt(a.toString(),10)]instanceof A&&(e=s[Number.parseInt(a.toString(),10)],t=this._crossReference._fetch(e),n=this._setLayerPage(e,i,r));else e=t.getArray("OCGs"),(t=t.get("OCGs"))&&t.has("Name")&&(n=this._setLayerPage(e,i,r))}else t.has("Name")&&(n=this._setLayerPage(e,i,r));return n},ac.prototype._setLayerPage=function(t,e,i){var r=!1;return this._layer._referenceHolder&&this._layer._referenceHolder===t&&(r=this._layer._pageParsed=!0,this._layer._layerId=i,this._layer._page=e,-1===this._layer._pages.indexOf(e))&&this._layer._pages.push(e),r},ac.prototype._setPrintState=function(){var t,e=this._document._catalog._catalogDictionary,e=(e=(t=e.has("OCProperties")?(t=e.get("OCProperties"))||new D(this._crossReference):t).get("OCGs"))||[],i=this._dictionary.has("Usage")?this._dictionary.get("Usage"):new D,r=(this._layer._printOption=new D,this._layer._printOption.update("Subtype",new L("Print")),this._layer._printState===x.PdfPrintState.neverPrint?this._layer._printOption.update("PrintState",new L("OFF")):this._layer.printState===x.PdfPrintState.alwaysPrint&&this._layer._printOption.update("PrintState",new L("ON")),this._crossReference._getNextReference()),i=(this._crossReference._cacheMap.set(r,this._layer._printOption),i.update("Print",r),this._layer._usage=i,this._dictionary.update("Usage",this._layer._usage),[]),n=(i.push(new L("Print")),new D),i=(n.update("Category",i),n.update("OCGs",e),n.update("Event",new L("Print")),[]),r=this._crossReference._getNextReference();this._crossReference._cacheMap.set(r,n),i.push(r),(t.get("D")||new D(this._crossReference)).update("D",i)};var sc=ac;function ac(){this._visible=!0,this._printState=x.PdfPrintState.printWhenVisible,this._isEndState=!1,this._dictionary=new D,this._pages=[],this._subLayer=[],this._locked=!1,this._parentLayer=[],this._child=[],this._graphicsCollection=new Map,this._pageGraphics=new Map,this._pageParsed=!1,this._xObject=[],this._content=new co([])}Object.defineProperty(S.prototype,"_isSkip",{get:function(){return 0<this._bdcCount},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"count",{get:function(){return this._list.length},enumerable:!0,configurable:!0}),S.prototype.at=function(t){return this._list[Number.parseInt(t.toString(),10)]},S.prototype.add=function(t,e){var i=new sc;return i._document=this._document,i._crossReference=this._document._crossReference,i.name=t,null!=e&&(i.visible=e),i._layerId="OCG_"+Es(),i._subLayerPosition=0,i._layer=i,this._addLayer(i),i},S.prototype.contains=function(t){if(!t)throw new Error("Layer cannot be null or undefined");if("string"==typeof t){for(var e=0;e<this._list.length;e++)if(this._list[Number.parseInt(e.toString(),10)].name===t)return!0}else if(t instanceof sc&&-1!==this._list.indexOf(t))return!0;return!1},S.prototype.clear=function(){for(var t=this._list.length-1;-1<t;t--){var e=this._list[Number.parseInt(t.toString(),10)];this._removeLayer(e,!0)}this._list.length=0},S.prototype.indexOf=function(t){if(t)return this._list.indexOf(t);throw new Error("Layer cannot be null or undefined")},S.prototype.move=function(t,e){if(t<0||t>=this._list.length)throw new Error("Index cannot be less than 0 or greater than array length");if(!e)throw new Error("Layer cannot be null or undefined");for(var i,r=0;r<this._list.length;r++)if(this._list[Number.parseInt(r.toString(),10)]===e){i=this.indexOf(this._list[Number.parseInt(r.toString(),10)]);break}null!=i&&i!==t&&(this._list.splice(i,1),this._list.splice(t,0,e),this._insertLayer(t,e))},S.prototype.removeAt=function(t,e){if(t<0||t>=this._list.length)throw new Error("Index cannot be less than 0 or greater than array length");var i=this._list[Number.parseInt(t.toString(),10)];if(this._list.splice(t,1),i&&(this._removeLayer(i,e||!1),0<i._child.length))for(var r=0;r<i._child.length;r++){this._removeLayer(i._child[Number.parseInt(r.toString(),10)],!1);var n=this._list.indexOf(i._child[Number.parseInt(r.toString(),10)]);-1!==n&&this._list.splice(n,1)}},S.prototype.remove=function(t,e){if(t instanceof sc){var i=t;-1!==(n=this._list.indexOf(i))&&this.removeAt(n,e||!1)}else if("string"==typeof t)for(var r=0;r<this._list.length;r++){var i=this._list[Number.parseInt(r.toString(),10)],n=this._list.indexOf(i);i.name===t&&-1!==n&&(this.removeAt(n,e||!1),r-=1)}},S.prototype._setPrintState=function(t,e){t=t.get("PrintState");t&&t instanceof L&&("ON"===t.name?e.printState=x.PdfPrintState.alwaysPrint:e.printState=x.PdfPrintState.neverPrint)},S.prototype._addLayer=function(t){this._list.push(t);var e=this._list.length-1;return this._document instanceof _c&&this._createLayer(t),t._layer=t,e},S.prototype._createLayer=function(t){var e=new D(this._crossReference),i=this._createOptionalContentDictionary(t),r=!1;if(this._document&&this._document._catalog&&this._document._catalog._catalogDictionary.has("OCProperties")&&this._isLayerContainsResource){var n=this._document._catalog._catalogDictionary.get("OCProperties");if(n&&n.has("OCGs")){var s=n.get("OCGs");if(s&&i)for(var r=!0,a=0,o=i;a<o.length;a++){var h=o[a];-1===s.indexOf(h)&&s.push(h)}if(n.has("D")){n=n.get("D");if(n){var c=void 0,_=void 0,d=void 0;if(n.has("Order")||n.update("Order",this._document._order),n.has("OFF")&&(_=n.get("OFF")),n.has("ON")&&(c=n.get("ON")),d=n.has("AS")?n.get("AS"):d)for(var p=0;p<d.length;p++){var l=void 0,u=d[Number.parseInt(p.toString(),10)];u instanceof A&&(l=this._crossReference._fetch(u))&&l instanceof D&&(u=l.get("OCGs"))&&i&&-1===u.indexOf(t._referenceHolder)&&u.push(t._referenceHolder)}t.visible?c&&i&&-1===c.indexOf(t._referenceHolder)&&c.push(t._referenceHolder):_&&i&&-1===_.indexOf(t._referenceHolder)&&_.push(t._referenceHolder)}}this._document._catalog._catalogDictionary._updated=!0}}r||(e.update("OCGs",i),e.update("D",this._createOptionalContentViews()),this._catalog._catalogDictionary.update("OCProperties",e)),this._crossReference._allowCatalog=!0},S.prototype._createOptionalContentDictionary=function(t){var e=new D(this._crossReference),i=this._crossReference._getNextReference(),r=(this._crossReference._cacheMap.set(i,e),e.update("Name",t.name),e.update("Type",new L("OCG")),e.update("LayerID",new L(t._layerId)),e.update("Visible",t.visible),t.printState!==x.PdfPrintState.alwaysPrint&&t.printState!==x.PdfPrintState.neverPrint&&t.printState!==x.PdfPrintState.printWhenVisible||(r=this._setPrintOption(t),e.update("Usage",r),this._document._printLayer.push(i)),this._document._optionalContentDictionaries.push(i),t._dictionary=e,t._referenceHolder=i,this._document._catalog._catalogDictionary.get("OCProperties"));return this._createSublayer(r,i,t),(t.visible?this._document._on:this._document._off).push(i),this._isLayerContainsResource=!0,this._document._optionalContentDictionaries},S.prototype._createOptionalContentViews=function(){var t=new D,e=(t.update("Name","Layers"),t.update("Order",this._document._order),t.update("ON",this._document._on),t.update("OFF",this._document._off),[]),i=(e.push(new L("Print")),new D),e=(i.update("Category",e),i.update("OCGs",this._document._printLayer),i.update("Event",new L("Print")),this._crossReference._getNextReference());return this._crossReference._cacheMap.set(e,i),this._document._as.push(e),t.update("AS",this._document._as),t},S.prototype._setPrintOption=function(t){var e=new D,i=new D,r=this._crossReference._getNextReference(),n=this._crossReference._getNextReference();return this._crossReference._cacheMap.set(r,e),this._crossReference._cacheMap.set(n,i),i.update("Subtype",new L("Print")),t.printState===x.PdfPrintState.neverPrint?i.update("PrintState",new L("OFF")):t.printState===x.PdfPrintState.alwaysPrint&&i.update("PrintState",new L("ON")),t._usage=e,t._printOption=i,e.update("Print",n),r},S.prototype._createSublayer=function(t,e,i){if(this._subLayer){var r;if(i._parent=this._parent,t&&(o=void 0,(h=t.get("D"))&&(o=h.get("Order")),this._document._order)&&o&&(this._document._order=o),0!==this._parent._child.length&&-1!==this._document._order.indexOf(this._parent._referenceHolder)&&(n=this._document._order.indexOf(this._parent._referenceHolder),this._document._order.splice(n+1,1)),this._parent._subLayer.push(e),-1!==this._document._order.indexOf(this._parent._referenceHolder)){var n=this._document._order.indexOf(this._parent._referenceHolder);this._document._order.splice(n+1,0,this._parent._subLayer)}else if(this._parent._parent)-1!==this._parent._parent._subLayer.indexOf(this._parent._referenceHolder)&&(n=this._parent._parent._subLayer.indexOf(this._parent._referenceHolder),1===this._parent._subLayer.length&&this._parent._parent._subLayer.splice(n+1,0,this._parent._subLayer),-1!==this._document._order.indexOf(this._parent._parent._referenceHolder))&&(r=this._document._order.indexOf(this._parent._parent._referenceHolder),this._document._order.splice(r+1,1),this._document._order.splice(r+1,0,this._parent._parent._subLayer));else if(document instanceof _c)for(var s=0;s<document._order.length;s++)if(Array.isArray(document._order[Number.parseInt(s.toString(),10)])){var a=document._order[Number.parseInt(s.toString(),10)];if(-1!==a.indexOf(this._parent._referenceHolder)){n=a.indexOf(this._parent._referenceHolder);if(1===this._parent._subLayer.length){a.splice(n+1,0,this._parent._subLayer);break}}}if(-1===this._parent._child.indexOf(i)&&this._parent._child.push(i),0===this._parent._parentLayer.length)i._parentLayer.push(this._parent);else{for(s=0;s<this._parent._parentLayer.length;s++)-1===i._parentLayer.indexOf(this._parent._parentLayer[Number.parseInt(s.toString(),10)])&&i._parentLayer.push(this._parent._parentLayer[Number.parseInt(s.toString(),10)]);-1===i._parentLayer.indexOf(this._parent)&&i._parentLayer.push(this._parent)}}else{var o,h;t&&(o=void 0,o=(h=t.get("D"))?h.get("Order"):o)&&(this._document._order=o),this._document._order.push(e)}},S.prototype._checkLayerLock=function(t){var e,t=t.get("D");if(e=t&&t.has("Locked")?t.get("Locked"):e)for(var i=0;i<e.length;i++){var r=e[Number.parseInt(i.toString(),10)];r&&r instanceof A&&(r=this._layerDictionary.get(r))&&(r.locked=!0)}},S.prototype._checkLayerVisible=function(t){var e,i=this._document;if(i._catalog&&i._catalog._catalogDictionary.has("OCProperties")){i=t.get("D");if(e=i&&i.has("OFF")?i.get("OFF"):e)for(var r=0;r<e.length;r++){var n,s=e[Number.parseInt(r.toString(),10)];s instanceof A&&(n=this._layerDictionary)&&0<n.size&&s&&n.has(s)&&(n=n.get(s))&&(n.visible=!1,n._dictionary)&&n._dictionary.has("Visible")&&n._dictionary.set("Visible",!1)}}},S.prototype._checkParentLayer=function(t){var t=t.get("D");t&&(t=t.get("Order"))&&this._parsingLayerOrder(null,t,this._layerDictionary)},S.prototype._parsingLayerOrder=function(t,e,i){for(var r,n=0;n<e.length;n++)if((a=e[Number.parseInt(n.toString(),10)])instanceof A){if(r=i.has(a)?i.get(a):r){if(t){if(-1===t._child.indexOf(r)&&t._child.push(r),0!==t._parentLayer.length)for(var s=0;s<t._parentLayer.length;s++)-1!==r._parentLayer.indexOf(t._parentLayer[Number.parseInt(s.toString(),10)])||t._parentLayer[Number.parseInt(s.toString(),10)]instanceof sc||!t._parentLayer[Number.parseInt(s.toString(),10)]||r._parentLayer.push(t._parentLayer[Number.parseInt(s.toString(),10)]);r._parentLayer.push(t),r._parent=t}e.length>n+1&&Array.isArray(e[n+1])&&(a=e[++n],r._subLayer=a,this._parsingLayerOrder(r,a,i))}}else if(Array.isArray(e[Number.parseInt(n.toString(),10)])){var a=e[Number.parseInt(n.toString(),10)];if(!a||0===a.length)return;"string"==typeof a[0]?this._parsingLayerOrder(t=null,a,i):this._parsingLayerOrder(t=null,e[n],i)}},S.prototype._createLayerHierarchical=function(t){var i=this,t=t.get("D");t&&t.has("Order")&&this._layerDictionary&&0<this._layerDictionary.size&&(this._list.splice(0,this._list.length),this._layerDictionary.forEach(function(t,e){t instanceof sc&&e instanceof A&&(t._parent||-1!==i._list.indexOf(t)?0<t._child.length?i._addChildLayer(t._parent):t._parent&&0===t._child.length&&!t._parent.layers.contains(t)&&t._parent.layers._addNestedLayer(t):i._list.push(t))}))},S.prototype._addChildLayer=function(t){for(var e=0;e<t._child.length;e++){var i=t._child[Number.parseInt(e.toString(),10)];-1===t.layers.indexOf(i)&&t.layers._addNestedLayer(i)}},S.prototype._addNestedLayer=function(t){this._list.push(t);var e=this._list.length-1;return t._layer=t,e},S.prototype._removeLayer=function(t,e){var i,r,n,s,a,o;t&&this._document&&((o=this._document._catalog._catalogDictionary)&&o.has("OCProperties")&&((i=o.get("OCProperties"))&&((a=i.get("OCGs"))&&this._removeOCG(t,a),i.has("D")&&((a=i.get("D"))&&(r=s=void 0,a.has("Order")&&(n=a.get("Order"))&&this._removeOrder(t,n,[]),a.has("Locked")&&(n=a.get("Locked"))&&this._removeLocked(t,n),a.has("OFF")&&(r=a.get("OFF")),a.has("ON")&&(s=a.get("ON")),a.has("AS")&&(n=a.get("AS"))&&this._removeUsage(t,n),this._removeVisible(t,s,r)),a._updated=!0),t._layerPage&&(n=t._layerPage._pageDictionary.get("Resources")).has("Properties")&&(s=n.get("Properties"))&&s.has(t._layerId)&&delete s._map[t._layerId],(r=this._crossReference._cacheMap).has(t._referenceHolder)&&(a=this._crossReference._cacheMap.get(t._referenceHolder))&&(n=a.getRaw("Usage"))instanceof A&&(a=this._crossReference._cacheMap.get(n))&&(s=a.getRaw("Print"),r.delete(t._referenceHolder),r.delete(n),r.delete(s)),i._updated=!0,o._updated=!0),this._crossReference._allowCatalog=!0),e)&&this._removeLayerContent(t)},S.prototype._removeOCG=function(t,e){e&&-1!==e.indexOf(t._referenceHolder)&&e.splice(e.indexOf(t._referenceHolder),1)},S.prototype._removeUsage=function(t,e){if(e)for(var i=!1,r=0;r<e.length;r++){var n=e[Number.parseInt(r.toString(),10)];if(n){var s=void 0;if(n instanceof A&&(s=this._crossReference._fetch(e[Number.parseInt(r.toString(),10)])),s=n instanceof D?n:s){n=s.get("OCGs");if(n&&(-1!==n.indexOf(t._referenceHolder)&&(n.splice(n.indexOf(t._referenceHolder),1),i=!0),i))break}}}},S.prototype._removeOrder=function(t,e,i){var r=!1;if(e)for(var n=0;n<e.length;n++){var s=e[Number.parseInt(n.toString(),10)];if(s&&s instanceof A&&s===t._referenceHolder){if(n!==e.length-1){if(Array.isArray(e[Number.parseInt(n.toString(),10)+1])){e.splice(n,2),r=!0;break}e.splice(n,1),r=!0;break}e.splice(n,1),r=!0;break}Array.isArray(s)&&i.push(e[Number.parseInt(n.toString(),10)])}if(!r&&i)for(n=0;n<i.length;n++)e=i[Number.parseInt(n.toString(),10)],i.splice(n,1),--n,this._removeOrder(t,e,i)},S.prototype._removeVisible=function(t,e,i){var r;t.visible?e&&-1!==e.indexOf(t._referenceHolder)&&-1<(r=e.indexOf(t._referenceHolder))&&e.splice(r,1):i&&-1!==i.indexOf(t._referenceHolder)&&-1<(r=i.indexOf(t._referenceHolder))&&i.splice(r,1)},S.prototype._removeLocked=function(t,e){e&&-1!==e.indexOf(t._referenceHolder)&&e.splice(e.indexOf(t._referenceHolder),1)},S.prototype._removeLayerContent=function(t){var e,i,r=!1;if(t._layerPage)for(var n=0;n<t._pages.length;n++){var s=t._pages[Number.parseInt(n.toString(),10)]._pageDictionary.get("Resources");if(s&&(e=s.get("Properties"),i=s.get("XObject"),e&&0<t._layerId.trim().length&&e.has(t._layerId)&&delete e._map[t._layerId],i)&&0<t._xObject.length){for(var a=i._map,o=0,h=a;o<h.length;o++){var c=h[o];if(-1!==t._xObject.indexOf(a[String(c)])){delete i._map[String(c)];break}}-1!==t._xObject.indexOf(t._layerId)&&t._xObject.splice(t._xObject.indexOf(t._layerId),1)}for(var _=t._pages[n]._pageDictionary.getArray("Contents"),d=0;d<_.length;d++){for(var p=new co([]),l=_[Number.parseInt(d.toString(),10)],u=l.dictionary.objId,f=l.getBytes(),g=(l instanceof co?new fo(l._bytes):new fo(f))._readContent(),y=0;y<g.length;y++){var m,b=g[Number.parseInt(y.toString(),10)],S=b._operator;"BMC"!==S&&"EMC"!==S&&"BDC"!==S||(m=b._operands,this._processBeginMarkContent(t,S,m,p,u),r=!0),"Do"===S&&-1!==t._xObject.indexOf(b._operands[0])&&(r=!0),r=("q"===S||"Q"===S||"w"===S||"J"===S||"j"===S||"M"===S||"d"===S||"ri"===S||"i"===S||"gs"===S||"g"===S||"cm"===S||"G"===S||"rg"===S||"RG"===S||"k"===S||"K"===S||"cs"===S||"CS"===S||"scn"===S||"SCN"===S||"sc"===S||"SC"===S?r||this._streamWrite(b._operands,S,!1,p):r||this._streamWrite(b._operands,S,!0,p),!1)}0<p.length&&!u&&(l=t._pages[Number.parseInt(n.toString(),10)]._contents[Number.parseInt(d.toString(),10)],(f=this._crossReference._fetch(l))._bytes.length=0,f.write(p.getString()))}t._pages[Number.parseInt(n.toString(),10)]._pageDictionary._updated=!0}},S.prototype._processBeginMarkContent=function(t,e,i,r,n){if("BDC"===e){var s=void 0;if(1<i.length&&"OC"===i[0].substring(1)&&(s=i[1].substring(1)),0<this._bdcCount)return void this._bdcCount++;s&&s===t._layerId&&(this._bdcCount++,s=t._pages[0]._pageDictionary.getRaw("Contents"),n)&&(n=n.split(" "),s=s.indexOf(A.get(Number(n[0]),Number(n[1]))),t._pages[0]._pageDictionary.getRaw("Contents").splice(s,1))}this._streamWrite(i,e,!0,r),"EMC"===e&&0<this._bdcCount&&this._bdcCount--},S.prototype._streamWrite=function(t,e,i,r){if(!i||!this._isSkip){if(t)for(var n=0,s=t;n<s.length;n++){var a=s[n];r.write(a),r.write(" ")}r.write(a=e),r.write("\r\n")}},S.prototype._insertLayer=function(t,e){var i,r,n,e=e._referenceHolder;this._document&&(r=this._document._catalog._catalogDictionary).has("OCProperties")&&(r=r.get("OCProperties"))&&(i=r.get("OCGs"),r.has("D"))&&(r=r.get("D"))&&(r=r.get("Order"))&&i&&-1!==r.indexOf(e)&&t<r.length&&r[Number.parseInt(t.toString(),10)]instanceof A&&t+1<r.length&&t+2<r.length&&(n=t+2,r[Number.parseInt((t+1).toString(),10)]instanceof A)&&r[Number.parseInt(n.toString(),10)]instanceof A&&(n=r.indexOf(e),r.splice(n,1),r.splice(t,0,e),-1!==i.indexOf(e))&&(n=i.indexOf(e),i.splice(n,1),i.splice(t,0,e))};var oc=S;function S(t,e){if(this._subLayer=!1,this._isLayerContainsResource=!1,this._layerDictionary=new Map,this._bdcCount=0,this._list||(this._list=[]),this._crossReference=t._crossReference,this._catalog=t._catalog,this._document=t,e)this._parent=e;else{var i=void 0;if(this._document&&this._document._catalog&&this._document._catalog._catalogDictionary&&this._document._catalog._catalogDictionary.has("OCProperties")){e=this._document._catalog._catalogDictionary.get("OCProperties");if(e&&e.has("OCGs")){var r=e.get("OCGs");if(r&&Array.isArray(r))for(var n,s,a,o,h,c=0;c<r.length;c++)(h=r[Number.parseInt(c.toString(),10)])instanceof A&&(i=this._crossReference._fetch(h),n=new sc,i)&&(i.has("Name")&&(s=i.get("Name"),n.name=s,n._dictionary=i,n._crossReference=this._document._crossReference,n._referenceHolder=h,(s=i.get("LayerID"))&&(n._layerId=s.name),(s=i.getRaw("Usage"))&&s instanceof D&&((o=s.get("Print"))&&o instanceof D&&(n._printOption=o).has("PrintState")&&this._setPrintState(o,n),o=s.get("View"))&&o instanceof D&&o.has("ViewState")&&"OFF"===o.get("ViewState").name&&(n.visible=!1),s)&&s instanceof A&&(s=this._crossReference._fetch(s))&&s instanceof D&&((a=s.getRaw("Print"))&&a instanceof A&&(a=this._crossReference._fetch(a))&&a instanceof D&&(n._printOption=a).has("PrintState")&&this._setPrintState(a,n),a=s.getRaw("View"))&&a instanceof A&&(o=this._crossReference._fetch(a))&&o instanceof D&&o.has("ViewState")&&"OFF"===o.get("ViewState").name&&(n.visible=!1),n._document=t,n._layer=n,this._layerDictionary.set(h,n),this._list.push(n));this._checkLayerLock(e),this._checkLayerVisible(e),this._checkParentLayer(e),this._createLayerHierarchical(e)}}}}cc.prototype.addPage=function(){var t=0===this._document.pageCount?0:this._document.pageCount,e=new D(this._crossReference),i=(e.update("Type",L.get("Page")),this._crossReference._getNextReference()),r=(this._crossReference._cacheMap.set(i,e),e.objId=i.toString(),e.update("Parent",this._reference),this._dictionary.has("Kids")?(r=this._dictionary.get("Kids"))&&(r.push(i),this._dictionary.update("Kids",r),Ea(this._dictionary,1),this._document._pageCount++):(this._dictionary.update("Kids",[i]),Ea(this._dictionary,1),this._document._pageCount=1),this._pageCount++,new kn(this._crossReference,t,e,i));return r._pageSettings=this._pageSettings,r._isNew=!0,this._document._pages.set(t,r),r};var hc=cc;function cc(t,e){this._pageCount=0,this._document=t,this._crossReference=t._crossReference;var i,r,n,t=new D(this._crossReference),e=(t.update("Type",L.get("Pages")),ja(t,this._pageSettings=e),this._crossReference._getNextReference()),s=(this._crossReference._cacheMap.set(e,t),t.objId=e.toString(),t.update("Kids",[]),t.update("Count",0),this._dictionary=t,this._reference=e,this._document.pageCount);0===s?(r=this._document._catalog._catalogDictionary._get("Pages"),(i=this._document._catalog._topPagesDictionary)&&(i.has("Kids")?(n=i.get("Kids"))&&(n.push(e),i.update("Kids",n),t.update("Parent",r)):(i.update("Kids",[e]),t.update("Parent",r)))):(i=this._document.getPage(s-1))&&i._pageDictionary&&(r=i._pageDictionary._get("Parent"),s=this._crossReference._fetch(r))&&s.has("Kids")&&(n=s.get("Kids"))&&(n.push(e),s.update("Kids",n),t.update("Parent",r))}Object.defineProperty(P.prototype,"_allowImportCustomData",{get:function(){return this._allowCustomData},set:function(t){this._allowCustomData=t},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"_linearization",{get:function(){if(!this._linear){var t=void 0;try{t=new Rh(this._stream)}catch(t){}this._linear=t}return this._linear},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"_startXRef",{get:function(){var t=this._stream,e=0;if(this._linearization&&this._linearization.isValid)t.reset(),this._find(t,this._endObjSignature)&&(e=t.position+6-t.start);else{for(var i=this._startXrefSignature.length,r=!1,n=t.end;!r&&0<n;)(n-=1024-i)<0&&(n=0),t.position=n,r=this._find(t,this._startXrefSignature,1024,!0);if(r){t.skip(9);for(var s=void 0;gs(s=t.getByte()););for(var a="";32<=s&&s<=57;)a+=String.fromCharCode(s),s=t.getByte();e=parseInt(a,10),isNaN(e)&&(e=0)}}return e},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"isEncrypted",{get:function(){return this._isEncrypted},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"isUserPassword",{get:function(){return this._isUserPassword},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"pageCount",{get:function(){return void 0===this._pageCount&&(this._pageCount=0,this._linearization&&this._linearization.isValid?this._pageCount=this._linearization.pageCount:this._pageCount=this._catalog.pageCount),this._pageCount},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"form",{get:function(){return void 0===this._form&&(this._form=new zh(this._catalog.acroForm,this._crossReference)),this._form},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"flatten",{get:function(){return this._flatten},set:function(t){this._flatten=t},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"permissions",{get:function(){var t;return this._crossReference&&void 0!==(t=this._crossReference._permissionFlags)&&(this._permissions=3903&t),this._permissions},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"bookmarks",{get:function(){var t,e,i=this._catalog;return i&&(i._catalogDictionary.has("Outlines")?(e=i._catalogDictionary._get("Outlines"),(t=i._catalogDictionary.get("Outlines"))&&(this._bookmarkBase=new yn(t,this._crossReference),this._bookmarkBase._reference=e,t.has("First"))&&this._bookmarkBase._reproduceTree()):(t=new D(this._crossReference),e=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(e,t),i._catalogDictionary.update("Outlines",e),this._crossReference._allowCatalog=!0,this._bookmarkBase=new yn(t,this._crossReference),this._bookmarkBase._reference=e)),this._bookmarkBase},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"fileStructure",{get:function(){return this._fileStructure},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"layers",{get:function(){return this._layers||(this._layers=new oc(this)),this._layers},enumerable:!0,configurable:!0}),P.prototype.getPage=function(t){if(t<0||t>=this.pageCount)throw new Error("Invalid page index");var e,i=this._pages.get(t);return i||(i=this._catalog,e=(e=this._linearization)&&e.isValid&&e.pageFirst===t?this._getLinearizationPage(t):i.getPageDictionary(t),i=new kn(this._crossReference,t,e.dictionary,e.reference),this._pages.set(t,i),i)},P.prototype.addPage=function(t,e){void 0!==e?(i=e,this._checkPageNumber(r=t)):void 0===t?(i=new fc,r=this.pageCount):t instanceof fc?(i=t,r=this.pageCount):(i=new fc,this._checkPageNumber(r=t));var i,r,n,s,a,o,e=new D(this._crossReference),h=(e.update("Type",L.get("Pages")),e.update("Count",1),ja(e,i),this._crossReference._getNextReference()),t=(this._crossReference._cacheMap.set(h,e),e.objId=h.toString(),new D(this._crossReference)),c=(t.update("Type",L.get("Page")),this._crossReference._getNextReference()),_=(this._crossReference._cacheMap.set(c,t),t.objId=c.toString(),t.update("Parent",h),e.update("Kids",[c]),0===this.pageCount?((s=this._catalog._catalogDictionary._get("Pages"))&&this._catalog._topPagesDictionary?(a=!1,this._catalog._topPagesDictionary.has("Kids")&&(_=this._catalog._topPagesDictionary.get("Kids"))&&(_.push(h),this._catalog._topPagesDictionary.update("Kids",_),a=!0),a||this._catalog._topPagesDictionary.update("Kids",[h]),this._catalog._topPagesDictionary.update("Count",1),e.update("Parent",s)):this._catalog._catalogDictionary.update("Pages",h),this._pages=new Map,this._pageCount=1):(n=this.getPage(r===this.pageCount?r-1:r))&&n._pageDictionary&&(s=n._pageDictionary._get("Parent"),a=this._crossReference._fetch(s))&&a.has("Kids")&&(_=a.get("Kids"))&&(r===this.pageCount?_.push(h):(o=[],_.forEach(function(t){t===n._ref&&o.push(h),o.push(t)}),_=o,this._updatePageCache(r)),a.update("Kids",_),e.update("Parent",s),Ea(a,1),this._pageCount=this.pageCount+1),new kn(this._crossReference,r,t,c));return _._pageSettings=i,_._isNew=!0,this._pages.set(r,_),_},P.prototype.addSection=function(t){var e;return this._isLoaded||(t=t||new fc,e=new hc(this,t)),e},P.prototype.removePage=function(t){t=t instanceof kn?t:this.getPage(t);this._removePage(t)},P.prototype._checkPageNumber=function(t){if(t<0||t>this.pageCount)throw new Error("Index out of range")},P.prototype._updatePageCache=function(t,e){void 0===e&&(e=!0);for(var i=new Map,r=this.pageCount-1;0<=r;r--){var n=this.getPage(r);e?t<=r?(i.set(r+1,n),n._pageIndex=r+1):i.set(r,n):t<r?(i.set(r-1,n),n._pageIndex=r-1):r!==t&&i.set(r,n)}this._pages=i,e||(this._pageCount=this._pages.size)},P.prototype._removePage=function(t){var e=this._parseBookmarkDestination();if(e&&e.has(t)){var i=e.get(t);if(i)for(var r=0;r<i.length;r++){var n=i[Number.parseInt(r.toString(),10)];n&&(n=n._dictionary)&&(n.has("A")&&n.update("A",null),n.update("Dest",null))}}this._removePageTemplates(t);for(r=this.form.count-1;0<=r;--r){var s=this.form.fieldAt(r);s&&s.page===t&&this.form.removeFieldAt(r)}this._updatePageCache(t._pageIndex,!1),this._removeParent(t._ref,t._pageDictionary),this._crossReference._cacheMap.has(t._ref)&&(t._pageDictionary._updated=!1),0===this.pageCount&&this._catalog._topPagesDictionary.update("Kids",[])},P.prototype._removeParent=function(e,t){var i,r;t.has("Parent")&&(t=t._get("Parent"),i=this._crossReference._fetch(t))&&i.has("Kids")&&(F(r=i.get("Kids"))&&1===r.length&&i&&"Pages"===i.get("Type").name?this._removeParent(t,i):(r=r.filter(function(t){return t!==e}),i.update("Kids",r),Ea(i,-1)))},P.prototype._parseBookmarkDestination=function(){var t=this.bookmarks;if(void 0===this._bookmarkHashTable&&t){this._bookmarkHashTable=new Map;var e=[],i={index:0,kids:t._bookMarkList};do{for(;i.index<i.kids.length;){var r,n,s=(t=i.kids[i.index]).namedDestination;s?s.destination&&(r=s.destination.page,(n=(n=this._bookmarkHashTable.get(r))||[]).push(t),this._bookmarkHashTable.set(r,n)):(s=t.destination)&&(r=s.page,(n=(n=this._bookmarkHashTable.get(r))||[]).push(t),this._bookmarkHashTable.set(r,n)),i.index+=1,0<t.count&&(e.push(i),i={index:0,kids:t._bookMarkList})}if(0<e.length)for(i=e.pop();i.index===i.kids.length&&0<e.length;)i=e.pop()}while(i.index<i.kids.length)}return this._bookmarkHashTable},P.prototype._removePageTemplates=function(t){var e;this._catalog._catalogDictionary.has("Names")&&(e=this._catalog._catalogDictionary.get("Names"))&&(this._removeInternalTemplates(e,"Pages",t),this._removeInternalTemplates(e,"Templates",t))},P.prototype._removeInternalTemplates=function(t,e,i){var r;t.has(e)&&(r=t.get(e))&&r.has("Names")&&(r=r.getArray("Names"))&&0<r.length&&(r=this._getUpdatedPageTemplates(r,i),(i=new D(this._crossReference)).update("Names",r),r=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(r,i),i.objId=r.toString(),t.update(e,r))},P.prototype._getUpdatedPageTemplates=function(t,e){if(0<t.length)for(var i=1;i<=t.length;i+=2){var r=t[Number.parseInt(i.toString(),10)];if(r&&e._pageDictionary===r)return t.pop(),t.pop(),t}return t},P.prototype.reorderPages=function(t){for(var n=this,s=(t.forEach(function(t){n._checkPageNumber(t)}),this._sortedArray(t)),a=t.slice().sort(function(t,e){return t-e}),e=Array.from({length:this.pageCount},function(t,e){return e}).filter(function(t){return-1===s.indexOf(t)}),i=e.length-1;0<=i;i--)this.removePage(e[Number.parseInt(i.toString(),10)]);for(var o=[],h=new Map,c=this._catalog._catalogDictionary._get("Pages"),_=this,i=0;i<s.length;i++)!function(t){for(var e=_.getPage(a.indexOf(s[Number.parseInt(t.toString(),10)])),i=(e._pageIndex=t,h.set(t,e),new D(_._crossReference)),t=(i.update("Type",L.get("Pages")),i.update("Count",1),i.update("Parent",c),_._crossReference._getNextReference()),r=(i.objId=t.toString(),i.update("Kids",[e._ref]),o.push(t),e._pageDictionary.get("Parent"));r&&"Pages"===r.get("Type").name&&(r.forEach(function(t,e){switch(t){case"Parent":case"Kids":case"Type":case"Count":break;case"Resources":n._cloneResources(r.get("Resources"),i);break;default:i.has(t)||i.update(t,e)}}),r.has("Parent"));)r=r.get("Parent");_._crossReference._cacheMap.set(t,i),_._crossReference._fetch(e._ref).update("Parent",t)}(i);this._pages=h,this._catalog&&(t=this._catalog._topPagesDictionary)&&t.has("Kids")&&(t.get("Kids"),t.update("Kids",o))},P.prototype._sortedArray=function(t){var e=[];return t.forEach(function(t){-1===e.indexOf(t)&&e.push(t)}),e},P.prototype._cloneResources=function(t,e){var i,r=this;e.has("Resources")?(i=e.get("Resources"),t.forEach(function(t,e){i.has(t)?r._cloneInnerResources(t,e,i):i.update(t,e)})):e.update("Resources",t)},P.prototype._cloneInnerResources=function(t,e,i){var r,n,s,a;e instanceof D?(r=i.get(t))?(n=!1,r.forEach(function(t,e){r.has(t)||(r.update(t,e),n=!0)}),n&&(i._updated=!0)):i.update(t,e):Array.isArray(e)&&((s=i.get(t))?(a=!1,e.forEach(function(t){-1===s.indexOf(t)&&(s.push(t),a=!0)}),a&&(i._updated=!0)):i.update(t,e))},P.prototype.save=function(t){if(this._isLoaded||0!==this.pageCount||this.addSection().addPage(),this._doPostProcess(this._flatten),"string"!=typeof t)return this._crossReference._save();M.Save.save(t,new Blob([this._crossReference._save()],{type:"application/pdf"}))},P.prototype.saveAsBlob=function(){var e=this;return new Promise(function(t){t({blobData:new Blob([e._crossReference._save()],{type:"application/pdf"})})})},P.prototype.exportAnnotations=function(t,e){var i,r;if(this._isExport=!0,this._doPostProcessOnAnnotations(),t&&t instanceof dc?r=t:e&&e instanceof dc&&(r=e),r){if(r.dataFormat===x.DataFormat.xfdf)i=new Ne;else if(r.dataFormat===x.DataFormat.json)i=new Be;else{if(r.dataFormat!==x.DataFormat.fdf)return;i=new Wh}i.exportAppearance=r.exportAppearance}else i=new Ne;e=i._exportAnnotations(this);if(!t||"string"!=typeof t)return e;M.Save.save(t,new Blob([e],{type:"text/plain"}))},P.prototype.exportFormData=function(t,e){var i,r;if(this._doPostProcessOnFormFields(),t&&t instanceof lc?r=t:e&&e instanceof lc&&(r=e),r){if(r.dataFormat===x.DataFormat.xfdf)i=new Ne(r.exportName);else if(r.dataFormat===x.DataFormat.json)i=new Be(r.exportName);else if(r.dataFormat===x.DataFormat.fdf)i=new Wh(r.exportName);else{if(r.dataFormat!==x.DataFormat.xml)return;i=new Qh(r.exportName)}i._asPerSpecification=r.asPerSpecification}else(i=new Ne)._asPerSpecification=!1;if(!t||"string"!=typeof t)return i._exportFormFields(this);M.Save.save(t,new Blob([i._exportFormFields(this)],{type:"text/plain"}))},P.prototype.importAnnotations=function(t,e){e===x.DataFormat.xfdf?(new Ne)._importAnnotations(this,"string"==typeof t?ys(t):t):e===x.DataFormat.json?(new Be)._importAnnotations(this,"string"==typeof t?ys(t):t):e===x.DataFormat.fdf&&(new Wh)._importAnnotations(this,"string"==typeof t?ys(t):t)},P.prototype.importFormData=function(t,e){0<this.form.count&&(e===x.DataFormat.xfdf?(new Ne)._importFormData(this,"string"==typeof t?ys(t):t):e===x.DataFormat.json?(new Be)._importFormData(this,"string"==typeof t?ys(t):t):e===x.DataFormat.fdf?(new Wh)._importFormData(this,"string"==typeof t?ys(t):t):e===x.DataFormat.xml&&(new Qh)._importFormData(this,"string"==typeof t?ys(t):t))},P.prototype.destroy=function(){this._crossReference&&(this._crossReference._destroy(),this._crossReference=void 0),this._catalog&&(this._catalog._destroy(),this._catalog=void 0),this._endObjSignature=void 0,this._headerSignature=void 0,this._pages&&0<this._pages.size&&this._pages.forEach(function(t){t._destroy()}),this._pages&&(this._pages.clear(),this._pages=void 0),this._startXrefSignature=void 0,this._stream=void 0,this._form=void 0,eo(),this._mergeHelperCache&&(0<this._mergeHelperCache.size&&this._mergeHelperCache.forEach(function(t){t&&t._objectDispose()}),this._mergeHelperCache.clear(),this._mergeHelperCache=void 0)},Object.defineProperty(P.prototype,"_destinationCollection",{get:function(){var t;return null!==this._namedDestinationCollection&&void 0!==this._namedDestinationCollection||(this._catalog._catalogDictionary.has("Names")?(t=this._catalog._catalogDictionary.get("Names"),this._namedDestinationCollection=new An(t,this._crossReference)):this._namedDestinationCollection=new An),this._namedDestinationCollection},enumerable:!0,configurable:!0}),P.prototype._getLinearizationPage=function(e){var i=this._catalog,t=this._linearization,r=this._crossReference,t=A.get(t.objectNumberFirst,0);try{var n=r._fetch(t);if(n instanceof D)if(io(n.get("Type"),"Page")||!n.has("Type")&&!n.has("Kids"))return i.pageKidsCountCache.has(t)||i.pageKidsCountCache.put(t,1),i.pageIndexCache.has(t)||i.pageIndexCache.put(t,0),{dictionary:n,reference:t};throw new v("The Linearization dictionary does not point to a valid Page dictionary.")}catch(t){return i.getPageDictionary(e)}},P.prototype._checkHeader=function(){var t=this._stream;if(t.reset(),this._find(t,this._headerSignature)){t.moveStart();for(var e="",i=t.getByte();32<i&&!(12<=e.length);)e+=String.fromCharCode(i),i=t.getByte();this._version||(this._version=e.substring(5))}},P.prototype._parse=function(t){this._crossReference._parse(t),this._catalog=new Mo(this._crossReference),this._catalog.version&&(this._version=this._catalog.version)},P.prototype._find=function(t,e,i,r){void 0===r&&(r=!1);var n=e.length,s=t.peekBytes(i=void 0===i?1024:i),a=s.length-n;if(!(a<=0))if(r)for(var o=n-1,h=s.length-1;o<=h;){for(var c=0;c<n&&s[h-c]===e[o-c];)c++;if(n<=c)return t.position+=h-o,!0;h--}else for(h=0;h<=a;){for(c=0;c<n&&s[h+c]===e[c];)c++;if(n<=c)return t.position+=h,!0;h++}return!1},P.prototype._doPostProcess=function(t){this._doPostProcessOnFormFields(t=void 0===t?!1:t),this._doPostProcessOnAnnotations(t)},P.prototype._doPostProcessOnFormFields=function(t){var e;void 0===t&&(t=!1),this._catalog._catalogDictionary.has("AcroForm")&&(this.form._doPostProcess(t),t&&(t=this._catalog._catalogDictionary.getRaw("AcroForm"),(e=new D(this._crossReference))._updated=!0,t instanceof A?this._crossReference._cacheMap.set(t,e):(this.form._dictionary=e,this._crossReference._allowCatalog=!0),this.form._clear()),this.form._isDefaultAppearance?this.form._dictionary.update("NeedAppearances",this.form._isDefaultAppearance):!this.form._isDefaultAppearance&&this.form._dictionary.has("NeedAppearances")&&this.form._isNeedAppearances?this.form._dictionary.update("NeedAppearances",!1):!this.form._isDefaultAppearance&&this.form._dictionary.has("NeedAppearances")&&this.form._dictionary.update("NeedAppearances",this.form.needAppearances))},P.prototype._doPostProcessOnAnnotations=function(t){void 0===t&&(t=!1);for(var e=0;e<this.pageCount;e++){var i=this.getPage(e);i.annotations._isExport=this._isExport,i.annotations._doPostProcess(t),t&&(i._pageDictionary.has("Annots")&&(delete i._pageDictionary._map.Annots,i._pageDictionary._updated=!0),i.annotations._clear())}},P.prototype._addWatermarkText=function(){if(0<this.pageCount)for(var t=0;t<this._pageCount;t++){var e=this.getPage(t);if(e)try{var i=e.graphics,r=(i.save(),i.setTransparency(.2),i.drawRectangle(0,0,e.size[0],33.75,new I([255,255,255])),i.restore(),i.save(),i.setTransparency(.5),new m(x.PdfFontFamily.helvetica,12,x.PdfFontStyle.regular)),n=new k(x.PdfTextAlignment.center,x.PdfVerticalAlignment.middle);i.drawString("Created with a trial version of Syncfusion Essential PDF",r,[0,0,e.size[0],33.75],null,new I([0,0,0]),n),i.restore()}catch(t){}}},P.prototype.importPageRange=function(t,e,i,r){if(i<e||e>=t.pageCount)throw new Error("The start index is greater then the end index, which might indicate the error in the program.");this._importPages(t,e,i,r)},P.prototype._importPages=function(t,e,i,r){var n,s,a=0;if(void 0!==r&&"number"==typeof r.targetIndex){if(r.targetIndex>this.pageCount)throw new Error("The target index is out of range.");this._targetIndex=r.targetIndex}var o,h=new Map;if(!this._isDuplicatePage)for(var c=0;c<t.pageCount;c++){var _=t.getPage(c);h.set(_._pageDictionary,null)}this._mergeHelperCache||(this._mergeHelperCache=new Map),t._uniqueID||(t._uniqueID=Es()),this._mergeHelperCache.has(t._uniqueID)?o=this._mergeHelperCache.get(t._uniqueID):(o=new ec(this._crossReference,this,t,h,r),this._mergeHelperCache.set(t._uniqueID,o));var d=!1;(!this._isDuplicatePage&&t._catalog._catalogDictionary.has("OCProperties")||void 0!==r&&!r.optimizeResources)&&(d=!0,n=t._catalog._catalogDictionary.get("OCProperties"),s=new D(this._crossReference),o._writeObject(t,s,n,n,"OCProperties",null,null),s._updated=!0);for(var p=e;p<=i;p++){var l=t.getPage(p);t.form._doPostProcess(t.flatten,l),0<l.annotations.count&&(l.annotations._doPostProcess(t.flatten),t.flatten)&&(l._pageDictionary.has("Annots")&&(delete l._pageDictionary._map.Annots,l._pageDictionary._updated=!0),l.annotations._clear()),t._isSplitDocument?o._importPages(l,this._targetIndex,d,this._isDuplicatePage,r,t._isSplitDocument):o._importPages(l,this._targetIndex,d,this._isDuplicatePage,r),a++,"number"==typeof this._targetIndex&&++this._targetIndex}this._isDuplicatePage||o._fixDestinations(t),o._exportBookmarks(t,a),o._mergeFormFieldsWithDocument(),(d&&!this._isDuplicatePage||void 0!==r&&!r.optimizeResources)&&o._importLayers(s,!0),o._objectDispose(),this._isDuplicatePage=!1},P.prototype.importPage=function(t,e,i){"number"==typeof t?(this._isDuplicatePage=!0,e instanceof $h?this._importPages(this,t,t,e):this._importPages(this,t,t)):t instanceof kn&&e instanceof P&&(t=t._pageIndex,this.importPageRange(e,t,t,i))},P.prototype.split=function(){this.splitByFixedNumber(1)},P.prototype.splitByFixedNumber=function(t){var e=this.pageCount;if(!(this.splitEvent&&t<=e&&0<t))throw new Error("Invalid split number. Split number should be greater than zero and less than or equal to page count.");for(var i=0,r=0;r<e;r+=t){var n=Math.min(r+t-1,e-1),n=this._importDocumentPages(r,n);this._invokeSplitEvent(i,n),i++}},P.prototype.splitByPageRanges=function(t){var e=this.pageCount;if(this.splitEvent)for(var i=0,r=0;r<t.length;r++){var n=t[Number.parseInt(r.toString(),10)];if(Array.isArray(n)&&n.length<2)throw new Error("Invalid page range. Start and end page indexes should be specified.");var s=n[0],n=n[1];if(s<0||n<0||e<=s||e<=n||n<s)throw new Error("Invalid page range: start (${start}) and end (${end}).");s=this._importDocumentPages(s,n);this._invokeSplitEvent(i,s),i++}},P.prototype._importDocumentPages=function(t,e){this._isSplitDocument=!0;for(var i=new P,r=t;r<=e;r++){var n=this.getPage(r);i.importPage(n,this)}t=i.save();return i.destroy(),t},P.prototype._invokeSplitEvent=function(t,e){t=new bc(t,e);this.splitEvent(this,t)};var _c=P;function P(t,e){if(this._headerSignature=new Uint8Array([37,80,68,70,45]),this._startXrefSignature=new Uint8Array([115,116,97,114,116,120,114,101,102]),this._endObjSignature=new Uint8Array([101,110,100,111,98,106]),this._version="",this._permissions=x.PdfPermissionFlag.default,this._isEncrypted=!1,this._isUserPassword=!1,this._hasUserPasswordOnly=!1,this._encryptOnlyAttachment=!1,this._encryptMetaData=!1,this._isExport=!1,this._allowCustomData=!1,this._isDuplicatePage=!1,this._isSplitDocument=!1,this._optionalContentDictionaries=[],this._order=[],this._on=[],this._off=[],this._as=[],this._printLayer=[],this._isLoaded=!0,t){this._stream=new g("string"==typeof t?ys(t):t),this._fileStructure=new Yh,this._crossReference=new Lh(this,e),this._pages=new Map,this._checkHeader(),this._crossReference._setStartXRef(this._startXRef);try{this._parse(!1)}catch(t){if("XRefParseException"!==t.name)throw t;this._parse(!0)}this._crossReference._version=this._version}else{this._isLoaded=!1,this._stream=new g([]),this._version="1.4",this._fileStructure=new Yh,this._fileStructure.isIncrementalUpdate=!1,this._crossReference=new Lh(this),this._crossReference._version=this._version,this._crossReference._nextReferenceNumber=1;var t=new D(this._crossReference),e=(t.update("Type",L.get("Catalog")),this._crossReference._getNextReference()),i=(this._crossReference._cacheMap.set(e,t),new D),e=(i.update("Root",e),this._crossReference._trailer=i,this._crossReference._root=t,new D(this._crossReference)),i=(e.update("Type",L.get("Pages")),e.update("Kids",[]),e.update("Count",0),this._crossReference._getNextReference());this._crossReference._cacheMap.set(i,e),t.update("Pages",i),this._catalog=new Mo(this._crossReference),this._pages=new Map}}Object.defineProperty(pc.prototype,"dataFormat",{get:function(){return this._format},set:function(t){this._format=t},enumerable:!0,configurable:!0}),Object.defineProperty(pc.prototype,"exportAppearance",{get:function(){return this._exportAppearance},set:function(t){this._exportAppearance=t},enumerable:!0,configurable:!0});var dc=pc;function pc(){this._format=x.DataFormat.xfdf,this._exportAppearance=!1}Object.defineProperty(uc.prototype,"dataFormat",{get:function(){return this._format},set:function(t){this._format=t},enumerable:!0,configurable:!0}),Object.defineProperty(uc.prototype,"exportName",{get:function(){return this._exportName},set:function(t){this._exportName=t},enumerable:!0,configurable:!0}),Object.defineProperty(uc.prototype,"asPerSpecification",{get:function(){return this._asPerSpecification},set:function(t){this._asPerSpecification=t},enumerable:!0,configurable:!0});var lc=uc;function uc(){this._format=x.DataFormat.xfdf,this._exportName="",this._asPerSpecification=!0}Object.defineProperty(gc.prototype,"orientation",{get:function(){return this._orientation},set:function(t){this._isOrientation=!0,this._orientation!==t&&(this._orientation=t,this._updateSize(t))},enumerable:!0,configurable:!0}),Object.defineProperty(gc.prototype,"size",{get:function(){return this._size},set:function(t){this._isOrientation?this._updateSize(t):(this._size=t,this._updateOrientation())},enumerable:!0,configurable:!0}),Object.defineProperty(gc.prototype,"margins",{get:function(){return this._margins},set:function(t){this._margins=t},enumerable:!0,configurable:!0}),Object.defineProperty(gc.prototype,"rotation",{get:function(){return this._rotation},set:function(t){4<=(this._rotation=t)&&(this._rotation=t%4)},enumerable:!0,configurable:!0}),gc.prototype._updateSize=function(t){var e,t=Array.isArray(t)?(e=this.orientation,t):(e=t,this._size);e===x.PdfPageOrientation.portrait?this._size=[Math.min(t[0],t[1]),Math.max(t[0],t[1])]:this._size=[Math.max(t[0],t[1]),Math.min(t[0],t[1])]},gc.prototype._updateOrientation=function(){this._orientation=this._size[1]>=this._size[0]?x.PdfPageOrientation.portrait:x.PdfPageOrientation.landscape},gc.prototype._getActualSize=function(){return[this._size[0]-(this._margins._left+this._margins._right),this._size[1]-(this._margins._top+this._margins._bottom)]};var fc=gc;function gc(){this._size=[595,842],this._isOrientation=!1,this._orientation=x.PdfPageOrientation.portrait,this._size=[595,842],this._margins=new yc,this._rotation=x.PdfRotationAngle.angle0}Object.defineProperty(mc.prototype,"left",{get:function(){return this._left},set:function(t){this._left=t},enumerable:!0,configurable:!0}),Object.defineProperty(mc.prototype,"right",{get:function(){return this._right},set:function(t){this._right=t},enumerable:!0,configurable:!0}),Object.defineProperty(mc.prototype,"top",{get:function(){return this._top},set:function(t){this._top=t},enumerable:!0,configurable:!0}),Object.defineProperty(mc.prototype,"bottom",{get:function(){return this._bottom},set:function(t){this._bottom=t},enumerable:!0,configurable:!0});var yc=mc;function mc(t){this._left=this._right=this._top=this._bottom=void 0===t?40:t}Object.defineProperty(Sc.prototype,"pdfData",{get:function(){return this._pdfData},enumerable:!0,configurable:!0}),Object.defineProperty(Sc.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0});var bc=Sc;function Sc(t,e){this._index=t,this._pdfData=e}function wc(t,e,i,r){this._left=0,this._right=0,this._top=0,void(this._bottom=0)===t?(this._left=.5,this._right=.5,this._top=.5,this._bottom=.5):(this._left=t,this._right=i,this._top=e,this._bottom=r)}Object.defineProperty(Pc.prototype,"layout",{get:function(){return this._layout},set:function(t){this._layout=t},enumerable:!0,configurable:!0}),Object.defineProperty(Pc.prototype,"break",{get:function(){return this._break},set:function(t){this._break=t},enumerable:!0,configurable:!0}),Object.defineProperty(Pc.prototype,"paginateBounds",{get:function(){return this._paginateBounds},set:function(t){this._paginateBounds=t,this._boundSet=!0},enumerable:!0,configurable:!0}),Object.defineProperty(Pc.prototype,"usePaginateBounds",{get:function(){return this._boundSet},enumerable:!0,configurable:!0});var vc=Pc;function Pc(t){this._boundSet=!1,this._paginateBounds=[],t?(this.break=t.break,this.layout=t.layout,this.paginateBounds=t.paginateBounds,this._boundSet=t._boundSet):(this.layout=x.PdfLayoutType.paginate,this.break=x.PdfLayoutBreakType.fitPage)}Object.defineProperty(xc.prototype,"Page",{get:function(){return this._page},enumerable:!0,configurable:!0}),Object.defineProperty(xc.prototype,"bounds",{get:function(){return this._bounds},enumerable:!0,configurable:!0});var Ac=xc;function xc(t,e){this._page=t,this._bounds=e}var kc=function(){this.markerWrote=!1,this.markerWidth=0,this.markerX=0},Ic=function(){};Cc=function(t,e){return(Cc=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}))(t,e)};(function(t,e){function i(){this.constructor=t}Cc(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(Nc,Tc=he),Nc.prototype._initializeAsync=function(t){var e=new Uint8Array(t.length);null!=t&&"string"==typeof t?e=ys(t,!1):t instanceof Uint8Array&&(e=t),this._decoder=es(e),this.height=this._decoder._height,this.width=this._decoder._width,this._bitsPerComponent=this._decoder._bitsPerComponent},Nc.prototype._save=function(){var t;this._imageStatus=!0,this._imageStream=this._decoder._getImageDictionary(),this._decoder&&this._decoder instanceof Xn&&(t=this._decoder,this._maskStream=t._maskStream,t._isDecode)&&!t._colorSpace||this._setColorSpace()},Nc.prototype._setColorSpace=function(){var t,e=this._imageStream.dictionary,i=e.get("ColorSpace");switch("DeviceCMYK"===i.name?t=x._PdfColorSpace.cmyk:"DeviceGray"===i.name&&(t=x._PdfColorSpace.grayScale),t=this._decoder instanceof Xn&&null!=this._decoder._colorSpace?x._PdfColorSpace.indexed:t){case x._PdfColorSpace.cmyk:e.update("Decode",[1,0,1,0,1,0,1,0]),e.update("ColorSpace",L.get("DeviceCMYK"));break;case x._PdfColorSpace.grayScale:e.update("Decode",[0,1]),e.update("ColorSpace",L.get("DeviceGray"));break;case x._PdfColorSpace.rgb:e.update("Decode",[0,1,0,1,0,1]),e.update("ColorSpace",L.get("DeviceRGB"));break;case x._PdfColorSpace.indexed:e.update("ColorSpace",this._decoder._colorSpace)}};var Cc,Tc,To=Nc;function Nc(t){var e=Tc.call(this)||this;return e._imageStatus=!0,e._initializeAsync(t),e}Object.defineProperty(Fc.prototype,"brush",{get:function(){return this._brush},set:function(t){this._brush=t},enumerable:!0,configurable:!0}),Object.defineProperty(Fc.prototype,"pen",{get:function(){return this._pen},set:function(t){this._pen=t},enumerable:!0,configurable:!0}),Object.defineProperty(Fc.prototype,"font",{get:function(){return this._font},set:function(t){this._font=t},enumerable:!0,configurable:!0}),Object.defineProperty(Fc.prototype,"stringFormat",{get:function(){return this._stringFormat},set:function(t){this._stringFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(Fc.prototype,"text",{get:function(){return this._text},set:function(t){this._text=t},enumerable:!0,configurable:!0}),Object.defineProperty(Fc.prototype,"textIndent",{get:function(){return this._textIndent},set:function(t){this._textIndent=t},enumerable:!0,configurable:!0}),Object.defineProperty(Fc.prototype,"subList",{get:function(){return this._subList},set:function(t){this._subList=t},enumerable:!0,configurable:!0});var Rc=Fc;function Fc(t,e){if(this._textIndent=0,null==t)throw new Error("Text cannot be null or undenfied.");this._text=t,e&&(e.font&&(this._font=e.font),e.format&&(this._stringFormat=e.format),e.pen&&(this._pen=e.pen),e.brush)&&(this._brush=e.brush)}Object.defineProperty(Dc.prototype,"count",{get:function(){return this._listItems.length},enumerable:!0,configurable:!0}),Dc.prototype.add=function(t,e){if(!t)throw new Error("item should not be null");this._listItems.push(t),e&&(t.textIndent=e)},Dc.prototype.at=function(t){if(null===t)throw new Error("index should not be null");return this._listItems[Number.parseInt(t.toString(),10)]},Dc.prototype.remove=function(t){if(!t)throw new Error("item should not be null");for(var e=!1,i=0;i<this._listItems.length;i++)if(this._listItems[Number.parseInt(i.toString(),10)]===t){e=!0,this._listItems.splice(Number.parseInt(i.toString(),10),1);break}if(!e)throw new Error("item collection does not contain the given content")},Dc.prototype.removeAt=function(t){if(t<0||t>=this._listItems.length)throw new Error("The index should be less than items count or equal to 0");this._listItems.splice(t,1)},Dc.prototype.clear=function(){this._listItems=[]},Dc.prototype.insert=function(t,e,i){if(t<0||t>this._listItems.length)throw new Error("Index should be within the range of items count (inclusive).");if(!e)throw new Error("Item cannot be null.");i&&(e.textIndent=i),this._listItems.splice(t,0,e)},Dc.prototype.indexOf=function(t){if(t)return this._listItems.indexOf(t);throw new Error("Item should be defined.")};var Lc=Dc;function Dc(t){var e=this;this._listItems||(this._listItems=[]),t&&t.forEach(function(t){e.add(new Rc(t))})}Bc=function(t,e){return(Bc=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}))(t,e)};var Bc,Oc=function(t,e){function i(){this.constructor=t}Bc(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Mc=(Object.defineProperty(Ec.prototype,"brush",{get:function(){return this._brush},set:function(t){this._brush=t},enumerable:!0,configurable:!0}),Object.defineProperty(Ec.prototype,"pen",{get:function(){return this._pen},set:function(t){this._pen=t},enumerable:!0,configurable:!0}),Object.defineProperty(Ec.prototype,"font",{get:function(){return this._font},set:function(t){this._font=t},enumerable:!0,configurable:!0}),Object.defineProperty(Ec.prototype,"stringFormat",{get:function(){return this._stringFormat},set:function(t){this._stringFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(Ec.prototype,"indent",{get:function(){return this._indent},set:function(t){this._indent=t},enumerable:!0,configurable:!0}),Object.defineProperty(Ec.prototype,"textIndent",{get:function(){return this._textIndent},set:function(t){this._textIndent=t},enumerable:!0,configurable:!0}),Object.defineProperty(Ec.prototype,"delimiter",{get:function(){return this._delimiter},set:function(t){this._delimiter=t},enumerable:!0,configurable:!0}),Object.defineProperty(Ec.prototype,"suffix",{get:function(){return this._suffix},set:function(t){this._suffix=t},enumerable:!0,configurable:!0}),Object.defineProperty(Ec.prototype,"enableHierarchy",{get:function(){return this._enableHierarchy},set:function(t){this._enableHierarchy=t},enumerable:!0,configurable:!0}),Object.defineProperty(Ec.prototype,"alignment",{get:function(){return this._alignment},set:function(t){this._alignment=t},enumerable:!0,configurable:!0}),Object.defineProperty(Ec.prototype,"items",{get:function(){return this._itemCollection},set:function(t){this._itemCollection=t},enumerable:!0,configurable:!0}),Object.defineProperty(Ec.prototype,"_markerRightToLeft",{get:function(){return this._alignment===x.PdfListMarkerAlignment.right},enumerable:!0,configurable:!0}),Ec.prototype.draw=function(t,e,i,r,n,s){if(t instanceof kn){if(t._isNew)return this._drawInternal(t,e,i,r,n,s);new Gc(this).layout(t.graphics,[e,i,0,0])}else new Gc(this).layout(t,[e,i,0,0])},Ec.prototype._drawInternal=function(t,e,i,r,n,s){var a=new Ic;return a._page=t,null==r?(a._bounds=[e,i,0,0],a._format=new vc):"number"==typeof r?(a._bounds=[e,i,r,n],a._format=s||new vc):r instanceof vc&&(a._bounds=[e,i,0,0],a._format=r),this._layout(a)},Ec.prototype._layout=function(t){return new Gc(this).layoutInternal(t)},Ec);function Ec(){this._textIndent=5,this._indent=10,this._alignment=x.PdfListMarkerAlignment.left,this._delimiter=".",this._suffix=".",this._enableHierarchy=!1,this._currentIndex=0,this._size=[0,0],this._defaultFont=new m(x.PdfFontFamily.helvetica,8)}Oc(zc,jc=Mc),Object.defineProperty(zc.prototype,"style",{get:function(){return this._style},set:function(t){this._style=t},enumerable:!0,configurable:!0}),Object.defineProperty(zc.prototype,"startNumber",{get:function(){return this._startNumber},set:function(t){if(t<=0)throw new Error("Start number should be greater than 0.");this._startNumber=t},enumerable:!0,configurable:!0}),zc.prototype._getNumber=function(){return Fa(this._startNumber+this._currentIndex,this._style)};var jc,Vc=zc;function zc(t,e){var i=jc.call(this)||this;return i._startNumber=1,i._itemCollection=t||new Lc,e?(e.font&&(i._font=e.font),e.format&&(i._stringFormat=e.format),e.pen&&(i._pen=e.pen),e.brush&&(i._brush=e.brush),e.style?i._style=e.style:i._style=x.PdfNumberStyle.numeric,e.indent&&(i._indent=e.indent),e.textIndent&&(i._textIndent=e.textIndent),e.alignment&&(i._alignment=e.alignment),e.delimiter&&(i._delimiter=e.delimiter),e.suffix&&(i._suffix=e.suffix)):i._style=x.PdfNumberStyle.numeric,i}Oc(Hc,Uc=Mc),Object.defineProperty(Hc.prototype,"style",{get:function(){return this._style},set:function(t){this._style=t},enumerable:!0,configurable:!0}),Hc.prototype._getStyledText=function(){switch(this._style){case x.PdfUnorderedListStyle.disk:return"l";case x.PdfUnorderedListStyle.square:return"n";case x.PdfUnorderedListStyle.asterisk:return"]";case x.PdfUnorderedListStyle.circle:return"m";default:return""}},Hc.prototype._draw=function(t,e,i,r,n){var s=new N([0,0,this._size[0],this._size[1]],t._crossReference),a=[0,0,0,0];n&&(a[0]=a[0]+n._width,a[1]=a[1]+n._width),s.graphics.drawString(this._getStyledText(),this._unicodeFont,a,n,r),t.drawTemplate(s,{x:e,y:i,width:s.size[0],height:s.size[1]})};var Uc,Oc=Hc;function Hc(t,e){var i=Uc.call(this)||this;return i._itemCollection=t||new Lc,e?(e.font&&(i._font=e.font),e.format&&(i._stringFormat=e.format),e.pen&&(i._pen=e.pen),e.brush&&(i._brush=e.brush),e.style?i._style=e.style:i._style=x.PdfUnorderedListStyle.disk,e.indent&&(i._indent=e.indent),e.textIndent&&(i._textIndent=e.textIndent),e.alignment&&(i._alignment=e.alignment),e.delimiter&&(i._delimiter=e.delimiter),e.suffix&&(i._suffix=e.suffix)):i._style=x.PdfUnorderedListStyle.disk,i}var Wc=function(t,e,i){this._list=t,this._index=e,this._number=i},Gc=(Kc.prototype.layout=function(t,e){this._graphics=t;t=new Ic;t._bounds=e,t._format=new vc,t._format.layout=x.PdfLayoutType.onePage,this.layoutInternal(t)},Kc.prototype.layoutInternal=function(t){this._currentPage=t._page,this._bounds=t._bounds.slice(),this._currentPage&&(0===t._bounds[2]&&0===t._bounds[3]&&(e=this._currentPage.graphics.clientSize,this._bounds[2]=e[0]-this._bounds[0],this._bounds[3]=e[1]-this._bounds[1]),this._graphics=this._currentPage.graphics);for(var e,i=new kc,r=(i.broken=!1,i.y=this._bounds[1],this._curList=this._element,this._indent=this._curList.indent,this._setCurrentParameters(this._curList),this._curList.brush||(this._currentBrush=new I([0,0,0])),this._curList.font||(this._currentFont=this._curList._defaultFont),this._curList instanceof Vc&&(this._markerMaxWidth=this._getMarkerMaxWidth(this._curList,this._information)),t._format.layout===x.PdfLayoutType.onePage);!this._finish&&(i.y=this._bounds[1],i=this._layoutOnPage(i),!r);)this._currentPage&&!this._finish&&(this._currentPage=this._getNextPage(this._currentPage)),this._graphics=this._currentPage.graphics,0===t._bounds[2]&&0===t._bounds[3]&&(e=this._currentPage.graphics.clientSize,this._bounds[2]=e[0]-this._bounds[0],this._bounds[3]=e[1]-this._bounds[1]),t._format&&t._format.usePaginateBounds&&this._usePaginateBounds&&(this._bounds=t._format._paginateBounds);this._information=[];var n=[this._bounds[0],i.y,this._bounds[2],this._resultHeight],n=new Ac(this._currentPage,n);return this._currentFormat&&(this._currentFormat._isList=!1),n},Kc.prototype._layoutOnPage=function(t){var e=0,i=0,r=this._bounds[1],n=this._bounds[0];for(this._size=[this._bounds[2]-this._indent,this._bounds[3]];;){for(;this._index<this._curList.items.count;++this._index){var s,a=this._curList.items.at(this._index),o=this._drawItem(t,n,this._curList,this._index,this._indent,this._information,a,e,r);if(t=o.pageResult,e=o.height,r=o.y,i+=e,t.broken)return t;t.markerWrote=!1,a.subList&&0<a.subList.items.count&&(this._curList instanceof Vc?((o=this._curList)._currentIndex=this._index,(s=new Wc(this._curList,this._index,o._getNumber()))._brush=this._currentBrush,s._font=this._currentFont,s._format=this._currentFormat,s._pen=this._currentPen,s._markerWidth=this._markerMaxWidth):((s=new Wc(this._curList,this._index))._brush=this._currentBrush,s._font=this._currentFont,s._format=this._currentFormat,s._pen=this._currentPen),this._information.push(s),this._curList=a.subList,this._curList instanceof Vc&&(this._markerMaxWidth=this._getMarkerMaxWidth(this._curList,this._information)),this._index=-1,this._indent+=this._curList.indent,this._size[0]=this._size[0]-this._curList.indent,this._setCurrentParameters(a),this._setCurrentParameters(this._curList))}if(0===this._information.length){this._resultHeight=i,this._finish=!0;break}var h=this._information.pop();this._index=h._index+1,this._indent-=this._curList.indent,this._size[0]=this._size[0]+this._curList.indent,this._markerMaxWidth=h._markerWidth,this._currentBrush=h._brush,this._currentPen=h._pen,this._currentFont=h._font,this._currentFormat=h._format,this._curList=h._list}return t},Kc.prototype._drawItem=function(t,e,i,r,n,s,a,o,h){var c,_=new rt,d=i.textIndent,p=o+h,l=n+e,e=0,u=this._size,f=a.text,g=this._currentBrush,y=0,m=(a.brush&&(g=a.brush),this._currentPen),b=(a.pen&&(m=a.pen),this._currentFont),S=(a.font&&(b=a.font),this._currentFormat);if(a.stringFormat&&(S=a.stringFormat),(this._size[0]<=0||this._size[0]<b.size)&&this._currentPage)throw new Error("There is not enough space to layout list.");this._size[1]=this._size[1]-o,t.broken&&(f=t.itemText,v=t.markerText);var w=!0,r=this._createMarkerResult(r,i,s,a);if(r?(i instanceof Vc?(l+=this._markerMaxWidth,t.markerWidth=this._markerMaxWidth):(l+=r._actualSize[0],t.markerWidth=r._actualSize[0]),y=r._actualSize[1],this._currentPage&&(w=y<this._size[1]),r._empty&&(w=!1)):(l+=i._size[0],t.markerWidth=i._size[0],y=i._size[1],this._currentPage&&(w=y<this._size[1])),v&&""!==v||(w=!0),f&&w){if((u=this._size)[0]=u[0]-t.markerWidth,0===a.textIndent?u[0]=u[0]-d:u[0]=u[0]-a.textIndent,(u[0]<=0||u[0]<b.size)&&this._currentPage)throw new Error("Not enough space to layout the text. The marker is too long or there is not enough space to draw it.");var s=l,v=(i._markerRightToLeft?(s-=t.markerWidth,!S||S.alignment!==x.PdfTextAlignment.right&&S.alignment!==x.PdfTextAlignment.center||(s-=n)):0===a.textIndent?s+=d:s+=a.textIndent,!this._currentPage&&S&&((S=Object.assign({},S)).alignment=x.PdfTextAlignment.left),c=_._layout(f,b,S,u),[s,p,u[0],u[1]]);this._graphics._drawStringLayoutResult(c,b,m,g,v,S),h=p,e=c._actualSize[1]}if(o=e<y?y:e,c&&c._remainder&&""!==c._remainder||r&&r._remainder&&""!==r._remainder||!w?(o=h=0,c?(t.itemText=c._remainder,c._remainder===a.text&&(w=!1)):t.itemText=w?void 0:a.text,t.markerText=r?r._remainder:void 0,t.broken=!0,t.y=0,this._bounds[1]=0):t.broken=!1,c){if(t.markerX=l,S)switch(S.alignment){case x.PdfTextAlignment.right:t.markerX=l+u[0]-c._actualSize[0];break;case x.PdfTextAlignment.center:t.markerX=l+u[0]/2-c._actualSize[0]/2}i._markerRightToLeft&&(t.markerX+=c._actualSize[0],0===a.textIndent?t.markerX+=d:t.markerX+=a.textIndent,!S||S.alignment!==x.PdfTextAlignment.right&&S.alignment!==x.PdfTextAlignment.center||(t.markerX-=n))}return w&&!t.markerWrote&&(t.markerWrote=this._drawMarker(i,a,r,p,t.markerX),i instanceof Vc?t.markerWidth=r._actualSize[0]:t.markerWidth=i._size[0]),{pageResult:t,height:o,y:h}},Kc.prototype._createMarkerResult=function(t,e,i,r){return e instanceof Vc?this._createOrderedMarkerResult(e,r,t,i,!1):this._createUnorderedMarkerResult(e,r)},Kc.prototype._drawMarker=function(t,e,i,r,n){return t instanceof Vc?t.font&&i&&(t.font.size>i._actualSize[1]&&(r+=t.font.size/2-i._actualSize[1]/2,i._actualSize[1]=i._actualSize[1]+r),this._drawOrderedMarker(t,i,e,n,r)):(t.font&&i&&t.font.size>i._actualSize[1]&&(r+=t.font.size/2-i._actualSize[1]/2,i._actualSize[1]=i._actualSize[1]+r),this._drawUnorderedMarker(t,i,e,n,r)),!0},Kc.prototype._drawUnorderedMarker=function(t,e,i,r,n){var s=this._getMarkerFont(t,i),a=this._getMarkerPen(t,i),i=this._getMarkerBrush(t,i);e?(t._size=e._actualSize,t._unicodeFont=new m(x.PdfFontFamily.zapfDingbats,s.size),t._draw(this._graphics,r-e._actualSize[0],n,i,a)):(t._size=[s.size,s.size],t._draw(this._graphics,r-s.size,n,i,a))},Kc.prototype._drawOrderedMarker=function(t,e,i,r,n){var s=this._getMarkerFont(t,i),a=this._getMarkerPen(t,i),o=this._getMarkerBrush(t,i),r=[r-this._markerMaxWidth,n,this._markerMaxWidth,e._actualSize[1]],n=this._setMarkerStringFormat(t,this._getMarkerFormat(t,i));this._graphics._drawStringLayoutResult(e,s,a,o,r,n)},Kc.prototype._setCurrentParameters=function(t){t.brush&&(this._currentBrush=t.brush),t.pen&&(this._currentPen=t.pen),t.font&&(this._currentFont=t.font),t.stringFormat&&(this._currentFormat=t.stringFormat,t instanceof Mc)&&(this._currentFormat._isList=!0)},Kc.prototype._getMarkerMaxWidth=function(t,e){for(var i=-1,r=0;r<t.items.count;r++){var n=this._createOrderedMarkerResult(t,t.items.at(r),r+t.startNumber,e,!0);i<n._actualSize[0]&&(i=n._actualSize[0])}return i},Kc.prototype._createUnorderedMarkerResult=function(t,e){var e=this._getMarkerFont(t,e),i=new rt,e=new m(x.PdfFontFamily.zapfDingbats,e.size),i=i._layout(t._getStyledText(),e,null,this._size);return t._size=i._actualSize,t.pen&&(i._size=[i._actualSize[0]+2*t.pen._width,i._actualSize[1]+2*t.pen._width]),i},Kc.prototype._createOrderedMarkerResult=function(t,e,i,r,n){t._currentIndex=i;var s="";if(t.style!==x.PdfNumberStyle.none&&(s=t._getNumber()+t.suffix),t.enableHierarchy)for(var a=r.slice(),o=0;o<a.length;o++){var h=a[Number.parseInt(o.toString(),10)],c=h._list;if(!(c&&c instanceof Vc&&c.style!==x.PdfNumberStyle.none))break;if(s=h._number+c.delimiter+s,!c.enableHierarchy)break}var i=new rt,r=this._getMarkerFont(t,e),e=this._getMarkerFormat(t,e),_=[0,0];return n||(_[0]=this._markerMaxWidth,e=this._setMarkerStringFormat(t,e)),i._layout(s,r,e,_)},Kc.prototype._setMarkerStringFormat=function(t,e){return e=e?Object.assign({},e):new k,t.stringFormat||(e.alignment=x.PdfTextAlignment.right,t._markerRightToLeft&&(e.alignment=x.PdfTextAlignment.left)),!this._currentPage&&e&&((e=Object.assign({},e)).alignment=x.PdfTextAlignment.left),e},Kc.prototype._getMarkerFont=function(t,e){var i=(i=(i=t.font)||e.font)||this._currentFont;return t.font=i},Kc.prototype._getMarkerFormat=function(t,e){t=t.stringFormat;return t=(t=t||e.stringFormat)||this._currentFormat},Kc.prototype._getMarkerPen=function(t,e){t=t.pen;return t=(t=t||e.pen)||this._currentPen},Kc.prototype._getMarkerBrush=function(t,e){t=t.brush;return t=(t=t||e.brush)||this._currentBrush},Kc.prototype._getNextPage=function(t){var e=t._crossReference._document;return t._pageIndex<e.pageCount-1?e.getPage(t._pageIndex+1):e.addPage()},Kc);function Kc(t){this._indent=0,this._information=[],this._markerMaxWidth=0,this._finish=!1,this._usePaginateBounds=!0,this._resultHeight=0,this._size=[0,0],this._index=0,this._element=t}x.BaseException=ga,x.Dictionary=Ya,x.FormatError=v,x.ParserEndOfFileException=ba,x.Pdf3DAnnotation=mr,x.PdfAction=Ee,x.PdfAngleMeasurementAnnotation=qi,x.PdfAnnotation=vi,x.PdfAnnotationBorder=an,x.PdfAnnotationCaption=Zr,x.PdfAnnotationCollection=pn,x.PdfAnnotationExportSettings=dc,x.PdfAnnotationLineEndingStyle=tn,x.PdfAppearance=bi,x.PdfAttachmentAnnotation=fr,x.PdfBitmap=To,x.PdfBookmark=Sn,x.PdfBookmarkBase=yn,x.PdfBorderEffect=hn,x.PdfBrush=I,x.PdfButtonField=Ye,x.PdfCheckBoxField=ti,x.PdfCircleAnnotation=Ni,x.PdfCjkStandardFont=Jt,x.PdfComboBoxField=ci,x.PdfComment=Ai,x.PdfDestination=Cn,x.PdfDocument=_c,x.PdfDocumentLinkAnnotation=cr,x.PdfDocumentSplitEventArgs=bc,x.PdfEllipseAnnotation=Li,x.PdfField=Ke,x.PdfFieldActions=He,x.PdfFileLinkAnnotation=rr,x.PdfFileStructure=Yh,x.PdfFont=Gt,x.PdfForm=zh,x.PdfFormFieldExportSettings=lc,x.PdfFreeTextAnnotation=Lr,x.PdfGoToAction=ze,x.PdfGraphics=_e,x.PdfGraphicsState=fe,x.PdfImage=he,x.PdfInkAnnotation=Yi,x.PdfInteractiveBorder=rn,x.PdfLayer=sc,x.PdfLayerCollection=oc,x.PdfLayoutFormat=vc,x.PdfLayoutResult=Ac,x.PdfLineAnnotation=Ii,x.PdfList=Mc,x.PdfListBoxField=pi,x.PdfListField=ai,x.PdfListFieldItem=Jr,x.PdfListItem=Rc,x.PdfListItemCollection=Lc,x.PdfMargins=yc,x.PdfNamedDestination=vn,x.PdfOrderedList=Vc,x.PdfPage=kn,x.PdfPageImportOptions=$h,x.PdfPageSettings=fc,x.PdfPath=C,x.PdfPen=T,x.PdfPolyLineAnnotation=Gi,x.PdfPolygonAnnotation=Ui,x.PdfPopupAnnotation=tr,x.PdfPopupAnnotationCollection=un,x.PdfPredictorStream=zo,x.PdfRadioButtonListField=ri,x.PdfRadioButtonListItem=Xr,x.PdfRectangleAnnotation=ji,x.PdfRedactionAnnotation=Br,x.PdfRichMediaAnnotation=Er,x.PdfRubberStampAnnotation=Ir,x.PdfSection=hc,x.PdfSignatureField=fi,x.PdfSoundAnnotation=Nr,x.PdfSquareAnnotation=Oi,x.PdfStandardFont=m,x.PdfStateItem=Wr,x.PdfStringFormat=k,x.PdfTemplate=N,x.PdfTextBoxField=qe,x.PdfTextMarkupAnnotation=wr,x.PdfTextWebLinkAnnotation=pr,x.PdfTrueTypeFont=$t,x.PdfUnorderedList=Oc,x.PdfUriAnnotation=ar,x.PdfWatermarkAnnotation=Ar,x.PdfWidgetAnnotation=zr,x._AdvancedEncryption=sh,x._AdvancedEncryption128Cipher=fh,x._AdvancedEncryption256Cipher=mh,x._AdvancedEncryptionBaseCipher=ph,x._ArabicShape=Mt,x._ArabicShapeRenderer=Bt,x._BasicEncryption=ih,x._Bidirectional=Et,x._BigEndianWriter=Rt,x._Cipher=oh,x._CipherTransform=Ph,x._CjkDifferentWidth=et,x._CjkSameWidth=Z,x._CjkWidth=J,x._CjkWidthTable=q,x._ContentLexer=yo,x._ContentParser=fo,x._DecompressedOutput=Bn,x._DeflateStream=Hn,x._EncryptionKey=$o,x._ExportHelper=Ie,x._FdfDocument=Wh,x._FdfHelper=Kh,x._FontStructure=Re,x._HuffmanTree=jn,x._ImageDecoder=e,x._InBuffer=Mn,x._Inflater=zn,x._JpegDecoder=Ln,x._JsonDocument=Be,x._LineInfo=ot,x._Linearization=Rh,x._MD5=Ko,x._Matrix=le,x._Namespace=Se,x._NormalCipherFour=ch,x._NullCipher=wh,x._PageLayoutResult=kc,x._PaintParameter=_n,x._PdfBaseStream=y,x._PdfCatalog=Mo,x._PdfCjkFontDescriptorFactory=ne,x._PdfCjkStandardFontMetricsFactory=ie,x._PdfCommand=Wa,x._PdfContentStream=co,x._PdfCopier=rc,x._PdfCrossReference=Lh,x._PdfDecodeStream=l,x._PdfDecryptStream=xo,x._PdfDefaultAppearance=yi,x._PdfDictionary=D,x._PdfEncryptor=Wo,x._PdfFlateStream=Bo,x._PdfFontMetrics=z,x._PdfLayoutParameters=Ic,x._PdfLexicalOperator=Ih,x._PdfListInfo=Wc,x._PdfListLayouter=Gc,x._PdfMergeHelper=ec,x._PdfName=L,x._PdfNamedDestinationCollection=An,x._PdfNull=to,x._PdfNullStream=lo,x._PdfPaddings=wc,x._PdfParser=Th,x._PdfRecord=bo,x._PdfReference=A,x._PdfReferenceSet=Xa,x._PdfReferenceSetCache=Qa,x._PdfStandardFontMetricsFactory=ee,x._PdfStream=g,x._PdfStreamWriter=E,x._PdfStringLayoutResult=st,x._PdfStringLayouter=rt,x._PdfTransformationMatrix=de,x._PdfUnitConvertor=ye,x._PngDecoder=Xn,x._RtlCharacters=Vt,x._RtlRenderer=Ut,x._Sha256=qo,x._Sha512=Jo,x._StandardWidthTable=G,x._StringTokenizer=ht,x._TrueTypeAppleCmapSubTable=St,x._TrueTypeCmapSubTable=bt,x._TrueTypeCmapTable=mt,x._TrueTypeGlyph=It,x._TrueTypeGlyphHeader=Nt,x._TrueTypeHeadTable=yt,x._TrueTypeHorizontalHeaderTable=gt,x._TrueTypeLocaTable=Tt,x._TrueTypeLongHorMetric=kt,x._TrueTypeMetrics=At,x._TrueTypeMicrosoftCmapSubTable=ft,x._TrueTypeNameRecord=Pt,x._TrueTypeNameTable=ut,x._TrueTypeOS2Table=pt,x._TrueTypePostTable=lt,x._TrueTypeReader=vt,x._TrueTypeTableInfo=_t,x._TrueTypeTrimmedCmapSubTable=wt,x._UnicodeLine=ae,x._UnicodeTrueTypeFont=Lt,x._WidthTable=H,x._Word64=B,x._XfdfDocument=Ne,x._XmlAttribute=Ae,x._XmlDocument=Qh,x._XmlElement=ve,x._XmlWriter=be,x._addProcSet=Ms,x._annotationFlagsToString=ns,x._appendChar=Ba,x._arabicToLetter=Da,x._arabicToRoman=La,x._areArrayEqual=os,x._areNotEqual=cs,x._byteArrayToHexString=ls,x._bytesToString=_s,x._calculateBounds=vs,x._checkComment=da,x._checkField=Us,x._checkInkPoints=ka,x._checkReview=_a,x._checkRotation=is,x._checkType=ts,x._clearPrimitiveCaches=eo,x._compressStream=Oa,x._convertNumber=Fa,x._convertToColor=ks,x._copyRange=$n,x._decode=ys,x._decodeText=Ta,x._decodeUnicodeBytes=ds,x._defaultToString=wa,x._defineProperty=function(t,e,i,r){return void 0===r&&(r=!1),Object.defineProperty(t,e,{value:i,enumerable:!r,configurable:!0,writable:!1}),i},x._emptyPdfData="JVBERi0xLjQNCiWDkvr+DQoxIDAgb2JqDQo8PA0KL1R5cGUgL0NhdGFsb2cNCi9QYWdlcyAyIDAgUg0KL0Fjcm9Gb3JtIDMgMCBSDQo+Pg0KZW5kb2JqDQoyIDAgb2JqDQo8PA0KL1R5cGUgL1BhZ2VzDQovS2lkcyBbNCAwIFJdDQovQ291bnQgMQ0KL1Jlc291cmNlcyA8PD4+DQoNCi9NZWRpYUJveCBbLjAwIC4wMCA1OTUuMDAgODQyLjAwXQ0KL1JvdGF0ZSAwDQo+Pg0KZW5kb2JqDQozIDAgb2JqDQo8PA0KL0ZpZWxkcyBbXQ0KPj4NCmVuZG9iag0KNCAwIG9iag0KPDwNCi9Db3VudCAxDQovVHlwZSAvUGFnZXMNCi9LaWRzIFs1IDAgUl0NCi9QYXJlbnQgMiAwIFINCj4+DQplbmRvYmoNCjUgMCBvYmoNCjw8DQovVHlwZSAvUGFnZQ0KL1BhcmVudCA0IDAgUg0KPj4NCmVuZG9iag0KeHJlZg0KMCA2DQowMDAwMDAwMDAwIDY1NTM1IGYNCjAwMDAwMDAwMTcgMDAwMDAgbg0KMDAwMDAwMDA4OSAwMDAwMCBuDQowMDAwMDAwMjE4IDAwMDAwIG4NCjAwMDAwMDAyNTUgMDAwMDAgbg0KMDAwMDAwMDMzNCAwMDAwMCBuDQp0cmFpbGVyDQo8PA0KL1Jvb3QgMSAwIFINCi9TaXplIDYNCj4+DQoNCnN0YXJ0eHJlZg0KMzg3DQolJUVPRg0K",x._encode=bs,x._encodeValue=function(t){for(var e="",i=0;i<t.length;i++){var r=255&t.charCodeAt(i),n=String.fromCharCode(r),s="";switch(n){case" ":case"%":case"(":case")":case"<":case">":case"[":case"]":case"{":case"}":case"/":case"#":e=(e+="#")+(1===(s=r.toString(16).toUpperCase()).length?"0"+s:s);break;default:126<r||r<37?e=(e+="#")+(1===(s=r.toString(16).toUpperCase()).length?"0"+s:s):e+=n}}return e},x._escapePdfName=js,x._findPage=zs,x._floatToString=Os,x._fromRectangle=As,x._getBezierArc=Vs,x._getColorValue=Gs,x._getCommentsOrReview=function(t,e){return e?t.reviewHistory:t.comments},x._getDecoder=es,x._getFontStyle=Pa,x._getInheritableProperty=Ss,x._getItemValue=Hs,x._getLatinCharacter=ca,x._getNewGuidString=Es,x._getPageIndex=rs,x._getSize=Na,x._getSpecialCharacter=ha,x._getStateTemplate=Ws,x._getUpdatedBounds=xs,x._hexStringToByteArray=us,x._hexStringToString=fs,x._isArrayEqual=function(t,e){if(t.length!==e.length)return!1;for(var i=0,r=t.length;i<r;i++)if(t[Number.parseInt(i.toString(),10)]!==e[Number.parseInt(i.toString(),10)])return!1;return!0},x._isCommand=ro,x._isName=io,x._isNullOrUndefined=F,x._isRightToLeftCharacters=Ma,x._isWhiteSpace=gs,x._mapAnnotationIntent=aa,x._mapAnnotationState=ia,x._mapAnnotationStateModel=na,x._mapAttachmentIcon=sa,x._mapBlendMode=Bs,x._mapBorderEffectStyle=Ts,x._mapBorderStyle=Cs,x._mapFont=Aa,x._mapGraphicsUnit=Zs,x._mapHighlightMode=Fs,x._mapLineEndingStyle=Rs,x._mapMarkupAnnotationType=Js,x._mapMeasurementUnit=Qs,x._mapPopupIcon=ta,x._mapRubberStampIcon=$s,x._numberToString=hs,x._obtainDestination=Ia,x._obtainFontDetails=va,x._parseColor=Is,x._parseRectangle=ws,x._removeDuplicateFromResources=la,x._removeDuplicateReference=R,x._removeReferences=ua,x._reverseMapAnnotationState=ea,x._reverseMapAnnotationStateModel=ra,x._reverseMapBlendMode=Ds,x._reverseMapEndingStyle=Ns,x._reverseMapHighlightMode=Ls,x._reverseMapPdfFontStyle=oa,x._reverseMarkupAnnotationType=Ys,x._setMatrix=Ks,x._stringToAnnotationFlags=ss,x._stringToBigEndianBytes=Ra,x._stringToBytes=w,x._stringToPdfString=as,x._stringToStyle=qs,x._stringToUnicodeArray=ps,x._styleToString=Xs,x._toRectangle=Ps,x._toSigned16=Yn,x._toSigned32=Zn,x._toUnsigned=f,x._tryParseFontStream=xa,x._updateBounds=Ca,x._updatePageCount=Ea,x._updatePageSettings=ja,x._updateVisibility=pa,Object.defineProperty(x,"__esModule",{value:!0})});
//# sourceMappingURL=ej2-pdf.umd.min.js.map
